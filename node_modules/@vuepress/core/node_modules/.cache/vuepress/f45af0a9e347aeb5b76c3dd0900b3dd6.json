{"remainingRequest":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\node_modules\\gitalk\\dist\\gitalk.js","dependencies":[{"path":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\node_modules\\gitalk\\dist\\gitalk.js","mtime":1591948918348},{"path":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591862511060},{"path":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\node_modules\\babel-loader\\lib\\index.js","mtime":1591862511204}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmV2ZXJ5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmlzLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuaXMtdmlldyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUubm93Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1pc28tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1qc29uIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5iaW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5jcmVhdGUiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LW5hbWVzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMtZXh0ZW5zaWJsZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnByZXZlbnQtZXh0ZW5zaW9ucyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1jbGFtcGVkLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmltbWVkaWF0ZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uIik7Cgp2YXIgX3R5cGVvZjQgPSByZXF1aXJlKCJEOi9cdTk4NzlcdTc2RUUvTXlfcHJvamVjdC92dWVwcmVzcy1zdGFydGVyL3Z1ZXByZXNzLXN0YXJ0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIik7CgooZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkgewogIGlmICgodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mNChleHBvcnRzKSkgPT09ICdvYmplY3QnICYmICh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZjQobW9kdWxlKSkgPT09ICdvYmplY3QnKSBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIGRlZmluZShbXSwgZmFjdG9yeSk7ZWxzZSBpZiAoKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZjQoZXhwb3J0cykpID09PSAnb2JqZWN0JykgZXhwb3J0c1siR2l0YWxrIl0gPSBmYWN0b3J5KCk7ZWxzZSByb290WyJHaXRhbGsiXSA9IGZhY3RvcnkoKTsKfSkodGhpcywgZnVuY3Rpb24gKCkgewogIHJldHVybiAoCiAgICAvKioqKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZXMpIHsKICAgICAgLy8gd2VicGFja0Jvb3RzdHJhcAoKICAgICAgLyoqKioqKi8KICAgICAgLy8gVGhlIG1vZHVsZSBjYWNoZQoKICAgICAgLyoqKioqKi8KICAgICAgdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCgogICAgICAvKioqKioqLwoKICAgICAgZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewogICAgICAgIC8qKioqKiovCgogICAgICAgIC8qKioqKiovCiAgICAgICAgLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCgogICAgICAgIC8qKioqKiovCiAgICAgICAgaWYgKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7CiAgICAgICAgICAvKioqKioqLwogICAgICAgICAgcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CiAgICAgICAgICAvKioqKioqLwogICAgICAgIH0KICAgICAgICAvKioqKioqLwogICAgICAgIC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCgogICAgICAgIC8qKioqKiovCgoKICAgICAgICB2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7CiAgICAgICAgICAvKioqKioqLwogICAgICAgICAgaTogbW9kdWxlSWQsCgogICAgICAgICAgLyoqKioqKi8KICAgICAgICAgIGw6IGZhbHNlLAoKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICBleHBvcnRzOiB7fQogICAgICAgICAgLyoqKioqKi8KCiAgICAgICAgfTsKICAgICAgICAvKioqKioqLwoKICAgICAgICAvKioqKioqLwogICAgICAgIC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgoKICAgICAgICAvKioqKioqLwoKICAgICAgICBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKICAgICAgICAvKioqKioqLwoKICAgICAgICAvKioqKioqLwogICAgICAgIC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKCiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgbW9kdWxlLmwgPSB0cnVlOwogICAgICAgIC8qKioqKiovCgogICAgICAgIC8qKioqKiovCiAgICAgICAgLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKCiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgICAgIC8qKioqKiovCiAgICAgIH0KICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQoKICAgICAgLyoqKioqKi8KCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKCiAgICAgIC8qKioqKiovCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzCgogICAgICAvKioqKioqLwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24gKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewogICAgICAgIC8qKioqKiovCiAgICAgICAgaWYgKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewogICAgICAgICAgICAvKioqKioqLwogICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAoKICAgICAgICAgICAgLyoqKioqKi8KICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKCiAgICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICAgIGdldDogZ2V0dGVyCiAgICAgICAgICAgIC8qKioqKiovCgogICAgICAgICAgfSk7CiAgICAgICAgICAvKioqKioqLwogICAgICAgIH0KICAgICAgICAvKioqKioqLwoKICAgICAgfTsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCgogICAgICAvKioqKioqLwoKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uIChtb2R1bGUpIHsKICAgICAgICAvKioqKioqLwogICAgICAgIHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwogICAgICAgIC8qKioqKiovCiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsKICAgICAgICAgIHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsKICAgICAgICB9IDoKICAgICAgICAvKioqKioqLwogICAgICAgIGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7CiAgICAgICAgICByZXR1cm4gbW9kdWxlOwogICAgICAgIH07CiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwogICAgICAgIC8qKioqKiovCgoKICAgICAgICByZXR1cm4gZ2V0dGVyOwogICAgICAgIC8qKioqKiovCiAgICAgIH07CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwKCiAgICAgIC8qKioqKiovCgoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24gKG9iamVjdCwgcHJvcGVydHkpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOwogICAgICB9OwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KCiAgICAgIC8qKioqKiovCgoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIi9kaXN0IjsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwoKICAgICAgLyoqKioqKi8KCiAgICAgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDgyKTsKICAgICAgLyoqKioqKi8KICAgIH0oCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgIC8qKioqKiovCiAgICBbCiAgICAvKiAwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgdmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICB2ZXJzaW9uOiAnMi42LjExJwogICAgICB9OwogICAgICBpZiAodHlwZW9mIF9fZSA9PSAnbnVtYmVyJykgX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKICAgICAgdmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwogICAgICA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CiAgICAgIGlmICh0eXBlb2YgX19nID09ICdudW1iZXInKSBfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBzdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpKCd3a3MnKTsKCiAgICAgIHZhciB1aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTsKCiAgICAgIHZhciBfU3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5TeW1ib2w7CgogICAgICB2YXIgVVNFX1NZTUJPTCA9IHR5cGVvZiBfU3ltYm9sID09ICdmdW5jdGlvbic7CgogICAgICB2YXIgJGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9IFVTRV9TWU1CT0wgJiYgX1N5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IF9TeW1ib2wgOiB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTsKICAgICAgfTsKCiAgICAgICRleHBvcnRzLnN0b3JlID0gc3RvcmU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBiaW5kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7CiAgICAgIC8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqLwogICAgICAvLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvcwoKCiAgICAgIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgogICAgICBmdW5jdGlvbiBpc0FycmF5KHZhbCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQnVmZmVyCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCdWZmZXIsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHsKICAgICAgICByZXR1cm4gdmFsICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwpICYmIHZhbC5jb25zdHJ1Y3RvciAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsLmNvbnN0cnVjdG9yKSAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlcgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkgewogICAgICAgIHJldHVybiB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHsKICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcpIHsKICAgICAgICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSB2YWwgJiYgdmFsLmJ1ZmZlciAmJiB2YWwuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZwogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlcgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3QKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc09iamVjdCh2YWwpIHsKICAgICAgICByZXR1cm4gdmFsICE9PSBudWxsICYmIF90eXBlb2Y0KHZhbCkgPT09ICdvYmplY3QnOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGUKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0RhdGUodmFsKSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGUKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0ZpbGUodmFsKSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2IKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0Jsb2IodmFsKSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW0KICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkgewogICAgICAgIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmcKICAgICAgICoKICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW0KICAgICAgICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiB0cmltKHN0cikgewogICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXlxzKi8sICcnKS5yZXBsYWNlKC9ccyokLywgJycpOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQKICAgICAgICoKICAgICAgICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS4KICAgICAgICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLgogICAgICAgKgogICAgICAgKiB3ZWIgd29ya2VyczoKICAgICAgICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkCiAgICAgICAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkCiAgICAgICAqCiAgICAgICAqIHJlYWN0LW5hdGl2ZToKICAgICAgICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZScKICAgICAgICogbmF0aXZlc2NyaXB0CiAgICAgICAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnTmF0aXZlU2NyaXB0JyBvciAnTlMnCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAobmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScgfHwgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdOYXRpdmVTY3JpcHQnIHx8IG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLgogICAgICAgKgogICAgICAgKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nCiAgICAgICAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLgogICAgICAgKgogICAgICAgKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZwogICAgICAgKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikgewogICAgICAgIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZAogICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZQoKCiAgICAgICAgaWYgKF90eXBlb2Y0KG9iaikgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi8KICAgICAgICAgIG9iaiA9IFtvYmpdOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzQXJyYXkob2JqKSkgewogICAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlcwogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXMKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW4KICAgICAgICogaW1tdXRhYmx5IG1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiBlYWNoIG9iamVjdCBhbmQgcmV0dXJucyByZXN1bHQuCiAgICAgICAqCiAgICAgICAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluCiAgICAgICAqIHRoZSBhcmd1bWVudHMgbGlzdCB3aWxsIHRha2UgcHJlY2VkZW5jZS4KICAgICAgICoKICAgICAgICogRXhhbXBsZToKICAgICAgICoKICAgICAgICogYGBganMKICAgICAgICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pOwogICAgICAgKiBjb25zb2xlLmxvZyhyZXN1bHQuZm9vKTsgLy8gb3V0cHV0cyA0NTYKICAgICAgICogYGBgCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZQogICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXMKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gbWVyZ2UoKQogICAgICAvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8KICAgICAgewogICAgICAgIHZhciByZXN1bHQgPSB7fTsKCiAgICAgICAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHsKICAgICAgICAgIGlmIChfdHlwZW9mNChyZXN1bHRba2V5XSkgPT09ICdvYmplY3QnICYmIF90eXBlb2Y0KHZhbCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEZ1bmN0aW9uIGVxdWFsIHRvIG1lcmdlIHdpdGggdGhlIGRpZmZlcmVuY2UgYmVpbmcgdGhhdCBubyByZWZlcmVuY2UKICAgICAgICogdG8gb3JpZ2luYWwgb2JqZWN0cyBpcyBrZXB0LgogICAgICAgKgogICAgICAgKiBAc2VlIG1lcmdlCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZQogICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXMKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZGVlcE1lcmdlKCkKICAgICAgLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovCiAgICAgIHsKICAgICAgICB2YXIgcmVzdWx0ID0ge307CgogICAgICAgIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7CiAgICAgICAgICBpZiAoX3R5cGVvZjQocmVzdWx0W2tleV0pID09PSAnb2JqZWN0JyAmJiBfdHlwZW9mNCh2YWwpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZShyZXN1bHRba2V5XSwgdmFsKTsKICAgICAgICAgIH0gZWxzZSBpZiAoX3R5cGVvZjQodmFsKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBkZWVwTWVyZ2Uoe30sIHZhbCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWQKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbQogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG8KICAgICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7CiAgICAgICAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkgewogICAgICAgICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhW2tleV0gPSB2YWw7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgIGlzQXJyYXk6IGlzQXJyYXksCiAgICAgICAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlciwKICAgICAgICBpc0J1ZmZlcjogaXNCdWZmZXIsCiAgICAgICAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSwKICAgICAgICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsCiAgICAgICAgaXNTdHJpbmc6IGlzU3RyaW5nLAogICAgICAgIGlzTnVtYmVyOiBpc051bWJlciwKICAgICAgICBpc09iamVjdDogaXNPYmplY3QsCiAgICAgICAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLAogICAgICAgIGlzRGF0ZTogaXNEYXRlLAogICAgICAgIGlzRmlsZTogaXNGaWxlLAogICAgICAgIGlzQmxvYjogaXNCbG9iLAogICAgICAgIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sCiAgICAgICAgaXNTdHJlYW06IGlzU3RyZWFtLAogICAgICAgIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcywKICAgICAgICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsCiAgICAgICAgZm9yRWFjaDogZm9yRWFjaCwKICAgICAgICBtZXJnZTogbWVyZ2UsCiAgICAgICAgZGVlcE1lcmdlOiBkZWVwTWVyZ2UsCiAgICAgICAgZXh0ZW5kOiBleHRlbmQsCiAgICAgICAgdHJpbTogdHJpbQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCiAgICAgIHZhciBjdHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKCiAgICAgIHZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7CgogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7CgogICAgICB2YXIgJGV4cG9ydCA9IGZ1bmN0aW9uICRleHBvcnQodHlwZSwgbmFtZSwgc291cmNlKSB7CiAgICAgICAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkY7CiAgICAgICAgdmFyIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0Lkc7CiAgICAgICAgdmFyIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlM7CiAgICAgICAgdmFyIElTX1BST1RPID0gdHlwZSAmICRleHBvcnQuUDsKICAgICAgICB2YXIgSVNfQklORCA9IHR5cGUgJiAkZXhwb3J0LkI7CiAgICAgICAgdmFyIElTX1dSQVAgPSB0eXBlICYgJGV4cG9ydC5XOwogICAgICAgIHZhciBleHBvcnRzID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSk7CiAgICAgICAgdmFyIGV4cFByb3RvID0gZXhwb3J0c1tQUk9UT1RZUEVdOwogICAgICAgIHZhciB0YXJnZXQgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdOwogICAgICAgIHZhciBrZXksIG93biwgb3V0OwogICAgICAgIGlmIChJU19HTE9CQUwpIHNvdXJjZSA9IG5hbWU7CgogICAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkgewogICAgICAgICAgLy8gY29udGFpbnMgaW4gbmF0aXZlCiAgICAgICAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkOwogICAgICAgICAgaWYgKG93biAmJiBoYXMoZXhwb3J0cywga2V5KSkgY29udGludWU7IC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkCgogICAgICAgICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzCgogICAgICAgICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV0gLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHQKICAgICAgICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpIC8vIHdyYXAgZ2xvYmFsIGNvbnN0cnVjdG9ycyBmb3IgcHJldmVudCBjaGFuZ2UgdGhlbSBpbiBsaWJyYXJ5CiAgICAgICAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gZnVuY3Rpb24gKEMpIHsKICAgICAgICAgICAgdmFyIEYgPSBmdW5jdGlvbiBGKGEsIGIsIGMpIHsKICAgICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIEMpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDKCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDKGEpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQyhhLCBiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEMoYSwgYiwgYyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdOwogICAgICAgICAgICByZXR1cm4gRjsgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCiAgICAgICAgICB9KG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDsgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLm1ldGhvZHMuJU5BTUUlCgogICAgICAgICAgaWYgKElTX1BST1RPKSB7CiAgICAgICAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDsgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLnByb3RvdHlwZS4lTkFNRSUKCiAgICAgICAgICAgIGlmICh0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKSBoaWRlKGV4cFByb3RvLCBrZXksIG91dCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OyAvLyB0eXBlIGJpdG1hcAoKCiAgICAgICRleHBvcnQuRiA9IDE7IC8vIGZvcmNlZAoKICAgICAgJGV4cG9ydC5HID0gMjsgLy8gZ2xvYmFsCgogICAgICAkZXhwb3J0LlMgPSA0OyAvLyBzdGF0aWMKCiAgICAgICRleHBvcnQuUCA9IDg7IC8vIHByb3RvCgogICAgICAkZXhwb3J0LkIgPSAxNjsgLy8gYmluZAoKICAgICAgJGV4cG9ydC5XID0gMzI7IC8vIHdyYXAKCiAgICAgICRleHBvcnQuVSA9IDY0OyAvLyBzYWZlCgogICAgICAkZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19leHBvcnRzX18sICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidmVyc2lvbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB2ZXJzaW9uOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJET00iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gRE9NOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJDaGlsZHJlbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBDaGlsZHJlbjsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmVuZGVyIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHJlbmRlciQxOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjcmVhdGVDbGFzcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBjcmVhdGVDbGFzczsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY3JlYXRlRmFjdG9yeSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBjcmVhdGVGYWN0b3J5OwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjcmVhdGVFbGVtZW50IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQ7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNsb25lRWxlbWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBjbG9uZUVsZW1lbnQkMTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaXNWYWxpZEVsZW1lbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gaXNWYWxpZEVsZW1lbnQ7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpbmRET01Ob2RlIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGZpbmRET01Ob2RlOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHVubW91bnRDb21wb25lbnRBdE5vZGU7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkNvbXBvbmVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBDb21wb25lbnQkMTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiUHVyZUNvbXBvbmVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBQdXJlQ29tcG9uZW50OwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGltcG9ydCAqLwoKCiAgICAgICAgdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wcm9wX3R5cGVzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTsKICAgICAgICAvKiBoYXJtb255IGltcG9ydCAqLwoKCiAgICAgICAgdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wcm9wX3R5cGVzX19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcHJvcF90eXBlc19fKTsKICAgICAgICAvKiBoYXJtb255IGltcG9ydCAqLwoKCiAgICAgICAgdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpOwogICAgICAgIC8qIGhhcm1vbnkgaW1wb3J0ICovCgoKICAgICAgICB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fKTsKICAgICAgICAvKiBoYXJtb255IHJlZXhwb3J0IChkZWZhdWx0IGZyb20gbm9uLWhhbW9yeSkgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiUHJvcFR5cGVzIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wcm9wX3R5cGVzX19fZGVmYXVsdC5hOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgdmVyc2lvbiA9ICcxNS4xLjAnOyAvLyB0cmljayBsaWJyYXJpZXMgdG8gdGhpbmsgd2UgYXJlIHJlYWN0CgogICAgICAgIHZhciBFTEVNRU5UUyA9ICdhIGFiYnIgYWRkcmVzcyBhcmVhIGFydGljbGUgYXNpZGUgYXVkaW8gYiBiYXNlIGJkaSBiZG8gYmlnIGJsb2NrcXVvdGUgYm9keSBiciBidXR0b24gY2FudmFzIGNhcHRpb24gY2l0ZSBjb2RlIGNvbCBjb2xncm91cCBkYXRhIGRhdGFsaXN0IGRkIGRlbCBkZXRhaWxzIGRmbiBkaWFsb2cgZGl2IGRsIGR0IGVtIGVtYmVkIGZpZWxkc2V0IGZpZ2NhcHRpb24gZmlndXJlIGZvb3RlciBmb3JtIGgxIGgyIGgzIGg0IGg1IGg2IGhlYWQgaGVhZGVyIGhncm91cCBociBodG1sIGkgaWZyYW1lIGltZyBpbnB1dCBpbnMga2JkIGtleWdlbiBsYWJlbCBsZWdlbmQgbGkgbGluayBtYWluIG1hcCBtYXJrIG1lbnUgbWVudWl0ZW0gbWV0YSBtZXRlciBuYXYgbm9zY3JpcHQgb2JqZWN0IG9sIG9wdGdyb3VwIG9wdGlvbiBvdXRwdXQgcCBwYXJhbSBwaWN0dXJlIHByZSBwcm9ncmVzcyBxIHJwIHJ0IHJ1YnkgcyBzYW1wIHNjcmlwdCBzZWN0aW9uIHNlbGVjdCBzbWFsbCBzb3VyY2Ugc3BhbiBzdHJvbmcgc3R5bGUgc3ViIHN1bW1hcnkgc3VwIHRhYmxlIHRib2R5IHRkIHRleHRhcmVhIHRmb290IHRoIHRoZWFkIHRpbWUgdGl0bGUgdHIgdHJhY2sgdSB1bCB2YXIgdmlkZW8gd2JyIGNpcmNsZSBjbGlwUGF0aCBkZWZzIGVsbGlwc2UgZyBpbWFnZSBsaW5lIGxpbmVhckdyYWRpZW50IG1hc2sgcGF0aCBwYXR0ZXJuIHBvbHlnb24gcG9seWxpbmUgcmFkaWFsR3JhZGllbnQgcmVjdCBzdG9wIHN2ZyB0ZXh0IHRzcGFuJy5zcGxpdCgnICcpOwogICAgICAgIHZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2xbImZvciJdICYmIFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmVsZW1lbnQnKSB8fCAweGVhYzc7CiAgICAgICAgdmFyIENPTVBPTkVOVF9XUkFQUEVSX0tFWSA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnID8gU3ltYm9sWyJmb3IiXSgnX19wcmVhY3RDb21wYXRXcmFwcGVyJykgOiAnX19wcmVhY3RDb21wYXRXcmFwcGVyJzsgLy8gZG9uJ3QgYXV0b2JpbmQgdGhlc2UgbWV0aG9kcyBzaW5jZSB0aGV5IGFscmVhZHkgaGF2ZSBndWFyYW50ZWVkIGNvbnRleHQuCgogICAgICAgIHZhciBBVVRPQklORF9CTEFDS0xJU1QgPSB7CiAgICAgICAgICBjb25zdHJ1Y3RvcjogMSwKICAgICAgICAgIHJlbmRlcjogMSwKICAgICAgICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZTogMSwKICAgICAgICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IDEsCiAgICAgICAgICBjb21wb25lbnRXaWxsVXBkYXRlOiAxLAogICAgICAgICAgY29tcG9uZW50RGlkVXBkYXRlOiAxLAogICAgICAgICAgY29tcG9uZW50V2lsbE1vdW50OiAxLAogICAgICAgICAgY29tcG9uZW50RGlkTW91bnQ6IDEsCiAgICAgICAgICBjb21wb25lbnRXaWxsVW5tb3VudDogMSwKICAgICAgICAgIGNvbXBvbmVudERpZFVubW91bnQ6IDEKICAgICAgICB9OwogICAgICAgIHZhciBDQU1FTF9QUk9QUyA9IC9eKD86YWNjZW50fGFsaWdubWVudHxhcmFiaWN8YmFzZWxpbmV8Y2FwfGNsaXB8Y29sb3J8ZmlsbHxmbG9vZHxmb250fGdseXBofGhvcml6fG1hcmtlcnxvdmVybGluZXxwYWludHxzdG9wfHN0cmlrZXRocm91Z2h8c3Ryb2tlfHRleHR8dW5kZXJsaW5lfHVuaWNvZGV8dW5pdHN8dnx2ZXJ0fHdvcmR8d3JpdGluZ3x4KVtBLVpdLzsKICAgICAgICB2YXIgQllQQVNTX0hPT0sgPSB7fTsKICAgICAgICAvKmdsb2JhbCBwcm9jZXNzKi8KCiAgICAgICAgdmFyIERFViA9IHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCAhcHJvY2Vzcy5lbnYgfHwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJzsgLy8gYSBjb21wb25lbnQgdGhhdCByZW5kZXJzIG5vdGhpbmcuIFVzZWQgdG8gcmVwbGFjZSBjb21wb25lbnRzIGZvciB1bm1vdW50Q29tcG9uZW50QXROb2RlLgoKICAgICAgICBmdW5jdGlvbiBFbXB0eUNvbXBvbmVudCgpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0gLy8gbWFrZSByZWFjdCB0aGluayB3ZSdyZSByZWFjdC4KCgogICAgICAgIHZhciBWTm9kZSA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siaCJdKCdhJywgbnVsbCkuY29uc3RydWN0b3I7CgogICAgICAgIFZOb2RlLnByb3RvdHlwZS4kJHR5cGVvZiA9IFJFQUNUX0VMRU1FTlRfVFlQRTsKICAgICAgICBWTm9kZS5wcm90b3R5cGUucHJlYWN0Q29tcGF0VXBncmFkZWQgPSBmYWxzZTsKICAgICAgICBWTm9kZS5wcm90b3R5cGUucHJlYWN0Q29tcGF0Tm9ybWFsaXplZCA9IGZhbHNlOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWTm9kZS5wcm90b3R5cGUsICd0eXBlJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVOYW1lOwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHsKICAgICAgICAgICAgdGhpcy5ub2RlTmFtZSA9IHY7CiAgICAgICAgICB9LAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZOb2RlLnByb3RvdHlwZSwgJ3Byb3BzJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXM7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSB2OwogICAgICAgICAgfSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHZhciBvbGRFdmVudEhvb2sgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bIm9wdGlvbnMiXS5ldmVudDsKCiAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJvcHRpb25zIl0uZXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKG9sZEV2ZW50SG9vaykgewogICAgICAgICAgICBlID0gb2xkRXZlbnRIb29rKGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGUucGVyc2lzdCA9IE9iamVjdDsKICAgICAgICAgIGUubmF0aXZlRXZlbnQgPSBlOwogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIG9sZFZub2RlSG9vayA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1sib3B0aW9ucyJdLnZub2RlOwoKICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bIm9wdGlvbnMiXS52bm9kZSA9IGZ1bmN0aW9uICh2bm9kZSkgewogICAgICAgICAgaWYgKCF2bm9kZS5wcmVhY3RDb21wYXRVcGdyYWRlZCkgewogICAgICAgICAgICB2bm9kZS5wcmVhY3RDb21wYXRVcGdyYWRlZCA9IHRydWU7CiAgICAgICAgICAgIHZhciB0YWcgPSB2bm9kZS5ub2RlTmFtZSwKICAgICAgICAgICAgICAgIGF0dHJzID0gdm5vZGUuYXR0cmlidXRlcyA9IGV4dGVuZCh7fSwgdm5vZGUuYXR0cmlidXRlcyk7CgogICAgICAgICAgICBpZiAodHlwZW9mIHRhZyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIGlmICh0YWdbQ09NUE9ORU5UX1dSQVBQRVJfS0VZXSA9PT0gdHJ1ZSB8fCB0YWcucHJvdG90eXBlICYmICdpc1JlYWN0Q29tcG9uZW50JyBpbiB0YWcucHJvdG90eXBlKSB7CiAgICAgICAgICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4gJiYgU3RyaW5nKHZub2RlLmNoaWxkcmVuKSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4gPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICAgIGF0dHJzLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCF2bm9kZS5wcmVhY3RDb21wYXROb3JtYWxpemVkKSB7CiAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZVZOb2RlKHZub2RlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBoYW5kbGVDb21wb25lbnRWTm9kZSh2bm9kZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbiAmJiBTdHJpbmcodm5vZGUuY2hpbGRyZW4pID09PSAnJykgewogICAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4gPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgIGF0dHJzLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoYXR0cnMuZGVmYXVsdFZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAoIWF0dHJzLnZhbHVlICYmIGF0dHJzLnZhbHVlICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgIGF0dHJzLnZhbHVlID0gYXR0cnMuZGVmYXVsdFZhbHVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRycy5kZWZhdWx0VmFsdWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBoYW5kbGVFbGVtZW50Vk5vZGUodm5vZGUsIGF0dHJzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvbGRWbm9kZUhvb2spIHsKICAgICAgICAgICAgb2xkVm5vZGVIb29rKHZub2RlKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVDb21wb25lbnRWTm9kZSh2bm9kZSkgewogICAgICAgICAgdmFyIHRhZyA9IHZub2RlLm5vZGVOYW1lLAogICAgICAgICAgICAgIGEgPSB2bm9kZS5hdHRyaWJ1dGVzOwogICAgICAgICAgdm5vZGUuYXR0cmlidXRlcyA9IHt9OwoKICAgICAgICAgIGlmICh0YWcuZGVmYXVsdFByb3BzKSB7CiAgICAgICAgICAgIGV4dGVuZCh2bm9kZS5hdHRyaWJ1dGVzLCB0YWcuZGVmYXVsdFByb3BzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICBleHRlbmQodm5vZGUuYXR0cmlidXRlcywgYSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVFbGVtZW50Vk5vZGUodm5vZGUsIGEpIHsKICAgICAgICAgIHZhciBzaG91bGRTYW5pdGl6ZSwgYXR0cnMsIGk7CgogICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgZm9yIChpIGluIGEpIHsKICAgICAgICAgICAgICBpZiAoc2hvdWxkU2FuaXRpemUgPSBDQU1FTF9QUk9QUy50ZXN0KGkpKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzaG91bGRTYW5pdGl6ZSkgewogICAgICAgICAgICAgIGF0dHJzID0gdm5vZGUuYXR0cmlidXRlcyA9IHt9OwoKICAgICAgICAgICAgICBmb3IgKGkgaW4gYSkgewogICAgICAgICAgICAgICAgaWYgKGEuaGFzT3duUHJvcGVydHkoaSkpIHsKICAgICAgICAgICAgICAgICAgYXR0cnNbQ0FNRUxfUFJPUFMudGVzdChpKSA/IGkucmVwbGFjZSgvKFtBLVowLTldKS8sICctJDEnKS50b0xvd2VyQ2FzZSgpIDogaV0gPSBhW2ldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gLy8gcHJveHkgcmVuZGVyKCkgc2luY2UgUmVhY3QgcmV0dXJucyBhIENvbXBvbmVudCByZWZlcmVuY2UuCgoKICAgICAgICBmdW5jdGlvbiByZW5kZXIkMSh2bm9kZSwgcGFyZW50LCBjYWxsYmFjaykgewogICAgICAgICAgdmFyIHByZXYgPSBwYXJlbnQgJiYgcGFyZW50Ll9wcmVhY3RDb21wYXRSZW5kZXJlZCAmJiBwYXJlbnQuX3ByZWFjdENvbXBhdFJlbmRlcmVkLmJhc2U7IC8vIGlnbm9yZSBpbXBvc3NpYmxlIHByZXZpb3VzIHJlbmRlcnMKCiAgICAgICAgICBpZiAocHJldiAmJiBwcmV2LnBhcmVudE5vZGUgIT09IHBhcmVudCkgewogICAgICAgICAgICBwcmV2ID0gbnVsbDsKICAgICAgICAgIH0gLy8gZGVmYXVsdCB0byBmaXJzdCBFbGVtZW50IGNoaWxkCgoKICAgICAgICAgIGlmICghcHJldikgewogICAgICAgICAgICBwcmV2ID0gcGFyZW50LmNoaWxkcmVuWzBdOwogICAgICAgICAgfSAvLyByZW1vdmUgdW5hZmZlY3RlZCBzaWJsaW5ncwoKCiAgICAgICAgICBmb3IgKHZhciBpID0gcGFyZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIGlmIChwYXJlbnQuY2hpbGROb2Rlc1tpXSAhPT0gcHJldikgewogICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYXJlbnQuY2hpbGROb2Rlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgb3V0ID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJyZW5kZXIiXSh2bm9kZSwgcGFyZW50LCBwcmV2KTsKCiAgICAgICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgICAgIHBhcmVudC5fcHJlYWN0Q29tcGF0UmVuZGVyZWQgPSBvdXQgJiYgKG91dC5fY29tcG9uZW50IHx8IHsKICAgICAgICAgICAgICBiYXNlOiBvdXQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBvdXQgJiYgb3V0Ll9jb21wb25lbnQgfHwgb3V0OwogICAgICAgIH0KCiAgICAgICAgdmFyIENvbnRleHRQcm92aWRlciA9IGZ1bmN0aW9uIENvbnRleHRQcm92aWRlcigpIHt9OwoKICAgICAgICBDb250ZXh0UHJvdmlkZXIucHJvdG90eXBlLmdldENoaWxkQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNvbnRleHQ7CiAgICAgICAgfTsKCiAgICAgICAgQ29udGV4dFByb3ZpZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocHJvcHMpIHsKICAgICAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlblswXTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcihwYXJlbnRDb21wb25lbnQsIHZub2RlLCBjb250YWluZXIsIGNhbGxiYWNrKSB7CiAgICAgICAgICB2YXIgd3JhcCA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siaCJdKENvbnRleHRQcm92aWRlciwgewogICAgICAgICAgICBjb250ZXh0OiBwYXJlbnRDb21wb25lbnQuY29udGV4dAogICAgICAgICAgfSwgdm5vZGUpOwoKICAgICAgICAgIHZhciBjID0gcmVuZGVyJDEod3JhcCwgY29udGFpbmVyKTsKCiAgICAgICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICAgICAgY2FsbGJhY2soYyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGMuX2NvbXBvbmVudCB8fCBjLmJhc2U7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50QXROb2RlKGNvbnRhaW5lcikgewogICAgICAgICAgdmFyIGV4aXN0aW5nID0gY29udGFpbmVyLl9wcmVhY3RDb21wYXRSZW5kZXJlZCAmJiBjb250YWluZXIuX3ByZWFjdENvbXBhdFJlbmRlcmVkLmJhc2U7CgogICAgICAgICAgaWYgKGV4aXN0aW5nICYmIGV4aXN0aW5nLnBhcmVudE5vZGUgPT09IGNvbnRhaW5lcikgewogICAgICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bInJlbmRlciJdKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siaCJdKEVtcHR5Q29tcG9uZW50KSwgY29udGFpbmVyLCBleGlzdGluZyk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgQVJSID0gW107IC8vIFRoaXMgQVBJIGlzIGNvbXBsZXRlbHkgdW5uZWNlc3NhcnkgZm9yIFByZWFjdCwgc28gaXQncyBiYXNpY2FsbHkgcGFzc3Rocm91Z2guCgogICAgICAgIHZhciBDaGlsZHJlbiA9IHsKICAgICAgICAgIG1hcDogZnVuY3Rpb24gbWFwKGNoaWxkcmVuLCBmbiwgY3R4KSB7CiAgICAgICAgICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNoaWxkcmVuID0gQ2hpbGRyZW4udG9BcnJheShjaGlsZHJlbik7CgogICAgICAgICAgICBpZiAoY3R4ICYmIGN0eCAhPT0gY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBmbiA9IGZuLmJpbmQoY3R4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuLm1hcChmbik7CiAgICAgICAgICB9LAogICAgICAgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjaGlsZHJlbiwgZm4sIGN0eCkgewogICAgICAgICAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjaGlsZHJlbiA9IENoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pOwoKICAgICAgICAgICAgaWYgKGN0eCAmJiBjdHggIT09IGNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgZm4gPSBmbi5iaW5kKGN0eCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZm4pOwogICAgICAgICAgfSwKICAgICAgICAgIGNvdW50OiBmdW5jdGlvbiBjb3VudChjaGlsZHJlbikgewogICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoIHx8IDA7CiAgICAgICAgICB9LAogICAgICAgICAgb25seTogZnVuY3Rpb24gb25seShjaGlsZHJlbikgewogICAgICAgICAgICBjaGlsZHJlbiA9IENoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pOwoKICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPT0gMSkgewogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hpbGRyZW4ub25seSgpIGV4cGVjdHMgb25seSBvbmUgY2hpbGQuJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjaGlsZHJlblswXTsKICAgICAgICAgIH0sCiAgICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiB0b0FycmF5KGNoaWxkcmVuKSB7CiAgICAgICAgICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSAmJiBBcnJheS5pc0FycmF5KGNoaWxkcmVuKSA/IGNoaWxkcmVuIDogQVJSLmNvbmNhdChjaGlsZHJlbik7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAvKiogVHJhY2sgY3VycmVudCByZW5kZXIoKSBjb21wb25lbnQgZm9yIHJlZiBhc3NpZ25tZW50ICovCgogICAgICAgIHZhciBjdXJyZW50Q29tcG9uZW50OwoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVGYWN0b3J5KHR5cGUpIHsKICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgRE9NID0ge307CgogICAgICAgIGZvciAodmFyIGkgPSBFTEVNRU5UUy5sZW5ndGg7IGktLTspIHsKICAgICAgICAgIERPTVtFTEVNRU5UU1tpXV0gPSBjcmVhdGVGYWN0b3J5KEVMRU1FTlRTW2ldKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZ3JhZGVUb1ZOb2RlcyhhcnIsIG9mZnNldCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldCB8fCAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBvYmogPSBhcnJbaV07CgogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAgICAgICAgICAgdXBncmFkZVRvVk5vZGVzKG9iaik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqICYmIF90eXBlb2Y0KG9iaikgPT09ICdvYmplY3QnICYmICFpc1ZhbGlkRWxlbWVudChvYmopICYmIChvYmoucHJvcHMgJiYgb2JqLnR5cGUgfHwgb2JqLmF0dHJpYnV0ZXMgJiYgb2JqLm5vZGVOYW1lIHx8IG9iai5jaGlsZHJlbikpIHsKICAgICAgICAgICAgICBhcnJbaV0gPSBjcmVhdGVFbGVtZW50KG9iai50eXBlIHx8IG9iai5ub2RlTmFtZSwgb2JqLnByb3BzIHx8IG9iai5hdHRyaWJ1dGVzLCBvYmouY2hpbGRyZW4pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc1N0YXRlbGVzc0NvbXBvbmVudChjKSB7CiAgICAgICAgICByZXR1cm4gdHlwZW9mIGMgPT09ICdmdW5jdGlvbicgJiYgIShjLnByb3RvdHlwZSAmJiBjLnByb3RvdHlwZS5yZW5kZXIpOwogICAgICAgIH0gLy8gd3JhcHMgc3RhdGVsZXNzIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBpbiBhIFByb3BUeXBlcyB2YWxpZGF0b3IKCgogICAgICAgIGZ1bmN0aW9uIHdyYXBTdGF0ZWxlc3NDb21wb25lbnQoV3JhcHBlZENvbXBvbmVudCkgewogICAgICAgICAgcmV0dXJuIGNyZWF0ZUNsYXNzKHsKICAgICAgICAgICAgZGlzcGxheU5hbWU6IFdyYXBwZWRDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgV3JhcHBlZENvbXBvbmVudC5uYW1lLAogICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgICAgICByZXR1cm4gV3JhcHBlZENvbXBvbmVudCh0aGlzLnByb3BzLCB0aGlzLmNvbnRleHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN0YXRlbGVzc0NvbXBvbmVudEhvb2soQ3RvcikgewogICAgICAgICAgdmFyIFdyYXBwZWQgPSBDdG9yW0NPTVBPTkVOVF9XUkFQUEVSX0tFWV07CgogICAgICAgICAgaWYgKFdyYXBwZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFdyYXBwZWQgPT09IHRydWUgPyBDdG9yIDogV3JhcHBlZDsKICAgICAgICAgIH0KCiAgICAgICAgICBXcmFwcGVkID0gd3JhcFN0YXRlbGVzc0NvbXBvbmVudChDdG9yKTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcmFwcGVkLCBDT01QT05FTlRfV1JBUFBFUl9LRVksIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBXcmFwcGVkLmRpc3BsYXlOYW1lID0gQ3Rvci5kaXNwbGF5TmFtZTsKICAgICAgICAgIFdyYXBwZWQucHJvcFR5cGVzID0gQ3Rvci5wcm9wVHlwZXM7CiAgICAgICAgICBXcmFwcGVkLmRlZmF1bHRQcm9wcyA9IEN0b3IuZGVmYXVsdFByb3BzOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEN0b3IsIENPTVBPTkVOVF9XUkFQUEVSX0tFWSwgewogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiBXcmFwcGVkCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBXcmFwcGVkOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHsKICAgICAgICAgIHZhciBhcmdzID0gW10sCiAgICAgICAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICAgICAgICB3aGlsZSAobGVuLS0pIHsKICAgICAgICAgICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbl07CiAgICAgICAgICB9CgogICAgICAgICAgdXBncmFkZVRvVk5vZGVzKGFyZ3MsIDIpOwogICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVZOb2RlKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siaCJdLmFwcGx5KHZvaWQgMCwgYXJncykpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplVk5vZGUodm5vZGUpIHsKICAgICAgICAgIHZub2RlLnByZWFjdENvbXBhdE5vcm1hbGl6ZWQgPSB0cnVlOwogICAgICAgICAgYXBwbHlDbGFzc05hbWUodm5vZGUpOwoKICAgICAgICAgIGlmIChpc1N0YXRlbGVzc0NvbXBvbmVudCh2bm9kZS5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgdm5vZGUubm9kZU5hbWUgPSBzdGF0ZWxlc3NDb21wb25lbnRIb29rKHZub2RlLm5vZGVOYW1lKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmVmID0gdm5vZGUuYXR0cmlidXRlcy5yZWYsCiAgICAgICAgICAgICAgdHlwZSA9IHJlZiAmJiBfdHlwZW9mNChyZWYpOwoKICAgICAgICAgIGlmIChjdXJyZW50Q29tcG9uZW50ICYmICh0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAnbnVtYmVyJykpIHsKICAgICAgICAgICAgdm5vZGUuYXR0cmlidXRlcy5yZWYgPSBjcmVhdGVTdHJpbmdSZWZQcm94eShyZWYsIGN1cnJlbnRDb21wb25lbnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGFwcGx5RXZlbnROb3JtYWxpemF0aW9uKHZub2RlKTsKICAgICAgICAgIHJldHVybiB2bm9kZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb25lRWxlbWVudCQxKGVsZW1lbnQsIHByb3BzKSB7CiAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBbXSwKICAgICAgICAgICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMjsKCiAgICAgICAgICB3aGlsZSAobGVuLS0gPiAwKSB7CiAgICAgICAgICAgIGNoaWxkcmVuW2xlbl0gPSBhcmd1bWVudHNbbGVuICsgMl07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudChlbGVtZW50KSkgewogICAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZWxlbWVudFByb3BzID0gZWxlbWVudC5hdHRyaWJ1dGVzIHx8IGVsZW1lbnQucHJvcHM7CgogICAgICAgICAgdmFyIG5vZGUgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bImgiXShlbGVtZW50Lm5vZGVOYW1lIHx8IGVsZW1lbnQudHlwZSwgZWxlbWVudFByb3BzLCBlbGVtZW50LmNoaWxkcmVuIHx8IGVsZW1lbnRQcm9wcyAmJiBlbGVtZW50UHJvcHMuY2hpbGRyZW4pOyAvLyBPbmx5IHByb3ZpZGUgdGhlIDNyZCBhcmd1bWVudCBpZiBuZWVkZWQuCiAgICAgICAgICAvLyBBcmd1bWVudHMgMysgb3ZlcndyaXRlIGVsZW1lbnQuY2hpbGRyZW4gaW4gcHJlYWN0Q2xvbmVFbGVtZW50CgoKICAgICAgICAgIHZhciBjbG9uZUFyZ3MgPSBbbm9kZSwgcHJvcHNdOwoKICAgICAgICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgY2xvbmVBcmdzLnB1c2goY2hpbGRyZW4pOwogICAgICAgICAgfSBlbHNlIGlmIChwcm9wcyAmJiBwcm9wcy5jaGlsZHJlbikgewogICAgICAgICAgICBjbG9uZUFyZ3MucHVzaChwcm9wcy5jaGlsZHJlbik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVZOb2RlKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siY2xvbmVFbGVtZW50Il0uYXBwbHkodm9pZCAwLCBjbG9uZUFyZ3MpKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50KGVsZW1lbnQpIHsKICAgICAgICAgIHJldHVybiBlbGVtZW50ICYmIChlbGVtZW50IGluc3RhbmNlb2YgVk5vZGUgfHwgZWxlbWVudC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVN0cmluZ1JlZlByb3h5KG5hbWUsIGNvbXBvbmVudCkgewogICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5fcmVmUHJveGllc1tuYW1lXSB8fCAoY29tcG9uZW50Ll9yZWZQcm94aWVzW25hbWVdID0gZnVuY3Rpb24gKHJlc29sdmVkKSB7CiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LnJlZnMpIHsKICAgICAgICAgICAgICBjb21wb25lbnQucmVmc1tuYW1lXSA9IHJlc29sdmVkOwoKICAgICAgICAgICAgICBpZiAocmVzb2x2ZWQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wb25lbnQuX3JlZlByb3hpZXNbbmFtZV07CiAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhcHBseUV2ZW50Tm9ybWFsaXphdGlvbihyZWYpIHsKICAgICAgICAgIHZhciBub2RlTmFtZSA9IHJlZi5ub2RlTmFtZTsKICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gcmVmLmF0dHJpYnV0ZXM7CgogICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzIHx8IHR5cGVvZiBub2RlTmFtZSAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwcm9wcyA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGkgaW4gYXR0cmlidXRlcykgewogICAgICAgICAgICBwcm9wc1tpLnRvTG93ZXJDYXNlKCldID0gaTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocHJvcHMub25kb3VibGVjbGljaykgewogICAgICAgICAgICBhdHRyaWJ1dGVzLm9uZGJsY2xpY2sgPSBhdHRyaWJ1dGVzW3Byb3BzLm9uZG91YmxlY2xpY2tdOwogICAgICAgICAgICBkZWxldGUgYXR0cmlidXRlc1twcm9wcy5vbmRvdWJsZWNsaWNrXTsKICAgICAgICAgIH0gLy8gZm9yICp0ZXh0dWFsIGlucHV0cyogKGluY2wgdGV4dGFyZWEpLCBub3JtYWxpemUgYG9uQ2hhbmdlYCAtPiBgb25JbnB1dGA6CgoKICAgICAgICAgIGlmIChwcm9wcy5vbmNoYW5nZSAmJiAobm9kZU5hbWUgPT09ICd0ZXh0YXJlYScgfHwgbm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JyAmJiAhL15maWx8Y2hlfHJhZC9pLnRlc3QoYXR0cmlidXRlcy50eXBlKSkpIHsKICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZWQgPSBwcm9wcy5vbmlucHV0IHx8ICdvbmlucHV0JzsKCiAgICAgICAgICAgIGlmICghYXR0cmlidXRlc1tub3JtYWxpemVkXSkgewogICAgICAgICAgICAgIGF0dHJpYnV0ZXNbbm9ybWFsaXplZF0gPSBtdWx0aWhvb2soW2F0dHJpYnV0ZXNbbm9ybWFsaXplZF0sIGF0dHJpYnV0ZXNbcHJvcHMub25jaGFuZ2VdXSk7CiAgICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXNbcHJvcHMub25jaGFuZ2VdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhcHBseUNsYXNzTmFtZShyZWYpIHsKICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gcmVmLmF0dHJpYnV0ZXM7CgogICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgY2wgPSBhdHRyaWJ1dGVzLmNsYXNzTmFtZSB8fCBhdHRyaWJ1dGVzWyJjbGFzcyJdOwoKICAgICAgICAgIGlmIChjbCkgewogICAgICAgICAgICBhdHRyaWJ1dGVzLmNsYXNzTmFtZSA9IGNsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kKGJhc2UsIHByb3BzKSB7CiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsKICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICBiYXNlW2tleV0gPSBwcm9wc1trZXldOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGJhc2U7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzaGFsbG93RGlmZmVycyhhLCBiKSB7CiAgICAgICAgICBmb3IgKHZhciBpIGluIGEpIHsKICAgICAgICAgICAgaWYgKCEoaSBpbiBiKSkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZm9yICh2YXIgaSQxIGluIGIpIHsKICAgICAgICAgICAgaWYgKGFbaSQxXSAhPT0gYltpJDFdKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmaW5kRE9NTm9kZShjb21wb25lbnQpIHsKICAgICAgICAgIHJldHVybiBjb21wb25lbnQgJiYgY29tcG9uZW50LmJhc2UgfHwgY29tcG9uZW50OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gRigpIHt9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG9iaikgewogICAgICAgICAgZnVuY3Rpb24gY2wocHJvcHMsIGNvbnRleHQpIHsKICAgICAgICAgICAgYmluZEFsbCh0aGlzKTsKICAgICAgICAgICAgQ29tcG9uZW50JDEuY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCwgQllQQVNTX0hPT0spOwogICAgICAgICAgICBuZXdDb21wb25lbnRIb29rLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgfQoKICAgICAgICAgIG9iaiA9IGV4dGVuZCh7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBjbAogICAgICAgICAgfSwgb2JqKTsgLy8gV2UgbmVlZCB0byBhcHBseSBtaXhpbnMgaGVyZSBzbyB0aGF0IGdldERlZmF1bHRQcm9wcyBpcyBjb3JyZWN0bHkgbWl4ZWQKCiAgICAgICAgICBpZiAob2JqLm1peGlucykgewogICAgICAgICAgICBhcHBseU1peGlucyhvYmosIGNvbGxhdGVNaXhpbnMob2JqLm1peGlucykpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvYmouc3RhdGljcykgewogICAgICAgICAgICBleHRlbmQoY2wsIG9iai5zdGF0aWNzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob2JqLnByb3BUeXBlcykgewogICAgICAgICAgICBjbC5wcm9wVHlwZXMgPSBvYmoucHJvcFR5cGVzOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvYmouZGVmYXVsdFByb3BzKSB7CiAgICAgICAgICAgIGNsLmRlZmF1bHRQcm9wcyA9IG9iai5kZWZhdWx0UHJvcHM7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9iai5nZXREZWZhdWx0UHJvcHMpIHsKICAgICAgICAgICAgY2wuZGVmYXVsdFByb3BzID0gb2JqLmdldERlZmF1bHRQcm9wcygpOwogICAgICAgICAgfQoKICAgICAgICAgIEYucHJvdG90eXBlID0gQ29tcG9uZW50JDEucHJvdG90eXBlOwogICAgICAgICAgY2wucHJvdG90eXBlID0gZXh0ZW5kKG5ldyBGKCksIG9iaik7CiAgICAgICAgICBjbC5kaXNwbGF5TmFtZSA9IG9iai5kaXNwbGF5TmFtZSB8fCAnQ29tcG9uZW50JzsKICAgICAgICAgIHJldHVybiBjbDsKICAgICAgICB9IC8vIEZsYXR0ZW4gYW4gQXJyYXkgb2YgbWl4aW5zIHRvIGEgbWFwIG9mIG1ldGhvZCBuYW1lIHRvIG1peGluIGltcGxlbWVudGF0aW9ucwoKCiAgICAgICAgZnVuY3Rpb24gY29sbGF0ZU1peGlucyhtaXhpbnMpIHsKICAgICAgICAgIHZhciBrZXllZCA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWl4aW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBtaXhpbiA9IG1peGluc1tpXTsKCiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtaXhpbikgewogICAgICAgICAgICAgIGlmIChtaXhpbi5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHR5cGVvZiBtaXhpbltrZXldID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAoa2V5ZWRba2V5XSB8fCAoa2V5ZWRba2V5XSA9IFtdKSkucHVzaChtaXhpbltrZXldKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4ga2V5ZWQ7CiAgICAgICAgfSAvLyBhcHBseSBhIG1hcHBpbmcgb2YgQXJyYXlzIG9mIG1peGluIG1ldGhvZHMgdG8gYSBjb21wb25lbnQgcHJvdG90eXBlCgoKICAgICAgICBmdW5jdGlvbiBhcHBseU1peGlucyhwcm90bywgbWl4aW5zKSB7CiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWl4aW5zKSB7CiAgICAgICAgICAgIGlmIChtaXhpbnMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICAgIHByb3RvW2tleV0gPSBtdWx0aWhvb2sobWl4aW5zW2tleV0uY29uY2F0KHByb3RvW2tleV0gfHwgQVJSKSwga2V5ID09PSAnZ2V0RGVmYXVsdFByb3BzJyB8fCBrZXkgPT09ICdnZXRJbml0aWFsU3RhdGUnIHx8IGtleSA9PT0gJ2dldENoaWxkQ29udGV4dCcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBiaW5kQWxsKGN0eCkgewogICAgICAgICAgZm9yICh2YXIgaSBpbiBjdHgpIHsKICAgICAgICAgICAgdmFyIHYgPSBjdHhbaV07CgogICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdmdW5jdGlvbicgJiYgIXYuX19ib3VuZCAmJiAhQVVUT0JJTkRfQkxBQ0tMSVNULmhhc093blByb3BlcnR5KGkpKSB7CiAgICAgICAgICAgICAgKGN0eFtpXSA9IHYuYmluZChjdHgpKS5fX2JvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsbE1ldGhvZChjdHgsIG0sIGFyZ3MpIHsKICAgICAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgbSA9IGN0eC5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbbV07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBtID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHJldHVybiBtLmFwcGx5KGN0eCwgYXJncyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtdWx0aWhvb2soaG9va3MsIHNraXBEdXBsaWNhdGVzKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYXJndW1lbnRzJDEgPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwogICAgICAgICAgICB2YXIgcmV0OwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciByID0gY2FsbE1ldGhvZCh0aGlzJDEsIGhvb2tzW2ldLCBhcmd1bWVudHMkMSk7CgogICAgICAgICAgICAgIGlmIChza2lwRHVwbGljYXRlcyAmJiByICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmICghcmV0KSB7CiAgICAgICAgICAgICAgICAgIHJldCA9IHt9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiByKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgICAgICByZXRba2V5XSA9IHJba2V5XTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHIgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICByZXQgPSByOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBuZXdDb21wb25lbnRIb29rKHByb3BzLCBjb250ZXh0KSB7CiAgICAgICAgICBwcm9wc0hvb2suY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCk7CiAgICAgICAgICB0aGlzLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBtdWx0aWhvb2soW3Byb3BzSG9vaywgdGhpcy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIHx8ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJ10pOwogICAgICAgICAgdGhpcy5yZW5kZXIgPSBtdWx0aWhvb2soW3Byb3BzSG9vaywgYmVmb3JlUmVuZGVyLCB0aGlzLnJlbmRlciB8fCAncmVuZGVyJywgYWZ0ZXJSZW5kZXJdKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByb3BzSG9vayhwcm9wcywgY29udGV4dCkgewogICAgICAgICAgaWYgKCFwcm9wcykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIFJlYWN0IGFubm95aW5nbHkgc3BlY2lhbC1jYXNlcyBzaW5nbGUgY2hpbGRyZW4sIGFuZCBzb21lIHJlYWN0IGNvbXBvbmVudHMgYXJlIHJpZGljdWxvdXNseSBzdHJpY3QgYWJvdXQgdGhpcy4KCgogICAgICAgICAgdmFyIGMgPSBwcm9wcy5jaGlsZHJlbjsKCiAgICAgICAgICBpZiAoYyAmJiBBcnJheS5pc0FycmF5KGMpICYmIGMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIHByb3BzLmNoaWxkcmVuID0gY1swXTsgLy8gYnV0IGl0cyB0b3RhbGx5IHN0aWxsIGdvaW5nIHRvIGJlIGFuIEFycmF5LgoKICAgICAgICAgICAgaWYgKHByb3BzLmNoaWxkcmVuICYmIF90eXBlb2Y0KHByb3BzLmNoaWxkcmVuKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICBwcm9wcy5jaGlsZHJlbi5sZW5ndGggPSAxOwogICAgICAgICAgICAgIHByb3BzLmNoaWxkcmVuWzBdID0gcHJvcHMuY2hpbGRyZW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gYWRkIHByb3B0eXBlIGNoZWNraW5nCgoKICAgICAgICAgIGlmIChERVYpIHsKICAgICAgICAgICAgdmFyIGN0b3IgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiB0aGlzLmNvbnN0cnVjdG9yLAogICAgICAgICAgICAgICAgcHJvcFR5cGVzID0gdGhpcy5wcm9wVHlwZXMgfHwgY3Rvci5wcm9wVHlwZXM7CiAgICAgICAgICAgIHZhciBkaXNwbGF5TmFtZSA9IHRoaXMuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lOwoKICAgICAgICAgICAgaWYgKHByb3BUeXBlcykgewogICAgICAgICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLmNoZWNrUHJvcFR5cGVzKHByb3BUeXBlcywgcHJvcHMsICdwcm9wJywgZGlzcGxheU5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBiZWZvcmVSZW5kZXIocHJvcHMpIHsKICAgICAgICAgIGN1cnJlbnRDb21wb25lbnQgPSB0aGlzOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWZ0ZXJSZW5kZXIoKSB7CiAgICAgICAgICBpZiAoY3VycmVudENvbXBvbmVudCA9PT0gdGhpcykgewogICAgICAgICAgICBjdXJyZW50Q29tcG9uZW50ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIENvbXBvbmVudCQxKHByb3BzLCBjb250ZXh0LCBvcHRzKSB7CiAgICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bIkNvbXBvbmVudCJdLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpOwoKICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLmdldEluaXRpYWxTdGF0ZSA/IHRoaXMuZ2V0SW5pdGlhbFN0YXRlKCkgOiB7fTsKICAgICAgICAgIHRoaXMucmVmcyA9IHt9OwogICAgICAgICAgdGhpcy5fcmVmUHJveGllcyA9IHt9OwoKICAgICAgICAgIGlmIChvcHRzICE9PSBCWVBBU1NfSE9PSykgewogICAgICAgICAgICBuZXdDb21wb25lbnRIb29rLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZXh0ZW5kKENvbXBvbmVudCQxLnByb3RvdHlwZSA9IG5ldyBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bIkNvbXBvbmVudCJdKCksIHsKICAgICAgICAgIGNvbnN0cnVjdG9yOiBDb21wb25lbnQkMSwKICAgICAgICAgIGlzUmVhY3RDb21wb25lbnQ6IHt9LAogICAgICAgICAgcmVwbGFjZVN0YXRlOiBmdW5jdGlvbiByZXBsYWNlU3RhdGUoc3RhdGUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlLCBjYWxsYmFjayk7CgogICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMkMS5zdGF0ZSkgewogICAgICAgICAgICAgIGlmICghKGkgaW4gc3RhdGUpKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcyQxLnN0YXRlW2ldOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGdldERPTU5vZGU6IGZ1bmN0aW9uIGdldERPTU5vZGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhc2U7CiAgICAgICAgICB9LAogICAgICAgICAgaXNNb3VudGVkOiBmdW5jdGlvbiBpc01vdW50ZWQoKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYmFzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gUHVyZUNvbXBvbmVudChwcm9wcywgY29udGV4dCkgewogICAgICAgICAgQ29tcG9uZW50JDEuY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCk7CiAgICAgICAgfQoKICAgICAgICBGLnByb3RvdHlwZSA9IENvbXBvbmVudCQxLnByb3RvdHlwZTsKICAgICAgICBQdXJlQ29tcG9uZW50LnByb3RvdHlwZSA9IG5ldyBGKCk7CiAgICAgICAgUHVyZUNvbXBvbmVudC5wcm90b3R5cGUuaXNQdXJlUmVhY3RDb21wb25lbnQgPSB0cnVlOwoKICAgICAgICBQdXJlQ29tcG9uZW50LnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGUgPSBmdW5jdGlvbiAocHJvcHMsIHN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gc2hhbGxvd0RpZmZlcnModGhpcy5wcm9wcywgcHJvcHMpIHx8IHNoYWxsb3dEaWZmZXJzKHRoaXMuc3RhdGUsIHN0YXRlKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgaW5kZXggPSB7CiAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLAogICAgICAgICAgRE9NOiBET00sCiAgICAgICAgICBQcm9wVHlwZXM6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wcm9wX3R5cGVzX19fZGVmYXVsdC5hLAogICAgICAgICAgQ2hpbGRyZW46IENoaWxkcmVuLAogICAgICAgICAgcmVuZGVyOiByZW5kZXIkMSwKICAgICAgICAgIGNyZWF0ZUNsYXNzOiBjcmVhdGVDbGFzcywKICAgICAgICAgIGNyZWF0ZUZhY3Rvcnk6IGNyZWF0ZUZhY3RvcnksCiAgICAgICAgICBjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50LAogICAgICAgICAgY2xvbmVFbGVtZW50OiBjbG9uZUVsZW1lbnQkMSwKICAgICAgICAgIGlzVmFsaWRFbGVtZW50OiBpc1ZhbGlkRWxlbWVudCwKICAgICAgICAgIGZpbmRET01Ob2RlOiBmaW5kRE9NTm9kZSwKICAgICAgICAgIHVubW91bnRDb21wb25lbnRBdE5vZGU6IHVubW91bnRDb21wb25lbnRBdE5vZGUsCiAgICAgICAgICBDb21wb25lbnQ6IENvbXBvbmVudCQxLAogICAgICAgICAgUHVyZUNvbXBvbmVudDogUHVyZUNvbXBvbmVudCwKICAgICAgICAgIHVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcgogICAgICAgIH07CiAgICAgICAgLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLwoKICAgICAgICBfX3dlYnBhY2tfZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBpbmRleDsKICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KICAgICAgfSkuY2FsbChfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIGlmICghaXNPYmplY3QoaXQpKSB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7CiAgICAgICAgcmV0dXJuIGl0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBJRThfRE9NX0RFRklORSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwoKICAgICAgdmFyIHRvUHJpbWl0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7CgogICAgICB2YXIgZFAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgICAgIGV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oOCkgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKSB7CiAgICAgICAgYW5PYmplY3QoTyk7CiAgICAgICAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpOwogICAgICAgIGFuT2JqZWN0KEF0dHJpYnV0ZXMpOwogICAgICAgIGlmIChJRThfRE9NX0RFRklORSkgdHJ5IHsKICAgICAgICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvKiBlbXB0eSAqLwogICAgICAgIH0KICAgICAgICBpZiAoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKSB0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpOwogICAgICAgIGlmICgndmFsdWUnIGluIEF0dHJpYnV0ZXMpIE9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlOwogICAgICAgIHJldHVybiBPOwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIV9fd2VicGFja19yZXF1aXJlX18oMTQpKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICAgIH0KICAgICAgICB9KS5hICE9IDc7CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXIKICAgICAgdmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9OyAvLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXQKICAgICAgLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzCiAgICAgIC8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGEKICAgICAgLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy4KCiAgICAgIHZhciBjYWNoZWRTZXRUaW1lb3V0OwogICAgICB2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0OwoKICAgICAgZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpOwogICAgICB9CgogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0OwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CiAgICAgICAgfQogICAgICB9KSgpOwoKICAgICAgZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHsKICAgICAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkgewogICAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zCiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApOwogICAgICAgIH0gLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWQKCgogICAgICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkgewogICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7CiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3MKICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5CiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikgewogICAgICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkgewogICAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zCiAgICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICAgICAgfSAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkCgoKICAgICAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHsKICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKICAgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzCiAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseQogICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuCiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXQKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgcXVldWUgPSBbXTsKICAgICAgdmFyIGRyYWluaW5nID0gZmFsc2U7CiAgICAgIHZhciBjdXJyZW50UXVldWU7CiAgICAgIHZhciBxdWV1ZUluZGV4ID0gLTE7CgogICAgICBmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7CiAgICAgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBkcmFpbmluZyA9IGZhbHNlOwoKICAgICAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkgewogICAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVldWVJbmRleCA9IC0xOwogICAgICAgIH0KCiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCkgewogICAgICAgICAgZHJhaW5RdWV1ZSgpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHsKICAgICAgICBpZiAoZHJhaW5pbmcpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spOwogICAgICAgIGRyYWluaW5nID0gdHJ1ZTsKICAgICAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoOwoKICAgICAgICB3aGlsZSAobGVuKSB7CiAgICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTsKICAgICAgICAgIHF1ZXVlID0gW107CgogICAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikgewogICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7CiAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcXVldWVJbmRleCA9IC0xOwogICAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoOwogICAgICAgIH0KCiAgICAgICAgY3VycmVudFF1ZXVlID0gbnVsbDsKICAgICAgICBkcmFpbmluZyA9IGZhbHNlOwogICAgICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgfQoKICAgICAgcHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHsKICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CgogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpOwoKICAgICAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykgewogICAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTsKICAgICAgICB9CiAgICAgIH07IC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHMKCgogICAgICBmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHsKICAgICAgICB0aGlzLmZ1biA9IGZ1bjsKICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7CiAgICAgIH0KCiAgICAgIEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTsKICAgICAgfTsKCiAgICAgIHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7CiAgICAgIHByb2Nlc3MuYnJvd3NlciA9IHRydWU7CiAgICAgIHByb2Nlc3MuZW52ID0ge307CiAgICAgIHByb2Nlc3MuYXJndiA9IFtdOwogICAgICBwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXMKCiAgICAgIHByb2Nlc3MudmVyc2lvbnMgPSB7fTsKCiAgICAgIGZ1bmN0aW9uIG5vb3AoKSB7fQoKICAgICAgcHJvY2Vzcy5vbiA9IG5vb3A7CiAgICAgIHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wOwogICAgICBwcm9jZXNzLm9uY2UgPSBub29wOwogICAgICBwcm9jZXNzLm9mZiA9IG5vb3A7CiAgICAgIHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wOwogICAgICBwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7CiAgICAgIHByb2Nlc3MuZW1pdCA9IG5vb3A7CiAgICAgIHByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDsKICAgICAgcHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDsKCiAgICAgIHByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH07CgogICAgICBwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgfTsKCiAgICAgIHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAnLyc7CiAgICAgIH07CgogICAgICBwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7CiAgICAgIH07CgogICAgICBwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAwOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIF90eXBlb2Y0KGl0KSA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJzsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZFAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKICAgICAgdmFyIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSA/IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHsKICAgICAgICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwogICAgICB9IDogZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkgewogICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IHt9Lmhhc093blByb3BlcnR5OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIGtleSkgewogICAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwogICAgICB2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbiwgdGhhdCwgbGVuZ3RoKSB7CiAgICAgICAgYUZ1bmN0aW9uKGZuKTsKICAgICAgICBpZiAodGhhdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZm47CgogICAgICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOwogICAgICAgICAgICB9OwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKQogICAgICAgIC8qIC4uLmFyZ3MgKi8KICAgICAgICB7CiAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuICEhZXhlYygpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHt9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzCiAgICAgIHZhciBJT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7CgogICAgICB2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KQogICAgICB2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgaXNEYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDIpOwoKICAgICAgdmFyIE1JTExJU0VDT05EU19JTl9IT1VSID0gMzYwMDAwMDsKICAgICAgdmFyIE1JTExJU0VDT05EU19JTl9NSU5VVEUgPSA2MDAwMDsKICAgICAgdmFyIERFRkFVTFRfQURESVRJT05BTF9ESUdJVFMgPSAyOwogICAgICB2YXIgcGFyc2VUb2tlbkRhdGVUaW1lRGVsaW1ldGVyID0gL1tUIF0vOwogICAgICB2YXIgcGFyc2VUb2tlblBsYWluVGltZSA9IC86LzsgLy8geWVhciB0b2tlbnMKCiAgICAgIHZhciBwYXJzZVRva2VuWVkgPSAvXihcZHsyfSkkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5zWVlZID0gWy9eKFsrLV1cZHsyfSkkLywgLy8gMCBhZGRpdGlvbmFsIGRpZ2l0cwogICAgICAvXihbKy1dXGR7M30pJC8sIC8vIDEgYWRkaXRpb25hbCBkaWdpdAogICAgICAvXihbKy1dXGR7NH0pJC8gLy8gMiBhZGRpdGlvbmFsIGRpZ2l0cwogICAgICBdOwogICAgICB2YXIgcGFyc2VUb2tlbllZWVkgPSAvXihcZHs0fSkvOwogICAgICB2YXIgcGFyc2VUb2tlbnNZWVlZWSA9IFsvXihbKy1dXGR7NH0pLywgLy8gMCBhZGRpdGlvbmFsIGRpZ2l0cwogICAgICAvXihbKy1dXGR7NX0pLywgLy8gMSBhZGRpdGlvbmFsIGRpZ2l0CiAgICAgIC9eKFsrLV1cZHs2fSkvIC8vIDIgYWRkaXRpb25hbCBkaWdpdHMKICAgICAgXTsgLy8gZGF0ZSB0b2tlbnMKCiAgICAgIHZhciBwYXJzZVRva2VuTU0gPSAvXi0oXGR7Mn0pJC87CiAgICAgIHZhciBwYXJzZVRva2VuREREID0gL14tPyhcZHszfSkkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5NTUREID0gL14tPyhcZHsyfSktPyhcZHsyfSkkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5Xd3cgPSAvXi0/VyhcZHsyfSkkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5Xd3dEID0gL14tP1coXGR7Mn0pLT8oXGR7MX0pJC87IC8vIHRpbWUgdG9rZW5zCgogICAgICB2YXIgcGFyc2VUb2tlbkhIID0gL14oXGR7Mn0oWy4sXVxkKik/KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbkhITU0gPSAvXihcZHsyfSk6PyhcZHsyfShbLixdXGQqKT8pJC87CiAgICAgIHZhciBwYXJzZVRva2VuSEhNTVNTID0gL14oXGR7Mn0pOj8oXGR7Mn0pOj8oXGR7Mn0oWy4sXVxkKik/KSQvOyAvLyB0aW1lem9uZSB0b2tlbnMKCiAgICAgIHZhciBwYXJzZVRva2VuVGltZXpvbmUgPSAvKFtaKy1dLiopJC87CiAgICAgIHZhciBwYXJzZVRva2VuVGltZXpvbmVaID0gL14oWikkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5UaW1lem9uZUhIID0gL14oWystXSkoXGR7Mn0pJC87CiAgICAgIHZhciBwYXJzZVRva2VuVGltZXpvbmVISE1NID0gL14oWystXSkoXGR7Mn0pOj8oXGR7Mn0pJC87CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuCiAgICAgICAqCiAgICAgICAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuCiAgICAgICAqCiAgICAgICAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC4KICAgICAgICoKICAgICAgICogSWYgYW4gYXJndW1lbnQgaXMgYSBzdHJpbmcsIHRoZSBmdW5jdGlvbiB0cmllcyB0byBwYXJzZSBpdC4KICAgICAgICogRnVuY3Rpb24gYWNjZXB0cyBjb21wbGV0ZSBJU08gODYwMSBmb3JtYXRzIGFzIHdlbGwgYXMgcGFydGlhbCBpbXBsZW1lbnRhdGlvbnMuCiAgICAgICAqIElTTyA4NjAxOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxCiAgICAgICAqCiAgICAgICAqIElmIGFsbCBhYm92ZSBmYWlscywgdGhlIGZ1bmN0aW9uIHBhc3NlcyB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gRGF0ZSBjb25zdHJ1Y3Rvci4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnQKICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zCiAgICAgICAqIEBwYXJhbSB7MCB8IDEgfCAyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gdGhlIGFkZGl0aW9uYWwgbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgZXh0ZW5kZWQgeWVhciBmb3JtYXQKICAgICAgICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIENvbnZlcnQgc3RyaW5nICcyMDE0LTAyLTExVDExOjMwOjMwJyB0byBkYXRlOgogICAgICAgKiB2YXIgcmVzdWx0ID0gcGFyc2UoJzIwMTQtMDItMTFUMTE6MzA6MzAnKQogICAgICAgKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMAogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBQYXJzZSBzdHJpbmcgJyswMjAxNDEwMScsCiAgICAgICAqIC8vIGlmIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0IGlzIDE6CiAgICAgICAqIHZhciByZXN1bHQgPSBwYXJzZSgnKzAyMDE0MTAxJywge2FkZGl0aW9uYWxEaWdpdHM6IDF9KQogICAgICAgKiAvLz0+IEZyaSBBcHIgMTEgMjAxNCAwMDowMDowMAogICAgICAgKi8KCiAgICAgIGZ1bmN0aW9uIHBhcnNlKGFyZ3VtZW50LCBkaXJ0eU9wdGlvbnMpIHsKICAgICAgICBpZiAoaXNEYXRlKGFyZ3VtZW50KSkgewogICAgICAgICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwCiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTsKICAgICAgICB2YXIgYWRkaXRpb25hbERpZ2l0cyA9IG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0czsKCiAgICAgICAgaWYgKGFkZGl0aW9uYWxEaWdpdHMgPT0gbnVsbCkgewogICAgICAgICAgYWRkaXRpb25hbERpZ2l0cyA9IERFRkFVTFRfQURESVRJT05BTF9ESUdJVFM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFkZGl0aW9uYWxEaWdpdHMgPSBOdW1iZXIoYWRkaXRpb25hbERpZ2l0cyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0ZVN0cmluZ3MgPSBzcGxpdERhdGVTdHJpbmcoYXJndW1lbnQpOwogICAgICAgIHZhciBwYXJzZVllYXJSZXN1bHQgPSBwYXJzZVllYXIoZGF0ZVN0cmluZ3MuZGF0ZSwgYWRkaXRpb25hbERpZ2l0cyk7CiAgICAgICAgdmFyIHllYXIgPSBwYXJzZVllYXJSZXN1bHQueWVhcjsKICAgICAgICB2YXIgcmVzdERhdGVTdHJpbmcgPSBwYXJzZVllYXJSZXN1bHQucmVzdERhdGVTdHJpbmc7CiAgICAgICAgdmFyIGRhdGUgPSBwYXJzZURhdGUocmVzdERhdGVTdHJpbmcsIHllYXIpOwoKICAgICAgICBpZiAoZGF0ZSkgewogICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpOwogICAgICAgICAgdmFyIHRpbWUgPSAwOwogICAgICAgICAgdmFyIG9mZnNldDsKCiAgICAgICAgICBpZiAoZGF0ZVN0cmluZ3MudGltZSkgewogICAgICAgICAgICB0aW1lID0gcGFyc2VUaW1lKGRhdGVTdHJpbmdzLnRpbWUpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChkYXRlU3RyaW5ncy50aW1lem9uZSkgewogICAgICAgICAgICBvZmZzZXQgPSBwYXJzZVRpbWV6b25lKGRhdGVTdHJpbmdzLnRpbWV6b25lKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGdldCBvZmZzZXQgYWNjdXJhdGUgdG8gaG91ciBpbiB0aW1lem9uZXMgdGhhdCBjaGFuZ2Ugb2Zmc2V0CiAgICAgICAgICAgIG9mZnNldCA9IG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUpLmdldFRpbWV6b25lT2Zmc2V0KCk7CiAgICAgICAgICAgIG9mZnNldCA9IG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUgKyBvZmZzZXQgKiBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFKS5nZXRUaW1lem9uZU9mZnNldCgpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lICsgb2Zmc2V0ICogTUlMTElTRUNPTkRTX0lOX01JTlVURSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBzcGxpdERhdGVTdHJpbmcoZGF0ZVN0cmluZykgewogICAgICAgIHZhciBkYXRlU3RyaW5ncyA9IHt9OwogICAgICAgIHZhciBhcnJheSA9IGRhdGVTdHJpbmcuc3BsaXQocGFyc2VUb2tlbkRhdGVUaW1lRGVsaW1ldGVyKTsKICAgICAgICB2YXIgdGltZVN0cmluZzsKCiAgICAgICAgaWYgKHBhcnNlVG9rZW5QbGFpblRpbWUudGVzdChhcnJheVswXSkpIHsKICAgICAgICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBudWxsOwogICAgICAgICAgdGltZVN0cmluZyA9IGFycmF5WzBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRlU3RyaW5ncy5kYXRlID0gYXJyYXlbMF07CiAgICAgICAgICB0aW1lU3RyaW5nID0gYXJyYXlbMV07CiAgICAgICAgfQoKICAgICAgICBpZiAodGltZVN0cmluZykgewogICAgICAgICAgdmFyIHRva2VuID0gcGFyc2VUb2tlblRpbWV6b25lLmV4ZWModGltZVN0cmluZyk7CgogICAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICAgIGRhdGVTdHJpbmdzLnRpbWUgPSB0aW1lU3RyaW5nLnJlcGxhY2UodG9rZW5bMV0sICcnKTsKICAgICAgICAgICAgZGF0ZVN0cmluZ3MudGltZXpvbmUgPSB0b2tlblsxXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGVTdHJpbmdzLnRpbWUgPSB0aW1lU3RyaW5nOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRhdGVTdHJpbmdzOwogICAgICB9CgogICAgICBmdW5jdGlvbiBwYXJzZVllYXIoZGF0ZVN0cmluZywgYWRkaXRpb25hbERpZ2l0cykgewogICAgICAgIHZhciBwYXJzZVRva2VuWVlZID0gcGFyc2VUb2tlbnNZWVlbYWRkaXRpb25hbERpZ2l0c107CiAgICAgICAgdmFyIHBhcnNlVG9rZW5ZWVlZWSA9IHBhcnNlVG9rZW5zWVlZWVlbYWRkaXRpb25hbERpZ2l0c107CiAgICAgICAgdmFyIHRva2VuOyAvLyBZWVlZIG9yIMKxWVlZWVkKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuWVlZWS5leGVjKGRhdGVTdHJpbmcpIHx8IHBhcnNlVG9rZW5ZWVlZWS5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHZhciB5ZWFyU3RyaW5nID0gdG9rZW5bMV07CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB5ZWFyOiBwYXJzZUludCh5ZWFyU3RyaW5nLCAxMCksCiAgICAgICAgICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKHllYXJTdHJpbmcubGVuZ3RoKQogICAgICAgICAgfTsKICAgICAgICB9IC8vIFlZIG9yIMKxWVlZCgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5ZWS5leGVjKGRhdGVTdHJpbmcpIHx8IHBhcnNlVG9rZW5ZWVkuZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICB2YXIgY2VudHVyeVN0cmluZyA9IHRva2VuWzFdOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeWVhcjogcGFyc2VJbnQoY2VudHVyeVN0cmluZywgMTApICogMTAwLAogICAgICAgICAgICByZXN0RGF0ZVN0cmluZzogZGF0ZVN0cmluZy5zbGljZShjZW50dXJ5U3RyaW5nLmxlbmd0aCkKICAgICAgICAgIH07CiAgICAgICAgfSAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhcgoKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHllYXI6IG51bGwKICAgICAgICB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBwYXJzZURhdGUoZGF0ZVN0cmluZywgeWVhcikgewogICAgICAgIC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyCiAgICAgICAgaWYgKHllYXIgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRva2VuOwogICAgICAgIHZhciBkYXRlOwogICAgICAgIHZhciBtb250aDsKICAgICAgICB2YXIgd2VlazsgLy8gWVlZWQoKICAgICAgICBpZiAoZGF0ZVN0cmluZy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgICAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhcik7CiAgICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgICB9IC8vIFlZWVktTU0KCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbk1NLmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDApOwogICAgICAgICAgbW9udGggPSBwYXJzZUludCh0b2tlblsxXSwgMTApIC0gMTsKICAgICAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgbW9udGgpOwogICAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgICAgfSAvLyBZWVlZLURERCBvciBZWVlZRERECgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5EREQuZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMCk7CiAgICAgICAgICB2YXIgZGF5T2ZZZWFyID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKTsKICAgICAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgMCwgZGF5T2ZZZWFyKTsKICAgICAgICAgIHJldHVybiBkYXRlOwogICAgICAgIH0gLy8gWVlZWS1NTS1ERCBvciBZWVlZTU1ERAoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuTU1ERC5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgICAgICAgIG1vbnRoID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKSAtIDE7CiAgICAgICAgICB2YXIgZGF5ID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKTsKICAgICAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgbW9udGgsIGRheSk7CiAgICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgICB9IC8vIFlZWVktV3d3IG9yIFlZWVlXd3cKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbld3dy5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHdlZWsgPSBwYXJzZUludCh0b2tlblsxXSwgMTApIC0gMTsKICAgICAgICAgIHJldHVybiBkYXlPZklTT1llYXIoeWVhciwgd2Vlayk7CiAgICAgICAgfSAvLyBZWVlZLVd3dy1EIG9yIFlZWVlXd3dECgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5Xd3dELmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgd2VlayA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCkgLSAxOwogICAgICAgICAgdmFyIGRheU9mV2VlayA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCkgLSAxOwogICAgICAgICAgcmV0dXJuIGRheU9mSVNPWWVhcih5ZWFyLCB3ZWVrLCBkYXlPZldlZWspOwogICAgICAgIH0gLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIGRhdGUKCgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICBmdW5jdGlvbiBwYXJzZVRpbWUodGltZVN0cmluZykgewogICAgICAgIHZhciB0b2tlbjsKICAgICAgICB2YXIgaG91cnM7CiAgICAgICAgdmFyIG1pbnV0ZXM7IC8vIGhoCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbkhILmV4ZWModGltZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgaG91cnMgPSBwYXJzZUZsb2F0KHRva2VuWzFdLnJlcGxhY2UoJywnLCAnLicpKTsKICAgICAgICAgIHJldHVybiBob3VycyAlIDI0ICogTUlMTElTRUNPTkRTX0lOX0hPVVI7CiAgICAgICAgfSAvLyBoaDptbSBvciBoaG1tCgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5ISE1NLmV4ZWModGltZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0b2tlblsxXSwgMTApOwogICAgICAgICAgbWludXRlcyA9IHBhcnNlRmxvYXQodG9rZW5bMl0ucmVwbGFjZSgnLCcsICcuJykpOwogICAgICAgICAgcmV0dXJuIGhvdXJzICUgMjQgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUiArIG1pbnV0ZXMgKiBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFOwogICAgICAgIH0gLy8gaGg6bW06c3Mgb3IgaGhtbXNzCgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5ISE1NU1MuZXhlYyh0aW1lU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCk7CiAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKTsKICAgICAgICAgIHZhciBzZWNvbmRzID0gcGFyc2VGbG9hdCh0b2tlblszXS5yZXBsYWNlKCcsJywgJy4nKSk7CiAgICAgICAgICByZXR1cm4gaG91cnMgJSAyNCAqIE1JTExJU0VDT05EU19JTl9IT1VSICsgbWludXRlcyAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUgKyBzZWNvbmRzICogMTAwMDsKICAgICAgICB9IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB0aW1lCgoKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcGFyc2VUaW1lem9uZSh0aW1lem9uZVN0cmluZykgewogICAgICAgIHZhciB0b2tlbjsKICAgICAgICB2YXIgYWJzb2x1dGVPZmZzZXQ7IC8vIFoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuVGltZXpvbmVaLmV4ZWModGltZXpvbmVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gLy8gwrFoaAoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuVGltZXpvbmVISC5leGVjKHRpbWV6b25lU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBhYnNvbHV0ZU9mZnNldCA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCkgKiA2MDsKICAgICAgICAgIHJldHVybiB0b2tlblsxXSA9PT0gJysnID8gLWFic29sdXRlT2Zmc2V0IDogYWJzb2x1dGVPZmZzZXQ7CiAgICAgICAgfSAvLyDCsWhoOm1tIG9yIMKxaGhtbQoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuVGltZXpvbmVISE1NLmV4ZWModGltZXpvbmVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGFic29sdXRlT2Zmc2V0ID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKSAqIDYwICsgcGFyc2VJbnQodG9rZW5bM10sIDEwKTsKICAgICAgICAgIHJldHVybiB0b2tlblsxXSA9PT0gJysnID8gLWFic29sdXRlT2Zmc2V0IDogYWJzb2x1dGVPZmZzZXQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gMDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZGF5T2ZJU09ZZWFyKGlzb1llYXIsIHdlZWssIGRheSkgewogICAgICAgIHdlZWsgPSB3ZWVrIHx8IDA7CiAgICAgICAgZGF5ID0gZGF5IHx8IDA7CiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGlzb1llYXIsIDAsIDQpOwogICAgICAgIHZhciBmb3VydGhPZkphbnVhcnlEYXkgPSBkYXRlLmdldFVUQ0RheSgpIHx8IDc7CiAgICAgICAgdmFyIGRpZmYgPSB3ZWVrICogNyArIGRheSArIDEgLSBmb3VydGhPZkphbnVhcnlEYXk7CiAgICAgICAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpICsgZGlmZik7CiAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gcGFyc2U7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChiaXRtYXAsIHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEoYml0bWFwICYgMSksCiAgICAgICAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksCiAgICAgICAgICB3cml0YWJsZTogIShiaXRtYXAgJiA0KSwKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDIwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyICRhdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKSh0cnVlKTsgLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQoKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNTEpKFN0cmluZywgJ1N0cmluZycsIGZ1bmN0aW9uIChpdGVyYXRlZCkgewogICAgICAgIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXQKCiAgICAgICAgdGhpcy5faSA9IDA7IC8vIG5leHQgaW5kZXgKICAgICAgICAvLyAyMS4xLjUuMi4xICVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgTyA9IHRoaXMuX3Q7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5faTsKICAgICAgICB2YXIgcG9pbnQ7CiAgICAgICAgaWYgKGluZGV4ID49IE8ubGVuZ3RoKSByZXR1cm4gewogICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCwKICAgICAgICAgIGRvbmU6IHRydWUKICAgICAgICB9OwogICAgICAgIHBvaW50ID0gJGF0KE8sIGluZGV4KTsKICAgICAgICB0aGlzLl9pICs9IHBvaW50Lmxlbmd0aDsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IHBvaW50LAogICAgICAgICAgZG9uZTogZmFsc2UKICAgICAgICB9OwogICAgICB9KTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHRydWU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykKICAgICAgdmFyICRrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7CgogICAgICB2YXIgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKSB7CiAgICAgICAgcmV0dXJuICRrZXlzKE8sIGVudW1CdWdLZXlzKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICB2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZzsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIGlmICh0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJykgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTsKICAgICAgICByZXR1cm4gaXQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDI1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgdmFyIGlkID0gMDsKICAgICAgdmFyIHB4ID0gTWF0aC5yYW5kb20oKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkgewogICAgICAgIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDI2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNykuZjsKCiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCd0b1N0cmluZ1RhZycpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIHRhZywgc3RhdCkgewogICAgICAgIGlmIChpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKSBkZWYoaXQsIFRBRywgewogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgdmFsdWU6IHRhZwogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTA2KTsKCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKCiAgICAgIHZhciBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCiAgICAgIHZhciBUT19TVFJJTkdfVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsKCiAgICAgIHZhciBET01JdGVyYWJsZXMgPSAoJ0NTU1J1bGVMaXN0LENTU1N0eWxlRGVjbGFyYXRpb24sQ1NTVmFsdWVMaXN0LENsaWVudFJlY3RMaXN0LERPTVJlY3RMaXN0LERPTVN0cmluZ0xpc3QsJyArICdET01Ub2tlbkxpc3QsRGF0YVRyYW5zZmVySXRlbUxpc3QsRmlsZUxpc3QsSFRNTEFsbENvbGxlY3Rpb24sSFRNTENvbGxlY3Rpb24sSFRNTEZvcm1FbGVtZW50LEhUTUxTZWxlY3RFbGVtZW50LCcgKyAnTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCwnICsgJ1NWR1BhdGhTZWdMaXN0LFNWR1BvaW50TGlzdCxTVkdTdHJpbmdMaXN0LFNWR1RyYW5zZm9ybUxpc3QsU291cmNlQnVmZmVyTGlzdCxTdHlsZVNoZWV0TGlzdCxUZXh0VHJhY2tDdWVMaXN0LCcgKyAnVGV4dFRyYWNrTGlzdCxUb3VjaExpc3QnKS5zcGxpdCgnLCcpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBET01JdGVyYWJsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgTkFNRSA9IERPTUl0ZXJhYmxlc1tpXTsKICAgICAgICB2YXIgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXTsKICAgICAgICB2YXIgcHJvdG8gPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlOwogICAgICAgIGlmIChwcm90byAmJiAhcHJvdG9bVE9fU1RSSU5HX1RBR10pIGhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpOwogICAgICAgIEl0ZXJhdG9yc1tOQU1FXSA9IEl0ZXJhdG9ycy5BcnJheTsKICAgICAgfQogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDI5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICB2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7CgogICAgICB2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyWyJkZWZhdWx0Il0pKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgICAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICAgICAgICB9OwogICAgICB9KCk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDMxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICB2YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLmRvY3VtZW50OyAvLyB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JyBpbiBvbGQgSUUKCgogICAgICB2YXIgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDMyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pCiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOyAvLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQogICAgICAvLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCBTKSB7CiAgICAgICAgaWYgKCFpc09iamVjdChpdCkpIHJldHVybiBpdDsKICAgICAgICB2YXIgZm4sIHZhbDsKICAgICAgICBpZiAoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgcmV0dXJuIHZhbDsKICAgICAgICBpZiAodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgcmV0dXJuIHZhbDsKICAgICAgICBpZiAoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7CiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4KICAgICAgICoKICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICovCgogICAgICB2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IFJlYWN0UHJvcFR5cGVzU2VjcmV0OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDM0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLy8gNy4xLjQgVG9JbnRlZ2VyCiAgICAgIHZhciBjZWlsID0gTWF0aC5jZWlsOwogICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIGlmIChpdCA9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIgKyBpdCk7CiAgICAgICAgcmV0dXJuIGl0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGRQcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKCiAgICAgIHZhciBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwoKICAgICAgdmFyIElFX1BST1RPID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCkoJ0lFX1BST1RPJyk7CgogICAgICB2YXIgRW1wdHkgPSBmdW5jdGlvbiBFbXB0eSgpIHsKICAgICAgICAvKiBlbXB0eSAqLwogICAgICB9OwoKICAgICAgdmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnOyAvLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlCgogICAgICB2YXIgX2NyZWF0ZURpY3QgPSBmdW5jdGlvbiBjcmVhdGVEaWN0KCkgewogICAgICAgIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnCiAgICAgICAgdmFyIGlmcmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpKCdpZnJhbWUnKTsKCiAgICAgICAgdmFyIGkgPSBlbnVtQnVnS2V5cy5sZW5ndGg7CiAgICAgICAgdmFyIGx0ID0gJzwnOwogICAgICAgIHZhciBndCA9ICc+JzsKICAgICAgICB2YXIgaWZyYW1lRG9jdW1lbnQ7CiAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNTUpLmFwcGVuZENoaWxkKGlmcmFtZSk7CgogICAgICAgIGlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDonOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwKICAgICAgICAvLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0OwogICAgICAgIC8vIGh0bWwucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKCiAgICAgICAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgICAgICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7CiAgICAgICAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpOwogICAgICAgIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7CiAgICAgICAgX2NyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GOwoKICAgICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgICBkZWxldGUgX2NyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tpXV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX2NyZWF0ZURpY3QoKTsKICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcykgewogICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgIGlmIChPICE9PSBudWxsKSB7CiAgICAgICAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7CiAgICAgICAgICByZXN1bHQgPSBuZXcgRW1wdHkoKTsKICAgICAgICAgIEVtcHR5W1BST1RPVFlQRV0gPSBudWxsOyAvLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbAoKICAgICAgICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPOwogICAgICAgIH0gZWxzZSByZXN1bHQgPSBfY3JlYXRlRGljdCgpOwoKICAgICAgICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZFBzKHJlc3VsdCwgUHJvcGVydGllcyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDM3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gNy4xLjE1IFRvTGVuZ3RoCiAgICAgIHZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCiAgICAgIHZhciBtaW4gPSBNYXRoLm1pbjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTEKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgc2hhcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSkoJ2tleXMnKTsKCiAgICAgIHZhciB1aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSkgewogICAgICAgIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDM5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXyc7CiAgICAgIHZhciBzdG9yZSA9IGdsb2JhbFtTSEFSRURdIHx8IChnbG9iYWxbU0hBUkVEXSA9IHt9KTsKICAgICAgKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgICAgICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IHt9KTsKICAgICAgfSkoJ3ZlcnNpb25zJywgW10pLnB1c2goewogICAgICAgIHZlcnNpb246IGNvcmUudmVyc2lvbiwKICAgICAgICBtb2RlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKSA/ICdwdXJlJyA6ICdnbG9iYWwnLAogICAgICAgIGNvcHlyaWdodDogJ8KpIDIwMTkgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSknCiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cwogICAgICBtb2R1bGUuZXhwb3J0cyA9ICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnLnNwbGl0KCcsJyk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNDEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKQogICAgICB2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7CgogICAgICB2YXIgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsgLy8gRVMzIHdyb25nIGhlcmUKCgogICAgICB2YXIgQVJHID0gY29mKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzOwogICAgICB9KCkpID09ICdBcmd1bWVudHMnOyAvLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvcgoKICAgICAgdmFyIHRyeUdldCA9IGZ1bmN0aW9uIHRyeUdldChpdCwga2V5KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBpdFtrZXldOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8qIGVtcHR5ICovCiAgICAgICAgfQogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICB2YXIgTywgVCwgQjsKICAgICAgICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCcgLy8gQEB0b1N0cmluZ1RhZyBjYXNlCiAgICAgICAgOiB0eXBlb2YgKFQgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRBRykpID09ICdzdHJpbmcnID8gVCAvLyBidWlsdGluVGFnIGNhc2UKICAgICAgICA6IEFSRyA/IGNvZihPKSAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrCiAgICAgICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDQyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGNsYXNzb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTsKCiAgICAgIHZhciBJVEVSQVRPUiA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyk7CgogICAgICB2YXIgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICBpZiAoaXQgIT0gdW5kZWZpbmVkKSByZXR1cm4gaXRbSVRFUkFUT1JdIHx8IGl0WydAQGl0ZXJhdG9yJ10gfHwgSXRlcmF0b3JzW2NsYXNzb2YoaXQpXTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNDMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIDI1LjQuMS41IE5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCgogICAgICB2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7CgogICAgICBmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eShDKSB7CiAgICAgICAgdmFyIHJlc29sdmUsIHJlamVjdDsKICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbiAoJCRyZXNvbHZlLCAkJHJlamVjdCkgewogICAgICAgICAgaWYgKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCkgdGhyb3cgVHlwZUVycm9yKCdCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvcicpOwogICAgICAgICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTsKICAgICAgICAgIHJlamVjdCA9ICQkcmVqZWN0OwogICAgICAgIH0pOwogICAgICAgIHRoaXMucmVzb2x2ZSA9IGFGdW5jdGlvbihyZXNvbHZlKTsKICAgICAgICB0aGlzLnJlamVjdCA9IGFGdW5jdGlvbihyZWplY3QpOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gKEMpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA0NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNDUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQ2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CgogICAgICB2YXIgTElCUkFSWSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwoKICAgICAgdmFyIHdrc0V4dCA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwoKICAgICAgdmFyIGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KS5mOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7CiAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApICE9ICdfJyAmJiAhKG5hbWUgaW4gJFN5bWJvbCkpIGRlZmluZVByb3BlcnR5KCRTeW1ib2wsIG5hbWUsIHsKICAgICAgICAgIHZhbHVlOiB3a3NFeHQuZihuYW1lKQogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA0NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKICAgICAgZXhwb3J0cy5vbWl0ID0gb21pdDsKICAgICAgZXhwb3J0cy5hcnJheXNFcXVhbCA9IGFycmF5c0VxdWFsOwoKICAgICAgdmFyIGlzRWxlbWVudEFuU0ZDID0gZXhwb3J0cy5pc0VsZW1lbnRBblNGQyA9IGZ1bmN0aW9uIGlzRWxlbWVudEFuU0ZDKGVsZW1lbnQpIHsKICAgICAgICB2YXIgaXNOYXRpdmVET01FbGVtZW50ID0gdHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZyc7CgogICAgICAgIGlmIChpc05hdGl2ZURPTUVsZW1lbnQpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhZWxlbWVudC50eXBlLnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50OwogICAgICB9OwoKICAgICAgZnVuY3Rpb24gb21pdChvYmopIHsKICAgICAgICB2YXIgYXR0cnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwogICAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgaWYgKGF0dHJzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CgogICAgICBmdW5jdGlvbiBhcnJheXNFcXVhbChhLCBiKSB7CiAgICAgICAgdmFyIHNhbWVPYmplY3QgPSBhID09PSBiOwoKICAgICAgICBpZiAoc2FtZU9iamVjdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICB2YXIgbm90Qm90aEFycmF5cyA9ICFBcnJheS5pc0FycmF5KGEpIHx8ICFBcnJheS5pc0FycmF5KGIpOwogICAgICAgIHZhciBkaWZmZXJlbnRMZW5ndGhzID0gYS5sZW5ndGggIT09IGIubGVuZ3RoOwoKICAgICAgICBpZiAobm90Qm90aEFycmF5cyB8fCBkaWZmZXJlbnRMZW5ndGhzKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYS5ldmVyeShmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICAgIHJldHVybiBlbGVtZW50ID09PSBiW2luZGV4XTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbWVtb2l6ZVN0cmluZyhmbikgewogICAgICAgIHZhciBjYWNoZSA9IHt9OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7CiAgICAgICAgICBpZiAoIWNhY2hlW3N0cl0pIHsKICAgICAgICAgICAgY2FjaGVbc3RyXSA9IGZuKHN0cik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGNhY2hlW3N0cl07CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGh5cGhlbmF0ZSA9IGV4cG9ydHMuaHlwaGVuYXRlID0gbWVtb2l6ZVN0cmluZyhmdW5jdGlvbiAoc3RyKSB7CiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oW0EtWl0pL2csICctJDEnKS50b0xvd2VyQ2FzZSgpOwogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIV9fd2VicGFja19yZXF1aXJlX18oOCkgJiYgIV9fd2VicGFja19yZXF1aXJlX18oMTQpKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19yZXF1aXJlX18oMzEpKCdkaXYnKSwgJ2EnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIDc7CiAgICAgICAgICB9CiAgICAgICAgfSkuYSAhPSA3OwogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KTsKICAgICAgICB9CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDUwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA1MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBMSUJSQVJZID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7CgogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgcmVkZWZpbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTsKCiAgICAgIHZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7CgogICAgICB2YXIgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CgogICAgICB2YXIgJGl0ZXJDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7CgogICAgICB2YXIgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTsKCiAgICAgIHZhciBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwoKICAgICAgdmFyIElURVJBVE9SID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKTsKCiAgICAgIHZhciBCVUdHWSA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKTsgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YAoKICAgICAgdmFyIEZGX0lURVJBVE9SID0gJ0BAaXRlcmF0b3InOwogICAgICB2YXIgS0VZUyA9ICdrZXlzJzsKICAgICAgdmFyIFZBTFVFUyA9ICd2YWx1ZXMnOwoKICAgICAgdmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbiByZXR1cm5UaGlzKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKSB7CiAgICAgICAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOwoKICAgICAgICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24gZ2V0TWV0aG9kKGtpbmQpIHsKICAgICAgICAgIGlmICghQlVHR1kgJiYga2luZCBpbiBwcm90bykgcmV0dXJuIHByb3RvW2tpbmRdOwoKICAgICAgICAgIHN3aXRjaCAoa2luZCkgewogICAgICAgICAgICBjYXNlIEtFWVM6CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICBjYXNlIFZBTFVFUzoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOwogICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICB2YXIgVEFHID0gTkFNRSArICcgSXRlcmF0b3InOwogICAgICAgIHZhciBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVM7CiAgICAgICAgdmFyIFZBTFVFU19CVUcgPSBmYWxzZTsKICAgICAgICB2YXIgcHJvdG8gPSBCYXNlLnByb3RvdHlwZTsKICAgICAgICB2YXIgJG5hdGl2ZSA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXTsKICAgICAgICB2YXIgJGRlZmF1bHQgPSAkbmF0aXZlIHx8IGdldE1ldGhvZChERUZBVUxUKTsKICAgICAgICB2YXIgJGVudHJpZXMgPSBERUZBVUxUID8gIURFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZCgnZW50cmllcycpIDogdW5kZWZpbmVkOwogICAgICAgIHZhciAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZTsKICAgICAgICB2YXIgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTsgLy8gRml4IG5hdGl2ZQoKICAgICAgICBpZiAoJGFueU5hdGl2ZSkgewogICAgICAgICAgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UoKSkpOwoKICAgICAgICAgIGlmIChJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBJdGVyYXRvclByb3RvdHlwZS5uZXh0KSB7CiAgICAgICAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKICAgICAgICAgICAgc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsIFRBRywgdHJ1ZSk7IC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcwoKICAgICAgICAgICAgaWYgKCFMSUJSQVJZICYmIHR5cGVvZiBJdGVyYXRvclByb3RvdHlwZVtJVEVSQVRPUl0gIT0gJ2Z1bmN0aW9uJykgaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpOwogICAgICAgICAgfQogICAgICAgIH0gLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgoKCiAgICAgICAgaWYgKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUykgewogICAgICAgICAgVkFMVUVTX0JVRyA9IHRydWU7CgogICAgICAgICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKSB7CiAgICAgICAgICAgIHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7CiAgICAgICAgICB9OwogICAgICAgIH0gLy8gRGVmaW5lIGl0ZXJhdG9yCgoKICAgICAgICBpZiAoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpIHsKICAgICAgICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7CiAgICAgICAgfSAvLyBQbHVnIGZvciBsaWJyYXJ5CgoKICAgICAgICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDsKICAgICAgICBJdGVyYXRvcnNbVEFHXSA9IHJldHVyblRoaXM7CgogICAgICAgIGlmIChERUZBVUxUKSB7CiAgICAgICAgICBtZXRob2RzID0gewogICAgICAgICAgICB2YWx1ZXM6IERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLAogICAgICAgICAgICBrZXlzOiBJU19TRVQgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwKICAgICAgICAgICAgZW50cmllczogJGVudHJpZXMKICAgICAgICAgIH07CiAgICAgICAgICBpZiAoRk9SQ0VEKSBmb3IgKGtleSBpbiBtZXRob2RzKSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiBwcm90bykpIHJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7CiAgICAgICAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1ldGhvZHM7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDUyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA1MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKCiAgICAgIHZhciBhcnJheUluZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCkoZmFsc2UpOwoKICAgICAgdmFyIElFX1BST1RPID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCkoJ0lFX1BST1RPJyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWVzKSB7CiAgICAgICAgdmFyIE8gPSB0b0lPYmplY3Qob2JqZWN0KTsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgIHZhciBrZXk7CgogICAgICAgIGZvciAoa2V5IGluIE8pIHsKICAgICAgICAgIGlmIChrZXkgIT0gSUVfUFJPVE8pIGhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7CiAgICAgICAgfSAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCgoKICAgICAgICB3aGlsZSAobmFtZXMubGVuZ3RoID4gaSkgewogICAgICAgICAgaWYgKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSkgewogICAgICAgICAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIGFuZCBub24tZW51bWVyYWJsZSBvbGQgVjggc3RyaW5ncwogICAgICB2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGNvZihpdCkgPT0gJ1N0cmluZycgPyBpdC5zcGxpdCgnJykgOiBPYmplY3QoaXQpOwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDU1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudDsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDU2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgogICAgICB2YXIgSUVfUFJPVE8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSgnSUVfUFJPVE8nKTsKCiAgICAgIHZhciBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAoTykgewogICAgICAgIE8gPSB0b09iamVjdChPKTsKICAgICAgICBpZiAoaGFzKE8sIElFX1BST1RPKSkgcmV0dXJuIE9bSUVfUFJPVE9dOwoKICAgICAgICBpZiAodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90byA6IG51bGw7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDU3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcykgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpOyAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107CiAgICAgICAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIGFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7CiAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yCiAgICAgIHZhciBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCiAgICAgIHZhciBJVEVSQVRPUiA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyk7CgogICAgICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCiAgICAgIHZhciBTUEVDSUVTID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoTywgRCkgewogICAgICAgIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3I7CiAgICAgICAgdmFyIFM7CiAgICAgICAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBjdHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKCiAgICAgIHZhciBpbnZva2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMik7CgogICAgICB2YXIgaHRtbCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpOwoKICAgICAgdmFyIGNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOwoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzOwogICAgICB2YXIgc2V0VGFzayA9IGdsb2JhbC5zZXRJbW1lZGlhdGU7CiAgICAgIHZhciBjbGVhclRhc2sgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGU7CiAgICAgIHZhciBNZXNzYWdlQ2hhbm5lbCA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbDsKICAgICAgdmFyIERpc3BhdGNoID0gZ2xvYmFsLkRpc3BhdGNoOwogICAgICB2YXIgY291bnRlciA9IDA7CiAgICAgIHZhciBxdWV1ZSA9IHt9OwogICAgICB2YXIgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSc7CiAgICAgIHZhciBkZWZlciwgY2hhbm5lbCwgcG9ydDsKCiAgICAgIHZhciBydW4gPSBmdW5jdGlvbiBydW4oKSB7CiAgICAgICAgdmFyIGlkID0gK3RoaXM7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKCiAgICAgICAgaWYgKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSkgewogICAgICAgICAgdmFyIGZuID0gcXVldWVbaWRdOwogICAgICAgICAgZGVsZXRlIHF1ZXVlW2lkXTsKICAgICAgICAgIGZuKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gbGlzdGVuZXIoZXZlbnQpIHsKICAgICAgICBydW4uY2FsbChldmVudC5kYXRhKTsKICAgICAgfTsgLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgoKCiAgICAgIGlmICghc2V0VGFzayB8fCAhY2xlYXJUYXNrKSB7CiAgICAgICAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbikgewogICAgICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgICAgIHZhciBpID0gMTsKCiAgICAgICAgICB3aGlsZSAoYXJndW1lbnRzLmxlbmd0aCA+IGkpIHsKICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTsKICAgICAgICAgIH0KCiAgICAgICAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKICAgICAgICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpOwogICAgICAgICAgfTsKCiAgICAgICAgICBkZWZlcihjb3VudGVyKTsKICAgICAgICAgIHJldHVybiBjb3VudGVyOwogICAgICAgIH07CgogICAgICAgIGNsZWFyVGFzayA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGlkKSB7CiAgICAgICAgICBkZWxldGUgcXVldWVbaWRdOwogICAgICAgIH07IC8vIE5vZGUuanMgMC44LQoKCiAgICAgICAgaWYgKF9fd2VicGFja19yZXF1aXJlX18oMjMpKHByb2Nlc3MpID09ICdwcm9jZXNzJykgewogICAgICAgICAgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihpZCkgewogICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7CiAgICAgICAgICB9OyAvLyBTcGhlcmUgKEpTIGdhbWUgZW5naW5lKSBEaXNwYXRjaCBBUEkKCiAgICAgICAgfSBlbHNlIGlmIChEaXNwYXRjaCAmJiBEaXNwYXRjaC5ub3cpIHsKICAgICAgICAgIGRlZmVyID0gZnVuY3Rpb24gZGVmZXIoaWQpIHsKICAgICAgICAgICAgRGlzcGF0Y2gubm93KGN0eChydW4sIGlkLCAxKSk7CiAgICAgICAgICB9OyAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzCgogICAgICAgIH0gZWxzZSBpZiAoTWVzc2FnZUNoYW5uZWwpIHsKICAgICAgICAgIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTsKICAgICAgICAgIHBvcnQgPSBjaGFubmVsLnBvcnQyOwogICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjsKICAgICAgICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOyAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnMKICAgICAgICAgIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnCiAgICAgICAgfSBlbHNlIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJyAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHsKICAgICAgICAgIGRlZmVyID0gZnVuY3Rpb24gZGVmZXIoaWQpIHsKICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTsgLy8gSUU4LQogICAgICAgIH0gZWxzZSBpZiAoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0JykpIHsKICAgICAgICAgIGRlZmVyID0gZnVuY3Rpb24gZGVmZXIoaWQpIHsKICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChjZWwoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7CiAgICAgICAgICAgICAgcnVuLmNhbGwoaWQpOwogICAgICAgICAgICB9OwogICAgICAgICAgfTsgLy8gUmVzdCBvbGQgYnJvd3NlcnMKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlZmVyID0gZnVuY3Rpb24gZGVmZXIoaWQpIHsKICAgICAgICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgIHNldDogc2V0VGFzaywKICAgICAgICBjbGVhcjogY2xlYXJUYXNrCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNjEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGU6IGZhbHNlLAogICAgICAgICAgICB2OiBleGVjKCkKICAgICAgICAgIH07CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZTogdHJ1ZSwKICAgICAgICAgICAgdjogZQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDYyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDLCB4KSB7CiAgICAgICAgYW5PYmplY3QoQyk7CiAgICAgICAgaWYgKGlzT2JqZWN0KHgpICYmIHguY29uc3RydWN0b3IgPT09IEMpIHJldHVybiB4OwogICAgICAgIHZhciBwcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5LmYoQyk7CiAgICAgICAgdmFyIHJlc29sdmUgPSBwcm9taXNlQ2FwYWJpbGl0eS5yZXNvbHZlOwogICAgICAgIHJlc29sdmUoeCk7CiAgICAgICAgcmV0dXJuIHByb21pc2VDYXBhYmlsaXR5LnByb21pc2U7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDYzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIElURVJBVE9SID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKTsKCiAgICAgIHZhciBTQUZFX0NMT1NJTkcgPSBmYWxzZTsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHJpdGVyID0gWzddW0lURVJBVE9SXSgpOwoKICAgICAgICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBTQUZFX0NMT1NJTkcgPSB0cnVlOwogICAgICAgIH07IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsCgoKICAgICAgICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyAyOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLyogZW1wdHkgKi8KICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYywgc2tpcENsb3NpbmcpIHsKICAgICAgICBpZiAoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpIHJldHVybiBmYWxzZTsKICAgICAgICB2YXIgc2FmZSA9IGZhbHNlOwoKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGFyciA9IFs3XTsKICAgICAgICAgIHZhciBpdGVyID0gYXJyW0lURVJBVE9SXSgpOwoKICAgICAgICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBkb25lOiBzYWZlID0gdHJ1ZQogICAgICAgICAgICB9OwogICAgICAgICAgfTsKCiAgICAgICAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gaXRlcjsKICAgICAgICAgIH07CgogICAgICAgICAgZXhlYyhhcnIpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8qIGVtcHR5ICovCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2FmZTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTIzKSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNjUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKICAgICAgdmFyIGZhaWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVksIGV4ZWMpIHsKICAgICAgICB2YXIgZm4gPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV07CiAgICAgICAgdmFyIGV4cCA9IHt9OwogICAgICAgIGV4cFtLRVldID0gZXhlYyhmbik7CiAgICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmbigxKTsKICAgICAgICB9KSwgJ09iamVjdCcsIGV4cCk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDY2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIHZhciBfdHlwZW9mMiA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpOwoKICAgICAgdmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7CiAgICAgICAgaWYgKCFzZWxmKSB7CiAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mM1siZGVmYXVsdCJdKShjYWxsKSkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpOwoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pdGVyYXRvcik7CgogICAgICB2YXIgX3N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KTsKCiAgICAgIHZhciBfc3ltYm9sMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N5bWJvbCk7CgogICAgICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBfc3ltYm9sMlsiZGVmYXVsdCJdID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2Y0KF9pdGVyYXRvcjJbImRlZmF1bHQiXSkgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBfdHlwZW9mNChvYmopOwogICAgICB9IDogZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyWyJkZWZhdWx0Il0gPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMlsiZGVmYXVsdCJdICYmIG9iaiAhPT0gX3N5bWJvbDJbImRlZmF1bHQiXS5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2Y0KG9iaik7CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IHR5cGVvZiBfc3ltYm9sMlsiZGVmYXVsdCJdID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YoX2l0ZXJhdG9yMlsiZGVmYXVsdCJdKSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG9iaik7CiAgICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDJbImRlZmF1bHQiXSA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyWyJkZWZhdWx0Il0gJiYgb2JqICE9PSBfc3ltYm9sMlsiZGVmYXVsdCJdLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA2OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKICAgICAgdmFyICRrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7CgogICAgICB2YXIgaGlkZGVuS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpOwoKICAgICAgZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhPKSB7CiAgICAgICAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBwSUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTsKCiAgICAgIHZhciBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7CgogICAgICB2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CgogICAgICB2YXIgdG9QcmltaXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTsKCiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciBJRThfRE9NX0RFRklORSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwoKICAgICAgdmFyIGdPUEQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogICAgICBleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpID8gZ09QRCA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKSB7CiAgICAgICAgTyA9IHRvSU9iamVjdChPKTsKICAgICAgICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7CiAgICAgICAgaWYgKElFOF9ET01fREVGSU5FKSB0cnkgewogICAgICAgICAgcmV0dXJuIGdPUEQoTywgUCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLyogZW1wdHkgKi8KICAgICAgICB9CiAgICAgICAgaWYgKGhhcyhPLCBQKSkgcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pOwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDcwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIHZhciBfc2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7CgogICAgICB2YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTsKCiAgICAgIHZhciBfY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDApOwoKICAgICAgdmFyIF9jcmVhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlKTsKCiAgICAgIHZhciBfdHlwZW9mMiA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpOwoKICAgICAgdmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgewogICAgICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjNbImRlZmF1bHQiXSkoc3VwZXJDbGFzcykpKTsKICAgICAgICB9CgogICAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMlsiZGVmYXVsdCJdKShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjJbImRlZmF1bHQiXSA/ICgwLCBfc2V0UHJvdG90eXBlT2YyWyJkZWZhdWx0Il0pKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDcxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgICBleHBvcnRzLmhhc0NsYXNzSW5QYXJlbnQgPSBleHBvcnRzLmZvcm1hdEVycm9yTXNnID0gZXhwb3J0cy5nZXRNZXRhQ29udGVudCA9IGV4cG9ydHMuYXhpb3NHaXRodWIgPSBleHBvcnRzLmF4aW9zSlNPTiA9IGV4cG9ydHMucXVlcnlTdHJpbmdpZnkgPSBleHBvcnRzLnF1ZXJ5UGFyc2UgPSB1bmRlZmluZWQ7CgogICAgICB2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7CgogICAgICB2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7CgogICAgICB2YXIgX3NsaWNlZFRvQXJyYXkyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpOwoKICAgICAgdmFyIF9zbGljZWRUb0FycmF5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NsaWNlZFRvQXJyYXkyKTsKCiAgICAgIHZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSk7CgogICAgICB2YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHF1ZXJ5UGFyc2UgPSBleHBvcnRzLnF1ZXJ5UGFyc2UgPSBmdW5jdGlvbiBxdWVyeVBhcnNlKCkgewogICAgICAgIHZhciBzZWFyY2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7CiAgICAgICAgaWYgKCFzZWFyY2gpIHJldHVybiB7fTsKICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBzZWFyY2hbMF0gPT09ICc/JyA/IHNlYXJjaC5zdWJzdHJpbmcoMSkgOiBzZWFyY2g7CiAgICAgICAgdmFyIHF1ZXJ5ID0ge307CiAgICAgICAgcXVlcnlTdHJpbmcuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uIChxdWVyeVN0cikgewogICAgICAgICAgdmFyIF9xdWVyeVN0ciRzcGxpdCA9IHF1ZXJ5U3RyLnNwbGl0KCc9JyksCiAgICAgICAgICAgICAgX3F1ZXJ5U3RyJHNwbGl0MiA9ICgwLCBfc2xpY2VkVG9BcnJheTNbImRlZmF1bHQiXSkoX3F1ZXJ5U3RyJHNwbGl0LCAyKSwKICAgICAgICAgICAgICBrZXkgPSBfcXVlcnlTdHIkc3BsaXQyWzBdLAogICAgICAgICAgICAgIHZhbHVlID0gX3F1ZXJ5U3RyJHNwbGl0MlsxXTsKICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCgoKICAgICAgICAgIGlmIChrZXkpIHF1ZXJ5W2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHF1ZXJ5OwogICAgICB9OwoKICAgICAgdmFyIHF1ZXJ5U3RyaW5naWZ5ID0gZXhwb3J0cy5xdWVyeVN0cmluZ2lmeSA9IGZ1bmN0aW9uIHF1ZXJ5U3RyaW5naWZ5KHF1ZXJ5KSB7CiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gKDAsIF9rZXlzMlsiZGVmYXVsdCJdKShxdWVyeSkubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIHJldHVybiBrZXkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnlba2V5XSB8fCAnJyk7CiAgICAgICAgfSkuam9pbignJicpOwogICAgICAgIHJldHVybiBxdWVyeVN0cmluZzsKICAgICAgfTsKCiAgICAgIHZhciBheGlvc0pTT04gPSBleHBvcnRzLmF4aW9zSlNPTiA9IF9heGlvczJbImRlZmF1bHQiXS5jcmVhdGUoewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIGF4aW9zR2l0aHViID0gZXhwb3J0cy5heGlvc0dpdGh1YiA9IF9heGlvczJbImRlZmF1bHQiXS5jcmVhdGUoewogICAgICAgIGJhc2VVUkw6ICdodHRwczovL2FwaS5naXRodWIuY29tJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHZhciBnZXRNZXRhQ29udGVudCA9IGV4cG9ydHMuZ2V0TWV0YUNvbnRlbnQgPSBmdW5jdGlvbiBnZXRNZXRhQ29udGVudChuYW1lLCBjb250ZW50KSB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICBjb250ZW50IHx8IChjb250ZW50ID0gJ2NvbnRlbnQnKTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICB2YXIgZWwgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwnJyArIG5hbWUgKyAnXCddJyk7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgcmV0dXJuIGVsICYmIGVsLmdldEF0dHJpYnV0ZShjb250ZW50KTsKICAgICAgfTsKCiAgICAgIHZhciBmb3JtYXRFcnJvck1zZyA9IGV4cG9ydHMuZm9ybWF0RXJyb3JNc2cgPSBmdW5jdGlvbiBmb3JtYXRFcnJvck1zZyhlcnIpIHsKICAgICAgICB2YXIgbXNnID0gJ0Vycm9yOiAnOwoKICAgICAgICBpZiAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5kYXRhICYmIGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHsKICAgICAgICAgIG1zZyArPSBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlICsgJy4gJzsKICAgICAgICAgIGVyci5yZXNwb25zZS5kYXRhLmVycm9ycyAmJiAobXNnICs9IGVyci5yZXNwb25zZS5kYXRhLmVycm9ycy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUubWVzc2FnZTsKICAgICAgICAgIH0pLmpvaW4oJywgJykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtc2cgKz0gZXJyLm1lc3NhZ2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbXNnOwogICAgICB9OwoKICAgICAgdmFyIGhhc0NsYXNzSW5QYXJlbnQgPSBleHBvcnRzLmhhc0NsYXNzSW5QYXJlbnQgPSBmdW5jdGlvbiBoYXNDbGFzc0luUGFyZW50KGVsZW1lbnQpIHsKICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NOYW1lID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgY2xhc3NOYW1lW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICB9CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogICAgICAgIHZhciB5ZXMgPSBmYWxzZTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIHZhciBjbGFzc2VzID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICBjbGFzc05hbWUuZm9yRWFjaChmdW5jdGlvbiAoYywgaSkgewogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICAgIHllcyA9IHllcyB8fCBjbGFzc2VzLmluZGV4T2YoYykgPj0gMDsKICAgICAgICB9KTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICBpZiAoeWVzKSByZXR1cm4geWVzOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIHJldHVybiBlbGVtZW50LnBhcmVudE5vZGUgJiYgaGFzQ2xhc3NJblBhcmVudChlbGVtZW50LnBhcmVudE5vZGUsIGNsYXNzTmFtZSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDcyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7CiAgICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgZnVuY3Rpb24gZW5jb2RlKHZhbCkgewogICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5yZXBsYWNlKC8lNDAvZ2ksICdAJykucmVwbGFjZSgvJTNBL2dpLCAnOicpLnJlcGxhY2UoLyUyNC9nLCAnJCcpLnJlcGxhY2UoLyUyQy9naSwgJywnKS5yZXBsYWNlKC8lMjAvZywgJysnKS5yZXBsYWNlKC8lNUIvZ2ksICdbJykucmVwbGFjZSgvJTVEL2dpLCAnXScpOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmQKICAgICAgICoKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pCiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkCiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHsKICAgICAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi8KICAgICAgICBpZiAoIXBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHVybDsKICAgICAgICB9CgogICAgICAgIHZhciBzZXJpYWxpemVkUGFyYW1zOwoKICAgICAgICBpZiAocGFyYW1zU2VyaWFsaXplcikgewogICAgICAgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTsKICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHsKICAgICAgICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHBhcnRzID0gW107CiAgICAgICAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7CiAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHsKICAgICAgICAgICAgICBrZXkgPSBrZXkgKyAnW10nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhbCA9IFt2YWxdOwogICAgICAgICAgICB9CgogICAgICAgICAgICB1dGlscy5mb3JFYWNoKHZhbCwgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7CiAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkgewogICAgICAgICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KHYpKSB7CiAgICAgICAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VyaWFsaXplZFBhcmFtcykgewogICAgICAgICAgdmFyIGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZignIycpOwoKICAgICAgICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkgewogICAgICAgICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7CiAgICAgICAgICB9CgogICAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHVybDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgICB2YXIgbm9ybWFsaXplSGVhZGVyTmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KTsKCiAgICAgICAgdmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0gewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7CiAgICAgICAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkgewogICAgICAgICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7CiAgICAgICAgICB2YXIgYWRhcHRlcjsKCiAgICAgICAgICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyCiAgICAgICAgICAgIGFkYXB0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7CiAgICAgICAgICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXIKICAgICAgICAgICAgYWRhcHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBhZGFwdGVyOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRlZmF1bHRzID0gewogICAgICAgICAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSwKICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHsKICAgICAgICAgICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQWNjZXB0Jyk7CiAgICAgICAgICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpOwoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHwgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fCB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fCB1dGlscy5pc1N0cmVhbShkYXRhKSB8fCB1dGlscy5pc0ZpbGUoZGF0YSkgfHwgdXRpbHMuaXNCbG9iKGRhdGEpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkgewogICAgICAgICAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7CiAgICAgICAgICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpOwogICAgICAgICAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSkgewogICAgICAgICAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7CiAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICAgIH1dLAogICAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7CiAgICAgICAgICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLwogICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIC8qIElnbm9yZSAqLwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgICB9XSwKCiAgICAgICAgICAvKioKICAgICAgICAgICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYQogICAgICAgICAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC4KICAgICAgICAgICAqLwogICAgICAgICAgdGltZW91dDogMCwKICAgICAgICAgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsCiAgICAgICAgICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsCiAgICAgICAgICBtYXhDb250ZW50TGVuZ3RoOiAtMSwKICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZGVmYXVsdHMuaGVhZGVycyA9IHsKICAgICAgICAgIGNvbW1vbjogewogICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHsKICAgICAgICAgIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9OwogICAgICAgIH0pOwogICAgICAgIHV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7CiAgICAgICAgICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7CiAgICAgICAgfSk7CiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0czsKICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA3NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICB2YXIgc2V0dGxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzgpOwoKICAgICAgdmFyIGJ1aWxkVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7CgogICAgICB2YXIgYnVpbGRGdWxsUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKTsKCiAgICAgIHZhciBwYXJzZUhlYWRlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Myk7CgogICAgICB2YXIgaXNVUkxTYW1lT3JpZ2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODQpOwoKICAgICAgdmFyIGNyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhOwogICAgICAgICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7CgogICAgICAgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpKSB7CiAgICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXQKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uCgogICAgICAgICAgaWYgKGNvbmZpZy5hdXRoKSB7CiAgICAgICAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnOwogICAgICAgICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJzsKICAgICAgICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTsKICAgICAgICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGZ1bGxQYXRoLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpOyAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNUwoKICAgICAgICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0OyAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlCgogICAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkgewogICAgICAgICAgICBpZiAoIXJlcXVlc3QgfHwgcmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZQogICAgICAgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZAogICAgICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2VycwogICAgICAgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0CgoKICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoJ2ZpbGU6JykgPT09IDApKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlCgoKICAgICAgICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsOwogICAgICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIWNvbmZpZy5yZXNwb25zZVR5cGUgfHwgY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnID8gcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlOwogICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSB7CiAgICAgICAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLAogICAgICAgICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsCiAgICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXNUZXh0LAogICAgICAgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycywKICAgICAgICAgICAgICBjb25maWc6IGNvbmZpZywKICAgICAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgICAgICB9OyAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pCgoKICAgICAgICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkgewogICAgICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlamVjdChjcmVhdGVFcnJvcignUmVxdWVzdCBhYm9ydGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJywgcmVxdWVzdCkpOyAvLyBDbGVhbiB1cCByZXF1ZXN0CgogICAgICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgICAgIH07IC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnMKCgogICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7CiAgICAgICAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlcgogICAgICAgICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3IKICAgICAgICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7IC8vIENsZWFuIHVwIHJlcXVlc3QKCiAgICAgICAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgICAgICAgfTsgLy8gSGFuZGxlIHRpbWVvdXQKCgogICAgICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkgewogICAgICAgICAgICB2YXIgdGltZW91dEVycm9yTWVzc2FnZSA9ICd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCc7CgogICAgICAgICAgICBpZiAoY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2UpIHsKICAgICAgICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlamVjdChjcmVhdGVFcnJvcih0aW1lb3V0RXJyb3JNZXNzYWdlLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7IC8vIENsZWFuIHVwIHJlcXVlc3QKCiAgICAgICAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgICAgICAgfTsgLy8gQWRkIHhzcmYgaGVhZGVyCiAgICAgICAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC4KICAgICAgICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuCgoKICAgICAgICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7CiAgICAgICAgICAgIHZhciBjb29raWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODUpOyAvLyBBZGQgeHNyZiBoZWFkZXIKCgogICAgICAgICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGZ1bGxQYXRoKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID8gY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOiB1bmRlZmluZWQ7CgogICAgICAgICAgICBpZiAoeHNyZlZhbHVlKSB7CiAgICAgICAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdAoKCiAgICAgICAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHsKICAgICAgICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkgewogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykgewogICAgICAgICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZAogICAgICAgICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWQKCgogICAgICAgICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkgewogICAgICAgICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhY29uZmlnLndpdGhDcmVkZW50aWFsczsKICAgICAgICAgIH0gLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZAoKCiAgICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi4KICAgICAgICAgICAgICAvLyBCdXQsIHRoaXMgY2FuIGJlIHN1cHByZXNzZWQgZm9yICdqc29uJyB0eXBlIGFzIGl0IGNhbiBiZSBwYXJzZWQgYnkgZGVmYXVsdCAndHJhbnNmb3JtUmVzcG9uc2UnIGZ1bmN0aW9uLgogICAgICAgICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHsKICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWQKCgogICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTsKICAgICAgICAgIH0gLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHMKCgogICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkgewogICAgICAgICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7CiAgICAgICAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb24KICAgICAgICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnByb21pc2UudGhlbihmdW5jdGlvbiBvbkNhbmNlbGVkKGNhbmNlbCkgewogICAgICAgICAgICAgIGlmICghcmVxdWVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmVxdWVzdC5hYm9ydCgpOwogICAgICAgICAgICAgIHJlamVjdChjYW5jZWwpOyAvLyBDbGVhbiB1cCByZXF1ZXN0CgogICAgICAgICAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXF1ZXN0RGF0YSA9IG51bGw7CiAgICAgICAgICB9IC8vIFNlbmQgdGhlIHJlcXVlc3QKCgogICAgICAgICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgZW5oYW5jZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzkpOwogICAgICAvKioKICAgICAgICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS4KICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuCiAgICAgICAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkgewogICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwogICAgICAvKioKICAgICAgICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdAogICAgICAgKiBieSBtZXJnaW5nIHR3byBjb25maWd1cmF0aW9uIG9iamVjdHMgdG9nZXRoZXIuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcyCiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzEKICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCiAgICAgICAgY29uZmlnMiA9IGNvbmZpZzIgfHwge307CiAgICAgICAgdmFyIGNvbmZpZyA9IHt9OwogICAgICAgIHZhciB2YWx1ZUZyb21Db25maWcyS2V5cyA9IFsndXJsJywgJ21ldGhvZCcsICdwYXJhbXMnLCAnZGF0YSddOwogICAgICAgIHZhciBtZXJnZURlZXBQcm9wZXJ0aWVzS2V5cyA9IFsnaGVhZGVycycsICdhdXRoJywgJ3Byb3h5J107CiAgICAgICAgdmFyIGRlZmF1bHRUb0NvbmZpZzJLZXlzID0gWydiYXNlVVJMJywgJ3VybCcsICd0cmFuc2Zvcm1SZXF1ZXN0JywgJ3RyYW5zZm9ybVJlc3BvbnNlJywgJ3BhcmFtc1NlcmlhbGl6ZXInLCAndGltZW91dCcsICd3aXRoQ3JlZGVudGlhbHMnLCAnYWRhcHRlcicsICdyZXNwb25zZVR5cGUnLCAneHNyZkNvb2tpZU5hbWUnLCAneHNyZkhlYWRlck5hbWUnLCAnb25VcGxvYWRQcm9ncmVzcycsICdvbkRvd25sb2FkUHJvZ3Jlc3MnLCAnbWF4Q29udGVudExlbmd0aCcsICd2YWxpZGF0ZVN0YXR1cycsICdtYXhSZWRpcmVjdHMnLCAnaHR0cEFnZW50JywgJ2h0dHBzQWdlbnQnLCAnY2FuY2VsVG9rZW4nLCAnc29ja2V0UGF0aCddOwogICAgICAgIHV0aWxzLmZvckVhY2godmFsdWVGcm9tQ29uZmlnMktleXMsIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkgewogICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHV0aWxzLmZvckVhY2gobWVyZ2VEZWVwUHJvcGVydGllc0tleXMsIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkgewogICAgICAgICAgaWYgKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzJbcHJvcF0pKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IHV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07CiAgICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzFbcHJvcF0pKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IHV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdKTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzFbcHJvcF07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdXRpbHMuZm9yRWFjaChkZWZhdWx0VG9Db25maWcyS2V5cywgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihwcm9wKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcxW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBheGlvc0tleXMgPSB2YWx1ZUZyb21Db25maWcyS2V5cy5jb25jYXQobWVyZ2VEZWVwUHJvcGVydGllc0tleXMpLmNvbmNhdChkZWZhdWx0VG9Db25maWcyS2V5cyk7CiAgICAgICAgdmFyIG90aGVyS2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZzIpLmZpbHRlcihmdW5jdGlvbiBmaWx0ZXJBeGlvc0tleXMoa2V5KSB7CiAgICAgICAgICByZXR1cm4gYXhpb3NLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTE7CiAgICAgICAgfSk7CiAgICAgICAgdXRpbHMuZm9yRWFjaChvdGhlcktleXMsIGZ1bmN0aW9uIG90aGVyS2V5c0RlZmF1bHRUb0NvbmZpZzIocHJvcCkgewogICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gY29uZmlnOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLgogICAgICAgKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLgogICAgICAgKi8KCiAgICAgIGZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7CiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgICAgfQoKICAgICAgQ2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpOwogICAgICB9OwoKICAgICAgQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogODAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBzcmMgPSBfcmVmLnNyYywKICAgICAgICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsCiAgICAgICAgICAgIGFsdCA9IF9yZWYuYWx0LAogICAgICAgICAgICBvbkVycm9yID0gX3JlZi5vbkVycm9yOwogICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYXZhdGFyICcgKyBjbGFzc05hbWUKICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnaW1nJywgewogICAgICAgICAgc3JjOiBzcmMsCiAgICAgICAgICBhbHQ6ICdAJyArIGFsdCwKICAgICAgICAgIG9uRXJyb3I6IG9uRXJyb3IKICAgICAgICB9KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDgxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsCiAgICAgICAgICAgIHRleHQgPSBfcmVmLnRleHQsCiAgICAgICAgICAgIG5hbWUgPSBfcmVmLm5hbWU7CiAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtaWNvICIgKyBjbGFzc05hbWUKICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LXN2ZyIsCiAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgICAgICBfX2h0bWw6IF9fd2VicGFja19yZXF1aXJlX18oMTkxKSgiLi8iICsgbmFtZSArICIuc3ZnIikKICAgICAgICAgIH0KICAgICAgICB9KSwgdGV4dCAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWljby10ZXh0IgogICAgICAgIH0sIHRleHQpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogODIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpOwoKICAgICAgdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKICAgICAgdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICB2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oOTQpOwoKICAgICAgdmFyIF9naXRhbGsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKCiAgICAgIHZhciBfZ2l0YWxrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dpdGFsayk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBHaXRhbGsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gR2l0YWxrKCkgewogICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbImRlZmF1bHQiXSkodGhpcywgR2l0YWxrKTsKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgICAgfQoKICAgICAgICAoMCwgX2NyZWF0ZUNsYXNzM1siZGVmYXVsdCJdKShHaXRhbGssIFt7CiAgICAgICAgICBrZXk6ICdyZW5kZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcihjb250YWluZXIsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBub2RlID0gbnVsbDsKICAgICAgICAgICAgY29udGFpbmVyID0gY29udGFpbmVyIHx8IHRoaXMub3B0aW9ucy5jb250YWluZXI7CiAgICAgICAgICAgIGlmICghY29udGFpbmVyKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRhaW5lciBpcyByZXF1aXJlZDogJyArIGNvbnRhaW5lcik7CgogICAgICAgICAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHsKICAgICAgICAgICAgICBub2RlID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgaWYgKCFub2RlKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRhaW5lciBub3QgZm91bmQsIHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZDogJyArIGNvbnRhaW5lcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbm9kZSA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykgewogICAgICAgICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soKSB7fTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfZ2l0YWxrMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zCiAgICAgICAgICAgIH0pLCBub2RlLCBjYWxsYmFjayk7CiAgICAgICAgICB9CiAgICAgICAgfV0pOwogICAgICAgIHJldHVybiBHaXRhbGs7CiAgICAgIH0oKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gR2l0YWxrOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDgzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogODQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KTsKCiAgICAgIHZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Q7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpIHsKICAgICAgICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogODUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7IC8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCgoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXyg4KSwgJ09iamVjdCcsIHsKICAgICAgICBkZWZpbmVQcm9wZXJ0eTogX193ZWJwYWNrX3JlcXVpcmVfXyg3KS5mCiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDg2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIC8qKgogICAgICAgICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuCiAgICAgICAgKgogICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAgKi8KICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgdmFyIFJlYWN0SXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTsgLy8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgZGV2ZWxvcG1lbnQgYmVoYXZpb3IuCiAgICAgICAgICAvLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kCgoKICAgICAgICAgIHZhciB0aHJvd09uRGlyZWN0QWNjZXNzID0gdHJ1ZTsKICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSkoUmVhY3RJcy5pc0VsZW1lbnQsIHRocm93T25EaXJlY3RBY2Nlc3MpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBwcm9kdWN0aW9uIGJlaGF2aW9yLgogICAgICAgICAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZAogICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKSgpOwogICAgICAgIH0KICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogODcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKiBAbGljZW5zZSBSZWFjdCB2MTYuMTIuMAogICAgICAgKiByZWFjdC1pcy5wcm9kdWN0aW9uLm1pbi5qcwogICAgICAgKgogICAgICAgKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy4KICAgICAgICoKICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICovCgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6ICEwCiAgICAgIH0pOwogICAgICB2YXIgYiA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sWyJmb3IiXSwKICAgICAgICAgIGMgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsCiAgICAgICAgICBkID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnBvcnRhbCIpIDogNjAxMDYsCiAgICAgICAgICBlID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmZyYWdtZW50IikgOiA2MDEwNywKICAgICAgICAgIGYgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LAogICAgICAgICAgZyA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5wcm9maWxlciIpIDogNjAxMTQsCiAgICAgICAgICBoID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnByb3ZpZGVyIikgOiA2MDEwOSwKICAgICAgICAgIGsgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuY29udGV4dCIpIDogNjAxMTAsCiAgICAgICAgICBsID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmFzeW5jX21vZGUiKSA6IDYwMTExLAogICAgICAgICAgbSA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5jb25jdXJyZW50X21vZGUiKSA6IDYwMTExLAogICAgICAgICAgbiA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5mb3J3YXJkX3JlZiIpIDogNjAxMTIsCiAgICAgICAgICBwID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnN1c3BlbnNlIikgOiA2MDExMywKICAgICAgICAgIHEgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3Quc3VzcGVuc2VfbGlzdCIpIDogNjAxMjAsCiAgICAgICAgICByID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0Lm1lbW8iKSA6IDYwMTE1LAogICAgICAgICAgdCA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5sYXp5IikgOiA2MDExNiwKICAgICAgICAgIHYgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuZnVuZGFtZW50YWwiKSA6IDYwMTE3LAogICAgICAgICAgdyA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5yZXNwb25kZXIiKSA6IDYwMTE4LAogICAgICAgICAgeCA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5zY29wZSIpIDogNjAxMTk7CgogICAgICBmdW5jdGlvbiB5KGEpIHsKICAgICAgICBpZiAoIm9iamVjdCIgPT09IF90eXBlb2Y0KGEpICYmIG51bGwgIT09IGEpIHsKICAgICAgICAgIHZhciB1ID0gYS4kJHR5cGVvZjsKCiAgICAgICAgICBzd2l0Y2ggKHUpIHsKICAgICAgICAgICAgY2FzZSBjOgogICAgICAgICAgICAgIHN3aXRjaCAoYSA9IGEudHlwZSwgYSkgewogICAgICAgICAgICAgICAgY2FzZSBsOgogICAgICAgICAgICAgICAgY2FzZSBtOgogICAgICAgICAgICAgICAgY2FzZSBlOgogICAgICAgICAgICAgICAgY2FzZSBnOgogICAgICAgICAgICAgICAgY2FzZSBmOgogICAgICAgICAgICAgICAgY2FzZSBwOgogICAgICAgICAgICAgICAgICByZXR1cm4gYTsKCiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICBzd2l0Y2ggKGEgPSBhICYmIGEuJCR0eXBlb2YsIGEpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIGs6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBuOgogICAgICAgICAgICAgICAgICAgIGNhc2UgdDoKICAgICAgICAgICAgICAgICAgICBjYXNlIHI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBoOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7CgogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIGQ6CiAgICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiB6KGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gbTsKICAgICAgfQoKICAgICAgZXhwb3J0cy50eXBlT2YgPSB5OwogICAgICBleHBvcnRzLkFzeW5jTW9kZSA9IGw7CiAgICAgIGV4cG9ydHMuQ29uY3VycmVudE1vZGUgPSBtOwogICAgICBleHBvcnRzLkNvbnRleHRDb25zdW1lciA9IGs7CiAgICAgIGV4cG9ydHMuQ29udGV4dFByb3ZpZGVyID0gaDsKICAgICAgZXhwb3J0cy5FbGVtZW50ID0gYzsKICAgICAgZXhwb3J0cy5Gb3J3YXJkUmVmID0gbjsKICAgICAgZXhwb3J0cy5GcmFnbWVudCA9IGU7CiAgICAgIGV4cG9ydHMuTGF6eSA9IHQ7CiAgICAgIGV4cG9ydHMuTWVtbyA9IHI7CiAgICAgIGV4cG9ydHMuUG9ydGFsID0gZDsKICAgICAgZXhwb3J0cy5Qcm9maWxlciA9IGc7CiAgICAgIGV4cG9ydHMuU3RyaWN0TW9kZSA9IGY7CiAgICAgIGV4cG9ydHMuU3VzcGVuc2UgPSBwOwoKICAgICAgZXhwb3J0cy5pc1ZhbGlkRWxlbWVudFR5cGUgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiAic3RyaW5nIiA9PT0gdHlwZW9mIGEgfHwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGEgfHwgYSA9PT0gZSB8fCBhID09PSBtIHx8IGEgPT09IGcgfHwgYSA9PT0gZiB8fCBhID09PSBwIHx8IGEgPT09IHEgfHwgIm9iamVjdCIgPT09IF90eXBlb2Y0KGEpICYmIG51bGwgIT09IGEgJiYgKGEuJCR0eXBlb2YgPT09IHQgfHwgYS4kJHR5cGVvZiA9PT0gciB8fCBhLiQkdHlwZW9mID09PSBoIHx8IGEuJCR0eXBlb2YgPT09IGsgfHwgYS4kJHR5cGVvZiA9PT0gbiB8fCBhLiQkdHlwZW9mID09PSB2IHx8IGEuJCR0eXBlb2YgPT09IHcgfHwgYS4kJHR5cGVvZiA9PT0geCk7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzQXN5bmNNb2RlID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geihhKSB8fCB5KGEpID09PSBsOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0NvbmN1cnJlbnRNb2RlID0gejsKCiAgICAgIGV4cG9ydHMuaXNDb250ZXh0Q29uc3VtZXIgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBrOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0NvbnRleHRQcm92aWRlciA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IGg7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzRWxlbWVudCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICJvYmplY3QiID09PSBfdHlwZW9mNChhKSAmJiBudWxsICE9PSBhICYmIGEuJCR0eXBlb2YgPT09IGM7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzRm9yd2FyZFJlZiA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IG47CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzRnJhZ21lbnQgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBlOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0xhenkgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSB0OwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc01lbW8gPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSByOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc1BvcnRhbCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IGQ7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzUHJvZmlsZXIgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBnOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc1N0cmljdE1vZGUgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBmOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc1N1c3BlbnNlID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gcDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogODggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xMi4wCiAgICAgICAgKiByZWFjdC1pcy5kZXZlbG9wbWVudC5qcwogICAgICAgICoKICAgICAgICAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogICAgICAgICoKICAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgICovCiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAicHJvZHVjdGlvbiIpIHsKICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsKICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICAgICAgICB9KTsgLy8gVGhlIFN5bWJvbCB1c2VkIHRvIHRhZyB0aGUgUmVhY3RFbGVtZW50LWxpa2UgdHlwZXMuIElmIHRoZXJlIGlzIG5vIG5hdGl2ZSBTeW1ib2wKICAgICAgICAgICAgLy8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLgoKICAgICAgICAgICAgdmFyIGhhc1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sWyJmb3IiXTsKICAgICAgICAgICAgdmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmVsZW1lbnQnKSA6IDB4ZWFjNzsKICAgICAgICAgICAgdmFyIFJFQUNUX1BPUlRBTF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QucG9ydGFsJykgOiAweGVhY2E7CiAgICAgICAgICAgIHZhciBSRUFDVF9GUkFHTUVOVF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuZnJhZ21lbnQnKSA6IDB4ZWFjYjsKICAgICAgICAgICAgdmFyIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5zdHJpY3RfbW9kZScpIDogMHhlYWNjOwogICAgICAgICAgICB2YXIgUkVBQ1RfUFJPRklMRVJfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnByb2ZpbGVyJykgOiAweGVhZDI7CiAgICAgICAgICAgIHZhciBSRUFDVF9QUk9WSURFUl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QucHJvdmlkZXInKSA6IDB4ZWFjZDsKICAgICAgICAgICAgdmFyIFJFQUNUX0NPTlRFWFRfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmNvbnRleHQnKSA6IDB4ZWFjZTsgLy8gVE9ETzogV2UgZG9uJ3QgdXNlIEFzeW5jTW9kZSBvciBDb25jdXJyZW50TW9kZSBhbnltb3JlLiBUaGV5IHdlcmUgdGVtcG9yYXJ5CiAgICAgICAgICAgIC8vICh1bnN0YWJsZSkgQVBJcyB0aGF0IGhhdmUgYmVlbiByZW1vdmVkLiBDYW4gd2UgcmVtb3ZlIHRoZSBzeW1ib2xzPwoKICAgICAgICAgICAgdmFyIFJFQUNUX0FTWU5DX01PREVfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmFzeW5jX21vZGUnKSA6IDB4ZWFjZjsKICAgICAgICAgICAgdmFyIFJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuY29uY3VycmVudF9tb2RlJykgOiAweGVhY2Y7CiAgICAgICAgICAgIHZhciBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuZm9yd2FyZF9yZWYnKSA6IDB4ZWFkMDsKICAgICAgICAgICAgdmFyIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5zdXNwZW5zZScpIDogMHhlYWQxOwogICAgICAgICAgICB2YXIgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3Quc3VzcGVuc2VfbGlzdCcpIDogMHhlYWQ4OwogICAgICAgICAgICB2YXIgUkVBQ1RfTUVNT19UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QubWVtbycpIDogMHhlYWQzOwogICAgICAgICAgICB2YXIgUkVBQ1RfTEFaWV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QubGF6eScpIDogMHhlYWQ0OwogICAgICAgICAgICB2YXIgUkVBQ1RfRlVOREFNRU5UQUxfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmZ1bmRhbWVudGFsJykgOiAweGVhZDU7CiAgICAgICAgICAgIHZhciBSRUFDVF9SRVNQT05ERVJfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnJlc3BvbmRlcicpIDogMHhlYWQ2OwogICAgICAgICAgICB2YXIgUkVBQ1RfU0NPUEVfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnNjb3BlJykgOiAweGVhZDc7CgogICAgICAgICAgICBmdW5jdGlvbiBpc1ZhbGlkRWxlbWVudFR5cGUodHlwZSkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgLy8gTm90ZTogaXRzIHR5cGVvZiBtaWdodCBiZSBvdGhlciB0aGFuICdzeW1ib2wnIG9yICdudW1iZXInIGlmIGl0J3MgYSBwb2x5ZmlsbC4KICAgICAgICAgICAgICB0eXBlID09PSBSRUFDVF9GUkFHTUVOVF9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1BST0ZJTEVSX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfU1RSSUNUX01PREVfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVVNQRU5TRV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSB8fCBfdHlwZW9mNCh0eXBlKSA9PT0gJ29iamVjdCcgJiYgdHlwZSAhPT0gbnVsbCAmJiAodHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX01FTU9fVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9QUk9WSURFUl9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NPTlRFWFRfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0ZVTkRBTUVOVEFMX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfUkVTUE9OREVSX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfU0NPUEVfVFlQRSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIEZvcmtlZCBmcm9tIGZianMvd2FybmluZzoKICAgICAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2ZianMvYmxvYi9lNjZiYTIwYWQ1YmU0MzNlYjU0NDIzZjJiMDk3ZDgyOTMyNGQ5ZGU2L3BhY2thZ2VzL2ZianMvc3JjL19fZm9ya3NfXy93YXJuaW5nLmpzCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqIE9ubHkgY2hhbmdlIGlzIHdlIHVzZSBjb25zb2xlLndhcm4gaW5zdGVhZCBvZiBjb25zb2xlLmVycm9yLAogICAgICAgICAgICAgKiBhbmQgZG8gbm90aGluZyB3aGVuICdjb25zb2xlJyBpcyBub3Qgc3VwcG9ydGVkLgogICAgICAgICAgICAgKiBUaGlzIHJlYWxseSBzaW1wbGlmaWVzIHRoZSBjb2RlLgogICAgICAgICAgICAgKiAtLS0KICAgICAgICAgICAgICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LgogICAgICAgICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvZyBpc3N1ZXMgaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzIGluIGNyaXRpY2FsCiAgICAgICAgICAgICAqIHBhdGhzLiBSZW1vdmluZyB0aGUgbG9nZ2luZyBjb2RlIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50cyB3aWxsIGtlZXAgdGhlCiAgICAgICAgICAgICAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLgogICAgICAgICAgICAgKi8KCgogICAgICAgICAgICB2YXIgbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrID0gZnVuY3Rpb24gbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrKCkge307CgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdmFyIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZyhmb3JtYXQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGFyZ0luZGV4ID0gMDsKICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS0KICAgICAgICAgICAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrCiAgICAgICAgICAgICAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoICh4KSB7fQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjayA9IGZ1bmN0aW9uIGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjayhjb25kaXRpb24sIGZvcm1hdCkgewogICAgICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjayhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnICsgJ21lc3NhZ2UgYXJndW1lbnQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIWNvbmRpdGlvbikgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAyID8gX2xlbjIgLSAyIDogMCksIF9rZXkyID0gMjsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykgewogICAgICAgICAgICAgICAgICAgIGFyZ3NbX2tleTIgLSAyXSA9IGFyZ3VtZW50c1tfa2V5Ml07CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHByaW50V2FybmluZy5hcHBseSh2b2lkIDAsIFtmb3JtYXRdLmNvbmNhdChhcmdzKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrJDEgPSBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2s7CgogICAgICAgICAgICBmdW5jdGlvbiB0eXBlT2Yob2JqZWN0KSB7CiAgICAgICAgICAgICAgaWYgKF90eXBlb2Y0KG9iamVjdCkgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdmFyICQkdHlwZW9mID0gb2JqZWN0LiQkdHlwZW9mOwoKICAgICAgICAgICAgICAgIHN3aXRjaCAoJCR0eXBlb2YpIHsKICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBvYmplY3QudHlwZTsKCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0FTWU5DX01PREVfVFlQRToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlOwoKICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkJHR5cGVvZlR5cGUgPSB0eXBlICYmIHR5cGUuJCR0eXBlb2Y7CgogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCQkdHlwZW9mVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BST1ZJREVSX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCR0eXBlb2ZUeXBlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQkdHlwZW9mOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQkdHlwZW9mOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgfSAvLyBBc3luY01vZGUgaXMgZGVwcmVjYXRlZCBhbG9uZyB3aXRoIGlzQXN5bmNNb2RlCgoKICAgICAgICAgICAgdmFyIEFzeW5jTW9kZSA9IFJFQUNUX0FTWU5DX01PREVfVFlQRTsKICAgICAgICAgICAgdmFyIENvbmN1cnJlbnRNb2RlID0gUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEU7CiAgICAgICAgICAgIHZhciBDb250ZXh0Q29uc3VtZXIgPSBSRUFDVF9DT05URVhUX1RZUEU7CiAgICAgICAgICAgIHZhciBDb250ZXh0UHJvdmlkZXIgPSBSRUFDVF9QUk9WSURFUl9UWVBFOwogICAgICAgICAgICB2YXIgRWxlbWVudCA9IFJFQUNUX0VMRU1FTlRfVFlQRTsKICAgICAgICAgICAgdmFyIEZvcndhcmRSZWYgPSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOwogICAgICAgICAgICB2YXIgRnJhZ21lbnQgPSBSRUFDVF9GUkFHTUVOVF9UWVBFOwogICAgICAgICAgICB2YXIgTGF6eSA9IFJFQUNUX0xBWllfVFlQRTsKICAgICAgICAgICAgdmFyIE1lbW8gPSBSRUFDVF9NRU1PX1RZUEU7CiAgICAgICAgICAgIHZhciBQb3J0YWwgPSBSRUFDVF9QT1JUQUxfVFlQRTsKICAgICAgICAgICAgdmFyIFByb2ZpbGVyID0gUkVBQ1RfUFJPRklMRVJfVFlQRTsKICAgICAgICAgICAgdmFyIFN0cmljdE1vZGUgPSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOwogICAgICAgICAgICB2YXIgU3VzcGVuc2UgPSBSRUFDVF9TVVNQRU5TRV9UWVBFOwogICAgICAgICAgICB2YXIgaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUgPSBmYWxzZTsgLy8gQXN5bmNNb2RlIHNob3VsZCBiZSBkZXByZWNhdGVkCgogICAgICAgICAgICBmdW5jdGlvbiBpc0FzeW5jTW9kZShvYmplY3QpIHsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoIWhhc1dhcm5lZEFib3V0RGVwcmVjYXRlZElzQXN5bmNNb2RlKSB7CiAgICAgICAgICAgICAgICAgIGhhc1dhcm5lZEFib3V0RGVwcmVjYXRlZElzQXN5bmNNb2RlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrJDEoZmFsc2UsICdUaGUgUmVhY3RJcy5pc0FzeW5jTW9kZSgpIGFsaWFzIGhhcyBiZWVuIGRlcHJlY2F0ZWQsICcgKyAnYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBSZWFjdCAxNysuIFVwZGF0ZSB5b3VyIGNvZGUgdG8gdXNlICcgKyAnUmVhY3RJcy5pc0NvbmN1cnJlbnRNb2RlKCkgaW5zdGVhZC4gSXQgaGFzIHRoZSBleGFjdCBzYW1lIEFQSS4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIGlzQ29uY3VycmVudE1vZGUob2JqZWN0KSB8fCB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfQVNZTkNfTU9ERV9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0NvbmN1cnJlbnRNb2RlKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQ29udGV4dENvbnN1bWVyKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0NvbnRleHRQcm92aWRlcihvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1BST1ZJREVSX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRWxlbWVudChvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gX3R5cGVvZjQob2JqZWN0KSA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0ZvcndhcmRSZWYob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0ZyYWdtZW50KG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNMYXp5KG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfTEFaWV9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc01lbW8ob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9NRU1PX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzUG9ydGFsKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfUE9SVEFMX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzUHJvZmlsZXIob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QUk9GSUxFUl9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc1N0cmljdE1vZGUob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc1N1c3BlbnNlKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfU1VTUEVOU0VfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZXhwb3J0cy50eXBlT2YgPSB0eXBlT2Y7CiAgICAgICAgICAgIGV4cG9ydHMuQXN5bmNNb2RlID0gQXN5bmNNb2RlOwogICAgICAgICAgICBleHBvcnRzLkNvbmN1cnJlbnRNb2RlID0gQ29uY3VycmVudE1vZGU7CiAgICAgICAgICAgIGV4cG9ydHMuQ29udGV4dENvbnN1bWVyID0gQ29udGV4dENvbnN1bWVyOwogICAgICAgICAgICBleHBvcnRzLkNvbnRleHRQcm92aWRlciA9IENvbnRleHRQcm92aWRlcjsKICAgICAgICAgICAgZXhwb3J0cy5FbGVtZW50ID0gRWxlbWVudDsKICAgICAgICAgICAgZXhwb3J0cy5Gb3J3YXJkUmVmID0gRm9yd2FyZFJlZjsKICAgICAgICAgICAgZXhwb3J0cy5GcmFnbWVudCA9IEZyYWdtZW50OwogICAgICAgICAgICBleHBvcnRzLkxhenkgPSBMYXp5OwogICAgICAgICAgICBleHBvcnRzLk1lbW8gPSBNZW1vOwogICAgICAgICAgICBleHBvcnRzLlBvcnRhbCA9IFBvcnRhbDsKICAgICAgICAgICAgZXhwb3J0cy5Qcm9maWxlciA9IFByb2ZpbGVyOwogICAgICAgICAgICBleHBvcnRzLlN0cmljdE1vZGUgPSBTdHJpY3RNb2RlOwogICAgICAgICAgICBleHBvcnRzLlN1c3BlbnNlID0gU3VzcGVuc2U7CiAgICAgICAgICAgIGV4cG9ydHMuaXNWYWxpZEVsZW1lbnRUeXBlID0gaXNWYWxpZEVsZW1lbnRUeXBlOwogICAgICAgICAgICBleHBvcnRzLmlzQXN5bmNNb2RlID0gaXNBc3luY01vZGU7CiAgICAgICAgICAgIGV4cG9ydHMuaXNDb25jdXJyZW50TW9kZSA9IGlzQ29uY3VycmVudE1vZGU7CiAgICAgICAgICAgIGV4cG9ydHMuaXNDb250ZXh0Q29uc3VtZXIgPSBpc0NvbnRleHRDb25zdW1lcjsKICAgICAgICAgICAgZXhwb3J0cy5pc0NvbnRleHRQcm92aWRlciA9IGlzQ29udGV4dFByb3ZpZGVyOwogICAgICAgICAgICBleHBvcnRzLmlzRWxlbWVudCA9IGlzRWxlbWVudDsKICAgICAgICAgICAgZXhwb3J0cy5pc0ZvcndhcmRSZWYgPSBpc0ZvcndhcmRSZWY7CiAgICAgICAgICAgIGV4cG9ydHMuaXNGcmFnbWVudCA9IGlzRnJhZ21lbnQ7CiAgICAgICAgICAgIGV4cG9ydHMuaXNMYXp5ID0gaXNMYXp5OwogICAgICAgICAgICBleHBvcnRzLmlzTWVtbyA9IGlzTWVtbzsKICAgICAgICAgICAgZXhwb3J0cy5pc1BvcnRhbCA9IGlzUG9ydGFsOwogICAgICAgICAgICBleHBvcnRzLmlzUHJvZmlsZXIgPSBpc1Byb2ZpbGVyOwogICAgICAgICAgICBleHBvcnRzLmlzU3RyaWN0TW9kZSA9IGlzU3RyaWN0TW9kZTsKICAgICAgICAgICAgZXhwb3J0cy5pc1N1c3BlbnNlID0gaXNTdXNwZW5zZTsKICAgICAgICAgIH0pKCk7CiAgICAgICAgfQogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICAvKioKICAgICAgICAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLgogICAgICAgICoKICAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgICovCiAgICAgICAgdmFyIFJlYWN0SXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTsKCiAgICAgICAgdmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oOTApOwoKICAgICAgICB2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsKCiAgICAgICAgdmFyIGNoZWNrUHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7CgogICAgICAgIHZhciBoYXMgPSBGdW5jdGlvbi5jYWxsLmJpbmQoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7CgogICAgICAgIHZhciBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiBwcmludFdhcm5pbmcoKSB7fTsKCiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZyh0ZXh0KSB7CiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyB0ZXh0OwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLQogICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFjawogICAgICAgICAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgfSBjYXRjaCAoeCkge30KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsKCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpc1ZhbGlkRWxlbWVudCwgdGhyb3dPbkRpcmVjdEFjY2VzcykgewogICAgICAgICAgLyogZ2xvYmFsIFN5bWJvbCAqLwogICAgICAgICAgdmFyIElURVJBVE9SX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yOwogICAgICAgICAgdmFyIEZBVVhfSVRFUkFUT1JfU1lNQk9MID0gJ0BAaXRlcmF0b3InOyAvLyBCZWZvcmUgU3ltYm9sIHNwZWMuCgogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBSZXR1cm5zIHRoZSBpdGVyYXRvciBtZXRob2QgZnVuY3Rpb24gY29udGFpbmVkIG9uIHRoZSBpdGVyYWJsZSBvYmplY3QuCiAgICAgICAgICAgKgogICAgICAgICAgICogQmUgc3VyZSB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGl0ZXJhYmxlIGFzIGNvbnRleHQ6CiAgICAgICAgICAgKgogICAgICAgICAgICogICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihteUl0ZXJhYmxlKTsKICAgICAgICAgICAqICAgICBpZiAoaXRlcmF0b3JGbikgewogICAgICAgICAgICogICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG15SXRlcmFibGUpOwogICAgICAgICAgICogICAgICAgLi4uCiAgICAgICAgICAgKiAgICAgfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSB7P29iamVjdH0gbWF5YmVJdGVyYWJsZQogICAgICAgICAgICogQHJldHVybiB7P2Z1bmN0aW9ufQogICAgICAgICAgICovCgogICAgICAgICAgZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7CiAgICAgICAgICAgIHZhciBpdGVyYXRvckZuID0gbWF5YmVJdGVyYWJsZSAmJiAoSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXSk7CgogICAgICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yRm4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICByZXR1cm4gaXRlcmF0b3JGbjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIG1ldGhvZHMgdGhhdCBhbGxvdyBkZWNsYXJhdGlvbiBhbmQgdmFsaWRhdGlvbiBvZiBwcm9wcyB0aGF0IGFyZQogICAgICAgICAgICogc3VwcGxpZWQgdG8gUmVhY3QgY29tcG9uZW50cy4gRXhhbXBsZSB1c2FnZToKICAgICAgICAgICAqCiAgICAgICAgICAgKiAgIHZhciBQcm9wcyA9IHJlcXVpcmUoJ1JlYWN0UHJvcFR5cGVzJyk7CiAgICAgICAgICAgKiAgIHZhciBNeUFydGljbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7CiAgICAgICAgICAgKiAgICAgcHJvcFR5cGVzOiB7CiAgICAgICAgICAgKiAgICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgcHJvcCBuYW1lZCAiZGVzY3JpcHRpb24iLgogICAgICAgICAgICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZywKICAgICAgICAgICAqCiAgICAgICAgICAgKiAgICAgICAvLyBBIHJlcXVpcmVkIGVudW0gcHJvcCBuYW1lZCAiY2F0ZWdvcnkiLgogICAgICAgICAgICogICAgICAgY2F0ZWdvcnk6IFByb3BzLm9uZU9mKFsnTmV3cycsJ1Bob3RvcyddKS5pc1JlcXVpcmVkLAogICAgICAgICAgICoKICAgICAgICAgICAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCAiZGlhbG9nIiB0aGF0IHJlcXVpcmVzIGFuIGluc3RhbmNlIG9mIERpYWxvZy4KICAgICAgICAgICAqICAgICAgIGRpYWxvZzogUHJvcHMuaW5zdGFuY2VPZihEaWFsb2cpLmlzUmVxdWlyZWQKICAgICAgICAgICAqICAgICB9LAogICAgICAgICAgICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7IC4uLiB9CiAgICAgICAgICAgKiAgIH0pOwogICAgICAgICAgICoKICAgICAgICAgICAqIEEgbW9yZSBmb3JtYWwgc3BlY2lmaWNhdGlvbiBvZiBob3cgdGhlc2UgbWV0aG9kcyBhcmUgdXNlZDoKICAgICAgICAgICAqCiAgICAgICAgICAgKiAgIHR5cGUgOj0gYXJyYXl8Ym9vbHxmdW5jfG9iamVjdHxudW1iZXJ8c3RyaW5nfG9uZU9mKFsuLi5dKXxpbnN0YW5jZU9mKC4uLikKICAgICAgICAgICAqICAgZGVjbCA6PSBSZWFjdFByb3BUeXBlcy57dHlwZX0oLmlzUmVxdWlyZWQpPwogICAgICAgICAgICoKICAgICAgICAgICAqIEVhY2ggYW5kIGV2ZXJ5IGRlY2xhcmF0aW9uIHByb2R1Y2VzIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBzaWduYXR1cmUuIFRoaXMKICAgICAgICAgICAqIGFsbG93cyB0aGUgY3JlYXRpb24gb2YgY3VzdG9tIHZhbGlkYXRpb24gZnVuY3Rpb25zLiBGb3IgZXhhbXBsZToKICAgICAgICAgICAqCiAgICAgICAgICAgKiAgdmFyIE15TGluayA9IFJlYWN0LmNyZWF0ZUNsYXNzKHsKICAgICAgICAgICAqICAgIHByb3BUeXBlczogewogICAgICAgICAgICogICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgb3IgVVJJIHByb3AgbmFtZWQgImhyZWYiLgogICAgICAgICAgICogICAgICBocmVmOiBmdW5jdGlvbihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHsKICAgICAgICAgICAqICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwogICAgICAgICAgICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJgogICAgICAgICAgICogICAgICAgICAgICAhKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFVSSSkpIHsKICAgICAgICAgICAqICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoCiAgICAgICAgICAgKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArCiAgICAgICAgICAgKiAgICAgICAgICAgIGNvbXBvbmVudE5hbWUKICAgICAgICAgICAqICAgICAgICAgICk7CiAgICAgICAgICAgKiAgICAgICAgfQogICAgICAgICAgICogICAgICB9CiAgICAgICAgICAgKiAgICB9LAogICAgICAgICAgICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59CiAgICAgICAgICAgKiAgfSk7CiAgICAgICAgICAgKgogICAgICAgICAgICogQGludGVybmFsCiAgICAgICAgICAgKi8KCgogICAgICAgICAgdmFyIEFOT05ZTU9VUyA9ICc8PGFub255bW91cz4+JzsgLy8gSW1wb3J0YW50IQogICAgICAgICAgLy8gS2VlcCB0aGlzIGxpc3QgaW4gc3luYyB3aXRoIHByb2R1Y3Rpb24gdmVyc2lvbiBpbiBgLi9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanNgLgoKICAgICAgICAgIHZhciBSZWFjdFByb3BUeXBlcyA9IHsKICAgICAgICAgICAgYXJyYXk6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdhcnJheScpLAogICAgICAgICAgICBib29sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLAogICAgICAgICAgICBmdW5jOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignZnVuY3Rpb24nKSwKICAgICAgICAgICAgbnVtYmVyOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignbnVtYmVyJyksCiAgICAgICAgICAgIG9iamVjdDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLAogICAgICAgICAgICBzdHJpbmc6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzdHJpbmcnKSwKICAgICAgICAgICAgc3ltYm9sOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3ltYm9sJyksCiAgICAgICAgICAgIGFueTogY3JlYXRlQW55VHlwZUNoZWNrZXIoKSwKICAgICAgICAgICAgYXJyYXlPZjogY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyLAogICAgICAgICAgICBlbGVtZW50OiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSwKICAgICAgICAgICAgZWxlbWVudFR5cGU6IGNyZWF0ZUVsZW1lbnRUeXBlVHlwZUNoZWNrZXIoKSwKICAgICAgICAgICAgaW5zdGFuY2VPZjogY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlciwKICAgICAgICAgICAgbm9kZTogY3JlYXRlTm9kZUNoZWNrZXIoKSwKICAgICAgICAgICAgb2JqZWN0T2Y6IGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIsCiAgICAgICAgICAgIG9uZU9mOiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIsCiAgICAgICAgICAgIG9uZU9mVHlwZTogY3JlYXRlVW5pb25UeXBlQ2hlY2tlciwKICAgICAgICAgICAgc2hhcGU6IGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIsCiAgICAgICAgICAgIGV4YWN0OiBjcmVhdGVTdHJpY3RTaGFwZVR5cGVDaGVja2VyCiAgICAgICAgICB9OwogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBpbmxpbmVkIE9iamVjdC5pcyBwb2x5ZmlsbCB0byBhdm9pZCByZXF1aXJpbmcgY29uc3VtZXJzIHNoaXAgdGhlaXIgb3duCiAgICAgICAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXMKICAgICAgICAgICAqLwoKICAgICAgICAgIC8qZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlKi8KCiAgICAgICAgICBmdW5jdGlvbiBpcyh4LCB5KSB7CiAgICAgICAgICAgIC8vIFNhbWVWYWx1ZSBhbGdvcml0aG0KICAgICAgICAgICAgaWYgKHggPT09IHkpIHsKICAgICAgICAgICAgICAvLyBTdGVwcyAxLTUsIDctMTAKICAgICAgICAgICAgICAvLyBTdGVwcyA2LmItNi5lOiArMCAhPSAtMAogICAgICAgICAgICAgIHJldHVybiB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBTdGVwIDYuYTogTmFOID09IE5hTgogICAgICAgICAgICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8qZXNsaW50LWVuYWJsZSBuby1zZWxmLWNvbXBhcmUqLwoKICAgICAgICAgIC8qKgogICAgICAgICAgICogV2UgdXNlIGFuIEVycm9yLWxpa2Ugb2JqZWN0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGFzIHBlb3BsZSBtYXkgY2FsbAogICAgICAgICAgICogUHJvcFR5cGVzIGRpcmVjdGx5IGFuZCBpbnNwZWN0IHRoZWlyIG91dHB1dC4gSG93ZXZlciwgd2UgZG9uJ3QgdXNlIHJlYWwKICAgICAgICAgICAqIEVycm9ycyBhbnltb3JlLiBXZSBkb24ndCBpbnNwZWN0IHRoZWlyIHN0YWNrIGFueXdheSwgYW5kIGNyZWF0aW5nIHRoZW0KICAgICAgICAgICAqIGlzIHByb2hpYml0aXZlbHkgZXhwZW5zaXZlIGlmIHRoZXkgYXJlIGNyZWF0ZWQgdG9vIG9mdGVuLCBzdWNoIGFzIHdoYXQKICAgICAgICAgICAqIGhhcHBlbnMgaW4gb25lT2ZUeXBlKCkgZm9yIGFueSB0eXBlIGJlZm9yZSB0aGUgb25lIHRoYXQgbWF0Y2hlZC4KICAgICAgICAgICAqLwoKCiAgICAgICAgICBmdW5jdGlvbiBQcm9wVHlwZUVycm9yKG1lc3NhZ2UpIHsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgICAgICAgICAgdGhpcy5zdGFjayA9ICcnOwogICAgICAgICAgfSAvLyBNYWtlIGBpbnN0YW5jZW9mIEVycm9yYCBzdGlsbCB3b3JrIGZvciByZXR1cm5lZCBlcnJvcnMuCgoKICAgICAgICAgIFByb3BUeXBlRXJyb3IucHJvdG90eXBlID0gRXJyb3IucHJvdG90eXBlOwoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKSB7CiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgICAgdmFyIG1hbnVhbFByb3BUeXBlQ2FsbENhY2hlID0ge307CiAgICAgICAgICAgICAgdmFyIG1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50ID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tUeXBlKGlzUmVxdWlyZWQsIHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7CiAgICAgICAgICAgICAgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudE5hbWUgfHwgQU5PTllNT1VTOwogICAgICAgICAgICAgIHByb3BGdWxsTmFtZSA9IHByb3BGdWxsTmFtZSB8fCBwcm9wTmFtZTsKCiAgICAgICAgICAgICAgaWYgKHNlY3JldCAhPT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHsKICAgICAgICAgICAgICAgIGlmICh0aHJvd09uRGlyZWN0QWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIC8vIE5ldyBiZWhhdmlvciBvbmx5IGZvciB1c2VycyBvZiBgcHJvcC10eXBlc2AgcGFja2FnZQogICAgICAgICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICsgJ1VzZSBgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKClgIHRvIGNhbGwgdGhlbS4gJyArICdSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJyk7CiAgICAgICAgICAgICAgICAgIGVyci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nOwogICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgIC8vIE9sZCBiZWhhdmlvciBmb3IgcGVvcGxlIHVzaW5nIFJlYWN0LlByb3BUeXBlcwogICAgICAgICAgICAgICAgICB2YXIgY2FjaGVLZXkgPSBjb21wb25lbnROYW1lICsgJzonICsgcHJvcE5hbWU7CgogICAgICAgICAgICAgICAgICBpZiAoIW1hbnVhbFByb3BUeXBlQ2FsbENhY2hlW2NhY2hlS2V5XSAmJiAvLyBBdm9pZCBzcGFtbWluZyB0aGUgY29uc29sZSBiZWNhdXNlIHRoZXkgYXJlIG9mdGVuIG5vdCBhY3Rpb25hYmxlIGV4Y2VwdCBmb3IgbGliIGF1dGhvcnMKICAgICAgICAgICAgICAgICAgbWFudWFsUHJvcFR5cGVXYXJuaW5nQ291bnQgPCAzKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nKCdZb3UgYXJlIG1hbnVhbGx5IGNhbGxpbmcgYSBSZWFjdC5Qcm9wVHlwZXMgdmFsaWRhdGlvbiAnICsgJ2Z1bmN0aW9uIGZvciB0aGUgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBwcm9wIG9uIGAnICsgY29tcG9uZW50TmFtZSArICdgLiBUaGlzIGlzIGRlcHJlY2F0ZWQgJyArICdhbmQgd2lsbCB0aHJvdyBpbiB0aGUgc3RhbmRhbG9uZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJyArICdZb3UgbWF5IGJlIHNlZWluZyB0aGlzIHdhcm5pbmcgZHVlIHRvIGEgdGhpcmQtcGFydHkgUHJvcFR5cGVzICcgKyAnbGlicmFyeS4gU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1kb250LWNhbGwtcHJvcHR5cGVzICcgKyAnZm9yIGRldGFpbHMuJyk7CiAgICAgICAgICAgICAgICAgICAgbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBtYW51YWxQcm9wVHlwZVdhcm5pbmdDb3VudCsrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChpc1JlcXVpcmVkKSB7CiAgICAgICAgICAgICAgICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2AgaXMgbWFya2VkIGFzIHJlcXVpcmVkICcgKyAoJ2luIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBidXQgaXRzIHZhbHVlIGlzIGBudWxsYC4nKSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignVGhlICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBpcyBtYXJrZWQgYXMgcmVxdWlyZWQgaW4gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGJ1dCBpdHMgdmFsdWUgaXMgYHVuZGVmaW5lZGAuJykpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjaGFpbmVkQ2hlY2tUeXBlID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgZmFsc2UpOwogICAgICAgICAgICBjaGFpbmVkQ2hlY2tUeXBlLmlzUmVxdWlyZWQgPSBjaGVja1R5cGUuYmluZChudWxsLCB0cnVlKTsKICAgICAgICAgICAgcmV0dXJuIGNoYWluZWRDaGVja1R5cGU7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoZXhwZWN0ZWRUeXBlKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7CiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwoKICAgICAgICAgICAgICBpZiAocHJvcFR5cGUgIT09IGV4cGVjdGVkVHlwZSkgewogICAgICAgICAgICAgICAgLy8gYHByb3BWYWx1ZWAgYmVpbmcgaW5zdGFuY2Ugb2YsIHNheSwgZGF0ZS9yZWdleHAsIHBhc3MgdGhlICdvYmplY3QnCiAgICAgICAgICAgICAgICAvLyBjaGVjaywgYnV0IHdlIGNhbiBvZmZlciBhIG1vcmUgcHJlY2lzZSBlcnJvciBtZXNzYWdlIGhlcmUgcmF0aGVyIHRoYW4KICAgICAgICAgICAgICAgIC8vICdvZiB0eXBlIGBvYmplY3RgJy4KICAgICAgICAgICAgICAgIHZhciBwcmVjaXNlVHlwZSA9IGdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcmVjaXNlVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnYCcgKyBleHBlY3RlZFR5cGUgKyAnYC4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpIHsKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGwpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVDaGVja2VyICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1Byb3BlcnR5IGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgY29tcG9uZW50IGAnICsgY29tcG9uZW50TmFtZSArICdgIGhhcyBpbnZhbGlkIFByb3BUeXBlIG5vdGF0aW9uIGluc2lkZSBhcnJheU9mLicpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKCiAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBhcnJheS4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBpLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJ1snICsgaSArICddJywgUmVhY3RQcm9wVHlwZXNTZWNyZXQpOwoKICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKCiAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50LicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlVHlwZUNoZWNrZXIoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CgogICAgICAgICAgICAgIGlmICghUmVhY3RJcy5pc1ZhbGlkRWxlbWVudFR5cGUocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudCB0eXBlLicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIoZXhwZWN0ZWRDbGFzcykgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICBpZiAoIShwcm9wc1twcm9wTmFtZV0gaW5zdGFuY2VvZiBleHBlY3RlZENsYXNzKSkgewogICAgICAgICAgICAgICAgdmFyIGV4cGVjdGVkQ2xhc3NOYW1lID0gZXhwZWN0ZWRDbGFzcy5uYW1lIHx8IEFOT05ZTU9VUzsKICAgICAgICAgICAgICAgIHZhciBhY3R1YWxDbGFzc05hbWUgPSBnZXRDbGFzc05hbWUocHJvcHNbcHJvcE5hbWVdKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIGFjdHVhbENsYXNzTmFtZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCAnKSArICgnaW5zdGFuY2Ugb2YgYCcgKyBleHBlY3RlZENsYXNzTmFtZSArICdgLicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcykgewogICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKSB7CiAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnRzIHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheSwgZ290ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBhcmd1bWVudHMuICcgKyAnQSBjb21tb24gbWlzdGFrZSBpcyB0byB3cml0ZSBvbmVPZih4LCB5LCB6KSBpbnN0ZWFkIG9mIG9uZU9mKFt4LCB5LCB6XSkuJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2YsIGV4cGVjdGVkIGFuIGFycmF5LicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CgogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwZWN0ZWRWYWx1ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChpcyhwcm9wVmFsdWUsIGV4cGVjdGVkVmFsdWVzW2ldKSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciB2YWx1ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHBlY3RlZFZhbHVlcywgZnVuY3Rpb24gcmVwbGFjZXIoa2V5LCB2YWx1ZSkgewogICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBnZXRQcmVjaXNlVHlwZSh2YWx1ZSk7CgogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzeW1ib2wnKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHZhbHVlIGAnICsgU3RyaW5nKHByb3BWYWx1ZSkgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgb25lIG9mICcgKyB2YWx1ZXNTdHJpbmcgKyAnLicpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZUNoZWNrZXIgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiBjb21wb25lbnQgYCcgKyBjb21wb25lbnROYW1lICsgJ2AgaGFzIGludmFsaWQgUHJvcFR5cGUgbm90YXRpb24gaW5zaWRlIG9iamVjdE9mLicpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwoKICAgICAgICAgICAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBvYmplY3QuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHByb3BWYWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKGhhcyhwcm9wVmFsdWUsIGtleSkpIHsKICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gdHlwZUNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTsKCiAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVVbmlvblR5cGVDaGVja2VyKGFycmF5T2ZUeXBlQ2hlY2tlcnMpIHsKICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5T2ZUeXBlQ2hlY2tlcnMpKSB7CiAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpIDogdm9pZCAwOwogICAgICAgICAgICAgIHJldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5T2ZUeXBlQ2hlY2tlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgY2hlY2tlciA9IGFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07CgogICAgICAgICAgICAgIGlmICh0eXBlb2YgY2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZS4gRXhwZWN0ZWQgYW4gYXJyYXkgb2YgY2hlY2sgZnVuY3Rpb25zLCBidXQgJyArICdyZWNlaXZlZCAnICsgZ2V0UG9zdGZpeEZvclR5cGVXYXJuaW5nKGNoZWNrZXIpICsgJyBhdCBpbmRleCAnICsgaSArICcuJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGNoZWNrZXIgPSBhcnJheU9mVHlwZUNoZWNrZXJzW2ldOwoKICAgICAgICAgICAgICAgIGlmIChjaGVja2VyKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLicpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVOb2RlQ2hlY2tlcigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgaWYgKCFpc05vZGUocHJvcHNbcHJvcE5hbWVdKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBSZWFjdE5vZGUuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlU2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CiAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlIGAnICsgcHJvcFR5cGUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHNoYXBlVHlwZXMpIHsKICAgICAgICAgICAgICAgIHZhciBjaGVja2VyID0gc2hhcGVUeXBlc1trZXldOwoKICAgICAgICAgICAgICAgIGlmICghY2hlY2tlcikgewogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7CgogICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVN0cmljdFNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwogICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CgogICAgICAgICAgICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSBgJyArIHByb3BUeXBlICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGBvYmplY3RgLicpKTsKICAgICAgICAgICAgICB9IC8vIFdlIG5lZWQgdG8gY2hlY2sgYWxsIGtleXMgaW4gY2FzZSBzb21lIGFyZSByZXF1aXJlZCBidXQgbWlzc2luZyBmcm9tCiAgICAgICAgICAgICAgLy8gcHJvcHMuCgoKICAgICAgICAgICAgICB2YXIgYWxsS2V5cyA9IGFzc2lnbih7fSwgcHJvcHNbcHJvcE5hbWVdLCBzaGFwZVR5cGVzKTsKCiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGFsbEtleXMpIHsKICAgICAgICAgICAgICAgIHZhciBjaGVja2VyID0gc2hhcGVUeXBlc1trZXldOwoKICAgICAgICAgICAgICAgIGlmICghY2hlY2tlcikgewogICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIGtleSBgJyArIGtleSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLicgKyAnXG5CYWQgb2JqZWN0OiAnICsgSlNPTi5zdHJpbmdpZnkocHJvcHNbcHJvcE5hbWVdLCBudWxsLCAnICAnKSArICdcblZhbGlkIGtleXM6ICcgKyBKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyhzaGFwZVR5cGVzKSwgbnVsbCwgJyAgJykpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IGNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTsKCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaXNOb2RlKHByb3BWYWx1ZSkgewogICAgICAgICAgICBzd2l0Y2ggKF90eXBlb2Y0KHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICBjYXNlICdudW1iZXInOgogICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6CiAgICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgICAgIHJldHVybiAhcHJvcFZhbHVlOwoKICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOgogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcFZhbHVlLmV2ZXJ5KGlzTm9kZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gbnVsbCB8fCBpc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpOwoKICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvckZuKSB7CiAgICAgICAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChwcm9wVmFsdWUpOwogICAgICAgICAgICAgICAgICB2YXIgc3RlcDsKCiAgICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvckZuICE9PSBwcm9wVmFsdWUuZW50cmllcykgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOb2RlKHN0ZXAudmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSXRlcmF0b3Igd2lsbCBwcm92aWRlIGVudHJ5IFtrLHZdIHR1cGxlcyByYXRoZXIgdGhhbiB2YWx1ZXMuCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05vZGUoZW50cnlbMV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpc1N5bWJvbChwcm9wVHlwZSwgcHJvcFZhbHVlKSB7CiAgICAgICAgICAgIC8vIE5hdGl2ZSBTeW1ib2wuCiAgICAgICAgICAgIGlmIChwcm9wVHlwZSA9PT0gJ3N5bWJvbCcpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSAvLyBmYWxzeSB2YWx1ZSBjYW4ndCBiZSBhIFN5bWJvbAoKCiAgICAgICAgICAgIGlmICghcHJvcFZhbHVlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IC8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10gPT09ICdTeW1ib2wnCgoKICAgICAgICAgICAgaWYgKHByb3BWYWx1ZVsnQEB0b1N0cmluZ1RhZyddID09PSAnU3ltYm9sJykgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IC8vIEZhbGxiYWNrIGZvciBub24tc3BlYyBjb21wbGlhbnQgU3ltYm9scyB3aGljaCBhcmUgcG9seWZpbGxlZC4KCgogICAgICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBwcm9wVmFsdWUgaW5zdGFuY2VvZiBTeW1ib2wpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSAvLyBFcXVpdmFsZW50IG9mIGB0eXBlb2ZgIGJ1dCB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGFycmF5IGFuZCByZWdleHAuCgoKICAgICAgICAgIGZ1bmN0aW9uIGdldFByb3BUeXBlKHByb3BWYWx1ZSkgewogICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBfdHlwZW9mNChwcm9wVmFsdWUpOwoKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgIHJldHVybiAnYXJyYXknOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgICAgICAgLy8gT2xkIHdlYmtpdHMgKGF0IGxlYXN0IHVudGlsIEFuZHJvaWQgNC4wKSByZXR1cm4gJ2Z1bmN0aW9uJyByYXRoZXIgdGhhbgogICAgICAgICAgICAgIC8vICdvYmplY3QnIGZvciB0eXBlb2YgYSBSZWdFeHAuIFdlJ2xsIG5vcm1hbGl6ZSB0aGlzIGhlcmUgc28gdGhhdCAvYmxhLwogICAgICAgICAgICAgIC8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LgogICAgICAgICAgICAgIHJldHVybiAnb2JqZWN0JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGlzU3ltYm9sKHByb3BUeXBlLCBwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdzeW1ib2wnOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcHJvcFR5cGU7CiAgICAgICAgICB9IC8vIFRoaXMgaGFuZGxlcyBtb3JlIHR5cGVzIHRoYW4gYGdldFByb3BUeXBlYC4gT25seSB1c2VkIGZvciBlcnJvciBtZXNzYWdlcy4KICAgICAgICAgIC8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLgoKCiAgICAgICAgICBmdW5jdGlvbiBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHByb3BWYWx1ZSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybiAnJyArIHByb3BWYWx1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKCiAgICAgICAgICAgIGlmIChwcm9wVHlwZSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICdkYXRlJzsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdyZWdleHAnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHByb3BUeXBlOwogICAgICAgICAgfSAvLyBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgaXMgcG9zdGZpeGVkIHRvIGEgd2FybmluZyBhYm91dCBhbiBpbnZhbGlkIHR5cGUuCiAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgInVuZGVmaW5lZCIgb3IgIm9mIHR5cGUgYXJyYXkiCgoKICAgICAgICAgIGZ1bmN0aW9uIGdldFBvc3RmaXhGb3JUeXBlV2FybmluZyh2YWx1ZSkgewogICAgICAgICAgICB2YXIgdHlwZSA9IGdldFByZWNpc2VUeXBlKHZhbHVlKTsKCiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgIGNhc2UgJ2FycmF5JzoKICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOgogICAgICAgICAgICAgICAgcmV0dXJuICdhbiAnICsgdHlwZTsKCiAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6CiAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6CiAgICAgICAgICAgICAgY2FzZSAncmVnZXhwJzoKICAgICAgICAgICAgICAgIHJldHVybiAnYSAnICsgdHlwZTsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiB0eXBlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuCgoKICAgICAgICAgIGZ1bmN0aW9uIGdldENsYXNzTmFtZShwcm9wVmFsdWUpIHsKICAgICAgICAgICAgaWYgKCFwcm9wVmFsdWUuY29uc3RydWN0b3IgfHwgIXByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIEFOT05ZTU9VUzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgICAgfQoKICAgICAgICAgIFJlYWN0UHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzID0gY2hlY2tQcm9wVHlwZXM7CiAgICAgICAgICBSZWFjdFByb3BUeXBlcy5yZXNldFdhcm5pbmdDYWNoZSA9IGNoZWNrUHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlOwogICAgICAgICAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7CiAgICAgICAgICByZXR1cm4gUmVhY3RQcm9wVHlwZXM7CiAgICAgICAgfTsKICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qCiAgICAgIG9iamVjdC1hc3NpZ24KICAgICAgKGMpIFNpbmRyZSBTb3JodXMKICAgICAgQGxpY2Vuc2UgTUlUCiAgICAgICovCgogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqLwoKICAgICAgdmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CiAgICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CiAgICAgIHZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKCiAgICAgIGZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkgewogICAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gT2JqZWN0KHZhbCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNob3VsZFVzZU5hdGl2ZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFPYmplY3QuYXNzaWduKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gLy8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLgogICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOAoKCiAgICAgICAgICB2YXIgdGVzdDEgPSBuZXcgU3RyaW5nKCdhYmMnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctd3JhcHBlcnMKCiAgICAgICAgICB0ZXN0MVs1XSA9ICdkZSc7CgogICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NgoKCiAgICAgICAgICB2YXIgdGVzdDIgPSB7fTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICAgICAgdGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvcmRlcjIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MikubWFwKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiB0ZXN0MltuXTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5JykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9IC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTYKCgogICAgICAgICAgdmFyIHRlc3QzID0ge307CiAgICAgICAgICAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHsKICAgICAgICAgICAgdGVzdDNbbGV0dGVyXSA9IGxldHRlcjsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCB0ZXN0MykpLmpvaW4oJycpICE9PSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIC8vIFdlIGRvbid0IGV4cGVjdCBhbnkgb2YgdGhlIGFib3ZlIHRvIHRocm93LCBidXQgYmV0dGVyIHRvIGJlIHNhZmUuCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHNob3VsZFVzZU5hdGl2ZSgpID8gT2JqZWN0LmFzc2lnbiA6IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkgewogICAgICAgIHZhciBmcm9tOwogICAgICAgIHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7CiAgICAgICAgdmFyIHN5bWJvbHM7CgogICAgICAgIGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7CiAgICAgICAgICBmcm9tID0gT2JqZWN0KGFyZ3VtZW50c1tzXSk7CgogICAgICAgICAgZm9yICh2YXIga2V5IGluIGZyb20pIHsKICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkgewogICAgICAgICAgICAgIHRvW2tleV0gPSBmcm9tW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgIHN5bWJvbHMgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZnJvbSk7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sIHN5bWJvbHNbaV0pKSB7CiAgICAgICAgICAgICAgICB0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdG87CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgLyoqCiAgICAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4KICAgICAgICAqCiAgICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICAqLwogICAgICAgIHZhciBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiBwcmludFdhcm5pbmcoKSB7fTsKCiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgIHZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwoKICAgICAgICAgIHZhciBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTsKICAgICAgICAgIHZhciBoYXMgPSBGdW5jdGlvbi5jYWxsLmJpbmQoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7CgogICAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKHRleHQpIHsKICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIHRleHQ7CgogICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tCiAgICAgICAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrCiAgICAgICAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgICAgICAgICB9IGNhdGNoICh4KSB7fQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQXNzZXJ0IHRoYXQgdGhlIHZhbHVlcyBtYXRjaCB3aXRoIHRoZSB0eXBlIHNwZWNzLgogICAgICAgICAqIEVycm9yIG1lc3NhZ2VzIGFyZSBtZW1vcml6ZWQgYW5kIHdpbGwgb25seSBiZSBzaG93biBvbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHR5cGVTcGVjcyBNYXAgb2YgbmFtZSB0byBhIFJlYWN0UHJvcFR5cGUKICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzIFJ1bnRpbWUgdmFsdWVzIHRoYXQgbmVlZCB0byBiZSB0eXBlLWNoZWNrZWQKICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gZS5nLiAicHJvcCIsICJjb250ZXh0IiwgImNoaWxkIGNvbnRleHQiCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgTmFtZSBvZiB0aGUgY29tcG9uZW50IGZvciBlcnJvciBtZXNzYWdlcy4KICAgICAgICAgKiBAcGFyYW0gez9GdW5jdGlvbn0gZ2V0U3RhY2sgUmV0dXJucyB0aGUgY29tcG9uZW50IHN0YWNrLgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCgoKICAgICAgICBmdW5jdGlvbiBjaGVja1Byb3BUeXBlcyh0eXBlU3BlY3MsIHZhbHVlcywgbG9jYXRpb24sIGNvbXBvbmVudE5hbWUsIGdldFN0YWNrKSB7CiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICBmb3IgKHZhciB0eXBlU3BlY05hbWUgaW4gdHlwZVNwZWNzKSB7CiAgICAgICAgICAgICAgaWYgKGhhcyh0eXBlU3BlY3MsIHR5cGVTcGVjTmFtZSkpIHsKICAgICAgICAgICAgICAgIHZhciBlcnJvcjsgLy8gUHJvcCB0eXBlIHZhbGlkYXRpb24gbWF5IHRocm93LiBJbiBjYXNlIHRoZXkgZG8sIHdlIGRvbid0IHdhbnQgdG8KICAgICAgICAgICAgICAgIC8vIGZhaWwgdGhlIHJlbmRlciBwaGFzZSB3aGVyZSBpdCBkaWRuJ3QgZmFpbCBiZWZvcmUuIFNvIHdlIGxvZyBpdC4KICAgICAgICAgICAgICAgIC8vIEFmdGVyIHRoZXNlIGhhdmUgYmVlbiBjbGVhbmVkIHVwLCB3ZSdsbCBsZXQgdGhlbSB0aHJvdy4KCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWUKICAgICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLgogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IEVycm9yKChjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycpICsgJzogJyArIGxvY2F0aW9uICsgJyB0eXBlIGAnICsgdHlwZVNwZWNOYW1lICsgJ2AgaXMgaW52YWxpZDsgJyArICdpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UsIGJ1dCByZWNlaXZlZCBgJyArIF90eXBlb2Y0KHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdKSArICdgLicpOwogICAgICAgICAgICAgICAgICAgIGVyci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nOwogICAgICAgICAgICAgICAgICAgIHRocm93IGVycjsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSh2YWx1ZXMsIHR5cGVTcGVjTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIG51bGwsIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgICAgICAgICAgICAgIGVycm9yID0gZXg7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGVycm9yICYmICEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpIHsKICAgICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nKChjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycpICsgJzogdHlwZSBzcGVjaWZpY2F0aW9uIG9mICcgKyBsb2NhdGlvbiArICcgYCcgKyB0eXBlU3BlY05hbWUgKyAnYCBpcyBpbnZhbGlkOyB0aGUgdHlwZSBjaGVja2VyICcgKyAnZnVuY3Rpb24gbXVzdCByZXR1cm4gYG51bGxgIG9yIGFuIGBFcnJvcmAgYnV0IHJldHVybmVkIGEgJyArIF90eXBlb2Y0KGVycm9yKSArICcuICcgKyAnWW91IG1heSBoYXZlIGZvcmdvdHRlbiB0byBwYXNzIGFuIGFyZ3VtZW50IHRvIHRoZSB0eXBlIGNoZWNrZXIgJyArICdjcmVhdG9yIChhcnJheU9mLCBpbnN0YW5jZU9mLCBvYmplY3RPZiwgb25lT2YsIG9uZU9mVHlwZSwgYW5kICcgKyAnc2hhcGUgYWxsIHJlcXVpcmUgYW4gYXJndW1lbnQpLicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICEoZXJyb3IubWVzc2FnZSBpbiBsb2dnZWRUeXBlRmFpbHVyZXMpKSB7CiAgICAgICAgICAgICAgICAgIC8vIE9ubHkgbW9uaXRvciB0aGlzIGZhaWx1cmUgb25jZSBiZWNhdXNlIHRoZXJlIHRlbmRzIHRvIGJlIGEgbG90IG9mIHRoZQogICAgICAgICAgICAgICAgICAvLyBzYW1lIGVycm9yLgogICAgICAgICAgICAgICAgICBsb2dnZWRUeXBlRmFpbHVyZXNbZXJyb3IubWVzc2FnZV0gPSB0cnVlOwogICAgICAgICAgICAgICAgICB2YXIgc3RhY2sgPSBnZXRTdGFjayA/IGdldFN0YWNrKCkgOiAnJzsKICAgICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nKCdGYWlsZWQgJyArIGxvY2F0aW9uICsgJyB0eXBlOiAnICsgZXJyb3IubWVzc2FnZSArIChzdGFjayAhPSBudWxsID8gc3RhY2sgOiAnJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXNldHMgd2FybmluZyBjYWNoZSB3aGVuIHRlc3RpbmcuCiAgICAgICAgICoKICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwoKCiAgICAgICAgY2hlY2tQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGNoZWNrUHJvcFR5cGVzOwogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDkyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuCiAgICAgICAqCiAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAqLwoKICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7CgogICAgICBmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCkge30KCiAgICAgIGZ1bmN0aW9uIGVtcHR5RnVuY3Rpb25XaXRoUmVzZXQoKSB7fQoKICAgICAgZW1wdHlGdW5jdGlvbldpdGhSZXNldC5yZXNldFdhcm5pbmdDYWNoZSA9IGVtcHR5RnVuY3Rpb247CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBzaGltKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgc2VjcmV0KSB7CiAgICAgICAgICBpZiAoc2VjcmV0ID09PSBSZWFjdFByb3BUeXBlc1NlY3JldCkgewogICAgICAgICAgICAvLyBJdCBpcyBzdGlsbCBzYWZlIHdoZW4gY2FsbGVkIGZyb20gUmVhY3QuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICsgJ1VzZSBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoKSB0byBjYWxsIHRoZW0uICcgKyAnUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcycpOwogICAgICAgICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7CiAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgfQoKICAgICAgICA7CiAgICAgICAgc2hpbS5pc1JlcXVpcmVkID0gc2hpbTsKCiAgICAgICAgZnVuY3Rpb24gZ2V0U2hpbSgpIHsKICAgICAgICAgIHJldHVybiBzaGltOwogICAgICAgIH0KCiAgICAgICAgOyAvLyBJbXBvcnRhbnQhCiAgICAgICAgLy8gS2VlcCB0aGlzIGxpc3QgaW4gc3luYyB3aXRoIHByb2R1Y3Rpb24gdmVyc2lvbiBpbiBgLi9mYWN0b3J5V2l0aFR5cGVDaGVja2Vycy5qc2AuCgogICAgICAgIHZhciBSZWFjdFByb3BUeXBlcyA9IHsKICAgICAgICAgIGFycmF5OiBzaGltLAogICAgICAgICAgYm9vbDogc2hpbSwKICAgICAgICAgIGZ1bmM6IHNoaW0sCiAgICAgICAgICBudW1iZXI6IHNoaW0sCiAgICAgICAgICBvYmplY3Q6IHNoaW0sCiAgICAgICAgICBzdHJpbmc6IHNoaW0sCiAgICAgICAgICBzeW1ib2w6IHNoaW0sCiAgICAgICAgICBhbnk6IHNoaW0sCiAgICAgICAgICBhcnJheU9mOiBnZXRTaGltLAogICAgICAgICAgZWxlbWVudDogc2hpbSwKICAgICAgICAgIGVsZW1lbnRUeXBlOiBzaGltLAogICAgICAgICAgaW5zdGFuY2VPZjogZ2V0U2hpbSwKICAgICAgICAgIG5vZGU6IHNoaW0sCiAgICAgICAgICBvYmplY3RPZjogZ2V0U2hpbSwKICAgICAgICAgIG9uZU9mOiBnZXRTaGltLAogICAgICAgICAgb25lT2ZUeXBlOiBnZXRTaGltLAogICAgICAgICAgc2hhcGU6IGdldFNoaW0sCiAgICAgICAgICBleGFjdDogZ2V0U2hpbSwKICAgICAgICAgIGNoZWNrUHJvcFR5cGVzOiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LAogICAgICAgICAgcmVzZXRXYXJuaW5nQ2FjaGU6IGVtcHR5RnVuY3Rpb24KICAgICAgICB9OwogICAgICAgIFJlYWN0UHJvcFR5cGVzLlByb3BUeXBlcyA9IFJlYWN0UHJvcFR5cGVzOwogICAgICAgIHJldHVybiBSZWFjdFByb3BUeXBlczsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogOTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAhZnVuY3Rpb24gKCkgewogICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgZnVuY3Rpb24gVk5vZGUoKSB7fQoKICAgICAgICBmdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7CiAgICAgICAgICB2YXIgbGFzdFNpbXBsZSwKICAgICAgICAgICAgICBjaGlsZCwKICAgICAgICAgICAgICBzaW1wbGUsCiAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICBjaGlsZHJlbiA9IEVNUFRZX0NISUxEUkVOOwoKICAgICAgICAgIGZvciAoaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGktLSA+IDI7KSB7CiAgICAgICAgICAgIHN0YWNrLnB1c2goYXJndW1lbnRzW2ldKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBudWxsICE9IGF0dHJpYnV0ZXMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgaWYgKCFzdGFjay5sZW5ndGgpIHN0YWNrLnB1c2goYXR0cmlidXRlcy5jaGlsZHJlbik7CiAgICAgICAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzLmNoaWxkcmVuOwogICAgICAgICAgfQoKICAgICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHsKICAgICAgICAgICAgaWYgKChjaGlsZCA9IHN0YWNrLnBvcCgpKSAmJiB2b2lkIDAgIT09IGNoaWxkLnBvcCkgZm9yIChpID0gY2hpbGQubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgc3RhY2sucHVzaChjaGlsZFtpXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGNoaWxkID09PSAhMCB8fCBjaGlsZCA9PT0gITEpIGNoaWxkID0gbnVsbDsKICAgICAgICAgICAgICBpZiAoc2ltcGxlID0gJ2Z1bmN0aW9uJyAhPSB0eXBlb2Ygbm9kZU5hbWUpIGlmIChudWxsID09IGNoaWxkKSBjaGlsZCA9ICcnO2Vsc2UgaWYgKCdudW1iZXInID09IHR5cGVvZiBjaGlsZCkgY2hpbGQgPSBTdHJpbmcoY2hpbGQpO2Vsc2UgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBjaGlsZCkgc2ltcGxlID0gITE7CiAgICAgICAgICAgICAgaWYgKHNpbXBsZSAmJiBsYXN0U2ltcGxlKSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSArPSBjaGlsZDtlbHNlIGlmIChjaGlsZHJlbiA9PT0gRU1QVFlfQ0hJTERSRU4pIGNoaWxkcmVuID0gW2NoaWxkXTtlbHNlIGNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgICAgICAgIGxhc3RTaW1wbGUgPSBzaW1wbGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcCA9IG5ldyBWTm9kZSgpOwogICAgICAgICAgcC5ub2RlTmFtZSA9IG5vZGVOYW1lOwogICAgICAgICAgcC5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgICAgICAgcC5hdHRyaWJ1dGVzID0gbnVsbCA9PSBhdHRyaWJ1dGVzID8gdm9pZCAwIDogYXR0cmlidXRlczsKICAgICAgICAgIHAua2V5ID0gbnVsbCA9PSBhdHRyaWJ1dGVzID8gdm9pZCAwIDogYXR0cmlidXRlcy5rZXk7CiAgICAgICAgICBpZiAodm9pZCAwICE9PSBvcHRpb25zLnZub2RlKSBvcHRpb25zLnZub2RlKHApOwogICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBleHRlbmQob2JqLCBwcm9wcykgewogICAgICAgICAgZm9yICh2YXIgaSBpbiBwcm9wcykgewogICAgICAgICAgICBvYmpbaV0gPSBwcm9wc1tpXTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvbmVFbGVtZW50KHZub2RlLCBwcm9wcykgewogICAgICAgICAgcmV0dXJuIGgodm5vZGUubm9kZU5hbWUsIGV4dGVuZChleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpLCBwcm9wcyksIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogdm5vZGUuY2hpbGRyZW4pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZW5xdWV1ZVJlbmRlcihjb21wb25lbnQpIHsKICAgICAgICAgIGlmICghY29tcG9uZW50Ll9fZCAmJiAoY29tcG9uZW50Ll9fZCA9ICEwKSAmJiAxID09IGl0ZW1zLnB1c2goY29tcG9uZW50KSkgKG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgc2V0VGltZW91dCkocmVyZW5kZXIpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVyZW5kZXIoKSB7CiAgICAgICAgICB2YXIgcCwKICAgICAgICAgICAgICBsaXN0ID0gaXRlbXM7CiAgICAgICAgICBpdGVtcyA9IFtdOwoKICAgICAgICAgIHdoaWxlIChwID0gbGlzdC5wb3AoKSkgewogICAgICAgICAgICBpZiAocC5fX2QpIHJlbmRlckNvbXBvbmVudChwKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzU2FtZU5vZGVUeXBlKG5vZGUsIHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygdm5vZGUgfHwgJ251bWJlcicgPT0gdHlwZW9mIHZub2RlKSByZXR1cm4gdm9pZCAwICE9PSBub2RlLnNwbGl0VGV4dDsKICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygdm5vZGUubm9kZU5hbWUpIHJldHVybiAhbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgJiYgaXNOYW1lZE5vZGUobm9kZSwgdm5vZGUubm9kZU5hbWUpO2Vsc2UgcmV0dXJuIGh5ZHJhdGluZyB8fCBub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc05hbWVkTm9kZShub2RlLCBub2RlTmFtZSkgewogICAgICAgICAgcmV0dXJuIG5vZGUuX19uID09PSBub2RlTmFtZSB8fCBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXROb2RlUHJvcHModm5vZGUpIHsKICAgICAgICAgIHZhciBwcm9wcyA9IGV4dGVuZCh7fSwgdm5vZGUuYXR0cmlidXRlcyk7CiAgICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuOwogICAgICAgICAgdmFyIGRlZmF1bHRQcm9wcyA9IHZub2RlLm5vZGVOYW1lLmRlZmF1bHRQcm9wczsKICAgICAgICAgIGlmICh2b2lkIDAgIT09IGRlZmF1bHRQcm9wcykgZm9yICh2YXIgaSBpbiBkZWZhdWx0UHJvcHMpIHsKICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcHJvcHNbaV0pIHByb3BzW2ldID0gZGVmYXVsdFByb3BzW2ldOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHByb3BzOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHsKICAgICAgICAgIHZhciBub2RlID0gaXNTdmcgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbm9kZU5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7CiAgICAgICAgICBub2RlLl9fbiA9IG5vZGVOYW1lOwogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHsKICAgICAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldEFjY2Vzc29yKG5vZGUsIG5hbWUsIG9sZCwgdmFsdWUsIGlzU3ZnKSB7CiAgICAgICAgICBpZiAoJ2NsYXNzTmFtZScgPT09IG5hbWUpIG5hbWUgPSAnY2xhc3MnOwogICAgICAgICAgaWYgKCdrZXknID09PSBuYW1lKSA7ZWxzZSBpZiAoJ3JlZicgPT09IG5hbWUpIHsKICAgICAgICAgICAgaWYgKG9sZCkgb2xkKG51bGwpOwogICAgICAgICAgICBpZiAodmFsdWUpIHZhbHVlKG5vZGUpOwogICAgICAgICAgfSBlbHNlIGlmICgnY2xhc3MnID09PSBuYW1lICYmICFpc1N2Zykgbm9kZS5jbGFzc05hbWUgPSB2YWx1ZSB8fCAnJztlbHNlIGlmICgnc3R5bGUnID09PSBuYW1lKSB7CiAgICAgICAgICAgIGlmICghdmFsdWUgfHwgJ3N0cmluZycgPT0gdHlwZW9mIHZhbHVlIHx8ICdzdHJpbmcnID09IHR5cGVvZiBvbGQpIG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnOwoKICAgICAgICAgICAgaWYgKHZhbHVlICYmICdvYmplY3QnID09IF90eXBlb2Y0KHZhbHVlKSkgewogICAgICAgICAgICAgIGlmICgnc3RyaW5nJyAhPSB0eXBlb2Ygb2xkKSBmb3IgKHZhciBpIGluIG9sZCkgewogICAgICAgICAgICAgICAgaWYgKCEoaSBpbiB2YWx1ZSkpIG5vZGUuc3R5bGVbaV0gPSAnJzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdmFsdWUpIHsKICAgICAgICAgICAgICAgIG5vZGUuc3R5bGVbaV0gPSAnbnVtYmVyJyA9PSB0eXBlb2YgdmFsdWVbaV0gJiYgSVNfTk9OX0RJTUVOU0lPTkFMLnRlc3QoaSkgPT09ICExID8gdmFsdWVbaV0gKyAncHgnIDogdmFsdWVbaV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKCdkYW5nZXJvdXNseVNldElubmVySFRNTCcgPT09IG5hbWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlKSBub2RlLmlubmVySFRNTCA9IHZhbHVlLl9faHRtbCB8fCAnJzsKICAgICAgICAgIH0gZWxzZSBpZiAoJ28nID09IG5hbWVbMF0gJiYgJ24nID09IG5hbWVbMV0pIHsKICAgICAgICAgICAgdmFyIHVzZUNhcHR1cmUgPSBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvQ2FwdHVyZSQvLCAnJykpOwogICAgICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygyKTsKCiAgICAgICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgICAgIGlmICghb2xkKSBub2RlLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgdXNlQ2FwdHVyZSk7CiAgICAgICAgICAgIH0gZWxzZSBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgdXNlQ2FwdHVyZSk7CgogICAgICAgICAgICAobm9kZS5fX2wgfHwgKG5vZGUuX19sID0ge30pKVtuYW1lXSA9IHZhbHVlOwogICAgICAgICAgfSBlbHNlIGlmICgnbGlzdCcgIT09IG5hbWUgJiYgJ3R5cGUnICE9PSBuYW1lICYmICFpc1N2ZyAmJiBuYW1lIGluIG5vZGUpIHsKICAgICAgICAgICAgc2V0UHJvcGVydHkobm9kZSwgbmFtZSwgbnVsbCA9PSB2YWx1ZSA/ICcnIDogdmFsdWUpOwogICAgICAgICAgICBpZiAobnVsbCA9PSB2YWx1ZSB8fCB2YWx1ZSA9PT0gITEpIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG5zID0gaXNTdmcgJiYgbmFtZSAhPT0gKG5hbWUgPSBuYW1lLnJlcGxhY2UoL154bGlua1w6Py8sICcnKSk7CiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8IHZhbHVlID09PSAhMSkgewogICAgICAgICAgICAgIGlmIChucykgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIG5hbWUudG9Mb3dlckNhc2UoKSk7ZWxzZSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgICAgICAgfSBlbHNlIGlmICgnZnVuY3Rpb24nICE9IHR5cGVvZiB2YWx1ZSkgaWYgKG5zKSBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpLCB2YWx1ZSk7ZWxzZSBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbm9kZVtuYW1lXSA9IHZhbHVlOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV2ZW50UHJveHkoZSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX19sW2UudHlwZV0ob3B0aW9ucy5ldmVudCAmJiBvcHRpb25zLmV2ZW50KGUpIHx8IGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZmx1c2hNb3VudHMoKSB7CiAgICAgICAgICB2YXIgYzsKCiAgICAgICAgICB3aGlsZSAoYyA9IG1vdW50cy5wb3AoKSkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlck1vdW50KSBvcHRpb25zLmFmdGVyTW91bnQoYyk7CiAgICAgICAgICAgIGlmIChjLmNvbXBvbmVudERpZE1vdW50KSBjLmNvbXBvbmVudERpZE1vdW50KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBwYXJlbnQsIGNvbXBvbmVudFJvb3QpIHsKICAgICAgICAgIGlmICghZGlmZkxldmVsKyspIHsKICAgICAgICAgICAgaXNTdmdNb2RlID0gbnVsbCAhPSBwYXJlbnQgJiYgdm9pZCAwICE9PSBwYXJlbnQub3duZXJTVkdFbGVtZW50OwogICAgICAgICAgICBoeWRyYXRpbmcgPSBudWxsICE9IGRvbSAmJiAhKCdfX3ByZWFjdGF0dHJfJyBpbiBkb20pOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZXQgPSBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgY29tcG9uZW50Um9vdCk7CiAgICAgICAgICBpZiAocGFyZW50ICYmIHJldC5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChyZXQpOwoKICAgICAgICAgIGlmICghIC0tZGlmZkxldmVsKSB7CiAgICAgICAgICAgIGh5ZHJhdGluZyA9ICExOwogICAgICAgICAgICBpZiAoIWNvbXBvbmVudFJvb3QpIGZsdXNoTW91bnRzKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KSB7CiAgICAgICAgICB2YXIgb3V0ID0gZG9tLAogICAgICAgICAgICAgIHByZXZTdmdNb2RlID0gaXNTdmdNb2RlOwogICAgICAgICAgaWYgKG51bGwgPT0gdm5vZGUpIHZub2RlID0gJyc7CgogICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2bm9kZSkgewogICAgICAgICAgICBpZiAoZG9tICYmIHZvaWQgMCAhPT0gZG9tLnNwbGl0VGV4dCAmJiBkb20ucGFyZW50Tm9kZSAmJiAoIWRvbS5fY29tcG9uZW50IHx8IGNvbXBvbmVudFJvb3QpKSB7CiAgICAgICAgICAgICAgaWYgKGRvbS5ub2RlVmFsdWUgIT0gdm5vZGUpIGRvbS5ub2RlVmFsdWUgPSB2bm9kZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBvdXQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2bm9kZSk7CgogICAgICAgICAgICAgIGlmIChkb20pIHsKICAgICAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTsKICAgICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKGRvbSwgITApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0Ll9fcHJlYWN0YXR0cl8gPSAhMDsKICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygdm5vZGUubm9kZU5hbWUpIHJldHVybiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCk7CiAgICAgICAgICBpc1N2Z01vZGUgPSAnc3ZnJyA9PT0gdm5vZGUubm9kZU5hbWUgPyAhMCA6ICdmb3JlaWduT2JqZWN0JyA9PT0gdm5vZGUubm9kZU5hbWUgPyAhMSA6IGlzU3ZnTW9kZTsKCiAgICAgICAgICBpZiAoIWRvbSB8fCAhaXNOYW1lZE5vZGUoZG9tLCBTdHJpbmcodm5vZGUubm9kZU5hbWUpKSkgewogICAgICAgICAgICBvdXQgPSBjcmVhdGVOb2RlKFN0cmluZyh2bm9kZS5ub2RlTmFtZSksIGlzU3ZnTW9kZSk7CgogICAgICAgICAgICBpZiAoZG9tKSB7CiAgICAgICAgICAgICAgd2hpbGUgKGRvbS5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgICBvdXQuYXBwZW5kQ2hpbGQoZG9tLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGRvbS5wYXJlbnROb2RlKSBkb20ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQob3V0LCBkb20pOwogICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKGRvbSwgITApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGZjID0gb3V0LmZpcnN0Q2hpbGQsCiAgICAgICAgICAgICAgcHJvcHMgPSBvdXQuX19wcmVhY3RhdHRyXyB8fCAob3V0Ll9fcHJlYWN0YXR0cl8gPSB7fSksCiAgICAgICAgICAgICAgdmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47CgogICAgICAgICAgaWYgKCFoeWRyYXRpbmcgJiYgdmNoaWxkcmVuICYmIDEgPT09IHZjaGlsZHJlbi5sZW5ndGggJiYgJ3N0cmluZycgPT0gdHlwZW9mIHZjaGlsZHJlblswXSAmJiBudWxsICE9IGZjICYmIHZvaWQgMCAhPT0gZmMuc3BsaXRUZXh0ICYmIG51bGwgPT0gZmMubmV4dFNpYmxpbmcpIHsKICAgICAgICAgICAgaWYgKGZjLm5vZGVWYWx1ZSAhPSB2Y2hpbGRyZW5bMF0pIGZjLm5vZGVWYWx1ZSA9IHZjaGlsZHJlblswXTsKICAgICAgICAgIH0gZWxzZSBpZiAodmNoaWxkcmVuICYmIHZjaGlsZHJlbi5sZW5ndGggfHwgbnVsbCAhPSBmYykgaW5uZXJEaWZmTm9kZShvdXQsIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGh5ZHJhdGluZyB8fCBudWxsICE9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKTsKCiAgICAgICAgICBkaWZmQXR0cmlidXRlcyhvdXQsIHZub2RlLmF0dHJpYnV0ZXMsIHByb3BzKTsKICAgICAgICAgIGlzU3ZnTW9kZSA9IHByZXZTdmdNb2RlOwogICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlubmVyRGlmZk5vZGUoZG9tLCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBpc0h5ZHJhdGluZykgewogICAgICAgICAgdmFyIGosCiAgICAgICAgICAgICAgYywKICAgICAgICAgICAgICB2Y2hpbGQsCiAgICAgICAgICAgICAgY2hpbGQsCiAgICAgICAgICAgICAgb3JpZ2luYWxDaGlsZHJlbiA9IGRvbS5jaGlsZE5vZGVzLAogICAgICAgICAgICAgIGNoaWxkcmVuID0gW10sCiAgICAgICAgICAgICAga2V5ZWQgPSB7fSwKICAgICAgICAgICAgICBrZXllZExlbiA9IDAsCiAgICAgICAgICAgICAgbWluID0gMCwKICAgICAgICAgICAgICBsZW4gPSBvcmlnaW5hbENoaWxkcmVuLmxlbmd0aCwKICAgICAgICAgICAgICBjaGlsZHJlbkxlbiA9IDAsCiAgICAgICAgICAgICAgdmxlbiA9IHZjaGlsZHJlbiA/IHZjaGlsZHJlbi5sZW5ndGggOiAwOwogICAgICAgICAgaWYgKDAgIT09IGxlbikgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICB2YXIgX2NoaWxkID0gb3JpZ2luYWxDaGlsZHJlbltpXSwKICAgICAgICAgICAgICAgIHByb3BzID0gX2NoaWxkLl9fcHJlYWN0YXR0cl8sCiAgICAgICAgICAgICAgICBrZXkgPSB2bGVuICYmIHByb3BzID8gX2NoaWxkLl9jb21wb25lbnQgPyBfY2hpbGQuX2NvbXBvbmVudC5fX2sgOiBwcm9wcy5rZXkgOiBudWxsOwoKICAgICAgICAgICAgaWYgKG51bGwgIT0ga2V5KSB7CiAgICAgICAgICAgICAga2V5ZWRMZW4rKzsKICAgICAgICAgICAgICBrZXllZFtrZXldID0gX2NoaWxkOwogICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BzIHx8ICh2b2lkIDAgIT09IF9jaGlsZC5zcGxpdFRleHQgPyBpc0h5ZHJhdGluZyA/IF9jaGlsZC5ub2RlVmFsdWUudHJpbSgpIDogITAgOiBpc0h5ZHJhdGluZykpIGNoaWxkcmVuW2NoaWxkcmVuTGVuKytdID0gX2NoaWxkOwogICAgICAgICAgfQogICAgICAgICAgaWYgKDAgIT09IHZsZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgdmxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZjaGlsZCA9IHZjaGlsZHJlbltpXTsKICAgICAgICAgICAgY2hpbGQgPSBudWxsOwogICAgICAgICAgICB2YXIga2V5ID0gdmNoaWxkLmtleTsKCiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkgewogICAgICAgICAgICAgIGlmIChrZXllZExlbiAmJiB2b2lkIDAgIT09IGtleWVkW2tleV0pIHsKICAgICAgICAgICAgICAgIGNoaWxkID0ga2V5ZWRba2V5XTsKICAgICAgICAgICAgICAgIGtleWVkW2tleV0gPSB2b2lkIDA7CiAgICAgICAgICAgICAgICBrZXllZExlbi0tOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICghY2hpbGQgJiYgbWluIDwgY2hpbGRyZW5MZW4pIGZvciAoaiA9IG1pbjsgaiA8IGNoaWxkcmVuTGVuOyBqKyspIHsKICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBjaGlsZHJlbltqXSAmJiBpc1NhbWVOb2RlVHlwZShjID0gY2hpbGRyZW5bal0sIHZjaGlsZCwgaXNIeWRyYXRpbmcpKSB7CiAgICAgICAgICAgICAgICBjaGlsZCA9IGM7CiAgICAgICAgICAgICAgICBjaGlsZHJlbltqXSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07CiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gbWluKSBtaW4rKzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2hpbGQgPSBpZGlmZihjaGlsZCwgdmNoaWxkLCBjb250ZXh0LCBtb3VudEFsbCk7CiAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZCAhPT0gZG9tKSBpZiAoaSA+PSBsZW4pIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7ZWxzZSBpZiAoY2hpbGQgIT09IG9yaWdpbmFsQ2hpbGRyZW5baV0pIGlmIChjaGlsZCA9PT0gb3JpZ2luYWxDaGlsZHJlbltpICsgMV0pIHJlbW92ZU5vZGUob3JpZ2luYWxDaGlsZHJlbltpXSk7ZWxzZSBkb20uaW5zZXJ0QmVmb3JlKGNoaWxkLCBvcmlnaW5hbENoaWxkcmVuW2ldIHx8IG51bGwpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGtleWVkTGVuKSBmb3IgKHZhciBpIGluIGtleWVkKSB7CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGtleWVkW2ldKSByZWNvbGxlY3ROb2RlVHJlZShrZXllZFtpXSwgITEpOwogICAgICAgICAgfQoKICAgICAgICAgIHdoaWxlIChtaW4gPD0gY2hpbGRyZW5MZW4pIHsKICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gKGNoaWxkID0gY2hpbGRyZW5bY2hpbGRyZW5MZW4tLV0pKSByZWNvbGxlY3ROb2RlVHJlZShjaGlsZCwgITEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgdW5tb3VudE9ubHkpIHsKICAgICAgICAgIHZhciBjb21wb25lbnQgPSBub2RlLl9jb21wb25lbnQ7CiAgICAgICAgICBpZiAoY29tcG9uZW50KSB1bm1vdW50Q29tcG9uZW50KGNvbXBvbmVudCk7ZWxzZSB7CiAgICAgICAgICAgIGlmIChudWxsICE9IG5vZGUuX19wcmVhY3RhdHRyXyAmJiBub2RlLl9fcHJlYWN0YXR0cl8ucmVmKSBub2RlLl9fcHJlYWN0YXR0cl8ucmVmKG51bGwpOwogICAgICAgICAgICBpZiAodW5tb3VudE9ubHkgPT09ICExIHx8IG51bGwgPT0gbm9kZS5fX3ByZWFjdGF0dHJfKSByZW1vdmVOb2RlKG5vZGUpOwogICAgICAgICAgICByZW1vdmVDaGlsZHJlbihub2RlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHsKICAgICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDsKCiAgICAgICAgICB3aGlsZSAobm9kZSkgewogICAgICAgICAgICB2YXIgbmV4dCA9IG5vZGUucHJldmlvdXNTaWJsaW5nOwogICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShub2RlLCAhMCk7CiAgICAgICAgICAgIG5vZGUgPSBuZXh0OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZGlmZkF0dHJpYnV0ZXMoZG9tLCBhdHRycywgb2xkKSB7CiAgICAgICAgICB2YXIgbmFtZTsKCiAgICAgICAgICBmb3IgKG5hbWUgaW4gb2xkKSB7CiAgICAgICAgICAgIGlmICgoIWF0dHJzIHx8IG51bGwgPT0gYXR0cnNbbmFtZV0pICYmIG51bGwgIT0gb2xkW25hbWVdKSBzZXRBY2Nlc3Nvcihkb20sIG5hbWUsIG9sZFtuYW1lXSwgb2xkW25hbWVdID0gdm9pZCAwLCBpc1N2Z01vZGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAobmFtZSBpbiBhdHRycykgewogICAgICAgICAgICBpZiAoISgnY2hpbGRyZW4nID09PSBuYW1lIHx8ICdpbm5lckhUTUwnID09PSBuYW1lIHx8IG5hbWUgaW4gb2xkICYmIGF0dHJzW25hbWVdID09PSAoJ3ZhbHVlJyA9PT0gbmFtZSB8fCAnY2hlY2tlZCcgPT09IG5hbWUgPyBkb21bbmFtZV0gOiBvbGRbbmFtZV0pKSkgc2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IGF0dHJzW25hbWVdLCBpc1N2Z01vZGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpIHsKICAgICAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgICAoY29tcG9uZW50c1tuYW1lXSB8fCAoY29tcG9uZW50c1tuYW1lXSA9IFtdKSkucHVzaChjb21wb25lbnQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KEN0b3IsIHByb3BzLCBjb250ZXh0KSB7CiAgICAgICAgICB2YXIgaW5zdCwKICAgICAgICAgICAgICBsaXN0ID0gY29tcG9uZW50c1tDdG9yLm5hbWVdOwoKICAgICAgICAgIGlmIChDdG9yLnByb3RvdHlwZSAmJiBDdG9yLnByb3RvdHlwZS5yZW5kZXIpIHsKICAgICAgICAgICAgaW5zdCA9IG5ldyBDdG9yKHByb3BzLCBjb250ZXh0KTsKICAgICAgICAgICAgQ29tcG9uZW50LmNhbGwoaW5zdCwgcHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgICBpbnN0LmNvbnN0cnVjdG9yID0gQ3RvcjsKICAgICAgICAgICAgaW5zdC5yZW5kZXIgPSBkb1JlbmRlcjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAobGlzdCkgZm9yICh2YXIgaSA9IGxpc3QubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIGlmIChsaXN0W2ldLmNvbnN0cnVjdG9yID09PSBDdG9yKSB7CiAgICAgICAgICAgICAgaW5zdC5fX2IgPSBsaXN0W2ldLl9fYjsKICAgICAgICAgICAgICBsaXN0LnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGluc3Q7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkb1JlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7CiAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX3gpIHsKICAgICAgICAgICAgY29tcG9uZW50Ll9feCA9ICEwOwogICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fciA9IHByb3BzLnJlZikgZGVsZXRlIHByb3BzLnJlZjsKICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fX2sgPSBwcm9wcy5rZXkpIGRlbGV0ZSBwcm9wcy5rZXk7CgogICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5iYXNlIHx8IG1vdW50QWxsKSB7CiAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykgY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMsIGNvbnRleHQpOwoKICAgICAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gY29tcG9uZW50LmNvbnRleHQpIHsKICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX2MpIGNvbXBvbmVudC5fX2MgPSBjb21wb25lbnQuY29udGV4dDsKICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghY29tcG9uZW50Ll9fcCkgY29tcG9uZW50Ll9fcCA9IGNvbXBvbmVudC5wcm9wczsKICAgICAgICAgICAgY29tcG9uZW50LnByb3BzID0gcHJvcHM7CiAgICAgICAgICAgIGNvbXBvbmVudC5fX3ggPSAhMTsKICAgICAgICAgICAgaWYgKDAgIT09IG9wdHMpIGlmICgxID09PSBvcHRzIHx8IG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXMgIT09ICExIHx8ICFjb21wb25lbnQuYmFzZSkgcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgMSwgbW91bnRBbGwpO2Vsc2UgZW5xdWV1ZVJlbmRlcihjb21wb25lbnQpOwogICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fcikgY29tcG9uZW50Ll9fcihjb21wb25lbnQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0cywgbW91bnRBbGwsIGlzQ2hpbGQpIHsKICAgICAgICAgIGlmICghY29tcG9uZW50Ll9feCkgewogICAgICAgICAgICB2YXIgcmVuZGVyZWQsCiAgICAgICAgICAgICAgICBpbnN0LAogICAgICAgICAgICAgICAgY2Jhc2UsCiAgICAgICAgICAgICAgICBwcm9wcyA9IGNvbXBvbmVudC5wcm9wcywKICAgICAgICAgICAgICAgIHN0YXRlID0gY29tcG9uZW50LnN0YXRlLAogICAgICAgICAgICAgICAgY29udGV4dCA9IGNvbXBvbmVudC5jb250ZXh0LAogICAgICAgICAgICAgICAgcHJldmlvdXNQcm9wcyA9IGNvbXBvbmVudC5fX3AgfHwgcHJvcHMsCiAgICAgICAgICAgICAgICBwcmV2aW91c1N0YXRlID0gY29tcG9uZW50Ll9fcyB8fCBzdGF0ZSwKICAgICAgICAgICAgICAgIHByZXZpb3VzQ29udGV4dCA9IGNvbXBvbmVudC5fX2MgfHwgY29udGV4dCwKICAgICAgICAgICAgICAgIGlzVXBkYXRlID0gY29tcG9uZW50LmJhc2UsCiAgICAgICAgICAgICAgICBuZXh0QmFzZSA9IGNvbXBvbmVudC5fX2IsCiAgICAgICAgICAgICAgICBpbml0aWFsQmFzZSA9IGlzVXBkYXRlIHx8IG5leHRCYXNlLAogICAgICAgICAgICAgICAgaW5pdGlhbENoaWxkQ29tcG9uZW50ID0gY29tcG9uZW50Ll9jb21wb25lbnQsCiAgICAgICAgICAgICAgICBza2lwID0gITE7CgogICAgICAgICAgICBpZiAoaXNVcGRhdGUpIHsKICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcmV2aW91c1Byb3BzOwogICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7CiAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBwcmV2aW91c0NvbnRleHQ7CiAgICAgICAgICAgICAgaWYgKDIgIT09IG9wdHMgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZSAmJiBjb21wb25lbnQuc2hvdWxkQ29tcG9uZW50VXBkYXRlKHByb3BzLCBzdGF0ZSwgY29udGV4dCkgPT09ICExKSBza2lwID0gITA7ZWxzZSBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7CiAgICAgICAgICAgICAgY29tcG9uZW50LnByb3BzID0gcHJvcHM7CiAgICAgICAgICAgICAgY29tcG9uZW50LnN0YXRlID0gc3RhdGU7CiAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb21wb25lbnQuX19wID0gY29tcG9uZW50Ll9fcyA9IGNvbXBvbmVudC5fX2MgPSBjb21wb25lbnQuX19iID0gbnVsbDsKICAgICAgICAgICAgY29tcG9uZW50Ll9fZCA9ICExOwoKICAgICAgICAgICAgaWYgKCFza2lwKSB7CiAgICAgICAgICAgICAgcmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7CiAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIGNvbnRleHQgPSBleHRlbmQoZXh0ZW5kKHt9LCBjb250ZXh0KSwgY29tcG9uZW50LmdldENoaWxkQ29udGV4dCgpKTsKICAgICAgICAgICAgICB2YXIgdG9Vbm1vdW50LAogICAgICAgICAgICAgICAgICBiYXNlLAogICAgICAgICAgICAgICAgICBjaGlsZENvbXBvbmVudCA9IHJlbmRlcmVkICYmIHJlbmRlcmVkLm5vZGVOYW1lOwoKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgY2hpbGRDb21wb25lbnQpIHsKICAgICAgICAgICAgICAgIHZhciBjaGlsZFByb3BzID0gZ2V0Tm9kZVByb3BzKHJlbmRlcmVkKTsKICAgICAgICAgICAgICAgIGluc3QgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7CiAgICAgICAgICAgICAgICBpZiAoaW5zdCAmJiBpbnN0LmNvbnN0cnVjdG9yID09PSBjaGlsZENvbXBvbmVudCAmJiBjaGlsZFByb3BzLmtleSA9PSBpbnN0Ll9faykgc2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMSwgY29udGV4dCwgITEpO2Vsc2UgewogICAgICAgICAgICAgICAgICB0b1VubW91bnQgPSBpbnN0OwogICAgICAgICAgICAgICAgICBjb21wb25lbnQuX2NvbXBvbmVudCA9IGluc3QgPSBjcmVhdGVDb21wb25lbnQoY2hpbGRDb21wb25lbnQsIGNoaWxkUHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBpbnN0Ll9fYiA9IGluc3QuX19iIHx8IG5leHRCYXNlOwogICAgICAgICAgICAgICAgICBpbnN0Ll9fdSA9IGNvbXBvbmVudDsKICAgICAgICAgICAgICAgICAgc2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMCwgY29udGV4dCwgITEpOwogICAgICAgICAgICAgICAgICByZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsICEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJhc2UgPSBpbnN0LmJhc2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNiYXNlID0gaW5pdGlhbEJhc2U7CiAgICAgICAgICAgICAgICB0b1VubW91bnQgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7CiAgICAgICAgICAgICAgICBpZiAodG9Vbm1vdW50KSBjYmFzZSA9IGNvbXBvbmVudC5fY29tcG9uZW50ID0gbnVsbDsKCiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgfHwgMSA9PT0gb3B0cykgewogICAgICAgICAgICAgICAgICBpZiAoY2Jhc2UpIGNiYXNlLl9jb21wb25lbnQgPSBudWxsOwogICAgICAgICAgICAgICAgICBiYXNlID0gZGlmZihjYmFzZSwgcmVuZGVyZWQsIGNvbnRleHQsIG1vdW50QWxsIHx8ICFpc1VwZGF0ZSwgaW5pdGlhbEJhc2UgJiYgaW5pdGlhbEJhc2UucGFyZW50Tm9kZSwgITApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGluaXRpYWxCYXNlICYmIGJhc2UgIT09IGluaXRpYWxCYXNlICYmIGluc3QgIT09IGluaXRpYWxDaGlsZENvbXBvbmVudCkgewogICAgICAgICAgICAgICAgdmFyIGJhc2VQYXJlbnQgPSBpbml0aWFsQmFzZS5wYXJlbnROb2RlOwoKICAgICAgICAgICAgICAgIGlmIChiYXNlUGFyZW50ICYmIGJhc2UgIT09IGJhc2VQYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgYmFzZVBhcmVudC5yZXBsYWNlQ2hpbGQoYmFzZSwgaW5pdGlhbEJhc2UpOwoKICAgICAgICAgICAgICAgICAgaWYgKCF0b1VubW91bnQpIHsKICAgICAgICAgICAgICAgICAgICBpbml0aWFsQmFzZS5fY29tcG9uZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSwgITEpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodG9Vbm1vdW50KSB1bm1vdW50Q29tcG9uZW50KHRvVW5tb3VudCk7CiAgICAgICAgICAgICAgY29tcG9uZW50LmJhc2UgPSBiYXNlOwoKICAgICAgICAgICAgICBpZiAoYmFzZSAmJiAhaXNDaGlsZCkgewogICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCwKICAgICAgICAgICAgICAgICAgICB0ID0gY29tcG9uZW50OwoKICAgICAgICAgICAgICAgIHdoaWxlICh0ID0gdC5fX3UpIHsKICAgICAgICAgICAgICAgICAgKGNvbXBvbmVudFJlZiA9IHQpLmJhc2UgPSBiYXNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJhc2UuX2NvbXBvbmVudCA9IGNvbXBvbmVudFJlZjsKICAgICAgICAgICAgICAgIGJhc2UuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gY29tcG9uZW50UmVmLmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFpc1VwZGF0ZSB8fCBtb3VudEFsbCkgbW91bnRzLnVuc2hpZnQoY29tcG9uZW50KTtlbHNlIGlmICghc2tpcCkgewogICAgICAgICAgICAgIGZsdXNoTW91bnRzKCk7CiAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUpIGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcywgcHJldmlvdXNTdGF0ZSwgcHJldmlvdXNDb250ZXh0KTsKICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlclVwZGF0ZSkgb3B0aW9ucy5hZnRlclVwZGF0ZShjb21wb25lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsICE9IGNvbXBvbmVudC5fX2gpIHdoaWxlIChjb21wb25lbnQuX19oLmxlbmd0aCkgewogICAgICAgICAgICAgIGNvbXBvbmVudC5fX2gucG9wKCkuY2FsbChjb21wb25lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZGlmZkxldmVsICYmICFpc0NoaWxkKSBmbHVzaE1vdW50cygpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpIHsKICAgICAgICAgIHZhciBjID0gZG9tICYmIGRvbS5fY29tcG9uZW50LAogICAgICAgICAgICAgIG9yaWdpbmFsQ29tcG9uZW50ID0gYywKICAgICAgICAgICAgICBvbGREb20gPSBkb20sCiAgICAgICAgICAgICAgaXNEaXJlY3RPd25lciA9IGMgJiYgZG9tLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWUsCiAgICAgICAgICAgICAgaXNPd25lciA9IGlzRGlyZWN0T3duZXIsCiAgICAgICAgICAgICAgcHJvcHMgPSBnZXROb2RlUHJvcHModm5vZGUpOwoKICAgICAgICAgIHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fX3UpKSB7CiAgICAgICAgICAgIGlzT3duZXIgPSBjLmNvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYyAmJiBpc093bmVyICYmICghbW91bnRBbGwgfHwgYy5fY29tcG9uZW50KSkgewogICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMywgY29udGV4dCwgbW91bnRBbGwpOwogICAgICAgICAgICBkb20gPSBjLmJhc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAob3JpZ2luYWxDb21wb25lbnQgJiYgIWlzRGlyZWN0T3duZXIpIHsKICAgICAgICAgICAgICB1bm1vdW50Q29tcG9uZW50KG9yaWdpbmFsQ29tcG9uZW50KTsKICAgICAgICAgICAgICBkb20gPSBvbGREb20gPSBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjID0gY3JlYXRlQ29tcG9uZW50KHZub2RlLm5vZGVOYW1lLCBwcm9wcywgY29udGV4dCk7CgogICAgICAgICAgICBpZiAoZG9tICYmICFjLl9fYikgewogICAgICAgICAgICAgIGMuX19iID0gZG9tOwogICAgICAgICAgICAgIG9sZERvbSA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7CiAgICAgICAgICAgIGRvbSA9IGMuYmFzZTsKCiAgICAgICAgICAgIGlmIChvbGREb20gJiYgZG9tICE9PSBvbGREb20pIHsKICAgICAgICAgICAgICBvbGREb20uX2NvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUob2xkRG9tLCAhMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZG9tOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudChjb21wb25lbnQpIHsKICAgICAgICAgIGlmIChvcHRpb25zLmJlZm9yZVVubW91bnQpIG9wdGlvbnMuYmVmb3JlVW5tb3VudChjb21wb25lbnQpOwogICAgICAgICAgdmFyIGJhc2UgPSBjb21wb25lbnQuYmFzZTsKICAgICAgICAgIGNvbXBvbmVudC5fX3ggPSAhMDsKICAgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpOwogICAgICAgICAgY29tcG9uZW50LmJhc2UgPSBudWxsOwogICAgICAgICAgdmFyIGlubmVyID0gY29tcG9uZW50Ll9jb21wb25lbnQ7CiAgICAgICAgICBpZiAoaW5uZXIpIHVubW91bnRDb21wb25lbnQoaW5uZXIpO2Vsc2UgaWYgKGJhc2UpIHsKICAgICAgICAgICAgaWYgKGJhc2UuX19wcmVhY3RhdHRyXyAmJiBiYXNlLl9fcHJlYWN0YXR0cl8ucmVmKSBiYXNlLl9fcHJlYWN0YXR0cl8ucmVmKG51bGwpOwogICAgICAgICAgICBjb21wb25lbnQuX19iID0gYmFzZTsKICAgICAgICAgICAgcmVtb3ZlTm9kZShiYXNlKTsKICAgICAgICAgICAgY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpOwogICAgICAgICAgICByZW1vdmVDaGlsZHJlbihiYXNlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb21wb25lbnQuX19yKSBjb21wb25lbnQuX19yKG51bGwpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7CiAgICAgICAgICB0aGlzLl9fZCA9ICEwOwogICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICAgIHRoaXMucHJvcHMgPSBwcm9wczsKICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnN0YXRlIHx8IHt9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyKHZub2RlLCBwYXJlbnQsIG1lcmdlKSB7CiAgICAgICAgICByZXR1cm4gZGlmZihtZXJnZSwgdm5vZGUsIHt9LCAhMSwgcGFyZW50LCAhMSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgb3B0aW9ucyA9IHt9OwogICAgICAgIHZhciBzdGFjayA9IFtdOwogICAgICAgIHZhciBFTVBUWV9DSElMRFJFTiA9IFtdOwogICAgICAgIHZhciBJU19OT05fRElNRU5TSU9OQUwgPSAvYWNpdHxleCg/OnN8Z3xufHB8JCl8cnBofG93c3xtbmN8bnR3fGluZVtjaF18em9vfF5vcmQvaTsKICAgICAgICB2YXIgaXRlbXMgPSBbXTsKICAgICAgICB2YXIgbW91bnRzID0gW107CiAgICAgICAgdmFyIGRpZmZMZXZlbCA9IDA7CiAgICAgICAgdmFyIGlzU3ZnTW9kZSA9ICExOwogICAgICAgIHZhciBoeWRyYXRpbmcgPSAhMTsKICAgICAgICB2YXIgY29tcG9uZW50cyA9IHt9OwogICAgICAgIGV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7CiAgICAgICAgICBzZXRTdGF0ZTogZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZTsKICAgICAgICAgICAgaWYgKCF0aGlzLl9fcykgdGhpcy5fX3MgPSBleHRlbmQoe30sIHMpOwogICAgICAgICAgICBleHRlbmQocywgJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygc3RhdGUgPyBzdGF0ZShzLCB0aGlzLnByb3BzKSA6IHN0YXRlKTsKICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSAodGhpcy5fX2ggPSB0aGlzLl9faCB8fCBbXSkucHVzaChjYWxsYmFjayk7CiAgICAgICAgICAgIGVucXVldWVSZW5kZXIodGhpcyk7CiAgICAgICAgICB9LAogICAgICAgICAgZm9yY2VVcGRhdGU6IGZ1bmN0aW9uIGZvcmNlVXBkYXRlKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgKHRoaXMuX19oID0gdGhpcy5fX2ggfHwgW10pLnB1c2goY2FsbGJhY2spOwogICAgICAgICAgICByZW5kZXJDb21wb25lbnQodGhpcywgMik7CiAgICAgICAgICB9LAogICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7fQogICAgICAgIH0pOwogICAgICAgIHZhciBwcmVhY3QgPSB7CiAgICAgICAgICBoOiBoLAogICAgICAgICAgY3JlYXRlRWxlbWVudDogaCwKICAgICAgICAgIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LAogICAgICAgICAgQ29tcG9uZW50OiBDb21wb25lbnQsCiAgICAgICAgICByZW5kZXI6IHJlbmRlciwKICAgICAgICAgIHJlcmVuZGVyOiByZXJlbmRlciwKICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMKICAgICAgICB9OwogICAgICAgIGlmICh0cnVlKSBtb2R1bGUuZXhwb3J0cyA9IHByZWFjdDtlbHNlIHNlbGYucHJlYWN0ID0gcHJlYWN0OwogICAgICB9KCk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIFRoaXMgZmlsZSBjYW4gYmUgcmVxdWlyZWQgaW4gQnJvd3NlcmlmeSBhbmQgTm9kZS5qcyBmb3IgYXV0b21hdGljIHBvbHlmaWxsCiAgICAgIC8vIFRvIHVzZSBpdDogIHJlcXVpcmUoJ2VzNi1wcm9taXNlL2F1dG8nKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkucG9seWZpbGwoKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MsIGdsb2JhbCkgewogICAgICAgIHZhciByZXF1aXJlOwogICAgICAgIC8qIQogICAgICAgICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLgogICAgICAgICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZCkKICAgICAgICAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2UKICAgICAgICAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0UKICAgICAgICAqIEB2ZXJzaW9uICAgNC4xLjEKICAgICAgICAqLwoKCiAgICAgICAgKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICAgICAgICAgIHRydWUgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6IHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6IGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpOwogICAgICAgIH0pKHRoaXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICBmdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHsKICAgICAgICAgICAgdmFyIHR5cGUgPSBfdHlwZW9mNCh4KTsKCiAgICAgICAgICAgIHJldHVybiB4ICE9PSBudWxsICYmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDsKCiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSkgewogICAgICAgICAgICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfaXNBcnJheSA9IGZ1bmN0aW9uIF9pc0FycmF5KHgpIHsKICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nOwogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpc0FycmF5ID0gX2lzQXJyYXk7CiAgICAgICAgICB2YXIgbGVuID0gMDsKICAgICAgICAgIHZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7CgogICAgICAgICAgdmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHsKICAgICAgICAgICAgcXVldWVbbGVuXSA9IGNhbGxiYWNrOwogICAgICAgICAgICBxdWV1ZVtsZW4gKyAxXSA9IGFyZzsKICAgICAgICAgICAgbGVuICs9IDI7CgogICAgICAgICAgICBpZiAobGVuID09PSAyKSB7CiAgICAgICAgICAgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLgogICAgICAgICAgICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5CiAgICAgICAgICAgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLgogICAgICAgICAgICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikgewogICAgICAgICAgICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzY2hlZHVsZUZsdXNoKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIGZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7CiAgICAgICAgICAgIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikgewogICAgICAgICAgICBhc2FwID0gYXNhcEZuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307CiAgICAgICAgICB2YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyOwogICAgICAgICAgdmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nOyAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMAoKICAgICAgICAgIHZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7IC8vIG5vZGUKCiAgICAgICAgICBmdW5jdGlvbiB1c2VOZXh0VGljaygpIHsKICAgICAgICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlscwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gLy8gdmVydHgKCgogICAgICAgICAgZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZlcnR4TmV4dChmbHVzaCk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkgewogICAgICAgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7CiAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7CiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOwogICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsKICAgICAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyOwogICAgICAgICAgICB9OwogICAgICAgICAgfSAvLyB3ZWIgd29ya2VyCgoKICAgICAgICAgIGZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkgewogICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpOwogICAgICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApOwogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7CiAgICAgICAgICAgIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieQogICAgICAgICAgICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSkKICAgICAgICAgICAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7CgogICAgICAgICAgZnVuY3Rpb24gZmx1c2goKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHsKICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTsKICAgICAgICAgICAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdOwogICAgICAgICAgICAgIGNhbGxiYWNrKGFyZyk7CiAgICAgICAgICAgICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB2YXIgciA9IHJlcXVpcmU7CgogICAgICAgICAgICAgIHZhciB2ZXJ0eCA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpOwoKICAgICAgICAgICAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0OwogICAgICAgICAgICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHNjaGVkdWxlRmx1c2ggPSB1bmRlZmluZWQ7IC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6CgogICAgICAgICAgaWYgKGlzTm9kZSkgewogICAgICAgICAgICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTsKICAgICAgICAgIH0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHsKICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNXb3JrZXIpIHsKICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiAiZnVuY3Rpb24iID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikgewogICAgICAgICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXM7CiAgICAgICAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3ApOwoKICAgICAgICAgICAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBtYWtlUHJvbWlzZShjaGlsZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlOwoKICAgICAgICAgICAgaWYgKF9zdGF0ZSkgewogICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBfYXJndW1lbnRzW19zdGF0ZSAtIDFdOwogICAgICAgICAgICAgICAgYXNhcChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICAvKioKICAgICAgICAgICAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZQogICAgICAgICAgICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgIHJlc29sdmUoMSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgLy8gdmFsdWUgPT09IDEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzoKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpOwogICAgICAgICAgCiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgLy8gdmFsdWUgPT09IDEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEBtZXRob2QgcmVzb2x2ZQogICAgICAgICAgICBAc3RhdGljCiAgICAgICAgICAgIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aAogICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlbgogICAgICAgICAgICBgdmFsdWVgCiAgICAgICAgICAqLwoKCiAgICAgICAgICBmdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KSB7CiAgICAgICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgICAgICAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7CgogICAgICAgICAgICBpZiAob2JqZWN0ICYmIF90eXBlb2Y0KG9iamVjdCkgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHsKICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTsKICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpOwogICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7CgogICAgICAgICAgZnVuY3Rpb24gbm9vcCgpIHt9CgogICAgICAgICAgdmFyIFBFTkRJTkcgPSB2b2lkIDA7CiAgICAgICAgICB2YXIgRlVMRklMTEVEID0gMTsKICAgICAgICAgIHZhciBSRUpFQ1RFRCA9IDI7CiAgICAgICAgICB2YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTsKCiAgICAgICAgICBmdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmIik7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW47CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjsKICAgICAgICAgICAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbiQkMSkgewogICAgICAgICAgICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7CiAgICAgICAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlOwogICAgICAgICAgICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiQkMSwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKHNlYWxlZCkgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2VhbGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgaWYgKHNlYWxlZCkgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2VhbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pOwogICAgICAgICAgICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7CgogICAgICAgICAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7CiAgICAgICAgICAgICAgICBzZWFsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHByb21pc2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7CiAgICAgICAgICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkgewogICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkgewogICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7CiAgICAgICAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJDEgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlJDEpIHsKICAgICAgICAgICAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAodGhlbiQkMSA9PT0gR0VUX1RIRU5fRVJST1IpIHsKICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7CiAgICAgICAgICAgICAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuJCQxID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkgewogICAgICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHsKICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7CiAgICAgICAgICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7CiAgICAgICAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7CiAgICAgICAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwdWJsaXNoKHByb21pc2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTsKICAgICAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7CgogICAgICAgICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHJlamVjdChwcm9taXNlLCByZWFzb24pIHsKICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEOwogICAgICAgICAgICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247CiAgICAgICAgICAgIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7CiAgICAgICAgICAgIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzOwogICAgICAgICAgICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDsKICAgICAgICAgICAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDsKICAgICAgICAgICAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDsKICAgICAgICAgICAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50OwogICAgICAgICAgICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247CgogICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHsKICAgICAgICAgICAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHsKICAgICAgICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7CiAgICAgICAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7CgogICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgICAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldOwogICAgICAgICAgICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdOwoKICAgICAgICAgICAgICBpZiAoY2hpbGQpIHsKICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soZGV0YWlsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBUUllfQ0FUQ0hfRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTsKCiAgICAgICAgICBmdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlOwogICAgICAgICAgICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7CiAgICAgICAgICAgIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLAogICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBlcnJvciA9IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHN1Y2NlZWRlZCA9IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgIGlmIChoYXNDYWxsYmFjaykgewogICAgICAgICAgICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7CgogICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7CiAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjsKICAgICAgICAgICAgICAgIHZhbHVlLmVycm9yID0gbnVsbDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkgewogICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBkZXRhaWw7CiAgICAgICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7Ly8gbm9vcAogICAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkgewogICAgICAgICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZhaWxlZCkgewogICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7CiAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHsKICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkgewogICAgICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHsKICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlkID0gMDsKCiAgICAgICAgICBmdW5jdGlvbiBuZXh0SWQoKSB7CiAgICAgICAgICAgIHJldHVybiBpZCsrOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHsKICAgICAgICAgICAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7CiAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkOwogICAgICAgICAgICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gRW51bWVyYXRvciQxKENvbnN0cnVjdG9yLCBpbnB1dCkgewogICAgICAgICAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7CiAgICAgICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTsKCiAgICAgICAgICAgIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7CiAgICAgICAgICAgICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7CiAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7CiAgICAgICAgICAgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoOwogICAgICAgICAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CgogICAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDsKCiAgICAgICAgICAgICAgICB0aGlzLl9lbnVtZXJhdGUoaW5wdXQpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHsKICAgICAgICAgICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7CiAgICAgICAgICB9CgogICAgICAgICAgRW51bWVyYXRvciQxLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKGlucHV0KSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIEVudW1lcmF0b3IkMS5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkgewogICAgICAgICAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7CiAgICAgICAgICAgIHZhciByZXNvbHZlJCQxID0gYy5yZXNvbHZlOwoKICAgICAgICAgICAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkgewogICAgICAgICAgICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpOwoKICAgICAgICAgICAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07CiAgICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UkMikgewogICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTsKICAgICAgICAgICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTsKCiAgICAgICAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7CiAgICAgICAgICAgICAgICB9KSwgaSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgRW51bWVyYXRvciQxLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkgewogICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTsKCiAgICAgICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykgewogICAgICAgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tOwoKICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7CiAgICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHsKICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgRW51bWVyYXRvciQxLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHsKICAgICAgICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzOwogICAgICAgICAgICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwogICAgICAgICAgLyoqCiAgICAgICAgICAgIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaAogICAgICAgICAgICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yCiAgICAgICAgICAgIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbAogICAgICAgICAgICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uCiAgICAgICAgICAKICAgICAgICAgICAgRXhhbXBsZToKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7CiAgICAgICAgICAgIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7CiAgICAgICAgICAgIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7CiAgICAgICAgICAgIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdOwogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXsKICAgICAgICAgICAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlCiAgICAgICAgICAgIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMncwogICAgICAgICAgICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6CiAgICAgICAgICAKICAgICAgICAgICAgRXhhbXBsZToKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7CiAgICAgICAgICAgIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoIjIiKSk7CiAgICAgICAgICAgIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoIjMiKSk7CiAgICAgICAgICAgIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdOwogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXsKICAgICAgICAgICAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyEKICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAvLyBlcnJvci5tZXNzYWdlID09PSAiMiIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEBtZXRob2QgYWxsCiAgICAgICAgICAgIEBzdGF0aWMKICAgICAgICAgICAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlcwogICAgICAgICAgICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS4KICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuCiAgICAgICAgICAgIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLgogICAgICAgICAgICBAc3RhdGljCiAgICAgICAgICAqLwoKCiAgICAgICAgICBmdW5jdGlvbiBhbGwkMShlbnRyaWVzKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRW51bWVyYXRvciQxKHRoaXMsIGVudHJpZXMpLnByb21pc2U7CiAgICAgICAgICB9CiAgICAgICAgICAvKioKICAgICAgICAgICAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZQogICAgICAgICAgICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuCiAgICAgICAgICAKICAgICAgICAgICAgRXhhbXBsZToKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7CiAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdwcm9taXNlIDInKTsKICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMQogICAgICAgICAgICAgIC8vIHdhcyByZXNvbHZlZC4KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3QKICAgICAgICAgICAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZQogICAgICAgICAgICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzCiAgICAgICAgICAgIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZAogICAgICAgICAgICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTsKICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTsKICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucwogICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlCiAgICAgICAgICAgICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKQogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBAbWV0aG9kIHJhY2UKICAgICAgICAgICAgQHN0YXRpYwogICAgICAgICAgICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlCiAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWQKICAgICAgICAgICAgcHJvbWlzZSB0byBzZXR0bGUuCiAgICAgICAgICAqLwoKCiAgICAgICAgICBmdW5jdGlvbiByYWNlJDEoZW50cmllcykgewogICAgICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLyoqCiAgICAgICAgICAgIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLgogICAgICAgICAgICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIQogICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTsKICAgICAgICAgIAogICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIQogICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQG1ldGhvZCByZWplY3QKICAgICAgICAgICAgQHN0YXRpYwogICAgICAgICAgICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLgogICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC4KICAgICAgICAgICovCgoKICAgICAgICAgIGZ1bmN0aW9uIHJlamVjdCQxKHJlYXNvbikgewogICAgICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzOwogICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTsKICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBuZWVkc05ldygpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7CiAgICAgICAgICB9CiAgICAgICAgICAvKioKICAgICAgICAgICAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZQogICAgICAgICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaAogICAgICAgICAgICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb24KICAgICAgICAgICAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuCiAgICAgICAgICAKICAgICAgICAgICAgVGVybWlub2xvZ3kKICAgICAgICAgICAgLS0tLS0tLS0tLS0KICAgICAgICAgIAogICAgICAgICAgICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLgogICAgICAgICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuCiAgICAgICAgICAgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS4KICAgICAgICAgICAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuCiAgICAgICAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC4KICAgICAgICAgICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuCiAgICAgICAgICAKICAgICAgICAgICAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLgogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkCiAgICAgICAgICAgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGUKICAgICAgICAgICAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuCiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhCiAgICAgICAgICAgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3MKICAgICAgICAgICAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsCiAgICAgICAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGwKICAgICAgICAgICAgaXRzZWxmIGZ1bGZpbGwuCiAgICAgICAgICAKICAgICAgICAgIAogICAgICAgICAgICBCYXNpYyBVc2FnZToKICAgICAgICAgICAgLS0tLS0tLS0tLS0tCiAgICAgICAgICAKICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAvLyBvbiBzdWNjZXNzCiAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgICAKICAgICAgICAgICAgICAvLyBvbiBmYWlsdXJlCiAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAgIC8vIG9uIHJlamVjdGlvbgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQWR2YW5jZWQgVXNhZ2U6CiAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXMKICAgICAgICAgICAgYFhNTEh0dHBSZXF1ZXN0YHMuCiAgICAgICAgICAKICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgIAogICAgICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7CiAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjsKICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7CiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTsKICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgICAgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7CiAgICAgICAgICAgICAgLy8gb24gZnVsZmlsbG1lbnQKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgICAgICAgLy8gb24gcmVqZWN0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgIFByb21pc2UuYWxsKFsKICAgICAgICAgICAgICBnZXRKU09OKCcvcG9zdHMnKSwKICAgICAgICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKQogICAgICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7CiAgICAgICAgICAgICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTgogICAgICAgICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT04KICAgICAgICAgIAogICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBAY2xhc3MgUHJvbWlzZQogICAgICAgICAgICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlcgogICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgIEBjb25zdHJ1Y3RvcgogICAgICAgICAgKi8KCgogICAgICAgICAgZnVuY3Rpb24gUHJvbWlzZSQyKHJlc29sdmVyKSB7CiAgICAgICAgICAgIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTsKICAgICAgICAgICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107CgogICAgICAgICAgICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHsKICAgICAgICAgICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpOwogICAgICAgICAgICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlJDIgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgUHJvbWlzZSQyLmFsbCA9IGFsbCQxOwogICAgICAgICAgUHJvbWlzZSQyLnJhY2UgPSByYWNlJDE7CiAgICAgICAgICBQcm9taXNlJDIucmVzb2x2ZSA9IHJlc29sdmUkMTsKICAgICAgICAgIFByb21pc2UkMi5yZWplY3QgPSByZWplY3QkMTsKICAgICAgICAgIFByb21pc2UkMi5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyOwogICAgICAgICAgUHJvbWlzZSQyLl9zZXRBc2FwID0gc2V0QXNhcDsKICAgICAgICAgIFByb21pc2UkMi5fYXNhcCA9IGFzYXA7CiAgICAgICAgICBQcm9taXNlJDIucHJvdG90eXBlID0gewogICAgICAgICAgICBjb25zdHJ1Y3RvcjogUHJvbWlzZSQyLAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsCiAgICAgICAgICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUKICAgICAgICAgICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpewogICAgICAgICAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGUKICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgQ2hhaW5pbmcKICAgICAgICAgICAgICAtLS0tLS0tLQogICAgICAgICAgICAKICAgICAgICAgICAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJwogICAgICAgICAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnQKICAgICAgICAgICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi4KICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyLm5hbWU7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7CiAgICAgICAgICAgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0CiAgICAgICAgICAgICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2AKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIC8vIG5ldmVyIHJlYWNoZWQKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLgogICAgICAgICAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIC8vIG5ldmVyIHJlYWNoZWQKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIEFzc2ltaWxhdGlvbgogICAgICAgICAgICAgIC0tLS0tLS0tLS0tLQogICAgICAgICAgICAKICAgICAgICAgICAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZQogICAgICAgICAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGUKICAgICAgICAgICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZwogICAgICAgICAgICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLgogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7CiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LgogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7CiAgICAgICAgICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBTaW1wbGUgRXhhbXBsZQogICAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGUKICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICAgIGxldCByZXN1bHQ7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7CiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzCiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAgICAgICAgICAgIC8vIGZhaWx1cmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIEVycmJhY2sgRXhhbXBsZQogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpewogICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBzdWNjZXNzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFByb21pc2UgRXhhbXBsZTsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAgIC8vIGZhaWx1cmUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgQWR2YW5jZWQgRXhhbXBsZQogICAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGUKICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICAgIGxldCBhdXRob3IsIGJvb2tzOwogICAgICAgICAgICAKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpOwogICAgICAgICAgICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTsKICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikgewogICAgICAgICAgICAgICAgLy8gZmFpbHVyZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgRXJyYmFjayBFeGFtcGxlCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikgewogICAgICAgICAgICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpewogICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7CiAgICAgICAgICAgICAgICAgIC8vIGZhaWx1cmUKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgUHJvbWlzZSBFeGFtcGxlOwogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgICAgZmluZEF1dGhvcigpLgogICAgICAgICAgICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuCiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXsKICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYm9va3MKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgQG1ldGhvZCB0aGVuCiAgICAgICAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWQKICAgICAgICAgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkCiAgICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICAgIEByZXR1cm4ge1Byb21pc2V9CiAgICAgICAgICAgICovCiAgICAgICAgICAgIHRoZW46IHRoZW4sCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lCiAgICAgICAgICAgICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC4KICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZpbmRBdXRob3IoKTsKICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikgewogICAgICAgICAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXMKICAgICAgICAgICAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIEBtZXRob2QgY2F0Y2gKICAgICAgICAgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvbgogICAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgICBAcmV0dXJuIHtQcm9taXNlfQogICAgICAgICAgICAqLwogICAgICAgICAgICAnY2F0Y2gnOiBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIC8qZ2xvYmFsIHNlbGYqLwoKICAgICAgICAgIGZ1bmN0aW9uIHBvbHlmaWxsJDEoKSB7CiAgICAgICAgICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIGxvY2FsID0gZ2xvYmFsOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIGxvY2FsID0gc2VsZjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7CgogICAgICAgICAgICBpZiAoUCkgewogICAgICAgICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsOwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7Ly8gc2lsZW50bHkgaWdub3JlZAogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlJDI7CiAgICAgICAgICB9IC8vIFN0cmFuZ2UgY29tcGF0Li4KCgogICAgICAgICAgUHJvbWlzZSQyLnBvbHlmaWxsID0gcG9seWZpbGwkMTsKICAgICAgICAgIFByb21pc2UkMi5Qcm9taXNlID0gUHJvbWlzZSQyOwogICAgICAgICAgcmV0dXJuIFByb21pc2UkMjsKICAgICAgICB9KTsKICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5NikpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDk2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgdmFyIGc7IC8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlCgogICAgICBnID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9KCk7CgogICAgICB0cnkgewogICAgICAgIC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKQogICAgICAgIGcgPSBnIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkgfHwgKDEsIGV2YWwpKCJ0aGlzIik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZQogICAgICAgIGlmICgodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Y0KHdpbmRvdykpID09PSAib2JqZWN0IikgZyA9IHdpbmRvdzsKICAgICAgfSAvLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uCiAgICAgIC8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzCiAgICAgIC8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn0KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGc7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvKiAoaWdub3JlZCkgKi8KCiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKCiAgICAgIHZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCiAgICAgIHZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOwoKICAgICAgdmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTsKCiAgICAgIHZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTsKCiAgICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKICAgICAgdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCiAgICAgIHZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgogICAgICB2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nik7CgogICAgICB2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOwoKICAgICAgdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCiAgICAgIHZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICB2YXIgX3JlYWN0RmxpcE1vdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Myk7CgogICAgICB2YXIgX3JlYWN0RmxpcE1vdmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RGbGlwTW92ZSk7CgogICAgICB2YXIgX2F1dG9zaXplID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTApOwoKICAgICAgdmFyIF9hdXRvc2l6ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc2l6ZSk7CgogICAgICB2YXIgX2kxOG4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7CgogICAgICB2YXIgX2kxOG4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaTE4bik7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MCk7CgogICAgICB2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCiAgICAgIHZhciBfYXZhdGFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7CgogICAgICB2YXIgX2F2YXRhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdmF0YXIpOwoKICAgICAgdmFyIF9idXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OCk7CgogICAgICB2YXIgX2J1dHRvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9idXR0b24pOwoKICAgICAgdmFyIF9hY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OSk7CgogICAgICB2YXIgX2FjdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hY3Rpb24pOwoKICAgICAgdmFyIF9jb21tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTApOwoKICAgICAgdmFyIF9jb21tZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbW1lbnQpOwoKICAgICAgdmFyIF9zdmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTsKCiAgICAgIHZhciBfc3ZnMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N2Zyk7CgogICAgICB2YXIgX2NvbnN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTgpOwoKICAgICAgdmFyIF9nZXRDb21tZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjE5KTsKCiAgICAgIHZhciBfZ2V0Q29tbWVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0Q29tbWVudHMpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgR2l0YWxrQ29tcG9uZW50ID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAgICAgICAoMCwgX2luaGVyaXRzM1siZGVmYXVsdCJdKShHaXRhbGtDb21wb25lbnQsIF9Db21wb25lbnQpOwoKICAgICAgICBmdW5jdGlvbiBHaXRhbGtDb21wb25lbnQocHJvcHMpIHsKICAgICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szWyJkZWZhdWx0Il0pKHRoaXMsIEdpdGFsa0NvbXBvbmVudCk7CgogICAgICAgICAgdmFyIF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuM1siZGVmYXVsdCJdKSh0aGlzLCAoR2l0YWxrQ29tcG9uZW50Ll9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMlsiZGVmYXVsdCJdKShHaXRhbGtDb21wb25lbnQpKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIHVzZXI6IG51bGwsCiAgICAgICAgICAgIGlzc3VlOiBudWxsLAogICAgICAgICAgICBjb21tZW50czogW10sCiAgICAgICAgICAgIGxvY2FsQ29tbWVudHM6IFtdLAogICAgICAgICAgICBjb21tZW50OiAnJywKICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgcGFnZXJEaXJlY3Rpb246ICdsYXN0JywKICAgICAgICAgICAgY3Vyc29yOiBudWxsLAogICAgICAgICAgICBwcmV2aWV3SHRtbDogJycsCiAgICAgICAgICAgIGlzTm9Jbml0OiBmYWxzZSwKICAgICAgICAgICAgaXNJbml0aW5nOiB0cnVlLAogICAgICAgICAgICBpc0NyZWF0aW5nOiBmYWxzZSwKICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgaXNMb2FkTW9yZTogZmFsc2UsCiAgICAgICAgICAgIGlzTG9hZE92ZXI6IGZhbHNlLAogICAgICAgICAgICBpc0lzc3VlQ3JlYXRpbmc6IGZhbHNlLAogICAgICAgICAgICBpc1BvcHVwVmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIGlzSW5wdXRGb2N1c2VkOiBmYWxzZSwKICAgICAgICAgICAgaXNQcmV2aWV3OiBmYWxzZSwKICAgICAgICAgICAgaXNPY2N1ckVycm9yOiBmYWxzZSwKICAgICAgICAgICAgZXJyb3JNc2c6ICcnCiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmdldENvbW1lbnRzVjMgPSBmdW5jdGlvbiAoaXNzdWUpIHsKICAgICAgICAgICAgdmFyIF90aGlzJG9wdGlvbnMgPSBfdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgY2xpZW50SUQgPSBfdGhpcyRvcHRpb25zLmNsaWVudElELAogICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0ID0gX3RoaXMkb3B0aW9ucy5jbGllbnRTZWNyZXQsCiAgICAgICAgICAgICAgICBwZXJQYWdlID0gX3RoaXMkb3B0aW9ucy5wZXJQYWdlOwogICAgICAgICAgICB2YXIgcGFnZSA9IF90aGlzLnN0YXRlLnBhZ2U7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRJc3N1ZSgpLnRoZW4oZnVuY3Rpb24gKGlzc3VlKSB7CiAgICAgICAgICAgICAgaWYgKCFpc3N1ZSkgcmV0dXJuOwogICAgICAgICAgICAgIHJldHVybiBfdXRpbC5heGlvc0dpdGh1Yi5nZXQoaXNzdWUuY29tbWVudHNfdXJsLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL3ZuZC5naXRodWIudjMuZnVsbCtqc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGNsaWVudElELAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogY2xpZW50U2VjcmV0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIHBlcl9wYWdlOiBwZXJQYWdlLAogICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICB2YXIgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICBjb21tZW50cyA9IF90aGlzJHN0YXRlLmNvbW1lbnRzLAogICAgICAgICAgICAgICAgICAgIGlzc3VlID0gX3RoaXMkc3RhdGUuaXNzdWU7CiAgICAgICAgICAgICAgICB2YXIgaXNMb2FkT3ZlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGNzID0gY29tbWVudHMuY29uY2F0KHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgICBpZiAoY3MubGVuZ3RoID49IGlzc3VlLmNvbW1lbnRzIHx8IHJlcy5kYXRhLmxlbmd0aCA8IHBlclBhZ2UpIHsKICAgICAgICAgICAgICAgICAgaXNMb2FkT3ZlciA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBjb21tZW50czogY3MsCiAgICAgICAgICAgICAgICAgIGlzTG9hZE92ZXI6IGlzTG9hZE92ZXIsCiAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UgKyAxCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gY3M7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5nZXRSZWYgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5wdWJsaWNCdG5FTCA9IGU7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLnJlcGx5ID0gZnVuY3Rpb24gKHJlcGx5Q29tbWVudCkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBjb21tZW50ID0gX3RoaXMuc3RhdGUuY29tbWVudDsKICAgICAgICAgICAgICB2YXIgcmVwbHlDb21tZW50Qm9keSA9IHJlcGx5Q29tbWVudC5ib2R5OwogICAgICAgICAgICAgIHZhciByZXBseUNvbW1lbnRBcnJheSA9IHJlcGx5Q29tbWVudEJvZHkuc3BsaXQoJ1xuJyk7CiAgICAgICAgICAgICAgcmVwbHlDb21tZW50QXJyYXkudW5zaGlmdCgnQCcgKyByZXBseUNvbW1lbnQudXNlci5sb2dpbik7CiAgICAgICAgICAgICAgcmVwbHlDb21tZW50QXJyYXkgPSByZXBseUNvbW1lbnRBcnJheS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPiAnICsgdDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXBseUNvbW1lbnRBcnJheS5wdXNoKCcnKTsKICAgICAgICAgICAgICByZXBseUNvbW1lbnRBcnJheS5wdXNoKCcnKTsKICAgICAgICAgICAgICBpZiAoY29tbWVudCkgcmVwbHlDb21tZW50QXJyYXkudW5zaGlmdCgnJyk7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnQgKyByZXBseUNvbW1lbnRBcnJheS5qb2luKCdcbicpCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX2F1dG9zaXplMlsiZGVmYXVsdCJdLnVwZGF0ZShfdGhpcy5jb21tZW50RUwpOwoKICAgICAgICAgICAgICAgIF90aGlzLmNvbW1lbnRFTC5mb2N1cygpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVQb3B1cCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgdmFyIGlzVmlzaWJsZSA9ICFfdGhpcy5zdGF0ZS5pc1BvcHVwVmlzaWJsZTsKCiAgICAgICAgICAgIHZhciBoaWRlSGFuZGxlID0gZnVuY3Rpb24gaGlkZUhhbmRsZShlMSkgewogICAgICAgICAgICAgIGlmICgoMCwgX3V0aWwuaGFzQ2xhc3NJblBhcmVudCkoZTEudGFyZ2V0LCAnZ3QtdXNlcicsICdndC1wb3B1cCcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGFuZGxlKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNQb3B1cFZpc2libGU6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNQb3B1cFZpc2libGU6IGlzVmlzaWJsZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChpc1Zpc2libGUpIHsKICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGFuZGxlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGFuZGxlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVMb2dpbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBfdGhpcy5zdGF0ZS5jb21tZW50OwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oX2NvbnN0LkdUX0NPTU1FTlQsIGVuY29kZVVSSUNvbXBvbmVudChjb21tZW50KSk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX3RoaXMubG9naW5MaW5rOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVJc3N1ZUNyZWF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGlzSXNzdWVDcmVhdGluZzogdHJ1ZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLmNyZWF0ZUlzc3VlKCkudGhlbihmdW5jdGlvbiAoaXNzdWUpIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0lzc3VlQ3JlYXRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiBmYWxzZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0Q29tbWVudHMoaXNzdWUpOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNJc3N1ZUNyZWF0aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKGVycikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc05vSW5pdDogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRDcmVhdGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoIV90aGlzLnN0YXRlLmNvbW1lbnQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgZSAmJiBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgIF90aGlzLmNvbW1lbnRFTC5mb2N1cygpOwoKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgICAgICAgICAgIGlmIChzdGF0ZS5pc0NyZWF0aW5nKSByZXR1cm47CgogICAgICAgICAgICAgIF90aGlzLmNyZWF0ZUNvbW1lbnQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzQ3JlYXRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzQ3JlYXRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKGVycikKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgaXNDcmVhdGluZzogdHJ1ZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50UHJldmlldyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc1ByZXZpZXc6ICFfdGhpcy5zdGF0ZS5pc1ByZXZpZXcKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdXRpbC5heGlvc0dpdGh1Yi5wb3N0KCcvbWFya2Rvd24nLCB7CiAgICAgICAgICAgICAgdGV4dDogX3RoaXMuc3RhdGUuY29tbWVudAogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogX3RoaXMuYWNjZXNzVG9rZW4gJiYgewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ3Rva2VuICcgKyBfdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgcHJldmlld0h0bWw6IHJlcy5kYXRhCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShlcnIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50TG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IF90aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgaXNzdWUgPSBfdGhpcyRzdGF0ZTIuaXNzdWUsCiAgICAgICAgICAgICAgICBpc0xvYWRNb3JlID0gX3RoaXMkc3RhdGUyLmlzTG9hZE1vcmU7CiAgICAgICAgICAgIGlmIChpc0xvYWRNb3JlKSByZXR1cm47CgogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNMb2FkTW9yZTogdHJ1ZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzLmdldENvbW1lbnRzKGlzc3VlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNMb2FkTW9yZTogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGNvbW1lbnQ6IGUudGFyZ2V0LnZhbHVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVMb2dvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmxvZ291dCgpOwoKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50Rm9jdXMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgZGlzdHJhY3Rpb25GcmVlTW9kZSA9IF90aGlzLm9wdGlvbnMuZGlzdHJhY3Rpb25GcmVlTW9kZTsKICAgICAgICAgICAgaWYgKCFkaXN0cmFjdGlvbkZyZWVNb2RlKSByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGlzSW5wdXRGb2N1c2VkOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50Qmx1ciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBkaXN0cmFjdGlvbkZyZWVNb2RlID0gX3RoaXMub3B0aW9ucy5kaXN0cmFjdGlvbkZyZWVNb2RlOwogICAgICAgICAgICBpZiAoIWRpc3RyYWN0aW9uRnJlZU1vZGUpIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNJbnB1dEZvY3VzZWQ6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVTb3J0ID0gZnVuY3Rpb24gKGRpcmVjdGlvbikgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBwYWdlckRpcmVjdGlvbjogZGlyZWN0aW9uCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRLZXlEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIGVuYWJsZUhvdEtleSA9IF90aGlzLm9wdGlvbnMuZW5hYmxlSG90S2V5OwoKICAgICAgICAgICAgaWYgKGVuYWJsZUhvdEtleSAmJiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSkgJiYgZS5rZXlDb2RlID09PSAxMykgewogICAgICAgICAgICAgIF90aGlzLnB1YmxpY0J0bkVMICYmIF90aGlzLnB1YmxpY0J0bkVMLmZvY3VzKCk7CgogICAgICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRDcmVhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5vcHRpb25zID0gKDAsIF9hc3NpZ24yWyJkZWZhdWx0Il0pKHt9LCB7CiAgICAgICAgICAgIGlkOiB3aW5kb3cubG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgbnVtYmVyOiAtMSwKICAgICAgICAgICAgbGFiZWxzOiBbJ0dpdGFsayddLAogICAgICAgICAgICB0aXRsZTogd2luZG93LmRvY3VtZW50LnRpdGxlLAogICAgICAgICAgICBib2R5OiAnJywKICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgKyBoZWFkZXIubWV0YVtkZXNjcmlwdGlvbl0KICAgICAgICAgICAgbGFuZ3VhZ2U6IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgd2luZG93Lm5hdmlnYXRvci51c2VyTGFuZ3VhZ2UsCiAgICAgICAgICAgIHBlclBhZ2U6IDEwLAogICAgICAgICAgICBwYWdlckRpcmVjdGlvbjogJ2xhc3QnLAogICAgICAgICAgICAvLyBsYXN0IG9yIGZpcnN0CiAgICAgICAgICAgIGNyZWF0ZUlzc3VlTWFudWFsbHk6IGZhbHNlLAogICAgICAgICAgICBkaXN0cmFjdGlvbkZyZWVNb2RlOiBmYWxzZSwKICAgICAgICAgICAgcHJveHk6ICdodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuJywKICAgICAgICAgICAgZmxpcE1vdmVPcHRpb25zOiB7CiAgICAgICAgICAgICAgc3RhZ2dlckRlbGF5Qnk6IDE1MCwKICAgICAgICAgICAgICBhcHBlYXJBbmltYXRpb246ICdhY2NvcmRpb25WZXJ0aWNhbCcsCiAgICAgICAgICAgICAgZW50ZXJBbmltYXRpb246ICdhY2NvcmRpb25WZXJ0aWNhbCcsCiAgICAgICAgICAgICAgbGVhdmVBbmltYXRpb246ICdhY2NvcmRpb25WZXJ0aWNhbCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW5hYmxlSG90S2V5OiB0cnVlLAogICAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLAogICAgICAgICAgICBkZWZhdWx0QXV0aG9yOiB7CiAgICAgICAgICAgICAgYXZhdGFyVXJsOiAnLy9hdmF0YXJzMS5naXRodWJ1c2VyY29udGVudC5jb20vdS8yOTY5NzEzMz9zPTUwJywKICAgICAgICAgICAgICBsb2dpbjogJ251bGwnLAogICAgICAgICAgICAgIHVybDogJycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBkYXRlQ291bnRDYWxsYmFjazogbnVsbAogICAgICAgICAgfSwgcHJvcHMub3B0aW9ucyk7CiAgICAgICAgICBfdGhpcy5zdGF0ZS5wYWdlckRpcmVjdGlvbiA9IF90aGlzLm9wdGlvbnMucGFnZXJEaXJlY3Rpb247CiAgICAgICAgICB2YXIgc3RvcmVkQ29tbWVudCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShfY29uc3QuR1RfQ09NTUVOVCk7CgogICAgICAgICAgaWYgKHN0b3JlZENvbW1lbnQpIHsKICAgICAgICAgICAgX3RoaXMuc3RhdGUuY29tbWVudCA9IGRlY29kZVVSSUNvbXBvbmVudChzdG9yZWRDb21tZW50KTsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKF9jb25zdC5HVF9DT01NRU5UKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcXVlcnkgPSAoMCwgX3V0aWwucXVlcnlQYXJzZSkoKTsKCiAgICAgICAgICBpZiAocXVlcnkuY29kZSkgewogICAgICAgICAgICB2YXIgY29kZSA9IHF1ZXJ5LmNvZGU7CiAgICAgICAgICAgIGRlbGV0ZSBxdWVyeS5jb2RlOwogICAgICAgICAgICB2YXIgcmVwbGFjZWRVcmwgPSAnJyArIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyAoMCwgX3V0aWwucXVlcnlTdHJpbmdpZnkpKHF1ZXJ5KSArIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwogICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCByZXBsYWNlZFVybCk7CiAgICAgICAgICAgIF90aGlzLm9wdGlvbnMgPSAoMCwgX2Fzc2lnbjJbImRlZmF1bHQiXSkoe30sIF90aGlzLm9wdGlvbnMsIHsKICAgICAgICAgICAgICB1cmw6IHJlcGxhY2VkVXJsLAogICAgICAgICAgICAgIGlkOiByZXBsYWNlZFVybAogICAgICAgICAgICB9LCBwcm9wcy5vcHRpb25zKTsKCiAgICAgICAgICAgIF91dGlsLmF4aW9zSlNPTi5wb3N0KF90aGlzLm9wdGlvbnMucHJveHksIHsKICAgICAgICAgICAgICBjb2RlOiBjb2RlLAogICAgICAgICAgICAgIGNsaWVudF9pZDogX3RoaXMub3B0aW9ucy5jbGllbnRJRCwKICAgICAgICAgICAgICBjbGllbnRfc2VjcmV0OiBfdGhpcy5vcHRpb25zLmNsaWVudFNlY3JldAogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuYWNjZXNzX3Rva2VuKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5hY2Nlc3NUb2tlbiA9IHJlcy5kYXRhLmFjY2Vzc190b2tlbjsKCiAgICAgICAgICAgICAgICBfdGhpcy5nZXRJbml0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgaXNJbml0aW5nOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjonLCBlcnIpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGlzSW5pdGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKGVycikKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gbm8gYWNjZXNzX3Rva2VuCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzLmRhdGEgZXJyOicsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykobmV3IEVycm9yKCdubyBhY2Nlc3MgdG9rZW4nKSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKGVycikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5nZXRJbml0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzSW5pdGluZzogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6JywgZXJyKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNJbml0aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKGVycikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMuaTE4biA9ICgwLCBfaTE4bjJbImRlZmF1bHQiXSkoX3RoaXMub3B0aW9ucy5sYW5ndWFnZSk7CiAgICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgICAgfQoKICAgICAgICAoMCwgX2NyZWF0ZUNsYXNzM1siZGVmYXVsdCJdKShHaXRhbGtDb21wb25lbnQsIFt7CiAgICAgICAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgICAgICAgdGhpcy5jb21tZW50RUwgJiYgKDAsIF9hdXRvc2l6ZTJbImRlZmF1bHQiXSkodGhpcy5jb21tZW50RUwpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldEluaXQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluaXQoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldElzc3VlKCk7CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGlzc3VlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5nZXRDb21tZW50cyhpc3N1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldFVzZXJJbmZvJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHsKICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgICAgICByZXR1cm4gX3V0aWwuYXhpb3NHaXRodWIuZ2V0KCcvdXNlcicsIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAndG9rZW4gJyArIHRoaXMuYWNjZXNzVG9rZW4KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICB1c2VyOiByZXMuZGF0YQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgX3RoaXMzLmxvZ291dCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRJc3N1ZUJ5SWQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldElzc3VlQnlJZCgpIHsKICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBvd25lciA9IF9vcHRpb25zLm93bmVyLAogICAgICAgICAgICAgICAgcmVwbyA9IF9vcHRpb25zLnJlcG8sCiAgICAgICAgICAgICAgICBudW1iZXIgPSBfb3B0aW9ucy5udW1iZXIsCiAgICAgICAgICAgICAgICBjbGllbnRJRCA9IF9vcHRpb25zLmNsaWVudElELAogICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0ID0gX29wdGlvbnMuY2xpZW50U2VjcmV0OwogICAgICAgICAgICB2YXIgZ2V0VXJsID0gJy9yZXBvcy8nICsgb3duZXIgKyAnLycgKyByZXBvICsgJy9pc3N1ZXMvJyArIG51bWJlcjsKICAgICAgICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTJbImRlZmF1bHQiXShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgX3V0aWwuYXhpb3NHaXRodWIuZ2V0KGdldFVybCwgewogICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogY2xpZW50SUQsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBjbGllbnRTZWNyZXQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgdDogRGF0ZS5ub3coKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdmFyIGlzc3VlID0gbnVsbDsKCiAgICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLm51bWJlciA9PT0gbnVtYmVyKSB7CiAgICAgICAgICAgICAgICAgIGlzc3VlID0gcmVzLmRhdGE7CgogICAgICAgICAgICAgICAgICBfdGhpczQuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGlzc3VlOiBpc3N1ZSwKICAgICAgICAgICAgICAgICAgICBpc05vSW5pdDogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmVzb2x2ZShpc3N1ZSk7CiAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc3RhdHVzIGNvZGUgaXMgNDA0LCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBudWxsCiAgICAgICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSByZXNvbHZlKG51bGwpOwogICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldElzc3VlQnlMYWJlbHMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldElzc3VlQnlMYWJlbHMoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIG93bmVyID0gX29wdGlvbnMyLm93bmVyLAogICAgICAgICAgICAgICAgcmVwbyA9IF9vcHRpb25zMi5yZXBvLAogICAgICAgICAgICAgICAgaWQgPSBfb3B0aW9uczIuaWQsCiAgICAgICAgICAgICAgICBsYWJlbHMgPSBfb3B0aW9uczIubGFiZWxzLAogICAgICAgICAgICAgICAgY2xpZW50SUQgPSBfb3B0aW9uczIuY2xpZW50SUQsCiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQgPSBfb3B0aW9uczIuY2xpZW50U2VjcmV0OwogICAgICAgICAgICByZXR1cm4gX3V0aWwuYXhpb3NHaXRodWIuZ2V0KCcvcmVwb3MvJyArIG93bmVyICsgJy8nICsgcmVwbyArICcvaXNzdWVzJywgewogICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBjbGllbnRJRCwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBjbGllbnRTZWNyZXQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgbGFiZWxzOiBsYWJlbHMuY29uY2F0KGlkKS5qb2luKCcsJyksCiAgICAgICAgICAgICAgICB0OiBEYXRlLm5vdygpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICB2YXIgY3JlYXRlSXNzdWVNYW51YWxseSA9IF90aGlzNS5vcHRpb25zLmNyZWF0ZUlzc3VlTWFudWFsbHk7CiAgICAgICAgICAgICAgdmFyIGlzTm9Jbml0ID0gZmFsc2U7CiAgICAgICAgICAgICAgdmFyIGlzc3VlID0gbnVsbDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIGlmICghY3JlYXRlSXNzdWVNYW51YWxseSAmJiBfdGhpczUuaXNBZG1pbikgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmNyZWF0ZUlzc3VlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaXNOb0luaXQgPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpc3N1ZSA9IHJlcy5kYXRhWzBdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXM1LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzc3VlOiBpc3N1ZSwKICAgICAgICAgICAgICAgIGlzTm9Jbml0OiBpc05vSW5pdAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm4gaXNzdWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldElzc3VlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJc3N1ZSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5vcHRpb25zLm51bWJlcjsKICAgICAgICAgICAgdmFyIGlzc3VlID0gdGhpcy5zdGF0ZS5pc3N1ZTsKCiAgICAgICAgICAgIGlmIChpc3N1ZSkgewogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNOb0luaXQ6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9wcm9taXNlMlsiZGVmYXVsdCJdLnJlc29sdmUoaXNzdWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ251bWJlcicgJiYgbnVtYmVyID4gMCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldElzc3VlQnlJZCgpLnRoZW4oZnVuY3Rpb24gKHJlc0lzc3VlKSB7CiAgICAgICAgICAgICAgICBpZiAoIXJlc0lzc3VlKSByZXR1cm4gX3RoaXM2LmdldElzc3VlQnlMYWJlbHMoKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNJc3N1ZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXNzdWVCeUxhYmVscygpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NyZWF0ZUlzc3VlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVJc3N1ZSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgb3duZXIgPSBfb3B0aW9uczMub3duZXIsCiAgICAgICAgICAgICAgICByZXBvID0gX29wdGlvbnMzLnJlcG8sCiAgICAgICAgICAgICAgICB0aXRsZSA9IF9vcHRpb25zMy50aXRsZSwKICAgICAgICAgICAgICAgIGJvZHkgPSBfb3B0aW9uczMuYm9keSwKICAgICAgICAgICAgICAgIGlkID0gX29wdGlvbnMzLmlkLAogICAgICAgICAgICAgICAgbGFiZWxzID0gX29wdGlvbnMzLmxhYmVscywKICAgICAgICAgICAgICAgIHVybCA9IF9vcHRpb25zMy51cmw7CiAgICAgICAgICAgIHJldHVybiBfdXRpbC5heGlvc0dpdGh1Yi5wb3N0KCcvcmVwb3MvJyArIG93bmVyICsgJy8nICsgcmVwbyArICcvaXNzdWVzJywgewogICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgICBsYWJlbHM6IGxhYmVscy5jb25jYXQoaWQpLAogICAgICAgICAgICAgIGJvZHk6IGJvZHkgfHwgdXJsICsgJyBcblxuICcgKyAoKDAsIF91dGlsLmdldE1ldGFDb250ZW50KSgnZGVzY3JpcHRpb24nKSB8fCAoMCwgX3V0aWwuZ2V0TWV0YUNvbnRlbnQpKCdkZXNjcmlwdGlvbicsICdvZzpkZXNjcmlwdGlvbicpIHx8ICcnKQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ3Rva2VuICcgKyB0aGlzLmFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczcuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNzdWU6IHJlcy5kYXRhCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiByZXMuZGF0YTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IC8vIEdldCBjb21tZW50cyB2aWEgdjMgYXBpLCBkb24ndCByZXF1aXJlIGxvZ2luLCBidXQgc29ydGluZyBmZWF0dXJlIGlzIGRpc2FibGUKCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0Q29tbWVudHMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbW1lbnRzKGlzc3VlKSB7CiAgICAgICAgICAgIGlmICghaXNzdWUpIHJldHVybjsgLy8gR2V0IGNvbW1lbnRzIHZpYSB2NCBncmFwaHFsIGFwaSwgbG9naW4gcmVxdWlyZWQgYW5kIHNvcnRpbmcgZmVhdHVyZSBpcyBhdmFpbGFibGUKCiAgICAgICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSByZXR1cm4gX2dldENvbW1lbnRzMlsiZGVmYXVsdCJdLmNhbGwodGhpcywgaXNzdWUpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb21tZW50c1YzKGlzc3VlKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjcmVhdGVDb21tZW50JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVDb21tZW50KCkgewogICAgICAgICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgY29tbWVudCA9IF9zdGF0ZS5jb21tZW50LAogICAgICAgICAgICAgICAgbG9jYWxDb21tZW50cyA9IF9zdGF0ZS5sb2NhbENvbW1lbnRzLAogICAgICAgICAgICAgICAgY29tbWVudHMgPSBfc3RhdGUuY29tbWVudHM7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldElzc3VlKCkudGhlbihmdW5jdGlvbiAoaXNzdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gX3V0aWwuYXhpb3NHaXRodWIucG9zdChpc3N1ZS5jb21tZW50c191cmwsIHsKICAgICAgICAgICAgICAgIGJvZHk6IGNvbW1lbnQKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL3ZuZC5naXRodWIudjMuZnVsbCtqc29uJywKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ3Rva2VuICcgKyBfdGhpczguYWNjZXNzVG9rZW4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNvbW1lbnQ6ICcnLAogICAgICAgICAgICAgICAgY29tbWVudHM6IGNvbW1lbnRzLmNvbmNhdChyZXMuZGF0YSksCiAgICAgICAgICAgICAgICBsb2NhbENvbW1lbnRzOiBsb2NhbENvbW1lbnRzLmNvbmNhdChyZXMuZGF0YSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnbG9nb3V0JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIHVzZXI6IG51bGwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShfY29uc3QuR1RfQUNDRVNTX1RPS0VOKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdsaWtlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsaWtlKGNvbW1lbnQpIHsKICAgICAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgb3duZXIgPSBfb3B0aW9uczQub3duZXIsCiAgICAgICAgICAgICAgICByZXBvID0gX29wdGlvbnM0LnJlcG87CiAgICAgICAgICAgIHZhciB1c2VyID0gdGhpcy5zdGF0ZS51c2VyOwogICAgICAgICAgICB2YXIgY29tbWVudHMgPSB0aGlzLnN0YXRlLmNvbW1lbnRzOwoKICAgICAgICAgICAgX3V0aWwuYXhpb3NHaXRodWIucG9zdCgnL3JlcG9zLycgKyBvd25lciArICcvJyArIHJlcG8gKyAnL2lzc3Vlcy9jb21tZW50cy8nICsgY29tbWVudC5pZCArICcvcmVhY3Rpb25zJywgewogICAgICAgICAgICAgIGNvbnRlbnQ6ICdoZWFydCcKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICd0b2tlbiAnICsgdGhpcy5hY2Nlc3NUb2tlbiwKICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL3ZuZC5naXRodWIuc3F1aXJyZWwtZ2lybC1wcmV2aWV3JwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgY29tbWVudHMgPSBjb21tZW50cy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgIGlmIChjLmlkID09PSBjb21tZW50LmlkKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjLnJlYWN0aW9ucykgewogICAgICAgICAgICAgICAgICAgIGlmICghfmMucmVhY3Rpb25zLm5vZGVzLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udXNlci5sb2dpbiA9PT0gdXNlci5sb2dpbjsKICAgICAgICAgICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMudG90YWxDb3VudCArPSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGVzOiBbXQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMudG90YWxDb3VudCA9IDE7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLm5vZGVzLnB1c2gocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy52aWV3ZXJIYXNSZWFjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXM5LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBjb21tZW50cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICd1bkxpa2UnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuTGlrZShjb21tZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgICAgICAgIHZhciB1c2VyID0gdGhpcy5zdGF0ZS51c2VyOwogICAgICAgICAgICB2YXIgY29tbWVudHMgPSB0aGlzLnN0YXRlLmNvbW1lbnRzOyAvLyBjb25zdCB7ICB1c2VyIH0gPSB0aGlzLnN0YXRlCiAgICAgICAgICAgIC8vIGxldCBpZAogICAgICAgICAgICAvLyBjb21tZW50LnJlYWN0aW9ucy5ub2Rlcy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgICAvLyAgIGlmIChyLnVzZXIubG9naW4gPSB1c2VyLmxvZ2luKSBpZCA9IHIuZGF0YWJhc2VJZAogICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAvLyByZXR1cm4gYXhpb3NHaXRodWIuZGVsZXRlKGAvcmVhY3Rpb25zLyR7aWR9YCwgewogICAgICAgICAgICAvLyAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgLy8gICAgIEF1dGhvcml6YXRpb246IGB0b2tlbiAke3RoaXMuYWNjZXNzVG9rZW59YCwKICAgICAgICAgICAgLy8gICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL3ZuZC5naXRodWIuc3F1aXJyZWwtZ2lybC1wcmV2aWV3JwogICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgLy8gfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdyZXM6JywgcmVzKQogICAgICAgICAgICAvLyB9KQoKICAgICAgICAgICAgdmFyIGdldFFMID0gZnVuY3Rpb24gZ2V0UUwoaWQpIHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgb3BlcmF0aW9uTmFtZTogJ1JlbW92ZVJlYWN0aW9uJywKICAgICAgICAgICAgICAgIHF1ZXJ5OiAnXG4gICAgICAgICAgbXV0YXRpb24gUmVtb3ZlUmVhY3Rpb257XG4gICAgICAgICAgICByZW1vdmVSZWFjdGlvbiAoaW5wdXQ6e1xuICAgICAgICAgICAgICBzdWJqZWN0SWQ6ICInICsgaWQgKyAnIixcbiAgICAgICAgICAgICAgY29udGVudDogSEVBUlRcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgICAgcmVhY3Rpb24ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBfdXRpbC5heGlvc0dpdGh1Yi5wb3N0KCcvZ3JhcGhxbCcsIGdldFFMKGNvbW1lbnQuZ0lkKSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdiZWFyZXIgJyArIHRoaXMuYWNjZXNzVG9rZW4KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICAgICAgY29tbWVudHMgPSBjb21tZW50cy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgaWYgKGMuaWQgPT09IGNvbW1lbnQuaWQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBjLnJlYWN0aW9ucy5ub2Rlcy5maW5kSW5kZXgoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnVzZXIubG9naW4gPT09IHVzZXIubG9naW47CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmICh+aW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLnRvdGFsQ291bnQgLT0gMTsKICAgICAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLm5vZGVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy52aWV3ZXJIYXNSZWFjdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXMxMC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBjb21tZW50cwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdpbml0aW5nJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aW5nKCkgewogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pbml0aW5nJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnaScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1sb2FkZXInCiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgncCcsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pbml0aW5nLXRleHQnCiAgICAgICAgICAgIH0sIHRoaXMuaTE4bi50KCdpbml0JykpKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdub0luaXQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5vSW5pdCgpIHsKICAgICAgICAgICAgdmFyIF9zdGF0ZTIgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgdXNlciA9IF9zdGF0ZTIudXNlciwKICAgICAgICAgICAgICAgIGlzSXNzdWVDcmVhdGluZyA9IF9zdGF0ZTIuaXNJc3N1ZUNyZWF0aW5nOwogICAgICAgICAgICB2YXIgX29wdGlvbnM1ID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgb3duZXIgPSBfb3B0aW9uczUub3duZXIsCiAgICAgICAgICAgICAgICByZXBvID0gX29wdGlvbnM1LnJlcG8sCiAgICAgICAgICAgICAgICBhZG1pbiA9IF9vcHRpb25zNS5hZG1pbjsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3Qtbm8taW5pdCcsCiAgICAgICAgICAgICAga2V5OiAnbm8taW5pdCcKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3AnLCB7CiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICAgICAgICAgIF9faHRtbDogdGhpcy5pMThuLnQoJ25vLWZvdW5kLXJlbGF0ZWQnLCB7CiAgICAgICAgICAgICAgICAgIGxpbms6ICc8YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vJyArIG93bmVyICsgJy8nICsgcmVwbyArICcvaXNzdWVzIj5Jc3N1ZXM8L2E+JwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgncCcsIG51bGwsIHRoaXMuaTE4bi50KCdwbGVhc2UtY29udGFjdCcsIHsKICAgICAgICAgICAgICB1c2VyOiBbXS5jb25jYXQoYWRtaW4pLm1hcChmdW5jdGlvbiAodSkgewogICAgICAgICAgICAgICAgcmV0dXJuICdAJyArIHU7CiAgICAgICAgICAgICAgfSkuam9pbignICcpCiAgICAgICAgICAgIH0pKSwgdGhpcy5pc0FkbWluID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3AnLCBudWxsLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYnV0dG9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVJc3N1ZUNyZWF0ZSwKICAgICAgICAgICAgICBpc0xvYWRpbmc6IGlzSXNzdWVDcmVhdGluZywKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnaW5pdC1pc3N1ZScpCiAgICAgICAgICAgIH0pKSA6IG51bGwsICF1c2VyICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9idXR0b24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1idG4tbG9naW4nLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlTG9naW4sCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ2xvZ2luLXdpdGgtZ2l0aHViJykKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2hhbmRsZUltYWdlRXJyb3JlZCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSW1hZ2VFcnJvcmVkKG9iaikgewogICAgICAgICAgICBvYmoudGFyZ2V0LnNyYyA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2dpdGFsa0AxL3NyYy9hc3NldHMvaWNvbi9naXRodWIuc3ZnIjsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdoZWFkZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhlYWRlcigpIHsKICAgICAgICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9zdGF0ZTMgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgdXNlciA9IF9zdGF0ZTMudXNlciwKICAgICAgICAgICAgICAgIGNvbW1lbnQgPSBfc3RhdGUzLmNvbW1lbnQsCiAgICAgICAgICAgICAgICBpc0NyZWF0aW5nID0gX3N0YXRlMy5pc0NyZWF0aW5nLAogICAgICAgICAgICAgICAgcHJldmlld0h0bWwgPSBfc3RhdGUzLnByZXZpZXdIdG1sLAogICAgICAgICAgICAgICAgaXNQcmV2aWV3ID0gX3N0YXRlMy5pc1ByZXZpZXc7CiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlcicsCiAgICAgICAgICAgICAga2V5OiAnaGVhZGVyJwogICAgICAgICAgICB9LCB1c2VyID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2F2YXRhcjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlci1hdmF0YXInLAogICAgICAgICAgICAgIHNyYzogdXNlci5hdmF0YXJfdXJsLAogICAgICAgICAgICAgIGFsdDogdXNlci5sb2dpbiwKICAgICAgICAgICAgICBvbkVycm9yOiB0aGlzLmhhbmRsZUltYWdlRXJyb3JlZC5iaW5kKHRoaXMpCiAgICAgICAgICAgIH0pIDogX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYXZhdGFyLWdpdGh1YicsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTG9naW4KICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1naXRodWInLAogICAgICAgICAgICAgIG5hbWU6ICdnaXRodWInCiAgICAgICAgICAgIH0pKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXItY29tbWVudCcKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJywgewogICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKHQpIHsKICAgICAgICAgICAgICAgIF90aGlzMTEuY29tbWVudEVMID0gdDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlci10ZXh0YXJlYSAnICsgKGlzUHJldmlldyA/ICdoaWRlJyA6ICcnKSwKICAgICAgICAgICAgICB2YWx1ZTogY29tbWVudCwKICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDb21tZW50Q2hhbmdlLAogICAgICAgICAgICAgIG9uRm9jdXM6IHRoaXMuaGFuZGxlQ29tbWVudEZvY3VzLAogICAgICAgICAgICAgIG9uQmx1cjogdGhpcy5oYW5kbGVDb21tZW50Qmx1ciwKICAgICAgICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlQ29tbWVudEtleURvd24sCiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMuaTE4bi50KCdsZWF2ZS1hLWNvbW1lbnQnKQogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXItcHJldmlldyBtYXJrZG93bi1ib2R5ICcgKyAoaXNQcmV2aWV3ID8gJycgOiAnaGlkZScpLAogICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7CiAgICAgICAgICAgICAgICBfX2h0bWw6IHByZXZpZXdIdG1sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXItY29udHJvbHMnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlci1jb250cm9scy10aXAnLAogICAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2d1aWRlcy5naXRodWIuY29tL2ZlYXR1cmVzL21hc3RlcmluZy1tYXJrZG93bi8nLAogICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaycKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby10aXAnLAogICAgICAgICAgICAgIG5hbWU6ICd0aXAnLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdzdXBwb3J0LW1hcmtkb3duJykKICAgICAgICAgICAgfSkpLCB1c2VyICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9idXR0b24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBnZXRSZWY6IHRoaXMuZ2V0UmVmLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWJ0bi1wdWJsaWMnLAogICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUNvbW1lbnRDcmVhdGUsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ2NvbW1lbnQnKSwKICAgICAgICAgICAgICBpc0xvYWRpbmc6IGlzQ3JlYXRpbmcKICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9idXR0b24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1idG4tcHJldmlldycsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlQ29tbWVudFByZXZpZXcsCiAgICAgICAgICAgICAgdGV4dDogaXNQcmV2aWV3ID8gdGhpcy5pMThuLnQoJ2VkaXQnKSA6IHRoaXMuaTE4bi50KCdwcmV2aWV3JykgLy8gaXNMb2FkaW5nPXtpc1ByZXZpZXdpbmd9CgogICAgICAgICAgICB9KSwgIXVzZXIgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2J1dHRvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWJ0bi1sb2dpbicsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTG9naW4sCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ2xvZ2luLXdpdGgtZ2l0aHViJykKICAgICAgICAgICAgfSkpKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY29tbWVudHMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbW1lbnRzKCkgewogICAgICAgICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX3N0YXRlNCA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICB1c2VyID0gX3N0YXRlNC51c2VyLAogICAgICAgICAgICAgICAgY29tbWVudHMgPSBfc3RhdGU0LmNvbW1lbnRzLAogICAgICAgICAgICAgICAgaXNMb2FkT3ZlciA9IF9zdGF0ZTQuaXNMb2FkT3ZlciwKICAgICAgICAgICAgICAgIGlzTG9hZE1vcmUgPSBfc3RhdGU0LmlzTG9hZE1vcmUsCiAgICAgICAgICAgICAgICBwYWdlckRpcmVjdGlvbiA9IF9zdGF0ZTQucGFnZXJEaXJlY3Rpb247CiAgICAgICAgICAgIHZhciBfb3B0aW9uczYgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IF9vcHRpb25zNi5sYW5ndWFnZSwKICAgICAgICAgICAgICAgIGZsaXBNb3ZlT3B0aW9ucyA9IF9vcHRpb25zNi5mbGlwTW92ZU9wdGlvbnMsCiAgICAgICAgICAgICAgICBhZG1pbiA9IF9vcHRpb25zNi5hZG1pbjsKICAgICAgICAgICAgdmFyIHRvdGFsQ29tbWVudHMgPSBjb21tZW50cy5jb25jYXQoW10pOwoKICAgICAgICAgICAgaWYgKHBhZ2VyRGlyZWN0aW9uID09PSAnbGFzdCcgJiYgdGhpcy5hY2Nlc3NUb2tlbikgewogICAgICAgICAgICAgIHRvdGFsQ29tbWVudHMucmV2ZXJzZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50cycsCiAgICAgICAgICAgICAga2V5OiAnY29tbWVudHMnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9yZWFjdEZsaXBNb3ZlMlsiZGVmYXVsdCJdLCBmbGlwTW92ZU9wdGlvbnMsIHRvdGFsQ29tbWVudHMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9jb21tZW50MlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgICBjb21tZW50OiBjLAogICAgICAgICAgICAgICAga2V5OiBjLmlkLAogICAgICAgICAgICAgICAgdXNlcjogdXNlciwKICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZSwKICAgICAgICAgICAgICAgIGNvbW1lbnRlZFRleHQ6IF90aGlzMTIuaTE4bi50KCdjb21tZW50ZWQnKSwKICAgICAgICAgICAgICAgIGFkbWluOiBhZG1pbiwKICAgICAgICAgICAgICAgIHJlcGx5Q2FsbGJhY2s6IF90aGlzMTIucmVwbHkoYyksCiAgICAgICAgICAgICAgICBsaWtlQ2FsbGJhY2s6IGMucmVhY3Rpb25zICYmIGMucmVhY3Rpb25zLnZpZXdlckhhc1JlYWN0ZWQgPyBfdGhpczEyLnVuTGlrZS5iaW5kKF90aGlzMTIsIGMpIDogX3RoaXMxMi5saWtlLmJpbmQoX3RoaXMxMiwgYykKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkpLCAhdG90YWxDb21tZW50cy5sZW5ndGggJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3AnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudHMtbnVsbCcKICAgICAgICAgICAgfSwgdGhpcy5pMThuLnQoJ2ZpcnN0LWNvbW1lbnQtcGVyc29uJykpLCAhaXNMb2FkT3ZlciAmJiB0b3RhbENvbW1lbnRzLmxlbmd0aCA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudHMtY29udHJvbHMnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9idXR0b24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1idG4tbG9hZG1vcmUnLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ29tbWVudExvYWQsCiAgICAgICAgICAgICAgaXNMb2FkaW5nOiBpc0xvYWRNb3JlLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdsb2FkLW1vcmUnKQogICAgICAgICAgICB9KSkgOiBudWxsKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdtZXRhJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXRhKCkgewogICAgICAgICAgICB2YXIgX3N0YXRlNSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICB1c2VyID0gX3N0YXRlNS51c2VyLAogICAgICAgICAgICAgICAgaXNzdWUgPSBfc3RhdGU1Lmlzc3VlLAogICAgICAgICAgICAgICAgaXNQb3B1cFZpc2libGUgPSBfc3RhdGU1LmlzUG9wdXBWaXNpYmxlLAogICAgICAgICAgICAgICAgcGFnZXJEaXJlY3Rpb24gPSBfc3RhdGU1LnBhZ2VyRGlyZWN0aW9uLAogICAgICAgICAgICAgICAgbG9jYWxDb21tZW50cyA9IF9zdGF0ZTUubG9jYWxDb21tZW50czsKICAgICAgICAgICAgdmFyIGNudCA9IChpc3N1ZSAmJiBpc3N1ZS5jb21tZW50cykgKyBsb2NhbENvbW1lbnRzLmxlbmd0aDsKICAgICAgICAgICAgdmFyIGlzRGVzYyA9IHBhZ2VyRGlyZWN0aW9uID09PSAnbGFzdCc7CiAgICAgICAgICAgIHZhciB1cGRhdGVDb3VudENhbGxiYWNrID0gdGhpcy5vcHRpb25zLnVwZGF0ZUNvdW50Q2FsbGJhY2s7IC8vIHdpbmRvdy5HSVRBTEtfQ09NTUVOVFNfQ09VTlQgPSBjbnQKCiAgICAgICAgICAgIGlmICh1cGRhdGVDb3VudENhbGxiYWNrICYmIHt9LnRvU3RyaW5nLmNhbGwodXBkYXRlQ291bnRDYWxsYmFjaykgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdXBkYXRlQ291bnRDYWxsYmFjayhjbnQpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIG9jY3VycmVkIGV4ZWN1dGluZyB0aGUgdXBkYXRlQ291bnRDYWxsYmFjazonLCBlcnIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtbWV0YScsCiAgICAgICAgICAgICAga2V5OiAnbWV0YScKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY291bnRzJywKICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgICAgICAgICAgX19odG1sOiB0aGlzLmkxOG4udCgnY291bnRzJywgewogICAgICAgICAgICAgICAgICBjb3VudHM6ICc8YSBjbGFzcz0iZ3QtbGluayBndC1saW5rLWNvdW50cyIgaHJlZj0iJyArIChpc3N1ZSAmJiBpc3N1ZS5odG1sX3VybCkgKyAnIiB0YXJnZXQ9Il9ibGFuayI+JyArIGNudCArICc8L2E+JywKICAgICAgICAgICAgICAgICAgc21hcnRfY291bnQ6IGNudAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBpc1BvcHVwVmlzaWJsZSAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LXBvcHVwJwogICAgICAgICAgICB9LCB1c2VyID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2FjdGlvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWFjdGlvbi1zb3J0YXNjJyArICghaXNEZXNjID8gJyBpcy0tYWN0aXZlJyA6ICcnKSwKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVNvcnQoJ2ZpcnN0JyksCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ3NvcnQtYXNjJykKICAgICAgICAgICAgfSkgOiBudWxsLCB1c2VyID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2FjdGlvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWFjdGlvbi1zb3J0ZGVzYycgKyAoaXNEZXNjID8gJyBpcy0tYWN0aXZlJyA6ICcnKSwKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVNvcnQoJ2xhc3QnKSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnc29ydC1kZXNjJykKICAgICAgICAgICAgfSkgOiBudWxsLCB1c2VyID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2FjdGlvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWFjdGlvbi1sb2dvdXQnLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlTG9nb3V0LAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdsb2dvdXQnKQogICAgICAgICAgICB9KSA6IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWFjdGlvbiBndC1hY3Rpb24tbG9naW4nLAogICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUxvZ2luCiAgICAgICAgICAgIH0sIHRoaXMuaTE4bi50KCdsb2dpbi13aXRoLWdpdGh1YicpKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb3B5cmlnaHQnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWxpbmsgZ3QtbGluay1wcm9qZWN0JywKICAgICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL2dpdGFsay9naXRhbGsnLAogICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaycKICAgICAgICAgICAgfSwgJ0dpdGFsaycpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC12ZXJzaW9uJwogICAgICAgICAgICB9LCBfY29uc3QuR1RfVkVSU0lPTikpKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC11c2VyJwogICAgICAgICAgICB9LCB1c2VyID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6IGlzUG9wdXBWaXNpYmxlID8gJ2d0LXVzZXItaW5uZXIgaXMtLXBvcGluZycgOiAnZ3QtdXNlci1pbm5lcicsCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVQb3B1cAogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC11c2VyLW5hbWUnCiAgICAgICAgICAgIH0sIHVzZXIubG9naW4pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLWFycmRvd24nLAogICAgICAgICAgICAgIG5hbWU6ICdhcnJvd19kb3duJwogICAgICAgICAgICB9KSkgOiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogaXNQb3B1cFZpc2libGUgPyAnZ3QtdXNlci1pbm5lciBpcy0tcG9waW5nJyA6ICdndC11c2VyLWlubmVyJywKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVBvcHVwCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LXVzZXItbmFtZScKICAgICAgICAgICAgfSwgdGhpcy5pMThuLnQoJ2Fub255bW91cycpKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1hcnJkb3duJywKICAgICAgICAgICAgICBuYW1lOiAnYXJyb3dfZG93bicKICAgICAgICAgICAgfSkpKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncmVuZGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgIHZhciBfc3RhdGU2ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIGlzSW5pdGluZyA9IF9zdGF0ZTYuaXNJbml0aW5nLAogICAgICAgICAgICAgICAgaXNOb0luaXQgPSBfc3RhdGU2LmlzTm9Jbml0LAogICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yID0gX3N0YXRlNi5pc09jY3VyRXJyb3IsCiAgICAgICAgICAgICAgICBlcnJvck1zZyA9IF9zdGF0ZTYuZXJyb3JNc2csCiAgICAgICAgICAgICAgICBpc0lucHV0Rm9jdXNlZCA9IF9zdGF0ZTYuaXNJbnB1dEZvY3VzZWQ7CiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbnRhaW5lcicgKyAoaXNJbnB1dEZvY3VzZWQgPyAnIGd0LWlucHV0LWZvY3VzZWQnIDogJycpCiAgICAgICAgICAgIH0sIGlzSW5pdGluZyAmJiB0aGlzLmluaXRpbmcoKSwgIWlzSW5pdGluZyAmJiAoaXNOb0luaXQgPyBbXSA6IFt0aGlzLm1ldGEoKV0pLCBpc09jY3VyRXJyb3IgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1lcnJvcicKICAgICAgICAgICAgfSwgZXJyb3JNc2cpLCAhaXNJbml0aW5nICYmIChpc05vSW5pdCA/IFt0aGlzLm5vSW5pdCgpXSA6IFt0aGlzLmhlYWRlcigpLCB0aGlzLmNvbW1lbnRzKCldKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnYWNjZXNzVG9rZW4nLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY2Nlc3NUb2tlIHx8IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShfY29uc3QuR1RfQUNDRVNTX1RPS0VOKTsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh0b2tlbikgewogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oX2NvbnN0LkdUX0FDQ0VTU19UT0tFTiwgdG9rZW4pOwogICAgICAgICAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IHRva2VuOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2xvZ2luTGluaycsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgdmFyIGdpdGh1Yk9hdXRoVXJsID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemUnOwogICAgICAgICAgICB2YXIgY2xpZW50SUQgPSB0aGlzLm9wdGlvbnMuY2xpZW50SUQ7CiAgICAgICAgICAgIHZhciBxdWVyeSA9IHsKICAgICAgICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElELAogICAgICAgICAgICAgIHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLmhyZWYsCiAgICAgICAgICAgICAgc2NvcGU6ICdwdWJsaWNfcmVwbycKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIGdpdGh1Yk9hdXRoVXJsICsgJz8nICsgKDAsIF91dGlsLnF1ZXJ5U3RyaW5naWZ5KShxdWVyeSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaXNBZG1pbicsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgdmFyIGFkbWluID0gdGhpcy5vcHRpb25zLmFkbWluOwogICAgICAgICAgICB2YXIgdXNlciA9IHRoaXMuc3RhdGUudXNlcjsKICAgICAgICAgICAgcmV0dXJuIHVzZXIgJiYgfltdLmNvbmNhdChhZG1pbikubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgfSkuaW5kZXhPZih1c2VyLmxvZ2luLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgfQogICAgICAgIH1dKTsKICAgICAgICByZXR1cm4gR2l0YWxrQ29tcG9uZW50OwogICAgICB9KF9yZWFjdC5Db21wb25lbnQpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBHaXRhbGtDb21wb25lbnQ7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTAwKSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTAwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjcpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlByb21pc2U7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTAxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKICAgICAgdmFyIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTsgLy8gdHJ1ZSAgLT4gU3RyaW5nI2F0CiAgICAgIC8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdAoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFRPX1NUUklORykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAodGhhdCwgcG9zKSB7CiAgICAgICAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKTsKICAgICAgICAgIHZhciBpID0gdG9JbnRlZ2VyKHBvcyk7CiAgICAgICAgICB2YXIgbCA9IHMubGVuZ3RoOwogICAgICAgICAgdmFyIGEsIGI7CiAgICAgICAgICBpZiAoaSA8IDAgfHwgaSA+PSBsKSByZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7CiAgICAgICAgICBhID0gcy5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmYgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGEgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTAyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwoKICAgICAgdmFyIGRlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKCiAgICAgIHZhciBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwoKICAgICAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307IC8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShJdGVyYXRvclByb3RvdHlwZSwgX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KSB7CiAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7CiAgICAgICAgICBuZXh0OiBkZXNjcmlwdG9yKDEsIG5leHQpCiAgICAgICAgfSk7CiAgICAgICAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBkUCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CgogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGdldEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKSB7CiAgICAgICAgYW5PYmplY3QoTyk7CiAgICAgICAgdmFyIGtleXMgPSBnZXRLZXlzKFByb3BlcnRpZXMpOwogICAgICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIFA7CgogICAgICAgIHdoaWxlIChsZW5ndGggPiBpKSB7CiAgICAgICAgICBkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIE87CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTA0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgogICAgICAvLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwogICAgICB2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CgogICAgICB2YXIgdG9MZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKCiAgICAgIHZhciB0b0Fic29sdXRlSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChJU19JTkNMVURFUykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoJHRoaXMsIGVsLCBmcm9tSW5kZXgpIHsKICAgICAgICAgIHZhciBPID0gdG9JT2JqZWN0KCR0aGlzKTsKICAgICAgICAgIHZhciBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7CiAgICAgICAgICB2YXIgaW5kZXggPSB0b0Fic29sdXRlSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpOwogICAgICAgICAgdmFyIHZhbHVlOyAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCgogICAgICAgICAgaWYgKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKSB3aGlsZSAobGVuZ3RoID4gaW5kZXgpIHsKICAgICAgICAgICAgdmFsdWUgPSBPW2luZGV4KytdOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCgogICAgICAgICAgICBpZiAodmFsdWUgIT0gdmFsdWUpIHJldHVybiB0cnVlOyAvLyBBcnJheSNpbmRleE9mIGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90CiAgICAgICAgICB9IGVsc2UgZm9yICg7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7CiAgICAgICAgICAgIGlmIChJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKSB7CiAgICAgICAgICAgICAgaWYgKE9baW5kZXhdID09PSBlbCkgcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTA1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKICAgICAgdmFyIG1heCA9IE1hdGgubWF4OwogICAgICB2YXIgbWluID0gTWF0aC5taW47CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbmRleCwgbGVuZ3RoKSB7CiAgICAgICAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpOwogICAgICAgIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMDYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgYWRkVG9VbnNjb3BhYmxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKCiAgICAgIHZhciBzdGVwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpOwoKICAgICAgdmFyIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKICAgICAgdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOyAvLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCiAgICAgIC8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCiAgICAgIC8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKICAgICAgLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKShBcnJheSwgJ0FycmF5JywgZnVuY3Rpb24gKGl0ZXJhdGVkLCBraW5kKSB7CiAgICAgICAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldAoKICAgICAgICB0aGlzLl9pID0gMDsgLy8gbmV4dCBpbmRleAoKICAgICAgICB0aGlzLl9rID0ga2luZDsgLy8ga2luZAogICAgICAgIC8vIDIyLjEuNS4yLjEgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIE8gPSB0aGlzLl90OwogICAgICAgIHZhciBraW5kID0gdGhpcy5fazsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9pKys7CgogICAgICAgIGlmICghTyB8fCBpbmRleCA+PSBPLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5fdCA9IHVuZGVmaW5lZDsKICAgICAgICAgIHJldHVybiBzdGVwKDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGtpbmQgPT0gJ2tleXMnKSByZXR1cm4gc3RlcCgwLCBpbmRleCk7CiAgICAgICAgaWYgKGtpbmQgPT0gJ3ZhbHVlcycpIHJldHVybiBzdGVwKDAsIE9baW5kZXhdKTsKICAgICAgICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7CiAgICAgIH0sICd2YWx1ZXMnKTsgLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQoKICAgICAgSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsKICAgICAgYWRkVG9VbnNjb3BhYmxlcygna2V5cycpOwogICAgICBhZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTsKICAgICAgYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEwNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8qIGVtcHR5ICovCiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRvbmUsIHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgIGRvbmU6ICEhZG9uZQogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBMSUJSQVJZID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7CgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBjdHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKCiAgICAgIHZhciBjbGFzc29mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7CgogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIHZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCiAgICAgIHZhciBhbkluc3RhbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTApOwoKICAgICAgdmFyIGZvck9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTEpOwoKICAgICAgdmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOwoKICAgICAgdmFyIHRhc2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKS5zZXQ7CgogICAgICB2YXIgbWljcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpKCk7CgogICAgICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCiAgICAgIHZhciBwZXJmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7CgogICAgICB2YXIgdXNlckFnZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTQpOwoKICAgICAgdmFyIHByb21pc2VSZXNvbHZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7CgogICAgICB2YXIgUFJPTUlTRSA9ICdQcm9taXNlJzsKICAgICAgdmFyIFR5cGVFcnJvciA9IGdsb2JhbC5UeXBlRXJyb3I7CiAgICAgIHZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7CiAgICAgIHZhciB2ZXJzaW9ucyA9IHByb2Nlc3MgJiYgcHJvY2Vzcy52ZXJzaW9uczsKICAgICAgdmFyIHY4ID0gdmVyc2lvbnMgJiYgdmVyc2lvbnMudjggfHwgJyc7CiAgICAgIHZhciAkUHJvbWlzZSA9IGdsb2JhbFtQUk9NSVNFXTsKICAgICAgdmFyIGlzTm9kZSA9IGNsYXNzb2YocHJvY2VzcykgPT0gJ3Byb2Nlc3MnOwoKICAgICAgdmFyIGVtcHR5ID0gZnVuY3Rpb24gZW1wdHkoKSB7CiAgICAgICAgLyogZW1wdHkgKi8KICAgICAgfTsKCiAgICAgIHZhciBJbnRlcm5hbCwgbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5LCBPd25Qcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsKICAgICAgdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUuZjsKICAgICAgdmFyIFVTRV9OQVRJVkUgPSAhIWZ1bmN0aW9uICgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0CiAgICAgICAgICB2YXIgcHJvbWlzZSA9ICRQcm9taXNlLnJlc29sdmUoMSk7CgogICAgICAgICAgdmFyIEZha2VQcm9taXNlID0gKHByb21pc2UuY29uc3RydWN0b3IgPSB7fSlbX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpXSA9IGZ1bmN0aW9uIChleGVjKSB7CiAgICAgICAgICAgIGV4ZWMoZW1wdHksIGVtcHR5KTsKICAgICAgICAgIH07IC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QKCgogICAgICAgICAgcmV0dXJuIChpc05vZGUgfHwgdHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCA9PSAnZnVuY3Rpb24nKSAmJiBwcm9taXNlLnRoZW4oZW1wdHkpIGluc3RhbmNlb2YgRmFrZVByb21pc2UgLy8gdjggNi42IChOb2RlIDEwIGFuZCBDaHJvbWUgNjYpIGhhdmUgYSBidWcgd2l0aCByZXNvbHZpbmcgY3VzdG9tIHRoZW5hYmxlcwogICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9ODMwNTY1CiAgICAgICAgICAvLyB3ZSBjYW4ndCBkZXRlY3QgaXQgc3luY2hyb25vdXNseSwgc28ganVzdCBjaGVjayB2ZXJzaW9ucwogICAgICAgICAgJiYgdjguaW5kZXhPZignNi42JykgIT09IDAgJiYgdXNlckFnZW50LmluZGV4T2YoJ0Nocm9tZS82NicpID09PSAtMTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvKiBlbXB0eSAqLwogICAgICAgIH0KICAgICAgfSgpOyAvLyBoZWxwZXJzCgogICAgICB2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uIGlzVGhlbmFibGUoaXQpIHsKICAgICAgICB2YXIgdGhlbjsKICAgICAgICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7CiAgICAgIH07CgogICAgICB2YXIgbm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KHByb21pc2UsIGlzUmVqZWN0KSB7CiAgICAgICAgaWYgKHByb21pc2UuX24pIHJldHVybjsKICAgICAgICBwcm9taXNlLl9uID0gdHJ1ZTsKICAgICAgICB2YXIgY2hhaW4gPSBwcm9taXNlLl9jOwogICAgICAgIG1pY3JvdGFzayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92OwogICAgICAgICAgdmFyIG9rID0gcHJvbWlzZS5fcyA9PSAxOwogICAgICAgICAgdmFyIGkgPSAwOwoKICAgICAgICAgIHZhciBydW4gPSBmdW5jdGlvbiBydW4ocmVhY3Rpb24pIHsKICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBvayA/IHJlYWN0aW9uLm9rIDogcmVhY3Rpb24uZmFpbDsKICAgICAgICAgICAgdmFyIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlOwogICAgICAgICAgICB2YXIgcmVqZWN0ID0gcmVhY3Rpb24ucmVqZWN0OwogICAgICAgICAgICB2YXIgZG9tYWluID0gcmVhY3Rpb24uZG9tYWluOwogICAgICAgICAgICB2YXIgcmVzdWx0LCB0aGVuLCBleGl0ZWQ7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7CiAgICAgICAgICAgICAgICBpZiAoIW9rKSB7CiAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlLl9oID09IDIpIG9uSGFuZGxlVW5oYW5kbGVkKHByb21pc2UpOwogICAgICAgICAgICAgICAgICBwcm9taXNlLl9oID0gMTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlciA9PT0gdHJ1ZSkgcmVzdWx0ID0gdmFsdWU7ZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChkb21haW4pIGRvbWFpbi5lbnRlcigpOwogICAgICAgICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTsgLy8gbWF5IHRocm93CgogICAgICAgICAgICAgICAgICBpZiAoZG9tYWluKSB7CiAgICAgICAgICAgICAgICAgICAgZG9tYWluLmV4aXQoKTsKICAgICAgICAgICAgICAgICAgICBleGl0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSkgewogICAgICAgICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKSB7CiAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgICAgICAgIH0gZWxzZSByZWplY3QodmFsdWUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgaWYgKGRvbWFpbiAmJiAhZXhpdGVkKSBkb21haW4uZXhpdCgpOwogICAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoID4gaSkgewogICAgICAgICAgICBydW4oY2hhaW5baSsrXSk7CiAgICAgICAgICB9IC8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoCgoKICAgICAgICAgIHByb21pc2UuX2MgPSBbXTsKICAgICAgICAgIHByb21pc2UuX24gPSBmYWxzZTsKICAgICAgICAgIGlmIChpc1JlamVjdCAmJiAhcHJvbWlzZS5faCkgb25VbmhhbmRsZWQocHJvbWlzZSk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgb25VbmhhbmRsZWQgPSBmdW5jdGlvbiBvblVuaGFuZGxlZChwcm9taXNlKSB7CiAgICAgICAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdjsKICAgICAgICAgIHZhciB1bmhhbmRsZWQgPSBpc1VuaGFuZGxlZChwcm9taXNlKTsKICAgICAgICAgIHZhciByZXN1bHQsIGhhbmRsZXIsIGNvbnNvbGU7CgogICAgICAgICAgaWYgKHVuaGFuZGxlZCkgewogICAgICAgICAgICByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAoaXNOb2RlKSB7CiAgICAgICAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pIHsKICAgICAgICAgICAgICAgIGhhbmRsZXIoewogICAgICAgICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLAogICAgICAgICAgICAgICAgICByZWFzb246IHZhbHVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKChjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGUpICYmIGNvbnNvbGUuZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbicsIHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOyAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZAoKICAgICAgICAgICAgcHJvbWlzZS5faCA9IGlzTm9kZSB8fCBpc1VuaGFuZGxlZChwcm9taXNlKSA/IDIgOiAxOwogICAgICAgICAgfQoKICAgICAgICAgIHByb21pc2UuX2EgPSB1bmRlZmluZWQ7CiAgICAgICAgICBpZiAodW5oYW5kbGVkICYmIHJlc3VsdC5lKSB0aHJvdyByZXN1bHQudjsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uIGlzVW5oYW5kbGVkKHByb21pc2UpIHsKICAgICAgICByZXR1cm4gcHJvbWlzZS5faCAhPT0gMSAmJiAocHJvbWlzZS5fYSB8fCBwcm9taXNlLl9jKS5sZW5ndGggPT09IDA7CiAgICAgIH07CgogICAgICB2YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbiBvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKSB7CiAgICAgICAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGhhbmRsZXI7CgogICAgICAgICAgaWYgKGlzTm9kZSkgewogICAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlciA9IGdsb2JhbC5vbnJlamVjdGlvbmhhbmRsZWQpIHsKICAgICAgICAgICAgaGFuZGxlcih7CiAgICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSwKICAgICAgICAgICAgICByZWFzb246IHByb21pc2UuX3YKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgJHJlamVjdCA9IGZ1bmN0aW9uICRyZWplY3QodmFsdWUpIHsKICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7CiAgICAgICAgaWYgKHByb21pc2UuX2QpIHJldHVybjsKICAgICAgICBwcm9taXNlLl9kID0gdHJ1ZTsKICAgICAgICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKCiAgICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlOwogICAgICAgIHByb21pc2UuX3MgPSAyOwogICAgICAgIGlmICghcHJvbWlzZS5fYSkgcHJvbWlzZS5fYSA9IHByb21pc2UuX2Muc2xpY2UoKTsKICAgICAgICBub3RpZnkocHJvbWlzZSwgdHJ1ZSk7CiAgICAgIH07CgogICAgICB2YXIgJHJlc29sdmUgPSBmdW5jdGlvbiAkcmVzb2x2ZSh2YWx1ZSkgewogICAgICAgIHZhciBwcm9taXNlID0gdGhpczsKICAgICAgICB2YXIgdGhlbjsKICAgICAgICBpZiAocHJvbWlzZS5fZCkgcmV0dXJuOwogICAgICAgIHByb21pc2UuX2QgPSB0cnVlOwogICAgICAgIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAoKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7CgogICAgICAgICAgaWYgKHRoZW4gPSBpc1RoZW5hYmxlKHZhbHVlKSkgewogICAgICAgICAgICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gewogICAgICAgICAgICAgICAgX3c6IHByb21pc2UsCiAgICAgICAgICAgICAgICBfZDogZmFsc2UKICAgICAgICAgICAgICB9OyAvLyB3cmFwCgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGN0eCgkcmVzb2x2ZSwgd3JhcHBlciwgMSksIGN0eCgkcmVqZWN0LCB3cmFwcGVyLCAxKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgJHJlamVjdC5jYWxsKHdyYXBwZXIsIGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9taXNlLl92ID0gdmFsdWU7CiAgICAgICAgICAgIHByb21pc2UuX3MgPSAxOwogICAgICAgICAgICBub3RpZnkocHJvbWlzZSwgZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICRyZWplY3QuY2FsbCh7CiAgICAgICAgICAgIF93OiBwcm9taXNlLAogICAgICAgICAgICBfZDogZmFsc2UKICAgICAgICAgIH0sIGUpOyAvLyB3cmFwCiAgICAgICAgfQogICAgICB9OyAvLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbAoKCiAgICAgIGlmICghVVNFX05BVElWRSkgewogICAgICAgIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpCiAgICAgICAgJFByb21pc2UgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7CiAgICAgICAgICBhbkluc3RhbmNlKHRoaXMsICRQcm9taXNlLCBQUk9NSVNFLCAnX2gnKTsKICAgICAgICAgIGFGdW5jdGlvbihleGVjdXRvcik7CiAgICAgICAgICBJbnRlcm5hbC5jYWxsKHRoaXMpOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGV4ZWN1dG9yKGN0eCgkcmVzb2x2ZSwgdGhpcywgMSksIGN0eCgkcmVqZWN0LCB0aGlzLCAxKSk7CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgJHJlamVjdC5jYWxsKHRoaXMsIGVycik7CiAgICAgICAgICB9CiAgICAgICAgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCgoKICAgICAgICBJbnRlcm5hbCA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHsKICAgICAgICAgIHRoaXMuX2MgPSBbXTsgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zCgogICAgICAgICAgdGhpcy5fYSA9IHVuZGVmaW5lZDsgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnMKCiAgICAgICAgICB0aGlzLl9zID0gMDsgLy8gPC0gc3RhdGUKCiAgICAgICAgICB0aGlzLl9kID0gZmFsc2U7IC8vIDwtIGRvbmUKCiAgICAgICAgICB0aGlzLl92ID0gdW5kZWZpbmVkOyAvLyA8LSB2YWx1ZQoKICAgICAgICAgIHRoaXMuX2ggPSAwOyAvLyA8LSByZWplY3Rpb24gc3RhdGUsIDAgLSBkZWZhdWx0LCAxIC0gaGFuZGxlZCwgMiAtIHVuaGFuZGxlZAoKICAgICAgICAgIHRoaXMuX24gPSBmYWxzZTsgLy8gPC0gbm90aWZ5CiAgICAgICAgfTsKCiAgICAgICAgSW50ZXJuYWwucHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpKCRQcm9taXNlLnByb3RvdHlwZSwgewogICAgICAgICAgLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkKICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHsKICAgICAgICAgICAgdmFyIHJlYWN0aW9uID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsICRQcm9taXNlKSk7CiAgICAgICAgICAgIHJlYWN0aW9uLm9rID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7CiAgICAgICAgICAgIHJlYWN0aW9uLmZhaWwgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7CiAgICAgICAgICAgIHJlYWN0aW9uLmRvbWFpbiA9IGlzTm9kZSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkOwoKICAgICAgICAgICAgdGhpcy5fYy5wdXNoKHJlYWN0aW9uKTsKCiAgICAgICAgICAgIGlmICh0aGlzLl9hKSB0aGlzLl9hLnB1c2gocmVhY3Rpb24pOwogICAgICAgICAgICBpZiAodGhpcy5fcykgbm90aWZ5KHRoaXMsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7CiAgICAgICAgICB9LAogICAgICAgICAgLy8gMjUuNC41LjEgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2gob25SZWplY3RlZCkKICAgICAgICAgICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGVkKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBvblJlamVjdGVkKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgT3duUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbiBPd25Qcm9taXNlQ2FwYWJpbGl0eSgpIHsKICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IEludGVybmFsKCk7CiAgICAgICAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlOwogICAgICAgICAgdGhpcy5yZXNvbHZlID0gY3R4KCRyZXNvbHZlLCBwcm9taXNlLCAxKTsKICAgICAgICAgIHRoaXMucmVqZWN0ID0gY3R4KCRyZWplY3QsIHByb21pc2UsIDEpOwogICAgICAgIH07CgogICAgICAgIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmYgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpIHsKICAgICAgICAgIHJldHVybiBDID09PSAkUHJvbWlzZSB8fCBDID09PSBXcmFwcGVyID8gbmV3IE93blByb21pc2VDYXBhYmlsaXR5KEMpIDogbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgICRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHsKICAgICAgICBQcm9taXNlOiAkUHJvbWlzZQogICAgICB9KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjYpKCRQcm9taXNlLCBQUk9NSVNFKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE2KShQUk9NSVNFKTsKCiAgICAgIFdyYXBwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApW1BST01JU0VdOyAvLyBzdGF0aWNzCgogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCBQUk9NSVNFLCB7CiAgICAgICAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocikKICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKSB7CiAgICAgICAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpOwogICAgICAgICAgdmFyICQkcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAgICAgICAkJHJlamVjdChyKTsKICAgICAgICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTElCUkFSWSB8fCAhVVNFX05BVElWRSksIFBST01JU0UsIHsKICAgICAgICAvLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeCkKICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpIHsKICAgICAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZShMSUJSQVJZICYmIHRoaXMgPT09IFdyYXBwZXIgPyAkUHJvbWlzZSA6IHRoaXMsIHgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIShVU0VfTkFUSVZFICYmIF9fd2VicGFja19yZXF1aXJlX18oNjMpKGZ1bmN0aW9uIChpdGVyKSB7CiAgICAgICAgJFByb21pc2UuYWxsKGl0ZXIpWydjYXRjaCddKGVtcHR5KTsKICAgICAgfSkpLCBQUk9NSVNFLCB7CiAgICAgICAgLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpCiAgICAgICAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpIHsKICAgICAgICAgIHZhciBDID0gdGhpczsKICAgICAgICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQyk7CiAgICAgICAgICB2YXIgcmVzb2x2ZSA9IGNhcGFiaWxpdHkucmVzb2x2ZTsKICAgICAgICAgIHZhciByZWplY3QgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgICAgICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtdOwogICAgICAgICAgICB2YXIgaW5kZXggPSAwOwogICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gMTsKICAgICAgICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbiAocHJvbWlzZSkgewogICAgICAgICAgICAgIHZhciAkaW5kZXggPSBpbmRleCsrOwogICAgICAgICAgICAgIHZhciBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTsKICAgICAgICAgICAgICByZW1haW5pbmcrKzsKICAgICAgICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmIChhbHJlYWR5Q2FsbGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICBhbHJlYWR5Q2FsbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhbHVlc1skaW5kZXhdID0gdmFsdWU7CiAgICAgICAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJlc3VsdC5lKSByZWplY3QocmVzdWx0LnYpOwogICAgICAgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICAgICAgICB9LAogICAgICAgIC8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkKICAgICAgICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKSB7CiAgICAgICAgICB2YXIgQyA9IHRoaXM7CiAgICAgICAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpOwogICAgICAgICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgICAgICAgdmFyIHJlc3VsdCA9IHBlcmZvcm0oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uIChwcm9taXNlKSB7CiAgICAgICAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJlc3VsdC5lKSByZWplY3QocmVzdWx0LnYpOwogICAgICAgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDExMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSwgZm9yYmlkZGVuRmllbGQpIHsKICAgICAgICBpZiAoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCBmb3JiaWRkZW5GaWVsZCAhPT0gdW5kZWZpbmVkICYmIGZvcmJpZGRlbkZpZWxkIGluIGl0KSB7CiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IobmFtZSArICc6IGluY29ycmVjdCBpbnZvY2F0aW9uIScpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGl0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgY3R4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgogICAgICB2YXIgY2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpOwoKICAgICAgdmFyIGlzQXJyYXlJdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7CgogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIHRvTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7CgogICAgICB2YXIgZ2V0SXRlckZuID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7CgogICAgICB2YXIgQlJFQUsgPSB7fTsKICAgICAgdmFyIFJFVFVSTiA9IHt9OwoKICAgICAgdmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKSB7CiAgICAgICAgdmFyIGl0ZXJGbiA9IElURVJBVE9SID8gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGl0ZXJhYmxlOwogICAgICAgIH0gOiBnZXRJdGVyRm4oaXRlcmFibGUpOwogICAgICAgIHZhciBmID0gY3R4KGZuLCB0aGF0LCBlbnRyaWVzID8gMiA6IDEpOwogICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgdmFyIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3IsIHJlc3VsdDsKICAgICAgICBpZiAodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKSB0aHJvdyBUeXBlRXJyb3IoaXRlcmFibGUgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTsgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yCgogICAgICAgIGlmIChpc0FycmF5SXRlcihpdGVyRm4pKSBmb3IgKGxlbmd0aCA9IHRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7CiAgICAgICAgICByZXN1bHQgPSBlbnRyaWVzID8gZihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSkgOiBmKGl0ZXJhYmxlW2luZGV4XSk7CiAgICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTikgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGVsc2UgZm9yIChpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOykgewogICAgICAgICAgcmVzdWx0ID0gY2FsbChpdGVyYXRvciwgZiwgc3RlcC52YWx1ZSwgZW50cmllcyk7CiAgICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTikgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgIH07CgogICAgICBleHBvcnRzLkJSRUFLID0gQlJFQUs7CiAgICAgIGV4cG9ydHMuUkVUVVJOID0gUkVUVVJOOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDExMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbiwgYXJncywgdGhhdCkgewogICAgICAgIHZhciB1biA9IHRoYXQgPT09IHVuZGVmaW5lZDsKCiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gdW4gPyBmbigpIDogZm4uY2FsbCh0aGF0KTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiB1biA/IGZuKGFyZ3NbMF0pIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0pIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmdzKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTEzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgbWFjcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkuc2V0OwoKICAgICAgdmFyIE9ic2VydmVyID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgICAgIHZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7CiAgICAgIHZhciBQcm9taXNlID0gZ2xvYmFsLlByb21pc2U7CiAgICAgIHZhciBpc05vZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaGVhZCwgbGFzdCwgbm90aWZ5OwoKICAgICAgICB2YXIgZmx1c2ggPSBmdW5jdGlvbiBmbHVzaCgpIHsKICAgICAgICAgIHZhciBwYXJlbnQsIGZuOwogICAgICAgICAgaWYgKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKSBwYXJlbnQuZXhpdCgpOwoKICAgICAgICAgIHdoaWxlIChoZWFkKSB7CiAgICAgICAgICAgIGZuID0gaGVhZC5mbjsKICAgICAgICAgICAgaGVhZCA9IGhlYWQubmV4dDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm4oKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGlmIChoZWFkKSBub3RpZnkoKTtlbHNlIGxhc3QgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGxhc3QgPSB1bmRlZmluZWQ7CiAgICAgICAgICBpZiAocGFyZW50KSBwYXJlbnQuZW50ZXIoKTsKICAgICAgICB9OyAvLyBOb2RlLmpzCgoKICAgICAgICBpZiAoaXNOb2RlKSB7CiAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkoKSB7CiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwogICAgICAgICAgfTsgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyLCBleGNlcHQgaU9TIFNhZmFyaSAtIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8zMzkKCiAgICAgICAgfSBlbHNlIGlmIChPYnNlcnZlciAmJiAhKGdsb2JhbC5uYXZpZ2F0b3IgJiYgZ2xvYmFsLm5hdmlnYXRvci5zdGFuZGFsb25lKSkgewogICAgICAgICAgdmFyIHRvZ2dsZSA9IHRydWU7CiAgICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTsKICAgICAgICAgIG5ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7CiAgICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUKICAgICAgICAgIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwoKICAgICAgICAgIG5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSgpIHsKICAgICAgICAgICAgbm9kZS5kYXRhID0gdG9nZ2xlID0gIXRvZ2dsZTsKICAgICAgICAgIH07IC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlCgogICAgICAgIH0gZWxzZSBpZiAoUHJvbWlzZSAmJiBQcm9taXNlLnJlc29sdmUpIHsKICAgICAgICAgIC8vIFByb21pc2UucmVzb2x2ZSB3aXRob3V0IGFuIGFyZ3VtZW50IHRocm93cyBhbiBlcnJvciBpbiBMRyBXZWJPUyAyCiAgICAgICAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpOwoKICAgICAgICAgIG5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSgpIHsKICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTsKICAgICAgICAgIH07IC8vIGZvciBvdGhlciBlbnZpcm9ubWVudHMgLSBtYWNyb3Rhc2sgYmFzZWQgb246CiAgICAgICAgICAvLyAtIHNldEltbWVkaWF0ZQogICAgICAgICAgLy8gLSBNZXNzYWdlQ2hhbm5lbAogICAgICAgICAgLy8gLSB3aW5kb3cucG9zdE1lc3NhZwogICAgICAgICAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2UKICAgICAgICAgIC8vIC0gc2V0VGltZW91dAoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KCkgewogICAgICAgICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpCiAgICAgICAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpOwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHsKICAgICAgICAgIHZhciB0YXNrID0gewogICAgICAgICAgICBmbjogZm4sCiAgICAgICAgICAgIG5leHQ6IHVuZGVmaW5lZAogICAgICAgICAgfTsKICAgICAgICAgIGlmIChsYXN0KSBsYXN0Lm5leHQgPSB0YXNrOwoKICAgICAgICAgIGlmICghaGVhZCkgewogICAgICAgICAgICBoZWFkID0gdGFzazsKICAgICAgICAgICAgbm90aWZ5KCk7CiAgICAgICAgICB9CgogICAgICAgICAgbGFzdCA9IHRhc2s7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTE0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgbmF2aWdhdG9yID0gZ2xvYmFsLm5hdmlnYXRvcjsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnJzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgaGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzcmMsIHNhZmUpIHsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7CiAgICAgICAgICBpZiAoc2FmZSAmJiB0YXJnZXRba2V5XSkgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTtlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0YXJnZXQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDExNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKICAgICAgdmFyIGRQID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCiAgICAgIHZhciBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7CgogICAgICB2YXIgU1BFQ0lFUyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEtFWSkgewogICAgICAgIHZhciBDID0gdHlwZW9mIGNvcmVbS0VZXSA9PSAnZnVuY3Rpb24nID8gY29yZVtLRVldIDogZ2xvYmFsW0tFWV07CiAgICAgICAgaWYgKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pIGRQLmYoQywgU1BFQ0lFUywgewogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtZmluYWxseQoKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7CgogICAgICB2YXIgcHJvbWlzZVJlc29sdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTsKCiAgICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5SLCAnUHJvbWlzZScsIHsKICAgICAgICAnZmluYWxseSc6IGZ1bmN0aW9uIF9maW5hbGx5KG9uRmluYWxseSkgewogICAgICAgICAgdmFyIEMgPSBzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgY29yZS5Qcm9taXNlIHx8IGdsb2JhbC5Qcm9taXNlKTsKICAgICAgICAgIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIG9uRmluYWxseSA9PSAnZnVuY3Rpb24nOwogICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihpc0Z1bmN0aW9uID8gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKEMsIG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4geDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IDogb25GaW5hbGx5LCBpc0Z1bmN0aW9uID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKEMsIG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gOiBvbkZpbmFsbHkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTE4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLXRyeQoKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7CgogICAgICB2YXIgcGVyZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpOwoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMsICdQcm9taXNlJywgewogICAgICAgICd0cnknOiBmdW5jdGlvbiBfdHJ5KGNhbGxiYWNrZm4pIHsKICAgICAgICAgIHZhciBwcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5LmYodGhpcyk7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gcGVyZm9ybShjYWxsYmFja2ZuKTsKICAgICAgICAgIChyZXN1bHQuZSA/IHByb21pc2VDYXBhYmlsaXR5LnJlamVjdCA6IHByb21pc2VDYXBhYmlsaXR5LnJlc29sdmUpKHJlc3VsdC52KTsKICAgICAgICAgIHJldHVybiBwcm9taXNlQ2FwYWJpbGl0eS5wcm9taXNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTE5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuYXNzaWduOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GLCAnT2JqZWN0JywgewogICAgICAgIGFzc2lnbjogX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpCiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQoKICAgICAgdmFyIERFU0NSSVBUT1JTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCiAgICAgIHZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CgogICAgICB2YXIgZ09QUyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwoKICAgICAgdmFyIHBJRSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKICAgICAgdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgogICAgICB2YXIgSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpOwoKICAgICAgdmFyICRhc3NpZ24gPSBPYmplY3QuYXNzaWduOyAvLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gISRhc3NpZ24gfHwgX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBBID0ge307CiAgICAgICAgdmFyIEIgPSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCgogICAgICAgIHZhciBTID0gU3ltYm9sKCk7CiAgICAgICAgdmFyIEsgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnOwogICAgICAgIEFbU10gPSA3OwogICAgICAgIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKGspIHsKICAgICAgICAgIEJba10gPSBrOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiAkYXNzaWduKHt9LCBBKVtTXSAhPSA3IHx8IE9iamVjdC5rZXlzKCRhc3NpZ24oe30sIEIpKS5qb2luKCcnKSAhPSBLOwogICAgICB9KSA/IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZSkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICB2YXIgVCA9IHRvT2JqZWN0KHRhcmdldCk7CiAgICAgICAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgIHZhciBpbmRleCA9IDE7CiAgICAgICAgdmFyIGdldFN5bWJvbHMgPSBnT1BTLmY7CiAgICAgICAgdmFyIGlzRW51bSA9IHBJRS5mOwoKICAgICAgICB3aGlsZSAoYUxlbiA+IGluZGV4KSB7CiAgICAgICAgICB2YXIgUyA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKTsKICAgICAgICAgIHZhciBrZXlzID0gZ2V0U3ltYm9scyA/IGdldEtleXMoUykuY29uY2F0KGdldFN5bWJvbHMoUykpIDogZ2V0S2V5cyhTKTsKICAgICAgICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDsKICAgICAgICAgIHZhciBqID0gMDsKICAgICAgICAgIHZhciBrZXk7CgogICAgICAgICAgd2hpbGUgKGxlbmd0aCA+IGopIHsKICAgICAgICAgICAga2V5ID0ga2V5c1tqKytdOwogICAgICAgICAgICBpZiAoIURFU0NSSVBUT1JTIHx8IGlzRW51bS5jYWxsKFMsIGtleSkpIFRba2V5XSA9IFNba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBUOwogICAgICB9IDogJGFzc2lnbjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQogICAgICB2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCiAgICAgIHZhciAkZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNjUpKCdnZXRQcm90b3R5cGVPZicsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YoaXQpIHsKICAgICAgICAgIHJldHVybiAkZ2V0UHJvdG90eXBlT2YodG9PYmplY3QoaXQpKTsKICAgICAgICB9OwogICAgICB9KTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTI1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNiksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjApOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpLmYoJ2l0ZXJhdG9yJyk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTI3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOCksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTI5KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMzUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlN5bWJvbDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW0KCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIERFU0NSSVBUT1JTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciByZWRlZmluZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpOwoKICAgICAgdmFyIE1FVEEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCkuS0VZOwoKICAgICAgdmFyICRmYWlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpOwoKICAgICAgdmFyIHNoYXJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwoKICAgICAgdmFyIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7CgogICAgICB2YXIgdWlkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7CgogICAgICB2YXIgd2tzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKCiAgICAgIHZhciB3a3NFeHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTsKCiAgICAgIHZhciB3a3NEZWZpbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKCiAgICAgIHZhciBlbnVtS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMxKTsKCiAgICAgIHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzIpOwoKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgogICAgICB2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CgogICAgICB2YXIgdG9QcmltaXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTsKCiAgICAgIHZhciBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7CgogICAgICB2YXIgX2NyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwoKICAgICAgdmFyIGdPUE5FeHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMyk7CgogICAgICB2YXIgJEdPUEQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTsKCiAgICAgIHZhciAkR09QUyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwoKICAgICAgdmFyICREUCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CgogICAgICB2YXIgJGtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTsKCiAgICAgIHZhciBnT1BEID0gJEdPUEQuZjsKICAgICAgdmFyIGRQID0gJERQLmY7CiAgICAgIHZhciBnT1BOID0gZ09QTkV4dC5mOwogICAgICB2YXIgJFN5bWJvbCA9IGdsb2JhbC5TeW1ib2w7CiAgICAgIHZhciAkSlNPTiA9IGdsb2JhbC5KU09OOwoKICAgICAgdmFyIF9zdHJpbmdpZnkgPSAkSlNPTiAmJiAkSlNPTi5zdHJpbmdpZnk7CgogICAgICB2YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7CiAgICAgIHZhciBISURERU4gPSB3a3MoJ19oaWRkZW4nKTsKICAgICAgdmFyIFRPX1BSSU1JVElWRSA9IHdrcygndG9QcmltaXRpdmUnKTsKICAgICAgdmFyIGlzRW51bSA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlOwogICAgICB2YXIgU3ltYm9sUmVnaXN0cnkgPSBzaGFyZWQoJ3N5bWJvbC1yZWdpc3RyeScpOwogICAgICB2YXIgQWxsU3ltYm9scyA9IHNoYXJlZCgnc3ltYm9scycpOwogICAgICB2YXIgT1BTeW1ib2xzID0gc2hhcmVkKCdvcC1zeW1ib2xzJyk7CiAgICAgIHZhciBPYmplY3RQcm90byA9IE9iamVjdFtQUk9UT1RZUEVdOwogICAgICB2YXIgVVNFX05BVElWRSA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbicgJiYgISEkR09QUy5mOwogICAgICB2YXIgUU9iamVjdCA9IGdsb2JhbC5RT2JqZWN0OyAvLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzMKCiAgICAgIHZhciBzZXR0ZXIgPSAhUU9iamVjdCB8fCAhUU9iamVjdFtQUk9UT1RZUEVdIHx8ICFRT2JqZWN0W1BST1RPVFlQRV0uZmluZENoaWxkOyAvLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODcKCiAgICAgIHZhciBzZXRTeW1ib2xEZXNjID0gREVTQ1JJUFRPUlMgJiYgJGZhaWxzKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIGRQKHRoaXMsICdhJywgewogICAgICAgICAgICAgIHZhbHVlOiA3CiAgICAgICAgICAgIH0pLmE7CiAgICAgICAgICB9CiAgICAgICAgfSkpLmEgIT0gNzsKICAgICAgfSkgPyBmdW5jdGlvbiAoaXQsIGtleSwgRCkgewogICAgICAgIHZhciBwcm90b0Rlc2MgPSBnT1BEKE9iamVjdFByb3RvLCBrZXkpOwogICAgICAgIGlmIChwcm90b0Rlc2MpIGRlbGV0ZSBPYmplY3RQcm90b1trZXldOwogICAgICAgIGRQKGl0LCBrZXksIEQpOwogICAgICAgIGlmIChwcm90b0Rlc2MgJiYgaXQgIT09IE9iamVjdFByb3RvKSBkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpOwogICAgICB9IDogZFA7CgogICAgICB2YXIgd3JhcCA9IGZ1bmN0aW9uIHdyYXAodGFnKSB7CiAgICAgICAgdmFyIHN5bSA9IEFsbFN5bWJvbHNbdGFnXSA9IF9jcmVhdGUoJFN5bWJvbFtQUk9UT1RZUEVdKTsKCiAgICAgICAgc3ltLl9rID0gdGFnOwogICAgICAgIHJldHVybiBzeW07CiAgICAgIH07CgogICAgICB2YXIgaXNTeW1ib2wgPSBVU0VfTkFUSVZFICYmIF90eXBlb2Y0KCRTeW1ib2wuaXRlcmF0b3IpID09ICdzeW1ib2wnID8gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIF90eXBlb2Y0KGl0KSA9PSAnc3ltYm9sJzsKICAgICAgfSA6IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7CiAgICAgIH07CgogICAgICB2YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCkgewogICAgICAgIGlmIChpdCA9PT0gT2JqZWN0UHJvdG8pICRkZWZpbmVQcm9wZXJ0eShPUFN5bWJvbHMsIGtleSwgRCk7CiAgICAgICAgYW5PYmplY3QoaXQpOwogICAgICAgIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgICAgICAgYW5PYmplY3QoRCk7CgogICAgICAgIGlmIChoYXMoQWxsU3ltYm9scywga2V5KSkgewogICAgICAgICAgaWYgKCFELmVudW1lcmFibGUpIHsKICAgICAgICAgICAgaWYgKCFoYXMoaXQsIEhJRERFTikpIGRQKGl0LCBISURERU4sIGNyZWF0ZURlc2MoMSwge30pKTsKICAgICAgICAgICAgaXRbSElEREVOXVtrZXldID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSBpdFtISURERU5dW2tleV0gPSBmYWxzZTsKICAgICAgICAgICAgRCA9IF9jcmVhdGUoRCwgewogICAgICAgICAgICAgIGVudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBzZXRTeW1ib2xEZXNjKGl0LCBrZXksIEQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRQKGl0LCBrZXksIEQpOwogICAgICB9OwoKICAgICAgdmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCkgewogICAgICAgIGFuT2JqZWN0KGl0KTsKICAgICAgICB2YXIga2V5cyA9IGVudW1LZXlzKFAgPSB0b0lPYmplY3QoUCkpOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIgbCA9IGtleXMubGVuZ3RoOwogICAgICAgIHZhciBrZXk7CgogICAgICAgIHdoaWxlIChsID4gaSkgewogICAgICAgICAgJGRlZmluZVByb3BlcnR5KGl0LCBrZXkgPSBrZXlzW2krK10sIFBba2V5XSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXQ7CiAgICAgIH07CgogICAgICB2YXIgJGNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpdCwgUCkgewogICAgICAgIHJldHVybiBQID09PSB1bmRlZmluZWQgPyBfY3JlYXRlKGl0KSA6ICRkZWZpbmVQcm9wZXJ0aWVzKF9jcmVhdGUoaXQpLCBQKTsKICAgICAgfTsKCiAgICAgIHZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpIHsKICAgICAgICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpOwogICAgICAgIGlmICh0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTsKICAgICAgfTsKCiAgICAgIHZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpIHsKICAgICAgICBpdCA9IHRvSU9iamVjdChpdCk7CiAgICAgICAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsKICAgICAgICBpZiAoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKSByZXR1cm47CiAgICAgICAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpOwogICAgICAgIGlmIChEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpIEQuZW51bWVyYWJsZSA9IHRydWU7CiAgICAgICAgcmV0dXJuIEQ7CiAgICAgIH07CgogICAgICB2YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KSB7CiAgICAgICAgdmFyIG5hbWVzID0gZ09QTih0b0lPYmplY3QoaXQpKTsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciBrZXk7CgogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPiBpKSB7CiAgICAgICAgICBpZiAoIWhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiBrZXkgIT0gSElEREVOICYmIGtleSAhPSBNRVRBKSByZXN1bHQucHVzaChrZXkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKCiAgICAgIHZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KSB7CiAgICAgICAgdmFyIElTX09QID0gaXQgPT09IE9iamVjdFByb3RvOwogICAgICAgIHZhciBuYW1lcyA9IGdPUE4oSVNfT1AgPyBPUFN5bWJvbHMgOiB0b0lPYmplY3QoaXQpKTsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciBrZXk7CgogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPiBpKSB7CiAgICAgICAgICBpZiAoaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIChJU19PUCA/IGhhcyhPYmplY3RQcm90bywga2V5KSA6IHRydWUpKSByZXN1bHQucHVzaChBbGxTeW1ib2xzW2tleV0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsgLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pCgoKICAgICAgaWYgKCFVU0VfTkFUSVZFKSB7CiAgICAgICAgJFN5bWJvbCA9IGZ1bmN0aW9uIF9TeW1ib2wyKCkgewogICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKSB0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTsKICAgICAgICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOwoKICAgICAgICAgIHZhciAkc2V0ID0gZnVuY3Rpb24gJHNldCh2YWx1ZSkgewogICAgICAgICAgICBpZiAodGhpcyA9PT0gT2JqZWN0UHJvdG8pICRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTsKICAgICAgICAgICAgaWYgKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpIHRoaXNbSElEREVOXVt0YWddID0gZmFsc2U7CiAgICAgICAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChERVNDUklQVE9SUyAmJiBzZXR0ZXIpIHNldFN5bWJvbERlc2MoT2JqZWN0UHJvdG8sIHRhZywgewogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIHNldDogJHNldAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gd3JhcCh0YWcpOwogICAgICAgIH07CgogICAgICAgIHJlZGVmaW5lKCRTeW1ib2xbUFJPVE9UWVBFXSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fazsKICAgICAgICB9KTsKICAgICAgICAkR09QRC5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICAgICAgICAkRFAuZiA9ICRkZWZpbmVQcm9wZXJ0eTsKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KS5mID0gZ09QTkV4dC5mID0gJGdldE93blByb3BlcnR5TmFtZXM7CiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyOCkuZiA9ICRwcm9wZXJ0eUlzRW51bWVyYWJsZTsKICAgICAgICAkR09QUy5mID0gJGdldE93blByb3BlcnR5U3ltYm9sczsKCiAgICAgICAgaWYgKERFU0NSSVBUT1JTICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKSkgewogICAgICAgICAgcmVkZWZpbmUoT2JqZWN0UHJvdG8sICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICRwcm9wZXJ0eUlzRW51bWVyYWJsZSwgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICB3a3NFeHQuZiA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgICRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHsKICAgICAgICBTeW1ib2w6ICRTeW1ib2wKICAgICAgfSk7CgogICAgICBmb3IgKHZhciBlczZTeW1ib2xzID0gLy8gMTkuNC4yLjIsIDE5LjQuMi4zLCAxOS40LjIuNCwgMTkuNC4yLjYsIDE5LjQuMi44LCAxOS40LjIuOSwgMTkuNC4yLjEwLCAxOS40LjIuMTEsIDE5LjQuMi4xMiwgMTkuNC4yLjEzLCAxOS40LjIuMTQKICAgICAgJ2hhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzJy5zcGxpdCgnLCcpLCBqID0gMDsgZXM2U3ltYm9scy5sZW5ndGggPiBqOykgewogICAgICAgIHdrcyhlczZTeW1ib2xzW2orK10pOwogICAgICB9CgogICAgICBmb3IgKHZhciB3ZWxsS25vd25TeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgayA9IDA7IHdlbGxLbm93blN5bWJvbHMubGVuZ3RoID4gazspIHsKICAgICAgICB3a3NEZWZpbmUod2VsbEtub3duU3ltYm9sc1trKytdKTsKICAgICAgfQoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ1N5bWJvbCcsIHsKICAgICAgICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSkKICAgICAgICAnZm9yJzogZnVuY3Rpb24gX2ZvcihrZXkpIHsKICAgICAgICAgIHJldHVybiBoYXMoU3ltYm9sUmVnaXN0cnksIGtleSArPSAnJykgPyBTeW1ib2xSZWdpc3RyeVtrZXldIDogU3ltYm9sUmVnaXN0cnlba2V5XSA9ICRTeW1ib2woa2V5KTsKICAgICAgICB9LAogICAgICAgIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQogICAgICAgIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKHN5bSkgewogICAgICAgICAgaWYgKCFpc1N5bWJvbChzeW0pKSB0aHJvdyBUeXBlRXJyb3Ioc3ltICsgJyBpcyBub3QgYSBzeW1ib2whJyk7CgogICAgICAgICAgZm9yICh2YXIga2V5IGluIFN5bWJvbFJlZ2lzdHJ5KSB7CiAgICAgICAgICAgIGlmIChTeW1ib2xSZWdpc3RyeVtrZXldID09PSBzeW0pIHJldHVybiBrZXk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VTZXR0ZXI6IGZ1bmN0aW9uIHVzZVNldHRlcigpIHsKICAgICAgICAgIHNldHRlciA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICB1c2VTaW1wbGU6IGZ1bmN0aW9uIHVzZVNpbXBsZSgpIHsKICAgICAgICAgIHNldHRlciA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdPYmplY3QnLCB7CiAgICAgICAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQogICAgICAgIGNyZWF0ZTogJGNyZWF0ZSwKICAgICAgICAvLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKICAgICAgICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LAogICAgICAgIC8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCiAgICAgICAgZGVmaW5lUHJvcGVydGllczogJGRlZmluZVByb3BlcnRpZXMsCiAgICAgICAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQogICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldE93blByb3BlcnR5RGVzY3JpcHRvciwKICAgICAgICAvLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQogICAgICAgIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLAogICAgICAgIC8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTykKICAgICAgICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMKICAgICAgfSk7IC8vIENocm9tZSAzOCBhbmQgMzkgYE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHNgIGZhaWxzIG9uIHByaW1pdGl2ZXMKICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzQ0MwoKICAgICAgdmFyIEZBSUxTX09OX1BSSU1JVElWRVMgPSAkZmFpbHMoZnVuY3Rpb24gKCkgewogICAgICAgICRHT1BTLmYoMSk7CiAgICAgIH0pOwogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIEZBSUxTX09OX1BSSU1JVElWRVMsICdPYmplY3QnLCB7CiAgICAgICAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpIHsKICAgICAgICAgIHJldHVybiAkR09QUy5mKHRvT2JqZWN0KGl0KSk7CiAgICAgICAgfQogICAgICB9KTsgLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCgogICAgICAkSlNPTiAmJiAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghVVNFX05BVElWRSB8fCAkZmFpbHMoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBTID0gJFN5bWJvbCgpOyAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQogICAgICAgIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbAogICAgICAgIC8vIFY4IHRocm93cyBvbiBib3hlZCBzeW1ib2xzCgogICAgICAgIHJldHVybiBfc3RyaW5naWZ5KFtTXSkgIT0gJ1tudWxsXScgfHwgX3N0cmluZ2lmeSh7CiAgICAgICAgICBhOiBTCiAgICAgICAgfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9JzsKICAgICAgfSkpLCAnSlNPTicsIHsKICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCkgewogICAgICAgICAgdmFyIGFyZ3MgPSBbaXRdOwogICAgICAgICAgdmFyIGkgPSAxOwogICAgICAgICAgdmFyIHJlcGxhY2VyLCAkcmVwbGFjZXI7CgogICAgICAgICAgd2hpbGUgKGFyZ3VtZW50cy5sZW5ndGggPiBpKSB7CiAgICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CiAgICAgICAgICB9CgogICAgICAgICAgJHJlcGxhY2VyID0gcmVwbGFjZXIgPSBhcmdzWzFdOwogICAgICAgICAgaWYgKCFpc09iamVjdChyZXBsYWNlcikgJiYgaXQgPT09IHVuZGVmaW5lZCB8fCBpc1N5bWJvbChpdCkpIHJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAoKICAgICAgICAgIGlmICghaXNBcnJheShyZXBsYWNlcikpIHJlcGxhY2VyID0gZnVuY3Rpb24gcmVwbGFjZXIoa2V5LCB2YWx1ZSkgewogICAgICAgICAgICBpZiAodHlwZW9mICRyZXBsYWNlciA9PSAnZnVuY3Rpb24nKSB2YWx1ZSA9ICRyZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpOwogICAgICAgICAgICBpZiAoIWlzU3ltYm9sKHZhbHVlKSkgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfTsKICAgICAgICAgIGFyZ3NbMV0gPSByZXBsYWNlcjsKICAgICAgICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCgogICAgICAkU3ltYm9sW1BST1RPVFlQRV1bVE9fUFJJTUlUSVZFXSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpOyAvLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddCgogICAgICBzZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7IC8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10KCiAgICAgIHNldFRvU3RyaW5nVGFnKE1hdGgsICdNYXRoJywgdHJ1ZSk7IC8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddCgogICAgICBzZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMzAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgTUVUQSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpKCdtZXRhJyk7CgogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciBzZXREZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KS5mOwoKICAgICAgdmFyIGlkID0gMDsKCiAgICAgIHZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfTsKCiAgICAgIHZhciBGUkVFWkUgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBpc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7CiAgICAgIH0pOwoKICAgICAgdmFyIHNldE1ldGEgPSBmdW5jdGlvbiBzZXRNZXRhKGl0KSB7CiAgICAgICAgc2V0RGVzYyhpdCwgTUVUQSwgewogICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgaTogJ08nICsgKytpZCwKICAgICAgICAgICAgLy8gb2JqZWN0IElECiAgICAgICAgICAgIHc6IHt9IC8vIHdlYWsgY29sbGVjdGlvbnMgSURzCgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIGZhc3RLZXkgPSBmdW5jdGlvbiBmYXN0S2V5KGl0LCBjcmVhdGUpIHsKICAgICAgICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CiAgICAgICAgaWYgKCFpc09iamVjdChpdCkpIHJldHVybiBfdHlwZW9mNChpdCkgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7CgogICAgICAgIGlmICghaGFzKGl0LCBNRVRBKSkgewogICAgICAgICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKICAgICAgICAgIGlmICghaXNFeHRlbnNpYmxlKGl0KSkgcmV0dXJuICdGJzsgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKCiAgICAgICAgICBpZiAoIWNyZWF0ZSkgcmV0dXJuICdFJzsgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKCiAgICAgICAgICBzZXRNZXRhKGl0KTsgLy8gcmV0dXJuIG9iamVjdCBJRAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGl0W01FVEFdLmk7CiAgICAgIH07CgogICAgICB2YXIgZ2V0V2VhayA9IGZ1bmN0aW9uIGdldFdlYWsoaXQsIGNyZWF0ZSkgewogICAgICAgIGlmICghaGFzKGl0LCBNRVRBKSkgewogICAgICAgICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKICAgICAgICAgIGlmICghaXNFeHRlbnNpYmxlKGl0KSkgcmV0dXJuIHRydWU7IC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCgogICAgICAgICAgaWYgKCFjcmVhdGUpIHJldHVybiBmYWxzZTsgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKCiAgICAgICAgICBzZXRNZXRhKGl0KTsgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHMKICAgICAgICB9CgogICAgICAgIHJldHVybiBpdFtNRVRBXS53OwogICAgICB9OyAvLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmcKCgogICAgICB2YXIgb25GcmVlemUgPSBmdW5jdGlvbiBvbkZyZWV6ZShpdCkgewogICAgICAgIGlmIChGUkVFWkUgJiYgbWV0YS5ORUVEICYmIGlzRXh0ZW5zaWJsZShpdCkgJiYgIWhhcyhpdCwgTUVUQSkpIHNldE1ldGEoaXQpOwogICAgICAgIHJldHVybiBpdDsKICAgICAgfTsKCiAgICAgIHZhciBtZXRhID0gbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgS0VZOiBNRVRBLAogICAgICAgIE5FRUQ6IGZhbHNlLAogICAgICAgIGZhc3RLZXk6IGZhc3RLZXksCiAgICAgICAgZ2V0V2VhazogZ2V0V2VhaywKICAgICAgICBvbkZyZWV6ZTogb25GcmVlemUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMzEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwogICAgICB2YXIgZ2V0S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwoKICAgICAgdmFyIGdPUFMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTsKCiAgICAgIHZhciBwSUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGdldEtleXMoaXQpOwogICAgICAgIHZhciBnZXRTeW1ib2xzID0gZ09QUy5mOwoKICAgICAgICBpZiAoZ2V0U3ltYm9scykgewogICAgICAgICAgdmFyIHN5bWJvbHMgPSBnZXRTeW1ib2xzKGl0KTsKICAgICAgICAgIHZhciBpc0VudW0gPSBwSUUuZjsKICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgIHZhciBrZXk7CgogICAgICAgICAgd2hpbGUgKHN5bWJvbHMubGVuZ3RoID4gaSkgewogICAgICAgICAgICBpZiAoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpIHJlc3VsdC5wdXNoKGtleSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMzIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQogICAgICB2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gaXNBcnJheShhcmcpIHsKICAgICAgICByZXR1cm4gY29mKGFyZykgPT0gJ0FycmF5JzsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTMzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwogICAgICB2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CgogICAgICB2YXIgZ09QTiA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpLmY7CgogICAgICB2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZzsKICAgICAgdmFyIHdpbmRvd05hbWVzID0gKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mNCh3aW5kb3cpKSA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpIDogW107CgogICAgICB2YXIgZ2V0V2luZG93TmFtZXMgPSBmdW5jdGlvbiBnZXRXaW5kb3dOYW1lcyhpdCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gZ09QTihpdCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIHdpbmRvd05hbWVzLnNsaWNlKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpIHsKICAgICAgICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMzQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KSgnYXN5bmNJdGVyYXRvcicpOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMzUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KSgnb2JzZXJ2YWJsZScpOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMzYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTM3KSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTM3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMzggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKQogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICAkZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHsKICAgICAgICBzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXygxMzkpLnNldAogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMzkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4KCiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBjaGVjayA9IGZ1bmN0aW9uIGNoZWNrKE8sIHByb3RvKSB7CiAgICAgICAgYW5PYmplY3QoTyk7CiAgICAgICAgaWYgKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpIHRocm93IFR5cGVFcnJvcihwcm90byArICI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIik7CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICBzZXQ6IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgZnVuY3Rpb24gKHRlc3QsIGJ1Z2d5LCBzZXQpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpKEZ1bmN0aW9uLmNhbGwsIF9fd2VicGFja19yZXF1aXJlX18oNjkpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7CiAgICAgICAgICAgIHNldCh0ZXN0LCBbXSk7CiAgICAgICAgICAgIGJ1Z2d5ID0gISh0ZXN0IGluc3RhbmNlb2YgQXJyYXkpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBidWdneSA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKSB7CiAgICAgICAgICAgIGNoZWNrKE8sIHByb3RvKTsKICAgICAgICAgICAgaWYgKGJ1Z2d5KSBPLl9fcHJvdG9fXyA9IHByb3RvO2Vsc2Ugc2V0KE8sIHByb3RvKTsKICAgICAgICAgICAgcmV0dXJuIE87CiAgICAgICAgICB9OwogICAgICAgIH0oe30sIGZhbHNlKSA6IHVuZGVmaW5lZCksCiAgICAgICAgY2hlY2s6IGNoZWNrCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTQyKTsKCiAgICAgIHZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Q7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZShQLCBEKSB7CiAgICAgICAgcmV0dXJuICRPYmplY3QuY3JlYXRlKFAsIEQpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNDIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7IC8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQoKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0JywgewogICAgICAgIGNyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygzNikKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9GbGlwTW92ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ0KTsKCiAgICAgIHZhciBfRmxpcE1vdmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRmxpcE1vdmUpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBfRmxpcE1vdmUyWyJkZWZhdWx0Il07CiAgICAgIC8qKgogICAgICAgKiBSZWFjdCBGbGlwIE1vdmUKICAgICAgICogKGMpIDIwMTYtcHJlc2VudCBKb3NodWEgQ29tZWF1CiAgICAgICAqLwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQ0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7CiAgICAgICAgICB2YXIgX2FyciA9IFtdOwogICAgICAgICAgdmFyIF9uID0gdHJ1ZTsKICAgICAgICAgIHZhciBfZCA9IGZhbHNlOwogICAgICAgICAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgICAgICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfZCA9IHRydWU7CiAgICAgICAgICAgIF9lID0gZXJyOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSkgX2lbInJldHVybiJdKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfYXJyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgIH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7CiAgICAgICAgICAgIHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSgpOwoKICAgICAgdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0YXJnZXQ7CiAgICAgIH07CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICAgICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICAgICAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgICAgICAgfTsKICAgICAgfSgpOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTQ1KTsKCiAgICAgIHZhciBfcHJvcENvbnZlcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ2KTsKCiAgICAgIHZhciBfcHJvcENvbnZlcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wQ29udmVydGVyKTsKCiAgICAgIHZhciBfZG9tTWFuaXB1bGF0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpOwoKICAgICAgdmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgICAgICAgaWYgKCFzZWxmKSB7CiAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNhbGwgJiYgKF90eXBlb2Y0KGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgICAgICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIF90eXBlb2Y0KHN1cGVyQ2xhc3MpKTsKICAgICAgICB9CgogICAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsKICAgICAgfQogICAgICAvKioKICAgICAgICogUmVhY3QgRmxpcCBNb3ZlCiAgICAgICAqIChjKSAyMDE2LXByZXNlbnQgSm9zaHVhIENvbWVhdQogICAgICAgKgogICAgICAgKiBGb3IgaW5mb3JtYXRpb24gb24gaG93IHRoaXMgY29kZSBpcyBsYWlkIG91dCwgY2hlY2sgb3V0IENPREVfVE9VUi5tZAogICAgICAgKi8KCiAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L3Byb3AtdHlwZXMgKi8KCgogICAgICB2YXIgdHJhbnNpdGlvbkVuZCA9ICgwLCBfZG9tTWFuaXB1bGF0aW9uLndoaWNoVHJhbnNpdGlvbkV2ZW50KSgpOwogICAgICB2YXIgbm9Ccm93c2VyU3VwcG9ydCA9ICF0cmFuc2l0aW9uRW5kOwoKICAgICAgZnVuY3Rpb24gZ2V0S2V5KGNoaWxkRGF0YSkgewogICAgICAgIHJldHVybiBjaGlsZERhdGEua2V5IHx8ICcnOwogICAgICB9CgogICAgICB2YXIgRmxpcE1vdmUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogICAgICAgIF9pbmhlcml0cyhGbGlwTW92ZSwgX0NvbXBvbmVudCk7CgogICAgICAgIGZ1bmN0aW9uIEZsaXBNb3ZlKCkgewogICAgICAgICAgdmFyIF9yZWY7CgogICAgICAgICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDsKCiAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmxpcE1vdmUpOwoKICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX3JlZiA9IEZsaXBNb3ZlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmxpcE1vdmUpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgY2hpbGRyZW46IF9yZWFjdC5DaGlsZHJlbi50b0FycmF5KF90aGlzLnByb3BzLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGVsZW1lbnQsIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICBhcHBlYXJpbmc6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIF90aGlzLmNoaWxkcmVuRGF0YSA9IHt9LCBfdGhpcy5wYXJlbnREYXRhID0gewogICAgICAgICAgICBkb21Ob2RlOiBudWxsLAogICAgICAgICAgICBib3VuZGluZ0JveDogbnVsbAogICAgICAgICAgfSwgX3RoaXMuaGVpZ2h0UGxhY2Vob2xkZXJEYXRhID0gewogICAgICAgICAgICBkb21Ob2RlOiBudWxsCiAgICAgICAgICB9LCBfdGhpcy5yZW1haW5pbmdBbmltYXRpb25zID0gMCwgX3RoaXMuY2hpbGRyZW5Ub0FuaW1hdGUgPSBbXSwgX3RoaXMucnVuQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZHluYW1pY0NoaWxkcmVuID0gX3RoaXMuc3RhdGUuY2hpbGRyZW4uZmlsdGVyKF90aGlzLmRvZXNDaGlsZE5lZWRUb0JlQW5pbWF0ZWQpOwoKICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBuKSB7CiAgICAgICAgICAgICAgX3RoaXMucmVtYWluaW5nQW5pbWF0aW9ucyArPSAxOwoKICAgICAgICAgICAgICBfdGhpcy5jaGlsZHJlblRvQW5pbWF0ZS5wdXNoKGdldEtleShjaGlsZCkpOwoKICAgICAgICAgICAgICBfdGhpcy5hbmltYXRlQ2hpbGQoY2hpbGQsIG4pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMucHJvcHMub25TdGFydEFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIF90aGlzLmNhbGxDaGlsZHJlbkhvb2soX3RoaXMucHJvcHMub25TdGFydEFsbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF90aGlzLmRvZXNDaGlsZE5lZWRUb0JlQW5pbWF0ZWQgPSBmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgLy8gSWYgdGhlIGNoaWxkIGRvZXNuJ3QgaGF2ZSBhIGtleSwgaXQncyBhbiBpbW1vdmFibGUgY2hpbGQgKG9uZSB0aGF0IHdlCiAgICAgICAgICAgIC8vIGRvIG5vdCB3YW50IHRvIGRvIEZMSVAgc3R1ZmYgdG8uKQogICAgICAgICAgICBpZiAoIWdldEtleShjaGlsZCkpIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpcy5nZXRDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSk7CgogICAgICAgICAgICB2YXIgY2hpbGREb21Ob2RlID0gY2hpbGREYXRhLmRvbU5vZGU7CiAgICAgICAgICAgIHZhciBjaGlsZEJvdW5kaW5nQm94ID0gY2hpbGREYXRhLmJvdW5kaW5nQm94OwogICAgICAgICAgICB2YXIgcGFyZW50Qm91bmRpbmdCb3ggPSBfdGhpcy5wYXJlbnREYXRhLmJvdW5kaW5nQm94OwoKICAgICAgICAgICAgaWYgKCFjaGlsZERvbU5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgICAgICAgYXBwZWFyQW5pbWF0aW9uID0gX3RoaXMkcHJvcHMuYXBwZWFyQW5pbWF0aW9uLAogICAgICAgICAgICAgICAgZW50ZXJBbmltYXRpb24gPSBfdGhpcyRwcm9wcy5lbnRlckFuaW1hdGlvbiwKICAgICAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uID0gX3RoaXMkcHJvcHMubGVhdmVBbmltYXRpb24sCiAgICAgICAgICAgICAgICBnZXRQb3NpdGlvbiA9IF90aGlzJHByb3BzLmdldFBvc2l0aW9uOwogICAgICAgICAgICB2YXIgaXNBcHBlYXJpbmdXaXRoQW5pbWF0aW9uID0gY2hpbGQuYXBwZWFyaW5nICYmIGFwcGVhckFuaW1hdGlvbjsKICAgICAgICAgICAgdmFyIGlzRW50ZXJpbmdXaXRoQW5pbWF0aW9uID0gY2hpbGQuZW50ZXJpbmcgJiYgZW50ZXJBbmltYXRpb247CiAgICAgICAgICAgIHZhciBpc0xlYXZpbmdXaXRoQW5pbWF0aW9uID0gY2hpbGQubGVhdmluZyAmJiBsZWF2ZUFuaW1hdGlvbjsKCiAgICAgICAgICAgIGlmIChpc0FwcGVhcmluZ1dpdGhBbmltYXRpb24gfHwgaXNFbnRlcmluZ1dpdGhBbmltYXRpb24gfHwgaXNMZWF2aW5nV2l0aEFuaW1hdGlvbikgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IC8vIElmIGl0IGlzbid0IGVudGVyaW5nL2xlYXZpbmcsIHdlIHdhbnQgdG8gYW5pbWF0ZSBpdCBpZiBpdCdzCiAgICAgICAgICAgIC8vIG9uLXNjcmVlbiBwb3NpdGlvbiBoYXMgY2hhbmdlZC4KCgogICAgICAgICAgICB2YXIgX2dldFBvc2l0aW9uRGVsdGEgPSAoMCwgX2RvbU1hbmlwdWxhdGlvbi5nZXRQb3NpdGlvbkRlbHRhKSh7CiAgICAgICAgICAgICAgY2hpbGREb21Ob2RlOiBjaGlsZERvbU5vZGUsCiAgICAgICAgICAgICAgY2hpbGRCb3VuZGluZ0JveDogY2hpbGRCb3VuZGluZ0JveCwKICAgICAgICAgICAgICBwYXJlbnRCb3VuZGluZ0JveDogcGFyZW50Qm91bmRpbmdCb3gsCiAgICAgICAgICAgICAgZ2V0UG9zaXRpb246IGdldFBvc2l0aW9uCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgX2dldFBvc2l0aW9uRGVsdGEyID0gX3NsaWNlZFRvQXJyYXkoX2dldFBvc2l0aW9uRGVsdGEsIDIpLAogICAgICAgICAgICAgICAgZFggPSBfZ2V0UG9zaXRpb25EZWx0YTJbMF0sCiAgICAgICAgICAgICAgICBkWSA9IF9nZXRQb3NpdGlvbkRlbHRhMlsxXTsKCiAgICAgICAgICAgIHJldHVybiBkWCAhPT0gMCB8fCBkWSAhPT0gMDsKICAgICAgICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpOwogICAgICAgIH0gLy8gQ29weSBwcm9wcy5jaGlsZHJlbiBpbnRvIHN0YXRlLgogICAgICAgIC8vIFRvIHVuZGVyc3RhbmQgd2h5IHRoaXMgaXMgaW1wb3J0YW50IChhbmQgbm90IGFuIGFudGktcGF0dGVybiksIGNvbnNpZGVyCiAgICAgICAgLy8gaG93ICJsZWF2ZSIgYW5pbWF0aW9ucyB3b3JrLiBBbiBpdGVtIGhhcyAibGVmdCIgd2hlbiB0aGUgY29tcG9uZW50CiAgICAgICAgLy8gcmVjZWl2ZXMgYSBuZXcgc2V0IG9mIHByb3BzIHRoYXQgZG8gTk9UIGNvbnRhaW4gdGhlIGl0ZW0uCiAgICAgICAgLy8gSWYgd2UganVzdCByZW5kZXIgdGhlIHByb3BzIGFzLWlzLCB0aGUgaXRlbSB3b3VsZCBpbnN0YW50bHkgZGlzYXBwZWFyLgogICAgICAgIC8vIFdlIHdhbnQgdG8ga2VlcCB0aGUgaXRlbSByZW5kZXJlZCBmb3IgYSBsaXR0bGUgd2hpbGUsIHVudGlsIGl0cyBhbmltYXRpb24KICAgICAgICAvLyBjYW4gY29tcGxldGUuIEJlY2F1c2Ugd2UgY2Fubm90IG11dGF0ZSBwcm9wcywgd2UgbWFrZSBgc3RhdGVgIHRoZSBzb3VyY2UKICAgICAgICAvLyBvZiB0cnV0aC4KICAgICAgICAvLyBGbGlwTW92ZSBuZWVkcyB0byBrbm93IHF1aXRlIGEgYml0IGFib3V0IGl0cyBjaGlsZHJlbiBpbiBvcmRlciB0byBkbwogICAgICAgIC8vIGl0cyBqb2IuIFdlIHN0b3JlIHRoZXNlIGFzIGEgcHJvcGVydHkgb24gdGhlIGluc3RhbmNlLiBXZSdyZSBub3QgdXNpbmcKICAgICAgICAvLyBzdGF0ZSwgYmVjYXVzZSB3ZSBkb24ndCB3YW50IGNoYW5nZXMgdG8gdHJpZ2dlciByZS1yZW5kZXJzLCB3ZSBqdXN0CiAgICAgICAgLy8gbmVlZCBhIHBsYWNlIHRvIGtlZXAgdGhlIGRhdGEgZm9yIHJlZmVyZW5jZSwgd2hlbiBjaGFuZ2VzIGhhcHBlbi4KICAgICAgICAvLyBUaGlzIGZpZWxkIHNob3VsZCBub3QgYmUgYWNjZXNzZWQgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSBnZXRDaGlsZERhdGEsCiAgICAgICAgLy8gcHV0Q2hpbGREYXRhLCBldGMuLi4KICAgICAgICAvLyBTaW1pbGFybHksIHRyYWNrIHRoZSBkb20gbm9kZSBhbmQgYm94IG9mIG91ciBwYXJlbnQgZWxlbWVudC4KICAgICAgICAvLyBJZiBgbWFpbnRhaW5Db250YWluZXJIZWlnaHRgIHByb3AgaXMgc2V0IHRvIHRydWUsIHdlJ2xsIGNyZWF0ZSBhCiAgICAgICAgLy8gcGxhY2Vob2xkZXIgZWxlbWVudCB3aGljaCBvY2N1cGllcyBzcGFjZSBzbyB0aGF0IHRoZSBwYXJlbnQgaGVpZ2h0CiAgICAgICAgLy8gZG9lc24ndCBjaGFuZ2Ugd2hlbiBpdGVtcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBkb2N1bWVudCBmbG93ICh3aGljaAogICAgICAgIC8vIGhhcHBlbnMgZHVyaW5nIGxlYXZlIGFuaW1hdGlvbnMpCiAgICAgICAgLy8gS2VlcCB0cmFjayBvZiByZW1haW5pbmcgYW5pbWF0aW9ucyBzbyB3ZSBrbm93IHdoZW4gdG8gZmlyZSB0aGUKICAgICAgICAvLyBhbGwtZmluaXNoZWQgY2FsbGJhY2ssIGFuZCBjbGVhbiB1cCBhZnRlciBvdXJzZWx2ZXMuCiAgICAgICAgLy8gTk9URTogd2UgY2FuJ3Qgc2ltcGx5IHVzZSBjaGlsZHJlblRvQW5pbWF0ZS5sZW5ndGggdG8gdHJhY2sgcmVtYWluaW5nCiAgICAgICAgLy8gYW5pbWF0aW9ucywgYmVjYXVzZSB3ZSBuZWVkIHRvIG1haW50YWluIHRoZSBsaXN0IG9mIGFuaW1hdGluZyBjaGlsZHJlbiwKICAgICAgICAvLyB0byBwYXNzIHRvIHRoZSBgb25GaW5pc2hBbGxgIGhhbmRsZXIuCgoKICAgICAgICBfY3JlYXRlQ2xhc3MoRmxpcE1vdmUsIFt7CiAgICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgICAgICAgIC8vIFJ1biBvdXIgYGFwcGVhckFuaW1hdGlvbmAgaWYgaXQgd2FzIHJlcXVlc3RlZCwgcmlnaHQgYWZ0ZXIgdGhlCiAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtb3VudHMuCiAgICAgICAgICAgIHZhciBzaG91bGRUcmlnZ2VyRkxJUCA9IHRoaXMucHJvcHMuYXBwZWFyQW5pbWF0aW9uICYmICF0aGlzLmlzQW5pbWF0aW9uRGlzYWJsZWQodGhpcy5wcm9wcyk7CgogICAgICAgICAgICBpZiAoc2hvdWxkVHJpZ2dlckZMSVApIHsKICAgICAgICAgICAgICB0aGlzLnByZXBGb3JBbmltYXRpb24oKTsKICAgICAgICAgICAgICB0aGlzLnJ1bkFuaW1hdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHsKICAgICAgICAgICAgLy8gV2hlbiB0aGUgY29tcG9uZW50IGlzIGhhbmRlZCBuZXcgcHJvcHMsIHdlIG5lZWQgdG8gZmlndXJlIG91dCB0aGUKICAgICAgICAgICAgLy8gInJlc3RpbmciIHBvc2l0aW9uIG9mIGFsbCBjdXJyZW50bHktcmVuZGVyZWQgRE9NIG5vZGVzLgogICAgICAgICAgICAvLyBXZSBzdG9yZSB0aGF0IGRhdGEgaW4gdGhpcy5wYXJlbnQgYW5kIHRoaXMuY2hpbGRyZW4sCiAgICAgICAgICAgIC8vIHNvIGl0IGNhbiBiZSB1c2VkIGxhdGVyIHRvIHdvcmsgb3V0IHRoZSBhbmltYXRpb24uCiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3hDYWNoZXMoKTsgLy8gQ29udmVydCBvcGFxdWUgY2hpbGRyZW4gb2JqZWN0IHRvIGFycmF5LgoKICAgICAgICAgICAgdmFyIG5leHRDaGlsZHJlbiA9IF9yZWFjdC5DaGlsZHJlbi50b0FycmF5KG5leHRQcm9wcy5jaGlsZHJlbik7IC8vIE5leHQsIHdlIG5lZWQgdG8gdXBkYXRlIG91ciBzdGF0ZSwgc28gdGhhdCBpdCBjb250YWlucyBvdXIgbmV3IHNldCBvZgogICAgICAgICAgICAvLyBjaGlsZHJlbi4gSWYgYW5pbWF0aW9uIGlzIGRpc2FibGVkIG9yIHVuc3VwcG9ydGVkLCB0aGlzIGlzIGVhc3k7CiAgICAgICAgICAgIC8vIHdlIGp1c3QgY29weSBvdXIgcHJvcHMgaW50byBzdGF0ZS4KICAgICAgICAgICAgLy8gQXNzdW1pbmcgdGhhdCB3ZSBjYW4gYW5pbWF0ZSwgdGhvdWdoLCB3ZSBoYXZlIHRvIGRvIHNvbWUgd29yay4KICAgICAgICAgICAgLy8gRXNzZW50aWFsbHksIHdlIHdhbnQgdG8ga2VlcCBqdXN0LWRlbGV0ZWQgbm9kZXMgaW4gdGhlIERPTSBmb3IgYSBiaXQKICAgICAgICAgICAgLy8gbG9uZ2VyLCBzbyB0aGF0IHdlIGNhbiBhbmltYXRlIHRoZW0gYXdheS4KCgogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBjaGlsZHJlbjogdGhpcy5pc0FuaW1hdGlvbkRpc2FibGVkKG5leHRQcm9wcykgPyBuZXh0Q2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGVsZW1lbnQsIHsKICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkgOiB0aGlzLmNhbGN1bGF0ZU5leHRTZXRPZkNoaWxkcmVuKG5leHRDaGlsZHJlbikKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcykgewogICAgICAgICAgICAvLyBJZiB0aGUgY2hpbGRyZW4gaGF2ZSBiZWVuIHJlLWFycmFuZ2VkLCBtb3ZlZCwgb3IgYWRkZWQvcmVtb3ZlZCwKICAgICAgICAgICAgLy8gdHJpZ2dlciB0aGUgbWFpbiBGTElQIGFuaW1hdGlvbi4KICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gSU1QT1JUQU5UOiBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBjaGlsZHJlbiBoYXZlIGFjdHVhbGx5IGNoYW5nZWQuCiAgICAgICAgICAgIC8vIEF0IHRoZSBlbmQgb2YgdGhlIHRyYW5zaXRpb24sIHdlIGNsZWFuIHVwIG5vZGVzIHRoYXQgbmVlZCB0byBiZSByZW1vdmVkLgogICAgICAgICAgICB2YXIgb2xkQ2hpbGRyZW5LZXlzID0gX3JlYWN0LkNoaWxkcmVuLnRvQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQua2V5OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHZhciBuZXh0Q2hpbGRyZW5LZXlzID0gX3JlYWN0LkNoaWxkcmVuLnRvQXJyYXkocHJldmlvdXNQcm9wcy5jaGlsZHJlbikubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQua2V5OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHZhciBzaG91bGRUcmlnZ2VyRkxJUCA9ICEoMCwgX2hlbHBlcnMuYXJyYXlzRXF1YWwpKG9sZENoaWxkcmVuS2V5cywgbmV4dENoaWxkcmVuS2V5cykgJiYgIXRoaXMuaXNBbmltYXRpb25EaXNhYmxlZCh0aGlzLnByb3BzKTsKCiAgICAgICAgICAgIGlmIChzaG91bGRUcmlnZ2VyRkxJUCkgewogICAgICAgICAgICAgIHRoaXMucHJlcEZvckFuaW1hdGlvbigpOwogICAgICAgICAgICAgIHRoaXMucnVuQW5pbWF0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjYWxjdWxhdGVOZXh0U2V0T2ZDaGlsZHJlbicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlTmV4dFNldE9mQ2hpbGRyZW4obmV4dENoaWxkcmVuKSB7CiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOyAvLyBXZSB3YW50IHRvOgogICAgICAgICAgICAvLyAgIC0gTWFyayBhbGwgbmV3IGNoaWxkcmVuIGFzIGBlbnRlcmluZ2AKICAgICAgICAgICAgLy8gICAtIFB1bGwgaW4gcHJldmlvdXMgY2hpbGRyZW4gdGhhdCBhcmVuJ3QgaW4gbmV4dENoaWxkcmVuLCBhbmQgbWFyayB0aGVtCiAgICAgICAgICAgIC8vICAgICBhcyBgbGVhdmluZ2AKICAgICAgICAgICAgLy8gICAtIFByZXNlcnZlIHRoZSBuZXh0Q2hpbGRyZW4gbGlzdCBvcmRlciwgd2l0aCBsZWF2aW5nIGNoaWxkcmVuIGluIHRoZWlyCiAgICAgICAgICAgIC8vICAgICBhcHByb3ByaWF0ZSBwbGFjZXMuCiAgICAgICAgICAgIC8vCgoKICAgICAgICAgICAgdmFyIHVwZGF0ZWRDaGlsZHJlbiA9IG5leHRDaGlsZHJlbi5tYXAoZnVuY3Rpb24gKG5leHRDaGlsZCkgewogICAgICAgICAgICAgIHZhciBjaGlsZCA9IF90aGlzMi5maW5kQ2hpbGRCeUtleShuZXh0Q2hpbGQua2V5IHx8ICcnKTsgLy8gSWYgdGhlIGN1cnJlbnQgY2hpbGQgZGlkIGV4aXN0LCBidXQgaXQgd2FzIGluIHRoZSBtaWRzdCBvZiBsZWF2aW5nLAogICAgICAgICAgICAgIC8vIHdlIHdhbnQgdG8gdHJlYXQgaXQgYXMgdGhvdWdoIGl0J3MgZW50ZXJpbmcKCgogICAgICAgICAgICAgIHZhciBpc0VudGVyaW5nID0gIWNoaWxkIHx8IGNoaWxkLmxlYXZpbmc7CiAgICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBuZXh0Q2hpbGQsIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQ6IG5leHRDaGlsZCwKICAgICAgICAgICAgICAgIGVudGVyaW5nOiBpc0VudGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOyAvLyBUaGlzIGlzIHRyaWNreS4gV2Ugd2FudCB0byBrZWVwIHRoZSBuZXh0Q2hpbGRyZW4ncyBvcmRlcmluZywgYnV0IHdpdGgKICAgICAgICAgICAgLy8gYW55IGp1c3QtcmVtb3ZlZCBpdGVtcyBtYWludGFpbmluZyB0aGVpciBvcmlnaW5hbCBwb3NpdGlvbi4KICAgICAgICAgICAgLy8gZWcuCiAgICAgICAgICAgIC8vICAgdGhpcy5zdGF0ZS5jaGlsZHJlbiAgPSBbIDEsIDIsIDMsIDQgXQogICAgICAgICAgICAvLyAgIG5leHRDaGlsZHJlbiAgICAgICAgID0gWyAzLCAxIF0KICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gSW4gdGhpcyBleGFtcGxlLCB3ZSd2ZSByZW1vdmVkIHRoZSAnMicgJiAnNCcKICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBlbmQgdXAgd2l0aDogIFsgMiwgMywgMSwgNCBdCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIFRvIGFjY29tcGxpc2ggdGhhdCwgd2UnbGwgaXRlcmF0ZSB0aHJvdWdoIHRoaXMuc3RhdGUuY2hpbGRyZW4uIHdoZW5ldmVyCiAgICAgICAgICAgIC8vIHdlIGZpbmQgYSBtYXRjaCwgd2UnbGwgYXBwZW5kIG91ciBgbGVhdmluZ2AgZmxhZyB0byBpdCwgYW5kIGluc2VydCBpdAogICAgICAgICAgICAvLyBpbnRvIHRoZSBuZXh0Q2hpbGRyZW4gaW4gaXRzIE9SSUdJTkFMIHBvc2l0aW9uLiBOb3RlIHRoYXQsIGFzIHdlIGtlZXAKICAgICAgICAgICAgLy8gaW5zZXJ0aW5nIG9sZCBpdGVtcyBpbnRvIHRoZSBuZXcgbGlzdCwgdGhlICJvcmlnaW5hbCIgcG9zaXRpb24gd2lsbAogICAgICAgICAgICAvLyBrZWVwIGluY3JlbWVudGluZy4KCiAgICAgICAgICAgIHZhciBudW1PZkNoaWxkcmVuTGVhdmluZyA9IDA7CiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGluZGV4KSB7CiAgICAgICAgICAgICAgdmFyIGlzTGVhdmluZyA9ICFuZXh0Q2hpbGRyZW4uZmluZChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgICAgICAgIHZhciBrZXkgPSBfcmVmMi5rZXk7CiAgICAgICAgICAgICAgICByZXR1cm4ga2V5ID09PSBnZXRLZXkoY2hpbGQpOwogICAgICAgICAgICAgIH0pOyAvLyBJZiB0aGUgY2hpbGQgaXNuJ3QgbGVhdmluZyAob3IsIGlmIHRoZXJlIGlzIG5vIGxlYXZlIGFuaW1hdGlvbiksCiAgICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBhZGQgaXQgaW50byB0aGUgc3RhdGUgY2hpbGRyZW4uCgogICAgICAgICAgICAgIGlmICghaXNMZWF2aW5nIHx8ICFfdGhpczIucHJvcHMubGVhdmVBbmltYXRpb24pIHJldHVybjsKCiAgICAgICAgICAgICAgdmFyIG5leHRDaGlsZCA9IF9leHRlbmRzKHt9LCBjaGlsZCwgewogICAgICAgICAgICAgICAgbGVhdmluZzogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICB2YXIgbmV4dENoaWxkSW5kZXggPSBpbmRleCArIG51bU9mQ2hpbGRyZW5MZWF2aW5nOwogICAgICAgICAgICAgIHVwZGF0ZWRDaGlsZHJlbi5zcGxpY2UobmV4dENoaWxkSW5kZXgsIDAsIG5leHRDaGlsZCk7CiAgICAgICAgICAgICAgbnVtT2ZDaGlsZHJlbkxlYXZpbmcgKz0gMTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkQ2hpbGRyZW47CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncHJlcEZvckFuaW1hdGlvbicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcEZvckFuaW1hdGlvbigpIHsKICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7IC8vIE91ciBhbmltYXRpb24gcHJlcCBjb25zaXN0cyBvZjoKICAgICAgICAgICAgLy8gLSByZW1vdmUgY2hpbGRyZW4gdGhhdCBhcmUgbGVhdmluZyBmcm9tIHRoZSBET00gZmxvdywgc28gdGhhdCB0aGUgbmV3CiAgICAgICAgICAgIC8vICAgbGF5b3V0IGNhbiBiZSBhY2N1cmF0ZWx5IGNhbGN1bGF0ZWQsCiAgICAgICAgICAgIC8vIC0gdXBkYXRlIHRoZSBwbGFjZWhvbGRlciBjb250YWluZXIgaGVpZ2h0LCBpZiBuZWVkZWQsIHRvIGVuc3VyZSB0aGF0CiAgICAgICAgICAgIC8vICAgdGhlIHBhcmVudCdzIGhlaWdodCBkb2Vzbid0IGNvbGxhcHNlLgoKCiAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgICAgICAgbGVhdmVBbmltYXRpb24gPSBfcHJvcHMubGVhdmVBbmltYXRpb24sCiAgICAgICAgICAgICAgICBtYWludGFpbkNvbnRhaW5lckhlaWdodCA9IF9wcm9wcy5tYWludGFpbkNvbnRhaW5lckhlaWdodCwKICAgICAgICAgICAgICAgIGdldFBvc2l0aW9uID0gX3Byb3BzLmdldFBvc2l0aW9uOyAvLyB3ZSBuZWVkIHRvIG1ha2UgYWxsIGxlYXZpbmcgbm9kZXMgImludmlzaWJsZSIgdG8gdGhlIGxheW91dCBjYWxjdWxhdGlvbnMKICAgICAgICAgICAgLy8gdGhhdCB3aWxsIHRha2UgcGxhY2UgaW4gdGhlIG5leHQgc3RlcCAodGhpcy5ydW5BbmltYXRpb24pLgoKICAgICAgICAgICAgaWYgKGxlYXZlQW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgdmFyIGxlYXZpbmdDaGlsZHJlbiA9IHRoaXMuc3RhdGUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmxlYXZpbmc7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbGVhdmluZ0NoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGxlYXZpbmdDaGlsZCkgewogICAgICAgICAgICAgICAgdmFyIGNoaWxkRGF0YSA9IF90aGlzMy5nZXRDaGlsZERhdGEoZ2V0S2V5KGxlYXZpbmdDaGlsZCkpOyAvLyBXZSBuZWVkIHRvIHRha2UgdGhlIGl0ZW1zIG91dCBvZiB0aGUgImZsb3ciIG9mIHRoZSBkb2N1bWVudCwgc28gdGhhdAogICAgICAgICAgICAgICAgLy8gaXRzIHNpYmxpbmdzIGNhbiBtb3ZlIHRvIHRha2UgaXRzIHBsYWNlLgoKCiAgICAgICAgICAgICAgICBpZiAoY2hpbGREYXRhLmJvdW5kaW5nQm94KSB7CiAgICAgICAgICAgICAgICAgICgwLCBfZG9tTWFuaXB1bGF0aW9uLnJlbW92ZU5vZGVGcm9tRE9NRmxvdykoY2hpbGREYXRhLCBfdGhpczMucHJvcHMudmVydGljYWxBbGlnbm1lbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAobWFpbnRhaW5Db250YWluZXJIZWlnaHQgJiYgdGhpcy5oZWlnaHRQbGFjZWhvbGRlckRhdGEuZG9tTm9kZSkgewogICAgICAgICAgICAgICAgKDAsIF9kb21NYW5pcHVsYXRpb24udXBkYXRlSGVpZ2h0UGxhY2Vob2xkZXIpKHsKICAgICAgICAgICAgICAgICAgZG9tTm9kZTogdGhpcy5oZWlnaHRQbGFjZWhvbGRlckRhdGEuZG9tTm9kZSwKICAgICAgICAgICAgICAgICAgcGFyZW50RGF0YTogdGhpcy5wYXJlbnREYXRhLAogICAgICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogZ2V0UG9zaXRpb24KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAvLyBGb3IgYWxsIGNoaWxkcmVuIG5vdCBpbiB0aGUgbWlkZGxlIG9mIGVudGVyaW5nIG9yIGxlYXZpbmcsCiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gcmVzZXQgdGhlIHRyYW5zaXRpb24sIHNvIHRoYXQgdGhlIE5FVyBzaHVmZmxlIHN0YXJ0cyBmcm9tCiAgICAgICAgICAgIC8vIHRoZSByaWdodCBwbGFjZS4KCgogICAgICAgICAgICB0aGlzLnN0YXRlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgdmFyIF9nZXRDaGlsZERhdGEgPSBfdGhpczMuZ2V0Q2hpbGREYXRhKGdldEtleShjaGlsZCkpLAogICAgICAgICAgICAgICAgICBkb21Ob2RlID0gX2dldENoaWxkRGF0YS5kb21Ob2RlOyAvLyBJZ25vcmUgY2hpbGRyZW4gdGhhdCBkb24ndCByZW5kZXIgRE9NIG5vZGVzIChlZy4gYnkgcmV0dXJuaW5nIG51bGwpCgoKICAgICAgICAgICAgICBpZiAoIWRvbU5vZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghY2hpbGQuZW50ZXJpbmcgJiYgIWNoaWxkLmxlYXZpbmcpIHsKICAgICAgICAgICAgICAgICgwLCBfZG9tTWFuaXB1bGF0aW9uLmFwcGx5U3R5bGVzVG9ET01Ob2RlKSh7CiAgICAgICAgICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUsCiAgICAgICAgICAgICAgICAgIHN0eWxlczogewogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICcnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnYW5pbWF0ZUNoaWxkJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRlQ2hpbGQoY2hpbGQsIGluZGV4KSB7CiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9nZXRDaGlsZERhdGEyID0gdGhpcy5nZXRDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSksCiAgICAgICAgICAgICAgICBkb21Ob2RlID0gX2dldENoaWxkRGF0YTIuZG9tTm9kZTsKCiAgICAgICAgICAgIGlmICghZG9tTm9kZSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSAvLyBBcHBseSB0aGUgcmVsZXZhbnQgc3R5bGUgZm9yIHRoaXMgRE9NIG5vZGUKICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgb2Zmc2V0IGZyb20gaXRzIGFjdHVhbCBET00gcG9zaXRpb24uCiAgICAgICAgICAgIC8vIGVnLiBpZiBhbiBpdGVtIGhhcyBiZWVuIHJlLXJlbmRlcmVkIDIwcHggbG93ZXIsIHdlIHdhbnQgdG8gYXBwbHkgYQogICAgICAgICAgICAvLyBzdHlsZSBvZiAndHJhbnNmb3JtOiB0cmFuc2xhdGUoLTIwcHgpJywgc28gdGhhdCBpdCBhcHBlYXJzIHRvIGJlIHdoZXJlCiAgICAgICAgICAgIC8vIGl0IHN0YXJ0ZWQuCiAgICAgICAgICAgIC8vIEluIEZMSVAgdGVybWlub2xvZ3ksIHRoaXMgaXMgdGhlICdJbnZlcnQnIHN0YWdlLgoKCiAgICAgICAgICAgICgwLCBfZG9tTWFuaXB1bGF0aW9uLmFwcGx5U3R5bGVzVG9ET01Ob2RlKSh7CiAgICAgICAgICAgICAgZG9tTm9kZTogZG9tTm9kZSwKICAgICAgICAgICAgICBzdHlsZXM6IHRoaXMuY29tcHV0ZUluaXRpYWxTdHlsZXMoY2hpbGQpCiAgICAgICAgICAgIH0pOyAvLyBTdGFydCBieSBpbnZva2luZyB0aGUgb25TdGFydCBjYWxsYmFjayBmb3IgdGhpcyBjaGlsZC4KCiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uU3RhcnQpIHRoaXMucHJvcHMub25TdGFydChjaGlsZCwgZG9tTm9kZSk7IC8vIE5leHQsIGFuaW1hdGUgdGhlIGl0ZW0gZnJvbSBpdCdzIGFydGlmaWNpYWxseS1vZmZzZXQgcG9zaXRpb24gdG8gaXRzCiAgICAgICAgICAgIC8vIG5ldywgbmF0dXJhbCBwb3NpdGlvbi4KCiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIE5PVEUsIFJFOiB0aGUgZG91YmxlLXJlcXVlc3RBbmltYXRpb25GcmFtZToKICAgICAgICAgICAgICAgIC8vIFNhZGx5LCB0aGlzIGlzIHRoZSBtb3N0IGJyb3dzZXItY29tcGF0aWJsZSB3YXkgdG8gZG8gdGhpcyBJJ3ZlIGZvdW5kLgogICAgICAgICAgICAgICAgLy8gRXNzZW50aWFsbHkgd2UgbmVlZCB0byBzZXQgdGhlIGluaXRpYWwgc3R5bGVzIG91dHNpZGUgb2YgYW55IHJlcXVlc3QKICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrcyB0byBhdm9pZCBiYXRjaGluZyB0aGVtLiBUaGVuLCBhIGZyYW1lIG5lZWRzIHRvIHBhc3Mgd2l0aAogICAgICAgICAgICAgICAgLy8gdGhlIHN0eWxlcyBhYm92ZSByZW5kZXJlZC4gVGhlbiwgb24gdGhlIHNlY29uZCBmcmFtZSwgd2UgY2FuIGFwcGx5CiAgICAgICAgICAgICAgICAvLyBvdXIgZmluYWwgc3R5bGVzIHRvIHBlcmZvcm0gdGhlIGFuaW1hdGlvbi4KICAgICAgICAgICAgICAgIC8vIE91ciBmaXJzdCBvcmRlciBvZiBidXNpbmVzcyBpcyB0byAidW5kbyIgdGhlIHN0eWxlcyBhcHBsaWVkIGluIHRoZQogICAgICAgICAgICAgICAgLy8gcHJldmlvdXMgZnJhbWVzLCB3aGlsZSBhbHNvIGFkZGluZyBhIGB0cmFuc2l0aW9uYCBwcm9wZXJ0eS4KICAgICAgICAgICAgICAgIC8vIFRoaXMgd2F5LCB0aGUgaXRlbSB3aWxsIHNtb290aGx5IHRyYW5zaXRpb24gZnJvbSBpdHMgb2xkIHBvc2l0aW9uCiAgICAgICAgICAgICAgICAvLyB0byBpdHMgbmV3IHBvc2l0aW9uLgogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZsb3d0eXBlL3JlcXVpcmUtdmFyaWFibGUtdHlwZQogICAgICAgICAgICAgICAgdmFyIHN0eWxlcyA9IHsKICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogKDAsIF9kb21NYW5pcHVsYXRpb24uY3JlYXRlVHJhbnNpdGlvblN0cmluZykoaW5kZXgsIF90aGlzNC5wcm9wcyksCiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJycsCiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICcnCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmIChjaGlsZC5hcHBlYXJpbmcgJiYgX3RoaXM0LnByb3BzLmFwcGVhckFuaW1hdGlvbikgewogICAgICAgICAgICAgICAgICBzdHlsZXMgPSBfZXh0ZW5kcyh7fSwgc3R5bGVzLCBfdGhpczQucHJvcHMuYXBwZWFyQW5pbWF0aW9uLnRvKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQuZW50ZXJpbmcgJiYgX3RoaXM0LnByb3BzLmVudGVyQW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IF9leHRlbmRzKHt9LCBzdHlsZXMsIF90aGlzNC5wcm9wcy5lbnRlckFuaW1hdGlvbi50byk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkLmxlYXZpbmcgJiYgX3RoaXM0LnByb3BzLmxlYXZlQW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IF9leHRlbmRzKHt9LCBzdHlsZXMsIF90aGlzNC5wcm9wcy5sZWF2ZUFuaW1hdGlvbi50byk7CiAgICAgICAgICAgICAgICB9IC8vIEluIEZMSVAgdGVybWlub2xvZ3ksIHRoaXMgaXMgdGhlICdQbGF5JyBzdGFnZS4KCgogICAgICAgICAgICAgICAgKDAsIF9kb21NYW5pcHVsYXRpb24uYXBwbHlTdHlsZXNUb0RPTU5vZGUpKHsKICAgICAgICAgICAgICAgICAgZG9tTm9kZTogZG9tTm9kZSwKICAgICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZXMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5iaW5kVHJhbnNpdGlvbkVuZEhhbmRsZXIoY2hpbGQpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2JpbmRUcmFuc2l0aW9uRW5kSGFuZGxlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZFRyYW5zaXRpb25FbmRIYW5kbGVyKGNoaWxkKSB7CiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9nZXRDaGlsZERhdGEzID0gdGhpcy5nZXRDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSksCiAgICAgICAgICAgICAgICBkb21Ob2RlID0gX2dldENoaWxkRGF0YTMuZG9tTm9kZTsKCiAgICAgICAgICAgIGlmICghZG9tTm9kZSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSAvLyBUaGUgb25GaW5pc2ggY2FsbGJhY2sgbmVlZHMgdG8gYmUgYm91bmQgdG8gdGhlIHRyYW5zaXRpb25FbmQgZXZlbnQuCiAgICAgICAgICAgIC8vIFdlIGFsc28gbmVlZCB0byB1bmJpbmQgaXQgd2hlbiB0aGUgdHJhbnNpdGlvbiBjb21wbGV0ZXMsIHNvIHRoaXMgdWdseQogICAgICAgICAgICAvLyBpbmxpbmUgZnVuY3Rpb24gaXMgcmVxdWlyZWQgKHdlIG5lZWQgaXQgaGVyZSBzbyBpdCBjbG9zZXMgb3ZlcgogICAgICAgICAgICAvLyBkZXBlbmRlbnQgdmFyaWFibGVzIGBjaGlsZGAgYW5kIGBkb21Ob2RlYCkKCgogICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZEhhbmRsZXIgPSBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kSGFuZGxlcihldikgewogICAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGlzIGhhbmRsZXIgaXMgZmlyZWQgbm90IG9uIG91ciBwcmltYXJ5IHRyYW5zaXRpb24sCiAgICAgICAgICAgICAgLy8gYnV0IG9uIGEgbmVzdGVkIHRyYW5zaXRpb24gKGVnLiBhIGhvdmVyIGVmZmVjdCkuIElnbm9yZSB0aGVzZSBjYXNlcy4KICAgICAgICAgICAgICBpZiAoZXYudGFyZ2V0ICE9PSBkb21Ob2RlKSByZXR1cm47IC8vIFJlbW92ZSB0aGUgJ3RyYW5zaXRpb24nIGlubGluZSBzdHlsZSB3ZSBhZGRlZC4gVGhpcyBpcyBjbGVhbnVwLgoKICAgICAgICAgICAgICBkb21Ob2RlLnN0eWxlLnRyYW5zaXRpb24gPSAnJzsgLy8gVHJpZ2dlciBhbnkgYXBwbGljYWJsZSBvbkZpbmlzaC9vbkZpbmlzaEFsbCBob29rcwoKICAgICAgICAgICAgICBfdGhpczUudHJpZ2dlckZpbmlzaEhvb2tzKGNoaWxkLCBkb21Ob2RlKTsKCiAgICAgICAgICAgICAgZG9tTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25FbmRIYW5kbGVyKTsKCiAgICAgICAgICAgICAgaWYgKGNoaWxkLmxlYXZpbmcpIHsKICAgICAgICAgICAgICAgIF90aGlzNS5yZW1vdmVDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25FbmRIYW5kbGVyKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICd0cmlnZ2VyRmluaXNoSG9va3MnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXJGaW5pc2hIb29rcyhjaGlsZCwgZG9tTm9kZSkgewogICAgICAgICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uRmluaXNoKSB0aGlzLnByb3BzLm9uRmluaXNoKGNoaWxkLCBkb21Ob2RlKTsgLy8gUmVkdWNlIHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gd2UgbmVlZCB0byBhbmltYXRlIGJ5IDEsCiAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHRlbGwgd2hlbiBhbGwgY2hpbGRyZW4gaGF2ZSBmaW5pc2hlZC4KCiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nQW5pbWF0aW9ucyAtPSAxOwoKICAgICAgICAgICAgaWYgKHRoaXMucmVtYWluaW5nQW5pbWF0aW9ucyA9PT0gMCkgewogICAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgaXRlbXMgZnJvbSB0aGUgRE9NIHRoYXQgaGF2ZSBsZWZ0LCBhbmQgcmVzZXQgYGVudGVyaW5nYC4KICAgICAgICAgICAgICB2YXIgbmV4dENoaWxkcmVuID0gdGhpcy5zdGF0ZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICAgICAgICB2YXIgbGVhdmluZyA9IF9yZWYzLmxlYXZpbmc7CiAgICAgICAgICAgICAgICByZXR1cm4gIWxlYXZpbmc7CiAgICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGl0ZW0sIHsKICAgICAgICAgICAgICAgICAgYXBwZWFyaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgZW50ZXJpbmc6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBuZXh0Q2hpbGRyZW4KICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzNi5wcm9wcy5vbkZpbmlzaEFsbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICBfdGhpczYuY2FsbENoaWxkcmVuSG9vayhfdGhpczYucHJvcHMub25GaW5pc2hBbGwpOwogICAgICAgICAgICAgICAgfSAvLyBSZXNldCBvdXIgdmFyaWFibGVzIGZvciB0aGUgbmV4dCBpdGVyYXRpb24KCgogICAgICAgICAgICAgICAgX3RoaXM2LmNoaWxkcmVuVG9BbmltYXRlID0gW107CiAgICAgICAgICAgICAgfSk7IC8vIElmIHRoZSBwbGFjZWhvbGRlciB3YXMgaG9sZGluZyB0aGUgY29udGFpbmVyIG9wZW4gd2hpbGUgZWxlbWVudHMgd2VyZQogICAgICAgICAgICAgIC8vIGxlYXZpbmcsIHdlIHdlIGNhbiBub3cgc2V0IGl0cyBoZWlnaHQgdG8gemVyby4KCiAgICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0UGxhY2Vob2xkZXJEYXRhLmRvbU5vZGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0UGxhY2Vob2xkZXJEYXRhLmRvbU5vZGUuc3R5bGUuaGVpZ2h0ID0gJzAnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NhbGxDaGlsZHJlbkhvb2snLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGxDaGlsZHJlbkhvb2soaG9vaykgewogICAgICAgICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdOwogICAgICAgICAgICB2YXIgZG9tTm9kZXMgPSBbXTsKICAgICAgICAgICAgdGhpcy5jaGlsZHJlblRvQW5pbWF0ZS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZEtleSkgewogICAgICAgICAgICAgIC8vIElmIHRoaXMgd2FzIGFuIGV4aXQgYW5pbWF0aW9uLCB0aGUgY2hpbGQgbWF5IG5vIGxvbmdlciBleGlzdC4KICAgICAgICAgICAgICAvLyBJZiBzbywgc2tpcCBpdC4KICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBfdGhpczcuZmluZENoaWxkQnlLZXkoY2hpbGRLZXkpOwoKICAgICAgICAgICAgICBpZiAoIWNoaWxkKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKGNoaWxkKTsKCiAgICAgICAgICAgICAgaWYgKF90aGlzNy5oYXNDaGlsZERhdGEoY2hpbGRLZXkpKSB7CiAgICAgICAgICAgICAgICBkb21Ob2Rlcy5wdXNoKF90aGlzNy5nZXRDaGlsZERhdGEoY2hpbGRLZXkpLmRvbU5vZGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGhvb2soZWxlbWVudHMsIGRvbU5vZGVzKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICd1cGRhdGVCb3VuZGluZ0JveENhY2hlcycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQm91bmRpbmdCb3hDYWNoZXMoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzOyAvLyBUaGlzIGlzIHRoZSBPTkxZIHBsYWNlIHRoYXQgcGFyZW50RGF0YSBhbmQgY2hpbGRyZW5EYXRhJ3MKICAgICAgICAgICAgLy8gYm91bmRpbmcgYm94ZXMgYXJlIHVwZGF0ZWQuIFRoZXkgd2lsbCBiZSBjYWxjdWxhdGVkIGF0IG90aGVyIHRpbWVzCiAgICAgICAgICAgIC8vIHRvIGJlIGNvbXBhcmVkIHRvIHRoaXMgdmFsdWUsIGJ1dCBpdCdzIGltcG9ydGFudCB0aGF0IHRoZSBjYWNoZSBpcwogICAgICAgICAgICAvLyB1cGRhdGVkIG9uY2UgcGVyIHVwZGF0ZS4KCgogICAgICAgICAgICB2YXIgcGFyZW50RG9tTm9kZSA9IHRoaXMucGFyZW50RGF0YS5kb21Ob2RlOwoKICAgICAgICAgICAgaWYgKCFwYXJlbnREb21Ob2RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnBhcmVudERhdGEuYm91bmRpbmdCb3ggPSB0aGlzLnByb3BzLmdldFBvc2l0aW9uKHBhcmVudERvbU5vZGUpOwogICAgICAgICAgICB0aGlzLnN0YXRlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gZ2V0S2V5KGNoaWxkKTsgLy8gSXQgaXMgcG9zc2libGUgdGhhdCBhIGNoaWxkIGRvZXMgbm90IGhhdmUgYSBga2V5YCBwcm9wZXJ0eTsKICAgICAgICAgICAgICAvLyBJZ25vcmUgdGhlc2UgY2hpbGRyZW4sIHRoZXkgZG9uJ3QgbmVlZCB0byBiZSBtb3ZlZC4KCiAgICAgICAgICAgICAgaWYgKCFjaGlsZEtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0gLy8gSW4gdmVyeSByYXJlIGNpcmN1bXN0YW5jZXMsIGZvciByZWFzb25zIHVua25vd24sIHRoZSByZWYgaXMgbmV2ZXIKICAgICAgICAgICAgICAvLyBwb3B1bGF0ZWQgZm9yIGNlcnRhaW4gY2hpbGRyZW4uIEluIHRoaXMgY2FzZSwgYXZvaWQgZG9pbmcgdGhpcyB1cGRhdGUuCiAgICAgICAgICAgICAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vam9zaHdjb21lYXUvcmVhY3QtZmxpcC1tb3ZlL3B1bGwvOTEKCgogICAgICAgICAgICAgIGlmICghX3RoaXM4Lmhhc0NoaWxkRGF0YShjaGlsZEtleSkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpczguZ2V0Q2hpbGREYXRhKGNoaWxkS2V5KTsgLy8gSWYgdGhlIGNoaWxkIGVsZW1lbnQgcmV0dXJucyBudWxsLCB3ZSBuZWVkIHRvIGF2b2lkIHRyeWluZyB0bwogICAgICAgICAgICAgIC8vIGFjY291bnQgZm9yIGl0CgoKICAgICAgICAgICAgICBpZiAoIWNoaWxkRGF0YS5kb21Ob2RlIHx8ICFjaGlsZCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXM4LnNldENoaWxkRGF0YShjaGlsZEtleSwgewogICAgICAgICAgICAgICAgYm91bmRpbmdCb3g6ICgwLCBfZG9tTWFuaXB1bGF0aW9uLmdldFJlbGF0aXZlQm91bmRpbmdCb3gpKHsKICAgICAgICAgICAgICAgICAgY2hpbGREb21Ob2RlOiBjaGlsZERhdGEuZG9tTm9kZSwKICAgICAgICAgICAgICAgICAgcGFyZW50RG9tTm9kZTogcGFyZW50RG9tTm9kZSwKICAgICAgICAgICAgICAgICAgZ2V0UG9zaXRpb246IF90aGlzOC5wcm9wcy5nZXRQb3NpdGlvbgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY29tcHV0ZUluaXRpYWxTdHlsZXMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVJbml0aWFsU3R5bGVzKGNoaWxkKSB7CiAgICAgICAgICAgIGlmIChjaGlsZC5hcHBlYXJpbmcpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5hcHBlYXJBbmltYXRpb24gPyB0aGlzLnByb3BzLmFwcGVhckFuaW1hdGlvbi5mcm9tIDoge307CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQuZW50ZXJpbmcpIHsKICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuZW50ZXJBbmltYXRpb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICAgICAgICB9IC8vIElmIHRoaXMgY2hpbGQgd2FzIGluIHRoZSBtaWRkbGUgb2YgbGVhdmluZywgaXQgc3RpbGwgaGFzIGl0cwogICAgICAgICAgICAgIC8vIGFic29sdXRlIHBvc2l0aW9uaW5nIHN0eWxlcyBhcHBsaWVkLiBXZSBuZWVkIHRvIHVuZG8gdGhvc2UuCgoKICAgICAgICAgICAgICByZXR1cm4gX2V4dGVuZHMoewogICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLAogICAgICAgICAgICAgICAgdG9wOiAnJywKICAgICAgICAgICAgICAgIGxlZnQ6ICcnLAogICAgICAgICAgICAgICAgcmlnaHQ6ICcnLAogICAgICAgICAgICAgICAgYm90dG9tOiAnJwogICAgICAgICAgICAgIH0sIHRoaXMucHJvcHMuZW50ZXJBbmltYXRpb24uZnJvbSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQubGVhdmluZykgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmxlYXZlQW5pbWF0aW9uID8gdGhpcy5wcm9wcy5sZWF2ZUFuaW1hdGlvbi5mcm9tIDoge307CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSB0aGlzLmdldENoaWxkRGF0YShnZXRLZXkoY2hpbGQpKTsKICAgICAgICAgICAgdmFyIGNoaWxkRG9tTm9kZSA9IGNoaWxkRGF0YS5kb21Ob2RlOwogICAgICAgICAgICB2YXIgY2hpbGRCb3VuZGluZ0JveCA9IGNoaWxkRGF0YS5ib3VuZGluZ0JveDsKICAgICAgICAgICAgdmFyIHBhcmVudEJvdW5kaW5nQm94ID0gdGhpcy5wYXJlbnREYXRhLmJvdW5kaW5nQm94OwoKICAgICAgICAgICAgaWYgKCFjaGlsZERvbU5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfZ2V0UG9zaXRpb25EZWx0YTMgPSAoMCwgX2RvbU1hbmlwdWxhdGlvbi5nZXRQb3NpdGlvbkRlbHRhKSh7CiAgICAgICAgICAgICAgY2hpbGREb21Ob2RlOiBjaGlsZERvbU5vZGUsCiAgICAgICAgICAgICAgY2hpbGRCb3VuZGluZ0JveDogY2hpbGRCb3VuZGluZ0JveCwKICAgICAgICAgICAgICBwYXJlbnRCb3VuZGluZ0JveDogcGFyZW50Qm91bmRpbmdCb3gsCiAgICAgICAgICAgICAgZ2V0UG9zaXRpb246IHRoaXMucHJvcHMuZ2V0UG9zaXRpb24KICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBfZ2V0UG9zaXRpb25EZWx0YTQgPSBfc2xpY2VkVG9BcnJheShfZ2V0UG9zaXRpb25EZWx0YTMsIDIpLAogICAgICAgICAgICAgICAgZFggPSBfZ2V0UG9zaXRpb25EZWx0YTRbMF0sCiAgICAgICAgICAgICAgICBkWSA9IF9nZXRQb3NpdGlvbkRlbHRhNFsxXTsKCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKCcgKyBkWCArICdweCwgJyArIGRZICsgJ3B4KScKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMKCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaXNBbmltYXRpb25EaXNhYmxlZCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNBbmltYXRpb25EaXNhYmxlZChwcm9wcykgewogICAgICAgICAgICAvLyBJZiB0aGUgY29tcG9uZW50IGlzIGV4cGxpY2l0bHkgcGFzc2VkIGEgYGRpc2FibGVBbGxBbmltYXRpb25zYCBmbGFnLAogICAgICAgICAgICAvLyB3ZSBjYW4gc2tpcCB0aGlzIHdob2xlIHByb2Nlc3MuIFNpbWlsYXJseSwgaWYgYWxsIG9mIHRoZSBudW1iZXJzIGhhdmUKICAgICAgICAgICAgLy8gYmVlbiBzZXQgdG8gMCwgdGhlcmUgaXMgbm8gcG9pbnQgaW4gdHJ5aW5nIHRvIGFuaW1hdGU7IGRvaW5nIHNvIHdvdWxkCiAgICAgICAgICAgIC8vIG9ubHkgY2F1c2UgYSBmbGlja2VyIChhbmQgdGhlIGludGVudCBpcyBwcm9iYWJseSB0byBkaXNhYmxlIGFuaW1hdGlvbnMpCiAgICAgICAgICAgIC8vIFdlIGNhbiBhbHNvIHNraXAgdGhpcyByaWdhbWFyb2xlIGlmIHRoZXJlJ3Mgbm8gYnJvd3NlciBzdXBwb3J0IGZvciBpdC4KICAgICAgICAgICAgcmV0dXJuIG5vQnJvd3NlclN1cHBvcnQgfHwgcHJvcHMuZGlzYWJsZUFsbEFuaW1hdGlvbnMgfHwgcHJvcHMuZHVyYXRpb24gPT09IDAgJiYgcHJvcHMuZGVsYXkgPT09IDAgJiYgcHJvcHMuc3RhZ2dlckR1cmF0aW9uQnkgPT09IDAgJiYgcHJvcHMuc3RhZ2dlckRlbGF5QnkgPT09IDA7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZmluZENoaWxkQnlLZXknLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRDaGlsZEJ5S2V5KGtleSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5jaGlsZHJlbi5maW5kKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgIHJldHVybiBnZXRLZXkoY2hpbGQpID09PSBrZXk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2hhc0NoaWxkRGF0YScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzQ2hpbGREYXRhKGtleSkgewogICAgICAgICAgICAvLyBPYmplY3QgaGFzIHNvbWUgYnVpbHQtaW4gcHJvcGVydGllcyBvbiBpdHMgcHJvdG90eXBlLCBzdWNoIGFzIHRvU3RyaW5nLiAgaGFzT3duUHJvcGVydHkgbWFrZXMKICAgICAgICAgICAgLy8gc3VyZSB0aGF0IGtleSBpcyBwcmVzZW50IG9uIGNoaWxkcmVuRGF0YSBpdHNlbGYsIG5vdCBvbiBpdHMgcHJvdG90eXBlLgogICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY2hpbGRyZW5EYXRhLCBrZXkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldENoaWxkRGF0YScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2hpbGREYXRhKGtleSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNDaGlsZERhdGEoa2V5KSA/IHRoaXMuY2hpbGRyZW5EYXRhW2tleV0gOiB7fTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdzZXRDaGlsZERhdGEnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENoaWxkRGF0YShrZXksIGRhdGEpIHsKICAgICAgICAgICAgdGhpcy5jaGlsZHJlbkRhdGFba2V5XSA9IF9leHRlbmRzKHt9LCB0aGlzLmdldENoaWxkRGF0YShrZXkpLCBkYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdyZW1vdmVDaGlsZERhdGEnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNoaWxkRGF0YShrZXkpIHsKICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hpbGRyZW5EYXRhW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY3JlYXRlSGVpZ2h0UGxhY2Vob2xkZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUhlaWdodFBsYWNlaG9sZGVyKCkgewogICAgICAgICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgICAgICAgIHZhciB0eXBlTmFtZSA9IHRoaXMucHJvcHMudHlwZU5hbWU7IC8vIElmIHJlcXVlc3RlZCwgY3JlYXRlIGFuIGludmlzaWJsZSBlbGVtZW50IGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QuCiAgICAgICAgICAgIC8vIEl0cyBoZWlnaHQgd2lsbCBiZSBtb2RpZmllZCB0byBwcmV2ZW50IHRoZSBjb250YWluZXIgZnJvbSBjb2xsYXBzaW5nCiAgICAgICAgICAgIC8vIHByZW1hdHVyZWx5LgoKICAgICAgICAgICAgdmFyIGlzQ29udGFpbmVyQUxpc3QgPSB0eXBlTmFtZSA9PT0gJ3VsJyB8fCB0eXBlTmFtZSA9PT0gJ29sJzsKICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyVHlwZSA9IGlzQ29udGFpbmVyQUxpc3QgPyAnbGknIDogJ2Rpdic7CiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChwbGFjZWhvbGRlclR5cGUsIHsKICAgICAgICAgICAgICBrZXk6ICdoZWlnaHQtcGxhY2Vob2xkZXInLAogICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGRvbU5vZGUpIHsKICAgICAgICAgICAgICAgIF90aGlzOS5oZWlnaHRQbGFjZWhvbGRlckRhdGEuZG9tTm9kZSA9IGRvbU5vZGU7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NoaWxkcmVuV2l0aFJlZnMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoaWxkcmVuV2l0aFJlZnMoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczEwID0gdGhpczsgLy8gV2UgbmVlZCB0byBjbG9uZSB0aGUgcHJvdmlkZWQgY2hpbGRyZW4sIGNhcHR1cmluZyBhIHJlZmVyZW5jZSB0byB0aGUKICAgICAgICAgICAgLy8gdW5kZXJseWluZyBET00gbm9kZS4gRmxpcCBNb3ZlIG5lZWRzIHRvIHVzZSB0aGUgUmVhY3QgZXNjYXBlIGhhdGNoZXMgdG8KICAgICAgICAgICAgLy8gYmUgYWJsZSB0byBkbyBpdHMgY2FsY3VsYXRpb25zLgoKCiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNsb25lRWxlbWVudChjaGlsZC5lbGVtZW50LCB7CiAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIC8vIFN0YXRlbGVzcyBGdW5jdGlvbmFsIENvbXBvbmVudHMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgRmxpcE1vdmUsCiAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhleSBkb24ndCBoYXZlIGluc3RhbmNlcy4KICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgZG9tTm9kZSA9ICgwLCBfZG9tTWFuaXB1bGF0aW9uLmdldE5hdGl2ZU5vZGUpKGVsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zZXRDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSwgewogICAgICAgICAgICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3JlbmRlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICAgICAgICB0eXBlTmFtZSA9IF9wcm9wczIudHlwZU5hbWUsCiAgICAgICAgICAgICAgICBkZWxlZ2F0ZWQgPSBfcHJvcHMyLmRlbGVnYXRlZCwKICAgICAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uID0gX3Byb3BzMi5sZWF2ZUFuaW1hdGlvbiwKICAgICAgICAgICAgICAgIG1haW50YWluQ29udGFpbmVySGVpZ2h0ID0gX3Byb3BzMi5tYWludGFpbkNvbnRhaW5lckhlaWdodDsKCiAgICAgICAgICAgIHZhciBwcm9wcyA9IF9leHRlbmRzKHt9LCBkZWxlZ2F0ZWQsIHsKICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihub2RlKSB7CiAgICAgICAgICAgICAgICBfdGhpczExLnBhcmVudERhdGEuZG9tTm9kZSA9IG5vZGU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW5XaXRoUmVmcygpOwoKICAgICAgICAgICAgaWYgKGxlYXZlQW5pbWF0aW9uICYmIG1haW50YWluQ29udGFpbmVySGVpZ2h0KSB7CiAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLmNyZWF0ZUhlaWdodFBsYWNlaG9sZGVyKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQodHlwZU5hbWUsIHByb3BzLCBjaGlsZHJlbik7CiAgICAgICAgICB9CiAgICAgICAgfV0pOwoKICAgICAgICByZXR1cm4gRmxpcE1vdmU7CiAgICAgIH0oX3JlYWN0LkNvbXBvbmVudCk7CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSAoMCwgX3Byb3BDb252ZXJ0ZXIyWyJkZWZhdWx0Il0pKEZsaXBNb3ZlKTsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQ1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyBAbm9mbG93CgogICAgICAvKioKICAgICAgICogUmVhY3QgRmxpcCBNb3ZlIC0gUG9seWZpbGxzCiAgICAgICAqIChjKSAyMDE2LXByZXNlbnQgSm9zaHVhIENvbWVhdQogICAgICAgKi8KCiAgICAgIC8qIGVzbGludC1kaXNhYmxlICovCgogICAgICBpZiAoIUFycmF5LnByb3RvdHlwZS5maW5kKSB7CiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAocHJlZGljYXRlKSB7CiAgICAgICAgICBpZiAodGhpcyA9PT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5wcm90b3R5cGUuZmluZCBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwcmVkaWNhdGUgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGxpc3QgPSBPYmplY3QodGhpcyk7CiAgICAgICAgICB2YXIgbGVuZ3RoID0gbGlzdC5sZW5ndGggPj4+IDA7CiAgICAgICAgICB2YXIgdGhpc0FyZyA9IGFyZ3VtZW50c1sxXTsKICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhbHVlID0gbGlzdFtpXTsKCiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaSwgbGlzdCkpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICghQXJyYXkucHJvdG90eXBlLmV2ZXJ5KSB7CiAgICAgICAgQXJyYXkucHJvdG90eXBlLmV2ZXJ5ID0gZnVuY3Rpb24gKGNhbGxiYWNrZm4sIHRoaXNBcmcpIHsKICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICB2YXIgVCwgazsKCiAgICAgICAgICBpZiAodGhpcyA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBPID0gT2JqZWN0KHRoaXMpOwogICAgICAgICAgdmFyIGxlbiA9IE8ubGVuZ3RoID4+PiAwOwoKICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2tmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIFQgPSB0aGlzQXJnOwogICAgICAgICAgfQoKICAgICAgICAgIGsgPSAwOwoKICAgICAgICAgIHdoaWxlIChrIDwgbGVuKSB7CiAgICAgICAgICAgIHZhciBrVmFsdWU7CgogICAgICAgICAgICBpZiAoayBpbiBPKSB7CiAgICAgICAgICAgICAga1ZhbHVlID0gT1trXTsKICAgICAgICAgICAgICB2YXIgdGVzdFJlc3VsdCA9IGNhbGxiYWNrZm4uY2FsbChULCBrVmFsdWUsIGssIE8pOwoKICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGsrKzsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHsKICAgICAgICBBcnJheS5pc0FycmF5ID0gZnVuY3Rpb24gKGFyZykgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBBcnJheV0nOwogICAgICAgIH07CiAgICAgIH0KICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTQ2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mNChTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiBfdHlwZW9mNChvYmopOwogICAgICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mNChvYmopOwogICAgICAgIH07CgogICAgICAgIHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICAgIH07CgogICAgICAgIHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICAgICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgICAgICAgICAgcmV0dXJuIENvbnN0cnVjdG9yOwogICAgICAgICAgfTsKICAgICAgICB9KCk7CgogICAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgICAgdmFyIF9lcnJvck1lc3NhZ2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDcpOwoKICAgICAgICB2YXIgX2VudGVyTGVhdmVQcmVzZXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpOwoKICAgICAgICB2YXIgX2hlbHBlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTsKCiAgICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICAgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgICAgICAgICBpZiAoIXNlbGYpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gY2FsbCAmJiAoX3R5cGVvZjQoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgICAgICAgICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyBfdHlwZW9mNChzdXBlckNsYXNzKSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgICAgICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVhY3QgRmxpcCBNb3ZlIHwgcHJvcENvbnZlcnRlcgogICAgICAgICAqIChjKSAyMDE2LXByZXNlbnQgSm9zaHVhIENvbWVhdQogICAgICAgICAqCiAgICAgICAgICogQWJzdHJhY3RlZCBhd2F5IGEgYnVuY2ggb2YgdGhlIG1lc3N5IGJ1c2luZXNzIHdpdGggcHJvcHMuCiAgICAgICAgICogICAtIHByb3BzIGZsb3cgdHlwZXMgYW5kIGRlZmF1bHRQcm9wcwogICAgICAgICAqICAgLSBUeXBlIGNvbnZlcnNpb24gKFdlIGFjY2VwdCAnc3RyaW5nJyBhbmQgJ251bWJlcicgdmFsdWVzIGZvciBkdXJhdGlvbiwKICAgICAgICAgKiAgICAgZGVsYXksIGFuZCBvdGhlciBmaWVsZHMsIGJ1dCB3ZSBhY3R1YWxseSBuZWVkIHRoZW0gdG8gYmUgaW50cy4pCiAgICAgICAgICogICAtIENoaWxkcmVuIGNvbnZlcnNpb24gKHdlIG5lZWQgdGhlIGNoaWxkcmVuIHRvIGJlIGFuIGFycmF5LiBNYXkgbm90IGFsd2F5cwogICAgICAgICAqICAgICBiZSwgaWYgYSBzaW5nbGUgY2hpbGQgaXMgcGFzc2VkIGluLikKICAgICAgICAgKiAgIC0gUmVzb2x2aW5nIGFuaW1hdGlvbiBwcmVzZXRzIGludG8gdGhlaXIgYmFzZSBDU1Mgc3R5bGVzCiAgICAgICAgICovCgogICAgICAgIC8qIGVzbGludC1kaXNhYmxlIGJsb2NrLXNjb3BlZC12YXIgKi8KCgogICAgICAgIHZhciBub2RlRW52ID0gdm9pZCAwOwoKICAgICAgICB0cnkgewogICAgICAgICAgbm9kZUVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIG5vZGVFbnYgPSAnZGV2ZWxvcG1lbnQnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJvcENvbnZlcnRlcihDb21wb3NlZENvbXBvbmVudCkgewogICAgICAgICAgdmFyIF9jbGFzcywgX3RlbXA7CgogICAgICAgICAgcmV0dXJuIF90ZW1wID0gX2NsYXNzID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAgICAgICAgICAgX2luaGVyaXRzKEZsaXBNb3ZlUHJvcENvbnZlcnRlciwgX0NvbXBvbmVudCk7CgogICAgICAgICAgICBmdW5jdGlvbiBGbGlwTW92ZVByb3BDb252ZXJ0ZXIoKSB7CiAgICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZsaXBNb3ZlUHJvcENvbnZlcnRlcik7CgogICAgICAgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRmxpcE1vdmVQcm9wQ29udmVydGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmxpcE1vdmVQcm9wQ29udmVydGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhGbGlwTW92ZVByb3BDb252ZXJ0ZXIsIFt7CiAgICAgICAgICAgICAga2V5OiAnY2hlY2tGb3JTdGF0ZWxlc3NGdW5jdGlvbmFsQ29tcG9uZW50cycsCiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tGb3JTdGF0ZWxlc3NGdW5jdGlvbmFsQ29tcG9uZW50cyhjaGlsZHJlbikgewogICAgICAgICAgICAgICAgLy8gU2tpcCBhbGwgY29uc29sZSB3YXJuaW5ncyBpbiBwcm9kdWN0aW9uLgogICAgICAgICAgICAgICAgLy8gQmFpbCBlYXJseSwgdG8gYXZvaWQgdW5uZWNlc3Nhcnkgd29yay4KICAgICAgICAgICAgICAgIGlmIChub2RlRW52ID09PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSAvLyBGbGlwTW92ZSBkb2VzIG5vdCBzdXBwb3J0IHN0YXRlbGVzcyBmdW5jdGlvbmFsIGNvbXBvbmVudHMuCiAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgYW55IHN1cHBsaWVkIGNvbXBvbmVudHMgd29uJ3Qgd29yay4KICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBkb2Vzbid0IGhhdmUgYSBrZXksIGl0IG1lYW5zIHdlIGFyZW4ndCBhbmltYXRpbmcgaXQuCiAgICAgICAgICAgICAgICAvLyBJdCdzIGFsbG93ZWQgdG8gYmUgYW4gU0ZDLCBzaW5jZSB3ZSBpZ25vcmUgaXQuCgoKICAgICAgICAgICAgICAgIHZhciBjaGlsZEFycmF5ID0gX3JlYWN0LkNoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pOwoKICAgICAgICAgICAgICAgIHZhciBub1N0YXRlbGVzcyA9IGNoaWxkQXJyYXkuZXZlcnkoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhKDAsIF9oZWxwZXJzLmlzRWxlbWVudEFuU0ZDKShjaGlsZCkgfHwgdHlwZW9mIGNoaWxkLmtleSA9PT0gJ3VuZGVmaW5lZCc7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoIW5vU3RhdGVsZXNzKSB7CiAgICAgICAgICAgICAgICAgICgwLCBfZXJyb3JNZXNzYWdlcy5zdGF0ZWxlc3NGdW5jdGlvbmFsQ29tcG9uZW50U3VwcGxpZWQpKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAga2V5OiAnY29udmVydFByb3BzJywKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydFByb3BzKHByb3BzKSB7CiAgICAgICAgICAgICAgICB2YXIgd29ya2luZ1Byb3BzID0gewogICAgICAgICAgICAgICAgICAvLyBleHBsaWNpdGx5IGJ5cGFzcyB0aGUgcHJvcHMgdGhhdCBkb24ndCBuZWVkIGNvbnZlcnNpb24KICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BzLmVhc2luZywKICAgICAgICAgICAgICAgICAgb25TdGFydDogcHJvcHMub25TdGFydCwKICAgICAgICAgICAgICAgICAgb25GaW5pc2g6IHByb3BzLm9uRmluaXNoLAogICAgICAgICAgICAgICAgICBvblN0YXJ0QWxsOiBwcm9wcy5vblN0YXJ0QWxsLAogICAgICAgICAgICAgICAgICBvbkZpbmlzaEFsbDogcHJvcHMub25GaW5pc2hBbGwsCiAgICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBwcm9wcy50eXBlTmFtZSwKICAgICAgICAgICAgICAgICAgZGlzYWJsZUFsbEFuaW1hdGlvbnM6IHByb3BzLmRpc2FibGVBbGxBbmltYXRpb25zLAogICAgICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogcHJvcHMuZ2V0UG9zaXRpb24sCiAgICAgICAgICAgICAgICAgIG1haW50YWluQ29udGFpbmVySGVpZ2h0OiBwcm9wcy5tYWludGFpbkNvbnRhaW5lckhlaWdodCwKICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IHByb3BzLnZlcnRpY2FsQWxpZ25tZW50LAogICAgICAgICAgICAgICAgICAvLyBEbyBzdHJpbmctdG8taW50IGNvbnZlcnNpb24gZm9yIGFsbCB0aW1pbmctcmVsYXRlZCBwcm9wcwogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5jb252ZXJ0VGltaW5nUHJvcCgnZHVyYXRpb24nKSwKICAgICAgICAgICAgICAgICAgZGVsYXk6IHRoaXMuY29udmVydFRpbWluZ1Byb3AoJ2RlbGF5JyksCiAgICAgICAgICAgICAgICAgIHN0YWdnZXJEdXJhdGlvbkJ5OiB0aGlzLmNvbnZlcnRUaW1pbmdQcm9wKCdzdGFnZ2VyRHVyYXRpb25CeScpLAogICAgICAgICAgICAgICAgICBzdGFnZ2VyRGVsYXlCeTogdGhpcy5jb252ZXJ0VGltaW5nUHJvcCgnc3RhZ2dlckRlbGF5QnknKSwKICAgICAgICAgICAgICAgICAgLy8gT3VyIGVudGVyL2xlYXZlIGFuaW1hdGlvbnMgY2FuIGJlIHNwZWNpZmllZCBhcyBib29sZWFuIChkZWZhdWx0IG9yCiAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGVkKSwgc3RyaW5nIChwcmVzZXQgbmFtZSksIG9yIG9iamVjdCAoYWN0dWFsIGFuaW1hdGlvbiB2YWx1ZXMpLgogICAgICAgICAgICAgICAgICAvLyBMZXQncyBzdGFuZGFyZGl6ZSB0aGlzIHNvIHRoYXQgdGhleSdyZSBhbHdheXMgb2JqZWN0cwogICAgICAgICAgICAgICAgICBhcHBlYXJBbmltYXRpb246IHRoaXMuY29udmVydEFuaW1hdGlvblByb3AocHJvcHMuYXBwZWFyQW5pbWF0aW9uLCBfZW50ZXJMZWF2ZVByZXNldHMuYXBwZWFyUHJlc2V0cyksCiAgICAgICAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uOiB0aGlzLmNvbnZlcnRBbmltYXRpb25Qcm9wKHByb3BzLmVudGVyQW5pbWF0aW9uLCBfZW50ZXJMZWF2ZVByZXNldHMuZW50ZXJQcmVzZXRzKSwKICAgICAgICAgICAgICAgICAgbGVhdmVBbmltYXRpb246IHRoaXMuY29udmVydEFuaW1hdGlvblByb3AocHJvcHMubGVhdmVBbmltYXRpb24sIF9lbnRlckxlYXZlUHJlc2V0cy5sZWF2ZVByZXNldHMpLAogICAgICAgICAgICAgICAgICBkZWxlZ2F0ZWQ6IHt9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5jaGVja0ZvclN0YXRlbGVzc0Z1bmN0aW9uYWxDb21wb25lbnRzKHdvcmtpbmdQcm9wcy5jaGlsZHJlbik7IC8vIEFjY2VwdCBgZGlzYWJsZUFuaW1hdGlvbnNgLCBidXQgYWRkIGEgZGVwcmVjYXRpb24gd2FybmluZwoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcHMuZGlzYWJsZUFuaW1hdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgIGlmIChub2RlRW52ICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAoMCwgX2Vycm9yTWVzc2FnZXMuZGVwcmVjYXRlZERpc2FibGVBbmltYXRpb25zKSgpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB3b3JraW5nUHJvcHMuZGlzYWJsZUFsbEFuaW1hdGlvbnMgPSBwcm9wcy5kaXNhYmxlQW5pbWF0aW9uczsKICAgICAgICAgICAgICAgIH0gLy8gR2F0aGVyIGFueSBhZGRpdGlvbmFsIHByb3BzOwogICAgICAgICAgICAgICAgLy8gdGhleSB3aWxsIGJlIGRlbGVnYXRlZCB0byB0aGUgUmVhY3RFbGVtZW50IGNyZWF0ZWQuCgoKICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5UHJvcEtleXMgPSBPYmplY3Qua2V5cyh3b3JraW5nUHJvcHMpOwogICAgICAgICAgICAgICAgdmFyIGRlbGVnYXRlZFByb3BzID0gKDAsIF9oZWxwZXJzLm9taXQpKHRoaXMucHJvcHMsIHByaW1hcnlQcm9wS2V5cyk7IC8vIFRoZSBGbGlwTW92ZSBjb250YWluZXIgZWxlbWVudCBuZWVkcyB0byBoYXZlIGEgbm9uLXN0YXRpYyBwb3NpdGlvbi4KICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBgcmVsYXRpdmVgIGJ5IGRlZmF1bHQsIGJ1dCBpdCBjYW4gYmUgb3ZlcnJpZGRlbiBieSB0aGUgdXNlci4KICAgICAgICAgICAgICAgIC8vIE5vdyB0aGF0IHdlJ3JlIGRlbGVnYXRpbmcgcHJvcHMsIHdlIG5lZWQgdG8gbWVyZ2UgdGhpcyBpbi4KCiAgICAgICAgICAgICAgICBkZWxlZ2F0ZWRQcm9wcy5zdHlsZSA9IF9leHRlbmRzKHsKICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScKICAgICAgICAgICAgICAgIH0sIGRlbGVnYXRlZFByb3BzLnN0eWxlKTsKICAgICAgICAgICAgICAgIHdvcmtpbmdQcm9wcy5kZWxlZ2F0ZWQgPSBkZWxlZ2F0ZWRQcm9wczsKICAgICAgICAgICAgICAgIHJldHVybiB3b3JraW5nUHJvcHM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAga2V5OiAnY29udmVydFRpbWluZ1Byb3AnLAogICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0VGltaW5nUHJvcChwcm9wKSB7CiAgICAgICAgICAgICAgICB2YXIgcmF3VmFsdWUgPSB0aGlzLnByb3BzW3Byb3BdOwogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdHlwZW9mIHJhd1ZhbHVlID09PSAnbnVtYmVyJyA/IHJhd1ZhbHVlIDogcGFyc2VJbnQocmF3VmFsdWUsIDEwKTsKCiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBGbGlwTW92ZVByb3BDb252ZXJ0ZXIuZGVmYXVsdFByb3BzW3Byb3BdOwoKICAgICAgICAgICAgICAgICAgaWYgKG5vZGVFbnYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICgwLCBfZXJyb3JNZXNzYWdlcy5pbnZhbGlkVHlwZUZvclRpbWluZ1Byb3ApKHsKICAgICAgICAgICAgICAgICAgICAgIHByb3A6IHByb3AsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmF3VmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzCgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAga2V5OiAnY29udmVydEFuaW1hdGlvblByb3AnLAogICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0QW5pbWF0aW9uUHJvcChhbmltYXRpb24sIHByZXNldHMpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIGFuaW1hdGlvbiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYW5pbWF0aW9uKSkgewogICAgICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIHRydWUsIHdlIHdhbnQgdG8gdXNlIHRoZSBkZWZhdWx0IHByZXNldC4KICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgZmFsc2UsIHdlIHdhbnQgdG8gdXNlIHRoZSAnbm9uZScgcHJlc2V0LgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXNldHNbYW5pbWF0aW9uID8gX2VudGVyTGVhdmVQcmVzZXRzLmRlZmF1bHRQcmVzZXQgOiBfZW50ZXJMZWF2ZVByZXNldHMuZGlzYWJsZVByZXNldF07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJlc2V0S2V5cyA9IE9iamVjdC5rZXlzKHByZXNldHMpOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXRLZXlzLmluZGV4T2YoYW5pbWF0aW9uKSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVFbnYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfZXJyb3JNZXNzYWdlcy5pbnZhbGlkRW50ZXJMZWF2ZVByZXNldCkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFuaW1hdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGFibGVWYWx1ZXM6IHByZXNldEtleXMuam9pbignLCAnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogX2VudGVyTGVhdmVQcmVzZXRzLmRlZmF1bHRQcmVzZXQKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXNldHNbX2VudGVyTGVhdmVQcmVzZXRzLmRlZmF1bHRQcmVzZXRdOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVzZXRzW2FuaW1hdGlvbl07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5pbWF0aW9uOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBrZXk6ICdyZW5kZXInLAogICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoQ29tcG9zZWRDb21wb25lbnQsIHRoaXMuY29udmVydFByb3BzKHRoaXMucHJvcHMpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1dKTsKCiAgICAgICAgICAgIHJldHVybiBGbGlwTW92ZVByb3BDb252ZXJ0ZXI7CiAgICAgICAgICB9KF9yZWFjdC5Db21wb25lbnQpLCBfY2xhc3MuZGVmYXVsdFByb3BzID0gewogICAgICAgICAgICBlYXNpbmc6ICdlYXNlLWluLW91dCcsCiAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsCiAgICAgICAgICAgIGRlbGF5OiAwLAogICAgICAgICAgICBzdGFnZ2VyRHVyYXRpb25CeTogMCwKICAgICAgICAgICAgc3RhZ2dlckRlbGF5Qnk6IDAsCiAgICAgICAgICAgIHR5cGVOYW1lOiAnZGl2JywKICAgICAgICAgICAgZW50ZXJBbmltYXRpb246IF9lbnRlckxlYXZlUHJlc2V0cy5kZWZhdWx0UHJlc2V0LAogICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbjogX2VudGVyTGVhdmVQcmVzZXRzLmRlZmF1bHRQcmVzZXQsCiAgICAgICAgICAgIGRpc2FibGVBbGxBbmltYXRpb25zOiBmYWxzZSwKICAgICAgICAgICAgZ2V0UG9zaXRpb246IGZ1bmN0aW9uIGdldFBvc2l0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWFpbnRhaW5Db250YWluZXJIZWlnaHQ6IGZhbHNlLAogICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudDogJ3RvcCcKICAgICAgICAgIH0sIF90ZW1wOwogICAgICAgIH0KCiAgICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gcHJvcENvbnZlcnRlcjsKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICBmdW5jdGlvbiB3YXJuT25jZShtc2cpIHsKICAgICAgICB2YXIgaGFzV2FybmVkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICghaGFzV2FybmVkKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2Fybihtc2cpOwogICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBzdGF0ZWxlc3NGdW5jdGlvbmFsQ29tcG9uZW50U3VwcGxpZWQgPSBleHBvcnRzLnN0YXRlbGVzc0Z1bmN0aW9uYWxDb21wb25lbnRTdXBwbGllZCA9IHdhcm5PbmNlKCdcbj4+IEVycm9yLCB2aWEgcmVhY3QtZmxpcC1tb3ZlIDw8XG5cbllvdSBwcm92aWRlZCBhIHN0YXRlbGVzcyBmdW5jdGlvbmFsIGNvbXBvbmVudCBhcyBhIGNoaWxkIHRvIDxGbGlwTW92ZT4uIFVuZm9ydHVuYXRlbHksIFNGQ3MgYXJlblwndCBzdXBwb3J0ZWQsIGJlY2F1c2UgRmxpcCBNb3ZlIG5lZWRzIGFjY2VzcyB0byB0aGUgYmFja2luZyBpbnN0YW5jZXMgdmlhIHJlZnMsIGFuZCBTRkNzIGRvblwndCBoYXZlIGEgcHVibGljIGluc3RhbmNlIHRoYXQgaG9sZHMgdGhhdCBpbmZvLlxuXG5QbGVhc2Ugd3JhcCB5b3VyIGNvbXBvbmVudHMgaW4gYSBuYXRpdmUgZWxlbWVudCAoZWcuIDxkaXY+KSwgb3IgYSBub24tZnVuY3Rpb25hbCBjb21wb25lbnQuXG4nKTsKCiAgICAgIHZhciBpbnZhbGlkVHlwZUZvclRpbWluZ1Byb3AgPSBleHBvcnRzLmludmFsaWRUeXBlRm9yVGltaW5nUHJvcCA9IGZ1bmN0aW9uIGludmFsaWRUeXBlRm9yVGltaW5nUHJvcChhcmdzKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1xuPj4gRXJyb3IsIHZpYSByZWFjdC1mbGlwLW1vdmUgPDxcblxuVGhlIHByb3AgeW91IHByb3ZpZGVkIGZvciBcJycgKyBhcmdzLnByb3AgKyAnXCcgaXMgaW52YWxpZC4gSXQgbmVlZHMgdG8gYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLCBvciBhIHN0cmluZyB0aGF0IGNhbiBiZSByZXNvbHZlZCB0byBhIG51bWJlci4gVGhlIHZhbHVlIHlvdSBwcm92aWRlZCBpcyBcJycgKyBhcmdzLnZhbHVlICsgJ1wnLlxuXG5BcyBhIHJlc3VsdCwgIHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciB3aWxsIGJlIHVzZWQsIHdoaWNoIGlzIFwnJyArIGFyZ3MuZGVmYXVsdFZhbHVlICsgJ1wnLlxuJyk7CiAgICAgIH07CgogICAgICB2YXIgZGVwcmVjYXRlZERpc2FibGVBbmltYXRpb25zID0gZXhwb3J0cy5kZXByZWNhdGVkRGlzYWJsZUFuaW1hdGlvbnMgPSB3YXJuT25jZSgnXG4+PiBXYXJuaW5nLCB2aWEgcmVhY3QtZmxpcC1tb3ZlIDw8XG5cblRoZSBcJ2Rpc2FibGVBbmltYXRpb25zXCcgcHJvcCB5b3UgcHJvdmlkZWQgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHN3aXRjaCB0byB1c2UgXCdkaXNhYmxlQWxsQW5pbWF0aW9uc1wnLlxuXG5UaGlzIHdpbGwgYmVjb21lIGEgc2lsZW50IGVycm9yIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiByZWFjdC1mbGlwLW1vdmUuXG4nKTsKCiAgICAgIHZhciBpbnZhbGlkRW50ZXJMZWF2ZVByZXNldCA9IGV4cG9ydHMuaW52YWxpZEVudGVyTGVhdmVQcmVzZXQgPSBmdW5jdGlvbiBpbnZhbGlkRW50ZXJMZWF2ZVByZXNldChhcmdzKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1xuPj4gRXJyb3IsIHZpYSByZWFjdC1mbGlwLW1vdmUgPDxcblxuVGhlIGVudGVyL2xlYXZlIHByZXNldCB5b3UgcHJvdmlkZWQgaXMgaW52YWxpZC4gV2UgZG9uXCd0IGN1cnJlbnRseSBoYXZlIGEgXCcnICsgYXJncy52YWx1ZSArICcgcHJlc2V0LlwnXG5cbkFjY2VwdGFibGUgdmFsdWVzIGFyZSAnICsgYXJncy5hY2NlcHRhYmxlVmFsdWVzICsgJy4gVGhlIGRlZmF1bHQgdmFsdWUgb2YgXCcnICsgYXJncy5kZWZhdWx0VmFsdWUgKyAnXCcgd2lsbCBiZSB1c2VkLlxuJyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE0OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKICAgICAgdmFyIGVudGVyUHJlc2V0cyA9IGV4cG9ydHMuZW50ZXJQcmVzZXRzID0gewogICAgICAgIGVsZXZhdG9yOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDApJywKICAgICAgICAgICAgb3BhY2l0eTogJzAnCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnJywKICAgICAgICAgICAgb3BhY2l0eTogJycKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZhZGU6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgb3BhY2l0eTogJzAnCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgb3BhY2l0eTogJycKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFjY29yZGlvblZlcnRpY2FsOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWSgwKScsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2NlbnRlciB0b3AnCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnY2VudGVyIHRvcCcKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFjY29yZGlvbkhvcml6b250YWw6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGVYKDApJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnbGVmdCBjZW50ZXInCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnbGVmdCBjZW50ZXInCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBub25lOiBudWxsCiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBSZWFjdCBGbGlwIE1vdmUgfCBlbnRlckxlYXZlUHJlc2V0cwogICAgICAgKiAoYykgMjAxNi1wcmVzZW50IEpvc2h1YSBDb21lYXUKICAgICAgICoKICAgICAgICogVGhpcyBjb250YWlucyB0aGUgbWFzdGVyIGxpc3Qgb2YgcHJlc2V0cyBhdmFpbGFibGUgZm9yIGVudGVyL2xlYXZlIGFuaW1hdGlvbnMsCiAgICAgICAqIGFsb25nIHdpdGggdGhlIG1hcHBpbmcgYmV0d2VlbiBwcmVzZXQgYW5kIHN0eWxlcy4KICAgICAgICovCgogICAgICB2YXIgbGVhdmVQcmVzZXRzID0gZXhwb3J0cy5sZWF2ZVByZXNldHMgPSB7CiAgICAgICAgZWxldmF0b3I6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMSknLAogICAgICAgICAgICBvcGFjaXR5OiAnMScKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKScsCiAgICAgICAgICAgIG9wYWNpdHk6ICcwJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZmFkZTogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICBvcGFjaXR5OiAnMScKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICBvcGFjaXR5OiAnMCcKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFjY29yZGlvblZlcnRpY2FsOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWSgxKScsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2NlbnRlciB0b3AnCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGVZKDApJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnY2VudGVyIHRvcCcKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFjY29yZGlvbkhvcml6b250YWw6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGVYKDEpJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnbGVmdCBjZW50ZXInCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGVYKDApJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnbGVmdCBjZW50ZXInCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBub25lOiBudWxsCiAgICAgIH07IC8vIEZvciBub3csIGFwcGVhclByZXNldHMgd2lsbCBiZSBpZGVudGljYWwgdG8gZW50ZXJQcmVzZXRzLgogICAgICAvLyBBc3NpZ25pbmcgYSBjdXN0b20gZXhwb3J0IGluIGNhc2Ugd2UgZXZlciB3YW50IHRvIGFkZCBhcHBlYXItc3BlY2lmaWMgb25lcy4KCiAgICAgIHZhciBhcHBlYXJQcmVzZXRzID0gZXhwb3J0cy5hcHBlYXJQcmVzZXRzID0gZW50ZXJQcmVzZXRzOyAvLyBFbWJhcnJhc3NpbmdseSBlbm91Z2gsIHYyLjAgbGF1bmNoZWQgd2l0aCB0eXBvJ2VkIHByZXNldCBuYW1lcy4KICAgICAgLy8gVG8gYXZvaWQgcGVubmluZyBhIG5ldyBtYWpvciB2ZXJzaW9uIG92ZXIgc29tZXRoaW5nIHNvIGluY29uc2VxdWVudGlhbCwKICAgICAgLy8gd2UncmUgc3VwcG9ydGluZyBib3RoIHNwZWxsaW5ncy4gSW4gYSBmdXR1cmUgdmVyc2lvbiwgdGhlc2UgYWx0ZXJuYXRpdmVzCiAgICAgIC8vIG1heSBiZSBkZXByZWNhdGVkLgogICAgICAvLyAkRmxvd0ZpeE1lCgogICAgICBlbnRlclByZXNldHMuYWNjb3JkaWFuVmVydGljYWwgPSBlbnRlclByZXNldHMuYWNjb3JkaW9uVmVydGljYWw7IC8vICRGbG93Rml4TWUKCiAgICAgIGVudGVyUHJlc2V0cy5hY2NvcmRpYW5Ib3Jpem9udGFsID0gZW50ZXJQcmVzZXRzLmFjY29yZGlvbkhvcml6b250YWw7IC8vICRGbG93Rml4TWUKCiAgICAgIGxlYXZlUHJlc2V0cy5hY2NvcmRpYW5WZXJ0aWNhbCA9IGxlYXZlUHJlc2V0cy5hY2NvcmRpb25WZXJ0aWNhbDsgLy8gJEZsb3dGaXhNZQoKICAgICAgbGVhdmVQcmVzZXRzLmFjY29yZGlhbkhvcml6b250YWwgPSBsZWF2ZVByZXNldHMuYWNjb3JkaW9uSG9yaXpvbnRhbDsKICAgICAgdmFyIGRlZmF1bHRQcmVzZXQgPSBleHBvcnRzLmRlZmF1bHRQcmVzZXQgPSAnZWxldmF0b3InOwogICAgICB2YXIgZGlzYWJsZVByZXNldCA9IGV4cG9ydHMuZGlzYWJsZVByZXNldCA9ICdub25lJzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CiAgICAgIGV4cG9ydHMuY3JlYXRlVHJhbnNpdGlvblN0cmluZyA9IGV4cG9ydHMuZ2V0TmF0aXZlTm9kZSA9IGV4cG9ydHMudXBkYXRlSGVpZ2h0UGxhY2Vob2xkZXIgPSBleHBvcnRzLnJlbW92ZU5vZGVGcm9tRE9NRmxvdyA9IGV4cG9ydHMuZ2V0UG9zaXRpb25EZWx0YSA9IGV4cG9ydHMuZ2V0UmVsYXRpdmVCb3VuZGluZ0JveCA9IHVuZGVmaW5lZDsKCiAgICAgIHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwogICAgICAvKioKICAgICAgICogUmVhY3QgRmxpcCBNb3ZlCiAgICAgICAqIChjKSAyMDE2LXByZXNlbnQgSm9zaHVhIENvbWVhdQogICAgICAgKgogICAgICAgKiBUaGVzZSBtZXRob2RzIHJlYWQgZnJvbSBhbmQgd3JpdGUgdG8gdGhlIERPTS4KICAgICAgICogVGhleSBhbG1vc3QgYWx3YXlzIGhhdmUgc2lkZSBlZmZlY3RzLCBhbmQgd2lsbCBob3BlZnVsbHkgYmVjb21lIHRoZQogICAgICAgKiBvbmx5IHNwb3QgaW4gdGhlIGNvZGViYXNlIHdpdGggaW1wdXJlIGZ1bmN0aW9ucy4KICAgICAgICovCgoKICAgICAgZXhwb3J0cy5hcHBseVN0eWxlc1RvRE9NTm9kZSA9IGFwcGx5U3R5bGVzVG9ET01Ob2RlOwogICAgICBleHBvcnRzLndoaWNoVHJhbnNpdGlvbkV2ZW50ID0gd2hpY2hUcmFuc2l0aW9uRXZlbnQ7CgogICAgICB2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpOwoKICAgICAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogICAgICAgIGlmIChrZXkgaW4gb2JqKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBvYmo7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGFwcGx5U3R5bGVzVG9ET01Ob2RlKF9yZWYpIHsKICAgICAgICB2YXIgZG9tTm9kZSA9IF9yZWYuZG9tTm9kZSwKICAgICAgICAgICAgc3R5bGVzID0gX3JlZi5zdHlsZXM7IC8vIENhbid0IGp1c3QgZG8gYW4gb2JqZWN0IG1lcmdlIGJlY2F1c2UgZG9tTm9kZS5zdHlsZXMgaXMgbm8gcmVndWxhciBvYmplY3QuCiAgICAgICAgLy8gTmVlZCB0byBkbyBpdCB0aGlzIHdheSBmb3IgdGhlIGVuZ2luZSB0byBmaXJlIGl0cyBgc2V0YCBsaXN0ZW5lcnMuCgogICAgICAgIE9iamVjdC5rZXlzKHN0eWxlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBkb21Ob2RlLnN0eWxlLnNldFByb3BlcnR5KCgwLCBfaGVscGVycy5oeXBoZW5hdGUpKGtleSksIHN0eWxlc1trZXldKTsKICAgICAgICB9KTsKICAgICAgfSAvLyBNb2RpZmllZCBmcm9tIE1vZGVybml6cgoKCiAgICAgIGZ1bmN0aW9uIHdoaWNoVHJhbnNpdGlvbkV2ZW50KCkgewogICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IHsKICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJywKICAgICAgICAgICctby10cmFuc2l0aW9uJzogJ29UcmFuc2l0aW9uRW5kJywKICAgICAgICAgICctbW96LXRyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcsCiAgICAgICAgICAnLXdlYmtpdC10cmFuc2l0aW9uJzogJ3dlYmtpdFRyYW5zaXRpb25FbmQnCiAgICAgICAgfTsgLy8gSWYgd2UncmUgcnVubmluZyBpbiBhIGJyb3dzZXJsZXNzIGVudmlyb25tZW50IChlZy4gU1NSKSwgaXQgZG9lc24ndCBhcHBseS4KICAgICAgICAvLyBSZXR1cm4gYSBwbGFjZWhvbGRlciBzdHJpbmcsIGZvciBjb25zaXN0ZW50IHR5cGUgcmV0dXJuLgoKICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuICcnOwogICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zha2VlbGVtZW50Jyk7CiAgICAgICAgdmFyIG1hdGNoID0gT2JqZWN0LmtleXModHJhbnNpdGlvbnMpLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiBlbC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHQpICE9PSB1bmRlZmluZWQ7CiAgICAgICAgfSk7IC8vIElmIG5vIGB0cmFuc2l0aW9uYCBpcyBmb3VuZCwgd2UgbXVzdCBiZSBydW5uaW5nIGluIGEgYnJvd3NlciBzbyBhbmNpZW50LAogICAgICAgIC8vIFJlYWN0IGl0c2VsZiB3b24ndCBydW4uIFJldHVybiBhbiBlbXB0eSBzdHJpbmcsIGZvciBjb25zaXN0ZW50IHR5cGUgcmV0dXJuCgogICAgICAgIHJldHVybiBtYXRjaCA/IHRyYW5zaXRpb25zW21hdGNoXSA6ICcnOwogICAgICB9CgogICAgICB2YXIgZ2V0UmVsYXRpdmVCb3VuZGluZ0JveCA9IGV4cG9ydHMuZ2V0UmVsYXRpdmVCb3VuZGluZ0JveCA9IGZ1bmN0aW9uIGdldFJlbGF0aXZlQm91bmRpbmdCb3goX3JlZjIpIHsKICAgICAgICB2YXIgY2hpbGREb21Ob2RlID0gX3JlZjIuY2hpbGREb21Ob2RlLAogICAgICAgICAgICBwYXJlbnREb21Ob2RlID0gX3JlZjIucGFyZW50RG9tTm9kZSwKICAgICAgICAgICAgZ2V0UG9zaXRpb24gPSBfcmVmMi5nZXRQb3NpdGlvbjsKICAgICAgICB2YXIgcGFyZW50Qm94ID0gZ2V0UG9zaXRpb24ocGFyZW50RG9tTm9kZSk7CgogICAgICAgIHZhciBfZ2V0UG9zaXRpb24gPSBnZXRQb3NpdGlvbihjaGlsZERvbU5vZGUpLAogICAgICAgICAgICB0b3AgPSBfZ2V0UG9zaXRpb24udG9wLAogICAgICAgICAgICBsZWZ0ID0gX2dldFBvc2l0aW9uLmxlZnQsCiAgICAgICAgICAgIHJpZ2h0ID0gX2dldFBvc2l0aW9uLnJpZ2h0LAogICAgICAgICAgICBib3R0b20gPSBfZ2V0UG9zaXRpb24uYm90dG9tLAogICAgICAgICAgICB3aWR0aCA9IF9nZXRQb3NpdGlvbi53aWR0aCwKICAgICAgICAgICAgaGVpZ2h0ID0gX2dldFBvc2l0aW9uLmhlaWdodDsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRvcDogdG9wIC0gcGFyZW50Qm94LnRvcCwKICAgICAgICAgIGxlZnQ6IGxlZnQgLSBwYXJlbnRCb3gubGVmdCwKICAgICAgICAgIHJpZ2h0OiBwYXJlbnRCb3gucmlnaHQgLSByaWdodCwKICAgICAgICAgIGJvdHRvbTogcGFyZW50Qm94LmJvdHRvbSAtIGJvdHRvbSwKICAgICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICAgIGhlaWdodDogaGVpZ2h0CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqIGdldFBvc2l0aW9uRGVsdGEKICAgICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZGVsdGEgYmV0d2VlbiB0d28gYm91bmRpbmcgYm94ZXMsIHRvIGZpZ3VyZSBvdXQKICAgICAgICogaG93IG1hbnkgcGl4ZWxzIG9uIGVhY2ggYXhpcyB0aGUgZWxlbWVudCBoYXMgbW92ZWQuCiAgICAgICAqCiAgICAgICAqLwoKCiAgICAgIHZhciBnZXRQb3NpdGlvbkRlbHRhID0gZXhwb3J0cy5nZXRQb3NpdGlvbkRlbHRhID0gZnVuY3Rpb24gZ2V0UG9zaXRpb25EZWx0YShfcmVmMykgewogICAgICAgIHZhciBjaGlsZERvbU5vZGUgPSBfcmVmMy5jaGlsZERvbU5vZGUsCiAgICAgICAgICAgIGNoaWxkQm91bmRpbmdCb3ggPSBfcmVmMy5jaGlsZEJvdW5kaW5nQm94LAogICAgICAgICAgICBwYXJlbnRCb3VuZGluZ0JveCA9IF9yZWYzLnBhcmVudEJvdW5kaW5nQm94LAogICAgICAgICAgICBnZXRQb3NpdGlvbiA9IF9yZWYzLmdldFBvc2l0aW9uOyAvLyBURU1QOiBBIG15c3RlcnkgYnVnIGlzIHNvbWV0aW1lcyBjYXVzaW5nIHVubmVjZXNzYXJ5IGJvdW5kaW5nQm94ZXMgdG8KCiAgICAgICAgdmFyIGRlZmF1bHRCb3ggPSB7CiAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgcmlnaHQ6IDAsCiAgICAgICAgICBib3R0b206IDAsCiAgICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgICB3aWR0aDogMAogICAgICAgIH07IC8vIE91ciBvbGQgYm94IGlzIGl0cyBsYXN0IGNhbGN1bGF0ZWQgcG9zaXRpb24sIGRlcml2ZWQgb24gbW91bnQgb3IgYXQgdGhlCiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHByZXZpb3VzIGFuaW1hdGlvbi4KCiAgICAgICAgdmFyIG9sZFJlbGF0aXZlQm94ID0gY2hpbGRCb3VuZGluZ0JveCB8fCBkZWZhdWx0Qm94OwogICAgICAgIHZhciBwYXJlbnRCb3ggPSBwYXJlbnRCb3VuZGluZ0JveCB8fCBkZWZhdWx0Qm94OyAvLyBPdXIgbmV3IGJveCBpcyB0aGUgbmV3IGZpbmFsIHJlc3RpbmcgcGxhY2U6IFdoZXJlIHdlIGV4cGVjdCBpdCB0byB3aW5kIHVwCiAgICAgICAgLy8gYWZ0ZXIgdGhlIGFuaW1hdGlvbi4gRmlyc3Qgd2UgZ2V0IHRoZSBib3ggaW4gYWJzb2x1dGUgdGVybXMgKEFLQSByZWxhdGl2ZQogICAgICAgIC8vIHRvIHRoZSB2aWV3cG9ydCksIGFuZCB0aGVuIHdlIGNhbGN1bGF0ZSBpdHMgcmVsYXRpdmUgYm94IChyZWxhdGl2ZSB0byB0aGUKICAgICAgICAvLyBwYXJlbnQgY29udGFpbmVyKQoKICAgICAgICB2YXIgbmV3QWJzb2x1dGVCb3ggPSBnZXRQb3NpdGlvbihjaGlsZERvbU5vZGUpOwogICAgICAgIHZhciBuZXdSZWxhdGl2ZUJveCA9IHsKICAgICAgICAgIHRvcDogbmV3QWJzb2x1dGVCb3gudG9wIC0gcGFyZW50Qm94LnRvcCwKICAgICAgICAgIGxlZnQ6IG5ld0Fic29sdXRlQm94LmxlZnQgLSBwYXJlbnRCb3gubGVmdAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIFtvbGRSZWxhdGl2ZUJveC5sZWZ0IC0gbmV3UmVsYXRpdmVCb3gubGVmdCwgb2xkUmVsYXRpdmVCb3gudG9wIC0gbmV3UmVsYXRpdmVCb3gudG9wXTsKICAgICAgfTsKICAgICAgLyoqIHJlbW92ZU5vZGVGcm9tRE9NRmxvdwogICAgICAgKiBUaGlzIG1ldGhvZCBkb2VzIHNvbWV0aGluZyB2ZXJ5IHNuZWFreTogaXQgcmVtb3ZlcyBhIERPTSBub2RlIGZyb20gdGhlCiAgICAgICAqIGRvY3VtZW50IGZsb3csIGJ1dCB3aXRob3V0IGFjdHVhbGx5IGNoYW5naW5nIGl0cyBvbi1zY3JlZW4gcG9zaXRpb24uCiAgICAgICAqCiAgICAgICAqIEl0IHdvcmtzIGJ5IGNhbGN1bGF0aW5nIHdoZXJlIHRoZSBub2RlIGlzLCBhbmQgdGhlbiBhcHBseWluZyBzdHlsZXMKICAgICAgICogc28gdGhhdCBpdCB3aW5kcyB1cCBiZWluZyBwb3NpdGlvbmVkIGFic29sdXRlbHksIGJ1dCBpbiBleGFjdGx5IHRoZQogICAgICAgKiBzYW1lIHBsYWNlLgogICAgICAgKgogICAgICAgKiBUaGlzIGlzIGEgdml0YWwgcGFydCBvZiB0aGUgRkxJUCB0ZWNobmlxdWUuCiAgICAgICAqLwoKCiAgICAgIHZhciByZW1vdmVOb2RlRnJvbURPTUZsb3cgPSBleHBvcnRzLnJlbW92ZU5vZGVGcm9tRE9NRmxvdyA9IGZ1bmN0aW9uIHJlbW92ZU5vZGVGcm9tRE9NRmxvdyhjaGlsZERhdGEsIHZlcnRpY2FsQWxpZ25tZW50KSB7CiAgICAgICAgdmFyIGRvbU5vZGUgPSBjaGlsZERhdGEuZG9tTm9kZSwKICAgICAgICAgICAgYm91bmRpbmdCb3ggPSBjaGlsZERhdGEuYm91bmRpbmdCb3g7CgogICAgICAgIGlmICghZG9tTm9kZSB8fCAhYm91bmRpbmdCb3gpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIEZvciB0aGlzIHRvIHdvcmssIHdlIGhhdmUgdG8gb2Zmc2V0IGFueSBnaXZlbiBgbWFyZ2luYC4KCgogICAgICAgIHZhciBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvbU5vZGUpOyAvLyBXZSBuZWVkIHRvIGNsZWFuIHVwIG1hcmdpbnMsIGJ5IGNvbnZlcnRpbmcgYW5kIHJlbW92aW5nIHN1ZmZpeDoKICAgICAgICAvLyBlZy4gJzIxcHgnIC0+IDIxCgogICAgICAgIHZhciBtYXJnaW5BdHRycyA9IFsnbWFyZ2luLXRvcCcsICdtYXJnaW4tbGVmdCcsICdtYXJnaW4tcmlnaHQnXTsKICAgICAgICB2YXIgbWFyZ2lucyA9IG1hcmdpbkF0dHJzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBtYXJnaW4pIHsKICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbCA9IGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUobWFyZ2luKTsKICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgYWNjLCBfZGVmaW5lUHJvcGVydHkoe30sIG1hcmdpbiwgTnVtYmVyKHByb3BlcnR5VmFsLnJlcGxhY2UoJ3B4JywgJycpKSkpOwogICAgICAgIH0sIHt9KTsgLy8gSWYgd2UncmUgYm90dG9tLWFsaWduZWQsIHdlIG5lZWQgdG8gYWRkIHRoZSBoZWlnaHQgb2YgdGhlIGNoaWxkIHRvIGl0cwogICAgICAgIC8vIHRvcCBvZmZzZXQuIFRoaXMgaXMgYmVjYXVzZSwgd2hlbiB0aGUgY29udGFpbmVyIGlzIGJvdHRvbS1hbGlnbmVkLCBpdHMKICAgICAgICAvLyBoZWlnaHQgc2hyaW5rcyBmcm9tIHRoZSB0b3AsIG5vdCB0aGUgYm90dG9tLiBXZSdyZSByZW1vdmluZyB0aGlzIG5vZGUKICAgICAgICAvLyBmcm9tIHRoZSBmbG93LCBzbyB0aGUgdG9wIGlzIGdvaW5nIHRvIGRyb3AgYnkgaXRzIGhlaWdodC4KCiAgICAgICAgdmFyIHRvcE9mZnNldCA9IHZlcnRpY2FsQWxpZ25tZW50ID09PSAnYm90dG9tJyA/IGJvdW5kaW5nQm94LnRvcCAtIGJvdW5kaW5nQm94LmhlaWdodCA6IGJvdW5kaW5nQm94LnRvcDsKICAgICAgICB2YXIgc3R5bGVzID0gewogICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsCiAgICAgICAgICB0b3A6IHRvcE9mZnNldCAtIG1hcmdpbnNbJ21hcmdpbi10b3AnXSArICdweCcsCiAgICAgICAgICBsZWZ0OiBib3VuZGluZ0JveC5sZWZ0IC0gbWFyZ2luc1snbWFyZ2luLWxlZnQnXSArICdweCcsCiAgICAgICAgICByaWdodDogYm91bmRpbmdCb3gucmlnaHQgLSBtYXJnaW5zWydtYXJnaW4tcmlnaHQnXSArICdweCcKICAgICAgICB9OwogICAgICAgIGFwcGx5U3R5bGVzVG9ET01Ob2RlKHsKICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUsCiAgICAgICAgICBzdHlsZXM6IHN0eWxlcwogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKiogdXBkYXRlSGVpZ2h0UGxhY2Vob2xkZXIKICAgICAgICogQW4gb3B0aW9uYWwgcHJvcGVydHkgdG8gRmxpcE1vdmUgaXMgYSBgbWFpbnRhaW5Db250YWluZXJIZWlnaHRgIGJvb2xlYW4uCiAgICAgICAqIFRoaXMgcHJvcGVydHkgY3JlYXRlcyBhIG5vZGUgdGhhdCBmaWxscyBzcGFjZSwgc28gdGhhdCB0aGUgcGFyZW50CiAgICAgICAqIGNvbnRhaW5lciBkb2Vzbid0IGNvbGxhcHNlIHdoZW4gaXRzIGNoaWxkcmVuIGFyZSByZW1vdmVkIGZyb20gdGhlCiAgICAgICAqIGRvY3VtZW50IGZsb3cuCiAgICAgICAqLwoKCiAgICAgIHZhciB1cGRhdGVIZWlnaHRQbGFjZWhvbGRlciA9IGV4cG9ydHMudXBkYXRlSGVpZ2h0UGxhY2Vob2xkZXIgPSBmdW5jdGlvbiB1cGRhdGVIZWlnaHRQbGFjZWhvbGRlcihfcmVmNCkgewogICAgICAgIHZhciBkb21Ob2RlID0gX3JlZjQuZG9tTm9kZSwKICAgICAgICAgICAgcGFyZW50RGF0YSA9IF9yZWY0LnBhcmVudERhdGEsCiAgICAgICAgICAgIGdldFBvc2l0aW9uID0gX3JlZjQuZ2V0UG9zaXRpb247CiAgICAgICAgdmFyIHBhcmVudERvbU5vZGUgPSBwYXJlbnREYXRhLmRvbU5vZGU7CiAgICAgICAgdmFyIHBhcmVudEJvdW5kaW5nQm94ID0gcGFyZW50RGF0YS5ib3VuZGluZ0JveDsKCiAgICAgICAgaWYgKCFwYXJlbnREb21Ob2RlIHx8ICFwYXJlbnRCb3VuZGluZ0JveCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gV2UgbmVlZCB0byBmaW5kIHRoZSBoZWlnaHQgb2YgdGhlIGNvbnRhaW5lciAqd2l0aG91dCogdGhlIHBsYWNlaG9sZGVyLgogICAgICAgIC8vIFNpbmNlIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgcGxhY2Vob2xkZXIgbWlnaHQgYWxyZWFkeSBiZSBwcmVzZW50LAogICAgICAgIC8vIHdlIGZpcnN0IHNldCBpdHMgaGVpZ2h0IHRvIDAuCiAgICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIGNvbnRhaW5lciB0byBjb2xsYXBzZSBkb3duIHRvIHRoZSBzaXplIG9mIGp1c3QgaXRzCiAgICAgICAgLy8gY29udGVudCAocGx1cyBjb250YWluZXIgcGFkZGluZyBvciBib3JkZXJzIGlmIGFueSkuCgoKICAgICAgICBhcHBseVN0eWxlc1RvRE9NTm9kZSh7CiAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlLAogICAgICAgICAgc3R5bGVzOiB7CiAgICAgICAgICAgIGhlaWdodDogJzAnCiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vIEZpbmQgdGhlIGRpc3RhbmNlIGJ5IHdoaWNoIHRoZSBjb250YWluZXIgd291bGQgYmUgY29sbGFwc2VkIGJ5IGVsZW1lbnRzCiAgICAgICAgLy8gbGVhdmluZy4gV2UgY29tcGFyZSB0aGUgZnJlc2hseS1hdmFpbGFibGUgcGFyZW50IGhlaWdodCB3aXRoIHRoZSBvcmlnaW5hbCwKICAgICAgICAvLyBjYWNoZWQgY29udGFpbmVyIGhlaWdodC4KCiAgICAgICAgdmFyIG9yaWdpbmFsUGFyZW50SGVpZ2h0ID0gcGFyZW50Qm91bmRpbmdCb3guaGVpZ2h0OwogICAgICAgIHZhciBjb2xsYXBzZWRQYXJlbnRIZWlnaHQgPSBnZXRQb3NpdGlvbihwYXJlbnREb21Ob2RlKS5oZWlnaHQ7CiAgICAgICAgdmFyIHJlZHVjdGlvbkluSGVpZ2h0ID0gb3JpZ2luYWxQYXJlbnRIZWlnaHQgLSBjb2xsYXBzZWRQYXJlbnRIZWlnaHQ7IC8vIElmIHRoZSBjb250YWluZXIgaGFzIGJlY29tZSBzaG9ydGVyLCB1cGRhdGUgdGhlIHBhZGRpbmcgZWxlbWVudCdzCiAgICAgICAgLy8gaGVpZ2h0IHRvIHRha2UgdXAgdGhlIGRpZmZlcmVuY2UuIE90aGVyd2lzZSBzZXQgaXRzIGhlaWdodCB0byB6ZXJvLAogICAgICAgIC8vIHNvIHRoYXQgaXQgaGFzIG5vIGVmZmVjdC4KCiAgICAgICAgdmFyIHN0eWxlcyA9IHsKICAgICAgICAgIGhlaWdodDogcmVkdWN0aW9uSW5IZWlnaHQgPiAwID8gcmVkdWN0aW9uSW5IZWlnaHQgKyAncHgnIDogJzAnCiAgICAgICAgfTsKICAgICAgICBhcHBseVN0eWxlc1RvRE9NTm9kZSh7CiAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlLAogICAgICAgICAgc3R5bGVzOiBzdHlsZXMKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBnZXROYXRpdmVOb2RlID0gZXhwb3J0cy5nZXROYXRpdmVOb2RlID0gZnVuY3Rpb24gZ2V0TmF0aXZlTm9kZShlbGVtZW50KSB7CiAgICAgICAgLy8gV2hlbiBydW5uaW5nIGluIGEgd2luZG93bGVzcyBlbnZpcm9ubWVudCwgYWJvcnQhCiAgICAgICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0gLy8gYGVsZW1lbnRgIG1heSBhbHJlYWR5IGJlIGEgbmF0aXZlIG5vZGUuCgoKICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICB9IC8vIFdoaWxlIFJlYWN0RE9NJ3MgYGZpbmRET01Ob2RlYCBpcyBkaXNjb3VyYWdlZCwgaXQncyB0aGUgb25seQogICAgICAgIC8vIHB1YmxpY2x5LWV4cG9zZWQgd2F5IHRvIGZpbmQgdGhlIHVuZGVybHlpbmcgRE9NIG5vZGUgZm9yCiAgICAgICAgLy8gY29tcG9zaXRlIGNvbXBvbmVudHMuCgoKICAgICAgICB2YXIgZm91bmROb2RlID0gKDAsIF9yZWFjdERvbS5maW5kRE9NTm9kZSkoZWxlbWVudCk7CgogICAgICAgIGlmICghKGZvdW5kTm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgewogICAgICAgICAgLy8gVGV4dCBub2RlcyBhcmUgbm90IHN1cHBvcnRlZAogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZm91bmROb2RlOwogICAgICB9OwoKICAgICAgdmFyIGNyZWF0ZVRyYW5zaXRpb25TdHJpbmcgPSBleHBvcnRzLmNyZWF0ZVRyYW5zaXRpb25TdHJpbmcgPSBmdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uU3RyaW5nKGluZGV4LCBwcm9wcykgewogICAgICAgIHZhciBkZWxheSA9IHByb3BzLmRlbGF5LAogICAgICAgICAgICBkdXJhdGlvbiA9IHByb3BzLmR1cmF0aW9uOwogICAgICAgIHZhciBzdGFnZ2VyRHVyYXRpb25CeSA9IHByb3BzLnN0YWdnZXJEdXJhdGlvbkJ5LAogICAgICAgICAgICBzdGFnZ2VyRGVsYXlCeSA9IHByb3BzLnN0YWdnZXJEZWxheUJ5LAogICAgICAgICAgICBlYXNpbmcgPSBwcm9wcy5lYXNpbmc7CiAgICAgICAgZGVsYXkgKz0gaW5kZXggKiBzdGFnZ2VyRGVsYXlCeTsKICAgICAgICBkdXJhdGlvbiArPSBpbmRleCAqIHN0YWdnZXJEdXJhdGlvbkJ5OwogICAgICAgIHZhciBjc3NQcm9wZXJ0aWVzID0gWyd0cmFuc2Zvcm0nLCAnb3BhY2l0eSddOwogICAgICAgIHJldHVybiBjc3NQcm9wZXJ0aWVzLm1hcChmdW5jdGlvbiAocHJvcCkgewogICAgICAgICAgcmV0dXJuIHByb3AgKyAnICcgKyBkdXJhdGlvbiArICdtcyAnICsgZWFzaW5nICsgJyAnICsgZGVsYXkgKyAnbXMnOwogICAgICAgIH0pLmpvaW4oJywgJyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE1MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOwogICAgICAvKiEKICAgICAgQXV0b3NpemUgMy4wLjIxCiAgICAgIGxpY2Vuc2U6IE1JVAogICAgICBodHRwOi8vd3d3LmphY2tsbW9vcmUuY29tL2F1dG9zaXplCiAgICAgICovCgoKICAgICAgKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICAgICAgICBpZiAodHJ1ZSkgewogICAgICAgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW2V4cG9ydHMsIG1vZHVsZV0sIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IGZhY3RvcnksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gdHlwZW9mIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9PT0gJ2Z1bmN0aW9uJyA/IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICBmYWN0b3J5KGV4cG9ydHMsIG1vZHVsZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBtb2QgPSB7CiAgICAgICAgICAgIGV4cG9ydHM6IHt9CiAgICAgICAgICB9OwogICAgICAgICAgZmFjdG9yeShtb2QuZXhwb3J0cywgbW9kKTsKICAgICAgICAgIGdsb2JhbC5hdXRvc2l6ZSA9IG1vZC5leHBvcnRzOwogICAgICAgIH0KICAgICAgfSkodGhpcywgZnVuY3Rpb24gKGV4cG9ydHMsIG1vZHVsZSkgewogICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgdmFyIG1hcCA9IHR5cGVvZiBNYXAgPT09ICJmdW5jdGlvbiIgPyBuZXcgTWFwKCkgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIga2V5cyA9IFtdOwogICAgICAgICAgdmFyIHZhbHVlcyA9IFtdOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGtleXMuaW5kZXhPZihrZXkpID4gLTE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGtleSkgewogICAgICAgICAgICAgIHJldHVybiB2YWx1ZXNba2V5cy5pbmRleE9mKGtleSldOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7CiAgICAgICAgICAgICAgaWYgKGtleXMuaW5kZXhPZihrZXkpID09PSAtMSkgewogICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAnZGVsZXRlJzogZnVuY3Rpb24gX2RlbGV0ZShrZXkpIHsKICAgICAgICAgICAgICB2YXIgaW5kZXggPSBrZXlzLmluZGV4T2Yoa2V5KTsKCiAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICAgICAgICAgIGtleXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgIHZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9KCk7CgogICAgICAgIHZhciBjcmVhdGVFdmVudCA9IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHsKICAgICAgICAgIHJldHVybiBuZXcgRXZlbnQobmFtZSwgewogICAgICAgICAgICBidWJibGVzOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICB0cnkgewogICAgICAgICAgbmV3IEV2ZW50KCd0ZXN0Jyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8gSUUgZG9lcyBub3Qgc3VwcG9ydCBgbmV3IEV2ZW50KClgCiAgICAgICAgICBjcmVhdGVFdmVudCA9IGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHsKICAgICAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpOwogICAgICAgICAgICBldnQuaW5pdEV2ZW50KG5hbWUsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuIGV2dDsKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhc3NpZ24odGEpIHsKICAgICAgICAgIGlmICghdGEgfHwgIXRhLm5vZGVOYW1lIHx8IHRhLm5vZGVOYW1lICE9PSAnVEVYVEFSRUEnIHx8IG1hcC5oYXModGEpKSByZXR1cm47CiAgICAgICAgICB2YXIgaGVpZ2h0T2Zmc2V0ID0gbnVsbDsKICAgICAgICAgIHZhciBjbGllbnRXaWR0aCA9IHRhLmNsaWVudFdpZHRoOwogICAgICAgICAgdmFyIGNhY2hlZEhlaWdodCA9IG51bGw7CgogICAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAgICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpOwoKICAgICAgICAgICAgaWYgKHN0eWxlLnJlc2l6ZSA9PT0gJ3ZlcnRpY2FsJykgewogICAgICAgICAgICAgIHRhLnN0eWxlLnJlc2l6ZSA9ICdub25lJzsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdHlsZS5yZXNpemUgPT09ICdib3RoJykgewogICAgICAgICAgICAgIHRhLnN0eWxlLnJlc2l6ZSA9ICdob3Jpem9udGFsJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHN0eWxlLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94JykgewogICAgICAgICAgICAgIGhlaWdodE9mZnNldCA9IC0ocGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGhlaWdodE9mZnNldCA9IHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpICsgcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJCb3R0b21XaWR0aCk7CiAgICAgICAgICAgIH0gLy8gRml4IHdoZW4gYSB0ZXh0YXJlYSBpcyBub3Qgb24gZG9jdW1lbnQgYm9keSBhbmQgaGVpZ2h0T2Zmc2V0IGlzIE5vdCBhIE51bWJlcgoKCiAgICAgICAgICAgIGlmIChpc05hTihoZWlnaHRPZmZzZXQpKSB7CiAgICAgICAgICAgICAgaGVpZ2h0T2Zmc2V0ID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdXBkYXRlKCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY2hhbmdlT3ZlcmZsb3codmFsdWUpIHsKICAgICAgICAgICAgewogICAgICAgICAgICAgIC8vIENocm9tZS9TYWZhcmktc3BlY2lmaWMgZml4OgogICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHRleHRhcmVhIHktb3ZlcmZsb3cgaXMgaGlkZGVuLCBDaHJvbWUvU2FmYXJpIGRvIG5vdCByZWZsb3cgdGhlIHRleHQgdG8gYWNjb3VudCBmb3IgdGhlIHNwYWNlCiAgICAgICAgICAgICAgLy8gbWFkZSBhdmFpbGFibGUgYnkgcmVtb3ZpbmcgdGhlIHNjcm9sbGJhci4gVGhlIGZvbGxvd2luZyBmb3JjZXMgdGhlIG5lY2Vzc2FyeSB0ZXh0IHJlZmxvdy4KICAgICAgICAgICAgICB2YXIgd2lkdGggPSB0YS5zdHlsZS53aWR0aDsKICAgICAgICAgICAgICB0YS5zdHlsZS53aWR0aCA9ICcwcHgnOyAvLyBGb3JjZSByZWZsb3c6CgogICAgICAgICAgICAgIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi8KCiAgICAgICAgICAgICAgdGEub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgICAgLyoganNoaW50IGlnbm9yZTplbmQgKi8KCiAgICAgICAgICAgICAgdGEuc3R5bGUud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0YS5zdHlsZS5vdmVyZmxvd1kgPSB2YWx1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBnZXRQYXJlbnRPdmVyZmxvd3MoZWwpIHsKICAgICAgICAgICAgdmFyIGFyciA9IFtdOwoKICAgICAgICAgICAgd2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgICAgICAgICAgICBpZiAoZWwucGFyZW50Tm9kZS5zY3JvbGxUb3ApIHsKICAgICAgICAgICAgICAgIGFyci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbm9kZTogZWwucGFyZW50Tm9kZSwKICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBlbC5wYXJlbnROb2RlLnNjcm9sbFRvcAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBhcnI7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcmVzaXplKCkgewogICAgICAgICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSB0YS5zdHlsZS5oZWlnaHQ7CiAgICAgICAgICAgIHZhciBvdmVyZmxvd3MgPSBnZXRQYXJlbnRPdmVyZmxvd3ModGEpOwogICAgICAgICAgICB2YXIgZG9jVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7IC8vIE5lZWRlZCBmb3IgTW9iaWxlIElFICh0aWNrZXQgIzI0MCkKCiAgICAgICAgICAgIHRhLnN0eWxlLmhlaWdodCA9ICdhdXRvJzsKICAgICAgICAgICAgdmFyIGVuZEhlaWdodCA9IHRhLnNjcm9sbEhlaWdodCArIGhlaWdodE9mZnNldDsKCiAgICAgICAgICAgIGlmICh0YS5zY3JvbGxIZWlnaHQgPT09IDApIHsKICAgICAgICAgICAgICAvLyBJZiB0aGUgc2Nyb2xsSGVpZ2h0IGlzIDAsIHRoZW4gdGhlIGVsZW1lbnQgcHJvYmFibHkgaGFzIGRpc3BsYXk6bm9uZSBvciBpcyBkZXRhY2hlZCBmcm9tIHRoZSBET00uCiAgICAgICAgICAgICAgdGEuc3R5bGUuaGVpZ2h0ID0gb3JpZ2luYWxIZWlnaHQ7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0YS5zdHlsZS5oZWlnaHQgPSBlbmRIZWlnaHQgKyAncHgnOyAvLyB1c2VkIHRvIGNoZWNrIGlmIGFuIHVwZGF0ZSBpcyBhY3R1YWxseSBuZWNlc3Nhcnkgb24gd2luZG93LnJlc2l6ZQoKICAgICAgICAgICAgY2xpZW50V2lkdGggPSB0YS5jbGllbnRXaWR0aDsgLy8gcHJldmVudHMgc2Nyb2xsLXBvc2l0aW9uIGp1bXBpbmcKCiAgICAgICAgICAgIG92ZXJmbG93cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgIGVsLm5vZGUuc2Nyb2xsVG9wID0gZWwuc2Nyb2xsVG9wOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChkb2NUb3ApIHsKICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gZG9jVG9wOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICAgICAgICByZXNpemUoKTsKICAgICAgICAgICAgdmFyIHN0eWxlSGVpZ2h0ID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KHRhLnN0eWxlLmhlaWdodCkpOwogICAgICAgICAgICB2YXIgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YSwgbnVsbCk7IC8vIFVzaW5nIG9mZnNldEhlaWdodCBhcyBhIHJlcGxhY2VtZW50IGZvciBjb21wdXRlZC5oZWlnaHQgaW4gSUUsIGJlY2F1c2UgSUUgZG9lcyBub3QgYWNjb3VudCB1c2Ugb2YgYm9yZGVyLWJveAoKICAgICAgICAgICAgdmFyIGFjdHVhbEhlaWdodCA9IGNvbXB1dGVkLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94JyA/IE1hdGgucm91bmQocGFyc2VGbG9hdChjb21wdXRlZC5oZWlnaHQpKSA6IHRhLm9mZnNldEhlaWdodDsgLy8gVGhlIGFjdHVhbCBoZWlnaHQgbm90IG1hdGNoaW5nIHRoZSBzdHlsZSBoZWlnaHQgKHNldCB2aWEgdGhlIHJlc2l6ZSBtZXRob2QpIGluZGljYXRlcyB0aGF0CiAgICAgICAgICAgIC8vIHRoZSBtYXgtaGVpZ2h0IGhhcyBiZWVuIGV4Y2VlZGVkLCBpbiB3aGljaCBjYXNlIHRoZSBvdmVyZmxvdyBzaG91bGQgYmUgYWxsb3dlZC4KCiAgICAgICAgICAgIGlmIChhY3R1YWxIZWlnaHQgIT09IHN0eWxlSGVpZ2h0KSB7CiAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkLm92ZXJmbG93WSA9PT0gJ2hpZGRlbicpIHsKICAgICAgICAgICAgICAgIGNoYW5nZU92ZXJmbG93KCdzY3JvbGwnKTsKICAgICAgICAgICAgICAgIHJlc2l6ZSgpOwogICAgICAgICAgICAgICAgYWN0dWFsSGVpZ2h0ID0gY29tcHV0ZWQuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhLCBudWxsKS5oZWlnaHQpKSA6IHRhLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gTm9ybWFsbHkga2VlcCBvdmVyZmxvdyBzZXQgdG8gaGlkZGVuLCB0byBhdm9pZCBmbGFzaCBvZiBzY3JvbGxiYXIgYXMgdGhlIHRleHRhcmVhIGV4cGFuZHMuCiAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkLm92ZXJmbG93WSAhPT0gJ2hpZGRlbicpIHsKICAgICAgICAgICAgICAgIGNoYW5nZU92ZXJmbG93KCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIHJlc2l6ZSgpOwogICAgICAgICAgICAgICAgYWN0dWFsSGVpZ2h0ID0gY29tcHV0ZWQuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhLCBudWxsKS5oZWlnaHQpKSA6IHRhLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjYWNoZWRIZWlnaHQgIT09IGFjdHVhbEhlaWdodCkgewogICAgICAgICAgICAgIGNhY2hlZEhlaWdodCA9IGFjdHVhbEhlaWdodDsKICAgICAgICAgICAgICB2YXIgZXZ0ID0gY3JlYXRlRXZlbnQoJ2F1dG9zaXplOnJlc2l6ZWQnKTsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRhLmRpc3BhdGNoRXZlbnQoZXZ0KTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsvLyBGaXJlZm94IHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZGlzcGF0Y2hFdmVudCBmb3IgYSBkZXRhY2hlZCBlbGVtZW50CiAgICAgICAgICAgICAgICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD04ODkzNzYKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcGFnZVJlc2l6ZSA9IGZ1bmN0aW9uIHBhZ2VSZXNpemUoKSB7CiAgICAgICAgICAgIGlmICh0YS5jbGllbnRXaWR0aCAhPT0gY2xpZW50V2lkdGgpIHsKICAgICAgICAgICAgICB1cGRhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICB2YXIgZGVzdHJveSA9IGZ1bmN0aW9uIChzdHlsZSkgewogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcGFnZVJlc2l6ZSwgZmFsc2UpOwogICAgICAgICAgICB0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZSwgZmFsc2UpOwogICAgICAgICAgICB0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHVwZGF0ZSwgZmFsc2UpOwogICAgICAgICAgICB0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdhdXRvc2l6ZTpkZXN0cm95JywgZGVzdHJveSwgZmFsc2UpOwogICAgICAgICAgICB0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdhdXRvc2l6ZTp1cGRhdGUnLCB1cGRhdGUsIGZhbHNlKTsKICAgICAgICAgICAgT2JqZWN0LmtleXMoc3R5bGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgIHRhLnN0eWxlW2tleV0gPSBzdHlsZVtrZXldOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbWFwWydkZWxldGUnXSh0YSk7CiAgICAgICAgICB9LmJpbmQodGEsIHsKICAgICAgICAgICAgaGVpZ2h0OiB0YS5zdHlsZS5oZWlnaHQsCiAgICAgICAgICAgIHJlc2l6ZTogdGEuc3R5bGUucmVzaXplLAogICAgICAgICAgICBvdmVyZmxvd1k6IHRhLnN0eWxlLm92ZXJmbG93WSwKICAgICAgICAgICAgb3ZlcmZsb3dYOiB0YS5zdHlsZS5vdmVyZmxvd1gsCiAgICAgICAgICAgIHdvcmRXcmFwOiB0YS5zdHlsZS53b3JkV3JhcAogICAgICAgICAgfSk7CgogICAgICAgICAgdGEuYWRkRXZlbnRMaXN0ZW5lcignYXV0b3NpemU6ZGVzdHJveScsIGRlc3Ryb3ksIGZhbHNlKTsgLy8gSUU5IGRvZXMgbm90IGZpcmUgb25wcm9wZXJ0eWNoYW5nZSBvciBvbmlucHV0IGZvciBkZWxldGlvbnMsCiAgICAgICAgICAvLyBzbyBiaW5kaW5nIHRvIG9ua2V5dXAgdG8gY2F0Y2ggbW9zdCBvZiB0aG9zZSBldmVudHMuCiAgICAgICAgICAvLyBUaGVyZSBpcyBubyB3YXkgdGhhdCBJIGtub3cgb2YgdG8gZGV0ZWN0IHNvbWV0aGluZyBsaWtlICdjdXQnIGluIElFOS4KCiAgICAgICAgICBpZiAoJ29ucHJvcGVydHljaGFuZ2UnIGluIHRhICYmICdvbmlucHV0JyBpbiB0YSkgewogICAgICAgICAgICB0YS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHVwZGF0ZSwgZmFsc2UpOwogICAgICAgICAgfQoKICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBwYWdlUmVzaXplLCBmYWxzZSk7CiAgICAgICAgICB0YS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZSwgZmFsc2UpOwogICAgICAgICAgdGEuYWRkRXZlbnRMaXN0ZW5lcignYXV0b3NpemU6dXBkYXRlJywgdXBkYXRlLCBmYWxzZSk7CiAgICAgICAgICB0YS5zdHlsZS5vdmVyZmxvd1ggPSAnaGlkZGVuJzsKICAgICAgICAgIHRhLnN0eWxlLndvcmRXcmFwID0gJ2JyZWFrLXdvcmQnOwogICAgICAgICAgbWFwLnNldCh0YSwgewogICAgICAgICAgICBkZXN0cm95OiBkZXN0cm95LAogICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZQogICAgICAgICAgfSk7CiAgICAgICAgICBpbml0KCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkZXN0cm95KHRhKSB7CiAgICAgICAgICB2YXIgbWV0aG9kcyA9IG1hcC5nZXQodGEpOwoKICAgICAgICAgIGlmIChtZXRob2RzKSB7CiAgICAgICAgICAgIG1ldGhvZHMuZGVzdHJveSgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKHRhKSB7CiAgICAgICAgICB2YXIgbWV0aG9kcyA9IG1hcC5nZXQodGEpOwoKICAgICAgICAgIGlmIChtZXRob2RzKSB7CiAgICAgICAgICAgIG1ldGhvZHMudXBkYXRlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgYXV0b3NpemUgPSBudWxsOyAvLyBEbyBub3RoaW5nIGluIE5vZGUuanMgZW52aXJvbm1lbnQgYW5kIElFOCAob3IgbG93ZXIpCgogICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygd2luZG93LmdldENvbXB1dGVkU3R5bGUgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGF1dG9zaXplID0gZnVuY3Rpb24gYXV0b3NpemUoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfTsKCiAgICAgICAgICBhdXRvc2l6ZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbDsKICAgICAgICAgIH07CgogICAgICAgICAgYXV0b3NpemUudXBkYXRlID0gZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbDsKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF1dG9zaXplID0gZnVuY3Rpb24gYXV0b3NpemUoZWwsIG9wdGlvbnMpIHsKICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYXNzaWduKHgsIG9wdGlvbnMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZWw7CiAgICAgICAgICB9OwoKICAgICAgICAgIGF1dG9zaXplLmRlc3Ryb3kgPSBmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIGRlc3Ryb3kpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZWw7CiAgICAgICAgICB9OwoKICAgICAgICAgIGF1dG9zaXplLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICBpZiAoZWwpIHsKICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsLmxlbmd0aCA/IGVsIDogW2VsXSwgdXBkYXRlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gYXV0b3NpemU7CiAgICAgIH0pOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAobGFuZ3VhZ2UpIHsKICAgICAgICByZXR1cm4gbmV3IF9wb2x5Z2xvdDJbImRlZmF1bHQiXSh7CiAgICAgICAgICBwaHJhc2VzOiBpMThuTWFwW2xhbmd1YWdlXSB8fCBpMThuTWFwLmVuLAogICAgICAgICAgbG9jYWxlOiBsYW5ndWFnZQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIF9wb2x5Z2xvdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTsKCiAgICAgIHZhciBfcG9seWdsb3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9seWdsb3QpOwoKICAgICAgdmFyIF96aENOID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpOwoKICAgICAgdmFyIF96aENOMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3poQ04pOwoKICAgICAgdmFyIF96aFRXID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpOwoKICAgICAgdmFyIF96aFRXMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3poVFcpOwoKICAgICAgdmFyIF9lbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTU1KTsKCiAgICAgIHZhciBfZW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZW4pOwoKICAgICAgdmFyIF9lc0VTID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTYpOwoKICAgICAgdmFyIF9lc0VTMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzRVMpOwoKICAgICAgdmFyIF9mciA9IF9fd2VicGFja19yZXF1aXJlX18oMTU3KTsKCiAgICAgIHZhciBfZnIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZnIpOwoKICAgICAgdmFyIF9ydSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTsKCiAgICAgIHZhciBfcnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnUpOwoKICAgICAgdmFyIF9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU5KTsKCiAgICAgIHZhciBfZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGUpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgaTE4bk1hcCA9IHsKICAgICAgICAnemgnOiBfemhDTjJbImRlZmF1bHQiXSwKICAgICAgICAnemgtQ04nOiBfemhDTjJbImRlZmF1bHQiXSwKICAgICAgICAnemgtVFcnOiBfemhUVzJbImRlZmF1bHQiXSwKICAgICAgICAnZW4nOiBfZW4yWyJkZWZhdWx0Il0sCiAgICAgICAgJ2VzLUVTJzogX2VzRVMyWyJkZWZhdWx0Il0sCiAgICAgICAgJ2ZyJzogX2ZyMlsiZGVmYXVsdCJdLAogICAgICAgICdydSc6IF9ydTJbImRlZmF1bHQiXSwKICAgICAgICAnZGUnOiBfZGUyWyJkZWZhdWx0Il0KICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187IC8vICAgICAoYykgMjAxMiBBaXJibmIsIEluYy4KICAgICAgLy8KICAgICAgLy8gICAgIHBvbHlnbG90LmpzIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBCU0QKICAgICAgLy8gICAgIGxpY2Vuc2UuIEZvciBhbGwgbGljZW5zaW5nIGluZm9ybWF0aW9uLCBkZXRhaWxzLCBhbmQgZG9jdW1lbnRpb246CiAgICAgIC8vICAgICBodHRwOi8vYWlyYm5iLmdpdGh1Yi5jb20vcG9seWdsb3QuanMKICAgICAgLy8KICAgICAgLy8KICAgICAgLy8gUG9seWdsb3QuanMgaXMgYW4gSTE4biBoZWxwZXIgbGlicmFyeSB3cml0dGVuIGluIEphdmFTY3JpcHQsIG1hZGUgdG8KICAgICAgLy8gd29yayBib3RoIGluIHRoZSBicm93c2VyIGFuZCBpbiBOb2RlLiBJdCBwcm92aWRlcyBhIHNpbXBsZSBzb2x1dGlvbiBmb3IKICAgICAgLy8gaW50ZXJwb2xhdGlvbiBhbmQgcGx1cmFsaXphdGlvbiwgYmFzZWQgb2ZmIG9mIEFpcmJuYidzCiAgICAgIC8vIGV4cGVyaWVuY2UgYWRkaW5nIEkxOG4gZnVuY3Rpb25hbGl0eSB0byBpdHMgQmFja2JvbmUuanMgYW5kIE5vZGUgYXBwcy4KICAgICAgLy8KICAgICAgLy8gUG9seWxnbG90IGlzIGFnbm9zdGljIHRvIHlvdXIgdHJhbnNsYXRpb24gYmFja2VuZC4gSXQgZG9lc24ndCBwZXJmb3JtIGFueQogICAgICAvLyB0cmFuc2xhdGlvbjsgaXQgc2ltcGx5IGdpdmVzIHlvdSBhIHdheSB0byBtYW5hZ2UgdHJhbnNsYXRlZCBwaHJhc2VzIGZyb20KICAgICAgLy8geW91ciBjbGllbnQtIG9yIHNlcnZlci1zaWRlIEphdmFTY3JpcHQgYXBwbGljYXRpb24uCiAgICAgIC8vCgoKICAgICAgKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CiAgICAgICAgaWYgKHRydWUpIHsKICAgICAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnkocm9vdCk7CiAgICAgICAgICB9LmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7CiAgICAgICAgfSBlbHNlIGlmIChfdHlwZW9mNChleHBvcnRzKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyb290KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcm9vdC5Qb2x5Z2xvdCA9IGZhY3Rvcnkocm9vdCk7CiAgICAgICAgfQogICAgICB9KSh0aGlzLCBmdW5jdGlvbiAocm9vdCkgewogICAgICAgICd1c2Ugc3RyaWN0JzsgLy8gIyMjIFBvbHlnbG90IGNsYXNzIGNvbnN0cnVjdG9yCgogICAgICAgIGZ1bmN0aW9uIFBvbHlnbG90KG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdGhpcy5waHJhc2VzID0ge307CiAgICAgICAgICB0aGlzLmV4dGVuZChvcHRpb25zLnBocmFzZXMgfHwge30pOwogICAgICAgICAgdGhpcy5jdXJyZW50TG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgJ2VuJzsKICAgICAgICAgIHRoaXMuYWxsb3dNaXNzaW5nID0gISFvcHRpb25zLmFsbG93TWlzc2luZzsKICAgICAgICAgIHRoaXMud2FybiA9IG9wdGlvbnMud2FybiB8fCB3YXJuOwogICAgICAgIH0gLy8gIyMjIFZlcnNpb24KCgogICAgICAgIFBvbHlnbG90LlZFUlNJT04gPSAnMC40LjMnOyAvLyAjIyMgcG9seWdsb3QubG9jYWxlKFtsb2NhbGVdKQogICAgICAgIC8vCiAgICAgICAgLy8gR2V0IG9yIHNldCBsb2NhbGUuIEludGVybmFsbHksIFBvbHlnbG90IG9ubHkgdXNlcyBsb2NhbGUgZm9yIHBsdXJhbGl6YXRpb24uCgogICAgICAgIFBvbHlnbG90LnByb3RvdHlwZS5sb2NhbGUgPSBmdW5jdGlvbiAobmV3TG9jYWxlKSB7CiAgICAgICAgICBpZiAobmV3TG9jYWxlKSB0aGlzLmN1cnJlbnRMb2NhbGUgPSBuZXdMb2NhbGU7CiAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50TG9jYWxlOwogICAgICAgIH07IC8vICMjIyBwb2x5Z2xvdC5leHRlbmQocGhyYXNlcykKICAgICAgICAvLwogICAgICAgIC8vIFVzZSBgZXh0ZW5kYCB0byB0ZWxsIFBvbHlnbG90IGhvdyB0byB0cmFuc2xhdGUgYSBnaXZlbiBrZXkuCiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcG9seWdsb3QuZXh0ZW5kKHsKICAgICAgICAvLyAgICAgICAiaGVsbG8iOiAiSGVsbG8iLAogICAgICAgIC8vICAgICAgICJoZWxsb19uYW1lIjogIkhlbGxvLCAle25hbWV9IgogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLwogICAgICAgIC8vIFRoZSBrZXkgY2FuIGJlIGFueSBzdHJpbmcuICBGZWVsIGZyZWUgdG8gY2FsbCBgZXh0ZW5kYCBtdWx0aXBsZSB0aW1lczsKICAgICAgICAvLyBpdCB3aWxsIG92ZXJyaWRlIGFueSBwaHJhc2VzIHdpdGggdGhlIHNhbWUga2V5LCBidXQgbGVhdmUgZXhpc3RpbmcgcGhyYXNlcwogICAgICAgIC8vIHVudG91Y2hlZC4KICAgICAgICAvLwogICAgICAgIC8vIEl0IGlzIGFsc28gcG9zc2libGUgdG8gcGFzcyBuZXN0ZWQgcGhyYXNlIG9iamVjdHMsIHdoaWNoIGdldCBmbGF0dGVuZWQKICAgICAgICAvLyBpbnRvIGFuIG9iamVjdCB3aXRoIHRoZSBuZXN0ZWQga2V5cyBjb25jYXRlbmF0ZWQgdXNpbmcgZG90IG5vdGF0aW9uLgogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHBvbHlnbG90LmV4dGVuZCh7CiAgICAgICAgLy8gICAgICAgIm5hdiI6IHsKICAgICAgICAvLyAgICAgICAgICJoZWxsbyI6ICJIZWxsbyIsCiAgICAgICAgLy8gICAgICAgICAiaGVsbG9fbmFtZSI6ICJIZWxsbywgJXtuYW1lfSIsCiAgICAgICAgLy8gICAgICAgICAic2lkZWJhciI6IHsKICAgICAgICAvLyAgICAgICAgICAgIndlbGNvbWUiOiAiV2VsY29tZSIKICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAvLyAgICAgICB9CiAgICAgICAgLy8gICAgIH0pOwogICAgICAgIC8vCiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHBvbHlnbG90LnBocmFzZXMpOwogICAgICAgIC8vICAgICAvLyB7CiAgICAgICAgLy8gICAgIC8vICAgJ25hdi5oZWxsbyc6ICdIZWxsbycsCiAgICAgICAgLy8gICAgIC8vICAgJ25hdi5oZWxsb19uYW1lJzogJ0hlbGxvLCAle25hbWV9JywKICAgICAgICAvLyAgICAgLy8gICAnbmF2LnNpZGViYXIud2VsY29tZSc6ICdXZWxjb21lJwogICAgICAgIC8vICAgICAvLyB9CiAgICAgICAgLy8KICAgICAgICAvLyBgZXh0ZW5kYCBhY2NlcHRzIGFuIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVudCwgYHByZWZpeGAsIHdoaWNoIGNhbiBiZSB1c2VkCiAgICAgICAgLy8gdG8gcHJlZml4IGV2ZXJ5IGtleSBpbiB0aGUgcGhyYXNlcyBvYmplY3Qgd2l0aCBzb21lIHN0cmluZywgdXNpbmcgZG90CiAgICAgICAgLy8gbm90YXRpb24uCiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcG9seWdsb3QuZXh0ZW5kKHsKICAgICAgICAvLyAgICAgICAiaGVsbG8iOiAiSGVsbG8iLAogICAgICAgIC8vICAgICAgICJoZWxsb19uYW1lIjogIkhlbGxvLCAle25hbWV9IgogICAgICAgIC8vICAgICB9LCAibmF2Iik7CiAgICAgICAgLy8KICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocG9seWdsb3QucGhyYXNlcyk7CiAgICAgICAgLy8gICAgIC8vIHsKICAgICAgICAvLyAgICAgLy8gICAnbmF2LmhlbGxvJzogJ0hlbGxvJywKICAgICAgICAvLyAgICAgLy8gICAnbmF2LmhlbGxvX25hbWUnOiAnSGVsbG8sICV7bmFtZX0nCiAgICAgICAgLy8gICAgIC8vIH0KICAgICAgICAvLwogICAgICAgIC8vIFRoaXMgZmVhdHVyZSBpcyB1c2VkIGludGVybmFsbHkgdG8gc3VwcG9ydCBuZXN0ZWQgcGhyYXNlIG9iamVjdHMuCgoKICAgICAgICBQb2x5Z2xvdC5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKG1vcmVQaHJhc2VzLCBwcmVmaXgpIHsKICAgICAgICAgIHZhciBwaHJhc2U7CgogICAgICAgICAgZm9yICh2YXIga2V5IGluIG1vcmVQaHJhc2VzKSB7CiAgICAgICAgICAgIGlmIChtb3JlUGhyYXNlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgICAgcGhyYXNlID0gbW9yZVBocmFzZXNba2V5XTsKICAgICAgICAgICAgICBpZiAocHJlZml4KSBrZXkgPSBwcmVmaXggKyAnLicgKyBrZXk7CgogICAgICAgICAgICAgIGlmIChfdHlwZW9mNChwaHJhc2UpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgdGhpcy5leHRlbmQocGhyYXNlLCBrZXkpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnBocmFzZXNba2V5XSA9IHBocmFzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OyAvLyAjIyMgcG9seWdsb3QuY2xlYXIoKQogICAgICAgIC8vCiAgICAgICAgLy8gQ2xlYXJzIGFsbCBwaHJhc2VzLiBVc2VmdWwgZm9yIHNwZWNpYWwgY2FzZXMsIHN1Y2ggYXMgZnJlZWluZwogICAgICAgIC8vIHVwIG1lbW9yeSBpZiB5b3UgaGF2ZSBsb3RzIG9mIHBocmFzZXMgYnV0IG5vIGxvbmdlciBuZWVkIHRvCiAgICAgICAgLy8gcGVyZm9ybSBhbnkgdHJhbnNsYXRpb24uIEFsc28gdXNlZCBpbnRlcm5hbGx5IGJ5IGByZXBsYWNlYC4KCgogICAgICAgIFBvbHlnbG90LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMucGhyYXNlcyA9IHt9OwogICAgICAgIH07IC8vICMjIyBwb2x5Z2xvdC5yZXBsYWNlKHBocmFzZXMpCiAgICAgICAgLy8KICAgICAgICAvLyBDb21wbGV0ZWx5IHJlcGxhY2UgdGhlIGV4aXN0aW5nIHBocmFzZXMgd2l0aCBhIG5ldyBzZXQgb2YgcGhyYXNlcy4KICAgICAgICAvLyBOb3JtYWxseSwganVzdCB1c2UgYGV4dGVuZGAgdG8gYWRkIG1vcmUgcGhyYXNlcywgYnV0IHVuZGVyIGNlcnRhaW4KICAgICAgICAvLyBjaXJjdW1zdGFuY2VzLCB5b3UgbWF5IHdhbnQgdG8gbWFrZSBzdXJlIG5vIG9sZCBwaHJhc2VzIGFyZSBseWluZyBhcm91bmQuCgoKICAgICAgICBQb2x5Z2xvdC5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIChuZXdQaHJhc2VzKSB7CiAgICAgICAgICB0aGlzLmNsZWFyKCk7CiAgICAgICAgICB0aGlzLmV4dGVuZChuZXdQaHJhc2VzKTsKICAgICAgICB9OyAvLyAjIyMgcG9seWdsb3QudChrZXksIG9wdGlvbnMpCiAgICAgICAgLy8KICAgICAgICAvLyBUaGUgbW9zdC11c2VkIG1ldGhvZC4gUHJvdmlkZSBhIGtleSwgYW5kIGB0YCB3aWxsIHJldHVybiB0aGUKICAgICAgICAvLyBwaHJhc2UuCiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcG9seWdsb3QudCgiaGVsbG8iKTsKICAgICAgICAvLyAgICAgPT4gIkhlbGxvIgogICAgICAgIC8vCiAgICAgICAgLy8gVGhlIHBocmFzZSB2YWx1ZSBpcyBwcm92aWRlZCBmaXJzdCBieSBhIGNhbGwgdG8gYHBvbHlnbG90LmV4dGVuZCgpYCBvcgogICAgICAgIC8vIGBwb2x5Z2xvdC5yZXBsYWNlKClgLgogICAgICAgIC8vCiAgICAgICAgLy8gUGFzcyBpbiBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB0byBwZXJmb3JtIGludGVycG9sYXRpb24uCiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcG9seWdsb3QudCgiaGVsbG9fbmFtZSIsIHtuYW1lOiAiU3Bpa2UifSk7CiAgICAgICAgLy8gICAgID0+ICJIZWxsbywgU3Bpa2UiCiAgICAgICAgLy8KICAgICAgICAvLyBJZiB5b3UgbGlrZSwgeW91IGNhbiBwcm92aWRlIGEgZGVmYXVsdCB2YWx1ZSBpbiBjYXNlIHRoZSBwaHJhc2UgaXMgbWlzc2luZy4KICAgICAgICAvLyBVc2UgdGhlIHNwZWNpYWwgb3B0aW9uIGtleSAiXyIgdG8gc3BlY2lmeSBhIGRlZmF1bHQuCiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcG9seWdsb3QudCgiaV9saWtlX3RvX3dyaXRlX2luX2xhbmd1YWdlIiwgewogICAgICAgIC8vICAgICAgIF86ICJJIGxpa2UgdG8gd3JpdGUgaW4gJXtsYW5ndWFnZX0uIiwKICAgICAgICAvLyAgICAgICBsYW5ndWFnZTogIkphdmFTY3JpcHQiCiAgICAgICAgLy8gICAgIH0pOwogICAgICAgIC8vICAgICA9PiAiSSBsaWtlIHRvIHdyaXRlIGluIEphdmFTY3JpcHQuIgogICAgICAgIC8vCgoKICAgICAgICBQb2x5Z2xvdC5wcm90b3R5cGUudCA9IGZ1bmN0aW9uIChrZXksIG9wdGlvbnMpIHsKICAgICAgICAgIHZhciBwaHJhc2UsIHJlc3VsdDsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID09IG51bGwgPyB7fSA6IG9wdGlvbnM7IC8vIGFsbG93IG51bWJlciBhcyBhIHBsdXJhbGl6YXRpb24gc2hvcnRjdXQKCiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgc21hcnRfY291bnQ6IG9wdGlvbnMKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucGhyYXNlc1trZXldID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBwaHJhc2UgPSB0aGlzLnBocmFzZXNba2V5XTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuXyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcGhyYXNlID0gb3B0aW9ucy5fOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFsbG93TWlzc2luZykgewogICAgICAgICAgICBwaHJhc2UgPSBrZXk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLndhcm4oJ01pc3NpbmcgdHJhbnNsYXRpb24gZm9yIGtleTogIicgKyBrZXkgKyAnIicpOwogICAgICAgICAgICByZXN1bHQgPSBrZXk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBwaHJhc2UgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIG9wdGlvbnMgPSBjbG9uZShvcHRpb25zKTsKICAgICAgICAgICAgcmVzdWx0ID0gY2hvb3NlUGx1cmFsRm9ybShwaHJhc2UsIHRoaXMuY3VycmVudExvY2FsZSwgb3B0aW9ucy5zbWFydF9jb3VudCk7CiAgICAgICAgICAgIHJlc3VsdCA9IGludGVycG9sYXRlKHJlc3VsdCwgb3B0aW9ucyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9OyAvLyAjIyMgcG9seWdsb3QuaGFzKGtleSkKICAgICAgICAvLwogICAgICAgIC8vIENoZWNrIGlmIHBvbHlnbG90IGhhcyBhIHRyYW5zbGF0aW9uIGZvciBnaXZlbiBrZXkKCgogICAgICAgIFBvbHlnbG90LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICByZXR1cm4ga2V5IGluIHRoaXMucGhyYXNlczsKICAgICAgICB9OyAvLyAjIyMjIFBsdXJhbGl6YXRpb24gbWV0aG9kcwogICAgICAgIC8vIFRoZSBzdHJpbmcgdGhhdCBzZXBhcmF0ZXMgdGhlIGRpZmZlcmVudCBwaHJhc2UgcG9zc2liaWxpdGllcy4KCgogICAgICAgIHZhciBkZWxpbWV0ZXIgPSAnfHx8fCc7IC8vIE1hcHBpbmcgZnJvbSBwbHVyYWxpemF0aW9uIGdyb3VwIHBsdXJhbCBsb2dpYy4KCiAgICAgICAgdmFyIHBsdXJhbFR5cGVzID0gewogICAgICAgICAgY2hpbmVzZTogZnVuY3Rpb24gY2hpbmVzZShuKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfSwKICAgICAgICAgIGdlcm1hbjogZnVuY3Rpb24gZ2VybWFuKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gIT09IDEgPyAxIDogMDsKICAgICAgICAgIH0sCiAgICAgICAgICBmcmVuY2g6IGZ1bmN0aW9uIGZyZW5jaChuKSB7CiAgICAgICAgICAgIHJldHVybiBuID4gMSA/IDEgOiAwOwogICAgICAgICAgfSwKICAgICAgICAgIHJ1c3NpYW46IGZ1bmN0aW9uIHJ1c3NpYW4obikgewogICAgICAgICAgICByZXR1cm4gbiAlIDEwID09PSAxICYmIG4gJSAxMDAgIT09IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMjsKICAgICAgICAgIH0sCiAgICAgICAgICBjemVjaDogZnVuY3Rpb24gY3plY2gobikgewogICAgICAgICAgICByZXR1cm4gbiA9PT0gMSA/IDAgOiBuID49IDIgJiYgbiA8PSA0ID8gMSA6IDI7CiAgICAgICAgICB9LAogICAgICAgICAgcG9saXNoOiBmdW5jdGlvbiBwb2xpc2gobikgewogICAgICAgICAgICByZXR1cm4gbiA9PT0gMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDI7CiAgICAgICAgICB9LAogICAgICAgICAgaWNlbGFuZGljOiBmdW5jdGlvbiBpY2VsYW5kaWMobikgewogICAgICAgICAgICByZXR1cm4gbiAlIDEwICE9PSAxIHx8IG4gJSAxMDAgPT09IDExID8gMSA6IDA7CiAgICAgICAgICB9CiAgICAgICAgfTsgLy8gTWFwcGluZyBmcm9tIHBsdXJhbGl6YXRpb24gZ3JvdXAgdG8gaW5kaXZpZHVhbCBsb2NhbGVzLgoKICAgICAgICB2YXIgcGx1cmFsVHlwZVRvTGFuZ3VhZ2VzID0gewogICAgICAgICAgY2hpbmVzZTogWydmYScsICdpZCcsICdqYScsICdrbycsICdsbycsICdtcycsICd0aCcsICd0cicsICd6aCddLAogICAgICAgICAgZ2VybWFuOiBbJ2RhJywgJ2RlJywgJ2VuJywgJ2VzJywgJ2ZpJywgJ2VsJywgJ2hlJywgJ2h1JywgJ2l0JywgJ25sJywgJ25vJywgJ3B0JywgJ3N2J10sCiAgICAgICAgICBmcmVuY2g6IFsnZnInLCAndGwnLCAncHQtYnInXSwKICAgICAgICAgIHJ1c3NpYW46IFsnaHInLCAncnUnXSwKICAgICAgICAgIGN6ZWNoOiBbJ2NzJ10sCiAgICAgICAgICBwb2xpc2g6IFsncGwnXSwKICAgICAgICAgIGljZWxhbmRpYzogWydpcyddCiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbGFuZ1RvVHlwZU1hcChtYXBwaW5nKSB7CiAgICAgICAgICB2YXIgdHlwZSwKICAgICAgICAgICAgICBsYW5ncywKICAgICAgICAgICAgICBsLAogICAgICAgICAgICAgIHJldCA9IHt9OwoKICAgICAgICAgIGZvciAodHlwZSBpbiBtYXBwaW5nKSB7CiAgICAgICAgICAgIGlmIChtYXBwaW5nLmhhc093blByb3BlcnR5KHR5cGUpKSB7CiAgICAgICAgICAgICAgbGFuZ3MgPSBtYXBwaW5nW3R5cGVdOwoKICAgICAgICAgICAgICBmb3IgKGwgaW4gbGFuZ3MpIHsKICAgICAgICAgICAgICAgIHJldFtsYW5nc1tsXV0gPSB0eXBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfSAvLyBUcmltIGEgc3RyaW5nLgoKCiAgICAgICAgZnVuY3Rpb24gdHJpbShzdHIpIHsKICAgICAgICAgIHZhciB0cmltUmUgPSAvXlxzK3xccyskL2c7CiAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UodHJpbVJlLCAnJyk7CiAgICAgICAgfSAvLyBCYXNlZCBvbiBhIHBocmFzZSB0ZXh0IHRoYXQgY29udGFpbnMgYG5gIHBsdXJhbCBmb3JtcyBzZXBhcmF0ZWQKICAgICAgICAvLyBieSBgZGVsaW1ldGVyYCwgYSBgbG9jYWxlYCwgYW5kIGEgYGNvdW50YCwgY2hvb3NlIHRoZSBjb3JyZWN0CiAgICAgICAgLy8gcGx1cmFsIGZvcm0sIG9yIG5vbmUgaWYgYGNvdW50YCBpcyBgbnVsbGAuCgoKICAgICAgICBmdW5jdGlvbiBjaG9vc2VQbHVyYWxGb3JtKHRleHQsIGxvY2FsZSwgY291bnQpIHsKICAgICAgICAgIHZhciByZXQsIHRleHRzLCBjaG9zZW5UZXh0OwoKICAgICAgICAgIGlmIChjb3VudCAhPSBudWxsICYmIHRleHQpIHsKICAgICAgICAgICAgdGV4dHMgPSB0ZXh0LnNwbGl0KGRlbGltZXRlcik7CiAgICAgICAgICAgIGNob3NlblRleHQgPSB0ZXh0c1twbHVyYWxUeXBlSW5kZXgobG9jYWxlLCBjb3VudCldIHx8IHRleHRzWzBdOwogICAgICAgICAgICByZXQgPSB0cmltKGNob3NlblRleHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0ID0gdGV4dDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcGx1cmFsVHlwZU5hbWUobG9jYWxlKSB7CiAgICAgICAgICB2YXIgbGFuZ1RvUGx1cmFsVHlwZSA9IGxhbmdUb1R5cGVNYXAocGx1cmFsVHlwZVRvTGFuZ3VhZ2VzKTsKICAgICAgICAgIHJldHVybiBsYW5nVG9QbHVyYWxUeXBlW2xvY2FsZV0gfHwgbGFuZ1RvUGx1cmFsVHlwZS5lbjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBsdXJhbFR5cGVJbmRleChsb2NhbGUsIGNvdW50KSB7CiAgICAgICAgICByZXR1cm4gcGx1cmFsVHlwZXNbcGx1cmFsVHlwZU5hbWUobG9jYWxlKV0oY291bnQpOwogICAgICAgIH0gLy8gIyMjIGludGVycG9sYXRlCiAgICAgICAgLy8KICAgICAgICAvLyBEb2VzIHRoZSBkaXJ0eSB3b3JrLiBDcmVhdGVzIGEgYFJlZ0V4cGAgb2JqZWN0IGZvciBlYWNoCiAgICAgICAgLy8gaW50ZXJwb2xhdGlvbiBwbGFjZWhvbGRlci4KCgogICAgICAgIGZ1bmN0aW9uIGludGVycG9sYXRlKHBocmFzZSwgb3B0aW9ucykgewogICAgICAgICAgZm9yICh2YXIgYXJnIGluIG9wdGlvbnMpIHsKICAgICAgICAgICAgaWYgKGFyZyAhPT0gJ18nICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkoYXJnKSkgewogICAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIG5ldyBgUmVnRXhwYCBlYWNoIHRpbWUgaW5zdGVhZCBvZiB1c2luZyBhIG1vcmUtZWZmaWNpZW50CiAgICAgICAgICAgICAgLy8gc3RyaW5nIHJlcGxhY2Ugc28gdGhhdCB0aGUgc2FtZSBhcmd1bWVudCBjYW4gYmUgcmVwbGFjZWQgbXVsdGlwbGUgdGltZXMKICAgICAgICAgICAgICAvLyBpbiB0aGUgc2FtZSBwaHJhc2UuCiAgICAgICAgICAgICAgcGhyYXNlID0gcGhyYXNlLnJlcGxhY2UobmV3IFJlZ0V4cCgnJVxceycgKyBhcmcgKyAnXFx9JywgJ2cnKSwgb3B0aW9uc1thcmddKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBwaHJhc2U7CiAgICAgICAgfSAvLyAjIyMgd2FybgogICAgICAgIC8vCiAgICAgICAgLy8gUHJvdmlkZXMgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGlmIGEgcGhyYXNlIGtleSBpcyBtaXNzaW5nLgoKCiAgICAgICAgZnVuY3Rpb24gd2FybihtZXNzYWdlKSB7CiAgICAgICAgICByb290LmNvbnNvbGUgJiYgcm9vdC5jb25zb2xlLndhcm4gJiYgcm9vdC5jb25zb2xlLndhcm4oJ1dBUk5JTkc6ICcgKyBtZXNzYWdlKTsKICAgICAgICB9IC8vICMjIyBjbG9uZQogICAgICAgIC8vCiAgICAgICAgLy8gQ2xvbmUgYW4gb2JqZWN0LgoKCiAgICAgICAgZnVuY3Rpb24gY2xvbmUoc291cmNlKSB7CiAgICAgICAgICB2YXIgcmV0ID0ge307CgogICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHsKICAgICAgICAgICAgcmV0W3Byb3BdID0gc291cmNlW3Byb3BdOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gUG9seWdsb3Q7CiAgICAgIH0pOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGsg5Yqg6L295LitIC4uLiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAi5pyq5om+5Yiw55u45YWz55qEICV7bGlua30g6L+b6KGM6K+E6K66IiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAi6K+36IGU57O7ICV7dXNlcn0g5Yid5aeL5YyW5Yib5bu6IiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICLliJ3lp4vljJYgSXNzdWUiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAi6K+054K55LuA5LmIIiwKICAgICAgICAicHJldmlldyI6ICLpooTop4giLAogICAgICAgICJlZGl0IjogIue8lui+kSIsCiAgICAgICAgImNvbW1lbnQiOiAi6K+E6K66IiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICLmlK/mjIEgTWFya2Rvd24g6K+t5rOVIiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAi5L2/55SoIEdpdEh1YiDnmbvlvZUiLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICLmnaXlgZrnrKzkuIDkuKrnlZnoqIDnmoTkurrlkKfvvIEiLAogICAgICAgICJjb21tZW50ZWQiOiAi5Y+R6KGo5LqOIiwKICAgICAgICAibG9hZC1tb3JlIjogIuWKoOi9veabtOWkmiIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30g5p2h6K+E6K66IiwKICAgICAgICAic29ydC1hc2MiOiAi5LuO5pen5Yiw5paw5o6S5bqPIiwKICAgICAgICAic29ydC1kZXNjIjogIuS7juaWsOWIsOaXp+aOkuW6jyIsCiAgICAgICAgImxvZ291dCI6ICLms6jplIAiLAogICAgICAgICJhbm9ueW1vdXMiOiAi5pyq55m75b2V55So5oi3IgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsayDovInlhaXkuK3igKYiLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogIuacquaJvuWIsOebuOmXnOeahCAle2xpbmt9IiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAi6KuL6IGv57WhICV7dXNlcn0g5Yid5aeL5YyW6KmV6KuWIiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICLliJ3lp4vljJYgSXNzdWUiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAi5a+r6bue5LuA6bq8IiwKICAgICAgICAicHJldmlldyI6ICLpoJDopr0iLAogICAgICAgICJlZGl0IjogIue3qOi8ryIsCiAgICAgICAgImNvbW1lbnQiOiAi6KmV6KuWIiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICLmlK/mj7QgTWFya2Rvd24g6Kqe5rOVIiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAi5L2/55SoIEdpdEh1YiDnmbvlhaUiLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICLmiJDngrrpppblgIvnlZnoqIDnmoTkurrlkKfvvIEiLAogICAgICAgICJjb21tZW50ZWQiOiAi6KmV6KuW5pa8IiwKICAgICAgICAibG9hZC1tb3JlIjogIui8ieWFpeabtOWkmiIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30g562G6KmV6KuWIiwKICAgICAgICAic29ydC1hc2MiOiAi5b6e6IiK6Iez5paw5o6S5bqPIiwKICAgICAgICAic29ydC1kZXNjIjogIuW+nuaWsOiHs+iIiuaOkuW6jyIsCiAgICAgICAgImxvZ291dCI6ICLnmbvlh7oiLAogICAgICAgICJhbm9ueW1vdXMiOiAi6Kiq5a6iIgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsa2luZyAuLi4iLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogIlJlbGF0ZWQgJXtsaW5rfSBub3QgZm91bmQiLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICJQbGVhc2UgY29udGFjdCAle3VzZXJ9IHRvIGluaXRpYWxpemUgdGhlIGNvbW1lbnQiLAogICAgICAgICJpbml0LWlzc3VlIjogIkluaXQgSXNzdWUiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAiTGVhdmUgYSBjb21tZW50IiwKICAgICAgICAicHJldmlldyI6ICJQcmV2aWV3IiwKICAgICAgICAiZWRpdCI6ICJFZGl0IiwKICAgICAgICAiY29tbWVudCI6ICJDb21tZW50IiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICJNYXJrZG93biBpcyBzdXBwb3J0ZWQiLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICJMb2dpbiB3aXRoIEdpdEh1YiIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogIkJlIHRoZSBmaXJzdCBwZXJzb24gdG8gbGVhdmUgYSBjb21tZW50ISIsCiAgICAgICAgImNvbW1lbnRlZCI6ICJjb21tZW50ZWQiLAogICAgICAgICJsb2FkLW1vcmUiOiAiTG9hZCBtb3JlIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSBjb21tZW50IHx8fHwgJXtjb3VudHN9IGNvbW1lbnRzIiwKICAgICAgICAic29ydC1hc2MiOiAiU29ydCBieSBPbGRlc3QiLAogICAgICAgICJzb3J0LWRlc2MiOiAiU29ydCBieSBMYXRlc3QiLAogICAgICAgICJsb2dvdXQiOiAiTG9nb3V0IiwKICAgICAgICAiYW5vbnltb3VzIjogIkFub255bW91cyIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGtpbmcgLi4uIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICJMaW5rICV7bGlua30gbm8gZW5jb250cmFkbyIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogIlBvciBmYXZvciBjb250YWN0YSBjb24gJXt1c2VyfSBwYXJhIGluaWNpYWxpemFyIGVsIGNvbWVudGFyaW8iLAogICAgICAgICJpbml0LWlzc3VlIjogIkluaWNpYXIgSXNzdWUiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAiRGVqYSB1biBjb21lbnRhcmlvIiwKICAgICAgICAicHJldmlldyI6ICJBdmFuY2UiLAogICAgICAgICJlZGl0IjogIkVkaXRhciIsCiAgICAgICAgImNvbW1lbnQiOiAiQ29tZW50YXJpbyIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAiTWFya2Rvd24gZXMgc29wb3J0YWRvIiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAiRW50cmFyIGNvbiBHaXRIdWIiLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICJTw6kgZWwgcHJpbWVybyBlbiBkZWphciB1biBjb21lbnRhcmlvISIsCiAgICAgICAgImNvbW1lbnRlZCI6ICJjb21lbnTDsyIsCiAgICAgICAgImxvYWQtbW9yZSI6ICJDYXJnYXIgbcOhcyIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30gY29tZW50YXJpbyB8fHx8ICV7Y291bnRzfSBjb21lbnRhcmlvcyIsCiAgICAgICAgInNvcnQtYXNjIjogIk9yZGVuYXIgcG9yIEFudGlndW9zIiwKICAgICAgICAic29ydC1kZXNjIjogIk9yZGVuYXIgcG9yIFJlY2llbnRlcyIsCiAgICAgICAgImxvZ291dCI6ICJTYWxpciIsCiAgICAgICAgImFub255bW91cyI6ICJBbsOzbmltbyIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGtpbmcgLi4uIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICJMaWVuICV7bGlua30gbm9uIHRyb3V2w6kiLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICJT4oCZaWwgdm91cyBwbGHDrnQgY29udGFjdGV6ICV7dXNlcn0gcG91ciBpbml0aWFsaXNlciBsZXMgY29tbWVudGFpcmVzIiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICJJbml0aWFsaXNhdGlvbiBkZXMgaXNzdWVzIiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogIkxhaXNzZXIgdW4gY29tbWVudGFpcmUiLAogICAgICAgICJwcmV2aWV3IjogIkFwZXLDp3UiLAogICAgICAgICJlZGl0IjogIk1vZGlmaWVyIiwKICAgICAgICAiY29tbWVudCI6ICJDb21tZW50YWlyZSIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAiTWFya2Rvd24gZXN0IHN1cHBvcnTDqSIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogIlNlIGNvbm5lY3RlciBhdmVjIEdpdEh1YiIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogIsOKdHJlIGxlIHByZW1pZXIgw6AgbGFpc3NlciB1biBjb21tZW50YWlyZSAhIiwKICAgICAgICAiY29tbWVudGVkIjogImNvbW1lbnRlciIsCiAgICAgICAgImxvYWQtbW9yZSI6ICJDaGFyZ2VyIHBsdXMiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9IGNvbW1lbnRhaXJlIHx8fHwgJXtjb3VudHN9IGNvbW1lbnRhaXJlcyIsCiAgICAgICAgInNvcnQtYXNjIjogIlRyaWVyIHBhciBwbHVzIGFuY2llbiIsCiAgICAgICAgInNvcnQtZGVzYyI6ICJUcmllciBwYXIgcGx1cyByw6ljZW50IiwKICAgICAgICAibG9nb3V0IjogIkTDqWNvbm5leGlvbiIsCiAgICAgICAgImFub255bW91cyI6ICJBbm9ueW1lIgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsa2luZyAuLi4iLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogItCh0LLRj9C30LDQvdC90YvQtSAle2xpbmt9INC90LUg0L3QsNC50LTQtdC90YsiLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICLQn9C+0LbQsNC70YPQudGB0YLQsCwg0YHQstGP0LbQuNGC0LXRgdGMINGBICV7dXNlcn0g0YfRgtC+0LHRiyDQuNC90LjRhtC40LDQu9C40LfQuNGA0L7QstCw0YLRjCDQutC+0LzQvNC10L3RgtCw0YDQuNC5IiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICLQktGL0L/Rg9GB0Log0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40LgiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAi0J7RgdGC0LDQstC40YLRjCDQutC+0LzQvNC10L3RgtCw0YDQuNC5IiwKICAgICAgICAicHJldmlldyI6ICLQn9GA0LXQtNCy0LDRgNC40YLQtdC70YzQvdGL0Lkg0L/RgNC+0YHQvNC+0YLRgCIsCiAgICAgICAgImVkaXQiOiAiUNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCIsCiAgICAgICAgImNvbW1lbnQiOiAi0JrQvtC80LzQtdC90YLQsNGA0LjQuSIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAi0J/QvtC00LTQtdGA0LbQuNCy0LDQtdGC0YHRjyBNYXJrZG93biIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogItCS0YXQvtC0INGH0LXRgNC10LcgR2l0SHViIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAi0JHRg9C00YzRgtC1INC/0LXRgNCy0YvQvCwg0LrRgtC+INC+0YHRgtCw0LLQuNC7INC60L7QvNC80LXQvdGC0LDRgNC40LkiLAogICAgICAgICJjb21tZW50ZWQiOiAi0L/RgNC+0LrQvtC80LzQtdC90YLQuNGA0L7QstCw0L3QvdGL0LkiLAogICAgICAgICJsb2FkLW1vcmUiOiAi0JfQsNCz0YDRg9C30LjRgtGMINC10YnRkSIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30g0LrQvtC80LzQtdC90YLQsNGA0LjQuSB8fHx8ICV7Y291bnRzfSDQutC+0LzQvNC10L3RgtCw0YDRjNC10LIiLAogICAgICAgICJzb3J0LWFzYyI6ICLQodC+0YDRgtC40YDQvtCy0LDRgtGMINC/0L4g0YHRgtCw0YDRi9C8IiwKICAgICAgICAic29ydC1kZXNjIjogItCh0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0L/QviDQv9C+0YHQu9C10LTQvdC40LwiLAogICAgICAgICJsb2dvdXQiOiAi0JLRi9GF0L7QtCIsCiAgICAgICAgImFub255bW91cyI6ICLQkNC90L7QvdC40LzQvdGL0LkiCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTU5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxraW5nIC4uLiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAiWnVnZWjDtnJpZ2VyICV7bGlua30gbmljaHQgZ2VmdW5kZW4iLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICJCaXR0ZSBrb250YWt0aWVyZSAle3VzZXJ9IHVtIGRlbiBLb21tZW50YXIgenUgaW5pdGlhbGlzaWVyZW4iLAogICAgICAgICJpbml0LWlzc3VlIjogIkluaXRpYWxpc2llcmUgSXNzdWUiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAiSGludGVybGFzc2UgZWluZW4gS29tbWVudGFyIiwKICAgICAgICAicHJldmlldyI6ICJWb3JzY2hhdSIsCiAgICAgICAgImVkaXQiOiAiRWRpdGllcmVuIiwKICAgICAgICAiY29tbWVudCI6ICJLb21tZW50aWVyZW4iLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogIk1hcmtkb3duIHdpcmQgdW50ZXJzdMO8dHp0IiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAiTWl0IEdpdEh1Yi1BY2NvdW50IGFubWVsZGVuIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAiU2VpIGRpZSBlcnN0ZSBQZXJzb24sIHdlbGNoZSBlaW5lbiBLb21tZW50YXIgaGludGVybMOkc3N0ISIsCiAgICAgICAgImNvbW1lbnRlZCI6ICJrb21tZW50aWVydGUiLAogICAgICAgICJsb2FkLW1vcmUiOiAiWmVpZ2UgbWVociIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30gS29tbWVudGFyIHx8fHwgJXtjb3VudHN9IEtvbW1lbnRhcmUiLAogICAgICAgICJzb3J0LWFzYyI6ICLDhGx0ZXN0ZSB6dWVyc3QiLAogICAgICAgICJzb3J0LWRlc2MiOiAiTmV1c3RlIHp1ZXJzdCIsCiAgICAgICAgImxvZ291dCI6ICJBYm1lbGRlbiIsCiAgICAgICAgImFub255bW91cyI6ICJBbm9ueW0iCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTYwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpbgoKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTYyKSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTYyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNjMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5rZXlzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQogICAgICB2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCiAgICAgIHZhciAka2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkoJ2tleXMnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoaXQpIHsKICAgICAgICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNjQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgdmFyIF9pc0l0ZXJhYmxlMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTY1KTsKCiAgICAgIHZhciBfaXNJdGVyYWJsZTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc0l0ZXJhYmxlMik7CgogICAgICB2YXIgX2dldEl0ZXJhdG9yMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KTsKCiAgICAgIHZhciBfZ2V0SXRlcmF0b3IzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0SXRlcmF0b3IyKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7CiAgICAgICAgICB2YXIgX2FyciA9IFtdOwogICAgICAgICAgdmFyIF9uID0gdHJ1ZTsKICAgICAgICAgIHZhciBfZCA9IGZhbHNlOwogICAgICAgICAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAodmFyIF9pID0gKDAsIF9nZXRJdGVyYXRvcjNbImRlZmF1bHQiXSkoYXJyKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgICAgICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfZCA9IHRydWU7CiAgICAgICAgICAgIF9lID0gZXJyOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSkgX2lbInJldHVybiJdKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfYXJyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgIH0gZWxzZSBpZiAoKDAsIF9pc0l0ZXJhYmxlM1siZGVmYXVsdCJdKShPYmplY3QoYXJyKSkpIHsKICAgICAgICAgICAgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KCk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE2NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjApOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nyk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTY3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGNsYXNzb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTsKCiAgICAgIHZhciBJVEVSQVRPUiA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyk7CgogICAgICB2YXIgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuaXNJdGVyYWJsZSA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHZhciBPID0gT2JqZWN0KGl0KTsKICAgICAgICByZXR1cm4gT1tJVEVSQVRPUl0gIT09IHVuZGVmaW5lZCB8fCAnQEBpdGVyYXRvcicgaW4gTyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICAgICAgfHwgSXRlcmF0b3JzLmhhc093blByb3BlcnR5KGNsYXNzb2YoTykpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNjggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTY5KSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTY5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzApOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE3MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuZ2V0SXRlcmF0b3IgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICB2YXIgaXRlckZuID0gZ2V0KGl0KTsKICAgICAgICBpZiAodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKSB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTsKICAgICAgICByZXR1cm4gYW5PYmplY3QoaXRlckZuLmNhbGwoaXQpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTcxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Mik7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTcyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIHZhciBiaW5kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7CgogICAgICB2YXIgQXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Myk7CgogICAgICB2YXIgbWVyZ2VDb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTsKCiAgICAgIHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOwogICAgICAvKioKICAgICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlCiAgICAgICAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvcwogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7CiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgQXhpb3MoZGVmYXVsdENvbmZpZyk7CiAgICAgICAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7IC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlCgogICAgICAgIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTsgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlCgogICAgICAgIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7CiAgICAgICAgcmV0dXJuIGluc3RhbmNlOwogICAgICB9IC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZAoKCiAgICAgIHZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTsgLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlCgogICAgICBheGlvcy5BeGlvcyA9IEF4aW9zOyAvLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzCgogICAgICBheGlvcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHsKICAgICAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoYXhpb3MuZGVmYXVsdHMsIGluc3RhbmNlQ29uZmlnKSk7CiAgICAgIH07IC8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlbgoKCiAgICAgIGF4aW9zLkNhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpOwogICAgICBheGlvcy5DYW5jZWxUb2tlbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTg2KTsKICAgICAgYXhpb3MuaXNDYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsgLy8gRXhwb3NlIGFsbC9zcHJlYWQKCiAgICAgIGF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykgewogICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7CiAgICAgIH07CgogICAgICBheGlvcy5zcHJlYWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gYXhpb3M7IC8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdAoKICAgICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IGF4aW9zOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE3MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICB2YXIgYnVpbGRVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTsKCiAgICAgIHZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NCk7CgogICAgICB2YXIgZGlzcGF0Y2hSZXF1ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpOwoKICAgICAgdmFyIG1lcmdlQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7CiAgICAgIC8qKgogICAgICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3MKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7CiAgICAgICAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnOwogICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzID0gewogICAgICAgICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLAogICAgICAgICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKQogICAgICAgIH07CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERpc3BhdGNoIGEgcmVxdWVzdAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cykKICAgICAgICovCgoKICAgICAgQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykgewogICAgICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLwogICAgICAgIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUEkKICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGNvbmZpZyA9IGFyZ3VtZW50c1sxXSB8fCB7fTsKICAgICAgICAgIGNvbmZpZy51cmwgPSBhcmd1bWVudHNbMF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTsKICAgICAgICB9CgogICAgICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7IC8vIFNldCBjb25maWcubWV0aG9kCgogICAgICAgIGlmIChjb25maWcubWV0aG9kKSB7CiAgICAgICAgICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZC50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5kZWZhdWx0cy5tZXRob2QpIHsKICAgICAgICAgIGNvbmZpZy5tZXRob2QgPSB0aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25maWcubWV0aG9kID0gJ2dldCc7CiAgICAgICAgfSAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlCgoKICAgICAgICB2YXIgY2hhaW4gPSBbZGlzcGF0Y2hSZXF1ZXN0LCB1bmRlZmluZWRdOwogICAgICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7CiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7CiAgICAgICAgICBjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7CiAgICAgICAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpOwogICAgICAgIH0pOwoKICAgICAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7CiAgICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgIH07CgogICAgICBBeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykgewogICAgICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7CiAgICAgICAgcmV0dXJuIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXD8vLCAnJyk7CiAgICAgIH07IC8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kcwoKCiAgICAgIHV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkgewogICAgICAgIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovCiAgICAgICAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAodXJsLCBjb25maWcpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7CiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICB1cmw6IHVybAogICAgICAgICAgfSkpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgICB1dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkgewogICAgICAgIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovCiAgICAgICAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAodXJsLCBkYXRhLCBjb25maWcpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7CiAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgfSkpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IEF4aW9zOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE3NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICBmdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7CiAgICAgICAgdGhpcy5oYW5kbGVycyA9IFtdOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWAKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWAKICAgICAgICoKICAgICAgICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlcgogICAgICAgKi8KCgogICAgICBJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7CiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHsKICAgICAgICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLAogICAgICAgICAgcmVqZWN0ZWQ6IHJlamVjdGVkCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFjawogICAgICAgKgogICAgICAgKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgCiAgICAgICAqLwoKCiAgICAgIEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkgewogICAgICAgIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkgewogICAgICAgICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzCiAgICAgICAqCiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55CiAgICAgICAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvcgogICAgICAgKi8KCgogICAgICBJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7CiAgICAgICAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7CiAgICAgICAgICBpZiAoaCAhPT0gbnVsbCkgewogICAgICAgICAgICBmbihoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE3NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICB2YXIgdHJhbnNmb3JtRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KTsKCiAgICAgIHZhciBpc0NhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOwoKICAgICAgdmFyIGRlZmF1bHRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7CiAgICAgIC8qKgogICAgICAgKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLgogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykgewogICAgICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHsKICAgICAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdAogICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykgewogICAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTsgLy8gRW5zdXJlIGhlYWRlcnMgZXhpc3QKCiAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTsgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YQoKICAgICAgICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoY29uZmlnLmRhdGEsIGNvbmZpZy5oZWFkZXJzLCBjb25maWcudHJhbnNmb3JtUmVxdWVzdCk7IC8vIEZsYXR0ZW4gaGVhZGVycwoKICAgICAgICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKGNvbmZpZy5oZWFkZXJzLmNvbW1vbiB8fCB7fSwgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sIGNvbmZpZy5oZWFkZXJzKTsKICAgICAgICB1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLCBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHsKICAgICAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdOwogICAgICAgIH0pOwogICAgICAgIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjsKICAgICAgICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkgewogICAgICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpOyAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YQoKICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmhlYWRlcnMsIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSk7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikgewogICAgICAgICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7CiAgICAgICAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTsgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGEKCiAgICAgICAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKHJlYXNvbi5yZXNwb25zZS5kYXRhLCByZWFzb24ucmVzcG9uc2UuaGVhZGVycywgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pOwogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNzYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwogICAgICAvKioKICAgICAgICogVHJhbnNmb3JtIHRoZSBkYXRhIGZvciBhIHJlcXVlc3Qgb3IgYSByZXNwb25zZQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWQKICAgICAgICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyBUaGUgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3Qgb3IgcmVzcG9uc2UKICAgICAgICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9ucwogICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHsKICAgICAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi8KICAgICAgICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7CiAgICAgICAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE3NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHsKICAgICAgICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHsKICAgICAgICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTsKICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE3OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBjcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOwogICAgICAvKioKICAgICAgICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS4KICAgICAgICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS4KICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkgewogICAgICAgIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1czsKCiAgICAgICAgaWYgKCF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmNvbmZpZywgbnVsbCwgcmVzcG9uc2UucmVxdWVzdCwgcmVzcG9uc2UpKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE3OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy4KICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS4KICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC4KICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLgogICAgICAgKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci4KICAgICAgICovCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkgewogICAgICAgIGVycm9yLmNvbmZpZyA9IGNvbmZpZzsKCiAgICAgICAgaWYgKGNvZGUpIHsKICAgICAgICAgIGVycm9yLmNvZGUgPSBjb2RlOwogICAgICAgIH0KCiAgICAgICAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7CiAgICAgICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICBlcnJvci5pc0F4aW9zRXJyb3IgPSB0cnVlOwoKICAgICAgICBlcnJvci50b0pTT04gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyBTdGFuZGFyZAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsCiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICAgICAgLy8gTWljcm9zb2Z0CiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICBudW1iZXI6IHRoaXMubnVtYmVyLAogICAgICAgICAgICAvLyBNb3ppbGxhCiAgICAgICAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLAogICAgICAgICAgICBsaW5lTnVtYmVyOiB0aGlzLmxpbmVOdW1iZXIsCiAgICAgICAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsCiAgICAgICAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLAogICAgICAgICAgICAvLyBBeGlvcwogICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLAogICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUKICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgaXNBYnNvbHV0ZVVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgxKTsKCiAgICAgIHZhciBjb21iaW5lVVJMcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTsKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgYmFzZVVSTCB3aXRoIHRoZSByZXF1ZXN0ZWRVUkwsCiAgICAgICAqIG9ubHkgd2hlbiB0aGUgcmVxdWVzdGVkVVJMIGlzIG5vdCBhbHJlYWR5IGFuIGFic29sdXRlIFVSTC4KICAgICAgICogSWYgdGhlIHJlcXVlc3RVUkwgaXMgYWJzb2x1dGUsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgcmVxdWVzdGVkVVJMIHVudG91Y2hlZC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0ZWRVUkwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIHRvIGNvbWJpbmUKICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIGZ1bGwgcGF0aAogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKSB7CiAgICAgICAgaWYgKGJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwocmVxdWVzdGVkVVJMKSkgewogICAgICAgICAgcmV0dXJuIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVxdWVzdGVkVVJMOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUKICAgICAgICoKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHsKICAgICAgICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoICI8c2NoZW1lPjovLyIgb3IgIi8vIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS4KICAgICAgICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWQKICAgICAgICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi4KICAgICAgICByZXR1cm4gL14oW2Etel1bYS16XGRcK1wtXC5dKjopP1wvXC8vaS50ZXN0KHVybCk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHMKICAgICAgICoKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMCiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkwKICAgICAgICovCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7CiAgICAgICAgcmV0dXJuIHJlbGF0aXZlVVJMID8gYmFzZVVSTC5yZXBsYWNlKC9cLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlwvKy8sICcnKSA6IGJhc2VVUkw7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7IC8vIEhlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlCiAgICAgIC8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnMKCgogICAgICB2YXIgaWdub3JlRHVwbGljYXRlT2YgPSBbJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJywgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLCAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXTsKICAgICAgLyoqCiAgICAgICAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3QKICAgICAgICoKICAgICAgICogYGBgCiAgICAgICAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UCiAgICAgICAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbgogICAgICAgKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlCiAgICAgICAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkCiAgICAgICAqIGBgYAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkCiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0CiAgICAgICAqLwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykgewogICAgICAgIHZhciBwYXJzZWQgPSB7fTsKICAgICAgICB2YXIga2V5OwogICAgICAgIHZhciB2YWw7CiAgICAgICAgdmFyIGk7CgogICAgICAgIGlmICghaGVhZGVycykgewogICAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgICB9CgogICAgICAgIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHsKICAgICAgICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTsKICAgICAgICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICB2YWwgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7CgogICAgICAgICAgaWYgKGtleSkgewogICAgICAgICAgICBpZiAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpID49IDApIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykgewogICAgICAgICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTg0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/IC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdAogICAgICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi4KICAgICAgZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgICAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgdmFyIG9yaWdpblVSTDsKICAgICAgICAvKioKICAgICAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50cwogICAgICAgICoKICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWQKICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9CiAgICAgICAgKi8KCiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHsKICAgICAgICAgIHZhciBocmVmID0gdXJsOwoKICAgICAgICAgIGlmIChtc2llKSB7CiAgICAgICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXMKICAgICAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7CiAgICAgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmOwogICAgICAgICAgfQoKICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpOyAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzCgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZiwKICAgICAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJywKICAgICAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCwKICAgICAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlw/LywgJycpIDogJycsCiAgICAgICAgICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsCiAgICAgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSwKICAgICAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCwKICAgICAgICAgICAgcGF0aG5hbWU6IHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOiAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgICAgIC8qKgogICAgICAgICogRGV0ZXJtaW5lIGlmIGEgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGN1cnJlbnQgbG9jYXRpb24KICAgICAgICAqCiAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3QKICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICAqLwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHsKICAgICAgICAgIHZhciBwYXJzZWQgPSB1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMOwogICAgICAgICAgcmV0dXJuIHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdDsKICAgICAgICB9OwogICAgICB9KCkgOiAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LgogICAgICBmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CiAgICAgIH0oKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxODUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID8gLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llCiAgICAgIGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkgewogICAgICAgICAgICB2YXIgY29va2llID0gW107CiAgICAgICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTsKCiAgICAgICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkgewogICAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7CiAgICAgICAgICAgICAgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkgewogICAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHsKICAgICAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpOwogICAgICAgICAgfSwKICAgICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkgewogICAgICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTsKICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGw7CiAgICAgICAgICB9LAogICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkgewogICAgICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0oKSA6IC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC4KICAgICAgZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoKSB7fSwKICAgICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfSwKICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge30KICAgICAgICB9OwogICAgICB9KCk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTg2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIENhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpOwogICAgICAvKioKICAgICAgICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi4KICAgICAgICoKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi4KICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHsKICAgICAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVzb2x2ZVByb21pc2U7CiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHsKICAgICAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTsKICAgICAgICB9KTsKICAgICAgICB2YXIgdG9rZW4gPSB0aGlzOwogICAgICAgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7CiAgICAgICAgICBpZiAodG9rZW4ucmVhc29uKSB7CiAgICAgICAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTsKICAgICAgICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuCiAgICAgICAqLwoKCiAgICAgIENhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHsKICAgICAgICBpZiAodGhpcy5yZWFzb24pIHsKICAgICAgICAgIHRocm93IHRoaXMucmVhc29uOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwKICAgICAgICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC4KICAgICAgICovCgoKICAgICAgQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkgewogICAgICAgIHZhciBjYW5jZWw7CiAgICAgICAgdmFyIHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHsKICAgICAgICAgIGNhbmNlbCA9IGM7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICAgIGNhbmNlbDogY2FuY2VsCiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gQ2FuY2VsVG9rZW47CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTg3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy4KICAgICAgICoKICAgICAgICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC4KICAgICAgICoKICAgICAgICogIGBgYGpzCiAgICAgICAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9CiAgICAgICAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTsKICAgICAgICogIGYuYXBwbHkobnVsbCwgYXJncyk7CiAgICAgICAqICBgYGAKICAgICAgICoKICAgICAgICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uCiAgICAgICAqCiAgICAgICAqICBgYGBqcwogICAgICAgKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pOwogICAgICAgKiAgYGBgCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0KICAgICAgICovCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikgewogICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTg4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsCiAgICAgICAgICAgIGdldFJlZiA9IF9yZWYuZ2V0UmVmLAogICAgICAgICAgICBvbkNsaWNrID0gX3JlZi5vbkNsaWNrLAogICAgICAgICAgICBvbk1vdXNlRG93biA9IF9yZWYub25Nb3VzZURvd24sCiAgICAgICAgICAgIHRleHQgPSBfcmVmLnRleHQsCiAgICAgICAgICAgIGlzTG9hZGluZyA9IF9yZWYuaXNMb2FkaW5nOwogICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGdldFJlZiAmJiBnZXRSZWYoZWwpOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWJ0biAiICsgY2xhc3NOYW1lLAogICAgICAgICAgb25DbGljazogb25DbGljaywKICAgICAgICAgIG9uTW91c2VEb3duOiBvbk1vdXNlRG93bgogICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtYnRuLXRleHQiCiAgICAgICAgfSwgdGV4dCksIGlzTG9hZGluZyAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWJ0bi1sb2FkaW5nIGd0LXNwaW5uZXIiCiAgICAgICAgfSkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSwKICAgICAgICAgICAgb25DbGljayA9IF9yZWYub25DbGljaywKICAgICAgICAgICAgdGV4dCA9IF9yZWYudGV4dDsKICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1hY3Rpb24gIiArIGNsYXNzTmFtZSwKICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2sKICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWFjdGlvbi10ZXh0IgogICAgICAgIH0sIHRleHQpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTkwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpOwoKICAgICAgdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7CgogICAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpOwoKICAgICAgdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKICAgICAgdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCiAgICAgIHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTsKCiAgICAgIHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7CgogICAgICB2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOwoKICAgICAgdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIHZhciBfYXZhdGFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MCk7CgogICAgICB2YXIgX2F2YXRhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdmF0YXIpOwoKICAgICAgdmFyIF9zdmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTsKCiAgICAgIHZhciBfc3ZnMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N2Zyk7CgogICAgICB2YXIgX2Rpc3RhbmNlX2luX3dvcmRzX3RvX25vdyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk5KTsKCiAgICAgIHZhciBfZGlzdGFuY2VfaW5fd29yZHNfdG9fbm93MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc3RhbmNlX2luX3dvcmRzX3RvX25vdyk7CgogICAgICB2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTIpOwoKICAgICAgdmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7CgogICAgICB2YXIgX2luZGV4MyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEzKTsKCiAgICAgIHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgzKTsKCiAgICAgIHZhciBfaW5kZXg1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpOwoKICAgICAgdmFyIF9pbmRleDYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDUpOwoKICAgICAgdmFyIF9pbmRleDcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNSk7CgogICAgICB2YXIgX2luZGV4OCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Nyk7CgogICAgICB2YXIgX2luZGV4OSA9IF9fd2VicGFja19yZXF1aXJlX18oMjE2KTsKCiAgICAgIHZhciBfaW5kZXgxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4OSk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNyk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBaSENOID0gKDAsIF9pbmRleDJbImRlZmF1bHQiXSkoKTsKICAgICAgdmFyIFpIVFcgPSAoMCwgX2luZGV4NFsiZGVmYXVsdCJdKSgpOwogICAgICB2YXIgRVMgPSAoMCwgX2luZGV4NlsiZGVmYXVsdCJdKSgpOwogICAgICB2YXIgRlIgPSAoMCwgX2luZGV4OFsiZGVmYXVsdCJdKSgpOwogICAgICB2YXIgUlUgPSAoMCwgX2luZGV4MTBbImRlZmF1bHQiXSkoKTsKCiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIHdpbmRvdy5HVF9pMThuX2Rpc3RhbmNlSW5Xb3Jkc0xvY2FsZU1hcCA9IHsKICAgICAgICAgIHpoOiBaSENOLAogICAgICAgICAgJ3poLUNOJzogWkhDTiwKICAgICAgICAgICd6aC1UVyc6IFpIVFcsCiAgICAgICAgICAnZXMtRVMnOiBFUywKICAgICAgICAgIGZyOiBGUiwKICAgICAgICAgIHJ1OiBSVQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBDb21tZW50ID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAgICAgICAoMCwgX2luaGVyaXRzM1siZGVmYXVsdCJdKShDb21tZW50LCBfQ29tcG9uZW50KTsKCiAgICAgICAgZnVuY3Rpb24gQ29tbWVudCgpIHsKICAgICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szWyJkZWZhdWx0Il0pKHRoaXMsIENvbW1lbnQpOwogICAgICAgICAgcmV0dXJuICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjNbImRlZmF1bHQiXSkodGhpcywgKENvbW1lbnQuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyWyJkZWZhdWx0Il0pKENvbW1lbnQpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgICAgICB9CgogICAgICAgICgwLCBfY3JlYXRlQ2xhc3MzWyJkZWZhdWx0Il0pKENvbW1lbnQsIFt7CiAgICAgICAgICBrZXk6ICdzaG91bGRDb21wb25lbnRVcGRhdGUnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSB0aGlzLm5vZGU7CiAgICAgICAgICAgIHZhciBlbWFpbFJlc3BvbnNlID0gY29tbWVudC5xdWVyeVNlbGVjdG9yKCcuZW1haWwtaGlkZGVuLXRvZ2dsZT5hJyk7CgogICAgICAgICAgICBpZiAoZW1haWxSZXNwb25zZSkgewogICAgICAgICAgICAgIGVtYWlsUmVzcG9uc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgY29tbWVudC5xdWVyeVNlbGVjdG9yKCcuZW1haWwtaGlkZGVuLXJlcGx5JykuY2xhc3NMaXN0LnRvZ2dsZSgnZXhwYW5kZWQnKTsKICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2hhbmRsZUltYWdlRXJyb3JlZCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSW1hZ2VFcnJvcmVkKG9iaikgewogICAgICAgICAgICBvYmoudGFyZ2V0LnNyYyA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2dpdGFsa0AxL3NyYy9hc3NldHMvaWNvbi9naXRodWIuc3ZnIjsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdyZW5kZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgICAgICAgIGNvbW1lbnQgPSBfcHJvcHMuY29tbWVudCwKICAgICAgICAgICAgICAgIHVzZXIgPSBfcHJvcHMudXNlciwKICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gX3Byb3BzLmxhbmd1YWdlLAogICAgICAgICAgICAgICAgX3Byb3BzJGNvbW1lbnRlZFRleHQgPSBfcHJvcHMuY29tbWVudGVkVGV4dCwKICAgICAgICAgICAgICAgIGNvbW1lbnRlZFRleHQgPSBfcHJvcHMkY29tbWVudGVkVGV4dCA9PT0gdW5kZWZpbmVkID8gJycgOiBfcHJvcHMkY29tbWVudGVkVGV4dCwKICAgICAgICAgICAgICAgIF9wcm9wcyRhZG1pbiA9IF9wcm9wcy5hZG1pbiwKICAgICAgICAgICAgICAgIGFkbWluID0gX3Byb3BzJGFkbWluID09PSB1bmRlZmluZWQgPyBbXSA6IF9wcm9wcyRhZG1pbiwKICAgICAgICAgICAgICAgIHJlcGx5Q2FsbGJhY2sgPSBfcHJvcHMucmVwbHlDYWxsYmFjaywKICAgICAgICAgICAgICAgIGxpa2VDYWxsYmFjayA9IF9wcm9wcy5saWtlQ2FsbGJhY2s7CiAgICAgICAgICAgIHZhciBlbmFibGVFZGl0ID0gdXNlciAmJiBjb21tZW50LnVzZXIubG9naW4gPT09IHVzZXIubG9naW47CiAgICAgICAgICAgIHZhciBpc0FkbWluID0gfltdLmNvbmNhdChhZG1pbikubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgfSkuaW5kZXhPZihjb21tZW50LnVzZXIubG9naW4udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgIHZhciByZWFjdGlvbnMgPSBjb21tZW50LnJlYWN0aW9uczsKICAgICAgICAgICAgdmFyIHJlYWN0aW9uVG90YWxDb3VudCA9ICcnOwoKICAgICAgICAgICAgaWYgKHJlYWN0aW9ucyAmJiByZWFjdGlvbnMudG90YWxDb3VudCkgewogICAgICAgICAgICAgIHJlYWN0aW9uVG90YWxDb3VudCA9IHJlYWN0aW9ucy50b3RhbENvdW50OwoKICAgICAgICAgICAgICBpZiAocmVhY3Rpb25zLnRvdGFsQ291bnQgPT09IDEwMCAmJiByZWFjdGlvbnMucGFnZUluZm8gJiYgcmVhY3Rpb25zLnBhZ2VJbmZvLmhhc05leHRQYWdlKSB7CiAgICAgICAgICAgICAgICByZWFjdGlvblRvdGFsQ291bnQgPSAnMTAwKyc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihub2RlKSB7CiAgICAgICAgICAgICAgICBfdGhpczIubm9kZSA9IG5vZGU7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50ICcgKyAoaXNBZG1pbiA/ICdndC1jb21tZW50LWFkbWluJyA6ICcnKQogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYXZhdGFyMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1hdmF0YXInLAogICAgICAgICAgICAgIHNyYzogY29tbWVudC51c2VyICYmIGNvbW1lbnQudXNlci5hdmF0YXJfdXJsLAogICAgICAgICAgICAgIGFsdDogY29tbWVudC51c2VyICYmIGNvbW1lbnQudXNlci5sb2dpbiwKICAgICAgICAgICAgICBvbkVycm9yOiB0aGlzLmhhbmRsZUltYWdlRXJyb3JlZC5iaW5kKHRoaXMpCiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtY29udGVudCcKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWhlYWRlcicKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWJsb2NrLScgKyAodXNlciA/ICcyJyA6ICcxJykKICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtdXNlcm5hbWUnLAogICAgICAgICAgICAgIGhyZWY6IGNvbW1lbnQudXNlciAmJiBjb21tZW50LnVzZXIuaHRtbF91cmwKICAgICAgICAgICAgfSwgY29tbWVudC51c2VyICYmIGNvbW1lbnQudXNlci5sb2dpbiksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtdGV4dCcKICAgICAgICAgICAgfSwgY29tbWVudGVkVGV4dCksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtZGF0ZScKICAgICAgICAgICAgfSwgKDAsIF9kaXN0YW5jZV9pbl93b3Jkc190b19ub3cyWyJkZWZhdWx0Il0pKGNvbW1lbnQuY3JlYXRlZF9hdCwgewogICAgICAgICAgICAgIGFkZFN1ZmZpeDogdHJ1ZSwKICAgICAgICAgICAgICBsb2NhbGU6IHsKICAgICAgICAgICAgICAgIGRpc3RhbmNlSW5Xb3Jkczogd2luZG93LkdUX2kxOG5fZGlzdGFuY2VJbldvcmRzTG9jYWxlTWFwW2xhbmd1YWdlXQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpLCByZWFjdGlvbnMgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1saWtlJywKICAgICAgICAgICAgICB0aXRsZTogJ0xpa2UnLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGxpa2VDYWxsYmFjawogICAgICAgICAgICB9LCByZWFjdGlvbnMudmlld2VySGFzUmVhY3RlZCA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28taGVhcnQnLAogICAgICAgICAgICAgIG5hbWU6ICdoZWFydF9vbicsCiAgICAgICAgICAgICAgdGV4dDogcmVhY3Rpb25Ub3RhbENvdW50CiAgICAgICAgICAgIH0pIDogX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1oZWFydCcsCiAgICAgICAgICAgICAgbmFtZTogJ2hlYXJ0JywKICAgICAgICAgICAgICB0ZXh0OiByZWFjdGlvblRvdGFsQ291bnQKICAgICAgICAgICAgfSkpLCBlbmFibGVFZGl0ID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgaHJlZjogY29tbWVudC5odG1sX3VybCwKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWVkaXQnLAogICAgICAgICAgICAgIHRpdGxlOiAnRWRpdCcsCiAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLWVkaXQnLAogICAgICAgICAgICAgIG5hbWU6ICdlZGl0JwogICAgICAgICAgICB9KSkgOiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LXJlcGx5JywKICAgICAgICAgICAgICB0aXRsZTogJ1JlcGx5JywKICAgICAgICAgICAgICBvbkNsaWNrOiByZXBseUNhbGxiYWNrCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28tcmVwbHknLAogICAgICAgICAgICAgIG5hbWU6ICdyZXBseScKICAgICAgICAgICAgfSkpKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWJvZHkgbWFya2Rvd24tYm9keScsCiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICAgICAgICAgIF9faHRtbDogY29tbWVudC5ib2R5X2h0bWwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICB9CiAgICAgICAgfV0pOwogICAgICAgIHJldHVybiBDb21tZW50OwogICAgICB9KF9yZWFjdC5Db21wb25lbnQpOwoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gQ29tbWVudDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgbWFwID0gewogICAgICAgICIuL2Fycm93X2Rvd24uc3ZnIjogMTkyLAogICAgICAgICIuL2VkaXQuc3ZnIjogMTkzLAogICAgICAgICIuL2dpdGh1Yi5zdmciOiAxOTQsCiAgICAgICAgIi4vaGVhcnQuc3ZnIjogMTk1LAogICAgICAgICIuL2hlYXJ0X29uLnN2ZyI6IDE5NiwKICAgICAgICAiLi9yZXBseS5zdmciOiAxOTcsCiAgICAgICAgIi4vdGlwLnN2ZyI6IDE5OAogICAgICB9OwoKICAgICAgZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7CiAgICAgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18od2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkpOwogICAgICB9CgogICAgICA7CgogICAgICBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7CiAgICAgICAgdmFyIGlkID0gbWFwW3JlcV07CiAgICAgICAgaWYgKCEoaWQgKyAxKSkgLy8gY2hlY2sgZm9yIG51bWJlciBvciBzdHJpbmcKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciICsgcmVxICsgIicuIik7CiAgICAgICAgcmV0dXJuIGlkOwogICAgICB9CgogICAgICA7CgogICAgICB3ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhtYXApOwogICAgICB9OwoKICAgICAgd2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDsKICAgICAgd2VicGFja0NvbnRleHQuaWQgPSAxOTE7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTkyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBwLWlkPVwiMTYxOVwiPjxwYXRoIGQ9XCJNNTExLjg3MiA2NzYuOGMtMC4wMDMgMC0wLjAwNiAwLTAuMDA4IDAtOS4xMzcgMC0xNy4zNzktMy44MjktMjMuMjEtOS45N2wtMjUxLjI3Ny0yNjUuNjE0Yy01LjQxNS01LjcyLTguNzQzLTEzLjQ2NC04Ljc0NC0yMS45ODQgMC0xNy42NzggMTQuMzMtMzIuMDA4IDMyLjAwOC0zMi4wMDggOS4xNTcgMCAxNy40MTYgMy44NDUgMjMuMjUgMTAuMDA5bDIyOC4wNDUgMjQxLjEwMyAyMjguMjI0LTI0MS4wODhjNS44NTUtNi4xNjUgMTQuMTEzLTEwLjAwMSAyMy4yNjYtMTAuMDAxIDguNTE2IDAgMTYuMjU2IDMuMzIgMjEuOTk4IDguNzM2IDEyLjc4NCAxMi4xNDUgMTMuMzYgMzIuNDM0IDEuMjY0IDQ1LjIzM2wtMjUxLjUyIDI2NS42Yy01Ljg0NCA2LjE1NS0xNC4wODYgOS45ODQtMjMuMjIzIDkuOTg0LTAuMDI1IDAtMC4wNTEgMC0wLjA3NiAwelwiIHAtaWQ9XCIxNjIwXCI+PC9wYXRoPjwvc3ZnPiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTkzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgPHBhdGggZD1cIk03ODUuMzMzMzMzIDg1LjMzMzMzM0M3NzQuNjY2NjY3IDg1LjMzMzMzMyA3NjMuMiA5MC4xMzMzMzMgNzU0LjY2NjY2NyA5OC42NjY2NjdMNjgyLjY2NjY2NyAxNzAuNjY2NjY3IDg1My4zMzMzMzMgMzQxLjMzMzMzMyA5MjUuMzMzMzMzIDI2OS4zMzMzMzNDOTQyLjQgMjUyLjI2NjY2NyA5NDIuNCAyMjIuMTMzMzMzIDkyNS4zMzMzMzMgMjA5LjMzMzMzM0w4MTQuNjY2NjY3IDk4LjY2NjY2N0M4MDYuMTMzMzMzIDkwLjEzMzMzMyA3OTYgODUuMzMzMzMzIDc4NS4zMzMzMzMgODUuMzMzMzMzek02NDAgMjE3LjMzMzMzMyA4NS4zMzMzMzMgNzY4IDg1LjMzMzMzMyA5MzguNjY2NjY3IDI1NiA5MzguNjY2NjY3IDgwNi42NjY2NjcgMzg0IDY0MCAyMTcuMzMzMzMzelwiPjwvcGF0aD5cbjwvc3ZnPlxuIjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgPHBhdGggZD1cIk02NCA1MjRDNjQgNzE5LjYwMiAxODkuMzU2IDg4NS45MjYgMzY0LjExMyA5NDcuMDE3IDM4Ny42NTc5OSA5NTMgMzg0IDkzNi4xMTUgMzg0IDkyNC43NjdMMzg0IDg0Ny4xMDdDMjQ4LjExOCA4NjMuMDA3IDI0Mi42NzQgNzczLjA1MiAyMzMuNSA3NTguMDAxIDIxNSA3MjYuNTAxIDE3MS41IDcxOC41MDEgMTg0LjUgNzAzLjUwMSAyMTUuNSA2ODcuNTAxIDI0NyA3MDcuNTAxIDI4My41IDc2MS41MDEgMzA5Ljk1NiA4MDAuNjQyIDM2MS4zNjYgNzk0LjA3NSAzODcuNjU4IDc4Ny40OTcgMzkzLjQwMyA3NjMuOTk3IDQwNS42MzcgNzQzLjA0MiA0MjIuMzUzIDcyNi42MzggMjgxLjc3NCA3MDEuNjA5IDIyMyA2MTUuNjcgMjIzIDUxMy41IDIyMyA0NjQuMDUzIDIzOS4zMjIgNDE4LjQwNiAyNzEuNDY1IDM4MS42MjcgMjUxLjE0MiAzMjAuOTI4IDI3My40MjEgMjY5LjE5IDI3Ni4zMzcgMjYxLjQxNSAzMzQuNDU4IDI1Ni4xMzEgMzk0Ljg4OCAzMDIuOTkzIDM5OS41NDkgMzA2LjY4NSA0MzIuNjYzIDI5Ny44MzUgNDcwLjM0MSAyOTMgNTEyLjUgMjkzIDU1NC45MjQgMjkzIDU5Mi44MSAyOTcuODk2IDYyNi4wNzUgMzA2Ljg1MyA2MzcuNDI2IDI5OC4yMTkgNjkzLjQ2IDI1OC4wNTQgNzQ3LjUgMjYyLjk2NiA3NTAuMzgyIDI3MC42NTIgNzcyLjE4NSAzMjEuMjkyIDc1My4wNTggMzgxLjA4MyA3ODUuNTE2IDQxNy45NTYgODAyIDQ2My44MDkgODAyIDUxMy41IDgwMiA2MTUuODc0IDc0Mi45OSA3MDEuOTUzIDYwMS44MDMgNzI2Ljc4NiA2MjUuMzgxIDc1MC4wMDMgNjQwIDc4Mi4yOTUgNjQwIDgxOC4wMDhMNjQwIDkzMC42NTNDNjQwLjc1MiA5MzkuNjI2IDY0MCA5NDguNjY0OTc4IDY1NS4wODYgOTQ4LjY2NSA4MzIuMzQ0IDg4OC45NjIgOTYwIDcyMS4zODkgOTYwIDUyNCA5NjAgMjc2LjU3NiA3NTkuNDI0IDc2IDUxMiA3NiAyNjQuNTc3IDc2IDY0IDI3Ni41NzYgNjQgNTI0WlwiPjwvcGF0aD5cbjwvc3ZnPlxuIjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cbiAgPHBhdGggZD1cIk01MjcuMDYxMzMzIDE2Ni41MjhBMjc3LjMzMzMzMyAyNzcuMzMzMzMzIDAgMCAxIDEwMDAuNjE4NjY3IDM2Mi42NjY2NjdhMjc3LjMzMzMzMyAyNzcuMzMzMzMzIDAgMCAxLTgxLjI4IDE5Ni4xMzg2NjZsLTM3Ny4xNzMzMzQgMzc3LjE3MzMzNGE0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAxLTYwLjMzMDY2NiAwbC0zNzcuMTczMzM0LTM3Ny4xNzMzMzRhMjc3LjM3NiAyNzcuMzc2IDAgMCAxIDM5Mi4yNzczMzQtMzkyLjI3NzMzM2wxNS4wNjEzMzMgMTUuMDYxMzMzIDE1LjA2MTMzMy0xNS4wNjEzMzN6IG0yODYuNzIgMzc3LjE3MzMzM2w0NS4yMjY2NjctNDUuMjI2NjY2YTE5MiAxOTIgMCAwIDAtMTM1LjgwOC0zMjcuODkzMzM0IDE5MiAxOTIgMCAwIDAtMTM1LjgwOCA1Ni4zMmwtNDUuMjI2NjY3IDQ1LjIyNjY2N2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAxLTYwLjMzMDY2NiAwbC00NS4yMjY2NjctNDUuMjI2NjY3YTE5Mi4wNDI2NjcgMTkyLjA0MjY2NyAwIDAgMC0yNzEuNjE2IDI3MS41NzMzMzRMNTEyIDg0NS40ODI2NjdsMzAxLjc4MTMzMy0zMDEuNzgxMzM0elwiPjwvcGF0aD5cbjwvc3ZnPlxuIjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHQ9XCIxNTEyNDYzMzYzNzI0XCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICA8cGF0aCBkPVwiTTUyNy4wNjEzMzMgMTY2LjUyOEEyNzcuMzMzMzMzIDI3Ny4zMzMzMzMgMCAwIDEgMTAwMC42MTg2NjcgMzYyLjY2NjY2N2EyNzcuMzMzMzMzIDI3Ny4zMzMzMzMgMCAwIDEtODEuMjggMTk2LjEzODY2NmwtMzc3LjE3MzMzNCAzNzcuMTczMzM0YTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDEtNjAuMzMwNjY2IDBsLTM3Ny4xNzMzMzQtMzc3LjE3MzMzNGEyNzcuMzc2IDI3Ny4zNzYgMCAwIDEgMzkyLjI3NzMzNC0zOTIuMjc3MzMzbDE1LjA2MTMzMyAxNS4wNjEzMzMgMTUuMDYxMzMzLTE1LjA2MTMzM3pcIj48L3BhdGg+XG48L3N2Zz5cbiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTk3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB2aWV3Qm94PVwiMCAwIDEzMzIgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gIDxwYXRoIGQ9XCJNNTI5LjA2NjY2NSAyNzMuMDY2NjY2IDUyOS4wNjY2NjUgMCA1MS4yIDQ3Ny44NjY2NjYgNTI5LjA2NjY2NSA5NTUuNzMzMzM1IDUyOS4wNjY2NjUgNjc1Ljg0Qzg3MC40IDY3NS44NCAxMTA5LjMzMzMzNSA3ODUuMDY2NjY1IDEyODAgMTAyNCAxMjExLjczMzMzNSA2ODIuNjY2NjY1IDEwMDYuOTMzMzM1IDM0MS4zMzMzMzQgNTI5LjA2NjY2NSAyNzMuMDY2NjY2XCI+PC9wYXRoPlxuPC9zdmc+XG4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICA8cGF0aCBkPVwiTTUxMiAzNjYuOTQ5NTM1Yy0xNi4wNjU1NTQgMC0yOS45ODIyMTIgMTMuNDA1MDE2LTI5Ljk4MjIxMiAyOS44Nzk4ODRsMCAzNTkuMDcwMjUxYzAgMTYuMTY3ODgyIDEzLjQwNTAxNiAyOS44Nzk4ODQgMjkuOTgyMjEyIDI5Ljg3OTg4NCAxNS45NjMyMjYgMCAyOS44Nzk4ODQtMTMuNDA1MDE2IDI5Ljg3OTg4NC0yOS44Nzk4ODRMNTQxLjg3OTg4NCAzOTYuODI5NDE5QzU0MS44Nzk4ODQgMzgwLjc2Mzg2NSA1MjguNDc0ODY4IDM2Ni45NDk1MzUgNTEyIDM2Ni45NDk1MzVMNTEyIDM2Ni45NDk1MzV6XCJcbiAgICBwLWlkPVwiMzA4M1wiPjwvcGF0aD5cbiAgPHBhdGggZD1cIk00ODIuMDE3Nzg4IDI4Ny42NDUwNDhjMC03Ljc3Njk1NiAzLjI3NDUwOC0xNS41NTM5MTIgOC44MDAyNC0yMS4xODE5NzMgNS41MjU3MzItNS41MjU3MzIgMTMuMzAyNjg4LTguODAwMjQgMjEuMTgxOTczLTguODAwMjQgNy43NzY5NTYgMCAxNS41NTM5MTIgMy4yNzQ1MDggMjEuMDc5NjQ0IDguODAwMjQgNS41MjU3MzIgNS42MjgwNiA4LjgwMDI0IDEzLjQwNTAxNiA4LjgwMDI0IDIxLjE4MTk3MyAwIDcuNzc2OTU2LTMuMjc0NTA4IDE1LjY1NjI0MS04LjgwMDI0IDIxLjE4MTk3My01LjUyNTczMiA1LjUyNTczMi0xMy40MDUwMTYgOC42OTc5MTEtMjEuMDc5NjQ0IDguNjk3OTExLTcuODc5Mjg1IDAtMTUuNjU2MjQxLTMuMjc0NTA4LTIxLjE4MTk3My04LjY5NzkxMUM0ODUuMjkyMjk1IDMwMy4zMDEyODkgNDgyLjAxNzc4OCAyOTUuNTI0MzMzIDQ4Mi4wMTc3ODggMjg3LjY0NTA0OEw0ODIuMDE3Nzg4IDI4Ny42NDUwNDh6XCJcbiAgICBwLWlkPVwiMzA4NFwiPjwvcGF0aD5cbiAgPHBhdGggZD1cIk01MTIgOTQ2Ljg0NDQwOWMtMjM5Ljg1NzcgMC00MzQuODk1NTczLTE5NS4wMzc4NzMtNDM0Ljg5NTU3My00MzQuODk1NTczIDAtMjM5Ljg1NzcgMTk1LjAzNzg3My00MzQuODk1NTczIDQzNC44OTU1NzMtNDM0Ljg5NTU3MyAyMzkuNzU1MzcxIDAgNDM0Ljg5NTU3MyAxOTUuMDM3ODczIDQzNC44OTU1NzMgNDM0Ljg5NTU3M0M5NDYuODk1NTczIDc1MS44MDY1MzUgNzUxLjc1NTM3MSA5NDYuODQ0NDA5IDUxMiA5NDYuODQ0NDA5ek01MTIgMTI2LjE3MDg4Yy0yMTIuNzQwNjgyIDAtMzg1Ljg4MDI4NCAxNzMuMDM3Mjc0LTM4NS44ODAyODQgMzg1Ljc3Nzk1NSAwIDIxMi43NDA2ODIgMTczLjAzNzI3NCAzODUuNzc3OTU1IDM4NS44ODAyODQgMzg1Ljc3Nzk1NSAyMTIuNzQwNjgyIDAgMzg1Ljc3Nzk1NS0xNzMuMDM3Mjc0IDM4NS43Nzc5NTUtMzg1Ljc3Nzk1NUM4OTcuNzc3OTU1IDI5OS4yMDgxNTQgNzI0Ljc0MDY4MiAxMjYuMTcwODggNTEyIDEyNi4xNzA4OHpcIlxuICAgIHAtaWQ9XCIzMDg1XCI+PC9wYXRoPlxuPC9zdmc+XG4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBkaXN0YW5jZUluV29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgUmV0dXJuIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlIGFuZCBub3cgaW4gd29yZHMuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBSZXR1cm4gdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGdpdmVuIGRhdGUgYW5kIG5vdyBpbiB3b3Jkcy4KICAgICAgICoKICAgICAgICogfCBEaXN0YW5jZSB0byBub3cgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJlc3VsdCAgICAgICAgICAgICAgfAogICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS18CiAgICAgICAqIHwgMCAuLi4gMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBsZXNzIHRoYW4gYSBtaW51dGUgIHwKICAgICAgICogfCAzMCBzZWNzIC4uLiAxIG1pbiAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDEgbWludXRlICAgICAgICAgICAgfAogICAgICAgKiB8IDEgbWluIDMwIHNlY3MgLi4uIDQ0IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWzIuLjQ0XSBtaW51dGVzICAgICB8CiAgICAgICAqIHwgNDQgbWlucyAuLi4gMzAgc2VjcyAuLi4gODkgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCAxIGhvdXIgICAgICAgIHwKICAgICAgICogfCA4OSBtaW5zIDMwIHNlY3MgLi4uIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IFsyLi4yNF0gaG91cnMgfAogICAgICAgKiB8IDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDQxIGhycyA1OSBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgIHwgMSBkYXkgICAgICAgICAgICAgICB8CiAgICAgICAqIHwgNDEgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gMjkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzICAgICAgICAgfCBbMi4uMzBdIGRheXMgICAgICAgIHwKICAgICAgICogfCAyOSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDQ0IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyB8IGFib3V0IDEgbW9udGggICAgICAgfAogICAgICAgKiB8IDQ0IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gNTkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIHwgYWJvdXQgMiBtb250aHMgICAgICB8CiAgICAgICAqIHwgNTkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiAxIHlyICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBbMi4uMTJdIG1vbnRocyAgICAgIHwKICAgICAgICogfCAxIHlyIC4uLiAxIHlyIDMgbW9udGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IDEgeWVhciAgICAgICAgfAogICAgICAgKiB8IDEgeXIgMyBtb250aHMgLi4uIDEgeXIgOSBtb250aCBzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgb3ZlciAxIHllYXIgICAgICAgICB8CiAgICAgICAqIHwgMSB5ciA5IG1vbnRocyAuLi4gMiB5cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhbG1vc3QgMiB5ZWFycyAgICAgIHwKICAgICAgICogfCBOIHlycyAuLi4gTiB5cnMgMyBtb250aHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IE4geWVhcnMgICAgICAgfAogICAgICAgKiB8IE4geXJzIDMgbW9udGhzIC4uLiBOIHlycyA5IG1vbnRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgb3ZlciBOIHllYXJzICAgICAgICB8CiAgICAgICAqIHwgTiB5cnMgOSBtb250aHMgLi4uIE4rMSB5cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhbG1vc3QgTisxIHllYXJzICAgIHwKICAgICAgICoKICAgICAgICogV2l0aCBgb3B0aW9ucy5pbmNsdWRlU2Vjb25kcyA9PSB0cnVlYDoKICAgICAgICogfCBEaXN0YW5jZSB0byBub3cgICAgIHwgUmVzdWx0ICAgICAgICAgICAgICAgfAogICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS18CiAgICAgICAqIHwgMCBzZWNzIC4uLiA1IHNlY3MgICB8IGxlc3MgdGhhbiA1IHNlY29uZHMgIHwKICAgICAgICogfCA1IHNlY3MgLi4uIDEwIHNlY3MgIHwgbGVzcyB0aGFuIDEwIHNlY29uZHMgfAogICAgICAgKiB8IDEwIHNlY3MgLi4uIDIwIHNlY3MgfCBsZXNzIHRoYW4gMjAgc2Vjb25kcyB8CiAgICAgICAqIHwgMjAgc2VjcyAuLi4gNDAgc2VjcyB8IGhhbGYgYSBtaW51dGUgICAgICAgIHwKICAgICAgICogfCA0MCBzZWNzIC4uLiA2MCBzZWNzIHwgbGVzcyB0aGFuIGEgbWludXRlICAgfAogICAgICAgKiB8IDYwIHNlY3MgLi4uIDkwIHNlY3MgfCAxIG1pbnV0ZSAgICAgICAgICAgICB8CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlIC0gdGhlIGdpdmVuIGRhdGUKICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zCiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaW5jbHVkZVNlY29uZHM9ZmFsc2VdIC0gZGlzdGFuY2VzIGxlc3MgdGhhbiBhIG1pbnV0ZSBhcmUgbW9yZSBkZXRhaWxlZAogICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFkZFN1ZmZpeD1mYWxzZV0gLSByZXN1bHQgc3BlY2lmaWVzIGlmIHRoZSBzZWNvbmQgZGF0ZSBpcyBlYXJsaWVyIG9yIGxhdGVyIHRoYW4gdGhlIGZpcnN0CiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5sb2NhbGU9ZW5Mb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QKICAgICAgICogQHJldHVybnMge1N0cmluZ30gdGhlIGRpc3RhbmNlIGluIHdvcmRzCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIElmIHRvZGF5IGlzIDEgSmFudWFyeSAyMDE1LCB3aGF0IGlzIHRoZSBkaXN0YW5jZSB0byAyIEp1bHkgMjAxND8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc1RvTm93KAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDYsIDIpCiAgICAgICAqICkKICAgICAgICogLy89PiAnNiBtb250aHMnCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIElmIG5vdyBpcyAxIEphbnVhcnkgMjAxNSAwMDowMDowMCwKICAgICAgICogLy8gd2hhdCBpcyB0aGUgZGlzdGFuY2UgdG8gMSBKYW51YXJ5IDIwMTUgMDA6MDA6MTUsIGluY2x1ZGluZyBzZWNvbmRzPwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzVG9Ob3coCiAgICAgICAqICAgbmV3IERhdGUoMjAxNSwgMCwgMSwgMCwgMCwgMTUpLAogICAgICAgKiAgIHtpbmNsdWRlU2Vjb25kczogdHJ1ZX0KICAgICAgICogKQogICAgICAgKiAvLz0+ICdsZXNzIHRoYW4gMjAgc2Vjb25kcycKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSWYgdG9kYXkgaXMgMSBKYW51YXJ5IDIwMTUsCiAgICAgICAqIC8vIHdoYXQgaXMgdGhlIGRpc3RhbmNlIHRvIDEgSmFudWFyeSAyMDE2LCB3aXRoIGEgc3VmZml4PwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzVG9Ob3coCiAgICAgICAqICAgbmV3IERhdGUoMjAxNiwgMCwgMSksCiAgICAgICAqICAge2FkZFN1ZmZpeDogdHJ1ZX0KICAgICAgICogKQogICAgICAgKiAvLz0+ICdpbiBhYm91dCAxIHllYXInCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIElmIHRvZGF5IGlzIDEgSmFudWFyeSAyMDE1LAogICAgICAgKiAvLyB3aGF0IGlzIHRoZSBkaXN0YW5jZSB0byAxIEF1Z3VzdCAyMDE2IGluIEVzcGVyYW50bz8KICAgICAgICogdmFyIGVvTG9jYWxlID0gcmVxdWlyZSgnZGF0ZS1mbnMvbG9jYWxlL2VvJykKICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc1RvTm93KAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTYsIDcsIDEpLAogICAgICAgKiAgIHtsb2NhbGU6IGVvTG9jYWxlfQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJ3BsaSBvbCAxIGphcm8nCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGRpc3RhbmNlSW5Xb3Jkc1RvTm93KGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7CiAgICAgICAgcmV0dXJuIGRpc3RhbmNlSW5Xb3JkcyhEYXRlLm5vdygpLCBkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucyk7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZGlzdGFuY2VJbldvcmRzVG9Ob3c7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjAwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGNvbXBhcmVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDEpOwoKICAgICAgdmFyIHBhcnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CgogICAgICB2YXIgZGlmZmVyZW5jZUluU2Vjb25kcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAzKTsKCiAgICAgIHZhciBkaWZmZXJlbmNlSW5Nb250aHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNSk7CgogICAgICB2YXIgZW5Mb2NhbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwOCk7CgogICAgICB2YXIgTUlOVVRFU19JTl9EQVkgPSAxNDQwOwogICAgICB2YXIgTUlOVVRFU19JTl9BTE1PU1RfVFdPX0RBWVMgPSAyNTIwOwogICAgICB2YXIgTUlOVVRFU19JTl9NT05USCA9IDQzMjAwOwogICAgICB2YXIgTUlOVVRFU19JTl9UV09fTU9OVEhTID0gODY0MDA7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgUmV0dXJuIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcyBpbiB3b3Jkcy4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIFJldHVybiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMgaW4gd29yZHMuCiAgICAgICAqCiAgICAgICAqIHwgRGlzdGFuY2UgYmV0d2VlbiBkYXRlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSZXN1bHQgICAgICAgICAgICAgIHwKICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tfAogICAgICAgKiB8IDAgLi4uIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbGVzcyB0aGFuIGEgbWludXRlICB8CiAgICAgICAqIHwgMzAgc2VjcyAuLi4gMSBtaW4gMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAxIG1pbnV0ZSAgICAgICAgICAgIHwKICAgICAgICogfCAxIG1pbiAzMCBzZWNzIC4uLiA0NCBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFsyLi40NF0gbWludXRlcyAgICAgfAogICAgICAgKiB8IDQ0IG1pbnMgLi4uIDMwIHNlY3MgLi4uIDg5IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgMSBob3VyICAgICAgICB8CiAgICAgICAqIHwgODkgbWlucyAzMCBzZWNzIC4uLiAyMyBocnMgNTkgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCBbMi4uMjRdIGhvdXJzIHwKICAgICAgICogfCAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiA0MSBocnMgNTkgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICB8IDEgZGF5ICAgICAgICAgICAgICAgfAogICAgICAgKiB8IDQxIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDI5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAgICAgICAgIHwgWzIuLjMwXSBkYXlzICAgICAgICB8CiAgICAgICAqIHwgMjkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiA0NCBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgfCBhYm91dCAxIG1vbnRoICAgICAgIHwKICAgICAgICogfCA0NCBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDU5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyB8IGFib3V0IDIgbW9udGhzICAgICAgfAogICAgICAgKiB8IDU5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gMSB5ciAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWzIuLjEyXSBtb250aHMgICAgICB8CiAgICAgICAqIHwgMSB5ciAuLi4gMSB5ciAzIG1vbnRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCAxIHllYXIgICAgICAgIHwKICAgICAgICogfCAxIHlyIDMgbW9udGhzIC4uLiAxIHlyIDkgbW9udGggcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG92ZXIgMSB5ZWFyICAgICAgICAgfAogICAgICAgKiB8IDEgeXIgOSBtb250aHMgLi4uIDIgeXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWxtb3N0IDIgeWVhcnMgICAgICB8CiAgICAgICAqIHwgTiB5cnMgLi4uIE4geXJzIDMgbW9udGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCBOIHllYXJzICAgICAgIHwKICAgICAgICogfCBOIHlycyAzIG1vbnRocyAuLi4gTiB5cnMgOSBtb250aHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG92ZXIgTiB5ZWFycyAgICAgICAgfAogICAgICAgKiB8IE4geXJzIDkgbW9udGhzIC4uLiBOKzEgeXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWxtb3N0IE4rMSB5ZWFycyAgICB8CiAgICAgICAqCiAgICAgICAqIFdpdGggYG9wdGlvbnMuaW5jbHVkZVNlY29uZHMgPT0gdHJ1ZWA6CiAgICAgICAqIHwgRGlzdGFuY2UgYmV0d2VlbiBkYXRlcyB8IFJlc3VsdCAgICAgICAgICAgICAgIHwKICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tfAogICAgICAgKiB8IDAgc2VjcyAuLi4gNSBzZWNzICAgICAgfCBsZXNzIHRoYW4gNSBzZWNvbmRzICB8CiAgICAgICAqIHwgNSBzZWNzIC4uLiAxMCBzZWNzICAgICB8IGxlc3MgdGhhbiAxMCBzZWNvbmRzIHwKICAgICAgICogfCAxMCBzZWNzIC4uLiAyMCBzZWNzICAgIHwgbGVzcyB0aGFuIDIwIHNlY29uZHMgfAogICAgICAgKiB8IDIwIHNlY3MgLi4uIDQwIHNlY3MgICAgfCBoYWxmIGEgbWludXRlICAgICAgICB8CiAgICAgICAqIHwgNDAgc2VjcyAuLi4gNjAgc2VjcyAgICB8IGxlc3MgdGhhbiBhIG1pbnV0ZSAgIHwKICAgICAgICogfCA2MCBzZWNzIC4uLiA5MCBzZWNzICAgIHwgMSBtaW51dGUgICAgICAgICAgICAgfAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVRvQ29tcGFyZSAtIHRoZSBkYXRlIHRvIGNvbXBhcmUgd2l0aAogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZSAtIHRoZSBvdGhlciBkYXRlCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9ucwogICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmluY2x1ZGVTZWNvbmRzPWZhbHNlXSAtIGRpc3RhbmNlcyBsZXNzIHRoYW4gYSBtaW51dGUgYXJlIG1vcmUgZGV0YWlsZWQKICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hZGRTdWZmaXg9ZmFsc2VdIC0gcmVzdWx0IGluZGljYXRlcyBpZiB0aGUgc2Vjb25kIGRhdGUgaXMgZWFybGllciBvciBsYXRlciB0aGFuIHRoZSBmaXJzdAogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMubG9jYWxlPWVuTG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0CiAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBkaXN0YW5jZSBpbiB3b3JkcwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBXaGF0IGlzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgSnVseSAyMDE0IGFuZCAxIEphbnVhcnkgMjAxNT8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3JkcygKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE1LCAwLCAxKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJzYgbW9udGhzJwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBXaGF0IGlzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDEgSmFudWFyeSAyMDE1IDAwOjAwOjE1CiAgICAgICAqIC8vIGFuZCAxIEphbnVhcnkgMjAxNSAwMDowMDowMCwgaW5jbHVkaW5nIHNlY29uZHM/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNSwgMCwgMSwgMCwgMCwgMTUpLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTUsIDAsIDEsIDAsIDAsIDApLAogICAgICAgKiAgIHtpbmNsdWRlU2Vjb25kczogdHJ1ZX0KICAgICAgICogKQogICAgICAgKiAvLz0+ICdsZXNzIHRoYW4gMjAgc2Vjb25kcycKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gV2hhdCBpcyB0aGUgZGlzdGFuY2UgZnJvbSAxIEphbnVhcnkgMjAxNgogICAgICAgKiAvLyB0byAxIEphbnVhcnkgMjAxNSwgd2l0aCBhIHN1ZmZpeD8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3JkcygKICAgICAgICogICBuZXcgRGF0ZSgyMDE2LCAwLCAxKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE1LCAwLCAxKSwKICAgICAgICogICB7YWRkU3VmZml4OiB0cnVlfQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJ2Fib3V0IDEgeWVhciBhZ28nCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFdoYXQgaXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gMSBBdWd1c3QgMjAxNiBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gRXNwZXJhbnRvPwogICAgICAgKiB2YXIgZW9Mb2NhbGUgPSByZXF1aXJlKCdkYXRlLWZucy9sb2NhbGUvZW8nKQogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTYsIDcsIDEpLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTUsIDAsIDEpLAogICAgICAgKiAgIHtsb2NhbGU6IGVvTG9jYWxlfQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJ3BsaSBvbCAxIGphcm8nCiAgICAgICAqLwoKICAgICAgZnVuY3Rpb24gZGlzdGFuY2VJbldvcmRzKGRpcnR5RGF0ZVRvQ29tcGFyZSwgZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHsKICAgICAgICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTsKICAgICAgICB2YXIgY29tcGFyaXNvbiA9IGNvbXBhcmVEZXNjKGRpcnR5RGF0ZVRvQ29tcGFyZSwgZGlydHlEYXRlKTsKICAgICAgICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGU7CiAgICAgICAgdmFyIGxvY2FsaXplID0gZW5Mb2NhbGUuZGlzdGFuY2VJbldvcmRzLmxvY2FsaXplOwoKICAgICAgICBpZiAobG9jYWxlICYmIGxvY2FsZS5kaXN0YW5jZUluV29yZHMgJiYgbG9jYWxlLmRpc3RhbmNlSW5Xb3Jkcy5sb2NhbGl6ZSkgewogICAgICAgICAgbG9jYWxpemUgPSBsb2NhbGUuZGlzdGFuY2VJbldvcmRzLmxvY2FsaXplOwogICAgICAgIH0KCiAgICAgICAgdmFyIGxvY2FsaXplT3B0aW9ucyA9IHsKICAgICAgICAgIGFkZFN1ZmZpeDogQm9vbGVhbihvcHRpb25zLmFkZFN1ZmZpeCksCiAgICAgICAgICBjb21wYXJpc29uOiBjb21wYXJpc29uCiAgICAgICAgfTsKICAgICAgICB2YXIgZGF0ZUxlZnQsIGRhdGVSaWdodDsKCiAgICAgICAgaWYgKGNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZVRvQ29tcGFyZSk7CiAgICAgICAgICBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZSk7CiAgICAgICAgICBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGVUb0NvbXBhcmUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHNlY29uZHMgPSBkaWZmZXJlbmNlSW5TZWNvbmRzKGRhdGVSaWdodCwgZGF0ZUxlZnQpOwogICAgICAgIHZhciBvZmZzZXQgPSBkYXRlUmlnaHQuZ2V0VGltZXpvbmVPZmZzZXQoKSAtIGRhdGVMZWZ0LmdldFRpbWV6b25lT2Zmc2V0KCk7CiAgICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLnJvdW5kKHNlY29uZHMgLyA2MCkgLSBvZmZzZXQ7CiAgICAgICAgdmFyIG1vbnRoczsgLy8gMCB1cCB0byAyIG1pbnMKCiAgICAgICAgaWYgKG1pbnV0ZXMgPCAyKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlU2Vjb25kcykgewogICAgICAgICAgICBpZiAoc2Vjb25kcyA8IDUpIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2xlc3NUaGFuWFNlY29uZHMnLCA1LCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPCAxMCkgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnbGVzc1RoYW5YU2Vjb25kcycsIDEwLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPCAyMCkgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnbGVzc1RoYW5YU2Vjb25kcycsIDIwLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPCA0MCkgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnaGFsZkFNaW51dGUnLCBudWxsLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPCA2MCkgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnbGVzc1RoYW5YTWludXRlcycsIDEsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCd4TWludXRlcycsIDEsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChtaW51dGVzID09PSAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdsZXNzVGhhblhNaW51dGVzJywgMSwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ3hNaW51dGVzJywgbWludXRlcywgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyAyIG1pbnMgdXAgdG8gMC43NSBocnMKCiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgNDUpIHsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgneE1pbnV0ZXMnLCBtaW51dGVzLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyAwLjc1IGhycyB1cCB0byAxLjUgaHJzCiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgOTApIHsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnYWJvdXRYSG91cnMnLCAxLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyAxLjUgaHJzIHVwIHRvIDI0IGhycwogICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IE1JTlVURVNfSU5fREFZKSB7CiAgICAgICAgICB2YXIgaG91cnMgPSBNYXRoLnJvdW5kKG1pbnV0ZXMgLyA2MCk7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2Fib3V0WEhvdXJzJywgaG91cnMsIGxvY2FsaXplT3B0aW9ucyk7IC8vIDEgZGF5IHVwIHRvIDEuNzUgZGF5cwogICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IE1JTlVURVNfSU5fQUxNT1NUX1RXT19EQVlTKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ3hEYXlzJywgMSwgbG9jYWxpemVPcHRpb25zKTsgLy8gMS43NSBkYXlzIHVwIHRvIDMwIGRheXMKICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCBNSU5VVEVTX0lOX01PTlRIKSB7CiAgICAgICAgICB2YXIgZGF5cyA9IE1hdGgucm91bmQobWludXRlcyAvIE1JTlVURVNfSU5fREFZKTsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgneERheXMnLCBkYXlzLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyAxIG1vbnRoIHVwIHRvIDIgbW9udGhzCiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgTUlOVVRFU19JTl9UV09fTU9OVEhTKSB7CiAgICAgICAgICBtb250aHMgPSBNYXRoLnJvdW5kKG1pbnV0ZXMgLyBNSU5VVEVTX0lOX01PTlRIKTsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnYWJvdXRYTW9udGhzJywgbW9udGhzLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgIH0KCiAgICAgICAgbW9udGhzID0gZGlmZmVyZW5jZUluTW9udGhzKGRhdGVSaWdodCwgZGF0ZUxlZnQpOyAvLyAyIG1vbnRocyB1cCB0byAxMiBtb250aHMKCiAgICAgICAgaWYgKG1vbnRocyA8IDEyKSB7CiAgICAgICAgICB2YXIgbmVhcmVzdE1vbnRoID0gTWF0aC5yb3VuZChtaW51dGVzIC8gTUlOVVRFU19JTl9NT05USCk7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ3hNb250aHMnLCBuZWFyZXN0TW9udGgsIGxvY2FsaXplT3B0aW9ucyk7IC8vIDEgeWVhciB1cCB0byBtYXggRGF0ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbW9udGhzU2luY2VTdGFydE9mWWVhciA9IG1vbnRocyAlIDEyOwogICAgICAgICAgdmFyIHllYXJzID0gTWF0aC5mbG9vcihtb250aHMgLyAxMik7IC8vIE4geWVhcnMgdXAgdG8gMSB5ZWFycyAzIG1vbnRocwoKICAgICAgICAgIGlmIChtb250aHNTaW5jZVN0YXJ0T2ZZZWFyIDwgMykgewogICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2Fib3V0WFllYXJzJywgeWVhcnMsIGxvY2FsaXplT3B0aW9ucyk7IC8vIE4geWVhcnMgMyBtb250aHMgdXAgdG8gTiB5ZWFycyA5IG1vbnRocwogICAgICAgICAgfSBlbHNlIGlmIChtb250aHNTaW5jZVN0YXJ0T2ZZZWFyIDwgOSkgewogICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ292ZXJYWWVhcnMnLCB5ZWFycywgbG9jYWxpemVPcHRpb25zKTsgLy8gTiB5ZWFycyA5IG1vbnRocyB1cCB0byBOIHllYXIgMTIgbW9udGhzCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2FsbW9zdFhZZWFycycsIHllYXJzICsgMSwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZGlzdGFuY2VJbldvcmRzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBwYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IENvbXBhcmUgdGhlIHR3byBkYXRlcyByZXZlcnNlIGNocm9ub2xvZ2ljYWxseSBhbmQgcmV0dXJuIC0xLCAwIG9yIDEuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBDb21wYXJlIHRoZSB0d28gZGF0ZXMgYW5kIHJldHVybiAtMSBpZiB0aGUgZmlyc3QgZGF0ZSBpcyBhZnRlciB0aGUgc2Vjb25kLAogICAgICAgKiAxIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGJlZm9yZSB0aGUgc2Vjb25kIG9yIDAgaWYgZGF0ZXMgYXJlIGVxdWFsLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjb21wYXJlCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY29tcGFyZQogICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgcmVzdWx0IG9mIHRoZSBjb21wYXJpc29uCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIENvbXBhcmUgMTEgRmVicnVhcnkgMTk4NyBhbmQgMTAgSnVseSAxOTg5IHJldmVyc2UgY2hyb25vbG9naWNhbGx5OgogICAgICAgKiB2YXIgcmVzdWx0ID0gY29tcGFyZURlc2MoCiAgICAgICAqICAgbmV3IERhdGUoMTk4NywgMSwgMTEpLAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODksIDYsIDEwKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gMQogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBTb3J0IHRoZSBhcnJheSBvZiBkYXRlcyBpbiByZXZlcnNlIGNocm9ub2xvZ2ljYWwgb3JkZXI6CiAgICAgICAqIHZhciByZXN1bHQgPSBbCiAgICAgICAqICAgbmV3IERhdGUoMTk5NSwgNiwgMiksCiAgICAgICAqICAgbmV3IERhdGUoMTk4NywgMSwgMTEpLAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODksIDYsIDEwKQogICAgICAgKiBdLnNvcnQoY29tcGFyZURlc2MpCiAgICAgICAqIC8vPT4gWwogICAgICAgKiAvLyAgIFN1biBKdWwgMDIgMTk5NSAwMDowMDowMCwKICAgICAgICogLy8gICBNb24gSnVsIDEwIDE5ODkgMDA6MDA6MDAsCiAgICAgICAqIC8vICAgV2VkIEZlYiAxMSAxOTg3IDAwOjAwOjAwCiAgICAgICAqIC8vIF0KICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gY29tcGFyZURlc2MoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHsKICAgICAgICB2YXIgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGVMZWZ0KTsKICAgICAgICB2YXIgdGltZUxlZnQgPSBkYXRlTGVmdC5nZXRUaW1lKCk7CiAgICAgICAgdmFyIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZVJpZ2h0KTsKICAgICAgICB2YXIgdGltZVJpZ2h0ID0gZGF0ZVJpZ2h0LmdldFRpbWUoKTsKCiAgICAgICAgaWYgKHRpbWVMZWZ0ID4gdGltZVJpZ2h0KSB7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfSBlbHNlIGlmICh0aW1lTGVmdCA8IHRpbWVSaWdodCkgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBjb21wYXJlRGVzYzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBhcmd1bWVudCBhbiBpbnN0YW5jZSBvZiBEYXRlPwogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogSXMgdGhlIGdpdmVuIGFyZ3VtZW50IGFuIGluc3RhbmNlIG9mIERhdGU/CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7Kn0gYXJndW1lbnQgLSB0aGUgYXJndW1lbnQgdG8gY2hlY2sKICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBnaXZlbiBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIElzICdtYXlvbm5haXNlJyBhIERhdGU/CiAgICAgICAqIHZhciByZXN1bHQgPSBpc0RhdGUoJ21heW9ubmFpc2UnKQogICAgICAgKiAvLz0+IGZhbHNlCiAgICAgICAqLwogICAgICBmdW5jdGlvbiBpc0RhdGUoYXJndW1lbnQpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGlzRGF0ZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDQpOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IFNlY29uZCBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IEdldCB0aGUgbnVtYmVyIG9mIHNlY29uZHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBzZWNvbmRzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgbGF0ZXIgZGF0ZQogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIGVhcmxpZXIgZGF0ZQogICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgbnVtYmVyIG9mIHNlY29uZHMKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSG93IG1hbnkgc2Vjb25kcyBhcmUgYmV0d2VlbgogICAgICAgKiAvLyAyIEp1bHkgMjAxNCAxMjozMDowNy45OTkgYW5kIDIgSnVseSAyMDE0IDEyOjMwOjIwLjAwMD8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpZmZlcmVuY2VJblNlY29uZHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiwgMTIsIDMwLCAyMCwgMCksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiwgMTIsIDMwLCA3LCA5OTkpCiAgICAgICAqICkKICAgICAgICogLy89PiAxMgogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5TZWNvbmRzKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7CiAgICAgICAgdmFyIGRpZmYgPSBkaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIC8gMTAwMDsKICAgICAgICByZXR1cm4gZGlmZiA+IDAgPyBNYXRoLmZsb29yKGRpZmYpIDogTWF0aC5jZWlsKGRpZmYpOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRpZmZlcmVuY2VJblNlY29uZHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjA0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHBhcnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgTWlsbGlzZWNvbmQgSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBHZXQgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBsYXRlciBkYXRlCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgZWFybGllciBkYXRlCiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIEhvdyBtYW55IG1pbGxpc2Vjb25kcyBhcmUgYmV0d2VlbgogICAgICAgKiAvLyAyIEp1bHkgMjAxNCAxMjozMDoyMC42MDAgYW5kIDIgSnVseSAyMDE0IDEyOjMwOjIxLjcwMD8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpZmZlcmVuY2VJbk1pbGxpc2Vjb25kcygKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxMiwgMzAsIDIxLCA3MDApLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDYsIDIsIDEyLCAzMCwgMjAsIDYwMCkKICAgICAgICogKQogICAgICAgKiAvLz0+IDExMDAKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7CiAgICAgICAgdmFyIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlTGVmdCk7CiAgICAgICAgdmFyIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZVJpZ2h0KTsKICAgICAgICByZXR1cm4gZGF0ZUxlZnQuZ2V0VGltZSgpIC0gZGF0ZVJpZ2h0LmdldFRpbWUoKTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkaWZmZXJlbmNlSW5NaWxsaXNlY29uZHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjA1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHBhcnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CgogICAgICB2YXIgZGlmZmVyZW5jZUluQ2FsZW5kYXJNb250aHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNik7CgogICAgICB2YXIgY29tcGFyZUFzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA3KTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBNb250aCBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IEdldCB0aGUgbnVtYmVyIG9mIGZ1bGwgbW9udGhzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogR2V0IHRoZSBudW1iZXIgb2YgZnVsbCBtb250aHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBsYXRlciBkYXRlCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgZWFybGllciBkYXRlCiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSBudW1iZXIgb2YgZnVsbCBtb250aHMKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSG93IG1hbnkgZnVsbCBtb250aHMgYXJlIGJldHdlZW4gMzEgSmFudWFyeSAyMDE0IGFuZCAxIFNlcHRlbWJlciAyMDE0PwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlmZmVyZW5jZUluTW9udGhzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDgsIDEpLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDAsIDMxKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gNwogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5Nb250aHMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHsKICAgICAgICB2YXIgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGVMZWZ0KTsKICAgICAgICB2YXIgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlUmlnaHQpOwogICAgICAgIHZhciBzaWduID0gY29tcGFyZUFzYyhkYXRlTGVmdCwgZGF0ZVJpZ2h0KTsKICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IE1hdGguYWJzKGRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzKGRhdGVMZWZ0LCBkYXRlUmlnaHQpKTsKICAgICAgICBkYXRlTGVmdC5zZXRNb250aChkYXRlTGVmdC5nZXRNb250aCgpIC0gc2lnbiAqIGRpZmZlcmVuY2UpOyAvLyBNYXRoLmFicyhkaWZmIGluIGZ1bGwgbW9udGhzIC0gZGlmZiBpbiBjYWxlbmRhciBtb250aHMpID09PSAxIGlmIGxhc3QgY2FsZW5kYXIgbW9udGggaXMgbm90IGZ1bGwKICAgICAgICAvLyBJZiBzbywgcmVzdWx0IG11c3QgYmUgZGVjcmVhc2VkIGJ5IDEgaW4gYWJzb2x1dGUgdmFsdWUKCiAgICAgICAgdmFyIGlzTGFzdE1vbnRoTm90RnVsbCA9IGNvbXBhcmVBc2MoZGF0ZUxlZnQsIGRhdGVSaWdodCkgPT09IC1zaWduOwogICAgICAgIHJldHVybiBzaWduICogKGRpZmZlcmVuY2UgLSBpc0xhc3RNb250aE5vdEZ1bGwpOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRpZmZlcmVuY2VJbk1vbnRoczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgcGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBNb250aCBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IEdldCB0aGUgbnVtYmVyIG9mIGNhbGVuZGFyIG1vbnRocyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIEdldCB0aGUgbnVtYmVyIG9mIGNhbGVuZGFyIG1vbnRocyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGxhdGVyIGRhdGUKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBlYXJsaWVyIGRhdGUKICAgICAgICogQHJldHVybnMge051bWJlcn0gdGhlIG51bWJlciBvZiBjYWxlbmRhciBtb250aHMKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSG93IG1hbnkgY2FsZW5kYXIgbW9udGhzIGFyZSBiZXR3ZWVuIDMxIEphbnVhcnkgMjAxNCBhbmQgMSBTZXB0ZW1iZXIgMjAxND8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDgsIDEpLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDAsIDMxKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gOAogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgewogICAgICAgIHZhciBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZUxlZnQpOwogICAgICAgIHZhciBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGVSaWdodCk7CiAgICAgICAgdmFyIHllYXJEaWZmID0gZGF0ZUxlZnQuZ2V0RnVsbFllYXIoKSAtIGRhdGVSaWdodC5nZXRGdWxsWWVhcigpOwogICAgICAgIHZhciBtb250aERpZmYgPSBkYXRlTGVmdC5nZXRNb250aCgpIC0gZGF0ZVJpZ2h0LmdldE1vbnRoKCk7CiAgICAgICAgcmV0dXJuIHllYXJEaWZmICogMTIgKyBtb250aERpZmY7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJNb250aHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjA3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHBhcnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgQ29tcGFyZSB0aGUgdHdvIGRhdGVzIGFuZCByZXR1cm4gLTEsIDAgb3IgMS4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIENvbXBhcmUgdGhlIHR3byBkYXRlcyBhbmQgcmV0dXJuIDEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYWZ0ZXIgdGhlIHNlY29uZCwKICAgICAgICogLTEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYmVmb3JlIHRoZSBzZWNvbmQgb3IgMCBpZiBkYXRlcyBhcmUgZXF1YWwuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNvbXBhcmUKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjb21wYXJlCiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb24KICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gQ29tcGFyZSAxMSBGZWJydWFyeSAxOTg3IGFuZCAxMCBKdWx5IDE5ODk6CiAgICAgICAqIHZhciByZXN1bHQgPSBjb21wYXJlQXNjKAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODcsIDEsIDExKSwKICAgICAgICogICBuZXcgRGF0ZSgxOTg5LCA2LCAxMCkKICAgICAgICogKQogICAgICAgKiAvLz0+IC0xCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFNvcnQgdGhlIGFycmF5IG9mIGRhdGVzOgogICAgICAgKiB2YXIgcmVzdWx0ID0gWwogICAgICAgKiAgIG5ldyBEYXRlKDE5OTUsIDYsIDIpLAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODcsIDEsIDExKSwKICAgICAgICogICBuZXcgRGF0ZSgxOTg5LCA2LCAxMCkKICAgICAgICogXS5zb3J0KGNvbXBhcmVBc2MpCiAgICAgICAqIC8vPT4gWwogICAgICAgKiAvLyAgIFdlZCBGZWIgMTEgMTk4NyAwMDowMDowMCwKICAgICAgICogLy8gICBNb24gSnVsIDEwIDE5ODkgMDA6MDA6MDAsCiAgICAgICAqIC8vICAgU3VuIEp1bCAwMiAxOTk1IDAwOjAwOjAwCiAgICAgICAqIC8vIF0KICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gY29tcGFyZUFzYyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgewogICAgICAgIHZhciBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZUxlZnQpOwogICAgICAgIHZhciB0aW1lTGVmdCA9IGRhdGVMZWZ0LmdldFRpbWUoKTsKICAgICAgICB2YXIgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlUmlnaHQpOwogICAgICAgIHZhciB0aW1lUmlnaHQgPSBkYXRlUmlnaHQuZ2V0VGltZSgpOwoKICAgICAgICBpZiAodGltZUxlZnQgPCB0aW1lUmlnaHQpIHsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9IGVsc2UgaWYgKHRpbWVMZWZ0ID4gdGltZVJpZ2h0KSB7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGNvbXBhcmVBc2M7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjA4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDkpOwoKICAgICAgdmFyIGJ1aWxkRm9ybWF0TG9jYWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTApOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IExvY2FsZXMKICAgICAgICogQHN1bW1hcnkgRW5nbGlzaCBsb2NhbGUuCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgIGRpc3RhbmNlSW5Xb3JkczogYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSwKICAgICAgICBmb3JtYXQ6IGJ1aWxkRm9ybWF0TG9jYWxlKCkKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBmdW5jdGlvbiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpIHsKICAgICAgICB2YXIgZGlzdGFuY2VJbldvcmRzTG9jYWxlID0gewogICAgICAgICAgbGVzc1RoYW5YU2Vjb25kczogewogICAgICAgICAgICBvbmU6ICdsZXNzIHRoYW4gYSBzZWNvbmQnLAogICAgICAgICAgICBvdGhlcjogJ2xlc3MgdGhhbiB7e2NvdW50fX0gc2Vjb25kcycKICAgICAgICAgIH0sCiAgICAgICAgICB4U2Vjb25kczogewogICAgICAgICAgICBvbmU6ICcxIHNlY29uZCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IHNlY29uZHMnCiAgICAgICAgICB9LAogICAgICAgICAgaGFsZkFNaW51dGU6ICdoYWxmIGEgbWludXRlJywKICAgICAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnbGVzcyB0aGFuIGEgbWludXRlJywKICAgICAgICAgICAgb3RoZXI6ICdsZXNzIHRoYW4ge3tjb3VudH19IG1pbnV0ZXMnCiAgICAgICAgICB9LAogICAgICAgICAgeE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnMSBtaW51dGUnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBtaW51dGVzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2Fib3V0IDEgaG91cicsCiAgICAgICAgICAgIG90aGVyOiAnYWJvdXQge3tjb3VudH19IGhvdXJzJwogICAgICAgICAgfSwKICAgICAgICAgIHhIb3VyczogewogICAgICAgICAgICBvbmU6ICcxIGhvdXInLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBob3VycycKICAgICAgICAgIH0sCiAgICAgICAgICB4RGF5czogewogICAgICAgICAgICBvbmU6ICcxIGRheScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGRheXMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYTW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJ2Fib3V0IDEgbW9udGgnLAogICAgICAgICAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSBtb250aHMnCiAgICAgICAgICB9LAogICAgICAgICAgeE1vbnRoczogewogICAgICAgICAgICBvbmU6ICcxIG1vbnRoJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gbW9udGhzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2Fib3V0IDEgeWVhcicsCiAgICAgICAgICAgIG90aGVyOiAnYWJvdXQge3tjb3VudH19IHllYXJzJwogICAgICAgICAgfSwKICAgICAgICAgIHhZZWFyczogewogICAgICAgICAgICBvbmU6ICcxIHllYXInLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSB5ZWFycycKICAgICAgICAgIH0sCiAgICAgICAgICBvdmVyWFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ292ZXIgMSB5ZWFyJywKICAgICAgICAgICAgb3RoZXI6ICdvdmVyIHt7Y291bnR9fSB5ZWFycycKICAgICAgICAgIH0sCiAgICAgICAgICBhbG1vc3RYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnYWxtb3N0IDEgeWVhcicsCiAgICAgICAgICAgIG90aGVyOiAnYWxtb3N0IHt7Y291bnR9fSB5ZWFycycKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsb2NhbGl6ZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgICBpZiAodHlwZW9mIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl07CiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub25lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vdGhlci5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdpbiAnICsgcmVzdWx0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQgKyAnIGFnbyc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxvY2FsaXplOiBsb2NhbGl6ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjEwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGJ1aWxkRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IF9fd2VicGFja19yZXF1aXJlX18oMjExKTsKCiAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0TG9jYWxlKCkgewogICAgICAgIC8vIE5vdGU6IGluIEVuZ2xpc2gsIHRoZSBuYW1lcyBvZiBkYXlzIG9mIHRoZSB3ZWVrIGFuZCBtb250aHMgYXJlIGNhcGl0YWxpemVkLgogICAgICAgIC8vIElmIHlvdSBhcmUgbWFraW5nIGEgbmV3IGxvY2FsZSBiYXNlZCBvbiB0aGlzIG9uZSwgY2hlY2sgaWYgdGhlIHNhbWUgaXMgdHJ1ZSBmb3IgdGhlIGxhbmd1YWdlIHlvdSdyZSB3b3JraW5nIG9uLgogICAgICAgIC8vIEdlbmVyYWxseSwgZm9ybWF0dGVkIGRhdGVzIHNob3VsZCBsb29rIGxpa2UgdGhleSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhIHNlbnRlbmNlLAogICAgICAgIC8vIGUuZy4gaW4gU3BhbmlzaCBsYW5ndWFnZSB0aGUgd2Vla2RheXMgYW5kIG1vbnRocyBzaG91bGQgYmUgaW4gdGhlIGxvd2VyY2FzZS4KICAgICAgICB2YXIgbW9udGhzM2NoYXIgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ107CiAgICAgICAgdmFyIG1vbnRoc0Z1bGwgPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXTsKICAgICAgICB2YXIgd2Vla2RheXMyY2hhciA9IFsnU3UnLCAnTW8nLCAnVHUnLCAnV2UnLCAnVGgnLCAnRnInLCAnU2EnXTsKICAgICAgICB2YXIgd2Vla2RheXMzY2hhciA9IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J107CiAgICAgICAgdmFyIHdlZWtkYXlzRnVsbCA9IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXTsKICAgICAgICB2YXIgbWVyaWRpZW1VcHBlcmNhc2UgPSBbJ0FNJywgJ1BNJ107CiAgICAgICAgdmFyIG1lcmlkaWVtTG93ZXJjYXNlID0gWydhbScsICdwbSddOwogICAgICAgIHZhciBtZXJpZGllbUZ1bGwgPSBbJ2EubS4nLCAncC5tLiddOwogICAgICAgIHZhciBmb3JtYXR0ZXJzID0gewogICAgICAgICAgLy8gTW9udGg6IEphbiwgRmViLCAuLi4sIERlYwogICAgICAgICAgJ01NTSc6IGZ1bmN0aW9uIE1NTShkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBtb250aHMzY2hhcltkYXRlLmdldE1vbnRoKCldOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIE1vbnRoOiBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlcgogICAgICAgICAgJ01NTU0nOiBmdW5jdGlvbiBNTU1NKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIG1vbnRoc0Z1bGxbZGF0ZS5nZXRNb250aCgpXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBEYXkgb2Ygd2VlazogU3UsIE1vLCAuLi4sIFNhCiAgICAgICAgICAnZGQnOiBmdW5jdGlvbiBkZChkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5czJjaGFyW2RhdGUuZ2V0RGF5KCldOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIERheSBvZiB3ZWVrOiBTdW4sIE1vbiwgLi4uLCBTYXQKICAgICAgICAgICdkZGQnOiBmdW5jdGlvbiBkZGQoZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gd2Vla2RheXMzY2hhcltkYXRlLmdldERheSgpXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBEYXkgb2Ygd2VlazogU3VuZGF5LCBNb25kYXksIC4uLiwgU2F0dXJkYXkKICAgICAgICAgICdkZGRkJzogZnVuY3Rpb24gZGRkZChkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5c0Z1bGxbZGF0ZS5nZXREYXkoKV07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gQU0sIFBNCiAgICAgICAgICAnQSc6IGZ1bmN0aW9uIEEoZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpIC8gMTIgPj0gMSA/IG1lcmlkaWVtVXBwZXJjYXNlWzFdIDogbWVyaWRpZW1VcHBlcmNhc2VbMF07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gYW0sIHBtCiAgICAgICAgICAnYSc6IGZ1bmN0aW9uIGEoZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpIC8gMTIgPj0gMSA/IG1lcmlkaWVtTG93ZXJjYXNlWzFdIDogbWVyaWRpZW1Mb3dlcmNhc2VbMF07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gYS5tLiwgcC5tLgogICAgICAgICAgJ2FhJzogZnVuY3Rpb24gYWEoZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpIC8gMTIgPj0gMSA/IG1lcmlkaWVtRnVsbFsxXSA6IG1lcmlkaWVtRnVsbFswXTsKICAgICAgICAgIH0KICAgICAgICB9OyAvLyBHZW5lcmF0ZSBvcmRpbmFsIHZlcnNpb24gb2YgZm9ybWF0dGVyczogTSAtPiBNbywgRCAtPiBEbywgZXRjLgoKICAgICAgICB2YXIgb3JkaW5hbEZvcm1hdHRlcnMgPSBbJ00nLCAnRCcsICdEREQnLCAnZCcsICdRJywgJ1cnXTsKICAgICAgICBvcmRpbmFsRm9ybWF0dGVycy5mb3JFYWNoKGZ1bmN0aW9uIChmb3JtYXR0ZXJUb2tlbikgewogICAgICAgICAgZm9ybWF0dGVyc1tmb3JtYXR0ZXJUb2tlbiArICdvJ10gPSBmdW5jdGlvbiAoZGF0ZSwgZm9ybWF0dGVycykgewogICAgICAgICAgICByZXR1cm4gb3JkaW5hbChmb3JtYXR0ZXJzW2Zvcm1hdHRlclRva2VuXShkYXRlKSk7CiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBmb3JtYXR0ZXJzOiBmb3JtYXR0ZXJzLAogICAgICAgICAgZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cDogYnVpbGRGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKGZvcm1hdHRlcnMpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHsKICAgICAgICB2YXIgcmVtMTAwID0gbnVtYmVyICUgMTAwOwoKICAgICAgICBpZiAocmVtMTAwID4gMjAgfHwgcmVtMTAwIDwgMTApIHsKICAgICAgICAgIHN3aXRjaCAocmVtMTAwICUgMTApIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyAnc3QnOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyAnbmQnOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyAncmQnOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bWJlciArICd0aCc7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGRGb3JtYXRMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjExICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgdmFyIGNvbW1vbkZvcm1hdHRlcktleXMgPSBbJ00nLCAnTU0nLCAnUScsICdEJywgJ0REJywgJ0RERCcsICdEREREJywgJ2QnLCAnRScsICdXJywgJ1dXJywgJ1lZJywgJ1lZWVknLCAnR0cnLCAnR0dHRycsICdIJywgJ0hIJywgJ2gnLCAnaGgnLCAnbScsICdtbScsICdzJywgJ3NzJywgJ1MnLCAnU1MnLCAnU1NTJywgJ1onLCAnWlonLCAnWCcsICd4J107CgogICAgICBmdW5jdGlvbiBidWlsZEZvcm1hdHRpbmdUb2tlbnNSZWdFeHAoZm9ybWF0dGVycykgewogICAgICAgIHZhciBmb3JtYXR0ZXJLZXlzID0gW107CgogICAgICAgIGZvciAodmFyIGtleSBpbiBmb3JtYXR0ZXJzKSB7CiAgICAgICAgICBpZiAoZm9ybWF0dGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgIGZvcm1hdHRlcktleXMucHVzaChrZXkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIGZvcm1hdHRpbmdUb2tlbnMgPSBjb21tb25Gb3JtYXR0ZXJLZXlzLmNvbmNhdChmb3JtYXR0ZXJLZXlzKS5zb3J0KCkucmV2ZXJzZSgpOwogICAgICAgIHZhciBmb3JtYXR0aW5nVG9rZW5zUmVnRXhwID0gbmV3IFJlZ0V4cCgnKFxcW1teXFxbXSpcXF0pfChcXFxcKT8nICsgJygnICsgZm9ybWF0dGluZ1Rva2Vucy5qb2luKCd8JykgKyAnfC4pJywgJ2cnKTsKICAgICAgICByZXR1cm4gZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cDsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZEZvcm1hdHRpbmdUb2tlbnNSZWdFeHA7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjEyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZnVuY3Rpb24gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSB7CiAgICAgICAgdmFyIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IHsKICAgICAgICAgIGxlc3NUaGFuWFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAn5LiN5YiwIDEg56eSJywKICAgICAgICAgICAgb3RoZXI6ICfkuI3liLAge3tjb3VudH19IOenkicKICAgICAgICAgIH0sCiAgICAgICAgICB4U2Vjb25kczogewogICAgICAgICAgICBvbmU6ICcxIOenkicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOenkicKICAgICAgICAgIH0sCiAgICAgICAgICBoYWxmQU1pbnV0ZTogJ+WNiuWIhumSnycsCiAgICAgICAgICBsZXNzVGhhblhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJ+S4jeWIsCAxIOWIhumSnycsCiAgICAgICAgICAgIG90aGVyOiAn5LiN5YiwIHt7Y291bnR9fSDliIbpkp8nCiAgICAgICAgICB9LAogICAgICAgICAgeE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnMSDliIbpkp8nLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDliIbpkp8nCiAgICAgICAgICB9LAogICAgICAgICAgeEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5bCP5pe2JywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5bCP5pe2JwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wkp+e6piAxIOWwj+aXticsCiAgICAgICAgICAgIG90aGVyOiAn5aSn57qmIHt7Y291bnR9fSDlsI/ml7YnCiAgICAgICAgICB9LAogICAgICAgICAgeERheXM6IHsKICAgICAgICAgICAgb25lOiAnMSDlpKknLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlpKknCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYTW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wkp+e6piAxIOS4quaciCcsCiAgICAgICAgICAgIG90aGVyOiAn5aSn57qmIHt7Y291bnR9fSDkuKrmnIgnCiAgICAgICAgICB9LAogICAgICAgICAgeE1vbnRoczogewogICAgICAgICAgICBvbmU6ICcxIOS4quaciCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOS4quaciCcKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhZZWFyczogewogICAgICAgICAgICBvbmU6ICflpKfnuqYgMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ+Wkp+e6piB7e2NvdW50fX0g5bm0JwogICAgICAgICAgfSwKICAgICAgICAgIHhZZWFyczogewogICAgICAgICAgICBvbmU6ICcxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOW5tCcKICAgICAgICAgIH0sCiAgICAgICAgICBvdmVyWFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+i2hei/hyAxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAn6LaF6L+HIHt7Y291bnR9fSDlubQnCiAgICAgICAgICB9LAogICAgICAgICAgYWxtb3N0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wwhui/kSAxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAn5bCG6L+RIHt7Y291bnR9fSDlubQnCiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbG9jYWxpemUodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dOwogICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm9uZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQgKyAn5YaFJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ+WJjSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxvY2FsaXplOiBsb2NhbGl6ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjEzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZnVuY3Rpb24gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSB7CiAgICAgICAgdmFyIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IHsKICAgICAgICAgIGxlc3NUaGFuWFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAn5bCR5pa8IDEg56eSJywKICAgICAgICAgICAgb3RoZXI6ICflsJHmlrwge3tjb3VudH19IOenkicKICAgICAgICAgIH0sCiAgICAgICAgICB4U2Vjb25kczogewogICAgICAgICAgICBvbmU6ICcxIOenkicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOenkicKICAgICAgICAgIH0sCiAgICAgICAgICBoYWxmQU1pbnV0ZTogJ+WNiuWIhumQmCcsCiAgICAgICAgICBsZXNzVGhhblhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJ+WwkeaWvCAxIOWIhumQmCcsCiAgICAgICAgICAgIG90aGVyOiAn5bCR5pa8IHt7Y291bnR9fSDliIbpkJgnCiAgICAgICAgICB9LAogICAgICAgICAgeE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnMSDliIbpkJgnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDliIbpkJgnCiAgICAgICAgICB9LAogICAgICAgICAgeEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5bCP5pmCJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5bCP5pmCJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wkp+e0hCAxIOWwj+aZgicsCiAgICAgICAgICAgIG90aGVyOiAn5aSn57SEIHt7Y291bnR9fSDlsI/mmYInCiAgICAgICAgICB9LAogICAgICAgICAgeERheXM6IHsKICAgICAgICAgICAgb25lOiAnMSDlpKknLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlpKknCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYTW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wkp+e0hCAxIOWAi+aciCcsCiAgICAgICAgICAgIG90aGVyOiAn5aSn57SEIHt7Y291bnR9fSDlgIvmnIgnCiAgICAgICAgICB9LAogICAgICAgICAgeE1vbnRoczogewogICAgICAgICAgICBvbmU6ICcxIOWAi+aciCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWAi+aciCcKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhZZWFyczogewogICAgICAgICAgICBvbmU6ICflpKfntIQgMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ+Wkp+e0hCB7e2NvdW50fX0g5bm0JwogICAgICAgICAgfSwKICAgICAgICAgIHhZZWFyczogewogICAgICAgICAgICBvbmU6ICcxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOW5tCcKICAgICAgICAgIH0sCiAgICAgICAgICBvdmVyWFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+i2hemBjiAxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAn6LaF6YGOIHt7Y291bnR9fSDlubQnCiAgICAgICAgICB9LAogICAgICAgICAgYWxtb3N0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wwh+i/kSAxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAn5bCH6L+RIHt7Y291bnR9fSDlubQnCiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbG9jYWxpemUodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dOwogICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm9uZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQgKyAn5YWnJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ+WJjSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxvY2FsaXplOiBsb2NhbGl6ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjE0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZnVuY3Rpb24gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSB7CiAgICAgICAgdmFyIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IHsKICAgICAgICAgIGxlc3NUaGFuWFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnbWVub3MgZGUgdW4gc2VndW5kbycsCiAgICAgICAgICAgIG90aGVyOiAnbWVub3MgZGUge3tjb3VudH19IHNlZ3VuZG9zJwogICAgICAgICAgfSwKICAgICAgICAgIHhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJzEgc2VndW5kbycsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IHNlZ3VuZG9zJwogICAgICAgICAgfSwKICAgICAgICAgIGhhbGZBTWludXRlOiAnbWVkaW8gbWludXRvJywKICAgICAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnbWVub3MgZGUgdW4gbWludXRvJywKICAgICAgICAgICAgb3RoZXI6ICdtZW5vcyBkZSB7e2NvdW50fX0gbWludXRvcycKICAgICAgICAgIH0sCiAgICAgICAgICB4TWludXRlczogewogICAgICAgICAgICBvbmU6ICcxIG1pbnV0bycsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IG1pbnV0b3MnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYSG91cnM6IHsKICAgICAgICAgICAgb25lOiAnYWxyZWRlZG9yIGRlIDEgaG9yYScsCiAgICAgICAgICAgIG90aGVyOiAnYWxyZWRlZG9yIGRlIHt7Y291bnR9fSBob3JhcycKICAgICAgICAgIH0sCiAgICAgICAgICB4SG91cnM6IHsKICAgICAgICAgICAgb25lOiAnMSBob3JhJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gaG9yYXMnCiAgICAgICAgICB9LAogICAgICAgICAgeERheXM6IHsKICAgICAgICAgICAgb25lOiAnMSBkw61hJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gZMOtYXMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYTW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJ2FscmVkZWRvciBkZSAxIG1lcycsCiAgICAgICAgICAgIG90aGVyOiAnYWxyZWRlZG9yIGRlIHt7Y291bnR9fSBtZXNlcycKICAgICAgICAgIH0sCiAgICAgICAgICB4TW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJzEgbWVzJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gbWVzZXMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnYWxyZWRlZG9yIGRlIDEgYcOxbycsCiAgICAgICAgICAgIG90aGVyOiAnYWxyZWRlZG9yIGRlIHt7Y291bnR9fSBhw7FvcycKICAgICAgICAgIH0sCiAgICAgICAgICB4WWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnMSBhw7FvJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gYcOxb3MnCiAgICAgICAgICB9LAogICAgICAgICAgb3ZlclhZZWFyczogewogICAgICAgICAgICBvbmU6ICdtw6FzIGRlIDEgYcOxbycsCiAgICAgICAgICAgIG90aGVyOiAnbcOhcyBkZSB7e2NvdW50fX0gYcOxb3MnCiAgICAgICAgICB9LAogICAgICAgICAgYWxtb3N0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2Nhc2kgMSBhw7FvJywKICAgICAgICAgICAgb3RoZXI6ICdjYXNpIHt7Y291bnR9fSBhw7FvcycKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsb2NhbGl6ZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgICBpZiAodHlwZW9mIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl07CiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub25lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vdGhlci5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdlbiAnICsgcmVzdWx0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiAnaGFjZSAnICsgcmVzdWx0OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2NhbGl6ZTogbG9jYWxpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCkgewogICAgICAgIHZhciBkaXN0YW5jZUluV29yZHNMb2NhbGUgPSB7CiAgICAgICAgICBsZXNzVGhhblhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJ21vaW5zIGTigJl1bmUgc2Vjb25kZScsCiAgICAgICAgICAgIG90aGVyOiAnbW9pbnMgZGUge3tjb3VudH19IHNlY29uZGVzJwogICAgICAgICAgfSwKICAgICAgICAgIHhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJzEgc2Vjb25kZScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IHNlY29uZGVzJwogICAgICAgICAgfSwKICAgICAgICAgIGhhbGZBTWludXRlOiAnMzAgc2Vjb25kZXMnLAogICAgICAgICAgbGVzc1RoYW5YTWludXRlczogewogICAgICAgICAgICBvbmU6ICdtb2lucyBk4oCZdW5lIG1pbnV0ZScsCiAgICAgICAgICAgIG90aGVyOiAnbW9pbnMgZGUge3tjb3VudH19IG1pbnV0ZXMnCiAgICAgICAgICB9LAogICAgICAgICAgeE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnMSBtaW51dGUnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBtaW51dGVzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2Vudmlyb24gMSBoZXVyZScsCiAgICAgICAgICAgIG90aGVyOiAnZW52aXJvbiB7e2NvdW50fX0gaGV1cmVzJwogICAgICAgICAgfSwKICAgICAgICAgIHhIb3VyczogewogICAgICAgICAgICBvbmU6ICcxIGhldXJlJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gaGV1cmVzJwogICAgICAgICAgfSwKICAgICAgICAgIHhEYXlzOiB7CiAgICAgICAgICAgIG9uZTogJzEgam91cicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGpvdXJzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WE1vbnRoczogewogICAgICAgICAgICBvbmU6ICdlbnZpcm9uIDEgbW9pcycsCiAgICAgICAgICAgIG90aGVyOiAnZW52aXJvbiB7e2NvdW50fX0gbW9pcycKICAgICAgICAgIH0sCiAgICAgICAgICB4TW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJzEgbW9pcycsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IG1vaXMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnZW52aXJvbiAxIGFuJywKICAgICAgICAgICAgb3RoZXI6ICdlbnZpcm9uIHt7Y291bnR9fSBhbnMnCiAgICAgICAgICB9LAogICAgICAgICAgeFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEgYW4nLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBhbnMnCiAgICAgICAgICB9LAogICAgICAgICAgb3ZlclhZZWFyczogewogICAgICAgICAgICBvbmU6ICdwbHVzIGTigJl1biBhbicsCiAgICAgICAgICAgIG90aGVyOiAncGx1cyBkZSB7e2NvdW50fX0gYW5zJwogICAgICAgICAgfSwKICAgICAgICAgIGFsbW9zdFhZZWFyczogewogICAgICAgICAgICBvbmU6ICdwcmVzcXXigJl1biBhbicsCiAgICAgICAgICAgIG90aGVyOiAncHJlc3F1ZSB7e2NvdW50fX0gYW5zJwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxvY2FsaXplKHRva2VuLCBjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXTsKICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vbmU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm90aGVyLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gJ2RhbnMgJyArIHJlc3VsdDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gJ2lsIHkgYSAnICsgcmVzdWx0OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2NhbGl6ZTogbG9jYWxpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGZ1bmN0aW9uIGRlY2xlbnNpb24oc2NoZW1lLCBjb3VudCkgewogICAgICAgIC8vIHNjaGVtZSBmb3IgY291bnQ9MSBleGlzdHMKICAgICAgICBpZiAoc2NoZW1lLm9uZSAhPT0gdW5kZWZpbmVkICYmIGNvdW50ID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gc2NoZW1lLm9uZTsKICAgICAgICB9CgogICAgICAgIHZhciByZW0xMCA9IGNvdW50ICUgMTA7CiAgICAgICAgdmFyIHJlbTEwMCA9IGNvdW50ICUgMTAwOyAvLyAxLCAyMSwgMzEsIC4uLgoKICAgICAgICBpZiAocmVtMTAgPT09IDEgJiYgcmVtMTAwICE9PSAxMSkgewogICAgICAgICAgcmV0dXJuIHNjaGVtZS5zaW5ndWxhck5vbWluYXRpdmUucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOyAvLyAyLCAzLCA0LCAyMiwgMjMsIDI0LCAzMiAuLi4KICAgICAgICB9IGVsc2UgaWYgKHJlbTEwID49IDIgJiYgcmVtMTAgPD0gNCAmJiAocmVtMTAwIDwgMTAgfHwgcmVtMTAwID4gMjApKSB7CiAgICAgICAgICByZXR1cm4gc2NoZW1lLnNpbmd1bGFyR2VuaXRpdmUucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOyAvLyA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIC4uLgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gc2NoZW1lLnBsdXJhbEdlbml0aXZlLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGJ1aWxkTG9jYWxpemVUb2tlbkZuKHNjaGVtZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgIGlmIChzY2hlbWUuZnV0dXJlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVjbGVuc2lvbihzY2hlbWUuZnV0dXJlLCBjb3VudCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAn0YfQtdGA0LXQtyAnICsgZGVjbGVuc2lvbihzY2hlbWUucmVndWxhciwgY291bnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoc2NoZW1lLnBhc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkZWNsZW5zaW9uKHNjaGVtZS5wYXN0LCBjb3VudCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBkZWNsZW5zaW9uKHNjaGVtZS5yZWd1bGFyLCBjb3VudCkgKyAnINC90LDQt9Cw0LQnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGRlY2xlbnNpb24oc2NoZW1lLnJlZ3VsYXIsIGNvdW50KTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpIHsKICAgICAgICB2YXIgZGlzdGFuY2VJbldvcmRzTG9jYWxlID0gewogICAgICAgICAgbGVzc1RoYW5YU2Vjb25kczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgb25lOiAn0LzQtdC90YzRiNC1INGB0LXQutGD0L3QtNGLJywKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvNC10L3RjNGI0LUge3tjb3VudH19INGB0LXQutGD0L3QtNGLJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0LzQtdC90YzRiNC1IHt7Y291bnR9fSDRgdC10LrRg9C90LQnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0LzQtdC90YzRiNC1IHt7Y291bnR9fSDRgdC10LrRg9C90LQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIG9uZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcg0YHQtdC60YPQvdC00YMnLAogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INGB0LXQutGD0L3QtNGDJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0YHQtdC60YPQvdC00YsnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0YHQtdC60YPQvdC0JwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIHhTZWNvbmRzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0YHQtdC60YPQvdC00LAnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0YHQtdC60YPQvdC00YsnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INGB0LXQutGD0L3QtCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFzdDogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDRgdC10LrRg9C90LTRgyDQvdCw0LfQsNC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INGB0LXQutGD0L3QtNGLINC90LDQt9Cw0LQnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INGB0LXQutGD0L3QtCDQvdCw0LfQsNC0JwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfRh9C10YDQtdC3IHt7Y291bnR9fSDRgdC10LrRg9C90LTRgycsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9GH0LXRgNC10Lcge3tjb3VudH19INGB0LXQutGD0L3QtNGLJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9GH0LXRgNC10Lcge3tjb3VudH19INGB0LXQutGD0L3QtCcKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBoYWxmQU1pbnV0ZTogZnVuY3Rpb24gaGFsZkFNaW51dGUoXywgb3B0aW9ucykgewogICAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuICfRh9C10YDQtdC3INC/0L7Qu9C80LjQvdGD0YLRiyc7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAn0L/QvtC70LzQuNC90YPRgtGLINC90LDQt9Cw0LQnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuICfQv9C+0LvQvNC40L3Rg9GC0YsnOwogICAgICAgICAgfSwKICAgICAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIG9uZTogJ9C80LXQvdGM0YjQtSDQvNC40L3Rg9GC0YsnLAogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C80LXQvdGM0YjQtSB7e2NvdW50fX0g0LzQuNC90YPRgtGLJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0LzQtdC90YzRiNC1IHt7Y291bnR9fSDQvNC40L3Rg9GCJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSB7e2NvdW50fX0g0LzQuNC90YPRgicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgb25lOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyDQvNC40L3Rg9GC0YMnLAogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INC80LjQvdGD0YLRgycsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INC80LjQvdGD0YLRiycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC40L3Rg9GCJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIHhNaW51dGVzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0LzQuNC90YPRgtCwJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INC80LjQvdGD0YLRiycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0LzQuNC90YPRgicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFzdDogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDQvNC40L3Rg9GC0YMg0L3QsNC30LDQtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDQvNC40L3Rg9GC0Ysg0L3QsNC30LDQtCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0LzQuNC90YPRgiDQvdCw0LfQsNC0JwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC40L3Rg9GC0YMnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC40L3Rg9GC0YsnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQuNC90YPRgicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBhYm91dFhIb3VyczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0YfQsNGB0LAnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDRh9Cw0YHQvtCyJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INGH0LDRgdC+0LInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0YfQsNGBJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDRh9Cw0YHQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INGH0LDRgdC+0LInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgeEhvdXJzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0YfQsNGBJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INGH0LDRgdCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDRh9Cw0YHQvtCyJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIHhEYXlzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0LTQtdC90YwnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0LTQvdGPJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDQtNC90LXQuScKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBhYm91dFhNb250aHM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INC80LXRgdGP0YbQsCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INC80LXRgdGP0YbQtdCyJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INC80LXRgdGP0YbQtdCyJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INC80LXRgdGP0YYnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INC80LXRgdGP0YbQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INC80LXRgdGP0YbQtdCyJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIHhNb250aHM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDQvNC10YHRj9GGJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INC80LXRgdGP0YbQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0LzQtdGB0Y/RhtC10LInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgYWJvdXRYWWVhcnM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0LvQtdGCJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDQs9C+0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIHhZZWFyczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INCz0L7QtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIG92ZXJYWWVhcnM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9Cx0L7Qu9GM0YjQtSB7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQsdC+0LvRjNGI0LUge3tjb3VudH19INC70LXRgicsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQsdC+0LvRjNGI0LUge3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0LHQvtC70YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LPQvtC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0LHQvtC70YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0LHQvtC70YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIGFsbW9zdFhZZWFyczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L/QvtGH0YLQuCB7e2NvdW50fX0g0LPQvtC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L/QvtGH0YLQuCB7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L/QvtGH0YLQuCB7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQv9C+0YfRgtC4INGH0LXRgNC10Lcge3tjb3VudH19INCz0L7QtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C/0L7Rh9GC0Lgg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L/QvtGH0YLQuCDRh9C10YDQtdC3IHt7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbG9jYWxpemUodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHJldHVybiBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dKGNvdW50LCBvcHRpb25zKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2NhbGl6ZTogbG9jYWxpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4KCiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjE4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgICB2YXIgR1RfQUNDRVNTX1RPS0VOID0gZXhwb3J0cy5HVF9BQ0NFU1NfVE9LRU4gPSAnR1RfQUNDRVNTX1RPS0VOJzsKICAgICAgdmFyIEdUX1ZFUlNJT04gPSBleHBvcnRzLkdUX1ZFUlNJT04gPSAiMS42LjIiOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCgogICAgICB2YXIgR1RfQ09NTUVOVCA9IGV4cG9ydHMuR1RfQ09NTUVOVCA9ICdHVF9DT01NRU5UJzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX3RvQ29uc3VtYWJsZUFycmF5MiA9IF9fd2VicGFja19yZXF1aXJlX18oMjIwKTsKCiAgICAgIHZhciBfdG9Db25zdW1hYmxlQXJyYXkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdG9Db25zdW1hYmxlQXJyYXkyKTsKCiAgICAgIHZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgZ2V0UUwgPSBmdW5jdGlvbiBnZXRRTCh2YXJzLCBwYWdlckRpcmVjdGlvbikgewogICAgICAgIHZhciBjdXJzb3JEaXJlY3Rpb24gPSBwYWdlckRpcmVjdGlvbiA9PT0gJ2xhc3QnID8gJ2JlZm9yZScgOiAnYWZ0ZXInOwogICAgICAgIHZhciBxbCA9ICdcbiAgcXVlcnkgZ2V0SXNzdWVBbmRDb21tZW50cyhcbiAgICAkb3duZXI6IFN0cmluZyEsXG4gICAgJHJlcG86IFN0cmluZyEsXG4gICAgJGlkOiBJbnQhLFxuICAgICRjdXJzb3I6IFN0cmluZyxcbiAgICAkcGFnZVNpemU6IEludCFcbiAgKSB7XG4gICAgcmVwb3NpdG9yeShvd25lcjogJG93bmVyLCBuYW1lOiAkcmVwbykge1xuICAgICAgaXNzdWUobnVtYmVyOiAkaWQpIHtcbiAgICAgICAgdGl0bGVcbiAgICAgICAgdXJsXG4gICAgICAgIGJvZHlIVE1MXG4gICAgICAgIGNyZWF0ZWRBdFxuICAgICAgICBjb21tZW50cygnICsgcGFnZXJEaXJlY3Rpb24gKyAnOiAkcGFnZVNpemUsICcgKyBjdXJzb3JEaXJlY3Rpb24gKyAnOiAkY3Vyc29yKSB7XG4gICAgICAgICAgdG90YWxDb3VudFxuICAgICAgICAgIHBhZ2VJbmZvIHtcbiAgICAgICAgICAgICcgKyAocGFnZXJEaXJlY3Rpb24gPT09ICdsYXN0JyA/ICdoYXNQcmV2aW91c1BhZ2UnIDogJ2hhc05leHRQYWdlJykgKyAnXG4gICAgICAgICAgICAnICsgKGN1cnNvckRpcmVjdGlvbiA9PT0gJ2JlZm9yZScgPyAnc3RhcnRDdXJzb3InIDogJ2VuZEN1cnNvcicpICsgJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBub2RlcyB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgZGF0YWJhc2VJZFxuICAgICAgICAgICAgYXV0aG9yIHtcbiAgICAgICAgICAgICAgYXZhdGFyVXJsXG4gICAgICAgICAgICAgIGxvZ2luXG4gICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9keUhUTUxcbiAgICAgICAgICAgIGJvZHlcbiAgICAgICAgICAgIGNyZWF0ZWRBdFxuICAgICAgICAgICAgcmVhY3Rpb25zKGZpcnN0OiAxMDAsIGNvbnRlbnQ6IEhFQVJUKSB7XG4gICAgICAgICAgICAgIHRvdGFsQ291bnRcbiAgICAgICAgICAgICAgdmlld2VySGFzUmVhY3RlZFxuICAgICAgICAgICAgICBwYWdlSW5mb3tcbiAgICAgICAgICAgICAgICBoYXNOZXh0UGFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5vZGVzIHtcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgIGRhdGFiYXNlSWRcbiAgICAgICAgICAgICAgICB1c2VyIHtcbiAgICAgICAgICAgICAgICAgIGxvZ2luXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gICc7CiAgICAgICAgaWYgKHZhcnMuY3Vyc29yID09PSBudWxsKSBkZWxldGUgdmFycy5jdXJzb3I7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG9wZXJhdGlvbk5hbWU6ICdnZXRJc3N1ZUFuZENvbW1lbnRzJywKICAgICAgICAgIHF1ZXJ5OiBxbCwKICAgICAgICAgIHZhcmlhYmxlczogdmFycwogICAgICAgIH07CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBnZXRDb21tZW50cyhpc3N1ZSkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgb3duZXIgPSBfb3B0aW9ucy5vd25lciwKICAgICAgICAgICAgcmVwbyA9IF9vcHRpb25zLnJlcG8sCiAgICAgICAgICAgIHBlclBhZ2UgPSBfb3B0aW9ucy5wZXJQYWdlLAogICAgICAgICAgICBwYWdlckRpcmVjdGlvbiA9IF9vcHRpb25zLnBhZ2VyRGlyZWN0aW9uLAogICAgICAgICAgICBkZWZhdWx0QXV0aG9yID0gX29wdGlvbnMuZGVmYXVsdEF1dGhvcjsKICAgICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgY3Vyc29yID0gX3N0YXRlLmN1cnNvciwKICAgICAgICAgICAgY29tbWVudHMgPSBfc3RhdGUuY29tbWVudHM7CiAgICAgICAgcmV0dXJuIF91dGlsLmF4aW9zR2l0aHViLnBvc3QoJy9ncmFwaHFsJywgZ2V0UUwoewogICAgICAgICAgb3duZXI6IG93bmVyLAogICAgICAgICAgcmVwbzogcmVwbywKICAgICAgICAgIGlkOiBpc3N1ZS5udW1iZXIsCiAgICAgICAgICBwYWdlU2l6ZTogcGVyUGFnZSwKICAgICAgICAgIGN1cnNvcjogY3Vyc29yCiAgICAgICAgfSwgcGFnZXJEaXJlY3Rpb24pLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdiZWFyZXIgJyArIHRoaXMuYWNjZXNzVG9rZW4KICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YS5yZXBvc2l0b3J5Lmlzc3VlLmNvbW1lbnRzOwogICAgICAgICAgdmFyIGl0ZW1zID0gZGF0YS5ub2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgdmFyIGF1dGhvciA9IG5vZGUuYXV0aG9yIHx8IGRlZmF1bHRBdXRob3I7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgaWQ6IG5vZGUuZGF0YWJhc2VJZCwKICAgICAgICAgICAgICBnSWQ6IG5vZGUuaWQsCiAgICAgICAgICAgICAgdXNlcjogewogICAgICAgICAgICAgICAgYXZhdGFyX3VybDogYXV0aG9yLmF2YXRhclVybCwKICAgICAgICAgICAgICAgIGxvZ2luOiBhdXRob3IubG9naW4sCiAgICAgICAgICAgICAgICBodG1sX3VybDogYXV0aG9yLnVybAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm9kZS5jcmVhdGVkQXQsCiAgICAgICAgICAgICAgYm9keV9odG1sOiBub2RlLmJvZHlIVE1MLAogICAgICAgICAgICAgIGJvZHk6IG5vZGUuYm9keSwKICAgICAgICAgICAgICBodG1sX3VybDogJ2h0dHBzOi8vZ2l0aHViLmNvbS8nICsgb3duZXIgKyAnLycgKyByZXBvICsgJy9pc3N1ZXMvJyArIGlzc3VlLm51bWJlciArICcjaXNzdWVjb21tZW50LScgKyBub2RlLmRhdGFiYXNlSWQsCiAgICAgICAgICAgICAgcmVhY3Rpb25zOiBub2RlLnJlYWN0aW9ucwogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgY3MgPSB2b2lkIDA7CgogICAgICAgICAgaWYgKHBhZ2VyRGlyZWN0aW9uID09PSAnbGFzdCcpIHsKICAgICAgICAgICAgY3MgPSBbXS5jb25jYXQoKDAsIF90b0NvbnN1bWFibGVBcnJheTNbImRlZmF1bHQiXSkoaXRlbXMpLCAoMCwgX3RvQ29uc3VtYWJsZUFycmF5M1siZGVmYXVsdCJdKShjb21tZW50cykpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3MgPSBbXS5jb25jYXQoKDAsIF90b0NvbnN1bWFibGVBcnJheTNbImRlZmF1bHQiXSkoY29tbWVudHMpLCAoMCwgX3RvQ29uc3VtYWJsZUFycmF5M1siZGVmYXVsdCJdKShpdGVtcykpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpc0xvYWRPdmVyID0gZGF0YS5wYWdlSW5mby5oYXNQcmV2aW91c1BhZ2UgPT09IGZhbHNlIHx8IGRhdGEucGFnZUluZm8uaGFzTmV4dFBhZ2UgPT09IGZhbHNlOwoKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgY29tbWVudHM6IGNzLAogICAgICAgICAgICBpc0xvYWRPdmVyOiBpc0xvYWRPdmVyLAogICAgICAgICAgICBjdXJzb3I6IGRhdGEucGFnZUluZm8uc3RhcnRDdXJzb3IgfHwgZGF0YS5wYWdlSW5mby5lbmRDdXJzb3IKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybiBjczsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZ2V0Q29tbWVudHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjIwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIHZhciBfZnJvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIxKTsKCiAgICAgIHZhciBfZnJvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mcm9tKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKGFycikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gYXJyMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICgwLCBfZnJvbTJbImRlZmF1bHQiXSkoYXJyKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDIyMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygyMjIpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMjIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjIzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5BcnJheS5mcm9tOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIyMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBjdHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoKICAgICAgdmFyIGNhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTsKCiAgICAgIHZhciBpc0FycmF5SXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpOwoKICAgICAgdmFyIHRvTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7CgogICAgICB2YXIgY3JlYXRlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNCk7CgogICAgICB2YXIgZ2V0SXRlckZuID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7CgogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKShmdW5jdGlvbiAoaXRlcikgewogICAgICAgIEFycmF5LmZyb20oaXRlcik7CiAgICAgIH0pLCAnQXJyYXknLCB7CiAgICAgICAgLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKQogICAgICAgIGZyb206IGZ1bmN0aW9uIGZyb20oYXJyYXlMaWtlCiAgICAgICAgLyogLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCAqLwogICAgICAgICkgewogICAgICAgICAgdmFyIE8gPSB0b09iamVjdChhcnJheUxpa2UpOwogICAgICAgICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5OwogICAgICAgICAgdmFyIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgICAgdmFyIG1hcGZuID0gYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgaW5kZXggPSAwOwogICAgICAgICAgdmFyIGl0ZXJGbiA9IGdldEl0ZXJGbihPKTsKICAgICAgICAgIHZhciBsZW5ndGgsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7CiAgICAgICAgICBpZiAobWFwcGluZykgbWFwZm4gPSBjdHgobWFwZm4sIGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkLCAyKTsgLy8gaWYgb2JqZWN0IGlzbid0IGl0ZXJhYmxlIG9yIGl0J3MgYXJyYXkgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yIC0gdXNlIHNpbXBsZSBjYXNlCgogICAgICAgICAgaWYgKGl0ZXJGbiAhPSB1bmRlZmluZWQgJiYgIShDID09IEFycmF5ICYmIGlzQXJyYXlJdGVyKGl0ZXJGbikpKSB7CiAgICAgICAgICAgIGZvciAoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChPKSwgcmVzdWx0ID0gbmV3IEMoKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IGNhbGwoaXRlcmF0b3IsIG1hcGZuLCBbc3RlcC52YWx1ZSwgaW5kZXhdLCB0cnVlKSA6IHN0ZXAudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7CgogICAgICAgICAgICBmb3IgKHJlc3VsdCA9IG5ldyBDKGxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IG1hcGZuKE9baW5kZXhdLCBpbmRleCkgOiBPW2luZGV4XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXN1bHQubGVuZ3RoID0gaW5kZXg7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjI0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyICRkZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CgogICAgICB2YXIgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0LCBpbmRleCwgdmFsdWUpIHsKICAgICAgICBpZiAoaW5kZXggaW4gb2JqZWN0KSAkZGVmaW5lUHJvcGVydHkuZihvYmplY3QsIGluZGV4LCBjcmVhdGVEZXNjKDAsIHZhbHVlKSk7ZWxzZSBvYmplY3RbaW5kZXhdID0gdmFsdWU7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfQogICAgLyoqKioqKi8KICAgIF0pCiAgKTsKfSk7"},{"version":3,"sources":["D:/项目/My_project/vuepress-starter/vuepress-starter/node_modules/gitalk/dist/gitalk.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","core","version","__e","global","window","Math","self","Function","__g","store","uid","Symbol","USE_SYMBOL","$exports","bind","toString","isArray","val","isUndefined","isBuffer","constructor","isArrayBuffer","isFormData","FormData","isArrayBufferView","result","ArrayBuffer","isView","buffer","isString","isNumber","isObject","isDate","isFile","isBlob","isFunction","isStream","pipe","isURLSearchParams","URLSearchParams","trim","str","replace","isStandardBrowserEnv","navigator","product","document","forEach","obj","fn","length","key","merge","assignValue","arguments","deepMerge","extend","a","b","thisArg","ctx","hide","has","PROTOTYPE","$export","type","source","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","target","own","out","undefined","C","apply","virtual","R","U","__webpack_exports__","value","process","DOM","Children","render$1","createClass","createFactory","createElement","cloneElement$1","isValidElement","findDOMNode","unmountComponentAtNode","Component$1","PureComponent","renderSubtreeIntoContainer","__WEBPACK_IMPORTED_MODULE_0_prop_types__","__WEBPACK_IMPORTED_MODULE_0_prop_types___default","__WEBPACK_IMPORTED_MODULE_1_preact__","__WEBPACK_IMPORTED_MODULE_1_preact___default","ELEMENTS","split","REACT_ELEMENT_TYPE","COMPONENT_WRAPPER_KEY","AUTOBIND_BLACKLIST","render","shouldComponentUpdate","componentWillReceiveProps","componentWillUpdate","componentDidUpdate","componentWillMount","componentDidMount","componentWillUnmount","componentDidUnmount","CAMEL_PROPS","BYPASS_HOOK","DEV","env","NODE_ENV","EmptyComponent","VNode","$$typeof","preactCompatUpgraded","preactCompatNormalized","nodeName","set","v","attributes","oldEventHook","event","e","persist","nativeEvent","oldVnodeHook","vnode","tag","attrs","children","String","normalizeVNode","handleComponentVNode","defaultValue","handleElementVNode","defaultProps","shouldSanitize","test","toLowerCase","parent","callback","prev","_preactCompatRendered","base","parentNode","childNodes","removeChild","_component","ContextProvider","getChildContext","props","context","parentComponent","container","wrap","existing","ARR","map","toArray","count","only","Error","Array","concat","currentComponent","upgradeToVNodes","arr","offset","isStatelessComponent","wrapStatelessComponent","WrappedComponent","displayName","statelessComponentHook","Ctor","Wrapped","propTypes","args","len","applyClassName","ref","createStringRefProxy","applyEventNormalization","element","elementProps","node","cloneArgs","push","component","_refProxies","resolved","refs","ondoubleclick","ondblclick","onchange","normalized","oninput","multihook","cl","className","shallowDiffers","i$1","bindAll","newComponentHook","mixins","applyMixins","collateMixins","statics","getDefaultProps","keyed","mixin","proto","__bound","callMethod","hooks","skipDuplicates","arguments$1","this$1","ret","r","propsHook","beforeRender","afterRender","ctor","checkPropTypes","opts","state","getInitialState","isReactComponent","replaceState","setState","getDOMNode","isMounted","isPureReactComponent","index","PropTypes","cloneElement","Component","unstable_renderSubtreeIntoContainer","it","TypeError","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","array","title","browser","argv","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","createDesc","aFunction","that","exec","IObject","defined","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE","DEFAULT_ADDITIONAL_DIGITS","parseTokenDateTimeDelimeter","parseTokenPlainTime","parseTokenYY","parseTokensYYY","parseTokenYYYY","parseTokensYYYYY","parseTokenMM","parseTokenDDD","parseTokenMMDD","parseTokenWww","parseTokenWwwD","parseTokenHH","parseTokenHHMM","parseTokenHHMMSS","parseTokenTimezone","parseTokenTimezoneZ","parseTokenTimezoneHH","parseTokenTimezoneHHMM","parse","argument","dirtyOptions","Date","getTime","options","additionalDigits","Number","dateStrings","splitDateString","parseYearResult","parseYear","date","year","restDateString","parseDate","timestamp","time","parseTime","timezone","parseTimezone","getTimezoneOffset","dateString","timeString","token","parseTokenYYY","parseTokenYYYYY","yearString","parseInt","slice","centuryString","month","week","setUTCFullYear","dayOfYear","day","dayOfISOYear","dayOfWeek","hours","minutes","parseFloat","seconds","timezoneString","absoluteOffset","isoYear","fourthOfJanuaryDay","getUTCDay","diff","setUTCDate","getUTCDate","bitmap","writable","$at","iterated","_t","_i","point","done","$keys","enumBugKeys","keys","id","px","random","def","TAG","stat","Iterators","TO_STRING_TAG","DOMIterables","NAME","Collection","propertyIsEnumerable","instance","Constructor","_defineProperty","_defineProperty2","_interopRequireDefault","defineProperties","descriptor","protoProps","staticProps","is","valueOf","ReactPropTypesSecret","ceil","floor","isNaN","dPs","IE_PROTO","Empty","createDict","iframe","lt","gt","iframeDocument","style","display","appendChild","src","contentWindow","open","write","close","create","Properties","toInteger","min","shared","SHARED","mode","copyright","cof","ARG","tryGet","T","callee","classof","ITERATOR","getIteratorMethod","PromiseCapability","resolve","reject","promise","$$resolve","$$reject","getOwnPropertySymbols","LIBRARY","wksExt","$Symbol","charAt","omit","arraysEqual","isElementAnSFC","isNativeDOMElement","indexOf","sameObject","notBothArrays","differentLengths","every","memoizeString","cache","hyphenate","redefine","$iterCreate","setToStringTag","getPrototypeOf","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","next","DEFAULT","IS_SET","FORCED","getMethod","kind","values","entries","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","methods","IteratorPrototype","toIObject","arrayIndexOf","names","documentElement","toObject","ObjectProto","iterator","ArrayProto","SPECIES","D","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","ONREADYSTATECHANGE","defer","channel","port","listener","data","now","port2","port1","onmessage","postMessage","addEventListener","importScripts","clear","newPromiseCapability","x","promiseCapability","SAFE_CLOSING","riter","from","skipClosing","safe","iter","fails","KEY","exp","_typeof2","_typeof3","ReferenceError","_iterator","_iterator2","_symbol","_symbol2","_typeof","hiddenKeys","getOwnPropertyNames","pIE","gOPD","getOwnPropertyDescriptor","_setPrototypeOf","_setPrototypeOf2","_create","_create2","subClass","superClass","__proto__","hasClassInParent","formatErrorMsg","getMetaContent","axiosGithub","axiosJSON","queryStringify","queryParse","_keys","_keys2","_slicedToArray2","_slicedToArray3","_axios","_axios2","search","location","queryString","substring","query","queryStr","_queryStr$split","_queryStr$split2","decodeURIComponent","encodeURIComponent","join","headers","baseURL","content","el","querySelector","getAttribute","err","msg","response","message","errors","_len","_key","yes","classes","utils","encode","buildURL","url","params","paramsSerializer","serializedParams","parts","serialize","parseValue","toISOString","JSON","stringify","hashmarkIndex","isCancel","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","getDefaultAdapter","adapter","XMLHttpRequest","defaults","transformRequest","transformResponse","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","status","common","forEachMethodNoData","method","forEachMethodWithData","settle","buildFullPath","parseHeaders","isURLSameOrigin","createError","xhrAdapter","config","Promise","dispatchXhrRequest","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","fullPath","toUpperCase","onreadystatechange","handleLoad","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseData","responseType","responseText","statusText","onabort","handleAbort","onerror","handleError","ontimeout","handleTimeout","timeoutErrorMessage","cookies","xsrfValue","withCredentials","read","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","then","onCanceled","cancel","abort","send","enhanceError","code","error","mergeConfig","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","valueFromConfig2","prop","mergeDeepProperties","defaultToConfig2","axiosKeys","otherKeys","filter","filterAxiosKeys","otherKeysDefaultToConfig2","Cancel","_react","_react2","_ref","alt","onError","text","dangerouslySetInnerHTML","__html","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_reactDom","_gitalk","_gitalk2","Gitalk","HTMLElement","getElementById","$Object","desc","ReactIs","throwOnDirectAccess","isElement","g","h","k","q","t","w","y","u","z","typeOf","AsyncMode","ConcurrentMode","ContextConsumer","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isValidElementType","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","hasSymbol","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","lowPriorityWarningWithoutStack","printWarning","format","argIndex","console","warn","condition","_len2","_key2","lowPriorityWarningWithoutStack$1","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","assign","emptyFunctionThatReturnsNull","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","iteratorFn","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","bool","func","number","string","symbol","any","createAnyTypeChecker","arrayOf","createArrayOfTypeChecker","createElementTypeChecker","elementType","createElementTypeTypeChecker","instanceOf","createInstanceTypeChecker","createNodeChecker","objectOf","createObjectOfTypeChecker","oneOf","createEnumTypeChecker","oneOfType","createUnionTypeChecker","shape","createShapeTypeChecker","exact","createStrictShapeTypeChecker","PropTypeError","stack","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propName","componentName","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","replacer","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","isNode","shapeTypes","allKeys","step","entry","isSymbol","RegExp","resetWarningCache","propIsEnumerable","shouldUseNative","test1","test2","fromCharCode","order2","test3","letter","to","symbols","loggedTypeFailures","typeSpecs","getStack","typeSpecName","ex","emptyFunction","emptyFunctionWithReset","shim","getShim","lastSimple","child","simple","EMPTY_CHILDREN","pop","enqueueRender","__d","items","debounceRendering","rerender","list","renderComponent","isSameNodeType","hydrating","splitText","_componentConstructor","isNamedNode","__n","getNodeProps","createNode","isSvg","createElementNS","removeNode","setAccessor","old","cssText","IS_NON_DIMENSIONAL","innerHTML","useCapture","eventProxy","removeEventListener","__l","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","flushMounts","mounts","afterMount","dom","mountAll","componentRoot","diffLevel","isSvgMode","ownerSVGElement","idiff","prevSvgMode","nodeValue","createTextNode","replaceChild","recollectNodeTree","__preactattr_","buildComponentFromVNode","firstChild","fc","vchildren","nextSibling","innerDiffNode","diffAttributes","isHydrating","j","vchild","originalChildren","keyedLen","childrenLen","vlen","_child","__k","insertBefore","unmountOnly","unmountComponent","removeChildren","lastChild","previousSibling","collectComponent","components","createComponent","inst","doRender","__b","splice","setComponentProps","__x","__r","__c","__p","syncComponentUpdates","isChild","rendered","cbase","previousProps","previousState","__s","previousContext","isUpdate","nextBase","initialBase","initialChildComponent","skip","toUnmount","childComponent","childProps","__u","baseParent","componentRef","unshift","afterUpdate","__h","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","inner","forceUpdate","preact","polyfill","require","ES6Promise","objectOrFunction","_isArray","vertxNext","customSchedulerFn","asap","arg","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isWorker","Uint8ClampedArray","useNextTick","useVertxTimer","useSetTimeout","useMutationObserver","iterations","observer","observe","characterData","useMessageChannel","globalSetTimeout","attemptVertx","vertx","runOnLoop","runOnContext","onFulfillment","onRejection","_arguments","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","PENDING","FULFILLED","REJECTED","GET_THEN_ERROR","ErrorObject","selfFulfillment","cannotReturnOwn","getThen","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","detail","TRY_CATCH_ERROR","tryCatch","hasCallback","succeeded","failed","initializePromise","resolver","resolvePromise","rejectPromise","nextId","Enumerator$1","input","_instanceConstructor","_remaining","_enumerate","validationError","_eachEntry","resolve$$1","_then","_settledAt","Promise$2","_willSettleAt","enumerator","all$1","race$1","_","reject$1","needsResolver","needsNew","all","race","_setScheduler","_setAsap","_asap","_catch","polyfill$1","local","promiseToString","cast","eval","_promise","_promise2","_assign","_assign2","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_reactFlipMove","_reactFlipMove2","_autosize","_autosize2","_i18n","_i18n2","_util","_avatar","_avatar2","_button","_button2","_action","_action2","_comment","_comment2","_svg","_svg2","_const","_getComments","_getComments2","GitalkComponent","_Component","_this","user","issue","comments","localComments","comment","page","pagerDirection","cursor","previewHtml","isNoInit","isIniting","isCreating","isLoading","isLoadMore","isLoadOver","isIssueCreating","isPopupVisible","isInputFocused","isPreview","isOccurError","errorMsg","getCommentsV3","_this$options","clientID","clientSecret","perPage","getIssue","comments_url","Accept","per_page","res","_this$state","cs","getRef","publicBtnEL","reply","replyComment","replyCommentBody","body","replyCommentArray","login","update","commentEL","focus","handlePopup","preventDefault","stopPropagation","isVisible","hideHandle","e1","handleLogin","localStorage","setItem","GT_COMMENT","href","loginLink","handleIssueCreate","createIssue","getComments","handleCommentCreate","createComment","handleCommentPreview","post","accessToken","handleCommentLoad","_this$state2","handleCommentChange","handleLogout","logout","reload","handleCommentFocus","distractionFreeMode","handleCommentBlur","handleSort","direction","handleCommentKeyDown","enableHotKey","metaKey","ctrlKey","keyCode","labels","language","userLanguage","createIssueManually","proxy","flipMoveOptions","staggerDelayBy","appearAnimation","enterAnimation","leaveAnimation","defaultAuthor","avatarUrl","updateCountCallback","storedComment","getItem","removeItem","replacedUrl","origin","pathname","hash","history","client_id","client_secret","access_token","getInit","log","i18n","_this2","getUserInfo","_this3","getIssueById","_this4","_options","owner","repo","getUrl","getIssueByLabels","_this5","_options2","isAdmin","_this6","resIssue","_this7","_options3","_this8","GT_ACCESS_TOKEN","like","_this9","_options4","reactions","nodes","findIndex","totalCount","viewerHasReacted","unLike","_this10","getQL","operationName","gId","initing","noInit","_state2","_options5","admin","link","onClick","handleImageErrored","header","_this11","_state3","avatar_url","onMouseDown","onChange","onFocus","onBlur","onKeyDown","placeholder","_this12","_state4","_options6","totalComments","reverse","commentedText","replyCallback","likeCallback","meta","_state5","cnt","isDesc","counts","html_url","smart_count","GT_VERSION","_state6","_accessToke","_accessToken","githubOauthUrl","redirect_uri","scope","TO_STRING","pos","charCodeAt","getKeys","toLength","toAbsoluteIndex","IS_INCLUDES","$this","fromIndex","max","addToUnscopables","_k","Arguments","anInstance","forOf","speciesConstructor","task","microtask","newPromiseCapabilityModule","perform","userAgent","promiseResolve","PROMISE","v8","$Promise","empty","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","USE_NATIVE","FakePromise","PromiseRejectionEvent","isThenable","notify","isReject","_n","chain","_c","_v","ok","_s","reaction","handler","fail","domain","exited","_h","onHandleUnhandled","enter","exit","onUnhandled","unhandled","isUnhandled","onunhandledrejection","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","onFulfilled","onRejected","capability","iterable","remaining","$index","alreadyCalled","forbiddenField","isArrayIter","getIterFn","BREAK","RETURN","iterFn","un","macrotask","Observer","head","last","standalone","toggle","DESCRIPTORS","onFinally","callbackfn","gOPS","$assign","A","K","aLen","getSymbols","isEnum","$getPrototypeOf","META","$fails","wks","wksDefine","enumKeys","gOPNExt","$GOPD","$GOPS","$DP","gOPN","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","QObject","setter","findChild","setSymbolDesc","protoDesc","sym","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","wellKnownSymbols","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","$replacer","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","fastKey","getWeak","onFreeze","NEED","windowNames","getWindowNames","setPrototypeOf","check","buggy","_FlipMove","_FlipMove2","_slicedToArray","sliceIterator","_arr","_e","_extends","_createClass","_propConverter","_propConverter2","_domManipulation","_helpers","_classCallCheck","_possibleConstructorReturn","_inherits","transitionEnd","whichTransitionEvent","noBrowserSupport","getKey","childData","FlipMove","_temp","_ret","appearing","childrenData","parentData","domNode","boundingBox","heightPlaceholderData","remainingAnimations","childrenToAnimate","runAnimation","dynamicChildren","doesChildNeedToBeAnimated","animateChild","onStartAll","callChildrenHook","getChildData","childDomNode","childBoundingBox","parentBoundingBox","_this$props","getPosition","isAppearingWithAnimation","isEnteringWithAnimation","entering","isLeavingWithAnimation","leaving","_getPositionDelta","getPositionDelta","_getPositionDelta2","dX","dY","shouldTriggerFLIP","isAnimationDisabled","prepForAnimation","nextProps","updateBoundingBoxCaches","nextChildren","calculateNextSetOfChildren","oldChildrenKeys","nextChildrenKeys","updatedChildren","nextChild","findChildByKey","isEntering","numOfChildrenLeaving","isLeaving","find","_ref2","nextChildIndex","_props","maintainContainerHeight","leavingChildren","leavingChild","removeNodeFromDOMFlow","verticalAlignment","updateHeightPlaceholder","_getChildData","applyStylesToDOMNode","styles","transition","_getChildData2","computeInitialStyles","onStart","requestAnimationFrame","createTransitionString","transform","opacity","bindTransitionEndHandler","_getChildData3","transitionEndHandler","ev","triggerFinishHooks","removeChildData","onFinish","_ref3","item","onFinishAll","height","hook","elements","domNodes","childKey","hasChildData","parentDomNode","setChildData","getRelativeBoundingBox","position","top","left","right","bottom","_getPositionDelta3","_getPositionDelta4","disableAllAnimations","duration","delay","staggerDurationBy","createHeightPlaceholder","typeName","isContainerAList","placeholderType","visibility","childrenWithRefs","getNativeNode","_props2","delegated","predicate","kValue","testResult","_errorMessages","_enterLeavePresets","nodeEnv","propConverter","ComposedComponent","_class","FlipMovePropConverter","checkForStatelessFunctionalComponents","childArray","noStateless","statelessFunctionalComponentSupplied","convertProps","workingProps","easing","convertTimingProp","convertAnimationProp","appearPresets","enterPresets","leavePresets","disableAnimations","deprecatedDisableAnimations","primaryPropKeys","delegatedProps","rawValue","invalidTypeForTimingProp","animation","presets","defaultPreset","disablePreset","presetKeys","invalidEnterLeavePreset","acceptableValues","getBoundingClientRect","warnOnce","hasWarned","elevator","fade","accordionVertical","transformOrigin","accordionHorizontal","none","accordianVertical","accordianHorizontal","transitions","match","getPropertyValue","parentBox","_getPosition","width","defaultBox","oldRelativeBox","newAbsoluteBox","newRelativeBox","computed","getComputedStyle","marginAttrs","margins","reduce","acc","margin","propertyVal","topOffset","_ref4","originalParentHeight","collapsedParentHeight","reductionInHeight","foundNode","cssProperties","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","mod","autosize","Map","_delete","createEvent","Event","bubbles","evt","initEvent","ta","heightOffset","clientWidth","cachedHeight","init","resize","boxSizing","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","changeOverflow","offsetWidth","overflowY","getParentOverflows","scrollTop","originalHeight","overflows","docTop","endHeight","scrollHeight","styleHeight","round","actualHeight","offsetHeight","dispatchEvent","pageResize","destroy","overflowX","wordWrap","_polyglot2","phrases","i18nMap","en","locale","_polyglot","_zhCN","_zhCN2","_zhTW","_zhTW2","_en","_en2","_esES","_esES2","_fr","_fr2","_ru","_ru2","_de","_de2","Polyglot","currentLocale","allowMissing","VERSION","newLocale","morePhrases","prefix","phrase","newPhrases","clone","choosePluralForm","interpolate","delimeter","pluralTypes","chinese","german","french","russian","czech","polish","icelandic","pluralTypeToLanguages","langToTypeMap","mapping","langs","trimRe","texts","chosenText","pluralTypeIndex","pluralTypeName","langToPluralType","_isIterable2","_isIterable3","_getIterator2","_getIterator3","isIterable","getIterator","Axios","createInstance","defaultConfig","axios","instanceConfig","CancelToken","promises","spread","InterceptorManager","dispatchRequest","interceptors","unshiftRequestInterceptors","interceptor","fulfilled","rejected","pushResponseInterceptors","shift","getUri","handlers","use","eject","forEachHandler","transformData","throwIfCancellationRequested","throwIfRequested","cleanHeaderConfig","onAdapterResolution","onAdapterRejection","fns","normalizedName","processHeader","isAxiosError","toJSON","description","fileName","lineNumber","columnNumber","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","parsed","parser","line","substr","standardBrowserEnv","msie","urlParsingNode","originURL","resolveURL","protocol","host","hostname","requestURL","nonStandardBrowserEnv","expires","path","secure","cookie","toGMTString","remove","promiseExecutor","_distance_in_words_to_now","_distance_in_words_to_now2","_index","_index2","_index3","_index4","_index5","_index6","_index7","_index8","_index9","_index10","ZHCN","ZHTW","ES","FR","RU","GT_i18n_distanceInWordsLocaleMap","zh","fr","ru","Comment","emailResponse","classList","_props$commentedText","_props$admin","enableEdit","reactionTotalCount","pageInfo","hasNextPage","created_at","addSuffix","distanceInWords","body_html","webpackContext","req","webpackContextResolve","webpackContextKeys","distanceInWordsToNow","dirtyDate","compareDesc","differenceInSeconds","differenceInMonths","enLocale","MINUTES_IN_DAY","MINUTES_IN_ALMOST_TWO_DAYS","MINUTES_IN_MONTH","MINUTES_IN_TWO_MONTHS","dirtyDateToCompare","comparison","localize","localizeOptions","Boolean","dateLeft","dateRight","months","includeSeconds","days","nearestMonth","monthsSinceStartOfYear","years","dirtyDateLeft","dirtyDateRight","timeLeft","timeRight","differenceInMilliseconds","differenceInCalendarMonths","compareAsc","sign","difference","abs","setMonth","getMonth","isLastMonthNotFull","yearDiff","getFullYear","monthDiff","buildDistanceInWordsLocale","buildFormatLocale","distanceInWordsLocale","lessThanXSeconds","one","other","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","buildFormattingTokensRegExp","months3char","monthsFull","weekdays2char","weekdays3char","weekdaysFull","meridiemUppercase","meridiemLowercase","meridiemFull","formatters","getDay","getHours","ordinalFormatters","formatterToken","ordinal","formattingTokensRegExp","rem100","commonFormatterKeys","formatterKeys","formattingTokens","sort","declension","scheme","rem10","singularNominative","singularGenitive","pluralGenitive","buildLocalizeTokenFn","future","regular","past","_toConsumableArray2","_toConsumableArray3","vars","cursorDirection","ql","variables","pageSize","repository","author","databaseId","createdAt","bodyHTML","hasPreviousPage","startCursor","endCursor","_from","_from2","arr2","createProperty","arrayLike","mapfn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,CAAC,SAASA,gCAAT,CAA0CC,IAA1C,EAAgDC,OAAhD,EAAyD;AACzD,MAAG,QAAOC,OAAP,0CAAOA,OAAP,OAAmB,QAAnB,IAA+B,QAAOC,MAAP,0CAAOA,MAAP,OAAkB,QAApD,EACCA,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAAxB,CADD,KAEK,IAAG,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA1C,EACJD,MAAM,CAAC,EAAD,EAAKH,OAAL,CAAN,CADI,KAEA,IAAG,QAAOC,OAAP,0CAAOA,OAAP,OAAmB,QAAtB,EACJA,OAAO,CAAC,QAAD,CAAP,GAAoBD,OAAO,EAA3B,CADI,KAGJD,IAAI,CAAC,QAAD,CAAJ,GAAiBC,OAAO,EAAxB;AACD,CATD,EASG,IATH,EASS,YAAW;AACpB;AAAO;AAAU,cAASK,OAAT,EAAkB;AAAE;;AACrC;AAAU;;AACV;AAAU,UAAIC,gBAAgB,GAAG,EAAvB;AACV;;AACA;AAAU;;AACV;;AAAU,eAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACjD;;AACA;AAAW;;AACX;AAAW,YAAGF,gBAAgB,CAACE,QAAD,CAAnB,EAA+B;AAC1C;AAAY,iBAAOF,gBAAgB,CAACE,QAAD,CAAhB,CAA2BP,OAAlC;AACZ;AAAY;AACZ;AAAW;;AACX;;;AAAW,YAAIC,MAAM,GAAGI,gBAAgB,CAACE,QAAD,CAAhB,GAA6B;AACrD;AAAYC,UAAAA,CAAC,EAAED,QADsC;;AAErD;AAAYE,UAAAA,CAAC,EAAE,KAFsC;;AAGrD;AAAYT,UAAAA,OAAO,EAAE;AACrB;;AAJqD,SAA1C;AAKX;;AACA;AAAW;;AACX;;AAAWI,QAAAA,OAAO,CAACG,QAAD,CAAP,CAAkBG,IAAlB,CAAuBT,MAAM,CAACD,OAA9B,EAAuCC,MAAvC,EAA+CA,MAAM,CAACD,OAAtD,EAA+DM,mBAA/D;AACX;;AACA;AAAW;;AACX;;AAAWL,QAAAA,MAAM,CAACQ,CAAP,GAAW,IAAX;AACX;;AACA;AAAW;;AACX;;AAAW,eAAOR,MAAM,CAACD,OAAd;AACX;AAAW;AACX;;AACA;;AACA;AAAU;;AACV;;;AAAUM,MAAAA,mBAAmB,CAACK,CAApB,GAAwBP,OAAxB;AACV;;AACA;AAAU;;AACV;;AAAUE,MAAAA,mBAAmB,CAACM,CAApB,GAAwBP,gBAAxB;AACV;;AACA;AAAU;;AACV;;AAAUC,MAAAA,mBAAmB,CAACO,CAApB,GAAwB,UAASb,OAAT,EAAkBc,IAAlB,EAAwBC,MAAxB,EAAgC;AAClE;AAAW,YAAG,CAACT,mBAAmB,CAACU,CAApB,CAAsBhB,OAAtB,EAA+Bc,IAA/B,CAAJ,EAA0C;AACrD;AAAYG,UAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+Bc,IAA/B,EAAqC;AACjD;AAAaK,YAAAA,YAAY,EAAE,KADsB;;AAEjD;AAAaC,YAAAA,UAAU,EAAE,IAFwB;;AAGjD;AAAaC,YAAAA,GAAG,EAAEN;AAClB;;AAJiD,WAArC;AAKZ;AAAY;AACZ;;AAAW,OARD;AASV;;AACA;AAAU;;AACV;;;AAAUT,MAAAA,mBAAmB,CAACgB,CAApB,GAAwB,UAASrB,MAAT,EAAiB;AACnD;AAAW,YAAIc,MAAM,GAAGd,MAAM,IAAIA,MAAM,CAACsB,UAAjB;AACxB;AAAY,iBAASC,UAAT,GAAsB;AAAE,iBAAOvB,MAAM,CAAC,SAAD,CAAb;AAA2B,SADvC;AAExB;AAAY,iBAASwB,gBAAT,GAA4B;AAAE,iBAAOxB,MAAP;AAAgB,SAF/C;AAGX;;AAAWK,QAAAA,mBAAmB,CAACO,CAApB,CAAsBE,MAAtB,EAA8B,GAA9B,EAAmCA,MAAnC;AACX;;;AAAW,eAAOA,MAAP;AACX;AAAW,OAND;AAOV;;AACA;AAAU;;AACV;;;AAAUT,MAAAA,mBAAmB,CAACU,CAApB,GAAwB,UAASU,MAAT,EAAiBC,QAAjB,EAA2B;AAAE,eAAOV,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCgB,MAArC,EAA6CC,QAA7C,CAAP;AAAgE,OAArH;AACV;;AACA;AAAU;;AACV;;;AAAUrB,MAAAA,mBAAmB,CAACwB,CAApB,GAAwB,OAAxB;AACV;;AACA;AAAU;;AACV;;AAAU,aAAOxB,mBAAmB,CAACA,mBAAmB,CAACyB,CAApB,GAAwB,EAAzB,CAA1B;AACV;AAAU,KA/DM;AAgEhB;;AACA;AAAU;AACV;;AACA;AAAO,cAAS9B,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAIgC,IAAI,GAAG/B,MAAM,CAACD,OAAP,GAAiB;AAAEiC,QAAAA,OAAO,EAAE;AAAX,OAA5B;AACA,UAAI,OAAOC,GAAP,IAAc,QAAlB,EAA4BA,GAAG,GAAGF,IAAN,CAHK,CAGO;;AAGxC;AAAO,KARG;AASV;;AACA;AAAO,cAAS/B,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACA,UAAImC,MAAM,GAAGlC,MAAM,CAACD,OAAP,GAAiB,OAAOoC,MAAP,IAAiB,WAAjB,IAAgCA,MAAM,CAACC,IAAP,IAAeA,IAA/C,GAC1BD,MAD0B,GACjB,OAAOE,IAAP,IAAe,WAAf,IAA8BA,IAAI,CAACD,IAAL,IAAaA,IAA3C,GAAkDC,IAAlD,CACX;AADW,QAETC,QAAQ,CAAC,aAAD,CAAR,EAHJ;AAIA,UAAI,OAAOC,GAAP,IAAc,QAAlB,EAA4BA,GAAG,GAAGL,MAAN,CAPK,CAOS;;AAG1C;AAAO,KApBG;AAqBV;;AACA;AAAO,cAASlC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAImC,KAAK,GAAGnC,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,KAAxB,CAAZ;;AACA,UAAIoC,GAAG,GAAGpC,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIqC,OAAM,GAAGrC,mBAAmB,CAAC,CAAD,CAAnB,CAAuBqC,MAApC;;AACA,UAAIC,UAAU,GAAG,OAAOD,OAAP,IAAiB,UAAlC;;AAEA,UAAIE,QAAQ,GAAG5C,MAAM,CAACD,OAAP,GAAiB,UAAUc,IAAV,EAAgB;AAC9C,eAAO2B,KAAK,CAAC3B,IAAD,CAAL,KAAgB2B,KAAK,CAAC3B,IAAD,CAAL,GACrB8B,UAAU,IAAID,OAAM,CAAC7B,IAAD,CAApB,IAA8B,CAAC8B,UAAU,GAAGD,OAAH,GAAYD,GAAvB,EAA4B,YAAY5B,IAAxC,CADzB,CAAP;AAED,OAHD;;AAKA+B,MAAAA,QAAQ,CAACJ,KAAT,GAAiBA,KAAjB;AAGA;AAAO,KArCG;AAsCV;;AACA;AAAO,cAASxC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwC,IAAI,GAAGxC,mBAAmB,CAAC,EAAD,CAA9B;AAEA;AAEA;;;AAEA,UAAIyC,QAAQ,GAAG9B,MAAM,CAACW,SAAP,CAAiBmB,QAAhC;AAEA;;;;;;;AAMA,eAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACpB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,gBAA9B;AACD;AAED;;;;;;;;AAMA,eAASC,WAAT,CAAqBD,GAArB,EAA0B;AACxB,eAAO,OAAOA,GAAP,KAAe,WAAtB;AACD;AAED;;;;;;;;AAMA,eAASE,QAAT,CAAkBF,GAAlB,EAAuB;AACrB,eAAOA,GAAG,KAAK,IAAR,IAAgB,CAACC,WAAW,CAACD,GAAD,CAA5B,IAAqCA,GAAG,CAACG,WAAJ,KAAoB,IAAzD,IAAiE,CAACF,WAAW,CAACD,GAAG,CAACG,WAAL,CAA7E,IACF,OAAOH,GAAG,CAACG,WAAJ,CAAgBD,QAAvB,KAAoC,UADlC,IACgDF,GAAG,CAACG,WAAJ,CAAgBD,QAAhB,CAAyBF,GAAzB,CADvD;AAED;AAED;;;;;;;;AAMA,eAASI,aAAT,CAAuBJ,GAAvB,EAA4B;AAC1B,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,sBAA9B;AACD;AAED;;;;;;;;AAMA,eAASK,UAAT,CAAoBL,GAApB,EAAyB;AACvB,eAAQ,OAAOM,QAAP,KAAoB,WAArB,IAAsCN,GAAG,YAAYM,QAA5D;AACD;AAED;;;;;;;;AAMA,eAASC,iBAAT,CAA2BP,GAA3B,EAAgC;AAC9B,YAAIQ,MAAJ;;AACA,YAAK,OAAOC,WAAP,KAAuB,WAAxB,IAAyCA,WAAW,CAACC,MAAzD,EAAkE;AAChEF,UAAAA,MAAM,GAAGC,WAAW,CAACC,MAAZ,CAAmBV,GAAnB,CAAT;AACD,SAFD,MAEO;AACLQ,UAAAA,MAAM,GAAIR,GAAD,IAAUA,GAAG,CAACW,MAAd,IAA0BX,GAAG,CAACW,MAAJ,YAAsBF,WAAzD;AACD;;AACD,eAAOD,MAAP;AACD;AAED;;;;;;;;AAMA,eAASI,QAAT,CAAkBZ,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;AAED;;;;;;;;AAMA,eAASa,QAAT,CAAkBb,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;AAED;;;;;;;;AAMA,eAASc,QAAT,CAAkBd,GAAlB,EAAuB;AACrB,eAAOA,GAAG,KAAK,IAAR,IAAgB,SAAOA,GAAP,MAAe,QAAtC;AACD;AAED;;;;;;;;AAMA,eAASe,MAAT,CAAgBf,GAAhB,EAAqB;AACnB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,eAA9B;AACD;AAED;;;;;;;;AAMA,eAASgB,MAAT,CAAgBhB,GAAhB,EAAqB;AACnB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,eAA9B;AACD;AAED;;;;;;;;AAMA,eAASiB,MAAT,CAAgBjB,GAAhB,EAAqB;AACnB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,eAA9B;AACD;AAED;;;;;;;;AAMA,eAASkB,UAAT,CAAoBlB,GAApB,EAAyB;AACvB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,mBAA9B;AACD;AAED;;;;;;;;AAMA,eAASmB,QAAT,CAAkBnB,GAAlB,EAAuB;AACrB,eAAOc,QAAQ,CAACd,GAAD,CAAR,IAAiBkB,UAAU,CAAClB,GAAG,CAACoB,IAAL,CAAlC;AACD;AAED;;;;;;;;AAMA,eAASC,iBAAT,CAA2BrB,GAA3B,EAAgC;AAC9B,eAAO,OAAOsB,eAAP,KAA2B,WAA3B,IAA0CtB,GAAG,YAAYsB,eAAhE;AACD;AAED;;;;;;;;AAMA,eAASC,IAAT,CAAcC,GAAd,EAAmB;AACjB,eAAOA,GAAG,CAACC,OAAJ,CAAY,MAAZ,EAAoB,EAApB,EAAwBA,OAAxB,CAAgC,MAAhC,EAAwC,EAAxC,CAAP;AACD;AAED;;;;;;;;;;;;;;;;;AAeA,eAASC,oBAAT,GAAgC;AAC9B,YAAI,OAAOC,SAAP,KAAqB,WAArB,KAAqCA,SAAS,CAACC,OAAV,KAAsB,aAAtB,IACAD,SAAS,CAACC,OAAV,KAAsB,cADtB,IAEAD,SAAS,CAACC,OAAV,KAAsB,IAF3D,CAAJ,EAEsE;AACpE,iBAAO,KAAP;AACD;;AACD,eACE,OAAOzC,MAAP,KAAkB,WAAlB,IACA,OAAO0C,QAAP,KAAoB,WAFtB;AAID;AAED;;;;;;;;;;;;;;AAYA,eAASC,OAAT,CAAiBC,GAAjB,EAAsBC,EAAtB,EAA0B;AACxB;AACA,YAAID,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,WAAnC,EAAgD;AAC9C;AACD,SAJuB,CAMxB;;;AACA,YAAI,SAAOA,GAAP,MAAe,QAAnB,EAA6B;AAC3B;AACAA,UAAAA,GAAG,GAAG,CAACA,GAAD,CAAN;AACD;;AAED,YAAIhC,OAAO,CAACgC,GAAD,CAAX,EAAkB;AAChB;AACA,eAAK,IAAIxE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGuE,GAAG,CAACE,MAAxB,EAAgC1E,CAAC,GAAGC,CAApC,EAAuCD,CAAC,EAAxC,EAA4C;AAC1CyE,YAAAA,EAAE,CAACvE,IAAH,CAAQ,IAAR,EAAcsE,GAAG,CAACxE,CAAD,CAAjB,EAAsBA,CAAtB,EAAyBwE,GAAzB;AACD;AACF,SALD,MAKO;AACL;AACA,eAAK,IAAIG,GAAT,IAAgBH,GAAhB,EAAqB;AACnB,gBAAI/D,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCsE,GAArC,EAA0CG,GAA1C,CAAJ,EAAoD;AAClDF,cAAAA,EAAE,CAACvE,IAAH,CAAQ,IAAR,EAAcsE,GAAG,CAACG,GAAD,CAAjB,EAAwBA,GAAxB,EAA6BH,GAA7B;AACD;AACF;AACF;AACF;AAED;;;;;;;;;;;;;;;;;;;AAiBA,eAASI,KAAT;AAAe;AAA6B;AAC1C,YAAI3B,MAAM,GAAG,EAAb;;AACA,iBAAS4B,WAAT,CAAqBpC,GAArB,EAA0BkC,GAA1B,EAA+B;AAC7B,cAAI,SAAO1B,MAAM,CAAC0B,GAAD,CAAb,MAAuB,QAAvB,IAAmC,SAAOlC,GAAP,MAAe,QAAtD,EAAgE;AAC9DQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcC,KAAK,CAAC3B,MAAM,CAAC0B,GAAD,CAAP,EAAclC,GAAd,CAAnB;AACD,WAFD,MAEO;AACLQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAclC,GAAd;AACD;AACF;;AAED,aAAK,IAAIzC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG6E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,GAAGC,CAA1C,EAA6CD,CAAC,EAA9C,EAAkD;AAChDuE,UAAAA,OAAO,CAACO,SAAS,CAAC9E,CAAD,CAAV,EAAe6E,WAAf,CAAP;AACD;;AACD,eAAO5B,MAAP;AACD;AAED;;;;;;;;;;AAQA,eAAS8B,SAAT;AAAmB;AAA6B;AAC9C,YAAI9B,MAAM,GAAG,EAAb;;AACA,iBAAS4B,WAAT,CAAqBpC,GAArB,EAA0BkC,GAA1B,EAA+B;AAC7B,cAAI,SAAO1B,MAAM,CAAC0B,GAAD,CAAb,MAAuB,QAAvB,IAAmC,SAAOlC,GAAP,MAAe,QAAtD,EAAgE;AAC9DQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcI,SAAS,CAAC9B,MAAM,CAAC0B,GAAD,CAAP,EAAclC,GAAd,CAAvB;AACD,WAFD,MAEO,IAAI,SAAOA,GAAP,MAAe,QAAnB,EAA6B;AAClCQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcI,SAAS,CAAC,EAAD,EAAKtC,GAAL,CAAvB;AACD,WAFM,MAEA;AACLQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAclC,GAAd;AACD;AACF;;AAED,aAAK,IAAIzC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG6E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,GAAGC,CAA1C,EAA6CD,CAAC,EAA9C,EAAkD;AAChDuE,UAAAA,OAAO,CAACO,SAAS,CAAC9E,CAAD,CAAV,EAAe6E,WAAf,CAAP;AACD;;AACD,eAAO5B,MAAP;AACD;AAED;;;;;;;;;;AAQA,eAAS+B,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBC,OAAtB,EAA+B;AAC7BZ,QAAAA,OAAO,CAACW,CAAD,EAAI,SAASL,WAAT,CAAqBpC,GAArB,EAA0BkC,GAA1B,EAA+B;AACxC,cAAIQ,OAAO,IAAI,OAAO1C,GAAP,KAAe,UAA9B,EAA0C;AACxCwC,YAAAA,CAAC,CAACN,GAAD,CAAD,GAASrC,IAAI,CAACG,GAAD,EAAM0C,OAAN,CAAb;AACD,WAFD,MAEO;AACLF,YAAAA,CAAC,CAACN,GAAD,CAAD,GAASlC,GAAT;AACD;AACF,SANM,CAAP;AAOA,eAAOwC,CAAP;AACD;;AAEDxF,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfgD,QAAAA,OAAO,EAAEA,OADM;AAEfK,QAAAA,aAAa,EAAEA,aAFA;AAGfF,QAAAA,QAAQ,EAAEA,QAHK;AAIfG,QAAAA,UAAU,EAAEA,UAJG;AAKfE,QAAAA,iBAAiB,EAAEA,iBALJ;AAMfK,QAAAA,QAAQ,EAAEA,QANK;AAOfC,QAAAA,QAAQ,EAAEA,QAPK;AAQfC,QAAAA,QAAQ,EAAEA,QARK;AASfb,QAAAA,WAAW,EAAEA,WATE;AAUfc,QAAAA,MAAM,EAAEA,MAVO;AAWfC,QAAAA,MAAM,EAAEA,MAXO;AAYfC,QAAAA,MAAM,EAAEA,MAZO;AAafC,QAAAA,UAAU,EAAEA,UAbG;AAcfC,QAAAA,QAAQ,EAAEA,QAdK;AAefE,QAAAA,iBAAiB,EAAEA,iBAfJ;AAgBfK,QAAAA,oBAAoB,EAAEA,oBAhBP;AAiBfI,QAAAA,OAAO,EAAEA,OAjBM;AAkBfK,QAAAA,KAAK,EAAEA,KAlBQ;AAmBfG,QAAAA,SAAS,EAAEA,SAnBI;AAoBfC,QAAAA,MAAM,EAAEA,MApBO;AAqBfhB,QAAAA,IAAI,EAAEA;AArBS,OAAjB;AAyBA;AAAO,KApYG;AAqYV;;AACA;AAAO,cAASvE,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIyF,SAAS,GAAG,WAAhB;;AAEA,UAAIC,OAAO,GAAG,SAAVA,OAAU,CAAUC,IAAV,EAAgBnF,IAAhB,EAAsBoF,MAAtB,EAA8B;AAC1C,YAAIC,SAAS,GAAGF,IAAI,GAAGD,OAAO,CAACI,CAA/B;AACA,YAAIC,SAAS,GAAGJ,IAAI,GAAGD,OAAO,CAACM,CAA/B;AACA,YAAIC,SAAS,GAAGN,IAAI,GAAGD,OAAO,CAACQ,CAA/B;AACA,YAAIC,QAAQ,GAAGR,IAAI,GAAGD,OAAO,CAACU,CAA9B;AACA,YAAIC,OAAO,GAAGV,IAAI,GAAGD,OAAO,CAACY,CAA7B;AACA,YAAIC,OAAO,GAAGZ,IAAI,GAAGD,OAAO,CAACc,CAA7B;AACA,YAAI9G,OAAO,GAAGqG,SAAS,GAAGrE,IAAH,GAAUA,IAAI,CAAClB,IAAD,CAAJ,KAAekB,IAAI,CAAClB,IAAD,CAAJ,GAAa,EAA5B,CAAjC;AACA,YAAIiG,QAAQ,GAAG/G,OAAO,CAAC+F,SAAD,CAAtB;AACA,YAAIiB,MAAM,GAAGX,SAAS,GAAGlE,MAAH,GAAYoE,SAAS,GAAGpE,MAAM,CAACrB,IAAD,CAAT,GAAkB,CAACqB,MAAM,CAACrB,IAAD,CAAN,IAAgB,EAAjB,EAAqBiF,SAArB,CAA7D;AACA,YAAIZ,GAAJ,EAAS8B,GAAT,EAAcC,GAAd;AACA,YAAIb,SAAJ,EAAeH,MAAM,GAAGpF,IAAT;;AACf,aAAKqE,GAAL,IAAYe,MAAZ,EAAoB;AAClB;AACAe,UAAAA,GAAG,GAAG,CAACd,SAAD,IAAca,MAAd,IAAwBA,MAAM,CAAC7B,GAAD,CAAN,KAAgBgC,SAA9C;AACA,cAAIF,GAAG,IAAInB,GAAG,CAAC9F,OAAD,EAAUmF,GAAV,CAAd,EAA8B,SAHZ,CAIlB;;AACA+B,UAAAA,GAAG,GAAGD,GAAG,GAAGD,MAAM,CAAC7B,GAAD,CAAT,GAAiBe,MAAM,CAACf,GAAD,CAAhC,CALkB,CAMlB;;AACAnF,UAAAA,OAAO,CAACmF,GAAD,CAAP,GAAekB,SAAS,IAAI,OAAOW,MAAM,CAAC7B,GAAD,CAAb,IAAsB,UAAnC,GAAgDe,MAAM,CAACf,GAAD,CAAtD,CACf;AADe,YAEbwB,OAAO,IAAIM,GAAX,GAAiBrB,GAAG,CAACsB,GAAD,EAAM/E,MAAN,CAApB,CACF;AADE,YAEA0E,OAAO,IAAIG,MAAM,CAAC7B,GAAD,CAAN,IAAe+B,GAA1B,GAAiC,UAAUE,CAAV,EAAa;AAC9C,gBAAIhB,CAAC,GAAG,SAAJA,CAAI,CAAUX,CAAV,EAAaC,CAAb,EAAgB9E,CAAhB,EAAmB;AACzB,kBAAI,gBAAgBwG,CAApB,EAAuB;AACrB,wBAAQ9B,SAAS,CAACJ,MAAlB;AACE,uBAAK,CAAL;AAAQ,2BAAO,IAAIkC,CAAJ,EAAP;;AACR,uBAAK,CAAL;AAAQ,2BAAO,IAAIA,CAAJ,CAAM3B,CAAN,CAAP;;AACR,uBAAK,CAAL;AAAQ,2BAAO,IAAI2B,CAAJ,CAAM3B,CAAN,EAASC,CAAT,CAAP;AAHV;;AAIE,uBAAO,IAAI0B,CAAJ,CAAM3B,CAAN,EAASC,CAAT,EAAY9E,CAAZ,CAAP;AACH;;AAAC,qBAAOwG,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAc/B,SAAd,CAAP;AACH,aARD;;AASAc,YAAAA,CAAC,CAACL,SAAD,CAAD,GAAeqB,CAAC,CAACrB,SAAD,CAAhB;AACA,mBAAOK,CAAP,CAX8C,CAYhD;AACC,WAbiC,CAa/Bc,GAb+B,CAAhC,GAaQT,QAAQ,IAAI,OAAOS,GAAP,IAAc,UAA1B,GAAuCtB,GAAG,CAACrD,QAAQ,CAAC7B,IAAV,EAAgBwG,GAAhB,CAA1C,GAAiEA,GAjB3E,CAPkB,CAyBlB;;AACA,cAAIT,QAAJ,EAAc;AACZ,aAACzG,OAAO,CAACsH,OAAR,KAAoBtH,OAAO,CAACsH,OAAR,GAAkB,EAAtC,CAAD,EAA4CnC,GAA5C,IAAmD+B,GAAnD,CADY,CAEZ;;AACA,gBAAIjB,IAAI,GAAGD,OAAO,CAACuB,CAAf,IAAoBR,QAApB,IAAgC,CAACA,QAAQ,CAAC5B,GAAD,CAA7C,EAAoDU,IAAI,CAACkB,QAAD,EAAW5B,GAAX,EAAgB+B,GAAhB,CAAJ;AACrD;AACF;AACF,OA5CD,CATsD,CAsDtD;;;AACAlB,MAAAA,OAAO,CAACI,CAAR,GAAY,CAAZ,CAvDsD,CAuDrC;;AACjBJ,MAAAA,OAAO,CAACM,CAAR,GAAY,CAAZ,CAxDsD,CAwDrC;;AACjBN,MAAAA,OAAO,CAACQ,CAAR,GAAY,CAAZ,CAzDsD,CAyDrC;;AACjBR,MAAAA,OAAO,CAACU,CAAR,GAAY,CAAZ,CA1DsD,CA0DrC;;AACjBV,MAAAA,OAAO,CAACY,CAAR,GAAY,EAAZ,CA3DsD,CA2DrC;;AACjBZ,MAAAA,OAAO,CAACc,CAAR,GAAY,EAAZ,CA5DsD,CA4DrC;;AACjBd,MAAAA,OAAO,CAACwB,CAAR,GAAY,EAAZ,CA7DsD,CA6DrC;;AACjBxB,MAAAA,OAAO,CAACuB,CAAR,GAAY,GAAZ,CA9DsD,CA8DrC;;AACjBtH,MAAAA,MAAM,CAACD,OAAP,GAAiBgG,OAAjB;AAGA;AAAO,KAxcG;AAycV;;AACA;AAAO,cAAS/F,MAAT,EAAiBwH,mBAAjB,EAAsCnH,mBAAtC,EAA2D;AAElE;;AACAW,MAAAA,MAAM,CAACC,cAAP,CAAsBuG,mBAAtB,EAA2C,YAA3C,EAAyD;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAzD;AACA;;AAA4B,iBAASC,OAAT,EAAkB;AAAC;AAA+BrH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,SAA3C,EAAsD,YAAW;AAAE,iBAAOxF,OAAP;AAAiB,SAApF;AAC9E;;;AAA+B3B,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,KAA3C,EAAkD,YAAW;AAAE,iBAAOG,GAAP;AAAa,SAA5E;AAC/B;;;AAA+BtH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,UAA3C,EAAuD,YAAW;AAAE,iBAAOI,QAAP;AAAkB,SAAtF;AAC/B;;;AAA+BvH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,QAA3C,EAAqD,YAAW;AAAE,iBAAOK,QAAP;AAAkB,SAApF;AAC/B;;;AAA+BxH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,aAA3C,EAA0D,YAAW;AAAE,iBAAOM,WAAP;AAAqB,SAA5F;AAC/B;;;AAA+BzH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,eAA3C,EAA4D,YAAW;AAAE,iBAAOO,aAAP;AAAuB,SAAhG;AAC/B;;;AAA+B1H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,eAA3C,EAA4D,YAAW;AAAE,iBAAOQ,aAAP;AAAuB,SAAhG;AAC/B;;;AAA+B3H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,cAA3C,EAA2D,YAAW;AAAE,iBAAOS,cAAP;AAAwB,SAAhG;AAC/B;;;AAA+B5H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,gBAA3C,EAA6D,YAAW;AAAE,iBAAOU,cAAP;AAAwB,SAAlG;AAC/B;;;AAA+B7H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,aAA3C,EAA0D,YAAW;AAAE,iBAAOW,WAAP;AAAqB,SAA5F;AAC/B;;;AAA+B9H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,wBAA3C,EAAqE,YAAW;AAAE,iBAAOY,sBAAP;AAAgC,SAAlH;AAC/B;;;AAA+B/H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,WAA3C,EAAwD,YAAW;AAAE,iBAAOa,WAAP;AAAqB,SAA1F;AAC/B;;;AAA+BhI,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,eAA3C,EAA4D,YAAW;AAAE,iBAAOc,aAAP;AAAuB,SAAhG;AAC/B;;;AAA+BjI,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,qCAA3C,EAAkF,YAAW;AAAE,iBAAOe,0BAAP;AAAoC,SAAnI;AAC/B;;;AAAqB,YAAIC,wCAAwC,GAAGnI,mBAAmB,CAAC,EAAD,CAAlE;AACrB;;;AAAqB,YAAIoI,gDAAgD,GAAGpI,mBAAmB,CAACgB,CAApB,CAAsBmH,wCAAtB,CAAvD;AACrB;;;AAAqB,YAAIE,oCAAoC,GAAGrI,mBAAmB,CAAC,EAAD,CAA9D;AACrB;;;AAAqB,YAAIsI,4CAA4C,GAAGtI,mBAAmB,CAACgB,CAApB,CAAsBqH,oCAAtB,CAAnD;AACrB;;;AAAiDrI,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,WAA3C,EAAwD,YAAW;AAAE,iBAAOiB,gDAAgD,CAACjD,CAAxD;AAA4D,SAAjI;;AAIjD,YAAIxD,OAAO,GAAG,QAAd,CAtB8C,CAsBtB;;AAExB,YAAI4G,QAAQ,GAAG,guBAAguBC,KAAhuB,CAAsuB,GAAtuB,CAAf;AAEA,YAAIC,kBAAkB,GAAI,OAAOpG,MAAP,KAAgB,WAAhB,IAA+BA,MAAM,OAArC,IAA6CA,MAAM,OAAN,CAAW,eAAX,CAA9C,IAA8E,MAAvG;AAEA,YAAIqG,qBAAqB,GAAG,OAAOrG,MAAP,KAAgB,WAAhB,GAA8BA,MAAM,OAAN,CAAW,uBAAX,CAA9B,GAAoE,uBAAhG,CA5B8C,CA8B9C;;AACA,YAAIsG,kBAAkB,GAAG;AACxB7F,UAAAA,WAAW,EAAE,CADW;AAExB8F,UAAAA,MAAM,EAAE,CAFgB;AAGxBC,UAAAA,qBAAqB,EAAE,CAHC;AAIxBC,UAAAA,yBAAyB,EAAE,CAJH;AAKxBC,UAAAA,mBAAmB,EAAE,CALG;AAMxBC,UAAAA,kBAAkB,EAAE,CANI;AAOxBC,UAAAA,kBAAkB,EAAE,CAPI;AAQxBC,UAAAA,iBAAiB,EAAE,CARK;AASxBC,UAAAA,oBAAoB,EAAE,CATE;AAUxBC,UAAAA,mBAAmB,EAAE;AAVG,SAAzB;AAcA,YAAIC,WAAW,GAAG,0LAAlB;AAGA,YAAIC,WAAW,GAAG,EAAlB;AAEA;;AACA,YAAIC,GAAG,GAAG,OAAOlC,OAAP,KAAiB,WAAjB,IAAgC,CAACA,OAAO,CAACmC,GAAzC,IAAgDnC,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAuB,YAAjF,CAnD8C,CAqD9C;;AACA,iBAASC,cAAT,GAA0B;AAAE,iBAAO,IAAP;AAAc,SAtDI,CA0D9C;;;AACA,YAAIC,KAAK,GAAGtB,oCAAoC,CAAC,GAAD,CAApC,CAA0C,GAA1C,EAA+C,IAA/C,EAAqDvF,WAAjE;;AACA6G,QAAAA,KAAK,CAACrI,SAAN,CAAgBsI,QAAhB,GAA2BnB,kBAA3B;AACAkB,QAAAA,KAAK,CAACrI,SAAN,CAAgBuI,oBAAhB,GAAuC,KAAvC;AACAF,QAAAA,KAAK,CAACrI,SAAN,CAAgBwI,sBAAhB,GAAyC,KAAzC;AAEAnJ,QAAAA,MAAM,CAACC,cAAP,CAAsB+I,KAAK,CAACrI,SAA5B,EAAuC,MAAvC,EAA+C;AAC9CP,UAAAA,GAAG,EAAE,eAAW;AAAE,mBAAO,KAAKgJ,QAAZ;AAAuB,WADK;AAE9CC,UAAAA,GAAG,EAAE,aAASC,CAAT,EAAY;AAAE,iBAAKF,QAAL,GAAgBE,CAAhB;AAAoB,WAFO;AAG9CpJ,UAAAA,YAAY,EAAC;AAHiC,SAA/C;AAMAF,QAAAA,MAAM,CAACC,cAAP,CAAsB+I,KAAK,CAACrI,SAA5B,EAAuC,OAAvC,EAAgD;AAC/CP,UAAAA,GAAG,EAAE,eAAW;AAAE,mBAAO,KAAKmJ,UAAZ;AAAyB,WADI;AAE/CF,UAAAA,GAAG,EAAE,aAASC,CAAT,EAAY;AAAE,iBAAKC,UAAL,GAAkBD,CAAlB;AAAsB,WAFM;AAG/CpJ,UAAAA,YAAY,EAAC;AAHkC,SAAhD;AAQA,YAAIsJ,YAAY,GAAG9B,oCAAoC,CAAC,SAAD,CAApC,CAAgD+B,KAAnE;;AACA/B,QAAAA,oCAAoC,CAAC,SAAD,CAApC,CAAgD+B,KAAhD,GAAwD,UAAUC,CAAV,EAAa;AACpE,cAAIF,YAAJ,EAAkB;AAAEE,YAAAA,CAAC,GAAGF,YAAY,CAACE,CAAD,CAAhB;AAAsB;;AAC1CA,UAAAA,CAAC,CAACC,OAAF,GAAY3J,MAAZ;AACA0J,UAAAA,CAAC,CAACE,WAAF,GAAgBF,CAAhB;AACA,iBAAOA,CAAP;AACA,SALD;;AAQA,YAAIG,YAAY,GAAGnC,oCAAoC,CAAC,SAAD,CAApC,CAAgDoC,KAAnE;;AACApC,QAAAA,oCAAoC,CAAC,SAAD,CAApC,CAAgDoC,KAAhD,GAAwD,UAAUA,KAAV,EAAiB;AACxE,cAAI,CAACA,KAAK,CAACZ,oBAAX,EAAiC;AAChCY,YAAAA,KAAK,CAACZ,oBAAN,GAA6B,IAA7B;AAEA,gBAAIa,GAAG,GAAGD,KAAK,CAACV,QAAhB;AAAA,gBACCY,KAAK,GAAGF,KAAK,CAACP,UAAN,GAAmBhF,MAAM,CAAC,EAAD,EAAKuF,KAAK,CAACP,UAAX,CADlC;;AAGA,gBAAI,OAAOQ,GAAP,KAAa,UAAjB,EAA6B;AAC5B,kBAAIA,GAAG,CAAChC,qBAAD,CAAH,KAA6B,IAA7B,IAAsCgC,GAAG,CAACpJ,SAAJ,IAAiB,sBAAsBoJ,GAAG,CAACpJ,SAArF,EAAiG;AAChG,oBAAImJ,KAAK,CAACG,QAAN,IAAkBC,MAAM,CAACJ,KAAK,CAACG,QAAP,CAAN,KAAyB,EAA/C,EAAmD;AAAEH,kBAAAA,KAAK,CAACG,QAAN,GAAiB/D,SAAjB;AAA6B;;AAClF,oBAAI4D,KAAK,CAACG,QAAV,EAAoB;AAAED,kBAAAA,KAAK,CAACC,QAAN,GAAiBH,KAAK,CAACG,QAAvB;AAAkC;;AAExD,oBAAI,CAACH,KAAK,CAACX,sBAAX,EAAmC;AAClCgB,kBAAAA,cAAc,CAACL,KAAD,CAAd;AACA;;AACDM,gBAAAA,oBAAoB,CAACN,KAAD,CAApB;AACA;AACD,aAVD,MAWK;AACJ,kBAAIA,KAAK,CAACG,QAAN,IAAkBC,MAAM,CAACJ,KAAK,CAACG,QAAP,CAAN,KAAyB,EAA/C,EAAmD;AAAEH,gBAAAA,KAAK,CAACG,QAAN,GAAiB/D,SAAjB;AAA6B;;AAClF,kBAAI4D,KAAK,CAACG,QAAV,EAAoB;AAAED,gBAAAA,KAAK,CAACC,QAAN,GAAiBH,KAAK,CAACG,QAAvB;AAAkC;;AAExD,kBAAID,KAAK,CAACK,YAAV,EAAwB;AACvB,oBAAI,CAACL,KAAK,CAACvD,KAAP,IAAgBuD,KAAK,CAACvD,KAAN,KAAc,CAAlC,EAAqC;AACpCuD,kBAAAA,KAAK,CAACvD,KAAN,GAAcuD,KAAK,CAACK,YAApB;AACA;;AACD,uBAAOL,KAAK,CAACK,YAAb;AACA;;AAEDC,cAAAA,kBAAkB,CAACR,KAAD,EAAQE,KAAR,CAAlB;AACA;AACD;;AAED,cAAIH,YAAJ,EAAkB;AAAEA,YAAAA,YAAY,CAACC,KAAD,CAAZ;AAAsB;AAC1C,SAlCD;;AAoCA,iBAASM,oBAAT,CAA8BN,KAA9B,EAAqC;AACpC,cAAIC,GAAG,GAAGD,KAAK,CAACV,QAAhB;AAAA,cACC5E,CAAC,GAAGsF,KAAK,CAACP,UADX;AAGAO,UAAAA,KAAK,CAACP,UAAN,GAAmB,EAAnB;;AACA,cAAIQ,GAAG,CAACQ,YAAR,EAAsB;AAAEhG,YAAAA,MAAM,CAACuF,KAAK,CAACP,UAAP,EAAmBQ,GAAG,CAACQ,YAAvB,CAAN;AAA6C;;AACrE,cAAI/F,CAAJ,EAAO;AAAED,YAAAA,MAAM,CAACuF,KAAK,CAACP,UAAP,EAAmB/E,CAAnB,CAAN;AAA8B;AACvC;;AAED,iBAAS8F,kBAAT,CAA4BR,KAA5B,EAAmCtF,CAAnC,EAAsC;AACrC,cAAIgG,cAAJ,EAAoBR,KAApB,EAA2BzK,CAA3B;;AACA,cAAIiF,CAAJ,EAAO;AACN,iBAAKjF,CAAL,IAAUiF,CAAV,EAAa;AAAE,kBAAKgG,cAAc,GAAG9B,WAAW,CAAC+B,IAAZ,CAAiBlL,CAAjB,CAAtB,EAA4C;AAAE;AAAQ;AAAE;;AACvE,gBAAIiL,cAAJ,EAAoB;AACnBR,cAAAA,KAAK,GAAGF,KAAK,CAACP,UAAN,GAAmB,EAA3B;;AACA,mBAAKhK,CAAL,IAAUiF,CAAV,EAAa;AACZ,oBAAIA,CAAC,CAAC5D,cAAF,CAAiBrB,CAAjB,CAAJ,EAAyB;AACxByK,kBAAAA,KAAK,CAAEtB,WAAW,CAAC+B,IAAZ,CAAiBlL,CAAjB,IAAsBA,CAAC,CAACkE,OAAF,CAAU,YAAV,EAAwB,KAAxB,EAA+BiH,WAA/B,EAAtB,GAAqEnL,CAAvE,CAAL,GAAkFiF,CAAC,CAACjF,CAAD,CAAnF;AACA;AACD;AACD;AACD;AACD,SAlJ6C,CAsJ9C;;;AACA,iBAASsH,QAAT,CAAkBiD,KAAlB,EAAyBa,MAAzB,EAAiCC,QAAjC,EAA2C;AAC1C,cAAIC,IAAI,GAAGF,MAAM,IAAIA,MAAM,CAACG,qBAAjB,IAA0CH,MAAM,CAACG,qBAAP,CAA6BC,IAAlF,CAD0C,CAG1C;;AACA,cAAIF,IAAI,IAAIA,IAAI,CAACG,UAAL,KAAkBL,MAA9B,EAAsC;AAAEE,YAAAA,IAAI,GAAG,IAAP;AAAc,WAJZ,CAM1C;;;AACA,cAAI,CAACA,IAAL,EAAW;AAAEA,YAAAA,IAAI,GAAGF,MAAM,CAACV,QAAP,CAAgB,CAAhB,CAAP;AAA4B,WAPC,CAS1C;;;AACA,eAAK,IAAI1K,CAAC,GAACoL,MAAM,CAACM,UAAP,CAAkBhH,MAA7B,EAAqC1E,CAAC,EAAtC,GAA4C;AAC3C,gBAAIoL,MAAM,CAACM,UAAP,CAAkB1L,CAAlB,MAAuBsL,IAA3B,EAAiC;AAChCF,cAAAA,MAAM,CAACO,WAAP,CAAmBP,MAAM,CAACM,UAAP,CAAkB1L,CAAlB,CAAnB;AACA;AACD;;AAED,cAAI0G,GAAG,GAAGyB,oCAAoC,CAAC,QAAD,CAApC,CAA+CoC,KAA/C,EAAsDa,MAAtD,EAA8DE,IAA9D,CAAV;;AACA,cAAIF,MAAJ,EAAY;AAAEA,YAAAA,MAAM,CAACG,qBAAP,GAA+B7E,GAAG,KAAKA,GAAG,CAACkF,UAAJ,IAAkB;AAAEJ,cAAAA,IAAI,EAAE9E;AAAR,aAAvB,CAAlC;AAA0E;;AACxF,cAAI,OAAO2E,QAAP,KAAkB,UAAtB,EAAkC;AAAEA,YAAAA,QAAQ;AAAK;;AACjD,iBAAO3E,GAAG,IAAIA,GAAG,CAACkF,UAAX,IAAyBlF,GAAhC;AACA;;AAGD,YAAImF,eAAe,GAAG,SAAlBA,eAAkB,GAAY,CAAE,CAApC;;AAEAA,QAAAA,eAAe,CAACzK,SAAhB,CAA0B0K,eAA1B,GAA4C,YAAY;AACvD,iBAAO,KAAKC,KAAL,CAAWC,OAAlB;AACA,SAFD;;AAGAH,QAAAA,eAAe,CAACzK,SAAhB,CAA0BsH,MAA1B,GAAmC,UAAUqD,KAAV,EAAiB;AACnD,iBAAOA,KAAK,CAACrB,QAAN,CAAe,CAAf,CAAP;AACA,SAFD;;AAIA,iBAAS1C,0BAAT,CAAoCiE,eAApC,EAAqD1B,KAArD,EAA4D2B,SAA5D,EAAuEb,QAAvE,EAAiF;AAChF,cAAIc,IAAI,GAAGhE,oCAAoC,CAAC,GAAD,CAApC,CAA0C0D,eAA1C,EAA2D;AAAEG,YAAAA,OAAO,EAAEC,eAAe,CAACD;AAA3B,WAA3D,EAAiGzB,KAAjG,CAAX;;AACA,cAAInK,CAAC,GAAGkH,QAAQ,CAAC6E,IAAD,EAAOD,SAAP,CAAhB;;AACA,cAAIb,QAAJ,EAAc;AAAEA,YAAAA,QAAQ,CAACjL,CAAD,CAAR;AAAc;;AAC9B,iBAAOA,CAAC,CAACwL,UAAF,IAAgBxL,CAAC,CAACoL,IAAzB;AACA;;AAGD,iBAAS3D,sBAAT,CAAgCqE,SAAhC,EAA2C;AAC1C,cAAIE,QAAQ,GAAGF,SAAS,CAACX,qBAAV,IAAmCW,SAAS,CAACX,qBAAV,CAAgCC,IAAlF;;AACA,cAAIY,QAAQ,IAAIA,QAAQ,CAACX,UAAT,KAAsBS,SAAtC,EAAiD;AAChD/D,YAAAA,oCAAoC,CAAC,QAAD,CAApC,CAA+CA,oCAAoC,CAAC,GAAD,CAApC,CAA0CqB,cAA1C,CAA/C,EAA0G0C,SAA1G,EAAqHE,QAArH;;AACA,mBAAO,IAAP;AACA;;AACD,iBAAO,KAAP;AACA;;AAID,YAAIC,GAAG,GAAG,EAAV,CA1M8C,CA4M9C;;AACA,YAAIhF,QAAQ,GAAG;AACdiF,UAAAA,GAAG,EAAE,aAAS5B,QAAT,EAAmBjG,EAAnB,EAAuBW,GAAvB,EAA4B;AAChC,gBAAIsF,QAAQ,IAAI,IAAhB,EAAsB;AAAE,qBAAO,IAAP;AAAc;;AACtCA,YAAAA,QAAQ,GAAGrD,QAAQ,CAACkF,OAAT,CAAiB7B,QAAjB,CAAX;;AACA,gBAAItF,GAAG,IAAIA,GAAG,KAAGsF,QAAjB,EAA2B;AAAEjG,cAAAA,EAAE,GAAGA,EAAE,CAACnC,IAAH,CAAQ8C,GAAR,CAAL;AAAoB;;AACjD,mBAAOsF,QAAQ,CAAC4B,GAAT,CAAa7H,EAAb,CAAP;AACA,WANa;AAOdF,UAAAA,OAAO,EAAE,iBAASmG,QAAT,EAAmBjG,EAAnB,EAAuBW,GAAvB,EAA4B;AACpC,gBAAIsF,QAAQ,IAAI,IAAhB,EAAsB;AAAE,qBAAO,IAAP;AAAc;;AACtCA,YAAAA,QAAQ,GAAGrD,QAAQ,CAACkF,OAAT,CAAiB7B,QAAjB,CAAX;;AACA,gBAAItF,GAAG,IAAIA,GAAG,KAAGsF,QAAjB,EAA2B;AAAEjG,cAAAA,EAAE,GAAGA,EAAE,CAACnC,IAAH,CAAQ8C,GAAR,CAAL;AAAoB;;AACjDsF,YAAAA,QAAQ,CAACnG,OAAT,CAAiBE,EAAjB;AACA,WAZa;AAad+H,UAAAA,KAAK,EAAE,eAAS9B,QAAT,EAAmB;AACzB,mBAAOA,QAAQ,IAAIA,QAAQ,CAAChG,MAArB,IAA+B,CAAtC;AACA,WAfa;AAgBd+H,UAAAA,IAAI,EAAE,cAAS/B,QAAT,EAAmB;AACxBA,YAAAA,QAAQ,GAAGrD,QAAQ,CAACkF,OAAT,CAAiB7B,QAAjB,CAAX;;AACA,gBAAIA,QAAQ,CAAChG,MAAT,KAAkB,CAAtB,EAAyB;AAAE,oBAAM,IAAIgI,KAAJ,CAAU,yCAAV,CAAN;AAA6D;;AACxF,mBAAOhC,QAAQ,CAAC,CAAD,CAAf;AACA,WApBa;AAqBd6B,UAAAA,OAAO,EAAE,iBAAS7B,QAAT,EAAmB;AAC3B,gBAAIA,QAAQ,IAAI,IAAhB,EAAsB;AAAE,qBAAO,EAAP;AAAY;;AACpC,mBAAOiC,KAAK,CAACnK,OAAN,IAAiBmK,KAAK,CAACnK,OAAN,CAAckI,QAAd,CAAjB,GAA2CA,QAA3C,GAAsD2B,GAAG,CAACO,MAAJ,CAAWlC,QAAX,CAA7D;AACA;AAxBa,SAAf;AA4BA;;AACA,YAAImC,gBAAJ;;AAGA,iBAASrF,aAAT,CAAuB/B,IAAvB,EAA6B;AAC5B,iBAAOgC,aAAa,CAACnF,IAAd,CAAmB,IAAnB,EAAyBmD,IAAzB,CAAP;AACA;;AAGD,YAAI2B,GAAG,GAAG,EAAV;;AACA,aAAK,IAAIpH,CAAC,GAACqI,QAAQ,CAAC3D,MAApB,EAA4B1E,CAAC,EAA7B,GAAmC;AAClCoH,UAAAA,GAAG,CAACiB,QAAQ,CAACrI,CAAD,CAAT,CAAH,GAAmBwH,aAAa,CAACa,QAAQ,CAACrI,CAAD,CAAT,CAAhC;AACA;;AAED,iBAAS8M,eAAT,CAAyBC,GAAzB,EAA8BC,MAA9B,EAAsC;AACrC,eAAK,IAAIhN,CAAC,GAACgN,MAAM,IAAI,CAArB,EAAwBhN,CAAC,GAAC+M,GAAG,CAACrI,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAC1C,gBAAIwE,GAAG,GAAGuI,GAAG,CAAC/M,CAAD,CAAb;;AACA,gBAAI2M,KAAK,CAACnK,OAAN,CAAcgC,GAAd,CAAJ,EAAwB;AACvBsI,cAAAA,eAAe,CAACtI,GAAD,CAAf;AACA,aAFD,MAGK,IAAIA,GAAG,IAAI,SAAOA,GAAP,MAAa,QAApB,IAAgC,CAACmD,cAAc,CAACnD,GAAD,CAA/C,KAA0DA,GAAG,CAACuH,KAAJ,IAAavH,GAAG,CAACiB,IAAlB,IAA4BjB,GAAG,CAACwF,UAAJ,IAAkBxF,GAAG,CAACqF,QAAlD,IAA+DrF,GAAG,CAACkG,QAA5H,CAAJ,EAA2I;AAC/IqC,cAAAA,GAAG,CAAC/M,CAAD,CAAH,GAASyH,aAAa,CAACjD,GAAG,CAACiB,IAAJ,IAAYjB,GAAG,CAACqF,QAAjB,EAA2BrF,GAAG,CAACuH,KAAJ,IAAavH,GAAG,CAACwF,UAA5C,EAAwDxF,GAAG,CAACkG,QAA5D,CAAtB;AACA;AACD;AACD;;AAED,iBAASuC,oBAAT,CAA8B7M,CAA9B,EAAiC;AAChC,iBAAO,OAAOA,CAAP,KAAW,UAAX,IAAyB,EAAEA,CAAC,CAACgB,SAAF,IAAehB,CAAC,CAACgB,SAAF,CAAYsH,MAA7B,CAAhC;AACA,SArQ6C,CAwQ9C;;;AACA,iBAASwE,sBAAT,CAAgCC,gBAAhC,EAAkD;AACjD,iBAAO5F,WAAW,CAAC;AAClB6F,YAAAA,WAAW,EAAED,gBAAgB,CAACC,WAAjB,IAAgCD,gBAAgB,CAAC7M,IAD5C;AAElBoI,YAAAA,MAAM,EAAE,kBAAW;AAClB,qBAAOyE,gBAAgB,CAAC,KAAKpB,KAAN,EAAa,KAAKC,OAAlB,CAAvB;AACA;AAJiB,WAAD,CAAlB;AAMA;;AAGD,iBAASqB,sBAAT,CAAgCC,IAAhC,EAAsC;AACrC,cAAIC,OAAO,GAAGD,IAAI,CAAC9E,qBAAD,CAAlB;;AACA,cAAI+E,OAAJ,EAAa;AAAE,mBAAOA,OAAO,KAAG,IAAV,GAAiBD,IAAjB,GAAwBC,OAA/B;AAAyC;;AAExDA,UAAAA,OAAO,GAAGL,sBAAsB,CAACI,IAAD,CAAhC;AAEA7M,UAAAA,MAAM,CAACC,cAAP,CAAsB6M,OAAtB,EAA+B/E,qBAA/B,EAAsD;AAAE7H,YAAAA,YAAY,EAAC,IAAf;AAAqBuG,YAAAA,KAAK,EAAC;AAA3B,WAAtD;AACAqG,UAAAA,OAAO,CAACH,WAAR,GAAsBE,IAAI,CAACF,WAA3B;AACAG,UAAAA,OAAO,CAACC,SAAR,GAAoBF,IAAI,CAACE,SAAzB;AACAD,UAAAA,OAAO,CAACvC,YAAR,GAAuBsC,IAAI,CAACtC,YAA5B;AAEAvK,UAAAA,MAAM,CAACC,cAAP,CAAsB4M,IAAtB,EAA4B9E,qBAA5B,EAAmD;AAAE7H,YAAAA,YAAY,EAAC,IAAf;AAAqBuG,YAAAA,KAAK,EAACqG;AAA3B,WAAnD;AAEA,iBAAOA,OAAP;AACA;;AAGD,iBAAS9F,aAAT,GAAyB;AACxB,cAAIgG,IAAI,GAAG,EAAX;AAAA,cAAeC,GAAG,GAAG5I,SAAS,CAACJ,MAA/B;;AACA,iBAAQgJ,GAAG,EAAX;AAAgBD,YAAAA,IAAI,CAAEC,GAAF,CAAJ,GAAc5I,SAAS,CAAE4I,GAAF,CAAvB;AAAhB;;AAEAZ,UAAAA,eAAe,CAACW,IAAD,EAAO,CAAP,CAAf;AACA,iBAAO7C,cAAc,CAACzC,oCAAoC,CAAC,GAAD,CAApC,CAA0CtB,KAA1C,CAAgD,KAAK,CAArD,EAAwD4G,IAAxD,CAAD,CAArB;AACA;;AAGD,iBAAS7C,cAAT,CAAwBL,KAAxB,EAA+B;AAC9BA,UAAAA,KAAK,CAACX,sBAAN,GAA+B,IAA/B;AAEA+D,UAAAA,cAAc,CAACpD,KAAD,CAAd;;AAEA,cAAI0C,oBAAoB,CAAC1C,KAAK,CAACV,QAAP,CAAxB,EAA0C;AACzCU,YAAAA,KAAK,CAACV,QAAN,GAAiBwD,sBAAsB,CAAC9C,KAAK,CAACV,QAAP,CAAvC;AACA;;AAED,cAAI+D,GAAG,GAAGrD,KAAK,CAACP,UAAN,CAAiB4D,GAA3B;AAAA,cACCnI,IAAI,GAAGmI,GAAG,aAAWA,GAAX,CADX;;AAEA,cAAIf,gBAAgB,KAAKpH,IAAI,KAAG,QAAP,IAAmBA,IAAI,KAAG,QAA/B,CAApB,EAA8D;AAC7D8E,YAAAA,KAAK,CAACP,UAAN,CAAiB4D,GAAjB,GAAuBC,oBAAoB,CAACD,GAAD,EAAMf,gBAAN,CAA3C;AACA;;AAEDiB,UAAAA,uBAAuB,CAACvD,KAAD,CAAvB;AAEA,iBAAOA,KAAP;AACA;;AAGD,iBAAS7C,cAAT,CAAwBqG,OAAxB,EAAiChC,KAAjC,EAAwC;AACvC,cAAIrB,QAAQ,GAAG,EAAf;AAAA,cAAmBgD,GAAG,GAAG5I,SAAS,CAACJ,MAAV,GAAmB,CAA5C;;AACA,iBAAQgJ,GAAG,KAAK,CAAhB;AAAoBhD,YAAAA,QAAQ,CAAEgD,GAAF,CAAR,GAAkB5I,SAAS,CAAE4I,GAAG,GAAG,CAAR,CAA3B;AAApB;;AAEA,cAAI,CAAC/F,cAAc,CAACoG,OAAD,CAAnB,EAA8B;AAAE,mBAAOA,OAAP;AAAiB;;AACjD,cAAIC,YAAY,GAAGD,OAAO,CAAC/D,UAAR,IAAsB+D,OAAO,CAAChC,KAAjD;;AACA,cAAIkC,IAAI,GAAG9F,oCAAoC,CAAC,GAAD,CAApC,CACV4F,OAAO,CAAClE,QAAR,IAAoBkE,OAAO,CAACtI,IADlB,EAEVuI,YAFU,EAGVD,OAAO,CAACrD,QAAR,IAAoBsD,YAAY,IAAIA,YAAY,CAACtD,QAHvC,CAAX,CANuC,CAWvC;AACA;;;AACA,cAAIwD,SAAS,GAAG,CAACD,IAAD,EAAOlC,KAAP,CAAhB;;AACA,cAAIrB,QAAQ,IAAIA,QAAQ,CAAChG,MAAzB,EAAiC;AAChCwJ,YAAAA,SAAS,CAACC,IAAV,CAAezD,QAAf;AACA,WAFD,MAGK,IAAIqB,KAAK,IAAIA,KAAK,CAACrB,QAAnB,EAA6B;AACjCwD,YAAAA,SAAS,CAACC,IAAV,CAAepC,KAAK,CAACrB,QAArB;AACA;;AACD,iBAAOE,cAAc,CAACzC,oCAAoC,CAAC,cAAD,CAApC,CAAqDtB,KAArD,CAA2D,KAAK,CAAhE,EAAmEqH,SAAnE,CAAD,CAArB;AACA;;AAGD,iBAASvG,cAAT,CAAwBoG,OAAxB,EAAiC;AAChC,iBAAOA,OAAO,KAAMA,OAAO,YAAYtE,KAApB,IAA8BsE,OAAO,CAACrE,QAAR,KAAmBnB,kBAAtD,CAAd;AACA;;AAGD,iBAASsF,oBAAT,CAA8BvN,IAA9B,EAAoC8N,SAApC,EAA+C;AAC9C,iBAAOA,SAAS,CAACC,WAAV,CAAsB/N,IAAtB,MAAgC8N,SAAS,CAACC,WAAV,CAAsB/N,IAAtB,IAA8B,UAAUgO,QAAV,EAAoB;AACxF,gBAAIF,SAAS,IAAIA,SAAS,CAACG,IAA3B,EAAiC;AAChCH,cAAAA,SAAS,CAACG,IAAV,CAAejO,IAAf,IAAuBgO,QAAvB;;AACA,kBAAIA,QAAQ,KAAG,IAAf,EAAqB;AACpB,uBAAOF,SAAS,CAACC,WAAV,CAAsB/N,IAAtB,CAAP;AACA8N,gBAAAA,SAAS,GAAG,IAAZ;AACA;AACD;AACD,WARM,CAAP;AASA;;AAGD,iBAASN,uBAAT,CAAiCF,GAAjC,EAAsC;AACrC,cAAI/D,QAAQ,GAAG+D,GAAG,CAAC/D,QAAnB;AACA,cAAIG,UAAU,GAAG4D,GAAG,CAAC5D,UAArB;;AAEA,cAAI,CAACA,UAAD,IAAe,OAAOH,QAAP,KAAkB,QAArC,EAA+C;AAAE;AAAS;;AAC1D,cAAIkC,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAI/L,CAAT,IAAcgK,UAAd,EAA0B;AACzB+B,YAAAA,KAAK,CAAC/L,CAAC,CAACmL,WAAF,EAAD,CAAL,GAAyBnL,CAAzB;AACA;;AACD,cAAI+L,KAAK,CAACyC,aAAV,EAAyB;AACxBxE,YAAAA,UAAU,CAACyE,UAAX,GAAwBzE,UAAU,CAAC+B,KAAK,CAACyC,aAAP,CAAlC;AACA,mBAAOxE,UAAU,CAAC+B,KAAK,CAACyC,aAAP,CAAjB;AACA,WAZoC,CAarC;;;AACA,cAAIzC,KAAK,CAAC2C,QAAN,KAAmB7E,QAAQ,KAAG,UAAX,IAA0BA,QAAQ,CAACsB,WAAT,OAAyB,OAAzB,IAAoC,CAAC,gBAAgBD,IAAhB,CAAqBlB,UAAU,CAACvE,IAAhC,CAAlF,CAAJ,EAA+H;AAC9H,gBAAIkJ,UAAU,GAAG5C,KAAK,CAAC6C,OAAN,IAAiB,SAAlC;;AACA,gBAAI,CAAC5E,UAAU,CAAC2E,UAAD,CAAf,EAA6B;AAC5B3E,cAAAA,UAAU,CAAC2E,UAAD,CAAV,GAAyBE,SAAS,CAAC,CAAC7E,UAAU,CAAC2E,UAAD,CAAX,EAAyB3E,UAAU,CAAC+B,KAAK,CAAC2C,QAAP,CAAnC,CAAD,CAAlC;AACA,qBAAO1E,UAAU,CAAC+B,KAAK,CAAC2C,QAAP,CAAjB;AACA;AACD;AACD;;AAGD,iBAASf,cAAT,CAAwBC,GAAxB,EAA6B;AAC5B,cAAI5D,UAAU,GAAG4D,GAAG,CAAC5D,UAArB;;AAEA,cAAI,CAACA,UAAL,EAAiB;AAAE;AAAS;;AAC5B,cAAI8E,EAAE,GAAG9E,UAAU,CAAC+E,SAAX,IAAwB/E,UAAU,SAA3C;;AACA,cAAI8E,EAAJ,EAAQ;AAAE9E,YAAAA,UAAU,CAAC+E,SAAX,GAAuBD,EAAvB;AAA4B;AACtC;;AAGD,iBAAS9J,MAAT,CAAgBwG,IAAhB,EAAsBO,KAAtB,EAA6B;AAC5B,eAAK,IAAIpH,GAAT,IAAgBoH,KAAhB,EAAuB;AACtB,gBAAIA,KAAK,CAAC1K,cAAN,CAAqBsD,GAArB,CAAJ,EAA+B;AAC9B6G,cAAAA,IAAI,CAAC7G,GAAD,CAAJ,GAAYoH,KAAK,CAACpH,GAAD,CAAjB;AACA;AACD;;AACD,iBAAO6G,IAAP;AACA;;AAGD,iBAASwD,cAAT,CAAwB/J,CAAxB,EAA2BC,CAA3B,EAA8B;AAC7B,eAAK,IAAIlF,CAAT,IAAciF,CAAd,EAAiB;AAAE,gBAAI,EAAEjF,CAAC,IAAIkF,CAAP,CAAJ,EAAe;AAAE,qBAAO,IAAP;AAAc;AAAE;;AACpD,eAAK,IAAI+J,GAAT,IAAgB/J,CAAhB,EAAmB;AAAE,gBAAID,CAAC,CAACgK,GAAD,CAAD,KAAS/J,CAAC,CAAC+J,GAAD,CAAd,EAAqB;AAAE,qBAAO,IAAP;AAAc;AAAE;;AAC5D,iBAAO,KAAP;AACA;;AAGD,iBAASrH,WAAT,CAAqBwG,SAArB,EAAgC;AAC/B,iBAAOA,SAAS,IAAIA,SAAS,CAAC5C,IAAvB,IAA+B4C,SAAtC;AACA;;AAGD,iBAASxI,CAAT,GAAY,CAAE;;AAEd,iBAAS2B,WAAT,CAAqB/C,GAArB,EAA0B;AACzB,mBAASsK,EAAT,CAAY/C,KAAZ,EAAmBC,OAAnB,EAA4B;AAC3BkD,YAAAA,OAAO,CAAC,IAAD,CAAP;AACApH,YAAAA,WAAW,CAAC5H,IAAZ,CAAiB,IAAjB,EAAuB6L,KAAvB,EAA8BC,OAA9B,EAAuC5C,WAAvC;AACA+F,YAAAA,gBAAgB,CAACjP,IAAjB,CAAsB,IAAtB,EAA4B6L,KAA5B,EAAmCC,OAAnC;AACA;;AAEDxH,UAAAA,GAAG,GAAGQ,MAAM,CAAC;AAAEpC,YAAAA,WAAW,EAAEkM;AAAf,WAAD,EAAsBtK,GAAtB,CAAZ,CAPyB,CASzB;;AACA,cAAIA,GAAG,CAAC4K,MAAR,EAAgB;AACfC,YAAAA,WAAW,CAAC7K,GAAD,EAAM8K,aAAa,CAAC9K,GAAG,CAAC4K,MAAL,CAAnB,CAAX;AACA;;AACD,cAAI5K,GAAG,CAAC+K,OAAR,EAAiB;AAChBvK,YAAAA,MAAM,CAAC8J,EAAD,EAAKtK,GAAG,CAAC+K,OAAT,CAAN;AACA;;AACD,cAAI/K,GAAG,CAACgJ,SAAR,EAAmB;AAClBsB,YAAAA,EAAE,CAACtB,SAAH,GAAehJ,GAAG,CAACgJ,SAAnB;AACA;;AACD,cAAIhJ,GAAG,CAACwG,YAAR,EAAsB;AACrB8D,YAAAA,EAAE,CAAC9D,YAAH,GAAkBxG,GAAG,CAACwG,YAAtB;AACA;;AACD,cAAIxG,GAAG,CAACgL,eAAR,EAAyB;AACxBV,YAAAA,EAAE,CAAC9D,YAAH,GAAkBxG,GAAG,CAACgL,eAAJ,EAAlB;AACA;;AAED5J,UAAAA,CAAC,CAACxE,SAAF,GAAc0G,WAAW,CAAC1G,SAA1B;AACA0N,UAAAA,EAAE,CAAC1N,SAAH,GAAe4D,MAAM,CAAC,IAAIY,CAAJ,EAAD,EAAUpB,GAAV,CAArB;AAEAsK,UAAAA,EAAE,CAAC1B,WAAH,GAAiB5I,GAAG,CAAC4I,WAAJ,IAAmB,WAApC;AAEA,iBAAO0B,EAAP;AACA,SArc6C,CAwc9C;;;AACA,iBAASQ,aAAT,CAAuBF,MAAvB,EAA+B;AAC9B,cAAIK,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIzP,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACoP,MAAM,CAAC1K,MAAvB,EAA+B1E,CAAC,EAAhC,EAAoC;AACnC,gBAAI0P,KAAK,GAAGN,MAAM,CAACpP,CAAD,CAAlB;;AACA,iBAAK,IAAI2E,GAAT,IAAgB+K,KAAhB,EAAuB;AACtB,kBAAIA,KAAK,CAACrO,cAAN,CAAqBsD,GAArB,KAA6B,OAAO+K,KAAK,CAAC/K,GAAD,CAAZ,KAAoB,UAArD,EAAiE;AAChE,iBAAC8K,KAAK,CAAC9K,GAAD,CAAL,KAAe8K,KAAK,CAAC9K,GAAD,CAAL,GAAW,EAA1B,CAAD,EAAgCwJ,IAAhC,CAAqCuB,KAAK,CAAC/K,GAAD,CAA1C;AACA;AACD;AACD;;AACD,iBAAO8K,KAAP;AACA,SApd6C,CAud9C;;;AACA,iBAASJ,WAAT,CAAqBM,KAArB,EAA4BP,MAA5B,EAAoC;AACnC,eAAK,IAAIzK,GAAT,IAAgByK,MAAhB,EAAwB;AAAE,gBAAIA,MAAM,CAAC/N,cAAP,CAAsBsD,GAAtB,CAAJ,EAAgC;AACzDgL,cAAAA,KAAK,CAAChL,GAAD,CAAL,GAAakK,SAAS,CACrBO,MAAM,CAACzK,GAAD,CAAN,CAAYiI,MAAZ,CAAmB+C,KAAK,CAAChL,GAAD,CAAL,IAAc0H,GAAjC,CADqB,EAErB1H,GAAG,KAAG,iBAAN,IAA2BA,GAAG,KAAG,iBAAjC,IAAsDA,GAAG,KAAG,iBAFvC,CAAtB;AAIA;AAAE;AACH;;AAGD,iBAASuK,OAAT,CAAiB9J,GAAjB,EAAsB;AACrB,eAAK,IAAIpF,CAAT,IAAcoF,GAAd,EAAmB;AAClB,gBAAI2E,CAAC,GAAG3E,GAAG,CAACpF,CAAD,CAAX;;AACA,gBAAI,OAAO+J,CAAP,KAAW,UAAX,IAAyB,CAACA,CAAC,CAAC6F,OAA5B,IAAuC,CAACnH,kBAAkB,CAACpH,cAAnB,CAAkCrB,CAAlC,CAA5C,EAAkF;AACjF,eAACoF,GAAG,CAACpF,CAAD,CAAH,GAAS+J,CAAC,CAACzH,IAAF,CAAO8C,GAAP,CAAV,EAAuBwK,OAAvB,GAAiC,IAAjC;AACA;AACD;AACD;;AAGD,iBAASC,UAAT,CAAoBzK,GAApB,EAAyBjF,CAAzB,EAA4BsN,IAA5B,EAAkC;AACjC,cAAI,OAAOtN,CAAP,KAAW,QAAf,EAAyB;AACxBA,YAAAA,CAAC,GAAGiF,GAAG,CAACxC,WAAJ,CAAgBxB,SAAhB,CAA0BjB,CAA1B,CAAJ;AACA;;AACD,cAAI,OAAOA,CAAP,KAAW,UAAf,EAA2B;AAC1B,mBAAOA,CAAC,CAAC0G,KAAF,CAAQzB,GAAR,EAAaqI,IAAb,CAAP;AACA;AACD;;AAED,iBAASoB,SAAT,CAAmBiB,KAAnB,EAA0BC,cAA1B,EAA0C;AACzC,iBAAO,YAAW;AACjB,gBAAIC,WAAW,GAAGlL,SAAlB;AACA,gBAAImL,MAAM,GAAG,IAAb;AAEA,gBAAIC,GAAJ;;AACA,iBAAK,IAAIlQ,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC8P,KAAK,CAACpL,MAAtB,EAA8B1E,CAAC,EAA/B,EAAmC;AAClC,kBAAImQ,CAAC,GAAGN,UAAU,CAACI,MAAD,EAASH,KAAK,CAAC9P,CAAD,CAAd,EAAmBgQ,WAAnB,CAAlB;;AAEA,kBAAID,cAAc,IAAII,CAAC,IAAE,IAAzB,EAA+B;AAC9B,oBAAI,CAACD,GAAL,EAAU;AAAEA,kBAAAA,GAAG,GAAG,EAAN;AAAW;;AACvB,qBAAK,IAAIvL,GAAT,IAAgBwL,CAAhB,EAAmB;AAAE,sBAAIA,CAAC,CAAC9O,cAAF,CAAiBsD,GAAjB,CAAJ,EAA2B;AAC/CuL,oBAAAA,GAAG,CAACvL,GAAD,CAAH,GAAWwL,CAAC,CAACxL,GAAD,CAAZ;AACA;AAAE;AACH,eALD,MAMK,IAAI,OAAOwL,CAAP,KAAW,WAAf,EAA4B;AAAED,gBAAAA,GAAG,GAAGC,CAAN;AAAU;AAC7C;;AACD,mBAAOD,GAAP;AACA,WAjBD;AAkBA;;AAGD,iBAASf,gBAAT,CAA0BpD,KAA1B,EAAiCC,OAAjC,EAA0C;AACzCoE,UAAAA,SAAS,CAAClQ,IAAV,CAAe,IAAf,EAAqB6L,KAArB,EAA4BC,OAA5B;AACA,eAAKpD,yBAAL,GAAiCiG,SAAS,CAAC,CAACuB,SAAD,EAAY,KAAKxH,yBAAL,IAAkC,2BAA9C,CAAD,CAA1C;AACA,eAAKF,MAAL,GAAcmG,SAAS,CAAC,CAACuB,SAAD,EAAYC,YAAZ,EAA0B,KAAK3H,MAAL,IAAe,QAAzC,EAAmD4H,WAAnD,CAAD,CAAvB;AACA;;AAGD,iBAASF,SAAT,CAAmBrE,KAAnB,EAA0BC,OAA1B,EAAmC;AAClC,cAAI,CAACD,KAAL,EAAY;AAAE;AAAS,WADW,CAGlC;;;AACA,cAAI3L,CAAC,GAAG2L,KAAK,CAACrB,QAAd;;AACA,cAAItK,CAAC,IAAIuM,KAAK,CAACnK,OAAN,CAAcpC,CAAd,CAAL,IAAyBA,CAAC,CAACsE,MAAF,KAAW,CAAxC,EAA2C;AAC1CqH,YAAAA,KAAK,CAACrB,QAAN,GAAiBtK,CAAC,CAAC,CAAD,CAAlB,CAD0C,CAG1C;;AACA,gBAAI2L,KAAK,CAACrB,QAAN,IAAkB,SAAOqB,KAAK,CAACrB,QAAb,MAAwB,QAA9C,EAAwD;AACvDqB,cAAAA,KAAK,CAACrB,QAAN,CAAehG,MAAf,GAAwB,CAAxB;AACAqH,cAAAA,KAAK,CAACrB,QAAN,CAAe,CAAf,IAAoBqB,KAAK,CAACrB,QAA1B;AACA;AACD,WAbiC,CAelC;;;AACA,cAAIrB,GAAJ,EAAS;AACR,gBAAIkH,IAAI,GAAG,OAAO,IAAP,KAAc,UAAd,GAA2B,IAA3B,GAAkC,KAAK3N,WAAlD;AAAA,gBACC4K,SAAS,GAAG,KAAKA,SAAL,IAAkB+C,IAAI,CAAC/C,SADpC;AAEA,gBAAIJ,WAAW,GAAG,KAAKA,WAAL,IAAoBmD,IAAI,CAACjQ,IAA3C;;AAEA,gBAAIkN,SAAJ,EAAe;AACdtF,cAAAA,gDAAgD,CAACjD,CAAjD,CAAmDuL,cAAnD,CAAkEhD,SAAlE,EAA6EzB,KAA7E,EAAoF,MAApF,EAA4FqB,WAA5F;AACA;AACD;AACD;;AAGD,iBAASiD,YAAT,CAAsBtE,KAAtB,EAA6B;AAC5Bc,UAAAA,gBAAgB,GAAG,IAAnB;AACA;;AAED,iBAASyD,WAAT,GAAuB;AACtB,cAAIzD,gBAAgB,KAAG,IAAvB,EAA6B;AAC5BA,YAAAA,gBAAgB,GAAG,IAAnB;AACA;AACD;;AAID,iBAAS/E,WAAT,CAAqBiE,KAArB,EAA4BC,OAA5B,EAAqCyE,IAArC,EAA2C;AAC1CtI,UAAAA,oCAAoC,CAAC,WAAD,CAApC,CAAkDjI,IAAlD,CAAuD,IAAvD,EAA6D6L,KAA7D,EAAoEC,OAApE;;AACA,eAAK0E,KAAL,GAAa,KAAKC,eAAL,GAAuB,KAAKA,eAAL,EAAvB,GAAgD,EAA7D;AACA,eAAKpC,IAAL,GAAY,EAAZ;AACA,eAAKF,WAAL,GAAmB,EAAnB;;AACA,cAAIoC,IAAI,KAAGrH,WAAX,EAAwB;AACvB+F,YAAAA,gBAAgB,CAACjP,IAAjB,CAAsB,IAAtB,EAA4B6L,KAA5B,EAAmCC,OAAnC;AACA;AACD;;AACDhH,QAAAA,MAAM,CAAC8C,WAAW,CAAC1G,SAAZ,GAAwB,IAAI+G,oCAAoC,CAAC,WAAD,CAAxC,EAAzB,EAAkF;AACvFvF,UAAAA,WAAW,EAAEkF,WAD0E;AAGvF8I,UAAAA,gBAAgB,EAAE,EAHqE;AAKvFC,UAAAA,YAAY,EAAE,sBAASH,KAAT,EAAgBrF,QAAhB,EAA0B;AACvC,gBAAI4E,MAAM,GAAG,IAAb;AAEA,iBAAKa,QAAL,CAAcJ,KAAd,EAAqBrF,QAArB;;AACA,iBAAK,IAAIrL,CAAT,IAAciQ,MAAM,CAACS,KAArB,EAA4B;AAC3B,kBAAI,EAAE1Q,CAAC,IAAI0Q,KAAP,CAAJ,EAAmB;AAClB,uBAAOT,MAAM,CAACS,KAAP,CAAa1Q,CAAb,CAAP;AACA;AACD;AACD,WAdsF;AAgBvF+Q,UAAAA,UAAU,EAAE,sBAAW;AACtB,mBAAO,KAAKvF,IAAZ;AACA,WAlBsF;AAoBvFwF,UAAAA,SAAS,EAAE,qBAAW;AACrB,mBAAO,CAAC,CAAC,KAAKxF,IAAd;AACA;AAtBsF,SAAlF,CAAN;;AA2BA,iBAASzD,aAAT,CAAuBgE,KAAvB,EAA8BC,OAA9B,EAAuC;AACtClE,UAAAA,WAAW,CAAC5H,IAAZ,CAAiB,IAAjB,EAAuB6L,KAAvB,EAA8BC,OAA9B;AACA;;AACDpG,QAAAA,CAAC,CAACxE,SAAF,GAAc0G,WAAW,CAAC1G,SAA1B;AACA2G,QAAAA,aAAa,CAAC3G,SAAd,GAA0B,IAAIwE,CAAJ,EAA1B;AACAmC,QAAAA,aAAa,CAAC3G,SAAd,CAAwB6P,oBAAxB,GAA+C,IAA/C;;AACAlJ,QAAAA,aAAa,CAAC3G,SAAd,CAAwBuH,qBAAxB,GAAgD,UAASoD,KAAT,EAAgB2E,KAAhB,EAAuB;AACtE,iBAAO1B,cAAc,CAAC,KAAKjD,KAAN,EAAaA,KAAb,CAAd,IAAqCiD,cAAc,CAAC,KAAK0B,KAAN,EAAaA,KAAb,CAA1D;AACA,SAFD;;AAMA,YAAIQ,KAAK,GAAG;AACXzP,UAAAA,OAAO,EAAEA,OADE;AAEX2F,UAAAA,GAAG,EAAEA,GAFM;AAGX+J,UAAAA,SAAS,EAAEjJ,gDAAgD,CAACjD,CAHjD;AAIXoC,UAAAA,QAAQ,EAAEA,QAJC;AAKXqB,UAAAA,MAAM,EAAEpB,QALG;AAMXC,UAAAA,WAAW,EAAEA,WANF;AAOXC,UAAAA,aAAa,EAAEA,aAPJ;AAQXC,UAAAA,aAAa,EAAEA,aARJ;AASX2J,UAAAA,YAAY,EAAE1J,cATH;AAUXC,UAAAA,cAAc,EAAEA,cAVL;AAWXC,UAAAA,WAAW,EAAEA,WAXF;AAYXC,UAAAA,sBAAsB,EAAEA,sBAZb;AAaXwJ,UAAAA,SAAS,EAAEvJ,WAbA;AAcXC,UAAAA,aAAa,EAAEA,aAdJ;AAeXuJ,UAAAA,mCAAmC,EAAEtJ;AAf1B,SAAZ;AAkBA;;AAA6Bf,QAAAA,mBAAmB,CAAC,SAAD,CAAnB,GAAkCiK,KAAlC;AAG7B;AAA4B,OA/nBA,EA+nBChR,IA/nBD,CA+nBM+G,mBA/nBN,EA+nB2BnH,mBAAmB,CAAC,CAAD,CA/nB9C,CAAD;AAioB3B;AAAO,KA/kCG;AAglCV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAI,CAAChO,QAAQ,CAACgO,EAAD,CAAb,EAAmB,MAAMC,SAAS,CAACD,EAAE,GAAG,oBAAN,CAAf;AACnB,eAAOA,EAAP;AACD,OAHD;AAMA;;AAAO,KA1lCG;AA2lCV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAI4R,cAAc,GAAG5R,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAI6R,WAAW,GAAG7R,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI8R,EAAE,GAAGnR,MAAM,CAACC,cAAhB;AAEAlB,MAAAA,OAAO,CAACqS,CAAR,GAAY/R,mBAAmB,CAAC,CAAD,CAAnB,GAAyBW,MAAM,CAACC,cAAhC,GAAiD,SAASA,cAAT,CAAwBoR,CAAxB,EAA2B5L,CAA3B,EAA8B6L,UAA9B,EAA0C;AACrGN,QAAAA,QAAQ,CAACK,CAAD,CAAR;AACA5L,QAAAA,CAAC,GAAGyL,WAAW,CAACzL,CAAD,EAAI,IAAJ,CAAf;AACAuL,QAAAA,QAAQ,CAACM,UAAD,CAAR;AACA,YAAIL,cAAJ,EAAoB,IAAI;AACtB,iBAAOE,EAAE,CAACE,CAAD,EAAI5L,CAAJ,EAAO6L,UAAP,CAAT;AACD,SAFmB,CAElB,OAAO5H,CAAP,EAAU;AAAE;AAAa;AAC3B,YAAI,SAAS4H,UAAT,IAAuB,SAASA,UAApC,EAAgD,MAAMP,SAAS,CAAC,0BAAD,CAAf;AAChD,YAAI,WAAWO,UAAf,EAA2BD,CAAC,CAAC5L,CAAD,CAAD,GAAO6L,UAAU,CAAC7K,KAAlB;AAC3B,eAAO4K,CAAP;AACD,OAVD;AAaA;AAAO,KAhnCG;AAinCV;;AACA;AAAO,cAASrS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,CAACM,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AACpD,eAAOW,MAAM,CAACC,cAAP,CAAsB,EAAtB,EAA0B,GAA1B,EAA+B;AAAEG,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO,CAAP;AAAW;AAAhC,SAA/B,EAAmEoE,CAAnE,IAAwE,CAA/E;AACD,OAFiB,CAAlB;AAKA;AAAO,KA1nCG;AA2nCV;;AACA;AAAO,cAASxF,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACA,UAAI2H,OAAO,GAAG1H,MAAM,CAACD,OAAP,GAAiB,EAA/B,CAHiC,CAKjC;AACA;AACA;AACA;;AAEA,UAAIwS,gBAAJ;AACA,UAAIC,kBAAJ;;AAEA,eAASC,gBAAT,GAA4B;AACxB,cAAM,IAAIxF,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,eAASyF,mBAAT,GAAgC;AAC5B,cAAM,IAAIzF,KAAJ,CAAU,mCAAV,CAAN;AACH;;AACA,mBAAY;AACT,YAAI;AACA,cAAI,OAAO0F,UAAP,KAAsB,UAA1B,EAAsC;AAClCJ,YAAAA,gBAAgB,GAAGI,UAAnB;AACH,WAFD,MAEO;AACHJ,YAAAA,gBAAgB,GAAGE,gBAAnB;AACH;AACJ,SAND,CAME,OAAO/H,CAAP,EAAU;AACR6H,UAAAA,gBAAgB,GAAGE,gBAAnB;AACH;;AACD,YAAI;AACA,cAAI,OAAOG,YAAP,KAAwB,UAA5B,EAAwC;AACpCJ,YAAAA,kBAAkB,GAAGI,YAArB;AACH,WAFD,MAEO;AACHJ,YAAAA,kBAAkB,GAAGE,mBAArB;AACH;AACJ,SAND,CAME,OAAOhI,CAAP,EAAU;AACR8H,UAAAA,kBAAkB,GAAGE,mBAArB;AACH;AACJ,OAnBA,GAAD;;AAoBA,eAASG,UAAT,CAAoBC,GAApB,EAAyB;AACrB,YAAIP,gBAAgB,KAAKI,UAAzB,EAAqC;AACjC;AACA,iBAAOA,UAAU,CAACG,GAAD,EAAM,CAAN,CAAjB;AACH,SAJoB,CAKrB;;;AACA,YAAI,CAACP,gBAAgB,KAAKE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEI,UAApE,EAAgF;AAC5EJ,UAAAA,gBAAgB,GAAGI,UAAnB;AACA,iBAAOA,UAAU,CAACG,GAAD,EAAM,CAAN,CAAjB;AACH;;AACD,YAAI;AACA;AACA,iBAAOP,gBAAgB,CAACO,GAAD,EAAM,CAAN,CAAvB;AACH,SAHD,CAGE,OAAMpI,CAAN,EAAQ;AACN,cAAI;AACA;AACA,mBAAO6H,gBAAgB,CAAC9R,IAAjB,CAAsB,IAAtB,EAA4BqS,GAA5B,EAAiC,CAAjC,CAAP;AACH,WAHD,CAGE,OAAMpI,CAAN,EAAQ;AACN;AACA,mBAAO6H,gBAAgB,CAAC9R,IAAjB,CAAsB,IAAtB,EAA4BqS,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;;AACD,eAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,YAAIR,kBAAkB,KAAKI,YAA3B,EAAyC;AACrC;AACA,iBAAOA,YAAY,CAACI,MAAD,CAAnB;AACH,SAJ4B,CAK7B;;;AACA,YAAI,CAACR,kBAAkB,KAAKE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuEI,YAA3E,EAAyF;AACrFJ,UAAAA,kBAAkB,GAAGI,YAArB;AACA,iBAAOA,YAAY,CAACI,MAAD,CAAnB;AACH;;AACD,YAAI;AACA;AACA,iBAAOR,kBAAkB,CAACQ,MAAD,CAAzB;AACH,SAHD,CAGE,OAAOtI,CAAP,EAAS;AACP,cAAI;AACA;AACA,mBAAO8H,kBAAkB,CAAC/R,IAAnB,CAAwB,IAAxB,EAA8BuS,MAA9B,CAAP;AACH,WAHD,CAGE,OAAOtI,CAAP,EAAS;AACP;AACA;AACA,mBAAO8H,kBAAkB,CAAC/R,IAAnB,CAAwB,IAAxB,EAA8BuS,MAA9B,CAAP;AACH;AACJ;AAIJ;;AACD,UAAIC,KAAK,GAAG,EAAZ;AACA,UAAIC,QAAQ,GAAG,KAAf;AACA,UAAIC,YAAJ;AACA,UAAIC,UAAU,GAAG,CAAC,CAAlB;;AAEA,eAASC,eAAT,GAA2B;AACvB,YAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;;AACDD,QAAAA,QAAQ,GAAG,KAAX;;AACA,YAAIC,YAAY,CAAClO,MAAjB,EAAyB;AACrBgO,UAAAA,KAAK,GAAGE,YAAY,CAAChG,MAAb,CAAoB8F,KAApB,CAAR;AACH,SAFD,MAEO;AACHG,UAAAA,UAAU,GAAG,CAAC,CAAd;AACH;;AACD,YAAIH,KAAK,CAAChO,MAAV,EAAkB;AACdqO,UAAAA,UAAU;AACb;AACJ;;AAED,eAASA,UAAT,GAAsB;AAClB,YAAIJ,QAAJ,EAAc;AACV;AACH;;AACD,YAAIK,OAAO,GAAGV,UAAU,CAACQ,eAAD,CAAxB;AACAH,QAAAA,QAAQ,GAAG,IAAX;AAEA,YAAIjF,GAAG,GAAGgF,KAAK,CAAChO,MAAhB;;AACA,eAAMgJ,GAAN,EAAW;AACPkF,UAAAA,YAAY,GAAGF,KAAf;AACAA,UAAAA,KAAK,GAAG,EAAR;;AACA,iBAAO,EAAEG,UAAF,GAAenF,GAAtB,EAA2B;AACvB,gBAAIkF,YAAJ,EAAkB;AACdA,cAAAA,YAAY,CAACC,UAAD,CAAZ,CAAyBI,GAAzB;AACH;AACJ;;AACDJ,UAAAA,UAAU,GAAG,CAAC,CAAd;AACAnF,UAAAA,GAAG,GAAGgF,KAAK,CAAChO,MAAZ;AACH;;AACDkO,QAAAA,YAAY,GAAG,IAAf;AACAD,QAAAA,QAAQ,GAAG,KAAX;AACAH,QAAAA,eAAe,CAACQ,OAAD,CAAf;AACH;;AAED7L,MAAAA,OAAO,CAAC+L,QAAR,GAAmB,UAAUX,GAAV,EAAe;AAC9B,YAAI9E,IAAI,GAAG,IAAId,KAAJ,CAAU7H,SAAS,CAACJ,MAAV,GAAmB,CAA7B,CAAX;;AACA,YAAII,SAAS,CAACJ,MAAV,GAAmB,CAAvB,EAA0B;AACtB,eAAK,IAAI1E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AACvCyN,YAAAA,IAAI,CAACzN,CAAC,GAAG,CAAL,CAAJ,GAAc8E,SAAS,CAAC9E,CAAD,CAAvB;AACH;AACJ;;AACD0S,QAAAA,KAAK,CAACvE,IAAN,CAAW,IAAIgF,IAAJ,CAASZ,GAAT,EAAc9E,IAAd,CAAX;;AACA,YAAIiF,KAAK,CAAChO,MAAN,KAAiB,CAAjB,IAAsB,CAACiO,QAA3B,EAAqC;AACjCL,UAAAA,UAAU,CAACS,UAAD,CAAV;AACH;AACJ,OAXD,CAvIiC,CAoJjC;;;AACA,eAASI,IAAT,CAAcZ,GAAd,EAAmBa,KAAnB,EAA0B;AACtB,aAAKb,GAAL,GAAWA,GAAX;AACA,aAAKa,KAAL,GAAaA,KAAb;AACH;;AACDD,MAAAA,IAAI,CAAC/R,SAAL,CAAe6R,GAAf,GAAqB,YAAY;AAC7B,aAAKV,GAAL,CAAS1L,KAAT,CAAe,IAAf,EAAqB,KAAKuM,KAA1B;AACH,OAFD;;AAGAjM,MAAAA,OAAO,CAACkM,KAAR,GAAgB,SAAhB;AACAlM,MAAAA,OAAO,CAACmM,OAAR,GAAkB,IAAlB;AACAnM,MAAAA,OAAO,CAACmC,GAAR,GAAc,EAAd;AACAnC,MAAAA,OAAO,CAACoM,IAAR,GAAe,EAAf;AACApM,MAAAA,OAAO,CAAC1F,OAAR,GAAkB,EAAlB,CAhKiC,CAgKX;;AACtB0F,MAAAA,OAAO,CAACqM,QAAR,GAAmB,EAAnB;;AAEA,eAASC,IAAT,GAAgB,CAAE;;AAElBtM,MAAAA,OAAO,CAACuM,EAAR,GAAaD,IAAb;AACAtM,MAAAA,OAAO,CAACwM,WAAR,GAAsBF,IAAtB;AACAtM,MAAAA,OAAO,CAACyM,IAAR,GAAeH,IAAf;AACAtM,MAAAA,OAAO,CAAC0M,GAAR,GAAcJ,IAAd;AACAtM,MAAAA,OAAO,CAAC2M,cAAR,GAAyBL,IAAzB;AACAtM,MAAAA,OAAO,CAAC4M,kBAAR,GAA6BN,IAA7B;AACAtM,MAAAA,OAAO,CAAC6M,IAAR,GAAeP,IAAf;AACAtM,MAAAA,OAAO,CAAC8M,eAAR,GAA0BR,IAA1B;AACAtM,MAAAA,OAAO,CAAC+M,mBAAR,GAA8BT,IAA9B;;AAEAtM,MAAAA,OAAO,CAACgN,SAAR,GAAoB,UAAU7T,IAAV,EAAgB;AAAE,eAAO,EAAP;AAAW,OAAjD;;AAEA6G,MAAAA,OAAO,CAACiN,OAAR,GAAkB,UAAU9T,IAAV,EAAgB;AAC9B,cAAM,IAAIoM,KAAJ,CAAU,kCAAV,CAAN;AACH,OAFD;;AAIAvF,MAAAA,OAAO,CAACkN,GAAR,GAAc,YAAY;AAAE,eAAO,GAAP;AAAY,OAAxC;;AACAlN,MAAAA,OAAO,CAACmN,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,cAAM,IAAI7H,KAAJ,CAAU,gCAAV,CAAN;AACH,OAFD;;AAGAvF,MAAAA,OAAO,CAACqN,KAAR,GAAgB,YAAW;AAAE,eAAO,CAAP;AAAW,OAAxC;AAGA;;AAAO,KAxzCG;AAyzCV;;AACA;AAAO,cAAS/U,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAO,SAAOA,EAAP,MAAc,QAAd,GAAyBA,EAAE,KAAK,IAAhC,GAAuC,OAAOA,EAAP,KAAc,UAA5D;AACD,OAFD;AAKA;;AAAO,KAj0CG;AAk0CV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI8R,EAAE,GAAG9R,mBAAmB,CAAC,CAAD,CAA5B;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,GAAyB,UAAUoB,MAAV,EAAkByD,GAAlB,EAAuBuC,KAAvB,EAA8B;AACtE,eAAO0K,EAAE,CAACC,CAAH,CAAK3Q,MAAL,EAAayD,GAAb,EAAkB8P,UAAU,CAAC,CAAD,EAAIvN,KAAJ,CAA5B,CAAP;AACD,OAFgB,GAEb,UAAUhG,MAAV,EAAkByD,GAAlB,EAAuBuC,KAAvB,EAA8B;AAChChG,QAAAA,MAAM,CAACyD,GAAD,CAAN,GAAcuC,KAAd;AACA,eAAOhG,MAAP;AACD,OALD;AAQA;AAAO,KA/0CG;AAg1CV;;AACA;AAAO,cAASzB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAI6B,cAAc,GAAG,GAAGA,cAAxB;;AACA5B,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc5M,GAAd,EAAmB;AAClC,eAAOtD,cAAc,CAACnB,IAAf,CAAoBqR,EAApB,EAAwB5M,GAAxB,CAAP;AACD,OAFD;AAKA;;AAAO,KAz1CG;AA01CV;;AACA;AAAO,cAASlF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUiF,EAAV,EAAckQ,IAAd,EAAoBjQ,MAApB,EAA4B;AAC3CgQ,QAAAA,SAAS,CAACjQ,EAAD,CAAT;AACA,YAAIkQ,IAAI,KAAKhO,SAAb,EAAwB,OAAOlC,EAAP;;AACxB,gBAAQC,MAAR;AACE,eAAK,CAAL;AAAQ,mBAAO,UAAUO,CAAV,EAAa;AAC1B,qBAAOR,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAc1P,CAAd,CAAP;AACD,aAFO;;AAGR,eAAK,CAAL;AAAQ,mBAAO,UAAUA,CAAV,EAAaC,CAAb,EAAgB;AAC7B,qBAAOT,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAc1P,CAAd,EAAiBC,CAAjB,CAAP;AACD,aAFO;;AAGR,eAAK,CAAL;AAAQ,mBAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB9E,CAAhB,EAAmB;AAChC,qBAAOqE,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAc1P,CAAd,EAAiBC,CAAjB,EAAoB9E,CAApB,CAAP;AACD,aAFO;AAPV;;AAWA,eAAO;AAAU;AAAe;AAC9B,iBAAOqE,EAAE,CAACoC,KAAH,CAAS8N,IAAT,EAAe7P,SAAf,CAAP;AACD,SAFD;AAGD,OAjBD;AAoBA;;AAAO,KAn3CG;AAo3CV;;AACA;AAAO,cAASrF,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoV,IAAV,EAAgB;AAC/B,YAAI;AACF,iBAAO,CAAC,CAACA,IAAI,EAAb;AACD,SAFD,CAEE,OAAOzK,CAAP,EAAU;AACV,iBAAO,IAAP;AACD;AACF,OAND;AASA;;AAAO,KAh4CG;AAi4CV;;AACA;AAAO,cAAS1K,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,EAAjB;AAGA;AAAO,KAv4CG;AAw4CV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI+U,OAAO,GAAG/U,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIgV,OAAO,GAAGhV,mBAAmB,CAAC,EAAD,CAAjC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOsD,OAAO,CAACC,OAAO,CAACvD,EAAD,CAAR,CAAd;AACD,OAFD;AAKA;;AAAO,KAn5CG;AAo5CV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIgV,OAAO,GAAGhV,mBAAmB,CAAC,EAAD,CAAjC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAO9Q,MAAM,CAACqU,OAAO,CAACvD,EAAD,CAAR,CAAb;AACD,OAFD;AAKA;;AAAO,KA95CG;AA+5CV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0D,MAAM,GAAG1D,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAIiV,oBAAoB,GAAG,OAA3B;AACA,UAAIC,sBAAsB,GAAG,KAA7B;AACA,UAAIC,yBAAyB,GAAG,CAAhC;AAEA,UAAIC,2BAA2B,GAAG,MAAlC;AACA,UAAIC,mBAAmB,GAAG,GAA1B,CATsD,CAWtD;;AACA,UAAIC,YAAY,GAAG,WAAnB;AACA,UAAIC,cAAc,GAAG,CACnB,eADmB,EACF;AACjB,qBAFmB,EAEF;AACjB,qBAHmB,CAGH;AAHG,OAArB;AAMA,UAAIC,cAAc,GAAG,UAArB;AACA,UAAIC,gBAAgB,GAAG,CACrB,cADqB,EACL;AAChB,oBAFqB,EAEL;AAChB,oBAHqB,CAGN;AAHM,OAAvB,CApBsD,CA0BtD;;AACA,UAAIC,YAAY,GAAG,YAAnB;AACA,UAAIC,aAAa,GAAG,aAApB;AACA,UAAIC,cAAc,GAAG,sBAArB;AACA,UAAIC,aAAa,GAAG,cAApB;AACA,UAAIC,cAAc,GAAG,uBAArB,CA/BsD,CAiCtD;;AACA,UAAIC,YAAY,GAAG,qBAAnB;AACA,UAAIC,cAAc,GAAG,8BAArB;AACA,UAAIC,gBAAgB,GAAG,uCAAvB,CApCsD,CAsCtD;;AACA,UAAIC,kBAAkB,GAAG,YAAzB;AACA,UAAIC,mBAAmB,GAAG,OAA1B;AACA,UAAIC,oBAAoB,GAAG,iBAA3B;AACA,UAAIC,sBAAsB,GAAG,0BAA7B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAASC,KAAT,CAAgBC,QAAhB,EAA0BC,YAA1B,EAAwC;AACtC,YAAI9S,MAAM,CAAC6S,QAAD,CAAV,EAAsB;AACpB;AACA,iBAAO,IAAIE,IAAJ,CAASF,QAAQ,CAACG,OAAT,EAAT,CAAP;AACD,SAHD,MAGO,IAAI,OAAOH,QAAP,KAAoB,QAAxB,EAAkC;AACvC,iBAAO,IAAIE,IAAJ,CAASF,QAAT,CAAP;AACD;;AAED,YAAII,OAAO,GAAGH,YAAY,IAAI,EAA9B;AACA,YAAII,gBAAgB,GAAGD,OAAO,CAACC,gBAA/B;;AACA,YAAIA,gBAAgB,IAAI,IAAxB,EAA8B;AAC5BA,UAAAA,gBAAgB,GAAGzB,yBAAnB;AACD,SAFD,MAEO;AACLyB,UAAAA,gBAAgB,GAAGC,MAAM,CAACD,gBAAD,CAAzB;AACD;;AAED,YAAIE,WAAW,GAAGC,eAAe,CAACR,QAAD,CAAjC;AAEA,YAAIS,eAAe,GAAGC,SAAS,CAACH,WAAW,CAACI,IAAb,EAAmBN,gBAAnB,CAA/B;AACA,YAAIO,IAAI,GAAGH,eAAe,CAACG,IAA3B;AACA,YAAIC,cAAc,GAAGJ,eAAe,CAACI,cAArC;AAEA,YAAIF,IAAI,GAAGG,SAAS,CAACD,cAAD,EAAiBD,IAAjB,CAApB;;AAEA,YAAID,IAAJ,EAAU;AACR,cAAII,SAAS,GAAGJ,IAAI,CAACR,OAAL,EAAhB;AACA,cAAIa,IAAI,GAAG,CAAX;AACA,cAAIrK,MAAJ;;AAEA,cAAI4J,WAAW,CAACS,IAAhB,EAAsB;AACpBA,YAAAA,IAAI,GAAGC,SAAS,CAACV,WAAW,CAACS,IAAb,CAAhB;AACD;;AAED,cAAIT,WAAW,CAACW,QAAhB,EAA0B;AACxBvK,YAAAA,MAAM,GAAGwK,aAAa,CAACZ,WAAW,CAACW,QAAb,CAAtB;AACD,WAFD,MAEO;AACL;AACAvK,YAAAA,MAAM,GAAG,IAAIuJ,IAAJ,CAASa,SAAS,GAAGC,IAArB,EAA2BI,iBAA3B,EAAT;AACAzK,YAAAA,MAAM,GAAG,IAAIuJ,IAAJ,CAASa,SAAS,GAAGC,IAAZ,GAAmBrK,MAAM,GAAGgI,sBAArC,EAA6DyC,iBAA7D,EAAT;AACD;;AAED,iBAAO,IAAIlB,IAAJ,CAASa,SAAS,GAAGC,IAAZ,GAAmBrK,MAAM,GAAGgI,sBAArC,CAAP;AACD,SAlBD,MAkBO;AACL,iBAAO,IAAIuB,IAAJ,CAASF,QAAT,CAAP;AACD;AACF;;AAED,eAASQ,eAAT,CAA0Ba,UAA1B,EAAsC;AACpC,YAAId,WAAW,GAAG,EAAlB;AACA,YAAIxD,KAAK,GAAGsE,UAAU,CAACpP,KAAX,CAAiB4M,2BAAjB,CAAZ;AACA,YAAIyC,UAAJ;;AAEA,YAAIxC,mBAAmB,CAACjK,IAApB,CAAyBkI,KAAK,CAAC,CAAD,CAA9B,CAAJ,EAAwC;AACtCwD,UAAAA,WAAW,CAACI,IAAZ,GAAmB,IAAnB;AACAW,UAAAA,UAAU,GAAGvE,KAAK,CAAC,CAAD,CAAlB;AACD,SAHD,MAGO;AACLwD,UAAAA,WAAW,CAACI,IAAZ,GAAmB5D,KAAK,CAAC,CAAD,CAAxB;AACAuE,UAAAA,UAAU,GAAGvE,KAAK,CAAC,CAAD,CAAlB;AACD;;AAED,YAAIuE,UAAJ,EAAgB;AACd,cAAIC,KAAK,GAAG5B,kBAAkB,CAACpB,IAAnB,CAAwB+C,UAAxB,CAAZ;;AACA,cAAIC,KAAJ,EAAW;AACThB,YAAAA,WAAW,CAACS,IAAZ,GAAmBM,UAAU,CAACzT,OAAX,CAAmB0T,KAAK,CAAC,CAAD,CAAxB,EAA6B,EAA7B,CAAnB;AACAhB,YAAAA,WAAW,CAACW,QAAZ,GAAuBK,KAAK,CAAC,CAAD,CAA5B;AACD,WAHD,MAGO;AACLhB,YAAAA,WAAW,CAACS,IAAZ,GAAmBM,UAAnB;AACD;AACF;;AAED,eAAOf,WAAP;AACD;;AAED,eAASG,SAAT,CAAoBW,UAApB,EAAgChB,gBAAhC,EAAkD;AAChD,YAAImB,aAAa,GAAGxC,cAAc,CAACqB,gBAAD,CAAlC;AACA,YAAIoB,eAAe,GAAGvC,gBAAgB,CAACmB,gBAAD,CAAtC;AAEA,YAAIkB,KAAJ,CAJgD,CAMhD;;AACAA,QAAAA,KAAK,GAAGtC,cAAc,CAACV,IAAf,CAAoB8C,UAApB,KAAmCI,eAAe,CAAClD,IAAhB,CAAqB8C,UAArB,CAA3C;;AACA,YAAIE,KAAJ,EAAW;AACT,cAAIG,UAAU,GAAGH,KAAK,CAAC,CAAD,CAAtB;AACA,iBAAO;AACLX,YAAAA,IAAI,EAAEe,QAAQ,CAACD,UAAD,EAAa,EAAb,CADT;AAELb,YAAAA,cAAc,EAAEQ,UAAU,CAACO,KAAX,CAAiBF,UAAU,CAACrT,MAA5B;AAFX,WAAP;AAID,SAd+C,CAgBhD;;;AACAkT,QAAAA,KAAK,GAAGxC,YAAY,CAACR,IAAb,CAAkB8C,UAAlB,KAAiCG,aAAa,CAACjD,IAAd,CAAmB8C,UAAnB,CAAzC;;AACA,YAAIE,KAAJ,EAAW;AACT,cAAIM,aAAa,GAAGN,KAAK,CAAC,CAAD,CAAzB;AACA,iBAAO;AACLX,YAAAA,IAAI,EAAEe,QAAQ,CAACE,aAAD,EAAgB,EAAhB,CAAR,GAA8B,GAD/B;AAELhB,YAAAA,cAAc,EAAEQ,UAAU,CAACO,KAAX,CAAiBC,aAAa,CAACxT,MAA/B;AAFX,WAAP;AAID,SAxB+C,CA0BhD;;;AACA,eAAO;AACLuS,UAAAA,IAAI,EAAE;AADD,SAAP;AAGD;;AAED,eAASE,SAAT,CAAoBO,UAApB,EAAgCT,IAAhC,EAAsC;AACpC;AACA,YAAIA,IAAI,KAAK,IAAb,EAAmB;AACjB,iBAAO,IAAP;AACD;;AAED,YAAIW,KAAJ;AACA,YAAIZ,IAAJ;AACA,YAAImB,KAAJ;AACA,YAAIC,IAAJ,CAToC,CAWpC;;AACA,YAAIV,UAAU,CAAChT,MAAX,KAAsB,CAA1B,EAA6B;AAC3BsS,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACAS,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB;AACA,iBAAOD,IAAP;AACD,SAhBmC,CAkBpC;;;AACAY,QAAAA,KAAK,GAAGpC,YAAY,CAACZ,IAAb,CAAkB8C,UAAlB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTZ,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACA4B,UAAAA,KAAK,GAAGH,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAjC;AACAZ,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB,EAA0BkB,KAA1B;AACA,iBAAOnB,IAAP;AACD,SAzBmC,CA2BpC;;;AACAY,QAAAA,KAAK,GAAGnC,aAAa,CAACb,IAAd,CAAmB8C,UAAnB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTZ,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACA,cAAI+B,SAAS,GAAGN,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAxB;AACAZ,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB,EAA0B,CAA1B,EAA6BqB,SAA7B;AACA,iBAAOtB,IAAP;AACD,SAlCmC,CAoCpC;;;AACAY,QAAAA,KAAK,GAAGlC,cAAc,CAACd,IAAf,CAAoB8C,UAApB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTZ,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACA4B,UAAAA,KAAK,GAAGH,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAjC;AACA,cAAIW,GAAG,GAAGP,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAlB;AACAZ,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB,EAA0BkB,KAA1B,EAAiCI,GAAjC;AACA,iBAAOvB,IAAP;AACD,SA5CmC,CA8CpC;;;AACAY,QAAAA,KAAK,GAAGjC,aAAa,CAACf,IAAd,CAAmB8C,UAAnB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTQ,UAAAA,IAAI,GAAGJ,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAhC;AACA,iBAAOY,YAAY,CAACvB,IAAD,EAAOmB,IAAP,CAAnB;AACD,SAnDmC,CAqDpC;;;AACAR,QAAAA,KAAK,GAAGhC,cAAc,CAAChB,IAAf,CAAoB8C,UAApB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTQ,UAAAA,IAAI,GAAGJ,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAhC;AACA,cAAIa,SAAS,GAAGT,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAzC;AACA,iBAAOY,YAAY,CAACvB,IAAD,EAAOmB,IAAP,EAAaK,SAAb,CAAnB;AACD,SA3DmC,CA6DpC;;;AACA,eAAO,IAAP;AACD;;AAED,eAASnB,SAAT,CAAoBK,UAApB,EAAgC;AAC9B,YAAIC,KAAJ;AACA,YAAIc,KAAJ;AACA,YAAIC,OAAJ,CAH8B,CAK9B;;AACAf,QAAAA,KAAK,GAAG/B,YAAY,CAACjB,IAAb,CAAkB+C,UAAlB,CAAR;;AACA,YAAIC,KAAJ,EAAW;AACTc,UAAAA,KAAK,GAAGE,UAAU,CAAChB,KAAK,CAAC,CAAD,CAAL,CAAS1T,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,CAAD,CAAlB;AACA,iBAAQwU,KAAK,GAAG,EAAT,GAAe3D,oBAAtB;AACD,SAV6B,CAY9B;;;AACA6C,QAAAA,KAAK,GAAG9B,cAAc,CAAClB,IAAf,CAAoB+C,UAApB,CAAR;;AACA,YAAIC,KAAJ,EAAW;AACTc,UAAAA,KAAK,GAAGV,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAhB;AACAe,UAAAA,OAAO,GAAGC,UAAU,CAAChB,KAAK,CAAC,CAAD,CAAL,CAAS1T,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,CAAD,CAApB;AACA,iBAAQwU,KAAK,GAAG,EAAT,GAAe3D,oBAAf,GACL4D,OAAO,GAAG3D,sBADZ;AAED,SAnB6B,CAqB9B;;;AACA4C,QAAAA,KAAK,GAAG7B,gBAAgB,CAACnB,IAAjB,CAAsB+C,UAAtB,CAAR;;AACA,YAAIC,KAAJ,EAAW;AACTc,UAAAA,KAAK,GAAGV,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAhB;AACAe,UAAAA,OAAO,GAAGX,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAlB;AACA,cAAIiB,OAAO,GAAGD,UAAU,CAAChB,KAAK,CAAC,CAAD,CAAL,CAAS1T,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,CAAD,CAAxB;AACA,iBAAQwU,KAAK,GAAG,EAAT,GAAe3D,oBAAf,GACL4D,OAAO,GAAG3D,sBADL,GAEL6D,OAAO,GAAG,IAFZ;AAGD,SA9B6B,CAgC9B;;;AACA,eAAO,IAAP;AACD;;AAED,eAASrB,aAAT,CAAwBsB,cAAxB,EAAwC;AACtC,YAAIlB,KAAJ;AACA,YAAImB,cAAJ,CAFsC,CAItC;;AACAnB,QAAAA,KAAK,GAAG3B,mBAAmB,CAACrB,IAApB,CAAyBkE,cAAzB,CAAR;;AACA,YAAIlB,KAAJ,EAAW;AACT,iBAAO,CAAP;AACD,SARqC,CAUtC;;;AACAA,QAAAA,KAAK,GAAG1B,oBAAoB,CAACtB,IAArB,CAA0BkE,cAA1B,CAAR;;AACA,YAAIlB,KAAJ,EAAW;AACTmB,UAAAA,cAAc,GAAGf,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,EAA1C;AACA,iBAAQA,KAAK,CAAC,CAAD,CAAL,KAAa,GAAd,GAAqB,CAACmB,cAAtB,GAAuCA,cAA9C;AACD,SAfqC,CAiBtC;;;AACAnB,QAAAA,KAAK,GAAGzB,sBAAsB,CAACvB,IAAvB,CAA4BkE,cAA5B,CAAR;;AACA,YAAIlB,KAAJ,EAAW;AACTmB,UAAAA,cAAc,GAAGf,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,EAAzB,GAA8BI,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAvD;AACA,iBAAQA,KAAK,CAAC,CAAD,CAAL,KAAa,GAAd,GAAqB,CAACmB,cAAtB,GAAuCA,cAA9C;AACD;;AAED,eAAO,CAAP;AACD;;AAED,eAASP,YAAT,CAAuBQ,OAAvB,EAAgCZ,IAAhC,EAAsCG,GAAtC,EAA2C;AACzCH,QAAAA,IAAI,GAAGA,IAAI,IAAI,CAAf;AACAG,QAAAA,GAAG,GAAGA,GAAG,IAAI,CAAb;AACA,YAAIvB,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAX;AACAS,QAAAA,IAAI,CAACqB,cAAL,CAAoBW,OAApB,EAA6B,CAA7B,EAAgC,CAAhC;AACA,YAAIC,kBAAkB,GAAGjC,IAAI,CAACkC,SAAL,MAAoB,CAA7C;AACA,YAAIC,IAAI,GAAGf,IAAI,GAAG,CAAP,GAAWG,GAAX,GAAiB,CAAjB,GAAqBU,kBAAhC;AACAjC,QAAAA,IAAI,CAACoC,UAAL,CAAgBpC,IAAI,CAACqC,UAAL,KAAoBF,IAApC;AACA,eAAOnC,IAAP;AACD;;AAEDvX,MAAAA,MAAM,CAACD,OAAP,GAAiB4W,KAAjB;AAGA;AAAO,KApuDG;AAquDV;;AACA;AAAO,cAAS3W,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU8Z,MAAV,EAAkBpS,KAAlB,EAAyB;AACxC,eAAO;AACLtG,UAAAA,UAAU,EAAE,EAAE0Y,MAAM,GAAG,CAAX,CADP;AAEL3Y,UAAAA,YAAY,EAAE,EAAE2Y,MAAM,GAAG,CAAX,CAFT;AAGLC,UAAAA,QAAQ,EAAE,EAAED,MAAM,GAAG,CAAX,CAHL;AAILpS,UAAAA,KAAK,EAAEA;AAJF,SAAP;AAMD,OAPD;AAUA;;AAAO,KAlvDG;AAmvDV;;AACA;AAAO,cAASzH,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAI0Z,GAAG,GAAG1Z,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,IAAzB,CAAV,CAJsD,CAMtD;;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB6K,MAAxB,EAAgC,QAAhC,EAA0C,UAAU8O,QAAV,EAAoB;AAC5D,aAAKC,EAAL,GAAU/O,MAAM,CAAC8O,QAAD,CAAhB,CAD4D,CAChC;;AAC5B,aAAKE,EAAL,GAAU,CAAV,CAF4D,CAEhC;AAC9B;AACC,OAJD,EAIG,YAAY;AACb,YAAI7H,CAAC,GAAG,KAAK4H,EAAb;AACA,YAAIxI,KAAK,GAAG,KAAKyI,EAAjB;AACA,YAAIC,KAAJ;AACA,YAAI1I,KAAK,IAAIY,CAAC,CAACpN,MAAf,EAAuB,OAAO;AAAEwC,UAAAA,KAAK,EAAEP,SAAT;AAAoBkT,UAAAA,IAAI,EAAE;AAA1B,SAAP;AACvBD,QAAAA,KAAK,GAAGJ,GAAG,CAAC1H,CAAD,EAAIZ,KAAJ,CAAX;AACA,aAAKyI,EAAL,IAAWC,KAAK,CAAClV,MAAjB;AACA,eAAO;AAAEwC,UAAAA,KAAK,EAAE0S,KAAT;AAAgBC,UAAAA,IAAI,EAAE;AAAtB,SAAP;AACD,OAZD;AAeA;;AAAO,KA1wDG;AA2wDV;;AACA;AAAO,cAASpa,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,IAAjB;AAGA;AAAO,KAjxDG;AAkxDV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIia,WAAW,GAAGja,mBAAmB,CAAC,EAAD,CAArC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAACuZ,IAAP,IAAe,SAASA,IAAT,CAAclI,CAAd,EAAiB;AAC/C,eAAOgI,KAAK,CAAChI,CAAD,EAAIiI,WAAJ,CAAZ;AACD,OAFD;AAKA;;AAAO,KA9xDG;AA+xDV;;AACA;AAAO,cAASta,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAI+C,QAAQ,GAAG,GAAGA,QAAlB;;AAEA9C,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOhP,QAAQ,CAACrC,IAAT,CAAcqR,EAAd,EAAkB0G,KAAlB,CAAwB,CAAxB,EAA2B,CAAC,CAA5B,CAAP;AACD,OAFD;AAKA;;AAAO,KAzyDG;AA0yDV;;AACA;AAAO,cAASxY,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAI,OAAOA,EAAP,IAAa,UAAjB,EAA6B,MAAMC,SAAS,CAACD,EAAE,GAAG,qBAAN,CAAf;AAC7B,eAAOA,EAAP;AACD,OAHD;AAMA;;AAAO,KAnzDG;AAozDV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAIya,EAAE,GAAG,CAAT;AACA,UAAIC,EAAE,GAAGrY,IAAI,CAACsY,MAAL,EAAT;;AACA1a,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUmF,GAAV,EAAe;AAC9B,eAAO,UAAUiI,MAAV,CAAiBjI,GAAG,KAAKgC,SAAR,GAAoB,EAApB,GAAyBhC,GAA1C,EAA+C,IAA/C,EAAqD,CAAC,EAAEsV,EAAF,GAAOC,EAAR,EAAY3X,QAAZ,CAAqB,EAArB,CAArD,CAAP;AACD,OAFD;AAKA;;AAAO,KA9zDG;AA+zDV;;AACA;AAAO,cAAS9C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsa,GAAG,GAAGta,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R,CAAjC;;AACA,UAAIvM,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIua,GAAG,GAAGva,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,aAAvB,CAAV;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc/G,GAAd,EAAmB8P,IAAnB,EAAyB;AACxC,YAAI/I,EAAE,IAAI,CAACjM,GAAG,CAACiM,EAAE,GAAG+I,IAAI,GAAG/I,EAAH,GAAQA,EAAE,CAACnQ,SAArB,EAAgCiZ,GAAhC,CAAd,EAAoDD,GAAG,CAAC7I,EAAD,EAAK8I,GAAL,EAAU;AAAE1Z,UAAAA,YAAY,EAAE,IAAhB;AAAsBuG,UAAAA,KAAK,EAAEsD;AAA7B,SAAV,CAAH;AACrD,OAFD;AAKA;;AAAO,KA30DG;AA40DV;;AACA;AAAO,cAAS/K,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI0a,aAAa,GAAG1a,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,aAAvB,CAApB;;AAEA,UAAI2a,YAAY,GAAG,CAAC,2FAClB,gHADkB,GAElB,gHAFkB,GAGlB,8GAHkB,GAIlB,yBAJiB,EAIUnS,KAJV,CAIgB,GAJhB,CAAnB;;AAMA,WAAK,IAAItI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGya,YAAY,CAAC/V,MAAjC,EAAyC1E,CAAC,EAA1C,EAA8C;AAC5C,YAAI0a,IAAI,GAAGD,YAAY,CAACza,CAAD,CAAvB;AACA,YAAI2a,UAAU,GAAGhZ,MAAM,CAAC+Y,IAAD,CAAvB;AACA,YAAI/K,KAAK,GAAGgL,UAAU,IAAIA,UAAU,CAACvZ,SAArC;AACA,YAAIuO,KAAK,IAAI,CAACA,KAAK,CAAC6K,aAAD,CAAnB,EAAoCnV,IAAI,CAACsK,KAAD,EAAQ6K,aAAR,EAAuBE,IAAvB,CAAJ;AACpCH,QAAAA,SAAS,CAACG,IAAD,CAAT,GAAkBH,SAAS,CAAC5N,KAA5B;AACD;AAGD;;AAAO,KAp2DG;AAq2DV;;AACA;AAAO,cAASlN,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCA,MAAAA,OAAO,CAACqS,CAAR,GAAY,GAAG+I,oBAAf;AAGA;AAAO,KA32DG;AA42DV;;AACA;AAAO,cAASnb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEAvB,MAAAA,OAAO,WAAP,GAAkB,UAAUqb,QAAV,EAAoBC,WAApB,EAAiC;AACjD,YAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACtC,gBAAM,IAAItJ,SAAJ,CAAc,mCAAd,CAAN;AACD;AACF,OAJD;AAMA;;AAAO,KA13DG;AA23DV;;AACA;AAAO,cAAS/R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIga,eAAe,GAAGjb,mBAAmB,CAAC,EAAD,CAAzC;;AAEA,UAAIkb,gBAAgB,GAAGC,sBAAsB,CAACF,eAAD,CAA7C;;AAEA,eAASE,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,YAAY;AAC5B,iBAAS0b,gBAAT,CAA0B1U,MAA1B,EAAkCuF,KAAlC,EAAyC;AACvC,eAAK,IAAI/L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+L,KAAK,CAACrH,MAA1B,EAAkC1E,CAAC,EAAnC,EAAuC;AACrC,gBAAImb,UAAU,GAAGpP,KAAK,CAAC/L,CAAD,CAAtB;AACAmb,YAAAA,UAAU,CAACva,UAAX,GAAwBua,UAAU,CAACva,UAAX,IAAyB,KAAjD;AACAua,YAAAA,UAAU,CAACxa,YAAX,GAA0B,IAA1B;AACA,gBAAI,WAAWwa,UAAf,EAA2BA,UAAU,CAAC5B,QAAX,GAAsB,IAAtB;AAC3B,aAAC,GAAGyB,gBAAgB,WAApB,EAA8BxU,MAA9B,EAAsC2U,UAAU,CAACxW,GAAjD,EAAsDwW,UAAtD;AACD;AACF;;AAED,eAAO,UAAUL,WAAV,EAAuBM,UAAvB,EAAmCC,WAAnC,EAAgD;AACrD,cAAID,UAAJ,EAAgBF,gBAAgB,CAACJ,WAAW,CAAC1Z,SAAb,EAAwBga,UAAxB,CAAhB;AAChB,cAAIC,WAAJ,EAAiBH,gBAAgB,CAACJ,WAAD,EAAcO,WAAd,CAAhB;AACjB,iBAAOP,WAAP;AACD,SAJD;AAKD,OAhBiB,EAAlB;AAkBA;;AAAO,KA35DG;AA45DV;;AACA;AAAO,cAASrb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIwE,QAAQ,GAAGxE,mBAAmB,CAAC,CAAD,CAAnB,CAAuBwE,QAAtC,CAHsD,CAItD;;;AACA,UAAIgX,EAAE,GAAG/X,QAAQ,CAACe,QAAD,CAAR,IAAsBf,QAAQ,CAACe,QAAQ,CAACmD,aAAV,CAAvC;;AACAhI,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAO+J,EAAE,GAAGhX,QAAQ,CAACmD,aAAT,CAAuB8J,EAAvB,CAAH,GAAgC,EAAzC;AACD,OAFD;AAKA;;AAAO,KAx6DG;AAy6DV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC,CAHsD,CAItD;AACA;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAcvL,CAAd,EAAiB;AAChC,YAAI,CAACzC,QAAQ,CAACgO,EAAD,CAAb,EAAmB,OAAOA,EAAP;AACnB,YAAI9M,EAAJ,EAAQhC,GAAR;AACA,YAAIuD,CAAC,IAAI,QAAQvB,EAAE,GAAG8M,EAAE,CAAChP,QAAhB,KAA6B,UAAlC,IAAgD,CAACgB,QAAQ,CAACd,GAAG,GAAGgC,EAAE,CAACvE,IAAH,CAAQqR,EAAR,CAAP,CAA7D,EAAkF,OAAO9O,GAAP;AAClF,YAAI,QAAQgC,EAAE,GAAG8M,EAAE,CAACgK,OAAhB,KAA4B,UAA5B,IAA0C,CAAChY,QAAQ,CAACd,GAAG,GAAGgC,EAAE,CAACvE,IAAH,CAAQqR,EAAR,CAAP,CAAvD,EAA4E,OAAO9O,GAAP;AAC5E,YAAI,CAACuD,CAAD,IAAM,QAAQvB,EAAE,GAAG8M,EAAE,CAAChP,QAAhB,KAA6B,UAAnC,IAAiD,CAACgB,QAAQ,CAACd,GAAG,GAAGgC,EAAE,CAACvE,IAAH,CAAQqR,EAAR,CAAP,CAA9D,EAAmF,OAAO9O,GAAP;AACnF,cAAM+O,SAAS,CAAC,yCAAD,CAAf;AACD,OAPD;AAUA;;AAAO,KA17DG;AA27DV;;AACA;AAAO,cAAS/R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;;AASA,UAAI0b,oBAAoB,GAAG,8CAA3B;AAEA/b,MAAAA,MAAM,CAACD,OAAP,GAAiBgc,oBAAjB;AAGA;AAAO,KA78DG;AA88DV;;AACA;AAAO,cAAS/b,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACA,UAAIic,IAAI,GAAG5Z,IAAI,CAAC4Z,IAAhB;AACA,UAAIC,KAAK,GAAG7Z,IAAI,CAAC6Z,KAAjB;;AACAjc,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOoK,KAAK,CAACpK,EAAE,GAAG,CAACA,EAAP,CAAL,GAAkB,CAAlB,GAAsB,CAACA,EAAE,GAAG,CAAL,GAASmK,KAAT,GAAiBD,IAAlB,EAAwBlK,EAAxB,CAA7B;AACD,OAFD;AAKA;;AAAO,KAz9DG;AA09DV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACAC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAIA,EAAE,IAAI5K,SAAV,EAAqB,MAAM6K,SAAS,CAAC,2BAA2BD,EAA5B,CAAf;AACrB,eAAOA,EAAP;AACD,OAHD;AAMA;;AAAO,KAp+DG;AAq+DV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAI8b,GAAG,GAAG9b,mBAAmB,CAAC,GAAD,CAA7B;;AACA,UAAIia,WAAW,GAAGja,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI+b,QAAQ,GAAG/b,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAxB,CAAf;;AACA,UAAIgc,KAAK,GAAG,SAARA,KAAQ,GAAY;AAAE;AAAa,OAAvC;;AACA,UAAIvW,SAAS,GAAG,WAAhB,CARsD,CAUtD;;AACA,UAAIwW,WAAU,GAAG,sBAAY;AAC3B;AACA,YAAIC,MAAM,GAAGlc,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,QAAxB,CAAb;;AACA,YAAIE,CAAC,GAAG+Z,WAAW,CAACrV,MAApB;AACA,YAAIuX,EAAE,GAAG,GAAT;AACA,YAAIC,EAAE,GAAG,GAAT;AACA,YAAIC,cAAJ;AACAH,QAAAA,MAAM,CAACI,KAAP,CAAaC,OAAb,GAAuB,MAAvB;;AACAvc,QAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwBwc,WAAxB,CAAoCN,MAApC;;AACAA,QAAAA,MAAM,CAACO,GAAP,GAAa,aAAb,CAT2B,CASC;AAC5B;AACA;;AACAJ,QAAAA,cAAc,GAAGH,MAAM,CAACQ,aAAP,CAAqBlY,QAAtC;AACA6X,QAAAA,cAAc,CAACM,IAAf;AACAN,QAAAA,cAAc,CAACO,KAAf,CAAqBT,EAAE,GAAG,QAAL,GAAgBC,EAAhB,GAAqB,mBAArB,GAA2CD,EAA3C,GAAgD,SAAhD,GAA4DC,EAAjF;AACAC,QAAAA,cAAc,CAACQ,KAAf;AACAZ,QAAAA,WAAU,GAAGI,cAAc,CAACvW,CAA5B;;AACA,eAAO5F,CAAC,EAAR;AAAY,iBAAO+b,WAAU,CAACxW,SAAD,CAAV,CAAsBwU,WAAW,CAAC/Z,CAAD,CAAjC,CAAP;AAAZ;;AACA,eAAO+b,WAAU,EAAjB;AACD,OAnBD;;AAqBAtc,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAACmc,MAAP,IAAiB,SAASA,MAAT,CAAgB9K,CAAhB,EAAmB+K,UAAnB,EAA+B;AAC/D,YAAI5Z,MAAJ;;AACA,YAAI6O,CAAC,KAAK,IAAV,EAAgB;AACdgK,UAAAA,KAAK,CAACvW,SAAD,CAAL,GAAmBkM,QAAQ,CAACK,CAAD,CAA3B;AACA7O,UAAAA,MAAM,GAAG,IAAI6Y,KAAJ,EAAT;AACAA,UAAAA,KAAK,CAACvW,SAAD,CAAL,GAAmB,IAAnB,CAHc,CAId;;AACAtC,UAAAA,MAAM,CAAC4Y,QAAD,CAAN,GAAmB/J,CAAnB;AACD,SAND,MAMO7O,MAAM,GAAG8Y,WAAU,EAAnB;;AACP,eAAOc,UAAU,KAAKlW,SAAf,GAA2B1D,MAA3B,GAAoC2Y,GAAG,CAAC3Y,MAAD,EAAS4Z,UAAT,CAA9C;AACD,OAVD;AAaA;;AAAO,KAnhEG;AAohEV;;AACA;AAAO,cAASpd,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIgd,SAAS,GAAGhd,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIid,GAAG,GAAGlb,IAAI,CAACkb,GAAf;;AACAtd,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOA,EAAE,GAAG,CAAL,GAASwL,GAAG,CAACD,SAAS,CAACvL,EAAD,CAAV,EAAgB,gBAAhB,CAAZ,GAAgD,CAAvD,CAD6B,CAC6B;AAC3D,OAFD;AAKA;;AAAO,KA/hEG;AAgiEV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIkd,MAAM,GAAGld,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,MAAxB,CAAb;;AACA,UAAIoC,GAAG,GAAGpC,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUmF,GAAV,EAAe;AAC9B,eAAOqY,MAAM,CAACrY,GAAD,CAAN,KAAgBqY,MAAM,CAACrY,GAAD,CAAN,GAAczC,GAAG,CAACyC,GAAD,CAAjC,CAAP;AACD,OAFD;AAKA;;AAAO,KA1iEG;AA2iEV;;AACA;AAAO,cAASlF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAImd,MAAM,GAAG,oBAAb;AACA,UAAIhb,KAAK,GAAGN,MAAM,CAACsb,MAAD,CAAN,KAAmBtb,MAAM,CAACsb,MAAD,CAAN,GAAiB,EAApC,CAAZ;AAEA,OAACxd,MAAM,CAACD,OAAP,GAAiB,UAAUmF,GAAV,EAAeuC,KAAf,EAAsB;AACtC,eAAOjF,KAAK,CAAC0C,GAAD,CAAL,KAAe1C,KAAK,CAAC0C,GAAD,CAAL,GAAauC,KAAK,KAAKP,SAAV,GAAsBO,KAAtB,GAA8B,EAA1D,CAAP;AACD,OAFD,EAEG,UAFH,EAEe,EAFf,EAEmBiH,IAFnB,CAEwB;AACtB1M,QAAAA,OAAO,EAAED,IAAI,CAACC,OADQ;AAEtByb,QAAAA,IAAI,EAAEpd,mBAAmB,CAAC,EAAD,CAAnB,GAA0B,MAA1B,GAAmC,QAFnB;AAGtBqd,QAAAA,SAAS,EAAE;AAHW,OAFxB;AASA;AAAO,KA5jEG;AA6jEV;;AACA;AAAO,cAAS1d,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACAC,MAAAA,MAAM,CAACD,OAAP,GACE,+FADe,CAEf8I,KAFe,CAET,GAFS,CAAjB;AAKA;AAAO,KAtkEG;AAukEV;;AACA;AAAO,cAAS7I,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIsd,GAAG,GAAGtd,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIua,GAAG,GAAGva,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,aAAvB,CAAV,CAJsD,CAKtD;;;AACA,UAAIud,GAAG,GAAGD,GAAG,CAAC,YAAY;AAAE,eAAOtY,SAAP;AAAmB,OAAjC,EAAD,CAAH,IAA4C,WAAtD,CANsD,CAQtD;;AACA,UAAIwY,MAAM,GAAG,SAATA,MAAS,CAAU/L,EAAV,EAAc5M,GAAd,EAAmB;AAC9B,YAAI;AACF,iBAAO4M,EAAE,CAAC5M,GAAD,CAAT;AACD,SAFD,CAEE,OAAOwF,CAAP,EAAU;AAAE;AAAa;AAC5B,OAJD;;AAMA1K,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAIO,CAAJ,EAAOyL,CAAP,EAAUnX,CAAV;AACA,eAAOmL,EAAE,KAAK5K,SAAP,GAAmB,WAAnB,GAAiC4K,EAAE,KAAK,IAAP,GAAc,MAAd,CACtC;AADsC,UAEpC,QAAQgM,CAAC,GAAGD,MAAM,CAACxL,CAAC,GAAGrR,MAAM,CAAC8Q,EAAD,CAAX,EAAiB8I,GAAjB,CAAlB,KAA4C,QAA5C,GAAuDkD,CAAvD,CACF;AADE,UAEAF,GAAG,GAAGD,GAAG,CAACtL,CAAD,CAAN,CACL;AADK,UAEH,CAAC1L,CAAC,GAAGgX,GAAG,CAACtL,CAAD,CAAR,KAAgB,QAAhB,IAA4B,OAAOA,CAAC,CAAC0L,MAAT,IAAmB,UAA/C,GAA4D,WAA5D,GAA0EpX,CAN9E;AAOD,OATD;AAYA;;AAAO,KAnmEG;AAomEV;;AACA;AAAO,cAAS3G,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2d,OAAO,GAAG3d,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB6d,iBAAvB,GAA2C,UAAUpM,EAAV,EAAc;AACxE,YAAIA,EAAE,IAAI5K,SAAV,EAAqB,OAAO4K,EAAE,CAACmM,QAAD,CAAF,IACvBnM,EAAE,CAAC,YAAD,CADqB,IAEvBgJ,SAAS,CAACkD,OAAO,CAAClM,EAAD,CAAR,CAFO;AAGtB,OAJD;AAOA;;AAAO,KAjnEG;AAknEV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AAEA,eAAS8d,iBAAT,CAA2BhX,CAA3B,EAA8B;AAC5B,YAAIiX,OAAJ,EAAaC,MAAb;AACA,aAAKC,OAAL,GAAe,IAAInX,CAAJ,CAAM,UAAUoX,SAAV,EAAqBC,QAArB,EAA+B;AAClD,cAAIJ,OAAO,KAAKlX,SAAZ,IAAyBmX,MAAM,KAAKnX,SAAxC,EAAmD,MAAM6K,SAAS,CAAC,yBAAD,CAAf;AACnDqM,UAAAA,OAAO,GAAGG,SAAV;AACAF,UAAAA,MAAM,GAAGG,QAAT;AACD,SAJc,CAAf;AAKA,aAAKJ,OAAL,GAAenJ,SAAS,CAACmJ,OAAD,CAAxB;AACA,aAAKC,MAAL,GAAcpJ,SAAS,CAACoJ,MAAD,CAAvB;AACD;;AAEDre,MAAAA,MAAM,CAACD,OAAP,CAAeqS,CAAf,GAAmB,UAAUjL,CAAV,EAAa;AAC9B,eAAO,IAAIgX,iBAAJ,CAAsBhX,CAAtB,CAAP;AACD,OAFD;AAKA;;AAAO,KA1oEG;AA2oEV;;AACA;AAAO,cAASnH,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCA,MAAAA,OAAO,CAACqS,CAAR,GAAYpR,MAAM,CAACyd,qBAAnB;AAGA;AAAO,KAjpEG;AAkpEV;;AACA;AAAO,cAASze,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDN,MAAAA,OAAO,CAACqS,CAAR,GAAY/R,mBAAmB,CAAC,CAAD,CAA/B;AAGA;AAAO,KAxpEG;AAypEV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAIqe,OAAO,GAAGre,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIse,MAAM,GAAGte,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIY,cAAc,GAAGZ,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R,CAA5C;;AACApS,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUc,IAAV,EAAgB;AAC/B,YAAI+d,OAAO,GAAG7c,IAAI,CAACW,MAAL,KAAgBX,IAAI,CAACW,MAAL,GAAcgc,OAAO,GAAG,EAAH,GAAQxc,MAAM,CAACQ,MAAP,IAAiB,EAA9D,CAAd;AACA,YAAI7B,IAAI,CAACge,MAAL,CAAY,CAAZ,KAAkB,GAAlB,IAAyB,EAAEhe,IAAI,IAAI+d,OAAV,CAA7B,EAAiD3d,cAAc,CAAC2d,OAAD,EAAU/d,IAAV,EAAgB;AAAE4G,UAAAA,KAAK,EAAEkX,MAAM,CAACvM,CAAP,CAASvR,IAAT;AAAT,SAAhB,CAAd;AAClD,OAHD;AAMA;;AAAO,KAvqEG;AAwqEV;;AACA;AAAO,cAASb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA1H,MAAAA,OAAO,CAAC+e,IAAR,GAAeA,IAAf;AACA/e,MAAAA,OAAO,CAACgf,WAAR,GAAsBA,WAAtB;;AACA,UAAIC,cAAc,GAAGjf,OAAO,CAACif,cAAR,GAAyB,SAASA,cAAT,CAAwB1Q,OAAxB,EAAiC;AAC7E,YAAI2Q,kBAAkB,GAAG,OAAO3Q,OAAO,CAACtI,IAAf,KAAwB,QAAjD;;AAEA,YAAIiZ,kBAAJ,EAAwB;AACtB,iBAAO,KAAP;AACD;;AAED,eAAO,CAAC3Q,OAAO,CAACtI,IAAR,CAAarE,SAAb,CAAuBwP,gBAA/B;AACD,OARD;;AASA,eAAS2N,IAAT,CAAc/Z,GAAd,EAAmB;AACjB,YAAIiG,KAAK,GAAG3F,SAAS,CAACJ,MAAV,GAAmB,CAAnB,IAAwBI,SAAS,CAAC,CAAD,CAAT,KAAiB6B,SAAzC,GAAqD7B,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAEA,YAAI7B,MAAM,GAAG,EAAb;AACAxC,QAAAA,MAAM,CAACuZ,IAAP,CAAYxV,GAAZ,EAAiBD,OAAjB,CAAyB,UAAUI,GAAV,EAAe;AACtC,cAAI8F,KAAK,CAACkU,OAAN,CAAcha,GAAd,MAAuB,CAAC,CAA5B,EAA+B;AAC7B1B,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcH,GAAG,CAACG,GAAD,CAAjB;AACD;AACF,SAJD;AAKA,eAAO1B,MAAP;AACD;;AAED,eAASub,WAAT,CAAqBvZ,CAArB,EAAwBC,CAAxB,EAA2B;AACzB,YAAI0Z,UAAU,GAAG3Z,CAAC,KAAKC,CAAvB;;AACA,YAAI0Z,UAAJ,EAAgB;AACd,iBAAO,IAAP;AACD;;AAED,YAAIC,aAAa,GAAG,CAAClS,KAAK,CAACnK,OAAN,CAAcyC,CAAd,CAAD,IAAqB,CAAC0H,KAAK,CAACnK,OAAN,CAAc0C,CAAd,CAA1C;AACA,YAAI4Z,gBAAgB,GAAG7Z,CAAC,CAACP,MAAF,KAAaQ,CAAC,CAACR,MAAtC;;AAEA,YAAIma,aAAa,IAAIC,gBAArB,EAAuC;AACrC,iBAAO,KAAP;AACD;;AAED,eAAO7Z,CAAC,CAAC8Z,KAAF,CAAQ,UAAUhR,OAAV,EAAmBmD,KAAnB,EAA0B;AACvC,iBAAOnD,OAAO,KAAK7I,CAAC,CAACgM,KAAD,CAApB;AACD,SAFM,CAAP;AAGD;;AAED,eAAS8N,aAAT,CAAuBva,EAAvB,EAA2B;AACzB,YAAIwa,KAAK,GAAG,EAAZ;AAEA,eAAO,UAAUhb,GAAV,EAAe;AACpB,cAAI,CAACgb,KAAK,CAAChb,GAAD,CAAV,EAAiB;AACfgb,YAAAA,KAAK,CAAChb,GAAD,CAAL,GAAaQ,EAAE,CAACR,GAAD,CAAf;AACD;;AACD,iBAAOgb,KAAK,CAAChb,GAAD,CAAZ;AACD,SALD;AAMD;;AAED,UAAIib,SAAS,GAAG1f,OAAO,CAAC0f,SAAR,GAAoBF,aAAa,CAAC,UAAU/a,GAAV,EAAe;AAC/D,eAAOA,GAAG,CAACC,OAAJ,CAAY,UAAZ,EAAwB,KAAxB,EAA+BiH,WAA/B,EAAP;AACD,OAFgD,CAAjD;AAIA;AAAO,KAzuEG;AA0uEV;;AACA;AAAO,cAAS1L,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB,CAACM,mBAAmB,CAAC,CAAD,CAApB,IAA2B,CAACA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AAC/E,eAAOW,MAAM,CAACC,cAAP,CAAsBZ,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,KAAxB,CAAtB,EAAsD,GAAtD,EAA2D;AAAEe,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO,CAAP;AAAW;AAAhC,SAA3D,EAA+FoE,CAA/F,IAAoG,CAA3G;AACD,OAF4C,CAA7C;AAKA;AAAO,KAlvEG;AAmvEV;;AACA;AAAO,cAASxF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAE9C,YAAIA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC9J,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAApC;AACD,SAFD,MAEO;AACLL,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAApC;AACD;AAED;;AAA4B,OARA,EAQCI,IARD,CAQMV,OARN,EAQeM,mBAAmB,CAAC,CAAD,CARlC,CAAD;AAU3B;AAAO,KAjwEG;AAkwEV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0B;AAIjC;AAAO,KAvwEG;AAwwEV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIqe,OAAO,GAAGre,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIqf,QAAQ,GAAGrf,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIsf,WAAW,GAAGtf,mBAAmB,CAAC,GAAD,CAArC;;AACA,UAAIuf,cAAc,GAAGvf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIwf,cAAc,GAAGxf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIyf,KAAK,GAAG,EAAE,GAAGvF,IAAH,IAAW,UAAU,GAAGA,IAAH,EAAvB,CAAZ,CAbsD,CAaP;;AAC/C,UAAIwF,WAAW,GAAG,YAAlB;AACA,UAAIC,IAAI,GAAG,MAAX;AACA,UAAIC,MAAM,GAAG,QAAb;;AAEA,UAAIC,UAAU,GAAG,SAAbA,UAAa,GAAY;AAAE,eAAO,IAAP;AAAc,OAA7C;;AAEAlgB,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUogB,IAAV,EAAgBlF,IAAhB,EAAsBI,WAAtB,EAAmC+E,IAAnC,EAAyCC,OAAzC,EAAkDC,MAAlD,EAA0DC,MAA1D,EAAkE;AACjFZ,QAAAA,WAAW,CAACtE,WAAD,EAAcJ,IAAd,EAAoBmF,IAApB,CAAX;;AACA,YAAII,SAAS,GAAG,SAAZA,SAAY,CAAUC,IAAV,EAAgB;AAC9B,cAAI,CAACX,KAAD,IAAUW,IAAI,IAAIvQ,KAAtB,EAA6B,OAAOA,KAAK,CAACuQ,IAAD,CAAZ;;AAC7B,kBAAQA,IAAR;AACE,iBAAKT,IAAL;AAAW,qBAAO,SAASzF,IAAT,GAAgB;AAAE,uBAAO,IAAIc,WAAJ,CAAgB,IAAhB,EAAsBoF,IAAtB,CAAP;AAAqC,eAA9D;;AACX,iBAAKR,MAAL;AAAa,qBAAO,SAASS,MAAT,GAAkB;AAAE,uBAAO,IAAIrF,WAAJ,CAAgB,IAAhB,EAAsBoF,IAAtB,CAAP;AAAqC,eAAhE;AAFf;;AAGE,iBAAO,SAASE,OAAT,GAAmB;AAAE,mBAAO,IAAItF,WAAJ,CAAgB,IAAhB,EAAsBoF,IAAtB,CAAP;AAAqC,WAAjE;AACH,SAND;;AAOA,YAAI7F,GAAG,GAAGK,IAAI,GAAG,WAAjB;AACA,YAAI2F,UAAU,GAAGP,OAAO,IAAIJ,MAA5B;AACA,YAAIY,UAAU,GAAG,KAAjB;AACA,YAAI3Q,KAAK,GAAGiQ,IAAI,CAACxe,SAAjB;AACA,YAAImf,OAAO,GAAG5Q,KAAK,CAAC+N,QAAD,CAAL,IAAmB/N,KAAK,CAAC6P,WAAD,CAAxB,IAAyCM,OAAO,IAAInQ,KAAK,CAACmQ,OAAD,CAAvE;AACA,YAAIU,QAAQ,GAAGD,OAAO,IAAIN,SAAS,CAACH,OAAD,CAAnC;AACA,YAAIW,QAAQ,GAAGX,OAAO,GAAG,CAACO,UAAD,GAAcG,QAAd,GAAyBP,SAAS,CAAC,SAAD,CAArC,GAAmDtZ,SAAzE;AACA,YAAI+Z,UAAU,GAAGhG,IAAI,IAAI,OAAR,GAAkB/K,KAAK,CAACyQ,OAAN,IAAiBG,OAAnC,GAA6CA,OAA9D;AACA,YAAII,OAAJ,EAAahc,GAAb,EAAkBic,iBAAlB,CAjBiF,CAkBjF;;AACA,YAAIF,UAAJ,EAAgB;AACdE,UAAAA,iBAAiB,GAAGtB,cAAc,CAACoB,UAAU,CAACxgB,IAAX,CAAgB,IAAI0f,IAAJ,EAAhB,CAAD,CAAlC;;AACA,cAAIgB,iBAAiB,KAAKngB,MAAM,CAACW,SAA7B,IAA0Cwf,iBAAiB,CAACf,IAAhE,EAAsE;AACpE;AACAR,YAAAA,cAAc,CAACuB,iBAAD,EAAoBvG,GAApB,EAAyB,IAAzB,CAAd,CAFoE,CAGpE;;AACA,gBAAI,CAAC8D,OAAD,IAAY,OAAOyC,iBAAiB,CAAClD,QAAD,CAAxB,IAAsC,UAAtD,EAAkErY,IAAI,CAACub,iBAAD,EAAoBlD,QAApB,EAA8BiC,UAA9B,CAAJ;AACnE;AACF,SA3BgF,CA4BjF;;;AACA,YAAIU,UAAU,IAAIE,OAAd,IAAyBA,OAAO,CAACjgB,IAAR,KAAiBof,MAA9C,EAAsD;AACpDY,UAAAA,UAAU,GAAG,IAAb;;AACAE,UAAAA,QAAQ,GAAG,SAASL,MAAT,GAAkB;AAAE,mBAAOI,OAAO,CAACrgB,IAAR,CAAa,IAAb,CAAP;AAA4B,WAA3D;AACD,SAhCgF,CAiCjF;;;AACA,YAAI,CAAC,CAACie,OAAD,IAAY6B,MAAb,MAAyBT,KAAK,IAAIe,UAAT,IAAuB,CAAC3Q,KAAK,CAAC+N,QAAD,CAAtD,CAAJ,EAAuE;AACrErY,UAAAA,IAAI,CAACsK,KAAD,EAAQ+N,QAAR,EAAkB8C,QAAlB,CAAJ;AACD,SApCgF,CAqCjF;;;AACAjG,QAAAA,SAAS,CAACG,IAAD,CAAT,GAAkB8F,QAAlB;AACAjG,QAAAA,SAAS,CAACF,GAAD,CAAT,GAAiBsF,UAAjB;;AACA,YAAIG,OAAJ,EAAa;AACXa,UAAAA,OAAO,GAAG;AACRR,YAAAA,MAAM,EAAEE,UAAU,GAAGG,QAAH,GAAcP,SAAS,CAACP,MAAD,CADjC;AAER1F,YAAAA,IAAI,EAAE+F,MAAM,GAAGS,QAAH,GAAcP,SAAS,CAACR,IAAD,CAF3B;AAGRW,YAAAA,OAAO,EAAEK;AAHD,WAAV;AAKA,cAAIT,MAAJ,EAAY,KAAKrb,GAAL,IAAYgc,OAAZ,EAAqB;AAC/B,gBAAI,EAAEhc,GAAG,IAAIgL,KAAT,CAAJ,EAAqBwP,QAAQ,CAACxP,KAAD,EAAQhL,GAAR,EAAagc,OAAO,CAAChc,GAAD,CAApB,CAAR;AACtB,WAFD,MAEOa,OAAO,CAACA,OAAO,CAACU,CAAR,GAAYV,OAAO,CAACI,CAAR,IAAa2Z,KAAK,IAAIe,UAAtB,CAAb,EAAgD5F,IAAhD,EAAsDiG,OAAtD,CAAP;AACR;;AACD,eAAOA,OAAP;AACD,OAnDD;AAsDA;;AAAO,KAn1EG;AAo1EV;;AACA;AAAO,cAASlhB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAApC;AAGA;AAAO,KA11EG;AA21EV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIghB,YAAY,GAAGhhB,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,KAAzB,CAAnB;;AACA,UAAI+b,QAAQ,GAAG/b,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAxB,CAAf;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU0B,MAAV,EAAkB6f,KAAlB,EAAyB;AACxC,YAAIjP,CAAC,GAAG+O,SAAS,CAAC3f,MAAD,CAAjB;AACA,YAAIlB,CAAC,GAAG,CAAR;AACA,YAAIiD,MAAM,GAAG,EAAb;AACA,YAAI0B,GAAJ;;AACA,aAAKA,GAAL,IAAYmN,CAAZ;AAAe,cAAInN,GAAG,IAAIkX,QAAX,EAAqBvW,GAAG,CAACwM,CAAD,EAAInN,GAAJ,CAAH,IAAe1B,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ,CAAf;AAApC,SALwC,CAMxC;;;AACA,eAAOoc,KAAK,CAACrc,MAAN,GAAe1E,CAAtB;AAAyB,cAAIsF,GAAG,CAACwM,CAAD,EAAInN,GAAG,GAAGoc,KAAK,CAAC/gB,CAAC,EAAF,CAAf,CAAP,EAA8B;AACrD,aAAC8gB,YAAY,CAAC7d,MAAD,EAAS0B,GAAT,CAAb,IAA8B1B,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ,CAA9B;AACD;AAFD;;AAGA,eAAO1B,MAAP;AACD,OAXD;AAcA;;AAAO,KAj3EG;AAk3EV;;AACA;AAAO,cAASxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIsd,GAAG,GAAGtd,mBAAmB,CAAC,EAAD,CAA7B,CAHsD,CAItD;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAAC,GAAD,CAAN,CAAYma,oBAAZ,CAAiC,CAAjC,IAAsCna,MAAtC,GAA+C,UAAU8Q,EAAV,EAAc;AAC5E,eAAO6L,GAAG,CAAC7L,EAAD,CAAH,IAAW,QAAX,GAAsBA,EAAE,CAACjJ,KAAH,CAAS,EAAT,CAAtB,GAAqC7H,MAAM,CAAC8Q,EAAD,CAAlD;AACD,OAFD;AAKA;AAAO,KA73EG;AA83EV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIwE,QAAQ,GAAGxE,mBAAmB,CAAC,CAAD,CAAnB,CAAuBwE,QAAtC;;AACA7E,MAAAA,MAAM,CAACD,OAAP,GAAiB8E,QAAQ,IAAIA,QAAQ,CAAC0c,eAAtC;AAGA;AAAO,KAr4EG;AAs4EV;;AACA;AAAO,cAASvhB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI+b,QAAQ,GAAG/b,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAxB,CAAf;;AACA,UAAIohB,WAAW,GAAGzgB,MAAM,CAACW,SAAzB;;AAEA3B,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAAC6e,cAAP,IAAyB,UAAUxN,CAAV,EAAa;AACrDA,QAAAA,CAAC,GAAGmP,QAAQ,CAACnP,CAAD,CAAZ;AACA,YAAIxM,GAAG,CAACwM,CAAD,EAAI+J,QAAJ,CAAP,EAAsB,OAAO/J,CAAC,CAAC+J,QAAD,CAAR;;AACtB,YAAI,OAAO/J,CAAC,CAAClP,WAAT,IAAwB,UAAxB,IAAsCkP,CAAC,YAAYA,CAAC,CAAClP,WAAzD,EAAsE;AACpE,iBAAOkP,CAAC,CAAClP,WAAF,CAAcxB,SAArB;AACD;;AAAC,eAAO0Q,CAAC,YAAYrR,MAAb,GAAsBygB,WAAtB,GAAoC,IAA3C;AACH,OAND;AASA;;AAAO,KAx5EG;AAy5EV;;AACA;AAAO,cAASzhB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU2hB,QAAV,EAAoB1c,EAApB,EAAwByC,KAAxB,EAA+BkZ,OAA/B,EAAwC;AACvD,YAAI;AACF,iBAAOA,OAAO,GAAG3b,EAAE,CAACgN,QAAQ,CAACvK,KAAD,CAAR,CAAgB,CAAhB,CAAD,EAAqBA,KAAK,CAAC,CAAD,CAA1B,CAAL,GAAsCzC,EAAE,CAACyC,KAAD,CAAtD,CADE,CAEJ;AACC,SAHD,CAGE,OAAOiD,CAAP,EAAU;AACV,cAAI+F,GAAG,GAAGiR,QAAQ,CAAC,QAAD,CAAlB;AACA,cAAIjR,GAAG,KAAKvJ,SAAZ,EAAuB8K,QAAQ,CAACvB,GAAG,CAAChQ,IAAJ,CAASihB,QAAT,CAAD,CAAR;AACvB,gBAAMhX,CAAN;AACD;AACF,OATD;AAYA;;AAAO,KA16EG;AA26EV;;AACA;AAAO,cAAS1K,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIshB,UAAU,GAAGzU,KAAK,CAACvL,SAAvB;;AAEA3B,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOA,EAAE,KAAK5K,SAAP,KAAqB4T,SAAS,CAAC5N,KAAV,KAAoB4E,EAApB,IAA0B6P,UAAU,CAAC1D,QAAD,CAAV,KAAyBnM,EAAxE,CAAP;AACD,OAFD;AAKA;;AAAO,KAx7EG;AAy7EV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIuhB,OAAO,GAAGvhB,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,SAAvB,CAAd;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUsS,CAAV,EAAawP,CAAb,EAAgB;AAC/B,YAAI1a,CAAC,GAAG6K,QAAQ,CAACK,CAAD,CAAR,CAAYlP,WAApB;AACA,YAAIoD,CAAJ;AACA,eAAOY,CAAC,KAAKD,SAAN,IAAmB,CAACX,CAAC,GAAGyL,QAAQ,CAAC7K,CAAD,CAAR,CAAYya,OAAZ,CAAL,KAA8B1a,SAAjD,GAA6D2a,CAA7D,GAAiE5M,SAAS,CAAC1O,CAAD,CAAjF;AACD,OAJD;AAOA;;AAAO,KAv8EG;AAw8EV;;AACA;AAAO,cAASvG,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIyhB,MAAM,GAAGzhB,mBAAmB,CAAC,GAAD,CAAhC;;AACA,UAAI0hB,IAAI,GAAG1hB,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAI2hB,GAAG,GAAG3hB,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIqH,OAAO,GAAGxF,MAAM,CAACwF,OAArB;AACA,UAAIua,OAAO,GAAG/f,MAAM,CAACggB,YAArB;AACA,UAAIC,SAAS,GAAGjgB,MAAM,CAACkgB,cAAvB;AACA,UAAIC,cAAc,GAAGngB,MAAM,CAACmgB,cAA5B;AACA,UAAIC,QAAQ,GAAGpgB,MAAM,CAACogB,QAAtB;AACA,UAAIC,OAAO,GAAG,CAAd;AACA,UAAItP,KAAK,GAAG,EAAZ;AACA,UAAIuP,kBAAkB,GAAG,oBAAzB;AACA,UAAIC,KAAJ,EAAWC,OAAX,EAAoBC,IAApB;;AACA,UAAInP,GAAG,GAAG,SAANA,GAAM,GAAY;AACpB,YAAIgH,EAAE,GAAG,CAAC,IAAV,CADoB,CAEpB;;AACA,YAAIvH,KAAK,CAACrR,cAAN,CAAqB4Y,EAArB,CAAJ,EAA8B;AAC5B,cAAIxV,EAAE,GAAGiO,KAAK,CAACuH,EAAD,CAAd;AACA,iBAAOvH,KAAK,CAACuH,EAAD,CAAZ;AACAxV,UAAAA,EAAE;AACH;AACF,OARD;;AASA,UAAI4d,QAAQ,GAAG,SAAXA,QAAW,CAAUnY,KAAV,EAAiB;AAC9B+I,QAAAA,GAAG,CAAC/S,IAAJ,CAASgK,KAAK,CAACoY,IAAf;AACD,OAFD,CAzBsD,CA4BtD;;;AACA,UAAI,CAACZ,OAAD,IAAY,CAACE,SAAjB,EAA4B;AAC1BF,QAAAA,OAAO,GAAG,SAASC,YAAT,CAAsBld,EAAtB,EAA0B;AAClC,cAAIgJ,IAAI,GAAG,EAAX;AACA,cAAIzN,CAAC,GAAG,CAAR;;AACA,iBAAO8E,SAAS,CAACJ,MAAV,GAAmB1E,CAA1B;AAA6ByN,YAAAA,IAAI,CAACU,IAAL,CAAUrJ,SAAS,CAAC9E,CAAC,EAAF,CAAnB;AAA7B;;AACA0S,UAAAA,KAAK,CAAC,EAAEsP,OAAH,CAAL,GAAmB,YAAY;AAC7B;AACAT,YAAAA,MAAM,CAAC,OAAO9c,EAAP,IAAa,UAAb,GAA0BA,EAA1B,GAA+B1C,QAAQ,CAAC0C,EAAD,CAAxC,EAA8CgJ,IAA9C,CAAN;AACD,WAHD;;AAIAyU,UAAAA,KAAK,CAACF,OAAD,CAAL;AACA,iBAAOA,OAAP;AACD,SAVD;;AAWAJ,QAAAA,SAAS,GAAG,SAASC,cAAT,CAAwB5H,EAAxB,EAA4B;AACtC,iBAAOvH,KAAK,CAACuH,EAAD,CAAZ;AACD,SAFD,CAZ0B,CAe1B;;;AACA,YAAIna,mBAAmB,CAAC,EAAD,CAAnB,CAAwBqH,OAAxB,KAAoC,SAAxC,EAAmD;AACjD+a,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpB9S,YAAAA,OAAO,CAAC+L,QAAR,CAAiB9N,GAAG,CAAC6N,GAAD,EAAMgH,EAAN,EAAU,CAAV,CAApB;AACD,WAFD,CADiD,CAInD;;AACC,SALD,MAKO,IAAI8H,QAAQ,IAAIA,QAAQ,CAACQ,GAAzB,EAA8B;AACnCL,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpB8H,YAAAA,QAAQ,CAACQ,GAAT,CAAand,GAAG,CAAC6N,GAAD,EAAMgH,EAAN,EAAU,CAAV,CAAhB;AACD,WAFD,CADmC,CAIrC;;AACC,SALM,MAKA,IAAI6H,cAAJ,EAAoB;AACzBK,UAAAA,OAAO,GAAG,IAAIL,cAAJ,EAAV;AACAM,UAAAA,IAAI,GAAGD,OAAO,CAACK,KAAf;AACAL,UAAAA,OAAO,CAACM,KAAR,CAAcC,SAAd,GAA0BL,QAA1B;AACAH,UAAAA,KAAK,GAAG9c,GAAG,CAACgd,IAAI,CAACO,WAAN,EAAmBP,IAAnB,EAAyB,CAAzB,CAAX,CAJyB,CAK3B;AACA;AACC,SAPM,MAOA,IAAIzgB,MAAM,CAACihB,gBAAP,IAA2B,OAAOD,WAAP,IAAsB,UAAjD,IAA+D,CAAChhB,MAAM,CAACkhB,aAA3E,EAA0F;AAC/FX,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpBtY,YAAAA,MAAM,CAACghB,WAAP,CAAmB1I,EAAE,GAAG,EAAxB,EAA4B,GAA5B;AACD,WAFD;;AAGAtY,UAAAA,MAAM,CAACihB,gBAAP,CAAwB,SAAxB,EAAmCP,QAAnC,EAA6C,KAA7C,EAJ+F,CAKjG;AACC,SANM,MAMA,IAAIJ,kBAAkB,IAAIR,GAAG,CAAC,QAAD,CAA7B,EAAyC;AAC9CS,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpBuH,YAAAA,IAAI,CAAClF,WAAL,CAAiBmF,GAAG,CAAC,QAAD,CAApB,EAAgCQ,kBAAhC,IAAsD,YAAY;AAChET,cAAAA,IAAI,CAAC7V,WAAL,CAAiB,IAAjB;AACAsH,cAAAA,GAAG,CAAC/S,IAAJ,CAAS+Z,EAAT;AACD,aAHD;AAID,WALD,CAD8C,CAOhD;;AACC,SARM,MAQA;AACLiI,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpB7H,YAAAA,UAAU,CAAChN,GAAG,CAAC6N,GAAD,EAAMgH,EAAN,EAAU,CAAV,CAAJ,EAAkB,CAAlB,CAAV;AACD,WAFD;AAGD;AACF;;AACDxa,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfsK,QAAAA,GAAG,EAAE4X,OADU;AAEfoB,QAAAA,KAAK,EAAElB;AAFQ,OAAjB;AAMA;AAAO,KAjiFG;AAkiFV;;AACA;AAAO,cAASniB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoV,IAAV,EAAgB;AAC/B,YAAI;AACF,iBAAO;AAAEzK,YAAAA,CAAC,EAAE,KAAL;AAAYJ,YAAAA,CAAC,EAAE6K,IAAI;AAAnB,WAAP;AACD,SAFD,CAEE,OAAOzK,CAAP,EAAU;AACV,iBAAO;AAAEA,YAAAA,CAAC,EAAE,IAAL;AAAWJ,YAAAA,CAAC,EAAEI;AAAd,WAAP;AACD;AACF,OAND;AASA;;AAAO,KA9iFG;AA+iFV;;AACA;AAAO,cAAS1K,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIijB,oBAAoB,GAAGjjB,mBAAmB,CAAC,EAAD,CAA9C;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoH,CAAV,EAAaoc,CAAb,EAAgB;AAC/BvR,QAAAA,QAAQ,CAAC7K,CAAD,CAAR;AACA,YAAIrD,QAAQ,CAACyf,CAAD,CAAR,IAAeA,CAAC,CAACpgB,WAAF,KAAkBgE,CAArC,EAAwC,OAAOoc,CAAP;AACxC,YAAIC,iBAAiB,GAAGF,oBAAoB,CAAClR,CAArB,CAAuBjL,CAAvB,CAAxB;AACA,YAAIiX,OAAO,GAAGoF,iBAAiB,CAACpF,OAAhC;AACAA,QAAAA,OAAO,CAACmF,CAAD,CAAP;AACA,eAAOC,iBAAiB,CAAClF,OAAzB;AACD,OAPD;AAUA;;AAAO,KAhkFG;AAikFV;;AACA;AAAO,cAASte,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIojB,YAAY,GAAG,KAAnB;;AAEA,UAAI;AACF,YAAIC,KAAK,GAAG,CAAC,CAAD,EAAIzF,QAAJ,GAAZ;;AACAyF,QAAAA,KAAK,CAAC,QAAD,CAAL,GAAkB,YAAY;AAAED,UAAAA,YAAY,GAAG,IAAf;AAAsB,SAAtD,CAFE,CAGF;;;AACAvW,QAAAA,KAAK,CAACyW,IAAN,CAAWD,KAAX,EAAkB,YAAY;AAAE,gBAAM,CAAN;AAAU,SAA1C;AACD,OALD,CAKE,OAAOhZ,CAAP,EAAU;AAAE;AAAa;;AAE3B1K,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoV,IAAV,EAAgByO,WAAhB,EAA6B;AAC5C,YAAI,CAACA,WAAD,IAAgB,CAACH,YAArB,EAAmC,OAAO,KAAP;AACnC,YAAII,IAAI,GAAG,KAAX;;AACA,YAAI;AACF,cAAIvW,GAAG,GAAG,CAAC,CAAD,CAAV;AACA,cAAIwW,IAAI,GAAGxW,GAAG,CAAC2Q,QAAD,CAAH,EAAX;;AACA6F,UAAAA,IAAI,CAAC1D,IAAL,GAAY,YAAY;AAAE,mBAAO;AAAEhG,cAAAA,IAAI,EAAEyJ,IAAI,GAAG;AAAf,aAAP;AAA+B,WAAzD;;AACAvW,UAAAA,GAAG,CAAC2Q,QAAD,CAAH,GAAgB,YAAY;AAAE,mBAAO6F,IAAP;AAAc,WAA5C;;AACA3O,UAAAA,IAAI,CAAC7H,GAAD,CAAJ;AACD,SAND,CAME,OAAO5C,CAAP,EAAU;AAAE;AAAa;;AAC3B,eAAOmZ,IAAP;AACD,OAXD;AAcA;;AAAO,KA5lFG;AA6lFV;;AACA;AAAO,cAAS7jB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAlmFG;AAmmFV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI0jB,KAAK,GAAG1jB,mBAAmB,CAAC,EAAD,CAA/B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUikB,GAAV,EAAe7O,IAAf,EAAqB;AACpC,YAAInQ,EAAE,GAAG,CAACjD,IAAI,CAACf,MAAL,IAAe,EAAhB,EAAoBgjB,GAApB,KAA4BhjB,MAAM,CAACgjB,GAAD,CAA3C;AACA,YAAIC,GAAG,GAAG,EAAV;AACAA,QAAAA,GAAG,CAACD,GAAD,CAAH,GAAW7O,IAAI,CAACnQ,EAAD,CAAf;AACAe,QAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY4d,KAAK,CAAC,YAAY;AAAE/e,UAAAA,EAAE,CAAC,CAAD,CAAF;AAAQ,SAAvB,CAA9B,EAAwD,QAAxD,EAAkEif,GAAlE,CAAP;AACD,OALD;AAQA;;AAAO,KAlnFG;AAmnFV;;AACA;AAAO,cAASjkB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAI4iB,QAAQ,GAAG7jB,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,UAAI8jB,QAAQ,GAAG3I,sBAAsB,CAAC0I,QAAD,CAArC;;AAEA,eAAS1I,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUsC,IAAV,EAAgB5B,IAAhB,EAAsB;AACtC,YAAI,CAAC4B,IAAL,EAAW;AACT,gBAAM,IAAI+hB,cAAJ,CAAmB,2DAAnB,CAAN;AACD;;AAED,eAAO3jB,IAAI,KAAK,CAAC,OAAOA,IAAP,KAAgB,WAAhB,GAA8B,WAA9B,GAA4C,CAAC,GAAG0jB,QAAQ,WAAZ,EAAsB1jB,IAAtB,CAA7C,MAA8E,QAA9E,IAA0F,OAAOA,IAAP,KAAgB,UAA/G,CAAJ,GAAiIA,IAAjI,GAAwI4B,IAA/I;AACD,OAND;AAQA;;AAAO,KAzoFG;AA0oFV;;AACA;AAAO,cAASrC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAI+iB,SAAS,GAAGhkB,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIikB,UAAU,GAAG9I,sBAAsB,CAAC6I,SAAD,CAAvC;;AAEA,UAAIE,OAAO,GAAGlkB,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAImkB,QAAQ,GAAGhJ,sBAAsB,CAAC+I,OAAD,CAArC;;AAEA,UAAIE,OAAO,GAAG,OAAOD,QAAQ,WAAf,KAA4B,UAA5B,IAA0C,SAAOF,UAAU,WAAjB,MAA8B,QAAxE,GAAmF,UAAUvf,GAAV,EAAe;AAAE,wBAAcA,GAAd;AAAoB,OAAxH,GAA2H,UAAUA,GAAV,EAAe;AAAE,eAAOA,GAAG,IAAI,OAAOyf,QAAQ,WAAf,KAA4B,UAAnC,IAAiDzf,GAAG,CAAC5B,WAAJ,KAAoBqhB,QAAQ,WAA7E,IAAyFzf,GAAG,KAAKyf,QAAQ,WAAR,CAAiB7iB,SAAlH,GAA8H,QAA9H,YAAgJoD,GAAhJ,CAAP;AAA6J,OAAvT;;AAEA,eAASyW,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,OAAOykB,QAAQ,WAAf,KAA4B,UAA5B,IAA0CC,OAAO,CAACH,UAAU,WAAX,CAAP,KAAgC,QAA1E,GAAqF,UAAUvf,GAAV,EAAe;AACpH,eAAO,OAAOA,GAAP,KAAe,WAAf,GAA6B,WAA7B,GAA2C0f,OAAO,CAAC1f,GAAD,CAAzD;AACD,OAFiB,GAEd,UAAUA,GAAV,EAAe;AACjB,eAAOA,GAAG,IAAI,OAAOyf,QAAQ,WAAf,KAA4B,UAAnC,IAAiDzf,GAAG,CAAC5B,WAAJ,KAAoBqhB,QAAQ,WAA7E,IAAyFzf,GAAG,KAAKyf,QAAQ,WAAR,CAAiB7iB,SAAlH,GAA8H,QAA9H,GAAyI,OAAOoD,GAAP,KAAe,WAAf,GAA6B,WAA7B,GAA2C0f,OAAO,CAAC1f,GAAD,CAAlM;AACD,OAJD;AAMA;AAAO,KApqFG;AAqqFV;;AACA;AAAO,cAAS/E,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIqkB,UAAU,GAAGrkB,mBAAmB,CAAC,EAAD,CAAnB,CAAwB8M,MAAxB,CAA+B,QAA/B,EAAyC,WAAzC,CAAjB;;AAEApN,MAAAA,OAAO,CAACqS,CAAR,GAAYpR,MAAM,CAAC2jB,mBAAP,IAA8B,SAASA,mBAAT,CAA6BtS,CAA7B,EAAgC;AACxE,eAAOgI,KAAK,CAAChI,CAAD,EAAIqS,UAAJ,CAAZ;AACD,OAFD;AAKA;;AAAO,KAjrFG;AAkrFV;;AACA;AAAO,cAAS1kB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIukB,GAAG,GAAGvkB,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI6R,WAAW,GAAG7R,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI4R,cAAc,GAAG5R,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIwkB,IAAI,GAAG7jB,MAAM,CAAC8jB,wBAAlB;AAEA/kB,MAAAA,OAAO,CAACqS,CAAR,GAAY/R,mBAAmB,CAAC,CAAD,CAAnB,GAAyBwkB,IAAzB,GAAgC,SAASC,wBAAT,CAAkCzS,CAAlC,EAAqC5L,CAArC,EAAwC;AAClF4L,QAAAA,CAAC,GAAG+O,SAAS,CAAC/O,CAAD,CAAb;AACA5L,QAAAA,CAAC,GAAGyL,WAAW,CAACzL,CAAD,EAAI,IAAJ,CAAf;AACA,YAAIwL,cAAJ,EAAoB,IAAI;AACtB,iBAAO4S,IAAI,CAACxS,CAAD,EAAI5L,CAAJ,CAAX;AACD,SAFmB,CAElB,OAAOiE,CAAP,EAAU;AAAE;AAAa;AAC3B,YAAI7E,GAAG,CAACwM,CAAD,EAAI5L,CAAJ,CAAP,EAAe,OAAOuO,UAAU,CAAC,CAAC4P,GAAG,CAACxS,CAAJ,CAAM3R,IAAN,CAAW4R,CAAX,EAAc5L,CAAd,CAAF,EAAoB4L,CAAC,CAAC5L,CAAD,CAArB,CAAjB;AAChB,OAPD;AAUA;AAAO,KAvsFG;AAwsFV;;AACA;AAAO,cAASzG,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIyjB,eAAe,GAAG1kB,mBAAmB,CAAC,GAAD,CAAzC;;AAEA,UAAI2kB,gBAAgB,GAAGxJ,sBAAsB,CAACuJ,eAAD,CAA7C;;AAEA,UAAIE,OAAO,GAAG5kB,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAI6kB,QAAQ,GAAG1J,sBAAsB,CAACyJ,OAAD,CAArC;;AAEA,UAAIf,QAAQ,GAAG7jB,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,UAAI8jB,QAAQ,GAAG3I,sBAAsB,CAAC0I,QAAD,CAArC;;AAEA,eAAS1I,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUolB,QAAV,EAAoBC,UAApB,EAAgC;AAChD,YAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAC3D,gBAAM,IAAIrT,SAAJ,CAAc,8DAA8D,OAAOqT,UAAP,KAAsB,WAAtB,GAAoC,WAApC,GAAkD,CAAC,GAAGjB,QAAQ,WAAZ,EAAsBiB,UAAtB,CAAhH,CAAd,CAAN;AACD;;AAEDD,QAAAA,QAAQ,CAACxjB,SAAT,GAAqB,CAAC,GAAGujB,QAAQ,WAAZ,EAAsBE,UAAU,IAAIA,UAAU,CAACzjB,SAA/C,EAA0D;AAC7EwB,UAAAA,WAAW,EAAE;AACXsE,YAAAA,KAAK,EAAE0d,QADI;AAEXhkB,YAAAA,UAAU,EAAE,KAFD;AAGX2Y,YAAAA,QAAQ,EAAE,IAHC;AAIX5Y,YAAAA,YAAY,EAAE;AAJH;AADgE,SAA1D,CAArB;AAQA,YAAIkkB,UAAJ,EAAgBJ,gBAAgB,WAAhB,GAA2B,CAAC,GAAGA,gBAAgB,WAApB,EAA8BG,QAA9B,EAAwCC,UAAxC,CAA3B,GAAiFD,QAAQ,CAACE,SAAT,GAAqBD,UAAtG;AACjB,OAdD;AAgBA;;AAAO,KA9uFG;AA+uFV;;AACA;AAAO,cAASplB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA1H,MAAAA,OAAO,CAACulB,gBAAR,GAA2BvlB,OAAO,CAACwlB,cAAR,GAAyBxlB,OAAO,CAACylB,cAAR,GAAyBzlB,OAAO,CAAC0lB,WAAR,GAAsB1lB,OAAO,CAAC2lB,SAAR,GAAoB3lB,OAAO,CAAC4lB,cAAR,GAAyB5lB,OAAO,CAAC6lB,UAAR,GAAqB1e,SAArK;;AAEA,UAAI2e,KAAK,GAAGxlB,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAIylB,MAAM,GAAGtK,sBAAsB,CAACqK,KAAD,CAAnC;;AAEA,UAAIE,eAAe,GAAG1lB,mBAAmB,CAAC,GAAD,CAAzC;;AAEA,UAAI2lB,eAAe,GAAGxK,sBAAsB,CAACuK,eAAD,CAA5C;;AAEA,UAAIE,MAAM,GAAG5lB,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAI6lB,OAAO,GAAG1K,sBAAsB,CAACyK,MAAD,CAApC;;AAEA,eAASzK,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI6gB,UAAU,GAAG7lB,OAAO,CAAC6lB,UAAR,GAAqB,SAASA,UAAT,GAAsB;AAC1D,YAAIO,MAAM,GAAG9gB,SAAS,CAACJ,MAAV,GAAmB,CAAnB,IAAwBI,SAAS,CAAC,CAAD,CAAT,KAAiB6B,SAAzC,GAAqD7B,SAAS,CAAC,CAAD,CAA9D,GAAoElD,MAAM,CAACikB,QAAP,CAAgBD,MAAjG;AAEA,YAAI,CAACA,MAAL,EAAa,OAAO,EAAP;AACb,YAAIE,WAAW,GAAGF,MAAM,CAAC,CAAD,CAAN,KAAc,GAAd,GAAoBA,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAApB,GAA0CH,MAA5D;AACA,YAAII,KAAK,GAAG,EAAZ;AACAF,QAAAA,WAAW,CAACxd,KAAZ,CAAkB,GAAlB,EAAuB/D,OAAvB,CAA+B,UAAU0hB,QAAV,EAAoB;AACjD,cAAIC,eAAe,GAAGD,QAAQ,CAAC3d,KAAT,CAAe,GAAf,CAAtB;AAAA,cACI6d,gBAAgB,GAAG,CAAC,GAAGV,eAAe,WAAnB,EAA6BS,eAA7B,EAA8C,CAA9C,CADvB;AAAA,cAEIvhB,GAAG,GAAGwhB,gBAAgB,CAAC,CAAD,CAF1B;AAAA,cAGIjf,KAAK,GAAGif,gBAAgB,CAAC,CAAD,CAH5B;AAIA;;;AAGA,cAAIxhB,GAAJ,EAASqhB,KAAK,CAACI,kBAAkB,CAACzhB,GAAD,CAAnB,CAAL,GAAiCyhB,kBAAkB,CAAClf,KAAD,CAAnD;AACV,SATD;AAWA,eAAO8e,KAAP;AACD,OAlBD;;AAoBA,UAAIZ,cAAc,GAAG5lB,OAAO,CAAC4lB,cAAR,GAAyB,SAASA,cAAT,CAAwBY,KAAxB,EAA+B;AAC3E,YAAIF,WAAW,GAAG,CAAC,GAAGP,MAAM,WAAV,EAAoBS,KAApB,EAA2B1Z,GAA3B,CAA+B,UAAU3H,GAAV,EAAe;AAC9D,iBAAOA,GAAG,GAAG,GAAN,GAAY0hB,kBAAkB,CAACL,KAAK,CAACrhB,GAAD,CAAL,IAAc,EAAf,CAArC;AACD,SAFiB,EAEf2hB,IAFe,CAEV,GAFU,CAAlB;AAGA,eAAOR,WAAP;AACD,OALD;;AAOA,UAAIX,SAAS,GAAG3lB,OAAO,CAAC2lB,SAAR,GAAoBQ,OAAO,WAAP,CAAgB/I,MAAhB,CAAuB;AACzD2J,QAAAA,OAAO,EAAE;AACP,oBAAU;AADH;AADgD,OAAvB,CAApC;;AAMA,UAAIrB,WAAW,GAAG1lB,OAAO,CAAC0lB,WAAR,GAAsBS,OAAO,WAAP,CAAgB/I,MAAhB,CAAuB;AAC7D4J,QAAAA,OAAO,EAAE,wBADoD;AAE7DD,QAAAA,OAAO,EAAE;AACP,oBAAU;AADH;AAFoD,OAAvB,CAAxC;;AAOA,UAAItB,cAAc,GAAGzlB,OAAO,CAACylB,cAAR,GAAyB,SAASA,cAAT,CAAwB3kB,IAAxB,EAA8BmmB,OAA9B,EAAuC;AACnF;AACAA,QAAAA,OAAO,KAAKA,OAAO,GAAG,SAAf,CAAP;AACA;;AACA,YAAIC,EAAE,GAAG9kB,MAAM,CAAC0C,QAAP,CAAgBqiB,aAAhB,CAA8B,iBAAiBrmB,IAAjB,GAAwB,KAAtD,CAAT;AACA;;AACA,eAAOomB,EAAE,IAAIA,EAAE,CAACE,YAAH,CAAgBH,OAAhB,CAAb;AACD,OAPD;;AASA,UAAIzB,cAAc,GAAGxlB,OAAO,CAACwlB,cAAR,GAAyB,SAASA,cAAT,CAAwB6B,GAAxB,EAA6B;AACzE,YAAIC,GAAG,GAAG,SAAV;;AACA,YAAID,GAAG,CAACE,QAAJ,IAAgBF,GAAG,CAACE,QAAJ,CAAazE,IAA7B,IAAqCuE,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB0E,OAA3D,EAAoE;AAClEF,UAAAA,GAAG,IAAID,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB0E,OAAlB,GAA4B,IAAnC;AACAH,UAAAA,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB2E,MAAlB,KAA6BH,GAAG,IAAID,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB2E,MAAlB,CAAyB3a,GAAzB,CAA6B,UAAUnC,CAAV,EAAa;AAC5E,mBAAOA,CAAC,CAAC6c,OAAT;AACD,WAFmC,EAEjCV,IAFiC,CAE5B,IAF4B,CAApC;AAGD,SALD,MAKO;AACLQ,UAAAA,GAAG,IAAID,GAAG,CAACG,OAAX;AACD;;AACD,eAAOF,GAAP;AACD,OAXD;;AAaA,UAAI/B,gBAAgB,GAAGvlB,OAAO,CAACulB,gBAAR,GAA2B,SAASA,gBAAT,CAA0BhX,OAA1B,EAAmC;AACnF,aAAK,IAAImZ,IAAI,GAAGpiB,SAAS,CAACJ,MAArB,EAA6BqK,SAAS,GAAGpC,KAAK,CAACua,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAvB,CAA9C,EAAyEC,IAAI,GAAG,CAArF,EAAwFA,IAAI,GAAGD,IAA/F,EAAqGC,IAAI,EAAzG,EAA6G;AAC3GpY,UAAAA,SAAS,CAACoY,IAAI,GAAG,CAAR,CAAT,GAAsBriB,SAAS,CAACqiB,IAAD,CAA/B;AACD;AAED;;;AACA,YAAIC,GAAG,GAAG,KAAV;AACA;;AACA,YAAI,OAAOrZ,OAAO,CAACgB,SAAf,KAA6B,WAAjC,EAA8C,OAAO,KAAP;AAC9C;;AACA,YAAIsY,OAAO,GAAGtZ,OAAO,CAACgB,SAAR,CAAkBzG,KAAlB,CAAwB,GAAxB,CAAd;AACA;;AACAyG,QAAAA,SAAS,CAACxK,OAAV,CAAkB,UAAUnE,CAAV,EAAaJ,CAAb,EAAgB;AAChC;AACAonB,UAAAA,GAAG,GAAGA,GAAG,IAAIC,OAAO,CAAC1I,OAAR,CAAgBve,CAAhB,KAAsB,CAAnC;AACD,SAHD;AAIA;;AACA,YAAIgnB,GAAJ,EAAS,OAAOA,GAAP;AACT;;AACA,eAAOrZ,OAAO,CAACtC,UAAR,IAAsBsZ,gBAAgB,CAAChX,OAAO,CAACtC,UAAT,EAAqBsD,SAArB,CAA7C;AACD,OApBD;AAsBA;;AAAO,KA51FG;AA61FV;;AACA;AAAO,cAAStP,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS8C,IAAT,CAAcmC,EAAd,EAAkBU,OAAlB,EAA2B;AAC1C,eAAO,SAASgH,IAAT,GAAgB;AACrB,cAAIsB,IAAI,GAAG,IAAId,KAAJ,CAAU7H,SAAS,CAACJ,MAApB,CAAX;;AACA,eAAK,IAAI1E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyN,IAAI,CAAC/I,MAAzB,EAAiC1E,CAAC,EAAlC,EAAsC;AACpCyN,YAAAA,IAAI,CAACzN,CAAD,CAAJ,GAAU8E,SAAS,CAAC9E,CAAD,CAAnB;AACD;;AACD,iBAAOyE,EAAE,CAACoC,KAAH,CAAS1B,OAAT,EAAkBsI,IAAlB,CAAP;AACD,SAND;AAOD,OARD;AAWA;;AAAO,KA92FG;AA+2FV;;AACA;AAAO,cAAShO,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEA,eAASynB,MAAT,CAAgB9kB,GAAhB,EAAqB;AACnB,eAAO4jB,kBAAkB,CAAC5jB,GAAD,CAAlB,CACLyB,OADK,CACG,OADH,EACY,GADZ,EAELA,OAFK,CAEG,OAFH,EAEY,GAFZ,EAGLA,OAHK,CAGG,MAHH,EAGW,GAHX,EAILA,OAJK,CAIG,OAJH,EAIY,GAJZ,EAKLA,OALK,CAKG,MALH,EAKW,GALX,EAMLA,OANK,CAMG,OANH,EAMY,GANZ,EAOLA,OAPK,CAOG,OAPH,EAOY,GAPZ,CAAP;AAQD;AAED;;;;;;;;;AAOAzE,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASgoB,QAAT,CAAkBC,GAAlB,EAAuBC,MAAvB,EAA+BC,gBAA/B,EAAiD;AAChE;AACA,YAAI,CAACD,MAAL,EAAa;AACX,iBAAOD,GAAP;AACD;;AAED,YAAIG,gBAAJ;;AACA,YAAID,gBAAJ,EAAsB;AACpBC,UAAAA,gBAAgB,GAAGD,gBAAgB,CAACD,MAAD,CAAnC;AACD,SAFD,MAEO,IAAIJ,KAAK,CAACxjB,iBAAN,CAAwB4jB,MAAxB,CAAJ,EAAqC;AAC1CE,UAAAA,gBAAgB,GAAGF,MAAM,CAACnlB,QAAP,EAAnB;AACD,SAFM,MAEA;AACL,cAAIslB,KAAK,GAAG,EAAZ;AAEAP,UAAAA,KAAK,CAAC/iB,OAAN,CAAcmjB,MAAd,EAAsB,SAASI,SAAT,CAAmBrlB,GAAnB,EAAwBkC,GAAxB,EAA6B;AACjD,gBAAIlC,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,WAAnC,EAAgD;AAC9C;AACD;;AAED,gBAAI6kB,KAAK,CAAC9kB,OAAN,CAAcC,GAAd,CAAJ,EAAwB;AACtBkC,cAAAA,GAAG,GAAGA,GAAG,GAAG,IAAZ;AACD,aAFD,MAEO;AACLlC,cAAAA,GAAG,GAAG,CAACA,GAAD,CAAN;AACD;;AAED6kB,YAAAA,KAAK,CAAC/iB,OAAN,CAAc9B,GAAd,EAAmB,SAASslB,UAAT,CAAoBhe,CAApB,EAAuB;AACxC,kBAAIud,KAAK,CAAC9jB,MAAN,CAAauG,CAAb,CAAJ,EAAqB;AACnBA,gBAAAA,CAAC,GAAGA,CAAC,CAACie,WAAF,EAAJ;AACD,eAFD,MAEO,IAAIV,KAAK,CAAC/jB,QAAN,CAAewG,CAAf,CAAJ,EAAuB;AAC5BA,gBAAAA,CAAC,GAAGke,IAAI,CAACC,SAAL,CAAene,CAAf,CAAJ;AACD;;AACD8d,cAAAA,KAAK,CAAC1Z,IAAN,CAAWoZ,MAAM,CAAC5iB,GAAD,CAAN,GAAc,GAAd,GAAoB4iB,MAAM,CAACxd,CAAD,CAArC;AACD,aAPD;AAQD,WAnBD;AAqBA6d,UAAAA,gBAAgB,GAAGC,KAAK,CAACvB,IAAN,CAAW,GAAX,CAAnB;AACD;;AAED,YAAIsB,gBAAJ,EAAsB;AACpB,cAAIO,aAAa,GAAGV,GAAG,CAAC9I,OAAJ,CAAY,GAAZ,CAApB;;AACA,cAAIwJ,aAAa,KAAK,CAAC,CAAvB,EAA0B;AACxBV,YAAAA,GAAG,GAAGA,GAAG,CAACxP,KAAJ,CAAU,CAAV,EAAakQ,aAAb,CAAN;AACD;;AAEDV,UAAAA,GAAG,IAAI,CAACA,GAAG,CAAC9I,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAAtB,GAA0B,GAA1B,GAAgC,GAAjC,IAAwCiJ,gBAA/C;AACD;;AAED,eAAOH,GAAP;AACD,OAhDD;AAmDA;;AAAO,KA57FG;AA67FV;;AACA;AAAO,cAAShoB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS4oB,QAAT,CAAkBlhB,KAAlB,EAAyB;AACxC,eAAO,CAAC,EAAEA,KAAK,IAAIA,KAAK,CAACmhB,UAAjB,CAAR;AACD,OAFD;AAKA;;AAAO,KAx8FG;AAy8FV;;AACA;AAAO,cAAS5oB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAE9C,YAAImgB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,YAAIwoB,mBAAmB,GAAGxoB,mBAAmB,CAAC,GAAD,CAA7C;;AAEA,YAAIyoB,oBAAoB,GAAG;AACzB,0BAAgB;AADS,SAA3B;;AAIA,iBAASC,qBAAT,CAA+BjC,OAA/B,EAAwCrf,KAAxC,EAA+C;AAC7C,cAAI,CAACogB,KAAK,CAAC5kB,WAAN,CAAkB6jB,OAAlB,CAAD,IAA+Be,KAAK,CAAC5kB,WAAN,CAAkB6jB,OAAO,CAAC,cAAD,CAAzB,CAAnC,EAA+E;AAC7EA,YAAAA,OAAO,CAAC,cAAD,CAAP,GAA0Brf,KAA1B;AACD;AACF;;AAED,iBAASuhB,iBAAT,GAA6B;AAC3B,cAAIC,OAAJ;;AACA,cAAI,OAAOC,cAAP,KAA0B,WAA9B,EAA2C;AACzC;AACAD,YAAAA,OAAO,GAAG5oB,mBAAmB,CAAC,EAAD,CAA7B;AACD,WAHD,MAGO,IAAI,OAAOqH,OAAP,KAAmB,WAAnB,IAAkC1G,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+BiH,OAA/B,MAA4C,kBAAlF,EAAsG;AAC3G;AACAuhB,YAAAA,OAAO,GAAG5oB,mBAAmB,CAAC,EAAD,CAA7B;AACD;;AACD,iBAAO4oB,OAAP;AACD;;AAED,YAAIE,QAAQ,GAAG;AACbF,UAAAA,OAAO,EAAED,iBAAiB,EADb;AAGbI,UAAAA,gBAAgB,EAAE,CAAC,SAASA,gBAAT,CAA0BvG,IAA1B,EAAgCiE,OAAhC,EAAyC;AAC1D+B,YAAAA,mBAAmB,CAAC/B,OAAD,EAAU,QAAV,CAAnB;AACA+B,YAAAA,mBAAmB,CAAC/B,OAAD,EAAU,cAAV,CAAnB;;AACA,gBAAIe,KAAK,CAACxkB,UAAN,CAAiBwf,IAAjB,KACFgF,KAAK,CAACzkB,aAAN,CAAoByf,IAApB,CADE,IAEFgF,KAAK,CAAC3kB,QAAN,CAAe2f,IAAf,CAFE,IAGFgF,KAAK,CAAC1jB,QAAN,CAAe0e,IAAf,CAHE,IAIFgF,KAAK,CAAC7jB,MAAN,CAAa6e,IAAb,CAJE,IAKFgF,KAAK,CAAC5jB,MAAN,CAAa4e,IAAb,CALF,EAME;AACA,qBAAOA,IAAP;AACD;;AACD,gBAAIgF,KAAK,CAACtkB,iBAAN,CAAwBsf,IAAxB,CAAJ,EAAmC;AACjC,qBAAOA,IAAI,CAAClf,MAAZ;AACD;;AACD,gBAAIkkB,KAAK,CAACxjB,iBAAN,CAAwBwe,IAAxB,CAAJ,EAAmC;AACjCkG,cAAAA,qBAAqB,CAACjC,OAAD,EAAU,iDAAV,CAArB;AACA,qBAAOjE,IAAI,CAAC/f,QAAL,EAAP;AACD;;AACD,gBAAI+kB,KAAK,CAAC/jB,QAAN,CAAe+e,IAAf,CAAJ,EAA0B;AACxBkG,cAAAA,qBAAqB,CAACjC,OAAD,EAAU,gCAAV,CAArB;AACA,qBAAO0B,IAAI,CAACC,SAAL,CAAe5F,IAAf,CAAP;AACD;;AACD,mBAAOA,IAAP;AACD,WAxBiB,CAHL;AA6BbwG,UAAAA,iBAAiB,EAAE,CAAC,SAASA,iBAAT,CAA2BxG,IAA3B,EAAiC;AACnD;AACA,gBAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,kBAAI;AACFA,gBAAAA,IAAI,GAAG2F,IAAI,CAAC7R,KAAL,CAAWkM,IAAX,CAAP;AACD,eAFD,CAEE,OAAOnY,CAAP,EAAU;AAAE;AAAc;AAC7B;;AACD,mBAAOmY,IAAP;AACD,WARkB,CA7BN;;AAuCb;;;;AAIAtP,UAAAA,OAAO,EAAE,CA3CI;AA6Cb+V,UAAAA,cAAc,EAAE,YA7CH;AA8CbC,UAAAA,cAAc,EAAE,cA9CH;AAgDbC,UAAAA,gBAAgB,EAAE,CAAC,CAhDN;AAkDbC,UAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBC,MAAxB,EAAgC;AAC9C,mBAAOA,MAAM,IAAI,GAAV,IAAiBA,MAAM,GAAG,GAAjC;AACD;AApDY,SAAf;AAuDAP,QAAAA,QAAQ,CAACrC,OAAT,GAAmB;AACjB6C,UAAAA,MAAM,EAAE;AACN,sBAAU;AADJ;AADS,SAAnB;AAMA9B,QAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,CAAd,EAAyC,SAAS8kB,mBAAT,CAA6BC,MAA7B,EAAqC;AAC5EV,UAAAA,QAAQ,CAACrC,OAAT,CAAiB+C,MAAjB,IAA2B,EAA3B;AACD,SAFD;AAIAhC,QAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,CAAd,EAAwC,SAASglB,qBAAT,CAA+BD,MAA/B,EAAuC;AAC7EV,UAAAA,QAAQ,CAACrC,OAAT,CAAiB+C,MAAjB,IAA2BhC,KAAK,CAAC1iB,KAAN,CAAY2jB,oBAAZ,CAA3B;AACD,SAFD;AAIA9oB,QAAAA,MAAM,CAACD,OAAP,GAAiBopB,QAAjB;AAEA;AAA4B,OAlGA,EAkGC1oB,IAlGD,CAkGMV,OAlGN,EAkGeM,mBAAmB,CAAC,CAAD,CAlGlC,CAAD;AAoG3B;AAAO,KAjjGG;AAkjGV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAI0pB,MAAM,GAAG1pB,mBAAmB,CAAC,GAAD,CAAhC;;AACA,UAAI0nB,QAAQ,GAAG1nB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI2pB,aAAa,GAAG3pB,mBAAmB,CAAC,GAAD,CAAvC;;AACA,UAAI4pB,YAAY,GAAG5pB,mBAAmB,CAAC,GAAD,CAAtC;;AACA,UAAI6pB,eAAe,GAAG7pB,mBAAmB,CAAC,GAAD,CAAzC;;AACA,UAAI8pB,WAAW,GAAG9pB,mBAAmB,CAAC,EAAD,CAArC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASqqB,UAAT,CAAoBC,MAApB,EAA4B;AAC3C,eAAO,IAAIC,OAAJ,CAAY,SAASC,kBAAT,CAA4BnM,OAA5B,EAAqCC,MAArC,EAA6C;AAC9D,cAAImM,WAAW,GAAGH,MAAM,CAACxH,IAAzB;AACA,cAAI4H,cAAc,GAAGJ,MAAM,CAACvD,OAA5B;;AAEA,cAAIe,KAAK,CAACxkB,UAAN,CAAiBmnB,WAAjB,CAAJ,EAAmC;AACjC,mBAAOC,cAAc,CAAC,cAAD,CAArB,CADiC,CACM;AACxC;;AAED,cAAIC,OAAO,GAAG,IAAIxB,cAAJ,EAAd,CAR8D,CAU9D;;AACA,cAAImB,MAAM,CAACM,IAAX,EAAiB;AACf,gBAAIC,QAAQ,GAAGP,MAAM,CAACM,IAAP,CAAYC,QAAZ,IAAwB,EAAvC;AACA,gBAAIC,QAAQ,GAAGR,MAAM,CAACM,IAAP,CAAYE,QAAZ,IAAwB,EAAvC;AACAJ,YAAAA,cAAc,CAACK,aAAf,GAA+B,WAAWC,IAAI,CAACH,QAAQ,GAAG,GAAX,GAAiBC,QAAlB,CAA9C;AACD;;AAED,cAAIG,QAAQ,GAAGhB,aAAa,CAACK,MAAM,CAACtD,OAAR,EAAiBsD,MAAM,CAACrC,GAAxB,CAA5B;AACA0C,UAAAA,OAAO,CAAC1N,IAAR,CAAaqN,MAAM,CAACR,MAAP,CAAcoB,WAAd,EAAb,EAA0ClD,QAAQ,CAACiD,QAAD,EAAWX,MAAM,CAACpC,MAAlB,EAA0BoC,MAAM,CAACnC,gBAAjC,CAAlD,EAAsG,IAAtG,EAlB8D,CAoB9D;;AACAwC,UAAAA,OAAO,CAACnX,OAAR,GAAkB8W,MAAM,CAAC9W,OAAzB,CArB8D,CAuB9D;;AACAmX,UAAAA,OAAO,CAACQ,kBAAR,GAA6B,SAASC,UAAT,GAAsB;AACjD,gBAAI,CAACT,OAAD,IAAYA,OAAO,CAACU,UAAR,KAAuB,CAAvC,EAA0C;AACxC;AACD,aAHgD,CAKjD;AACA;AACA;AACA;;;AACA,gBAAIV,OAAO,CAAChB,MAAR,KAAmB,CAAnB,IAAwB,EAAEgB,OAAO,CAACW,WAAR,IAAuBX,OAAO,CAACW,WAAR,CAAoBnM,OAApB,CAA4B,OAA5B,MAAyC,CAAlE,CAA5B,EAAkG;AAChG;AACD,aAXgD,CAajD;;;AACA,gBAAIoM,eAAe,GAAG,2BAA2BZ,OAA3B,GAAqCT,YAAY,CAACS,OAAO,CAACa,qBAAR,EAAD,CAAjD,GAAqF,IAA3G;AACA,gBAAIC,YAAY,GAAG,CAACnB,MAAM,CAACoB,YAAR,IAAwBpB,MAAM,CAACoB,YAAP,KAAwB,MAAhD,GAAyDf,OAAO,CAACgB,YAAjE,GAAgFhB,OAAO,CAACpD,QAA3G;AACA,gBAAIA,QAAQ,GAAG;AACbzE,cAAAA,IAAI,EAAE2I,YADO;AAEb9B,cAAAA,MAAM,EAAEgB,OAAO,CAAChB,MAFH;AAGbiC,cAAAA,UAAU,EAAEjB,OAAO,CAACiB,UAHP;AAIb7E,cAAAA,OAAO,EAAEwE,eAJI;AAKbjB,cAAAA,MAAM,EAAEA,MALK;AAMbK,cAAAA,OAAO,EAAEA;AANI,aAAf;AASAX,YAAAA,MAAM,CAAC3L,OAAD,EAAUC,MAAV,EAAkBiJ,QAAlB,CAAN,CAzBiD,CA2BjD;;AACAoD,YAAAA,OAAO,GAAG,IAAV;AACD,WA7BD,CAxB8D,CAuD9D;;;AACAA,UAAAA,OAAO,CAACkB,OAAR,GAAkB,SAASC,WAAT,GAAuB;AACvC,gBAAI,CAACnB,OAAL,EAAc;AACZ;AACD;;AAEDrM,YAAAA,MAAM,CAAC8L,WAAW,CAAC,iBAAD,EAAoBE,MAApB,EAA4B,cAA5B,EAA4CK,OAA5C,CAAZ,CAAN,CALuC,CAOvC;;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD,WATD,CAxD8D,CAmE9D;;;AACAA,UAAAA,OAAO,CAACoB,OAAR,GAAkB,SAASC,WAAT,GAAuB;AACvC;AACA;AACA1N,YAAAA,MAAM,CAAC8L,WAAW,CAAC,eAAD,EAAkBE,MAAlB,EAA0B,IAA1B,EAAgCK,OAAhC,CAAZ,CAAN,CAHuC,CAKvC;;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD,WAPD,CApE8D,CA6E9D;;;AACAA,UAAAA,OAAO,CAACsB,SAAR,GAAoB,SAASC,aAAT,GAAyB;AAC3C,gBAAIC,mBAAmB,GAAG,gBAAgB7B,MAAM,CAAC9W,OAAvB,GAAiC,aAA3D;;AACA,gBAAI8W,MAAM,CAAC6B,mBAAX,EAAgC;AAC9BA,cAAAA,mBAAmB,GAAG7B,MAAM,CAAC6B,mBAA7B;AACD;;AACD7N,YAAAA,MAAM,CAAC8L,WAAW,CAAC+B,mBAAD,EAAsB7B,MAAtB,EAA8B,cAA9B,EAChBK,OADgB,CAAZ,CAAN,CAL2C,CAQ3C;;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD,WAVD,CA9E8D,CA0F9D;AACA;AACA;;;AACA,cAAI7C,KAAK,CAACnjB,oBAAN,EAAJ,EAAkC;AAChC,gBAAIynB,OAAO,GAAG9rB,mBAAmB,CAAC,GAAD,CAAjC,CADgC,CAGhC;;;AACA,gBAAI+rB,SAAS,GAAG,CAAC/B,MAAM,CAACgC,eAAP,IAA0BnC,eAAe,CAACc,QAAD,CAA1C,KAAyDX,MAAM,CAACf,cAAhE,GACd6C,OAAO,CAACG,IAAR,CAAajC,MAAM,CAACf,cAApB,CADc,GAEdpiB,SAFF;;AAIA,gBAAIklB,SAAJ,EAAe;AACb3B,cAAAA,cAAc,CAACJ,MAAM,CAACd,cAAR,CAAd,GAAwC6C,SAAxC;AACD;AACF,WAxG6D,CA0G9D;;;AACA,cAAI,sBAAsB1B,OAA1B,EAAmC;AACjC7C,YAAAA,KAAK,CAAC/iB,OAAN,CAAc2lB,cAAd,EAA8B,SAAS8B,gBAAT,CAA0BvpB,GAA1B,EAA+BkC,GAA/B,EAAoC;AAChE,kBAAI,OAAOslB,WAAP,KAAuB,WAAvB,IAAsCtlB,GAAG,CAACwG,WAAJ,OAAsB,cAAhE,EAAgF;AAC9E;AACA,uBAAO+e,cAAc,CAACvlB,GAAD,CAArB;AACD,eAHD,MAGO;AACL;AACAwlB,gBAAAA,OAAO,CAAC6B,gBAAR,CAAyBrnB,GAAzB,EAA8BlC,GAA9B;AACD;AACF,aARD;AASD,WArH6D,CAuH9D;;;AACA,cAAI,CAAC6kB,KAAK,CAAC5kB,WAAN,CAAkBonB,MAAM,CAACgC,eAAzB,CAAL,EAAgD;AAC9C3B,YAAAA,OAAO,CAAC2B,eAAR,GAA0B,CAAC,CAAChC,MAAM,CAACgC,eAAnC;AACD,WA1H6D,CA4H9D;;;AACA,cAAIhC,MAAM,CAACoB,YAAX,EAAyB;AACvB,gBAAI;AACFf,cAAAA,OAAO,CAACe,YAAR,GAAuBpB,MAAM,CAACoB,YAA9B;AACD,aAFD,CAEE,OAAO/gB,CAAP,EAAU;AACV;AACA;AACA,kBAAI2f,MAAM,CAACoB,YAAP,KAAwB,MAA5B,EAAoC;AAClC,sBAAM/gB,CAAN;AACD;AACF;AACF,WAvI6D,CAyI9D;;;AACA,cAAI,OAAO2f,MAAM,CAACmC,kBAAd,KAAqC,UAAzC,EAAqD;AACnD9B,YAAAA,OAAO,CAACvH,gBAAR,CAAyB,UAAzB,EAAqCkH,MAAM,CAACmC,kBAA5C;AACD,WA5I6D,CA8I9D;;;AACA,cAAI,OAAOnC,MAAM,CAACoC,gBAAd,KAAmC,UAAnC,IAAiD/B,OAAO,CAACgC,MAA7D,EAAqE;AACnEhC,YAAAA,OAAO,CAACgC,MAAR,CAAevJ,gBAAf,CAAgC,UAAhC,EAA4CkH,MAAM,CAACoC,gBAAnD;AACD;;AAED,cAAIpC,MAAM,CAACsC,WAAX,EAAwB;AACtB;AACAtC,YAAAA,MAAM,CAACsC,WAAP,CAAmBrO,OAAnB,CAA2BsO,IAA3B,CAAgC,SAASC,UAAT,CAAoBC,MAApB,EAA4B;AAC1D,kBAAI,CAACpC,OAAL,EAAc;AACZ;AACD;;AAEDA,cAAAA,OAAO,CAACqC,KAAR;AACA1O,cAAAA,MAAM,CAACyO,MAAD,CAAN,CAN0D,CAO1D;;AACApC,cAAAA,OAAO,GAAG,IAAV;AACD,aATD;AAUD;;AAED,cAAIF,WAAW,KAAKtjB,SAApB,EAA+B;AAC7BsjB,YAAAA,WAAW,GAAG,IAAd;AACD,WAnK6D,CAqK9D;;;AACAE,UAAAA,OAAO,CAACsC,IAAR,CAAaxC,WAAb;AACD,SAvKM,CAAP;AAwKD,OAzKD;AA4KA;;AAAO,KA5uGG;AA6uGV;;AACA;AAAO,cAASxqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI4sB,YAAY,GAAG5sB,mBAAmB,CAAC,GAAD,CAAtC;AAEA;;;;;;;;;;;;AAUAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASoqB,WAAT,CAAqB5C,OAArB,EAA8B8C,MAA9B,EAAsC6C,IAAtC,EAA4CxC,OAA5C,EAAqDpD,QAArD,EAA+D;AAC9E,YAAI6F,KAAK,GAAG,IAAIlgB,KAAJ,CAAUsa,OAAV,CAAZ;AACA,eAAO0F,YAAY,CAACE,KAAD,EAAQ9C,MAAR,EAAgB6C,IAAhB,EAAsBxC,OAAtB,EAA+BpD,QAA/B,CAAnB;AACD,OAHD;AAMA;;AAAO,KArwGG;AAswGV;;AACA;AAAO,cAAStnB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;AAEA;;;;;;;;;;AAQAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASqtB,WAAT,CAAqBC,OAArB,EAA8BC,OAA9B,EAAuC;AACtD;AACAA,QAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,YAAIjD,MAAM,GAAG,EAAb;AAEA,YAAIkD,oBAAoB,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,MAA5B,CAA3B;AACA,YAAIC,uBAAuB,GAAG,CAAC,SAAD,EAAY,MAAZ,EAAoB,OAApB,CAA9B;AACA,YAAIC,oBAAoB,GAAG,CACzB,SADyB,EACd,KADc,EACP,kBADO,EACa,mBADb,EACkC,kBADlC,EAEzB,SAFyB,EAEd,iBAFc,EAEK,SAFL,EAEgB,cAFhB,EAEgC,gBAFhC,EAGzB,gBAHyB,EAGP,kBAHO,EAGa,oBAHb,EAIzB,kBAJyB,EAIL,gBAJK,EAIa,cAJb,EAI6B,WAJ7B,EAKzB,YALyB,EAKX,aALW,EAKI,YALJ,CAA3B;AAQA5F,QAAAA,KAAK,CAAC/iB,OAAN,CAAcyoB,oBAAd,EAAoC,SAASG,gBAAT,CAA0BC,IAA1B,EAAgC;AAClE,cAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD;AACF,SAJD;AAMA9F,QAAAA,KAAK,CAAC/iB,OAAN,CAAc0oB,uBAAd,EAAuC,SAASI,mBAAT,CAA6BD,IAA7B,EAAmC;AACxE,cAAI9F,KAAK,CAAC/jB,QAAN,CAAewpB,OAAO,CAACK,IAAD,CAAtB,CAAJ,EAAmC;AACjCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAe9F,KAAK,CAACviB,SAAN,CAAgB+nB,OAAO,CAACM,IAAD,CAAvB,EAA+BL,OAAO,CAACK,IAAD,CAAtC,CAAf;AACD,WAFD,MAEO,IAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD,WAFM,MAEA,IAAI9F,KAAK,CAAC/jB,QAAN,CAAeupB,OAAO,CAACM,IAAD,CAAtB,CAAJ,EAAmC;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAe9F,KAAK,CAACviB,SAAN,CAAgB+nB,OAAO,CAACM,IAAD,CAAvB,CAAf;AACD,WAFM,MAEA,IAAI,OAAON,OAAO,CAACM,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeN,OAAO,CAACM,IAAD,CAAtB;AACD;AACF,SAVD;AAYA9F,QAAAA,KAAK,CAAC/iB,OAAN,CAAc2oB,oBAAd,EAAoC,SAASI,gBAAT,CAA0BF,IAA1B,EAAgC;AAClE,cAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD,WAFD,MAEO,IAAI,OAAON,OAAO,CAACM,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeN,OAAO,CAACM,IAAD,CAAtB;AACD;AACF,SAND;AAQA,YAAIG,SAAS,GAAGP,oBAAoB,CACjCpgB,MADa,CACNqgB,uBADM,EAEbrgB,MAFa,CAENsgB,oBAFM,CAAhB;AAIA,YAAIM,SAAS,GAAG/sB,MAAM,CACnBuZ,IADa,CACR+S,OADQ,EAEbU,MAFa,CAEN,SAASC,eAAT,CAAyB/oB,GAAzB,EAA8B;AACpC,iBAAO4oB,SAAS,CAAC5O,OAAV,CAAkBha,GAAlB,MAA2B,CAAC,CAAnC;AACD,SAJa,CAAhB;AAMA2iB,QAAAA,KAAK,CAAC/iB,OAAN,CAAcipB,SAAd,EAAyB,SAASG,yBAAT,CAAmCP,IAAnC,EAAyC;AAChE,cAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD,WAFD,MAEO,IAAI,OAAON,OAAO,CAACM,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeN,OAAO,CAACM,IAAD,CAAtB;AACD;AACF,SAND;AAQA,eAAOtD,MAAP;AACD,OA5DD;AA+DA;;AAAO,KAr1GG;AAs1GV;;AACA;AAAO,cAASrqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;AAMA,eAAS8tB,MAAT,CAAgB5G,OAAhB,EAAyB;AACvB,aAAKA,OAAL,GAAeA,OAAf;AACD;;AAED4G,MAAAA,MAAM,CAACxsB,SAAP,CAAiBmB,QAAjB,GAA4B,SAASA,QAAT,GAAoB;AAC9C,eAAO,YAAY,KAAKykB,OAAL,GAAe,OAAO,KAAKA,OAA3B,GAAqC,EAAjD,CAAP;AACD,OAFD;;AAIA4G,MAAAA,MAAM,CAACxsB,SAAP,CAAiBinB,UAAjB,GAA8B,IAA9B;AAEA5oB,MAAAA,MAAM,CAACD,OAAP,GAAiBouB,MAAjB;AAGA;AAAO,KA/2GG;AAg3GV;;AACA;AAAO,cAASnuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIxR,GAAG,GAAGwR,IAAI,CAACxR,GAAf;AAAA,YACIxN,SAAS,GAAGgf,IAAI,CAAChf,SADrB;AAAA,YAEIif,GAAG,GAAGD,IAAI,CAACC,GAFf;AAAA,YAGIC,OAAO,GAAGF,IAAI,CAACE,OAHnB;AAIA,eAAOH,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,UAAAA,SAAS,EAAE,eAAeA;AAA5B,SAFK,EAGL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AAAE8U,UAAAA,GAAG,EAAEA,GAAP;AAAYyR,UAAAA,GAAG,EAAE,MAAMA,GAAvB;AAA4BC,UAAAA,OAAO,EAAEA;AAArC,SAArC,CAHK,CAAP;AAKD,OAVD;AAYA;;AAAO,KA54GG;AA64GV;;AACA;AAAO,cAASxuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIhf,SAAS,GAAGgf,IAAI,CAAChf,SAArB;AAAA,YACImf,IAAI,GAAGH,IAAI,CAACG,IADhB;AAAA,YAEI5tB,IAAI,GAAGytB,IAAI,CAACztB,IAFhB;AAGA,eAAOwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,MADK,EAEL;AAAEsH,UAAAA,SAAS,EAAE,YAAYA;AAAzB,SAFK,EAGL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,MAA9B,EAAsC;AAAEsH,UAAAA,SAAS,EAAE,QAAb;AAAuBof,UAAAA,uBAAuB,EAAE;AAClFC,YAAAA,MAAM,EAAEtuB,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,OAAOQ,IAAP,GAAc,MAAvC;AAD0E;AAAhD,SAAtC,CAHK,EAML4tB,IAAI,IAAIJ,OAAO,WAAP,CAAgBrmB,aAAhB,CACN,MADM,EAEN;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAFM,EAGNmf,IAHM,CANH,CAAP;AAYD,OAhBD;AAkBA;;AAAO,KA/6GG;AAg7GV;;AACA;AAAO,cAASzuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIuuB,gBAAgB,GAAGvuB,mBAAmB,CAAC,EAAD,CAA1C;;AAEA,UAAIwuB,gBAAgB,GAAGrT,sBAAsB,CAACoT,gBAAD,CAA7C;;AAEA,UAAIE,aAAa,GAAGzuB,mBAAmB,CAAC,EAAD,CAAvC;;AAEA,UAAI0uB,aAAa,GAAGvT,sBAAsB,CAACsT,aAAD,CAA1C;;AAEA,UAAIV,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,UAAIY,SAAS,GAAG3uB,mBAAmB,CAAC,CAAD,CAAnC;;AAEAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AAEA,UAAI4uB,OAAO,GAAG5uB,mBAAmB,CAAC,EAAD,CAAjC;;AAEA,UAAI6uB,QAAQ,GAAG1T,sBAAsB,CAACyT,OAAD,CAArC;;AAEA,eAASzT,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAIoqB,MAAM,GAAG,YAAY;AACvB,iBAASA,MAAT,GAAkB;AAChB,cAAInY,OAAO,GAAG3R,SAAS,CAACJ,MAAV,GAAmB,CAAnB,IAAwBI,SAAS,CAAC,CAAD,CAAT,KAAiB6B,SAAzC,GAAqD7B,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAlF;AACA,WAAC,GAAGwpB,gBAAgB,WAApB,EAA8B,IAA9B,EAAoCM,MAApC;AAEA,eAAKnY,OAAL,GAAeA,OAAf;AACD;;AAED,SAAC,GAAG+X,aAAa,WAAjB,EAA2BI,MAA3B,EAAmC,CAAC;AAClCjqB,UAAAA,GAAG,EAAE,QAD6B;AAElCuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,CAAgBwD,SAAhB,EAA2Bb,QAA3B,EAAqC;AAC1C,gBAAI4C,IAAI,GAAG,IAAX;AACA/B,YAAAA,SAAS,GAAGA,SAAS,IAAI,KAAKuK,OAAL,CAAavK,SAAtC;AAEA,gBAAI,CAACA,SAAL,EAAgB,MAAM,IAAIQ,KAAJ,CAAU,4BAA4BR,SAAtC,CAAN;;AAEhB,gBAAI,EAAEA,SAAS,YAAY2iB,WAAvB,CAAJ,EAAyC;AACvC5gB,cAAAA,IAAI,GAAGrM,MAAM,CAAC0C,QAAP,CAAgBwqB,cAAhB,CAA+B5iB,SAA/B,CAAP;AACA,kBAAI,CAAC+B,IAAL,EAAW,MAAM,IAAIvB,KAAJ,CAAU,0DAA0DR,SAApE,CAAN;AACZ,aAHD,MAGO;AACL+B,cAAAA,IAAI,GAAG/B,SAAP;AACD;;AAED,gBAAI,CAACb,QAAL,EAAe;AACbA,cAAAA,QAAQ,GAAG,SAASA,QAAT,GAAoB,CAAE,CAAjC;AACD;;AAED,mBAAO,CAAC,GAAGojB,SAAS,CAAC/lB,MAAd,EAAsBolB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BknB,QAAQ,WAAtC,EAAgD;AAAElY,cAAAA,OAAO,EAAE,KAAKA;AAAhB,aAAhD,CAAtB,EAAkGxI,IAAlG,EAAwG5C,QAAxG,CAAP;AACD;AApBiC,SAAD,CAAnC;AAsBA,eAAOujB,MAAP;AACD,OA/BY,EAAb;;AAiCAnvB,MAAAA,MAAM,CAACD,OAAP,GAAiBovB,MAAjB;AAEA;AAAO,KA/+GG;AAg/GV;;AACA;AAAO,cAASnvB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,EAAD,CAAhC;AAAsCiB,QAAAA,UAAU,EAAE;AAAlD,OAAjB;AAEA;AAAO,KAr/GG;AAs/GV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACA,UAAIivB,OAAO,GAAGjvB,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAArC;;AACAhB,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASkB,cAAT,CAAwB6Q,EAAxB,EAA4B5M,GAA5B,EAAiCqqB,IAAjC,EAAuC;AACtD,eAAOD,OAAO,CAACruB,cAAR,CAAuB6Q,EAAvB,EAA2B5M,GAA3B,EAAgCqqB,IAAhC,CAAP;AACD,OAFD;AAKA;;AAAO,KAhgHG;AAigHV;;AACA;AAAO,cAASvvB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC,CAFsD,CAGtD;;;AACA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC9F,mBAAmB,CAAC,CAAD,CAA7C,EAAkD,QAAlD,EAA4D;AAAEY,QAAAA,cAAc,EAAEZ,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R;AAAzC,OAA5D,CAAP;AAGA;AAAO,KAzgHG;AA0gHV;;AACA;AAAO,cAASpS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;AAO/C,YAAIA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,cAAI0lB,OAAO,GAAGnvB,mBAAmB,CAAC,EAAD,CAAjC,CADyC,CAGzC;AACA;;;AACA,cAAIovB,mBAAmB,GAAG,IAA1B;AACAzvB,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwBmvB,OAAO,CAACE,SAAhC,EAA2CD,mBAA3C,CAAjB;AACD,SAPD,MAOO;AACL;AACA;AACAzvB,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,EAAjB;AACD;AAED;;AAA4B,OApBA,EAoBCI,IApBD,CAoBMV,OApBN,EAoBeM,mBAAmB,CAAC,CAAD,CApBlC,CAAD;AAsB3B;AAAO,KAniHG;AAoiHV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;;;;AASAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA8B,YAA9B,EAA2C;AAAC0H,QAAAA,KAAK,EAAC,CAAC;AAAR,OAA3C;AACA,UAAIhC,CAAC,GAAC,eAAa,OAAO/C,MAApB,IAA4BA,MAAM,OAAxC;AAAA,UAA6C/B,CAAC,GAAC8E,CAAC,GAAC/C,MAAM,OAAN,CAAW,eAAX,CAAD,GAA6B,KAA7E;AAAA,UAAmF9B,CAAC,GAAC6E,CAAC,GAAC/C,MAAM,OAAN,CAAW,cAAX,CAAD,GAA4B,KAAlH;AAAA,UAAwHgI,CAAC,GAACjF,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAAzJ;AAAA,UAA+J0P,CAAC,GAAC3M,CAAC,GAAC/C,MAAM,OAAN,CAAW,mBAAX,CAAD,GAAiC,KAAnM;AAAA,UAAyMitB,CAAC,GAAClqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAA1O;AAAA,UAAgPktB,CAAC,GAACnqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAAjR;AAAA,UAAuRmtB,CAAC,GAACpqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,eAAX,CAAD,GAA6B,KAAvT;AAAA,UAA6TlC,CAAC,GAACiF,CAAC,GAAC/C,MAAM,OAAN,CAAW,kBAAX,CAAD,GAAgC,KAAhW;AAAA,UAAsWhC,CAAC,GAAC+E,CAAC,GAAC/C,MAAM,OAAN,CAAW,uBAAX,CAAD,GAAqC,KAA9Y;AAAA,UAAoZrB,CAAC,GAACoE,CAAC,GAAC/C,MAAM,OAAN,CAAW,mBAAX,CAAD,GAAiC,KAAxb;AAAA,UAA8bb,CAAC,GAAC4D,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAA/d;AAAA,UAAqeotB,CAAC,GAACrqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,qBAAX,CAAD,GACxe,KADA;AAAA,UACMgO,CAAC,GAACjL,CAAC,GAAC/C,MAAM,OAAN,CAAW,YAAX,CAAD,GAA0B,KADnC;AAAA,UACyCqtB,CAAC,GAACtqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,YAAX,CAAD,GAA0B,KADtE;AAAA,UAC4E4H,CAAC,GAAC7E,CAAC,GAAC/C,MAAM,OAAN,CAAW,mBAAX,CAAD,GAAiC,KADhH;AAAA,UACsHstB,CAAC,GAACvqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,iBAAX,CAAD,GAA+B,KADxJ;AAAA,UAC8J6gB,CAAC,GAAC9d,CAAC,GAAC/C,MAAM,OAAN,CAAW,aAAX,CAAD,GAA2B,KAD5L;;AACkM,eAASutB,CAAT,CAAWzqB,CAAX,EAAa;AAAC,YAAG,sBAAkBA,CAAlB,KAAqB,SAAOA,CAA/B,EAAiC;AAAC,cAAI0qB,CAAC,GAAC1qB,CAAC,CAACyE,QAAR;;AAAiB,kBAAOimB,CAAP;AAAU,iBAAKvvB,CAAL;AAAO,sBAAO6E,CAAC,GAACA,CAAC,CAACQ,IAAJ,EAASR,CAAhB;AAAmB,qBAAKhF,CAAL;AAAO,qBAAKE,CAAL;AAAO,qBAAKgK,CAAL;AAAO,qBAAKilB,CAAL;AAAO,qBAAKvd,CAAL;AAAO,qBAAKvQ,CAAL;AAAO,yBAAO2D,CAAP;;AAAS;AAAQ,0BAAOA,CAAC,GAACA,CAAC,IAAEA,CAAC,CAACyE,QAAP,EAAgBzE,CAAvB;AAA0B,yBAAKqqB,CAAL;AAAO,yBAAKxuB,CAAL;AAAO,yBAAK0uB,CAAL;AAAO,yBAAKrf,CAAL;AAAO,yBAAKkf,CAAL;AAAO,6BAAOpqB,CAAP;;AAAS;AAAQ,6BAAO0qB,CAAP;AAA9E;;AAA9E;;AAAsK,iBAAKtvB,CAAL;AAAO,qBAAOsvB,CAAP;AAA9L;AAAwM;AAAC;;AAAA,eAASC,CAAT,CAAW3qB,CAAX,EAAa;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO9E,CAAd;AAAgB;;AAC1eX,MAAAA,OAAO,CAACqwB,MAAR,GAAeH,CAAf;AAAiBlwB,MAAAA,OAAO,CAACswB,SAAR,GAAkB7vB,CAAlB;AAAoBT,MAAAA,OAAO,CAACuwB,cAAR,GAAuB5vB,CAAvB;AAAyBX,MAAAA,OAAO,CAACwwB,eAAR,GAAwBV,CAAxB;AAA0B9vB,MAAAA,OAAO,CAACqM,eAAR,GAAwBwjB,CAAxB;AAA0B7vB,MAAAA,OAAO,CAACywB,OAAR,GAAgB7vB,CAAhB;AAAkBZ,MAAAA,OAAO,CAAC0wB,UAAR,GAAmBpvB,CAAnB;AAAqBtB,MAAAA,OAAO,CAAC2wB,QAAR,GAAiBhmB,CAAjB;AAAmB3K,MAAAA,OAAO,CAAC4wB,IAAR,GAAaZ,CAAb;AAAehwB,MAAAA,OAAO,CAAC6wB,IAAR,GAAalgB,CAAb;AAAe3Q,MAAAA,OAAO,CAAC8wB,MAAR,GAAejwB,CAAf;AAAiBb,MAAAA,OAAO,CAAC+wB,QAAR,GAAiBnB,CAAjB;AAAmB5vB,MAAAA,OAAO,CAACgxB,UAAR,GAAmB3e,CAAnB;AAAqBrS,MAAAA,OAAO,CAACixB,QAAR,GAAiBnvB,CAAjB;;AACnQ9B,MAAAA,OAAO,CAACkxB,kBAAR,GAA2B,UAASzrB,CAAT,EAAW;AAAC,eAAM,aAAW,OAAOA,CAAlB,IAAqB,eAAa,OAAOA,CAAzC,IAA4CA,CAAC,KAAGkF,CAAhD,IAAmDlF,CAAC,KAAG9E,CAAvD,IAA0D8E,CAAC,KAAGmqB,CAA9D,IAAiEnqB,CAAC,KAAG4M,CAArE,IAAwE5M,CAAC,KAAG3D,CAA5E,IAA+E2D,CAAC,KAAGsqB,CAAnF,IAAsF,sBAAkBtqB,CAAlB,KAAqB,SAAOA,CAA5B,KAAgCA,CAAC,CAACyE,QAAF,KAAa8lB,CAAb,IAAgBvqB,CAAC,CAACyE,QAAF,KAAayG,CAA7B,IAAgClL,CAAC,CAACyE,QAAF,KAAa2lB,CAA7C,IAAgDpqB,CAAC,CAACyE,QAAF,KAAa4lB,CAA7D,IAAgErqB,CAAC,CAACyE,QAAF,KAAa5I,CAA7E,IAAgFmE,CAAC,CAACyE,QAAF,KAAaK,CAA7F,IAAgG9E,CAAC,CAACyE,QAAF,KAAa+lB,CAA7G,IAAgHxqB,CAAC,CAACyE,QAAF,KAAasZ,CAA7J,CAA5F;AAA4P,OAAnS;;AAAoSxjB,MAAAA,OAAO,CAACmxB,WAAR,GAAoB,UAAS1rB,CAAT,EAAW;AAAC,eAAO2qB,CAAC,CAAC3qB,CAAD,CAAD,IAAMyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOhF,CAApB;AAAsB,OAAtD;;AAAuDT,MAAAA,OAAO,CAACoxB,gBAAR,GAAyBhB,CAAzB;;AAA2BpwB,MAAAA,OAAO,CAACqxB,iBAAR,GAA0B,UAAS5rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOqqB,CAAd;AAAgB,OAAtD;;AAAuD9vB,MAAAA,OAAO,CAACsxB,iBAAR,GAA0B,UAAS7rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOoqB,CAAd;AAAgB,OAAtD;;AAC7a7vB,MAAAA,OAAO,CAAC2vB,SAAR,GAAkB,UAASlqB,CAAT,EAAW;AAAC,eAAM,sBAAkBA,CAAlB,KAAqB,SAAOA,CAA5B,IAA+BA,CAAC,CAACyE,QAAF,KAAatJ,CAAlD;AAAoD,OAAlF;;AAAmFZ,MAAAA,OAAO,CAACuxB,YAAR,GAAqB,UAAS9rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOnE,CAAd;AAAgB,OAAjD;;AAAkDtB,MAAAA,OAAO,CAACwxB,UAAR,GAAmB,UAAS/rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOkF,CAAd;AAAgB,OAA/C;;AAAgD3K,MAAAA,OAAO,CAACyxB,MAAR,GAAe,UAAShsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOuqB,CAAd;AAAgB,OAA3C;;AAA4ChwB,MAAAA,OAAO,CAAC0xB,MAAR,GAAe,UAASjsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOkL,CAAd;AAAgB,OAA3C;;AAA4C3Q,MAAAA,OAAO,CAAC2xB,QAAR,GAAiB,UAASlsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO5E,CAAd;AAAgB,OAA7C;;AAA8Cb,MAAAA,OAAO,CAAC4xB,UAAR,GAAmB,UAASnsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOmqB,CAAd;AAAgB,OAA/C;;AAAgD5vB,MAAAA,OAAO,CAAC6xB,YAAR,GAAqB,UAASpsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO4M,CAAd;AAAgB,OAAjD;;AAAkDrS,MAAAA,OAAO,CAAC8xB,UAAR,GAAmB,UAASrsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO3D,CAAd;AAAgB,OAA/C;AAG7Z;;AAAO,KAzjHG;AA0jHV;;AACA;AAAO,cAAS7B,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;;;AAa/C,YAAIA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,WAAC,YAAW;AACd;;AAEA9I,YAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAAE0H,cAAAA,KAAK,EAAE;AAAT,aAA7C,EAHc,CAKd;AACA;;AACA,gBAAIqqB,SAAS,GAAG,OAAOpvB,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,OAAtD;AACA,gBAAIoG,kBAAkB,GAAGgpB,SAAS,GAAGpvB,MAAM,OAAN,CAAW,eAAX,CAAH,GAAiC,MAAnE;AACA,gBAAIqvB,iBAAiB,GAAGD,SAAS,GAAGpvB,MAAM,OAAN,CAAW,cAAX,CAAH,GAAgC,MAAjE;AACA,gBAAIsvB,mBAAmB,GAAGF,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAIuvB,sBAAsB,GAAGH,SAAS,GAAGpvB,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAA3E;AACA,gBAAIwvB,mBAAmB,GAAGJ,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAIyvB,mBAAmB,GAAGL,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAI0vB,kBAAkB,GAAGN,SAAS,GAAGpvB,MAAM,OAAN,CAAW,eAAX,CAAH,GAAiC,MAAnE,CAdc,CAc6D;AAC3E;;AAEA,gBAAI2vB,qBAAqB,GAAGP,SAAS,GAAGpvB,MAAM,OAAN,CAAW,kBAAX,CAAH,GAAoC,MAAzE;AACA,gBAAI4vB,0BAA0B,GAAGR,SAAS,GAAGpvB,MAAM,OAAN,CAAW,uBAAX,CAAH,GAAyC,MAAnF;AACA,gBAAI6vB,sBAAsB,GAAGT,SAAS,GAAGpvB,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAA3E;AACA,gBAAI8vB,mBAAmB,GAAGV,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAI+vB,wBAAwB,GAAGX,SAAS,GAAGpvB,MAAM,OAAN,CAAW,qBAAX,CAAH,GAAuC,MAA/E;AACA,gBAAIgwB,eAAe,GAAGZ,SAAS,GAAGpvB,MAAM,OAAN,CAAW,YAAX,CAAH,GAA8B,MAA7D;AACA,gBAAIiwB,eAAe,GAAGb,SAAS,GAAGpvB,MAAM,OAAN,CAAW,YAAX,CAAH,GAA8B,MAA7D;AACA,gBAAIkwB,sBAAsB,GAAGd,SAAS,GAAGpvB,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAA3E;AACA,gBAAImwB,oBAAoB,GAAGf,SAAS,GAAGpvB,MAAM,OAAN,CAAW,iBAAX,CAAH,GAAmC,MAAvE;AACA,gBAAIowB,gBAAgB,GAAGhB,SAAS,GAAGpvB,MAAM,OAAN,CAAW,aAAX,CAAH,GAA+B,MAA/D;;AAEA,qBAASuuB,kBAAT,CAA4BjrB,IAA5B,EAAkC;AAChC,qBAAO,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAA5C,IAA0D;AACjEA,cAAAA,IAAI,KAAKgsB,mBADF,IACyBhsB,IAAI,KAAKssB,0BADlC,IACgEtsB,IAAI,KAAKksB,mBADzE,IACgGlsB,IAAI,KAAKisB,sBADzG,IACmIjsB,IAAI,KAAKwsB,mBAD5I,IACmKxsB,IAAI,KAAKysB,wBAD5K,IACwM,SAAOzsB,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAArC,KAA8CA,IAAI,CAACiE,QAAL,KAAkB0oB,eAAlB,IAAqC3sB,IAAI,CAACiE,QAAL,KAAkByoB,eAAvD,IAA0E1sB,IAAI,CAACiE,QAAL,KAAkBkoB,mBAA5F,IAAmHnsB,IAAI,CAACiE,QAAL,KAAkBmoB,kBAArI,IAA2JpsB,IAAI,CAACiE,QAAL,KAAkBsoB,sBAA7K,IAAuMvsB,IAAI,CAACiE,QAAL,KAAkB2oB,sBAAzN,IAAmP5sB,IAAI,CAACiE,QAAL,KAAkB4oB,oBAArQ,IAA6R7sB,IAAI,CAACiE,QAAL,KAAkB6oB,gBAA7V,CAD/M;AAED;AAED;;;;;;;;;;;;;;;AAaA,gBAAIC,8BAA8B,GAAG,0CAAY,CAAE,CAAnD;;AAEA;AACE,kBAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,MAAV,EAAkB;AACnC,qBAAK,IAAIxL,IAAI,GAAGpiB,SAAS,CAACJ,MAArB,EAA6B+I,IAAI,GAAG,IAAId,KAAJ,CAAUua,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAhC,CAApC,EAAwEC,IAAI,GAAG,CAApF,EAAuFA,IAAI,GAAGD,IAA9F,EAAoGC,IAAI,EAAxG,EAA4G;AAC1G1Z,kBAAAA,IAAI,CAAC0Z,IAAI,GAAG,CAAR,CAAJ,GAAiBriB,SAAS,CAACqiB,IAAD,CAA1B;AACD;;AAED,oBAAIwL,QAAQ,GAAG,CAAf;AACA,oBAAI3L,OAAO,GAAG,cAAc0L,MAAM,CAACxuB,OAAP,CAAe,KAAf,EAAsB,YAAY;AAC5D,yBAAOuJ,IAAI,CAACklB,QAAQ,EAAT,CAAX;AACD,iBAF2B,CAA5B;;AAIA,oBAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,kBAAAA,OAAO,CAACC,IAAR,CAAa7L,OAAb;AACD;;AAED,oBAAI;AACF;AACA;AACA;AACA,wBAAM,IAAIta,KAAJ,CAAUsa,OAAV,CAAN;AACD,iBALD,CAKE,OAAOhE,CAAP,EAAU,CAAE;AACf,eApBD;;AAsBAwP,cAAAA,8BAA8B,GAAG,wCAAUM,SAAV,EAAqBJ,MAArB,EAA6B;AAC5D,oBAAIA,MAAM,KAAK/rB,SAAf,EAA0B;AACxB,wBAAM,IAAI+F,KAAJ,CAAU,qFAAqF,kBAA/F,CAAN;AACD;;AAED,oBAAI,CAAComB,SAAL,EAAgB;AACd,uBAAK,IAAIC,KAAK,GAAGjuB,SAAS,CAACJ,MAAtB,EAA8B+I,IAAI,GAAG,IAAId,KAAJ,CAAUomB,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAlC,CAArC,EAA2EC,KAAK,GAAG,CAAxF,EAA2FA,KAAK,GAAGD,KAAnG,EAA0GC,KAAK,EAA/G,EAAmH;AACjHvlB,oBAAAA,IAAI,CAACulB,KAAK,GAAG,CAAT,CAAJ,GAAkBluB,SAAS,CAACkuB,KAAD,CAA3B;AACD;;AAEDP,kBAAAA,YAAY,CAAC5rB,KAAb,CAAmB,KAAK,CAAxB,EAA2B,CAAC6rB,MAAD,EAAS9lB,MAAT,CAAgBa,IAAhB,CAA3B;AACD;AACF,eAZD;AAaD;AAED,gBAAIwlB,gCAAgC,GAAGT,8BAAvC;;AAEA,qBAAS3C,MAAT,CAAgB3uB,MAAhB,EAAwB;AACtB,kBAAI,SAAOA,MAAP,MAAkB,QAAlB,IAA8BA,MAAM,KAAK,IAA7C,EAAmD;AACjD,oBAAIwI,QAAQ,GAAGxI,MAAM,CAACwI,QAAtB;;AAEA,wBAAQA,QAAR;AACE,uBAAKnB,kBAAL;AACE,wBAAI9C,IAAI,GAAGvE,MAAM,CAACuE,IAAlB;;AAEA,4BAAQA,IAAR;AACE,2BAAKqsB,qBAAL;AACA,2BAAKC,0BAAL;AACA,2BAAKN,mBAAL;AACA,2BAAKE,mBAAL;AACA,2BAAKD,sBAAL;AACA,2BAAKO,mBAAL;AACE,+BAAOxsB,IAAP;;AAEF;AACE,4BAAIytB,YAAY,GAAGztB,IAAI,IAAIA,IAAI,CAACiE,QAAhC;;AAEA,gCAAQwpB,YAAR;AACE,+BAAKrB,kBAAL;AACA,+BAAKG,sBAAL;AACA,+BAAKI,eAAL;AACA,+BAAKD,eAAL;AACA,+BAAKP,mBAAL;AACE,mCAAOsB,YAAP;;AAEF;AACE,mCAAOxpB,QAAP;AATJ;;AAZJ;;AA0BF,uBAAK8nB,iBAAL;AACE,2BAAO9nB,QAAP;AA/BJ;AAiCD;;AAED,qBAAO/C,SAAP;AACD,aAhIa,CAgIZ;;;AAEF,gBAAImpB,SAAS,GAAGgC,qBAAhB;AACA,gBAAI/B,cAAc,GAAGgC,0BAArB;AACA,gBAAI/B,eAAe,GAAG6B,kBAAtB;AACA,gBAAIhmB,eAAe,GAAG+lB,mBAAtB;AACA,gBAAI3B,OAAO,GAAG1nB,kBAAd;AACA,gBAAI2nB,UAAU,GAAG8B,sBAAjB;AACA,gBAAI7B,QAAQ,GAAGsB,mBAAf;AACA,gBAAIrB,IAAI,GAAGgC,eAAX;AACA,gBAAI/B,IAAI,GAAG8B,eAAX;AACA,gBAAI7B,MAAM,GAAGkB,iBAAb;AACA,gBAAIjB,QAAQ,GAAGoB,mBAAf;AACA,gBAAInB,UAAU,GAAGkB,sBAAjB;AACA,gBAAIjB,QAAQ,GAAGwB,mBAAf;AACA,gBAAIkB,mCAAmC,GAAG,KAA1C,CA/Ic,CA+ImC;;AAEjD,qBAASxC,WAAT,CAAqBzvB,MAArB,EAA6B;AAC3B;AACE,oBAAI,CAACiyB,mCAAL,EAA0C;AACxCA,kBAAAA,mCAAmC,GAAG,IAAtC;AACAF,kBAAAA,gCAAgC,CAAC,KAAD,EAAQ,0DAA0D,4DAA1D,GAAyH,gEAAjI,CAAhC;AACD;AACF;AAED,qBAAOrC,gBAAgB,CAAC1vB,MAAD,CAAhB,IAA4B2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB4wB,qBAAtD;AACD;;AACD,qBAASlB,gBAAT,CAA0B1vB,MAA1B,EAAkC;AAChC,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB6wB,0BAA1B;AACD;;AACD,qBAASlB,iBAAT,CAA2B3vB,MAA3B,EAAmC;AACjC,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB2wB,kBAA1B;AACD;;AACD,qBAASf,iBAAT,CAA2B5vB,MAA3B,EAAmC;AACjC,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB0wB,mBAA1B;AACD;;AACD,qBAASzC,SAAT,CAAmBjuB,MAAnB,EAA2B;AACzB,qBAAO,SAAOA,MAAP,MAAkB,QAAlB,IAA8BA,MAAM,KAAK,IAAzC,IAAiDA,MAAM,CAACwI,QAAP,KAAoBnB,kBAA5E;AACD;;AACD,qBAASwoB,YAAT,CAAsB7vB,MAAtB,EAA8B;AAC5B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB8wB,sBAA1B;AACD;;AACD,qBAAShB,UAAT,CAAoB9vB,MAApB,EAA4B;AAC1B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBuwB,mBAA1B;AACD;;AACD,qBAASR,MAAT,CAAgB/vB,MAAhB,EAAwB;AACtB,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBkxB,eAA1B;AACD;;AACD,qBAASlB,MAAT,CAAgBhwB,MAAhB,EAAwB;AACtB,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBixB,eAA1B;AACD;;AACD,qBAAShB,QAAT,CAAkBjwB,MAAlB,EAA0B;AACxB,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBswB,iBAA1B;AACD;;AACD,qBAASJ,UAAT,CAAoBlwB,MAApB,EAA4B;AAC1B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBywB,mBAA1B;AACD;;AACD,qBAASN,YAAT,CAAsBnwB,MAAtB,EAA8B;AAC5B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBwwB,sBAA1B;AACD;;AACD,qBAASJ,UAAT,CAAoBpwB,MAApB,EAA4B;AAC1B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB+wB,mBAA1B;AACD;;AAEDzyB,YAAAA,OAAO,CAACqwB,MAAR,GAAiBA,MAAjB;AACArwB,YAAAA,OAAO,CAACswB,SAAR,GAAoBA,SAApB;AACAtwB,YAAAA,OAAO,CAACuwB,cAAR,GAAyBA,cAAzB;AACAvwB,YAAAA,OAAO,CAACwwB,eAAR,GAA0BA,eAA1B;AACAxwB,YAAAA,OAAO,CAACqM,eAAR,GAA0BA,eAA1B;AACArM,YAAAA,OAAO,CAACywB,OAAR,GAAkBA,OAAlB;AACAzwB,YAAAA,OAAO,CAAC0wB,UAAR,GAAqBA,UAArB;AACA1wB,YAAAA,OAAO,CAAC2wB,QAAR,GAAmBA,QAAnB;AACA3wB,YAAAA,OAAO,CAAC4wB,IAAR,GAAeA,IAAf;AACA5wB,YAAAA,OAAO,CAAC6wB,IAAR,GAAeA,IAAf;AACA7wB,YAAAA,OAAO,CAAC8wB,MAAR,GAAiBA,MAAjB;AACA9wB,YAAAA,OAAO,CAAC+wB,QAAR,GAAmBA,QAAnB;AACA/wB,YAAAA,OAAO,CAACgxB,UAAR,GAAqBA,UAArB;AACAhxB,YAAAA,OAAO,CAACixB,QAAR,GAAmBA,QAAnB;AACAjxB,YAAAA,OAAO,CAACkxB,kBAAR,GAA6BA,kBAA7B;AACAlxB,YAAAA,OAAO,CAACmxB,WAAR,GAAsBA,WAAtB;AACAnxB,YAAAA,OAAO,CAACoxB,gBAAR,GAA2BA,gBAA3B;AACApxB,YAAAA,OAAO,CAACqxB,iBAAR,GAA4BA,iBAA5B;AACArxB,YAAAA,OAAO,CAACsxB,iBAAR,GAA4BA,iBAA5B;AACAtxB,YAAAA,OAAO,CAAC2vB,SAAR,GAAoBA,SAApB;AACA3vB,YAAAA,OAAO,CAACuxB,YAAR,GAAuBA,YAAvB;AACAvxB,YAAAA,OAAO,CAACwxB,UAAR,GAAqBA,UAArB;AACAxxB,YAAAA,OAAO,CAACyxB,MAAR,GAAiBA,MAAjB;AACAzxB,YAAAA,OAAO,CAAC0xB,MAAR,GAAiBA,MAAjB;AACA1xB,YAAAA,OAAO,CAAC2xB,QAAR,GAAmBA,QAAnB;AACA3xB,YAAAA,OAAO,CAAC4xB,UAAR,GAAqBA,UAArB;AACA5xB,YAAAA,OAAO,CAAC6xB,YAAR,GAAuBA,YAAvB;AACA7xB,YAAAA,OAAO,CAAC8xB,UAAR,GAAqBA,UAArB;AACG,WA5ND;AA6ND;AAED;;AAA4B,OA7OA,EA6OCpxB,IA7OD,CA6OMV,OA7ON,EA6OeM,mBAAmB,CAAC,CAAD,CA7OlC,CAAD;AA+O3B;AAAO,KA7yHG;AA8yHV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;AAS/C,YAAI8nB,OAAO,GAAGnvB,mBAAmB,CAAC,EAAD,CAAjC;;AACA,YAAIszB,MAAM,GAAGtzB,mBAAmB,CAAC,EAAD,CAAhC;;AAEA,YAAI0b,oBAAoB,GAAG1b,mBAAmB,CAAC,EAAD,CAA9C;;AACA,YAAI0Q,cAAc,GAAG1Q,mBAAmB,CAAC,EAAD,CAAxC;;AAEA,YAAIwF,GAAG,GAAGvD,QAAQ,CAAC7B,IAAT,CAAcoC,IAAd,CAAmB7B,MAAM,CAACW,SAAP,CAAiBC,cAApC,CAAV;;AACA,YAAIoxB,YAAY,GAAG,wBAAW,CAAE,CAAhC;;AAEA,YAAItrB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCkpB,UAAAA,YAAY,GAAG,sBAASvE,IAAT,EAAe;AAC5B,gBAAIlH,OAAO,GAAG,cAAckH,IAA5B;;AACA,gBAAI,OAAO0E,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,cAAAA,OAAO,CAAChG,KAAR,CAAc5F,OAAd;AACD;;AACD,gBAAI;AACF;AACA;AACA;AACA,oBAAM,IAAIta,KAAJ,CAAUsa,OAAV,CAAN;AACD,aALD,CAKE,OAAOhE,CAAP,EAAU,CAAE;AACf,WAXD;AAYD;;AAED,iBAASqQ,4BAAT,GAAwC;AACtC,iBAAO,IAAP;AACD;;AAED5zB,QAAAA,MAAM,CAACD,OAAP,GAAiB,UAASmI,cAAT,EAAyBunB,mBAAzB,EAA8C;AAC7D;AACA,cAAIoE,eAAe,GAAG,OAAOnxB,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACgf,QAA7D;AACA,cAAIoS,oBAAoB,GAAG,YAA3B,CAH6D,CAGpB;;AAEzC;;;;;;;;;;;;;;;AAcA,mBAASC,aAAT,CAAuBC,aAAvB,EAAsC;AACpC,gBAAIC,UAAU,GAAGD,aAAa,KAAKH,eAAe,IAAIG,aAAa,CAACH,eAAD,CAAhC,IAAqDG,aAAa,CAACF,oBAAD,CAAvE,CAA9B;;AACA,gBAAI,OAAOG,UAAP,KAAsB,UAA1B,EAAsC;AACpC,qBAAOA,UAAP;AACD;AACF;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,cAAIC,SAAS,GAAG,eAAhB,CAzE6D,CA2E7D;AACA;;AACA,cAAIC,cAAc,GAAG;AACnBxgB,YAAAA,KAAK,EAAEygB,0BAA0B,CAAC,OAAD,CADd;AAEnBC,YAAAA,IAAI,EAAED,0BAA0B,CAAC,SAAD,CAFb;AAGnBE,YAAAA,IAAI,EAAEF,0BAA0B,CAAC,UAAD,CAHb;AAInBG,YAAAA,MAAM,EAAEH,0BAA0B,CAAC,QAAD,CAJf;AAKnB3yB,YAAAA,MAAM,EAAE2yB,0BAA0B,CAAC,QAAD,CALf;AAMnBI,YAAAA,MAAM,EAAEJ,0BAA0B,CAAC,QAAD,CANf;AAOnBK,YAAAA,MAAM,EAAEL,0BAA0B,CAAC,QAAD,CAPf;AASnBM,YAAAA,GAAG,EAAEC,oBAAoB,EATN;AAUnBC,YAAAA,OAAO,EAAEC,wBAVU;AAWnBvmB,YAAAA,OAAO,EAAEwmB,wBAAwB,EAXd;AAYnBC,YAAAA,WAAW,EAAEC,4BAA4B,EAZtB;AAanBC,YAAAA,UAAU,EAAEC,yBAbO;AAcnB1mB,YAAAA,IAAI,EAAE2mB,iBAAiB,EAdJ;AAenBC,YAAAA,QAAQ,EAAEC,yBAfS;AAgBnBC,YAAAA,KAAK,EAAEC,qBAhBY;AAiBnBC,YAAAA,SAAS,EAAEC,sBAjBQ;AAkBnBC,YAAAA,KAAK,EAAEC,sBAlBY;AAmBnBC,YAAAA,KAAK,EAAEC;AAnBY,WAArB;AAsBA;;;;;AAIA;;AACA,mBAASha,EAAT,CAAY0H,CAAZ,EAAe0M,CAAf,EAAkB;AAChB;AACA,gBAAI1M,CAAC,KAAK0M,CAAV,EAAa;AACX;AACA;AACA,qBAAO1M,CAAC,KAAK,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAI0M,CAAhC;AACD,aAJD,MAIO;AACL;AACA,qBAAO1M,CAAC,KAAKA,CAAN,IAAW0M,CAAC,KAAKA,CAAxB;AACD;AACF;AACD;;AAEA;;;;;;;;;AAOA,mBAAS6F,aAAT,CAAuBvO,OAAvB,EAAgC;AAC9B,iBAAKA,OAAL,GAAeA,OAAf;AACA,iBAAKwO,KAAL,GAAa,EAAb;AACD,WA/H4D,CAgI7D;;;AACAD,UAAAA,aAAa,CAACn0B,SAAd,GAA0BsL,KAAK,CAACtL,SAAhC;;AAEA,mBAASq0B,0BAAT,CAAoCC,QAApC,EAA8C;AAC5C,gBAAIvuB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,kBAAIosB,uBAAuB,GAAG,EAA9B;AACA,kBAAIC,0BAA0B,GAAG,CAAjC;AACD;;AACD,qBAASC,SAAT,CAAmBC,UAAnB,EAA+B/pB,KAA/B,EAAsCgqB,QAAtC,EAAgDC,aAAhD,EAA+DnQ,QAA/D,EAAyEoQ,YAAzE,EAAuFC,MAAvF,EAA+F;AAC7FF,cAAAA,aAAa,GAAGA,aAAa,IAAIrC,SAAjC;AACAsC,cAAAA,YAAY,GAAGA,YAAY,IAAIF,QAA/B;;AAEA,kBAAIG,MAAM,KAAK1a,oBAAf,EAAqC;AACnC,oBAAI0T,mBAAJ,EAAyB;AACvB;AACA,sBAAIrI,GAAG,GAAG,IAAIna,KAAJ,CACR,yFACA,iDADA,GAEA,gDAHQ,CAAV;AAKAma,kBAAAA,GAAG,CAACvmB,IAAJ,GAAW,qBAAX;AACA,wBAAMumB,GAAN;AACD,iBATD,MASO,IAAI1f,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,OAAOqpB,OAAP,KAAmB,WAAhE,EAA6E;AAClF;AACA,sBAAIuD,QAAQ,GAAGH,aAAa,GAAG,GAAhB,GAAsBD,QAArC;;AACA,sBACE,CAACJ,uBAAuB,CAACQ,QAAD,CAAxB,IACA;AACAP,kBAAAA,0BAA0B,GAAG,CAH/B,EAIE;AACAnD,oBAAAA,YAAY,CACV,2DACA,oBADA,GACuBwD,YADvB,GACsC,aADtC,GACsDD,aADtD,GACuE,wBADvE,GAEA,yDAFA,GAGA,gEAHA,GAIA,+DAJA,GAIkE,cALxD,CAAZ;AAOAL,oBAAAA,uBAAuB,CAACQ,QAAD,CAAvB,GAAoC,IAApC;AACAP,oBAAAA,0BAA0B;AAC3B;AACF;AACF;;AACD,kBAAI7pB,KAAK,CAACgqB,QAAD,CAAL,IAAmB,IAAvB,EAA6B;AAC3B,oBAAID,UAAJ,EAAgB;AACd,sBAAI/pB,KAAK,CAACgqB,QAAD,CAAL,KAAoB,IAAxB,EAA8B;AAC5B,2BAAO,IAAIR,aAAJ,CAAkB,SAAS1P,QAAT,GAAoB,IAApB,GAA2BoQ,YAA3B,GAA0C,0BAA1C,IAAwE,SAASD,aAAT,GAAyB,6BAAjG,CAAlB,CAAP;AACD;;AACD,yBAAO,IAAIT,aAAJ,CAAkB,SAAS1P,QAAT,GAAoB,IAApB,GAA2BoQ,YAA3B,GAA0C,6BAA1C,IAA2E,MAAMD,aAAN,GAAsB,kCAAjG,CAAlB,CAAP;AACD;;AACD,uBAAO,IAAP;AACD,eARD,MAQO;AACL,uBAAON,QAAQ,CAAC3pB,KAAD,EAAQgqB,QAAR,EAAkBC,aAAlB,EAAiCnQ,QAAjC,EAA2CoQ,YAA3C,CAAf;AACD;AACF;;AAED,gBAAIG,gBAAgB,GAAGP,SAAS,CAACvzB,IAAV,CAAe,IAAf,EAAqB,KAArB,CAAvB;AACA8zB,YAAAA,gBAAgB,CAACN,UAAjB,GAA8BD,SAAS,CAACvzB,IAAV,CAAe,IAAf,EAAqB,IAArB,CAA9B;AAEA,mBAAO8zB,gBAAP;AACD;;AAED,mBAASvC,0BAAT,CAAoCwC,YAApC,EAAkD;AAChD,qBAASX,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0EC,MAA1E,EAAkF;AAChF,kBAAII,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAKF,YAAjB,EAA+B;AAC7B;AACA;AACA;AACA,oBAAII,WAAW,GAAGC,cAAc,CAACJ,SAAD,CAAhC;AAEA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMQ,WAAN,GAAoB,iBAApB,GAAwCT,aAAxC,GAAwD,cAAtH,KAAyI,MAAMK,YAAN,GAAqB,IAA9J,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOZ,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAAStB,oBAAT,GAAgC;AAC9B,mBAAOqB,0BAA0B,CAACpC,4BAAD,CAAjC;AACD;;AAED,mBAASiB,wBAAT,CAAkCqC,WAAlC,EAA+C;AAC7C,qBAASjB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,OAAOU,WAAP,KAAuB,UAA3B,EAAuC;AACrC,uBAAO,IAAIpB,aAAJ,CAAkB,eAAeU,YAAf,GAA8B,kBAA9B,GAAmDD,aAAnD,GAAmE,iDAArF,CAAP;AACD;;AACD,kBAAIM,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,kBAAI,CAACppB,KAAK,CAACnK,OAAN,CAAc8zB,SAAd,CAAL,EAA+B;AAC7B,oBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;AACA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,uBAAnH,CAAlB,CAAP;AACD;;AACD,mBAAK,IAAIh2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs2B,SAAS,CAAC5xB,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AACzC,oBAAI4sB,KAAK,GAAG+J,WAAW,CAACL,SAAD,EAAYt2B,CAAZ,EAAeg2B,aAAf,EAA8BnQ,QAA9B,EAAwCoQ,YAAY,GAAG,GAAf,GAAqBj2B,CAArB,GAAyB,GAAjE,EAAsEwb,oBAAtE,CAAvB;;AACA,oBAAIoR,KAAK,YAAYlgB,KAArB,EAA4B;AAC1B,yBAAOkgB,KAAP;AACD;AACF;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASnB,wBAAT,GAAoC;AAClC,qBAASmB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,kBAAI,CAACpuB,cAAc,CAAC2uB,SAAD,CAAnB,EAAgC;AAC9B,oBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;AACA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,oCAAnH,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASjB,4BAAT,GAAwC;AACtC,qBAASiB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,kBAAI,CAAC9G,OAAO,CAACyB,kBAAR,CAA2B4F,SAA3B,CAAL,EAA4C;AAC1C,oBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;AACA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,yCAAnH,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASf,yBAAT,CAAmCiC,aAAnC,EAAkD;AAChD,qBAASlB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,EAAElqB,KAAK,CAACgqB,QAAD,CAAL,YAA2Ba,aAA7B,CAAJ,EAAiD;AAC/C,oBAAIC,iBAAiB,GAAGD,aAAa,CAACt2B,IAAd,IAAsBqzB,SAA9C;AACA,oBAAImD,eAAe,GAAGC,YAAY,CAAChrB,KAAK,CAACgqB,QAAD,CAAN,CAAlC;AACA,uBAAO,IAAIR,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMa,eAAN,GAAwB,iBAAxB,GAA4Cd,aAA5C,GAA4D,cAA1H,KAA6I,kBAAkBa,iBAAlB,GAAsC,IAAnL,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOpB,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASV,qBAAT,CAA+BgC,cAA/B,EAA+C;AAC7C,gBAAI,CAACrqB,KAAK,CAACnK,OAAN,CAAcw0B,cAAd,CAAL,EAAoC;AAClC,kBAAI7vB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,oBAAIzE,SAAS,CAACJ,MAAV,GAAmB,CAAvB,EAA0B;AACxB+tB,kBAAAA,YAAY,CACV,iEAAiE3tB,SAAS,CAACJ,MAA3E,GAAoF,cAApF,GACA,0EAFU,CAAZ;AAID,iBALD,MAKO;AACL+tB,kBAAAA,YAAY,CAAC,wDAAD,CAAZ;AACD;AACF;;AACD,qBAAOY,4BAAP;AACD;;AAED,qBAASqC,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,mBAAK,IAAI/1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGg3B,cAAc,CAACtyB,MAAnC,EAA2C1E,CAAC,EAA5C,EAAgD;AAC9C,oBAAIsb,EAAE,CAACgb,SAAD,EAAYU,cAAc,CAACh3B,CAAD,CAA1B,CAAN,EAAsC;AACpC,yBAAO,IAAP;AACD;AACF;;AAED,kBAAIi3B,YAAY,GAAGhP,IAAI,CAACC,SAAL,CAAe8O,cAAf,EAA+B,SAASE,QAAT,CAAkBvyB,GAAlB,EAAuBuC,KAAvB,EAA8B;AAC9E,oBAAIzB,IAAI,GAAGixB,cAAc,CAACxvB,KAAD,CAAzB;;AACA,oBAAIzB,IAAI,KAAK,QAAb,EAAuB;AACrB,yBAAOkF,MAAM,CAACzD,KAAD,CAAb;AACD;;AACD,uBAAOA,KAAP;AACD,eANkB,CAAnB;AAOA,qBAAO,IAAIquB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,cAA9C,GAA+DtrB,MAAM,CAAC2rB,SAAD,CAArE,GAAmF,IAAnF,IAA2F,kBAAkBN,aAAlB,GAAkC,qBAAlC,GAA0DiB,YAA1D,GAAyE,GAApK,CAAlB,CAAP;AACD;;AACD,mBAAOxB,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASZ,yBAAT,CAAmC6B,WAAnC,EAAgD;AAC9C,qBAASjB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,OAAOU,WAAP,KAAuB,UAA3B,EAAuC;AACrC,uBAAO,IAAIpB,aAAJ,CAAkB,eAAeU,YAAf,GAA8B,kBAA9B,GAAmDD,aAAnD,GAAmE,kDAArF,CAAP;AACD;;AACD,kBAAIM,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,uBAAO,IAAIhB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,wBAAnH,CAAlB,CAAP;AACD;;AACD,mBAAK,IAAIrxB,GAAT,IAAgB2xB,SAAhB,EAA2B;AACzB,oBAAIhxB,GAAG,CAACgxB,SAAD,EAAY3xB,GAAZ,CAAP,EAAyB;AACvB,sBAAIioB,KAAK,GAAG+J,WAAW,CAACL,SAAD,EAAY3xB,GAAZ,EAAiBqxB,aAAjB,EAAgCnQ,QAAhC,EAA0CoQ,YAAY,GAAG,GAAf,GAAqBtxB,GAA/D,EAAoE6W,oBAApE,CAAvB;;AACA,sBAAIoR,KAAK,YAAYlgB,KAArB,EAA4B;AAC1B,2BAAOkgB,KAAP;AACD;AACF;AACF;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASR,sBAAT,CAAgCiC,mBAAhC,EAAqD;AACnD,gBAAI,CAACxqB,KAAK,CAACnK,OAAN,CAAc20B,mBAAd,CAAL,EAAyC;AACvChwB,cAAAA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCkpB,YAAY,CAAC,wEAAD,CAApD,GAAiI,KAAK,CAAtI;AACA,qBAAOY,4BAAP;AACD;;AAED,iBAAK,IAAIrzB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm3B,mBAAmB,CAACzyB,MAAxC,EAAgD1E,CAAC,EAAjD,EAAqD;AACnD,kBAAIo3B,OAAO,GAAGD,mBAAmB,CAACn3B,CAAD,CAAjC;;AACA,kBAAI,OAAOo3B,OAAP,KAAmB,UAAvB,EAAmC;AACjC3E,gBAAAA,YAAY,CACV,uFACA,WADA,GACc4E,wBAAwB,CAACD,OAAD,CADtC,GACkD,YADlD,GACiEp3B,CADjE,GACqE,GAF3D,CAAZ;AAIA,uBAAOqzB,4BAAP;AACD;AACF;;AAED,qBAASqC,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,mBAAK,IAAIj2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm3B,mBAAmB,CAACzyB,MAAxC,EAAgD1E,CAAC,EAAjD,EAAqD;AACnD,oBAAIo3B,OAAO,GAAGD,mBAAmB,CAACn3B,CAAD,CAAjC;;AACA,oBAAIo3B,OAAO,CAACrrB,KAAD,EAAQgqB,QAAR,EAAkBC,aAAlB,EAAiCnQ,QAAjC,EAA2CoQ,YAA3C,EAAyDza,oBAAzD,CAAP,IAAyF,IAA7F,EAAmG;AACjG,yBAAO,IAAP;AACD;AACF;;AAED,qBAAO,IAAI+Z,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,gBAA9C,IAAkE,MAAMD,aAAN,GAAsB,IAAxF,CAAlB,CAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASd,iBAAT,GAA6B;AAC3B,qBAASc,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,CAACqB,MAAM,CAACvrB,KAAK,CAACgqB,QAAD,CAAN,CAAX,EAA8B;AAC5B,uBAAO,IAAIR,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,gBAA9C,IAAkE,MAAMD,aAAN,GAAsB,0BAAxF,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASN,sBAAT,CAAgCmC,UAAhC,EAA4C;AAC1C,qBAAS7B,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,uBAAO,IAAIhB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,aAA9C,GAA8DM,QAA9D,GAAyE,IAAzE,IAAiF,kBAAkBP,aAAlB,GAAkC,uBAAnH,CAAlB,CAAP;AACD;;AACD,mBAAK,IAAIrxB,GAAT,IAAgB4yB,UAAhB,EAA4B;AAC1B,oBAAIH,OAAO,GAAGG,UAAU,CAAC5yB,GAAD,CAAxB;;AACA,oBAAI,CAACyyB,OAAL,EAAc;AACZ;AACD;;AACD,oBAAIxK,KAAK,GAAGwK,OAAO,CAACd,SAAD,EAAY3xB,GAAZ,EAAiBqxB,aAAjB,EAAgCnQ,QAAhC,EAA0CoQ,YAAY,GAAG,GAAf,GAAqBtxB,GAA/D,EAAoE6W,oBAApE,CAAnB;;AACA,oBAAIoR,KAAJ,EAAW;AACT,yBAAOA,KAAP;AACD;AACF;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASJ,4BAAT,CAAsCiC,UAAtC,EAAkD;AAChD,qBAAS7B,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,uBAAO,IAAIhB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,aAA9C,GAA8DM,QAA9D,GAAyE,IAAzE,IAAiF,kBAAkBP,aAAlB,GAAkC,uBAAnH,CAAlB,CAAP;AACD,eALuE,CAMxE;AACA;;;AACA,kBAAIwB,OAAO,GAAGpE,MAAM,CAAC,EAAD,EAAKrnB,KAAK,CAACgqB,QAAD,CAAV,EAAsBwB,UAAtB,CAApB;;AACA,mBAAK,IAAI5yB,GAAT,IAAgB6yB,OAAhB,EAAyB;AACvB,oBAAIJ,OAAO,GAAGG,UAAU,CAAC5yB,GAAD,CAAxB;;AACA,oBAAI,CAACyyB,OAAL,EAAc;AACZ,yBAAO,IAAI7B,aAAJ,CACL,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,SAA9C,GAA0DtxB,GAA1D,GAAgE,iBAAhE,GAAoFqxB,aAApF,GAAoG,IAApG,GACA,gBADA,GACmB/N,IAAI,CAACC,SAAL,CAAenc,KAAK,CAACgqB,QAAD,CAApB,EAAgC,IAAhC,EAAsC,IAAtC,CADnB,GAEA,gBAFA,GAEoB9N,IAAI,CAACC,SAAL,CAAeznB,MAAM,CAACuZ,IAAP,CAAYud,UAAZ,CAAf,EAAwC,IAAxC,EAA8C,IAA9C,CAHf,CAAP;AAKD;;AACD,oBAAI3K,KAAK,GAAGwK,OAAO,CAACd,SAAD,EAAY3xB,GAAZ,EAAiBqxB,aAAjB,EAAgCnQ,QAAhC,EAA0CoQ,YAAY,GAAG,GAAf,GAAqBtxB,GAA/D,EAAoE6W,oBAApE,CAAnB;;AACA,oBAAIoR,KAAJ,EAAW;AACT,yBAAOA,KAAP;AACD;AACF;;AACD,qBAAO,IAAP;AACD;;AAED,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAAS4B,MAAT,CAAgBhB,SAAhB,EAA2B;AACzB,6BAAeA,SAAf;AACE,mBAAK,QAAL;AACA,mBAAK,QAAL;AACA,mBAAK,WAAL;AACE,uBAAO,IAAP;;AACF,mBAAK,SAAL;AACE,uBAAO,CAACA,SAAR;;AACF,mBAAK,QAAL;AACE,oBAAI3pB,KAAK,CAACnK,OAAN,CAAc8zB,SAAd,CAAJ,EAA8B;AAC5B,yBAAOA,SAAS,CAACvX,KAAV,CAAgBuY,MAAhB,CAAP;AACD;;AACD,oBAAIhB,SAAS,KAAK,IAAd,IAAsB3uB,cAAc,CAAC2uB,SAAD,CAAxC,EAAqD;AACnD,yBAAO,IAAP;AACD;;AAED,oBAAI5C,UAAU,GAAGF,aAAa,CAAC8C,SAAD,CAA9B;;AACA,oBAAI5C,UAAJ,EAAgB;AACd,sBAAIvS,QAAQ,GAAGuS,UAAU,CAACxzB,IAAX,CAAgBo2B,SAAhB,CAAf;AACA,sBAAImB,IAAJ;;AACA,sBAAI/D,UAAU,KAAK4C,SAAS,CAAClW,OAA7B,EAAsC;AACpC,2BAAO,CAAC,CAACqX,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAAjC,EAAuC;AACrC,0BAAI,CAACyd,MAAM,CAACG,IAAI,CAACvwB,KAAN,CAAX,EAAyB;AACvB,+BAAO,KAAP;AACD;AACF;AACF,mBAND,MAMO;AACL;AACA,2BAAO,CAAC,CAACuwB,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAAjC,EAAuC;AACrC,0BAAI6d,KAAK,GAAGD,IAAI,CAACvwB,KAAjB;;AACA,0BAAIwwB,KAAJ,EAAW;AACT,4BAAI,CAACJ,MAAM,CAACI,KAAK,CAAC,CAAD,CAAN,CAAX,EAAuB;AACrB,iCAAO,KAAP;AACD;AACF;AACF;AACF;AACF,iBApBD,MAoBO;AACL,yBAAO,KAAP;AACD;;AAED,uBAAO,IAAP;;AACF;AACE,uBAAO,KAAP;AA1CJ;AA4CD;;AAED,mBAASC,QAAT,CAAkBpB,QAAlB,EAA4BD,SAA5B,EAAuC;AACrC;AACA,gBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,qBAAO,IAAP;AACD,aAJoC,CAMrC;;;AACA,gBAAI,CAACD,SAAL,EAAgB;AACd,qBAAO,KAAP;AACD,aAToC,CAWrC;;;AACA,gBAAIA,SAAS,CAAC,eAAD,CAAT,KAA+B,QAAnC,EAA6C;AAC3C,qBAAO,IAAP;AACD,aAdoC,CAgBrC;;;AACA,gBAAI,OAAOn0B,MAAP,KAAkB,UAAlB,IAAgCm0B,SAAS,YAAYn0B,MAAzD,EAAiE;AAC/D,qBAAO,IAAP;AACD;;AAED,mBAAO,KAAP;AACD,WAte4D,CAwe7D;;;AACA,mBAASq0B,WAAT,CAAqBF,SAArB,EAAgC;AAC9B,gBAAIC,QAAQ,YAAUD,SAAV,CAAZ;;AACA,gBAAI3pB,KAAK,CAACnK,OAAN,CAAc8zB,SAAd,CAAJ,EAA8B;AAC5B,qBAAO,OAAP;AACD;;AACD,gBAAIA,SAAS,YAAYsB,MAAzB,EAAiC;AAC/B;AACA;AACA;AACA,qBAAO,QAAP;AACD;;AACD,gBAAID,QAAQ,CAACpB,QAAD,EAAWD,SAAX,CAAZ,EAAmC;AACjC,qBAAO,QAAP;AACD;;AACD,mBAAOC,QAAP;AACD,WAxf4D,CA0f7D;AACA;;;AACA,mBAASG,cAAT,CAAwBJ,SAAxB,EAAmC;AACjC,gBAAI,OAAOA,SAAP,KAAqB,WAArB,IAAoCA,SAAS,KAAK,IAAtD,EAA4D;AAC1D,qBAAO,KAAKA,SAAZ;AACD;;AACD,gBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,gBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,kBAAID,SAAS,YAAY/f,IAAzB,EAA+B;AAC7B,uBAAO,MAAP;AACD,eAFD,MAEO,IAAI+f,SAAS,YAAYsB,MAAzB,EAAiC;AACtC,uBAAO,QAAP;AACD;AACF;;AACD,mBAAOrB,QAAP;AACD,WAzgB4D,CA2gB7D;AACA;;;AACA,mBAASc,wBAAT,CAAkCnwB,KAAlC,EAAyC;AACvC,gBAAIzB,IAAI,GAAGixB,cAAc,CAACxvB,KAAD,CAAzB;;AACA,oBAAQzB,IAAR;AACE,mBAAK,OAAL;AACA,mBAAK,QAAL;AACE,uBAAO,QAAQA,IAAf;;AACF,mBAAK,SAAL;AACA,mBAAK,MAAL;AACA,mBAAK,QAAL;AACE,uBAAO,OAAOA,IAAd;;AACF;AACE,uBAAOA,IAAP;AATJ;AAWD,WA1hB4D,CA4hB7D;;;AACA,mBAASsxB,YAAT,CAAsBT,SAAtB,EAAiC;AAC/B,gBAAI,CAACA,SAAS,CAAC1zB,WAAX,IAA0B,CAAC0zB,SAAS,CAAC1zB,WAAV,CAAsBtC,IAArD,EAA2D;AACzD,qBAAOqzB,SAAP;AACD;;AACD,mBAAO2C,SAAS,CAAC1zB,WAAV,CAAsBtC,IAA7B;AACD;;AAEDszB,UAAAA,cAAc,CAACpjB,cAAf,GAAgCA,cAAhC;AACAojB,UAAAA,cAAc,CAACiE,iBAAf,GAAmCrnB,cAAc,CAACqnB,iBAAlD;AACAjE,UAAAA,cAAc,CAACziB,SAAf,GAA2ByiB,cAA3B;AAEA,iBAAOA,cAAP;AACD,SAziBD;AA2iBA;;AAA4B,OAhlBA,EAglBC1zB,IAhlBD,CAglBMV,OAhlBN,EAglBeM,mBAAmB,CAAC,CAAD,CAhlBlC,CAAD;AAklB3B;AAAO,KAp4IG;AAq4IV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;AAOA;;AACA,UAAIoe,qBAAqB,GAAGzd,MAAM,CAACyd,qBAAnC;AACA,UAAI7c,cAAc,GAAGZ,MAAM,CAACW,SAAP,CAAiBC,cAAtC;AACA,UAAIy2B,gBAAgB,GAAGr3B,MAAM,CAACW,SAAP,CAAiBwZ,oBAAxC;;AAEA,eAASqG,QAAT,CAAkBxe,GAAlB,EAAuB;AACtB,YAAIA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAKkE,SAA5B,EAAuC;AACtC,gBAAM,IAAI6K,SAAJ,CAAc,uDAAd,CAAN;AACA;;AAED,eAAO/Q,MAAM,CAACgC,GAAD,CAAb;AACA;;AAED,eAASs1B,eAAT,GAA2B;AAC1B,YAAI;AACH,cAAI,CAACt3B,MAAM,CAAC2yB,MAAZ,EAAoB;AACnB,mBAAO,KAAP;AACA,WAHE,CAKH;AAEA;;;AACA,cAAI4E,KAAK,GAAG,IAAIrtB,MAAJ,CAAW,KAAX,CAAZ,CARG,CAQ6B;;AAChCqtB,UAAAA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAX;;AACA,cAAIv3B,MAAM,CAAC2jB,mBAAP,CAA2B4T,KAA3B,EAAkC,CAAlC,MAAyC,GAA7C,EAAkD;AACjD,mBAAO,KAAP;AACA,WAZE,CAcH;;;AACA,cAAIC,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIj4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC5Bi4B,YAAAA,KAAK,CAAC,MAAMttB,MAAM,CAACutB,YAAP,CAAoBl4B,CAApB,CAAP,CAAL,GAAsCA,CAAtC;AACA;;AACD,cAAIm4B,MAAM,GAAG13B,MAAM,CAAC2jB,mBAAP,CAA2B6T,KAA3B,EAAkC3rB,GAAlC,CAAsC,UAAUxL,CAAV,EAAa;AAC/D,mBAAOm3B,KAAK,CAACn3B,CAAD,CAAZ;AACA,WAFY,CAAb;;AAGA,cAAIq3B,MAAM,CAAC7R,IAAP,CAAY,EAAZ,MAAoB,YAAxB,EAAsC;AACrC,mBAAO,KAAP;AACA,WAxBE,CA0BH;;;AACA,cAAI8R,KAAK,GAAG,EAAZ;AACA,iCAAuB9vB,KAAvB,CAA6B,EAA7B,EAAiC/D,OAAjC,CAAyC,UAAU8zB,MAAV,EAAkB;AAC1DD,YAAAA,KAAK,CAACC,MAAD,CAAL,GAAgBA,MAAhB;AACA,WAFD;;AAGA,cAAI53B,MAAM,CAACuZ,IAAP,CAAYvZ,MAAM,CAAC2yB,MAAP,CAAc,EAAd,EAAkBgF,KAAlB,CAAZ,EAAsC9R,IAAtC,CAA2C,EAA3C,MACF,sBADF,EAC0B;AACzB,mBAAO,KAAP;AACA;;AAED,iBAAO,IAAP;AACA,SArCD,CAqCE,OAAOO,GAAP,EAAY;AACb;AACA,iBAAO,KAAP;AACA;AACD;;AAEDpnB,MAAAA,MAAM,CAACD,OAAP,GAAiBu4B,eAAe,KAAKt3B,MAAM,CAAC2yB,MAAZ,GAAqB,UAAU5sB,MAAV,EAAkBd,MAAlB,EAA0B;AAC9E,YAAI0d,IAAJ;AACA,YAAIkV,EAAE,GAAGrX,QAAQ,CAACza,MAAD,CAAjB;AACA,YAAI+xB,OAAJ;;AAEA,aAAK,IAAIh3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuD,SAAS,CAACJ,MAA9B,EAAsCnD,CAAC,EAAvC,EAA2C;AAC1C6hB,UAAAA,IAAI,GAAG3iB,MAAM,CAACqE,SAAS,CAACvD,CAAD,CAAV,CAAb;;AAEA,eAAK,IAAIoD,GAAT,IAAgBye,IAAhB,EAAsB;AACrB,gBAAI/hB,cAAc,CAACnB,IAAf,CAAoBkjB,IAApB,EAA0Bze,GAA1B,CAAJ,EAAoC;AACnC2zB,cAAAA,EAAE,CAAC3zB,GAAD,CAAF,GAAUye,IAAI,CAACze,GAAD,CAAd;AACA;AACD;;AAED,cAAIuZ,qBAAJ,EAA2B;AAC1Bqa,YAAAA,OAAO,GAAGra,qBAAqB,CAACkF,IAAD,CAA/B;;AACA,iBAAK,IAAIpjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGu4B,OAAO,CAAC7zB,MAA5B,EAAoC1E,CAAC,EAArC,EAAyC;AACxC,kBAAI83B,gBAAgB,CAAC53B,IAAjB,CAAsBkjB,IAAtB,EAA4BmV,OAAO,CAACv4B,CAAD,CAAnC,CAAJ,EAA6C;AAC5Cs4B,gBAAAA,EAAE,CAACC,OAAO,CAACv4B,CAAD,CAAR,CAAF,GAAiBojB,IAAI,CAACmV,OAAO,CAACv4B,CAAD,CAAR,CAArB;AACA;AACD;AACD;AACD;;AAED,eAAOs4B,EAAP;AACA,OAzBD;AA4BA;AAAO,KAr+IG;AAs+IV;;AACA;AAAO,cAAS74B,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;AAS/C,YAAIsrB,YAAY,GAAG,wBAAW,CAAE,CAAhC;;AAEA,YAAItrB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,cAAIiS,oBAAoB,GAAG1b,mBAAmB,CAAC,EAAD,CAA9C;;AACA,cAAI04B,kBAAkB,GAAG,EAAzB;AACA,cAAIlzB,GAAG,GAAGvD,QAAQ,CAAC7B,IAAT,CAAcoC,IAAd,CAAmB7B,MAAM,CAACW,SAAP,CAAiBC,cAApC,CAAV;;AAEAoxB,UAAAA,YAAY,GAAG,sBAASvE,IAAT,EAAe;AAC5B,gBAAIlH,OAAO,GAAG,cAAckH,IAA5B;;AACA,gBAAI,OAAO0E,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,cAAAA,OAAO,CAAChG,KAAR,CAAc5F,OAAd;AACD;;AACD,gBAAI;AACF;AACA;AACA;AACA,oBAAM,IAAIta,KAAJ,CAAUsa,OAAV,CAAN;AACD,aALD,CAKE,OAAOhE,CAAP,EAAU,CAAE;AACf,WAXD;AAYD;AAED;;;;;;;;;;;;;AAWA,iBAASxS,cAAT,CAAwBioB,SAAxB,EAAmCtY,MAAnC,EAA2C0F,QAA3C,EAAqDmQ,aAArD,EAAoE0C,QAApE,EAA8E;AAC5E,cAAIvxB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,iBAAK,IAAIovB,YAAT,IAAyBF,SAAzB,EAAoC;AAClC,kBAAInzB,GAAG,CAACmzB,SAAD,EAAYE,YAAZ,CAAP,EAAkC;AAChC,oBAAI/L,KAAJ,CADgC,CAEhC;AACA;AACA;;AACA,oBAAI;AACF;AACA;AACA,sBAAI,OAAO6L,SAAS,CAACE,YAAD,CAAhB,KAAmC,UAAvC,EAAmD;AACjD,wBAAI9R,GAAG,GAAGna,KAAK,CACb,CAACspB,aAAa,IAAI,aAAlB,IAAmC,IAAnC,GAA0CnQ,QAA1C,GAAqD,SAArD,GAAiE8S,YAAjE,GAAgF,gBAAhF,GACA,8EADA,YACwFF,SAAS,CAACE,YAAD,CADjG,IACkH,IAFrG,CAAf;AAIA9R,oBAAAA,GAAG,CAACvmB,IAAJ,GAAW,qBAAX;AACA,0BAAMumB,GAAN;AACD;;AACD+F,kBAAAA,KAAK,GAAG6L,SAAS,CAACE,YAAD,CAAT,CAAwBxY,MAAxB,EAAgCwY,YAAhC,EAA8C3C,aAA9C,EAA6DnQ,QAA7D,EAAuE,IAAvE,EAA6ErK,oBAA7E,CAAR;AACD,iBAZD,CAYE,OAAOod,EAAP,EAAW;AACXhM,kBAAAA,KAAK,GAAGgM,EAAR;AACD;;AACD,oBAAIhM,KAAK,IAAI,EAAEA,KAAK,YAAYlgB,KAAnB,CAAb,EAAwC;AACtC+lB,kBAAAA,YAAY,CACV,CAACuD,aAAa,IAAI,aAAlB,IAAmC,0BAAnC,GACAnQ,QADA,GACW,IADX,GACkB8S,YADlB,GACiC,iCADjC,GAEA,2DAFA,YAEqE/L,KAFrE,IAE6E,IAF7E,GAGA,iEAHA,GAIA,gEAJA,GAKA,iCANU,CAAZ;AAQD;;AACD,oBAAIA,KAAK,YAAYlgB,KAAjB,IAA0B,EAAEkgB,KAAK,CAAC5F,OAAN,IAAiBwR,kBAAnB,CAA9B,EAAsE;AACpE;AACA;AACAA,kBAAAA,kBAAkB,CAAC5L,KAAK,CAAC5F,OAAP,CAAlB,GAAoC,IAApC;AAEA,sBAAIwO,KAAK,GAAGkD,QAAQ,GAAGA,QAAQ,EAAX,GAAgB,EAApC;AAEAjG,kBAAAA,YAAY,CACV,YAAY5M,QAAZ,GAAuB,SAAvB,GAAmC+G,KAAK,CAAC5F,OAAzC,IAAoDwO,KAAK,IAAI,IAAT,GAAgBA,KAAhB,GAAwB,EAA5E,CADU,CAAZ;AAGD;AACF;AACF;AACF;AACF;AAED;;;;;;;AAKAhlB,QAAAA,cAAc,CAACqnB,iBAAf,GAAmC,YAAW;AAC5C,cAAI1wB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCivB,YAAAA,kBAAkB,GAAG,EAArB;AACD;AACF,SAJD;;AAMA/4B,QAAAA,MAAM,CAACD,OAAP,GAAiBgR,cAAjB;AAEA;AAA4B,OAvGA,EAuGCtQ,IAvGD,CAuGMV,OAvGN,EAuGeM,mBAAmB,CAAC,CAAD,CAvGlC,CAAD;AAyG3B;AAAO,KAnlJG;AAolJV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;;AASA,UAAI0b,oBAAoB,GAAG1b,mBAAmB,CAAC,EAAD,CAA9C;;AAEA,eAAS+4B,aAAT,GAAyB,CAAE;;AAC3B,eAASC,sBAAT,GAAkC,CAAE;;AACpCA,MAAAA,sBAAsB,CAACjB,iBAAvB,GAA2CgB,aAA3C;;AAEAp5B,MAAAA,MAAM,CAACD,OAAP,GAAiB,YAAW;AAC1B,iBAASu5B,IAAT,CAAchtB,KAAd,EAAqBgqB,QAArB,EAA+BC,aAA/B,EAA8CnQ,QAA9C,EAAwDoQ,YAAxD,EAAsEC,MAAtE,EAA8E;AAC5E,cAAIA,MAAM,KAAK1a,oBAAf,EAAqC;AACnC;AACA;AACD;;AACD,cAAIqL,GAAG,GAAG,IAAIna,KAAJ,CACR,yFACA,+CADA,GAEA,gDAHQ,CAAV;AAKAma,UAAAA,GAAG,CAACvmB,IAAJ,GAAW,qBAAX;AACA,gBAAMumB,GAAN;AACD;;AAAA;AACDkS,QAAAA,IAAI,CAACjD,UAAL,GAAkBiD,IAAlB;;AACA,iBAASC,OAAT,GAAmB;AACjB,iBAAOD,IAAP;AACD;;AAAA,SAjByB,CAkB1B;AACA;;AACA,YAAInF,cAAc,GAAG;AACnBxgB,UAAAA,KAAK,EAAE2lB,IADY;AAEnBjF,UAAAA,IAAI,EAAEiF,IAFa;AAGnBhF,UAAAA,IAAI,EAAEgF,IAHa;AAInB/E,UAAAA,MAAM,EAAE+E,IAJW;AAKnB73B,UAAAA,MAAM,EAAE63B,IALW;AAMnB9E,UAAAA,MAAM,EAAE8E,IANW;AAOnB7E,UAAAA,MAAM,EAAE6E,IAPW;AASnB5E,UAAAA,GAAG,EAAE4E,IATc;AAUnB1E,UAAAA,OAAO,EAAE2E,OAVU;AAWnBjrB,UAAAA,OAAO,EAAEgrB,IAXU;AAYnBvE,UAAAA,WAAW,EAAEuE,IAZM;AAanBrE,UAAAA,UAAU,EAAEsE,OAbO;AAcnB/qB,UAAAA,IAAI,EAAE8qB,IAda;AAenBlE,UAAAA,QAAQ,EAAEmE,OAfS;AAgBnBjE,UAAAA,KAAK,EAAEiE,OAhBY;AAiBnB/D,UAAAA,SAAS,EAAE+D,OAjBQ;AAkBnB7D,UAAAA,KAAK,EAAE6D,OAlBY;AAmBnB3D,UAAAA,KAAK,EAAE2D,OAnBY;AAqBnBxoB,UAAAA,cAAc,EAAEsoB,sBArBG;AAsBnBjB,UAAAA,iBAAiB,EAAEgB;AAtBA,SAArB;AAyBAjF,QAAAA,cAAc,CAACziB,SAAf,GAA2ByiB,cAA3B;AAEA,eAAOA,cAAP;AACD,OAhDD;AAmDA;;AAAO,KA1pJG;AA2pJV;;AACA;AAAO,cAASn0B,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,OAAC,YAAW;AACR;;AACA,iBAAS2J,KAAT,GAAiB,CAAE;;AACnB,iBAAS4lB,CAAT,CAAWxlB,QAAX,EAAqBG,UAArB,EAAiC;AAC7B,cAAIivB,UAAJ;AAAA,cAAgBC,KAAhB;AAAA,cAAuBC,MAAvB;AAAA,cAA+Bn5B,CAA/B;AAAA,cAAkC0K,QAAQ,GAAG0uB,cAA7C;;AACA,eAAKp5B,CAAC,GAAG8E,SAAS,CAACJ,MAAnB,EAA2B1E,CAAC,KAAK,CAAjC;AAAsCw1B,YAAAA,KAAK,CAACrnB,IAAN,CAAWrJ,SAAS,CAAC9E,CAAD,CAApB;AAAtC;;AACA,cAAIgK,UAAU,IAAI,QAAQA,UAAU,CAACU,QAArC,EAA+C;AAC3C,gBAAI,CAAC8qB,KAAK,CAAC9wB,MAAX,EAAmB8wB,KAAK,CAACrnB,IAAN,CAAWnE,UAAU,CAACU,QAAtB;AACnB,mBAAOV,UAAU,CAACU,QAAlB;AACH;;AACD,iBAAO8qB,KAAK,CAAC9wB,MAAb;AAAqB,gBAAI,CAACw0B,KAAK,GAAG1D,KAAK,CAAC6D,GAAN,EAAT,KAAyB,KAAK,CAAL,KAAWH,KAAK,CAACG,GAA9C,EAAmD,KAAKr5B,CAAC,GAAGk5B,KAAK,CAACx0B,MAAf,EAAuB1E,CAAC,EAAxB;AAA8Bw1B,cAAAA,KAAK,CAACrnB,IAAN,CAAW+qB,KAAK,CAACl5B,CAAD,CAAhB;AAA9B,aAAnD,MAA4G;AAC7H,kBAAIk5B,KAAK,KAAK,CAAC,CAAX,IAAgBA,KAAK,KAAK,CAAC,CAA/B,EAAkCA,KAAK,GAAG,IAAR;AAClC,kBAAIC,MAAM,GAAG,cAAc,OAAOtvB,QAAlC,EAA4C,IAAI,QAAQqvB,KAAZ,EAAmBA,KAAK,GAAG,EAAR,CAAnB,KAAoC,IAAI,YAAY,OAAOA,KAAvB,EAA8BA,KAAK,GAAGvuB,MAAM,CAACuuB,KAAD,CAAd,CAA9B,KAA0D,IAAI,YAAY,OAAOA,KAAvB,EAA8BC,MAAM,GAAG,CAAC,CAAV;AACxK,kBAAIA,MAAM,IAAIF,UAAd,EAA0BvuB,QAAQ,CAACA,QAAQ,CAAChG,MAAT,GAAkB,CAAnB,CAAR,IAAiCw0B,KAAjC,CAA1B,KAAuE,IAAIxuB,QAAQ,KAAK0uB,cAAjB,EAAiC1uB,QAAQ,GAAG,CAAEwuB,KAAF,CAAX,CAAjC,KAA4DxuB,QAAQ,CAACyD,IAAT,CAAc+qB,KAAd;AACnID,cAAAA,UAAU,GAAGE,MAAb;AACH;AALD;;AAMA,cAAI73B,CAAC,GAAG,IAAImI,KAAJ,EAAR;AACAnI,UAAAA,CAAC,CAACuI,QAAF,GAAaA,QAAb;AACAvI,UAAAA,CAAC,CAACoJ,QAAF,GAAaA,QAAb;AACApJ,UAAAA,CAAC,CAAC0I,UAAF,GAAe,QAAQA,UAAR,GAAqB,KAAK,CAA1B,GAA8BA,UAA7C;AACA1I,UAAAA,CAAC,CAACqD,GAAF,GAAQ,QAAQqF,UAAR,GAAqB,KAAK,CAA1B,GAA8BA,UAAU,CAACrF,GAAjD;AACA,cAAI,KAAK,CAAL,KAAW8R,OAAO,CAAClM,KAAvB,EAA8BkM,OAAO,CAAClM,KAAR,CAAcjJ,CAAd;AAC9B,iBAAOA,CAAP;AACH;;AACD,iBAAS0D,MAAT,CAAgBR,GAAhB,EAAqBuH,KAArB,EAA4B;AACxB,eAAK,IAAI/L,CAAT,IAAc+L,KAAd;AAAqBvH,YAAAA,GAAG,CAACxE,CAAD,CAAH,GAAS+L,KAAK,CAAC/L,CAAD,CAAd;AAArB;;AACA,iBAAOwE,GAAP;AACH;;AACD,iBAAS4M,YAAT,CAAsB7G,KAAtB,EAA6BwB,KAA7B,EAAoC;AAChC,iBAAOsjB,CAAC,CAAC9kB,KAAK,CAACV,QAAP,EAAiB7E,MAAM,CAACA,MAAM,CAAC,EAAD,EAAKuF,KAAK,CAACP,UAAX,CAAP,EAA+B+B,KAA/B,CAAvB,EAA8DjH,SAAS,CAACJ,MAAV,GAAmB,CAAnB,GAAuB,GAAGuT,KAAH,CAAS/X,IAAT,CAAc4E,SAAd,EAAyB,CAAzB,CAAvB,GAAqDyF,KAAK,CAACG,QAAzH,CAAR;AACH;;AACD,iBAAS4uB,aAAT,CAAuBlrB,SAAvB,EAAkC;AAC9B,cAAI,CAACA,SAAS,CAACmrB,GAAX,KAAmBnrB,SAAS,CAACmrB,GAAV,GAAgB,CAAC,CAApC,KAA0C,KAAKC,KAAK,CAACrrB,IAAN,CAAWC,SAAX,CAAnD,EAA0E,CAACqI,OAAO,CAACgjB,iBAAR,IAA6BrnB,UAA9B,EAA0CsnB,QAA1C;AAC7E;;AACD,iBAASA,QAAT,GAAoB;AAChB,cAAIp4B,CAAJ;AAAA,cAAOq4B,IAAI,GAAGH,KAAd;AACAA,UAAAA,KAAK,GAAG,EAAR;;AACA,iBAAOl4B,CAAC,GAAGq4B,IAAI,CAACN,GAAL,EAAX;AAAuB,gBAAI/3B,CAAC,CAACi4B,GAAN,EAAWK,eAAe,CAACt4B,CAAD,CAAf;AAAlC;AACH;;AACD,iBAASu4B,cAAT,CAAwB5rB,IAAxB,EAA8B1D,KAA9B,EAAqCuvB,SAArC,EAAgD;AAC5C,cAAI,YAAY,OAAOvvB,KAAnB,IAA4B,YAAY,OAAOA,KAAnD,EAA0D,OAAO,KAAK,CAAL,KAAW0D,IAAI,CAAC8rB,SAAvB;AAC1D,cAAI,YAAY,OAAOxvB,KAAK,CAACV,QAA7B,EAAuC,OAAO,CAACoE,IAAI,CAAC+rB,qBAAN,IAA+BC,WAAW,CAAChsB,IAAD,EAAO1D,KAAK,CAACV,QAAb,CAAjD,CAAvC,KAAqH,OAAOiwB,SAAS,IAAI7rB,IAAI,CAAC+rB,qBAAL,KAA+BzvB,KAAK,CAACV,QAAzD;AACxH;;AACD,iBAASowB,WAAT,CAAqBhsB,IAArB,EAA2BpE,QAA3B,EAAqC;AACjC,iBAAOoE,IAAI,CAACisB,GAAL,KAAarwB,QAAb,IAAyBoE,IAAI,CAACpE,QAAL,CAAcsB,WAAd,OAAgCtB,QAAQ,CAACsB,WAAT,EAAhE;AACH;;AACD,iBAASgvB,YAAT,CAAsB5vB,KAAtB,EAA6B;AACzB,cAAIwB,KAAK,GAAG/G,MAAM,CAAC,EAAD,EAAKuF,KAAK,CAACP,UAAX,CAAlB;AACA+B,UAAAA,KAAK,CAACrB,QAAN,GAAiBH,KAAK,CAACG,QAAvB;AACA,cAAIM,YAAY,GAAGT,KAAK,CAACV,QAAN,CAAemB,YAAlC;AACA,cAAI,KAAK,CAAL,KAAWA,YAAf,EAA6B,KAAK,IAAIhL,CAAT,IAAcgL,YAAd;AAA4B,gBAAI,KAAK,CAAL,KAAWe,KAAK,CAAC/L,CAAD,CAApB,EAAyB+L,KAAK,CAAC/L,CAAD,CAAL,GAAWgL,YAAY,CAAChL,CAAD,CAAvB;AAArD;AAC7B,iBAAO+L,KAAP;AACH;;AACD,iBAASquB,UAAT,CAAoBvwB,QAApB,EAA8BwwB,KAA9B,EAAqC;AACjC,cAAIpsB,IAAI,GAAGosB,KAAK,GAAG/1B,QAAQ,CAACg2B,eAAT,CAAyB,4BAAzB,EAAuDzwB,QAAvD,CAAH,GAAsEvF,QAAQ,CAACmD,aAAT,CAAuBoC,QAAvB,CAAtF;AACAoE,UAAAA,IAAI,CAACisB,GAAL,GAAWrwB,QAAX;AACA,iBAAOoE,IAAP;AACH;;AACD,iBAASssB,UAAT,CAAoBtsB,IAApB,EAA0B;AACtB,cAAIA,IAAI,CAACxC,UAAT,EAAqBwC,IAAI,CAACxC,UAAL,CAAgBE,WAAhB,CAA4BsC,IAA5B;AACxB;;AACD,iBAASusB,WAAT,CAAqBvsB,IAArB,EAA2B3N,IAA3B,EAAiCm6B,GAAjC,EAAsCvzB,KAAtC,EAA6CmzB,KAA7C,EAAoD;AAChD,cAAI,gBAAgB/5B,IAApB,EAA0BA,IAAI,GAAG,OAAP;AAC1B,cAAI,UAAUA,IAAd,EAAoB,CAApB,KAA2B,IAAI,UAAUA,IAAd,EAAoB;AAC3C,gBAAIm6B,GAAJ,EAASA,GAAG,CAAC,IAAD,CAAH;AACT,gBAAIvzB,KAAJ,EAAWA,KAAK,CAAC+G,IAAD,CAAL;AACd,WAH0B,MAGpB,IAAI,YAAY3N,IAAZ,IAAoB,CAAC+5B,KAAzB,EAAgCpsB,IAAI,CAACc,SAAL,GAAiB7H,KAAK,IAAI,EAA1B,CAAhC,KAAmE,IAAI,YAAY5G,IAAhB,EAAsB;AAC5F,gBAAI,CAAC4G,KAAD,IAAU,YAAY,OAAOA,KAA7B,IAAsC,YAAY,OAAOuzB,GAA7D,EAAkExsB,IAAI,CAACmO,KAAL,CAAWse,OAAX,GAAqBxzB,KAAK,IAAI,EAA9B;;AAClE,gBAAIA,KAAK,IAAI,qBAAmBA,KAAnB,CAAb,EAAuC;AACnC,kBAAI,YAAY,OAAOuzB,GAAvB,EAA4B,KAAK,IAAIz6B,CAAT,IAAcy6B,GAAd;AAAmB,oBAAI,EAAEz6B,CAAC,IAAIkH,KAAP,CAAJ,EAAmB+G,IAAI,CAACmO,KAAL,CAAWpc,CAAX,IAAgB,EAAhB;AAAtC;;AAC5B,mBAAK,IAAIA,CAAT,IAAckH,KAAd;AAAqB+G,gBAAAA,IAAI,CAACmO,KAAL,CAAWpc,CAAX,IAAgB,YAAY,OAAOkH,KAAK,CAAClH,CAAD,CAAxB,IAA+B26B,kBAAkB,CAACzvB,IAAnB,CAAwBlL,CAAxB,MAA+B,CAAC,CAA/D,GAAmEkH,KAAK,CAAClH,CAAD,CAAL,GAAW,IAA9E,GAAqFkH,KAAK,CAAClH,CAAD,CAA1G;AAArB;AACH;AACJ,WANyE,MAMnE,IAAI,8BAA8BM,IAAlC,EAAwC;AAC3C,gBAAI4G,KAAJ,EAAW+G,IAAI,CAAC2sB,SAAL,GAAiB1zB,KAAK,CAACknB,MAAN,IAAgB,EAAjC;AACd,WAFM,MAEA,IAAI,OAAO9tB,IAAI,CAAC,CAAD,CAAX,IAAkB,OAAOA,IAAI,CAAC,CAAD,CAAjC,EAAsC;AACzC,gBAAIu6B,UAAU,GAAGv6B,IAAI,MAAMA,IAAI,GAAGA,IAAI,CAAC4D,OAAL,CAAa,UAAb,EAAyB,EAAzB,CAAb,CAArB;AACA5D,YAAAA,IAAI,GAAGA,IAAI,CAAC6K,WAAL,GAAmB4a,SAAnB,CAA6B,CAA7B,CAAP;;AACA,gBAAI7e,KAAJ,EAAW;AACP,kBAAI,CAACuzB,GAAL,EAAUxsB,IAAI,CAAC2U,gBAAL,CAAsBtiB,IAAtB,EAA4Bw6B,UAA5B,EAAwCD,UAAxC;AACb,aAFD,MAEO5sB,IAAI,CAAC8sB,mBAAL,CAAyBz6B,IAAzB,EAA+Bw6B,UAA/B,EAA2CD,UAA3C;;AACP,aAAC5sB,IAAI,CAAC+sB,GAAL,KAAa/sB,IAAI,CAAC+sB,GAAL,GAAW,EAAxB,CAAD,EAA8B16B,IAA9B,IAAsC4G,KAAtC;AACH,WAPM,MAOA,IAAI,WAAW5G,IAAX,IAAmB,WAAWA,IAA9B,IAAsC,CAAC+5B,KAAvC,IAAgD/5B,IAAI,IAAI2N,IAA5D,EAAkE;AACrEgtB,YAAAA,WAAW,CAAChtB,IAAD,EAAO3N,IAAP,EAAa,QAAQ4G,KAAR,GAAgB,EAAhB,GAAqBA,KAAlC,CAAX;AACA,gBAAI,QAAQA,KAAR,IAAiBA,KAAK,KAAK,CAAC,CAAhC,EAAmC+G,IAAI,CAACitB,eAAL,CAAqB56B,IAArB;AACtC,WAHM,MAGA;AACH,gBAAI66B,EAAE,GAAGd,KAAK,IAAI/5B,IAAI,MAAMA,IAAI,GAAGA,IAAI,CAAC4D,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAAb,CAAtB;AACA,gBAAI,QAAQgD,KAAR,IAAiBA,KAAK,KAAK,CAAC,CAAhC;AAAmC,kBAAIi0B,EAAJ,EAAQltB,IAAI,CAACmtB,iBAAL,CAAuB,8BAAvB,EAAuD96B,IAAI,CAAC6K,WAAL,EAAvD,EAAR,KAAyF8C,IAAI,CAACitB,eAAL,CAAqB56B,IAArB;AAA5H,mBAA6J,IAAI,cAAc,OAAO4G,KAAzB,EAAgC,IAAIi0B,EAAJ,EAAQltB,IAAI,CAACotB,cAAL,CAAoB,8BAApB,EAAoD/6B,IAAI,CAAC6K,WAAL,EAApD,EAAwEjE,KAAxE,EAAR,KAA6F+G,IAAI,CAACqtB,YAAL,CAAkBh7B,IAAlB,EAAwB4G,KAAxB;AAC7R;AACJ;;AACD,iBAAS+zB,WAAT,CAAqBhtB,IAArB,EAA2B3N,IAA3B,EAAiC4G,KAAjC,EAAwC;AACpC,cAAI;AACA+G,YAAAA,IAAI,CAAC3N,IAAD,CAAJ,GAAa4G,KAAb;AACH,WAFD,CAEE,OAAOiD,CAAP,EAAU,CAAE;AACjB;;AACD,iBAAS2wB,UAAT,CAAoB3wB,CAApB,EAAuB;AACnB,iBAAO,KAAK6wB,GAAL,CAAS7wB,CAAC,CAAC1E,IAAX,EAAiBgR,OAAO,CAACvM,KAAR,IAAiBuM,OAAO,CAACvM,KAAR,CAAcC,CAAd,CAAjB,IAAqCA,CAAtD,CAAP;AACH;;AACD,iBAASoxB,WAAT,GAAuB;AACnB,cAAIn7B,CAAJ;;AACA,iBAAOA,CAAC,GAAGo7B,MAAM,CAACnC,GAAP,EAAX,EAAyB;AACrB,gBAAI5iB,OAAO,CAACglB,UAAZ,EAAwBhlB,OAAO,CAACglB,UAAR,CAAmBr7B,CAAnB;AACxB,gBAAIA,CAAC,CAAC4I,iBAAN,EAAyB5I,CAAC,CAAC4I,iBAAF;AAC5B;AACJ;;AACD,iBAASmQ,IAAT,CAAcuiB,GAAd,EAAmBnxB,KAAnB,EAA0ByB,OAA1B,EAAmC2vB,QAAnC,EAA6CvwB,MAA7C,EAAqDwwB,aAArD,EAAoE;AAChE,cAAI,CAACC,SAAS,EAAd,EAAkB;AACdC,YAAAA,SAAS,GAAG,QAAQ1wB,MAAR,IAAkB,KAAK,CAAL,KAAWA,MAAM,CAAC2wB,eAAhD;AACAjC,YAAAA,SAAS,GAAG,QAAQ4B,GAAR,IAAe,EAAE,mBAAmBA,GAArB,CAA3B;AACH;;AACD,cAAIxrB,GAAG,GAAG8rB,KAAK,CAACN,GAAD,EAAMnxB,KAAN,EAAayB,OAAb,EAAsB2vB,QAAtB,EAAgCC,aAAhC,CAAf;AACA,cAAIxwB,MAAM,IAAI8E,GAAG,CAACzE,UAAJ,KAAmBL,MAAjC,EAAyCA,MAAM,CAACkR,WAAP,CAAmBpM,GAAnB;;AACzC,cAAI,CAAC,GAAE2rB,SAAP,EAAkB;AACd/B,YAAAA,SAAS,GAAG,CAAC,CAAb;AACA,gBAAI,CAAC8B,aAAL,EAAoBL,WAAW;AAClC;;AACD,iBAAOrrB,GAAP;AACH;;AACD,iBAAS8rB,KAAT,CAAeN,GAAf,EAAoBnxB,KAApB,EAA2ByB,OAA3B,EAAoC2vB,QAApC,EAA8CC,aAA9C,EAA6D;AACzD,cAAIl1B,GAAG,GAAGg1B,GAAV;AAAA,cAAeO,WAAW,GAAGH,SAA7B;AACA,cAAI,QAAQvxB,KAAZ,EAAmBA,KAAK,GAAG,EAAR;;AACnB,cAAI,YAAY,OAAOA,KAAvB,EAA8B;AAC1B,gBAAImxB,GAAG,IAAI,KAAK,CAAL,KAAWA,GAAG,CAAC3B,SAAtB,IAAmC2B,GAAG,CAACjwB,UAAvC,KAAsD,CAACiwB,GAAG,CAAC9vB,UAAL,IAAmBgwB,aAAzE,CAAJ,EAA6F;AACzF,kBAAIF,GAAG,CAACQ,SAAJ,IAAiB3xB,KAArB,EAA4BmxB,GAAG,CAACQ,SAAJ,GAAgB3xB,KAAhB;AAC/B,aAFD,MAEO;AACH7D,cAAAA,GAAG,GAAGpC,QAAQ,CAAC63B,cAAT,CAAwB5xB,KAAxB,CAAN;;AACA,kBAAImxB,GAAJ,EAAS;AACL,oBAAIA,GAAG,CAACjwB,UAAR,EAAoBiwB,GAAG,CAACjwB,UAAJ,CAAe2wB,YAAf,CAA4B11B,GAA5B,EAAiCg1B,GAAjC;AACpBW,gBAAAA,iBAAiB,CAACX,GAAD,EAAM,CAAC,CAAP,CAAjB;AACH;AACJ;;AACDh1B,YAAAA,GAAG,CAAC41B,aAAJ,GAAoB,CAAC,CAArB;AACA,mBAAO51B,GAAP;AACH;;AACD,cAAI,cAAc,OAAO6D,KAAK,CAACV,QAA/B,EAAyC,OAAO0yB,uBAAuB,CAACb,GAAD,EAAMnxB,KAAN,EAAayB,OAAb,EAAsB2vB,QAAtB,CAA9B;AACzCG,UAAAA,SAAS,GAAG,UAAUvxB,KAAK,CAACV,QAAhB,GAA2B,CAAC,CAA5B,GAAgC,oBAAoBU,KAAK,CAACV,QAA1B,GAAqC,CAAC,CAAtC,GAA0CiyB,SAAtF;;AACA,cAAI,CAACJ,GAAD,IAAQ,CAACzB,WAAW,CAACyB,GAAD,EAAM/wB,MAAM,CAACJ,KAAK,CAACV,QAAP,CAAZ,CAAxB,EAAuD;AACnDnD,YAAAA,GAAG,GAAG0zB,UAAU,CAACzvB,MAAM,CAACJ,KAAK,CAACV,QAAP,CAAP,EAAyBiyB,SAAzB,CAAhB;;AACA,gBAAIJ,GAAJ,EAAS;AACL,qBAAOA,GAAG,CAACc,UAAX;AAAuB91B,gBAAAA,GAAG,CAAC4V,WAAJ,CAAgBof,GAAG,CAACc,UAApB;AAAvB;;AACA,kBAAId,GAAG,CAACjwB,UAAR,EAAoBiwB,GAAG,CAACjwB,UAAJ,CAAe2wB,YAAf,CAA4B11B,GAA5B,EAAiCg1B,GAAjC;AACpBW,cAAAA,iBAAiB,CAACX,GAAD,EAAM,CAAC,CAAP,CAAjB;AACH;AACJ;;AACD,cAAIe,EAAE,GAAG/1B,GAAG,CAAC81B,UAAb;AAAA,cAAyBzwB,KAAK,GAAGrF,GAAG,CAAC41B,aAAJ,KAAsB51B,GAAG,CAAC41B,aAAJ,GAAoB,EAA1C,CAAjC;AAAA,cAAgFI,SAAS,GAAGnyB,KAAK,CAACG,QAAlG;;AACA,cAAI,CAACovB,SAAD,IAAc4C,SAAd,IAA2B,MAAMA,SAAS,CAACh4B,MAA3C,IAAqD,YAAY,OAAOg4B,SAAS,CAAC,CAAD,CAAjF,IAAwF,QAAQD,EAAhG,IAAsG,KAAK,CAAL,KAAWA,EAAE,CAAC1C,SAApH,IAAiI,QAAQ0C,EAAE,CAACE,WAAhJ,EAA6J;AACzJ,gBAAIF,EAAE,CAACP,SAAH,IAAgBQ,SAAS,CAAC,CAAD,CAA7B,EAAkCD,EAAE,CAACP,SAAH,GAAeQ,SAAS,CAAC,CAAD,CAAxB;AACrC,WAFD,MAEO,IAAIA,SAAS,IAAIA,SAAS,CAACh4B,MAAvB,IAAiC,QAAQ+3B,EAA7C,EAAiDG,aAAa,CAACl2B,GAAD,EAAMg2B,SAAN,EAAiB1wB,OAAjB,EAA0B2vB,QAA1B,EAAoC7B,SAAS,IAAI,QAAQ/tB,KAAK,CAACoiB,uBAA/D,CAAb;;AACxD0O,UAAAA,cAAc,CAACn2B,GAAD,EAAM6D,KAAK,CAACP,UAAZ,EAAwB+B,KAAxB,CAAd;AACA+vB,UAAAA,SAAS,GAAGG,WAAZ;AACA,iBAAOv1B,GAAP;AACH;;AACD,iBAASk2B,aAAT,CAAuBlB,GAAvB,EAA4BgB,SAA5B,EAAuC1wB,OAAvC,EAAgD2vB,QAAhD,EAA0DmB,WAA1D,EAAuE;AACnE,cAAIC,CAAJ;AAAA,cAAO38B,CAAP;AAAA,cAAU48B,MAAV;AAAA,cAAkB9D,KAAlB;AAAA,cAAyB+D,gBAAgB,GAAGvB,GAAG,CAAChwB,UAAhD;AAAA,cAA4DhB,QAAQ,GAAG,EAAvE;AAAA,cAA2E+E,KAAK,GAAG,EAAnF;AAAA,cAAuFytB,QAAQ,GAAG,CAAlG;AAAA,cAAqGngB,GAAG,GAAG,CAA3G;AAAA,cAA8GrP,GAAG,GAAGuvB,gBAAgB,CAACv4B,MAArI;AAAA,cAA6Iy4B,WAAW,GAAG,CAA3J;AAAA,cAA8JC,IAAI,GAAGV,SAAS,GAAGA,SAAS,CAACh4B,MAAb,GAAsB,CAApM;AACA,cAAI,MAAMgJ,GAAV,EAAe,KAAK,IAAI1N,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0N,GAApB,EAAyB1N,CAAC,EAA1B,EAA8B;AACzC,gBAAIq9B,MAAM,GAAGJ,gBAAgB,CAACj9B,CAAD,CAA7B;AAAA,gBAAkC+L,KAAK,GAAGsxB,MAAM,CAACf,aAAjD;AAAA,gBAAgE33B,GAAG,GAAGy4B,IAAI,IAAIrxB,KAAR,GAAgBsxB,MAAM,CAACzxB,UAAP,GAAoByxB,MAAM,CAACzxB,UAAP,CAAkB0xB,GAAtC,GAA4CvxB,KAAK,CAACpH,GAAlE,GAAwE,IAA9I;;AACA,gBAAI,QAAQA,GAAZ,EAAiB;AACbu4B,cAAAA,QAAQ;AACRztB,cAAAA,KAAK,CAAC9K,GAAD,CAAL,GAAa04B,MAAb;AACH,aAHD,MAGO,IAAItxB,KAAK,KAAK,KAAK,CAAL,KAAWsxB,MAAM,CAACtD,SAAlB,GAA8B+C,WAAW,GAAGO,MAAM,CAACnB,SAAP,CAAiBl4B,IAAjB,EAAH,GAA6B,CAAC,CAAvE,GAA2E84B,WAAhF,CAAT,EAAuGpyB,QAAQ,CAACyyB,WAAW,EAAZ,CAAR,GAA0BE,MAA1B;AACjH;AACD,cAAI,MAAMD,IAAV,EAAgB,KAAK,IAAIp9B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGo9B,IAApB,EAA0Bp9B,CAAC,EAA3B,EAA+B;AAC3Cg9B,YAAAA,MAAM,GAAGN,SAAS,CAAC18B,CAAD,CAAlB;AACAk5B,YAAAA,KAAK,GAAG,IAAR;AACA,gBAAIv0B,GAAG,GAAGq4B,MAAM,CAACr4B,GAAjB;;AACA,gBAAI,QAAQA,GAAZ,EAAiB;AACb,kBAAIu4B,QAAQ,IAAI,KAAK,CAAL,KAAWztB,KAAK,CAAC9K,GAAD,CAAhC,EAAuC;AACnCu0B,gBAAAA,KAAK,GAAGzpB,KAAK,CAAC9K,GAAD,CAAb;AACA8K,gBAAAA,KAAK,CAAC9K,GAAD,CAAL,GAAa,KAAK,CAAlB;AACAu4B,gBAAAA,QAAQ;AACX;AACJ,aAND,MAMO,IAAI,CAAChE,KAAD,IAAUnc,GAAG,GAAGogB,WAApB,EAAiC,KAAKJ,CAAC,GAAGhgB,GAAT,EAAcggB,CAAC,GAAGI,WAAlB,EAA+BJ,CAAC,EAAhC;AAAoC,kBAAI,KAAK,CAAL,KAAWryB,QAAQ,CAACqyB,CAAD,CAAnB,IAA0BlD,cAAc,CAACz5B,CAAC,GAAGsK,QAAQ,CAACqyB,CAAD,CAAb,EAAkBC,MAAlB,EAA0BF,WAA1B,CAA5C,EAAoF;AAC5J5D,gBAAAA,KAAK,GAAG94B,CAAR;AACAsK,gBAAAA,QAAQ,CAACqyB,CAAD,CAAR,GAAc,KAAK,CAAnB;AACA,oBAAIA,CAAC,KAAKI,WAAW,GAAG,CAAxB,EAA2BA,WAAW;AACtC,oBAAIJ,CAAC,KAAKhgB,GAAV,EAAeA,GAAG;AAClB;AACH;AANuC;;AAOxCmc,YAAAA,KAAK,GAAG8C,KAAK,CAAC9C,KAAD,EAAQ8D,MAAR,EAAgBhxB,OAAhB,EAAyB2vB,QAAzB,CAAb;AACA,gBAAIzC,KAAK,IAAIA,KAAK,KAAKwC,GAAvB,EAA4B,IAAI17B,CAAC,IAAI0N,GAAT,EAAcguB,GAAG,CAACpf,WAAJ,CAAgB4c,KAAhB,EAAd,KAA2C,IAAIA,KAAK,KAAK+D,gBAAgB,CAACj9B,CAAD,CAA9B,EAAmC,IAAIk5B,KAAK,KAAK+D,gBAAgB,CAACj9B,CAAC,GAAG,CAAL,CAA9B,EAAuCu6B,UAAU,CAAC0C,gBAAgB,CAACj9B,CAAD,CAAjB,CAAV,CAAvC,KAA6E07B,GAAG,CAAC6B,YAAJ,CAAiBrE,KAAjB,EAAwB+D,gBAAgB,CAACj9B,CAAD,CAAhB,IAAuB,IAA/C;AAC1L;AACD,cAAIk9B,QAAJ,EAAc,KAAK,IAAIl9B,CAAT,IAAcyP,KAAd;AAAqB,gBAAI,KAAK,CAAL,KAAWA,KAAK,CAACzP,CAAD,CAApB,EAAyBq8B,iBAAiB,CAAC5sB,KAAK,CAACzP,CAAD,CAAN,EAAW,CAAC,CAAZ,CAAjB;AAA9C;;AACd,iBAAO+c,GAAG,IAAIogB,WAAd;AAA2B,gBAAI,KAAK,CAAL,MAAYjE,KAAK,GAAGxuB,QAAQ,CAACyyB,WAAW,EAAZ,CAA5B,CAAJ,EAAkDd,iBAAiB,CAACnD,KAAD,EAAQ,CAAC,CAAT,CAAjB;AAA7E;AACH;;AACD,iBAASmD,iBAAT,CAA2BpuB,IAA3B,EAAiCuvB,WAAjC,EAA8C;AAC1C,cAAIpvB,SAAS,GAAGH,IAAI,CAACrC,UAArB;AACA,cAAIwC,SAAJ,EAAeqvB,gBAAgB,CAACrvB,SAAD,CAAhB,CAAf,KAAiD;AAC7C,gBAAI,QAAQH,IAAI,CAACquB,aAAb,IAA8BruB,IAAI,CAACquB,aAAL,CAAmB1uB,GAArD,EAA0DK,IAAI,CAACquB,aAAL,CAAmB1uB,GAAnB,CAAuB,IAAvB;AAC1D,gBAAI4vB,WAAW,KAAK,CAAC,CAAjB,IAAsB,QAAQvvB,IAAI,CAACquB,aAAvC,EAAsD/B,UAAU,CAACtsB,IAAD,CAAV;AACtDyvB,YAAAA,cAAc,CAACzvB,IAAD,CAAd;AACH;AACJ;;AACD,iBAASyvB,cAAT,CAAwBzvB,IAAxB,EAA8B;AAC1BA,UAAAA,IAAI,GAAGA,IAAI,CAAC0vB,SAAZ;;AACA,iBAAO1vB,IAAP,EAAa;AACT,gBAAI4R,IAAI,GAAG5R,IAAI,CAAC2vB,eAAhB;AACAvB,YAAAA,iBAAiB,CAACpuB,IAAD,EAAO,CAAC,CAAR,CAAjB;AACAA,YAAAA,IAAI,GAAG4R,IAAP;AACH;AACJ;;AACD,iBAASgd,cAAT,CAAwBnB,GAAxB,EAA6BjxB,KAA7B,EAAoCgwB,GAApC,EAAyC;AACrC,cAAIn6B,IAAJ;;AACA,eAAKA,IAAL,IAAam6B,GAAb;AAAkB,gBAAI,CAAC,CAAChwB,KAAD,IAAU,QAAQA,KAAK,CAACnK,IAAD,CAAxB,KAAmC,QAAQm6B,GAAG,CAACn6B,IAAD,CAAlD,EAA0Dk6B,WAAW,CAACkB,GAAD,EAAMp7B,IAAN,EAAYm6B,GAAG,CAACn6B,IAAD,CAAf,EAAuBm6B,GAAG,CAACn6B,IAAD,CAAH,GAAY,KAAK,CAAxC,EAA2Cw7B,SAA3C,CAAX;AAA5E;;AACA,eAAKx7B,IAAL,IAAamK,KAAb;AAAoB,gBAAI,EAAE,eAAenK,IAAf,IAAuB,gBAAgBA,IAAvC,IAA+CA,IAAI,IAAIm6B,GAAR,IAAehwB,KAAK,CAACnK,IAAD,CAAL,MAAiB,YAAYA,IAAZ,IAAoB,cAAcA,IAAlC,GAAyCo7B,GAAG,CAACp7B,IAAD,CAA5C,GAAqDm6B,GAAG,CAACn6B,IAAD,CAAzE,CAAhE,CAAJ,EAAuJk6B,WAAW,CAACkB,GAAD,EAAMp7B,IAAN,EAAYm6B,GAAG,CAACn6B,IAAD,CAAf,EAAuBm6B,GAAG,CAACn6B,IAAD,CAAH,GAAYmK,KAAK,CAACnK,IAAD,CAAxC,EAAgDw7B,SAAhD,CAAX;AAA3K;AACH;;AACD,iBAAS+B,gBAAT,CAA0BzvB,SAA1B,EAAqC;AACjC,cAAI9N,IAAI,GAAG8N,SAAS,CAACxL,WAAV,CAAsBtC,IAAjC;AACA,WAACw9B,UAAU,CAACx9B,IAAD,CAAV,KAAqBw9B,UAAU,CAACx9B,IAAD,CAAV,GAAmB,EAAxC,CAAD,EAA8C6N,IAA9C,CAAmDC,SAAnD;AACH;;AACD,iBAAS2vB,eAAT,CAAyBzwB,IAAzB,EAA+BvB,KAA/B,EAAsCC,OAAtC,EAA+C;AAC3C,cAAIgyB,IAAJ;AAAA,cAAUrE,IAAI,GAAGmE,UAAU,CAACxwB,IAAI,CAAChN,IAAN,CAA3B;;AACA,cAAIgN,IAAI,CAAClM,SAAL,IAAkBkM,IAAI,CAAClM,SAAL,CAAesH,MAArC,EAA6C;AACzCs1B,YAAAA,IAAI,GAAG,IAAI1wB,IAAJ,CAASvB,KAAT,EAAgBC,OAAhB,CAAP;AACAqF,YAAAA,SAAS,CAACnR,IAAV,CAAe89B,IAAf,EAAqBjyB,KAArB,EAA4BC,OAA5B;AACH,WAHD,MAGO;AACHgyB,YAAAA,IAAI,GAAG,IAAI3sB,SAAJ,CAActF,KAAd,EAAqBC,OAArB,CAAP;AACAgyB,YAAAA,IAAI,CAACp7B,WAAL,GAAmB0K,IAAnB;AACA0wB,YAAAA,IAAI,CAACt1B,MAAL,GAAcu1B,QAAd;AACH;;AACD,cAAItE,IAAJ,EAAU,KAAK,IAAI35B,CAAC,GAAG25B,IAAI,CAACj1B,MAAlB,EAA0B1E,CAAC,EAA3B;AAAiC,gBAAI25B,IAAI,CAAC35B,CAAD,CAAJ,CAAQ4C,WAAR,KAAwB0K,IAA5B,EAAkC;AACzE0wB,cAAAA,IAAI,CAACE,GAAL,GAAWvE,IAAI,CAAC35B,CAAD,CAAJ,CAAQk+B,GAAnB;AACAvE,cAAAA,IAAI,CAACwE,MAAL,CAAYn+B,CAAZ,EAAe,CAAf;AACA;AACH;AAJS;AAKV,iBAAOg+B,IAAP;AACH;;AACD,iBAASC,QAAT,CAAkBlyB,KAAlB,EAAyB2E,KAAzB,EAAgC1E,OAAhC,EAAyC;AACrC,iBAAO,KAAKpJ,WAAL,CAAiBmJ,KAAjB,EAAwBC,OAAxB,CAAP;AACH;;AACD,iBAASoyB,iBAAT,CAA2BhwB,SAA3B,EAAsCrC,KAAtC,EAA6C0E,IAA7C,EAAmDzE,OAAnD,EAA4D2vB,QAA5D,EAAsE;AAClE,cAAI,CAACvtB,SAAS,CAACiwB,GAAf,EAAoB;AAChBjwB,YAAAA,SAAS,CAACiwB,GAAV,GAAgB,CAAC,CAAjB;AACA,gBAAIjwB,SAAS,CAACkwB,GAAV,GAAgBvyB,KAAK,CAAC6B,GAA1B,EAA+B,OAAO7B,KAAK,CAAC6B,GAAb;AAC/B,gBAAIQ,SAAS,CAACkvB,GAAV,GAAgBvxB,KAAK,CAACpH,GAA1B,EAA+B,OAAOoH,KAAK,CAACpH,GAAb;;AAC/B,gBAAI,CAACyJ,SAAS,CAAC5C,IAAX,IAAmBmwB,QAAvB,EAAiC;AAC7B,kBAAIvtB,SAAS,CAACrF,kBAAd,EAAkCqF,SAAS,CAACrF,kBAAV;AACrC,aAFD,MAEO,IAAIqF,SAAS,CAACxF,yBAAd,EAAyCwF,SAAS,CAACxF,yBAAV,CAAoCmD,KAApC,EAA2CC,OAA3C;;AAChD,gBAAIA,OAAO,IAAIA,OAAO,KAAKoC,SAAS,CAACpC,OAArC,EAA8C;AAC1C,kBAAI,CAACoC,SAAS,CAACmwB,GAAf,EAAoBnwB,SAAS,CAACmwB,GAAV,GAAgBnwB,SAAS,CAACpC,OAA1B;AACpBoC,cAAAA,SAAS,CAACpC,OAAV,GAAoBA,OAApB;AACH;;AACD,gBAAI,CAACoC,SAAS,CAACowB,GAAf,EAAoBpwB,SAAS,CAACowB,GAAV,GAAgBpwB,SAAS,CAACrC,KAA1B;AACpBqC,YAAAA,SAAS,CAACrC,KAAV,GAAkBA,KAAlB;AACAqC,YAAAA,SAAS,CAACiwB,GAAV,GAAgB,CAAC,CAAjB;AACA,gBAAI,MAAM5tB,IAAV,EAAgB,IAAI,MAAMA,IAAN,IAAcgG,OAAO,CAACgoB,oBAAR,KAAiC,CAAC,CAAhD,IAAqD,CAACrwB,SAAS,CAAC5C,IAApE,EAA0EouB,eAAe,CAACxrB,SAAD,EAAY,CAAZ,EAAeutB,QAAf,CAAf,CAA1E,KAAwHrC,aAAa,CAAClrB,SAAD,CAAb;AACxI,gBAAIA,SAAS,CAACkwB,GAAd,EAAmBlwB,SAAS,CAACkwB,GAAV,CAAclwB,SAAd;AACtB;AACJ;;AACD,iBAASwrB,eAAT,CAAyBxrB,SAAzB,EAAoCqC,IAApC,EAA0CkrB,QAA1C,EAAoD+C,OAApD,EAA6D;AACzD,cAAI,CAACtwB,SAAS,CAACiwB,GAAf,EAAoB;AAChB,gBAAIM,QAAJ;AAAA,gBAAcX,IAAd;AAAA,gBAAoBY,KAApB;AAAA,gBAA2B7yB,KAAK,GAAGqC,SAAS,CAACrC,KAA7C;AAAA,gBAAoD2E,KAAK,GAAGtC,SAAS,CAACsC,KAAtE;AAAA,gBAA6E1E,OAAO,GAAGoC,SAAS,CAACpC,OAAjG;AAAA,gBAA0G6yB,aAAa,GAAGzwB,SAAS,CAACowB,GAAV,IAAiBzyB,KAA3I;AAAA,gBAAkJ+yB,aAAa,GAAG1wB,SAAS,CAAC2wB,GAAV,IAAiBruB,KAAnL;AAAA,gBAA0LsuB,eAAe,GAAG5wB,SAAS,CAACmwB,GAAV,IAAiBvyB,OAA7N;AAAA,gBAAsOizB,QAAQ,GAAG7wB,SAAS,CAAC5C,IAA3P;AAAA,gBAAiQ0zB,QAAQ,GAAG9wB,SAAS,CAAC8vB,GAAtR;AAAA,gBAA2RiB,WAAW,GAAGF,QAAQ,IAAIC,QAArT;AAAA,gBAA+TE,qBAAqB,GAAGhxB,SAAS,CAACxC,UAAjW;AAAA,gBAA6WyzB,IAAI,GAAG,CAAC,CAArX;;AACA,gBAAIJ,QAAJ,EAAc;AACV7wB,cAAAA,SAAS,CAACrC,KAAV,GAAkB8yB,aAAlB;AACAzwB,cAAAA,SAAS,CAACsC,KAAV,GAAkBouB,aAAlB;AACA1wB,cAAAA,SAAS,CAACpC,OAAV,GAAoBgzB,eAApB;AACA,kBAAI,MAAMvuB,IAAN,IAAcrC,SAAS,CAACzF,qBAAxB,IAAiDyF,SAAS,CAACzF,qBAAV,CAAgCoD,KAAhC,EAAuC2E,KAAvC,EAA8C1E,OAA9C,MAA2D,CAAC,CAAjH,EAAoHqzB,IAAI,GAAG,CAAC,CAAR,CAApH,KAAoI,IAAIjxB,SAAS,CAACvF,mBAAd,EAAmCuF,SAAS,CAACvF,mBAAV,CAA8BkD,KAA9B,EAAqC2E,KAArC,EAA4C1E,OAA5C;AACvKoC,cAAAA,SAAS,CAACrC,KAAV,GAAkBA,KAAlB;AACAqC,cAAAA,SAAS,CAACsC,KAAV,GAAkBA,KAAlB;AACAtC,cAAAA,SAAS,CAACpC,OAAV,GAAoBA,OAApB;AACH;;AACDoC,YAAAA,SAAS,CAACowB,GAAV,GAAgBpwB,SAAS,CAAC2wB,GAAV,GAAgB3wB,SAAS,CAACmwB,GAAV,GAAgBnwB,SAAS,CAAC8vB,GAAV,GAAgB,IAAhE;AACA9vB,YAAAA,SAAS,CAACmrB,GAAV,GAAgB,CAAC,CAAjB;;AACA,gBAAI,CAAC8F,IAAL,EAAW;AACPV,cAAAA,QAAQ,GAAGvwB,SAAS,CAAC1F,MAAV,CAAiBqD,KAAjB,EAAwB2E,KAAxB,EAA+B1E,OAA/B,CAAX;AACA,kBAAIoC,SAAS,CAACtC,eAAd,EAA+BE,OAAO,GAAGhH,MAAM,CAACA,MAAM,CAAC,EAAD,EAAKgH,OAAL,CAAP,EAAsBoC,SAAS,CAACtC,eAAV,EAAtB,CAAhB;AAC/B,kBAAIwzB,SAAJ;AAAA,kBAAe9zB,IAAf;AAAA,kBAAqB+zB,cAAc,GAAGZ,QAAQ,IAAIA,QAAQ,CAAC90B,QAA3D;;AACA,kBAAI,cAAc,OAAO01B,cAAzB,EAAyC;AACrC,oBAAIC,UAAU,GAAGrF,YAAY,CAACwE,QAAD,CAA7B;AACAX,gBAAAA,IAAI,GAAGoB,qBAAP;AACA,oBAAIpB,IAAI,IAAIA,IAAI,CAACp7B,WAAL,KAAqB28B,cAA7B,IAA+CC,UAAU,CAAC76B,GAAX,IAAkBq5B,IAAI,CAACV,GAA1E,EAA+Ec,iBAAiB,CAACJ,IAAD,EAAOwB,UAAP,EAAmB,CAAnB,EAAsBxzB,OAAtB,EAA+B,CAAC,CAAhC,CAAjB,CAA/E,KAAyI;AACrIszB,kBAAAA,SAAS,GAAGtB,IAAZ;AACA5vB,kBAAAA,SAAS,CAACxC,UAAV,GAAuBoyB,IAAI,GAAGD,eAAe,CAACwB,cAAD,EAAiBC,UAAjB,EAA6BxzB,OAA7B,CAA7C;AACAgyB,kBAAAA,IAAI,CAACE,GAAL,GAAWF,IAAI,CAACE,GAAL,IAAYgB,QAAvB;AACAlB,kBAAAA,IAAI,CAACyB,GAAL,GAAWrxB,SAAX;AACAgwB,kBAAAA,iBAAiB,CAACJ,IAAD,EAAOwB,UAAP,EAAmB,CAAnB,EAAsBxzB,OAAtB,EAA+B,CAAC,CAAhC,CAAjB;AACA4tB,kBAAAA,eAAe,CAACoE,IAAD,EAAO,CAAP,EAAUrC,QAAV,EAAoB,CAAC,CAArB,CAAf;AACH;AACDnwB,gBAAAA,IAAI,GAAGwyB,IAAI,CAACxyB,IAAZ;AACH,eAZD,MAYO;AACHozB,gBAAAA,KAAK,GAAGO,WAAR;AACAG,gBAAAA,SAAS,GAAGF,qBAAZ;AACA,oBAAIE,SAAJ,EAAeV,KAAK,GAAGxwB,SAAS,CAACxC,UAAV,GAAuB,IAA/B;;AACf,oBAAIuzB,WAAW,IAAI,MAAM1uB,IAAzB,EAA+B;AAC3B,sBAAImuB,KAAJ,EAAWA,KAAK,CAAChzB,UAAN,GAAmB,IAAnB;AACXJ,kBAAAA,IAAI,GAAG2N,IAAI,CAACylB,KAAD,EAAQD,QAAR,EAAkB3yB,OAAlB,EAA2B2vB,QAAQ,IAAI,CAACsD,QAAxC,EAAkDE,WAAW,IAAIA,WAAW,CAAC1zB,UAA7E,EAAyF,CAAC,CAA1F,CAAX;AACH;AACJ;;AACD,kBAAI0zB,WAAW,IAAI3zB,IAAI,KAAK2zB,WAAxB,IAAuCnB,IAAI,KAAKoB,qBAApD,EAA2E;AACvE,oBAAIM,UAAU,GAAGP,WAAW,CAAC1zB,UAA7B;;AACA,oBAAIi0B,UAAU,IAAIl0B,IAAI,KAAKk0B,UAA3B,EAAuC;AACnCA,kBAAAA,UAAU,CAACtD,YAAX,CAAwB5wB,IAAxB,EAA8B2zB,WAA9B;;AACA,sBAAI,CAACG,SAAL,EAAgB;AACZH,oBAAAA,WAAW,CAACvzB,UAAZ,GAAyB,IAAzB;AACAywB,oBAAAA,iBAAiB,CAAC8C,WAAD,EAAc,CAAC,CAAf,CAAjB;AACH;AACJ;AACJ;;AACD,kBAAIG,SAAJ,EAAe7B,gBAAgB,CAAC6B,SAAD,CAAhB;AACflxB,cAAAA,SAAS,CAAC5C,IAAV,GAAiBA,IAAjB;;AACA,kBAAIA,IAAI,IAAI,CAACkzB,OAAb,EAAsB;AAClB,oBAAIiB,YAAY,GAAGvxB,SAAnB;AAAA,oBAA8BohB,CAAC,GAAGphB,SAAlC;;AACA,uBAAOohB,CAAC,GAAGA,CAAC,CAACiQ,GAAb;AAAkB,mBAACE,YAAY,GAAGnQ,CAAhB,EAAmBhkB,IAAnB,GAA0BA,IAA1B;AAAlB;;AACAA,gBAAAA,IAAI,CAACI,UAAL,GAAkB+zB,YAAlB;AACAn0B,gBAAAA,IAAI,CAACwuB,qBAAL,GAA6B2F,YAAY,CAAC/8B,WAA1C;AACH;AACJ;;AACD,gBAAI,CAACq8B,QAAD,IAAatD,QAAjB,EAA2BH,MAAM,CAACoE,OAAP,CAAexxB,SAAf,EAA3B,KAA2D,IAAI,CAACixB,IAAL,EAAW;AAClE9D,cAAAA,WAAW;AACX,kBAAIntB,SAAS,CAACtF,kBAAd,EAAkCsF,SAAS,CAACtF,kBAAV,CAA6B+1B,aAA7B,EAA4CC,aAA5C,EAA2DE,eAA3D;AAClC,kBAAIvoB,OAAO,CAACopB,WAAZ,EAAyBppB,OAAO,CAACopB,WAAR,CAAoBzxB,SAApB;AAC5B;AACD,gBAAI,QAAQA,SAAS,CAAC0xB,GAAtB,EAA2B,OAAO1xB,SAAS,CAAC0xB,GAAV,CAAcp7B,MAArB;AAA6B0J,cAAAA,SAAS,CAAC0xB,GAAV,CAAczG,GAAd,GAAoBn5B,IAApB,CAAyBkO,SAAzB;AAA7B;AAC3B,gBAAI,CAACytB,SAAD,IAAc,CAAC6C,OAAnB,EAA4BnD,WAAW;AAC1C;AACJ;;AACD,iBAASgB,uBAAT,CAAiCb,GAAjC,EAAsCnxB,KAAtC,EAA6CyB,OAA7C,EAAsD2vB,QAAtD,EAAgE;AAC5D,cAAIv7B,CAAC,GAAGs7B,GAAG,IAAIA,GAAG,CAAC9vB,UAAnB;AAAA,cAA+Bm0B,iBAAiB,GAAG3/B,CAAnD;AAAA,cAAsD4/B,MAAM,GAAGtE,GAA/D;AAAA,cAAoEuE,aAAa,GAAG7/B,CAAC,IAAIs7B,GAAG,CAAC1B,qBAAJ,KAA8BzvB,KAAK,CAACV,QAA7H;AAAA,cAAuIq2B,OAAO,GAAGD,aAAjJ;AAAA,cAAgKl0B,KAAK,GAAGouB,YAAY,CAAC5vB,KAAD,CAApL;;AACA,iBAAOnK,CAAC,IAAI,CAAC8/B,OAAN,KAAkB9/B,CAAC,GAAGA,CAAC,CAACq/B,GAAxB,CAAP;AAAqCS,YAAAA,OAAO,GAAG9/B,CAAC,CAACwC,WAAF,KAAkB2H,KAAK,CAACV,QAAlC;AAArC;;AACA,cAAIzJ,CAAC,IAAI8/B,OAAL,KAAiB,CAACvE,QAAD,IAAav7B,CAAC,CAACwL,UAAhC,CAAJ,EAAiD;AAC7CwyB,YAAAA,iBAAiB,CAACh+B,CAAD,EAAI2L,KAAJ,EAAW,CAAX,EAAcC,OAAd,EAAuB2vB,QAAvB,CAAjB;AACAD,YAAAA,GAAG,GAAGt7B,CAAC,CAACoL,IAAR;AACH,WAHD,MAGO;AACH,gBAAIu0B,iBAAiB,IAAI,CAACE,aAA1B,EAAyC;AACrCxC,cAAAA,gBAAgB,CAACsC,iBAAD,CAAhB;AACArE,cAAAA,GAAG,GAAGsE,MAAM,GAAG,IAAf;AACH;;AACD5/B,YAAAA,CAAC,GAAG29B,eAAe,CAACxzB,KAAK,CAACV,QAAP,EAAiBkC,KAAjB,EAAwBC,OAAxB,CAAnB;;AACA,gBAAI0vB,GAAG,IAAI,CAACt7B,CAAC,CAAC89B,GAAd,EAAmB;AACf99B,cAAAA,CAAC,CAAC89B,GAAF,GAAQxC,GAAR;AACAsE,cAAAA,MAAM,GAAG,IAAT;AACH;;AACD5B,YAAAA,iBAAiB,CAACh+B,CAAD,EAAI2L,KAAJ,EAAW,CAAX,EAAcC,OAAd,EAAuB2vB,QAAvB,CAAjB;AACAD,YAAAA,GAAG,GAAGt7B,CAAC,CAACoL,IAAR;;AACA,gBAAIw0B,MAAM,IAAItE,GAAG,KAAKsE,MAAtB,EAA8B;AAC1BA,cAAAA,MAAM,CAACp0B,UAAP,GAAoB,IAApB;AACAywB,cAAAA,iBAAiB,CAAC2D,MAAD,EAAS,CAAC,CAAV,CAAjB;AACH;AACJ;;AACD,iBAAOtE,GAAP;AACH;;AACD,iBAAS+B,gBAAT,CAA0BrvB,SAA1B,EAAqC;AACjC,cAAIqI,OAAO,CAAC0pB,aAAZ,EAA2B1pB,OAAO,CAAC0pB,aAAR,CAAsB/xB,SAAtB;AAC3B,cAAI5C,IAAI,GAAG4C,SAAS,CAAC5C,IAArB;AACA4C,UAAAA,SAAS,CAACiwB,GAAV,GAAgB,CAAC,CAAjB;AACA,cAAIjwB,SAAS,CAACnF,oBAAd,EAAoCmF,SAAS,CAACnF,oBAAV;AACpCmF,UAAAA,SAAS,CAAC5C,IAAV,GAAiB,IAAjB;AACA,cAAI40B,KAAK,GAAGhyB,SAAS,CAACxC,UAAtB;AACA,cAAIw0B,KAAJ,EAAW3C,gBAAgB,CAAC2C,KAAD,CAAhB,CAAX,KAAyC,IAAI50B,IAAJ,EAAU;AAC/C,gBAAIA,IAAI,CAAC8wB,aAAL,IAAsB9wB,IAAI,CAAC8wB,aAAL,CAAmB1uB,GAA7C,EAAkDpC,IAAI,CAAC8wB,aAAL,CAAmB1uB,GAAnB,CAAuB,IAAvB;AAClDQ,YAAAA,SAAS,CAAC8vB,GAAV,GAAgB1yB,IAAhB;AACA+uB,YAAAA,UAAU,CAAC/uB,IAAD,CAAV;AACAqyB,YAAAA,gBAAgB,CAACzvB,SAAD,CAAhB;AACAsvB,YAAAA,cAAc,CAAClyB,IAAD,CAAd;AACH;AACD,cAAI4C,SAAS,CAACkwB,GAAd,EAAmBlwB,SAAS,CAACkwB,GAAV,CAAc,IAAd;AACtB;;AACD,iBAASjtB,SAAT,CAAmBtF,KAAnB,EAA0BC,OAA1B,EAAmC;AAC/B,eAAKutB,GAAL,GAAW,CAAC,CAAZ;AACA,eAAKvtB,OAAL,GAAeA,OAAf;AACA,eAAKD,KAAL,GAAaA,KAAb;AACA,eAAK2E,KAAL,GAAa,KAAKA,KAAL,IAAc,EAA3B;AACH;;AACD,iBAAShI,MAAT,CAAgB6B,KAAhB,EAAuBa,MAAvB,EAA+BxG,KAA/B,EAAsC;AAClC,iBAAOuU,IAAI,CAACvU,KAAD,EAAQ2F,KAAR,EAAe,EAAf,EAAmB,CAAC,CAApB,EAAuBa,MAAvB,EAA+B,CAAC,CAAhC,CAAX;AACH;;AACD,YAAIqL,OAAO,GAAG,EAAd;AACA,YAAI+e,KAAK,GAAG,EAAZ;AACA,YAAI4D,cAAc,GAAG,EAArB;AACA,YAAIuB,kBAAkB,GAAG,wDAAzB;AACA,YAAInB,KAAK,GAAG,EAAZ;AACA,YAAIgC,MAAM,GAAG,EAAb;AACA,YAAIK,SAAS,GAAG,CAAhB;AACA,YAAIC,SAAS,GAAG,CAAC,CAAjB;AACA,YAAIhC,SAAS,GAAG,CAAC,CAAjB;AACA,YAAIgE,UAAU,GAAG,EAAjB;AACA94B,QAAAA,MAAM,CAACqM,SAAS,CAACjQ,SAAX,EAAsB;AACxB0P,UAAAA,QAAQ,EAAE,kBAASJ,KAAT,EAAgBrF,QAAhB,EAA0B;AAChC,gBAAI9J,CAAC,GAAG,KAAKmP,KAAb;AACA,gBAAI,CAAC,KAAKquB,GAAV,EAAe,KAAKA,GAAL,GAAW/5B,MAAM,CAAC,EAAD,EAAKzD,CAAL,CAAjB;AACfyD,YAAAA,MAAM,CAACzD,CAAD,EAAI,cAAc,OAAOmP,KAArB,GAA6BA,KAAK,CAACnP,CAAD,EAAI,KAAKwK,KAAT,CAAlC,GAAoD2E,KAAxD,CAAN;AACA,gBAAIrF,QAAJ,EAAc,CAAC,KAAKy0B,GAAL,GAAW,KAAKA,GAAL,IAAY,EAAxB,EAA4B3xB,IAA5B,CAAiC9C,QAAjC;AACdiuB,YAAAA,aAAa,CAAC,IAAD,CAAb;AACH,WAPuB;AAQxB+G,UAAAA,WAAW,EAAE,qBAASh1B,QAAT,EAAmB;AAC5B,gBAAIA,QAAJ,EAAc,CAAC,KAAKy0B,GAAL,GAAW,KAAKA,GAAL,IAAY,EAAxB,EAA4B3xB,IAA5B,CAAiC9C,QAAjC;AACduuB,YAAAA,eAAe,CAAC,IAAD,EAAO,CAAP,CAAf;AACH,WAXuB;AAYxBlxB,UAAAA,MAAM,EAAE,kBAAW,CAAE;AAZG,SAAtB,CAAN;AAcA,YAAI43B,MAAM,GAAG;AACTjR,UAAAA,CAAC,EAAEA,CADM;AAET5nB,UAAAA,aAAa,EAAE4nB,CAFN;AAGTje,UAAAA,YAAY,EAAEA,YAHL;AAITC,UAAAA,SAAS,EAAEA,SAJF;AAKT3I,UAAAA,MAAM,EAAEA,MALC;AAMTgxB,UAAAA,QAAQ,EAAEA,QAND;AAOTjjB,UAAAA,OAAO,EAAEA;AAPA,SAAb;AASA,YAAI,IAAJ,EAAUhX,MAAM,CAACD,OAAP,GAAiB8gC,MAAjB,CAAV,KAAwCx+B,IAAI,CAACw+B,MAAL,GAAcA,MAAd;AAC3C,OA9YA,EAAD;AAiZA;AAAO,KA/iKG;AAgjKV;;AACA;AAAO,cAAS7gC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAGtD;AACA;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwBygC,QAAxB,EAAjB;AAGA;AAAO,KA1jKG;AA2jKV;;AACA;AAAO,cAAS9gC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAA4B,iBAASqH,OAAT,EAAkBxF,MAAlB,EAA0B;AAAC,YAAI6+B,OAAJ;AAAY;;;;;;;;;AAQlE,mBAAU7+B,MAAV,EAAkBpC,OAAlB,EAA2B;AAC1B,iBAAOE,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAA/B,GACD,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAvC,GAA6CD,MAAM,CAACH,OAAD,CAAnD,GACCoC,MAAM,CAAC8+B,UAAP,GAAoBlhC,OAAO,EAF3B;AAGD,SAJA,EAIC,IAJD,EAIQ,YAAY;AAAE;;AAEvB,mBAASmhC,gBAAT,CAA0B1d,CAA1B,EAA6B;AAC3B,gBAAIvd,IAAI,YAAUud,CAAV,CAAR;;AACA,mBAAOA,CAAC,KAAK,IAAN,KAAevd,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,UAA7C,CAAP;AACD;;AAED,mBAAS9B,UAAT,CAAoBqf,CAApB,EAAuB;AACrB,mBAAO,OAAOA,CAAP,KAAa,UAApB;AACD;;AAED,cAAI2d,QAAQ,GAAGh6B,SAAf;;AACA,cAAIgG,KAAK,CAACnK,OAAV,EAAmB;AACjBm+B,YAAAA,QAAQ,GAAGh0B,KAAK,CAACnK,OAAjB;AACD,WAFD,MAEO;AACLm+B,YAAAA,QAAQ,GAAG,kBAAU3d,CAAV,EAAa;AACtB,qBAAOviB,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+B8iB,CAA/B,MAAsC,gBAA7C;AACD,aAFD;AAGD;;AAED,cAAIxgB,OAAO,GAAGm+B,QAAd;AAEA,cAAIjzB,GAAG,GAAG,CAAV;AACA,cAAIkzB,SAAS,GAAGj6B,SAAhB;AACA,cAAIk6B,iBAAiB,GAAGl6B,SAAxB;;AAEA,cAAIm6B,IAAI,GAAG,SAASA,IAAT,CAAcz1B,QAAd,EAAwB01B,GAAxB,EAA6B;AACtCruB,YAAAA,KAAK,CAAChF,GAAD,CAAL,GAAarC,QAAb;AACAqH,YAAAA,KAAK,CAAChF,GAAG,GAAG,CAAP,CAAL,GAAiBqzB,GAAjB;AACArzB,YAAAA,GAAG,IAAI,CAAP;;AACA,gBAAIA,GAAG,KAAK,CAAZ,EAAe;AACb;AACA;AACA;AACA,kBAAImzB,iBAAJ,EAAuB;AACrBA,gBAAAA,iBAAiB,CAACG,KAAD,CAAjB;AACD,eAFD,MAEO;AACLC,gBAAAA,aAAa;AACd;AACF;AACF,WAdD;;AAgBA,mBAASC,YAAT,CAAsBC,UAAtB,EAAkC;AAChCN,YAAAA,iBAAiB,GAAGM,UAApB;AACD;;AAED,mBAASC,OAAT,CAAiBC,MAAjB,EAAyB;AACvBP,YAAAA,IAAI,GAAGO,MAAP;AACD;;AAED,cAAIC,aAAa,GAAG,OAAO1/B,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC+E,SAA7D;AACA,cAAI46B,aAAa,GAAGD,aAAa,IAAI,EAArC;AACA,cAAIE,uBAAuB,GAAGD,aAAa,CAACE,gBAAd,IAAkCF,aAAa,CAACG,sBAA9E;AACA,cAAIpK,MAAM,GAAG,OAAOx1B,IAAP,KAAgB,WAAhB,IAA+B,OAAOqF,OAAP,KAAmB,WAAlD,IAAkE,EAAD,CAAK5E,QAAL,CAAcrC,IAAd,CAAmBiH,OAAnB,MAAgC,kBAA9G,CArDqB,CAuDrB;;AACA,cAAIw6B,QAAQ,GAAG,OAAOC,iBAAP,KAA6B,WAA7B,IAA4C,OAAO/e,aAAP,KAAyB,WAArE,IAAoF,OAAOf,cAAP,KAA0B,WAA7H,CAxDqB,CA0DrB;;AACA,mBAAS+f,WAAT,GAAuB;AACrB;AACA;AACA,mBAAO,YAAY;AACjB,qBAAO16B,OAAO,CAAC+L,QAAR,CAAiB8tB,KAAjB,CAAP;AACD,aAFD;AAGD,WAjEoB,CAmErB;;;AACA,mBAASc,aAAT,GAAyB;AACvB,gBAAI,OAAOlB,SAAP,KAAqB,WAAzB,EAAsC;AACpC,qBAAO,YAAY;AACjBA,gBAAAA,SAAS,CAACI,KAAD,CAAT;AACD,eAFD;AAGD;;AAED,mBAAOe,aAAa,EAApB;AACD;;AAED,mBAASC,mBAAT,GAA+B;AAC7B,gBAAIC,UAAU,GAAG,CAAjB;AACA,gBAAIC,QAAQ,GAAG,IAAIV,uBAAJ,CAA4BR,KAA5B,CAAf;AACA,gBAAI/yB,IAAI,GAAG3J,QAAQ,CAAC63B,cAAT,CAAwB,EAAxB,CAAX;AACA+F,YAAAA,QAAQ,CAACC,OAAT,CAAiBl0B,IAAjB,EAAuB;AAAEm0B,cAAAA,aAAa,EAAE;AAAjB,aAAvB;AAEA,mBAAO,YAAY;AACjBn0B,cAAAA,IAAI,CAACqU,IAAL,GAAY2f,UAAU,GAAG,EAAEA,UAAF,GAAe,CAAxC;AACD,aAFD;AAGD,WAvFoB,CAyFrB;;;AACA,mBAASI,iBAAT,GAA6B;AAC3B,gBAAIlgB,OAAO,GAAG,IAAIL,cAAJ,EAAd;AACAK,YAAAA,OAAO,CAACM,KAAR,CAAcC,SAAd,GAA0Bse,KAA1B;AACA,mBAAO,YAAY;AACjB,qBAAO7e,OAAO,CAACK,KAAR,CAAcG,WAAd,CAA0B,CAA1B,CAAP;AACD,aAFD;AAGD;;AAED,mBAASof,aAAT,GAAyB;AACvB;AACA;AACA,gBAAIO,gBAAgB,GAAGlwB,UAAvB;AACA,mBAAO,YAAY;AACjB,qBAAOkwB,gBAAgB,CAACtB,KAAD,EAAQ,CAAR,CAAvB;AACD,aAFD;AAGD;;AAED,cAAItuB,KAAK,GAAG,IAAI/F,KAAJ,CAAU,IAAV,CAAZ;;AACA,mBAASq0B,KAAT,GAAiB;AACf,iBAAK,IAAIhhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0N,GAApB,EAAyB1N,CAAC,IAAI,CAA9B,EAAiC;AAC/B,kBAAIqL,QAAQ,GAAGqH,KAAK,CAAC1S,CAAD,CAApB;AACA,kBAAI+gC,GAAG,GAAGruB,KAAK,CAAC1S,CAAC,GAAG,CAAL,CAAf;AAEAqL,cAAAA,QAAQ,CAAC01B,GAAD,CAAR;AAEAruB,cAAAA,KAAK,CAAC1S,CAAD,CAAL,GAAW2G,SAAX;AACA+L,cAAAA,KAAK,CAAC1S,CAAC,GAAG,CAAL,CAAL,GAAe2G,SAAf;AACD;;AAED+G,YAAAA,GAAG,GAAG,CAAN;AACD;;AAED,mBAAS60B,YAAT,GAAwB;AACtB,gBAAI;AACF,kBAAIpyB,CAAC,GAAGqwB,OAAR;;AACA,kBAAIgC,KAAK,GAAG1iC,mBAAmB,CAAC,EAAD,CAA/B;;AACA8gC,cAAAA,SAAS,GAAG4B,KAAK,CAACC,SAAN,IAAmBD,KAAK,CAACE,YAArC;AACA,qBAAOZ,aAAa,EAApB;AACD,aALD,CAKE,OAAO33B,CAAP,EAAU;AACV,qBAAO43B,aAAa,EAApB;AACD;AACF;;AAED,cAAId,aAAa,GAAGt6B,SAApB,CArIqB,CAsIrB;;AACA,cAAI2wB,MAAJ,EAAY;AACV2J,YAAAA,aAAa,GAAGY,WAAW,EAA3B;AACD,WAFD,MAEO,IAAIL,uBAAJ,EAA6B;AAClCP,YAAAA,aAAa,GAAGe,mBAAmB,EAAnC;AACD,WAFM,MAEA,IAAIL,QAAJ,EAAc;AACnBV,YAAAA,aAAa,GAAGoB,iBAAiB,EAAjC;AACD,WAFM,MAEA,IAAIf,aAAa,KAAK36B,SAAlB,IAA+B,eAAe,UAAlD,EAA8D;AACnEs6B,YAAAA,aAAa,GAAGsB,YAAY,EAA5B;AACD,WAFM,MAEA;AACLtB,YAAAA,aAAa,GAAGc,aAAa,EAA7B;AACD;;AAED,mBAAS1V,IAAT,CAAcsW,aAAd,EAA6BC,WAA7B,EAA0C;AACxC,gBAAIC,UAAU,GAAG/9B,SAAjB;AAEA,gBAAIsG,MAAM,GAAG,IAAb;AAEA,gBAAI8tB,KAAK,GAAG,IAAI,KAAKt2B,WAAT,CAAqB6Q,IAArB,CAAZ;;AAEA,gBAAIylB,KAAK,CAAC4J,UAAD,CAAL,KAAsBn8B,SAA1B,EAAqC;AACnCo8B,cAAAA,WAAW,CAAC7J,KAAD,CAAX;AACD;;AAED,gBAAI8J,MAAM,GAAG53B,MAAM,CAAC43B,MAApB;;AAEA,gBAAIA,MAAJ,EAAY;AACV,eAAC,YAAY;AACX,oBAAI33B,QAAQ,GAAGw3B,UAAU,CAACG,MAAM,GAAG,CAAV,CAAzB;AACAlC,gBAAAA,IAAI,CAAC,YAAY;AACf,yBAAOmC,cAAc,CAACD,MAAD,EAAS9J,KAAT,EAAgB7tB,QAAhB,EAA0BD,MAAM,CAAC83B,OAAjC,CAArB;AACD,iBAFG,CAAJ;AAGD,eALD;AAMD,aAPD,MAOO;AACLC,cAAAA,SAAS,CAAC/3B,MAAD,EAAS8tB,KAAT,EAAgByJ,aAAhB,EAA+BC,WAA/B,CAAT;AACD;;AAED,mBAAO1J,KAAP;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,mBAASkK,SAAT,CAAmBliC,MAAnB,EAA2B;AACzB;AACA,gBAAI4Z,WAAW,GAAG,IAAlB;;AAEA,gBAAI5Z,MAAM,IAAI,SAAOA,MAAP,MAAkB,QAA5B,IAAwCA,MAAM,CAAC0B,WAAP,KAAuBkY,WAAnE,EAAgF;AAC9E,qBAAO5Z,MAAP;AACD;;AAED,gBAAI6c,OAAO,GAAG,IAAIjD,WAAJ,CAAgBrH,IAAhB,CAAd;AACAoK,YAAAA,OAAO,CAACE,OAAD,EAAU7c,MAAV,CAAP;AACA,mBAAO6c,OAAP;AACD;;AAED,cAAI+kB,UAAU,GAAGjhC,IAAI,CAACsY,MAAL,GAAc5X,QAAd,CAAuB,EAAvB,EAA2BwjB,SAA3B,CAAqC,EAArC,CAAjB;;AAEA,mBAAStS,IAAT,GAAgB,CAAE;;AAElB,cAAI4vB,OAAO,GAAG,KAAK,CAAnB;AACA,cAAIC,SAAS,GAAG,CAAhB;AACA,cAAIC,QAAQ,GAAG,CAAf;AAEA,cAAIC,cAAc,GAAG,IAAIC,WAAJ,EAArB;;AAEA,mBAASC,eAAT,GAA2B;AACzB,mBAAO,IAAIlyB,SAAJ,CAAc,0CAAd,CAAP;AACD;;AAED,mBAASmyB,eAAT,GAA2B;AACzB,mBAAO,IAAInyB,SAAJ,CAAc,sDAAd,CAAP;AACD;;AAED,mBAASoyB,OAAT,CAAiB7lB,OAAjB,EAA0B;AACxB,gBAAI;AACF,qBAAOA,OAAO,CAACsO,IAAf;AACD,aAFD,CAEE,OAAOO,KAAP,EAAc;AACd4W,cAAAA,cAAc,CAAC5W,KAAf,GAAuBA,KAAvB;AACA,qBAAO4W,cAAP;AACD;AACF;;AAED,mBAASK,OAAT,CAAiBC,OAAjB,EAA0B58B,KAA1B,EAAiC68B,kBAAjC,EAAqDC,gBAArD,EAAuE;AACrE,gBAAI;AACFF,cAAAA,OAAO,CAAC5jC,IAAR,CAAagH,KAAb,EAAoB68B,kBAApB,EAAwCC,gBAAxC;AACD,aAFD,CAEE,OAAO75B,CAAP,EAAU;AACV,qBAAOA,CAAP;AACD;AACF;;AAED,mBAAS85B,qBAAT,CAA+BlmB,OAA/B,EAAwCmmB,QAAxC,EAAkDJ,OAAlD,EAA2D;AACzDhD,YAAAA,IAAI,CAAC,UAAU/iB,OAAV,EAAmB;AACtB,kBAAIomB,MAAM,GAAG,KAAb;AACA,kBAAIvX,KAAK,GAAGiX,OAAO,CAACC,OAAD,EAAUI,QAAV,EAAoB,UAAUh9B,KAAV,EAAiB;AACtD,oBAAIi9B,MAAJ,EAAY;AACV;AACD;;AACDA,gBAAAA,MAAM,GAAG,IAAT;;AACA,oBAAID,QAAQ,KAAKh9B,KAAjB,EAAwB;AACtB2W,kBAAAA,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAP;AACD,iBAFD,MAEO;AACLk9B,kBAAAA,OAAO,CAACrmB,OAAD,EAAU7W,KAAV,CAAP;AACD;AACF,eAVkB,EAUhB,UAAUm9B,MAAV,EAAkB;AACnB,oBAAIF,MAAJ,EAAY;AACV;AACD;;AACDA,gBAAAA,MAAM,GAAG,IAAT;AAEArmB,gBAAAA,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAN;AACD,eAjBkB,EAiBhB,cAActmB,OAAO,CAACumB,MAAR,IAAkB,kBAAhC,CAjBgB,CAAnB;;AAmBA,kBAAI,CAACH,MAAD,IAAWvX,KAAf,EAAsB;AACpBuX,gBAAAA,MAAM,GAAG,IAAT;AACArmB,gBAAAA,MAAM,CAACC,OAAD,EAAU6O,KAAV,CAAN;AACD;AACF,aAzBG,EAyBD7O,OAzBC,CAAJ;AA0BD;;AAED,mBAASwmB,iBAAT,CAA2BxmB,OAA3B,EAAoCmmB,QAApC,EAA8C;AAC5C,gBAAIA,QAAQ,CAAClB,MAAT,KAAoBM,SAAxB,EAAmC;AACjCc,cAAAA,OAAO,CAACrmB,OAAD,EAAUmmB,QAAQ,CAAChB,OAAnB,CAAP;AACD,aAFD,MAEO,IAAIgB,QAAQ,CAAClB,MAAT,KAAoBO,QAAxB,EAAkC;AACvCzlB,cAAAA,MAAM,CAACC,OAAD,EAAUmmB,QAAQ,CAAChB,OAAnB,CAAN;AACD,aAFM,MAEA;AACLC,cAAAA,SAAS,CAACe,QAAD,EAAWv9B,SAAX,EAAsB,UAAUO,KAAV,EAAiB;AAC9C,uBAAO2W,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAd;AACD,eAFQ,EAEN,UAAUm9B,MAAV,EAAkB;AACnB,uBAAOvmB,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAb;AACD,eAJQ,CAAT;AAKD;AACF;;AAED,mBAASG,mBAAT,CAA6BzmB,OAA7B,EAAsC0mB,aAAtC,EAAqDX,OAArD,EAA8D;AAC5D,gBAAIW,aAAa,CAAC7hC,WAAd,KAA8Bmb,OAAO,CAACnb,WAAtC,IAAqDkhC,OAAO,KAAKzX,IAAjE,IAAyEoY,aAAa,CAAC7hC,WAAd,CAA0Bib,OAA1B,KAAsCulB,SAAnH,EAA8H;AAC5HmB,cAAAA,iBAAiB,CAACxmB,OAAD,EAAU0mB,aAAV,CAAjB;AACD,aAFD,MAEO;AACL,kBAAIX,OAAO,KAAKN,cAAhB,EAAgC;AAC9B1lB,gBAAAA,MAAM,CAACC,OAAD,EAAUylB,cAAc,CAAC5W,KAAzB,CAAN;AACA4W,gBAAAA,cAAc,CAAC5W,KAAf,GAAuB,IAAvB;AACD,eAHD,MAGO,IAAIkX,OAAO,KAAKn9B,SAAhB,EAA2B;AAChCy9B,gBAAAA,OAAO,CAACrmB,OAAD,EAAU0mB,aAAV,CAAP;AACD,eAFM,MAEA,IAAI9gC,UAAU,CAACmgC,OAAD,CAAd,EAAyB;AAC9BG,gBAAAA,qBAAqB,CAAClmB,OAAD,EAAU0mB,aAAV,EAAyBX,OAAzB,CAArB;AACD,eAFM,MAEA;AACLM,gBAAAA,OAAO,CAACrmB,OAAD,EAAU0mB,aAAV,CAAP;AACD;AACF;AACF;;AAED,mBAAS5mB,OAAT,CAAiBE,OAAjB,EAA0B7W,KAA1B,EAAiC;AAC/B,gBAAI6W,OAAO,KAAK7W,KAAhB,EAAuB;AACrB4W,cAAAA,MAAM,CAACC,OAAD,EAAU2lB,eAAe,EAAzB,CAAN;AACD,aAFD,MAEO,IAAIhD,gBAAgB,CAACx5B,KAAD,CAApB,EAA6B;AAClCs9B,cAAAA,mBAAmB,CAACzmB,OAAD,EAAU7W,KAAV,EAAiB08B,OAAO,CAAC18B,KAAD,CAAxB,CAAnB;AACD,aAFM,MAEA;AACLk9B,cAAAA,OAAO,CAACrmB,OAAD,EAAU7W,KAAV,CAAP;AACD;AACF;;AAED,mBAASw9B,gBAAT,CAA0B3mB,OAA1B,EAAmC;AACjC,gBAAIA,OAAO,CAAC4mB,QAAZ,EAAsB;AACpB5mB,cAAAA,OAAO,CAAC4mB,QAAR,CAAiB5mB,OAAO,CAACmlB,OAAzB;AACD;;AAED0B,YAAAA,OAAO,CAAC7mB,OAAD,CAAP;AACD;;AAED,mBAASqmB,OAAT,CAAiBrmB,OAAjB,EAA0B7W,KAA1B,EAAiC;AAC/B,gBAAI6W,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC;AAC9B;AACD;;AAEDtlB,YAAAA,OAAO,CAACmlB,OAAR,GAAkBh8B,KAAlB;AACA6W,YAAAA,OAAO,CAACilB,MAAR,GAAiBM,SAAjB;;AAEA,gBAAIvlB,OAAO,CAAC8mB,YAAR,CAAqBngC,MAArB,KAAgC,CAApC,EAAuC;AACrCo8B,cAAAA,IAAI,CAAC8D,OAAD,EAAU7mB,OAAV,CAAJ;AACD;AACF;;AAED,mBAASD,MAAT,CAAgBC,OAAhB,EAAyBsmB,MAAzB,EAAiC;AAC/B,gBAAItmB,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC;AAC9B;AACD;;AACDtlB,YAAAA,OAAO,CAACilB,MAAR,GAAiBO,QAAjB;AACAxlB,YAAAA,OAAO,CAACmlB,OAAR,GAAkBmB,MAAlB;AAEAvD,YAAAA,IAAI,CAAC4D,gBAAD,EAAmB3mB,OAAnB,CAAJ;AACD;;AAED,mBAASolB,SAAT,CAAmB/3B,MAAnB,EAA2B8tB,KAA3B,EAAkCyJ,aAAlC,EAAiDC,WAAjD,EAA8D;AAC5D,gBAAIiC,YAAY,GAAGz5B,MAAM,CAACy5B,YAA1B;AACA,gBAAIngC,MAAM,GAAGmgC,YAAY,CAACngC,MAA1B;AAEA0G,YAAAA,MAAM,CAACu5B,QAAP,GAAkB,IAAlB;AAEAE,YAAAA,YAAY,CAACngC,MAAD,CAAZ,GAAuBw0B,KAAvB;AACA2L,YAAAA,YAAY,CAACngC,MAAM,GAAG4+B,SAAV,CAAZ,GAAmCX,aAAnC;AACAkC,YAAAA,YAAY,CAACngC,MAAM,GAAG6+B,QAAV,CAAZ,GAAkCX,WAAlC;;AAEA,gBAAIl+B,MAAM,KAAK,CAAX,IAAgB0G,MAAM,CAAC43B,MAA3B,EAAmC;AACjClC,cAAAA,IAAI,CAAC8D,OAAD,EAAUx5B,MAAV,CAAJ;AACD;AACF;;AAED,mBAASw5B,OAAT,CAAiB7mB,OAAjB,EAA0B;AACxB,gBAAI+mB,WAAW,GAAG/mB,OAAO,CAAC8mB,YAA1B;AACA,gBAAIE,OAAO,GAAGhnB,OAAO,CAACilB,MAAtB;;AAEA,gBAAI8B,WAAW,CAACpgC,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B;AACD;;AAED,gBAAIw0B,KAAK,GAAGvyB,SAAZ;AAAA,gBACI0E,QAAQ,GAAG1E,SADf;AAAA,gBAEIq+B,MAAM,GAAGjnB,OAAO,CAACmlB,OAFrB;;AAIA,iBAAK,IAAIljC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8kC,WAAW,CAACpgC,MAAhC,EAAwC1E,CAAC,IAAI,CAA7C,EAAgD;AAC9Ck5B,cAAAA,KAAK,GAAG4L,WAAW,CAAC9kC,CAAD,CAAnB;AACAqL,cAAAA,QAAQ,GAAGy5B,WAAW,CAAC9kC,CAAC,GAAG+kC,OAAL,CAAtB;;AAEA,kBAAI7L,KAAJ,EAAW;AACT+J,gBAAAA,cAAc,CAAC8B,OAAD,EAAU7L,KAAV,EAAiB7tB,QAAjB,EAA2B25B,MAA3B,CAAd;AACD,eAFD,MAEO;AACL35B,gBAAAA,QAAQ,CAAC25B,MAAD,CAAR;AACD;AACF;;AAEDjnB,YAAAA,OAAO,CAAC8mB,YAAR,CAAqBngC,MAArB,GAA8B,CAA9B;AACD;;AAED,mBAAS++B,WAAT,GAAuB;AACrB,iBAAK7W,KAAL,GAAa,IAAb;AACD;;AAED,cAAIqY,eAAe,GAAG,IAAIxB,WAAJ,EAAtB;;AAEA,mBAASyB,QAAT,CAAkB75B,QAAlB,EAA4B25B,MAA5B,EAAoC;AAClC,gBAAI;AACF,qBAAO35B,QAAQ,CAAC25B,MAAD,CAAf;AACD,aAFD,CAEE,OAAO76B,CAAP,EAAU;AACV86B,cAAAA,eAAe,CAACrY,KAAhB,GAAwBziB,CAAxB;AACA,qBAAO86B,eAAP;AACD;AACF;;AAED,mBAAShC,cAAT,CAAwB8B,OAAxB,EAAiChnB,OAAjC,EAA0C1S,QAA1C,EAAoD25B,MAApD,EAA4D;AAC1D,gBAAIG,WAAW,GAAGxhC,UAAU,CAAC0H,QAAD,CAA5B;AAAA,gBACInE,KAAK,GAAGP,SADZ;AAAA,gBAEIimB,KAAK,GAAGjmB,SAFZ;AAAA,gBAGIy+B,SAAS,GAAGz+B,SAHhB;AAAA,gBAII0+B,MAAM,GAAG1+B,SAJb;;AAMA,gBAAIw+B,WAAJ,EAAiB;AACfj+B,cAAAA,KAAK,GAAGg+B,QAAQ,CAAC75B,QAAD,EAAW25B,MAAX,CAAhB;;AAEA,kBAAI99B,KAAK,KAAK+9B,eAAd,EAA+B;AAC7BI,gBAAAA,MAAM,GAAG,IAAT;AACAzY,gBAAAA,KAAK,GAAG1lB,KAAK,CAAC0lB,KAAd;AACA1lB,gBAAAA,KAAK,CAAC0lB,KAAN,GAAc,IAAd;AACD,eAJD,MAIO;AACLwY,gBAAAA,SAAS,GAAG,IAAZ;AACD;;AAED,kBAAIrnB,OAAO,KAAK7W,KAAhB,EAAuB;AACrB4W,gBAAAA,MAAM,CAACC,OAAD,EAAU4lB,eAAe,EAAzB,CAAN;AACA;AACD;AACF,aAfD,MAeO;AACLz8B,cAAAA,KAAK,GAAG89B,MAAR;AACAI,cAAAA,SAAS,GAAG,IAAZ;AACD;;AAED,gBAAIrnB,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC,CAC9B;AACD,aAFD,MAEO,IAAI8B,WAAW,IAAIC,SAAnB,EAA8B;AACjCvnB,cAAAA,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAP;AACD,aAFI,MAEE,IAAIm+B,MAAJ,EAAY;AACjBvnB,cAAAA,MAAM,CAACC,OAAD,EAAU6O,KAAV,CAAN;AACD,aAFM,MAEA,IAAImY,OAAO,KAAKzB,SAAhB,EAA2B;AAChCc,cAAAA,OAAO,CAACrmB,OAAD,EAAU7W,KAAV,CAAP;AACD,aAFM,MAEA,IAAI69B,OAAO,KAAKxB,QAAhB,EAA0B;AAC/BzlB,cAAAA,MAAM,CAACC,OAAD,EAAU7W,KAAV,CAAN;AACD;AACJ;;AAED,mBAASo+B,iBAAT,CAA2BvnB,OAA3B,EAAoCwnB,QAApC,EAA8C;AAC5C,gBAAI;AACFA,cAAAA,QAAQ,CAAC,SAASC,cAAT,CAAwBt+B,KAAxB,EAA+B;AACtC2W,gBAAAA,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAP;AACD,eAFO,EAEL,SAASu+B,aAAT,CAAuBpB,MAAvB,EAA+B;AAChCvmB,gBAAAA,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAN;AACD,eAJO,CAAR;AAKD,aAND,CAME,OAAOl6B,CAAP,EAAU;AACV2T,cAAAA,MAAM,CAACC,OAAD,EAAU5T,CAAV,CAAN;AACD;AACF;;AAED,cAAI8P,EAAE,GAAG,CAAT;;AACA,mBAASyrB,MAAT,GAAkB;AAChB,mBAAOzrB,EAAE,EAAT;AACD;;AAED,mBAAS8oB,WAAT,CAAqBhlB,OAArB,EAA8B;AAC5BA,YAAAA,OAAO,CAAC+kB,UAAD,CAAP,GAAsB7oB,EAAE,EAAxB;AACA8D,YAAAA,OAAO,CAACilB,MAAR,GAAiBr8B,SAAjB;AACAoX,YAAAA,OAAO,CAACmlB,OAAR,GAAkBv8B,SAAlB;AACAoX,YAAAA,OAAO,CAAC8mB,YAAR,GAAuB,EAAvB;AACD;;AAED,mBAASc,YAAT,CAAsB7qB,WAAtB,EAAmC8qB,KAAnC,EAA0C;AACxC,iBAAKC,oBAAL,GAA4B/qB,WAA5B;AACA,iBAAKiD,OAAL,GAAe,IAAIjD,WAAJ,CAAgBrH,IAAhB,CAAf;;AAEA,gBAAI,CAAC,KAAKsK,OAAL,CAAa+kB,UAAb,CAAL,EAA+B;AAC7BC,cAAAA,WAAW,CAAC,KAAKhlB,OAAN,CAAX;AACD;;AAED,gBAAIvb,OAAO,CAACojC,KAAD,CAAX,EAAoB;AAClB,mBAAKlhC,MAAL,GAAckhC,KAAK,CAAClhC,MAApB;AACA,mBAAKohC,UAAL,GAAkBF,KAAK,CAAClhC,MAAxB;AAEA,mBAAKw+B,OAAL,GAAe,IAAIv2B,KAAJ,CAAU,KAAKjI,MAAf,CAAf;;AAEA,kBAAI,KAAKA,MAAL,KAAgB,CAApB,EAAuB;AACrB0/B,gBAAAA,OAAO,CAAC,KAAKrmB,OAAN,EAAe,KAAKmlB,OAApB,CAAP;AACD,eAFD,MAEO;AACL,qBAAKx+B,MAAL,GAAc,KAAKA,MAAL,IAAe,CAA7B;;AACA,qBAAKqhC,UAAL,CAAgBH,KAAhB;;AACA,oBAAI,KAAKE,UAAL,KAAoB,CAAxB,EAA2B;AACzB1B,kBAAAA,OAAO,CAAC,KAAKrmB,OAAN,EAAe,KAAKmlB,OAApB,CAAP;AACD;AACF;AACF,aAfD,MAeO;AACLplB,cAAAA,MAAM,CAAC,KAAKC,OAAN,EAAeioB,eAAe,EAA9B,CAAN;AACD;AACF;;AAED,mBAASA,eAAT,GAA2B;AACzB,mBAAO,IAAIt5B,KAAJ,CAAU,yCAAV,CAAP;AACD;;AAEDi5B,UAAAA,YAAY,CAACvkC,SAAb,CAAuB2kC,UAAvB,GAAoC,UAAUH,KAAV,EAAiB;AACnD,iBAAK,IAAI5lC,CAAC,GAAG,CAAb,EAAgB,KAAKgjC,MAAL,KAAgBK,OAAhB,IAA2BrjC,CAAC,GAAG4lC,KAAK,CAAClhC,MAArD,EAA6D1E,CAAC,EAA9D,EAAkE;AAChE,mBAAKimC,UAAL,CAAgBL,KAAK,CAAC5lC,CAAD,CAArB,EAA0BA,CAA1B;AACD;AACF,WAJD;;AAMA2lC,UAAAA,YAAY,CAACvkC,SAAb,CAAuB6kC,UAAvB,GAAoC,UAAUvO,KAAV,EAAiB13B,CAAjB,EAAoB;AACtD,gBAAII,CAAC,GAAG,KAAKylC,oBAAb;AACA,gBAAIK,UAAU,GAAG9lC,CAAC,CAACyd,OAAnB;;AAEA,gBAAIqoB,UAAU,KAAK9C,SAAnB,EAA8B;AAC5B,kBAAI+C,KAAK,GAAGvC,OAAO,CAAClM,KAAD,CAAnB;;AAEA,kBAAIyO,KAAK,KAAK9Z,IAAV,IAAkBqL,KAAK,CAACsL,MAAN,KAAiBK,OAAvC,EAAgD;AAC9C,qBAAK+C,UAAL,CAAgB1O,KAAK,CAACsL,MAAtB,EAA8BhjC,CAA9B,EAAiC03B,KAAK,CAACwL,OAAvC;AACD,eAFD,MAEO,IAAI,OAAOiD,KAAP,KAAiB,UAArB,EAAiC;AACtC,qBAAKL,UAAL;AACA,qBAAK5C,OAAL,CAAaljC,CAAb,IAAkB03B,KAAlB;AACD,eAHM,MAGA,IAAIt3B,CAAC,KAAKimC,SAAV,EAAqB;AAC1B,oBAAItoB,OAAO,GAAG,IAAI3d,CAAJ,CAAMqT,IAAN,CAAd;AACA+wB,gBAAAA,mBAAmB,CAACzmB,OAAD,EAAU2Z,KAAV,EAAiByO,KAAjB,CAAnB;;AACA,qBAAKG,aAAL,CAAmBvoB,OAAnB,EAA4B/d,CAA5B;AACD,eAJM,MAIA;AACL,qBAAKsmC,aAAL,CAAmB,IAAIlmC,CAAJ,CAAM,UAAU8lC,UAAV,EAAsB;AAC7C,yBAAOA,UAAU,CAACxO,KAAD,CAAjB;AACD,iBAFkB,CAAnB,EAEI13B,CAFJ;AAGD;AACF,aAjBD,MAiBO;AACL,mBAAKsmC,aAAL,CAAmBJ,UAAU,CAACxO,KAAD,CAA7B,EAAsC13B,CAAtC;AACD;AACF,WAxBD;;AA0BA2lC,UAAAA,YAAY,CAACvkC,SAAb,CAAuBglC,UAAvB,GAAoC,UAAU11B,KAAV,EAAiB1Q,CAAjB,EAAoBkH,KAApB,EAA2B;AAC7D,gBAAI6W,OAAO,GAAG,KAAKA,OAAnB;;AAEA,gBAAIA,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC;AAC9B,mBAAKyC,UAAL;;AAEA,kBAAIp1B,KAAK,KAAK6yB,QAAd,EAAwB;AACtBzlB,gBAAAA,MAAM,CAACC,OAAD,EAAU7W,KAAV,CAAN;AACD,eAFD,MAEO;AACL,qBAAKg8B,OAAL,CAAaljC,CAAb,IAAkBkH,KAAlB;AACD;AACF;;AAED,gBAAI,KAAK4+B,UAAL,KAAoB,CAAxB,EAA2B;AACzB1B,cAAAA,OAAO,CAACrmB,OAAD,EAAU,KAAKmlB,OAAf,CAAP;AACD;AACF,WAhBD;;AAkBAyC,UAAAA,YAAY,CAACvkC,SAAb,CAAuBklC,aAAvB,GAAuC,UAAUvoB,OAAV,EAAmB/d,CAAnB,EAAsB;AAC3D,gBAAIumC,UAAU,GAAG,IAAjB;AAEApD,YAAAA,SAAS,CAACplB,OAAD,EAAUpX,SAAV,EAAqB,UAAUO,KAAV,EAAiB;AAC7C,qBAAOq/B,UAAU,CAACH,UAAX,CAAsB9C,SAAtB,EAAiCtjC,CAAjC,EAAoCkH,KAApC,CAAP;AACD,aAFQ,EAEN,UAAUm9B,MAAV,EAAkB;AACnB,qBAAOkC,UAAU,CAACH,UAAX,CAAsB7C,QAAtB,EAAgCvjC,CAAhC,EAAmCqkC,MAAnC,CAAP;AACD,aAJQ,CAAT;AAKD,WARD;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,mBAASmC,KAAT,CAAepmB,OAAf,EAAwB;AACtB,mBAAO,IAAIulB,YAAJ,CAAiB,IAAjB,EAAuBvlB,OAAvB,EAAgCrC,OAAvC;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,mBAAS0oB,MAAT,CAAgBrmB,OAAhB,EAAyB;AACvB;AACA,gBAAItF,WAAW,GAAG,IAAlB;;AAEA,gBAAI,CAACtY,OAAO,CAAC4d,OAAD,CAAZ,EAAuB;AACrB,qBAAO,IAAItF,WAAJ,CAAgB,UAAU4rB,CAAV,EAAa5oB,MAAb,EAAqB;AAC1C,uBAAOA,MAAM,CAAC,IAAItM,SAAJ,CAAc,iCAAd,CAAD,CAAb;AACD,eAFM,CAAP;AAGD,aAJD,MAIO;AACL,qBAAO,IAAIsJ,WAAJ,CAAgB,UAAU+C,OAAV,EAAmBC,MAAnB,EAA2B;AAChD,oBAAIpZ,MAAM,GAAG0b,OAAO,CAAC1b,MAArB;;AACA,qBAAK,IAAI1E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0E,MAApB,EAA4B1E,CAAC,EAA7B,EAAiC;AAC/B8a,kBAAAA,WAAW,CAAC+C,OAAZ,CAAoBuC,OAAO,CAACpgB,CAAD,CAA3B,EAAgCqsB,IAAhC,CAAqCxO,OAArC,EAA8CC,MAA9C;AACD;AACF,eALM,CAAP;AAMD;AACF;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,mBAAS6oB,QAAT,CAAkBtC,MAAlB,EAA0B;AACxB;AACA,gBAAIvpB,WAAW,GAAG,IAAlB;AACA,gBAAIiD,OAAO,GAAG,IAAIjD,WAAJ,CAAgBrH,IAAhB,CAAd;AACAqK,YAAAA,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAN;AACA,mBAAOtmB,OAAP;AACD;;AAED,mBAAS6oB,aAAT,GAAyB;AACvB,kBAAM,IAAIp1B,SAAJ,CAAc,oFAAd,CAAN;AACD;;AAED,mBAASq1B,QAAT,GAAoB;AAClB,kBAAM,IAAIr1B,SAAJ,CAAc,uHAAd,CAAN;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA,mBAAS60B,SAAT,CAAmBd,QAAnB,EAA6B;AAC3B,iBAAKzC,UAAL,IAAmB4C,MAAM,EAAzB;AACA,iBAAKxC,OAAL,GAAe,KAAKF,MAAL,GAAcr8B,SAA7B;AACA,iBAAKk+B,YAAL,GAAoB,EAApB;;AAEA,gBAAIpxB,IAAI,KAAK8xB,QAAb,EAAuB;AACrB,qBAAOA,QAAP,KAAoB,UAApB,IAAkCqB,aAAa,EAA/C;AACA,8BAAgBP,SAAhB,GAA4Bf,iBAAiB,CAAC,IAAD,EAAOC,QAAP,CAA7C,GAAgEsB,QAAQ,EAAxE;AACD;AACF;;AAEDR,UAAAA,SAAS,CAACS,GAAV,GAAgBN,KAAhB;AACAH,UAAAA,SAAS,CAACU,IAAV,GAAiBN,MAAjB;AACAJ,UAAAA,SAAS,CAACxoB,OAAV,GAAoBulB,SAApB;AACAiD,UAAAA,SAAS,CAACvoB,MAAV,GAAmB6oB,QAAnB;AACAN,UAAAA,SAAS,CAACW,aAAV,GAA0B9F,YAA1B;AACAmF,UAAAA,SAAS,CAACY,QAAV,GAAqB7F,OAArB;AACAiF,UAAAA,SAAS,CAACa,KAAV,GAAkBpG,IAAlB;AAEAuF,UAAAA,SAAS,CAACjlC,SAAV,GAAsB;AACpBwB,YAAAA,WAAW,EAAEyjC,SADO;;AAGpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMAha,YAAAA,IAAI,EAAEA,IApMc;;AAsMpB;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,qBAAS,SAAS8a,MAAT,CAAgBvE,WAAhB,EAA6B;AACpC,qBAAO,KAAKvW,IAAL,CAAU,IAAV,EAAgBuW,WAAhB,CAAP;AACD;AAnOmB,WAAtB;AAsOA;;AACA,mBAASwE,UAAT,GAAsB;AAClB,gBAAIC,KAAK,GAAG1gC,SAAZ;;AAEA,gBAAI,OAAOhF,MAAP,KAAkB,WAAtB,EAAmC;AAC/B0lC,cAAAA,KAAK,GAAG1lC,MAAR;AACH,aAFD,MAEO,IAAI,OAAOG,IAAP,KAAgB,WAApB,EAAiC;AACpCulC,cAAAA,KAAK,GAAGvlC,IAAR;AACH,aAFM,MAEA;AACH,kBAAI;AACAulC,gBAAAA,KAAK,GAAGtlC,QAAQ,CAAC,aAAD,CAAR,EAAR;AACH,eAFD,CAEE,OAAOoI,CAAP,EAAU;AACR,sBAAM,IAAIuC,KAAJ,CAAU,0EAAV,CAAN;AACH;AACJ;;AAED,gBAAIxG,CAAC,GAAGmhC,KAAK,CAACtd,OAAd;;AAEA,gBAAI7jB,CAAJ,EAAO;AACH,kBAAIohC,eAAe,GAAG,IAAtB;;AACA,kBAAI;AACAA,gBAAAA,eAAe,GAAG7mC,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+BgG,CAAC,CAAC2X,OAAF,EAA/B,CAAlB;AACH,eAFD,CAEE,OAAO1T,CAAP,EAAU,CACR;AACH;;AAED,kBAAIm9B,eAAe,KAAK,kBAApB,IAA0C,CAACphC,CAAC,CAACqhC,IAAjD,EAAuD;AACnD;AACH;AACJ;;AAEDF,YAAAA,KAAK,CAACtd,OAAN,GAAgBsc,SAAhB;AACH,WA9mCoB,CAgnCrB;;;AACAA,UAAAA,SAAS,CAAC9F,QAAV,GAAqB6G,UAArB;AACAf,UAAAA,SAAS,CAACtc,OAAV,GAAoBsc,SAApB;AAEA,iBAAOA,SAAP;AAEC,SA1nCA,CAAD;AA8nCA;;AAA4B,OAtoCA,EAsoCCnmC,IAtoCD,CAsoCMV,OAtoCN,EAsoCeM,mBAAmB,CAAC,CAAD,CAtoClC,EAsoCuCA,mBAAmB,CAAC,EAAD,CAtoC1D,CAAD;AAwoC3B;AAAO,KAtsMG;AAusMV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAI4vB,CAAJ,CAFiC,CAIjC;;AACAA,MAAAA,CAAC,GAAI,YAAW;AACf,eAAO,IAAP;AACA,OAFG,EAAJ;;AAIA,UAAI;AACH;AACAA,QAAAA,CAAC,GAAGA,CAAC,IAAIrtB,QAAQ,CAAC,aAAD,CAAR,EAAL,IAAkC,CAAC,GAAEylC,IAAH,EAAS,MAAT,CAAtC;AACA,OAHD,CAGE,OAAMr9B,CAAN,EAAS;AACV;AACA,YAAG,QAAOvI,MAAP,0CAAOA,MAAP,OAAkB,QAArB,EACCwtB,CAAC,GAAGxtB,MAAJ;AACD,OAhBgC,CAkBjC;AACA;AACA;;;AAEAnC,MAAAA,MAAM,CAACD,OAAP,GAAiB4vB,CAAjB;AAGA;AAAO,KAjuMG;AAkuMV;;AACA;AAAO,cAAS3vB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;;AAEA;AAAO,KAvuMG;AAwuMV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI2nC,QAAQ,GAAG3nC,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,UAAI4nC,SAAS,GAAGzsB,sBAAsB,CAACwsB,QAAD,CAAtC;;AAEA,UAAIE,OAAO,GAAG7nC,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAI8nC,QAAQ,GAAG3sB,sBAAsB,CAAC0sB,OAAD,CAArC;;AAEA,UAAIE,eAAe,GAAG/nC,mBAAmB,CAAC,EAAD,CAAzC;;AAEA,UAAIgoC,gBAAgB,GAAG7sB,sBAAsB,CAAC4sB,eAAD,CAA7C;;AAEA,UAAIxZ,gBAAgB,GAAGvuB,mBAAmB,CAAC,EAAD,CAA1C;;AAEA,UAAIwuB,gBAAgB,GAAGrT,sBAAsB,CAACoT,gBAAD,CAA7C;;AAEA,UAAIE,aAAa,GAAGzuB,mBAAmB,CAAC,EAAD,CAAvC;;AAEA,UAAI0uB,aAAa,GAAGvT,sBAAsB,CAACsT,aAAD,CAA1C;;AAEA,UAAIwZ,2BAA2B,GAAGjoC,mBAAmB,CAAC,EAAD,CAArD;;AAEA,UAAIkoC,2BAA2B,GAAG/sB,sBAAsB,CAAC8sB,2BAAD,CAAxD;;AAEA,UAAIE,UAAU,GAAGnoC,mBAAmB,CAAC,EAAD,CAApC;;AAEA,UAAIooC,UAAU,GAAGjtB,sBAAsB,CAACgtB,UAAD,CAAvC;;AAEA,UAAIpa,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,UAAIsa,cAAc,GAAGroC,mBAAmB,CAAC,GAAD,CAAxC;;AAEA,UAAIsoC,eAAe,GAAGntB,sBAAsB,CAACktB,cAAD,CAA5C;;AAEA,UAAIE,SAAS,GAAGvoC,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIwoC,UAAU,GAAGrtB,sBAAsB,CAACotB,SAAD,CAAvC;;AAEA,UAAIE,KAAK,GAAGzoC,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI0oC,MAAM,GAAGvtB,sBAAsB,CAACstB,KAAD,CAAnC;;AAEAzoC,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AAEA,UAAI2oC,KAAK,GAAG3oC,mBAAmB,CAAC,EAAD,CAA/B;;AAEA,UAAI4oC,OAAO,GAAG5oC,mBAAmB,CAAC,EAAD,CAAjC;;AAEA,UAAI6oC,QAAQ,GAAG1tB,sBAAsB,CAACytB,OAAD,CAArC;;AAEA,UAAIE,OAAO,GAAG9oC,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAI+oC,QAAQ,GAAG5tB,sBAAsB,CAAC2tB,OAAD,CAArC;;AAEA,UAAIE,OAAO,GAAGhpC,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIipC,QAAQ,GAAG9tB,sBAAsB,CAAC6tB,OAAD,CAArC;;AAEA,UAAIE,QAAQ,GAAGlpC,mBAAmB,CAAC,GAAD,CAAlC;;AAEA,UAAImpC,SAAS,GAAGhuB,sBAAsB,CAAC+tB,QAAD,CAAtC;;AAEA,UAAIE,IAAI,GAAGppC,mBAAmB,CAAC,EAAD,CAA9B;;AAEA,UAAIqpC,KAAK,GAAGluB,sBAAsB,CAACiuB,IAAD,CAAlC;;AAEA,UAAIE,MAAM,GAAGtpC,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAIupC,YAAY,GAAGvpC,mBAAmB,CAAC,GAAD,CAAtC;;AAEA,UAAIwpC,aAAa,GAAGruB,sBAAsB,CAACouB,YAAD,CAA1C;;AAEA,eAASpuB,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI+kC,eAAe,GAAG,UAAUC,UAAV,EAAsB;AAC1C,SAAC,GAAGtB,UAAU,WAAd,EAAwBqB,eAAxB,EAAyCC,UAAzC;;AAEA,iBAASD,eAAT,CAAyBx9B,KAAzB,EAAgC;AAC9B,WAAC,GAAGuiB,gBAAgB,WAApB,EAA8B,IAA9B,EAAoCib,eAApC;;AAEA,cAAIE,KAAK,GAAG,CAAC,GAAGzB,2BAA2B,WAA/B,EAAyC,IAAzC,EAA+C,CAACuB,eAAe,CAACzkB,SAAhB,IAA6B,CAAC,GAAGgjB,gBAAgB,WAApB,EAA8ByB,eAA9B,CAA9B,EAA8ErpC,IAA9E,CAAmF,IAAnF,EAAyF6L,KAAzF,CAA/C,CAAZ;;AAEA09B,UAAAA,KAAK,CAAC/4B,KAAN,GAAc;AACZg5B,YAAAA,IAAI,EAAE,IADM;AAEZC,YAAAA,KAAK,EAAE,IAFK;AAGZC,YAAAA,QAAQ,EAAE,EAHE;AAIZC,YAAAA,aAAa,EAAE,EAJH;AAKZC,YAAAA,OAAO,EAAE,EALG;AAMZC,YAAAA,IAAI,EAAE,CANM;AAOZC,YAAAA,cAAc,EAAE,MAPJ;AAQZC,YAAAA,MAAM,EAAE,IARI;AASZC,YAAAA,WAAW,EAAE,EATD;AAWZC,YAAAA,QAAQ,EAAE,KAXE;AAYZC,YAAAA,SAAS,EAAE,IAZC;AAaZC,YAAAA,UAAU,EAAE,KAbA;AAcZC,YAAAA,SAAS,EAAE,KAdC;AAeZC,YAAAA,UAAU,EAAE,KAfA;AAgBZC,YAAAA,UAAU,EAAE,KAhBA;AAiBZC,YAAAA,eAAe,EAAE,KAjBL;AAkBZC,YAAAA,cAAc,EAAE,KAlBJ;AAmBZC,YAAAA,cAAc,EAAE,KAnBJ;AAoBZC,YAAAA,SAAS,EAAE,KApBC;AAsBZC,YAAAA,YAAY,EAAE,KAtBF;AAuBZC,YAAAA,QAAQ,EAAE;AAvBE,WAAd;;AA0BArB,UAAAA,KAAK,CAACsB,aAAN,GAAsB,UAAUpB,KAAV,EAAiB;AACrC,gBAAIqB,aAAa,GAAGvB,KAAK,CAAChzB,OAA1B;AAAA,gBACIw0B,QAAQ,GAAGD,aAAa,CAACC,QAD7B;AAAA,gBAEIC,YAAY,GAAGF,aAAa,CAACE,YAFjC;AAAA,gBAGIC,OAAO,GAAGH,aAAa,CAACG,OAH5B;AAIA,gBAAIpB,IAAI,GAAGN,KAAK,CAAC/4B,KAAN,CAAYq5B,IAAvB;AAGA,mBAAON,KAAK,CAAC2B,QAAN,GAAiB/e,IAAjB,CAAsB,UAAUsd,KAAV,EAAiB;AAC5C,kBAAI,CAACA,KAAL,EAAY;AAEZ,qBAAOlB,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsB8oC,KAAK,CAAC0B,YAA5B,EAA0C;AAC/C9kB,gBAAAA,OAAO,EAAE;AACP+kB,kBAAAA,MAAM,EAAE;AADD,iBADsC;AAI/ClhB,gBAAAA,IAAI,EAAE;AACJC,kBAAAA,QAAQ,EAAE4gB,QADN;AAEJ3gB,kBAAAA,QAAQ,EAAE4gB;AAFN,iBAJyC;AAQ/CxjB,gBAAAA,MAAM,EAAE;AACN6jB,kBAAAA,QAAQ,EAAEJ,OADJ;AAENpB,kBAAAA,IAAI,EAAEA;AAFA;AARuC,eAA1C,EAYJ1d,IAZI,CAYC,UAAUmf,GAAV,EAAe;AACrB,oBAAIC,WAAW,GAAGhC,KAAK,CAAC/4B,KAAxB;AAAA,oBACIk5B,QAAQ,GAAG6B,WAAW,CAAC7B,QAD3B;AAAA,oBAEID,KAAK,GAAG8B,WAAW,CAAC9B,KAFxB;AAIA,oBAAIa,UAAU,GAAG,KAAjB;AACA,oBAAIkB,EAAE,GAAG9B,QAAQ,CAACh9B,MAAT,CAAgB4+B,GAAG,CAAClpB,IAApB,CAAT;;AACA,oBAAIopB,EAAE,CAAChnC,MAAH,IAAailC,KAAK,CAACC,QAAnB,IAA+B4B,GAAG,CAAClpB,IAAJ,CAAS5d,MAAT,GAAkBymC,OAArD,EAA8D;AAC5DX,kBAAAA,UAAU,GAAG,IAAb;AACD;;AACDf,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb84B,kBAAAA,QAAQ,EAAE8B,EADG;AAEblB,kBAAAA,UAAU,EAAEA,UAFC;AAGbT,kBAAAA,IAAI,EAAEA,IAAI,GAAG;AAHA,iBAAf;;AAKA,uBAAO2B,EAAP;AACD,eA5BM,CAAP;AA6BD,aAhCM,CAAP;AAiCD,WAzCD;;AA2CAjC,UAAAA,KAAK,CAACkC,MAAN,GAAe,UAAUxhC,CAAV,EAAa;AAC1Bs/B,YAAAA,KAAK,CAACmC,WAAN,GAAoBzhC,CAApB;AACD,WAFD;;AAIAs/B,UAAAA,KAAK,CAACoC,KAAN,GAAc,UAAUC,YAAV,EAAwB;AACpC,mBAAO,YAAY;AACjB,kBAAIhC,OAAO,GAAGL,KAAK,CAAC/4B,KAAN,CAAYo5B,OAA1B;AAEA,kBAAIiC,gBAAgB,GAAGD,YAAY,CAACE,IAApC;AACA,kBAAIC,iBAAiB,GAAGF,gBAAgB,CAACzjC,KAAjB,CAAuB,IAAvB,CAAxB;AACA2jC,cAAAA,iBAAiB,CAACrM,OAAlB,CAA0B,MAAMkM,YAAY,CAACpC,IAAb,CAAkBwC,KAAlD;AACAD,cAAAA,iBAAiB,GAAGA,iBAAiB,CAAC3/B,GAAlB,CAAsB,UAAUkjB,CAAV,EAAa;AACrD,uBAAO,OAAOA,CAAd;AACD,eAFmB,CAApB;AAGAyc,cAAAA,iBAAiB,CAAC99B,IAAlB,CAAuB,EAAvB;AACA89B,cAAAA,iBAAiB,CAAC99B,IAAlB,CAAuB,EAAvB;AACA,kBAAI27B,OAAJ,EAAamC,iBAAiB,CAACrM,OAAlB,CAA0B,EAA1B;;AACb6J,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAEg5B,gBAAAA,OAAO,EAAEA,OAAO,GAAGmC,iBAAiB,CAAC3lB,IAAlB,CAAuB,IAAvB;AAArB,eAAf,EAAoE,YAAY;AAC9EgiB,gBAAAA,UAAU,WAAV,CAAmB6D,MAAnB,CAA0B1C,KAAK,CAAC2C,SAAhC;;AACA3C,gBAAAA,KAAK,CAAC2C,SAAN,CAAgBC,KAAhB;AACD,eAHD;AAID,aAhBD;AAiBD,WAlBD;;AAoBA5C,UAAAA,KAAK,CAAC6C,WAAN,GAAoB,UAAUniC,CAAV,EAAa;AAC/BA,YAAAA,CAAC,CAACoiC,cAAF;AACApiC,YAAAA,CAAC,CAACqiC,eAAF;AACA,gBAAIC,SAAS,GAAG,CAAChD,KAAK,CAAC/4B,KAAN,CAAYg6B,cAA7B;;AACA,gBAAIgC,UAAU,GAAG,SAASA,UAAT,CAAoBC,EAApB,EAAwB;AACvC,kBAAI,CAAC,GAAGlE,KAAK,CAAC1jB,gBAAV,EAA4B4nB,EAAE,CAACnmC,MAA/B,EAAuC,SAAvC,EAAkD,UAAlD,CAAJ,EAAmE;AACjE;AACD;;AACD5E,cAAAA,MAAM,CAAC0C,QAAP,CAAgBy2B,mBAAhB,CAAoC,OAApC,EAA6C2R,UAA7C;;AACAjD,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE45B,gBAAAA,cAAc,EAAE;AAAlB,eAAf;AACD,aAND;;AAOAjB,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE45B,cAAAA,cAAc,EAAE+B;AAAlB,aAAf;;AACA,gBAAIA,SAAJ,EAAe;AACb7qC,cAAAA,MAAM,CAAC0C,QAAP,CAAgBse,gBAAhB,CAAiC,OAAjC,EAA0C8pB,UAA1C;AACD,aAFD,MAEO;AACL9qC,cAAAA,MAAM,CAAC0C,QAAP,CAAgBy2B,mBAAhB,CAAoC,OAApC,EAA6C2R,UAA7C;AACD;AACF,WAjBD;;AAmBAjD,UAAAA,KAAK,CAACmD,WAAN,GAAoB,YAAY;AAC9B,gBAAI9C,OAAO,GAAGL,KAAK,CAAC/4B,KAAN,CAAYo5B,OAA1B;AAEAloC,YAAAA,MAAM,CAACirC,YAAP,CAAoBC,OAApB,CAA4B1D,MAAM,CAAC2D,UAAnC,EAA+C1mB,kBAAkB,CAACyjB,OAAD,CAAjE;AACAloC,YAAAA,MAAM,CAACikB,QAAP,CAAgBmnB,IAAhB,GAAuBvD,KAAK,CAACwD,SAA7B;AACD,WALD;;AAOAxD,UAAAA,KAAK,CAACyD,iBAAN,GAA0B,YAAY;AACpCzD,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE25B,cAAAA,eAAe,EAAE;AAAnB,aAAf;;AACAhB,YAAAA,KAAK,CAAC0D,WAAN,GAAoB9gB,IAApB,CAAyB,UAAUsd,KAAV,EAAiB;AACxCF,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb25B,gBAAAA,eAAe,EAAE,KADJ;AAEbI,gBAAAA,YAAY,EAAE;AAFD,eAAf;;AAIA,qBAAOpB,KAAK,CAAC2D,WAAN,CAAkBzD,KAAlB,CAAP;AACD,aAND,WAMS,UAAU9iB,GAAV,EAAe;AACtB4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb25B,gBAAAA,eAAe,EAAE,KADJ;AAEbI,gBAAAA,YAAY,EAAE,IAFD;AAGbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,eAAf;AAKD,aAZD,EAYGwF,IAZH,CAYQ,UAAUmf,GAAV,EAAe;AACrB,kBAAIA,GAAJ,EAAS;AACP/B,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbq5B,kBAAAA,QAAQ,EAAE;AADG,iBAAf;AAGD;AACF,aAlBD;AAmBD,WArBD;;AAuBAV,UAAAA,KAAK,CAAC4D,mBAAN,GAA4B,UAAUljC,CAAV,EAAa;AACvC,gBAAI,CAACs/B,KAAK,CAAC/4B,KAAN,CAAYo5B,OAAZ,CAAoBplC,MAAzB,EAAiC;AAC/ByF,cAAAA,CAAC,IAAIA,CAAC,CAACoiC,cAAF,EAAL;;AACA9C,cAAAA,KAAK,CAAC2C,SAAN,CAAgBC,KAAhB;;AACA;AACD;;AACD5C,YAAAA,KAAK,CAAC34B,QAAN,CAAe,UAAUJ,KAAV,EAAiB;AAC9B,kBAAIA,KAAK,CAAC25B,UAAV,EAAsB;;AAEtBZ,cAAAA,KAAK,CAAC6D,aAAN,GAAsBjhB,IAAtB,CAA2B,YAAY;AACrC,uBAAOod,KAAK,CAAC34B,QAAN,CAAe;AACpBu5B,kBAAAA,UAAU,EAAE,KADQ;AAEpBQ,kBAAAA,YAAY,EAAE;AAFM,iBAAf,CAAP;AAID,eALD,WAKS,UAAUhkB,GAAV,EAAe;AACtB4iB,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbu5B,kBAAAA,UAAU,EAAE,KADC;AAEbQ,kBAAAA,YAAY,EAAE,IAFD;AAGbC,kBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,iBAAf;AAKD,eAXD;;AAYA,qBAAO;AAAEwjB,gBAAAA,UAAU,EAAE;AAAd,eAAP;AACD,aAhBD;AAiBD,WAvBD;;AAyBAZ,UAAAA,KAAK,CAAC8D,oBAAN,GAA6B,UAAUpjC,CAAV,EAAa;AACxCs/B,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb85B,cAAAA,SAAS,EAAE,CAACnB,KAAK,CAAC/4B,KAAN,CAAYk6B;AADX,aAAf;;AAIAnC,YAAAA,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,WAAvB,EAAoC;AAClCtf,cAAAA,IAAI,EAAEub,KAAK,CAAC/4B,KAAN,CAAYo5B;AADgB,aAApC,EAEG;AACDvjB,cAAAA,OAAO,EAAEkjB,KAAK,CAACgE,WAAN,IAAqB;AAAEljB,gBAAAA,aAAa,EAAE,WAAWkf,KAAK,CAACgE;AAAlC;AAD7B,aAFH,EAIGphB,IAJH,CAIQ,UAAUmf,GAAV,EAAe;AACrB/B,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbo5B,gBAAAA,WAAW,EAAEsB,GAAG,CAAClpB;AADJ,eAAf;AAGD,aARD,WAQS,UAAUuE,GAAV,EAAe;AACtB4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb+5B,gBAAAA,YAAY,EAAE,IADD;AAEbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAFG,eAAf;AAID,aAbD;AAcD,WAnBD;;AAqBA4iB,UAAAA,KAAK,CAACiE,iBAAN,GAA0B,YAAY;AACpC,gBAAIC,YAAY,GAAGlE,KAAK,CAAC/4B,KAAzB;AAAA,gBACIi5B,KAAK,GAAGgE,YAAY,CAAChE,KADzB;AAAA,gBAEIY,UAAU,GAAGoD,YAAY,CAACpD,UAF9B;AAIA,gBAAIA,UAAJ,EAAgB;;AAChBd,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAEy5B,cAAAA,UAAU,EAAE;AAAd,aAAf;;AACAd,YAAAA,KAAK,CAAC2D,WAAN,CAAkBzD,KAAlB,EAAyBtd,IAAzB,CAA8B,YAAY;AACxC,qBAAOod,KAAK,CAAC34B,QAAN,CAAe;AAAEy5B,gBAAAA,UAAU,EAAE;AAAd,eAAf,CAAP;AACD,aAFD;AAGD,WAVD;;AAYAd,UAAAA,KAAK,CAACmE,mBAAN,GAA4B,UAAUzjC,CAAV,EAAa;AACvC,mBAAOs/B,KAAK,CAAC34B,QAAN,CAAe;AAAEg5B,cAAAA,OAAO,EAAE3/B,CAAC,CAAC3D,MAAF,CAASU;AAApB,aAAf,CAAP;AACD,WAFD;;AAIAuiC,UAAAA,KAAK,CAACoE,YAAN,GAAqB,YAAY;AAC/BpE,YAAAA,KAAK,CAACqE,MAAN;;AACAlsC,YAAAA,MAAM,CAACikB,QAAP,CAAgBkoB,MAAhB;AACD,WAHD;;AAKAtE,UAAAA,KAAK,CAACuE,kBAAN,GAA2B,UAAU7jC,CAAV,EAAa;AACtC,gBAAI8jC,mBAAmB,GAAGxE,KAAK,CAAChzB,OAAN,CAAcw3B,mBAAxC;AAEA,gBAAI,CAACA,mBAAL,EAA0B,OAAO9jC,CAAC,CAACoiC,cAAF,EAAP;;AAC1B9C,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE65B,cAAAA,cAAc,EAAE;AAAlB,aAAf;AACD,WALD;;AAOAlB,UAAAA,KAAK,CAACyE,iBAAN,GAA0B,UAAU/jC,CAAV,EAAa;AACrC,gBAAI8jC,mBAAmB,GAAGxE,KAAK,CAAChzB,OAAN,CAAcw3B,mBAAxC;AAEA,gBAAI,CAACA,mBAAL,EAA0B,OAAO9jC,CAAC,CAACoiC,cAAF,EAAP;;AAC1B9C,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE65B,cAAAA,cAAc,EAAE;AAAlB,aAAf;AACD,WALD;;AAOAlB,UAAAA,KAAK,CAAC0E,UAAN,GAAmB,UAAUC,SAAV,EAAqB;AACtC,mBAAO,UAAUjkC,CAAV,EAAa;AAClBs/B,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAEk5B,gBAAAA,cAAc,EAAEoE;AAAlB,eAAf;AACD,aAFD;AAGD,WAJD;;AAMA3E,UAAAA,KAAK,CAAC4E,oBAAN,GAA6B,UAAUlkC,CAAV,EAAa;AACxC,gBAAImkC,YAAY,GAAG7E,KAAK,CAAChzB,OAAN,CAAc63B,YAAjC;;AAEA,gBAAIA,YAAY,KAAKnkC,CAAC,CAACokC,OAAF,IAAapkC,CAAC,CAACqkC,OAApB,CAAZ,IAA4CrkC,CAAC,CAACskC,OAAF,KAAc,EAA9D,EAAkE;AAChEhF,cAAAA,KAAK,CAACmC,WAAN,IAAqBnC,KAAK,CAACmC,WAAN,CAAkBS,KAAlB,EAArB;;AACA5C,cAAAA,KAAK,CAAC4D,mBAAN;AACD;AACF,WAPD;;AASA5D,UAAAA,KAAK,CAAChzB,OAAN,GAAgB,CAAC,GAAGmxB,QAAQ,WAAZ,EAAsB,EAAtB,EAA0B;AACxC3tB,YAAAA,EAAE,EAAErY,MAAM,CAACikB,QAAP,CAAgBmnB,IADoB;AAExChZ,YAAAA,MAAM,EAAE,CAAC,CAF+B;AAGxC0a,YAAAA,MAAM,EAAE,CAAC,QAAD,CAHgC;AAIxCr7B,YAAAA,KAAK,EAAEzR,MAAM,CAAC0C,QAAP,CAAgB+O,KAJiB;AAKxC24B,YAAAA,IAAI,EAAE,EALkC;AAK9B;AACV2C,YAAAA,QAAQ,EAAE/sC,MAAM,CAACwC,SAAP,CAAiBuqC,QAAjB,IAA6B/sC,MAAM,CAACwC,SAAP,CAAiBwqC,YANhB;AAOxCzD,YAAAA,OAAO,EAAE,EAP+B;AAQxCnB,YAAAA,cAAc,EAAE,MARwB;AAQhB;AACxB6E,YAAAA,mBAAmB,EAAE,KATmB;AAUxCZ,YAAAA,mBAAmB,EAAE,KAVmB;AAWxCa,YAAAA,KAAK,EAAE,iFAXiC;AAYxCC,YAAAA,eAAe,EAAE;AACfC,cAAAA,cAAc,EAAE,GADD;AAEfC,cAAAA,eAAe,EAAE,mBAFF;AAGfC,cAAAA,cAAc,EAAE,mBAHD;AAIfC,cAAAA,cAAc,EAAE;AAJD,aAZuB;AAkBxCb,YAAAA,YAAY,EAAE,IAlB0B;AAoBxC7mB,YAAAA,GAAG,EAAE7lB,MAAM,CAACikB,QAAP,CAAgBmnB,IApBmB;AAsBxCoC,YAAAA,aAAa,EAAE;AACbC,cAAAA,SAAS,EAAE,kDADE;AAEbnD,cAAAA,KAAK,EAAE,MAFM;AAGbzkB,cAAAA,GAAG,EAAE;AAHQ,aAtByB;AA4BxC6nB,YAAAA,mBAAmB,EAAE;AA5BmB,WAA1B,EA6BbvjC,KAAK,CAAC0K,OA7BO,CAAhB;AA+BAgzB,UAAAA,KAAK,CAAC/4B,KAAN,CAAYs5B,cAAZ,GAA6BP,KAAK,CAAChzB,OAAN,CAAcuzB,cAA3C;AACA,cAAIuF,aAAa,GAAG3tC,MAAM,CAACirC,YAAP,CAAoB2C,OAApB,CAA4BpG,MAAM,CAAC2D,UAAnC,CAApB;;AACA,cAAIwC,aAAJ,EAAmB;AACjB9F,YAAAA,KAAK,CAAC/4B,KAAN,CAAYo5B,OAAZ,GAAsB1jB,kBAAkB,CAACmpB,aAAD,CAAxC;AACA3tC,YAAAA,MAAM,CAACirC,YAAP,CAAoB4C,UAApB,CAA+BrG,MAAM,CAAC2D,UAAtC;AACD;;AAED,cAAI/mB,KAAK,GAAG,CAAC,GAAGyiB,KAAK,CAACpjB,UAAV,GAAZ;;AACA,cAAIW,KAAK,CAAC2G,IAAV,EAAgB;AACd,gBAAIA,IAAI,GAAG3G,KAAK,CAAC2G,IAAjB;AACA,mBAAO3G,KAAK,CAAC2G,IAAb;AACA,gBAAI+iB,WAAW,GAAG,KAAK9tC,MAAM,CAACikB,QAAP,CAAgB8pB,MAArB,GAA8B/tC,MAAM,CAACikB,QAAP,CAAgB+pB,QAA9C,GAAyD,CAAC,GAAGnH,KAAK,CAACrjB,cAAV,EAA0BY,KAA1B,CAAzD,GAA4FpkB,MAAM,CAACikB,QAAP,CAAgBgqB,IAA9H;AACAC,YAAAA,OAAO,CAACj/B,YAAR,CAAqB,IAArB,EAA2B,IAA3B,EAAiC6+B,WAAjC;AACAjG,YAAAA,KAAK,CAAChzB,OAAN,GAAgB,CAAC,GAAGmxB,QAAQ,WAAZ,EAAsB,EAAtB,EAA0B6B,KAAK,CAAChzB,OAAhC,EAAyC;AACvDgR,cAAAA,GAAG,EAAEioB,WADkD;AAEvDz1B,cAAAA,EAAE,EAAEy1B;AAFmD,aAAzC,EAGb3jC,KAAK,CAAC0K,OAHO,CAAhB;;AAKAgyB,YAAAA,KAAK,CAACtjB,SAAN,CAAgBqoB,IAAhB,CAAqB/D,KAAK,CAAChzB,OAAN,CAAcq4B,KAAnC,EAA0C;AACxCniB,cAAAA,IAAI,EAAEA,IADkC;AAExCojB,cAAAA,SAAS,EAAEtG,KAAK,CAAChzB,OAAN,CAAcw0B,QAFe;AAGxC+E,cAAAA,aAAa,EAAEvG,KAAK,CAAChzB,OAAN,CAAcy0B;AAHW,aAA1C,EAIG7e,IAJH,CAIQ,UAAUmf,GAAV,EAAe;AACrB,kBAAIA,GAAG,CAAClpB,IAAJ,IAAYkpB,GAAG,CAAClpB,IAAJ,CAAS2tB,YAAzB,EAAuC;AACrCxG,gBAAAA,KAAK,CAACgE,WAAN,GAAoBjC,GAAG,CAAClpB,IAAJ,CAAS2tB,YAA7B;;AAEAxG,gBAAAA,KAAK,CAACyG,OAAN,GAAgB7jB,IAAhB,CAAqB,YAAY;AAC/B,yBAAOod,KAAK,CAAC34B,QAAN,CAAe;AAAEs5B,oBAAAA,SAAS,EAAE;AAAb,mBAAf,CAAP;AACD,iBAFD,WAES,UAAUvjB,GAAV,EAAe;AACtB+L,kBAAAA,OAAO,CAACud,GAAR,CAAY,MAAZ,EAAoBtpB,GAApB;;AACA4iB,kBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbs5B,oBAAAA,SAAS,EAAE,KADE;AAEbS,oBAAAA,YAAY,EAAE,IAFD;AAGbC,oBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,mBAAf;AAKD,iBATD;AAUD,eAbD,MAaO;AACL;AACA+L,gBAAAA,OAAO,CAACud,GAAR,CAAY,eAAZ,EAA6B3E,GAAG,CAAClpB,IAAjC;;AACAmnB,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb+5B,kBAAAA,YAAY,EAAE,IADD;AAEbC,kBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B,IAAItY,KAAJ,CAAU,iBAAV,CAA1B;AAFG,iBAAf;AAID;AACF,aA1BD,WA0BS,UAAUma,GAAV,EAAe;AACtB+L,cAAAA,OAAO,CAACud,GAAR,CAAY,OAAZ,EAAqBtpB,GAArB;;AACA4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb+5B,gBAAAA,YAAY,EAAE,IADD;AAEbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAFG,eAAf;AAID,aAhCD;AAiCD,WA3CD,MA2CO;AACL4iB,YAAAA,KAAK,CAACyG,OAAN,GAAgB7jB,IAAhB,CAAqB,YAAY;AAC/B,qBAAOod,KAAK,CAAC34B,QAAN,CAAe;AAAEs5B,gBAAAA,SAAS,EAAE;AAAb,eAAf,CAAP;AACD,aAFD,WAES,UAAUvjB,GAAV,EAAe;AACtB+L,cAAAA,OAAO,CAACud,GAAR,CAAY,MAAZ,EAAoBtpB,GAApB;;AACA4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbs5B,gBAAAA,SAAS,EAAE,KADE;AAEbS,gBAAAA,YAAY,EAAE,IAFD;AAGbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,eAAf;AAKD,aATD;AAUD;;AAED4iB,UAAAA,KAAK,CAAC2G,IAAN,GAAa,CAAC,GAAG5H,MAAM,WAAV,EAAoBiB,KAAK,CAAChzB,OAAN,CAAck4B,QAAlC,CAAb;AACA,iBAAOlF,KAAP;AACD;;AAED,SAAC,GAAGjb,aAAa,WAAjB,EAA2B+a,eAA3B,EAA4C,CAAC;AAC3C5kC,UAAAA,GAAG,EAAE,oBADsC;AAE3CuC,UAAAA,KAAK,EAAE,SAAS4B,kBAAT,GAA8B;AACnC,iBAAKsjC,SAAL,IAAkB,CAAC,GAAG9D,UAAU,WAAd,EAAwB,KAAK8D,SAA7B,CAAlB;AACD;AAJ0C,SAAD,EAKzC;AACDznC,UAAAA,GAAG,EAAE,SADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASgpC,OAAT,GAAmB;AACxB,gBAAIG,MAAM,GAAG,IAAb;;AAEA,mBAAO,KAAKC,WAAL,GAAmBjkB,IAAnB,CAAwB,YAAY;AACzC,qBAAOgkB,MAAM,CAACjF,QAAP,EAAP;AACD,aAFM,EAEJ/e,IAFI,CAEC,UAAUsd,KAAV,EAAiB;AACvB,qBAAO0G,MAAM,CAACjD,WAAP,CAAmBzD,KAAnB,CAAP;AACD,aAJM,CAAP;AAKD;AAVA,SALyC,EAgBzC;AACDhlC,UAAAA,GAAG,EAAE,aADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASopC,WAAT,GAAuB;AAC5B,gBAAIC,MAAM,GAAG,IAAb;;AAEA,mBAAO9H,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsB,OAAtB,EAA+B;AACpC0lB,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,WAAW,KAAKkjB;AADxB;AAD2B,aAA/B,EAIJphB,IAJI,CAIC,UAAUmf,GAAV,EAAe;AACrB+E,cAAAA,MAAM,CAACz/B,QAAP,CAAgB;AAAE44B,gBAAAA,IAAI,EAAE8B,GAAG,CAAClpB;AAAZ,eAAhB;AACD,aANM,WAME,UAAUuE,GAAV,EAAe;AACtB0pB,cAAAA,MAAM,CAACzC,MAAP;AACD,aARM,CAAP;AASD;AAdA,SAhByC,EA+BzC;AACDnpC,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASspC,YAAT,GAAwB;AAC7B,gBAAIC,MAAM,GAAG,IAAb;;AAEA,gBAAIC,QAAQ,GAAG,KAAKj6B,OAApB;AAAA,gBACIk6B,KAAK,GAAGD,QAAQ,CAACC,KADrB;AAAA,gBAEIC,IAAI,GAAGF,QAAQ,CAACE,IAFpB;AAAA,gBAGI5c,MAAM,GAAG0c,QAAQ,CAAC1c,MAHtB;AAAA,gBAIIiX,QAAQ,GAAGyF,QAAQ,CAACzF,QAJxB;AAAA,gBAKIC,YAAY,GAAGwF,QAAQ,CAACxF,YAL5B;AAOA,gBAAI2F,MAAM,GAAG,YAAYF,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,UAAjC,GAA8C5c,MAA3D;AAEA,mBAAO,IAAI0T,SAAS,WAAb,CAAsB,UAAU7pB,OAAV,EAAmBC,MAAnB,EAA2B;AACtD2qB,cAAAA,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsBgwC,MAAtB,EAA8B;AAC5BzmB,gBAAAA,IAAI,EAAE;AACJC,kBAAAA,QAAQ,EAAE4gB,QADN;AAEJ3gB,kBAAAA,QAAQ,EAAE4gB;AAFN,iBADsB;AAK5BxjB,gBAAAA,MAAM,EAAE;AACN8H,kBAAAA,CAAC,EAAEjZ,IAAI,CAACgM,GAAL;AADG;AALoB,eAA9B,EAQG8J,IARH,CAQQ,UAAUmf,GAAV,EAAe;AACrB,oBAAI7B,KAAK,GAAG,IAAZ;;AAEA,oBAAI6B,GAAG,IAAIA,GAAG,CAAClpB,IAAX,IAAmBkpB,GAAG,CAAClpB,IAAJ,CAAS0R,MAAT,KAAoBA,MAA3C,EAAmD;AACjD2V,kBAAAA,KAAK,GAAG6B,GAAG,CAAClpB,IAAZ;;AAEAmuB,kBAAAA,MAAM,CAAC3/B,QAAP,CAAgB;AAAE64B,oBAAAA,KAAK,EAAEA,KAAT;AAAgBQ,oBAAAA,QAAQ,EAAE;AAA1B,mBAAhB;AACD;;AACDtsB,gBAAAA,OAAO,CAAC8rB,KAAD,CAAP;AACD,eAjBD,WAiBS,UAAU9iB,GAAV,EAAe;AACtB;AACA,oBAAIA,GAAG,CAACE,QAAJ,CAAaoC,MAAb,KAAwB,GAA5B,EAAiCtL,OAAO,CAAC,IAAD,CAAP;AACjCC,gBAAAA,MAAM,CAAC+I,GAAD,CAAN;AACD,eArBD;AAsBD,aAvBM,CAAP;AAwBD;AAtCA,SA/ByC,EAsEzC;AACDliB,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS4pC,gBAAT,GAA4B;AACjC,gBAAIC,MAAM,GAAG,IAAb;;AAEA,gBAAIC,SAAS,GAAG,KAAKv6B,OAArB;AAAA,gBACIk6B,KAAK,GAAGK,SAAS,CAACL,KADtB;AAAA,gBAEIC,IAAI,GAAGI,SAAS,CAACJ,IAFrB;AAAA,gBAGI32B,EAAE,GAAG+2B,SAAS,CAAC/2B,EAHnB;AAAA,gBAIIy0B,MAAM,GAAGsC,SAAS,CAACtC,MAJvB;AAAA,gBAKIzD,QAAQ,GAAG+F,SAAS,CAAC/F,QALzB;AAAA,gBAMIC,YAAY,GAAG8F,SAAS,CAAC9F,YAN7B;AASA,mBAAOzC,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsB,YAAY8vC,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,SAAvD,EAAkE;AACvExmB,cAAAA,IAAI,EAAE;AACJC,gBAAAA,QAAQ,EAAE4gB,QADN;AAEJ3gB,gBAAAA,QAAQ,EAAE4gB;AAFN,eADiE;AAKvExjB,cAAAA,MAAM,EAAE;AACNgnB,gBAAAA,MAAM,EAAEA,MAAM,CAAC9hC,MAAP,CAAcqN,EAAd,EAAkBqM,IAAlB,CAAuB,GAAvB,CADF;AAENkJ,gBAAAA,CAAC,EAAEjZ,IAAI,CAACgM,GAAL;AAFG;AAL+D,aAAlE,EASJ8J,IATI,CASC,UAAUmf,GAAV,EAAe;AACrB,kBAAIqD,mBAAmB,GAAGkC,MAAM,CAACt6B,OAAP,CAAeo4B,mBAAzC;AAEA,kBAAI1E,QAAQ,GAAG,KAAf;AACA,kBAAIR,KAAK,GAAG,IAAZ;;AACA,kBAAI,EAAE6B,GAAG,IAAIA,GAAG,CAAClpB,IAAX,IAAmBkpB,GAAG,CAAClpB,IAAJ,CAAS5d,MAA9B,CAAJ,EAA2C;AACzC,oBAAI,CAACmqC,mBAAD,IAAwBkC,MAAM,CAACE,OAAnC,EAA4C;AAC1C,yBAAOF,MAAM,CAAC5D,WAAP,EAAP;AACD;;AAEDhD,gBAAAA,QAAQ,GAAG,IAAX;AACD,eAND,MAMO;AACLR,gBAAAA,KAAK,GAAG6B,GAAG,CAAClpB,IAAJ,CAAS,CAAT,CAAR;AACD;;AACDyuB,cAAAA,MAAM,CAACjgC,QAAP,CAAgB;AAAE64B,gBAAAA,KAAK,EAAEA,KAAT;AAAgBQ,gBAAAA,QAAQ,EAAEA;AAA1B,eAAhB;;AACA,qBAAOR,KAAP;AACD,aAzBM,CAAP;AA0BD;AAxCA,SAtEyC,EA+GzC;AACDhlC,UAAAA,GAAG,EAAE,UADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASkkC,QAAT,GAAoB;AACzB,gBAAI8F,MAAM,GAAG,IAAb;;AAEA,gBAAIld,MAAM,GAAG,KAAKvd,OAAL,CAAaud,MAA1B;AACA,gBAAI2V,KAAK,GAAG,KAAKj5B,KAAL,CAAWi5B,KAAvB;;AAEA,gBAAIA,KAAJ,EAAW;AACT,mBAAK74B,QAAL,CAAc;AAAEq5B,gBAAAA,QAAQ,EAAE;AAAZ,eAAd;AACA,qBAAOzC,SAAS,WAAT,CAAkB7pB,OAAlB,CAA0B8rB,KAA1B,CAAP;AACD;;AAED,gBAAI,OAAO3V,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,GAAG,CAA3C,EAA8C;AAC5C,qBAAO,KAAKwc,YAAL,GAAoBnkB,IAApB,CAAyB,UAAU8kB,QAAV,EAAoB;AAClD,oBAAI,CAACA,QAAL,EAAe,OAAOD,MAAM,CAACJ,gBAAP,EAAP;AACf,uBAAOK,QAAP;AACD,eAHM,CAAP;AAID;;AACD,mBAAO,KAAKL,gBAAL,EAAP;AACD;AApBA,SA/GyC,EAoIzC;AACDnsC,UAAAA,GAAG,EAAE,aADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASimC,WAAT,GAAuB;AAC5B,gBAAIiE,MAAM,GAAG,IAAb;;AAEA,gBAAIC,SAAS,GAAG,KAAK56B,OAArB;AAAA,gBACIk6B,KAAK,GAAGU,SAAS,CAACV,KADtB;AAAA,gBAEIC,IAAI,GAAGS,SAAS,CAACT,IAFrB;AAAA,gBAGIv9B,KAAK,GAAGg+B,SAAS,CAACh+B,KAHtB;AAAA,gBAII24B,IAAI,GAAGqF,SAAS,CAACrF,IAJrB;AAAA,gBAKI/xB,EAAE,GAAGo3B,SAAS,CAACp3B,EALnB;AAAA,gBAMIy0B,MAAM,GAAG2C,SAAS,CAAC3C,MANvB;AAAA,gBAOIjnB,GAAG,GAAG4pB,SAAS,CAAC5pB,GAPpB;AASA,mBAAOghB,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,YAAYmD,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,SAAxD,EAAmE;AACxEv9B,cAAAA,KAAK,EAAEA,KADiE;AAExEq7B,cAAAA,MAAM,EAAEA,MAAM,CAAC9hC,MAAP,CAAcqN,EAAd,CAFgE;AAGxE+xB,cAAAA,IAAI,EAAEA,IAAI,IAAIvkB,GAAG,GAAG,QAAN,IAAkB,CAAC,GAAGghB,KAAK,CAACxjB,cAAV,EAA0B,aAA1B,KAA4C,CAAC,GAAGwjB,KAAK,CAACxjB,cAAV,EAA0B,aAA1B,EAAyC,gBAAzC,CAA5C,IAA0G,EAA5H;AAH0D,aAAnE,EAIJ;AACDsB,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,WAAW,KAAKkjB;AADxB;AADR,aAJI,EAQJphB,IARI,CAQC,UAAUmf,GAAV,EAAe;AACrB4F,cAAAA,MAAM,CAACtgC,QAAP,CAAgB;AAAE64B,gBAAAA,KAAK,EAAE6B,GAAG,CAAClpB;AAAb,eAAhB;;AACA,qBAAOkpB,GAAG,CAAClpB,IAAX;AACD,aAXM,CAAP;AAYD,WA1BA,CA2BD;;AA3BC,SApIyC,EAiKzC;AACD3d,UAAAA,GAAG,EAAE,aADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASkmC,WAAT,CAAqBzD,KAArB,EAA4B;AACjC,gBAAI,CAACA,KAAL,EAAY,OADqB,CAEjC;;AACA,gBAAI,KAAK8D,WAAT,EAAsB,OAAOnE,aAAa,WAAb,CAAsBppC,IAAtB,CAA2B,IAA3B,EAAiCypC,KAAjC,CAAP;AACtB,mBAAO,KAAKoB,aAAL,CAAmBpB,KAAnB,CAAP;AACD;AAPA,SAjKyC,EAyKzC;AACDhlC,UAAAA,GAAG,EAAE,eADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASomC,aAAT,GAAyB;AAC9B,gBAAIgE,MAAM,GAAG,IAAb;;AAEA,gBAAItO,MAAM,GAAG,KAAKtyB,KAAlB;AAAA,gBACIo5B,OAAO,GAAG9G,MAAM,CAAC8G,OADrB;AAAA,gBAEID,aAAa,GAAG7G,MAAM,CAAC6G,aAF3B;AAAA,gBAGID,QAAQ,GAAG5G,MAAM,CAAC4G,QAHtB;AAMA,mBAAO,KAAKwB,QAAL,GAAgB/e,IAAhB,CAAqB,UAAUsd,KAAV,EAAiB;AAC3C,qBAAOlB,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB7D,KAAK,CAAC0B,YAA7B,EAA2C;AAChDW,gBAAAA,IAAI,EAAElC;AAD0C,eAA3C,EAEJ;AACDvjB,gBAAAA,OAAO,EAAE;AACP+kB,kBAAAA,MAAM,EAAE,qCADD;AAEP/gB,kBAAAA,aAAa,EAAE,WAAW+mB,MAAM,CAAC7D;AAF1B;AADR,eAFI,CAAP;AAQD,aATM,EASJphB,IATI,CASC,UAAUmf,GAAV,EAAe;AACrB8F,cAAAA,MAAM,CAACxgC,QAAP,CAAgB;AACdg5B,gBAAAA,OAAO,EAAE,EADK;AAEdF,gBAAAA,QAAQ,EAAEA,QAAQ,CAACh9B,MAAT,CAAgB4+B,GAAG,CAAClpB,IAApB,CAFI;AAGdunB,gBAAAA,aAAa,EAAEA,aAAa,CAACj9B,MAAd,CAAqB4+B,GAAG,CAAClpB,IAAzB;AAHD,eAAhB;AAKD,aAfM,CAAP;AAgBD;AA3BA,SAzKyC,EAqMzC;AACD3d,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS4mC,MAAT,GAAkB;AACvB,iBAAKh9B,QAAL,CAAc;AAAE44B,cAAAA,IAAI,EAAE;AAAR,aAAd;AACA9nC,YAAAA,MAAM,CAACirC,YAAP,CAAoB4C,UAApB,CAA+BrG,MAAM,CAACmI,eAAtC;AACD;AALA,SArMyC,EA2MzC;AACD5sC,UAAAA,GAAG,EAAE,MADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASsqC,IAAT,CAAc1H,OAAd,EAAuB;AAC5B,gBAAI2H,MAAM,GAAG,IAAb;;AAEA,gBAAIC,SAAS,GAAG,KAAKj7B,OAArB;AAAA,gBACIk6B,KAAK,GAAGe,SAAS,CAACf,KADtB;AAAA,gBAEIC,IAAI,GAAGc,SAAS,CAACd,IAFrB;AAGA,gBAAIlH,IAAI,GAAG,KAAKh5B,KAAL,CAAWg5B,IAAtB;AACA,gBAAIE,QAAQ,GAAG,KAAKl5B,KAAL,CAAWk5B,QAA1B;;AAGAnB,YAAAA,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,YAAYmD,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,mBAAjC,GAAuD9G,OAAO,CAAC7vB,EAA/D,GAAoE,YAA3F,EAAyG;AACvGwM,cAAAA,OAAO,EAAE;AAD8F,aAAzG,EAEG;AACDF,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,WAAW,KAAKkjB,WADxB;AAEPnC,gBAAAA,MAAM,EAAE;AAFD;AADR,aAFH,EAOGjf,IAPH,CAOQ,UAAUmf,GAAV,EAAe;AACrB5B,cAAAA,QAAQ,GAAGA,QAAQ,CAACt9B,GAAT,CAAa,UAAUlM,CAAV,EAAa;AACnC,oBAAIA,CAAC,CAAC6Z,EAAF,KAAS6vB,OAAO,CAAC7vB,EAArB,EAAyB;AACvB,sBAAI7Z,CAAC,CAACuxC,SAAN,EAAiB;AACf,wBAAI,CAAC,CAACvxC,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBC,SAAlB,CAA4B,UAAU/wC,CAAV,EAAa;AAC7C,6BAAOA,CAAC,CAAC4oC,IAAF,CAAOwC,KAAP,KAAiBxC,IAAI,CAACwC,KAA7B;AACD,qBAFK,CAAN,EAEI;AACF9rC,sBAAAA,CAAC,CAACuxC,SAAF,CAAYG,UAAZ,IAA0B,CAA1B;AACD;AACF,mBAND,MAMO;AACL1xC,oBAAAA,CAAC,CAACuxC,SAAF,GAAc;AAAEC,sBAAAA,KAAK,EAAE;AAAT,qBAAd;AACAxxC,oBAAAA,CAAC,CAACuxC,SAAF,CAAYG,UAAZ,GAAyB,CAAzB;AACD;;AAED1xC,kBAAAA,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBzjC,IAAlB,CAAuBq9B,GAAG,CAAClpB,IAA3B;AACAliB,kBAAAA,CAAC,CAACuxC,SAAF,CAAYI,gBAAZ,GAA+B,IAA/B;AACD;;AACD,uBAAO3xC,CAAP;AACD,eAjBU,CAAX;;AAmBAqxC,cAAAA,MAAM,CAAC3gC,QAAP,CAAgB;AACd84B,gBAAAA,QAAQ,EAAEA;AADI,eAAhB;AAGD,aA9BD;AA+BD;AA3CA,SA3MyC,EAuPzC;AACDjlC,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS8qC,MAAT,CAAgBlI,OAAhB,EAAyB;AAC9B,gBAAImI,OAAO,GAAG,IAAd;;AAEA,gBAAIvI,IAAI,GAAG,KAAKh5B,KAAL,CAAWg5B,IAAtB;AACA,gBAAIE,QAAQ,GAAG,KAAKl5B,KAAL,CAAWk5B,QAA1B,CAJ8B,CAM9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAIsI,KAAK,GAAG,SAASA,KAAT,CAAej4B,EAAf,EAAmB;AAC7B,qBAAO;AACLk4B,gBAAAA,aAAa,EAAE,gBADV;AAELnsB,gBAAAA,KAAK,EAAE,0GAA0G/L,EAA1G,GAA+G;AAFjH,eAAP;AAID,aALD;;AAOAwuB,YAAAA,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,UAAvB,EAAmC0E,KAAK,CAACpI,OAAO,CAACsI,GAAT,CAAxC,EAAuD;AACrD7rB,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,YAAY,KAAKkjB;AADzB;AAD4C,aAAvD,EAIGphB,IAJH,CAIQ,UAAUmf,GAAV,EAAe;AACrB,kBAAIA,GAAG,CAAClpB,IAAR,EAAc;AACZsnB,gBAAAA,QAAQ,GAAGA,QAAQ,CAACt9B,GAAT,CAAa,UAAUlM,CAAV,EAAa;AACnC,sBAAIA,CAAC,CAAC6Z,EAAF,KAAS6vB,OAAO,CAAC7vB,EAArB,EAAyB;AACvB,wBAAI/I,KAAK,GAAG9Q,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBC,SAAlB,CAA4B,UAAU/wC,CAAV,EAAa;AACnD,6BAAOA,CAAC,CAAC4oC,IAAF,CAAOwC,KAAP,KAAiBxC,IAAI,CAACwC,KAA7B;AACD,qBAFW,CAAZ;;AAGA,wBAAI,CAACh7B,KAAL,EAAY;AACV9Q,sBAAAA,CAAC,CAACuxC,SAAF,CAAYG,UAAZ,IAA0B,CAA1B;AACA1xC,sBAAAA,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBzT,MAAlB,CAAyBjtB,KAAzB,EAAgC,CAAhC;AACD;;AACD9Q,oBAAAA,CAAC,CAACuxC,SAAF,CAAYI,gBAAZ,GAA+B,KAA/B;AACD;;AACD,yBAAO3xC,CAAP;AACD,iBAZU,CAAX;;AAcA6xC,gBAAAA,OAAO,CAACnhC,QAAR,CAAiB;AACf84B,kBAAAA,QAAQ,EAAEA;AADK,iBAAjB;AAGD;AACF,aAxBD;AAyBD;AAtDA,SAvPyC,EA8SzC;AACDjlC,UAAAA,GAAG,EAAE,SADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASmrC,OAAT,GAAmB;AACxB,mBAAOvkB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFK,EAGL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,GAA9B,EAAmC;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAAnC,CAHK,EAIL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE,KAAKqhC,IAAL,CAAU5gB,CAAV,CAAY,MAAZ,CAHF,CAJK,CAAP;AAUD;AAbA,SA9SyC,EA4TzC;AACD7qB,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASorC,MAAT,GAAkB;AACvB,gBAAIC,OAAO,GAAG,KAAK7hC,KAAnB;AAAA,gBACIg5B,IAAI,GAAG6I,OAAO,CAAC7I,IADnB;AAAA,gBAEIe,eAAe,GAAG8H,OAAO,CAAC9H,eAF9B;AAGA,gBAAI+H,SAAS,GAAG,KAAK/7B,OAArB;AAAA,gBACIk6B,KAAK,GAAG6B,SAAS,CAAC7B,KADtB;AAAA,gBAEIC,IAAI,GAAG4B,SAAS,CAAC5B,IAFrB;AAAA,gBAGI6B,KAAK,GAAGD,SAAS,CAACC,KAHtB;AAKA,mBAAO3kB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,YAAb;AAA2BpK,cAAAA,GAAG,EAAE;AAAhC,aAFK,EAGLmpB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,GAA9B,EAAmC;AAAE0mB,cAAAA,uBAAuB,EAAE;AAC1DC,gBAAAA,MAAM,EAAE,KAAKgiB,IAAL,CAAU5gB,CAAV,CAAY,kBAAZ,EAAgC;AACtCkjB,kBAAAA,IAAI,EAAE,iCAAiC/B,KAAjC,GAAyC,GAAzC,GAA+CC,IAA/C,GAAsD;AADtB,iBAAhC;AADkD;AAA3B,aAAnC,CAHK,EAQL9iB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE,IAFF,EAGE,KAAK2oC,IAAL,CAAU5gB,CAAV,CAAY,gBAAZ,EAA8B;AAAEka,cAAAA,IAAI,EAAE,GAAG98B,MAAH,CAAU6lC,KAAV,EAAiBnmC,GAAjB,CAAqB,UAAUqjB,CAAV,EAAa;AACpE,uBAAO,MAAMA,CAAb;AACD,eAFmC,EAEjCrJ,IAFiC,CAE5B,GAF4B;AAAR,aAA9B,CAHF,CARK,EAeL,KAAK2qB,OAAL,GAAenjB,OAAO,WAAP,CAAgBrmB,aAAhB,CACb,GADa,EAEb,IAFa,EAGbqmB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE8J,cAAAA,OAAO,EAAE,KAAKzF,iBAAhB;AAAmC5C,cAAAA,SAAS,EAAEG,eAA9C;AAA+Dvc,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,YAAZ;AAArE,aAAhD,CAHa,CAAf,GAII,IAnBC,EAoBL,CAACka,IAAD,IAAS5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE95B,cAAAA,SAAS,EAAE,cAAb;AAA6B4jC,cAAAA,OAAO,EAAE,KAAK/F,WAA3C;AAAwD1e,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,mBAAZ;AAA9D,aAAhD,CApBJ,CAAP;AAsBD;AAjCA,SA5TyC,EA8VzC;AACD7qB,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0rC,kBAAT,CAA4BpuC,GAA5B,EAAiC;AACtCA,YAAAA,GAAG,CAACgC,MAAJ,CAAW+V,GAAX,GAAiB,kEAAjB;AACD;AAJA,SA9VyC,EAmWzC;AACD5X,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS2rC,MAAT,GAAkB;AACvB,gBAAIC,OAAO,GAAG,IAAd;;AAEA,gBAAIC,OAAO,GAAG,KAAKriC,KAAnB;AAAA,gBACIg5B,IAAI,GAAGqJ,OAAO,CAACrJ,IADnB;AAAA,gBAEII,OAAO,GAAGiJ,OAAO,CAACjJ,OAFtB;AAAA,gBAGIO,UAAU,GAAG0I,OAAO,CAAC1I,UAHzB;AAAA,gBAIIH,WAAW,GAAG6I,OAAO,CAAC7I,WAJ1B;AAAA,gBAKIU,SAAS,GAAGmI,OAAO,CAACnI,SALxB;AAOA,mBAAO9c,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,WAAb;AAA0BpK,cAAAA,GAAG,EAAE;AAA/B,aAFK,EAGL+kC,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BkhC,QAAQ,WAAtC,EAAgD;AAAE55B,cAAAA,SAAS,EAAE,kBAAb;AAAiCwN,cAAAA,GAAG,EAAEmtB,IAAI,CAACsJ,UAA3C;AAAuDhlB,cAAAA,GAAG,EAAE0b,IAAI,CAACwC,KAAjE;AAAwEje,cAAAA,OAAO,EAAE,KAAK2kB,kBAAL,CAAwBtwC,IAAxB,CAA6B,IAA7B;AAAjF,aAAhD,CAAH,GAA4KwrB,OAAO,WAAP,CAAgBrmB,aAAhB,CAC9K,GAD8K,EAE9K;AAAEsH,cAAAA,SAAS,EAAE,kBAAb;AAAiCkkC,cAAAA,WAAW,EAAE,KAAKrG;AAAnD,aAF8K,EAG9K9e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,eAAb;AAA8BzO,cAAAA,IAAI,EAAE;AAApC,aAA7C,CAH8K,CAH3K,EAQLwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,UAA9B,EAA0C;AACxCmG,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAa4hB,CAAb,EAAgB;AACnBsjB,gBAAAA,OAAO,CAAC1G,SAAR,GAAoB5c,CAApB;AACD,eAHuC;AAIxCzgB,cAAAA,SAAS,EAAE,yBAAyB67B,SAAS,GAAG,MAAH,GAAY,EAA9C,CAJ6B;AAKxC1jC,cAAAA,KAAK,EAAE4iC,OALiC;AAMxCoJ,cAAAA,QAAQ,EAAE,KAAKtF,mBANyB;AAOxCuF,cAAAA,OAAO,EAAE,KAAKnF,kBAP0B;AAQxCoF,cAAAA,MAAM,EAAE,KAAKlF,iBAR2B;AASxCmF,cAAAA,SAAS,EAAE,KAAKhF,oBATwB;AAUxCiF,cAAAA,WAAW,EAAE,KAAKlD,IAAL,CAAU5gB,CAAV,CAAY,iBAAZ;AAV2B,aAA1C,CAHF,EAeE1B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AACnCsH,cAAAA,SAAS,EAAE,sCAAsC67B,SAAS,GAAG,EAAH,GAAQ,MAAvD,CADwB;AAEnCzc,cAAAA,uBAAuB,EAAE;AAAEC,gBAAAA,MAAM,EAAE8b;AAAV;AAFU,aAArC,CAfF,EAmBEpc,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE,wBAAb;AAAuCi+B,cAAAA,IAAI,EAAE,wDAA7C;AAAuGxmC,cAAAA,MAAM,EAAE;AAA/G,aAFF,EAGEsnB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,YAAb;AAA2BzO,cAAAA,IAAI,EAAE,KAAjC;AAAwC4tB,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,kBAAZ;AAA9C,aAA7C,CAHF,CAHF,EAQEka,IAAI,IAAI5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AACtD8C,cAAAA,MAAM,EAAE,KAAKA,MADyC;AAEtD58B,cAAAA,SAAS,EAAE,eAF2C;AAGtDkkC,cAAAA,WAAW,EAAE,KAAK5F,mBAHoC;AAItDnf,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,SAAZ,CAJgD;AAKtD8a,cAAAA,SAAS,EAAED;AAL2C,aAAhD,CARV,EAeEvc,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAC9C95B,cAAAA,SAAS,EAAE,gBADmC;AAE9CkkC,cAAAA,WAAW,EAAE,KAAK1F,oBAF4B;AAG9Crf,cAAAA,IAAI,EAAE0c,SAAS,GAAG,KAAKwF,IAAL,CAAU5gB,CAAV,CAAY,MAAZ,CAAH,GAAyB,KAAK4gB,IAAL,CAAU5gB,CAAV,CAAY,SAAZ,CAHM,CAI9C;;AAJ8C,aAAhD,CAfF,EAqBE,CAACka,IAAD,IAAS5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE95B,cAAAA,SAAS,EAAE,cAAb;AAA6BkkC,cAAAA,WAAW,EAAE,KAAKrG,WAA/C;AAA4D1e,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,mBAAZ;AAAlE,aAAhD,CArBX,CAnBF,CARK,CAAP;AAoDD;AAhEA,SAnWyC,EAoazC;AACD7qB,UAAAA,GAAG,EAAE,UADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0iC,QAAT,GAAoB;AACzB,gBAAI2J,OAAO,GAAG,IAAd;;AAEA,gBAAIC,OAAO,GAAG,KAAK9iC,KAAnB;AAAA,gBACIg5B,IAAI,GAAG8J,OAAO,CAAC9J,IADnB;AAAA,gBAEIE,QAAQ,GAAG4J,OAAO,CAAC5J,QAFvB;AAAA,gBAGIY,UAAU,GAAGgJ,OAAO,CAAChJ,UAHzB;AAAA,gBAIID,UAAU,GAAGiJ,OAAO,CAACjJ,UAJzB;AAAA,gBAKIP,cAAc,GAAGwJ,OAAO,CAACxJ,cAL7B;AAMA,gBAAIyJ,SAAS,GAAG,KAAKh9B,OAArB;AAAA,gBACIk4B,QAAQ,GAAG8E,SAAS,CAAC9E,QADzB;AAAA,gBAEII,eAAe,GAAG0E,SAAS,CAAC1E,eAFhC;AAAA,gBAGI0D,KAAK,GAAGgB,SAAS,CAAChB,KAHtB;AAKA,gBAAIiB,aAAa,GAAG9J,QAAQ,CAACh9B,MAAT,CAAgB,EAAhB,CAApB;;AACA,gBAAIo9B,cAAc,KAAK,MAAnB,IAA6B,KAAKyD,WAAtC,EAAmD;AACjDiG,cAAAA,aAAa,CAACC,OAAd;AACD;;AACD,mBAAO7lB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,aAAb;AAA4BpK,cAAAA,GAAG,EAAE;AAAjC,aAFK,EAGLmpB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE2gC,eAAe,WADjB,EAEE2G,eAFF,EAGE2E,aAAa,CAACpnC,GAAd,CAAkB,UAAUlM,CAAV,EAAa;AAC7B,qBAAO0tB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BwhC,SAAS,WAAvC,EAAiD;AACtDa,gBAAAA,OAAO,EAAE1pC,CAD6C;AAEtDuE,gBAAAA,GAAG,EAAEvE,CAAC,CAAC6Z,EAF+C;AAGtDyvB,gBAAAA,IAAI,EAAEA,IAHgD;AAItDiF,gBAAAA,QAAQ,EAAEA,QAJ4C;AAKtDiF,gBAAAA,aAAa,EAAEL,OAAO,CAACnD,IAAR,CAAa5gB,CAAb,CAAe,WAAf,CALuC;AAMtDijB,gBAAAA,KAAK,EAAEA,KAN+C;AAOtDoB,gBAAAA,aAAa,EAAEN,OAAO,CAAC1H,KAAR,CAAczrC,CAAd,CAPuC;AAQtD0zC,gBAAAA,YAAY,EAAE1zC,CAAC,CAACuxC,SAAF,IAAevxC,CAAC,CAACuxC,SAAF,CAAYI,gBAA3B,GAA8CwB,OAAO,CAACvB,MAAR,CAAe1vC,IAAf,CAAoBixC,OAApB,EAA6BnzC,CAA7B,CAA9C,GAAgFmzC,OAAO,CAAC/B,IAAR,CAAalvC,IAAb,CAAkBixC,OAAlB,EAA2BnzC,CAA3B;AARxC,eAAjD,CAAP;AAUD,aAXD,CAHF,CAHK,EAmBL,CAACszC,aAAa,CAAChvC,MAAf,IAAyBopB,OAAO,WAAP,CAAgBrmB,aAAhB,CACvB,GADuB,EAEvB;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFuB,EAGvB,KAAKqhC,IAAL,CAAU5gB,CAAV,CAAY,sBAAZ,CAHuB,CAnBpB,EAwBL,CAACgb,UAAD,IAAekJ,aAAa,CAAChvC,MAA7B,GAAsCopB,OAAO,WAAP,CAAgBrmB,aAAhB,CACpC,KADoC,EAEpC;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFoC,EAGpC+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE95B,cAAAA,SAAS,EAAE,iBAAb;AAAgC4jC,cAAAA,OAAO,EAAE,KAAKjF,iBAA9C;AAAiEpD,cAAAA,SAAS,EAAEC,UAA5E;AAAwFrc,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,WAAZ;AAA9F,aAAhD,CAHoC,CAAtC,GAII,IA5BC,CAAP;AA8BD;AAlDA,SApayC,EAudzC;AACD7qB,UAAAA,GAAG,EAAE,MADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS6sC,IAAT,GAAgB;AACrB,gBAAIC,OAAO,GAAG,KAAKtjC,KAAnB;AAAA,gBACIg5B,IAAI,GAAGsK,OAAO,CAACtK,IADnB;AAAA,gBAEIC,KAAK,GAAGqK,OAAO,CAACrK,KAFpB;AAAA,gBAGIe,cAAc,GAAGsJ,OAAO,CAACtJ,cAH7B;AAAA,gBAIIV,cAAc,GAAGgK,OAAO,CAAChK,cAJ7B;AAAA,gBAKIH,aAAa,GAAGmK,OAAO,CAACnK,aAL5B;AAOA,gBAAIoK,GAAG,GAAG,CAACtK,KAAK,IAAIA,KAAK,CAACC,QAAhB,IAA4BC,aAAa,CAACnlC,MAApD;AACA,gBAAIwvC,MAAM,GAAGlK,cAAc,KAAK,MAAhC;AACA,gBAAIsF,mBAAmB,GAAG,KAAK74B,OAAL,CAAa64B,mBAAvC,CAVqB,CAYrB;;AAEA,gBAAIA,mBAAmB,IAAI,GAAG/sC,QAAH,CAAYrC,IAAZ,CAAiBovC,mBAAjB,MAA0C,mBAArE,EAA0F;AACxF,kBAAI;AACFA,gBAAAA,mBAAmB,CAAC2E,GAAD,CAAnB;AACD,eAFD,CAEE,OAAOptB,GAAP,EAAY;AACZ+L,gBAAAA,OAAO,CAACud,GAAR,CAAY,sDAAZ,EAAoEtpB,GAApE;AACD;AACF;;AAED,mBAAOiH,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,SAAb;AAAwBpK,cAAAA,GAAG,EAAE;AAA7B,aAFK,EAGLmpB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,MAA9B,EAAsC;AAAEsH,cAAAA,SAAS,EAAE,WAAb;AAA0Bof,cAAAA,uBAAuB,EAAE;AACrFC,gBAAAA,MAAM,EAAE,KAAKgiB,IAAL,CAAU5gB,CAAV,CAAY,QAAZ,EAAsB;AAC5B2kB,kBAAAA,MAAM,EAAE,8CAA8CxK,KAAK,IAAIA,KAAK,CAACyK,QAA7D,IAAyE,oBAAzE,GAAgGH,GAAhG,GAAsG,MADlF;AAE5BI,kBAAAA,WAAW,EAAEJ;AAFe,iBAAtB;AAD6E;AAAnD,aAAtC,CAHK,EASLvJ,cAAc,IAAI5c,OAAO,WAAP,CAAgBrmB,aAAhB,CAChB,KADgB,EAEhB;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFgB,EAGhB26B,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BshC,QAAQ,WAAtC,EAAgD;AAAEh6B,cAAAA,SAAS,EAAE,uBAAuB,CAACmlC,MAAD,GAAU,aAAV,GAA0B,EAAjD,CAAb;AAAmEvB,cAAAA,OAAO,EAAE,KAAKxE,UAAL,CAAgB,OAAhB,CAA5E;AAAsGjgB,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,UAAZ;AAA5G,aAAhD,CAAH,GAA4L,IAHhL,EAIhBka,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BshC,QAAQ,WAAtC,EAAgD;AAAEh6B,cAAAA,SAAS,EAAE,wBAAwBmlC,MAAM,GAAG,aAAH,GAAmB,EAAjD,CAAb;AAAmEvB,cAAAA,OAAO,EAAE,KAAKxE,UAAL,CAAgB,MAAhB,CAA5E;AAAqGjgB,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,WAAZ;AAA3G,aAAhD,CAAH,GAA4L,IAJhL,EAKhBka,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BshC,QAAQ,WAAtC,EAAgD;AAAEh6B,cAAAA,SAAS,EAAE,kBAAb;AAAiC4jC,cAAAA,OAAO,EAAE,KAAK9E,YAA/C;AAA6D3f,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,QAAZ;AAAnE,aAAhD,CAAH,GAAiJ1B,OAAO,WAAP,CAAgBrmB,aAAhB,CACnJ,GADmJ,EAEnJ;AAAEsH,cAAAA,SAAS,EAAE,2BAAb;AAA0CkkC,cAAAA,WAAW,EAAE,KAAKrG;AAA5D,aAFmJ,EAGnJ,KAAKwD,IAAL,CAAU5gB,CAAV,CAAY,mBAAZ,CAHmJ,CALrI,EAUhB1B,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE,yBAAb;AAAwCi+B,cAAAA,IAAI,EAAE,kCAA9C;AAAkFxmC,cAAAA,MAAM,EAAE;AAA1F,aAFF,EAGE,QAHF,CAHF,EAQEsnB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGEq6B,MAAM,CAACkL,UAHT,CARF,CAVgB,CATb,EAkCLxmB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE26B,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE27B,cAAc,GAAG,0BAAH,GAAgC,eAA3D;AAA4EiI,cAAAA,OAAO,EAAE,KAAKrG;AAA1F,aAFK,EAGLxe,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE26B,IAAI,CAACwC,KAHP,CAHK,EAQLpe,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,gBAAb;AAA+BzO,cAAAA,IAAI,EAAE;AAArC,aAA7C,CARK,CAAH,GASAwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACF,KADE,EAEF;AAAEsH,cAAAA,SAAS,EAAE27B,cAAc,GAAG,0BAAH,GAAgC,eAA3D;AAA4EiI,cAAAA,OAAO,EAAE,KAAKrG;AAA1F,aAFE,EAGFxe,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE,KAAKqhC,IAAL,CAAU5gB,CAAV,CAAY,WAAZ,CAHF,CAHE,EAQF1B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,gBAAb;AAA+BzO,cAAAA,IAAI,EAAE;AAArC,aAA7C,CARE,CAZN,CAlCK,CAAP;AA0DD;AAlFA,SAvdyC,EA0iBzC;AACDqE,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,gBAAI6rC,OAAO,GAAG,KAAK7jC,KAAnB;AAAA,gBACI05B,SAAS,GAAGmK,OAAO,CAACnK,SADxB;AAAA,gBAEID,QAAQ,GAAGoK,OAAO,CAACpK,QAFvB;AAAA,gBAGIU,YAAY,GAAG0J,OAAO,CAAC1J,YAH3B;AAAA,gBAIIC,QAAQ,GAAGyJ,OAAO,CAACzJ,QAJvB;AAAA,gBAKIH,cAAc,GAAG4J,OAAO,CAAC5J,cAL7B;AAOA,mBAAO7c,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,kBAAkB47B,cAAc,GAAG,mBAAH,GAAyB,EAAzD;AAAb,aAFK,EAGLP,SAAS,IAAI,KAAKiI,OAAL,EAHR,EAIL,CAACjI,SAAD,KAAeD,QAAQ,GAAG,EAAH,GAAQ,CAAC,KAAK4J,IAAL,EAAD,CAA/B,CAJK,EAKLlJ,YAAY,IAAI/c,OAAO,WAAP,CAAgBrmB,aAAhB,CACd,KADc,EAEd;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFc,EAGd+7B,QAHc,CALX,EAUL,CAACV,SAAD,KAAeD,QAAQ,GAAG,CAAC,KAAKmI,MAAL,EAAD,CAAH,GAAqB,CAAC,KAAKO,MAAL,EAAD,EAAgB,KAAKjJ,QAAL,EAAhB,CAA5C,CAVK,CAAP;AAYD;AAtBA,SA1iByC,EAikBzC;AACDjlC,UAAAA,GAAG,EAAE,aADJ;AAED9D,UAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,mBAAO,KAAK2zC,WAAL,IAAoB5yC,MAAM,CAACirC,YAAP,CAAoB2C,OAApB,CAA4BpG,MAAM,CAACmI,eAAnC,CAA3B;AACD,WAJA;AAKDznC,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAa8N,KAAb,EAAoB;AACvBhW,YAAAA,MAAM,CAACirC,YAAP,CAAoBC,OAApB,CAA4B1D,MAAM,CAACmI,eAAnC,EAAoD35B,KAApD;AACA,iBAAK68B,YAAL,GAAoB78B,KAApB;AACD;AARA,SAjkByC,EA0kBzC;AACDjT,UAAAA,GAAG,EAAE,WADJ;AAED9D,UAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,gBAAI6zC,cAAc,GAAG,0CAArB;AACA,gBAAIzJ,QAAQ,GAAG,KAAKx0B,OAAL,CAAaw0B,QAA5B;AAEA,gBAAIjlB,KAAK,GAAG;AACV+pB,cAAAA,SAAS,EAAE9E,QADD;AAEV0J,cAAAA,YAAY,EAAE/yC,MAAM,CAACikB,QAAP,CAAgBmnB,IAFpB;AAGV4H,cAAAA,KAAK,EAAE;AAHG,aAAZ;AAKA,mBAAOF,cAAc,GAAG,GAAjB,GAAuB,CAAC,GAAGjM,KAAK,CAACrjB,cAAV,EAA0BY,KAA1B,CAA9B;AACD;AAZA,SA1kByC,EAulBzC;AACDrhB,UAAAA,GAAG,EAAE,SADJ;AAED9D,UAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,gBAAI4xC,KAAK,GAAG,KAAKh8B,OAAL,CAAag8B,KAAzB;AACA,gBAAI/I,IAAI,GAAG,KAAKh5B,KAAL,CAAWg5B,IAAtB;AAGA,mBAAOA,IAAI,IAAI,CAAC,GAAG98B,MAAH,CAAU6lC,KAAV,EAAiBnmC,GAAjB,CAAqB,UAAUrH,CAAV,EAAa;AAChD,qBAAOA,CAAC,CAACkG,WAAF,EAAP;AACD,aAFe,EAEbwT,OAFa,CAEL+qB,IAAI,CAACwC,KAAL,CAAW/gC,WAAX,EAFK,CAAhB;AAGD;AAVA,SAvlByC,CAA5C;AAmmBA,eAAOo+B,eAAP;AACD,OA77BqB,CA67BpB1b,MAAM,CAACxc,SA77Ba,CAAtB;;AA+7BA5R,MAAAA,MAAM,CAACD,OAAP,GAAiB+pC,eAAjB;AAEA;AAAO,KA3vOG;AA4vOV;;AACA;AAAO,cAAS9pC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAjwOG;AAkwOV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBiqB,OAAxC;AAGA;AAAO,KA9wOG;AA+wOV;;AACA;AAAO,cAAStqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIgd,SAAS,GAAGhd,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIgV,OAAO,GAAGhV,mBAAmB,CAAC,EAAD,CAAjC,CAHsD,CAItD;AACA;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUq1C,SAAV,EAAqB;AACpC,eAAO,UAAUlgC,IAAV,EAAgBmgC,GAAhB,EAAqB;AAC1B,cAAIvzC,CAAC,GAAGoJ,MAAM,CAACmK,OAAO,CAACH,IAAD,CAAR,CAAd;AACA,cAAI3U,CAAC,GAAG8c,SAAS,CAACg4B,GAAD,CAAjB;AACA,cAAI70C,CAAC,GAAGsB,CAAC,CAACmD,MAAV;AACA,cAAIO,CAAJ,EAAOC,CAAP;AACA,cAAIlF,CAAC,GAAG,CAAJ,IAASA,CAAC,IAAIC,CAAlB,EAAqB,OAAO40C,SAAS,GAAG,EAAH,GAAQluC,SAAxB;AACrB1B,UAAAA,CAAC,GAAG1D,CAAC,CAACwzC,UAAF,CAAa/0C,CAAb,CAAJ;AACA,iBAAOiF,CAAC,GAAG,MAAJ,IAAcA,CAAC,GAAG,MAAlB,IAA4BjF,CAAC,GAAG,CAAJ,KAAUC,CAAtC,IAA2C,CAACiF,CAAC,GAAG3D,CAAC,CAACwzC,UAAF,CAAa/0C,CAAC,GAAG,CAAjB,CAAL,IAA4B,MAAvE,IAAiFkF,CAAC,GAAG,MAArF,GACH2vC,SAAS,GAAGtzC,CAAC,CAAC+c,MAAF,CAASte,CAAT,CAAH,GAAiBiF,CADvB,GAEH4vC,SAAS,GAAGtzC,CAAC,CAAC0W,KAAF,CAAQjY,CAAR,EAAWA,CAAC,GAAG,CAAf,CAAH,GAAuB,CAACiF,CAAC,GAAG,MAAJ,IAAc,EAAf,KAAsBC,CAAC,GAAG,MAA1B,IAAoC,OAFxE;AAGD,SAVD;AAWD,OAZD;AAeA;;AAAO,KAryOG;AAsyOV;;AACA;AAAO,cAASzF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAI8c,MAAM,GAAG9c,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIqb,UAAU,GAAGrb,mBAAmB,CAAC,EAAD,CAApC;;AACA,UAAIuf,cAAc,GAAGvf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAI8gB,iBAAiB,GAAG,EAAxB,CAPsD,CAStD;;AACA9gB,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB8gB,iBAAxB,EAA2C9gB,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAA3C,EAA+E,YAAY;AAAE,eAAO,IAAP;AAAc,OAA3G;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUsb,WAAV,EAAuBJ,IAAvB,EAA6BmF,IAA7B,EAAmC;AAClD/E,QAAAA,WAAW,CAAC1Z,SAAZ,GAAwBwb,MAAM,CAACgE,iBAAD,EAAoB;AAAEf,UAAAA,IAAI,EAAE1E,UAAU,CAAC,CAAD,EAAI0E,IAAJ;AAAlB,SAApB,CAA9B;AACAR,QAAAA,cAAc,CAACvE,WAAD,EAAcJ,IAAI,GAAG,WAArB,CAAd;AACD,OAHD;AAMA;;AAAO,KAzzOG;AA0zOV;;AACA;AAAO,cAASjb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI8R,EAAE,GAAG9R,mBAAmB,CAAC,CAAD,CAA5B;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIk1C,OAAO,GAAGl1C,mBAAmB,CAAC,EAAD,CAAjC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,GAAyBW,MAAM,CAACya,gBAAhC,GAAmD,SAASA,gBAAT,CAA0BpJ,CAA1B,EAA6B+K,UAA7B,EAAyC;AAC3GpL,QAAAA,QAAQ,CAACK,CAAD,CAAR;AACA,YAAIkI,IAAI,GAAGg7B,OAAO,CAACn4B,UAAD,CAAlB;AACA,YAAInY,MAAM,GAAGsV,IAAI,CAACtV,MAAlB;AACA,YAAI1E,CAAC,GAAG,CAAR;AACA,YAAIkG,CAAJ;;AACA,eAAOxB,MAAM,GAAG1E,CAAhB;AAAmB4R,UAAAA,EAAE,CAACC,CAAH,CAAKC,CAAL,EAAQ5L,CAAC,GAAG8T,IAAI,CAACha,CAAC,EAAF,CAAhB,EAAuB6c,UAAU,CAAC3W,CAAD,CAAjC;AAAnB;;AACA,eAAO4L,CAAP;AACD,OARD;AAWA;AAAO,KA50OG;AA60OV;;AACA;AAAO,cAASrS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIm1C,QAAQ,GAAGn1C,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIo1C,eAAe,GAAGp1C,mBAAmB,CAAC,GAAD,CAAzC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU21C,WAAV,EAAuB;AACtC,eAAO,UAAUC,KAAV,EAAiB1uB,EAAjB,EAAqB2uB,SAArB,EAAgC;AACrC,cAAIvjC,CAAC,GAAG+O,SAAS,CAACu0B,KAAD,CAAjB;AACA,cAAI1wC,MAAM,GAAGuwC,QAAQ,CAACnjC,CAAC,CAACpN,MAAH,CAArB;AACA,cAAIwM,KAAK,GAAGgkC,eAAe,CAACG,SAAD,EAAY3wC,MAAZ,CAA3B;AACA,cAAIwC,KAAJ,CAJqC,CAKrC;AACA;;AACA,cAAIiuC,WAAW,IAAIzuB,EAAE,IAAIA,EAAzB,EAA6B,OAAOhiB,MAAM,GAAGwM,KAAhB,EAAuB;AAClDhK,YAAAA,KAAK,GAAG4K,CAAC,CAACZ,KAAK,EAAN,CAAT,CADkD,CAElD;;AACA,gBAAIhK,KAAK,IAAIA,KAAb,EAAoB,OAAO,IAAP,CAH8B,CAIpD;AACC,WALD,MAKO,OAAMxC,MAAM,GAAGwM,KAAf,EAAsBA,KAAK,EAA3B;AAA+B,gBAAIikC,WAAW,IAAIjkC,KAAK,IAAIY,CAA5B,EAA+B;AACnE,kBAAIA,CAAC,CAACZ,KAAD,CAAD,KAAawV,EAAjB,EAAqB,OAAOyuB,WAAW,IAAIjkC,KAAf,IAAwB,CAA/B;AACtB;AAFM;AAEL,iBAAO,CAACikC,WAAD,IAAgB,CAAC,CAAxB;AACH,SAfD;AAgBD,OAjBD;AAoBA;;AAAO,KAz2OG;AA02OV;;AACA;AAAO,cAAS11C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIgd,SAAS,GAAGhd,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIw1C,GAAG,GAAGzzC,IAAI,CAACyzC,GAAf;AACA,UAAIv4B,GAAG,GAAGlb,IAAI,CAACkb,GAAf;;AACAtd,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU0R,KAAV,EAAiBxM,MAAjB,EAAyB;AACxCwM,QAAAA,KAAK,GAAG4L,SAAS,CAAC5L,KAAD,CAAjB;AACA,eAAOA,KAAK,GAAG,CAAR,GAAYokC,GAAG,CAACpkC,KAAK,GAAGxM,MAAT,EAAiB,CAAjB,CAAf,GAAqCqY,GAAG,CAAC7L,KAAD,EAAQxM,MAAR,CAA/C;AACD,OAHD;AAMA;;AAAO,KAt3OG;AAu3OV;;AACA;AAAO,cAASjF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIy1C,gBAAgB,GAAGz1C,mBAAmB,CAAC,GAAD,CAA1C;;AACA,UAAI23B,IAAI,GAAG33B,mBAAmB,CAAC,GAAD,CAA9B;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC,CAPsD,CAStD;AACA;AACA;AACA;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwB6M,KAAxB,EAA+B,OAA/B,EAAwC,UAAU8M,QAAV,EAAoByG,IAApB,EAA0B;AACjF,aAAKxG,EAAL,GAAUmH,SAAS,CAACpH,QAAD,CAAnB,CADiF,CAClD;;AAC/B,aAAKE,EAAL,GAAU,CAAV,CAFiF,CAElD;;AAC/B,aAAK67B,EAAL,GAAUt1B,IAAV,CAHiF,CAGlD;AACjC;AACC,OALgB,EAKd,YAAY;AACb,YAAIpO,CAAC,GAAG,KAAK4H,EAAb;AACA,YAAIwG,IAAI,GAAG,KAAKs1B,EAAhB;AACA,YAAItkC,KAAK,GAAG,KAAKyI,EAAL,EAAZ;;AACA,YAAI,CAAC7H,CAAD,IAAMZ,KAAK,IAAIY,CAAC,CAACpN,MAArB,EAA6B;AAC3B,eAAKgV,EAAL,GAAU/S,SAAV;AACA,iBAAO8wB,IAAI,CAAC,CAAD,CAAX;AACD;;AACD,YAAIvX,IAAI,IAAI,MAAZ,EAAoB,OAAOuX,IAAI,CAAC,CAAD,EAAIvmB,KAAJ,CAAX;AACpB,YAAIgP,IAAI,IAAI,QAAZ,EAAsB,OAAOuX,IAAI,CAAC,CAAD,EAAI3lB,CAAC,CAACZ,KAAD,CAAL,CAAX;AACtB,eAAOumB,IAAI,CAAC,CAAD,EAAI,CAACvmB,KAAD,EAAQY,CAAC,CAACZ,KAAD,CAAT,CAAJ,CAAX;AACD,OAhBgB,EAgBd,QAhBc,CAAjB,CAbsD,CA+BtD;;AACAqJ,MAAAA,SAAS,CAACk7B,SAAV,GAAsBl7B,SAAS,CAAC5N,KAAhC;AAEA4oC,MAAAA,gBAAgB,CAAC,MAAD,CAAhB;AACAA,MAAAA,gBAAgB,CAAC,QAAD,CAAhB;AACAA,MAAAA,gBAAgB,CAAC,SAAD,CAAhB;AAGA;AAAO,KA/5OG;AAg6OV;;AACA;AAAO,cAAS91C,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,YAAY;AAAE;AAAa,OAA5C;AAGA;;AAAO,KAt6OG;AAu6OV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUqa,IAAV,EAAgB3S,KAAhB,EAAuB;AACtC,eAAO;AAAEA,UAAAA,KAAK,EAAEA,KAAT;AAAgB2S,UAAAA,IAAI,EAAE,CAAC,CAACA;AAAxB,SAAP;AACD,OAFD;AAKA;;AAAO,KA/6OG;AAg7OV;;AACA;AAAO,cAASpa,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIqe,OAAO,GAAGre,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI2d,OAAO,GAAG3d,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI41C,UAAU,GAAG51C,mBAAmB,CAAC,GAAD,CAApC;;AACA,UAAI61C,KAAK,GAAG71C,mBAAmB,CAAC,GAAD,CAA/B;;AACA,UAAI81C,kBAAkB,GAAG91C,mBAAmB,CAAC,EAAD,CAA5C;;AACA,UAAI+1C,IAAI,GAAG/1C,mBAAmB,CAAC,EAAD,CAAnB,CAAwBgK,GAAnC;;AACA,UAAIgsC,SAAS,GAAGh2C,mBAAmB,CAAC,GAAD,CAAnB,EAAhB;;AACA,UAAIi2C,0BAA0B,GAAGj2C,mBAAmB,CAAC,EAAD,CAApD;;AACA,UAAIk2C,OAAO,GAAGl2C,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIm2C,SAAS,GAAGn2C,mBAAmB,CAAC,GAAD,CAAnC;;AACA,UAAIo2C,cAAc,GAAGp2C,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIq2C,OAAO,GAAG,SAAd;AACA,UAAI3kC,SAAS,GAAG7P,MAAM,CAAC6P,SAAvB;AACA,UAAIrK,OAAO,GAAGxF,MAAM,CAACwF,OAArB;AACA,UAAIqM,QAAQ,GAAGrM,OAAO,IAAIA,OAAO,CAACqM,QAAlC;AACA,UAAI4iC,EAAE,GAAG5iC,QAAQ,IAAIA,QAAQ,CAAC4iC,EAArB,IAA2B,EAApC;AACA,UAAIC,QAAQ,GAAG10C,MAAM,CAACw0C,OAAD,CAArB;AACA,UAAI7e,MAAM,GAAG7Z,OAAO,CAACtW,OAAD,CAAP,IAAoB,SAAjC;;AACA,UAAImvC,KAAK,GAAG,SAARA,KAAQ,GAAY;AAAE;AAAa,OAAvC;;AACA,UAAIC,QAAJ,EAAcC,2BAAd,EAA2CC,oBAA3C,EAAiEC,OAAjE;AACA,UAAI3zB,oBAAoB,GAAGyzB,2BAA2B,GAAGT,0BAA0B,CAAClkC,CAApF;AAEA,UAAI8kC,UAAU,GAAG,CAAC,CAAC,YAAY;AAC7B,YAAI;AACF;AACA,cAAI54B,OAAO,GAAGs4B,QAAQ,CAACx4B,OAAT,CAAiB,CAAjB,CAAd;;AACA,cAAI+4B,WAAW,GAAG,CAAC74B,OAAO,CAACnb,WAAR,GAAsB,EAAvB,EAA2B9C,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,SAAvB,CAA3B,IAAgE,UAAU8U,IAAV,EAAgB;AAChGA,YAAAA,IAAI,CAAC0hC,KAAD,EAAQA,KAAR,CAAJ;AACD,WAFD,CAHE,CAMF;;;AACA,iBAAO,CAAChf,MAAM,IAAI,OAAOuf,qBAAP,IAAgC,UAA3C,KACF94B,OAAO,CAACsO,IAAR,CAAaiqB,KAAb,aAA+BM,WAD7B,CAEL;AACA;AACA;AAJK,aAKFR,EAAE,CAACz3B,OAAH,CAAW,KAAX,MAAsB,CALpB,IAMFs3B,SAAS,CAACt3B,OAAV,CAAkB,WAAlB,MAAmC,CAAC,CANzC;AAOD,SAdD,CAcE,OAAOxU,CAAP,EAAU;AAAE;AAAa;AAC5B,OAhBkB,EAAnB,CA/BsD,CAiDtD;;AACA,UAAI2sC,UAAU,GAAG,SAAbA,UAAa,CAAUvlC,EAAV,EAAc;AAC7B,YAAI8a,IAAJ;AACA,eAAO9oB,QAAQ,CAACgO,EAAD,CAAR,IAAgB,QAAQ8a,IAAI,GAAG9a,EAAE,CAAC8a,IAAlB,KAA2B,UAA3C,GAAwDA,IAAxD,GAA+D,KAAtE;AACD,OAHD;;AAIA,UAAI0qB,MAAM,GAAG,SAATA,MAAS,CAAUh5B,OAAV,EAAmBi5B,QAAnB,EAA6B;AACxC,YAAIj5B,OAAO,CAACk5B,EAAZ,EAAgB;AAChBl5B,QAAAA,OAAO,CAACk5B,EAAR,GAAa,IAAb;AACA,YAAIC,KAAK,GAAGn5B,OAAO,CAACo5B,EAApB;AACArB,QAAAA,SAAS,CAAC,YAAY;AACpB,cAAI5uC,KAAK,GAAG6W,OAAO,CAACq5B,EAApB;AACA,cAAIC,EAAE,GAAGt5B,OAAO,CAACu5B,EAAR,IAAc,CAAvB;AACA,cAAIt3C,CAAC,GAAG,CAAR;;AACA,cAAIiT,GAAG,GAAG,SAANA,GAAM,CAAUskC,QAAV,EAAoB;AAC5B,gBAAIC,OAAO,GAAGH,EAAE,GAAGE,QAAQ,CAACF,EAAZ,GAAiBE,QAAQ,CAACE,IAA1C;AACA,gBAAI55B,OAAO,GAAG05B,QAAQ,CAAC15B,OAAvB;AACA,gBAAIC,MAAM,GAAGy5B,QAAQ,CAACz5B,MAAtB;AACA,gBAAI45B,MAAM,GAAGH,QAAQ,CAACG,MAAtB;AACA,gBAAIz0C,MAAJ,EAAYopB,IAAZ,EAAkBsrB,MAAlB;;AACA,gBAAI;AACF,kBAAIH,OAAJ,EAAa;AACX,oBAAI,CAACH,EAAL,EAAS;AACP,sBAAIt5B,OAAO,CAAC65B,EAAR,IAAc,CAAlB,EAAqBC,iBAAiB,CAAC95B,OAAD,CAAjB;AACrBA,kBAAAA,OAAO,CAAC65B,EAAR,GAAa,CAAb;AACD;;AACD,oBAAIJ,OAAO,KAAK,IAAhB,EAAsBv0C,MAAM,GAAGiE,KAAT,CAAtB,KACK;AACH,sBAAIwwC,MAAJ,EAAYA,MAAM,CAACI,KAAP;AACZ70C,kBAAAA,MAAM,GAAGu0C,OAAO,CAACtwC,KAAD,CAAhB,CAFG,CAEsB;;AACzB,sBAAIwwC,MAAJ,EAAY;AACVA,oBAAAA,MAAM,CAACK,IAAP;AACAJ,oBAAAA,MAAM,GAAG,IAAT;AACD;AACF;;AACD,oBAAI10C,MAAM,KAAKs0C,QAAQ,CAACx5B,OAAxB,EAAiC;AAC/BD,kBAAAA,MAAM,CAACtM,SAAS,CAAC,qBAAD,CAAV,CAAN;AACD,iBAFD,MAEO,IAAI6a,IAAI,GAAGyqB,UAAU,CAAC7zC,MAAD,CAArB,EAA+B;AACpCopB,kBAAAA,IAAI,CAACnsB,IAAL,CAAU+C,MAAV,EAAkB4a,OAAlB,EAA2BC,MAA3B;AACD,iBAFM,MAEAD,OAAO,CAAC5a,MAAD,CAAP;AACR,eAnBD,MAmBO6a,MAAM,CAAC5W,KAAD,CAAN;AACR,aArBD,CAqBE,OAAOiD,CAAP,EAAU;AACV,kBAAIutC,MAAM,IAAI,CAACC,MAAf,EAAuBD,MAAM,CAACK,IAAP;AACvBj6B,cAAAA,MAAM,CAAC3T,CAAD,CAAN;AACD;AACF,WA/BD;;AAgCA,iBAAO+sC,KAAK,CAACxyC,MAAN,GAAe1E,CAAtB;AAAyBiT,YAAAA,GAAG,CAACikC,KAAK,CAACl3C,CAAC,EAAF,CAAN,CAAH;AAAzB,WApCoB,CAoCsB;;;AAC1C+d,UAAAA,OAAO,CAACo5B,EAAR,GAAa,EAAb;AACAp5B,UAAAA,OAAO,CAACk5B,EAAR,GAAa,KAAb;AACA,cAAID,QAAQ,IAAI,CAACj5B,OAAO,CAAC65B,EAAzB,EAA6BI,WAAW,CAACj6B,OAAD,CAAX;AAC9B,SAxCQ,CAAT;AAyCD,OA7CD;;AA8CA,UAAIi6B,WAAW,GAAG,SAAdA,WAAc,CAAUj6B,OAAV,EAAmB;AACnC83B,QAAAA,IAAI,CAAC31C,IAAL,CAAUyB,MAAV,EAAkB,YAAY;AAC5B,cAAIuF,KAAK,GAAG6W,OAAO,CAACq5B,EAApB;AACA,cAAIa,SAAS,GAAGC,WAAW,CAACn6B,OAAD,CAA3B;AACA,cAAI9a,MAAJ,EAAYu0C,OAAZ,EAAqB5kB,OAArB;;AACA,cAAIqlB,SAAJ,EAAe;AACbh1C,YAAAA,MAAM,GAAG+yC,OAAO,CAAC,YAAY;AAC3B,kBAAI1e,MAAJ,EAAY;AACVnwB,gBAAAA,OAAO,CAAC6M,IAAR,CAAa,oBAAb,EAAmC9M,KAAnC,EAA0C6W,OAA1C;AACD,eAFD,MAEO,IAAIy5B,OAAO,GAAG71C,MAAM,CAACw2C,oBAArB,EAA2C;AAChDX,gBAAAA,OAAO,CAAC;AAAEz5B,kBAAAA,OAAO,EAAEA,OAAX;AAAoBsmB,kBAAAA,MAAM,EAAEn9B;AAA5B,iBAAD,CAAP;AACD,eAFM,MAEA,IAAI,CAAC0rB,OAAO,GAAGjxB,MAAM,CAACixB,OAAlB,KAA8BA,OAAO,CAAChG,KAA1C,EAAiD;AACtDgG,gBAAAA,OAAO,CAAChG,KAAR,CAAc,6BAAd,EAA6C1lB,KAA7C;AACD;AACF,aARe,CAAhB,CADa,CAUb;;AACA6W,YAAAA,OAAO,CAAC65B,EAAR,GAAatgB,MAAM,IAAI4gB,WAAW,CAACn6B,OAAD,CAArB,GAAiC,CAAjC,GAAqC,CAAlD;AACD;;AAACA,UAAAA,OAAO,CAACq6B,EAAR,GAAazxC,SAAb;AACF,cAAIsxC,SAAS,IAAIh1C,MAAM,CAACkH,CAAxB,EAA2B,MAAMlH,MAAM,CAAC8G,CAAb;AAC5B,SAlBD;AAmBD,OApBD;;AAqBA,UAAImuC,WAAW,GAAG,SAAdA,WAAc,CAAUn6B,OAAV,EAAmB;AACnC,eAAOA,OAAO,CAAC65B,EAAR,KAAe,CAAf,IAAoB,CAAC75B,OAAO,CAACq6B,EAAR,IAAcr6B,OAAO,CAACo5B,EAAvB,EAA2BzyC,MAA3B,KAAsC,CAAjE;AACD,OAFD;;AAGA,UAAImzC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAU95B,OAAV,EAAmB;AACzC83B,QAAAA,IAAI,CAAC31C,IAAL,CAAUyB,MAAV,EAAkB,YAAY;AAC5B,cAAI61C,OAAJ;;AACA,cAAIlgB,MAAJ,EAAY;AACVnwB,YAAAA,OAAO,CAAC6M,IAAR,CAAa,kBAAb,EAAiC+J,OAAjC;AACD,WAFD,MAEO,IAAIy5B,OAAO,GAAG71C,MAAM,CAAC02C,kBAArB,EAAyC;AAC9Cb,YAAAA,OAAO,CAAC;AAAEz5B,cAAAA,OAAO,EAAEA,OAAX;AAAoBsmB,cAAAA,MAAM,EAAEtmB,OAAO,CAACq5B;AAApC,aAAD,CAAP;AACD;AACF,SAPD;AAQD,OATD;;AAUA,UAAIkB,OAAO,GAAG,SAAVA,OAAU,CAAUpxC,KAAV,EAAiB;AAC7B,YAAI6W,OAAO,GAAG,IAAd;AACA,YAAIA,OAAO,CAACw6B,EAAZ,EAAgB;AAChBx6B,QAAAA,OAAO,CAACw6B,EAAR,GAAa,IAAb;AACAx6B,QAAAA,OAAO,GAAGA,OAAO,CAACy6B,EAAR,IAAcz6B,OAAxB,CAJ6B,CAII;;AACjCA,QAAAA,OAAO,CAACq5B,EAAR,GAAalwC,KAAb;AACA6W,QAAAA,OAAO,CAACu5B,EAAR,GAAa,CAAb;AACA,YAAI,CAACv5B,OAAO,CAACq6B,EAAb,EAAiBr6B,OAAO,CAACq6B,EAAR,GAAar6B,OAAO,CAACo5B,EAAR,CAAWl/B,KAAX,EAAb;AACjB8+B,QAAAA,MAAM,CAACh5B,OAAD,EAAU,IAAV,CAAN;AACD,OATD;;AAUA,UAAI06B,QAAQ,GAAG,SAAXA,QAAW,CAAUvxC,KAAV,EAAiB;AAC9B,YAAI6W,OAAO,GAAG,IAAd;AACA,YAAIsO,IAAJ;AACA,YAAItO,OAAO,CAACw6B,EAAZ,EAAgB;AAChBx6B,QAAAA,OAAO,CAACw6B,EAAR,GAAa,IAAb;AACAx6B,QAAAA,OAAO,GAAGA,OAAO,CAACy6B,EAAR,IAAcz6B,OAAxB,CAL8B,CAKG;;AACjC,YAAI;AACF,cAAIA,OAAO,KAAK7W,KAAhB,EAAuB,MAAMsK,SAAS,CAAC,kCAAD,CAAf;;AACvB,cAAI6a,IAAI,GAAGyqB,UAAU,CAAC5vC,KAAD,CAArB,EAA8B;AAC5B4uC,YAAAA,SAAS,CAAC,YAAY;AACpB,kBAAI4C,OAAO,GAAG;AAAEF,gBAAAA,EAAE,EAAEz6B,OAAN;AAAew6B,gBAAAA,EAAE,EAAE;AAAnB,eAAd,CADoB,CACsB;;AAC1C,kBAAI;AACFlsB,gBAAAA,IAAI,CAACnsB,IAAL,CAAUgH,KAAV,EAAiB9B,GAAG,CAACqzC,QAAD,EAAWC,OAAX,EAAoB,CAApB,CAApB,EAA4CtzC,GAAG,CAACkzC,OAAD,EAAUI,OAAV,EAAmB,CAAnB,CAA/C;AACD,eAFD,CAEE,OAAOvuC,CAAP,EAAU;AACVmuC,gBAAAA,OAAO,CAACp4C,IAAR,CAAaw4C,OAAb,EAAsBvuC,CAAtB;AACD;AACF,aAPQ,CAAT;AAQD,WATD,MASO;AACL4T,YAAAA,OAAO,CAACq5B,EAAR,GAAalwC,KAAb;AACA6W,YAAAA,OAAO,CAACu5B,EAAR,GAAa,CAAb;AACAP,YAAAA,MAAM,CAACh5B,OAAD,EAAU,KAAV,CAAN;AACD;AACF,SAhBD,CAgBE,OAAO5T,CAAP,EAAU;AACVmuC,UAAAA,OAAO,CAACp4C,IAAR,CAAa;AAAEs4C,YAAAA,EAAE,EAAEz6B,OAAN;AAAew6B,YAAAA,EAAE,EAAE;AAAnB,WAAb,EAAyCpuC,CAAzC,EADU,CACmC;AAC9C;AACF,OAzBD,CAhJsD,CA2KtD;;;AACA,UAAI,CAACwsC,UAAL,EAAiB;AACf;AACAN,QAAAA,QAAQ,GAAG,SAAStsB,OAAT,CAAiB4uB,QAAjB,EAA2B;AACpCjD,UAAAA,UAAU,CAAC,IAAD,EAAOW,QAAP,EAAiBF,OAAjB,EAA0B,IAA1B,CAAV;AACAzhC,UAAAA,SAAS,CAACikC,QAAD,CAAT;AACApC,UAAAA,QAAQ,CAACr2C,IAAT,CAAc,IAAd;;AACA,cAAI;AACFy4C,YAAAA,QAAQ,CAACvzC,GAAG,CAACqzC,QAAD,EAAW,IAAX,EAAiB,CAAjB,CAAJ,EAAyBrzC,GAAG,CAACkzC,OAAD,EAAU,IAAV,EAAgB,CAAhB,CAA5B,CAAR;AACD,WAFD,CAEE,OAAOzxB,GAAP,EAAY;AACZyxB,YAAAA,OAAO,CAACp4C,IAAR,CAAa,IAAb,EAAmB2mB,GAAnB;AACD;AACF,SATD,CAFe,CAYf;;;AACA0vB,QAAAA,QAAQ,GAAG,SAASxsB,OAAT,CAAiB4uB,QAAjB,EAA2B;AACpC,eAAKxB,EAAL,GAAU,EAAV,CADoC,CACV;;AAC1B,eAAKiB,EAAL,GAAUzxC,SAAV,CAFoC,CAEV;;AAC1B,eAAK2wC,EAAL,GAAU,CAAV,CAHoC,CAGV;;AAC1B,eAAKiB,EAAL,GAAU,KAAV,CAJoC,CAIV;;AAC1B,eAAKnB,EAAL,GAAUzwC,SAAV,CALoC,CAKV;;AAC1B,eAAKixC,EAAL,GAAU,CAAV,CANoC,CAMV;;AAC1B,eAAKX,EAAL,GAAU,KAAV,CAPoC,CAOV;AAC3B,SARD;;AASAV,QAAAA,QAAQ,CAACn1C,SAAT,GAAqBtB,mBAAmB,CAAC,GAAD,CAAnB,CAAyBu2C,QAAQ,CAACj1C,SAAlC,EAA6C;AAChE;AACAirB,UAAAA,IAAI,EAAE,SAASA,IAAT,CAAcusB,WAAd,EAA2BC,UAA3B,EAAuC;AAC3C,gBAAItB,QAAQ,GAAGx0B,oBAAoB,CAAC6yB,kBAAkB,CAAC,IAAD,EAAOS,QAAP,CAAnB,CAAnC;AACAkB,YAAAA,QAAQ,CAACF,EAAT,GAAc,OAAOuB,WAAP,IAAsB,UAAtB,GAAmCA,WAAnC,GAAiD,IAA/D;AACArB,YAAAA,QAAQ,CAACE,IAAT,GAAgB,OAAOoB,UAAP,IAAqB,UAArB,IAAmCA,UAAnD;AACAtB,YAAAA,QAAQ,CAACG,MAAT,GAAkBpgB,MAAM,GAAGnwB,OAAO,CAACuwC,MAAX,GAAoB/wC,SAA5C;;AACA,iBAAKwwC,EAAL,CAAQhpC,IAAR,CAAaopC,QAAb;;AACA,gBAAI,KAAKa,EAAT,EAAa,KAAKA,EAAL,CAAQjqC,IAAR,CAAaopC,QAAb;AACb,gBAAI,KAAKD,EAAT,EAAaP,MAAM,CAAC,IAAD,EAAO,KAAP,CAAN;AACb,mBAAOQ,QAAQ,CAACx5B,OAAhB;AACD,WAX+D;AAYhE;AACA,mBAAS,gBAAU86B,UAAV,EAAsB;AAC7B,mBAAO,KAAKxsB,IAAL,CAAU1lB,SAAV,EAAqBkyC,UAArB,CAAP;AACD;AAf+D,SAA7C,CAArB;;AAiBApC,QAAAA,oBAAoB,GAAG,gCAAY;AACjC,cAAI14B,OAAO,GAAG,IAAIw4B,QAAJ,EAAd;AACA,eAAKx4B,OAAL,GAAeA,OAAf;AACA,eAAKF,OAAL,GAAezY,GAAG,CAACqzC,QAAD,EAAW16B,OAAX,EAAoB,CAApB,CAAlB;AACA,eAAKD,MAAL,GAAc1Y,GAAG,CAACkzC,OAAD,EAAUv6B,OAAV,EAAmB,CAAnB,CAAjB;AACD,SALD;;AAMAg4B,QAAAA,0BAA0B,CAAClkC,CAA3B,GAA+BkR,oBAAoB,GAAG,8BAAUnc,CAAV,EAAa;AACjE,iBAAOA,CAAC,KAAKyvC,QAAN,IAAkBzvC,CAAC,KAAK8vC,OAAxB,GACH,IAAID,oBAAJ,CAAyB7vC,CAAzB,CADG,GAEH4vC,2BAA2B,CAAC5vC,CAAD,CAF/B;AAGD,SAJD;AAKD;;AAEDpB,MAAAA,OAAO,CAACA,OAAO,CAACM,CAAR,GAAYN,OAAO,CAACc,CAApB,GAAwBd,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAAtC,EAAkD;AAAE5sB,QAAAA,OAAO,EAAEssB;AAAX,OAAlD,CAAP;;AACAv2C,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwBu2C,QAAxB,EAAkCF,OAAlC;;AACAr2C,MAAAA,mBAAmB,CAAC,GAAD,CAAnB,CAAyBq2C,OAAzB;;AACAO,MAAAA,OAAO,GAAG52C,mBAAmB,CAAC,CAAD,CAAnB,CAAuBq2C,OAAvB,CAAV,CAnOsD,CAqOtD;;AACA3wC,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAA1B,EAAsCR,OAAtC,EAA+C;AACpD;AACAr4B,QAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB3N,CAAhB,EAAmB;AACzB,cAAI2oC,UAAU,GAAG/1B,oBAAoB,CAAC,IAAD,CAArC;AACA,cAAI9E,QAAQ,GAAG66B,UAAU,CAACh7B,MAA1B;AACAG,UAAAA,QAAQ,CAAC9N,CAAD,CAAR;AACA,iBAAO2oC,UAAU,CAAC/6B,OAAlB;AACD;AAPmD,OAA/C,CAAP;AASAvY,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,IAAauY,OAAO,IAAI,CAACw4B,UAAzB,CAAb,EAAmDR,OAAnD,EAA4D;AACjE;AACAt4B,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBmF,CAAjB,EAAoB;AAC3B,iBAAOkzB,cAAc,CAAC/3B,OAAO,IAAI,SAASu4B,OAApB,GAA8BL,QAA9B,GAAyC,IAA1C,EAAgDrzB,CAAhD,CAArB;AACD;AAJgE,OAA5D,CAAP;AAMAxd,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,EAAE+wC,UAAU,IAAI72C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAUyjB,IAAV,EAAgB;AACtF8yB,QAAAA,QAAQ,CAACvP,GAAT,CAAavjB,IAAb,EAAmB,OAAnB,EAA4B+yB,KAA5B;AACD,OAF+C,CAAhB,CAAzB,EAEFH,OAFE,EAEO;AACZ;AACArP,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAaiS,QAAb,EAAuB;AAC1B,cAAInyC,CAAC,GAAG,IAAR;AACA,cAAIkyC,UAAU,GAAG/1B,oBAAoB,CAACnc,CAAD,CAArC;AACA,cAAIiX,OAAO,GAAGi7B,UAAU,CAACj7B,OAAzB;AACA,cAAIC,MAAM,GAAGg7B,UAAU,CAACh7B,MAAxB;AACA,cAAI7a,MAAM,GAAG+yC,OAAO,CAAC,YAAY;AAC/B,gBAAI71B,MAAM,GAAG,EAAb;AACA,gBAAIjP,KAAK,GAAG,CAAZ;AACA,gBAAI8nC,SAAS,GAAG,CAAhB;AACArD,YAAAA,KAAK,CAACoD,QAAD,EAAW,KAAX,EAAkB,UAAUh7B,OAAV,EAAmB;AACxC,kBAAIk7B,MAAM,GAAG/nC,KAAK,EAAlB;AACA,kBAAIgoC,aAAa,GAAG,KAApB;AACA/4B,cAAAA,MAAM,CAAChS,IAAP,CAAYxH,SAAZ;AACAqyC,cAAAA,SAAS;AACTpyC,cAAAA,CAAC,CAACiX,OAAF,CAAUE,OAAV,EAAmBsO,IAAnB,CAAwB,UAAUnlB,KAAV,EAAiB;AACvC,oBAAIgyC,aAAJ,EAAmB;AACnBA,gBAAAA,aAAa,GAAG,IAAhB;AACA/4B,gBAAAA,MAAM,CAAC84B,MAAD,CAAN,GAAiB/xC,KAAjB;AACA,kBAAE8xC,SAAF,IAAen7B,OAAO,CAACsC,MAAD,CAAtB;AACD,eALD,EAKGrC,MALH;AAMD,aAXI,CAAL;AAYA,cAAEk7B,SAAF,IAAen7B,OAAO,CAACsC,MAAD,CAAtB;AACD,WAjBmB,CAApB;AAkBA,cAAIld,MAAM,CAACkH,CAAX,EAAc2T,MAAM,CAAC7a,MAAM,CAAC8G,CAAR,CAAN;AACd,iBAAO+uC,UAAU,CAAC/6B,OAAlB;AACD,SA3BW;AA4BZ;AACAgpB,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAcgS,QAAd,EAAwB;AAC5B,cAAInyC,CAAC,GAAG,IAAR;AACA,cAAIkyC,UAAU,GAAG/1B,oBAAoB,CAACnc,CAAD,CAArC;AACA,cAAIkX,MAAM,GAAGg7B,UAAU,CAACh7B,MAAxB;AACA,cAAI7a,MAAM,GAAG+yC,OAAO,CAAC,YAAY;AAC/BL,YAAAA,KAAK,CAACoD,QAAD,EAAW,KAAX,EAAkB,UAAUh7B,OAAV,EAAmB;AACxCnX,cAAAA,CAAC,CAACiX,OAAF,CAAUE,OAAV,EAAmBsO,IAAnB,CAAwBysB,UAAU,CAACj7B,OAAnC,EAA4CC,MAA5C;AACD,aAFI,CAAL;AAGD,WAJmB,CAApB;AAKA,cAAI7a,MAAM,CAACkH,CAAX,EAAc2T,MAAM,CAAC7a,MAAM,CAAC8G,CAAR,CAAN;AACd,iBAAO+uC,UAAU,CAAC/6B,OAAlB;AACD;AAxCW,OAFP,CAAP;AA8CA;AAAO,KAptPG;AAqtPV;;AACA;AAAO,cAASte,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAcuJ,WAAd,EAA2Bxa,IAA3B,EAAiC64C,cAAjC,EAAiD;AAChE,YAAI,EAAE5nC,EAAE,YAAYuJ,WAAhB,KAAiCq+B,cAAc,KAAKxyC,SAAnB,IAAgCwyC,cAAc,IAAI5nC,EAAvF,EAA4F;AAC1F,gBAAMC,SAAS,CAAClR,IAAI,GAAG,yBAAR,CAAf;AACD;;AAAC,eAAOiR,EAAP;AACH,OAJD;AAOA;;AAAO,KA/tPG;AAguPV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAII,IAAI,GAAGJ,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIs5C,WAAW,GAAGt5C,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIm1C,QAAQ,GAAGn1C,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIu5C,SAAS,GAAGv5C,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIw5C,KAAK,GAAG,EAAZ;AACA,UAAIC,MAAM,GAAG,EAAb;;AACA,UAAI/5C,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,UAAUu5C,QAAV,EAAoB34B,OAApB,EAA6B3b,EAA7B,EAAiCkQ,IAAjC,EAAuC+I,QAAvC,EAAiD;AAC9E,YAAI87B,MAAM,GAAG97B,QAAQ,GAAG,YAAY;AAAE,iBAAOq7B,QAAP;AAAkB,SAAnC,GAAsCM,SAAS,CAACN,QAAD,CAApE;AACA,YAAIlnC,CAAC,GAAGzM,GAAG,CAACX,EAAD,EAAKkQ,IAAL,EAAWyL,OAAO,GAAG,CAAH,GAAO,CAAzB,CAAX;AACA,YAAIlP,KAAK,GAAG,CAAZ;AACA,YAAIxM,MAAJ,EAAY+yB,IAAZ,EAAkBtW,QAAlB,EAA4Ble,MAA5B;AACA,YAAI,OAAOu2C,MAAP,IAAiB,UAArB,EAAiC,MAAMhoC,SAAS,CAACunC,QAAQ,GAAG,mBAAZ,CAAf,CAL6C,CAM9E;;AACA,YAAIK,WAAW,CAACI,MAAD,CAAf,EAAyB,KAAK90C,MAAM,GAAGuwC,QAAQ,CAAC8D,QAAQ,CAACr0C,MAAV,CAAtB,EAAyCA,MAAM,GAAGwM,KAAlD,EAAyDA,KAAK,EAA9D,EAAkE;AACzFjO,UAAAA,MAAM,GAAGmd,OAAO,GAAGvO,CAAC,CAACJ,QAAQ,CAACgmB,IAAI,GAAGshB,QAAQ,CAAC7nC,KAAD,CAAhB,CAAR,CAAiC,CAAjC,CAAD,EAAsCumB,IAAI,CAAC,CAAD,CAA1C,CAAJ,GAAqD5lB,CAAC,CAACknC,QAAQ,CAAC7nC,KAAD,CAAT,CAAtE;AACA,cAAIjO,MAAM,KAAKq2C,KAAX,IAAoBr2C,MAAM,KAAKs2C,MAAnC,EAA2C,OAAOt2C,MAAP;AAC5C,SAHD,MAGO,KAAKke,QAAQ,GAAGq4B,MAAM,CAACt5C,IAAP,CAAY64C,QAAZ,CAAhB,EAAuC,CAAC,CAACthB,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAAjE,GAAwE;AAC7E5W,UAAAA,MAAM,GAAG/C,IAAI,CAACihB,QAAD,EAAWtP,CAAX,EAAc4lB,IAAI,CAACvwB,KAAnB,EAA0BkZ,OAA1B,CAAb;AACA,cAAInd,MAAM,KAAKq2C,KAAX,IAAoBr2C,MAAM,KAAKs2C,MAAnC,EAA2C,OAAOt2C,MAAP;AAC5C;AACF,OAdD;;AAeAzD,MAAAA,OAAO,CAAC85C,KAAR,GAAgBA,KAAhB;AACA95C,MAAAA,OAAO,CAAC+5C,MAAR,GAAiBA,MAAjB;AAGA;AAAO,KA9vPG;AA+vPV;;AACA;AAAO,cAAS95C,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACAC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUiF,EAAV,EAAcgJ,IAAd,EAAoBkH,IAApB,EAA0B;AACzC,YAAI8kC,EAAE,GAAG9kC,IAAI,KAAKhO,SAAlB;;AACA,gBAAQ8G,IAAI,CAAC/I,MAAb;AACE,eAAK,CAAL;AAAQ,mBAAO+0C,EAAE,GAAGh1C,EAAE,EAAL,GACGA,EAAE,CAACvE,IAAH,CAAQyU,IAAR,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAO8kC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAOgsC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,EAAuBA,IAAI,CAAC,CAAD,CAA3B,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAOgsC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,EAAuBA,IAAI,CAAC,CAAD,CAA3B,EAAgCA,IAAI,CAAC,CAAD,CAApC,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAOgsC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,EAA4BA,IAAI,CAAC,CAAD,CAAhC,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,EAAuBA,IAAI,CAAC,CAAD,CAA3B,EAAgCA,IAAI,CAAC,CAAD,CAApC,EAAyCA,IAAI,CAAC,CAAD,CAA7C,CADZ;AATV;;AAWE,eAAOhJ,EAAE,CAACoC,KAAH,CAAS8N,IAAT,EAAelH,IAAf,CAAP;AACH,OAdD;AAiBA;;AAAO,KApxPG;AAqxPV;;AACA;AAAO,cAAShO,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI45C,SAAS,GAAG55C,mBAAmB,CAAC,EAAD,CAAnB,CAAwBgK,GAAxC;;AACA,UAAI6vC,QAAQ,GAAGh4C,MAAM,CAAC8/B,gBAAP,IAA2B9/B,MAAM,CAAC+/B,sBAAjD;AACA,UAAIv6B,OAAO,GAAGxF,MAAM,CAACwF,OAArB;AACA,UAAI4iB,OAAO,GAAGpoB,MAAM,CAACooB,OAArB;AACA,UAAIuN,MAAM,GAAGx3B,mBAAmB,CAAC,EAAD,CAAnB,CAAwBqH,OAAxB,KAAoC,SAAjD;;AAEA1H,MAAAA,MAAM,CAACD,OAAP,GAAiB,YAAY;AAC3B,YAAIo6C,IAAJ,EAAUC,IAAV,EAAgB9C,MAAhB;;AAEA,YAAI/V,KAAK,GAAG,SAARA,KAAQ,GAAY;AACtB,cAAI51B,MAAJ,EAAY3G,EAAZ;AACA,cAAI6yB,MAAM,KAAKlsB,MAAM,GAAGjE,OAAO,CAACuwC,MAAtB,CAAV,EAAyCtsC,MAAM,CAAC2sC,IAAP;;AACzC,iBAAO6B,IAAP,EAAa;AACXn1C,YAAAA,EAAE,GAAGm1C,IAAI,CAACn1C,EAAV;AACAm1C,YAAAA,IAAI,GAAGA,IAAI,CAAC/5B,IAAZ;;AACA,gBAAI;AACFpb,cAAAA,EAAE;AACH,aAFD,CAEE,OAAO0F,CAAP,EAAU;AACV,kBAAIyvC,IAAJ,EAAU7C,MAAM,GAAhB,KACK8C,IAAI,GAAGlzC,SAAP;AACL,oBAAMwD,CAAN;AACD;AACF;;AAAC0vC,UAAAA,IAAI,GAAGlzC,SAAP;AACF,cAAIyE,MAAJ,EAAYA,MAAM,CAAC0sC,KAAP;AACb,SAfD,CAH2B,CAoB3B;;;AACA,YAAIxgB,MAAJ,EAAY;AACVyf,UAAAA,MAAM,GAAG,kBAAY;AACnB5vC,YAAAA,OAAO,CAAC+L,QAAR,CAAiB8tB,KAAjB;AACD,WAFD,CADU,CAIZ;;AACC,SALD,MAKO,IAAI2Y,QAAQ,IAAI,EAAEh4C,MAAM,CAACyC,SAAP,IAAoBzC,MAAM,CAACyC,SAAP,CAAiB01C,UAAvC,CAAhB,EAAoE;AACzE,cAAIC,MAAM,GAAG,IAAb;AACA,cAAI9rC,IAAI,GAAG3J,QAAQ,CAAC63B,cAAT,CAAwB,EAAxB,CAAX;AACA,cAAIwd,QAAJ,CAAa3Y,KAAb,EAAoBmB,OAApB,CAA4Bl0B,IAA5B,EAAkC;AAAEm0B,YAAAA,aAAa,EAAE;AAAjB,WAAlC,EAHyE,CAGb;;AAC5D2U,UAAAA,MAAM,GAAG,kBAAY;AACnB9oC,YAAAA,IAAI,CAACqU,IAAL,GAAYy3B,MAAM,GAAG,CAACA,MAAtB;AACD,WAFD,CAJyE,CAO3E;;AACC,SARM,MAQA,IAAIhwB,OAAO,IAAIA,OAAO,CAAClM,OAAvB,EAAgC;AACrC;AACA,cAAIE,OAAO,GAAGgM,OAAO,CAAClM,OAAR,CAAgBlX,SAAhB,CAAd;;AACAowC,UAAAA,MAAM,GAAG,kBAAY;AACnBh5B,YAAAA,OAAO,CAACsO,IAAR,CAAa2U,KAAb;AACD,WAFD,CAHqC,CAMvC;AACA;AACA;AACA;AACA;AACA;;AACC,SAZM,MAYA;AACL+V,UAAAA,MAAM,GAAG,kBAAY;AACnB;AACA2C,YAAAA,SAAS,CAACx5C,IAAV,CAAeyB,MAAf,EAAuBq/B,KAAvB;AACD,WAHD;AAID;;AAED,eAAO,UAAUv8B,EAAV,EAAc;AACnB,cAAIoxC,IAAI,GAAG;AAAEpxC,YAAAA,EAAE,EAAEA,EAAN;AAAUob,YAAAA,IAAI,EAAElZ;AAAhB,WAAX;AACA,cAAIkzC,IAAJ,EAAUA,IAAI,CAACh6B,IAAL,GAAYg2B,IAAZ;;AACV,cAAI,CAAC+D,IAAL,EAAW;AACTA,YAAAA,IAAI,GAAG/D,IAAP;AACAkB,YAAAA,MAAM;AACP;;AAAC8C,UAAAA,IAAI,GAAGhE,IAAP;AACH,SAPD;AAQD,OA7DD;AAgEA;;AAAO,KA/1PG;AAg2PV;;AACA;AAAO,cAASp2C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIsE,SAAS,GAAGzC,MAAM,CAACyC,SAAvB;AAEA3E,MAAAA,MAAM,CAACD,OAAP,GAAiB4E,SAAS,IAAIA,SAAS,CAAC6xC,SAAvB,IAAoC,EAArD;AAGA;AAAO,KAz2PG;AA02PV;;AACA;AAAO,cAASx2C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUgH,MAAV,EAAkB+V,GAAlB,EAAuB+G,IAAvB,EAA6B;AAC5C,aAAK,IAAI3e,GAAT,IAAgB4X,GAAhB,EAAqB;AACnB,cAAI+G,IAAI,IAAI9c,MAAM,CAAC7B,GAAD,CAAlB,EAAyB6B,MAAM,CAAC7B,GAAD,CAAN,GAAc4X,GAAG,CAAC5X,GAAD,CAAjB,CAAzB,KACKU,IAAI,CAACmB,MAAD,EAAS7B,GAAT,EAAc4X,GAAG,CAAC5X,GAAD,CAAjB,CAAJ;AACN;;AAAC,eAAO6B,MAAP;AACH,OALD;AAQA;;AAAO,KAt3PG;AAu3PV;;AACA;AAAO,cAAS/G,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI8R,EAAE,GAAG9R,mBAAmB,CAAC,CAAD,CAA5B;;AACA,UAAIk6C,WAAW,GAAGl6C,mBAAmB,CAAC,CAAD,CAArC;;AACA,UAAIuhB,OAAO,GAAGvhB,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,SAAvB,CAAd;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUikB,GAAV,EAAe;AAC9B,YAAI7c,CAAC,GAAG,OAAOpF,IAAI,CAACiiB,GAAD,CAAX,IAAoB,UAApB,GAAiCjiB,IAAI,CAACiiB,GAAD,CAArC,GAA6C9hB,MAAM,CAAC8hB,GAAD,CAA3D;AACA,YAAIu2B,WAAW,IAAIpzC,CAAf,IAAoB,CAACA,CAAC,CAACya,OAAD,CAA1B,EAAqCzP,EAAE,CAACC,CAAH,CAAKjL,CAAL,EAAQya,OAAR,EAAiB;AACpD1gB,UAAAA,YAAY,EAAE,IADsC;AAEpDE,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO,IAAP;AAAc;AAFmB,SAAjB;AAItC,OAND;AASA;;AAAO,KA34PG;AA44PV;;AACA;AAAO,cAASpB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAGtD;;AAEA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI81C,kBAAkB,GAAG91C,mBAAmB,CAAC,EAAD,CAA5C;;AACA,UAAIo2C,cAAc,GAAGp2C,mBAAmB,CAAC,EAAD,CAAxC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACU,CAAR,GAAYV,OAAO,CAACuB,CAArB,EAAwB,SAAxB,EAAmC;AAAE,mBAAW,kBAAUkzC,SAAV,EAAqB;AAC1E,cAAIrzC,CAAC,GAAGgvC,kBAAkB,CAAC,IAAD,EAAOp0C,IAAI,CAACuoB,OAAL,IAAgBpoB,MAAM,CAACooB,OAA9B,CAA1B;AACA,cAAIpmB,UAAU,GAAG,OAAOs2C,SAAP,IAAoB,UAArC;AACA,iBAAO,KAAK5tB,IAAL,CACL1oB,UAAU,GAAG,UAAUqf,CAAV,EAAa;AACxB,mBAAOkzB,cAAc,CAACtvC,CAAD,EAAIqzC,SAAS,EAAb,CAAd,CAA+B5tB,IAA/B,CAAoC,YAAY;AAAE,qBAAOrJ,CAAP;AAAW,aAA7D,CAAP;AACD,WAFS,GAENi3B,SAHC,EAILt2C,UAAU,GAAG,UAAUwG,CAAV,EAAa;AACxB,mBAAO+rC,cAAc,CAACtvC,CAAD,EAAIqzC,SAAS,EAAb,CAAd,CAA+B5tB,IAA/B,CAAoC,YAAY;AAAE,oBAAMliB,CAAN;AAAU,aAA5D,CAAP;AACD,WAFS,GAEN8vC,SANC,CAAP;AAQD;AAXyC,OAAnC,CAAP;AAcA;AAAO,KAt6PG;AAu6PV;;AACA;AAAO,cAASx6C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIijB,oBAAoB,GAAGjjB,mBAAmB,CAAC,EAAD,CAA9C;;AACA,UAAIk2C,OAAO,GAAGl2C,mBAAmB,CAAC,EAAD,CAAjC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAT,EAAY,SAAZ,EAAuB;AAAE,eAAO,cAAUk0C,UAAV,EAAsB;AAC3D,cAAIj3B,iBAAiB,GAAGF,oBAAoB,CAAClR,CAArB,CAAuB,IAAvB,CAAxB;AACA,cAAI5O,MAAM,GAAG+yC,OAAO,CAACkE,UAAD,CAApB;AACA,WAACj3C,MAAM,CAACkH,CAAP,GAAW8Y,iBAAiB,CAACnF,MAA7B,GAAsCmF,iBAAiB,CAACpF,OAAzD,EAAkE5a,MAAM,CAAC8G,CAAzE;AACA,iBAAOkZ,iBAAiB,CAAClF,OAAzB;AACD;AAL6B,OAAvB,CAAP;AAQA;AAAO,KAz7PG;AA07PV;;AACA;AAAO,cAASte,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA/7PG;AAg8PV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8B2yB,MAA/C;AAGA;AAAO,KAv8PG;AAw8PV;;AACA;AAAO,cAAS3zB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAArB,EAAwB,QAAxB,EAAkC;AAAEwtB,QAAAA,MAAM,EAAEtzB,mBAAmB,CAAC,GAAD;AAA7B,OAAlC,CAAP;AAGA;AAAO,KAj9PG;AAk9PV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAIk6C,WAAW,GAAGl6C,mBAAmB,CAAC,CAAD,CAArC;;AACA,UAAIk1C,OAAO,GAAGl1C,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIq6C,IAAI,GAAGr6C,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIukB,GAAG,GAAGvkB,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI+U,OAAO,GAAG/U,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIs6C,OAAO,GAAG35C,MAAM,CAAC2yB,MAArB,CAXsD,CAatD;;AACA3zB,MAAAA,MAAM,CAACD,OAAP,GAAiB,CAAC46C,OAAD,IAAYt6C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AAC/D,YAAIu6C,CAAC,GAAG,EAAR;AACA,YAAIj0C,CAAC,GAAG,EAAR,CAF+D,CAG/D;;AACA,YAAIJ,CAAC,GAAG7D,MAAM,EAAd;AACA,YAAIm4C,CAAC,GAAG,sBAAR;AACAD,QAAAA,CAAC,CAACr0C,CAAD,CAAD,GAAO,CAAP;AACAs0C,QAAAA,CAAC,CAAChyC,KAAF,CAAQ,EAAR,EAAY/D,OAAZ,CAAoB,UAAU+qB,CAAV,EAAa;AAAElpB,UAAAA,CAAC,CAACkpB,CAAD,CAAD,GAAOA,CAAP;AAAW,SAA9C;AACA,eAAO8qB,OAAO,CAAC,EAAD,EAAKC,CAAL,CAAP,CAAer0C,CAAf,KAAqB,CAArB,IAA0BvF,MAAM,CAACuZ,IAAP,CAAYogC,OAAO,CAAC,EAAD,EAAKh0C,CAAL,CAAnB,EAA4BkgB,IAA5B,CAAiC,EAAjC,KAAwCg0B,CAAzE;AACD,OAT4B,CAAZ,GASZ,SAASlnB,MAAT,CAAgB5sB,MAAhB,EAAwBd,MAAxB,EAAgC;AAAE;AACrC,YAAI6X,CAAC,GAAG0D,QAAQ,CAACza,MAAD,CAAhB;AACA,YAAI+zC,IAAI,GAAGz1C,SAAS,CAACJ,MAArB;AACA,YAAIwM,KAAK,GAAG,CAAZ;AACA,YAAIspC,UAAU,GAAGL,IAAI,CAACtoC,CAAtB;AACA,YAAI4oC,MAAM,GAAGp2B,GAAG,CAACxS,CAAjB;;AACA,eAAO0oC,IAAI,GAAGrpC,KAAd,EAAqB;AACnB,cAAIlL,CAAC,GAAG6O,OAAO,CAAC/P,SAAS,CAACoM,KAAK,EAAN,CAAV,CAAf;AACA,cAAI8I,IAAI,GAAGwgC,UAAU,GAAGxF,OAAO,CAAChvC,CAAD,CAAP,CAAW4G,MAAX,CAAkB4tC,UAAU,CAACx0C,CAAD,CAA5B,CAAH,GAAsCgvC,OAAO,CAAChvC,CAAD,CAAlE;AACA,cAAItB,MAAM,GAAGsV,IAAI,CAACtV,MAAlB;AACA,cAAIq4B,CAAC,GAAG,CAAR;AACA,cAAIp4B,GAAJ;;AACA,iBAAOD,MAAM,GAAGq4B,CAAhB,EAAmB;AACjBp4B,YAAAA,GAAG,GAAGqV,IAAI,CAAC+iB,CAAC,EAAF,CAAV;AACA,gBAAI,CAACid,WAAD,IAAgBS,MAAM,CAACv6C,IAAP,CAAY8F,CAAZ,EAAerB,GAAf,CAApB,EAAyC4Y,CAAC,CAAC5Y,GAAD,CAAD,GAASqB,CAAC,CAACrB,GAAD,CAAV;AAC1C;AACF;;AAAC,eAAO4Y,CAAP;AACH,OA1BgB,GA0Bb68B,OA1BJ;AA6BA;AAAO,KA9/PG;AA+/PV;;AACA;AAAO,cAAS36C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8B6e,cAA/C;AAGA;AAAO,KAtgQG;AAugQV;;AACA;AAAO,cAAS7f,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI46C,eAAe,GAAG56C,mBAAmB,CAAC,EAAD,CAAzC;;AAEAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,gBAAxB,EAA0C,YAAY;AACpD,eAAO,SAASwf,cAAT,CAAwB/N,EAAxB,EAA4B;AACjC,iBAAOmpC,eAAe,CAACz5B,QAAQ,CAAC1P,EAAD,CAAT,CAAtB;AACD,SAFD;AAGD,OAJD;AAOA;;AAAO,KArhQG;AAshQV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA3hQG;AA4hQV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,CAA0B,UAA1B,CAAjB;AAGA;AAAO,KApiQG;AAqiQV;;AACA;AAAO,cAASpS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA1iQG;AA2iQV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBqC,MAAxC;AAGA;AAAO,KArjQG;AAsjQV;;AACA;AAAO,cAAS1C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIk6C,WAAW,GAAGl6C,mBAAmB,CAAC,CAAD,CAArC;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIqf,QAAQ,GAAGrf,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI66C,IAAI,GAAG76C,mBAAmB,CAAC,GAAD,CAAnB,CAAyB2jB,GAApC;;AACA,UAAIm3B,MAAM,GAAG96C,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIkd,MAAM,GAAGld,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIuf,cAAc,GAAGvf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIoC,GAAG,GAAGpC,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI+6C,GAAG,GAAG/6C,mBAAmB,CAAC,CAAD,CAA7B;;AACA,UAAIse,MAAM,GAAGte,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIg7C,SAAS,GAAGh7C,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIi7C,QAAQ,GAAGj7C,mBAAmB,CAAC,GAAD,CAAlC;;AACA,UAAI0C,OAAO,GAAG1C,mBAAmB,CAAC,GAAD,CAAjC;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI6R,WAAW,GAAG7R,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AACA,UAAI4kB,OAAO,GAAG5kB,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIk7C,OAAO,GAAGl7C,mBAAmB,CAAC,GAAD,CAAjC;;AACA,UAAIm7C,KAAK,GAAGn7C,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIo7C,KAAK,GAAGp7C,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIq7C,GAAG,GAAGr7C,mBAAmB,CAAC,CAAD,CAA7B;;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIwkB,IAAI,GAAG22B,KAAK,CAACppC,CAAjB;AACA,UAAID,EAAE,GAAGupC,GAAG,CAACtpC,CAAb;AACA,UAAIupC,IAAI,GAAGJ,OAAO,CAACnpC,CAAnB;AACA,UAAIwM,OAAO,GAAG1c,MAAM,CAACQ,MAArB;AACA,UAAIk5C,KAAK,GAAG15C,MAAM,CAACsmB,IAAnB;;AACA,UAAIqzB,UAAU,GAAGD,KAAK,IAAIA,KAAK,CAACnzB,SAAhC;;AACA,UAAI3iB,SAAS,GAAG,WAAhB;AACA,UAAIg2C,MAAM,GAAGV,GAAG,CAAC,SAAD,CAAhB;AACA,UAAIW,YAAY,GAAGX,GAAG,CAAC,aAAD,CAAtB;AACA,UAAIJ,MAAM,GAAG,GAAG7/B,oBAAhB;AACA,UAAI6gC,cAAc,GAAGz+B,MAAM,CAAC,iBAAD,CAA3B;AACA,UAAI0+B,UAAU,GAAG1+B,MAAM,CAAC,SAAD,CAAvB;AACA,UAAI2+B,SAAS,GAAG3+B,MAAM,CAAC,YAAD,CAAtB;AACA,UAAIkE,WAAW,GAAGzgB,MAAM,CAAC8E,SAAD,CAAxB;AACA,UAAIoxC,UAAU,GAAG,OAAOt4B,OAAP,IAAkB,UAAlB,IAAgC,CAAC,CAAC68B,KAAK,CAACrpC,CAAzD;AACA,UAAI+pC,OAAO,GAAGj6C,MAAM,CAACi6C,OAArB,CA/CsD,CAgDtD;;AACA,UAAIC,MAAM,GAAG,CAACD,OAAD,IAAY,CAACA,OAAO,CAACr2C,SAAD,CAApB,IAAmC,CAACq2C,OAAO,CAACr2C,SAAD,CAAP,CAAmBu2C,SAApE,CAjDsD,CAmDtD;;AACA,UAAIC,aAAa,GAAG/B,WAAW,IAAIY,MAAM,CAAC,YAAY;AACpD,eAAOl2B,OAAO,CAAC9S,EAAE,CAAC,EAAD,EAAK,GAAL,EAAU;AACzB/Q,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO+Q,EAAE,CAAC,IAAD,EAAO,GAAP,EAAY;AAAE1K,cAAAA,KAAK,EAAE;AAAT,aAAZ,CAAF,CAA4BjC,CAAnC;AAAuC;AADjC,SAAV,CAAH,CAAP,CAEHA,CAFG,IAEE,CAFT;AAGD,OAJwC,CAArB,GAIf,UAAUsM,EAAV,EAAc5M,GAAd,EAAmB2c,CAAnB,EAAsB;AACzB,YAAI06B,SAAS,GAAG13B,IAAI,CAACpD,WAAD,EAAcvc,GAAd,CAApB;AACA,YAAIq3C,SAAJ,EAAe,OAAO96B,WAAW,CAACvc,GAAD,CAAlB;AACfiN,QAAAA,EAAE,CAACL,EAAD,EAAK5M,GAAL,EAAU2c,CAAV,CAAF;AACA,YAAI06B,SAAS,IAAIzqC,EAAE,KAAK2P,WAAxB,EAAqCtP,EAAE,CAACsP,WAAD,EAAcvc,GAAd,EAAmBq3C,SAAnB,CAAF;AACtC,OATmB,GAShBpqC,EATJ;;AAWA,UAAIzF,IAAI,GAAG,SAAPA,IAAO,CAAU3B,GAAV,EAAe;AACxB,YAAIyxC,GAAG,GAAGP,UAAU,CAAClxC,GAAD,CAAV,GAAkBka,OAAO,CAACrG,OAAO,CAAC9Y,SAAD,CAAR,CAAnC;;AACA02C,QAAAA,GAAG,CAACzG,EAAJ,GAAShrC,GAAT;AACA,eAAOyxC,GAAP;AACD,OAJD;;AAMA,UAAItkB,QAAQ,GAAGgf,UAAU,IAAI,SAAOt4B,OAAO,CAAC8C,QAAf,KAA2B,QAAzC,GAAoD,UAAU5P,EAAV,EAAc;AAC/E,eAAO,SAAOA,EAAP,KAAa,QAApB;AACD,OAFc,GAEX,UAAUA,EAAV,EAAc;AAChB,eAAOA,EAAE,YAAY8M,OAArB;AACD,OAJD;;AAMA,UAAI69B,eAAe,GAAG,SAASx7C,cAAT,CAAwB6Q,EAAxB,EAA4B5M,GAA5B,EAAiC2c,CAAjC,EAAoC;AACxD,YAAI/P,EAAE,KAAK2P,WAAX,EAAwBg7B,eAAe,CAACP,SAAD,EAAYh3C,GAAZ,EAAiB2c,CAAjB,CAAf;AACxB7P,QAAAA,QAAQ,CAACF,EAAD,CAAR;AACA5M,QAAAA,GAAG,GAAGgN,WAAW,CAAChN,GAAD,EAAM,IAAN,CAAjB;AACA8M,QAAAA,QAAQ,CAAC6P,CAAD,CAAR;;AACA,YAAIhc,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAAP,EAA0B;AACxB,cAAI,CAAC2c,CAAC,CAAC1gB,UAAP,EAAmB;AACjB,gBAAI,CAAC0E,GAAG,CAACiM,EAAD,EAAKgqC,MAAL,CAAR,EAAsB3pC,EAAE,CAACL,EAAD,EAAKgqC,MAAL,EAAa9mC,UAAU,CAAC,CAAD,EAAI,EAAJ,CAAvB,CAAF;AACtBlD,YAAAA,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,IAAkB,IAAlB;AACD,WAHD,MAGO;AACL,gBAAIW,GAAG,CAACiM,EAAD,EAAKgqC,MAAL,CAAH,IAAmBhqC,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,CAAvB,EAAwC4M,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,IAAkB,KAAlB;AACxC2c,YAAAA,CAAC,GAAGoD,OAAO,CAACpD,CAAD,EAAI;AAAE1gB,cAAAA,UAAU,EAAE6T,UAAU,CAAC,CAAD,EAAI,KAAJ;AAAxB,aAAJ,CAAX;AACD;;AAAC,iBAAOsnC,aAAa,CAACxqC,EAAD,EAAK5M,GAAL,EAAU2c,CAAV,CAApB;AACH;;AAAC,eAAO1P,EAAE,CAACL,EAAD,EAAK5M,GAAL,EAAU2c,CAAV,CAAT;AACH,OAdD;;AAeA,UAAI66B,iBAAiB,GAAG,SAASjhC,gBAAT,CAA0B3J,EAA1B,EAA8BrL,CAA9B,EAAiC;AACvDuL,QAAAA,QAAQ,CAACF,EAAD,CAAR;AACA,YAAIyI,IAAI,GAAG+gC,QAAQ,CAAC70C,CAAC,GAAG2a,SAAS,CAAC3a,CAAD,CAAd,CAAnB;AACA,YAAIlG,CAAC,GAAG,CAAR;AACA,YAAIC,CAAC,GAAG+Z,IAAI,CAACtV,MAAb;AACA,YAAIC,GAAJ;;AACA,eAAO1E,CAAC,GAAGD,CAAX;AAAck8C,UAAAA,eAAe,CAAC3qC,EAAD,EAAK5M,GAAG,GAAGqV,IAAI,CAACha,CAAC,EAAF,CAAf,EAAsBkG,CAAC,CAACvB,GAAD,CAAvB,CAAf;AAAd;;AACA,eAAO4M,EAAP;AACD,OARD;;AASA,UAAI6qC,OAAO,GAAG,SAASx/B,MAAT,CAAgBrL,EAAhB,EAAoBrL,CAApB,EAAuB;AACnC,eAAOA,CAAC,KAAKS,SAAN,GAAkB+d,OAAO,CAACnT,EAAD,CAAzB,GAAgC4qC,iBAAiB,CAACz3B,OAAO,CAACnT,EAAD,CAAR,EAAcrL,CAAd,CAAxD;AACD,OAFD;;AAGA,UAAIm2C,qBAAqB,GAAG,SAASzhC,oBAAT,CAA8BjW,GAA9B,EAAmC;AAC7D,YAAI23C,CAAC,GAAG7B,MAAM,CAACv6C,IAAP,CAAY,IAAZ,EAAkByE,GAAG,GAAGgN,WAAW,CAAChN,GAAD,EAAM,IAAN,CAAnC,CAAR;AACA,YAAI,SAASuc,WAAT,IAAwB5b,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAA3B,IAAgD,CAACW,GAAG,CAACq2C,SAAD,EAAYh3C,GAAZ,CAAxD,EAA0E,OAAO,KAAP;AAC1E,eAAO23C,CAAC,IAAI,CAACh3C,GAAG,CAAC,IAAD,EAAOX,GAAP,CAAT,IAAwB,CAACW,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAA5B,IAAiDW,GAAG,CAAC,IAAD,EAAOi2C,MAAP,CAAH,IAAqB,KAAKA,MAAL,EAAa52C,GAAb,CAAtE,GAA0F23C,CAA1F,GAA8F,IAArG;AACD,OAJD;;AAKA,UAAIC,yBAAyB,GAAG,SAASh4B,wBAAT,CAAkChT,EAAlC,EAAsC5M,GAAtC,EAA2C;AACzE4M,QAAAA,EAAE,GAAGsP,SAAS,CAACtP,EAAD,CAAd;AACA5M,QAAAA,GAAG,GAAGgN,WAAW,CAAChN,GAAD,EAAM,IAAN,CAAjB;AACA,YAAI4M,EAAE,KAAK2P,WAAP,IAAsB5b,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAAzB,IAA8C,CAACW,GAAG,CAACq2C,SAAD,EAAYh3C,GAAZ,CAAtD,EAAwE;AACxE,YAAI2c,CAAC,GAAGgD,IAAI,CAAC/S,EAAD,EAAK5M,GAAL,CAAZ;AACA,YAAI2c,CAAC,IAAIhc,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAAR,IAA6B,EAAEW,GAAG,CAACiM,EAAD,EAAKgqC,MAAL,CAAH,IAAmBhqC,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,CAArB,CAAjC,EAAwE2c,CAAC,CAAC1gB,UAAF,GAAe,IAAf;AACxE,eAAO0gB,CAAP;AACD,OAPD;;AAQA,UAAIk7B,oBAAoB,GAAG,SAASp4B,mBAAT,CAA6B7S,EAA7B,EAAiC;AAC1D,YAAIwP,KAAK,GAAGq6B,IAAI,CAACv6B,SAAS,CAACtP,EAAD,CAAV,CAAhB;AACA,YAAItO,MAAM,GAAG,EAAb;AACA,YAAIjD,CAAC,GAAG,CAAR;AACA,YAAI2E,GAAJ;;AACA,eAAOoc,KAAK,CAACrc,MAAN,GAAe1E,CAAtB,EAAyB;AACvB,cAAI,CAACsF,GAAG,CAACo2C,UAAD,EAAa/2C,GAAG,GAAGoc,KAAK,CAAC/gB,CAAC,EAAF,CAAxB,CAAJ,IAAsC2E,GAAG,IAAI42C,MAA7C,IAAuD52C,GAAG,IAAIg2C,IAAlE,EAAwE13C,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ;AACzE;;AAAC,eAAO1B,MAAP;AACH,OARD;;AASA,UAAIw5C,sBAAsB,GAAG,SAASv+B,qBAAT,CAA+B3M,EAA/B,EAAmC;AAC9D,YAAImrC,KAAK,GAAGnrC,EAAE,KAAK2P,WAAnB;AACA,YAAIH,KAAK,GAAGq6B,IAAI,CAACsB,KAAK,GAAGf,SAAH,GAAe96B,SAAS,CAACtP,EAAD,CAA9B,CAAhB;AACA,YAAItO,MAAM,GAAG,EAAb;AACA,YAAIjD,CAAC,GAAG,CAAR;AACA,YAAI2E,GAAJ;;AACA,eAAOoc,KAAK,CAACrc,MAAN,GAAe1E,CAAtB,EAAyB;AACvB,cAAIsF,GAAG,CAACo2C,UAAD,EAAa/2C,GAAG,GAAGoc,KAAK,CAAC/gB,CAAC,EAAF,CAAxB,CAAH,KAAsC08C,KAAK,GAAGp3C,GAAG,CAAC4b,WAAD,EAAcvc,GAAd,CAAN,GAA2B,IAAtE,CAAJ,EAAiF1B,MAAM,CAACkL,IAAP,CAAYutC,UAAU,CAAC/2C,GAAD,CAAtB;AAClF;;AAAC,eAAO1B,MAAP;AACH,OATD,CA5HsD,CAuItD;;;AACA,UAAI,CAAC0zC,UAAL,EAAiB;AACft4B,QAAAA,OAAO,GAAG,SAASlc,QAAT,GAAkB;AAC1B,cAAI,gBAAgBkc,OAApB,EAA6B,MAAM7M,SAAS,CAAC,8BAAD,CAAf;AAC7B,cAAIhH,GAAG,GAAGtI,GAAG,CAAC4C,SAAS,CAACJ,MAAV,GAAmB,CAAnB,GAAuBI,SAAS,CAAC,CAAD,CAAhC,GAAsC6B,SAAvC,CAAb;;AACA,cAAIg2C,IAAI,GAAG,SAAPA,IAAO,CAAUz1C,KAAV,EAAiB;AAC1B,gBAAI,SAASga,WAAb,EAA0By7B,IAAI,CAACz8C,IAAL,CAAUy7C,SAAV,EAAqBz0C,KAArB;AAC1B,gBAAI5B,GAAG,CAAC,IAAD,EAAOi2C,MAAP,CAAH,IAAqBj2C,GAAG,CAAC,KAAKi2C,MAAL,CAAD,EAAe/wC,GAAf,CAA5B,EAAiD,KAAK+wC,MAAL,EAAa/wC,GAAb,IAAoB,KAApB;AACjDuxC,YAAAA,aAAa,CAAC,IAAD,EAAOvxC,GAAP,EAAYiK,UAAU,CAAC,CAAD,EAAIvN,KAAJ,CAAtB,CAAb;AACD,WAJD;;AAKA,cAAI8yC,WAAW,IAAI6B,MAAnB,EAA2BE,aAAa,CAAC76B,WAAD,EAAc1W,GAAd,EAAmB;AAAE7J,YAAAA,YAAY,EAAE,IAAhB;AAAsBmJ,YAAAA,GAAG,EAAE6yC;AAA3B,WAAnB,CAAb;AAC3B,iBAAOxwC,IAAI,CAAC3B,GAAD,CAAX;AACD,SAVD;;AAWA2U,QAAAA,QAAQ,CAACd,OAAO,CAAC9Y,SAAD,CAAR,EAAqB,UAArB,EAAiC,SAAShD,QAAT,GAAoB;AAC3D,iBAAO,KAAKizC,EAAZ;AACD,SAFO,CAAR;AAIAyF,QAAAA,KAAK,CAACppC,CAAN,GAAU0qC,yBAAV;AACApB,QAAAA,GAAG,CAACtpC,CAAJ,GAAQqqC,eAAR;AACAp8C,QAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,GAA4BmpC,OAAO,CAACnpC,CAAR,GAAY2qC,oBAAxC;AACA18C,QAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,GAA4BwqC,qBAA5B;AACAnB,QAAAA,KAAK,CAACrpC,CAAN,GAAU4qC,sBAAV;;AAEA,YAAIzC,WAAW,IAAI,CAACl6C,mBAAmB,CAAC,EAAD,CAAvC,EAA6C;AAC3Cqf,UAAAA,QAAQ,CAAC+B,WAAD,EAAc,sBAAd,EAAsCm7B,qBAAtC,EAA6D,IAA7D,CAAR;AACD;;AAEDj+B,QAAAA,MAAM,CAACvM,CAAP,GAAW,UAAUvR,IAAV,EAAgB;AACzB,iBAAO6L,IAAI,CAAC0uC,GAAG,CAACv6C,IAAD,CAAJ,CAAX;AACD,SAFD;AAGD;;AAEDkF,MAAAA,OAAO,CAACA,OAAO,CAACM,CAAR,GAAYN,OAAO,CAACc,CAApB,GAAwBd,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAAtC,EAAkD;AAAEx0C,QAAAA,MAAM,EAAEkc;AAAV,OAAlD,CAAP;;AAEA,WAAK,IAAIu+B,UAAU,GACjB;AACA,sHAFoB,CAGpBt0C,KAHoB,CAGd,GAHc,CAAjB,EAGSy0B,CAAC,GAAG,CAHlB,EAGqB6f,UAAU,CAACl4C,MAAX,GAAoBq4B,CAHzC;AAG4C8d,QAAAA,GAAG,CAAC+B,UAAU,CAAC7f,CAAC,EAAF,CAAX,CAAH;AAH5C;;AAKA,WAAK,IAAI8f,gBAAgB,GAAG/iC,KAAK,CAAC+gC,GAAG,CAAC54C,KAAL,CAA5B,EAAyCqtB,CAAC,GAAG,CAAlD,EAAqDutB,gBAAgB,CAACn4C,MAAjB,GAA0B4qB,CAA/E;AAAmFwrB,QAAAA,SAAS,CAAC+B,gBAAgB,CAACvtB,CAAC,EAAF,CAAjB,CAAT;AAAnF;;AAEA9pB,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAA1B,EAAsC,QAAtC,EAAgD;AACrD;AACA,eAAO,cAAUhyC,GAAV,EAAe;AACpB,iBAAOW,GAAG,CAACm2C,cAAD,EAAiB92C,GAAG,IAAI,EAAxB,CAAH,GACH82C,cAAc,CAAC92C,GAAD,CADX,GAEH82C,cAAc,CAAC92C,GAAD,CAAd,GAAsB0Z,OAAO,CAAC1Z,GAAD,CAFjC;AAGD,SANoD;AAOrD;AACAm4C,QAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBb,GAAhB,EAAqB;AAC3B,cAAI,CAACtkB,QAAQ,CAACskB,GAAD,CAAb,EAAoB,MAAMzqC,SAAS,CAACyqC,GAAG,GAAG,mBAAP,CAAf;;AACpB,eAAK,IAAIt3C,GAAT,IAAgB82C,cAAhB;AAAgC,gBAAIA,cAAc,CAAC92C,GAAD,CAAd,KAAwBs3C,GAA5B,EAAiC,OAAOt3C,GAAP;AAAjE;AACD,SAXoD;AAYrDo4C,QAAAA,SAAS,EAAE,qBAAY;AAAElB,UAAAA,MAAM,GAAG,IAAT;AAAgB,SAZY;AAarDmB,QAAAA,SAAS,EAAE,qBAAY;AAAEnB,UAAAA,MAAM,GAAG,KAAT;AAAiB;AAbW,OAAhD,CAAP;AAgBAr2C,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAA1B,EAAsC,QAAtC,EAAgD;AACrD;AACA/5B,QAAAA,MAAM,EAAEw/B,OAF6C;AAGrD;AACA17C,QAAAA,cAAc,EAAEw7C,eAJqC;AAKrD;AACAhhC,QAAAA,gBAAgB,EAAEihC,iBANmC;AAOrD;AACA53B,QAAAA,wBAAwB,EAAEg4B,yBAR2B;AASrD;AACAn4B,QAAAA,mBAAmB,EAAEo4B,oBAVgC;AAWrD;AACAt+B,QAAAA,qBAAqB,EAAEu+B;AAZ8B,OAAhD,CAAP,CAhMsD,CA+MtD;AACA;;AACA,UAAIQ,mBAAmB,GAAGrC,MAAM,CAAC,YAAY;AAAEM,QAAAA,KAAK,CAACrpC,CAAN,CAAQ,CAAR;AAAa,OAA5B,CAAhC;AAEArM,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAYq3C,mBAAzB,EAA8C,QAA9C,EAAwD;AAC7D/+B,QAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAA+B3M,EAA/B,EAAmC;AACxD,iBAAO2pC,KAAK,CAACrpC,CAAN,CAAQoP,QAAQ,CAAC1P,EAAD,CAAhB,CAAP;AACD;AAH4D,OAAxD,CAAP,CAnNsD,CAyNtD;;AACA8pC,MAAAA,KAAK,IAAI71C,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,IAAa,CAAC+wC,UAAD,IAAeiE,MAAM,CAAC,YAAY;AAC1E,YAAI50C,CAAC,GAAGqY,OAAO,EAAf,CAD0E,CAE1E;AACA;AACA;;AACA,eAAOi9B,UAAU,CAAC,CAACt1C,CAAD,CAAD,CAAV,IAAmB,QAAnB,IAA+Bs1C,UAAU,CAAC;AAAEr2C,UAAAA,CAAC,EAAEe;AAAL,SAAD,CAAV,IAAwB,IAAvD,IAA+Ds1C,UAAU,CAAC76C,MAAM,CAACuF,CAAD,CAAP,CAAV,IAAyB,IAA/F;AACD,OAN8D,CAAlC,CAAb,EAMX,MANW,EAMH;AACXkiB,QAAAA,SAAS,EAAE,SAASA,SAAT,CAAmB3W,EAAnB,EAAuB;AAChC,cAAI9D,IAAI,GAAG,CAAC8D,EAAD,CAAX;AACA,cAAIvR,CAAC,GAAG,CAAR;AACA,cAAIk3B,QAAJ,EAAcgmB,SAAd;;AACA,iBAAOp4C,SAAS,CAACJ,MAAV,GAAmB1E,CAA1B;AAA6ByN,YAAAA,IAAI,CAACU,IAAL,CAAUrJ,SAAS,CAAC9E,CAAC,EAAF,CAAnB;AAA7B;;AACAk9C,UAAAA,SAAS,GAAGhmB,QAAQ,GAAGzpB,IAAI,CAAC,CAAD,CAA3B;AACA,cAAI,CAAClK,QAAQ,CAAC2zB,QAAD,CAAT,IAAuB3lB,EAAE,KAAK5K,SAA9B,IAA2CgxB,QAAQ,CAACpmB,EAAD,CAAvD,EAA6D,OAN7B,CAMqC;;AACrE,cAAI,CAAC/O,OAAO,CAAC00B,QAAD,CAAZ,EAAwBA,QAAQ,GAAG,kBAAUvyB,GAAV,EAAeuC,KAAf,EAAsB;AACvD,gBAAI,OAAOg2C,SAAP,IAAoB,UAAxB,EAAoCh2C,KAAK,GAAGg2C,SAAS,CAACh9C,IAAV,CAAe,IAAf,EAAqByE,GAArB,EAA0BuC,KAA1B,CAAR;AACpC,gBAAI,CAACywB,QAAQ,CAACzwB,KAAD,CAAb,EAAsB,OAAOA,KAAP;AACvB,WAHuB;AAIxBuG,UAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUypB,QAAV;AACA,iBAAOokB,UAAU,CAACz0C,KAAX,CAAiBw0C,KAAjB,EAAwB5tC,IAAxB,CAAP;AACD;AAdU,OANG,CAAhB,CA1NsD,CAiPtD;;AACA4Q,MAAAA,OAAO,CAAC9Y,SAAD,CAAP,CAAmBi2C,YAAnB,KAAoC17C,mBAAmB,CAAC,EAAD,CAAnB,CAAwBue,OAAO,CAAC9Y,SAAD,CAA/B,EAA4Ci2C,YAA5C,EAA0Dn9B,OAAO,CAAC9Y,SAAD,CAAP,CAAmBgW,OAA7E,CAApC,CAlPsD,CAmPtD;;AACA8D,MAAAA,cAAc,CAAChB,OAAD,EAAU,QAAV,CAAd,CApPsD,CAqPtD;;AACAgB,MAAAA,cAAc,CAACxd,IAAD,EAAO,MAAP,EAAe,IAAf,CAAd,CAtPsD,CAuPtD;;AACAwd,MAAAA,cAAc,CAAC1d,MAAM,CAACsmB,IAAR,EAAc,MAAd,EAAsB,IAAtB,CAAd;AAGA;AAAO,KAlzQG;AAmzQV;;AACA;AAAO,cAASxoB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI66C,IAAI,GAAG76C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,MAAxB,CAAX;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIq9C,OAAO,GAAGr9C,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R,CAArC;;AACA,UAAIoI,EAAE,GAAG,CAAT;;AACA,UAAImjC,YAAY,GAAG38C,MAAM,CAAC28C,YAAP,IAAuB,YAAY;AACpD,eAAO,IAAP;AACD,OAFD;;AAGA,UAAIC,MAAM,GAAG,CAACv9C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AAChD,eAAOs9C,YAAY,CAAC38C,MAAM,CAAC68C,iBAAP,CAAyB,EAAzB,CAAD,CAAnB;AACD,OAFa,CAAd;;AAGA,UAAIC,OAAO,GAAG,SAAVA,OAAU,CAAUhsC,EAAV,EAAc;AAC1B4rC,QAAAA,OAAO,CAAC5rC,EAAD,EAAKopC,IAAL,EAAW;AAAEzzC,UAAAA,KAAK,EAAE;AACzBlH,YAAAA,CAAC,EAAE,MAAM,EAAEia,EADc;AACV;AACfwV,YAAAA,CAAC,EAAE,EAFsB,CAEV;;AAFU;AAAT,SAAX,CAAP;AAID,OALD;;AAMA,UAAI+tB,OAAO,GAAG,SAAVA,OAAU,CAAUjsC,EAAV,EAAcqL,MAAd,EAAsB;AAClC;AACA,YAAI,CAACrZ,QAAQ,CAACgO,EAAD,CAAb,EAAmB,OAAO,SAAOA,EAAP,KAAa,QAAb,GAAwBA,EAAxB,GAA6B,CAAC,OAAOA,EAAP,IAAa,QAAb,GAAwB,GAAxB,GAA8B,GAA/B,IAAsCA,EAA1E;;AACnB,YAAI,CAACjM,GAAG,CAACiM,EAAD,EAAKopC,IAAL,CAAR,EAAoB;AAClB;AACA,cAAI,CAACyC,YAAY,CAAC7rC,EAAD,CAAjB,EAAuB,OAAO,GAAP,CAFL,CAGlB;;AACA,cAAI,CAACqL,MAAL,EAAa,OAAO,GAAP,CAJK,CAKlB;;AACA2gC,UAAAA,OAAO,CAAChsC,EAAD,CAAP,CANkB,CAOpB;AACC;;AAAC,eAAOA,EAAE,CAACopC,IAAD,CAAF,CAAS36C,CAAhB;AACH,OAZD;;AAaA,UAAIy9C,OAAO,GAAG,SAAVA,OAAU,CAAUlsC,EAAV,EAAcqL,MAAd,EAAsB;AAClC,YAAI,CAACtX,GAAG,CAACiM,EAAD,EAAKopC,IAAL,CAAR,EAAoB;AAClB;AACA,cAAI,CAACyC,YAAY,CAAC7rC,EAAD,CAAjB,EAAuB,OAAO,IAAP,CAFL,CAGlB;;AACA,cAAI,CAACqL,MAAL,EAAa,OAAO,KAAP,CAJK,CAKlB;;AACA2gC,UAAAA,OAAO,CAAChsC,EAAD,CAAP,CANkB,CAOpB;AACC;;AAAC,eAAOA,EAAE,CAACopC,IAAD,CAAF,CAASlrB,CAAhB;AACH,OAVD,CAhCsD,CA2CtD;;;AACA,UAAIiuB,QAAQ,GAAG,SAAXA,QAAW,CAAUnsC,EAAV,EAAc;AAC3B,YAAI8rC,MAAM,IAAItJ,IAAI,CAAC4J,IAAf,IAAuBP,YAAY,CAAC7rC,EAAD,CAAnC,IAA2C,CAACjM,GAAG,CAACiM,EAAD,EAAKopC,IAAL,CAAnD,EAA+D4C,OAAO,CAAChsC,EAAD,CAAP;AAC/D,eAAOA,EAAP;AACD,OAHD;;AAIA,UAAIwiC,IAAI,GAAGt0C,MAAM,CAACD,OAAP,GAAiB;AAC1BikB,QAAAA,GAAG,EAAEk3B,IADqB;AAE1BgD,QAAAA,IAAI,EAAE,KAFoB;AAG1BH,QAAAA,OAAO,EAAEA,OAHiB;AAI1BC,QAAAA,OAAO,EAAEA,OAJiB;AAK1BC,QAAAA,QAAQ,EAAEA;AALgB,OAA5B;AASA;AAAO,KA72QG;AA82QV;;AACA;AAAO,cAASj+C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIk1C,OAAO,GAAGl1C,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIq6C,IAAI,GAAGr6C,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIukB,GAAG,GAAGvkB,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAItO,MAAM,GAAG+xC,OAAO,CAACzjC,EAAD,CAApB;AACA,YAAIipC,UAAU,GAAGL,IAAI,CAACtoC,CAAtB;;AACA,YAAI2oC,UAAJ,EAAgB;AACd,cAAIjiB,OAAO,GAAGiiB,UAAU,CAACjpC,EAAD,CAAxB;AACA,cAAIkpC,MAAM,GAAGp2B,GAAG,CAACxS,CAAjB;AACA,cAAI7R,CAAC,GAAG,CAAR;AACA,cAAI2E,GAAJ;;AACA,iBAAO4zB,OAAO,CAAC7zB,MAAR,GAAiB1E,CAAxB;AAA2B,gBAAIy6C,MAAM,CAACv6C,IAAP,CAAYqR,EAAZ,EAAgB5M,GAAG,GAAG4zB,OAAO,CAACv4B,CAAC,EAAF,CAA7B,CAAJ,EAAyCiD,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ;AAApE;AACD;;AAAC,eAAO1B,MAAP;AACH,OAVD;AAaA;;AAAO,KAl4QG;AAm4QV;;AACA;AAAO,cAASxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIsd,GAAG,GAAGtd,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBmN,KAAK,CAACnK,OAAN,IAAiB,SAASA,OAAT,CAAiBu+B,GAAjB,EAAsB;AACtD,eAAO3jB,GAAG,CAAC2jB,GAAD,CAAH,IAAY,OAAnB;AACD,OAFD;AAKA;;AAAO,KA74QG;AA84QV;;AACA;AAAO,cAASthC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIs7C,IAAI,GAAGt7C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAnC;;AACA,UAAItP,QAAQ,GAAG,GAAGA,QAAlB;AAEA,UAAIq7C,WAAW,GAAG,QAAOh8C,MAAP,0CAAOA,MAAP,MAAiB,QAAjB,IAA6BA,MAA7B,IAAuCnB,MAAM,CAAC2jB,mBAA9C,GACd3jB,MAAM,CAAC2jB,mBAAP,CAA2BxiB,MAA3B,CADc,GACuB,EADzC;;AAGA,UAAIi8C,cAAc,GAAG,SAAjBA,cAAiB,CAAUtsC,EAAV,EAAc;AACjC,YAAI;AACF,iBAAO6pC,IAAI,CAAC7pC,EAAD,CAAX;AACD,SAFD,CAEE,OAAOpH,CAAP,EAAU;AACV,iBAAOyzC,WAAW,CAAC3lC,KAAZ,EAAP;AACD;AACF,OAND;;AAQAxY,MAAAA,MAAM,CAACD,OAAP,CAAeqS,CAAf,GAAmB,SAASuS,mBAAT,CAA6B7S,EAA7B,EAAiC;AAClD,eAAOqsC,WAAW,IAAIr7C,QAAQ,CAACrC,IAAT,CAAcqR,EAAd,KAAqB,iBAApC,GAAwDssC,cAAc,CAACtsC,EAAD,CAAtE,GAA6E6pC,IAAI,CAACv6B,SAAS,CAACtP,EAAD,CAAV,CAAxF;AACD,OAFD;AAKA;;AAAO,KAt6QG;AAu6QV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,eAAxB;AAGA;;AAAO,KA76QG;AA86QV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAxB;AAGA;;AAAO,KAp7QG;AAq7QV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA17QG;AA27QV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8Bq9C,cAA/C;AAGA;AAAO,KAl8QG;AAm8QV;;AACA;AAAO,cAASr+C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAT,EAAY,QAAZ,EAAsB;AAAE83C,QAAAA,cAAc,EAAEh+C,mBAAmB,CAAC,GAAD,CAAnB,CAAyBgK;AAA3C,OAAtB,CAAP;AAGA;AAAO,KA38QG;AA48QV;;AACA;AAAO,cAASrK,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AACA;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIi+C,KAAK,GAAG,SAARA,KAAQ,CAAUjsC,CAAV,EAAanC,KAAb,EAAoB;AAC9B8B,QAAAA,QAAQ,CAACK,CAAD,CAAR;AACA,YAAI,CAACvO,QAAQ,CAACoM,KAAD,CAAT,IAAoBA,KAAK,KAAK,IAAlC,EAAwC,MAAM6B,SAAS,CAAC7B,KAAK,GAAG,2BAAT,CAAf;AACzC,OAHD;;AAIAlQ,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfsK,QAAAA,GAAG,EAAErJ,MAAM,CAACq9C,cAAP,KAA0B,eAAe,EAAf,GAAoB;AACjD,kBAAU5yC,IAAV,EAAgB8yC,KAAhB,EAAuBl0C,GAAvB,EAA4B;AAC1B,cAAI;AACFA,YAAAA,GAAG,GAAGhK,mBAAmB,CAAC,EAAD,CAAnB,CAAwBiC,QAAQ,CAAC7B,IAAjC,EAAuCJ,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,CAA0BpR,MAAM,CAACW,SAAjC,EAA4C,WAA5C,EAAyD0I,GAAhG,EAAqG,CAArG,CAAN;AACAA,YAAAA,GAAG,CAACoB,IAAD,EAAO,EAAP,CAAH;AACA8yC,YAAAA,KAAK,GAAG,EAAE9yC,IAAI,YAAYyB,KAAlB,CAAR;AACD,WAJD,CAIE,OAAOxC,CAAP,EAAU;AAAE6zC,YAAAA,KAAK,GAAG,IAAR;AAAe;;AAC7B,iBAAO,SAASF,cAAT,CAAwBhsC,CAAxB,EAA2BnC,KAA3B,EAAkC;AACvCouC,YAAAA,KAAK,CAACjsC,CAAD,EAAInC,KAAJ,CAAL;AACA,gBAAIquC,KAAJ,EAAWlsC,CAAC,CAACgT,SAAF,GAAcnV,KAAd,CAAX,KACK7F,GAAG,CAACgI,CAAD,EAAInC,KAAJ,CAAH;AACL,mBAAOmC,CAAP;AACD,WALD;AAMD,SAZD,CAYE,EAZF,EAYM,KAZN,CAD6B,GAadnL,SAbZ,CADU;AAefo3C,QAAAA,KAAK,EAAEA;AAfQ,OAAjB;AAmBA;AAAO,KA1+QG;AA2+QV;;AACA;AAAO,cAASt+C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAh/QG;AAi/QV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACA,UAAIivB,OAAO,GAAGjvB,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAArC;;AACAhB,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASod,MAAT,CAAgB1W,CAAhB,EAAmBob,CAAnB,EAAsB;AACrC,eAAOyN,OAAO,CAACnS,MAAR,CAAe1W,CAAf,EAAkBob,CAAlB,CAAP;AACD,OAFD;AAKA;;AAAO,KA3/QG;AA4/QV;;AACA;AAAO,cAAS7hB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC,CAFsD,CAGtD;;;AACA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAT,EAAY,QAAZ,EAAsB;AAAE4W,QAAAA,MAAM,EAAE9c,mBAAmB,CAAC,EAAD;AAA7B,OAAtB,CAAP;AAGA;AAAO,KApgRG;AAqgRV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI+2C,SAAS,GAAGn+C,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIo+C,UAAU,GAAGjjC,sBAAsB,CAACgjC,SAAD,CAAvC;;AAEA,eAAShjC,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB0+C,UAAU,WAA5B;AACA;;;;;AAKAz+C,MAAAA,MAAM,CAACD,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB;AAEA;AAAO,KA7hRG;AA8hRV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAIi3C,cAAc,GAAG,YAAY;AAAE,iBAASC,aAAT,CAAuBrxC,GAAvB,EAA4B/M,CAA5B,EAA+B;AAAE,cAAIq+C,IAAI,GAAG,EAAX;AAAe,cAAIpH,EAAE,GAAG,IAAT;AAAe,cAAIsB,EAAE,GAAG,KAAT;AAAgB,cAAI+F,EAAE,GAAG33C,SAAT;;AAAoB,cAAI;AAAE,iBAAK,IAAIgT,EAAE,GAAG5M,GAAG,CAAC5K,MAAM,CAACgf,QAAR,CAAH,EAAT,EAAiCm2B,EAAtC,EAA0C,EAAEL,EAAE,GAAG,CAACK,EAAE,GAAG39B,EAAE,CAACkG,IAAH,EAAN,EAAiBhG,IAAxB,CAA1C,EAAyEo9B,EAAE,GAAG,IAA9E,EAAoF;AAAEoH,cAAAA,IAAI,CAAClwC,IAAL,CAAUmpC,EAAE,CAACpwC,KAAb;;AAAqB,kBAAIlH,CAAC,IAAIq+C,IAAI,CAAC35C,MAAL,KAAgB1E,CAAzB,EAA4B;AAAQ;AAAE,WAAvJ,CAAwJ,OAAO6mB,GAAP,EAAY;AAAE0xB,YAAAA,EAAE,GAAG,IAAL;AAAW+F,YAAAA,EAAE,GAAGz3B,GAAL;AAAW,WAA5L,SAAqM;AAAE,gBAAI;AAAE,kBAAI,CAACowB,EAAD,IAAOt9B,EAAE,CAAC,QAAD,CAAb,EAAyBA,EAAE,CAAC,QAAD,CAAF;AAAiB,aAAhD,SAAyD;AAAE,kBAAI4+B,EAAJ,EAAQ,MAAM+F,EAAN;AAAW;AAAE;;AAAC,iBAAOD,IAAP;AAAc;;AAAC,eAAO,UAAUtxC,GAAV,EAAe/M,CAAf,EAAkB;AAAE,cAAI2M,KAAK,CAACnK,OAAN,CAAcuK,GAAd,CAAJ,EAAwB;AAAE,mBAAOA,GAAP;AAAa,WAAvC,MAA6C,IAAI5K,MAAM,CAACgf,QAAP,IAAmB1gB,MAAM,CAACsM,GAAD,CAA7B,EAAoC;AAAE,mBAAOqxC,aAAa,CAACrxC,GAAD,EAAM/M,CAAN,CAApB;AAA+B,WAArE,MAA2E;AAAE,kBAAM,IAAIwR,SAAJ,CAAc,sDAAd,CAAN;AAA8E;AAAE,SAArO;AAAwO,OAAhoB,EAArB;;AAEA,UAAI+sC,QAAQ,GAAG99C,MAAM,CAAC2yB,MAAP,IAAiB,UAAU5sB,MAAV,EAAkB;AAAE,aAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAAE,cAAI0F,MAAM,GAAGZ,SAAS,CAAC9E,CAAD,CAAtB;;AAA2B,eAAK,IAAI2E,GAAT,IAAgBe,MAAhB,EAAwB;AAAE,gBAAIjF,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCwF,MAArC,EAA6Cf,GAA7C,CAAJ,EAAuD;AAAE6B,cAAAA,MAAM,CAAC7B,GAAD,CAAN,GAAce,MAAM,CAACf,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,eAAO6B,MAAP;AAAgB,OAAhQ;;AAEA,UAAIg4C,YAAY,GAAG,YAAY;AAAE,iBAAStjC,gBAAT,CAA0B1U,MAA1B,EAAkCuF,KAAlC,EAAyC;AAAE,eAAK,IAAI/L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+L,KAAK,CAACrH,MAA1B,EAAkC1E,CAAC,EAAnC,EAAuC;AAAE,gBAAImb,UAAU,GAAGpP,KAAK,CAAC/L,CAAD,CAAtB;AAA2Bmb,YAAAA,UAAU,CAACva,UAAX,GAAwBua,UAAU,CAACva,UAAX,IAAyB,KAAjD;AAAwDua,YAAAA,UAAU,CAACxa,YAAX,GAA0B,IAA1B;AAAgC,gBAAI,WAAWwa,UAAf,EAA2BA,UAAU,CAAC5B,QAAX,GAAsB,IAAtB;AAA4B9Y,YAAAA,MAAM,CAACC,cAAP,CAAsB8F,MAAtB,EAA8B2U,UAAU,CAACxW,GAAzC,EAA8CwW,UAA9C;AAA4D;AAAE;;AAAC,eAAO,UAAUL,WAAV,EAAuBM,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,cAAID,UAAJ,EAAgBF,gBAAgB,CAACJ,WAAW,CAAC1Z,SAAb,EAAwBga,UAAxB,CAAhB;AAAqD,cAAIC,WAAJ,EAAiBH,gBAAgB,CAACJ,WAAD,EAAcO,WAAd,CAAhB;AAA4C,iBAAOP,WAAP;AAAqB,SAAhN;AAAmN,OAA9hB,EAAnB;;AAEA,UAAI+S,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA/tB,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AAEA,UAAI2+C,cAAc,GAAG3+C,mBAAmB,CAAC,GAAD,CAAxC;;AAEA,UAAI4+C,eAAe,GAAGzjC,sBAAsB,CAACwjC,cAAD,CAA5C;;AAEA,UAAIE,gBAAgB,GAAG7+C,mBAAmB,CAAC,GAAD,CAA1C;;AAEA,UAAI8+C,QAAQ,GAAG9+C,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,eAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,eAASq6C,eAAT,CAAyBhkC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,YAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,gBAAM,IAAItJ,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,eAASstC,0BAAT,CAAoCh9C,IAApC,EAA0C5B,IAA1C,EAAgD;AAAE,YAAI,CAAC4B,IAAL,EAAW;AAAE,gBAAM,IAAI+hB,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,eAAO3jB,IAAI,KAAK,SAAOA,IAAP,MAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0E4B,IAAjF;AAAwF;;AAEhP,eAASi9C,SAAT,CAAmBn6B,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,YAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,gBAAM,IAAIrT,SAAJ,CAAc,sEAAoEqT,UAApE,CAAd,CAAN;AAAsG;;AAACD,QAAAA,QAAQ,CAACxjB,SAAT,GAAqBX,MAAM,CAACmc,MAAP,CAAciI,UAAU,IAAIA,UAAU,CAACzjB,SAAvC,EAAkD;AAAEwB,UAAAA,WAAW,EAAE;AAAEsE,YAAAA,KAAK,EAAE0d,QAAT;AAAmBhkB,YAAAA,UAAU,EAAE,KAA/B;AAAsC2Y,YAAAA,QAAQ,EAAE,IAAhD;AAAsD5Y,YAAAA,YAAY,EAAE;AAApE;AAAf,SAAlD,CAArB;AAAqK,YAAIkkB,UAAJ,EAAgBpkB,MAAM,CAACq9C,cAAP,GAAwBr9C,MAAM,CAACq9C,cAAP,CAAsBl5B,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACE,SAAT,GAAqBD,UAA3F;AAAwG;AAC9e;;;;;;;AAOA;;;AAEA,UAAIm6B,aAAa,GAAG,CAAC,GAAGL,gBAAgB,CAACM,oBAArB,GAApB;AACA,UAAIC,gBAAgB,GAAG,CAACF,aAAxB;;AAEA,eAASG,MAAT,CAAgBC,SAAhB,EAA2B;AACzB,eAAOA,SAAS,CAACz6C,GAAV,IAAiB,EAAxB;AACD;;AAED,UAAI06C,QAAQ,GAAG,UAAU7V,UAAV,EAAsB;AACnCuV,QAAAA,SAAS,CAACM,QAAD,EAAW7V,UAAX,CAAT;;AAEA,iBAAS6V,QAAT,GAAoB;AAClB,cAAItxB,IAAJ;;AAEA,cAAIuxB,KAAJ,EAAW7V,KAAX,EAAkB8V,IAAlB;;AAEAV,UAAAA,eAAe,CAAC,IAAD,EAAOQ,QAAP,CAAf;;AAEA,eAAK,IAAIn4B,IAAI,GAAGpiB,SAAS,CAACJ,MAArB,EAA6B+I,IAAI,GAAGd,KAAK,CAACua,IAAD,CAAzC,EAAiDC,IAAI,GAAG,CAA7D,EAAgEA,IAAI,GAAGD,IAAvE,EAA6EC,IAAI,EAAjF,EAAqF;AACnF1Z,YAAAA,IAAI,CAAC0Z,IAAD,CAAJ,GAAariB,SAAS,CAACqiB,IAAD,CAAtB;AACD;;AAED,iBAAOo4B,IAAI,IAAID,KAAK,IAAI7V,KAAK,GAAGqV,0BAA0B,CAAC,IAAD,EAAO,CAAC/wB,IAAI,GAAGsxB,QAAQ,CAACv6B,SAAT,IAAsBrkB,MAAM,CAAC6e,cAAP,CAAsB+/B,QAAtB,CAA9B,EAA+Dn/C,IAA/D,CAAoE2G,KAApE,CAA0EknB,IAA1E,EAAgF,CAAC,IAAD,EAAOnhB,MAAP,CAAca,IAAd,CAAhF,CAAP,CAAlC,EAAgJg8B,KAApJ,CAAL,EAAiKA,KAAK,CAAC/4B,KAAN,GAAc;AAC5LhG,YAAAA,QAAQ,EAAEmjB,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwBk9B,KAAK,CAAC19B,KAAN,CAAYrB,QAApC,EAA8C4B,GAA9C,CAAkD,UAAUyB,OAAV,EAAmB;AAC7E,qBAAOwwC,QAAQ,CAAC,EAAD,EAAKxwC,OAAL,EAAc;AAC3BA,gBAAAA,OAAO,EAAEA,OADkB;AAE3ByxC,gBAAAA,SAAS,EAAE;AAFgB,eAAd,CAAf;AAID,aALS;AADkL,WAA/K,EAOZ/V,KAAK,CAACgW,YAAN,GAAqB,EAPT,EAOahW,KAAK,CAACiW,UAAN,GAAmB;AAC7CC,YAAAA,OAAO,EAAE,IADoC;AAE7CC,YAAAA,WAAW,EAAE;AAFgC,WAPhC,EAUZnW,KAAK,CAACoW,qBAAN,GAA8B;AAC/BF,YAAAA,OAAO,EAAE;AADsB,WAVlB,EAYZlW,KAAK,CAACqW,mBAAN,GAA4B,CAZhB,EAYmBrW,KAAK,CAACsW,iBAAN,GAA0B,EAZ7C,EAYiDtW,KAAK,CAACuW,YAAN,GAAqB,YAAY;AAC/F,gBAAIC,eAAe,GAAGxW,KAAK,CAAC/4B,KAAN,CAAYhG,QAAZ,CAAqB+iB,MAArB,CAA4Bgc,KAAK,CAACyW,yBAAlC,CAAtB;;AAEAD,YAAAA,eAAe,CAAC17C,OAAhB,CAAwB,UAAU20B,KAAV,EAAiBp4B,CAAjB,EAAoB;AAC1C2oC,cAAAA,KAAK,CAACqW,mBAAN,IAA6B,CAA7B;;AACArW,cAAAA,KAAK,CAACsW,iBAAN,CAAwB5xC,IAAxB,CAA6BgxC,MAAM,CAACjmB,KAAD,CAAnC;;AACAuQ,cAAAA,KAAK,CAAC0W,YAAN,CAAmBjnB,KAAnB,EAA0Bp4B,CAA1B;AACD,aAJD;;AAMA,gBAAI,OAAO2oC,KAAK,CAAC19B,KAAN,CAAYq0C,UAAnB,KAAkC,UAAtC,EAAkD;AAChD3W,cAAAA,KAAK,CAAC4W,gBAAN,CAAuB5W,KAAK,CAAC19B,KAAN,CAAYq0C,UAAnC;AACD;AACF,WAxBc,EAwBZ3W,KAAK,CAACyW,yBAAN,GAAkC,UAAUhnB,KAAV,EAAiB;AACpD;AACA;AACA,gBAAI,CAACimB,MAAM,CAACjmB,KAAD,CAAX,EAAoB;AAClB,qBAAO,KAAP;AACD;;AAED,gBAAIkmB,SAAS,GAAG3V,KAAK,CAAC6W,YAAN,CAAmBnB,MAAM,CAACjmB,KAAD,CAAzB,CAAhB;;AACA,gBAAIqnB,YAAY,GAAGnB,SAAS,CAACO,OAA7B;AACA,gBAAIa,gBAAgB,GAAGpB,SAAS,CAACQ,WAAjC;AACA,gBAAIa,iBAAiB,GAAGhX,KAAK,CAACiW,UAAN,CAAiBE,WAAzC;;AAEA,gBAAI,CAACW,YAAL,EAAmB;AACjB,qBAAO,KAAP;AACD;;AAED,gBAAIG,WAAW,GAAGjX,KAAK,CAAC19B,KAAxB;AAAA,gBACIkjC,eAAe,GAAGyR,WAAW,CAACzR,eADlC;AAAA,gBAEIC,cAAc,GAAGwR,WAAW,CAACxR,cAFjC;AAAA,gBAGIC,cAAc,GAAGuR,WAAW,CAACvR,cAHjC;AAAA,gBAIIwR,WAAW,GAAGD,WAAW,CAACC,WAJ9B;AAOA,gBAAIC,wBAAwB,GAAG1nB,KAAK,CAACsmB,SAAN,IAAmBvQ,eAAlD;AACA,gBAAI4R,uBAAuB,GAAG3nB,KAAK,CAAC4nB,QAAN,IAAkB5R,cAAhD;AACA,gBAAI6R,sBAAsB,GAAG7nB,KAAK,CAAC8nB,OAAN,IAAiB7R,cAA9C;;AAEA,gBAAIyR,wBAAwB,IAAIC,uBAA5B,IAAuDE,sBAA3D,EAAmF;AACjF,qBAAO,IAAP;AACD,aA7BmD,CA+BpD;AACA;;;AAEA,gBAAIE,iBAAiB,GAAG,CAAC,GAAGtC,gBAAgB,CAACuC,gBAArB,EAAuC;AAC7DX,cAAAA,YAAY,EAAEA,YAD+C;AAE7DC,cAAAA,gBAAgB,EAAEA,gBAF2C;AAG7DC,cAAAA,iBAAiB,EAAEA,iBAH0C;AAI7DE,cAAAA,WAAW,EAAEA;AAJgD,aAAvC,CAAxB;AAAA,gBAMIQ,kBAAkB,GAAGhD,cAAc,CAAC8C,iBAAD,EAAoB,CAApB,CANvC;AAAA,gBAOIG,EAAE,GAAGD,kBAAkB,CAAC,CAAD,CAP3B;AAAA,gBAQIE,EAAE,GAAGF,kBAAkB,CAAC,CAAD,CAR3B;;AAUA,mBAAOC,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAA1B;AACD,WArEc,EAqEZ/B,KArEQ,CAAJ,EAqEIR,0BAA0B,CAACrV,KAAD,EAAQ8V,IAAR,CArErC;AAsED,SApFkC,CAqFnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;;;AAGAf,QAAAA,YAAY,CAACa,QAAD,EAAW,CAAC;AACtB16C,UAAAA,GAAG,EAAE,mBADiB;AAEtBuC,UAAAA,KAAK,EAAE,SAAS8B,iBAAT,GAA6B;AAClC;AACA;AACA,gBAAIs4C,iBAAiB,GAAG,KAAKv1C,KAAL,CAAWkjC,eAAX,IAA8B,CAAC,KAAKsS,mBAAL,CAAyB,KAAKx1C,KAA9B,CAAvD;;AAEA,gBAAIu1C,iBAAJ,EAAuB;AACrB,mBAAKE,gBAAL;AACA,mBAAKxB,YAAL;AACD;AACF;AAXqB,SAAD,EAYpB;AACDr7C,UAAAA,GAAG,EAAE,2BADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0B,yBAAT,CAAmC64C,SAAnC,EAA8C;AACnD;AACA;AACA;AACA;AACA,iBAAKC,uBAAL,GALmD,CAOnD;;AACA,gBAAIC,YAAY,GAAG9zB,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwBk1C,SAAS,CAAC/2C,QAAlC,CAAnB,CARmD,CAUnD;AACA;AACA;AACA;AACA;AACA;;;AACA,iBAAKoG,QAAL,CAAc;AACZpG,cAAAA,QAAQ,EAAE,KAAK62C,mBAAL,CAAyBE,SAAzB,IAAsCE,YAAY,CAACr1C,GAAb,CAAiB,UAAUyB,OAAV,EAAmB;AAClF,uBAAOwwC,QAAQ,CAAC,EAAD,EAAKxwC,OAAL,EAAc;AAAEA,kBAAAA,OAAO,EAAEA;AAAX,iBAAd,CAAf;AACD,eAF+C,CAAtC,GAEL,KAAK6zC,0BAAL,CAAgCD,YAAhC;AAHO,aAAd;AAKD;AAvBA,SAZoB,EAoCpB;AACDh9C,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS4B,kBAAT,CAA4B+1B,aAA5B,EAA2C;AAChD;AACA;AACA;AACA;AACA;AACA,gBAAIgjB,eAAe,GAAGh0B,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwB,KAAKR,KAAL,CAAWrB,QAAnC,EAA6C4B,GAA7C,CAAiD,UAAUjM,CAAV,EAAa;AAClF,qBAAOA,CAAC,CAACsE,GAAT;AACD,aAFqB,CAAtB;;AAGA,gBAAIm9C,gBAAgB,GAAGj0B,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwBsyB,aAAa,CAACn0B,QAAtC,EAAgD4B,GAAhD,CAAoD,UAAUjM,CAAV,EAAa;AACtF,qBAAOA,CAAC,CAACsE,GAAT;AACD,aAFsB,CAAvB;;AAIA,gBAAI28C,iBAAiB,GAAG,CAAC,CAAC,GAAG1C,QAAQ,CAACpgC,WAAb,EAA0BqjC,eAA1B,EAA2CC,gBAA3C,CAAD,IAAiE,CAAC,KAAKP,mBAAL,CAAyB,KAAKx1C,KAA9B,CAA1F;;AAEA,gBAAIu1C,iBAAJ,EAAuB;AACrB,mBAAKE,gBAAL;AACA,mBAAKxB,YAAL;AACD;AACF;AArBA,SApCoB,EA0DpB;AACDr7C,UAAAA,GAAG,EAAE,4BADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS06C,0BAAT,CAAoCD,YAApC,EAAkD;AACvD,gBAAItR,MAAM,GAAG,IAAb,CADuD,CAGvD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,gBAAI0R,eAAe,GAAGJ,YAAY,CAACr1C,GAAb,CAAiB,UAAU01C,SAAV,EAAqB;AAC1D,kBAAI9oB,KAAK,GAAGmX,MAAM,CAAC4R,cAAP,CAAsBD,SAAS,CAACr9C,GAAV,IAAiB,EAAvC,CAAZ,CAD0D,CAG1D;AACA;;;AACA,kBAAIu9C,UAAU,GAAG,CAAChpB,KAAD,IAAUA,KAAK,CAAC8nB,OAAjC;AAEA,qBAAOzC,QAAQ,CAAC,EAAD,EAAKyD,SAAL,EAAgB;AAAEj0C,gBAAAA,OAAO,EAAEi0C,SAAX;AAAsBlB,gBAAAA,QAAQ,EAAEoB;AAAhC,eAAhB,CAAf;AACD,aARqB,CAAtB,CAXuD,CAqBvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAIC,oBAAoB,GAAG,CAA3B;AACA,iBAAKzxC,KAAL,CAAWhG,QAAX,CAAoBnG,OAApB,CAA4B,UAAU20B,KAAV,EAAiBhoB,KAAjB,EAAwB;AAClD,kBAAIkxC,SAAS,GAAG,CAACT,YAAY,CAACU,IAAb,CAAkB,UAAUC,KAAV,EAAiB;AAClD,oBAAI39C,GAAG,GAAG29C,KAAK,CAAC39C,GAAhB;AACA,uBAAOA,GAAG,KAAKw6C,MAAM,CAACjmB,KAAD,CAArB;AACD,eAHgB,CAAjB,CADkD,CAMlD;AACA;;AACA,kBAAI,CAACkpB,SAAD,IAAc,CAAC/R,MAAM,CAACtkC,KAAP,CAAaojC,cAAhC,EAAgD;;AAEhD,kBAAI6S,SAAS,GAAGzD,QAAQ,CAAC,EAAD,EAAKrlB,KAAL,EAAY;AAAE8nB,gBAAAA,OAAO,EAAE;AAAX,eAAZ,CAAxB;;AACA,kBAAIuB,cAAc,GAAGrxC,KAAK,GAAGixC,oBAA7B;AAEAJ,cAAAA,eAAe,CAAC5jB,MAAhB,CAAuBokB,cAAvB,EAAuC,CAAvC,EAA0CP,SAA1C;AACAG,cAAAA,oBAAoB,IAAI,CAAxB;AACD,aAfD;AAiBA,mBAAOJ,eAAP;AACD;AAxDA,SA1DoB,EAmHpB;AACDp9C,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASs6C,gBAAT,GAA4B;AACjC,gBAAIjR,MAAM,GAAG,IAAb,CADiC,CAGjC;AACA;AACA;AACA;AACA;;;AAEA,gBAAIiS,MAAM,GAAG,KAAKz2C,KAAlB;AAAA,gBACIojC,cAAc,GAAGqT,MAAM,CAACrT,cAD5B;AAAA,gBAEIsT,uBAAuB,GAAGD,MAAM,CAACC,uBAFrC;AAAA,gBAGI9B,WAAW,GAAG6B,MAAM,CAAC7B,WAHzB,CATiC,CAcjC;AACA;;AAEA,gBAAIxR,cAAJ,EAAoB;AAClB,kBAAIuT,eAAe,GAAG,KAAKhyC,KAAL,CAAWhG,QAAX,CAAoB+iB,MAApB,CAA2B,UAAUyL,KAAV,EAAiB;AAChE,uBAAOA,KAAK,CAAC8nB,OAAb;AACD,eAFqB,CAAtB;AAIA0B,cAAAA,eAAe,CAACn+C,OAAhB,CAAwB,UAAUo+C,YAAV,EAAwB;AAC9C,oBAAIvD,SAAS,GAAG7O,MAAM,CAAC+P,YAAP,CAAoBnB,MAAM,CAACwD,YAAD,CAA1B,CAAhB,CAD8C,CAG9C;AACA;;;AACA,oBAAIvD,SAAS,CAACQ,WAAd,EAA2B;AACzB,mBAAC,GAAGjB,gBAAgB,CAACiE,qBAArB,EAA4CxD,SAA5C,EAAuD7O,MAAM,CAACxkC,KAAP,CAAa82C,iBAApE;AACD;AACF,eARD;;AAUA,kBAAIJ,uBAAuB,IAAI,KAAK5C,qBAAL,CAA2BF,OAA1D,EAAmE;AACjE,iBAAC,GAAGhB,gBAAgB,CAACmE,uBAArB,EAA8C;AAC5CnD,kBAAAA,OAAO,EAAE,KAAKE,qBAAL,CAA2BF,OADQ;AAE5CD,kBAAAA,UAAU,EAAE,KAAKA,UAF2B;AAG5CiB,kBAAAA,WAAW,EAAEA;AAH+B,iBAA9C;AAKD;AACF,aAvCgC,CAyCjC;AACA;AACA;;;AACA,iBAAKjwC,KAAL,CAAWhG,QAAX,CAAoBnG,OAApB,CAA4B,UAAU20B,KAAV,EAAiB;AAC3C,kBAAI6pB,aAAa,GAAGxS,MAAM,CAAC+P,YAAP,CAAoBnB,MAAM,CAACjmB,KAAD,CAA1B,CAApB;AAAA,kBACIymB,OAAO,GAAGoD,aAAa,CAACpD,OAD5B,CAD2C,CAI3C;;;AAGA,kBAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,kBAAI,CAACzmB,KAAK,CAAC4nB,QAAP,IAAmB,CAAC5nB,KAAK,CAAC8nB,OAA9B,EAAuC;AACrC,iBAAC,GAAGrC,gBAAgB,CAACqE,oBAArB,EAA2C;AACzCrD,kBAAAA,OAAO,EAAEA,OADgC;AAEzCsD,kBAAAA,MAAM,EAAE;AACNC,oBAAAA,UAAU,EAAE;AADN;AAFiC,iBAA3C;AAMD;AACF,aAnBD;AAoBD;AAlEA,SAnHoB,EAsLpB;AACDv+C,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASi5C,YAAT,CAAsBjnB,KAAtB,EAA6BhoB,KAA7B,EAAoC;AACzC,gBAAIu/B,MAAM,GAAG,IAAb;;AAEA,gBAAI0S,cAAc,GAAG,KAAK7C,YAAL,CAAkBnB,MAAM,CAACjmB,KAAD,CAAxB,CAArB;AAAA,gBACIymB,OAAO,GAAGwD,cAAc,CAACxD,OAD7B;;AAGA,gBAAI,CAACA,OAAL,EAAc;AACZ;AACD,aARwC,CAUzC;AACA;AACA;AACA;AACA;AACA;;;AACA,aAAC,GAAGhB,gBAAgB,CAACqE,oBAArB,EAA2C;AACzCrD,cAAAA,OAAO,EAAEA,OADgC;AAEzCsD,cAAAA,MAAM,EAAE,KAAKG,oBAAL,CAA0BlqB,KAA1B;AAFiC,aAA3C,EAhByC,CAqBzC;;AACA,gBAAI,KAAKntB,KAAL,CAAWs3C,OAAf,EAAwB,KAAKt3C,KAAL,CAAWs3C,OAAX,CAAmBnqB,KAAnB,EAA0BymB,OAA1B,EAtBiB,CAwBzC;AACA;;AACA2D,YAAAA,qBAAqB,CAAC,YAAY;AAChCA,cAAAA,qBAAqB,CAAC,YAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA,oBAAIL,MAAM,GAAG;AACXC,kBAAAA,UAAU,EAAE,CAAC,GAAGvE,gBAAgB,CAAC4E,sBAArB,EAA6CryC,KAA7C,EAAoDu/B,MAAM,CAAC1kC,KAA3D,CADD;AAEXy3C,kBAAAA,SAAS,EAAE,EAFA;AAGXC,kBAAAA,OAAO,EAAE;AAHE,iBAAb;;AAMA,oBAAIvqB,KAAK,CAACsmB,SAAN,IAAmB/O,MAAM,CAAC1kC,KAAP,CAAakjC,eAApC,EAAqD;AACnDgU,kBAAAA,MAAM,GAAG1E,QAAQ,CAAC,EAAD,EAAK0E,MAAL,EAAaxS,MAAM,CAAC1kC,KAAP,CAAakjC,eAAb,CAA6B3W,EAA1C,CAAjB;AACD,iBAFD,MAEO,IAAIY,KAAK,CAAC4nB,QAAN,IAAkBrQ,MAAM,CAAC1kC,KAAP,CAAamjC,cAAnC,EAAmD;AACxD+T,kBAAAA,MAAM,GAAG1E,QAAQ,CAAC,EAAD,EAAK0E,MAAL,EAAaxS,MAAM,CAAC1kC,KAAP,CAAamjC,cAAb,CAA4B5W,EAAzC,CAAjB;AACD,iBAFM,MAEA,IAAIY,KAAK,CAAC8nB,OAAN,IAAiBvQ,MAAM,CAAC1kC,KAAP,CAAaojC,cAAlC,EAAkD;AACvD8T,kBAAAA,MAAM,GAAG1E,QAAQ,CAAC,EAAD,EAAK0E,MAAL,EAAaxS,MAAM,CAAC1kC,KAAP,CAAaojC,cAAb,CAA4B7W,EAAzC,CAAjB;AACD,iBA1B+B,CA4BhC;;;AACA,iBAAC,GAAGqmB,gBAAgB,CAACqE,oBAArB,EAA2C;AAAErD,kBAAAA,OAAO,EAAEA,OAAX;AAAoBsD,kBAAAA,MAAM,EAAEA;AAA5B,iBAA3C;AACD,eA9BoB,CAArB;AA+BD,aAhCoB,CAArB;AAkCA,iBAAKS,wBAAL,CAA8BxqB,KAA9B;AACD;AA/DA,SAtLoB,EAsPpB;AACDv0B,UAAAA,GAAG,EAAE,0BADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASw8C,wBAAT,CAAkCxqB,KAAlC,EAAyC;AAC9C,gBAAI6X,MAAM,GAAG,IAAb;;AAEA,gBAAI4S,cAAc,GAAG,KAAKrD,YAAL,CAAkBnB,MAAM,CAACjmB,KAAD,CAAxB,CAArB;AAAA,gBACIymB,OAAO,GAAGgE,cAAc,CAAChE,OAD7B;;AAGA,gBAAI,CAACA,OAAL,EAAc;AACZ;AACD,aAR6C,CAU9C;AACA;AACA;AACA;;;AACA,gBAAIiE,oBAAoB,GAAG,SAASA,oBAAT,CAA8BC,EAA9B,EAAkC;AAC3D;AACA;AACA,kBAAIA,EAAE,CAACr9C,MAAH,KAAcm5C,OAAlB,EAA2B,OAHgC,CAK3D;;AACAA,cAAAA,OAAO,CAACvjC,KAAR,CAAc8mC,UAAd,GAA2B,EAA3B,CAN2D,CAQ3D;;AACAnS,cAAAA,MAAM,CAAC+S,kBAAP,CAA0B5qB,KAA1B,EAAiCymB,OAAjC;;AAEAA,cAAAA,OAAO,CAAC5kB,mBAAR,CAA4BikB,aAA5B,EAA2C4E,oBAA3C;;AAEA,kBAAI1qB,KAAK,CAAC8nB,OAAV,EAAmB;AACjBjQ,gBAAAA,MAAM,CAACgT,eAAP,CAAuB5E,MAAM,CAACjmB,KAAD,CAA7B;AACD;AACF,aAhBD;;AAkBAymB,YAAAA,OAAO,CAAC/8B,gBAAR,CAAyBo8B,aAAzB,EAAwC4E,oBAAxC;AACD;AAnCA,SAtPoB,EA0RpB;AACDj/C,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS48C,kBAAT,CAA4B5qB,KAA5B,EAAmCymB,OAAnC,EAA4C;AACjD,gBAAIzO,MAAM,GAAG,IAAb;;AAEA,gBAAI,KAAKnlC,KAAL,CAAWi4C,QAAf,EAAyB,KAAKj4C,KAAL,CAAWi4C,QAAX,CAAoB9qB,KAApB,EAA2BymB,OAA3B,EAHwB,CAKjD;AACA;;AACA,iBAAKG,mBAAL,IAA4B,CAA5B;;AAEA,gBAAI,KAAKA,mBAAL,KAA6B,CAAjC,EAAoC;AAClC;AACA,kBAAI6B,YAAY,GAAG,KAAKjxC,KAAL,CAAWhG,QAAX,CAAoB+iB,MAApB,CAA2B,UAAUw2B,KAAV,EAAiB;AAC7D,oBAAIjD,OAAO,GAAGiD,KAAK,CAACjD,OAApB;AACA,uBAAO,CAACA,OAAR;AACD,eAHkB,EAGhB10C,GAHgB,CAGZ,UAAU43C,IAAV,EAAgB;AACrB,uBAAO3F,QAAQ,CAAC,EAAD,EAAK2F,IAAL,EAAW;AACxB1E,kBAAAA,SAAS,EAAE,KADa;AAExBsB,kBAAAA,QAAQ,EAAE;AAFc,iBAAX,CAAf;AAID,eARkB,CAAnB;AAUA,mBAAKhwC,QAAL,CAAc;AAAEpG,gBAAAA,QAAQ,EAAEi3C;AAAZ,eAAd,EAA0C,YAAY;AACpD,oBAAI,OAAOzQ,MAAM,CAACnlC,KAAP,CAAao4C,WAApB,KAAoC,UAAxC,EAAoD;AAClDjT,kBAAAA,MAAM,CAACmP,gBAAP,CAAwBnP,MAAM,CAACnlC,KAAP,CAAao4C,WAArC;AACD,iBAHmD,CAKpD;;;AACAjT,gBAAAA,MAAM,CAAC6O,iBAAP,GAA2B,EAA3B;AACD,eAPD,EAZkC,CAqBlC;AACA;;AACA,kBAAI,KAAKF,qBAAL,CAA2BF,OAA/B,EAAwC;AACtC,qBAAKE,qBAAL,CAA2BF,OAA3B,CAAmCvjC,KAAnC,CAAyCgoC,MAAzC,GAAkD,GAAlD;AACD;AACF;AACF;AAtCA,SA1RoB,EAiUpB;AACDz/C,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASm5C,gBAAT,CAA0BgE,IAA1B,EAAgC;AACrC,gBAAIjT,MAAM,GAAG,IAAb;;AAEA,gBAAIkT,QAAQ,GAAG,EAAf;AACA,gBAAIC,QAAQ,GAAG,EAAf;AAEA,iBAAKxE,iBAAL,CAAuBx7C,OAAvB,CAA+B,UAAUigD,QAAV,EAAoB;AACjD;AACA;AACA,kBAAItrB,KAAK,GAAGkY,MAAM,CAAC6Q,cAAP,CAAsBuC,QAAtB,CAAZ;;AAEA,kBAAI,CAACtrB,KAAL,EAAY;AACV;AACD;;AAEDorB,cAAAA,QAAQ,CAACn2C,IAAT,CAAc+qB,KAAd;;AAEA,kBAAIkY,MAAM,CAACqT,YAAP,CAAoBD,QAApB,CAAJ,EAAmC;AACjCD,gBAAAA,QAAQ,CAACp2C,IAAT,CAAcijC,MAAM,CAACkP,YAAP,CAAoBkE,QAApB,EAA8B7E,OAA5C;AACD;AACF,aAdD;AAgBA0E,YAAAA,IAAI,CAACC,QAAD,EAAWC,QAAX,CAAJ;AACD;AAzBA,SAjUoB,EA2VpB;AACD5/C,UAAAA,GAAG,EAAE,yBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASw6C,uBAAT,GAAmC;AACxC,gBAAIpQ,MAAM,GAAG,IAAb,CADwC,CAGxC;AACA;AACA;AACA;;;AACA,gBAAIoT,aAAa,GAAG,KAAKhF,UAAL,CAAgBC,OAApC;;AAEA,gBAAI,CAAC+E,aAAL,EAAoB;AAClB;AACD;;AAED,iBAAKhF,UAAL,CAAgBE,WAAhB,GAA8B,KAAK7zC,KAAL,CAAW40C,WAAX,CAAuB+D,aAAvB,CAA9B;AAEA,iBAAKh0C,KAAL,CAAWhG,QAAX,CAAoBnG,OAApB,CAA4B,UAAU20B,KAAV,EAAiB;AAC3C,kBAAIsrB,QAAQ,GAAGrF,MAAM,CAACjmB,KAAD,CAArB,CAD2C,CAG3C;AACA;;AACA,kBAAI,CAACsrB,QAAL,EAAe;AACb;AACD,eAP0C,CAS3C;AACA;AACA;;;AACA,kBAAI,CAAClT,MAAM,CAACmT,YAAP,CAAoBD,QAApB,CAAL,EAAoC;AAClC;AACD;;AAED,kBAAIpF,SAAS,GAAG9N,MAAM,CAACgP,YAAP,CAAoBkE,QAApB,CAAhB,CAhB2C,CAkB3C;AACA;;;AACA,kBAAI,CAACpF,SAAS,CAACO,OAAX,IAAsB,CAACzmB,KAA3B,EAAkC;AAChC;AACD;;AAEDoY,cAAAA,MAAM,CAACqT,YAAP,CAAoBH,QAApB,EAA8B;AAC5B5E,gBAAAA,WAAW,EAAE,CAAC,GAAGjB,gBAAgB,CAACiG,sBAArB,EAA6C;AACxDrE,kBAAAA,YAAY,EAAEnB,SAAS,CAACO,OADgC;AAExD+E,kBAAAA,aAAa,EAAEA,aAFyC;AAGxD/D,kBAAAA,WAAW,EAAErP,MAAM,CAACvlC,KAAP,CAAa40C;AAH8B,iBAA7C;AADe,eAA9B;AAOD,aA/BD;AAgCD;AAjDA,SA3VoB,EA6YpB;AACDh8C,UAAAA,GAAG,EAAE,sBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASk8C,oBAAT,CAA8BlqB,KAA9B,EAAqC;AAC1C,gBAAIA,KAAK,CAACsmB,SAAV,EAAqB;AACnB,qBAAO,KAAKzzC,KAAL,CAAWkjC,eAAX,GAA6B,KAAKljC,KAAL,CAAWkjC,eAAX,CAA2B7rB,IAAxD,GAA+D,EAAtE;AACD,aAFD,MAEO,IAAI8V,KAAK,CAAC4nB,QAAV,EAAoB;AACzB,kBAAI,CAAC,KAAK/0C,KAAL,CAAWmjC,cAAhB,EAAgC;AAC9B,uBAAO,EAAP;AACD,eAHwB,CAIzB;AACA;;;AACA,qBAAOqP,QAAQ,CAAC;AACdsG,gBAAAA,QAAQ,EAAE,EADI;AAEdC,gBAAAA,GAAG,EAAE,EAFS;AAGdC,gBAAAA,IAAI,EAAE,EAHQ;AAIdC,gBAAAA,KAAK,EAAE,EAJO;AAKdC,gBAAAA,MAAM,EAAE;AALM,eAAD,EAMZ,KAAKl5C,KAAL,CAAWmjC,cAAX,CAA0B9rB,IANd,CAAf;AAOD,aAbM,MAaA,IAAI8V,KAAK,CAAC8nB,OAAV,EAAmB;AACxB,qBAAO,KAAKj1C,KAAL,CAAWojC,cAAX,GAA4B,KAAKpjC,KAAL,CAAWojC,cAAX,CAA0B/rB,IAAtD,GAA6D,EAApE;AACD;;AAED,gBAAIg8B,SAAS,GAAG,KAAKkB,YAAL,CAAkBnB,MAAM,CAACjmB,KAAD,CAAxB,CAAhB;AACA,gBAAIqnB,YAAY,GAAGnB,SAAS,CAACO,OAA7B;AACA,gBAAIa,gBAAgB,GAAGpB,SAAS,CAACQ,WAAjC;AACA,gBAAIa,iBAAiB,GAAG,KAAKf,UAAL,CAAgBE,WAAxC;;AAEA,gBAAI,CAACW,YAAL,EAAmB;AACjB,qBAAO,EAAP;AACD;;AAED,gBAAI2E,kBAAkB,GAAG,CAAC,GAAGvG,gBAAgB,CAACuC,gBAArB,EAAuC;AAC9DX,cAAAA,YAAY,EAAEA,YADgD;AAE9DC,cAAAA,gBAAgB,EAAEA,gBAF4C;AAG9DC,cAAAA,iBAAiB,EAAEA,iBAH2C;AAI9DE,cAAAA,WAAW,EAAE,KAAK50C,KAAL,CAAW40C;AAJsC,aAAvC,CAAzB;AAAA,gBAMIwE,kBAAkB,GAAGhH,cAAc,CAAC+G,kBAAD,EAAqB,CAArB,CANvC;AAAA,gBAOI9D,EAAE,GAAG+D,kBAAkB,CAAC,CAAD,CAP3B;AAAA,gBAQI9D,EAAE,GAAG8D,kBAAkB,CAAC,CAAD,CAR3B;;AAUA,mBAAO;AACL3B,cAAAA,SAAS,EAAE,eAAepC,EAAf,GAAoB,MAApB,GAA6BC,EAA7B,GAAkC;AADxC,aAAP;AAGD,WA5CA,CA8CD;;AA9CC,SA7YoB,EA6bpB;AACD18C,UAAAA,GAAG,EAAE,qBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASq6C,mBAAT,CAA6Bx1C,KAA7B,EAAoC;AACzC;AACA;AACA;AACA;AACA;AACA,mBAAOmzC,gBAAgB,IAAInzC,KAAK,CAACq5C,oBAA1B,IAAkDr5C,KAAK,CAACs5C,QAAN,KAAmB,CAAnB,IAAwBt5C,KAAK,CAACu5C,KAAN,KAAgB,CAAxC,IAA6Cv5C,KAAK,CAACw5C,iBAAN,KAA4B,CAAzE,IAA8Ex5C,KAAK,CAACijC,cAAN,KAAyB,CAAhK;AACD;AATA,SA7boB,EAucpB;AACDrqC,UAAAA,GAAG,EAAE,gBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS+6C,cAAT,CAAwBt9C,GAAxB,EAA6B;AAClC,mBAAO,KAAK+L,KAAL,CAAWhG,QAAX,CAAoB23C,IAApB,CAAyB,UAAUnpB,KAAV,EAAiB;AAC/C,qBAAOimB,MAAM,CAACjmB,KAAD,CAAN,KAAkBv0B,GAAzB;AACD,aAFM,CAAP;AAGD;AANA,SAvcoB,EA8cpB;AACDA,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASu9C,YAAT,CAAsB9/C,GAAtB,EAA2B;AAChC;AACA;AACA,mBAAOlE,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqC,KAAKu/C,YAA1C,EAAwD96C,GAAxD,CAAP;AACD;AANA,SA9coB,EAqdpB;AACDA,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASo5C,YAAT,CAAsB37C,GAAtB,EAA2B;AAChC,mBAAO,KAAK8/C,YAAL,CAAkB9/C,GAAlB,IAAyB,KAAK86C,YAAL,CAAkB96C,GAAlB,CAAzB,GAAkD,EAAzD;AACD;AAJA,SArdoB,EA0dpB;AACDA,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASy9C,YAAT,CAAsBhgD,GAAtB,EAA2B2d,IAA3B,EAAiC;AACtC,iBAAKm9B,YAAL,CAAkB96C,GAAlB,IAAyB45C,QAAQ,CAAC,EAAD,EAAK,KAAK+B,YAAL,CAAkB37C,GAAlB,CAAL,EAA6B2d,IAA7B,CAAjC;AACD;AAJA,SA1doB,EA+dpB;AACD3d,UAAAA,GAAG,EAAE,iBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS68C,eAAT,CAAyBp/C,GAAzB,EAA8B;AACnC,mBAAO,KAAK86C,YAAL,CAAkB96C,GAAlB,CAAP;AACD;AAJA,SA/doB,EAoepB;AACDA,UAAAA,GAAG,EAAE,yBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASs+C,uBAAT,GAAmC;AACxC,gBAAI/T,MAAM,GAAG,IAAb;;AAEA,gBAAIgU,QAAQ,GAAG,KAAK15C,KAAL,CAAW05C,QAA1B,CAHwC,CAKxC;AACA;AACA;;AAEA,gBAAIC,gBAAgB,GAAGD,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,IAAzD;AACA,gBAAIE,eAAe,GAAGD,gBAAgB,GAAG,IAAH,GAAU,KAAhD;AAEA,mBAAO53B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8Bk+C,eAA9B,EAA+C;AACpDhhD,cAAAA,GAAG,EAAE,oBAD+C;AAEpDiJ,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAa+xC,OAAb,EAAsB;AACzBlO,gBAAAA,MAAM,CAACoO,qBAAP,CAA6BF,OAA7B,GAAuCA,OAAvC;AACD,eAJmD;AAKpDvjC,cAAAA,KAAK,EAAE;AAAEwpC,gBAAAA,UAAU,EAAE,QAAd;AAAwBxB,gBAAAA,MAAM,EAAE;AAAhC;AAL6C,aAA/C,CAAP;AAOD;AArBA,SApeoB,EA0fpB;AACDz/C,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS2+C,gBAAT,GAA4B;AACjC,gBAAI5T,OAAO,GAAG,IAAd,CADiC,CAGjC;AACA;AACA;;;AACA,mBAAO,KAAKvhC,KAAL,CAAWhG,QAAX,CAAoB4B,GAApB,CAAwB,UAAU4sB,KAAV,EAAiB;AAC9C,qBAAOpL,OAAO,WAAP,CAAgB1c,YAAhB,CAA6B8nB,KAAK,CAACnrB,OAAnC,EAA4C;AACjDH,gBAAAA,GAAG,EAAE,SAASA,GAAT,CAAaG,OAAb,EAAsB;AACzB;AACA;AACA,sBAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,sBAAI4xC,OAAO,GAAG,CAAC,GAAGhB,gBAAgB,CAACmH,aAArB,EAAoC/3C,OAApC,CAAd;;AACAkkC,kBAAAA,OAAO,CAAC0S,YAAR,CAAqBxF,MAAM,CAACjmB,KAAD,CAA3B,EAAoC;AAAEymB,oBAAAA,OAAO,EAAEA;AAAX,mBAApC;AACD;AAVgD,eAA5C,CAAP;AAYD,aAbM,CAAP;AAcD;AAtBA,SA1foB,EAihBpB;AACDh7C,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,gBAAIoqC,OAAO,GAAG,IAAd;;AAEA,gBAAIiT,OAAO,GAAG,KAAKh6C,KAAnB;AAAA,gBACI05C,QAAQ,GAAGM,OAAO,CAACN,QADvB;AAAA,gBAEIO,SAAS,GAAGD,OAAO,CAACC,SAFxB;AAAA,gBAGI7W,cAAc,GAAG4W,OAAO,CAAC5W,cAH7B;AAAA,gBAIIsT,uBAAuB,GAAGsD,OAAO,CAACtD,uBAJtC;;AAOA,gBAAI12C,KAAK,GAAGwyC,QAAQ,CAAC,EAAD,EAAKyH,SAAL,EAAgB;AAClCp4C,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAaK,IAAb,EAAmB;AACtB6kC,gBAAAA,OAAO,CAAC4M,UAAR,CAAmBC,OAAnB,GAA6B1xC,IAA7B;AACD;AAHiC,aAAhB,CAApB;;AAMA,gBAAIvD,QAAQ,GAAG,KAAKm7C,gBAAL,EAAf;;AACA,gBAAI1W,cAAc,IAAIsT,uBAAtB,EAA+C;AAC7C/3C,cAAAA,QAAQ,CAACyD,IAAT,CAAc,KAAKq3C,uBAAL,EAAd;AACD;;AAED,mBAAO13B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8Bg+C,QAA9B,EAAwC15C,KAAxC,EAA+CrB,QAA/C,CAAP;AACD;AAxBA,SAjhBoB,CAAX,CAAZ;;AA4iBA,eAAO20C,QAAP;AACD,OApqBc,CAoqBbxxB,MAAM,CAACxc,SApqBM,CAAf;;AAsqBA7R,MAAAA,OAAO,WAAP,GAAkB,CAAC,GAAGk/C,eAAe,WAAnB,EAA6BW,QAA7B,CAAlB;AACA5/C,MAAAA,MAAM,CAACD,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB;AAEA;AAAO,KA5vSG;AA6vSV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAKtD;;AACA;;;;;AAKA;;AAEA,UAAI,CAAC6M,KAAK,CAACvL,SAAN,CAAgBihD,IAArB,EAA2B;AACzB11C,QAAAA,KAAK,CAACvL,SAAN,CAAgBihD,IAAhB,GAAuB,UAAU4D,SAAV,EAAqB;AAC1C,cAAI,SAAS,IAAb,EAAmB;AACjB,kBAAM,IAAIz0C,SAAJ,CAAc,kDAAd,CAAN;AACD;;AACD,cAAI,OAAOy0C,SAAP,KAAqB,UAAzB,EAAqC;AACnC,kBAAM,IAAIz0C,SAAJ,CAAc,8BAAd,CAAN;AACD;;AACD,cAAImoB,IAAI,GAAGl5B,MAAM,CAAC,IAAD,CAAjB;AACA,cAAIiE,MAAM,GAAGi1B,IAAI,CAACj1B,MAAL,KAAgB,CAA7B;AACA,cAAIS,OAAO,GAAGL,SAAS,CAAC,CAAD,CAAvB;AACA,cAAIoC,KAAK,GAAG,KAAK,CAAjB;;AAEA,eAAK,IAAIlH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0E,MAApB,EAA4B1E,CAAC,EAA7B,EAAiC;AAC/BkH,YAAAA,KAAK,GAAGyyB,IAAI,CAAC35B,CAAD,CAAZ;;AACA,gBAAIimD,SAAS,CAAC/lD,IAAV,CAAeiF,OAAf,EAAwB+B,KAAxB,EAA+BlH,CAA/B,EAAkC25B,IAAlC,CAAJ,EAA6C;AAC3C,qBAAOzyB,KAAP;AACD;AACF;;AACD,iBAAOP,SAAP;AACD,SAnBD;AAoBD;;AAED,UAAI,CAACgG,KAAK,CAACvL,SAAN,CAAgB2d,KAArB,EAA4B;AAC1BpS,QAAAA,KAAK,CAACvL,SAAN,CAAgB2d,KAAhB,GAAwB,UAAUm7B,UAAV,EAAsB/0C,OAAtB,EAA+B;AACrD;;AAEA,cAAIoY,CAAJ,EAAO+R,CAAP;;AAEA,cAAI,QAAQ,IAAZ,EAAkB;AAChB,kBAAM,IAAI9d,SAAJ,CAAc,6BAAd,CAAN;AACD;;AAED,cAAIM,CAAC,GAAGrR,MAAM,CAAC,IAAD,CAAd;AACA,cAAIiN,GAAG,GAAGoE,CAAC,CAACpN,MAAF,KAAa,CAAvB;;AAEA,cAAI,OAAOw1C,UAAP,KAAsB,UAA1B,EAAsC;AACpC,kBAAM,IAAI1oC,SAAJ,EAAN;AACD;;AAED,cAAI1M,SAAS,CAACJ,MAAV,GAAmB,CAAvB,EAA0B;AACxB6Y,YAAAA,CAAC,GAAGpY,OAAJ;AACD;;AAEDmqB,UAAAA,CAAC,GAAG,CAAJ;;AAEA,iBAAOA,CAAC,GAAG5hB,GAAX,EAAgB;AAEd,gBAAIw4C,MAAJ;;AAEA,gBAAI52B,CAAC,IAAIxd,CAAT,EAAY;AACVo0C,cAAAA,MAAM,GAAGp0C,CAAC,CAACwd,CAAD,CAAV;AAEA,kBAAI62B,UAAU,GAAGjM,UAAU,CAACh6C,IAAX,CAAgBqd,CAAhB,EAAmB2oC,MAAnB,EAA2B52B,CAA3B,EAA8Bxd,CAA9B,CAAjB;;AAEA,kBAAI,CAACq0C,UAAL,EAAiB;AACf,uBAAO,KAAP;AACD;AACF;;AACD72B,YAAAA,CAAC;AACF;;AACD,iBAAO,IAAP;AACD,SAtCD;AAuCD;;AAED,UAAI,CAAC3iB,KAAK,CAACnK,OAAX,EAAoB;AAClBmK,QAAAA,KAAK,CAACnK,OAAN,GAAgB,UAAUu+B,GAAV,EAAe;AAC7B,iBAAOtgC,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+B6gC,GAA/B,MAAwC,gBAA/C;AACD,SAFD;AAGD;AAED;;AAAO,KAl1SG;AAm1SV;;AACA;AAAO,cAASthC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAE9C1G,QAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,UAAAA,KAAK,EAAE;AADoC,SAA7C;;AAIA,YAAIgd,OAAO,GAAG,OAAO/hB,MAAP,KAAkB,UAAlB,IAAgC,SAAOA,MAAM,CAACgf,QAAd,MAA2B,QAA3D,GAAsE,UAAU3c,GAAV,EAAe;AAAE,0BAAcA,GAAd;AAAoB,SAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,iBAAOA,GAAG,IAAI,OAAOrC,MAAP,KAAkB,UAAzB,IAAuCqC,GAAG,CAAC5B,WAAJ,KAAoBT,MAA3D,IAAqEqC,GAAG,KAAKrC,MAAM,CAACf,SAApF,GAAgG,QAAhG,YAAkHoD,GAAlH,CAAP;AAA+H,SAA5Q;;AAEA,YAAI+5C,QAAQ,GAAG99C,MAAM,CAAC2yB,MAAP,IAAiB,UAAU5sB,MAAV,EAAkB;AAAE,eAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAAE,gBAAI0F,MAAM,GAAGZ,SAAS,CAAC9E,CAAD,CAAtB;;AAA2B,iBAAK,IAAI2E,GAAT,IAAgBe,MAAhB,EAAwB;AAAE,kBAAIjF,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCwF,MAArC,EAA6Cf,GAA7C,CAAJ,EAAuD;AAAE6B,gBAAAA,MAAM,CAAC7B,GAAD,CAAN,GAAce,MAAM,CAACf,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,iBAAO6B,MAAP;AAAgB,SAAhQ;;AAEA,YAAIg4C,YAAY,GAAG,YAAY;AAAE,mBAAStjC,gBAAT,CAA0B1U,MAA1B,EAAkCuF,KAAlC,EAAyC;AAAE,iBAAK,IAAI/L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+L,KAAK,CAACrH,MAA1B,EAAkC1E,CAAC,EAAnC,EAAuC;AAAE,kBAAImb,UAAU,GAAGpP,KAAK,CAAC/L,CAAD,CAAtB;AAA2Bmb,cAAAA,UAAU,CAACva,UAAX,GAAwBua,UAAU,CAACva,UAAX,IAAyB,KAAjD;AAAwDua,cAAAA,UAAU,CAACxa,YAAX,GAA0B,IAA1B;AAAgC,kBAAI,WAAWwa,UAAf,EAA2BA,UAAU,CAAC5B,QAAX,GAAsB,IAAtB;AAA4B9Y,cAAAA,MAAM,CAACC,cAAP,CAAsB8F,MAAtB,EAA8B2U,UAAU,CAACxW,GAAzC,EAA8CwW,UAA9C;AAA4D;AAAE;;AAAC,iBAAO,UAAUL,WAAV,EAAuBM,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,gBAAID,UAAJ,EAAgBF,gBAAgB,CAACJ,WAAW,CAAC1Z,SAAb,EAAwBga,UAAxB,CAAhB;AAAqD,gBAAIC,WAAJ,EAAiBH,gBAAgB,CAACJ,WAAD,EAAcO,WAAd,CAAhB;AAA4C,mBAAOP,WAAP;AAAqB,WAAhN;AAAmN,SAA9hB,EAAnB;;AAEA,YAAI+S,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,YAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,YAAIu4B,cAAc,GAAGtmD,mBAAmB,CAAC,GAAD,CAAxC;;AAEA,YAAIumD,kBAAkB,GAAGvmD,mBAAmB,CAAC,GAAD,CAA5C;;AAEA,YAAI8+C,QAAQ,GAAG9+C,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,iBAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,iBAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,uBAASA;AAAX,WAArC;AAAwD;;AAE/F,iBAASq6C,eAAT,CAAyBhkC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,cAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,kBAAM,IAAItJ,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,iBAASstC,0BAAT,CAAoCh9C,IAApC,EAA0C5B,IAA1C,EAAgD;AAAE,cAAI,CAAC4B,IAAL,EAAW;AAAE,kBAAM,IAAI+hB,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,iBAAO3jB,IAAI,KAAK,SAAOA,IAAP,MAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0E4B,IAAjF;AAAwF;;AAEhP,iBAASi9C,SAAT,CAAmBn6B,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,cAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,kBAAM,IAAIrT,SAAJ,CAAc,sEAAoEqT,UAApE,CAAd,CAAN;AAAsG;;AAACD,UAAAA,QAAQ,CAACxjB,SAAT,GAAqBX,MAAM,CAACmc,MAAP,CAAciI,UAAU,IAAIA,UAAU,CAACzjB,SAAvC,EAAkD;AAAEwB,YAAAA,WAAW,EAAE;AAAEsE,cAAAA,KAAK,EAAE0d,QAAT;AAAmBhkB,cAAAA,UAAU,EAAE,KAA/B;AAAsC2Y,cAAAA,QAAQ,EAAE,IAAhD;AAAsD5Y,cAAAA,YAAY,EAAE;AAApE;AAAf,WAAlD,CAArB;AAAqK,cAAIkkB,UAAJ,EAAgBpkB,MAAM,CAACq9C,cAAP,GAAwBr9C,MAAM,CAACq9C,cAAP,CAAsBl5B,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACE,SAAT,GAAqBD,UAA3F;AAAwG;AAC9e;;;;;;;;;;;;;AAYA;;;AAEA,YAAIyhC,OAAO,GAAG,KAAK,CAAnB;;AACA,YAAI;AACFA,UAAAA,OAAO,GAAGn/C,OAAO,CAACmC,GAAR,CAAYC,QAAtB;AACD,SAFD,CAEE,OAAOY,CAAP,EAAU;AACVm8C,UAAAA,OAAO,GAAG,aAAV;AACD;;AAED,iBAASC,aAAT,CAAuBC,iBAAvB,EAA0C;AACxC,cAAIC,MAAJ,EAAYnH,KAAZ;;AAEA,iBAAOA,KAAK,GAAGmH,MAAM,GAAG,UAAUjd,UAAV,EAAsB;AAC5CuV,YAAAA,SAAS,CAAC2H,qBAAD,EAAwBld,UAAxB,CAAT;;AAEA,qBAASkd,qBAAT,GAAiC;AAC/B7H,cAAAA,eAAe,CAAC,IAAD,EAAO6H,qBAAP,CAAf;;AAEA,qBAAO5H,0BAA0B,CAAC,IAAD,EAAO,CAAC4H,qBAAqB,CAAC5hC,SAAtB,IAAmCrkB,MAAM,CAAC6e,cAAP,CAAsBonC,qBAAtB,CAApC,EAAkF7/C,KAAlF,CAAwF,IAAxF,EAA8F/B,SAA9F,CAAP,CAAjC;AACD;;AAED05C,YAAAA,YAAY,CAACkI,qBAAD,EAAwB,CAAC;AACnC/hD,cAAAA,GAAG,EAAE,uCAD8B;AAInC;AACAuC,cAAAA,KAAK,EAAE,SAASy/C,qCAAT,CAA+Cj8C,QAA/C,EAAyD;AAC9D;AACA;AACA,oBAAI47C,OAAO,KAAK,YAAhB,EAA8B;AAC5B;AACD,iBAL6D,CAO9D;AACA;AACA;AACA;;;AACA,oBAAIM,UAAU,GAAG/4B,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwB7B,QAAxB,CAAjB;;AACA,oBAAIm8C,WAAW,GAAGD,UAAU,CAAC7nC,KAAX,CAAiB,UAAUma,KAAV,EAAiB;AAClD,yBAAO,CAAC,CAAC,GAAG0lB,QAAQ,CAACngC,cAAb,EAA6Bya,KAA7B,CAAD,IAAwC,OAAOA,KAAK,CAACv0B,GAAb,KAAqB,WAApE;AACD,iBAFiB,CAAlB;;AAIA,oBAAI,CAACkiD,WAAL,EAAkB;AAChB,mBAAC,GAAGT,cAAc,CAACU,oCAAnB;AACD;AACF;AAxBkC,aAAD,EAyBjC;AACDniD,cAAAA,GAAG,EAAE,cADJ;AAEDuC,cAAAA,KAAK,EAAE,SAAS6/C,YAAT,CAAsBh7C,KAAtB,EAA6B;AAClC,oBAAIi7C,YAAY,GAAG;AACjB;AACAt8C,kBAAAA,QAAQ,EAAEqB,KAAK,CAACrB,QAFC;AAGjBu8C,kBAAAA,MAAM,EAAEl7C,KAAK,CAACk7C,MAHG;AAIjB5D,kBAAAA,OAAO,EAAEt3C,KAAK,CAACs3C,OAJE;AAKjBW,kBAAAA,QAAQ,EAAEj4C,KAAK,CAACi4C,QALC;AAMjB5D,kBAAAA,UAAU,EAAEr0C,KAAK,CAACq0C,UAND;AAOjB+D,kBAAAA,WAAW,EAAEp4C,KAAK,CAACo4C,WAPF;AAQjBsB,kBAAAA,QAAQ,EAAE15C,KAAK,CAAC05C,QARC;AASjBL,kBAAAA,oBAAoB,EAAEr5C,KAAK,CAACq5C,oBATX;AAUjBzE,kBAAAA,WAAW,EAAE50C,KAAK,CAAC40C,WAVF;AAWjB8B,kBAAAA,uBAAuB,EAAE12C,KAAK,CAAC02C,uBAXd;AAYjBI,kBAAAA,iBAAiB,EAAE92C,KAAK,CAAC82C,iBAZR;AAcjB;AACAwC,kBAAAA,QAAQ,EAAE,KAAK6B,iBAAL,CAAuB,UAAvB,CAfO;AAgBjB5B,kBAAAA,KAAK,EAAE,KAAK4B,iBAAL,CAAuB,OAAvB,CAhBU;AAiBjB3B,kBAAAA,iBAAiB,EAAE,KAAK2B,iBAAL,CAAuB,mBAAvB,CAjBF;AAkBjBlY,kBAAAA,cAAc,EAAE,KAAKkY,iBAAL,CAAuB,gBAAvB,CAlBC;AAoBjB;AACA;AACA;AACAjY,kBAAAA,eAAe,EAAE,KAAKkY,oBAAL,CAA0Bp7C,KAAK,CAACkjC,eAAhC,EAAiDoX,kBAAkB,CAACe,aAApE,CAvBA;AAwBjBlY,kBAAAA,cAAc,EAAE,KAAKiY,oBAAL,CAA0Bp7C,KAAK,CAACmjC,cAAhC,EAAgDmX,kBAAkB,CAACgB,YAAnE,CAxBC;AAyBjBlY,kBAAAA,cAAc,EAAE,KAAKgY,oBAAL,CAA0Bp7C,KAAK,CAACojC,cAAhC,EAAgDkX,kBAAkB,CAACiB,YAAnE,CAzBC;AA2BjBtB,kBAAAA,SAAS,EAAE;AA3BM,iBAAnB;AA8BA,qBAAKW,qCAAL,CAA2CK,YAAY,CAACt8C,QAAxD,EA/BkC,CAiClC;;AACA,oBAAI,OAAOqB,KAAK,CAACw7C,iBAAb,KAAmC,WAAvC,EAAoD;AAClD,sBAAIjB,OAAO,KAAK,YAAhB,EAA8B;AAC5B,qBAAC,GAAGF,cAAc,CAACoB,2BAAnB;AACD;;AAEDR,kBAAAA,YAAY,CAAC5B,oBAAb,GAAoCr5C,KAAK,CAACw7C,iBAA1C;AACD,iBAxCiC,CA0ClC;AACA;;;AACA,oBAAIE,eAAe,GAAGhnD,MAAM,CAACuZ,IAAP,CAAYgtC,YAAZ,CAAtB;AACA,oBAAIU,cAAc,GAAG,CAAC,GAAG9I,QAAQ,CAACrgC,IAAb,EAAmB,KAAKxS,KAAxB,EAA+B07C,eAA/B,CAArB,CA7CkC,CA+ClC;AACA;AACA;;AACAC,gBAAAA,cAAc,CAACtrC,KAAf,GAAuBmiC,QAAQ,CAAC;AAC9BsG,kBAAAA,QAAQ,EAAE;AADoB,iBAAD,EAE5B6C,cAAc,CAACtrC,KAFa,CAA/B;AAIA4qC,gBAAAA,YAAY,CAAChB,SAAb,GAAyB0B,cAAzB;AAEA,uBAAOV,YAAP;AACD;AA3DA,aAzBiC,EAqFjC;AACDriD,cAAAA,GAAG,EAAE,mBADJ;AAEDuC,cAAAA,KAAK,EAAE,SAASggD,iBAAT,CAA2B95B,IAA3B,EAAiC;AACtC,oBAAIu6B,QAAQ,GAAG,KAAK57C,KAAL,CAAWqhB,IAAX,CAAf;AAEA,oBAAIlmB,KAAK,GAAG,OAAOygD,QAAP,KAAoB,QAApB,GAA+BA,QAA/B,GAA0C3vC,QAAQ,CAAC2vC,QAAD,EAAW,EAAX,CAA9D;;AAEA,oBAAIhsC,KAAK,CAACzU,KAAD,CAAT,EAAkB;AAChB,sBAAI4D,YAAY,GAAG47C,qBAAqB,CAAC17C,YAAtB,CAAmCoiB,IAAnC,CAAnB;;AAEA,sBAAIk5B,OAAO,KAAK,YAAhB,EAA8B;AAC5B,qBAAC,GAAGF,cAAc,CAACwB,wBAAnB,EAA6C;AAC3Cx6B,sBAAAA,IAAI,EAAEA,IADqC;AAE3ClmB,sBAAAA,KAAK,EAAEygD,QAFoC;AAG3C78C,sBAAAA,YAAY,EAAEA;AAH6B,qBAA7C;AAKD;;AAED,yBAAOA,YAAP;AACD;;AAED,uBAAO5D,KAAP;AACD,eAtBA,CAwBD;;AAxBC,aArFiC,EA+GjC;AACDvC,cAAAA,GAAG,EAAE,sBADJ;AAEDuC,cAAAA,KAAK,EAAE,SAASigD,oBAAT,CAA8BU,SAA9B,EAAyCC,OAAzC,EAAkD;AACvD,wBAAQ,OAAOD,SAAP,KAAqB,WAArB,GAAmC,WAAnC,GAAiD3jC,OAAO,CAAC2jC,SAAD,CAAhE;AACE,uBAAK,SAAL;AACE;AACE;AACA;AACA,6BAAOC,OAAO,CAACD,SAAS,GAAGxB,kBAAkB,CAAC0B,aAAtB,GAAsC1B,kBAAkB,CAAC2B,aAAnE,CAAd;AACD;;AAEH,uBAAK,QAAL;AACE;AACE,0BAAIC,UAAU,GAAGxnD,MAAM,CAACuZ,IAAP,CAAY8tC,OAAZ,CAAjB;;AAEA,0BAAIG,UAAU,CAACtpC,OAAX,CAAmBkpC,SAAnB,MAAkC,CAAC,CAAvC,EAA0C;AACxC,4BAAIvB,OAAO,KAAK,YAAhB,EAA8B;AAC5B,2BAAC,GAAGF,cAAc,CAAC8B,uBAAnB,EAA4C;AAC1ChhD,4BAAAA,KAAK,EAAE2gD,SADmC;AAE1CM,4BAAAA,gBAAgB,EAAEF,UAAU,CAAC3hC,IAAX,CAAgB,IAAhB,CAFwB;AAG1Cxb,4BAAAA,YAAY,EAAEu7C,kBAAkB,CAAC0B;AAHS,2BAA5C;AAKD;;AAED,+BAAOD,OAAO,CAACzB,kBAAkB,CAAC0B,aAApB,CAAd;AACD;;AAED,6BAAOD,OAAO,CAACD,SAAD,CAAd;AACD;;AAEH;AACE;AACE,6BAAOA,SAAP;AACD;AA9BL;AAgCD;AAnCA,aA/GiC,EAmJjC;AACDljD,cAAAA,GAAG,EAAE,QADJ;AAEDuC,cAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,uBAAOolB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B++C,iBAA9B,EAAiD,KAAKO,YAAL,CAAkB,KAAKh7C,KAAvB,CAAjD,CAAP;AACD;AAJA,aAnJiC,CAAxB,CAAZ;;AA0JA,mBAAO26C,qBAAP;AACD,WApKuB,CAoKtB74B,MAAM,CAACxc,SApKe,CAAjB,EAoKco1C,MAAM,CAACz7C,YAAP,GAAsB;AACzCi8C,YAAAA,MAAM,EAAE,aADiC;AAEzC5B,YAAAA,QAAQ,EAAE,GAF+B;AAGzCC,YAAAA,KAAK,EAAE,CAHkC;AAIzCC,YAAAA,iBAAiB,EAAE,CAJsB;AAKzCvW,YAAAA,cAAc,EAAE,CALyB;AAMzCyW,YAAAA,QAAQ,EAAE,KAN+B;AAOzCvW,YAAAA,cAAc,EAAEmX,kBAAkB,CAAC0B,aAPM;AAQzC5Y,YAAAA,cAAc,EAAEkX,kBAAkB,CAAC0B,aARM;AASzC3C,YAAAA,oBAAoB,EAAE,KATmB;AAUzCzE,YAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB1yC,IAArB,EAA2B;AACtC,qBAAOA,IAAI,CAACm6C,qBAAL,EAAP;AACD,aAZwC;AAazC3F,YAAAA,uBAAuB,EAAE,KAbgB;AAczCI,YAAAA,iBAAiB,EAAE;AAdsB,WApKpC,EAmLJvD,KAnLH;AAoLD;;AAED9/C,QAAAA,OAAO,WAAP,GAAkB+mD,aAAlB;AACA9mD,QAAAA,MAAM,CAACD,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB;AACA;AAA4B,OA7OA,EA6OCU,IA7OD,CA6OMV,OA7ON,EA6OeM,mBAAmB,CAAC,CAAD,CA7OlC,CAAD;AA+O3B;AAAO,KAtkTG;AAukTV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAKA,eAASmhD,QAAT,CAAkBvhC,GAAlB,EAAuB;AACrB,YAAIwhC,SAAS,GAAG,KAAhB;AACA,eAAO,YAAY;AACjB,cAAI,CAACA,SAAL,EAAgB;AACd11B,YAAAA,OAAO,CAACC,IAAR,CAAa/L,GAAb;AACAwhC,YAAAA,SAAS,GAAG,IAAZ;AACD;AACF,SALD;AAMD;;AACD,UAAIxB,oCAAoC,GAAGtnD,OAAO,CAACsnD,oCAAR,GAA+CuB,QAAQ,CAAC,sXAAD,CAAlG;;AAEA,UAAIT,wBAAwB,GAAGpoD,OAAO,CAACooD,wBAAR,GAAmC,SAASA,wBAAT,CAAkCn6C,IAAlC,EAAwC;AACxG,eAAOmlB,OAAO,CAAChG,KAAR,CAAc,uEAAuEnf,IAAI,CAAC2f,IAA5E,GAAmF,8HAAnF,GAAoN3f,IAAI,CAACvG,KAAzN,GAAiO,qFAAjO,GAAyTuG,IAAI,CAAC3C,YAA9T,GAA6U,OAA3V,CAAP;AACD,OAFD;;AAIA,UAAI08C,2BAA2B,GAAGhoD,OAAO,CAACgoD,2BAAR,GAAsCa,QAAQ,CAAC,+NAAD,CAAhF;;AAEA,UAAIH,uBAAuB,GAAG1oD,OAAO,CAAC0oD,uBAAR,GAAkC,SAASA,uBAAT,CAAiCz6C,IAAjC,EAAuC;AACrG,eAAOmlB,OAAO,CAAChG,KAAR,CAAc,wHAAwHnf,IAAI,CAACvG,KAA7H,GAAqI,sCAArI,GAA8KuG,IAAI,CAAC06C,gBAAnL,GAAsM,2BAAtM,GAAoO16C,IAAI,CAAC3C,YAAzO,GAAwP,oBAAtQ,CAAP;AACD,OAFD;AAIA;;AAAO,KAvmTG;AAwmTV;;AACA;AAAO,cAASrL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA,UAAImgD,YAAY,GAAG7nD,OAAO,CAAC6nD,YAAR,GAAuB;AACxCkB,QAAAA,QAAQ,EAAE;AACRnlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,UAAb;AAAyBC,YAAAA,OAAO,EAAE;AAAlC,WADE;AAERnrB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,EAAb;AAAiBC,YAAAA,OAAO,EAAE;AAA1B;AAFI,SAD8B;AAKxC+E,QAAAA,IAAI,EAAE;AACJplC,UAAAA,IAAI,EAAE;AAAEqgC,YAAAA,OAAO,EAAE;AAAX,WADF;AAEJnrB,UAAAA,EAAE,EAAE;AAAEmrB,YAAAA,OAAO,EAAE;AAAX;AAFA,SALkC;AASxCgF,QAAAA,iBAAiB,EAAE;AACjBrlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADW;AAEjBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,EAAb;AAAiBkF,YAAAA,eAAe,EAAE;AAAlC;AAFa,SATqB;AAaxCC,QAAAA,mBAAmB,EAAE;AACnBvlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADa;AAEnBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,EAAb;AAAiBkF,YAAAA,eAAe,EAAE;AAAlC;AAFe,SAbmB;AAiBxCE,QAAAA,IAAI,EAAE;AAjBkC,OAA1C;AAmBA;;;;;;;;AAOA,UAAItB,YAAY,GAAG9nD,OAAO,CAAC8nD,YAAR,GAAuB;AACxCiB,QAAAA,QAAQ,EAAE;AACRnlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,UAAb;AAAyBC,YAAAA,OAAO,EAAE;AAAlC,WADE;AAERnrB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,UAAb;AAAyBC,YAAAA,OAAO,EAAE;AAAlC;AAFI,SAD8B;AAKxC+E,QAAAA,IAAI,EAAE;AACJplC,UAAAA,IAAI,EAAE;AAAEqgC,YAAAA,OAAO,EAAE;AAAX,WADF;AAEJnrB,UAAAA,EAAE,EAAE;AAAEmrB,YAAAA,OAAO,EAAE;AAAX;AAFA,SALkC;AASxCgF,QAAAA,iBAAiB,EAAE;AACjBrlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADW;AAEjBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C;AAFa,SATqB;AAaxCC,QAAAA,mBAAmB,EAAE;AACnBvlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADa;AAEnBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C;AAFe,SAbmB;AAiBxCE,QAAAA,IAAI,EAAE;AAjBkC,OAA1C,CAlCsD,CAsDtD;AACA;;AACA,UAAIxB,aAAa,GAAG5nD,OAAO,CAAC4nD,aAAR,GAAwBC,YAA5C,CAxDsD,CA0DtD;AACA;AACA;AACA;AACA;;AACAA,MAAAA,YAAY,CAACwB,iBAAb,GAAiCxB,YAAY,CAACoB,iBAA9C,CA/DsD,CAgEtD;;AACApB,MAAAA,YAAY,CAACyB,mBAAb,GAAmCzB,YAAY,CAACsB,mBAAhD,CAjEsD,CAkEtD;;AACArB,MAAAA,YAAY,CAACuB,iBAAb,GAAiCvB,YAAY,CAACmB,iBAA9C,CAnEsD,CAoEtD;;AACAnB,MAAAA,YAAY,CAACwB,mBAAb,GAAmCxB,YAAY,CAACqB,mBAAhD;AAEA,UAAIZ,aAAa,GAAGvoD,OAAO,CAACuoD,aAAR,GAAwB,UAA5C;AACA,UAAIC,aAAa,GAAGxoD,OAAO,CAACwoD,aAAR,GAAwB,MAA5C;AAEA;AAAO,KAnrTG;AAorTV;;AACA;AAAO,cAASvoD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA1H,MAAAA,OAAO,CAAC+jD,sBAAR,GAAiC/jD,OAAO,CAACsmD,aAAR,GAAwBtmD,OAAO,CAACsjD,uBAAR,GAAkCtjD,OAAO,CAACojD,qBAAR,GAAgCpjD,OAAO,CAAC0hD,gBAAR,GAA2B1hD,OAAO,CAAColD,sBAAR,GAAiCj+C,SAAvL;;AAEA,UAAI43C,QAAQ,GAAG99C,MAAM,CAAC2yB,MAAP,IAAiB,UAAU5sB,MAAV,EAAkB;AAAE,aAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAAE,cAAI0F,MAAM,GAAGZ,SAAS,CAAC9E,CAAD,CAAtB;;AAA2B,eAAK,IAAI2E,GAAT,IAAgBe,MAAhB,EAAwB;AAAE,gBAAIjF,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCwF,MAArC,EAA6Cf,GAA7C,CAAJ,EAAuD;AAAE6B,cAAAA,MAAM,CAAC7B,GAAD,CAAN,GAAce,MAAM,CAACf,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,eAAO6B,MAAP;AAAgB,OAAhQ;AACA;;;;;;;;;;AAUAhH,MAAAA,OAAO,CAACwjD,oBAAR,GAA+BA,oBAA/B;AACAxjD,MAAAA,OAAO,CAACy/C,oBAAR,GAA+BA,oBAA/B;;AAEA,UAAIxwB,SAAS,GAAG3uB,mBAAmB,CAAC,CAAD,CAAnC;;AAEA,UAAI8+C,QAAQ,GAAG9+C,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,eAASib,eAAT,CAAyBvW,GAAzB,EAA8BG,GAA9B,EAAmCuC,KAAnC,EAA0C;AAAE,YAAIvC,GAAG,IAAIH,GAAX,EAAgB;AAAE/D,UAAAA,MAAM,CAACC,cAAP,CAAsB8D,GAAtB,EAA2BG,GAA3B,EAAgC;AAAEuC,YAAAA,KAAK,EAAEA,KAAT;AAAgBtG,YAAAA,UAAU,EAAE,IAA5B;AAAkCD,YAAAA,YAAY,EAAE,IAAhD;AAAsD4Y,YAAAA,QAAQ,EAAE;AAAhE,WAAhC;AAA0G,SAA5H,MAAkI;AAAE/U,UAAAA,GAAG,CAACG,GAAD,CAAH,GAAWuC,KAAX;AAAmB;;AAAC,eAAO1C,GAAP;AAAa;;AAEjN,eAASw+C,oBAAT,CAA8Bj1B,IAA9B,EAAoC;AAClC,YAAI4xB,OAAO,GAAG5xB,IAAI,CAAC4xB,OAAnB;AAAA,YACIsD,MAAM,GAAGl1B,IAAI,CAACk1B,MADlB,CADkC,CAIlC;AACA;;AACAxiD,QAAAA,MAAM,CAACuZ,IAAP,CAAYipC,MAAZ,EAAoB1+C,OAApB,CAA4B,UAAUI,GAAV,EAAe;AACzCg7C,UAAAA,OAAO,CAACvjC,KAAR,CAAc6e,WAAd,CAA0B,CAAC,GAAG2jB,QAAQ,CAAC1/B,SAAb,EAAwBva,GAAxB,CAA1B,EAAwDs+C,MAAM,CAACt+C,GAAD,CAA9D;AACD,SAFD;AAGD,OAvCqD,CAyCtD;;;AACA,eAASs6C,oBAAT,GAAgC;AAC9B,YAAI8J,WAAW,GAAG;AAChB7F,UAAAA,UAAU,EAAE,eADI;AAEhB,2BAAiB,gBAFD;AAGhB,6BAAmB,eAHH;AAIhB,gCAAsB;AAJN,SAAlB,CAD8B,CAQ9B;AACA;;AACA,YAAI,OAAO5+C,QAAP,KAAoB,WAAxB,EAAqC,OAAO,EAAP;AAErC,YAAIoiB,EAAE,GAAGpiB,QAAQ,CAACmD,aAAT,CAAuB,aAAvB,CAAT;AAEA,YAAIuhD,KAAK,GAAGvoD,MAAM,CAACuZ,IAAP,CAAY+uC,WAAZ,EAAyB1G,IAAzB,CAA8B,UAAU7yB,CAAV,EAAa;AACrD,iBAAO9I,EAAE,CAACtK,KAAH,CAAS6sC,gBAAT,CAA0Bz5B,CAA1B,MAAiC7oB,SAAxC;AACD,SAFW,CAAZ,CAd8B,CAkB9B;AACA;;AACA,eAAOqiD,KAAK,GAAGD,WAAW,CAACC,KAAD,CAAd,GAAwB,EAApC;AACD;;AAED,UAAIpE,sBAAsB,GAAGplD,OAAO,CAAColD,sBAAR,GAAiC,SAASA,sBAAT,CAAgCtC,KAAhC,EAAuC;AACnG,YAAI/B,YAAY,GAAG+B,KAAK,CAAC/B,YAAzB;AAAA,YACImE,aAAa,GAAGpC,KAAK,CAACoC,aAD1B;AAAA,YAEI/D,WAAW,GAAG2B,KAAK,CAAC3B,WAFxB;AAIA,YAAIuI,SAAS,GAAGvI,WAAW,CAAC+D,aAAD,CAA3B;;AAEA,YAAIyE,YAAY,GAAGxI,WAAW,CAACJ,YAAD,CAA9B;AAAA,YACIuE,GAAG,GAAGqE,YAAY,CAACrE,GADvB;AAAA,YAEIC,IAAI,GAAGoE,YAAY,CAACpE,IAFxB;AAAA,YAGIC,KAAK,GAAGmE,YAAY,CAACnE,KAHzB;AAAA,YAIIC,MAAM,GAAGkE,YAAY,CAAClE,MAJ1B;AAAA,YAKImE,KAAK,GAAGD,YAAY,CAACC,KALzB;AAAA,YAMIhF,MAAM,GAAG+E,YAAY,CAAC/E,MAN1B;;AAQA,eAAO;AACLU,UAAAA,GAAG,EAAEA,GAAG,GAAGoE,SAAS,CAACpE,GADhB;AAELC,UAAAA,IAAI,EAAEA,IAAI,GAAGmE,SAAS,CAACnE,IAFlB;AAGLC,UAAAA,KAAK,EAAEkE,SAAS,CAAClE,KAAV,GAAkBA,KAHpB;AAILC,UAAAA,MAAM,EAAEiE,SAAS,CAACjE,MAAV,GAAmBA,MAJtB;AAKLmE,UAAAA,KAAK,EAAEA,KALF;AAMLhF,UAAAA,MAAM,EAAEA;AANH,SAAP;AAQD,OAvBD;AAyBA;;;;;;;AAKA,UAAIlD,gBAAgB,GAAG1hD,OAAO,CAAC0hD,gBAAR,GAA2B,SAASA,gBAAT,CAA0B+C,KAA1B,EAAiC;AACjF,YAAI1D,YAAY,GAAG0D,KAAK,CAAC1D,YAAzB;AAAA,YACIC,gBAAgB,GAAGyD,KAAK,CAACzD,gBAD7B;AAAA,YAEIC,iBAAiB,GAAGwD,KAAK,CAACxD,iBAF9B;AAAA,YAGIE,WAAW,GAAGsD,KAAK,CAACtD,WAHxB,CADiF,CAMjF;;AACA,YAAI0I,UAAU,GAAG;AAAEvE,UAAAA,GAAG,EAAE,CAAP;AAAUC,UAAAA,IAAI,EAAE,CAAhB;AAAmBC,UAAAA,KAAK,EAAE,CAA1B;AAA6BC,UAAAA,MAAM,EAAE,CAArC;AAAwCb,UAAAA,MAAM,EAAE,CAAhD;AAAmDgF,UAAAA,KAAK,EAAE;AAA1D,SAAjB,CAPiF,CASjF;AACA;;AACA,YAAIE,cAAc,GAAG9I,gBAAgB,IAAI6I,UAAzC;AACA,YAAIH,SAAS,GAAGzI,iBAAiB,IAAI4I,UAArC,CAZiF,CAcjF;AACA;AACA;AACA;;AACA,YAAIE,cAAc,GAAG5I,WAAW,CAACJ,YAAD,CAAhC;AACA,YAAIiJ,cAAc,GAAG;AACnB1E,UAAAA,GAAG,EAAEyE,cAAc,CAACzE,GAAf,GAAqBoE,SAAS,CAACpE,GADjB;AAEnBC,UAAAA,IAAI,EAAEwE,cAAc,CAACxE,IAAf,GAAsBmE,SAAS,CAACnE;AAFnB,SAArB;AAKA,eAAO,CAACuE,cAAc,CAACvE,IAAf,GAAsByE,cAAc,CAACzE,IAAtC,EAA4CuE,cAAc,CAACxE,GAAf,GAAqB0E,cAAc,CAAC1E,GAAhF,CAAP;AACD,OAzBD;AA2BA;;;;;;;;;;;;AAUA,UAAIlC,qBAAqB,GAAGpjD,OAAO,CAACojD,qBAAR,GAAgC,SAASA,qBAAT,CAA+BxD,SAA/B,EAA0CyD,iBAA1C,EAA6D;AACvH,YAAIlD,OAAO,GAAGP,SAAS,CAACO,OAAxB;AAAA,YACIC,WAAW,GAAGR,SAAS,CAACQ,WAD5B;;AAIA,YAAI,CAACD,OAAD,IAAY,CAACC,WAAjB,EAA8B;AAC5B;AACD,SAPsH,CASvH;;;AACA,YAAI6J,QAAQ,GAAG7nD,MAAM,CAAC8nD,gBAAP,CAAwB/J,OAAxB,CAAf,CAVuH,CAYvH;AACA;;AACA,YAAIgK,WAAW,GAAG,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,CAAlB;AACA,YAAIC,OAAO,GAAGD,WAAW,CAACE,MAAZ,CAAmB,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACtD,cAAIC,WAAW,GAAGP,QAAQ,CAACR,gBAAT,CAA0Bc,MAA1B,CAAlB;AAEA,iBAAOxL,QAAQ,CAAC,EAAD,EAAKuL,GAAL,EAAU/uC,eAAe,CAAC,EAAD,EAAKgvC,MAAL,EAAapzC,MAAM,CAACqzC,WAAW,CAAC9lD,OAAZ,CAAoB,IAApB,EAA0B,EAA1B,CAAD,CAAnB,CAAzB,CAAf;AACD,SAJa,EAIX,EAJW,CAAd,CAfuH,CAqBvH;AACA;AACA;AACA;;AACA,YAAI+lD,SAAS,GAAGpH,iBAAiB,KAAK,QAAtB,GAAiCjD,WAAW,CAACkF,GAAZ,GAAkBlF,WAAW,CAACwE,MAA/D,GAAwExE,WAAW,CAACkF,GAApG;AAEA,YAAI7B,MAAM,GAAG;AACX4B,UAAAA,QAAQ,EAAE,UADC;AAEXC,UAAAA,GAAG,EAAEmF,SAAS,GAAGL,OAAO,CAAC,YAAD,CAAnB,GAAoC,IAF9B;AAGX7E,UAAAA,IAAI,EAAEnF,WAAW,CAACmF,IAAZ,GAAmB6E,OAAO,CAAC,aAAD,CAA1B,GAA4C,IAHvC;AAIX5E,UAAAA,KAAK,EAAEpF,WAAW,CAACoF,KAAZ,GAAoB4E,OAAO,CAAC,cAAD,CAA3B,GAA8C;AAJ1C,SAAb;AAOA5G,QAAAA,oBAAoB,CAAC;AAAErD,UAAAA,OAAO,EAAEA,OAAX;AAAoBsD,UAAAA,MAAM,EAAEA;AAA5B,SAAD,CAApB;AACD,OAnCD;AAqCA;;;;;;;;AAMA,UAAIH,uBAAuB,GAAGtjD,OAAO,CAACsjD,uBAAR,GAAkC,SAASA,uBAAT,CAAiCoH,KAAjC,EAAwC;AACtG,YAAIvK,OAAO,GAAGuK,KAAK,CAACvK,OAApB;AAAA,YACID,UAAU,GAAGwK,KAAK,CAACxK,UADvB;AAAA,YAEIiB,WAAW,GAAGuJ,KAAK,CAACvJ,WAFxB;AAIA,YAAI+D,aAAa,GAAGhF,UAAU,CAACC,OAA/B;AACA,YAAIc,iBAAiB,GAAGf,UAAU,CAACE,WAAnC;;AAEA,YAAI,CAAC8E,aAAD,IAAkB,CAACjE,iBAAvB,EAA0C;AACxC;AACD,SAVqG,CAYtG;AACA;AACA;AACA;AACA;;;AACAuC,QAAAA,oBAAoB,CAAC;AAAErD,UAAAA,OAAO,EAAEA,OAAX;AAAoBsD,UAAAA,MAAM,EAAE;AAAEmB,YAAAA,MAAM,EAAE;AAAV;AAA5B,SAAD,CAApB,CAjBsG,CAmBtG;AACA;AACA;;AACA,YAAI+F,oBAAoB,GAAG1J,iBAAiB,CAAC2D,MAA7C;AACA,YAAIgG,qBAAqB,GAAGzJ,WAAW,CAAC+D,aAAD,CAAX,CAA2BN,MAAvD;AACA,YAAIiG,iBAAiB,GAAGF,oBAAoB,GAAGC,qBAA/C,CAxBsG,CA0BtG;AACA;AACA;;AACA,YAAInH,MAAM,GAAG;AACXmB,UAAAA,MAAM,EAAEiG,iBAAiB,GAAG,CAApB,GAAwBA,iBAAiB,GAAG,IAA5C,GAAmD;AADhD,SAAb;AAIArH,QAAAA,oBAAoB,CAAC;AAAErD,UAAAA,OAAO,EAAEA,OAAX;AAAoBsD,UAAAA,MAAM,EAAEA;AAA5B,SAAD,CAApB;AACD,OAlCD;;AAoCA,UAAI6C,aAAa,GAAGtmD,OAAO,CAACsmD,aAAR,GAAwB,SAASA,aAAT,CAAuB/3C,OAAvB,EAAgC;AAC1E;AACA,YAAI,OAAO8gB,WAAP,KAAuB,WAA3B,EAAwC;AACtC,iBAAO,IAAP;AACD,SAJyE,CAM1E;;;AACA,YAAI9gB,OAAO,YAAY8gB,WAAvB,EAAoC;AAClC,iBAAO9gB,OAAP;AACD,SATyE,CAW1E;AACA;AACA;;;AACA,YAAIu8C,SAAS,GAAG,CAAC,GAAG77B,SAAS,CAAC7mB,WAAd,EAA2BmG,OAA3B,CAAhB;;AAEA,YAAI,EAAEu8C,SAAS,YAAYz7B,WAAvB,CAAJ,EAAyC;AACvC;AACA,iBAAO,IAAP;AACD;;AAED,eAAOy7B,SAAP;AACD,OAtBD;;AAwBA,UAAI/G,sBAAsB,GAAG/jD,OAAO,CAAC+jD,sBAAR,GAAiC,SAASA,sBAAT,CAAgCryC,KAAhC,EAAuCnF,KAAvC,EAA8C;AAC1G,YAAIu5C,KAAK,GAAGv5C,KAAK,CAACu5C,KAAlB;AAAA,YACID,QAAQ,GAAGt5C,KAAK,CAACs5C,QADrB;AAEA,YAAIE,iBAAiB,GAAGx5C,KAAK,CAACw5C,iBAA9B;AAAA,YACIvW,cAAc,GAAGjjC,KAAK,CAACijC,cAD3B;AAAA,YAEIiY,MAAM,GAAGl7C,KAAK,CAACk7C,MAFnB;AAKA3B,QAAAA,KAAK,IAAIp0C,KAAK,GAAG89B,cAAjB;AACAqW,QAAAA,QAAQ,IAAIn0C,KAAK,GAAGq0C,iBAApB;AAEA,YAAIgF,aAAa,GAAG,CAAC,WAAD,EAAc,SAAd,CAApB;AAEA,eAAOA,aAAa,CAACj+C,GAAd,CAAkB,UAAU8gB,IAAV,EAAgB;AACvC,iBAAOA,IAAI,GAAG,GAAP,GAAai4B,QAAb,GAAwB,KAAxB,GAAgC4B,MAAhC,GAAyC,GAAzC,GAA+C3B,KAA/C,GAAuD,IAA9D;AACD,SAFM,EAEJh/B,IAFI,CAEC,IAFD,CAAP;AAGD,OAhBD;AAkBA;;AAAO,KAl7TG;AAm7TV;;AACA;AAAO,cAAS7mB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0qD,8BAAJ,EAAoCC,4BAApC,EAAkEC,6BAAlE;AAAgG;;;;;;;AAKhG,OAAC,UAAU/oD,MAAV,EAAkBpC,OAAlB,EAA2B;AAC3B,YAAI,IAAJ,EAAU;AACT,YAAEkrD,4BAA4B,GAAG,CAACjrD,OAAD,EAAUC,MAAV,CAA/B,EAAkD+qD,8BAA8B,GAAIjrD,OAApF,EACAmrD,6BAA6B,GAAI,OAAOF,8BAAP,KAA0C,UAA1C,GAChCA,8BAA8B,CAAC3jD,KAA/B,CAAqCrH,OAArC,EAA8CirD,4BAA9C,CADgC,GAC+CD,8BAFhF,EAGAE,6BAA6B,KAAK/jD,SAAlC,KAAgDlH,MAAM,CAACD,OAAP,GAAiBkrD,6BAAjE,CAHF;AAIA,SALD,MAKO,IAAI,OAAOlrD,OAAP,KAAmB,WAAnB,IAAkC,OAAOC,MAAP,KAAkB,WAAxD,EAAqE;AAC3EF,UAAAA,OAAO,CAACC,OAAD,EAAUC,MAAV,CAAP;AACA,SAFM,MAEA;AACN,cAAIkrD,GAAG,GAAG;AACTnrD,YAAAA,OAAO,EAAE;AADA,WAAV;AAGAD,UAAAA,OAAO,CAACorD,GAAG,CAACnrD,OAAL,EAAcmrD,GAAd,CAAP;AACAhpD,UAAAA,MAAM,CAACipD,QAAP,GAAkBD,GAAG,CAACnrD,OAAtB;AACA;AACD,OAfD,EAeG,IAfH,EAeS,UAAUA,OAAV,EAAmBC,MAAnB,EAA2B;AACnC;;AAEA,YAAI6M,GAAG,GAAG,OAAOu+C,GAAP,KAAe,UAAf,GAA4B,IAAIA,GAAJ,EAA5B,GAAyC,YAAY;AAC9D,cAAI7wC,IAAI,GAAG,EAAX;AACA,cAAImG,MAAM,GAAG,EAAb;AAEA,iBAAO;AACN7a,YAAAA,GAAG,EAAE,SAASA,GAAT,CAAaX,GAAb,EAAkB;AACtB,qBAAOqV,IAAI,CAAC2E,OAAL,CAAaha,GAAb,IAAoB,CAAC,CAA5B;AACA,aAHK;AAIN9D,YAAAA,GAAG,EAAE,SAASA,GAAT,CAAa8D,GAAb,EAAkB;AACtB,qBAAOwb,MAAM,CAACnG,IAAI,CAAC2E,OAAL,CAAaha,GAAb,CAAD,CAAb;AACA,aANK;AAONmF,YAAAA,GAAG,EAAE,SAASA,GAAT,CAAanF,GAAb,EAAkBuC,KAAlB,EAAyB;AAC7B,kBAAI8S,IAAI,CAAC2E,OAAL,CAAaha,GAAb,MAAsB,CAAC,CAA3B,EAA8B;AAC7BqV,gBAAAA,IAAI,CAAC7L,IAAL,CAAUxJ,GAAV;AACAwb,gBAAAA,MAAM,CAAChS,IAAP,CAAYjH,KAAZ;AACA;AACD,aAZK;AAaN,sBAAU,SAAS4jD,OAAT,CAAiBnmD,GAAjB,EAAsB;AAC/B,kBAAIuM,KAAK,GAAG8I,IAAI,CAAC2E,OAAL,CAAaha,GAAb,CAAZ;;AACA,kBAAIuM,KAAK,GAAG,CAAC,CAAb,EAAgB;AACf8I,gBAAAA,IAAI,CAACmkB,MAAL,CAAYjtB,KAAZ,EAAmB,CAAnB;AACAiP,gBAAAA,MAAM,CAACge,MAAP,CAAcjtB,KAAd,EAAqB,CAArB;AACA;AACD;AAnBK,WAAP;AAqBA,SAzBiD,EAAlD;;AA2BA,YAAI65C,WAAW,GAAG,SAASA,WAAT,CAAqBzqD,IAArB,EAA2B;AAC5C,iBAAO,IAAI0qD,KAAJ,CAAU1qD,IAAV,EAAgB;AAAE2qD,YAAAA,OAAO,EAAE;AAAX,WAAhB,CAAP;AACA,SAFD;;AAGA,YAAI;AACH,cAAID,KAAJ,CAAU,MAAV;AACA,SAFD,CAEE,OAAO7gD,CAAP,EAAU;AACX;AACA4gD,UAAAA,WAAW,GAAG,qBAAUzqD,IAAV,EAAgB;AAC7B,gBAAI4qD,GAAG,GAAG5mD,QAAQ,CAACymD,WAAT,CAAqB,OAArB,CAAV;AACAG,YAAAA,GAAG,CAACC,SAAJ,CAAc7qD,IAAd,EAAoB,IAApB,EAA0B,KAA1B;AACA,mBAAO4qD,GAAP;AACA,WAJD;AAKA;;AAED,iBAAS93B,MAAT,CAAgBg4B,EAAhB,EAAoB;AACnB,cAAI,CAACA,EAAD,IAAO,CAACA,EAAE,CAACvhD,QAAX,IAAuBuhD,EAAE,CAACvhD,QAAH,KAAgB,UAAvC,IAAqDyC,GAAG,CAAChH,GAAJ,CAAQ8lD,EAAR,CAAzD,EAAsE;AAEtE,cAAIC,YAAY,GAAG,IAAnB;AACA,cAAIC,WAAW,GAAGF,EAAE,CAACE,WAArB;AACA,cAAIC,YAAY,GAAG,IAAnB;;AAEA,mBAASC,IAAT,GAAgB;AACf,gBAAIpvC,KAAK,GAAGxa,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,CAAZ;;AAEA,gBAAIhvC,KAAK,CAACqvC,MAAN,KAAiB,UAArB,EAAiC;AAChCL,cAAAA,EAAE,CAAChvC,KAAH,CAASqvC,MAAT,GAAkB,MAAlB;AACA,aAFD,MAEO,IAAIrvC,KAAK,CAACqvC,MAAN,KAAiB,MAArB,EAA6B;AACnCL,cAAAA,EAAE,CAAChvC,KAAH,CAASqvC,MAAT,GAAkB,YAAlB;AACA;;AAED,gBAAIrvC,KAAK,CAACsvC,SAAN,KAAoB,aAAxB,EAAuC;AACtCL,cAAAA,YAAY,GAAG,EAAEzyC,UAAU,CAACwD,KAAK,CAACuvC,UAAP,CAAV,GAA+B/yC,UAAU,CAACwD,KAAK,CAACwvC,aAAP,CAA3C,CAAf;AACA,aAFD,MAEO;AACNP,cAAAA,YAAY,GAAGzyC,UAAU,CAACwD,KAAK,CAACyvC,cAAP,CAAV,GAAmCjzC,UAAU,CAACwD,KAAK,CAAC0vC,iBAAP,CAA5D;AACA,aAbc,CAcf;;;AACA,gBAAInwC,KAAK,CAAC0vC,YAAD,CAAT,EAAyB;AACxBA,cAAAA,YAAY,GAAG,CAAf;AACA;;AAEDlf,YAAAA,MAAM;AACN;;AAED,mBAAS4f,cAAT,CAAwB7kD,KAAxB,EAA+B;AAC9B;AACC;AACA;AACA;AACA,kBAAIkiD,KAAK,GAAGgC,EAAE,CAAChvC,KAAH,CAASgtC,KAArB;AACAgC,cAAAA,EAAE,CAAChvC,KAAH,CAASgtC,KAAT,GAAiB,KAAjB,CALD,CAMC;;AACA;;AACAgC,cAAAA,EAAE,CAACY,WAAH;AACA;;AACAZ,cAAAA,EAAE,CAAChvC,KAAH,CAASgtC,KAAT,GAAiBA,KAAjB;AACA;AAEDgC,YAAAA,EAAE,CAAChvC,KAAH,CAAS6vC,SAAT,GAAqB/kD,KAArB;AACA;;AAED,mBAASglD,kBAAT,CAA4BxlC,EAA5B,EAAgC;AAC/B,gBAAI3Z,GAAG,GAAG,EAAV;;AAEA,mBAAO2Z,EAAE,IAAIA,EAAE,CAACjb,UAAT,IAAuBib,EAAE,CAACjb,UAAH,YAAyBwkB,OAAvD,EAAgE;AAC/D,kBAAIvJ,EAAE,CAACjb,UAAH,CAAc0gD,SAAlB,EAA6B;AAC5Bp/C,gBAAAA,GAAG,CAACoB,IAAJ,CAAS;AACRF,kBAAAA,IAAI,EAAEyY,EAAE,CAACjb,UADD;AAER0gD,kBAAAA,SAAS,EAAEzlC,EAAE,CAACjb,UAAH,CAAc0gD;AAFjB,iBAAT;AAIA;;AACDzlC,cAAAA,EAAE,GAAGA,EAAE,CAACjb,UAAR;AACA;;AAED,mBAAOsB,GAAP;AACA;;AAED,mBAAS0+C,MAAT,GAAkB;AACjB,gBAAIW,cAAc,GAAGhB,EAAE,CAAChvC,KAAH,CAASgoC,MAA9B;AACA,gBAAIiI,SAAS,GAAGH,kBAAkB,CAACd,EAAD,CAAlC;AACA,gBAAIkB,MAAM,GAAGhoD,QAAQ,CAAC0c,eAAT,IAA4B1c,QAAQ,CAAC0c,eAAT,CAAyBmrC,SAAlE,CAHiB,CAG4D;;AAE7Ef,YAAAA,EAAE,CAAChvC,KAAH,CAASgoC,MAAT,GAAkB,MAAlB;AAEA,gBAAImI,SAAS,GAAGnB,EAAE,CAACoB,YAAH,GAAkBnB,YAAlC;;AAEA,gBAAID,EAAE,CAACoB,YAAH,KAAoB,CAAxB,EAA2B;AAC1B;AACApB,cAAAA,EAAE,CAAChvC,KAAH,CAASgoC,MAAT,GAAkBgI,cAAlB;AACA;AACA;;AAEDhB,YAAAA,EAAE,CAAChvC,KAAH,CAASgoC,MAAT,GAAkBmI,SAAS,GAAG,IAA9B,CAfiB,CAiBjB;;AACAjB,YAAAA,WAAW,GAAGF,EAAE,CAACE,WAAjB,CAlBiB,CAoBjB;;AACAe,YAAAA,SAAS,CAAC9nD,OAAV,CAAkB,UAAUmiB,EAAV,EAAc;AAC/BA,cAAAA,EAAE,CAACzY,IAAH,CAAQk+C,SAAR,GAAoBzlC,EAAE,CAACylC,SAAvB;AACA,aAFD;;AAIA,gBAAIG,MAAJ,EAAY;AACXhoD,cAAAA,QAAQ,CAAC0c,eAAT,CAAyBmrC,SAAzB,GAAqCG,MAArC;AACA;AACD;;AAED,mBAASngB,MAAT,GAAkB;AACjBsf,YAAAA,MAAM;AAEN,gBAAIgB,WAAW,GAAG5qD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAACwyC,EAAE,CAAChvC,KAAH,CAASgoC,MAAV,CAArB,CAAlB;AACA,gBAAIqF,QAAQ,GAAG7nD,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,CAAf,CAJiB,CAMjB;;AACA,gBAAIuB,YAAY,GAAGlD,QAAQ,CAACiC,SAAT,KAAuB,aAAvB,GAAuC7pD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAAC6wC,QAAQ,CAACrF,MAAV,CAArB,CAAvC,GAAiFgH,EAAE,CAACwB,YAAvG,CAPiB,CASjB;AACA;;AACA,gBAAID,YAAY,KAAKF,WAArB,EAAkC;AACjC,kBAAIhD,QAAQ,CAACwC,SAAT,KAAuB,QAA3B,EAAqC;AACpCF,gBAAAA,cAAc,CAAC,QAAD,CAAd;AACAN,gBAAAA,MAAM;AACNkB,gBAAAA,YAAY,GAAGlD,QAAQ,CAACiC,SAAT,KAAuB,aAAvB,GAAuC7pD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAAChX,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,EAAkChH,MAAnC,CAArB,CAAvC,GAA0GgH,EAAE,CAACwB,YAA5H;AACA;AACD,aAND,MAMO;AACN;AACA,kBAAInD,QAAQ,CAACwC,SAAT,KAAuB,QAA3B,EAAqC;AACpCF,gBAAAA,cAAc,CAAC,QAAD,CAAd;AACAN,gBAAAA,MAAM;AACNkB,gBAAAA,YAAY,GAAGlD,QAAQ,CAACiC,SAAT,KAAuB,aAAvB,GAAuC7pD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAAChX,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,EAAkChH,MAAnC,CAArB,CAAvC,GAA0GgH,EAAE,CAACwB,YAA5H;AACA;AACD;;AAED,gBAAIrB,YAAY,KAAKoB,YAArB,EAAmC;AAClCpB,cAAAA,YAAY,GAAGoB,YAAf;AACA,kBAAIzB,GAAG,GAAGH,WAAW,CAAC,kBAAD,CAArB;;AACA,kBAAI;AACHK,gBAAAA,EAAE,CAACyB,aAAH,CAAiB3B,GAAjB;AACA,eAFD,CAEE,OAAOrkC,GAAP,EAAY,CACb;AACA;AACA;AACD;AACD;;AAED,cAAIimC,UAAU,GAAG,SAASA,UAAT,GAAsB;AACtC,gBAAI1B,EAAE,CAACE,WAAH,KAAmBA,WAAvB,EAAoC;AACnCnf,cAAAA,MAAM;AACN;AACD,WAJD;;AAMA,cAAI4gB,OAAO,GAAI,UAAU3wC,KAAV,EAAiB;AAC/Bxa,YAAAA,MAAM,CAACm5B,mBAAP,CAA2B,QAA3B,EAAqC+xB,UAArC,EAAiD,KAAjD;AACA1B,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,OAAvB,EAAgCoR,MAAhC,EAAwC,KAAxC;AACAif,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,OAAvB,EAAgCoR,MAAhC,EAAwC,KAAxC;AACAif,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,kBAAvB,EAA2CgyB,OAA3C,EAAoD,KAApD;AACA3B,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,iBAAvB,EAA0CoR,MAA1C,EAAkD,KAAlD;AAEA1rC,YAAAA,MAAM,CAACuZ,IAAP,CAAYoC,KAAZ,EAAmB7X,OAAnB,CAA2B,UAAUI,GAAV,EAAe;AACzCymD,cAAAA,EAAE,CAAChvC,KAAH,CAASzX,GAAT,IAAgByX,KAAK,CAACzX,GAAD,CAArB;AACA,aAFD;AAIA2H,YAAAA,GAAG,CAAC,QAAD,CAAH,CAAc8+C,EAAd;AACA,WAZa,CAYX9oD,IAZW,CAYN8oD,EAZM,EAYF;AACXhH,YAAAA,MAAM,EAAEgH,EAAE,CAAChvC,KAAH,CAASgoC,MADN;AAEXqH,YAAAA,MAAM,EAAEL,EAAE,CAAChvC,KAAH,CAASqvC,MAFN;AAGXQ,YAAAA,SAAS,EAAEb,EAAE,CAAChvC,KAAH,CAAS6vC,SAHT;AAIXe,YAAAA,SAAS,EAAE5B,EAAE,CAAChvC,KAAH,CAAS4wC,SAJT;AAKXC,YAAAA,QAAQ,EAAE7B,EAAE,CAAChvC,KAAH,CAAS6wC;AALR,WAZE,CAAd;;AAoBA7B,UAAAA,EAAE,CAACxoC,gBAAH,CAAoB,kBAApB,EAAwCmqC,OAAxC,EAAiD,KAAjD,EA5JmB,CA8JnB;AACA;AACA;;AACA,cAAI,sBAAsB3B,EAAtB,IAA4B,aAAaA,EAA7C,EAAiD;AAChDA,YAAAA,EAAE,CAACxoC,gBAAH,CAAoB,OAApB,EAA6BupB,MAA7B,EAAqC,KAArC;AACA;;AAEDvqC,UAAAA,MAAM,CAACghB,gBAAP,CAAwB,QAAxB,EAAkCkqC,UAAlC,EAA8C,KAA9C;AACA1B,UAAAA,EAAE,CAACxoC,gBAAH,CAAoB,OAApB,EAA6BupB,MAA7B,EAAqC,KAArC;AACAif,UAAAA,EAAE,CAACxoC,gBAAH,CAAoB,iBAApB,EAAuCupB,MAAvC,EAA+C,KAA/C;AACAif,UAAAA,EAAE,CAAChvC,KAAH,CAAS4wC,SAAT,GAAqB,QAArB;AACA5B,UAAAA,EAAE,CAAChvC,KAAH,CAAS6wC,QAAT,GAAoB,YAApB;AAEA3gD,UAAAA,GAAG,CAACxC,GAAJ,CAAQshD,EAAR,EAAY;AACX2B,YAAAA,OAAO,EAAEA,OADE;AAEX5gB,YAAAA,MAAM,EAAEA;AAFG,WAAZ;AAKAqf,UAAAA,IAAI;AACJ;;AAED,iBAASuB,OAAT,CAAiB3B,EAAjB,EAAqB;AACpB,cAAIzqC,OAAO,GAAGrU,GAAG,CAACzL,GAAJ,CAAQuqD,EAAR,CAAd;;AACA,cAAIzqC,OAAJ,EAAa;AACZA,YAAAA,OAAO,CAACosC,OAAR;AACA;AACD;;AAED,iBAAS5gB,MAAT,CAAgBif,EAAhB,EAAoB;AACnB,cAAIzqC,OAAO,GAAGrU,GAAG,CAACzL,GAAJ,CAAQuqD,EAAR,CAAd;;AACA,cAAIzqC,OAAJ,EAAa;AACZA,YAAAA,OAAO,CAACwrB,MAAR;AACA;AACD;;AAED,YAAIye,QAAQ,GAAG,IAAf,CA7OmC,CA+OnC;;AACA,YAAI,OAAOhpD,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAAC8nD,gBAAd,KAAmC,UAAxE,EAAoF;AACnFkB,UAAAA,QAAQ,GAAG,kBAAUlkC,EAAV,EAAc;AACxB,mBAAOA,EAAP;AACA,WAFD;;AAGAkkC,UAAAA,QAAQ,CAACmC,OAAT,GAAmB,UAAUrmC,EAAV,EAAc;AAChC,mBAAOA,EAAP;AACA,WAFD;;AAGAkkC,UAAAA,QAAQ,CAACze,MAAT,GAAkB,UAAUzlB,EAAV,EAAc;AAC/B,mBAAOA,EAAP;AACA,WAFD;AAGA,SAVD,MAUO;AACNkkC,UAAAA,QAAQ,GAAG,kBAAUlkC,EAAV,EAAcjQ,OAAd,EAAuB;AACjC,gBAAIiQ,EAAJ,EAAQ;AACP/Z,cAAAA,KAAK,CAACvL,SAAN,CAAgBmD,OAAhB,CAAwBrE,IAAxB,CAA6BwmB,EAAE,CAAChiB,MAAH,GAAYgiB,EAAZ,GAAiB,CAACA,EAAD,CAA9C,EAAoD,UAAU1D,CAAV,EAAa;AAChE,uBAAOoQ,MAAM,CAACpQ,CAAD,EAAIvM,OAAJ,CAAb;AACA,eAFD;AAGA;;AACD,mBAAOiQ,EAAP;AACA,WAPD;;AAQAkkC,UAAAA,QAAQ,CAACmC,OAAT,GAAmB,UAAUrmC,EAAV,EAAc;AAChC,gBAAIA,EAAJ,EAAQ;AACP/Z,cAAAA,KAAK,CAACvL,SAAN,CAAgBmD,OAAhB,CAAwBrE,IAAxB,CAA6BwmB,EAAE,CAAChiB,MAAH,GAAYgiB,EAAZ,GAAiB,CAACA,EAAD,CAA9C,EAAoDqmC,OAApD;AACA;;AACD,mBAAOrmC,EAAP;AACA,WALD;;AAMAkkC,UAAAA,QAAQ,CAACze,MAAT,GAAkB,UAAUzlB,EAAV,EAAc;AAC/B,gBAAIA,EAAJ,EAAQ;AACP/Z,cAAAA,KAAK,CAACvL,SAAN,CAAgBmD,OAAhB,CAAwBrE,IAAxB,CAA6BwmB,EAAE,CAAChiB,MAAH,GAAYgiB,EAAZ,GAAiB,CAACA,EAAD,CAA9C,EAAoDylB,MAApD;AACA;;AACD,mBAAOzlB,EAAP;AACA,WALD;AAMA;;AAEDjnB,QAAAA,MAAM,CAACD,OAAP,GAAiBorD,QAAjB;AACA,OAjSD;AAmSA;;AAAO,KA9tUG;AA+tUV;;AACA;AAAO,cAASnrD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA1H,MAAAA,OAAO,WAAP,GAAkB,UAAUmvC,QAAV,EAAoB;AACpC,eAAO,IAAIue,UAAU,WAAd,CAAuB;AAC5BC,UAAAA,OAAO,EAAEC,OAAO,CAACze,QAAD,CAAP,IAAqBye,OAAO,CAACC,EADV;AAE5BC,UAAAA,MAAM,EAAE3e;AAFoB,SAAvB,CAAP;AAID,OALD;;AAOA,UAAI4e,SAAS,GAAGztD,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIotD,UAAU,GAAGjyC,sBAAsB,CAACsyC,SAAD,CAAvC;;AAEA,UAAIC,KAAK,GAAG1tD,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI2tD,MAAM,GAAGxyC,sBAAsB,CAACuyC,KAAD,CAAnC;;AAEA,UAAIE,KAAK,GAAG5tD,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI6tD,MAAM,GAAG1yC,sBAAsB,CAACyyC,KAAD,CAAnC;;AAEA,UAAIE,GAAG,GAAG9tD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAI+tD,IAAI,GAAG5yC,sBAAsB,CAAC2yC,GAAD,CAAjC;;AAEA,UAAIE,KAAK,GAAGhuD,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAIiuD,MAAM,GAAG9yC,sBAAsB,CAAC6yC,KAAD,CAAnC;;AAEA,UAAIE,GAAG,GAAGluD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAImuD,IAAI,GAAGhzC,sBAAsB,CAAC+yC,GAAD,CAAjC;;AAEA,UAAIE,GAAG,GAAGpuD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAIquD,IAAI,GAAGlzC,sBAAsB,CAACizC,GAAD,CAAjC;;AAEA,UAAIE,GAAG,GAAGtuD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAIuuD,IAAI,GAAGpzC,sBAAsB,CAACmzC,GAAD,CAAjC;;AAEA,eAASnzC,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI4oD,OAAO,GAAG;AACZ,cAAMK,MAAM,WADA;AAEZ,iBAASA,MAAM,WAFH;AAGZ,iBAASE,MAAM,WAHH;AAIZ,cAAME,IAAI,WAJE;AAKZ,iBAASE,MAAM,WALH;AAMZ,cAAME,IAAI,WANE;AAOZ,cAAME,IAAI,WAPE;AAQZ,cAAME,IAAI;AARE,OAAd;AAWA;AAAO,KA7xUG;AA8xUV;;AACA;AAAO,cAAS5uD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2qD,4BAAJ,EAAkCC,6BAAlC,CAFsD,CAEU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGC,iBAASprD,IAAT,EAAeC,OAAf,EAAwB;AACvB,YAAI,IAAJ,EAAU;AACR,YAAEkrD,4BAA4B,GAAG,EAA/B,EAAmCC,6BAA6B,GAAG,YAAW;AAC9E,mBAAOnrD,OAAO,CAACD,IAAD,CAAd;AACD,WAFoE,CAEnEuH,KAFmE,CAE7DrH,OAF6D,EAEpDirD,4BAFoD,CAAnE,EAGFC,6BAA6B,KAAK/jD,SAAlC,KAAgDlH,MAAM,CAACD,OAAP,GAAiBkrD,6BAAjE,CAHA;AAID,SALD,MAKO,IAAI,SAAOlrD,OAAP,MAAmB,QAAvB,EAAiC;AACtCC,UAAAA,MAAM,CAACD,OAAP,GAAiBD,OAAO,CAACD,IAAD,CAAxB;AACD,SAFM,MAEA;AACLA,UAAAA,IAAI,CAACgvD,QAAL,GAAgB/uD,OAAO,CAACD,IAAD,CAAvB;AACD;AACF,OAXA,EAWC,IAXD,EAWO,UAASA,IAAT,EAAe;AACrB,qBADqB,CAGrB;;AACA,iBAASgvD,QAAT,CAAkB73C,OAAlB,EAA2B;AACzBA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,eAAK02C,OAAL,GAAe,EAAf;AACA,eAAKnoD,MAAL,CAAYyR,OAAO,CAAC02C,OAAR,IAAmB,EAA/B;AACA,eAAKoB,aAAL,GAAqB93C,OAAO,CAAC62C,MAAR,IAAkB,IAAvC;AACA,eAAKkB,YAAL,GAAoB,CAAC,CAAC/3C,OAAO,CAAC+3C,YAA9B;AACA,eAAK37B,IAAL,GAAYpc,OAAO,CAACoc,IAAR,IAAgBA,IAA5B;AACD,SAXoB,CAarB;;;AACAy7B,QAAAA,QAAQ,CAACG,OAAT,GAAmB,OAAnB,CAdqB,CAgBrB;AACA;AACA;;AACAH,QAAAA,QAAQ,CAACltD,SAAT,CAAmBksD,MAAnB,GAA4B,UAASoB,SAAT,EAAoB;AAC9C,cAAIA,SAAJ,EAAe,KAAKH,aAAL,GAAqBG,SAArB;AACf,iBAAO,KAAKH,aAAZ;AACD,SAHD,CAnBqB,CAwBrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAD,QAAAA,QAAQ,CAACltD,SAAT,CAAmB4D,MAAnB,GAA4B,UAAS2pD,WAAT,EAAsBC,MAAtB,EAA8B;AACxD,cAAIC,MAAJ;;AAEA,eAAK,IAAIlqD,GAAT,IAAgBgqD,WAAhB,EAA6B;AAC3B,gBAAIA,WAAW,CAACttD,cAAZ,CAA2BsD,GAA3B,CAAJ,EAAqC;AACnCkqD,cAAAA,MAAM,GAAGF,WAAW,CAAChqD,GAAD,CAApB;AACA,kBAAIiqD,MAAJ,EAAYjqD,GAAG,GAAGiqD,MAAM,GAAG,GAAT,GAAejqD,GAArB;;AACZ,kBAAI,SAAOkqD,MAAP,MAAkB,QAAtB,EAAgC;AAC9B,qBAAK7pD,MAAL,CAAY6pD,MAAZ,EAAoBlqD,GAApB;AACD,eAFD,MAEO;AACL,qBAAKwoD,OAAL,CAAaxoD,GAAb,IAAoBkqD,MAApB;AACD;AACF;AACF;AACF,SAdD,CAzEqB,CAyFrB;AACA;AACA;AACA;AACA;;;AACAP,QAAAA,QAAQ,CAACltD,SAAT,CAAmB0hB,KAAnB,GAA2B,YAAW;AACpC,eAAKqqC,OAAL,GAAe,EAAf;AACD,SAFD,CA9FqB,CAkGrB;AACA;AACA;AACA;AACA;;;AACAmB,QAAAA,QAAQ,CAACltD,SAAT,CAAmB8C,OAAnB,GAA6B,UAAS4qD,UAAT,EAAqB;AAChD,eAAKhsC,KAAL;AACA,eAAK9d,MAAL,CAAY8pD,UAAZ;AACD,SAHD,CAvGqB,CA6GrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAR,QAAAA,QAAQ,CAACltD,SAAT,CAAmBouB,CAAnB,GAAuB,UAAS7qB,GAAT,EAAc8R,OAAd,EAAuB;AAC5C,cAAIo4C,MAAJ,EAAY5rD,MAAZ;AACAwT,UAAAA,OAAO,GAAGA,OAAO,IAAI,IAAX,GAAkB,EAAlB,GAAuBA,OAAjC,CAF4C,CAG5C;;AACA,cAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BA,YAAAA,OAAO,GAAG;AAAC49B,cAAAA,WAAW,EAAE59B;AAAd,aAAV;AACD;;AACD,cAAI,OAAO,KAAK02C,OAAL,CAAaxoD,GAAb,CAAP,KAA6B,QAAjC,EAA2C;AACzCkqD,YAAAA,MAAM,GAAG,KAAK1B,OAAL,CAAaxoD,GAAb,CAAT;AACD,WAFD,MAEO,IAAI,OAAO8R,OAAO,CAACiwB,CAAf,KAAqB,QAAzB,EAAmC;AACxCmoB,YAAAA,MAAM,GAAGp4C,OAAO,CAACiwB,CAAjB;AACD,WAFM,MAEA,IAAI,KAAK8nB,YAAT,EAAuB;AAC5BK,YAAAA,MAAM,GAAGlqD,GAAT;AACD,WAFM,MAEA;AACL,iBAAKkuB,IAAL,CAAU,mCAAiCluB,GAAjC,GAAqC,GAA/C;AACA1B,YAAAA,MAAM,GAAG0B,GAAT;AACD;;AACD,cAAI,OAAOkqD,MAAP,KAAkB,QAAtB,EAAgC;AAC9Bp4C,YAAAA,OAAO,GAAGs4C,KAAK,CAACt4C,OAAD,CAAf;AACAxT,YAAAA,MAAM,GAAG+rD,gBAAgB,CAACH,MAAD,EAAS,KAAKN,aAAd,EAA6B93C,OAAO,CAAC49B,WAArC,CAAzB;AACApxC,YAAAA,MAAM,GAAGgsD,WAAW,CAAChsD,MAAD,EAASwT,OAAT,CAApB;AACD;;AACD,iBAAOxT,MAAP;AACD,SAvBD,CAtIqB,CAgKrB;AACA;AACA;;;AACAqrD,QAAAA,QAAQ,CAACltD,SAAT,CAAmBkE,GAAnB,GAAyB,UAASX,GAAT,EAAc;AACrC,iBAAOA,GAAG,IAAI,KAAKwoD,OAAnB;AACD,SAFD,CAnKqB,CAwKrB;AACA;;;AACA,YAAI+B,SAAS,GAAG,MAAhB,CA1KqB,CA4KrB;;AACA,YAAIC,WAAW,GAAG;AAChBC,UAAAA,OAAO,EAAI,iBAAStuD,CAAT,EAAY;AAAE,mBAAO,CAAP;AAAW,WADpB;AAEhBuuD,UAAAA,MAAM,EAAK,gBAASvuD,CAAT,EAAY;AAAE,mBAAOA,CAAC,KAAK,CAAN,GAAU,CAAV,GAAc,CAArB;AAAyB,WAFlC;AAGhBwuD,UAAAA,MAAM,EAAK,gBAASxuD,CAAT,EAAY;AAAE,mBAAOA,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAnB;AAAuB,WAHhC;AAIhByuD,UAAAA,OAAO,EAAI,iBAASzuD,CAAT,EAAY;AAAE,mBAAOA,CAAC,GAAG,EAAJ,KAAW,CAAX,IAAgBA,CAAC,GAAG,GAAJ,KAAY,EAA5B,GAAiC,CAAjC,GAAqCA,CAAC,GAAG,EAAJ,IAAU,CAAV,IAAeA,CAAC,GAAG,EAAJ,IAAU,CAAzB,KAA+BA,CAAC,GAAG,GAAJ,GAAU,EAAV,IAAgBA,CAAC,GAAG,GAAJ,IAAW,EAA1D,IAAgE,CAAhE,GAAoE,CAAhH;AAAoH,WAJ7H;AAKhB0uD,UAAAA,KAAK,EAAM,eAAS1uD,CAAT,EAAY;AAAE,mBAAQA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAiBA,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAI,CAAhB,GAAqB,CAArB,GAAyB,CAAhD;AAAoD,WAL7D;AAMhB2uD,UAAAA,MAAM,EAAK,gBAAS3uD,CAAT,EAAY;AAAE,mBAAQA,CAAC,KAAK,CAAN,GAAU,CAAV,GAAcA,CAAC,GAAG,EAAJ,IAAU,CAAV,IAAeA,CAAC,GAAG,EAAJ,IAAU,CAAzB,KAA+BA,CAAC,GAAG,GAAJ,GAAU,EAAV,IAAgBA,CAAC,GAAG,GAAJ,IAAW,EAA1D,IAAgE,CAAhE,GAAoE,CAA1F;AAA+F,WANxG;AAOhB4uD,UAAAA,SAAS,EAAE,mBAAS5uD,CAAT,EAAY;AAAE,mBAAQA,CAAC,GAAG,EAAJ,KAAW,CAAX,IAAgBA,CAAC,GAAG,GAAJ,KAAY,EAA7B,GAAmC,CAAnC,GAAuC,CAA9C;AAAkD;AAP3D,SAAlB,CA7KqB,CAuLrB;;AACA,YAAI6uD,qBAAqB,GAAG;AAC1BP,UAAAA,OAAO,EAAI,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,EAAiD,IAAjD,CADe;AAE1BC,UAAAA,MAAM,EAAK,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,EAAiD,IAAjD,EAAuD,IAAvD,EAA6D,IAA7D,EAAmE,IAAnE,EAAyE,IAAzE,CAFe;AAG1BC,UAAAA,MAAM,EAAK,CAAC,IAAD,EAAO,IAAP,EAAa,OAAb,CAHe;AAI1BC,UAAAA,OAAO,EAAI,CAAC,IAAD,EAAO,IAAP,CAJe;AAK1BC,UAAAA,KAAK,EAAM,CAAC,IAAD,CALe;AAM1BC,UAAAA,MAAM,EAAK,CAAC,IAAD,CANe;AAO1BC,UAAAA,SAAS,EAAE,CAAC,IAAD;AAPe,SAA5B;;AAUA,iBAASE,aAAT,CAAuBC,OAAvB,EAAgC;AAC9B,cAAIpqD,IAAJ;AAAA,cAAUqqD,KAAV;AAAA,cAAiB7vD,CAAjB;AAAA,cAAoBiQ,GAAG,GAAG,EAA1B;;AACA,eAAKzK,IAAL,IAAaoqD,OAAb,EAAsB;AACpB,gBAAIA,OAAO,CAACxuD,cAAR,CAAuBoE,IAAvB,CAAJ,EAAkC;AAChCqqD,cAAAA,KAAK,GAAGD,OAAO,CAACpqD,IAAD,CAAf;;AACA,mBAAKxF,CAAL,IAAU6vD,KAAV,EAAiB;AACf5/C,gBAAAA,GAAG,CAAC4/C,KAAK,CAAC7vD,CAAD,CAAN,CAAH,GAAgBwF,IAAhB;AACD;AACF;AACF;;AACD,iBAAOyK,GAAP;AACD,SA7MoB,CA+MrB;;;AACA,iBAASlM,IAAT,CAAcC,GAAd,EAAkB;AAChB,cAAI8rD,MAAM,GAAG,YAAb;AACA,iBAAO9rD,GAAG,CAACC,OAAJ,CAAY6rD,MAAZ,EAAoB,EAApB,CAAP;AACD,SAnNoB,CAqNrB;AACA;AACA;;;AACA,iBAASf,gBAAT,CAA0B9gC,IAA1B,EAAgCo/B,MAAhC,EAAwC9gD,KAAxC,EAA8C;AAC5C,cAAI0D,GAAJ,EAAS8/C,KAAT,EAAgBC,UAAhB;;AACA,cAAIzjD,KAAK,IAAI,IAAT,IAAiB0hB,IAArB,EAA2B;AACzB8hC,YAAAA,KAAK,GAAG9hC,IAAI,CAAC5lB,KAAL,CAAW4mD,SAAX,CAAR;AACAe,YAAAA,UAAU,GAAGD,KAAK,CAACE,eAAe,CAAC5C,MAAD,EAAS9gD,KAAT,CAAhB,CAAL,IAAyCwjD,KAAK,CAAC,CAAD,CAA3D;AACA9/C,YAAAA,GAAG,GAAGlM,IAAI,CAACisD,UAAD,CAAV;AACD,WAJD,MAIO;AACL//C,YAAAA,GAAG,GAAGge,IAAN;AACD;;AACD,iBAAOhe,GAAP;AACD;;AAED,iBAASigD,cAAT,CAAwB7C,MAAxB,EAAgC;AAC9B,cAAI8C,gBAAgB,GAAGR,aAAa,CAACD,qBAAD,CAApC;AACA,iBAAOS,gBAAgB,CAAC9C,MAAD,CAAhB,IAA4B8C,gBAAgB,CAAC/C,EAApD;AACD;;AAED,iBAAS6C,eAAT,CAAyB5C,MAAzB,EAAiC9gD,KAAjC,EAAwC;AACtC,iBAAO2iD,WAAW,CAACgB,cAAc,CAAC7C,MAAD,CAAf,CAAX,CAAoC9gD,KAApC,CAAP;AACD,SA3OoB,CA6OrB;AACA;AACA;AACA;;;AACA,iBAASyiD,WAAT,CAAqBJ,MAArB,EAA6Bp4C,OAA7B,EAAsC;AACpC,eAAK,IAAIsqB,GAAT,IAAgBtqB,OAAhB,EAAyB;AACvB,gBAAIsqB,GAAG,KAAK,GAAR,IAAetqB,OAAO,CAACpV,cAAR,CAAuB0/B,GAAvB,CAAnB,EAAgD;AAC9C;AACA;AACA;AACA8tB,cAAAA,MAAM,GAAGA,MAAM,CAAC3qD,OAAP,CAAe,IAAI0zB,MAAJ,CAAW,SAAOmJ,GAAP,GAAW,KAAtB,EAA6B,GAA7B,CAAf,EAAkDtqB,OAAO,CAACsqB,GAAD,CAAzD,CAAT;AACD;AACF;;AACD,iBAAO8tB,MAAP;AACD,SA3PoB,CA6PrB;AACA;AACA;;;AACA,iBAASh8B,IAAT,CAAc7L,OAAd,EAAuB;AACrB1nB,UAAAA,IAAI,CAACszB,OAAL,IAAgBtzB,IAAI,CAACszB,OAAL,CAAaC,IAA7B,IAAqCvzB,IAAI,CAACszB,OAAL,CAAaC,IAAb,CAAkB,cAAc7L,OAAhC,CAArC;AACD,SAlQoB,CAoQrB;AACA;AACA;;;AACA,iBAAS+nC,KAAT,CAAerpD,MAAf,EAAuB;AACrB,cAAIwK,GAAG,GAAG,EAAV;;AACA,eAAK,IAAIkd,IAAT,IAAiB1nB,MAAjB,EAAyB;AACvBwK,YAAAA,GAAG,CAACkd,IAAD,CAAH,GAAY1nB,MAAM,CAAC0nB,IAAD,CAAlB;AACD;;AACD,iBAAOld,GAAP;AACD;;AAED,eAAOo+C,QAAP;AACD,OA3RA,CAAD;AA8RA;;AAAO,KAjlVG;AAklVV;;AACA;AAAO,cAAS7uD,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,gBAAR;AAAyB,4BAAmB,qBAA5C;AAAkE,0BAAiB,mBAAnF;AAAuG,sBAAa,WAApH;AAAgI,2BAAkB,MAAlJ;AAAyJ,mBAAU,IAAnK;AAAwK,gBAAO,IAA/K;AAAoL,mBAAU,IAA9L;AAAmM,4BAAmB,gBAAtN;AAAuO,6BAAoB,cAA3P;AAA0Q,gCAAuB,aAAjS;AAA+S,qBAAY,KAA3T;AAAiU,qBAAY,MAA7U;AAAoV,kBAAS,eAA7V;AAA6W,oBAAW,QAAxX;AAAiY,qBAAY,QAA7Y;AAAsZ,kBAAS,IAA/Z;AAAoa,qBAAY;AAAhb,OAAjB;AAEA;AAAO,KAvlVG;AAwlVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,aAAR;AAAsB,4BAAmB,gBAAzC;AAA0D,0BAAiB,mBAA3E;AAA+F,sBAAa,WAA5G;AAAwH,2BAAkB,MAA1I;AAAiJ,mBAAU,IAA3J;AAAgK,gBAAO,IAAvK;AAA4K,mBAAU,IAAtL;AAA2L,4BAAmB,gBAA9M;AAA+N,6BAAoB,cAAnP;AAAkQ,gCAAuB,YAAzR;AAAsS,qBAAY,KAAlT;AAAwT,qBAAY,MAApU;AAA2U,kBAAS,eAApV;AAAoW,oBAAW,QAA/W;AAAwX,qBAAY,QAApY;AAA6Y,kBAAS,IAAtZ;AAA2Z,qBAAY;AAAva,OAAjB;AAEA;AAAO,KA7lVG;AA8lVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,2BAA3C;AAAuE,0BAAiB,kDAAxF;AAA2I,sBAAa,YAAxJ;AAAqK,2BAAkB,iBAAvL;AAAyM,mBAAU,SAAnN;AAA6N,gBAAO,MAApO;AAA2O,mBAAU,SAArP;AAA+P,4BAAmB,uBAAlR;AAA0S,6BAAoB,mBAA9T;AAAkV,gCAAuB,yCAAzW;AAAmZ,qBAAY,WAA/Z;AAA2a,qBAAY,WAAvb;AAAmc,kBAAS,2CAA5c;AAAwf,oBAAW,gBAAngB;AAAohB,qBAAY,gBAAhiB;AAAijB,kBAAS,QAA1jB;AAAmkB,qBAAY;AAA/kB,OAAjB;AAEA;AAAO,KAnmVG;AAomVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,4BAA3C;AAAwE,0BAAiB,+DAAzF;AAAyJ,sBAAa,eAAtK;AAAsL,2BAAkB,oBAAxM;AAA6N,mBAAU,QAAvO;AAAgP,gBAAO,QAAvP;AAAgQ,mBAAU,YAA1Q;AAAuR,4BAAmB,uBAA1S;AAAkU,6BAAoB,mBAAtV;AAA0W,gCAAuB,uCAAjY;AAAya,qBAAY,SAArb;AAA+b,qBAAY,YAA3c;AAAwd,kBAAS,iDAAje;AAAmhB,oBAAW,sBAA9hB;AAAqjB,qBAAY,uBAAjkB;AAAylB,kBAAS,OAAlmB;AAA0mB,qBAAY;AAAtnB,OAAjB;AAEA;AAAO,KAzmVG;AA0mVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,yBAA3C;AAAqE,0BAAiB,qEAAtF;AAA4J,sBAAa,2BAAzK;AAAqM,2BAAkB,wBAAvN;AAAgP,mBAAU,QAA1P;AAAmQ,gBAAO,UAA1Q;AAAqR,mBAAU,aAA/R;AAA6S,4BAAmB,uBAAhU;AAAwV,6BAAoB,0BAA5W;AAAuY,gCAAuB,4CAA9Z;AAA2c,qBAAY,WAAvd;AAAme,qBAAY,cAA/e;AAA8f,kBAAS,mDAAvgB;AAA2jB,oBAAW,uBAAtkB;AAA8lB,qBAAY,uBAA1mB;AAAkoB,kBAAS,aAA3oB;AAAypB,qBAAY;AAArqB,OAAjB;AAEA;AAAO,KA/mVG;AAgnVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,8BAA3C;AAA0E,0BAAiB,oEAA3F;AAAgK,sBAAa,sBAA7K;AAAoM,2BAAkB,sBAAtN;AAA6O,mBAAU,0BAAvP;AAAkR,gBAAO,eAAzR;AAAyS,mBAAU,aAAnT;AAAiU,4BAAmB,yBAApV;AAA8W,6BAAoB,mBAAlY;AAAsZ,gCAAuB,wCAA7a;AAAsd,qBAAY,qBAAle;AAAwf,qBAAY,eAApgB;AAAohB,kBAAS,mDAA7hB;AAAilB,oBAAW,uBAA5lB;AAAonB,qBAAY,0BAAhoB;AAA2pB,kBAAS,OAApqB;AAA4qB,qBAAY;AAAxrB,OAAjB;AAEA;AAAO,KArnVG;AAsnVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,oCAA3C;AAAgF,0BAAiB,8DAAjG;AAAgK,sBAAa,qBAA7K;AAAmM,2BAAkB,6BAArN;AAAmP,mBAAU,UAA7P;AAAwQ,gBAAO,WAA/Q;AAA2R,mBAAU,cAArS;AAAoT,4BAAmB,2BAAvU;AAAmW,6BAAoB,6BAAvX;AAAqZ,gCAAuB,2DAA5a;AAAwe,qBAAY,cAApf;AAAmgB,qBAAY,YAA/gB;AAA4hB,kBAAS,+CAAriB;AAAqlB,oBAAW,gBAAhmB;AAAinB,qBAAY,eAA7nB;AAA6oB,kBAAS,UAAtpB;AAAiqB,qBAAY;AAA7qB,OAAjB;AAEA;AAAO,KA3nVG;AA4nVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B,CAEjC;;AAEA;AAAO,KAjoVG;AAkoVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAvoVG;AAwoVV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8BuZ,IAA/C;AAGA;AAAO,KA/oVG;AAgpVV;;AACA;AAAO,cAASva,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AAEAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,MAAxB,EAAgC,YAAY;AAC1C,eAAO,SAASka,IAAT,CAAczI,EAAd,EAAkB;AACvB,iBAAOuI,KAAK,CAACmH,QAAQ,CAAC1P,EAAD,CAAT,CAAZ;AACD,SAFD;AAGD,OAJD;AAOA;;AAAO,KA9pVG;AA+pVV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIsvD,YAAY,GAAGvwD,mBAAmB,CAAC,GAAD,CAAtC;;AAEA,UAAIwwD,YAAY,GAAGr1C,sBAAsB,CAACo1C,YAAD,CAAzC;;AAEA,UAAIE,aAAa,GAAGzwD,mBAAmB,CAAC,GAAD,CAAvC;;AAEA,UAAI0wD,aAAa,GAAGv1C,sBAAsB,CAACs1C,aAAD,CAA1C;;AAEA,eAASt1C,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,YAAY;AAC5B,iBAAS4+C,aAAT,CAAuBrxC,GAAvB,EAA4B/M,CAA5B,EAA+B;AAC7B,cAAIq+C,IAAI,GAAG,EAAX;AACA,cAAIpH,EAAE,GAAG,IAAT;AACA,cAAIsB,EAAE,GAAG,KAAT;AACA,cAAI+F,EAAE,GAAG33C,SAAT;;AAEA,cAAI;AACF,iBAAK,IAAIgT,EAAE,GAAG,CAAC,GAAG62C,aAAa,WAAjB,EAA2BzjD,GAA3B,CAAT,EAA0CuqC,EAA/C,EAAmD,EAAEL,EAAE,GAAG,CAACK,EAAE,GAAG39B,EAAE,CAACkG,IAAH,EAAN,EAAiBhG,IAAxB,CAAnD,EAAkFo9B,EAAE,GAAG,IAAvF,EAA6F;AAC3FoH,cAAAA,IAAI,CAAClwC,IAAL,CAAUmpC,EAAE,CAACpwC,KAAb;;AAEA,kBAAIlH,CAAC,IAAIq+C,IAAI,CAAC35C,MAAL,KAAgB1E,CAAzB,EAA4B;AAC7B;AACF,WAND,CAME,OAAO6mB,GAAP,EAAY;AACZ0xB,YAAAA,EAAE,GAAG,IAAL;AACA+F,YAAAA,EAAE,GAAGz3B,GAAL;AACD,WATD,SASU;AACR,gBAAI;AACF,kBAAI,CAACowB,EAAD,IAAOt9B,EAAE,CAAC,QAAD,CAAb,EAAyBA,EAAE,CAAC,QAAD,CAAF;AAC1B,aAFD,SAEU;AACR,kBAAI4+B,EAAJ,EAAQ,MAAM+F,EAAN;AACT;AACF;;AAED,iBAAOD,IAAP;AACD;;AAED,eAAO,UAAUtxC,GAAV,EAAe/M,CAAf,EAAkB;AACvB,cAAI2M,KAAK,CAACnK,OAAN,CAAcuK,GAAd,CAAJ,EAAwB;AACtB,mBAAOA,GAAP;AACD,WAFD,MAEO,IAAI,CAAC,GAAGujD,YAAY,WAAhB,EAA0B7vD,MAAM,CAACsM,GAAD,CAAhC,CAAJ,EAA4C;AACjD,mBAAOqxC,aAAa,CAACrxC,GAAD,EAAM/M,CAAN,CAApB;AACD,WAFM,MAEA;AACL,kBAAM,IAAIwR,SAAJ,CAAc,sDAAd,CAAN;AACD;AACF,SARD;AASD,OApCiB,EAAlB;AAsCA;;AAAO,KAvtVG;AAwtVV;;AACA;AAAO,cAAS/R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA7tVG;AA8tVV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,GAAD,CAApC;AAGA;AAAO,KAtuVG;AAuuVV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2d,OAAO,GAAG3d,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB2wD,UAAvB,GAAoC,UAAUl/C,EAAV,EAAc;AACjE,YAAIO,CAAC,GAAGrR,MAAM,CAAC8Q,EAAD,CAAd;AACA,eAAOO,CAAC,CAAC4L,QAAD,CAAD,KAAgB/W,SAAhB,IACF,gBAAgBmL,CADd,CAEL;AAFK,WAGFyI,SAAS,CAAClZ,cAAV,CAAyBoc,OAAO,CAAC3L,CAAD,CAAhC,CAHL;AAID,OAND;AASA;;AAAO,KAtvVG;AAuvVV;;AACA;AAAO,cAASrS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA5vVG;AA6vVV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,GAAD,CAApC;AAGA;AAAO,KArwVG;AAswVV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIe,GAAG,GAAGf,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB4wD,WAAvB,GAAqC,UAAUn/C,EAAV,EAAc;AAClE,YAAIioC,MAAM,GAAG34C,GAAG,CAAC0Q,EAAD,CAAhB;AACA,YAAI,OAAOioC,MAAP,IAAiB,UAArB,EAAiC,MAAMhoC,SAAS,CAACD,EAAE,GAAG,mBAAN,CAAf;AACjC,eAAOE,QAAQ,CAAC+nC,MAAM,CAACt5C,IAAP,CAAYqR,EAAZ,CAAD,CAAf;AACD,OAJD;AAOA;;AAAO,KAlxVG;AAmxVV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,GAAD,CAApC;AAEA;AAAO,KAxxVG;AAyxVV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAIwC,IAAI,GAAGxC,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAI6wD,KAAK,GAAG7wD,mBAAmB,CAAC,GAAD,CAA/B;;AACA,UAAI+sB,WAAW,GAAG/sB,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI8oB,QAAQ,GAAG9oB,mBAAmB,CAAC,EAAD,CAAlC;AAEA;;;;;;;;AAMA,eAAS8wD,cAAT,CAAwBC,aAAxB,EAAuC;AACrC,YAAI7kD,OAAO,GAAG,IAAI2kD,KAAJ,CAAUE,aAAV,CAAd;AACA,YAAIh2C,QAAQ,GAAGvY,IAAI,CAACquD,KAAK,CAACvvD,SAAN,CAAgB+oB,OAAjB,EAA0Bne,OAA1B,CAAnB,CAFqC,CAIrC;;AACAsb,QAAAA,KAAK,CAACtiB,MAAN,CAAa6V,QAAb,EAAuB81C,KAAK,CAACvvD,SAA7B,EAAwC4K,OAAxC,EALqC,CAOrC;;AACAsb,QAAAA,KAAK,CAACtiB,MAAN,CAAa6V,QAAb,EAAuB7O,OAAvB;AAEA,eAAO6O,QAAP;AACD,OA5BqD,CA8BtD;;;AACA,UAAIi2C,KAAK,GAAGF,cAAc,CAAChoC,QAAD,CAA1B,CA/BsD,CAiCtD;;AACAkoC,MAAAA,KAAK,CAACH,KAAN,GAAcA,KAAd,CAlCsD,CAoCtD;;AACAG,MAAAA,KAAK,CAACl0C,MAAN,GAAe,SAASA,MAAT,CAAgBm0C,cAAhB,EAAgC;AAC7C,eAAOH,cAAc,CAAC/jC,WAAW,CAACikC,KAAK,CAACloC,QAAP,EAAiBmoC,cAAjB,CAAZ,CAArB;AACD,OAFD,CArCsD,CAyCtD;;;AACAD,MAAAA,KAAK,CAACljC,MAAN,GAAe9tB,mBAAmB,CAAC,EAAD,CAAlC;AACAgxD,MAAAA,KAAK,CAACE,WAAN,GAAoBlxD,mBAAmB,CAAC,GAAD,CAAvC;AACAgxD,MAAAA,KAAK,CAAC1oC,QAAN,GAAiBtoB,mBAAmB,CAAC,EAAD,CAApC,CA5CsD,CA8CtD;;AACAgxD,MAAAA,KAAK,CAAChqB,GAAN,GAAY,SAASA,GAAT,CAAamqB,QAAb,EAAuB;AACjC,eAAOlnC,OAAO,CAAC+c,GAAR,CAAYmqB,QAAZ,CAAP;AACD,OAFD;;AAGAH,MAAAA,KAAK,CAACI,MAAN,GAAepxD,mBAAmB,CAAC,GAAD,CAAlC;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBsxD,KAAjB,CApDsD,CAsDtD;;AACArxD,MAAAA,MAAM,CAACD,OAAP,cAAyBsxD,KAAzB;AAGA;AAAO,KAp1VG;AAq1VV;;AACA;AAAO,cAASrxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAI0nB,QAAQ,GAAG1nB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIqxD,kBAAkB,GAAGrxD,mBAAmB,CAAC,GAAD,CAA5C;;AACA,UAAIsxD,eAAe,GAAGtxD,mBAAmB,CAAC,GAAD,CAAzC;;AACA,UAAI+sB,WAAW,GAAG/sB,mBAAmB,CAAC,EAAD,CAArC;AAEA;;;;;;;AAKA,eAAS6wD,KAAT,CAAeI,cAAf,EAA+B;AAC7B,aAAKnoC,QAAL,GAAgBmoC,cAAhB;AACA,aAAKM,YAAL,GAAoB;AAClBlnC,UAAAA,OAAO,EAAE,IAAIgnC,kBAAJ,EADS;AAElBpqC,UAAAA,QAAQ,EAAE,IAAIoqC,kBAAJ;AAFQ,SAApB;AAID;AAED;;;;;;;AAKAR,MAAAA,KAAK,CAACvvD,SAAN,CAAgB+oB,OAAhB,GAA0B,SAASA,OAAT,CAAiBL,MAAjB,EAAyB;AACjD;AACA;AACA,YAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9BA,UAAAA,MAAM,GAAGhlB,SAAS,CAAC,CAAD,CAAT,IAAgB,EAAzB;AACAglB,UAAAA,MAAM,CAACrC,GAAP,GAAa3iB,SAAS,CAAC,CAAD,CAAtB;AACD,SAHD,MAGO;AACLglB,UAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACD;;AAEDA,QAAAA,MAAM,GAAG+C,WAAW,CAAC,KAAKjE,QAAN,EAAgBkB,MAAhB,CAApB,CAViD,CAYjD;;AACA,YAAIA,MAAM,CAACR,MAAX,EAAmB;AACjBQ,UAAAA,MAAM,CAACR,MAAP,GAAgBQ,MAAM,CAACR,MAAP,CAAcne,WAAd,EAAhB;AACD,SAFD,MAEO,IAAI,KAAKyd,QAAL,CAAcU,MAAlB,EAA0B;AAC/BQ,UAAAA,MAAM,CAACR,MAAP,GAAgB,KAAKV,QAAL,CAAcU,MAAd,CAAqBne,WAArB,EAAhB;AACD,SAFM,MAEA;AACL2e,UAAAA,MAAM,CAACR,MAAP,GAAgB,KAAhB;AACD,SAnBgD,CAqBjD;;;AACA,YAAI4tB,KAAK,GAAG,CAACka,eAAD,EAAkBzqD,SAAlB,CAAZ;AACA,YAAIoX,OAAO,GAAGgM,OAAO,CAAClM,OAAR,CAAgBiM,MAAhB,CAAd;AAEA,aAAKunC,YAAL,CAAkBlnC,OAAlB,CAA0B5lB,OAA1B,CAAkC,SAAS+sD,0BAAT,CAAoCC,WAApC,EAAiD;AACjFra,UAAAA,KAAK,CAACtX,OAAN,CAAc2xB,WAAW,CAACC,SAA1B,EAAqCD,WAAW,CAACE,QAAjD;AACD,SAFD;AAIA,aAAKJ,YAAL,CAAkBtqC,QAAlB,CAA2BxiB,OAA3B,CAAmC,SAASmtD,wBAAT,CAAkCH,WAAlC,EAA+C;AAChFra,UAAAA,KAAK,CAAC/oC,IAAN,CAAWojD,WAAW,CAACC,SAAvB,EAAkCD,WAAW,CAACE,QAA9C;AACD,SAFD;;AAIA,eAAOva,KAAK,CAACxyC,MAAb,EAAqB;AACnBqZ,UAAAA,OAAO,GAAGA,OAAO,CAACsO,IAAR,CAAa6qB,KAAK,CAACya,KAAN,EAAb,EAA4Bza,KAAK,CAACya,KAAN,EAA5B,CAAV;AACD;;AAED,eAAO5zC,OAAP;AACD,OAtCD;;AAwCA4yC,MAAAA,KAAK,CAACvvD,SAAN,CAAgBwwD,MAAhB,GAAyB,SAASA,MAAT,CAAgB9nC,MAAhB,EAAwB;AAC/CA,QAAAA,MAAM,GAAG+C,WAAW,CAAC,KAAKjE,QAAN,EAAgBkB,MAAhB,CAApB;AACA,eAAOtC,QAAQ,CAACsC,MAAM,CAACrC,GAAR,EAAaqC,MAAM,CAACpC,MAApB,EAA4BoC,MAAM,CAACnC,gBAAnC,CAAR,CAA6DzjB,OAA7D,CAAqE,KAArE,EAA4E,EAA5E,CAAP;AACD,OAHD,CArEsD,CA0EtD;;;AACAojB,MAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,SAA1B,CAAd,EAAoD,SAAS8kB,mBAAT,CAA6BC,MAA7B,EAAqC;AACvF;AACAqnC,QAAAA,KAAK,CAACvvD,SAAN,CAAgBkoB,MAAhB,IAA0B,UAAS7B,GAAT,EAAcqC,MAAd,EAAsB;AAC9C,iBAAO,KAAKK,OAAL,CAAa7C,KAAK,CAAC1iB,KAAN,CAAYklB,MAAM,IAAI,EAAtB,EAA0B;AAC5CR,YAAAA,MAAM,EAAEA,MADoC;AAE5C7B,YAAAA,GAAG,EAAEA;AAFuC,WAA1B,CAAb,CAAP;AAID,SALD;AAMD,OARD;AAUAH,MAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,CAAd,EAAwC,SAASglB,qBAAT,CAA+BD,MAA/B,EAAuC;AAC7E;AACAqnC,QAAAA,KAAK,CAACvvD,SAAN,CAAgBkoB,MAAhB,IAA0B,UAAS7B,GAAT,EAAcnF,IAAd,EAAoBwH,MAApB,EAA4B;AACpD,iBAAO,KAAKK,OAAL,CAAa7C,KAAK,CAAC1iB,KAAN,CAAYklB,MAAM,IAAI,EAAtB,EAA0B;AAC5CR,YAAAA,MAAM,EAAEA,MADoC;AAE5C7B,YAAAA,GAAG,EAAEA,GAFuC;AAG5CnF,YAAAA,IAAI,EAAEA;AAHsC,WAA1B,CAAb,CAAP;AAKD,SAND;AAOD,OATD;AAWA7iB,MAAAA,MAAM,CAACD,OAAP,GAAiBmxD,KAAjB;AAGA;AAAO,KAz7VG;AA07VV;;AACA;AAAO,cAASlxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEA,eAASqxD,kBAAT,GAA8B;AAC5B,aAAKU,QAAL,GAAgB,EAAhB;AACD;AAED;;;;;;;;;;AAQAV,MAAAA,kBAAkB,CAAC/vD,SAAnB,CAA6B0wD,GAA7B,GAAmC,SAASA,GAAT,CAAaN,SAAb,EAAwBC,QAAxB,EAAkC;AACnE,aAAKI,QAAL,CAAc1jD,IAAd,CAAmB;AACjBqjD,UAAAA,SAAS,EAAEA,SADM;AAEjBC,UAAAA,QAAQ,EAAEA;AAFO,SAAnB;AAIA,eAAO,KAAKI,QAAL,CAAcntD,MAAd,GAAuB,CAA9B;AACD,OAND;AAQA;;;;;;;AAKAysD,MAAAA,kBAAkB,CAAC/vD,SAAnB,CAA6B2wD,KAA7B,GAAqC,SAASA,KAAT,CAAe93C,EAAf,EAAmB;AACtD,YAAI,KAAK43C,QAAL,CAAc53C,EAAd,CAAJ,EAAuB;AACrB,eAAK43C,QAAL,CAAc53C,EAAd,IAAoB,IAApB;AACD;AACF,OAJD;AAMA;;;;;;;;;;AAQAk3C,MAAAA,kBAAkB,CAAC/vD,SAAnB,CAA6BmD,OAA7B,GAAuC,SAASA,OAAT,CAAiBE,EAAjB,EAAqB;AAC1D6iB,QAAAA,KAAK,CAAC/iB,OAAN,CAAc,KAAKstD,QAAnB,EAA6B,SAASG,cAAT,CAAwB3iC,CAAxB,EAA2B;AACtD,cAAIA,CAAC,KAAK,IAAV,EAAgB;AACd5qB,YAAAA,EAAE,CAAC4qB,CAAD,CAAF;AACD;AACF,SAJD;AAKD,OAND;;AAQA5vB,MAAAA,MAAM,CAACD,OAAP,GAAiB2xD,kBAAjB;AAGA;AAAO,KAp/VG;AAq/VV;;AACA;AAAO,cAAS1xD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAImyD,aAAa,GAAGnyD,mBAAmB,CAAC,GAAD,CAAvC;;AACA,UAAIsoB,QAAQ,GAAGtoB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI8oB,QAAQ,GAAG9oB,mBAAmB,CAAC,EAAD,CAAlC;AAEA;;;;;AAGA,eAASoyD,4BAAT,CAAsCpoC,MAAtC,EAA8C;AAC5C,YAAIA,MAAM,CAACsC,WAAX,EAAwB;AACtBtC,UAAAA,MAAM,CAACsC,WAAP,CAAmB+lC,gBAAnB;AACD;AACF;AAED;;;;;;;;AAMA1yD,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS4xD,eAAT,CAAyBtnC,MAAzB,EAAiC;AAChDooC,QAAAA,4BAA4B,CAACpoC,MAAD,CAA5B,CADgD,CAGhD;;AACAA,QAAAA,MAAM,CAACvD,OAAP,GAAiBuD,MAAM,CAACvD,OAAP,IAAkB,EAAnC,CAJgD,CAMhD;;AACAuD,QAAAA,MAAM,CAACxH,IAAP,GAAc2vC,aAAa,CACzBnoC,MAAM,CAACxH,IADkB,EAEzBwH,MAAM,CAACvD,OAFkB,EAGzBuD,MAAM,CAACjB,gBAHkB,CAA3B,CAPgD,CAahD;;AACAiB,QAAAA,MAAM,CAACvD,OAAP,GAAiBe,KAAK,CAAC1iB,KAAN,CACfklB,MAAM,CAACvD,OAAP,CAAe6C,MAAf,IAAyB,EADV,EAEfU,MAAM,CAACvD,OAAP,CAAeuD,MAAM,CAACR,MAAtB,KAAiC,EAFlB,EAGfQ,MAAM,CAACvD,OAHQ,CAAjB;AAMAe,QAAAA,KAAK,CAAC/iB,OAAN,CACE,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAlC,EAAyC,OAAzC,EAAkD,QAAlD,CADF,EAEE,SAAS6tD,iBAAT,CAA2B9oC,MAA3B,EAAmC;AACjC,iBAAOQ,MAAM,CAACvD,OAAP,CAAe+C,MAAf,CAAP;AACD,SAJH;AAOA,YAAIZ,OAAO,GAAGoB,MAAM,CAACpB,OAAP,IAAkBE,QAAQ,CAACF,OAAzC;AAEA,eAAOA,OAAO,CAACoB,MAAD,CAAP,CAAgBuC,IAAhB,CAAqB,SAASgmC,mBAAT,CAA6BtrC,QAA7B,EAAuC;AACjEmrC,UAAAA,4BAA4B,CAACpoC,MAAD,CAA5B,CADiE,CAGjE;;AACA/C,UAAAA,QAAQ,CAACzE,IAAT,GAAgB2vC,aAAa,CAC3BlrC,QAAQ,CAACzE,IADkB,EAE3ByE,QAAQ,CAACR,OAFkB,EAG3BuD,MAAM,CAAChB,iBAHoB,CAA7B;AAMA,iBAAO/B,QAAP;AACD,SAXM,EAWJ,SAASurC,kBAAT,CAA4BjuB,MAA5B,EAAoC;AACrC,cAAI,CAACjc,QAAQ,CAACic,MAAD,CAAb,EAAuB;AACrB6tB,YAAAA,4BAA4B,CAACpoC,MAAD,CAA5B,CADqB,CAGrB;;AACA,gBAAIua,MAAM,IAAIA,MAAM,CAACtd,QAArB,EAA+B;AAC7Bsd,cAAAA,MAAM,CAACtd,QAAP,CAAgBzE,IAAhB,GAAuB2vC,aAAa,CAClC5tB,MAAM,CAACtd,QAAP,CAAgBzE,IADkB,EAElC+hB,MAAM,CAACtd,QAAP,CAAgBR,OAFkB,EAGlCuD,MAAM,CAAChB,iBAH2B,CAApC;AAKD;AACF;;AAED,iBAAOiB,OAAO,CAACjM,MAAR,CAAeumB,MAAf,CAAP;AACD,SA1BM,CAAP;AA2BD,OAxDD;AA2DA;;AAAO,KA1kWG;AA2kWV;;AACA;AAAO,cAAS5kC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;AAEA;;;;;;;;;;AAQAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASyyD,aAAT,CAAuB3vC,IAAvB,EAA6BiE,OAA7B,EAAsCgsC,GAAtC,EAA2C;AAC1D;AACAjrC,QAAAA,KAAK,CAAC/iB,OAAN,CAAcguD,GAAd,EAAmB,SAAS/O,SAAT,CAAmB/+C,EAAnB,EAAuB;AACxC6d,UAAAA,IAAI,GAAG7d,EAAE,CAAC6d,IAAD,EAAOiE,OAAP,CAAT;AACD,SAFD;AAIA,eAAOjE,IAAP;AACD,OAPD;AAUA;;AAAO,KArmWG;AAsmWV;;AACA;AAAO,cAAS7iB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS8oB,mBAAT,CAA6B/B,OAA7B,EAAsCisC,cAAtC,EAAsD;AACrElrC,QAAAA,KAAK,CAAC/iB,OAAN,CAAcgiB,OAAd,EAAuB,SAASksC,aAAT,CAAuBvrD,KAAvB,EAA8B5G,IAA9B,EAAoC;AACzD,cAAIA,IAAI,KAAKkyD,cAAT,IAA2BlyD,IAAI,CAACoqB,WAAL,OAAuB8nC,cAAc,CAAC9nC,WAAf,EAAtD,EAAoF;AAClFnE,YAAAA,OAAO,CAACisC,cAAD,CAAP,GAA0BtrD,KAA1B;AACA,mBAAOqf,OAAO,CAACjmB,IAAD,CAAd;AACD;AACF,SALD;AAMD,OAPD;AAUA;;AAAO,KAxnWG;AAynWV;;AACA;AAAO,cAASb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI8pB,WAAW,GAAG9pB,mBAAmB,CAAC,EAAD,CAArC;AAEA;;;;;;;;;AAOAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASgqB,MAAT,CAAgB3L,OAAhB,EAAyBC,MAAzB,EAAiCiJ,QAAjC,EAA2C;AAC1D,YAAImC,cAAc,GAAGnC,QAAQ,CAAC+C,MAAT,CAAgBZ,cAArC;;AACA,YAAI,CAACA,cAAD,IAAmBA,cAAc,CAACnC,QAAQ,CAACoC,MAAV,CAArC,EAAwD;AACtDtL,UAAAA,OAAO,CAACkJ,QAAD,CAAP;AACD,SAFD,MAEO;AACLjJ,UAAAA,MAAM,CAAC8L,WAAW,CAChB,qCAAqC7C,QAAQ,CAACoC,MAD9B,EAEhBpC,QAAQ,CAAC+C,MAFO,EAGhB,IAHgB,EAIhB/C,QAAQ,CAACoD,OAJO,EAKhBpD,QALgB,CAAZ,CAAN;AAOD;AACF,OAbD;AAgBA;;AAAO,KAxpWG;AAypWV;;AACA;AAAO,cAAStnB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;;;;;AAUAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASktB,YAAT,CAAsBE,KAAtB,EAA6B9C,MAA7B,EAAqC6C,IAArC,EAA2CxC,OAA3C,EAAoDpD,QAApD,EAA8D;AAC7E6F,QAAAA,KAAK,CAAC9C,MAAN,GAAeA,MAAf;;AACA,YAAI6C,IAAJ,EAAU;AACRC,UAAAA,KAAK,CAACD,IAAN,GAAaA,IAAb;AACD;;AAEDC,QAAAA,KAAK,CAACzC,OAAN,GAAgBA,OAAhB;AACAyC,QAAAA,KAAK,CAAC7F,QAAN,GAAiBA,QAAjB;AACA6F,QAAAA,KAAK,CAAC8lC,YAAN,GAAqB,IAArB;;AAEA9lC,QAAAA,KAAK,CAAC+lC,MAAN,GAAe,YAAW;AACxB,iBAAO;AACL;AACA3rC,YAAAA,OAAO,EAAE,KAAKA,OAFT;AAGL1mB,YAAAA,IAAI,EAAE,KAAKA,IAHN;AAIL;AACAsyD,YAAAA,WAAW,EAAE,KAAKA,WALb;AAML5+B,YAAAA,MAAM,EAAE,KAAKA,MANR;AAOL;AACA6+B,YAAAA,QAAQ,EAAE,KAAKA,QARV;AASLC,YAAAA,UAAU,EAAE,KAAKA,UATZ;AAULC,YAAAA,YAAY,EAAE,KAAKA,YAVd;AAWLv9B,YAAAA,KAAK,EAAE,KAAKA,KAXP;AAYL;AACA1L,YAAAA,MAAM,EAAE,KAAKA,MAbR;AAcL6C,YAAAA,IAAI,EAAE,KAAKA;AAdN,WAAP;AAgBD,SAjBD;;AAkBA,eAAOC,KAAP;AACD,OA7BD;AAgCA;;AAAO,KAzsWG;AA0sWV;;AACA;AAAO,cAASntB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIkzD,aAAa,GAAGlzD,mBAAmB,CAAC,GAAD,CAAvC;;AACA,UAAImzD,WAAW,GAAGnzD,mBAAmB,CAAC,GAAD,CAArC;AAEA;;;;;;;;;;;AASAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASiqB,aAAT,CAAuBjD,OAAvB,EAAgC0sC,YAAhC,EAA8C;AAC7D,YAAI1sC,OAAO,IAAI,CAACwsC,aAAa,CAACE,YAAD,CAA7B,EAA6C;AAC3C,iBAAOD,WAAW,CAACzsC,OAAD,EAAU0sC,YAAV,CAAlB;AACD;;AACD,eAAOA,YAAP;AACD,OALD;AAQA;;AAAO,KApuWG;AAquWV;;AACA;AAAO,cAASzzD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;AAMAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASwzD,aAAT,CAAuBvrC,GAAvB,EAA4B;AAC3C;AACA;AACA;AACA,eAAO,gCAAgCvc,IAAhC,CAAqCuc,GAArC,CAAP;AACD,OALD;AAQA;;AAAO,KAzvWG;AA0vWV;;AACA;AAAO,cAAShoB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;;AAOAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASyzD,WAAT,CAAqBzsC,OAArB,EAA8B2sC,WAA9B,EAA2C;AAC1D,eAAOA,WAAW,GACd3sC,OAAO,CAACtiB,OAAR,CAAgB,MAAhB,EAAwB,EAAxB,IAA8B,GAA9B,GAAoCivD,WAAW,CAACjvD,OAAZ,CAAoB,MAApB,EAA4B,EAA5B,CADtB,GAEdsiB,OAFJ;AAGD,OAJD;AAOA;;AAAO,KA9wWG;AA+wWV;;AACA;AAAO,cAAS/mB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B,CALsD,CAOtD;AACA;;;AACA,UAAIszD,iBAAiB,GAAG,CACtB,KADsB,EACf,eADe,EACE,gBADF,EACoB,cADpB,EACoC,MADpC,EAEtB,SAFsB,EAEX,MAFW,EAEH,MAFG,EAEK,mBAFL,EAE0B,qBAF1B,EAGtB,eAHsB,EAGL,UAHK,EAGO,cAHP,EAGuB,qBAHvB,EAItB,SAJsB,EAIX,aAJW,EAII,YAJJ,CAAxB;AAOA;;;;;;;;;;;;;;AAaA3zD,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASkqB,YAAT,CAAsBnD,OAAtB,EAA+B;AAC9C,YAAI8sC,MAAM,GAAG,EAAb;AACA,YAAI1uD,GAAJ;AACA,YAAIlC,GAAJ;AACA,YAAIzC,CAAJ;;AAEA,YAAI,CAACumB,OAAL,EAAc;AAAE,iBAAO8sC,MAAP;AAAgB;;AAEhC/rC,QAAAA,KAAK,CAAC/iB,OAAN,CAAcgiB,OAAO,CAACje,KAAR,CAAc,IAAd,CAAd,EAAmC,SAASgrD,MAAT,CAAgBC,IAAhB,EAAsB;AACvDvzD,UAAAA,CAAC,GAAGuzD,IAAI,CAAC50C,OAAL,CAAa,GAAb,CAAJ;AACAha,UAAAA,GAAG,GAAG2iB,KAAK,CAACtjB,IAAN,CAAWuvD,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAexzD,CAAf,CAAX,EAA8BmL,WAA9B,EAAN;AACA1I,UAAAA,GAAG,GAAG6kB,KAAK,CAACtjB,IAAN,CAAWuvD,IAAI,CAACC,MAAL,CAAYxzD,CAAC,GAAG,CAAhB,CAAX,CAAN;;AAEA,cAAI2E,GAAJ,EAAS;AACP,gBAAI0uD,MAAM,CAAC1uD,GAAD,CAAN,IAAeyuD,iBAAiB,CAACz0C,OAAlB,CAA0Bha,GAA1B,KAAkC,CAArD,EAAwD;AACtD;AACD;;AACD,gBAAIA,GAAG,KAAK,YAAZ,EAA0B;AACxB0uD,cAAAA,MAAM,CAAC1uD,GAAD,CAAN,GAAc,CAAC0uD,MAAM,CAAC1uD,GAAD,CAAN,GAAc0uD,MAAM,CAAC1uD,GAAD,CAApB,GAA4B,EAA7B,EAAiCiI,MAAjC,CAAwC,CAACnK,GAAD,CAAxC,CAAd;AACD,aAFD,MAEO;AACL4wD,cAAAA,MAAM,CAAC1uD,GAAD,CAAN,GAAc0uD,MAAM,CAAC1uD,GAAD,CAAN,GAAc0uD,MAAM,CAAC1uD,GAAD,CAAN,GAAc,IAAd,GAAqBlC,GAAnC,GAAyCA,GAAvD;AACD;AACF;AACF,SAfD;AAiBA,eAAO4wD,MAAP;AACD,OA1BD;AA6BA;;AAAO,KA10WG;AA20WV;;AACA;AAAO,cAAS5zD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GACE8nB,KAAK,CAACnjB,oBAAN,KAEA;AACA;AACG,eAASsvD,kBAAT,GAA8B;AAC7B,YAAIC,IAAI,GAAG,kBAAkBxoD,IAAlB,CAAuB9G,SAAS,CAAC6xC,SAAjC,CAAX;AACA,YAAI0d,cAAc,GAAGrvD,QAAQ,CAACmD,aAAT,CAAuB,GAAvB,CAArB;AACA,YAAImsD,SAAJ;AAEA;;;;;;;AAMA,iBAASC,UAAT,CAAoBpsC,GAApB,EAAyB;AACvB,cAAIulB,IAAI,GAAGvlB,GAAX;;AAEA,cAAIisC,IAAJ,EAAU;AACV;AACEC,YAAAA,cAAc,CAACr4B,YAAf,CAA4B,MAA5B,EAAoC0R,IAApC;AACAA,YAAAA,IAAI,GAAG2mB,cAAc,CAAC3mB,IAAtB;AACD;;AAED2mB,UAAAA,cAAc,CAACr4B,YAAf,CAA4B,MAA5B,EAAoC0R,IAApC,EATuB,CAWvB;;AACA,iBAAO;AACLA,YAAAA,IAAI,EAAE2mB,cAAc,CAAC3mB,IADhB;AAEL8mB,YAAAA,QAAQ,EAAEH,cAAc,CAACG,QAAf,GAA0BH,cAAc,CAACG,QAAf,CAAwB5vD,OAAxB,CAAgC,IAAhC,EAAsC,EAAtC,CAA1B,GAAsE,EAF3E;AAGL6vD,YAAAA,IAAI,EAAEJ,cAAc,CAACI,IAHhB;AAILnuC,YAAAA,MAAM,EAAE+tC,cAAc,CAAC/tC,MAAf,GAAwB+tC,cAAc,CAAC/tC,MAAf,CAAsB1hB,OAAtB,CAA8B,KAA9B,EAAqC,EAArC,CAAxB,GAAmE,EAJtE;AAKL2rC,YAAAA,IAAI,EAAE8jB,cAAc,CAAC9jB,IAAf,GAAsB8jB,cAAc,CAAC9jB,IAAf,CAAoB3rC,OAApB,CAA4B,IAA5B,EAAkC,EAAlC,CAAtB,GAA8D,EAL/D;AAML8vD,YAAAA,QAAQ,EAAEL,cAAc,CAACK,QANpB;AAOL5xC,YAAAA,IAAI,EAAEuxC,cAAc,CAACvxC,IAPhB;AAQLwtB,YAAAA,QAAQ,EAAG+jB,cAAc,CAAC/jB,QAAf,CAAwBtxB,MAAxB,CAA+B,CAA/B,MAAsC,GAAvC,GACRq1C,cAAc,CAAC/jB,QADP,GAER,MAAM+jB,cAAc,CAAC/jB;AAVlB,WAAP;AAYD;;AAEDgkB,QAAAA,SAAS,GAAGC,UAAU,CAACjyD,MAAM,CAACikB,QAAP,CAAgBmnB,IAAjB,CAAtB;AAEA;;;;;;;AAMA,eAAO,SAASrjB,eAAT,CAAyBsqC,UAAzB,EAAqC;AAC1C,cAAIZ,MAAM,GAAI/rC,KAAK,CAACjkB,QAAN,CAAe4wD,UAAf,CAAD,GAA+BJ,UAAU,CAACI,UAAD,CAAzC,GAAwDA,UAArE;AACA,iBAAQZ,MAAM,CAACS,QAAP,KAAoBF,SAAS,CAACE,QAA9B,IACJT,MAAM,CAACU,IAAP,KAAgBH,SAAS,CAACG,IAD9B;AAED,SAJD;AAKD,OAlDD,EAJF,GAwDA;AACG,eAASG,qBAAT,GAAiC;AAChC,eAAO,SAASvqC,eAAT,GAA2B;AAChC,iBAAO,IAAP;AACD,SAFD;AAGD,OAJD,EA1DJ;AAkEA;AAAO,KAr5WG;AAs5WV;;AACA;AAAO,cAASlqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GACE8nB,KAAK,CAACnjB,oBAAN,KAEA;AACG,eAASsvD,kBAAT,GAA8B;AAC7B,eAAO;AACL/2C,UAAAA,KAAK,EAAE,SAASA,KAAT,CAAepc,IAAf,EAAqB4G,KAArB,EAA4BitD,OAA5B,EAAqCC,IAArC,EAA2C1c,MAA3C,EAAmD2c,MAAnD,EAA2D;AAChE,gBAAIC,MAAM,GAAG,EAAb;AACAA,YAAAA,MAAM,CAACnmD,IAAP,CAAY7N,IAAI,GAAG,GAAP,GAAa+lB,kBAAkB,CAACnf,KAAD,CAA3C;;AAEA,gBAAIogB,KAAK,CAAChkB,QAAN,CAAe6wD,OAAf,CAAJ,EAA6B;AAC3BG,cAAAA,MAAM,CAACnmD,IAAP,CAAY,aAAa,IAAIoI,IAAJ,CAAS49C,OAAT,EAAkBI,WAAlB,EAAzB;AACD;;AAED,gBAAIjtC,KAAK,CAACjkB,QAAN,CAAe+wD,IAAf,CAAJ,EAA0B;AACxBE,cAAAA,MAAM,CAACnmD,IAAP,CAAY,UAAUimD,IAAtB;AACD;;AAED,gBAAI9sC,KAAK,CAACjkB,QAAN,CAAeq0C,MAAf,CAAJ,EAA4B;AAC1B4c,cAAAA,MAAM,CAACnmD,IAAP,CAAY,YAAYupC,MAAxB;AACD;;AAED,gBAAI2c,MAAM,KAAK,IAAf,EAAqB;AACnBC,cAAAA,MAAM,CAACnmD,IAAP,CAAY,QAAZ;AACD;;AAED7J,YAAAA,QAAQ,CAACgwD,MAAT,GAAkBA,MAAM,CAAChuC,IAAP,CAAY,IAAZ,CAAlB;AACD,WAtBI;AAwBLyF,UAAAA,IAAI,EAAE,SAASA,IAAT,CAAczrB,IAAd,EAAoB;AACxB,gBAAI0oD,KAAK,GAAG1kD,QAAQ,CAACgwD,MAAT,CAAgBtL,KAAhB,CAAsB,IAAIpxB,MAAJ,CAAW,eAAet3B,IAAf,GAAsB,WAAjC,CAAtB,CAAZ;AACA,mBAAQ0oD,KAAK,GAAG5iC,kBAAkB,CAAC4iC,KAAK,CAAC,CAAD,CAAN,CAArB,GAAkC,IAA/C;AACD,WA3BI;AA6BLwL,UAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBl0D,IAAhB,EAAsB;AAC5B,iBAAKoc,KAAL,CAAWpc,IAAX,EAAiB,EAAjB,EAAqBiW,IAAI,CAACgM,GAAL,KAAa,QAAlC;AACD;AA/BI,SAAP;AAiCD,OAlCD,EAHF,GAuCA;AACG,eAAS2xC,qBAAT,GAAiC;AAChC,eAAO;AACLx3C,UAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB,CAAE,CADrB;AAELqP,UAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAAE,mBAAO,IAAP;AAAc,WAFjC;AAGLyoC,UAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB,CAAE;AAHvB,SAAP;AAKD,OAND,EAzCJ;AAmDA;AAAO,KAj9WG;AAk9WV;;AACA;AAAO,cAAS/0D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI8tB,MAAM,GAAG9tB,mBAAmB,CAAC,EAAD,CAAhC;AAEA;;;;;;;;AAMA,eAASkxD,WAAT,CAAqBrY,QAArB,EAA+B;AAC7B,YAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,gBAAM,IAAInnC,SAAJ,CAAc,8BAAd,CAAN;AACD;;AAED,YAAIg0B,cAAJ;AACA,aAAKznB,OAAL,GAAe,IAAIgM,OAAJ,CAAY,SAAS0qC,eAAT,CAAyB52C,OAAzB,EAAkC;AAC3D2nB,UAAAA,cAAc,GAAG3nB,OAAjB;AACD,SAFc,CAAf;AAIA,YAAIjG,KAAK,GAAG,IAAZ;AACA+gC,QAAAA,QAAQ,CAAC,SAASpsB,MAAT,CAAgBvF,OAAhB,EAAyB;AAChC,cAAIpP,KAAK,CAACysB,MAAV,EAAkB;AAChB;AACA;AACD;;AAEDzsB,UAAAA,KAAK,CAACysB,MAAN,GAAe,IAAIzW,MAAJ,CAAW5G,OAAX,CAAf;AACAwe,UAAAA,cAAc,CAAC5tB,KAAK,CAACysB,MAAP,CAAd;AACD,SARO,CAAR;AASD;AAED;;;;;AAGA2sB,MAAAA,WAAW,CAAC5vD,SAAZ,CAAsB+wD,gBAAtB,GAAyC,SAASA,gBAAT,GAA4B;AACnE,YAAI,KAAK9tB,MAAT,EAAiB;AACf,gBAAM,KAAKA,MAAX;AACD;AACF,OAJD;AAMA;;;;;;AAIA2sB,MAAAA,WAAW,CAACtrD,MAAZ,GAAqB,SAASA,MAAT,GAAkB;AACrC,YAAI6mB,MAAJ;AACA,YAAI3U,KAAK,GAAG,IAAIo5C,WAAJ,CAAgB,SAASrY,QAAT,CAAkBv4C,CAAlB,EAAqB;AAC/CmsB,UAAAA,MAAM,GAAGnsB,CAAT;AACD,SAFW,CAAZ;AAGA,eAAO;AACLwX,UAAAA,KAAK,EAAEA,KADF;AAEL2U,UAAAA,MAAM,EAAEA;AAFH,SAAP;AAID,OATD;;AAWA9sB,MAAAA,MAAM,CAACD,OAAP,GAAiBwxD,WAAjB;AAGA;AAAO,KAjhXG;AAkhXV;;AACA;AAAO,cAASvxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;;;;;;;;;;;;;;;AAoBAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS0xD,MAAT,CAAgB7lD,QAAhB,EAA0B;AACzC,eAAO,SAASc,IAAT,CAAcY,GAAd,EAAmB;AACxB,iBAAO1B,QAAQ,CAACxE,KAAT,CAAe,IAAf,EAAqBkG,GAArB,CAAP;AACD,SAFD;AAGD,OAJD;AAOA;;AAAO,KAnjXG;AAojXV;;AACA;AAAO,cAAStN,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIhf,SAAS,GAAGgf,IAAI,CAAChf,SAArB;AAAA,YACI48B,MAAM,GAAG5d,IAAI,CAAC4d,MADlB;AAAA,YAEIgH,OAAO,GAAG5kB,IAAI,CAAC4kB,OAFnB;AAAA,YAGIM,WAAW,GAAGllB,IAAI,CAACklB,WAHvB;AAAA,YAII/kB,IAAI,GAAGH,IAAI,CAACG,IAJhB;AAAA,YAKIoc,SAAS,GAAGvc,IAAI,CAACuc,SALrB;AAMA,eAAOxc,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,QADK,EAEL;AACEmG,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAa8Y,EAAb,EAAiB;AACpB,mBAAOilB,MAAM,IAAIA,MAAM,CAACjlB,EAAD,CAAvB;AACD,WAHH;AAIE3X,UAAAA,SAAS,EAAE,YAAYA,SAJzB;AAKE4jC,UAAAA,OAAO,EAAEA,OALX;AAMEM,UAAAA,WAAW,EAAEA;AANf,SAFK,EASLnlB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAFF,EAGEmf,IAHF,CATK,EAcLoc,SAAS,IAAIxc,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,MAA9B,EAAsC;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAAtC,CAdR,CAAP;AAgBD,OAvBD;AAyBA;;AAAO,KA7lXG;AA8lXV;;AACA;AAAO,cAAStP,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIhf,SAAS,GAAGgf,IAAI,CAAChf,SAArB;AAAA,YACI4jC,OAAO,GAAG5kB,IAAI,CAAC4kB,OADnB;AAAA,YAEIzkB,IAAI,GAAGH,IAAI,CAACG,IAFhB;AAGA,eAAOJ,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,GADK,EAEL;AAAEsH,UAAAA,SAAS,EAAE,eAAeA,SAA5B;AAAuC4jC,UAAAA,OAAO,EAAEA;AAAhD,SAFK,EAGL7kB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAFF,EAGEmf,IAHF,CAHK,CAAP;AASD,OAbD;AAeA;;AAAO,KA7nXG;AA8nXV;;AACA;AAAO,cAASzuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2gC,eAAe,GAAG/nC,mBAAmB,CAAC,EAAD,CAAzC;;AAEA,UAAIgoC,gBAAgB,GAAG7sB,sBAAsB,CAAC4sB,eAAD,CAA7C;;AAEA,UAAIxZ,gBAAgB,GAAGvuB,mBAAmB,CAAC,EAAD,CAA1C;;AAEA,UAAIwuB,gBAAgB,GAAGrT,sBAAsB,CAACoT,gBAAD,CAA7C;;AAEA,UAAIE,aAAa,GAAGzuB,mBAAmB,CAAC,EAAD,CAAvC;;AAEA,UAAI0uB,aAAa,GAAGvT,sBAAsB,CAACsT,aAAD,CAA1C;;AAEA,UAAIwZ,2BAA2B,GAAGjoC,mBAAmB,CAAC,EAAD,CAArD;;AAEA,UAAIkoC,2BAA2B,GAAG/sB,sBAAsB,CAAC8sB,2BAAD,CAAxD;;AAEA,UAAIE,UAAU,GAAGnoC,mBAAmB,CAAC,EAAD,CAApC;;AAEA,UAAIooC,UAAU,GAAGjtB,sBAAsB,CAACgtB,UAAD,CAAvC;;AAEA,UAAIpa,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,UAAI6a,OAAO,GAAG5oC,mBAAmB,CAAC,EAAD,CAAjC;;AAEA,UAAI6oC,QAAQ,GAAG1tB,sBAAsB,CAACytB,OAAD,CAArC;;AAEA,UAAIQ,IAAI,GAAGppC,mBAAmB,CAAC,EAAD,CAA9B;;AAEA,UAAIqpC,KAAK,GAAGluB,sBAAsB,CAACiuB,IAAD,CAAlC;;AAEA,UAAIwrB,yBAAyB,GAAG50D,mBAAmB,CAAC,GAAD,CAAnD;;AAEA,UAAI60D,0BAA0B,GAAG15C,sBAAsB,CAACy5C,yBAAD,CAAvD;;AAEA,UAAIE,MAAM,GAAG90D,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAI+0D,OAAO,GAAG55C,sBAAsB,CAAC25C,MAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGh1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIi1D,OAAO,GAAG95C,sBAAsB,CAAC65C,OAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGl1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIm1D,OAAO,GAAGh6C,sBAAsB,CAAC+5C,OAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGp1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIq1D,OAAO,GAAGl6C,sBAAsB,CAACi6C,OAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGt1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIu1D,QAAQ,GAAGp6C,sBAAsB,CAACm6C,OAAD,CAArC;;AAEAt1D,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AAEA,eAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI8wD,IAAI,GAAG,CAAC,GAAGT,OAAO,WAAX,GAAX;AACA,UAAIU,IAAI,GAAG,CAAC,GAAGR,OAAO,WAAX,GAAX;AACA,UAAIS,EAAE,GAAG,CAAC,GAAGP,OAAO,WAAX,GAAT;AACA,UAAIQ,EAAE,GAAG,CAAC,GAAGN,OAAO,WAAX,GAAT;AACA,UAAIO,EAAE,GAAG,CAAC,GAAGL,QAAQ,WAAZ,GAAT;;AAEA,UAAI,OAAOzzD,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,QAAAA,MAAM,CAAC+zD,gCAAP,GAA0C;AACxCC,UAAAA,EAAE,EAAEN,IADoC;AAExC,mBAASA,IAF+B;AAGxC,mBAASC,IAH+B;AAIxC,mBAASC,EAJ+B;AAKxCK,UAAAA,EAAE,EAAEJ,EALoC;AAMxCK,UAAAA,EAAE,EAAEJ;AANoC,SAA1C;AAQD;;AAED,UAAIK,OAAO,GAAG,UAAUvsB,UAAV,EAAsB;AAClC,SAAC,GAAGtB,UAAU,WAAd,EAAwB6tB,OAAxB,EAAiCvsB,UAAjC;;AAEA,iBAASusB,OAAT,GAAmB;AACjB,WAAC,GAAGznC,gBAAgB,WAApB,EAA8B,IAA9B,EAAoCynC,OAApC;AACA,iBAAO,CAAC,GAAG/tB,2BAA2B,WAA/B,EAAyC,IAAzC,EAA+C,CAAC+tB,OAAO,CAACjxC,SAAR,IAAqB,CAAC,GAAGgjB,gBAAgB,WAApB,EAA8BiuB,OAA9B,CAAtB,EAA8DlvD,KAA9D,CAAoE,IAApE,EAA0E/B,SAA1E,CAA/C,CAAP;AACD;;AAED,SAAC,GAAG0pB,aAAa,WAAjB,EAA2BunC,OAA3B,EAAoC,CAAC;AACnCpxD,UAAAA,GAAG,EAAE,uBAD8B;AAEnCuC,UAAAA,KAAK,EAAE,SAASyB,qBAAT,GAAiC;AACtC,mBAAO,KAAP;AACD;AAJkC,SAAD,EAKjC;AACDhE,UAAAA,GAAG,EAAE,mBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS8B,iBAAT,GAA6B;AAClC,gBAAI8gC,OAAO,GAAG,KAAK77B,IAAnB;AACA,gBAAI+nD,aAAa,GAAGlsB,OAAO,CAACnjB,aAAR,CAAsB,wBAAtB,CAApB;;AACA,gBAAIqvC,aAAJ,EAAmB;AACjBA,cAAAA,aAAa,CAACpzC,gBAAd,CAA+B,OAA/B,EAAwC,UAAUzY,CAAV,EAAa;AACnDA,gBAAAA,CAAC,CAACoiC,cAAF;AACAzC,gBAAAA,OAAO,CAACnjB,aAAR,CAAsB,qBAAtB,EAA6CsvC,SAA7C,CAAuDlc,MAAvD,CAA8D,UAA9D;AACD,eAHD,EAGG,IAHH;AAID;AACF;AAXA,SALiC,EAiBjC;AACDp1C,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0rC,kBAAT,CAA4BpuC,GAA5B,EAAiC;AACtCA,YAAAA,GAAG,CAACgC,MAAJ,CAAW+V,GAAX,GAAiB,kEAAjB;AACD;AAJA,SAjBiC,EAsBjC;AACD5X,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,gBAAI2nC,MAAM,GAAG,IAAb;;AAEA,gBAAImS,MAAM,GAAG,KAAKz2C,KAAlB;AAAA,gBACI+9B,OAAO,GAAG0Y,MAAM,CAAC1Y,OADrB;AAAA,gBAEIJ,IAAI,GAAG8Y,MAAM,CAAC9Y,IAFlB;AAAA,gBAGIiF,QAAQ,GAAG6T,MAAM,CAAC7T,QAHtB;AAAA,gBAIIunB,oBAAoB,GAAG1T,MAAM,CAAC5O,aAJlC;AAAA,gBAKIA,aAAa,GAAGsiB,oBAAoB,KAAKvvD,SAAzB,GAAqC,EAArC,GAA0CuvD,oBAL9D;AAAA,gBAMIC,YAAY,GAAG3T,MAAM,CAAC/P,KAN1B;AAAA,gBAOIA,KAAK,GAAG0jB,YAAY,KAAKxvD,SAAjB,GAA6B,EAA7B,GAAkCwvD,YAP9C;AAAA,gBAQItiB,aAAa,GAAG2O,MAAM,CAAC3O,aAR3B;AAAA,gBASIC,YAAY,GAAG0O,MAAM,CAAC1O,YAT1B;AAWA,gBAAIsiB,UAAU,GAAG1sB,IAAI,IAAII,OAAO,CAACJ,IAAR,CAAawC,KAAb,KAAuBxC,IAAI,CAACwC,KAArD;AACA,gBAAI+E,OAAO,GAAG,CAAC,GAAGrkC,MAAH,CAAU6lC,KAAV,EAAiBnmC,GAAjB,CAAqB,UAAUrH,CAAV,EAAa;AAC/C,qBAAOA,CAAC,CAACkG,WAAF,EAAP;AACD,aAFc,EAEZwT,OAFY,CAEJmrB,OAAO,CAACJ,IAAR,CAAawC,KAAb,CAAmB/gC,WAAnB,EAFI,CAAf;AAGA,gBAAIwmC,SAAS,GAAG7H,OAAO,CAAC6H,SAAxB;AAEA,gBAAI0kB,kBAAkB,GAAG,EAAzB;;AACA,gBAAI1kB,SAAS,IAAIA,SAAS,CAACG,UAA3B,EAAuC;AACrCukB,cAAAA,kBAAkB,GAAG1kB,SAAS,CAACG,UAA/B;;AACA,kBAAIH,SAAS,CAACG,UAAV,KAAyB,GAAzB,IAAgCH,SAAS,CAAC2kB,QAA1C,IAAsD3kB,SAAS,CAAC2kB,QAAV,CAAmBC,WAA7E,EAA0F;AACxFF,gBAAAA,kBAAkB,GAAG,MAArB;AACD;AACF;;AAED,mBAAOvoC,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEmG,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAaK,IAAb,EAAmB;AACtBoiC,gBAAAA,MAAM,CAACpiC,IAAP,GAAcA,IAAd;AACD,eAFH;AAEKc,cAAAA,SAAS,EAAE,iBAAiBkiC,OAAO,GAAG,kBAAH,GAAwB,EAAhD;AAFhB,aAFK,EAKLnjB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BkhC,QAAQ,WAAtC,EAAgD;AAC9C55B,cAAAA,SAAS,EAAE,mBADmC;AAE9CwN,cAAAA,GAAG,EAAEutB,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAasJ,UAFY;AAG9ChlB,cAAAA,GAAG,EAAE8b,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAawC,KAHY;AAI9Cje,cAAAA,OAAO,EAAE,KAAK2kB,kBAAL,CAAwBtwC,IAAxB,CAA6B,IAA7B;AAJqC,aAAhD,CALK,EAWLwrB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AAAEsH,cAAAA,SAAS,EAAE,uBAAuB26B,IAAI,GAAG,GAAH,GAAS,GAApC;AAAb,aAArC,CAHF,EAIE5b,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AACEsH,cAAAA,SAAS,EAAE,qBADb;AAEEi+B,cAAAA,IAAI,EAAElD,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAa0K;AAFrC,aAFF,EAMEtK,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAawC,KAN/B,CAJF,EAYEpe,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE6kC,aAHF,CAZF,EAiBE9lB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE,CAAC,GAAG4lD,0BAA0B,WAA9B,EAAwC7qB,OAAO,CAAC0sB,UAAhD,EAA4D;AAC1DC,cAAAA,SAAS,EAAE,IAD+C;AAE1DnJ,cAAAA,MAAM,EAAE;AACNoJ,gBAAAA,eAAe,EAAE90D,MAAM,CAAC+zD,gCAAP,CAAwChnB,QAAxC;AADX;AAFkD,aAA5D,CAHF,CAjBF,EA2BEgD,SAAS,IAAI7jB,OAAO,WAAP,CAAgBrmB,aAAhB,CACX,GADW,EAEX;AAAEsH,cAAAA,SAAS,EAAE,iBAAb;AAAgCsE,cAAAA,KAAK,EAAE,MAAvC;AAA+Cs/B,cAAAA,OAAO,EAAEmB;AAAxD,aAFW,EAGXnC,SAAS,CAACI,gBAAV,GAA6BjkB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AACxEp6B,cAAAA,SAAS,EAAE,cAD6D;AAExEzO,cAAAA,IAAI,EAAE,UAFkE;AAGxE4tB,cAAAA,IAAI,EAAEmoC;AAHkE,aAA7C,CAA7B,GAIKvoC,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAChDp6B,cAAAA,SAAS,EAAE,cADqC;AAEhDzO,cAAAA,IAAI,EAAE,OAF0C;AAGhD4tB,cAAAA,IAAI,EAAEmoC;AAH0C,aAA7C,CAPM,CA3Bf,EAwCED,UAAU,GAAGtoC,OAAO,WAAP,CAAgBrmB,aAAhB,CACX,GADW,EAEX;AACEulC,cAAAA,IAAI,EAAElD,OAAO,CAACsK,QADhB;AAEErlC,cAAAA,SAAS,EAAE,iBAFb;AAGEsE,cAAAA,KAAK,EAAE,MAHT;AAIE7M,cAAAA,MAAM,EAAE;AAJV,aAFW,EAQXsnB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,aAAb;AAA4BzO,cAAAA,IAAI,EAAE;AAAlC,aAA7C,CARW,CAAH,GASNwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACF,GADE,EAEF;AAAEsH,cAAAA,SAAS,EAAE,kBAAb;AAAiCsE,cAAAA,KAAK,EAAE,OAAxC;AAAiDs/B,cAAAA,OAAO,EAAEkB;AAA1D,aAFE,EAGF/lB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,cAAb;AAA6BzO,cAAAA,IAAI,EAAE;AAAnC,aAA7C,CAHE,CAjDN,CAHF,EA0DEwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AACnCsH,cAAAA,SAAS,EAAE,+BADwB;AAEnCof,cAAAA,uBAAuB,EAAE;AACvBC,gBAAAA,MAAM,EAAE0b,OAAO,CAAC6sB;AADO;AAFU,aAArC,CA1DF,CAXK,CAAP;AA6ED;AA3GA,SAtBiC,CAApC;AAmIA,eAAOZ,OAAP;AACD,OA5Ia,CA4IZloC,MAAM,CAACxc,SA5IK,CAAd;;AA8IA7R,MAAAA,OAAO,WAAP,GAAkBu2D,OAAlB;AAEA;AAAO,KAr2XG;AAs2XV;;AACA;AAAO,cAASt2D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIwM,GAAG,GAAG;AACT,4BAAoB,GADX;AAET,sBAAc,GAFL;AAGT,wBAAgB,GAHP;AAIT,uBAAe,GAJN;AAKT,0BAAkB,GALT;AAMT,uBAAe,GANN;AAOT,qBAAa;AAPJ,OAAV;;AASA,eAASsqD,cAAT,CAAwBC,GAAxB,EAA6B;AAC5B,eAAO/2D,mBAAmB,CAACg3D,qBAAqB,CAACD,GAAD,CAAtB,CAA1B;AACA;;AAAA;;AACD,eAASC,qBAAT,CAA+BD,GAA/B,EAAoC;AACnC,YAAI58C,EAAE,GAAG3N,GAAG,CAACuqD,GAAD,CAAZ;AACA,YAAG,EAAE58C,EAAE,GAAG,CAAP,CAAH,EAAc;AACb,gBAAM,IAAIvN,KAAJ,CAAU,yBAAyBmqD,GAAzB,GAA+B,IAAzC,CAAN;AACD,eAAO58C,EAAP;AACA;;AAAA;;AACD28C,MAAAA,cAAc,CAAC58C,IAAf,GAAsB,SAAS+8C,kBAAT,GAA8B;AACnD,eAAOt2D,MAAM,CAACuZ,IAAP,CAAY1N,GAAZ,CAAP;AACA,OAFD;;AAGAsqD,MAAAA,cAAc,CAAC/4C,OAAf,GAAyBi5C,qBAAzB;AACAr3D,MAAAA,MAAM,CAACD,OAAP,GAAiBo3D,cAAjB;AACAA,MAAAA,cAAc,CAAC38C,EAAf,GAAoB,GAApB;AAEA;AAAO,KAl4XG;AAm4XV;;AACA;AAAO,cAASxa,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,+hBAAjB;AAEA;AAAO,KAx4XG;AAy4XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,+dAAjB;AAEA;AAAO,KA94XG;AA+4XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,4iCAAjB;AAEA;AAAO,KAp5XG;AAq5XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,0sBAAjB;AAEA;AAAO,KA15XG;AA25XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,qdAAjB;AAEA;AAAO,KAh6XG;AAi6XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,qUAAjB;AAEA;AAAO,KAt6XG;AAu6XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,q7CAAjB;AAEA;AAAO,KA56XG;AA66XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI42D,eAAe,GAAG52D,mBAAmB,CAAC,GAAD,CAAzC;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,eAASk3D,oBAAT,CAA+BC,SAA/B,EAA0C3gD,YAA1C,EAAwD;AACtD,eAAOogD,eAAe,CAACngD,IAAI,CAACgM,GAAL,EAAD,EAAa00C,SAAb,EAAwB3gD,YAAxB,CAAtB;AACD;;AAED7W,MAAAA,MAAM,CAACD,OAAP,GAAiBw3D,oBAAjB;AAGA;AAAO,KAvgYG;AAwgYV;;AACA;AAAO,cAASv3D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIo3D,WAAW,GAAGp3D,mBAAmB,CAAC,GAAD,CAArC;;AACA,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIq3D,mBAAmB,GAAGr3D,mBAAmB,CAAC,GAAD,CAA7C;;AACA,UAAIs3D,kBAAkB,GAAGt3D,mBAAmB,CAAC,GAAD,CAA5C;;AACA,UAAIu3D,QAAQ,GAAGv3D,mBAAmB,CAAC,GAAD,CAAlC;;AAEA,UAAIw3D,cAAc,GAAG,IAArB;AACA,UAAIC,0BAA0B,GAAG,IAAjC;AACA,UAAIC,gBAAgB,GAAG,KAAvB;AACA,UAAIC,qBAAqB,GAAG,KAA5B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA,eAASf,eAAT,CAA0BgB,kBAA1B,EAA8CT,SAA9C,EAAyD3gD,YAAzD,EAAuE;AACrE,YAAIG,OAAO,GAAGH,YAAY,IAAI,EAA9B;AAEA,YAAIqhD,UAAU,GAAGT,WAAW,CAACQ,kBAAD,EAAqBT,SAArB,CAA5B;AAEA,YAAI3J,MAAM,GAAG72C,OAAO,CAAC62C,MAArB;AACA,YAAIsK,QAAQ,GAAGP,QAAQ,CAACX,eAAT,CAAyBkB,QAAxC;;AACA,YAAItK,MAAM,IAAIA,MAAM,CAACoJ,eAAjB,IAAoCpJ,MAAM,CAACoJ,eAAP,CAAuBkB,QAA/D,EAAyE;AACvEA,UAAAA,QAAQ,GAAGtK,MAAM,CAACoJ,eAAP,CAAuBkB,QAAlC;AACD;;AAED,YAAIC,eAAe,GAAG;AACpBpB,UAAAA,SAAS,EAAEqB,OAAO,CAACrhD,OAAO,CAACggD,SAAT,CADE;AAEpBkB,UAAAA,UAAU,EAAEA;AAFQ,SAAtB;AAKA,YAAII,QAAJ,EAAcC,SAAd;;AACA,YAAIL,UAAU,GAAG,CAAjB,EAAoB;AAClBI,UAAAA,QAAQ,GAAG3hD,KAAK,CAACshD,kBAAD,CAAhB;AACAM,UAAAA,SAAS,GAAG5hD,KAAK,CAAC6gD,SAAD,CAAjB;AACD,SAHD,MAGO;AACLc,UAAAA,QAAQ,GAAG3hD,KAAK,CAAC6gD,SAAD,CAAhB;AACAe,UAAAA,SAAS,GAAG5hD,KAAK,CAACshD,kBAAD,CAAjB;AACD;;AAED,YAAI7+C,OAAO,GAAGs+C,mBAAmB,CAACa,SAAD,EAAYD,QAAZ,CAAjC;AACA,YAAI/qD,MAAM,GAAGgrD,SAAS,CAACvgD,iBAAV,KAAgCsgD,QAAQ,CAACtgD,iBAAT,EAA7C;AACA,YAAIkB,OAAO,GAAG9W,IAAI,CAAC6qD,KAAL,CAAW7zC,OAAO,GAAG,EAArB,IAA2B7L,MAAzC;AACA,YAAIirD,MAAJ,CA5BqE,CA8BrE;;AACA,YAAIt/C,OAAO,GAAG,CAAd,EAAiB;AACf,cAAIlC,OAAO,CAACyhD,cAAZ,EAA4B;AAC1B,gBAAIr/C,OAAO,GAAG,CAAd,EAAiB;AACf,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,CAArB,EAAwBC,eAAxB,CAAf;AACD,aAFD,MAEO,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,EAArB,EAAyBC,eAAzB,CAAf;AACD,aAFM,MAEA,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,EAArB,EAAyBC,eAAzB,CAAf;AACD,aAFM,MAEA,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,aAAD,EAAgB,IAAhB,EAAsBC,eAAtB,CAAf;AACD,aAFM,MAEA,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,CAArB,EAAwBC,eAAxB,CAAf;AACD,aAFM,MAEA;AACL,qBAAOD,QAAQ,CAAC,UAAD,EAAa,CAAb,EAAgBC,eAAhB,CAAf;AACD;AACF,WAdD,MAcO;AACL,gBAAIl/C,OAAO,KAAK,CAAhB,EAAmB;AACjB,qBAAOi/C,QAAQ,CAAC,kBAAD,EAAqB,CAArB,EAAwBC,eAAxB,CAAf;AACD,aAFD,MAEO;AACL,qBAAOD,QAAQ,CAAC,UAAD,EAAaj/C,OAAb,EAAsBk/C,eAAtB,CAAf;AACD;AACF,WArBc,CAuBjB;;AACC,SAxBD,MAwBO,IAAIl/C,OAAO,GAAG,EAAd,EAAkB;AACvB,iBAAOi/C,QAAQ,CAAC,UAAD,EAAaj/C,OAAb,EAAsBk/C,eAAtB,CAAf,CADuB,CAGzB;AACC,SAJM,MAIA,IAAIl/C,OAAO,GAAG,EAAd,EAAkB;AACvB,iBAAOi/C,QAAQ,CAAC,aAAD,EAAgB,CAAhB,EAAmBC,eAAnB,CAAf,CADuB,CAGzB;AACC,SAJM,MAIA,IAAIl/C,OAAO,GAAG2+C,cAAd,EAA8B;AACnC,cAAI5+C,KAAK,GAAG7W,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG,EAArB,CAAZ;AACA,iBAAOi/C,QAAQ,CAAC,aAAD,EAAgBl/C,KAAhB,EAAuBm/C,eAAvB,CAAf,CAFmC,CAIrC;AACC,SALM,MAKA,IAAIl/C,OAAO,GAAG4+C,0BAAd,EAA0C;AAC/C,iBAAOK,QAAQ,CAAC,OAAD,EAAU,CAAV,EAAaC,eAAb,CAAf,CAD+C,CAGjD;AACC,SAJM,MAIA,IAAIl/C,OAAO,GAAG6+C,gBAAd,EAAgC;AACrC,cAAIW,IAAI,GAAGt2D,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG2+C,cAArB,CAAX;AACA,iBAAOM,QAAQ,CAAC,OAAD,EAAUO,IAAV,EAAgBN,eAAhB,CAAf,CAFqC,CAIvC;AACC,SALM,MAKA,IAAIl/C,OAAO,GAAG8+C,qBAAd,EAAqC;AAC1CQ,UAAAA,MAAM,GAAGp2D,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG6+C,gBAArB,CAAT;AACA,iBAAOI,QAAQ,CAAC,cAAD,EAAiBK,MAAjB,EAAyBJ,eAAzB,CAAf;AACD;;AAEDI,QAAAA,MAAM,GAAGb,kBAAkB,CAACY,SAAD,EAAYD,QAAZ,CAA3B,CAlFqE,CAoFrE;;AACA,YAAIE,MAAM,GAAG,EAAb,EAAiB;AACf,cAAIG,YAAY,GAAGv2D,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG6+C,gBAArB,CAAnB;AACA,iBAAOI,QAAQ,CAAC,SAAD,EAAYQ,YAAZ,EAA0BP,eAA1B,CAAf,CAFe,CAIjB;AACC,SALD,MAKO;AACL,cAAIQ,sBAAsB,GAAGJ,MAAM,GAAG,EAAtC;AACA,cAAIK,KAAK,GAAGz2D,IAAI,CAAC6Z,KAAL,CAAWu8C,MAAM,GAAG,EAApB,CAAZ,CAFK,CAIL;;AACA,cAAII,sBAAsB,GAAG,CAA7B,EAAgC;AAC9B,mBAAOT,QAAQ,CAAC,aAAD,EAAgBU,KAAhB,EAAuBT,eAAvB,CAAf,CAD8B,CAGhC;AACC,WAJD,MAIO,IAAIQ,sBAAsB,GAAG,CAA7B,EAAgC;AACrC,mBAAOT,QAAQ,CAAC,YAAD,EAAeU,KAAf,EAAsBT,eAAtB,CAAf,CADqC,CAGvC;AACC,WAJM,MAIA;AACL,mBAAOD,QAAQ,CAAC,cAAD,EAAiBU,KAAK,GAAG,CAAzB,EAA4BT,eAA5B,CAAf;AACD;AACF;AACF;;AAEDp4D,MAAAA,MAAM,CAACD,OAAP,GAAiBk3D,eAAjB;AAGA;AAAO,KAxtYG;AAytYV;;AACA;AAAO,cAASj3D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAASo3D,WAAT,CAAsBqB,aAAtB,EAAqCC,cAArC,EAAqD;AACnD,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIE,QAAQ,GAAGV,QAAQ,CAACvhD,OAAT,EAAf;AACA,YAAIwhD,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AACA,YAAIE,SAAS,GAAGV,SAAS,CAACxhD,OAAV,EAAhB;;AAEA,YAAIiiD,QAAQ,GAAGC,SAAf,EAA0B;AACxB,iBAAO,CAAC,CAAR;AACD,SAFD,MAEO,IAAID,QAAQ,GAAGC,SAAf,EAA0B;AAC/B,iBAAO,CAAP;AACD,SAFM,MAEA;AACL,iBAAO,CAAP;AACD;AACF;;AAEDj5D,MAAAA,MAAM,CAACD,OAAP,GAAiB03D,WAAjB;AAGA;AAAO,KAjxYG;AAkxYV;;AACA;AAAO,cAASz3D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;;;;;;;;;;;;;;;AAeA,eAASgE,MAAT,CAAiB6S,QAAjB,EAA2B;AACzB,eAAOA,QAAQ,YAAYE,IAA3B;AACD;;AAED9W,MAAAA,MAAM,CAACD,OAAP,GAAiBgE,MAAjB;AAGA;AAAO,KA3yYG;AA4yYV;;AACA;AAAO,cAAS/D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI64D,wBAAwB,GAAG74D,mBAAmB,CAAC,GAAD,CAAlD;AAEA;;;;;;;;;;;;;;;;;;;;;;AAoBA,eAASq3D,mBAAT,CAA8BoB,aAA9B,EAA6CC,cAA7C,EAA6D;AAC3D,YAAIr/C,IAAI,GAAGw/C,wBAAwB,CAACJ,aAAD,EAAgBC,cAAhB,CAAxB,GAA0D,IAArE;AACA,eAAOr/C,IAAI,GAAG,CAAP,GAAWtX,IAAI,CAAC6Z,KAAL,CAAWvC,IAAX,CAAX,GAA8BtX,IAAI,CAAC4Z,IAAL,CAAUtC,IAAV,CAArC;AACD;;AAED1Z,MAAAA,MAAM,CAACD,OAAP,GAAiB23D,mBAAjB;AAGA;AAAO,KA70YG;AA80YV;;AACA;AAAO,cAAS13D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;;AAoBA,eAAS64D,wBAAT,CAAmCJ,aAAnC,EAAkDC,cAAlD,EAAkE;AAChE,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIP,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AACA,eAAOT,QAAQ,CAACvhD,OAAT,KAAqBwhD,SAAS,CAACxhD,OAAV,EAA5B;AACD;;AAED/W,MAAAA,MAAM,CAACD,OAAP,GAAiBm5D,wBAAjB;AAGA;AAAO,KAh3YG;AAi3YV;;AACA;AAAO,cAASl5D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAI84D,0BAA0B,GAAG94D,mBAAmB,CAAC,GAAD,CAApD;;AACA,UAAI+4D,UAAU,GAAG/4D,mBAAmB,CAAC,GAAD,CAApC;AAEA;;;;;;;;;;;;;;;;;;;;;AAmBA,eAASs3D,kBAAT,CAA6BmB,aAA7B,EAA4CC,cAA5C,EAA4D;AAC1D,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIP,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AAEA,YAAIM,IAAI,GAAGD,UAAU,CAACd,QAAD,EAAWC,SAAX,CAArB;AACA,YAAIe,UAAU,GAAGl3D,IAAI,CAACm3D,GAAL,CAASJ,0BAA0B,CAACb,QAAD,EAAWC,SAAX,CAAnC,CAAjB;AACAD,QAAAA,QAAQ,CAACkB,QAAT,CAAkBlB,QAAQ,CAACmB,QAAT,KAAsBJ,IAAI,GAAGC,UAA/C,EAN0D,CAQ1D;AACA;;AACA,YAAII,kBAAkB,GAAGN,UAAU,CAACd,QAAD,EAAWC,SAAX,CAAV,KAAoC,CAACc,IAA9D;AACA,eAAOA,IAAI,IAAIC,UAAU,GAAGI,kBAAjB,CAAX;AACD;;AAED15D,MAAAA,MAAM,CAACD,OAAP,GAAiB43D,kBAAjB;AAGA;AAAO,KA55YG;AA65YV;;AACA;AAAO,cAAS33D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;AAmBA,eAAS84D,0BAAT,CAAqCL,aAArC,EAAoDC,cAApD,EAAoE;AAClE,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIP,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AAEA,YAAIY,QAAQ,GAAGrB,QAAQ,CAACsB,WAAT,KAAyBrB,SAAS,CAACqB,WAAV,EAAxC;AACA,YAAIC,SAAS,GAAGvB,QAAQ,CAACmB,QAAT,KAAsBlB,SAAS,CAACkB,QAAV,EAAtC;AAEA,eAAOE,QAAQ,GAAG,EAAX,GAAgBE,SAAvB;AACD;;AAED75D,MAAAA,MAAM,CAACD,OAAP,GAAiBo5D,0BAAjB;AAGA;AAAO,KAl8YG;AAm8YV;;AACA;AAAO,cAASn5D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAAS+4D,UAAT,CAAqBN,aAArB,EAAoCC,cAApC,EAAoD;AAClD,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIE,QAAQ,GAAGV,QAAQ,CAACvhD,OAAT,EAAf;AACA,YAAIwhD,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AACA,YAAIE,SAAS,GAAGV,SAAS,CAACxhD,OAAV,EAAhB;;AAEA,YAAIiiD,QAAQ,GAAGC,SAAf,EAA0B;AACxB,iBAAO,CAAC,CAAR;AACD,SAFD,MAEO,IAAID,QAAQ,GAAGC,SAAf,EAA0B;AAC/B,iBAAO,CAAP;AACD,SAFM,MAEA;AACL,iBAAO,CAAP;AACD;AACF;;AAEDj5D,MAAAA,MAAM,CAACD,OAAP,GAAiBq5D,UAAjB;AAGA;AAAO,KA3/YG;AA4/YV;;AACA;AAAO,cAASp5D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIy5D,0BAA0B,GAAGz5D,mBAAmB,CAAC,GAAD,CAApD;;AACA,UAAI05D,iBAAiB,GAAG15D,mBAAmB,CAAC,GAAD,CAA3C;AAEA;;;;;;AAIAL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfk3D,QAAAA,eAAe,EAAE6C,0BAA0B,EAD5B;AAEf7mC,QAAAA,MAAM,EAAE8mC,iBAAiB;AAFV,OAAjB;AAMA;AAAO,KA5gZG;AA6gZV;;AACA;AAAO,cAAS/5D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,eAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,cADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAvBa;AA4B1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,QADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WA5BkB;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,OADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,eADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,SADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,cADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,QADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,aADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,eADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO,QAAQ10D,MAAf;AACD,aAFD,MAEO;AACL,qBAAOA,MAAM,GAAG,MAAhB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KArnZG;AAsnZV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI46D,2BAA2B,GAAG56D,mBAAmB,CAAC,GAAD,CAArD;;AAEA,eAAS05D,iBAAT,GAA8B;AAC5B;AACA;AACA;AACA;AACA,YAAImB,WAAW,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E,CAAlB;AACA,YAAIC,UAAU,GAAG,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EAAyD,MAAzD,EAAiE,QAAjE,EAA2E,WAA3E,EAAwF,SAAxF,EAAmG,UAAnG,EAA+G,UAA/G,CAAjB;AACA,YAAIC,aAAa,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CAApB;AACA,YAAIC,aAAa,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,CAApB;AACA,YAAIC,YAAY,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,WAAhC,EAA6C,UAA7C,EAAyD,QAAzD,EAAmE,UAAnE,CAAnB;AACA,YAAIC,iBAAiB,GAAG,CAAC,IAAD,EAAO,IAAP,CAAxB;AACA,YAAIC,iBAAiB,GAAG,CAAC,IAAD,EAAO,IAAP,CAAxB;AACA,YAAIC,YAAY,GAAG,CAAC,MAAD,EAAS,MAAT,CAAnB;AAEA,YAAIC,UAAU,GAAG;AACf;AACA,iBAAO,aAAUnkD,IAAV,EAAgB;AACrB,mBAAO2jD,WAAW,CAAC3jD,IAAI,CAACkiD,QAAL,EAAD,CAAlB;AACD,WAJc;AAMf;AACA,kBAAQ,cAAUliD,IAAV,EAAgB;AACtB,mBAAO4jD,UAAU,CAAC5jD,IAAI,CAACkiD,QAAL,EAAD,CAAjB;AACD,WATc;AAWf;AACA,gBAAM,YAAUliD,IAAV,EAAgB;AACpB,mBAAO6jD,aAAa,CAAC7jD,IAAI,CAACokD,MAAL,EAAD,CAApB;AACD,WAdc;AAgBf;AACA,iBAAO,aAAUpkD,IAAV,EAAgB;AACrB,mBAAO8jD,aAAa,CAAC9jD,IAAI,CAACokD,MAAL,EAAD,CAApB;AACD,WAnBc;AAqBf;AACA,kBAAQ,cAAUpkD,IAAV,EAAgB;AACtB,mBAAO+jD,YAAY,CAAC/jD,IAAI,CAACokD,MAAL,EAAD,CAAnB;AACD,WAxBc;AA0Bf;AACA,eAAK,WAAUpkD,IAAV,EAAgB;AACnB,mBAAQA,IAAI,CAACqkD,QAAL,KAAkB,EAAnB,IAA0B,CAA1B,GAA8BL,iBAAiB,CAAC,CAAD,CAA/C,GAAqDA,iBAAiB,CAAC,CAAD,CAA7E;AACD,WA7Bc;AA+Bf;AACA,eAAK,WAAUhkD,IAAV,EAAgB;AACnB,mBAAQA,IAAI,CAACqkD,QAAL,KAAkB,EAAnB,IAA0B,CAA1B,GAA8BJ,iBAAiB,CAAC,CAAD,CAA/C,GAAqDA,iBAAiB,CAAC,CAAD,CAA7E;AACD,WAlCc;AAoCf;AACA,gBAAM,YAAUjkD,IAAV,EAAgB;AACpB,mBAAQA,IAAI,CAACqkD,QAAL,KAAkB,EAAnB,IAA0B,CAA1B,GAA8BH,YAAY,CAAC,CAAD,CAA1C,GAAgDA,YAAY,CAAC,CAAD,CAAnE;AACD;AAvCc,SAAjB,CAd4B,CAwD5B;;AACA,YAAII,iBAAiB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,KAAX,EAAkB,GAAlB,EAAuB,GAAvB,EAA4B,GAA5B,CAAxB;AACAA,QAAAA,iBAAiB,CAAC/2D,OAAlB,CAA0B,UAAUg3D,cAAV,EAA0B;AAClDJ,UAAAA,UAAU,CAACI,cAAc,GAAG,GAAlB,CAAV,GAAmC,UAAUvkD,IAAV,EAAgBmkD,UAAhB,EAA4B;AAC7D,mBAAOK,OAAO,CAACL,UAAU,CAACI,cAAD,CAAV,CAA2BvkD,IAA3B,CAAD,CAAd;AACD,WAFD;AAGD,SAJD;AAMA,eAAO;AACLmkD,UAAAA,UAAU,EAAEA,UADP;AAELM,UAAAA,sBAAsB,EAAEf,2BAA2B,CAACS,UAAD;AAF9C,SAAP;AAID;;AAED,eAASK,OAAT,CAAkBxnC,MAAlB,EAA0B;AACxB,YAAI0nC,MAAM,GAAG1nC,MAAM,GAAG,GAAtB;;AACA,YAAI0nC,MAAM,GAAG,EAAT,IAAeA,MAAM,GAAG,EAA5B,EAAgC;AAC9B,kBAAQA,MAAM,GAAG,EAAjB;AACE,iBAAK,CAAL;AACE,qBAAO1nC,MAAM,GAAG,IAAhB;;AACF,iBAAK,CAAL;AACE,qBAAOA,MAAM,GAAG,IAAhB;;AACF,iBAAK,CAAL;AACE,qBAAOA,MAAM,GAAG,IAAhB;AANJ;AAQD;;AACD,eAAOA,MAAM,GAAG,IAAhB;AACD;;AAEDv0B,MAAAA,MAAM,CAACD,OAAP,GAAiBg6D,iBAAjB;AAGA;AAAO,KAntZG;AAotZV;;AACA;AAAO,cAAS/5D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAIm8D,mBAAmB,GAAG,CACxB,GADwB,EACnB,IADmB,EACb,GADa,EACR,GADQ,EACH,IADG,EACG,KADH,EACU,MADV,EACkB,GADlB,EAExB,GAFwB,EAEnB,GAFmB,EAEd,IAFc,EAER,IAFQ,EAEF,MAFE,EAEM,IAFN,EAEY,MAFZ,EAGxB,GAHwB,EAGnB,IAHmB,EAGb,GAHa,EAGR,IAHQ,EAGF,GAHE,EAGG,IAHH,EAIxB,GAJwB,EAInB,IAJmB,EAIb,GAJa,EAIR,IAJQ,EAIF,KAJE,EAKxB,GALwB,EAKnB,IALmB,EAKb,GALa,EAKR,GALQ,CAA1B;;AAQA,eAASjB,2BAAT,CAAsCS,UAAtC,EAAkD;AAChD,YAAIS,aAAa,GAAG,EAApB;;AACA,aAAK,IAAIj3D,GAAT,IAAgBw2D,UAAhB,EAA4B;AAC1B,cAAIA,UAAU,CAAC95D,cAAX,CAA0BsD,GAA1B,CAAJ,EAAoC;AAClCi3D,YAAAA,aAAa,CAACztD,IAAd,CAAmBxJ,GAAnB;AACD;AACF;;AAED,YAAIk3D,gBAAgB,GAAGF,mBAAmB,CACvC/uD,MADoB,CACbgvD,aADa,EAEpBE,IAFoB,GAGpBnoB,OAHoB,EAAvB;AAIA,YAAI8nB,sBAAsB,GAAG,IAAI7jC,MAAJ,CAC3B,4BAA4B,GAA5B,GAAkCikC,gBAAgB,CAACv1C,IAAjB,CAAsB,GAAtB,CAAlC,GAA+D,KADpC,EAC2C,GAD3C,CAA7B;AAIA,eAAOm1C,sBAAP;AACD;;AAEDh8D,MAAAA,MAAM,CAACD,OAAP,GAAiBk7D,2BAAjB;AAGA;AAAO,KArvZG;AAsvZV;;AACA;AAAO,cAASj7D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,QADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,KADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,KAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,SADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,MADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,MADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WAvBkB;AA4B1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,SADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WA5Ba;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,KADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,SADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,MADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,QADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,KADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,QADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,QADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO10D,MAAM,GAAG,GAAhB;AACD,aAFD,MAEO;AACL,qBAAOA,MAAM,GAAG,GAAhB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KA91ZG;AA+1ZV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,QADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,KADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,KAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,SADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,MADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,MADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WAvBkB;AA4B1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,SADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WA5Ba;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,KADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,SADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,MADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,QADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,KADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,QADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,QADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO10D,MAAM,GAAG,GAAhB;AACD,aAFD,MAEO;AACL,qBAAOA,MAAM,GAAG,GAAhB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAv8ZG;AAw8ZV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,qBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,WADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,cAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,qBADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAvBa;AA4B1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,QADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WA5BkB;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,OADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,oBADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,OADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,oBADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,OADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,cADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,YADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO,QAAQ10D,MAAf;AACD,aAFD,MAEO;AACL,qBAAO,UAAUA,MAAjB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAhjaG;AAijaV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,qBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,WADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,aAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,iBADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAvBa;AA4B1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,SADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WA5BkB;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,QADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,gBADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,QADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,cADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,MADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,cADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,cADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO,UAAU10D,MAAjB;AACD,aAFD,MAEO;AACL,qBAAO,YAAYA,MAAnB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAzpaG;AA0paV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAASu8D,UAAT,CAAqBC,MAArB,EAA6BxvD,KAA7B,EAAoC;AAClC;AACA,YAAIwvD,MAAM,CAACrC,GAAP,KAAehzD,SAAf,IAA4B6F,KAAK,KAAK,CAA1C,EAA6C;AAC3C,iBAAOwvD,MAAM,CAACrC,GAAd;AACD;;AAED,YAAIsC,KAAK,GAAGzvD,KAAK,GAAG,EAApB;AACA,YAAIkvD,MAAM,GAAGlvD,KAAK,GAAG,GAArB,CAPkC,CASlC;;AACA,YAAIyvD,KAAK,KAAK,CAAV,IAAeP,MAAM,KAAK,EAA9B,EAAkC;AAChC,iBAAOM,MAAM,CAACE,kBAAP,CAA0Bh4D,OAA1B,CAAkC,WAAlC,EAA+CsI,KAA/C,CAAP,CADgC,CAGlC;AACC,SAJD,MAIO,IAAKyvD,KAAK,IAAI,CAAT,IAAcA,KAAK,IAAI,CAAxB,KAA+BP,MAAM,GAAG,EAAT,IAAeA,MAAM,GAAG,EAAvD,CAAJ,EAAgE;AACrE,iBAAOM,MAAM,CAACG,gBAAP,CAAwBj4D,OAAxB,CAAgC,WAAhC,EAA6CsI,KAA7C,CAAP,CADqE,CAGvE;AACC,SAJM,MAIA;AACL,iBAAOwvD,MAAM,CAACI,cAAP,CAAsBl4D,OAAtB,CAA8B,WAA9B,EAA2CsI,KAA3C,CAAP;AACD;AACF;;AAED,eAAS6vD,oBAAT,CAA+BL,MAA/B,EAAuC;AACrC,eAAO,UAAUxvD,KAAV,EAAiBiK,OAAjB,EAA0B;AAC/B,cAAIA,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,kBAAIqE,MAAM,CAACM,MAAX,EAAmB;AACjB,uBAAOP,UAAU,CAACC,MAAM,CAACM,MAAR,EAAgB9vD,KAAhB,CAAjB;AACD,eAFD,MAEO;AACL,uBAAO,WAAWuvD,UAAU,CAACC,MAAM,CAACO,OAAR,EAAiB/vD,KAAjB,CAA5B;AACD;AACF,aAND,MAMO;AACL,kBAAIwvD,MAAM,CAACQ,IAAX,EAAiB;AACf,uBAAOT,UAAU,CAACC,MAAM,CAACQ,IAAR,EAAchwD,KAAd,CAAjB;AACD,eAFD,MAEO;AACL,uBAAOuvD,UAAU,CAACC,MAAM,CAACO,OAAR,EAAiB/vD,KAAjB,CAAV,GAAoC,QAA3C;AACD;AACF;AACF,WAdD,MAcO;AACL,mBAAOuvD,UAAU,CAACC,MAAM,CAACO,OAAR,EAAiB/vD,KAAjB,CAAjB;AACD;AACF,SAlBD;AAmBD;;AAED,eAAS+sD,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE2C,oBAAoB,CAAC;AACrCE,YAAAA,OAAO,EAAE;AACP5C,cAAAA,GAAG,EAAE,gBADE;AAEPuC,cAAAA,kBAAkB,EAAE,0BAFb;AAGPC,cAAAA,gBAAgB,EAAE,yBAHX;AAIPC,cAAAA,cAAc,EAAE;AAJT,aAD4B;AAOrCE,YAAAA,MAAM,EAAE;AACN3C,cAAAA,GAAG,EAAE,2BADC;AAENuC,cAAAA,kBAAkB,EAAE,qCAFd;AAGNC,cAAAA,gBAAgB,EAAE,qCAHZ;AAINC,cAAAA,cAAc,EAAE;AAJV;AAP6B,WAAD,CADZ;AAgB1BvC,UAAAA,QAAQ,EAAEwC,oBAAoB,CAAC;AAC7BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,mBADb;AAEPC,cAAAA,gBAAgB,EAAE,mBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADoB;AAM7BI,YAAAA,IAAI,EAAE;AACJN,cAAAA,kBAAkB,EAAE,yBADhB;AAEJC,cAAAA,gBAAgB,EAAE,yBAFd;AAGJC,cAAAA,cAAc,EAAE;AAHZ,aANuB;AAW7BE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,yBADd;AAENC,cAAAA,gBAAgB,EAAE,yBAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AAXqB,WAAD,CAhBJ;AAkC1BtC,UAAAA,WAAW,EAAE,qBAAUpzB,CAAV,EAAajwB,OAAb,EAAsB;AACjC,gBAAIA,OAAO,CAACggD,SAAZ,EAAuB;AACrB,kBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,uBAAO,iBAAP;AACD,eAFD,MAEO;AACL,uBAAO,iBAAP;AACD;AACF;;AAED,mBAAO,WAAP;AACD,WA5CyB;AA8C1BoC,UAAAA,gBAAgB,EAAEsC,oBAAoB,CAAC;AACrCE,YAAAA,OAAO,EAAE;AACP5C,cAAAA,GAAG,EAAE,eADE;AAEPuC,cAAAA,kBAAkB,EAAE,yBAFb;AAGPC,cAAAA,gBAAgB,EAAE,wBAHX;AAIPC,cAAAA,cAAc,EAAE;AAJT,aAD4B;AAOrCE,YAAAA,MAAM,EAAE;AACN3C,cAAAA,GAAG,EAAE,0BADC;AAENuC,cAAAA,kBAAkB,EAAE,oCAFd;AAGNC,cAAAA,gBAAgB,EAAE,oCAHZ;AAINC,cAAAA,cAAc,EAAE;AAJV;AAP6B,WAAD,CA9CZ;AA6D1BpC,UAAAA,QAAQ,EAAEqC,oBAAoB,CAAC;AAC7BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,kBADb;AAEPC,cAAAA,gBAAgB,EAAE,kBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADoB;AAM7BI,YAAAA,IAAI,EAAE;AACJN,cAAAA,kBAAkB,EAAE,wBADhB;AAEJC,cAAAA,gBAAgB,EAAE,wBAFd;AAGJC,cAAAA,cAAc,EAAE;AAHZ,aANuB;AAW7BE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,wBADd;AAENC,cAAAA,gBAAgB,EAAE,wBAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AAXqB,WAAD,CA7DJ;AA+E1BnC,UAAAA,WAAW,EAAEoC,oBAAoB,CAAC;AAChCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,sBADb;AAEPC,cAAAA,gBAAgB,EAAE,uBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADuB;AAMhCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,oCADd;AAENC,cAAAA,gBAAgB,EAAE,qCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANwB,WAAD,CA/EP;AA4F1BlC,UAAAA,MAAM,EAAEmC,oBAAoB,CAAC;AAC3BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,eADb;AAEPC,cAAAA,gBAAgB,EAAE,gBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADkB,WAAD,CA5FF;AAoG1BjC,UAAAA,KAAK,EAAEkC,oBAAoB,CAAC;AAC1BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,gBADb;AAEPC,cAAAA,gBAAgB,EAAE,eAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADiB,WAAD,CApGD;AA4G1BhC,UAAAA,YAAY,EAAEiC,oBAAoB,CAAC;AACjCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,wBADb;AAEPC,cAAAA,gBAAgB,EAAE,yBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADwB;AAMjCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,sCADd;AAENC,cAAAA,gBAAgB,EAAE,uCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANyB,WAAD,CA5GR;AAyH1B/B,UAAAA,OAAO,EAAEgC,oBAAoB,CAAC;AAC5BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,iBADb;AAEPC,cAAAA,gBAAgB,EAAE,kBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADmB,WAAD,CAzHH;AAiI1B9B,UAAAA,WAAW,EAAE+B,oBAAoB,CAAC;AAChCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,sBADb;AAEPC,cAAAA,gBAAgB,EAAE,qBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADuB;AAMhCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,oCADd;AAENC,cAAAA,gBAAgB,EAAE,qCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANwB,WAAD,CAjIP;AA8I1B7B,UAAAA,MAAM,EAAE8B,oBAAoB,CAAC;AAC3BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,eADb;AAEPC,cAAAA,gBAAgB,EAAE,gBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADkB,WAAD,CA9IF;AAsJ1B5B,UAAAA,UAAU,EAAE6B,oBAAoB,CAAC;AAC/BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,uBADb;AAEPC,cAAAA,gBAAgB,EAAE,sBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADsB;AAM/BE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,iCADd;AAENC,cAAAA,gBAAgB,EAAE,kCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANuB,WAAD,CAtJN;AAmK1B3B,UAAAA,YAAY,EAAE4B,oBAAoB,CAAC;AACjCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,qBADb;AAEPC,cAAAA,gBAAgB,EAAE,sBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADwB;AAMjCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,2BADd;AAENC,cAAAA,gBAAgB,EAAE,4BAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANyB,WAAD;AAnKR,SAA5B;;AAiLA,iBAASxE,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,iBAAOgjD,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BpL,KAA7B,EAAoCiK,OAApC,CAAP;AACD;;AAED,eAAO;AACLmhD,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAz4aG;AA04aV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B,CAEjC;;AAEA;AAAO,KA/4aG;AAg5aV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA,UAAIqqC,eAAe,GAAG/xC,OAAO,CAAC+xC,eAAR,GAA0B,iBAAhD;AACA,UAAI+C,UAAU,GAAG90C,OAAO,CAAC80C,UAAR,GAAqB,OAAtC,CATsD,CASP;;AAC/C,UAAIvH,UAAU,GAAGvtC,OAAO,CAACutC,UAAR,GAAqB,YAAtC;AAEA;AAAO,KA75aG;AA85aV;;AACA;AAAO,cAASttC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAIu1D,mBAAmB,GAAG38D,mBAAmB,CAAC,GAAD,CAA7C;;AAEA,UAAI48D,mBAAmB,GAAGzhD,sBAAsB,CAACwhD,mBAAD,CAAhD;;AAEA,UAAIh0B,KAAK,GAAG3oC,mBAAmB,CAAC,EAAD,CAA/B;;AAEA,eAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI0tC,KAAK,GAAG,SAASA,KAAT,CAAeyqB,IAAf,EAAqB3yB,cAArB,EAAqC;AAC/C,YAAI4yB,eAAe,GAAG5yB,cAAc,KAAK,MAAnB,GAA4B,QAA5B,GAAuC,OAA7D;AACA,YAAI6yB,EAAE,GAAG,8SAA8S7yB,cAA9S,GAA+T,eAA/T,GAAiV4yB,eAAjV,GAAmW,wEAAnW,IAA+a5yB,cAAc,KAAK,MAAnB,GAA4B,iBAA5B,GAAgD,aAA/d,IAAgf,gBAAhf,IAAogB4yB,eAAe,KAAK,QAApB,GAA+B,aAA/B,GAA+C,WAAnjB,IAAkkB,ioBAA3kB;AAEA,YAAID,IAAI,CAAC1yB,MAAL,KAAgB,IAApB,EAA0B,OAAO0yB,IAAI,CAAC1yB,MAAZ;AAE1B,eAAO;AACLkI,UAAAA,aAAa,EAAE,qBADV;AAELnsB,UAAAA,KAAK,EAAE62C,EAFF;AAGLC,UAAAA,SAAS,EAAEH;AAHN,SAAP;AAKD,OAXD;;AAaA,eAASvvB,WAAT,CAAqBzD,KAArB,EAA4B;AAC1B,YAAIF,KAAK,GAAG,IAAZ;;AAEA,YAAIiH,QAAQ,GAAG,KAAKj6B,OAApB;AAAA,YACIk6B,KAAK,GAAGD,QAAQ,CAACC,KADrB;AAAA,YAEIC,IAAI,GAAGF,QAAQ,CAACE,IAFpB;AAAA,YAGIzF,OAAO,GAAGuF,QAAQ,CAACvF,OAHvB;AAAA,YAIInB,cAAc,GAAG0G,QAAQ,CAAC1G,cAJ9B;AAAA,YAKIoF,aAAa,GAAGsB,QAAQ,CAACtB,aAL7B;AAMA,YAAIpM,MAAM,GAAG,KAAKtyB,KAAlB;AAAA,YACIu5B,MAAM,GAAGjH,MAAM,CAACiH,MADpB;AAAA,YAEIL,QAAQ,GAAG5G,MAAM,CAAC4G,QAFtB;AAIA,eAAOnB,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,UAAvB,EAAmC0E,KAAK,CAAC;AAC9CvB,UAAAA,KAAK,EAAEA,KADuC;AAE9CC,UAAAA,IAAI,EAAEA,IAFwC;AAG9C32B,UAAAA,EAAE,EAAE0vB,KAAK,CAAC3V,MAHoC;AAI9C+oC,UAAAA,QAAQ,EAAE5xB,OAJoC;AAK9ClB,UAAAA,MAAM,EAAEA;AALsC,SAAD,EAM5CD,cAN4C,CAAxC,EAMa;AAClBzjB,UAAAA,OAAO,EAAE;AACPgE,YAAAA,aAAa,EAAE,YAAY,KAAKkjB;AADzB;AADS,SANb,EAUJphB,IAVI,CAUC,UAAUmf,GAAV,EAAe;AACrB,cAAIlpB,IAAI,GAAGkpB,GAAG,CAAClpB,IAAJ,CAASA,IAAT,CAAc06C,UAAd,CAAyBrzB,KAAzB,CAA+BC,QAA1C;AACA,cAAIpQ,KAAK,GAAGlX,IAAI,CAACsvB,KAAL,CAAWtlC,GAAX,CAAe,UAAU2B,IAAV,EAAgB;AACzC,gBAAIgvD,MAAM,GAAGhvD,IAAI,CAACgvD,MAAL,IAAe7tB,aAA5B;AAEA,mBAAO;AACLn1B,cAAAA,EAAE,EAAEhM,IAAI,CAACivD,UADJ;AAEL9qB,cAAAA,GAAG,EAAEnkC,IAAI,CAACgM,EAFL;AAGLyvB,cAAAA,IAAI,EAAE;AACJsJ,gBAAAA,UAAU,EAAEiqB,MAAM,CAAC5tB,SADf;AAEJnD,gBAAAA,KAAK,EAAE+wB,MAAM,CAAC/wB,KAFV;AAGJkI,gBAAAA,QAAQ,EAAE6oB,MAAM,CAACx1C;AAHb,eAHD;AAQL+uC,cAAAA,UAAU,EAAEvoD,IAAI,CAACkvD,SARZ;AASLxG,cAAAA,SAAS,EAAE1oD,IAAI,CAACmvD,QATX;AAULpxB,cAAAA,IAAI,EAAE/9B,IAAI,CAAC+9B,IAVN;AAWLoI,cAAAA,QAAQ,EAAE,wBAAwBzD,KAAxB,GAAgC,GAAhC,GAAsCC,IAAtC,GAA6C,UAA7C,GAA0DjH,KAAK,CAAC3V,MAAhE,GAAyE,gBAAzE,GAA4F/lB,IAAI,CAACivD,UAXtG;AAYLvrB,cAAAA,SAAS,EAAE1jC,IAAI,CAAC0jC;AAZX,aAAP;AAcD,WAjBW,CAAZ;AAmBA,cAAIjG,EAAE,GAAG,KAAK,CAAd;;AAEA,cAAI1B,cAAc,KAAK,MAAvB,EAA+B;AAC7B0B,YAAAA,EAAE,GAAG,GAAG9+B,MAAH,CAAU,CAAC,GAAG8vD,mBAAmB,WAAvB,EAAiCljC,KAAjC,CAAV,EAAmD,CAAC,GAAGkjC,mBAAmB,WAAvB,EAAiC9yB,QAAjC,CAAnD,CAAL;AACD,WAFD,MAEO;AACL8B,YAAAA,EAAE,GAAG,GAAG9+B,MAAH,CAAU,CAAC,GAAG8vD,mBAAmB,WAAvB,EAAiC9yB,QAAjC,CAAV,EAAsD,CAAC,GAAG8yB,mBAAmB,WAAvB,EAAiCljC,KAAjC,CAAtD,CAAL;AACD;;AAED,cAAIgR,UAAU,GAAGloB,IAAI,CAACg0C,QAAL,CAAc+G,eAAd,KAAkC,KAAlC,IAA2C/6C,IAAI,CAACg0C,QAAL,CAAcC,WAAd,KAA8B,KAA1F;;AACA9sB,UAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb84B,YAAAA,QAAQ,EAAE8B,EADG;AAEblB,YAAAA,UAAU,EAAEA,UAFC;AAGbP,YAAAA,MAAM,EAAE3nB,IAAI,CAACg0C,QAAL,CAAcgH,WAAd,IAA6Bh7C,IAAI,CAACg0C,QAAL,CAAciH;AAHtC,WAAf;;AAKA,iBAAO7xB,EAAP;AACD,SA9CM,CAAP;AA+CD;;AAEDlsC,MAAAA,OAAO,WAAP,GAAkB4tC,WAAlB;AAEA;AAAO,KA7/aG;AA8/aV;;AACA;AAAO,cAAS3tC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIy8D,KAAK,GAAG19D,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI29D,MAAM,GAAGxiD,sBAAsB,CAACuiD,KAAD,CAAnC;;AAEA,eAASviD,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuN,GAAV,EAAe;AAC/B,YAAIJ,KAAK,CAACnK,OAAN,CAAcuK,GAAd,CAAJ,EAAwB;AACtB,eAAK,IAAI/M,CAAC,GAAG,CAAR,EAAW09D,IAAI,GAAG/wD,KAAK,CAACI,GAAG,CAACrI,MAAL,CAA5B,EAA0C1E,CAAC,GAAG+M,GAAG,CAACrI,MAAlD,EAA0D1E,CAAC,EAA3D,EAA+D;AAC7D09D,YAAAA,IAAI,CAAC19D,CAAD,CAAJ,GAAU+M,GAAG,CAAC/M,CAAD,CAAb;AACD;;AAED,iBAAO09D,IAAP;AACD,SAND,MAMO;AACL,iBAAO,CAAC,GAAGD,MAAM,WAAV,EAAoB1wD,GAApB,CAAP;AACD;AACF,OAVD;AAYA;;AAAO,KAxhbG;AAyhbV;;AACA;AAAO,cAAStN,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA9hbG;AA+hbV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB6M,KAAvB,CAA6ByW,IAA9C;AAGA;AAAO,KAvibG;AAwibV;;AACA;AAAO,cAAS3jB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAII,IAAI,GAAGJ,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIs5C,WAAW,GAAGt5C,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAIm1C,QAAQ,GAAGn1C,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI69D,cAAc,GAAG79D,mBAAmB,CAAC,GAAD,CAAxC;;AACA,UAAIu5C,SAAS,GAAGv5C,mBAAmB,CAAC,EAAD,CAAnC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC9F,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAUyjB,IAAV,EAAgB;AAAE5W,QAAAA,KAAK,CAACyW,IAAN,CAAWG,IAAX;AAAmB,OAA7D,CAA1B,EAA0F,OAA1F,EAAmG;AACxG;AACAH,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAcw6C;AAAU;AAAxB,UAAwE;AAC5E,cAAI9rD,CAAC,GAAGmP,QAAQ,CAAC28C,SAAD,CAAhB;AACA,cAAIh3D,CAAC,GAAG,OAAO,IAAP,IAAe,UAAf,GAA4B,IAA5B,GAAmC+F,KAA3C;AACA,cAAI4tC,IAAI,GAAGz1C,SAAS,CAACJ,MAArB;AACA,cAAIm5D,KAAK,GAAGtjB,IAAI,GAAG,CAAP,GAAWz1C,SAAS,CAAC,CAAD,CAApB,GAA0B6B,SAAtC;AACA,cAAIkpD,OAAO,GAAGgO,KAAK,KAAKl3D,SAAxB;AACA,cAAIuK,KAAK,GAAG,CAAZ;AACA,cAAIsoC,MAAM,GAAGH,SAAS,CAACvnC,CAAD,CAAtB;AACA,cAAIpN,MAAJ,EAAYzB,MAAZ,EAAoBw0B,IAApB,EAA0BtW,QAA1B;AACA,cAAI0uC,OAAJ,EAAagO,KAAK,GAAGz4D,GAAG,CAACy4D,KAAD,EAAQtjB,IAAI,GAAG,CAAP,GAAWz1C,SAAS,CAAC,CAAD,CAApB,GAA0B6B,SAAlC,EAA6C,CAA7C,CAAX,CAT+D,CAU5E;;AACA,cAAI6yC,MAAM,IAAI7yC,SAAV,IAAuB,EAAEC,CAAC,IAAI+F,KAAL,IAAcysC,WAAW,CAACI,MAAD,CAA3B,CAA3B,EAAiE;AAC/D,iBAAKr4B,QAAQ,GAAGq4B,MAAM,CAACt5C,IAAP,CAAY4R,CAAZ,CAAX,EAA2B7O,MAAM,GAAG,IAAI2D,CAAJ,EAAzC,EAAkD,CAAC,CAAC6wB,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAA5E,EAAkF3I,KAAK,EAAvF,EAA2F;AACzFysD,cAAAA,cAAc,CAAC16D,MAAD,EAASiO,KAAT,EAAgB2+C,OAAO,GAAG3vD,IAAI,CAACihB,QAAD,EAAW08C,KAAX,EAAkB,CAACpmC,IAAI,CAACvwB,KAAN,EAAagK,KAAb,CAAlB,EAAuC,IAAvC,CAAP,GAAsDumB,IAAI,CAACvwB,KAAlF,CAAd;AACD;AACF,WAJD,MAIO;AACLxC,YAAAA,MAAM,GAAGuwC,QAAQ,CAACnjC,CAAC,CAACpN,MAAH,CAAjB;;AACA,iBAAKzB,MAAM,GAAG,IAAI2D,CAAJ,CAAMlC,MAAN,CAAd,EAA6BA,MAAM,GAAGwM,KAAtC,EAA6CA,KAAK,EAAlD,EAAsD;AACpDysD,cAAAA,cAAc,CAAC16D,MAAD,EAASiO,KAAT,EAAgB2+C,OAAO,GAAGgO,KAAK,CAAC/rD,CAAC,CAACZ,KAAD,CAAF,EAAWA,KAAX,CAAR,GAA4BY,CAAC,CAACZ,KAAD,CAApD,CAAd;AACD;AACF;;AACDjO,UAAAA,MAAM,CAACyB,MAAP,GAAgBwM,KAAhB;AACA,iBAAOjO,MAAP;AACD;AAzBuG,OAAnG,CAAP;AA6BA;AAAO,KAnlbG;AAolbV;;AACA;AAAO,cAASxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIo8C,eAAe,GAAGp8C,mBAAmB,CAAC,CAAD,CAAzC;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU0B,MAAV,EAAkBgQ,KAAlB,EAAyBhK,KAAzB,EAAgC;AAC/C,YAAIgK,KAAK,IAAIhQ,MAAb,EAAqBg7C,eAAe,CAACrqC,CAAhB,CAAkB3Q,MAAlB,EAA0BgQ,KAA1B,EAAiCuD,UAAU,CAAC,CAAD,EAAIvN,KAAJ,CAA3C,EAArB,KACKhG,MAAM,CAACgQ,KAAD,CAAN,GAAgBhK,KAAhB;AACN,OAHD;AAMA;;AAAO;AACP;AAnmbU,KAjEM;AAAhB;AAqqbC,CA/qbD","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gitalk\"] = factory();\n\telse\n\t\troot[\"Gitalk\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 82);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(39)('wks');\nvar uid = __webpack_require__(25);\nvar Symbol = __webpack_require__(1).Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar bind = __webpack_require__(72);\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar ctx = __webpack_require__(13);\nvar hide = __webpack_require__(11);\nvar has = __webpack_require__(12);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"version\", function() { return version; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOM\", function() { return DOM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Children\", function() { return Children; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return render$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createClass\", function() { return createClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createFactory\", function() { return createFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createElement\", function() { return createElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cloneElement\", function() { return cloneElement$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isValidElement\", function() { return isValidElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findDOMNode\", function() { return findDOMNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unmountComponentAtNode\", function() { return unmountComponentAtNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PureComponent\", function() { return PureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unstable_renderSubtreeIntoContainer\", function() { return renderSubtreeIntoContainer; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_prop_types__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_preact__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"PropTypes\", function() { return __WEBPACK_IMPORTED_MODULE_0_prop_types___default.a; });\n\n\n\nvar version = '15.1.0'; // trick libraries to think we are react\n\nvar ELEMENTS = 'a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan'.split(' ');\n\nvar REACT_ELEMENT_TYPE = (typeof Symbol!=='undefined' && Symbol.for && Symbol.for('react.element')) || 0xeac7;\n\nvar COMPONENT_WRAPPER_KEY = typeof Symbol!=='undefined' ? Symbol.for('__preactCompatWrapper') : '__preactCompatWrapper';\n\n// don't autobind these methods since they already have guaranteed context.\nvar AUTOBIND_BLACKLIST = {\n\tconstructor: 1,\n\trender: 1,\n\tshouldComponentUpdate: 1,\n\tcomponentWillReceiveProps: 1,\n\tcomponentWillUpdate: 1,\n\tcomponentDidUpdate: 1,\n\tcomponentWillMount: 1,\n\tcomponentDidMount: 1,\n\tcomponentWillUnmount: 1,\n\tcomponentDidUnmount: 1\n};\n\n\nvar CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vert|word|writing|x)[A-Z]/;\n\n\nvar BYPASS_HOOK = {};\n\n/*global process*/\nvar DEV = typeof process==='undefined' || !process.env || process.env.NODE_ENV!=='production';\n\n// a component that renders nothing. Used to replace components for unmountComponentAtNode.\nfunction EmptyComponent() { return null; }\n\n\n\n// make react think we're react.\nvar VNode = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"]('a', null).constructor;\nVNode.prototype.$$typeof = REACT_ELEMENT_TYPE;\nVNode.prototype.preactCompatUpgraded = false;\nVNode.prototype.preactCompatNormalized = false;\n\nObject.defineProperty(VNode.prototype, 'type', {\n\tget: function() { return this.nodeName; },\n\tset: function(v) { this.nodeName = v; },\n\tconfigurable:true\n});\n\nObject.defineProperty(VNode.prototype, 'props', {\n\tget: function() { return this.attributes; },\n\tset: function(v) { this.attributes = v; },\n\tconfigurable:true\n});\n\n\n\nvar oldEventHook = __WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].event;\n__WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].event = function (e) {\n\tif (oldEventHook) { e = oldEventHook(e); }\n\te.persist = Object;\n\te.nativeEvent = e;\n\treturn e;\n};\n\n\nvar oldVnodeHook = __WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].vnode;\n__WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].vnode = function (vnode) {\n\tif (!vnode.preactCompatUpgraded) {\n\t\tvnode.preactCompatUpgraded = true;\n\n\t\tvar tag = vnode.nodeName,\n\t\t\tattrs = vnode.attributes = extend({}, vnode.attributes);\n\n\t\tif (typeof tag==='function') {\n\t\t\tif (tag[COMPONENT_WRAPPER_KEY]===true || (tag.prototype && 'isReactComponent' in tag.prototype)) {\n\t\t\t\tif (vnode.children && String(vnode.children)==='') { vnode.children = undefined; }\n\t\t\t\tif (vnode.children) { attrs.children = vnode.children; }\n\n\t\t\t\tif (!vnode.preactCompatNormalized) {\n\t\t\t\t\tnormalizeVNode(vnode);\n\t\t\t\t}\n\t\t\t\thandleComponentVNode(vnode);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (vnode.children && String(vnode.children)==='') { vnode.children = undefined; }\n\t\t\tif (vnode.children) { attrs.children = vnode.children; }\n\n\t\t\tif (attrs.defaultValue) {\n\t\t\t\tif (!attrs.value && attrs.value!==0) {\n\t\t\t\t\tattrs.value = attrs.defaultValue;\n\t\t\t\t}\n\t\t\t\tdelete attrs.defaultValue;\n\t\t\t}\n\n\t\t\thandleElementVNode(vnode, attrs);\n\t\t}\n\t}\n\n\tif (oldVnodeHook) { oldVnodeHook(vnode); }\n};\n\nfunction handleComponentVNode(vnode) {\n\tvar tag = vnode.nodeName,\n\t\ta = vnode.attributes;\n\n\tvnode.attributes = {};\n\tif (tag.defaultProps) { extend(vnode.attributes, tag.defaultProps); }\n\tif (a) { extend(vnode.attributes, a); }\n}\n\nfunction handleElementVNode(vnode, a) {\n\tvar shouldSanitize, attrs, i;\n\tif (a) {\n\t\tfor (i in a) { if ((shouldSanitize = CAMEL_PROPS.test(i))) { break; } }\n\t\tif (shouldSanitize) {\n\t\t\tattrs = vnode.attributes = {};\n\t\t\tfor (i in a) {\n\t\t\t\tif (a.hasOwnProperty(i)) {\n\t\t\t\t\tattrs[ CAMEL_PROPS.test(i) ? i.replace(/([A-Z0-9])/, '-$1').toLowerCase() : i ] = a[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// proxy render() since React returns a Component reference.\nfunction render$1(vnode, parent, callback) {\n\tvar prev = parent && parent._preactCompatRendered && parent._preactCompatRendered.base;\n\n\t// ignore impossible previous renders\n\tif (prev && prev.parentNode!==parent) { prev = null; }\n\n\t// default to first Element child\n\tif (!prev) { prev = parent.children[0]; }\n\n\t// remove unaffected siblings\n\tfor (var i=parent.childNodes.length; i--; ) {\n\t\tif (parent.childNodes[i]!==prev) {\n\t\t\tparent.removeChild(parent.childNodes[i]);\n\t\t}\n\t}\n\n\tvar out = __WEBPACK_IMPORTED_MODULE_1_preact__[\"render\"](vnode, parent, prev);\n\tif (parent) { parent._preactCompatRendered = out && (out._component || { base: out }); }\n\tif (typeof callback==='function') { callback(); }\n\treturn out && out._component || out;\n}\n\n\nvar ContextProvider = function () {};\n\nContextProvider.prototype.getChildContext = function () {\n\treturn this.props.context;\n};\nContextProvider.prototype.render = function (props) {\n\treturn props.children[0];\n};\n\nfunction renderSubtreeIntoContainer(parentComponent, vnode, container, callback) {\n\tvar wrap = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](ContextProvider, { context: parentComponent.context }, vnode);\n\tvar c = render$1(wrap, container);\n\tif (callback) { callback(c); }\n\treturn c._component || c.base;\n}\n\n\nfunction unmountComponentAtNode(container) {\n\tvar existing = container._preactCompatRendered && container._preactCompatRendered.base;\n\tif (existing && existing.parentNode===container) {\n\t\t__WEBPACK_IMPORTED_MODULE_1_preact__[\"render\"](__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](EmptyComponent), container, existing);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n\nvar ARR = [];\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nvar Children = {\n\tmap: function(children, fn, ctx) {\n\t\tif (children == null) { return null; }\n\t\tchildren = Children.toArray(children);\n\t\tif (ctx && ctx!==children) { fn = fn.bind(ctx); }\n\t\treturn children.map(fn);\n\t},\n\tforEach: function(children, fn, ctx) {\n\t\tif (children == null) { return null; }\n\t\tchildren = Children.toArray(children);\n\t\tif (ctx && ctx!==children) { fn = fn.bind(ctx); }\n\t\tchildren.forEach(fn);\n\t},\n\tcount: function(children) {\n\t\treturn children && children.length || 0;\n\t},\n\tonly: function(children) {\n\t\tchildren = Children.toArray(children);\n\t\tif (children.length!==1) { throw new Error('Children.only() expects only one child.'); }\n\t\treturn children[0];\n\t},\n\ttoArray: function(children) {\n\t\tif (children == null) { return []; }\n\t\treturn Array.isArray && Array.isArray(children) ? children : ARR.concat(children);\n\t}\n};\n\n\n/** Track current render() component for ref assignment */\nvar currentComponent;\n\n\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n\nvar DOM = {};\nfor (var i=ELEMENTS.length; i--; ) {\n\tDOM[ELEMENTS[i]] = createFactory(ELEMENTS[i]);\n}\n\nfunction upgradeToVNodes(arr, offset) {\n\tfor (var i=offset || 0; i<arr.length; i++) {\n\t\tvar obj = arr[i];\n\t\tif (Array.isArray(obj)) {\n\t\t\tupgradeToVNodes(obj);\n\t\t}\n\t\telse if (obj && typeof obj==='object' && !isValidElement(obj) && ((obj.props && obj.type) || (obj.attributes && obj.nodeName) || obj.children)) {\n\t\t\tarr[i] = createElement(obj.type || obj.nodeName, obj.props || obj.attributes, obj.children);\n\t\t}\n\t}\n}\n\nfunction isStatelessComponent(c) {\n\treturn typeof c==='function' && !(c.prototype && c.prototype.render);\n}\n\n\n// wraps stateless functional components in a PropTypes validator\nfunction wrapStatelessComponent(WrappedComponent) {\n\treturn createClass({\n\t\tdisplayName: WrappedComponent.displayName || WrappedComponent.name,\n\t\trender: function() {\n\t\t\treturn WrappedComponent(this.props, this.context);\n\t\t}\n\t});\n}\n\n\nfunction statelessComponentHook(Ctor) {\n\tvar Wrapped = Ctor[COMPONENT_WRAPPER_KEY];\n\tif (Wrapped) { return Wrapped===true ? Ctor : Wrapped; }\n\n\tWrapped = wrapStatelessComponent(Ctor);\n\n\tObject.defineProperty(Wrapped, COMPONENT_WRAPPER_KEY, { configurable:true, value:true });\n\tWrapped.displayName = Ctor.displayName;\n\tWrapped.propTypes = Ctor.propTypes;\n\tWrapped.defaultProps = Ctor.defaultProps;\n\n\tObject.defineProperty(Ctor, COMPONENT_WRAPPER_KEY, { configurable:true, value:Wrapped });\n\n\treturn Wrapped;\n}\n\n\nfunction createElement() {\n\tvar args = [], len = arguments.length;\n\twhile ( len-- ) args[ len ] = arguments[ len ];\n\n\tupgradeToVNodes(args, 2);\n\treturn normalizeVNode(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"].apply(void 0, args));\n}\n\n\nfunction normalizeVNode(vnode) {\n\tvnode.preactCompatNormalized = true;\n\n\tapplyClassName(vnode);\n\n\tif (isStatelessComponent(vnode.nodeName)) {\n\t\tvnode.nodeName = statelessComponentHook(vnode.nodeName);\n\t}\n\n\tvar ref = vnode.attributes.ref,\n\t\ttype = ref && typeof ref;\n\tif (currentComponent && (type==='string' || type==='number')) {\n\t\tvnode.attributes.ref = createStringRefProxy(ref, currentComponent);\n\t}\n\n\tapplyEventNormalization(vnode);\n\n\treturn vnode;\n}\n\n\nfunction cloneElement$1(element, props) {\n\tvar children = [], len = arguments.length - 2;\n\twhile ( len-- > 0 ) children[ len ] = arguments[ len + 2 ];\n\n\tif (!isValidElement(element)) { return element; }\n\tvar elementProps = element.attributes || element.props;\n\tvar node = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](\n\t\telement.nodeName || element.type,\n\t\telementProps,\n\t\telement.children || elementProps && elementProps.children\n\t);\n\t// Only provide the 3rd argument if needed.\n\t// Arguments 3+ overwrite element.children in preactCloneElement\n\tvar cloneArgs = [node, props];\n\tif (children && children.length) {\n\t\tcloneArgs.push(children);\n\t}\n\telse if (props && props.children) {\n\t\tcloneArgs.push(props.children);\n\t}\n\treturn normalizeVNode(__WEBPACK_IMPORTED_MODULE_1_preact__[\"cloneElement\"].apply(void 0, cloneArgs));\n}\n\n\nfunction isValidElement(element) {\n\treturn element && ((element instanceof VNode) || element.$$typeof===REACT_ELEMENT_TYPE);\n}\n\n\nfunction createStringRefProxy(name, component) {\n\treturn component._refProxies[name] || (component._refProxies[name] = function (resolved) {\n\t\tif (component && component.refs) {\n\t\t\tcomponent.refs[name] = resolved;\n\t\t\tif (resolved===null) {\n\t\t\t\tdelete component._refProxies[name];\n\t\t\t\tcomponent = null;\n\t\t\t}\n\t\t}\n\t});\n}\n\n\nfunction applyEventNormalization(ref) {\n\tvar nodeName = ref.nodeName;\n\tvar attributes = ref.attributes;\n\n\tif (!attributes || typeof nodeName!=='string') { return; }\n\tvar props = {};\n\tfor (var i in attributes) {\n\t\tprops[i.toLowerCase()] = i;\n\t}\n\tif (props.ondoubleclick) {\n\t\tattributes.ondblclick = attributes[props.ondoubleclick];\n\t\tdelete attributes[props.ondoubleclick];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (props.onchange && (nodeName==='textarea' || (nodeName.toLowerCase()==='input' && !/^fil|che|rad/i.test(attributes.type)))) {\n\t\tvar normalized = props.oninput || 'oninput';\n\t\tif (!attributes[normalized]) {\n\t\t\tattributes[normalized] = multihook([attributes[normalized], attributes[props.onchange]]);\n\t\t\tdelete attributes[props.onchange];\n\t\t}\n\t}\n}\n\n\nfunction applyClassName(ref) {\n\tvar attributes = ref.attributes;\n\n\tif (!attributes) { return; }\n\tvar cl = attributes.className || attributes.class;\n\tif (cl) { attributes.className = cl; }\n}\n\n\nfunction extend(base, props) {\n\tfor (var key in props) {\n\t\tif (props.hasOwnProperty(key)) {\n\t\t\tbase[key] = props[key];\n\t\t}\n\t}\n\treturn base;\n}\n\n\nfunction shallowDiffers(a, b) {\n\tfor (var i in a) { if (!(i in b)) { return true; } }\n\tfor (var i$1 in b) { if (a[i$1]!==b[i$1]) { return true; } }\n\treturn false;\n}\n\n\nfunction findDOMNode(component) {\n\treturn component && component.base || component;\n}\n\n\nfunction F(){}\n\nfunction createClass(obj) {\n\tfunction cl(props, context) {\n\t\tbindAll(this);\n\t\tComponent$1.call(this, props, context, BYPASS_HOOK);\n\t\tnewComponentHook.call(this, props, context);\n\t}\n\n\tobj = extend({ constructor: cl }, obj);\n\n\t// We need to apply mixins here so that getDefaultProps is correctly mixed\n\tif (obj.mixins) {\n\t\tapplyMixins(obj, collateMixins(obj.mixins));\n\t}\n\tif (obj.statics) {\n\t\textend(cl, obj.statics);\n\t}\n\tif (obj.propTypes) {\n\t\tcl.propTypes = obj.propTypes;\n\t}\n\tif (obj.defaultProps) {\n\t\tcl.defaultProps = obj.defaultProps;\n\t}\n\tif (obj.getDefaultProps) {\n\t\tcl.defaultProps = obj.getDefaultProps();\n\t}\n\n\tF.prototype = Component$1.prototype;\n\tcl.prototype = extend(new F(), obj);\n\n\tcl.displayName = obj.displayName || 'Component';\n\n\treturn cl;\n}\n\n\n// Flatten an Array of mixins to a map of method name to mixin implementations\nfunction collateMixins(mixins) {\n\tvar keyed = {};\n\tfor (var i=0; i<mixins.length; i++) {\n\t\tvar mixin = mixins[i];\n\t\tfor (var key in mixin) {\n\t\t\tif (mixin.hasOwnProperty(key) && typeof mixin[key]==='function') {\n\t\t\t\t(keyed[key] || (keyed[key]=[])).push(mixin[key]);\n\t\t\t}\n\t\t}\n\t}\n\treturn keyed;\n}\n\n\n// apply a mapping of Arrays of mixin methods to a component prototype\nfunction applyMixins(proto, mixins) {\n\tfor (var key in mixins) { if (mixins.hasOwnProperty(key)) {\n\t\tproto[key] = multihook(\n\t\t\tmixins[key].concat(proto[key] || ARR),\n\t\t\tkey==='getDefaultProps' || key==='getInitialState' || key==='getChildContext'\n\t\t);\n\t} }\n}\n\n\nfunction bindAll(ctx) {\n\tfor (var i in ctx) {\n\t\tvar v = ctx[i];\n\t\tif (typeof v==='function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(i)) {\n\t\t\t(ctx[i] = v.bind(ctx)).__bound = true;\n\t\t}\n\t}\n}\n\n\nfunction callMethod(ctx, m, args) {\n\tif (typeof m==='string') {\n\t\tm = ctx.constructor.prototype[m];\n\t}\n\tif (typeof m==='function') {\n\t\treturn m.apply(ctx, args);\n\t}\n}\n\nfunction multihook(hooks, skipDuplicates) {\n\treturn function() {\n\t\tvar arguments$1 = arguments;\n\t\tvar this$1 = this;\n\n\t\tvar ret;\n\t\tfor (var i=0; i<hooks.length; i++) {\n\t\t\tvar r = callMethod(this$1, hooks[i], arguments$1);\n\n\t\t\tif (skipDuplicates && r!=null) {\n\t\t\t\tif (!ret) { ret = {}; }\n\t\t\t\tfor (var key in r) { if (r.hasOwnProperty(key)) {\n\t\t\t\t\tret[key] = r[key];\n\t\t\t\t} }\n\t\t\t}\n\t\t\telse if (typeof r!=='undefined') { ret = r; }\n\t\t}\n\t\treturn ret;\n\t};\n}\n\n\nfunction newComponentHook(props, context) {\n\tpropsHook.call(this, props, context);\n\tthis.componentWillReceiveProps = multihook([propsHook, this.componentWillReceiveProps || 'componentWillReceiveProps']);\n\tthis.render = multihook([propsHook, beforeRender, this.render || 'render', afterRender]);\n}\n\n\nfunction propsHook(props, context) {\n\tif (!props) { return; }\n\n\t// React annoyingly special-cases single children, and some react components are ridiculously strict about this.\n\tvar c = props.children;\n\tif (c && Array.isArray(c) && c.length===1) {\n\t\tprops.children = c[0];\n\n\t\t// but its totally still going to be an Array.\n\t\tif (props.children && typeof props.children==='object') {\n\t\t\tprops.children.length = 1;\n\t\t\tprops.children[0] = props.children;\n\t\t}\n\t}\n\n\t// add proptype checking\n\tif (DEV) {\n\t\tvar ctor = typeof this==='function' ? this : this.constructor,\n\t\t\tpropTypes = this.propTypes || ctor.propTypes;\n\t\tvar displayName = this.displayName || ctor.name;\n\n\t\tif (propTypes) {\n\t\t\t__WEBPACK_IMPORTED_MODULE_0_prop_types___default.a.checkPropTypes(propTypes, props, 'prop', displayName);\n\t\t}\n\t}\n}\n\n\nfunction beforeRender(props) {\n\tcurrentComponent = this;\n}\n\nfunction afterRender() {\n\tif (currentComponent===this) {\n\t\tcurrentComponent = null;\n\t}\n}\n\n\n\nfunction Component$1(props, context, opts) {\n\t__WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"].call(this, props, context);\n\tthis.state = this.getInitialState ? this.getInitialState() : {};\n\tthis.refs = {};\n\tthis._refProxies = {};\n\tif (opts!==BYPASS_HOOK) {\n\t\tnewComponentHook.call(this, props, context);\n\t}\n}\nextend(Component$1.prototype = new __WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"](), {\n\tconstructor: Component$1,\n\n\tisReactComponent: {},\n\n\treplaceState: function(state, callback) {\n\t\tvar this$1 = this;\n\n\t\tthis.setState(state, callback);\n\t\tfor (var i in this$1.state) {\n\t\t\tif (!(i in state)) {\n\t\t\t\tdelete this$1.state[i];\n\t\t\t}\n\t\t}\n\t},\n\n\tgetDOMNode: function() {\n\t\treturn this.base;\n\t},\n\n\tisMounted: function() {\n\t\treturn !!this.base;\n\t}\n});\n\n\n\nfunction PureComponent(props, context) {\n\tComponent$1.call(this, props, context);\n}\nF.prototype = Component$1.prototype;\nPureComponent.prototype = new F();\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function(props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n\n\n\nvar index = {\n\tversion: version,\n\tDOM: DOM,\n\tPropTypes: __WEBPACK_IMPORTED_MODULE_0_prop_types___default.a,\n\tChildren: Children,\n\trender: render$1,\n\tcreateClass: createClass,\n\tcreateFactory: createFactory,\n\tcreateElement: createElement,\n\tcloneElement: cloneElement$1,\n\tisValidElement: isValidElement,\n\tfindDOMNode: findDOMNode,\n\tunmountComponentAtNode: unmountComponentAtNode,\n\tComponent: Component$1,\n\tPureComponent: PureComponent,\n\tunstable_renderSubtreeIntoContainer: renderSubtreeIntoContainer\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (index);\n//# sourceMappingURL=preact-compat.es.js.map\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(9)))\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(10);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar IE8_DOM_DEFINE = __webpack_require__(48);\nvar toPrimitive = __webpack_require__(32);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(8) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(14)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(7);\nvar createDesc = __webpack_require__(19);\nmodule.exports = __webpack_require__(8) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(24);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = {};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(54);\nvar defined = __webpack_require__(35);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(35);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isDate = __webpack_require__(202)\n\nvar MILLISECONDS_IN_HOUR = 3600000\nvar MILLISECONDS_IN_MINUTE = 60000\nvar DEFAULT_ADDITIONAL_DIGITS = 2\n\nvar parseTokenDateTimeDelimeter = /[T ]/\nvar parseTokenPlainTime = /:/\n\n// year tokens\nvar parseTokenYY = /^(\\d{2})$/\nvar parseTokensYYY = [\n  /^([+-]\\d{2})$/, // 0 additional digits\n  /^([+-]\\d{3})$/, // 1 additional digit\n  /^([+-]\\d{4})$/ // 2 additional digits\n]\n\nvar parseTokenYYYY = /^(\\d{4})/\nvar parseTokensYYYYY = [\n  /^([+-]\\d{4})/, // 0 additional digits\n  /^([+-]\\d{5})/, // 1 additional digit\n  /^([+-]\\d{6})/ // 2 additional digits\n]\n\n// date tokens\nvar parseTokenMM = /^-(\\d{2})$/\nvar parseTokenDDD = /^-?(\\d{3})$/\nvar parseTokenMMDD = /^-?(\\d{2})-?(\\d{2})$/\nvar parseTokenWww = /^-?W(\\d{2})$/\nvar parseTokenWwwD = /^-?W(\\d{2})-?(\\d{1})$/\n\n// time tokens\nvar parseTokenHH = /^(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMM = /^(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMMSS = /^(\\d{2}):?(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\n\n// timezone tokens\nvar parseTokenTimezone = /([Z+-].*)$/\nvar parseTokenTimezoneZ = /^(Z)$/\nvar parseTokenTimezoneHH = /^([+-])(\\d{2})$/\nvar parseTokenTimezoneHHMM = /^([+-])(\\d{2}):?(\\d{2})$/\n\n/**\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If an argument is a string, the function tries to parse it.\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If all above fails, the function passes the given argument to Date constructor.\n *\n * @param {Date|String|Number} argument - the value to convert\n * @param {Object} [options] - the object with options\n * @param {0 | 1 | 2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = parse('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Parse string '+02014101',\n * // if the additional number of digits in the extended year format is 1:\n * var result = parse('+02014101', {additionalDigits: 1})\n * //=> Fri Apr 11 2014 00:00:00\n */\nfunction parse (argument, dirtyOptions) {\n  if (isDate(argument)) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime())\n  } else if (typeof argument !== 'string') {\n    return new Date(argument)\n  }\n\n  var options = dirtyOptions || {}\n  var additionalDigits = options.additionalDigits\n  if (additionalDigits == null) {\n    additionalDigits = DEFAULT_ADDITIONAL_DIGITS\n  } else {\n    additionalDigits = Number(additionalDigits)\n  }\n\n  var dateStrings = splitDateString(argument)\n\n  var parseYearResult = parseYear(dateStrings.date, additionalDigits)\n  var year = parseYearResult.year\n  var restDateString = parseYearResult.restDateString\n\n  var date = parseDate(restDateString, year)\n\n  if (date) {\n    var timestamp = date.getTime()\n    var time = 0\n    var offset\n\n    if (dateStrings.time) {\n      time = parseTime(dateStrings.time)\n    }\n\n    if (dateStrings.timezone) {\n      offset = parseTimezone(dateStrings.timezone)\n    } else {\n      // get offset accurate to hour in timezones that change offset\n      offset = new Date(timestamp + time).getTimezoneOffset()\n      offset = new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE).getTimezoneOffset()\n    }\n\n    return new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE)\n  } else {\n    return new Date(argument)\n  }\n}\n\nfunction splitDateString (dateString) {\n  var dateStrings = {}\n  var array = dateString.split(parseTokenDateTimeDelimeter)\n  var timeString\n\n  if (parseTokenPlainTime.test(array[0])) {\n    dateStrings.date = null\n    timeString = array[0]\n  } else {\n    dateStrings.date = array[0]\n    timeString = array[1]\n  }\n\n  if (timeString) {\n    var token = parseTokenTimezone.exec(timeString)\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '')\n      dateStrings.timezone = token[1]\n    } else {\n      dateStrings.time = timeString\n    }\n  }\n\n  return dateStrings\n}\n\nfunction parseYear (dateString, additionalDigits) {\n  var parseTokenYYY = parseTokensYYY[additionalDigits]\n  var parseTokenYYYYY = parseTokensYYYYY[additionalDigits]\n\n  var token\n\n  // YYYY or ±YYYYY\n  token = parseTokenYYYY.exec(dateString) || parseTokenYYYYY.exec(dateString)\n  if (token) {\n    var yearString = token[1]\n    return {\n      year: parseInt(yearString, 10),\n      restDateString: dateString.slice(yearString.length)\n    }\n  }\n\n  // YY or ±YYY\n  token = parseTokenYY.exec(dateString) || parseTokenYYY.exec(dateString)\n  if (token) {\n    var centuryString = token[1]\n    return {\n      year: parseInt(centuryString, 10) * 100,\n      restDateString: dateString.slice(centuryString.length)\n    }\n  }\n\n  // Invalid ISO-formatted year\n  return {\n    year: null\n  }\n}\n\nfunction parseDate (dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) {\n    return null\n  }\n\n  var token\n  var date\n  var month\n  var week\n\n  // YYYY\n  if (dateString.length === 0) {\n    date = new Date(0)\n    date.setUTCFullYear(year)\n    return date\n  }\n\n  // YYYY-MM\n  token = parseTokenMM.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    date.setUTCFullYear(year, month)\n    return date\n  }\n\n  // YYYY-DDD or YYYYDDD\n  token = parseTokenDDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    var dayOfYear = parseInt(token[1], 10)\n    date.setUTCFullYear(year, 0, dayOfYear)\n    return date\n  }\n\n  // YYYY-MM-DD or YYYYMMDD\n  token = parseTokenMMDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    var day = parseInt(token[2], 10)\n    date.setUTCFullYear(year, month, day)\n    return date\n  }\n\n  // YYYY-Www or YYYYWww\n  token = parseTokenWww.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    return dayOfISOYear(year, week)\n  }\n\n  // YYYY-Www-D or YYYYWwwD\n  token = parseTokenWwwD.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    var dayOfWeek = parseInt(token[2], 10) - 1\n    return dayOfISOYear(year, week, dayOfWeek)\n  }\n\n  // Invalid ISO-formatted date\n  return null\n}\n\nfunction parseTime (timeString) {\n  var token\n  var hours\n  var minutes\n\n  // hh\n  token = parseTokenHH.exec(timeString)\n  if (token) {\n    hours = parseFloat(token[1].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR\n  }\n\n  // hh:mm or hhmm\n  token = parseTokenHHMM.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseFloat(token[2].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE\n  }\n\n  // hh:mm:ss or hhmmss\n  token = parseTokenHHMMSS.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseInt(token[2], 10)\n    var seconds = parseFloat(token[3].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE +\n      seconds * 1000\n  }\n\n  // Invalid ISO-formatted time\n  return null\n}\n\nfunction parseTimezone (timezoneString) {\n  var token\n  var absoluteOffset\n\n  // Z\n  token = parseTokenTimezoneZ.exec(timezoneString)\n  if (token) {\n    return 0\n  }\n\n  // ±hh\n  token = parseTokenTimezoneHH.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  // ±hh:mm or ±hhmm\n  token = parseTokenTimezoneHHMM.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60 + parseInt(token[3], 10)\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  return 0\n}\n\nfunction dayOfISOYear (isoYear, week, day) {\n  week = week || 0\n  day = day || 0\n  var date = new Date(0)\n  date.setUTCFullYear(isoYear, 0, 4)\n  var fourthOfJanuaryDay = date.getUTCDay() || 7\n  var diff = week * 7 + day + 1 - fourthOfJanuaryDay\n  date.setUTCDate(date.getUTCDate() + diff)\n  return date\n}\n\nmodule.exports = parse\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $at = __webpack_require__(101)(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n__webpack_require__(51)(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports = true;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(53);\nvar enumBugKeys = __webpack_require__(40);\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nvar id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar def = __webpack_require__(7).f;\nvar has = __webpack_require__(12);\nvar TAG = __webpack_require__(2)('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(106);\nvar global = __webpack_require__(1);\nvar hide = __webpack_require__(11);\nvar Iterators = __webpack_require__(15);\nvar TO_STRING_TAG = __webpack_require__(2)('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(83);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(10);\nvar document = __webpack_require__(1).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(10);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(6);\nvar dPs = __webpack_require__(103);\nvar enumBugKeys = __webpack_require__(40);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(31)('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(55).appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(34);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(39)('keys');\nvar uid = __webpack_require__(25);\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(0);\nvar global = __webpack_require__(1);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: __webpack_require__(21) ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(23);\nvar TAG = __webpack_require__(2)('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(41);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar Iterators = __webpack_require__(15);\nmodule.exports = __webpack_require__(0).getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = __webpack_require__(24);\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.f = __webpack_require__(2);\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar LIBRARY = __webpack_require__(21);\nvar wksExt = __webpack_require__(45);\nvar defineProperty = __webpack_require__(7).f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.omit = omit;\nexports.arraysEqual = arraysEqual;\nvar isElementAnSFC = exports.isElementAnSFC = function isElementAnSFC(element) {\n  var isNativeDOMElement = typeof element.type === 'string';\n\n  if (isNativeDOMElement) {\n    return false;\n  }\n\n  return !element.type.prototype.isReactComponent;\n};\nfunction omit(obj) {\n  var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (attrs.indexOf(key) === -1) {\n      result[key] = obj[key];\n    }\n  });\n  return result;\n}\n\nfunction arraysEqual(a, b) {\n  var sameObject = a === b;\n  if (sameObject) {\n    return true;\n  }\n\n  var notBothArrays = !Array.isArray(a) || !Array.isArray(b);\n  var differentLengths = a.length !== b.length;\n\n  if (notBothArrays || differentLengths) {\n    return false;\n  }\n\n  return a.every(function (element, index) {\n    return element === b[index];\n  });\n}\n\nfunction memoizeString(fn) {\n  var cache = {};\n\n  return function (str) {\n    if (!cache[str]) {\n      cache[str] = fn(str);\n    }\n    return cache[str];\n  };\n}\n\nvar hyphenate = exports.hyphenate = memoizeString(function (str) {\n  return str.replace(/([A-Z])/g, '-$1').toLowerCase();\n});\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(8) && !__webpack_require__(14)(function () {\n  return Object.defineProperty(__webpack_require__(31)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = __webpack_require__(87);\n} else {\n  module.exports = __webpack_require__(88);\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(21);\nvar $export = __webpack_require__(4);\nvar redefine = __webpack_require__(52);\nvar hide = __webpack_require__(11);\nvar Iterators = __webpack_require__(15);\nvar $iterCreate = __webpack_require__(102);\nvar setToStringTag = __webpack_require__(26);\nvar getPrototypeOf = __webpack_require__(56);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(11);\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(12);\nvar toIObject = __webpack_require__(16);\nvar arrayIndexOf = __webpack_require__(104)(false);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(23);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar document = __webpack_require__(1).document;\nmodule.exports = document && document.documentElement;\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(12);\nvar toObject = __webpack_require__(17);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(6);\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// check on default Array iterator\nvar Iterators = __webpack_require__(15);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = __webpack_require__(6);\nvar aFunction = __webpack_require__(24);\nvar SPECIES = __webpack_require__(2)('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(13);\nvar invoke = __webpack_require__(112);\nvar html = __webpack_require__(55);\nvar cel = __webpack_require__(31);\nvar global = __webpack_require__(1);\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (__webpack_require__(23)(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar isObject = __webpack_require__(10);\nvar newPromiseCapability = __webpack_require__(43);\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(123), __esModule: true };\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(4);\nvar core = __webpack_require__(0);\nvar fails = __webpack_require__(14);\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _typeof2 = __webpack_require__(67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _iterator = __webpack_require__(125);\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = __webpack_require__(127);\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(53);\nvar hiddenKeys = __webpack_require__(40).concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pIE = __webpack_require__(28);\nvar createDesc = __webpack_require__(19);\nvar toIObject = __webpack_require__(16);\nvar toPrimitive = __webpack_require__(32);\nvar has = __webpack_require__(12);\nvar IE8_DOM_DEFINE = __webpack_require__(48);\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(8) ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = __webpack_require__(136);\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = __webpack_require__(140);\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = __webpack_require__(67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasClassInParent = exports.formatErrorMsg = exports.getMetaContent = exports.axiosGithub = exports.axiosJSON = exports.queryStringify = exports.queryParse = undefined;\n\nvar _keys = __webpack_require__(161);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _slicedToArray2 = __webpack_require__(164);\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _axios = __webpack_require__(171);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar queryParse = exports.queryParse = function queryParse() {\n  var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n  if (!search) return {};\n  var queryString = search[0] === '?' ? search.substring(1) : search;\n  var query = {};\n  queryString.split('&').forEach(function (queryStr) {\n    var _queryStr$split = queryStr.split('='),\n        _queryStr$split2 = (0, _slicedToArray3.default)(_queryStr$split, 2),\n        key = _queryStr$split2[0],\n        value = _queryStr$split2[1];\n    /* istanbul ignore else */\n\n\n    if (key) query[decodeURIComponent(key)] = decodeURIComponent(value);\n  });\n\n  return query;\n};\n\nvar queryStringify = exports.queryStringify = function queryStringify(query) {\n  var queryString = (0, _keys2.default)(query).map(function (key) {\n    return key + '=' + encodeURIComponent(query[key] || '');\n  }).join('&');\n  return queryString;\n};\n\nvar axiosJSON = exports.axiosJSON = _axios2.default.create({\n  headers: {\n    'Accept': 'application/json'\n  }\n});\n\nvar axiosGithub = exports.axiosGithub = _axios2.default.create({\n  baseURL: 'https://api.github.com',\n  headers: {\n    'Accept': 'application/json'\n  }\n});\n\nvar getMetaContent = exports.getMetaContent = function getMetaContent(name, content) {\n  /* istanbul ignore next */\n  content || (content = 'content');\n  /* istanbul ignore next */\n  var el = window.document.querySelector('meta[name=\\'' + name + '\\']');\n  /* istanbul ignore next */\n  return el && el.getAttribute(content);\n};\n\nvar formatErrorMsg = exports.formatErrorMsg = function formatErrorMsg(err) {\n  var msg = 'Error: ';\n  if (err.response && err.response.data && err.response.data.message) {\n    msg += err.response.data.message + '. ';\n    err.response.data.errors && (msg += err.response.data.errors.map(function (e) {\n      return e.message;\n    }).join(', '));\n  } else {\n    msg += err.message;\n  }\n  return msg;\n};\n\nvar hasClassInParent = exports.hasClassInParent = function hasClassInParent(element) {\n  for (var _len = arguments.length, className = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    className[_key - 1] = arguments[_key];\n  }\n\n  /* istanbul ignore next */\n  var yes = false;\n  /* istanbul ignore next */\n  if (typeof element.className === 'undefined') return false;\n  /* istanbul ignore next */\n  var classes = element.className.split(' ');\n  /* istanbul ignore next */\n  className.forEach(function (c, i) {\n    /* istanbul ignore next */\n    yes = yes || classes.indexOf(c) >= 0;\n  });\n  /* istanbul ignore next */\n  if (yes) return yes;\n  /* istanbul ignore next */\n  return element.parentNode && hasClassInParent(element.parentNode, className);\n};\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nvar utils = __webpack_require__(3);\nvar normalizeHeaderName = __webpack_require__(177);\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = __webpack_require__(76);\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = __webpack_require__(76);\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar settle = __webpack_require__(178);\nvar buildURL = __webpack_require__(73);\nvar buildFullPath = __webpack_require__(180);\nvar parseHeaders = __webpack_require__(183);\nvar isURLSameOrigin = __webpack_require__(184);\nvar createError = __webpack_require__(77);\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = __webpack_require__(185);\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar enhanceError = __webpack_require__(179);\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var src = _ref.src,\n      className = _ref.className,\n      alt = _ref.alt,\n      onError = _ref.onError;\n  return _react2.default.createElement(\n    'div',\n    { className: 'gt-avatar ' + className },\n    _react2.default.createElement('img', { src: src, alt: '@' + alt, onError: onError })\n  );\n};\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      name = _ref.name;\n  return _react2.default.createElement(\n    \"span\",\n    { className: \"gt-ico \" + className },\n    _react2.default.createElement(\"span\", { className: \"gt-svg\", dangerouslySetInnerHTML: {\n        __html: __webpack_require__(191)(\"./\" + name + \".svg\")\n      } }),\n    text && _react2.default.createElement(\n      \"span\",\n      { className: \"gt-ico-text\" },\n      text\n    )\n  );\n};\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(5);\n\n__webpack_require__(94);\n\nvar _gitalk = __webpack_require__(98);\n\nvar _gitalk2 = _interopRequireDefault(_gitalk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Gitalk = function () {\n  function Gitalk() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck3.default)(this, Gitalk);\n\n    this.options = options;\n  }\n\n  (0, _createClass3.default)(Gitalk, [{\n    key: 'render',\n    value: function render(container, callback) {\n      var node = null;\n      container = container || this.options.container;\n\n      if (!container) throw new Error('Container is required: ' + container);\n\n      if (!(container instanceof HTMLElement)) {\n        node = window.document.getElementById(container);\n        if (!node) throw new Error('Container not found, window.document.getElementById: ' + container);\n      } else {\n        node = container;\n      }\n\n      if (!callback) {\n        callback = function callback() {};\n      }\n\n      return (0, _reactDom.render)(_react2.default.createElement(_gitalk2.default, { options: this.options }), node, callback);\n    }\n  }]);\n  return Gitalk;\n}();\n\nmodule.exports = Gitalk;\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(84), __esModule: true };\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(85);\nvar $Object = __webpack_require__(0).Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(4);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(8), 'Object', { defineProperty: __webpack_require__(7).f });\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = __webpack_require__(49);\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = __webpack_require__(89)(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(92)();\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/** @license React v16.12.0\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nObject.defineProperty(exports,\"__esModule\",{value:!0});\nvar b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?Symbol.for(\"react.suspense_list\"):\n60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.fundamental\"):60117,w=b?Symbol.for(\"react.responder\"):60118,x=b?Symbol.for(\"react.scope\"):60119;function y(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function z(a){return y(a)===m}\nexports.typeOf=y;exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===v||a.$$typeof===w||a.$$typeof===x)};exports.isAsyncMode=function(a){return z(a)||y(a)===l};exports.isConcurrentMode=z;exports.isContextConsumer=function(a){return y(a)===k};exports.isContextProvider=function(a){return y(a)===h};\nexports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return y(a)===n};exports.isFragment=function(a){return y(a)===e};exports.isLazy=function(a){return y(a)===t};exports.isMemo=function(a){return y(a)===r};exports.isPortal=function(a){return y(a)===d};exports.isProfiler=function(a){return y(a)===g};exports.isStrictMode=function(a){return y(a)===f};exports.isSuspense=function(a){return y(a)===p};\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/** @license React v16.12.0\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE);\n}\n\n/**\n * Forked from fbjs/warning:\n * https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/__forks__/warning.js\n *\n * Only change is we use console.warn instead of console.error,\n * and do nothing when 'console' is not supported.\n * This really simplifies the code.\n * ---\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\nvar lowPriorityWarningWithoutStack = function () {};\n\n{\n  var printWarning = function (format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n\n    if (typeof console !== 'undefined') {\n      console.warn(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  lowPriorityWarningWithoutStack = function (condition, format) {\n    if (format === undefined) {\n      throw new Error('`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(void 0, [format].concat(args));\n    }\n  };\n}\n\nvar lowPriorityWarningWithoutStack$1 = lowPriorityWarningWithoutStack;\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true;\n      lowPriorityWarningWithoutStack$1(false, 'The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.typeOf = typeOf;\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isValidElementType = isValidElementType;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\n  })();\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactIs = __webpack_require__(49);\nvar assign = __webpack_require__(90);\n\nvar ReactPropTypesSecret = __webpack_require__(33);\nvar checkPropTypes = __webpack_require__(91);\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = __webpack_require__(33);\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(33);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function() {\n    'use strict';\n    function VNode() {}\n    function h(nodeName, attributes) {\n        var lastSimple, child, simple, i, children = EMPTY_CHILDREN;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && null != attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) && void 0 !== child.pop) for (i = child.length; i--; ) stack.push(child[i]); else {\n            if (child === !0 || child === !1) child = null;\n            if (simple = 'function' != typeof nodeName) if (null == child) child = ''; else if ('number' == typeof child) child = String(child); else if ('string' != typeof child) simple = !1;\n            if (simple && lastSimple) children[children.length - 1] += child; else if (children === EMPTY_CHILDREN) children = [ child ]; else children.push(child);\n            lastSimple = simple;\n        }\n        var p = new VNode();\n        p.nodeName = nodeName;\n        p.children = children;\n        p.attributes = null == attributes ? void 0 : attributes;\n        p.key = null == attributes ? void 0 : attributes.key;\n        if (void 0 !== options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function enqueueRender(component) {\n        if (!component.__d && (component.__d = !0) && 1 == items.push(component)) (options.debounceRendering || setTimeout)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p.__d) renderComponent(p);\n    }\n    function isSameNodeType(node, vnode, hydrating) {\n        if ('string' == typeof vnode || 'number' == typeof vnode) return void 0 !== node.splitText;\n        if ('string' == typeof vnode.nodeName) return !node._componentConstructor && isNamedNode(node, vnode.nodeName); else return hydrating || node._componentConstructor === vnode.nodeName;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.__n === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n    }\n    function getNodeProps(vnode) {\n        var props = extend({}, vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (void 0 !== defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function createNode(nodeName, isSvg) {\n        var node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n        node.__n = nodeName;\n        return node;\n    }\n    function removeNode(node) {\n        if (node.parentNode) node.parentNode.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('key' === name) ; else if ('ref' === name) {\n            if (old) old(null);\n            if (value) value(node);\n        } else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || 'string' == typeof value || 'string' == typeof old) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if ('string' != typeof old) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && IS_NON_DIMENSIONAL.test(i) === !1 ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var useCapture = name !== (name = name.replace(/Capture$/, ''));\n            name = name.toLowerCase().substring(2);\n            if (value) {\n                if (!old) node.addEventListener(name, eventProxy, useCapture);\n            } else node.removeEventListener(name, eventProxy, useCapture);\n            (node.__l || (node.__l = {}))[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name !== (name = name.replace(/^xlink\\:?/, ''));\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase()); else node.removeAttribute(name); else if ('function' != typeof value) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this.__l[e.type](options.event && options.event(e) || e);\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = null != parent && void 0 !== parent.ownerSVGElement;\n            hydrating = null != dom && !('__preactattr_' in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll, componentRoot);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll, componentRoot) {\n        var out = dom, prevSvgMode = isSvgMode;\n        if (null == vnode) vnode = '';\n        if ('string' == typeof vnode) {\n            if (dom && void 0 !== dom.splitText && dom.parentNode && (!dom._component || componentRoot)) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                out = document.createTextNode(vnode);\n                if (dom) {\n                    if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n                    recollectNodeTree(dom, !0);\n                }\n            }\n            out.__preactattr_ = !0;\n            return out;\n        }\n        if ('function' == typeof vnode.nodeName) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        isSvgMode = 'svg' === vnode.nodeName ? !0 : 'foreignObject' === vnode.nodeName ? !1 : isSvgMode;\n        if (!dom || !isNamedNode(dom, String(vnode.nodeName))) {\n            out = createNode(String(vnode.nodeName), isSvgMode);\n            if (dom) {\n                while (dom.firstChild) out.appendChild(dom.firstChild);\n                if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n                recollectNodeTree(dom, !0);\n            }\n        }\n        var fc = out.firstChild, props = out.__preactattr_ || (out.__preactattr_ = {}), vchildren = vnode.children;\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && null != fc && void 0 !== fc.splitText && null == fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || null != fc) innerDiffNode(out, vchildren, context, mountAll, hydrating || null != props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren ? vchildren.length : 0;\n        if (0 !== len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child.__preactattr_, key = vlen && props ? _child._component ? _child._component.__k : props.key : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (props || (void 0 !== _child.splitText ? isHydrating ? _child.nodeValue.trim() : !0 : isHydrating)) children[childrenLen++] = _child;\n        }\n        if (0 !== vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && void 0 !== keyed[key]) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) if (void 0 !== children[j] && isSameNodeType(c = children[j], vchild, isHydrating)) {\n                child = c;\n                children[j] = void 0;\n                if (j === childrenLen - 1) childrenLen--;\n                if (j === min) min++;\n                break;\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) if (child === originalChildren[i + 1]) removeNode(originalChildren[i]); else dom.insertBefore(child, originalChildren[i] || null);\n        }\n        if (keyedLen) for (var i in keyed) if (void 0 !== keyed[i]) recollectNodeTree(keyed[i], !1);\n        while (min <= childrenLen) if (void 0 !== (child = children[childrenLen--])) recollectNodeTree(child, !1);\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component); else {\n            if (null != node.__preactattr_ && node.__preactattr_.ref) node.__preactattr_.ref(null);\n            if (unmountOnly === !1 || null == node.__preactattr_) removeNode(node);\n            removeChildren(node);\n        }\n    }\n    function removeChildren(node) {\n        node = node.lastChild;\n        while (node) {\n            var next = node.previousSibling;\n            recollectNodeTree(node, !0);\n            node = next;\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if ((!attrs || null == attrs[name]) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name;\n        (components[name] || (components[name] = [])).push(component);\n    }\n    function createComponent(Ctor, props, context) {\n        var inst, list = components[Ctor.name];\n        if (Ctor.prototype && Ctor.prototype.render) {\n            inst = new Ctor(props, context);\n            Component.call(inst, props, context);\n        } else {\n            inst = new Component(props, context);\n            inst.constructor = Ctor;\n            inst.render = doRender;\n        }\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.__b = list[i].__b;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function doRender(props, state, context) {\n        return this.constructor(props, context);\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component.__x) {\n            component.__x = !0;\n            if (component.__r = props.ref) delete props.ref;\n            if (component.__k = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.__c) component.__c = component.context;\n                component.context = context;\n            }\n            if (!component.__p) component.__p = component.props;\n            component.props = props;\n            component.__x = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__r) component.__r(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component.__x) {\n            var rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.__p || props, previousState = component.__s || state, previousContext = component.__c || context, isUpdate = component.base, nextBase = component.__b, initialBase = isUpdate || nextBase, initialChildComponent = component._component, skip = !1;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.__p = component.__s = component.__c = component.__b = null;\n            component.__d = !1;\n            if (!skip) {\n                rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(extend({}, context), component.getChildContext());\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if ('function' == typeof childComponent) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__k) setComponentProps(inst, childProps, 1, context, !1); else {\n                        toUnmount = inst;\n                        component._component = inst = createComponent(childComponent, childProps, context);\n                        inst.__b = inst.__b || nextBase;\n                        inst.__u = component;\n                        setComponentProps(inst, childProps, 0, context, !1);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase, !1);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t.__u) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                flushMounts();\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            if (null != component.__h) while (component.__h.length) component.__h.pop().call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c.__u)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.__b) {\n                c.__b = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom, !1);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component.__x = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner); else if (base) {\n            if (base.__preactattr_ && base.__preactattr_.ref) base.__preactattr_.ref(null);\n            component.__b = base;\n            removeNode(base);\n            collectComponent(component);\n            removeChildren(base);\n        }\n        if (component.__r) component.__r(null);\n    }\n    function Component(props, context) {\n        this.__d = !0;\n        this.context = context;\n        this.props = props;\n        this.state = this.state || {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent, !1);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n    var items = [];\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.__s) this.__s = extend({}, s);\n            extend(s, 'function' == typeof state ? state(s, this.props) : state);\n            if (callback) (this.__h = this.__h || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function(callback) {\n            if (callback) (this.__h = this.__h || []).push(callback);\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    var preact = {\n        h: h,\n        createElement: h,\n        cloneElement: cloneElement,\n        Component: Component,\n        render: render,\n        rerender: rerender,\n        options: options\n    };\n    if (true) module.exports = preact; else self.preact = preact;\n}();\n//# sourceMappingURL=preact.js.map\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n\nmodule.exports = __webpack_require__(95).polyfill();\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process, global) {var require;/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.1\n */\n\n(function (global, factory) {\n\t true ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = __webpack_require__(97);\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && \"function\" === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator$1(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate(input);\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nEnumerator$1.prototype._enumerate = function (input) {\n  for (var i = 0; this._state === PENDING && i < input.length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator$1.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$1 = c.resolve;\n\n  if (resolve$$1 === resolve$1) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise$2) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$1) {\n        return resolve$$1(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$1(entry), i);\n  }\n};\n\nEnumerator$1.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator$1.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all$1(entries) {\n  return new Enumerator$1(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race$1(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise$2(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise$2.all = all$1;\nPromise$2.race = race$1;\nPromise$2.resolve = resolve$1;\nPromise$2.reject = reject$1;\nPromise$2._setScheduler = setScheduler;\nPromise$2._setAsap = setAsap;\nPromise$2._asap = asap;\n\nPromise$2.prototype = {\n  constructor: Promise$2,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\n/*global self*/\nfunction polyfill$1() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise$2;\n}\n\n// Strange compat..\nPromise$2.polyfill = polyfill$1;\nPromise$2.Promise = Promise$2;\n\nreturn Promise$2;\n\n})));\n\n//# sourceMappingURL=es6-promise.map\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(96)))\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(99);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(119);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(64);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(66);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(70);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactFlipMove = __webpack_require__(143);\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _autosize = __webpack_require__(150);\n\nvar _autosize2 = _interopRequireDefault(_autosize);\n\nvar _i18n = __webpack_require__(151);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\n__webpack_require__(160);\n\nvar _util = __webpack_require__(71);\n\nvar _avatar = __webpack_require__(80);\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nvar _button = __webpack_require__(188);\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _action = __webpack_require__(189);\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _comment = __webpack_require__(190);\n\nvar _comment2 = _interopRequireDefault(_comment);\n\nvar _svg = __webpack_require__(81);\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _const = __webpack_require__(218);\n\nvar _getComments = __webpack_require__(219);\n\nvar _getComments2 = _interopRequireDefault(_getComments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GitalkComponent = function (_Component) {\n  (0, _inherits3.default)(GitalkComponent, _Component);\n\n  function GitalkComponent(props) {\n    (0, _classCallCheck3.default)(this, GitalkComponent);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (GitalkComponent.__proto__ || (0, _getPrototypeOf2.default)(GitalkComponent)).call(this, props));\n\n    _this.state = {\n      user: null,\n      issue: null,\n      comments: [],\n      localComments: [],\n      comment: '',\n      page: 1,\n      pagerDirection: 'last',\n      cursor: null,\n      previewHtml: '',\n\n      isNoInit: false,\n      isIniting: true,\n      isCreating: false,\n      isLoading: false,\n      isLoadMore: false,\n      isLoadOver: false,\n      isIssueCreating: false,\n      isPopupVisible: false,\n      isInputFocused: false,\n      isPreview: false,\n\n      isOccurError: false,\n      errorMsg: ''\n    };\n\n    _this.getCommentsV3 = function (issue) {\n      var _this$options = _this.options,\n          clientID = _this$options.clientID,\n          clientSecret = _this$options.clientSecret,\n          perPage = _this$options.perPage;\n      var page = _this.state.page;\n\n\n      return _this.getIssue().then(function (issue) {\n        if (!issue) return;\n\n        return _util.axiosGithub.get(issue.comments_url, {\n          headers: {\n            Accept: 'application/vnd.github.v3.full+json'\n          },\n          auth: {\n            username: clientID,\n            password: clientSecret\n          },\n          params: {\n            per_page: perPage,\n            page: page\n          }\n        }).then(function (res) {\n          var _this$state = _this.state,\n              comments = _this$state.comments,\n              issue = _this$state.issue;\n\n          var isLoadOver = false;\n          var cs = comments.concat(res.data);\n          if (cs.length >= issue.comments || res.data.length < perPage) {\n            isLoadOver = true;\n          }\n          _this.setState({\n            comments: cs,\n            isLoadOver: isLoadOver,\n            page: page + 1\n          });\n          return cs;\n        });\n      });\n    };\n\n    _this.getRef = function (e) {\n      _this.publicBtnEL = e;\n    };\n\n    _this.reply = function (replyComment) {\n      return function () {\n        var comment = _this.state.comment;\n\n        var replyCommentBody = replyComment.body;\n        var replyCommentArray = replyCommentBody.split('\\n');\n        replyCommentArray.unshift('@' + replyComment.user.login);\n        replyCommentArray = replyCommentArray.map(function (t) {\n          return '> ' + t;\n        });\n        replyCommentArray.push('');\n        replyCommentArray.push('');\n        if (comment) replyCommentArray.unshift('');\n        _this.setState({ comment: comment + replyCommentArray.join('\\n') }, function () {\n          _autosize2.default.update(_this.commentEL);\n          _this.commentEL.focus();\n        });\n      };\n    };\n\n    _this.handlePopup = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var isVisible = !_this.state.isPopupVisible;\n      var hideHandle = function hideHandle(e1) {\n        if ((0, _util.hasClassInParent)(e1.target, 'gt-user', 'gt-popup')) {\n          return;\n        }\n        window.document.removeEventListener('click', hideHandle);\n        _this.setState({ isPopupVisible: false });\n      };\n      _this.setState({ isPopupVisible: isVisible });\n      if (isVisible) {\n        window.document.addEventListener('click', hideHandle);\n      } else {\n        window.document.removeEventListener('click', hideHandle);\n      }\n    };\n\n    _this.handleLogin = function () {\n      var comment = _this.state.comment;\n\n      window.localStorage.setItem(_const.GT_COMMENT, encodeURIComponent(comment));\n      window.location.href = _this.loginLink;\n    };\n\n    _this.handleIssueCreate = function () {\n      _this.setState({ isIssueCreating: true });\n      _this.createIssue().then(function (issue) {\n        _this.setState({\n          isIssueCreating: false,\n          isOccurError: false\n        });\n        return _this.getComments(issue);\n      }).catch(function (err) {\n        _this.setState({\n          isIssueCreating: false,\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      }).then(function (res) {\n        if (res) {\n          _this.setState({\n            isNoInit: false\n          });\n        }\n      });\n    };\n\n    _this.handleCommentCreate = function (e) {\n      if (!_this.state.comment.length) {\n        e && e.preventDefault();\n        _this.commentEL.focus();\n        return;\n      }\n      _this.setState(function (state) {\n        if (state.isCreating) return;\n\n        _this.createComment().then(function () {\n          return _this.setState({\n            isCreating: false,\n            isOccurError: false\n          });\n        }).catch(function (err) {\n          _this.setState({\n            isCreating: false,\n            isOccurError: true,\n            errorMsg: (0, _util.formatErrorMsg)(err)\n          });\n        });\n        return { isCreating: true };\n      });\n    };\n\n    _this.handleCommentPreview = function (e) {\n      _this.setState({\n        isPreview: !_this.state.isPreview\n      });\n\n      _util.axiosGithub.post('/markdown', {\n        text: _this.state.comment\n      }, {\n        headers: _this.accessToken && { Authorization: 'token ' + _this.accessToken }\n      }).then(function (res) {\n        _this.setState({\n          previewHtml: res.data\n        });\n      }).catch(function (err) {\n        _this.setState({\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    };\n\n    _this.handleCommentLoad = function () {\n      var _this$state2 = _this.state,\n          issue = _this$state2.issue,\n          isLoadMore = _this$state2.isLoadMore;\n\n      if (isLoadMore) return;\n      _this.setState({ isLoadMore: true });\n      _this.getComments(issue).then(function () {\n        return _this.setState({ isLoadMore: false });\n      });\n    };\n\n    _this.handleCommentChange = function (e) {\n      return _this.setState({ comment: e.target.value });\n    };\n\n    _this.handleLogout = function () {\n      _this.logout();\n      window.location.reload();\n    };\n\n    _this.handleCommentFocus = function (e) {\n      var distractionFreeMode = _this.options.distractionFreeMode;\n\n      if (!distractionFreeMode) return e.preventDefault();\n      _this.setState({ isInputFocused: true });\n    };\n\n    _this.handleCommentBlur = function (e) {\n      var distractionFreeMode = _this.options.distractionFreeMode;\n\n      if (!distractionFreeMode) return e.preventDefault();\n      _this.setState({ isInputFocused: false });\n    };\n\n    _this.handleSort = function (direction) {\n      return function (e) {\n        _this.setState({ pagerDirection: direction });\n      };\n    };\n\n    _this.handleCommentKeyDown = function (e) {\n      var enableHotKey = _this.options.enableHotKey;\n\n      if (enableHotKey && (e.metaKey || e.ctrlKey) && e.keyCode === 13) {\n        _this.publicBtnEL && _this.publicBtnEL.focus();\n        _this.handleCommentCreate();\n      }\n    };\n\n    _this.options = (0, _assign2.default)({}, {\n      id: window.location.href,\n      number: -1,\n      labels: ['Gitalk'],\n      title: window.document.title,\n      body: '', // window.location.href + header.meta[description]\n      language: window.navigator.language || window.navigator.userLanguage,\n      perPage: 10,\n      pagerDirection: 'last', // last or first\n      createIssueManually: false,\n      distractionFreeMode: false,\n      proxy: 'https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token',\n      flipMoveOptions: {\n        staggerDelayBy: 150,\n        appearAnimation: 'accordionVertical',\n        enterAnimation: 'accordionVertical',\n        leaveAnimation: 'accordionVertical'\n      },\n      enableHotKey: true,\n\n      url: window.location.href,\n\n      defaultAuthor: {\n        avatarUrl: '//avatars1.githubusercontent.com/u/29697133?s=50',\n        login: 'null',\n        url: ''\n      },\n\n      updateCountCallback: null\n    }, props.options);\n\n    _this.state.pagerDirection = _this.options.pagerDirection;\n    var storedComment = window.localStorage.getItem(_const.GT_COMMENT);\n    if (storedComment) {\n      _this.state.comment = decodeURIComponent(storedComment);\n      window.localStorage.removeItem(_const.GT_COMMENT);\n    }\n\n    var query = (0, _util.queryParse)();\n    if (query.code) {\n      var code = query.code;\n      delete query.code;\n      var replacedUrl = '' + window.location.origin + window.location.pathname + (0, _util.queryStringify)(query) + window.location.hash;\n      history.replaceState(null, null, replacedUrl);\n      _this.options = (0, _assign2.default)({}, _this.options, {\n        url: replacedUrl,\n        id: replacedUrl\n      }, props.options);\n\n      _util.axiosJSON.post(_this.options.proxy, {\n        code: code,\n        client_id: _this.options.clientID,\n        client_secret: _this.options.clientSecret\n      }).then(function (res) {\n        if (res.data && res.data.access_token) {\n          _this.accessToken = res.data.access_token;\n\n          _this.getInit().then(function () {\n            return _this.setState({ isIniting: false });\n          }).catch(function (err) {\n            console.log('err:', err);\n            _this.setState({\n              isIniting: false,\n              isOccurError: true,\n              errorMsg: (0, _util.formatErrorMsg)(err)\n            });\n          });\n        } else {\n          // no access_token\n          console.log('res.data err:', res.data);\n          _this.setState({\n            isOccurError: true,\n            errorMsg: (0, _util.formatErrorMsg)(new Error('no access token'))\n          });\n        }\n      }).catch(function (err) {\n        console.log('err: ', err);\n        _this.setState({\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    } else {\n      _this.getInit().then(function () {\n        return _this.setState({ isIniting: false });\n      }).catch(function (err) {\n        console.log('err:', err);\n        _this.setState({\n          isIniting: false,\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    }\n\n    _this.i18n = (0, _i18n2.default)(_this.options.language);\n    return _this;\n  }\n\n  (0, _createClass3.default)(GitalkComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.commentEL && (0, _autosize2.default)(this.commentEL);\n    }\n  }, {\n    key: 'getInit',\n    value: function getInit() {\n      var _this2 = this;\n\n      return this.getUserInfo().then(function () {\n        return _this2.getIssue();\n      }).then(function (issue) {\n        return _this2.getComments(issue);\n      });\n    }\n  }, {\n    key: 'getUserInfo',\n    value: function getUserInfo() {\n      var _this3 = this;\n\n      return _util.axiosGithub.get('/user', {\n        headers: {\n          Authorization: 'token ' + this.accessToken\n        }\n      }).then(function (res) {\n        _this3.setState({ user: res.data });\n      }).catch(function (err) {\n        _this3.logout();\n      });\n    }\n  }, {\n    key: 'getIssueById',\n    value: function getIssueById() {\n      var _this4 = this;\n\n      var _options = this.options,\n          owner = _options.owner,\n          repo = _options.repo,\n          number = _options.number,\n          clientID = _options.clientID,\n          clientSecret = _options.clientSecret;\n\n      var getUrl = '/repos/' + owner + '/' + repo + '/issues/' + number;\n\n      return new _promise2.default(function (resolve, reject) {\n        _util.axiosGithub.get(getUrl, {\n          auth: {\n            username: clientID,\n            password: clientSecret\n          },\n          params: {\n            t: Date.now()\n          }\n        }).then(function (res) {\n          var issue = null;\n\n          if (res && res.data && res.data.number === number) {\n            issue = res.data;\n\n            _this4.setState({ issue: issue, isNoInit: false });\n          }\n          resolve(issue);\n        }).catch(function (err) {\n          // When the status code is 404, promise will be resolved with null\n          if (err.response.status === 404) resolve(null);\n          reject(err);\n        });\n      });\n    }\n  }, {\n    key: 'getIssueByLabels',\n    value: function getIssueByLabels() {\n      var _this5 = this;\n\n      var _options2 = this.options,\n          owner = _options2.owner,\n          repo = _options2.repo,\n          id = _options2.id,\n          labels = _options2.labels,\n          clientID = _options2.clientID,\n          clientSecret = _options2.clientSecret;\n\n\n      return _util.axiosGithub.get('/repos/' + owner + '/' + repo + '/issues', {\n        auth: {\n          username: clientID,\n          password: clientSecret\n        },\n        params: {\n          labels: labels.concat(id).join(','),\n          t: Date.now()\n        }\n      }).then(function (res) {\n        var createIssueManually = _this5.options.createIssueManually;\n\n        var isNoInit = false;\n        var issue = null;\n        if (!(res && res.data && res.data.length)) {\n          if (!createIssueManually && _this5.isAdmin) {\n            return _this5.createIssue();\n          }\n\n          isNoInit = true;\n        } else {\n          issue = res.data[0];\n        }\n        _this5.setState({ issue: issue, isNoInit: isNoInit });\n        return issue;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      var _this6 = this;\n\n      var number = this.options.number;\n      var issue = this.state.issue;\n\n      if (issue) {\n        this.setState({ isNoInit: false });\n        return _promise2.default.resolve(issue);\n      }\n\n      if (typeof number === 'number' && number > 0) {\n        return this.getIssueById().then(function (resIssue) {\n          if (!resIssue) return _this6.getIssueByLabels();\n          return resIssue;\n        });\n      }\n      return this.getIssueByLabels();\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this7 = this;\n\n      var _options3 = this.options,\n          owner = _options3.owner,\n          repo = _options3.repo,\n          title = _options3.title,\n          body = _options3.body,\n          id = _options3.id,\n          labels = _options3.labels,\n          url = _options3.url;\n\n      return _util.axiosGithub.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(id),\n        body: body || url + ' \\n\\n ' + ((0, _util.getMetaContent)('description') || (0, _util.getMetaContent)('description', 'og:description') || '')\n      }, {\n        headers: {\n          Authorization: 'token ' + this.accessToken\n        }\n      }).then(function (res) {\n        _this7.setState({ issue: res.data });\n        return res.data;\n      });\n    }\n    // Get comments via v3 api, don't require login, but sorting feature is disable\n\n  }, {\n    key: 'getComments',\n    value: function getComments(issue) {\n      if (!issue) return;\n      // Get comments via v4 graphql api, login required and sorting feature is available\n      if (this.accessToken) return _getComments2.default.call(this, issue);\n      return this.getCommentsV3(issue);\n    }\n  }, {\n    key: 'createComment',\n    value: function createComment() {\n      var _this8 = this;\n\n      var _state = this.state,\n          comment = _state.comment,\n          localComments = _state.localComments,\n          comments = _state.comments;\n\n\n      return this.getIssue().then(function (issue) {\n        return _util.axiosGithub.post(issue.comments_url, {\n          body: comment\n        }, {\n          headers: {\n            Accept: 'application/vnd.github.v3.full+json',\n            Authorization: 'token ' + _this8.accessToken\n          }\n        });\n      }).then(function (res) {\n        _this8.setState({\n          comment: '',\n          comments: comments.concat(res.data),\n          localComments: localComments.concat(res.data)\n        });\n      });\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      this.setState({ user: null });\n      window.localStorage.removeItem(_const.GT_ACCESS_TOKEN);\n    }\n  }, {\n    key: 'like',\n    value: function like(comment) {\n      var _this9 = this;\n\n      var _options4 = this.options,\n          owner = _options4.owner,\n          repo = _options4.repo;\n      var user = this.state.user;\n      var comments = this.state.comments;\n\n\n      _util.axiosGithub.post('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {\n        content: 'heart'\n      }, {\n        headers: {\n          Authorization: 'token ' + this.accessToken,\n          Accept: 'application/vnd.github.squirrel-girl-preview'\n        }\n      }).then(function (res) {\n        comments = comments.map(function (c) {\n          if (c.id === comment.id) {\n            if (c.reactions) {\n              if (!~c.reactions.nodes.findIndex(function (n) {\n                return n.user.login === user.login;\n              })) {\n                c.reactions.totalCount += 1;\n              }\n            } else {\n              c.reactions = { nodes: [] };\n              c.reactions.totalCount = 1;\n            }\n\n            c.reactions.nodes.push(res.data);\n            c.reactions.viewerHasReacted = true;\n          }\n          return c;\n        });\n\n        _this9.setState({\n          comments: comments\n        });\n      });\n    }\n  }, {\n    key: 'unLike',\n    value: function unLike(comment) {\n      var _this10 = this;\n\n      var user = this.state.user;\n      var comments = this.state.comments;\n\n      // const {  user } = this.state\n      // let id\n      // comment.reactions.nodes.forEach(r => {\n      //   if (r.user.login = user.login) id = r.databaseId\n      // })\n      // return axiosGithub.delete(`/reactions/${id}`, {\n      //   headers: {\n      //     Authorization: `token ${this.accessToken}`,\n      //     Accept: 'application/vnd.github.squirrel-girl-preview'\n      //   }\n      // }).then(res => {\n      //   console.log('res:', res)\n      // })\n\n      var getQL = function getQL(id) {\n        return {\n          operationName: 'RemoveReaction',\n          query: '\\n          mutation RemoveReaction{\\n            removeReaction (input:{\\n              subjectId: \"' + id + '\",\\n              content: HEART\\n            }) {\\n              reaction {\\n                content\\n              }\\n            }\\n          }\\n        '\n        };\n      };\n\n      _util.axiosGithub.post('/graphql', getQL(comment.gId), {\n        headers: {\n          Authorization: 'bearer ' + this.accessToken\n        }\n      }).then(function (res) {\n        if (res.data) {\n          comments = comments.map(function (c) {\n            if (c.id === comment.id) {\n              var index = c.reactions.nodes.findIndex(function (n) {\n                return n.user.login === user.login;\n              });\n              if (~index) {\n                c.reactions.totalCount -= 1;\n                c.reactions.nodes.splice(index, 1);\n              }\n              c.reactions.viewerHasReacted = false;\n            }\n            return c;\n          });\n\n          _this10.setState({\n            comments: comments\n          });\n        }\n      });\n    }\n  }, {\n    key: 'initing',\n    value: function initing() {\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-initing' },\n        _react2.default.createElement('i', { className: 'gt-loader' }),\n        _react2.default.createElement(\n          'p',\n          { className: 'gt-initing-text' },\n          this.i18n.t('init')\n        )\n      );\n    }\n  }, {\n    key: 'noInit',\n    value: function noInit() {\n      var _state2 = this.state,\n          user = _state2.user,\n          isIssueCreating = _state2.isIssueCreating;\n      var _options5 = this.options,\n          owner = _options5.owner,\n          repo = _options5.repo,\n          admin = _options5.admin;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-no-init', key: 'no-init' },\n        _react2.default.createElement('p', { dangerouslySetInnerHTML: {\n            __html: this.i18n.t('no-found-related', {\n              link: '<a href=\"https://github.com/' + owner + '/' + repo + '/issues\">Issues</a>'\n            })\n          } }),\n        _react2.default.createElement(\n          'p',\n          null,\n          this.i18n.t('please-contact', { user: [].concat(admin).map(function (u) {\n              return '@' + u;\n            }).join(' ') })\n        ),\n        this.isAdmin ? _react2.default.createElement(\n          'p',\n          null,\n          _react2.default.createElement(_button2.default, { onClick: this.handleIssueCreate, isLoading: isIssueCreating, text: this.i18n.t('init-issue') })\n        ) : null,\n        !user && _react2.default.createElement(_button2.default, { className: 'gt-btn-login', onClick: this.handleLogin, text: this.i18n.t('login-with-github') })\n      );\n    }\n  }, {\n    key: 'handleImageErrored',\n    value: function handleImageErrored(obj) {\n      obj.target.src = \"https://cdn.jsdelivr.net/npm/gitalk@1/src/assets/icon/github.svg\";\n    }\n  }, {\n    key: 'header',\n    value: function header() {\n      var _this11 = this;\n\n      var _state3 = this.state,\n          user = _state3.user,\n          comment = _state3.comment,\n          isCreating = _state3.isCreating,\n          previewHtml = _state3.previewHtml,\n          isPreview = _state3.isPreview;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-header', key: 'header' },\n        user ? _react2.default.createElement(_avatar2.default, { className: 'gt-header-avatar', src: user.avatar_url, alt: user.login, onError: this.handleImageErrored.bind(this) }) : _react2.default.createElement(\n          'a',\n          { className: 'gt-avatar-github', onMouseDown: this.handleLogin },\n          _react2.default.createElement(_svg2.default, { className: 'gt-ico-github', name: 'github' })\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-header-comment' },\n          _react2.default.createElement('textarea', {\n            ref: function ref(t) {\n              _this11.commentEL = t;\n            },\n            className: 'gt-header-textarea ' + (isPreview ? 'hide' : ''),\n            value: comment,\n            onChange: this.handleCommentChange,\n            onFocus: this.handleCommentFocus,\n            onBlur: this.handleCommentBlur,\n            onKeyDown: this.handleCommentKeyDown,\n            placeholder: this.i18n.t('leave-a-comment')\n          }),\n          _react2.default.createElement('div', {\n            className: 'gt-header-preview markdown-body ' + (isPreview ? '' : 'hide'),\n            dangerouslySetInnerHTML: { __html: previewHtml }\n          }),\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-header-controls' },\n            _react2.default.createElement(\n              'a',\n              { className: 'gt-header-controls-tip', href: 'https://guides.github.com/features/mastering-markdown/', target: '_blank' },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-tip', name: 'tip', text: this.i18n.t('support-markdown') })\n            ),\n            user && _react2.default.createElement(_button2.default, {\n              getRef: this.getRef,\n              className: 'gt-btn-public',\n              onMouseDown: this.handleCommentCreate,\n              text: this.i18n.t('comment'),\n              isLoading: isCreating\n            }),\n            _react2.default.createElement(_button2.default, {\n              className: 'gt-btn-preview',\n              onMouseDown: this.handleCommentPreview,\n              text: isPreview ? this.i18n.t('edit') : this.i18n.t('preview')\n              // isLoading={isPreviewing}\n            }),\n            !user && _react2.default.createElement(_button2.default, { className: 'gt-btn-login', onMouseDown: this.handleLogin, text: this.i18n.t('login-with-github') })\n          )\n        )\n      );\n    }\n  }, {\n    key: 'comments',\n    value: function comments() {\n      var _this12 = this;\n\n      var _state4 = this.state,\n          user = _state4.user,\n          comments = _state4.comments,\n          isLoadOver = _state4.isLoadOver,\n          isLoadMore = _state4.isLoadMore,\n          pagerDirection = _state4.pagerDirection;\n      var _options6 = this.options,\n          language = _options6.language,\n          flipMoveOptions = _options6.flipMoveOptions,\n          admin = _options6.admin;\n\n      var totalComments = comments.concat([]);\n      if (pagerDirection === 'last' && this.accessToken) {\n        totalComments.reverse();\n      }\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-comments', key: 'comments' },\n        _react2.default.createElement(\n          _reactFlipMove2.default,\n          flipMoveOptions,\n          totalComments.map(function (c) {\n            return _react2.default.createElement(_comment2.default, {\n              comment: c,\n              key: c.id,\n              user: user,\n              language: language,\n              commentedText: _this12.i18n.t('commented'),\n              admin: admin,\n              replyCallback: _this12.reply(c),\n              likeCallback: c.reactions && c.reactions.viewerHasReacted ? _this12.unLike.bind(_this12, c) : _this12.like.bind(_this12, c)\n            });\n          })\n        ),\n        !totalComments.length && _react2.default.createElement(\n          'p',\n          { className: 'gt-comments-null' },\n          this.i18n.t('first-comment-person')\n        ),\n        !isLoadOver && totalComments.length ? _react2.default.createElement(\n          'div',\n          { className: 'gt-comments-controls' },\n          _react2.default.createElement(_button2.default, { className: 'gt-btn-loadmore', onClick: this.handleCommentLoad, isLoading: isLoadMore, text: this.i18n.t('load-more') })\n        ) : null\n      );\n    }\n  }, {\n    key: 'meta',\n    value: function meta() {\n      var _state5 = this.state,\n          user = _state5.user,\n          issue = _state5.issue,\n          isPopupVisible = _state5.isPopupVisible,\n          pagerDirection = _state5.pagerDirection,\n          localComments = _state5.localComments;\n\n      var cnt = (issue && issue.comments) + localComments.length;\n      var isDesc = pagerDirection === 'last';\n      var updateCountCallback = this.options.updateCountCallback;\n\n      // window.GITALK_COMMENTS_COUNT = cnt\n\n      if (updateCountCallback && {}.toString.call(updateCountCallback) === '[object Function]') {\n        try {\n          updateCountCallback(cnt);\n        } catch (err) {\n          console.log('An error occurred executing the updateCountCallback:', err);\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-meta', key: 'meta' },\n        _react2.default.createElement('span', { className: 'gt-counts', dangerouslySetInnerHTML: {\n            __html: this.i18n.t('counts', {\n              counts: '<a class=\"gt-link gt-link-counts\" href=\"' + (issue && issue.html_url) + '\" target=\"_blank\">' + cnt + '</a>',\n              smart_count: cnt\n            })\n          } }),\n        isPopupVisible && _react2.default.createElement(\n          'div',\n          { className: 'gt-popup' },\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-sortasc' + (!isDesc ? ' is--active' : ''), onClick: this.handleSort('first'), text: this.i18n.t('sort-asc') }) : null,\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-sortdesc' + (isDesc ? ' is--active' : ''), onClick: this.handleSort('last'), text: this.i18n.t('sort-desc') }) : null,\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-logout', onClick: this.handleLogout, text: this.i18n.t('logout') }) : _react2.default.createElement(\n            'a',\n            { className: 'gt-action gt-action-login', onMouseDown: this.handleLogin },\n            this.i18n.t('login-with-github')\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-copyright' },\n            _react2.default.createElement(\n              'a',\n              { className: 'gt-link gt-link-project', href: 'https://github.com/gitalk/gitalk', target: '_blank' },\n              'Gitalk'\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-version' },\n              _const.GT_VERSION\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-user' },\n          user ? _react2.default.createElement(\n            'div',\n            { className: isPopupVisible ? 'gt-user-inner is--poping' : 'gt-user-inner', onClick: this.handlePopup },\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-user-name' },\n              user.login\n            ),\n            _react2.default.createElement(_svg2.default, { className: 'gt-ico-arrdown', name: 'arrow_down' })\n          ) : _react2.default.createElement(\n            'div',\n            { className: isPopupVisible ? 'gt-user-inner is--poping' : 'gt-user-inner', onClick: this.handlePopup },\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-user-name' },\n              this.i18n.t('anonymous')\n            ),\n            _react2.default.createElement(_svg2.default, { className: 'gt-ico-arrdown', name: 'arrow_down' })\n          )\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state6 = this.state,\n          isIniting = _state6.isIniting,\n          isNoInit = _state6.isNoInit,\n          isOccurError = _state6.isOccurError,\n          errorMsg = _state6.errorMsg,\n          isInputFocused = _state6.isInputFocused;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-container' + (isInputFocused ? ' gt-input-focused' : '') },\n        isIniting && this.initing(),\n        !isIniting && (isNoInit ? [] : [this.meta()]),\n        isOccurError && _react2.default.createElement(\n          'div',\n          { className: 'gt-error' },\n          errorMsg\n        ),\n        !isIniting && (isNoInit ? [this.noInit()] : [this.header(), this.comments()])\n      );\n    }\n  }, {\n    key: 'accessToken',\n    get: function get() {\n      return this._accessToke || window.localStorage.getItem(_const.GT_ACCESS_TOKEN);\n    },\n    set: function set(token) {\n      window.localStorage.setItem(_const.GT_ACCESS_TOKEN, token);\n      this._accessToken = token;\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var githubOauthUrl = 'https://github.com/login/oauth/authorize';\n      var clientID = this.options.clientID;\n\n      var query = {\n        client_id: clientID,\n        redirect_uri: window.location.href,\n        scope: 'public_repo'\n      };\n      return githubOauthUrl + '?' + (0, _util.queryStringify)(query);\n    }\n  }, {\n    key: 'isAdmin',\n    get: function get() {\n      var admin = this.options.admin;\n      var user = this.state.user;\n\n\n      return user && ~[].concat(admin).map(function (a) {\n        return a.toLowerCase();\n      }).indexOf(user.login.toLowerCase());\n    }\n  }]);\n  return GitalkComponent;\n}(_react.Component);\n\nmodule.exports = GitalkComponent;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(100), __esModule: true };\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(50);\n__webpack_require__(20);\n__webpack_require__(27);\n__webpack_require__(109);\n__webpack_require__(117);\n__webpack_require__(118);\nmodule.exports = __webpack_require__(0).Promise;\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(34);\nvar defined = __webpack_require__(35);\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar create = __webpack_require__(36);\nvar descriptor = __webpack_require__(19);\nvar setToStringTag = __webpack_require__(26);\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(11)(IteratorPrototype, __webpack_require__(2)('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(7);\nvar anObject = __webpack_require__(6);\nvar getKeys = __webpack_require__(22);\n\nmodule.exports = __webpack_require__(8) ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(16);\nvar toLength = __webpack_require__(37);\nvar toAbsoluteIndex = __webpack_require__(105);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(34);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar addToUnscopables = __webpack_require__(107);\nvar step = __webpack_require__(108);\nvar Iterators = __webpack_require__(15);\nvar toIObject = __webpack_require__(16);\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(51)(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = function () { /* empty */ };\n\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(21);\nvar global = __webpack_require__(1);\nvar ctx = __webpack_require__(13);\nvar classof = __webpack_require__(41);\nvar $export = __webpack_require__(4);\nvar isObject = __webpack_require__(10);\nvar aFunction = __webpack_require__(24);\nvar anInstance = __webpack_require__(110);\nvar forOf = __webpack_require__(111);\nvar speciesConstructor = __webpack_require__(59);\nvar task = __webpack_require__(60).set;\nvar microtask = __webpack_require__(113)();\nvar newPromiseCapabilityModule = __webpack_require__(43);\nvar perform = __webpack_require__(61);\nvar userAgent = __webpack_require__(114);\nvar promiseResolve = __webpack_require__(62);\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[__webpack_require__(2)('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = __webpack_require__(115)($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\n__webpack_require__(26)($Promise, PROMISE);\n__webpack_require__(116)(PROMISE);\nWrapper = __webpack_require__(0)[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(63)(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(13);\nvar call = __webpack_require__(57);\nvar isArrayIter = __webpack_require__(58);\nvar anObject = __webpack_require__(6);\nvar toLength = __webpack_require__(37);\nvar getIterFn = __webpack_require__(42);\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports) {\n\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar macrotask = __webpack_require__(60).set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = __webpack_require__(23)(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hide = __webpack_require__(11);\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar dP = __webpack_require__(7);\nvar DESCRIPTORS = __webpack_require__(8);\nvar SPECIES = __webpack_require__(2)('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// https://github.com/tc39/proposal-promise-finally\n\nvar $export = __webpack_require__(4);\nvar core = __webpack_require__(0);\nvar global = __webpack_require__(1);\nvar speciesConstructor = __webpack_require__(59);\nvar promiseResolve = __webpack_require__(62);\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// https://github.com/tc39/proposal-promise-try\nvar $export = __webpack_require__(4);\nvar newPromiseCapability = __webpack_require__(43);\nvar perform = __webpack_require__(61);\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(120), __esModule: true };\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(121);\nmodule.exports = __webpack_require__(0).Object.assign;\n\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(4);\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(122) });\n\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = __webpack_require__(8);\nvar getKeys = __webpack_require__(22);\nvar gOPS = __webpack_require__(44);\nvar pIE = __webpack_require__(28);\nvar toObject = __webpack_require__(17);\nvar IObject = __webpack_require__(54);\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(14)(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(124);\nmodule.exports = __webpack_require__(0).Object.getPrototypeOf;\n\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = __webpack_require__(17);\nvar $getPrototypeOf = __webpack_require__(56);\n\n__webpack_require__(65)('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(126), __esModule: true };\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(20);\n__webpack_require__(27);\nmodule.exports = __webpack_require__(45).f('iterator');\n\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(128), __esModule: true };\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(129);\n__webpack_require__(50);\n__webpack_require__(134);\n__webpack_require__(135);\nmodule.exports = __webpack_require__(0).Symbol;\n\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// ECMAScript 6 symbols shim\nvar global = __webpack_require__(1);\nvar has = __webpack_require__(12);\nvar DESCRIPTORS = __webpack_require__(8);\nvar $export = __webpack_require__(4);\nvar redefine = __webpack_require__(52);\nvar META = __webpack_require__(130).KEY;\nvar $fails = __webpack_require__(14);\nvar shared = __webpack_require__(39);\nvar setToStringTag = __webpack_require__(26);\nvar uid = __webpack_require__(25);\nvar wks = __webpack_require__(2);\nvar wksExt = __webpack_require__(45);\nvar wksDefine = __webpack_require__(46);\nvar enumKeys = __webpack_require__(131);\nvar isArray = __webpack_require__(132);\nvar anObject = __webpack_require__(6);\nvar isObject = __webpack_require__(10);\nvar toObject = __webpack_require__(17);\nvar toIObject = __webpack_require__(16);\nvar toPrimitive = __webpack_require__(32);\nvar createDesc = __webpack_require__(19);\nvar _create = __webpack_require__(36);\nvar gOPNExt = __webpack_require__(133);\nvar $GOPD = __webpack_require__(69);\nvar $GOPS = __webpack_require__(44);\nvar $DP = __webpack_require__(7);\nvar $keys = __webpack_require__(22);\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(68).f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(28).f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(21)) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(11)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar META = __webpack_require__(25)('meta');\nvar isObject = __webpack_require__(10);\nvar has = __webpack_require__(12);\nvar setDesc = __webpack_require__(7).f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(14)(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(22);\nvar gOPS = __webpack_require__(44);\nvar pIE = __webpack_require__(28);\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(23);\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(16);\nvar gOPN = __webpack_require__(68).f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(46)('asyncIterator');\n\n\n/***/ }),\n/* 135 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(46)('observable');\n\n\n/***/ }),\n/* 136 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(137), __esModule: true };\n\n/***/ }),\n/* 137 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(138);\nmodule.exports = __webpack_require__(0).Object.setPrototypeOf;\n\n\n/***/ }),\n/* 138 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = __webpack_require__(4);\n$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(139).set });\n\n\n/***/ }),\n/* 139 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(10);\nvar anObject = __webpack_require__(6);\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = __webpack_require__(13)(Function.call, __webpack_require__(69).f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/***/ }),\n/* 140 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(141), __esModule: true };\n\n/***/ }),\n/* 141 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(142);\nvar $Object = __webpack_require__(0).Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n/***/ }),\n/* 142 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(4);\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: __webpack_require__(36) });\n\n\n/***/ }),\n/* 143 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _FlipMove = __webpack_require__(144);\n\nvar _FlipMove2 = _interopRequireDefault(_FlipMove);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _FlipMove2.default;\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n */\n\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 144 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\n__webpack_require__(145);\n\nvar _propConverter = __webpack_require__(146);\n\nvar _propConverter2 = _interopRequireDefault(_propConverter);\n\nvar _domManipulation = __webpack_require__(149);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n *\n * For information on how this code is laid out, check out CODE_TOUR.md\n */\n\n/* eslint-disable react/prop-types */\n\nvar transitionEnd = (0, _domManipulation.whichTransitionEvent)();\nvar noBrowserSupport = !transitionEnd;\n\nfunction getKey(childData) {\n  return childData.key || '';\n}\n\nvar FlipMove = function (_Component) {\n  _inherits(FlipMove, _Component);\n\n  function FlipMove() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, FlipMove);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = FlipMove.__proto__ || Object.getPrototypeOf(FlipMove)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      children: _react.Children.toArray(_this.props.children).map(function (element) {\n        return _extends({}, element, {\n          element: element,\n          appearing: true\n        });\n      })\n    }, _this.childrenData = {}, _this.parentData = {\n      domNode: null,\n      boundingBox: null\n    }, _this.heightPlaceholderData = {\n      domNode: null\n    }, _this.remainingAnimations = 0, _this.childrenToAnimate = [], _this.runAnimation = function () {\n      var dynamicChildren = _this.state.children.filter(_this.doesChildNeedToBeAnimated);\n\n      dynamicChildren.forEach(function (child, n) {\n        _this.remainingAnimations += 1;\n        _this.childrenToAnimate.push(getKey(child));\n        _this.animateChild(child, n);\n      });\n\n      if (typeof _this.props.onStartAll === 'function') {\n        _this.callChildrenHook(_this.props.onStartAll);\n      }\n    }, _this.doesChildNeedToBeAnimated = function (child) {\n      // If the child doesn't have a key, it's an immovable child (one that we\n      // do not want to do FLIP stuff to.)\n      if (!getKey(child)) {\n        return false;\n      }\n\n      var childData = _this.getChildData(getKey(child));\n      var childDomNode = childData.domNode;\n      var childBoundingBox = childData.boundingBox;\n      var parentBoundingBox = _this.parentData.boundingBox;\n\n      if (!childDomNode) {\n        return false;\n      }\n\n      var _this$props = _this.props,\n          appearAnimation = _this$props.appearAnimation,\n          enterAnimation = _this$props.enterAnimation,\n          leaveAnimation = _this$props.leaveAnimation,\n          getPosition = _this$props.getPosition;\n\n\n      var isAppearingWithAnimation = child.appearing && appearAnimation;\n      var isEnteringWithAnimation = child.entering && enterAnimation;\n      var isLeavingWithAnimation = child.leaving && leaveAnimation;\n\n      if (isAppearingWithAnimation || isEnteringWithAnimation || isLeavingWithAnimation) {\n        return true;\n      }\n\n      // If it isn't entering/leaving, we want to animate it if it's\n      // on-screen position has changed.\n\n      var _getPositionDelta = (0, _domManipulation.getPositionDelta)({\n        childDomNode: childDomNode,\n        childBoundingBox: childBoundingBox,\n        parentBoundingBox: parentBoundingBox,\n        getPosition: getPosition\n      }),\n          _getPositionDelta2 = _slicedToArray(_getPositionDelta, 2),\n          dX = _getPositionDelta2[0],\n          dY = _getPositionDelta2[1];\n\n      return dX !== 0 || dY !== 0;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  // Copy props.children into state.\n  // To understand why this is important (and not an anti-pattern), consider\n  // how \"leave\" animations work. An item has \"left\" when the component\n  // receives a new set of props that do NOT contain the item.\n  // If we just render the props as-is, the item would instantly disappear.\n  // We want to keep the item rendered for a little while, until its animation\n  // can complete. Because we cannot mutate props, we make `state` the source\n  // of truth.\n\n\n  // FlipMove needs to know quite a bit about its children in order to do\n  // its job. We store these as a property on the instance. We're not using\n  // state, because we don't want changes to trigger re-renders, we just\n  // need a place to keep the data for reference, when changes happen.\n  // This field should not be accessed directly. Instead, use getChildData,\n  // putChildData, etc...\n\n\n  // Similarly, track the dom node and box of our parent element.\n\n\n  // If `maintainContainerHeight` prop is set to true, we'll create a\n  // placeholder element which occupies space so that the parent height\n  // doesn't change when items are removed from the document flow (which\n  // happens during leave animations)\n\n\n  // Keep track of remaining animations so we know when to fire the\n  // all-finished callback, and clean up after ourselves.\n  // NOTE: we can't simply use childrenToAnimate.length to track remaining\n  // animations, because we need to maintain the list of animating children,\n  // to pass to the `onFinishAll` handler.\n\n\n  _createClass(FlipMove, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Run our `appearAnimation` if it was requested, right after the\n      // component mounts.\n      var shouldTriggerFLIP = this.props.appearAnimation && !this.isAnimationDisabled(this.props);\n\n      if (shouldTriggerFLIP) {\n        this.prepForAnimation();\n        this.runAnimation();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      // When the component is handed new props, we need to figure out the\n      // \"resting\" position of all currently-rendered DOM nodes.\n      // We store that data in this.parent and this.children,\n      // so it can be used later to work out the animation.\n      this.updateBoundingBoxCaches();\n\n      // Convert opaque children object to array.\n      var nextChildren = _react.Children.toArray(nextProps.children);\n\n      // Next, we need to update our state, so that it contains our new set of\n      // children. If animation is disabled or unsupported, this is easy;\n      // we just copy our props into state.\n      // Assuming that we can animate, though, we have to do some work.\n      // Essentially, we want to keep just-deleted nodes in the DOM for a bit\n      // longer, so that we can animate them away.\n      this.setState({\n        children: this.isAnimationDisabled(nextProps) ? nextChildren.map(function (element) {\n          return _extends({}, element, { element: element });\n        }) : this.calculateNextSetOfChildren(nextChildren)\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(previousProps) {\n      // If the children have been re-arranged, moved, or added/removed,\n      // trigger the main FLIP animation.\n      //\n      // IMPORTANT: We need to make sure that the children have actually changed.\n      // At the end of the transition, we clean up nodes that need to be removed.\n      var oldChildrenKeys = _react.Children.toArray(this.props.children).map(function (d) {\n        return d.key;\n      });\n      var nextChildrenKeys = _react.Children.toArray(previousProps.children).map(function (d) {\n        return d.key;\n      });\n\n      var shouldTriggerFLIP = !(0, _helpers.arraysEqual)(oldChildrenKeys, nextChildrenKeys) && !this.isAnimationDisabled(this.props);\n\n      if (shouldTriggerFLIP) {\n        this.prepForAnimation();\n        this.runAnimation();\n      }\n    }\n  }, {\n    key: 'calculateNextSetOfChildren',\n    value: function calculateNextSetOfChildren(nextChildren) {\n      var _this2 = this;\n\n      // We want to:\n      //   - Mark all new children as `entering`\n      //   - Pull in previous children that aren't in nextChildren, and mark them\n      //     as `leaving`\n      //   - Preserve the nextChildren list order, with leaving children in their\n      //     appropriate places.\n      //\n\n      var updatedChildren = nextChildren.map(function (nextChild) {\n        var child = _this2.findChildByKey(nextChild.key || '');\n\n        // If the current child did exist, but it was in the midst of leaving,\n        // we want to treat it as though it's entering\n        var isEntering = !child || child.leaving;\n\n        return _extends({}, nextChild, { element: nextChild, entering: isEntering });\n      });\n\n      // This is tricky. We want to keep the nextChildren's ordering, but with\n      // any just-removed items maintaining their original position.\n      // eg.\n      //   this.state.children  = [ 1, 2, 3, 4 ]\n      //   nextChildren         = [ 3, 1 ]\n      //\n      // In this example, we've removed the '2' & '4'\n      // We want to end up with:  [ 2, 3, 1, 4 ]\n      //\n      // To accomplish that, we'll iterate through this.state.children. whenever\n      // we find a match, we'll append our `leaving` flag to it, and insert it\n      // into the nextChildren in its ORIGINAL position. Note that, as we keep\n      // inserting old items into the new list, the \"original\" position will\n      // keep incrementing.\n      var numOfChildrenLeaving = 0;\n      this.state.children.forEach(function (child, index) {\n        var isLeaving = !nextChildren.find(function (_ref2) {\n          var key = _ref2.key;\n          return key === getKey(child);\n        });\n\n        // If the child isn't leaving (or, if there is no leave animation),\n        // we don't need to add it into the state children.\n        if (!isLeaving || !_this2.props.leaveAnimation) return;\n\n        var nextChild = _extends({}, child, { leaving: true });\n        var nextChildIndex = index + numOfChildrenLeaving;\n\n        updatedChildren.splice(nextChildIndex, 0, nextChild);\n        numOfChildrenLeaving += 1;\n      });\n\n      return updatedChildren;\n    }\n  }, {\n    key: 'prepForAnimation',\n    value: function prepForAnimation() {\n      var _this3 = this;\n\n      // Our animation prep consists of:\n      // - remove children that are leaving from the DOM flow, so that the new\n      //   layout can be accurately calculated,\n      // - update the placeholder container height, if needed, to ensure that\n      //   the parent's height doesn't collapse.\n\n      var _props = this.props,\n          leaveAnimation = _props.leaveAnimation,\n          maintainContainerHeight = _props.maintainContainerHeight,\n          getPosition = _props.getPosition;\n\n      // we need to make all leaving nodes \"invisible\" to the layout calculations\n      // that will take place in the next step (this.runAnimation).\n\n      if (leaveAnimation) {\n        var leavingChildren = this.state.children.filter(function (child) {\n          return child.leaving;\n        });\n\n        leavingChildren.forEach(function (leavingChild) {\n          var childData = _this3.getChildData(getKey(leavingChild));\n\n          // We need to take the items out of the \"flow\" of the document, so that\n          // its siblings can move to take its place.\n          if (childData.boundingBox) {\n            (0, _domManipulation.removeNodeFromDOMFlow)(childData, _this3.props.verticalAlignment);\n          }\n        });\n\n        if (maintainContainerHeight && this.heightPlaceholderData.domNode) {\n          (0, _domManipulation.updateHeightPlaceholder)({\n            domNode: this.heightPlaceholderData.domNode,\n            parentData: this.parentData,\n            getPosition: getPosition\n          });\n        }\n      }\n\n      // For all children not in the middle of entering or leaving,\n      // we need to reset the transition, so that the NEW shuffle starts from\n      // the right place.\n      this.state.children.forEach(function (child) {\n        var _getChildData = _this3.getChildData(getKey(child)),\n            domNode = _getChildData.domNode;\n\n        // Ignore children that don't render DOM nodes (eg. by returning null)\n\n\n        if (!domNode) {\n          return;\n        }\n\n        if (!child.entering && !child.leaving) {\n          (0, _domManipulation.applyStylesToDOMNode)({\n            domNode: domNode,\n            styles: {\n              transition: ''\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: 'animateChild',\n    value: function animateChild(child, index) {\n      var _this4 = this;\n\n      var _getChildData2 = this.getChildData(getKey(child)),\n          domNode = _getChildData2.domNode;\n\n      if (!domNode) {\n        return;\n      }\n\n      // Apply the relevant style for this DOM node\n      // This is the offset from its actual DOM position.\n      // eg. if an item has been re-rendered 20px lower, we want to apply a\n      // style of 'transform: translate(-20px)', so that it appears to be where\n      // it started.\n      // In FLIP terminology, this is the 'Invert' stage.\n      (0, _domManipulation.applyStylesToDOMNode)({\n        domNode: domNode,\n        styles: this.computeInitialStyles(child)\n      });\n\n      // Start by invoking the onStart callback for this child.\n      if (this.props.onStart) this.props.onStart(child, domNode);\n\n      // Next, animate the item from it's artificially-offset position to its\n      // new, natural position.\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          // NOTE, RE: the double-requestAnimationFrame:\n          // Sadly, this is the most browser-compatible way to do this I've found.\n          // Essentially we need to set the initial styles outside of any request\n          // callbacks to avoid batching them. Then, a frame needs to pass with\n          // the styles above rendered. Then, on the second frame, we can apply\n          // our final styles to perform the animation.\n\n          // Our first order of business is to \"undo\" the styles applied in the\n          // previous frames, while also adding a `transition` property.\n          // This way, the item will smoothly transition from its old position\n          // to its new position.\n\n          // eslint-disable-next-line flowtype/require-variable-type\n          var styles = {\n            transition: (0, _domManipulation.createTransitionString)(index, _this4.props),\n            transform: '',\n            opacity: ''\n          };\n\n          if (child.appearing && _this4.props.appearAnimation) {\n            styles = _extends({}, styles, _this4.props.appearAnimation.to);\n          } else if (child.entering && _this4.props.enterAnimation) {\n            styles = _extends({}, styles, _this4.props.enterAnimation.to);\n          } else if (child.leaving && _this4.props.leaveAnimation) {\n            styles = _extends({}, styles, _this4.props.leaveAnimation.to);\n          }\n\n          // In FLIP terminology, this is the 'Play' stage.\n          (0, _domManipulation.applyStylesToDOMNode)({ domNode: domNode, styles: styles });\n        });\n      });\n\n      this.bindTransitionEndHandler(child);\n    }\n  }, {\n    key: 'bindTransitionEndHandler',\n    value: function bindTransitionEndHandler(child) {\n      var _this5 = this;\n\n      var _getChildData3 = this.getChildData(getKey(child)),\n          domNode = _getChildData3.domNode;\n\n      if (!domNode) {\n        return;\n      }\n\n      // The onFinish callback needs to be bound to the transitionEnd event.\n      // We also need to unbind it when the transition completes, so this ugly\n      // inline function is required (we need it here so it closes over\n      // dependent variables `child` and `domNode`)\n      var transitionEndHandler = function transitionEndHandler(ev) {\n        // It's possible that this handler is fired not on our primary transition,\n        // but on a nested transition (eg. a hover effect). Ignore these cases.\n        if (ev.target !== domNode) return;\n\n        // Remove the 'transition' inline style we added. This is cleanup.\n        domNode.style.transition = '';\n\n        // Trigger any applicable onFinish/onFinishAll hooks\n        _this5.triggerFinishHooks(child, domNode);\n\n        domNode.removeEventListener(transitionEnd, transitionEndHandler);\n\n        if (child.leaving) {\n          _this5.removeChildData(getKey(child));\n        }\n      };\n\n      domNode.addEventListener(transitionEnd, transitionEndHandler);\n    }\n  }, {\n    key: 'triggerFinishHooks',\n    value: function triggerFinishHooks(child, domNode) {\n      var _this6 = this;\n\n      if (this.props.onFinish) this.props.onFinish(child, domNode);\n\n      // Reduce the number of children we need to animate by 1,\n      // so that we can tell when all children have finished.\n      this.remainingAnimations -= 1;\n\n      if (this.remainingAnimations === 0) {\n        // Remove any items from the DOM that have left, and reset `entering`.\n        var nextChildren = this.state.children.filter(function (_ref3) {\n          var leaving = _ref3.leaving;\n          return !leaving;\n        }).map(function (item) {\n          return _extends({}, item, {\n            appearing: false,\n            entering: false\n          });\n        });\n\n        this.setState({ children: nextChildren }, function () {\n          if (typeof _this6.props.onFinishAll === 'function') {\n            _this6.callChildrenHook(_this6.props.onFinishAll);\n          }\n\n          // Reset our variables for the next iteration\n          _this6.childrenToAnimate = [];\n        });\n\n        // If the placeholder was holding the container open while elements were\n        // leaving, we we can now set its height to zero.\n        if (this.heightPlaceholderData.domNode) {\n          this.heightPlaceholderData.domNode.style.height = '0';\n        }\n      }\n    }\n  }, {\n    key: 'callChildrenHook',\n    value: function callChildrenHook(hook) {\n      var _this7 = this;\n\n      var elements = [];\n      var domNodes = [];\n\n      this.childrenToAnimate.forEach(function (childKey) {\n        // If this was an exit animation, the child may no longer exist.\n        // If so, skip it.\n        var child = _this7.findChildByKey(childKey);\n\n        if (!child) {\n          return;\n        }\n\n        elements.push(child);\n\n        if (_this7.hasChildData(childKey)) {\n          domNodes.push(_this7.getChildData(childKey).domNode);\n        }\n      });\n\n      hook(elements, domNodes);\n    }\n  }, {\n    key: 'updateBoundingBoxCaches',\n    value: function updateBoundingBoxCaches() {\n      var _this8 = this;\n\n      // This is the ONLY place that parentData and childrenData's\n      // bounding boxes are updated. They will be calculated at other times\n      // to be compared to this value, but it's important that the cache is\n      // updated once per update.\n      var parentDomNode = this.parentData.domNode;\n\n      if (!parentDomNode) {\n        return;\n      }\n\n      this.parentData.boundingBox = this.props.getPosition(parentDomNode);\n\n      this.state.children.forEach(function (child) {\n        var childKey = getKey(child);\n\n        // It is possible that a child does not have a `key` property;\n        // Ignore these children, they don't need to be moved.\n        if (!childKey) {\n          return;\n        }\n\n        // In very rare circumstances, for reasons unknown, the ref is never\n        // populated for certain children. In this case, avoid doing this update.\n        // see: https://github.com/joshwcomeau/react-flip-move/pull/91\n        if (!_this8.hasChildData(childKey)) {\n          return;\n        }\n\n        var childData = _this8.getChildData(childKey);\n\n        // If the child element returns null, we need to avoid trying to\n        // account for it\n        if (!childData.domNode || !child) {\n          return;\n        }\n\n        _this8.setChildData(childKey, {\n          boundingBox: (0, _domManipulation.getRelativeBoundingBox)({\n            childDomNode: childData.domNode,\n            parentDomNode: parentDomNode,\n            getPosition: _this8.props.getPosition\n          })\n        });\n      });\n    }\n  }, {\n    key: 'computeInitialStyles',\n    value: function computeInitialStyles(child) {\n      if (child.appearing) {\n        return this.props.appearAnimation ? this.props.appearAnimation.from : {};\n      } else if (child.entering) {\n        if (!this.props.enterAnimation) {\n          return {};\n        }\n        // If this child was in the middle of leaving, it still has its\n        // absolute positioning styles applied. We need to undo those.\n        return _extends({\n          position: '',\n          top: '',\n          left: '',\n          right: '',\n          bottom: ''\n        }, this.props.enterAnimation.from);\n      } else if (child.leaving) {\n        return this.props.leaveAnimation ? this.props.leaveAnimation.from : {};\n      }\n\n      var childData = this.getChildData(getKey(child));\n      var childDomNode = childData.domNode;\n      var childBoundingBox = childData.boundingBox;\n      var parentBoundingBox = this.parentData.boundingBox;\n\n      if (!childDomNode) {\n        return {};\n      }\n\n      var _getPositionDelta3 = (0, _domManipulation.getPositionDelta)({\n        childDomNode: childDomNode,\n        childBoundingBox: childBoundingBox,\n        parentBoundingBox: parentBoundingBox,\n        getPosition: this.props.getPosition\n      }),\n          _getPositionDelta4 = _slicedToArray(_getPositionDelta3, 2),\n          dX = _getPositionDelta4[0],\n          dY = _getPositionDelta4[1];\n\n      return {\n        transform: 'translate(' + dX + 'px, ' + dY + 'px)'\n      };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'isAnimationDisabled',\n    value: function isAnimationDisabled(props) {\n      // If the component is explicitly passed a `disableAllAnimations` flag,\n      // we can skip this whole process. Similarly, if all of the numbers have\n      // been set to 0, there is no point in trying to animate; doing so would\n      // only cause a flicker (and the intent is probably to disable animations)\n      // We can also skip this rigamarole if there's no browser support for it.\n      return noBrowserSupport || props.disableAllAnimations || props.duration === 0 && props.delay === 0 && props.staggerDurationBy === 0 && props.staggerDelayBy === 0;\n    }\n  }, {\n    key: 'findChildByKey',\n    value: function findChildByKey(key) {\n      return this.state.children.find(function (child) {\n        return getKey(child) === key;\n      });\n    }\n  }, {\n    key: 'hasChildData',\n    value: function hasChildData(key) {\n      // Object has some built-in properties on its prototype, such as toString.  hasOwnProperty makes\n      // sure that key is present on childrenData itself, not on its prototype.\n      return Object.prototype.hasOwnProperty.call(this.childrenData, key);\n    }\n  }, {\n    key: 'getChildData',\n    value: function getChildData(key) {\n      return this.hasChildData(key) ? this.childrenData[key] : {};\n    }\n  }, {\n    key: 'setChildData',\n    value: function setChildData(key, data) {\n      this.childrenData[key] = _extends({}, this.getChildData(key), data);\n    }\n  }, {\n    key: 'removeChildData',\n    value: function removeChildData(key) {\n      delete this.childrenData[key];\n    }\n  }, {\n    key: 'createHeightPlaceholder',\n    value: function createHeightPlaceholder() {\n      var _this9 = this;\n\n      var typeName = this.props.typeName;\n\n      // If requested, create an invisible element at the end of the list.\n      // Its height will be modified to prevent the container from collapsing\n      // prematurely.\n\n      var isContainerAList = typeName === 'ul' || typeName === 'ol';\n      var placeholderType = isContainerAList ? 'li' : 'div';\n\n      return _react2.default.createElement(placeholderType, {\n        key: 'height-placeholder',\n        ref: function ref(domNode) {\n          _this9.heightPlaceholderData.domNode = domNode;\n        },\n        style: { visibility: 'hidden', height: 0 }\n      });\n    }\n  }, {\n    key: 'childrenWithRefs',\n    value: function childrenWithRefs() {\n      var _this10 = this;\n\n      // We need to clone the provided children, capturing a reference to the\n      // underlying DOM node. Flip Move needs to use the React escape hatches to\n      // be able to do its calculations.\n      return this.state.children.map(function (child) {\n        return _react2.default.cloneElement(child.element, {\n          ref: function ref(element) {\n            // Stateless Functional Components are not supported by FlipMove,\n            // because they don't have instances.\n            if (!element) {\n              return;\n            }\n\n            var domNode = (0, _domManipulation.getNativeNode)(element);\n            _this10.setChildData(getKey(child), { domNode: domNode });\n          }\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this11 = this;\n\n      var _props2 = this.props,\n          typeName = _props2.typeName,\n          delegated = _props2.delegated,\n          leaveAnimation = _props2.leaveAnimation,\n          maintainContainerHeight = _props2.maintainContainerHeight;\n\n\n      var props = _extends({}, delegated, {\n        ref: function ref(node) {\n          _this11.parentData.domNode = node;\n        }\n      });\n\n      var children = this.childrenWithRefs();\n      if (leaveAnimation && maintainContainerHeight) {\n        children.push(this.createHeightPlaceholder());\n      }\n\n      return _react2.default.createElement(typeName, props, children);\n    }\n  }]);\n\n  return FlipMove;\n}(_react.Component);\n\nexports.default = (0, _propConverter2.default)(FlipMove);\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 145 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// @noflow\n/**\n * React Flip Move - Polyfills\n * (c) 2016-present Joshua Comeau\n */\n\n/* eslint-disable */\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value = void 0;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\nif (!Array.prototype.every) {\n  Array.prototype.every = function (callbackfn, thisArg) {\n    'use strict';\n\n    var T, k;\n\n    if (this == null) {\n      throw new TypeError('this is null or not defined');\n    }\n\n    var O = Object(this);\n    var len = O.length >>> 0;\n\n    if (typeof callbackfn !== 'function') {\n      throw new TypeError();\n    }\n\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    k = 0;\n\n    while (k < len) {\n\n      var kValue;\n\n      if (k in O) {\n        kValue = O[k];\n\n        var testResult = callbackfn.call(T, kValue, k, O);\n\n        if (!testResult) {\n          return false;\n        }\n      }\n      k++;\n    }\n    return true;\n  };\n}\n\nif (!Array.isArray) {\n  Array.isArray = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\n/***/ }),\n/* 146 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _errorMessages = __webpack_require__(147);\n\nvar _enterLeavePresets = __webpack_require__(148);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * React Flip Move | propConverter\n * (c) 2016-present Joshua Comeau\n *\n * Abstracted away a bunch of the messy business with props.\n *   - props flow types and defaultProps\n *   - Type conversion (We accept 'string' and 'number' values for duration,\n *     delay, and other fields, but we actually need them to be ints.)\n *   - Children conversion (we need the children to be an array. May not always\n *     be, if a single child is passed in.)\n *   - Resolving animation presets into their base CSS styles\n */\n/* eslint-disable block-scoped-var */\n\nvar nodeEnv = void 0;\ntry {\n  nodeEnv = process.env.NODE_ENV;\n} catch (e) {\n  nodeEnv = 'development';\n}\n\nfunction propConverter(ComposedComponent) {\n  var _class, _temp;\n\n  return _temp = _class = function (_Component) {\n    _inherits(FlipMovePropConverter, _Component);\n\n    function FlipMovePropConverter() {\n      _classCallCheck(this, FlipMovePropConverter);\n\n      return _possibleConstructorReturn(this, (FlipMovePropConverter.__proto__ || Object.getPrototypeOf(FlipMovePropConverter)).apply(this, arguments));\n    }\n\n    _createClass(FlipMovePropConverter, [{\n      key: 'checkForStatelessFunctionalComponents',\n\n\n      // eslint-disable-next-line class-methods-use-this\n      value: function checkForStatelessFunctionalComponents(children) {\n        // Skip all console warnings in production.\n        // Bail early, to avoid unnecessary work.\n        if (nodeEnv === 'production') {\n          return;\n        }\n\n        // FlipMove does not support stateless functional components.\n        // Check to see if any supplied components won't work.\n        // If the child doesn't have a key, it means we aren't animating it.\n        // It's allowed to be an SFC, since we ignore it.\n        var childArray = _react.Children.toArray(children);\n        var noStateless = childArray.every(function (child) {\n          return !(0, _helpers.isElementAnSFC)(child) || typeof child.key === 'undefined';\n        });\n\n        if (!noStateless) {\n          (0, _errorMessages.statelessFunctionalComponentSupplied)();\n        }\n      }\n    }, {\n      key: 'convertProps',\n      value: function convertProps(props) {\n        var workingProps = {\n          // explicitly bypass the props that don't need conversion\n          children: props.children,\n          easing: props.easing,\n          onStart: props.onStart,\n          onFinish: props.onFinish,\n          onStartAll: props.onStartAll,\n          onFinishAll: props.onFinishAll,\n          typeName: props.typeName,\n          disableAllAnimations: props.disableAllAnimations,\n          getPosition: props.getPosition,\n          maintainContainerHeight: props.maintainContainerHeight,\n          verticalAlignment: props.verticalAlignment,\n\n          // Do string-to-int conversion for all timing-related props\n          duration: this.convertTimingProp('duration'),\n          delay: this.convertTimingProp('delay'),\n          staggerDurationBy: this.convertTimingProp('staggerDurationBy'),\n          staggerDelayBy: this.convertTimingProp('staggerDelayBy'),\n\n          // Our enter/leave animations can be specified as boolean (default or\n          // disabled), string (preset name), or object (actual animation values).\n          // Let's standardize this so that they're always objects\n          appearAnimation: this.convertAnimationProp(props.appearAnimation, _enterLeavePresets.appearPresets),\n          enterAnimation: this.convertAnimationProp(props.enterAnimation, _enterLeavePresets.enterPresets),\n          leaveAnimation: this.convertAnimationProp(props.leaveAnimation, _enterLeavePresets.leavePresets),\n\n          delegated: {}\n        };\n\n        this.checkForStatelessFunctionalComponents(workingProps.children);\n\n        // Accept `disableAnimations`, but add a deprecation warning\n        if (typeof props.disableAnimations !== 'undefined') {\n          if (nodeEnv !== 'production') {\n            (0, _errorMessages.deprecatedDisableAnimations)();\n          }\n\n          workingProps.disableAllAnimations = props.disableAnimations;\n        }\n\n        // Gather any additional props;\n        // they will be delegated to the ReactElement created.\n        var primaryPropKeys = Object.keys(workingProps);\n        var delegatedProps = (0, _helpers.omit)(this.props, primaryPropKeys);\n\n        // The FlipMove container element needs to have a non-static position.\n        // We use `relative` by default, but it can be overridden by the user.\n        // Now that we're delegating props, we need to merge this in.\n        delegatedProps.style = _extends({\n          position: 'relative'\n        }, delegatedProps.style);\n\n        workingProps.delegated = delegatedProps;\n\n        return workingProps;\n      }\n    }, {\n      key: 'convertTimingProp',\n      value: function convertTimingProp(prop) {\n        var rawValue = this.props[prop];\n\n        var value = typeof rawValue === 'number' ? rawValue : parseInt(rawValue, 10);\n\n        if (isNaN(value)) {\n          var defaultValue = FlipMovePropConverter.defaultProps[prop];\n\n          if (nodeEnv !== 'production') {\n            (0, _errorMessages.invalidTypeForTimingProp)({\n              prop: prop,\n              value: rawValue,\n              defaultValue: defaultValue\n            });\n          }\n\n          return defaultValue;\n        }\n\n        return value;\n      }\n\n      // eslint-disable-next-line class-methods-use-this\n\n    }, {\n      key: 'convertAnimationProp',\n      value: function convertAnimationProp(animation, presets) {\n        switch (typeof animation === 'undefined' ? 'undefined' : _typeof(animation)) {\n          case 'boolean':\n            {\n              // If it's true, we want to use the default preset.\n              // If it's false, we want to use the 'none' preset.\n              return presets[animation ? _enterLeavePresets.defaultPreset : _enterLeavePresets.disablePreset];\n            }\n\n          case 'string':\n            {\n              var presetKeys = Object.keys(presets);\n\n              if (presetKeys.indexOf(animation) === -1) {\n                if (nodeEnv !== 'production') {\n                  (0, _errorMessages.invalidEnterLeavePreset)({\n                    value: animation,\n                    acceptableValues: presetKeys.join(', '),\n                    defaultValue: _enterLeavePresets.defaultPreset\n                  });\n                }\n\n                return presets[_enterLeavePresets.defaultPreset];\n              }\n\n              return presets[animation];\n            }\n\n          default:\n            {\n              return animation;\n            }\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(ComposedComponent, this.convertProps(this.props));\n      }\n    }]);\n\n    return FlipMovePropConverter;\n  }(_react.Component), _class.defaultProps = {\n    easing: 'ease-in-out',\n    duration: 350,\n    delay: 0,\n    staggerDurationBy: 0,\n    staggerDelayBy: 0,\n    typeName: 'div',\n    enterAnimation: _enterLeavePresets.defaultPreset,\n    leaveAnimation: _enterLeavePresets.defaultPreset,\n    disableAllAnimations: false,\n    getPosition: function getPosition(node) {\n      return node.getBoundingClientRect();\n    },\n    maintainContainerHeight: false,\n    verticalAlignment: 'top'\n  }, _temp;\n}\n\nexports.default = propConverter;\nmodule.exports = exports['default'];\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 147 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nfunction warnOnce(msg) {\n  var hasWarned = false;\n  return function () {\n    if (!hasWarned) {\n      console.warn(msg);\n      hasWarned = true;\n    }\n  };\n}\nvar statelessFunctionalComponentSupplied = exports.statelessFunctionalComponentSupplied = warnOnce('\\n>> Error, via react-flip-move <<\\n\\nYou provided a stateless functional component as a child to <FlipMove>. Unfortunately, SFCs aren\\'t supported, because Flip Move needs access to the backing instances via refs, and SFCs don\\'t have a public instance that holds that info.\\n\\nPlease wrap your components in a native element (eg. <div>), or a non-functional component.\\n');\n\nvar invalidTypeForTimingProp = exports.invalidTypeForTimingProp = function invalidTypeForTimingProp(args) {\n  return console.error('\\n>> Error, via react-flip-move <<\\n\\nThe prop you provided for \\'' + args.prop + '\\' is invalid. It needs to be a positive integer, or a string that can be resolved to a number. The value you provided is \\'' + args.value + '\\'.\\n\\nAs a result,  the default value for this parameter will be used, which is \\'' + args.defaultValue + '\\'.\\n');\n};\n\nvar deprecatedDisableAnimations = exports.deprecatedDisableAnimations = warnOnce('\\n>> Warning, via react-flip-move <<\\n\\nThe \\'disableAnimations\\' prop you provided is deprecated. Please switch to use \\'disableAllAnimations\\'.\\n\\nThis will become a silent error in future versions of react-flip-move.\\n');\n\nvar invalidEnterLeavePreset = exports.invalidEnterLeavePreset = function invalidEnterLeavePreset(args) {\n  return console.error('\\n>> Error, via react-flip-move <<\\n\\nThe enter/leave preset you provided is invalid. We don\\'t currently have a \\'' + args.value + ' preset.\\'\\n\\nAcceptable values are ' + args.acceptableValues + '. The default value of \\'' + args.defaultValue + '\\' will be used.\\n');\n};\n\n/***/ }),\n/* 148 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar enterPresets = exports.enterPresets = {\n  elevator: {\n    from: { transform: 'scale(0)', opacity: '0' },\n    to: { transform: '', opacity: '' }\n  },\n  fade: {\n    from: { opacity: '0' },\n    to: { opacity: '' }\n  },\n  accordionVertical: {\n    from: { transform: 'scaleY(0)', transformOrigin: 'center top' },\n    to: { transform: '', transformOrigin: 'center top' }\n  },\n  accordionHorizontal: {\n    from: { transform: 'scaleX(0)', transformOrigin: 'left center' },\n    to: { transform: '', transformOrigin: 'left center' }\n  },\n  none: null\n};\n/**\n * React Flip Move | enterLeavePresets\n * (c) 2016-present Joshua Comeau\n *\n * This contains the master list of presets available for enter/leave animations,\n * along with the mapping between preset and styles.\n */\nvar leavePresets = exports.leavePresets = {\n  elevator: {\n    from: { transform: 'scale(1)', opacity: '1' },\n    to: { transform: 'scale(0)', opacity: '0' }\n  },\n  fade: {\n    from: { opacity: '1' },\n    to: { opacity: '0' }\n  },\n  accordionVertical: {\n    from: { transform: 'scaleY(1)', transformOrigin: 'center top' },\n    to: { transform: 'scaleY(0)', transformOrigin: 'center top' }\n  },\n  accordionHorizontal: {\n    from: { transform: 'scaleX(1)', transformOrigin: 'left center' },\n    to: { transform: 'scaleX(0)', transformOrigin: 'left center' }\n  },\n  none: null\n};\n\n// For now, appearPresets will be identical to enterPresets.\n// Assigning a custom export in case we ever want to add appear-specific ones.\nvar appearPresets = exports.appearPresets = enterPresets;\n\n// Embarrassingly enough, v2.0 launched with typo'ed preset names.\n// To avoid penning a new major version over something so inconsequential,\n// we're supporting both spellings. In a future version, these alternatives\n// may be deprecated.\n// $FlowFixMe\nenterPresets.accordianVertical = enterPresets.accordionVertical;\n// $FlowFixMe\nenterPresets.accordianHorizontal = enterPresets.accordionHorizontal;\n// $FlowFixMe\nleavePresets.accordianVertical = leavePresets.accordionVertical;\n// $FlowFixMe\nleavePresets.accordianHorizontal = leavePresets.accordionHorizontal;\n\nvar defaultPreset = exports.defaultPreset = 'elevator';\nvar disablePreset = exports.disablePreset = 'none';\n\n/***/ }),\n/* 149 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTransitionString = exports.getNativeNode = exports.updateHeightPlaceholder = exports.removeNodeFromDOMFlow = exports.getPositionDelta = exports.getRelativeBoundingBox = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n *\n * These methods read from and write to the DOM.\n * They almost always have side effects, and will hopefully become the\n * only spot in the codebase with impure functions.\n */\n\n\nexports.applyStylesToDOMNode = applyStylesToDOMNode;\nexports.whichTransitionEvent = whichTransitionEvent;\n\nvar _reactDom = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction applyStylesToDOMNode(_ref) {\n  var domNode = _ref.domNode,\n      styles = _ref.styles;\n\n  // Can't just do an object merge because domNode.styles is no regular object.\n  // Need to do it this way for the engine to fire its `set` listeners.\n  Object.keys(styles).forEach(function (key) {\n    domNode.style.setProperty((0, _helpers.hyphenate)(key), styles[key]);\n  });\n}\n\n// Modified from Modernizr\nfunction whichTransitionEvent() {\n  var transitions = {\n    transition: 'transitionend',\n    '-o-transition': 'oTransitionEnd',\n    '-moz-transition': 'transitionend',\n    '-webkit-transition': 'webkitTransitionEnd'\n  };\n\n  // If we're running in a browserless environment (eg. SSR), it doesn't apply.\n  // Return a placeholder string, for consistent type return.\n  if (typeof document === 'undefined') return '';\n\n  var el = document.createElement('fakeelement');\n\n  var match = Object.keys(transitions).find(function (t) {\n    return el.style.getPropertyValue(t) !== undefined;\n  });\n\n  // If no `transition` is found, we must be running in a browser so ancient,\n  // React itself won't run. Return an empty string, for consistent type return\n  return match ? transitions[match] : '';\n}\n\nvar getRelativeBoundingBox = exports.getRelativeBoundingBox = function getRelativeBoundingBox(_ref2) {\n  var childDomNode = _ref2.childDomNode,\n      parentDomNode = _ref2.parentDomNode,\n      getPosition = _ref2.getPosition;\n\n  var parentBox = getPosition(parentDomNode);\n\n  var _getPosition = getPosition(childDomNode),\n      top = _getPosition.top,\n      left = _getPosition.left,\n      right = _getPosition.right,\n      bottom = _getPosition.bottom,\n      width = _getPosition.width,\n      height = _getPosition.height;\n\n  return {\n    top: top - parentBox.top,\n    left: left - parentBox.left,\n    right: parentBox.right - right,\n    bottom: parentBox.bottom - bottom,\n    width: width,\n    height: height\n  };\n};\n\n/** getPositionDelta\n * This method returns the delta between two bounding boxes, to figure out\n * how many pixels on each axis the element has moved.\n *\n */\nvar getPositionDelta = exports.getPositionDelta = function getPositionDelta(_ref3) {\n  var childDomNode = _ref3.childDomNode,\n      childBoundingBox = _ref3.childBoundingBox,\n      parentBoundingBox = _ref3.parentBoundingBox,\n      getPosition = _ref3.getPosition;\n\n  // TEMP: A mystery bug is sometimes causing unnecessary boundingBoxes to\n  var defaultBox = { top: 0, left: 0, right: 0, bottom: 0, height: 0, width: 0 };\n\n  // Our old box is its last calculated position, derived on mount or at the\n  // start of the previous animation.\n  var oldRelativeBox = childBoundingBox || defaultBox;\n  var parentBox = parentBoundingBox || defaultBox;\n\n  // Our new box is the new final resting place: Where we expect it to wind up\n  // after the animation. First we get the box in absolute terms (AKA relative\n  // to the viewport), and then we calculate its relative box (relative to the\n  // parent container)\n  var newAbsoluteBox = getPosition(childDomNode);\n  var newRelativeBox = {\n    top: newAbsoluteBox.top - parentBox.top,\n    left: newAbsoluteBox.left - parentBox.left\n  };\n\n  return [oldRelativeBox.left - newRelativeBox.left, oldRelativeBox.top - newRelativeBox.top];\n};\n\n/** removeNodeFromDOMFlow\n * This method does something very sneaky: it removes a DOM node from the\n * document flow, but without actually changing its on-screen position.\n *\n * It works by calculating where the node is, and then applying styles\n * so that it winds up being positioned absolutely, but in exactly the\n * same place.\n *\n * This is a vital part of the FLIP technique.\n */\nvar removeNodeFromDOMFlow = exports.removeNodeFromDOMFlow = function removeNodeFromDOMFlow(childData, verticalAlignment) {\n  var domNode = childData.domNode,\n      boundingBox = childData.boundingBox;\n\n\n  if (!domNode || !boundingBox) {\n    return;\n  }\n\n  // For this to work, we have to offset any given `margin`.\n  var computed = window.getComputedStyle(domNode);\n\n  // We need to clean up margins, by converting and removing suffix:\n  // eg. '21px' -> 21\n  var marginAttrs = ['margin-top', 'margin-left', 'margin-right'];\n  var margins = marginAttrs.reduce(function (acc, margin) {\n    var propertyVal = computed.getPropertyValue(margin);\n\n    return _extends({}, acc, _defineProperty({}, margin, Number(propertyVal.replace('px', ''))));\n  }, {});\n\n  // If we're bottom-aligned, we need to add the height of the child to its\n  // top offset. This is because, when the container is bottom-aligned, its\n  // height shrinks from the top, not the bottom. We're removing this node\n  // from the flow, so the top is going to drop by its height.\n  var topOffset = verticalAlignment === 'bottom' ? boundingBox.top - boundingBox.height : boundingBox.top;\n\n  var styles = {\n    position: 'absolute',\n    top: topOffset - margins['margin-top'] + 'px',\n    left: boundingBox.left - margins['margin-left'] + 'px',\n    right: boundingBox.right - margins['margin-right'] + 'px'\n  };\n\n  applyStylesToDOMNode({ domNode: domNode, styles: styles });\n};\n\n/** updateHeightPlaceholder\n * An optional property to FlipMove is a `maintainContainerHeight` boolean.\n * This property creates a node that fills space, so that the parent\n * container doesn't collapse when its children are removed from the\n * document flow.\n */\nvar updateHeightPlaceholder = exports.updateHeightPlaceholder = function updateHeightPlaceholder(_ref4) {\n  var domNode = _ref4.domNode,\n      parentData = _ref4.parentData,\n      getPosition = _ref4.getPosition;\n\n  var parentDomNode = parentData.domNode;\n  var parentBoundingBox = parentData.boundingBox;\n\n  if (!parentDomNode || !parentBoundingBox) {\n    return;\n  }\n\n  // We need to find the height of the container *without* the placeholder.\n  // Since it's possible that the placeholder might already be present,\n  // we first set its height to 0.\n  // This allows the container to collapse down to the size of just its\n  // content (plus container padding or borders if any).\n  applyStylesToDOMNode({ domNode: domNode, styles: { height: '0' } });\n\n  // Find the distance by which the container would be collapsed by elements\n  // leaving. We compare the freshly-available parent height with the original,\n  // cached container height.\n  var originalParentHeight = parentBoundingBox.height;\n  var collapsedParentHeight = getPosition(parentDomNode).height;\n  var reductionInHeight = originalParentHeight - collapsedParentHeight;\n\n  // If the container has become shorter, update the padding element's\n  // height to take up the difference. Otherwise set its height to zero,\n  // so that it has no effect.\n  var styles = {\n    height: reductionInHeight > 0 ? reductionInHeight + 'px' : '0'\n  };\n\n  applyStylesToDOMNode({ domNode: domNode, styles: styles });\n};\n\nvar getNativeNode = exports.getNativeNode = function getNativeNode(element) {\n  // When running in a windowless environment, abort!\n  if (typeof HTMLElement === 'undefined') {\n    return null;\n  }\n\n  // `element` may already be a native node.\n  if (element instanceof HTMLElement) {\n    return element;\n  }\n\n  // While ReactDOM's `findDOMNode` is discouraged, it's the only\n  // publicly-exposed way to find the underlying DOM node for\n  // composite components.\n  var foundNode = (0, _reactDom.findDOMNode)(element);\n\n  if (!(foundNode instanceof HTMLElement)) {\n    // Text nodes are not supported\n    return null;\n  }\n\n  return foundNode;\n};\n\nvar createTransitionString = exports.createTransitionString = function createTransitionString(index, props) {\n  var delay = props.delay,\n      duration = props.duration;\n  var staggerDurationBy = props.staggerDurationBy,\n      staggerDelayBy = props.staggerDelayBy,\n      easing = props.easing;\n\n\n  delay += index * staggerDelayBy;\n  duration += index * staggerDurationBy;\n\n  var cssProperties = ['transform', 'opacity'];\n\n  return cssProperties.map(function (prop) {\n    return prop + ' ' + duration + 'ms ' + easing + ' ' + delay + 'ms';\n  }).join(', ');\n};\n\n/***/ }),\n/* 150 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\tAutosize 3.0.21\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tfactory(exports, module);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports, mod);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (exports, module) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : (function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'delete': function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function (name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = ta.clientWidth;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tvar originalHeight = ta.style.height;\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = 'auto';\n\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\n\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\tta.style.height = originalHeight;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tta.style.height = endHeight + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that\n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight !== styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = (function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap['delete'](ta);\n\t\t}).bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function (el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\tmodule.exports = autosize;\n});\n\n/***/ }),\n/* 151 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (language) {\n  return new _polyglot2.default({\n    phrases: i18nMap[language] || i18nMap.en,\n    locale: language\n  });\n};\n\nvar _polyglot = __webpack_require__(152);\n\nvar _polyglot2 = _interopRequireDefault(_polyglot);\n\nvar _zhCN = __webpack_require__(153);\n\nvar _zhCN2 = _interopRequireDefault(_zhCN);\n\nvar _zhTW = __webpack_require__(154);\n\nvar _zhTW2 = _interopRequireDefault(_zhTW);\n\nvar _en = __webpack_require__(155);\n\nvar _en2 = _interopRequireDefault(_en);\n\nvar _esES = __webpack_require__(156);\n\nvar _esES2 = _interopRequireDefault(_esES);\n\nvar _fr = __webpack_require__(157);\n\nvar _fr2 = _interopRequireDefault(_fr);\n\nvar _ru = __webpack_require__(158);\n\nvar _ru2 = _interopRequireDefault(_ru);\n\nvar _de = __webpack_require__(159);\n\nvar _de2 = _interopRequireDefault(_de);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar i18nMap = {\n  'zh': _zhCN2.default,\n  'zh-CN': _zhCN2.default,\n  'zh-TW': _zhTW2.default,\n  'en': _en2.default,\n  'es-ES': _esES2.default,\n  'fr': _fr2.default,\n  'ru': _ru2.default,\n  'de': _de2.default\n};\n\n/***/ }),\n/* 152 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     (c) 2012 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n\n(function(root, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n      return factory(root);\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.Polyglot = factory(root);\n  }\n}(this, function(root) {\n  'use strict';\n\n  // ### Polyglot class constructor\n  function Polyglot(options) {\n    options = options || {};\n    this.phrases = {};\n    this.extend(options.phrases || {});\n    this.currentLocale = options.locale || 'en';\n    this.allowMissing = !!options.allowMissing;\n    this.warn = options.warn || warn;\n  }\n\n  // ### Version\n  Polyglot.VERSION = '0.4.3';\n\n  // ### polyglot.locale([locale])\n  //\n  // Get or set locale. Internally, Polyglot only uses locale for pluralization.\n  Polyglot.prototype.locale = function(newLocale) {\n    if (newLocale) this.currentLocale = newLocale;\n    return this.currentLocale;\n  };\n\n  // ### polyglot.extend(phrases)\n  //\n  // Use `extend` to tell Polyglot how to translate a given key.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The key can be any string.  Feel free to call `extend` multiple times;\n  // it will override any phrases with the same key, but leave existing phrases\n  // untouched.\n  //\n  // It is also possible to pass nested phrase objects, which get flattened\n  // into an object with the nested keys concatenated using dot notation.\n  //\n  //     polyglot.extend({\n  //       \"nav\": {\n  //         \"hello\": \"Hello\",\n  //         \"hello_name\": \"Hello, %{name}\",\n  //         \"sidebar\": {\n  //           \"welcome\": \"Welcome\"\n  //         }\n  //       }\n  //     });\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}',\n  //     //   'nav.sidebar.welcome': 'Welcome'\n  //     // }\n  //\n  // `extend` accepts an optional second argument, `prefix`, which can be used\n  // to prefix every key in the phrases object with some string, using dot\n  // notation.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     }, \"nav\");\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}'\n  //     // }\n  //\n  // This feature is used internally to support nested phrase objects.\n  Polyglot.prototype.extend = function(morePhrases, prefix) {\n    var phrase;\n\n    for (var key in morePhrases) {\n      if (morePhrases.hasOwnProperty(key)) {\n        phrase = morePhrases[key];\n        if (prefix) key = prefix + '.' + key;\n        if (typeof phrase === 'object') {\n          this.extend(phrase, key);\n        } else {\n          this.phrases[key] = phrase;\n        }\n      }\n    }\n  };\n\n  // ### polyglot.clear()\n  //\n  // Clears all phrases. Useful for special cases, such as freeing\n  // up memory if you have lots of phrases but no longer need to\n  // perform any translation. Also used internally by `replace`.\n  Polyglot.prototype.clear = function() {\n    this.phrases = {};\n  };\n\n  // ### polyglot.replace(phrases)\n  //\n  // Completely replace the existing phrases with a new set of phrases.\n  // Normally, just use `extend` to add more phrases, but under certain\n  // circumstances, you may want to make sure no old phrases are lying around.\n  Polyglot.prototype.replace = function(newPhrases) {\n    this.clear();\n    this.extend(newPhrases);\n  };\n\n\n  // ### polyglot.t(key, options)\n  //\n  // The most-used method. Provide a key, and `t` will return the\n  // phrase.\n  //\n  //     polyglot.t(\"hello\");\n  //     => \"Hello\"\n  //\n  // The phrase value is provided first by a call to `polyglot.extend()` or\n  // `polyglot.replace()`.\n  //\n  // Pass in an object as the second argument to perform interpolation.\n  //\n  //     polyglot.t(\"hello_name\", {name: \"Spike\"});\n  //     => \"Hello, Spike\"\n  //\n  // If you like, you can provide a default value in case the phrase is missing.\n  // Use the special option key \"_\" to specify a default.\n  //\n  //     polyglot.t(\"i_like_to_write_in_language\", {\n  //       _: \"I like to write in %{language}.\",\n  //       language: \"JavaScript\"\n  //     });\n  //     => \"I like to write in JavaScript.\"\n  //\n  Polyglot.prototype.t = function(key, options) {\n    var phrase, result;\n    options = options == null ? {} : options;\n    // allow number as a pluralization shortcut\n    if (typeof options === 'number') {\n      options = {smart_count: options};\n    }\n    if (typeof this.phrases[key] === 'string') {\n      phrase = this.phrases[key];\n    } else if (typeof options._ === 'string') {\n      phrase = options._;\n    } else if (this.allowMissing) {\n      phrase = key;\n    } else {\n      this.warn('Missing translation for key: \"'+key+'\"');\n      result = key;\n    }\n    if (typeof phrase === 'string') {\n      options = clone(options);\n      result = choosePluralForm(phrase, this.currentLocale, options.smart_count);\n      result = interpolate(result, options);\n    }\n    return result;\n  };\n\n\n  // ### polyglot.has(key)\n  //\n  // Check if polyglot has a translation for given key\n  Polyglot.prototype.has = function(key) {\n    return key in this.phrases;\n  };\n\n\n  // #### Pluralization methods\n  // The string that separates the different phrase possibilities.\n  var delimeter = '||||';\n\n  // Mapping from pluralization group plural logic.\n  var pluralTypes = {\n    chinese:   function(n) { return 0; },\n    german:    function(n) { return n !== 1 ? 1 : 0; },\n    french:    function(n) { return n > 1 ? 1 : 0; },\n    russian:   function(n) { return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2; },\n    czech:     function(n) { return (n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2; },\n    polish:    function(n) { return (n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2); },\n    icelandic: function(n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; }\n  };\n\n  // Mapping from pluralization group to individual locales.\n  var pluralTypeToLanguages = {\n    chinese:   ['fa', 'id', 'ja', 'ko', 'lo', 'ms', 'th', 'tr', 'zh'],\n    german:    ['da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hu', 'it', 'nl', 'no', 'pt', 'sv'],\n    french:    ['fr', 'tl', 'pt-br'],\n    russian:   ['hr', 'ru'],\n    czech:     ['cs'],\n    polish:    ['pl'],\n    icelandic: ['is']\n  };\n\n  function langToTypeMap(mapping) {\n    var type, langs, l, ret = {};\n    for (type in mapping) {\n      if (mapping.hasOwnProperty(type)) {\n        langs = mapping[type];\n        for (l in langs) {\n          ret[langs[l]] = type;\n        }\n      }\n    }\n    return ret;\n  }\n\n  // Trim a string.\n  function trim(str){\n    var trimRe = /^\\s+|\\s+$/g;\n    return str.replace(trimRe, '');\n  }\n\n  // Based on a phrase text that contains `n` plural forms separated\n  // by `delimeter`, a `locale`, and a `count`, choose the correct\n  // plural form, or none if `count` is `null`.\n  function choosePluralForm(text, locale, count){\n    var ret, texts, chosenText;\n    if (count != null && text) {\n      texts = text.split(delimeter);\n      chosenText = texts[pluralTypeIndex(locale, count)] || texts[0];\n      ret = trim(chosenText);\n    } else {\n      ret = text;\n    }\n    return ret;\n  }\n\n  function pluralTypeName(locale) {\n    var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n    return langToPluralType[locale] || langToPluralType.en;\n  }\n\n  function pluralTypeIndex(locale, count) {\n    return pluralTypes[pluralTypeName(locale)](count);\n  }\n\n  // ### interpolate\n  //\n  // Does the dirty work. Creates a `RegExp` object for each\n  // interpolation placeholder.\n  function interpolate(phrase, options) {\n    for (var arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = phrase.replace(new RegExp('%\\\\{'+arg+'\\\\}', 'g'), options[arg]);\n      }\n    }\n    return phrase;\n  }\n\n  // ### warn\n  //\n  // Provides a warning in the console if a phrase key is missing.\n  function warn(message) {\n    root.console && root.console.warn && root.console.warn('WARNING: ' + message);\n  }\n\n  // ### clone\n  //\n  // Clone an object.\n  function clone(source) {\n    var ret = {};\n    for (var prop in source) {\n      ret[prop] = source[prop];\n    }\n    return ret;\n  }\n\n  return Polyglot;\n}));\n\n\n/***/ }),\n/* 153 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalk 加载中 ...\",\"no-found-related\":\"未找到相关的 %{link} 进行评论\",\"please-contact\":\"请联系 %{user} 初始化创建\",\"init-issue\":\"初始化 Issue\",\"leave-a-comment\":\"说点什么\",\"preview\":\"预览\",\"edit\":\"编辑\",\"comment\":\"评论\",\"support-markdown\":\"支持 Markdown 语法\",\"login-with-github\":\"使用 GitHub 登录\",\"first-comment-person\":\"来做第一个留言的人吧！\",\"commented\":\"发表于\",\"load-more\":\"加载更多\",\"counts\":\"%{counts} 条评论\",\"sort-asc\":\"从旧到新排序\",\"sort-desc\":\"从新到旧排序\",\"logout\":\"注销\",\"anonymous\":\"未登录用户\"}\n\n/***/ }),\n/* 154 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalk 載入中…\",\"no-found-related\":\"未找到相關的 %{link}\",\"please-contact\":\"請聯絡 %{user} 初始化評論\",\"init-issue\":\"初始化 Issue\",\"leave-a-comment\":\"寫點什麼\",\"preview\":\"預覽\",\"edit\":\"編輯\",\"comment\":\"評論\",\"support-markdown\":\"支援 Markdown 語法\",\"login-with-github\":\"使用 GitHub 登入\",\"first-comment-person\":\"成為首個留言的人吧！\",\"commented\":\"評論於\",\"load-more\":\"載入更多\",\"counts\":\"%{counts} 筆評論\",\"sort-asc\":\"從舊至新排序\",\"sort-desc\":\"從新至舊排序\",\"logout\":\"登出\",\"anonymous\":\"訪客\"}\n\n/***/ }),\n/* 155 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Related %{link} not found\",\"please-contact\":\"Please contact %{user} to initialize the comment\",\"init-issue\":\"Init Issue\",\"leave-a-comment\":\"Leave a comment\",\"preview\":\"Preview\",\"edit\":\"Edit\",\"comment\":\"Comment\",\"support-markdown\":\"Markdown is supported\",\"login-with-github\":\"Login with GitHub\",\"first-comment-person\":\"Be the first person to leave a comment!\",\"commented\":\"commented\",\"load-more\":\"Load more\",\"counts\":\"%{counts} comment |||| %{counts} comments\",\"sort-asc\":\"Sort by Oldest\",\"sort-desc\":\"Sort by Latest\",\"logout\":\"Logout\",\"anonymous\":\"Anonymous\"}\n\n/***/ }),\n/* 156 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Link %{link} no encontrado\",\"please-contact\":\"Por favor contacta con %{user} para inicializar el comentario\",\"init-issue\":\"Iniciar Issue\",\"leave-a-comment\":\"Deja un comentario\",\"preview\":\"Avance\",\"edit\":\"Editar\",\"comment\":\"Comentario\",\"support-markdown\":\"Markdown es soportado\",\"login-with-github\":\"Entrar con GitHub\",\"first-comment-person\":\"Sé el primero en dejar un comentario!\",\"commented\":\"comentó\",\"load-more\":\"Cargar más\",\"counts\":\"%{counts} comentario |||| %{counts} comentarios\",\"sort-asc\":\"Ordenar por Antiguos\",\"sort-desc\":\"Ordenar por Recientes\",\"logout\":\"Salir\",\"anonymous\":\"Anónimo\"}\n\n/***/ }),\n/* 157 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Lien %{link} non trouvé\",\"please-contact\":\"S’il vous plaît contactez %{user} pour initialiser les commentaires\",\"init-issue\":\"Initialisation des issues\",\"leave-a-comment\":\"Laisser un commentaire\",\"preview\":\"Aperçu\",\"edit\":\"Modifier\",\"comment\":\"Commentaire\",\"support-markdown\":\"Markdown est supporté\",\"login-with-github\":\"Se connecter avec GitHub\",\"first-comment-person\":\"Être le premier à laisser un commentaire !\",\"commented\":\"commenter\",\"load-more\":\"Charger plus\",\"counts\":\"%{counts} commentaire |||| %{counts} commentaires\",\"sort-asc\":\"Trier par plus ancien\",\"sort-desc\":\"Trier par plus récent\",\"logout\":\"Déconnexion\",\"anonymous\":\"Anonyme\"}\n\n/***/ }),\n/* 158 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Связанные %{link} не найдены\",\"please-contact\":\"Пожалуйста, свяжитесь с %{user} чтобы инициализировать комментарий\",\"init-issue\":\"Выпуск инициализации\",\"leave-a-comment\":\"Оставить комментарий\",\"preview\":\"Предварительный просмотр\",\"edit\":\"Pедактировать\",\"comment\":\"Комментарий\",\"support-markdown\":\"Поддерживается Markdown\",\"login-with-github\":\"Вход через GitHub\",\"first-comment-person\":\"Будьте первым, кто оставил комментарий\",\"commented\":\"прокомментированный\",\"load-more\":\"Загрузить ещё\",\"counts\":\"%{counts} комментарий |||| %{counts} комментарьев\",\"sort-asc\":\"Сортировать по старым\",\"sort-desc\":\"Сортировать по последним\",\"logout\":\"Выход\",\"anonymous\":\"Анонимный\"}\n\n/***/ }),\n/* 159 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Zugehöriger %{link} nicht gefunden\",\"please-contact\":\"Bitte kontaktiere %{user} um den Kommentar zu initialisieren\",\"init-issue\":\"Initialisiere Issue\",\"leave-a-comment\":\"Hinterlasse einen Kommentar\",\"preview\":\"Vorschau\",\"edit\":\"Editieren\",\"comment\":\"Kommentieren\",\"support-markdown\":\"Markdown wird unterstützt\",\"login-with-github\":\"Mit GitHub-Account anmelden\",\"first-comment-person\":\"Sei die erste Person, welche einen Kommentar hinterlässt!\",\"commented\":\"kommentierte\",\"load-more\":\"Zeige mehr\",\"counts\":\"%{counts} Kommentar |||| %{counts} Kommentare\",\"sort-asc\":\"Älteste zuerst\",\"sort-desc\":\"Neuste zuerst\",\"logout\":\"Abmelden\",\"anonymous\":\"Anonym\"}\n\n/***/ }),\n/* 160 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 161 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(162), __esModule: true };\n\n/***/ }),\n/* 162 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(163);\nmodule.exports = __webpack_require__(0).Object.keys;\n\n\n/***/ }),\n/* 163 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(17);\nvar $keys = __webpack_require__(22);\n\n__webpack_require__(65)('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 164 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _isIterable2 = __webpack_require__(165);\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = __webpack_require__(168);\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n/***/ }),\n/* 165 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(166), __esModule: true };\n\n/***/ }),\n/* 166 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(27);\n__webpack_require__(20);\nmodule.exports = __webpack_require__(167);\n\n\n/***/ }),\n/* 167 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(41);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar Iterators = __webpack_require__(15);\nmodule.exports = __webpack_require__(0).isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/***/ }),\n/* 168 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(169), __esModule: true };\n\n/***/ }),\n/* 169 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(27);\n__webpack_require__(20);\nmodule.exports = __webpack_require__(170);\n\n\n/***/ }),\n/* 170 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar get = __webpack_require__(42);\nmodule.exports = __webpack_require__(0).getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/***/ }),\n/* 171 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(172);\n\n/***/ }),\n/* 172 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar bind = __webpack_require__(72);\nvar Axios = __webpack_require__(173);\nvar mergeConfig = __webpack_require__(78);\nvar defaults = __webpack_require__(75);\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = __webpack_require__(79);\naxios.CancelToken = __webpack_require__(186);\naxios.isCancel = __webpack_require__(74);\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = __webpack_require__(187);\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n/***/ }),\n/* 173 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar buildURL = __webpack_require__(73);\nvar InterceptorManager = __webpack_require__(174);\nvar dispatchRequest = __webpack_require__(175);\nvar mergeConfig = __webpack_require__(78);\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n/***/ }),\n/* 174 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n/***/ }),\n/* 175 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar transformData = __webpack_require__(176);\nvar isCancel = __webpack_require__(74);\nvar defaults = __webpack_require__(75);\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n/***/ }),\n/* 176 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n/***/ }),\n/* 177 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n/***/ }),\n/* 178 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar createError = __webpack_require__(77);\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n\n\n/***/ }),\n/* 179 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n\n\n/***/ }),\n/* 180 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isAbsoluteURL = __webpack_require__(181);\nvar combineURLs = __webpack_require__(182);\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n\n\n/***/ }),\n/* 181 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n/***/ }),\n/* 182 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n\n\n/***/ }),\n/* 183 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n\n\n/***/ }),\n/* 184 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n\n\n/***/ }),\n/* 185 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n\n\n/***/ }),\n/* 186 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Cancel = __webpack_require__(79);\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n/***/ }),\n/* 187 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n/***/ }),\n/* 188 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      getRef = _ref.getRef,\n      onClick = _ref.onClick,\n      onMouseDown = _ref.onMouseDown,\n      text = _ref.text,\n      isLoading = _ref.isLoading;\n  return _react2.default.createElement(\n    \"button\",\n    {\n      ref: function ref(el) {\n        return getRef && getRef(el);\n      },\n      className: \"gt-btn \" + className,\n      onClick: onClick,\n      onMouseDown: onMouseDown },\n    _react2.default.createElement(\n      \"span\",\n      { className: \"gt-btn-text\" },\n      text\n    ),\n    isLoading && _react2.default.createElement(\"span\", { className: \"gt-btn-loading gt-spinner\" })\n  );\n};\n\n/***/ }),\n/* 189 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      onClick = _ref.onClick,\n      text = _ref.text;\n  return _react2.default.createElement(\n    \"a\",\n    { className: \"gt-action \" + className, onClick: onClick },\n    _react2.default.createElement(\n      \"span\",\n      { className: \"gt-action-text\" },\n      text\n    )\n  );\n};\n\n/***/ }),\n/* 190 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(64);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(66);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(70);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _avatar = __webpack_require__(80);\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nvar _svg = __webpack_require__(81);\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _distance_in_words_to_now = __webpack_require__(199);\n\nvar _distance_in_words_to_now2 = _interopRequireDefault(_distance_in_words_to_now);\n\nvar _index = __webpack_require__(212);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(213);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _index5 = __webpack_require__(214);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _index7 = __webpack_require__(215);\n\nvar _index8 = _interopRequireDefault(_index7);\n\nvar _index9 = __webpack_require__(216);\n\nvar _index10 = _interopRequireDefault(_index9);\n\n__webpack_require__(217);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ZHCN = (0, _index2.default)();\nvar ZHTW = (0, _index4.default)();\nvar ES = (0, _index6.default)();\nvar FR = (0, _index8.default)();\nvar RU = (0, _index10.default)();\n\nif (typeof window !== 'undefined') {\n  window.GT_i18n_distanceInWordsLocaleMap = {\n    zh: ZHCN,\n    'zh-CN': ZHCN,\n    'zh-TW': ZHTW,\n    'es-ES': ES,\n    fr: FR,\n    ru: RU\n  };\n}\n\nvar Comment = function (_Component) {\n  (0, _inherits3.default)(Comment, _Component);\n\n  function Comment() {\n    (0, _classCallCheck3.default)(this, Comment);\n    return (0, _possibleConstructorReturn3.default)(this, (Comment.__proto__ || (0, _getPrototypeOf2.default)(Comment)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Comment, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var comment = this.node;\n      var emailResponse = comment.querySelector('.email-hidden-toggle>a');\n      if (emailResponse) {\n        emailResponse.addEventListener('click', function (e) {\n          e.preventDefault();\n          comment.querySelector('.email-hidden-reply').classList.toggle('expanded');\n        }, true);\n      }\n    }\n  }, {\n    key: 'handleImageErrored',\n    value: function handleImageErrored(obj) {\n      obj.target.src = \"https://cdn.jsdelivr.net/npm/gitalk@1/src/assets/icon/github.svg\";\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          comment = _props.comment,\n          user = _props.user,\n          language = _props.language,\n          _props$commentedText = _props.commentedText,\n          commentedText = _props$commentedText === undefined ? '' : _props$commentedText,\n          _props$admin = _props.admin,\n          admin = _props$admin === undefined ? [] : _props$admin,\n          replyCallback = _props.replyCallback,\n          likeCallback = _props.likeCallback;\n\n      var enableEdit = user && comment.user.login === user.login;\n      var isAdmin = ~[].concat(admin).map(function (a) {\n        return a.toLowerCase();\n      }).indexOf(comment.user.login.toLowerCase());\n      var reactions = comment.reactions;\n\n      var reactionTotalCount = '';\n      if (reactions && reactions.totalCount) {\n        reactionTotalCount = reactions.totalCount;\n        if (reactions.totalCount === 100 && reactions.pageInfo && reactions.pageInfo.hasNextPage) {\n          reactionTotalCount = '100+';\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { ref: function ref(node) {\n            _this2.node = node;\n          }, className: 'gt-comment ' + (isAdmin ? 'gt-comment-admin' : '') },\n        _react2.default.createElement(_avatar2.default, {\n          className: 'gt-comment-avatar',\n          src: comment.user && comment.user.avatar_url,\n          alt: comment.user && comment.user.login,\n          onError: this.handleImageErrored.bind(this)\n        }),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-comment-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-comment-header' },\n            _react2.default.createElement('div', { className: 'gt-comment-block-' + (user ? '2' : '1') }),\n            _react2.default.createElement(\n              'a',\n              {\n                className: 'gt-comment-username',\n                href: comment.user && comment.user.html_url\n              },\n              comment.user && comment.user.login\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-comment-text' },\n              commentedText\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-comment-date' },\n              (0, _distance_in_words_to_now2.default)(comment.created_at, {\n                addSuffix: true,\n                locale: {\n                  distanceInWords: window.GT_i18n_distanceInWordsLocaleMap[language]\n                }\n              })\n            ),\n            reactions && _react2.default.createElement(\n              'a',\n              { className: 'gt-comment-like', title: 'Like', onClick: likeCallback },\n              reactions.viewerHasReacted ? _react2.default.createElement(_svg2.default, {\n                className: 'gt-ico-heart',\n                name: 'heart_on',\n                text: reactionTotalCount\n              }) : _react2.default.createElement(_svg2.default, {\n                className: 'gt-ico-heart',\n                name: 'heart',\n                text: reactionTotalCount\n              })\n            ),\n            enableEdit ? _react2.default.createElement(\n              'a',\n              {\n                href: comment.html_url,\n                className: 'gt-comment-edit',\n                title: 'Edit',\n                target: '_blank'\n              },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-edit', name: 'edit' })\n            ) : _react2.default.createElement(\n              'a',\n              { className: 'gt-comment-reply', title: 'Reply', onClick: replyCallback },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-reply', name: 'reply' })\n            )\n          ),\n          _react2.default.createElement('div', {\n            className: 'gt-comment-body markdown-body',\n            dangerouslySetInnerHTML: {\n              __html: comment.body_html\n            }\n          })\n        )\n      );\n    }\n  }]);\n  return Comment;\n}(_react.Component);\n\nexports.default = Comment;\n\n/***/ }),\n/* 191 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./arrow_down.svg\": 192,\n\t\"./edit.svg\": 193,\n\t\"./github.svg\": 194,\n\t\"./heart.svg\": 195,\n\t\"./heart_on.svg\": 196,\n\t\"./reply.svg\": 197,\n\t\"./tip.svg\": 198\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 191;\n\n/***/ }),\n/* 192 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"1619\\\"><path d=\\\"M511.872 676.8c-0.003 0-0.006 0-0.008 0-9.137 0-17.379-3.829-23.21-9.97l-251.277-265.614c-5.415-5.72-8.743-13.464-8.744-21.984 0-17.678 14.33-32.008 32.008-32.008 9.157 0 17.416 3.845 23.25 10.009l228.045 241.103 228.224-241.088c5.855-6.165 14.113-10.001 23.266-10.001 8.516 0 16.256 3.32 21.998 8.736 12.784 12.145 13.36 32.434 1.264 45.233l-251.52 265.6c-5.844 6.155-14.086 9.984-23.223 9.984-0.025 0-0.051 0-0.076 0z\\\" p-id=\\\"1620\\\"></path></svg>\"\n\n/***/ }),\n/* 193 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M785.333333 85.333333C774.666667 85.333333 763.2 90.133333 754.666667 98.666667L682.666667 170.666667 853.333333 341.333333 925.333333 269.333333C942.4 252.266667 942.4 222.133333 925.333333 209.333333L814.666667 98.666667C806.133333 90.133333 796 85.333333 785.333333 85.333333zM640 217.333333 85.333333 768 85.333333 938.666667 256 938.666667 806.666667 384 640 217.333333z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 194 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 195 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n  <path d=\\\"M527.061333 166.528A277.333333 277.333333 0 0 1 1000.618667 362.666667a277.333333 277.333333 0 0 1-81.28 196.138666l-377.173334 377.173334a42.666667 42.666667 0 0 1-60.330666 0l-377.173334-377.173334a277.376 277.376 0 0 1 392.277334-392.277333l15.061333 15.061333 15.061333-15.061333z m286.72 377.173333l45.226667-45.226666a192 192 0 0 0-135.808-327.893334 192 192 0 0 0-135.808 56.32l-45.226667 45.226667a42.666667 42.666667 0 0 1-60.330666 0l-45.226667-45.226667a192.042667 192.042667 0 0 0-271.616 271.573334L512 845.482667l301.781333-301.781334z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 196 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg t=\\\"1512463363724\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n  <path d=\\\"M527.061333 166.528A277.333333 277.333333 0 0 1 1000.618667 362.666667a277.333333 277.333333 0 0 1-81.28 196.138666l-377.173334 377.173334a42.666667 42.666667 0 0 1-60.330666 0l-377.173334-377.173334a277.376 277.376 0 0 1 392.277334-392.277333l15.061333 15.061333 15.061333-15.061333z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 197 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1332 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M529.066665 273.066666 529.066665 0 51.2 477.866666 529.066665 955.733335 529.066665 675.84C870.4 675.84 1109.333335 785.066665 1280 1024 1211.733335 682.666665 1006.933335 341.333334 529.066665 273.066666\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 198 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z\\\"\\n    p-id=\\\"3083\\\"></path>\\n  <path d=\\\"M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z\\\"\\n    p-id=\\\"3084\\\"></path>\\n  <path d=\\\"M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z\\\"\\n    p-id=\\\"3085\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 199 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distanceInWords = __webpack_require__(200)\n\n/**\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * @param {Date|String|Number} date - the given date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result specifies if the second date is earlier or later than the first\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the distance in words\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * var result = distanceInWordsToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * var result = distanceInWordsToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * var result = distanceInWordsToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * var eoLocale = require('date-fns/locale/eo')\n * var result = distanceInWordsToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nfunction distanceInWordsToNow (dirtyDate, dirtyOptions) {\n  return distanceInWords(Date.now(), dirtyDate, dirtyOptions)\n}\n\nmodule.exports = distanceInWordsToNow\n\n\n/***/ }),\n/* 200 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar compareDesc = __webpack_require__(201)\nvar parse = __webpack_require__(18)\nvar differenceInSeconds = __webpack_require__(203)\nvar differenceInMonths = __webpack_require__(205)\nvar enLocale = __webpack_require__(208)\n\nvar MINUTES_IN_DAY = 1440\nvar MINUTES_IN_ALMOST_TWO_DAYS = 2520\nvar MINUTES_IN_MONTH = 43200\nvar MINUTES_IN_TWO_MONTHS = 86400\n\n/**\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @param {Date|String|Number} dateToCompare - the date to compare with\n * @param {Date|String|Number} date - the other date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the distance in words\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * var result = distanceInWords(\n *   new Date(2014, 6, 2),\n *   new Date(2015, 0, 1)\n * )\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * var result = distanceInWords(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * var result = distanceInWords(\n *   new Date(2016, 0, 1),\n *   new Date(2015, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * var eoLocale = require('date-fns/locale/eo')\n * var result = distanceInWords(\n *   new Date(2016, 7, 1),\n *   new Date(2015, 0, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nfunction distanceInWords (dirtyDateToCompare, dirtyDate, dirtyOptions) {\n  var options = dirtyOptions || {}\n\n  var comparison = compareDesc(dirtyDateToCompare, dirtyDate)\n\n  var locale = options.locale\n  var localize = enLocale.distanceInWords.localize\n  if (locale && locale.distanceInWords && locale.distanceInWords.localize) {\n    localize = locale.distanceInWords.localize\n  }\n\n  var localizeOptions = {\n    addSuffix: Boolean(options.addSuffix),\n    comparison: comparison\n  }\n\n  var dateLeft, dateRight\n  if (comparison > 0) {\n    dateLeft = parse(dirtyDateToCompare)\n    dateRight = parse(dirtyDate)\n  } else {\n    dateLeft = parse(dirtyDate)\n    dateRight = parse(dirtyDateToCompare)\n  }\n\n  var seconds = differenceInSeconds(dateRight, dateLeft)\n  var offset = dateRight.getTimezoneOffset() - dateLeft.getTimezoneOffset()\n  var minutes = Math.round(seconds / 60) - offset\n  var months\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options.includeSeconds) {\n      if (seconds < 5) {\n        return localize('lessThanXSeconds', 5, localizeOptions)\n      } else if (seconds < 10) {\n        return localize('lessThanXSeconds', 10, localizeOptions)\n      } else if (seconds < 20) {\n        return localize('lessThanXSeconds', 20, localizeOptions)\n      } else if (seconds < 40) {\n        return localize('halfAMinute', null, localizeOptions)\n      } else if (seconds < 60) {\n        return localize('lessThanXMinutes', 1, localizeOptions)\n      } else {\n        return localize('xMinutes', 1, localizeOptions)\n      }\n    } else {\n      if (minutes === 0) {\n        return localize('lessThanXMinutes', 1, localizeOptions)\n      } else {\n        return localize('xMinutes', minutes, localizeOptions)\n      }\n    }\n\n  // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return localize('xMinutes', minutes, localizeOptions)\n\n  // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return localize('aboutXHours', 1, localizeOptions)\n\n  // 1.5 hrs up to 24 hrs\n  } else if (minutes < MINUTES_IN_DAY) {\n    var hours = Math.round(minutes / 60)\n    return localize('aboutXHours', hours, localizeOptions)\n\n  // 1 day up to 1.75 days\n  } else if (minutes < MINUTES_IN_ALMOST_TWO_DAYS) {\n    return localize('xDays', 1, localizeOptions)\n\n  // 1.75 days up to 30 days\n  } else if (minutes < MINUTES_IN_MONTH) {\n    var days = Math.round(minutes / MINUTES_IN_DAY)\n    return localize('xDays', days, localizeOptions)\n\n  // 1 month up to 2 months\n  } else if (minutes < MINUTES_IN_TWO_MONTHS) {\n    months = Math.round(minutes / MINUTES_IN_MONTH)\n    return localize('aboutXMonths', months, localizeOptions)\n  }\n\n  months = differenceInMonths(dateRight, dateLeft)\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    var nearestMonth = Math.round(minutes / MINUTES_IN_MONTH)\n    return localize('xMonths', nearestMonth, localizeOptions)\n\n  // 1 year up to max Date\n  } else {\n    var monthsSinceStartOfYear = months % 12\n    var years = Math.floor(months / 12)\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return localize('aboutXYears', years, localizeOptions)\n\n    // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return localize('overXYears', years, localizeOptions)\n\n    // N years 9 months up to N year 12 months\n    } else {\n      return localize('almostXYears', years + 1, localizeOptions)\n    }\n  }\n}\n\nmodule.exports = distanceInWords\n\n\n/***/ }),\n/* 201 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Common Helpers\n * @summary Compare the two dates reverse chronologically and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return -1 if the first date is after the second,\n * 1 if the first date is before the second or 0 if dates are equal.\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989 reverse chronologically:\n * var result = compareDesc(\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * )\n * //=> 1\n *\n * @example\n * // Sort the array of dates in reverse chronological order:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareDesc)\n * //=> [\n * //   Sun Jul 02 1995 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Wed Feb 11 1987 00:00:00\n * // ]\n */\nfunction compareDesc (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var timeLeft = dateLeft.getTime()\n  var dateRight = parse(dirtyDateRight)\n  var timeRight = dateRight.getTime()\n\n  if (timeLeft > timeRight) {\n    return -1\n  } else if (timeLeft < timeRight) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nmodule.exports = compareDesc\n\n\n/***/ }),\n/* 202 */\n/***/ (function(module, exports) {\n\n/**\n * @category Common Helpers\n * @summary Is the given argument an instance of Date?\n *\n * @description\n * Is the given argument an instance of Date?\n *\n * @param {*} argument - the argument to check\n * @returns {Boolean} the given argument is an instance of Date\n *\n * @example\n * // Is 'mayonnaise' a Date?\n * var result = isDate('mayonnaise')\n * //=> false\n */\nfunction isDate (argument) {\n  return argument instanceof Date\n}\n\nmodule.exports = isDate\n\n\n/***/ }),\n/* 203 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar differenceInMilliseconds = __webpack_require__(204)\n\n/**\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * var result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nfunction differenceInSeconds (dirtyDateLeft, dirtyDateRight) {\n  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / 1000\n  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)\n}\n\nmodule.exports = differenceInSeconds\n\n\n/***/ }),\n/* 204 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * var result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nfunction differenceInMilliseconds (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n  return dateLeft.getTime() - dateRight.getTime()\n}\n\nmodule.exports = differenceInMilliseconds\n\n\n/***/ }),\n/* 205 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\nvar differenceInCalendarMonths = __webpack_require__(206)\nvar compareAsc = __webpack_require__(207)\n\n/**\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @description\n * Get the number of full months between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 7\n */\nfunction differenceInMonths (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n\n  var sign = compareAsc(dateLeft, dateRight)\n  var difference = Math.abs(differenceInCalendarMonths(dateLeft, dateRight))\n  dateLeft.setMonth(dateLeft.getMonth() - sign * difference)\n\n  // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full\n  // If so, result must be decreased by 1 in absolute value\n  var isLastMonthNotFull = compareAsc(dateLeft, dateRight) === -sign\n  return sign * (difference - isLastMonthNotFull)\n}\n\nmodule.exports = differenceInMonths\n\n\n/***/ }),\n/* 206 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar months\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\nfunction differenceInCalendarMonths (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n\n  var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear()\n  var monthDiff = dateLeft.getMonth() - dateRight.getMonth()\n\n  return yearDiff * 12 + monthDiff\n}\n\nmodule.exports = differenceInCalendarMonths\n\n\n/***/ }),\n/* 207 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * )\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nfunction compareAsc (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var timeLeft = dateLeft.getTime()\n  var dateRight = parse(dirtyDateRight)\n  var timeRight = dateRight.getTime()\n\n  if (timeLeft < timeRight) {\n    return -1\n  } else if (timeLeft > timeRight) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nmodule.exports = compareAsc\n\n\n/***/ }),\n/* 208 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar buildDistanceInWordsLocale = __webpack_require__(209)\nvar buildFormatLocale = __webpack_require__(210)\n\n/**\n * @category Locales\n * @summary English locale.\n */\nmodule.exports = {\n  distanceInWords: buildDistanceInWordsLocale(),\n  format: buildFormatLocale()\n}\n\n\n/***/ }),\n/* 209 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'less than a second',\n      other: 'less than {{count}} seconds'\n    },\n\n    xSeconds: {\n      one: '1 second',\n      other: '{{count}} seconds'\n    },\n\n    halfAMinute: 'half a minute',\n\n    lessThanXMinutes: {\n      one: 'less than a minute',\n      other: 'less than {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'about 1 hour',\n      other: 'about {{count}} hours'\n    },\n\n    xHours: {\n      one: '1 hour',\n      other: '{{count}} hours'\n    },\n\n    xDays: {\n      one: '1 day',\n      other: '{{count}} days'\n    },\n\n    aboutXMonths: {\n      one: 'about 1 month',\n      other: 'about {{count}} months'\n    },\n\n    xMonths: {\n      one: '1 month',\n      other: '{{count}} months'\n    },\n\n    aboutXYears: {\n      one: 'about 1 year',\n      other: 'about {{count}} years'\n    },\n\n    xYears: {\n      one: '1 year',\n      other: '{{count}} years'\n    },\n\n    overXYears: {\n      one: 'over 1 year',\n      other: 'over {{count}} years'\n    },\n\n    almostXYears: {\n      one: 'almost 1 year',\n      other: 'almost {{count}} years'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'in ' + result\n      } else {\n        return result + ' ago'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 210 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar buildFormattingTokensRegExp = __webpack_require__(211)\n\nfunction buildFormatLocale () {\n  // Note: in English, the names of days of the week and months are capitalized.\n  // If you are making a new locale based on this one, check if the same is true for the language you're working on.\n  // Generally, formatted dates should look like they are in the middle of a sentence,\n  // e.g. in Spanish language the weekdays and months should be in the lowercase.\n  var months3char = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  var monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n  var weekdays2char = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']\n  var weekdays3char = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  var weekdaysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n  var meridiemUppercase = ['AM', 'PM']\n  var meridiemLowercase = ['am', 'pm']\n  var meridiemFull = ['a.m.', 'p.m.']\n\n  var formatters = {\n    // Month: Jan, Feb, ..., Dec\n    'MMM': function (date) {\n      return months3char[date.getMonth()]\n    },\n\n    // Month: January, February, ..., December\n    'MMMM': function (date) {\n      return monthsFull[date.getMonth()]\n    },\n\n    // Day of week: Su, Mo, ..., Sa\n    'dd': function (date) {\n      return weekdays2char[date.getDay()]\n    },\n\n    // Day of week: Sun, Mon, ..., Sat\n    'ddd': function (date) {\n      return weekdays3char[date.getDay()]\n    },\n\n    // Day of week: Sunday, Monday, ..., Saturday\n    'dddd': function (date) {\n      return weekdaysFull[date.getDay()]\n    },\n\n    // AM, PM\n    'A': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemUppercase[1] : meridiemUppercase[0]\n    },\n\n    // am, pm\n    'a': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemLowercase[1] : meridiemLowercase[0]\n    },\n\n    // a.m., p.m.\n    'aa': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemFull[1] : meridiemFull[0]\n    }\n  }\n\n  // Generate ordinal version of formatters: M -> Mo, D -> Do, etc.\n  var ordinalFormatters = ['M', 'D', 'DDD', 'd', 'Q', 'W']\n  ordinalFormatters.forEach(function (formatterToken) {\n    formatters[formatterToken + 'o'] = function (date, formatters) {\n      return ordinal(formatters[formatterToken](date))\n    }\n  })\n\n  return {\n    formatters: formatters,\n    formattingTokensRegExp: buildFormattingTokensRegExp(formatters)\n  }\n}\n\nfunction ordinal (number) {\n  var rem100 = number % 100\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st'\n      case 2:\n        return number + 'nd'\n      case 3:\n        return number + 'rd'\n    }\n  }\n  return number + 'th'\n}\n\nmodule.exports = buildFormatLocale\n\n\n/***/ }),\n/* 211 */\n/***/ (function(module, exports) {\n\nvar commonFormatterKeys = [\n  'M', 'MM', 'Q', 'D', 'DD', 'DDD', 'DDDD', 'd',\n  'E', 'W', 'WW', 'YY', 'YYYY', 'GG', 'GGGG',\n  'H', 'HH', 'h', 'hh', 'm', 'mm',\n  's', 'ss', 'S', 'SS', 'SSS',\n  'Z', 'ZZ', 'X', 'x'\n]\n\nfunction buildFormattingTokensRegExp (formatters) {\n  var formatterKeys = []\n  for (var key in formatters) {\n    if (formatters.hasOwnProperty(key)) {\n      formatterKeys.push(key)\n    }\n  }\n\n  var formattingTokens = commonFormatterKeys\n    .concat(formatterKeys)\n    .sort()\n    .reverse()\n  var formattingTokensRegExp = new RegExp(\n    '(\\\\[[^\\\\[]*\\\\])|(\\\\\\\\)?' + '(' + formattingTokens.join('|') + '|.)', 'g'\n  )\n\n  return formattingTokensRegExp\n}\n\nmodule.exports = buildFormattingTokensRegExp\n\n\n/***/ }),\n/* 212 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: '不到 1 秒',\n      other: '不到 {{count}} 秒'\n    },\n\n    xSeconds: {\n      one: '1 秒',\n      other: '{{count}} 秒'\n    },\n\n    halfAMinute: '半分钟',\n\n    lessThanXMinutes: {\n      one: '不到 1 分钟',\n      other: '不到 {{count}} 分钟'\n    },\n\n    xMinutes: {\n      one: '1 分钟',\n      other: '{{count}} 分钟'\n    },\n\n    xHours: {\n      one: '1 小时',\n      other: '{{count}} 小时'\n    },\n\n    aboutXHours: {\n      one: '大约 1 小时',\n      other: '大约 {{count}} 小时'\n    },\n\n    xDays: {\n      one: '1 天',\n      other: '{{count}} 天'\n    },\n\n    aboutXMonths: {\n      one: '大约 1 个月',\n      other: '大约 {{count}} 个月'\n    },\n\n    xMonths: {\n      one: '1 个月',\n      other: '{{count}} 个月'\n    },\n\n    aboutXYears: {\n      one: '大约 1 年',\n      other: '大约 {{count}} 年'\n    },\n\n    xYears: {\n      one: '1 年',\n      other: '{{count}} 年'\n    },\n\n    overXYears: {\n      one: '超过 1 年',\n      other: '超过 {{count}} 年'\n    },\n\n    almostXYears: {\n      one: '将近 1 年',\n      other: '将近 {{count}} 年'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return result + '内'\n      } else {\n        return result + '前'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 213 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: '少於 1 秒',\n      other: '少於 {{count}} 秒'\n    },\n\n    xSeconds: {\n      one: '1 秒',\n      other: '{{count}} 秒'\n    },\n\n    halfAMinute: '半分鐘',\n\n    lessThanXMinutes: {\n      one: '少於 1 分鐘',\n      other: '少於 {{count}} 分鐘'\n    },\n\n    xMinutes: {\n      one: '1 分鐘',\n      other: '{{count}} 分鐘'\n    },\n\n    xHours: {\n      one: '1 小時',\n      other: '{{count}} 小時'\n    },\n\n    aboutXHours: {\n      one: '大約 1 小時',\n      other: '大約 {{count}} 小時'\n    },\n\n    xDays: {\n      one: '1 天',\n      other: '{{count}} 天'\n    },\n\n    aboutXMonths: {\n      one: '大約 1 個月',\n      other: '大約 {{count}} 個月'\n    },\n\n    xMonths: {\n      one: '1 個月',\n      other: '{{count}} 個月'\n    },\n\n    aboutXYears: {\n      one: '大約 1 年',\n      other: '大約 {{count}} 年'\n    },\n\n    xYears: {\n      one: '1 年',\n      other: '{{count}} 年'\n    },\n\n    overXYears: {\n      one: '超過 1 年',\n      other: '超過 {{count}} 年'\n    },\n\n    almostXYears: {\n      one: '將近 1 年',\n      other: '將近 {{count}} 年'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return result + '內'\n      } else {\n        return result + '前'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 214 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'menos de un segundo',\n      other: 'menos de {{count}} segundos'\n    },\n\n    xSeconds: {\n      one: '1 segundo',\n      other: '{{count}} segundos'\n    },\n\n    halfAMinute: 'medio minuto',\n\n    lessThanXMinutes: {\n      one: 'menos de un minuto',\n      other: 'menos de {{count}} minutos'\n    },\n\n    xMinutes: {\n      one: '1 minuto',\n      other: '{{count}} minutos'\n    },\n\n    aboutXHours: {\n      one: 'alrededor de 1 hora',\n      other: 'alrededor de {{count}} horas'\n    },\n\n    xHours: {\n      one: '1 hora',\n      other: '{{count}} horas'\n    },\n\n    xDays: {\n      one: '1 día',\n      other: '{{count}} días'\n    },\n\n    aboutXMonths: {\n      one: 'alrededor de 1 mes',\n      other: 'alrededor de {{count}} meses'\n    },\n\n    xMonths: {\n      one: '1 mes',\n      other: '{{count}} meses'\n    },\n\n    aboutXYears: {\n      one: 'alrededor de 1 año',\n      other: 'alrededor de {{count}} años'\n    },\n\n    xYears: {\n      one: '1 año',\n      other: '{{count}} años'\n    },\n\n    overXYears: {\n      one: 'más de 1 año',\n      other: 'más de {{count}} años'\n    },\n\n    almostXYears: {\n      one: 'casi 1 año',\n      other: 'casi {{count}} años'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'en ' + result\n      } else {\n        return 'hace ' + result\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 215 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'moins d’une seconde',\n      other: 'moins de {{count}} secondes'\n    },\n\n    xSeconds: {\n      one: '1 seconde',\n      other: '{{count}} secondes'\n    },\n\n    halfAMinute: '30 secondes',\n\n    lessThanXMinutes: {\n      one: 'moins d’une minute',\n      other: 'moins de {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'environ 1 heure',\n      other: 'environ {{count}} heures'\n    },\n\n    xHours: {\n      one: '1 heure',\n      other: '{{count}} heures'\n    },\n\n    xDays: {\n      one: '1 jour',\n      other: '{{count}} jours'\n    },\n\n    aboutXMonths: {\n      one: 'environ 1 mois',\n      other: 'environ {{count}} mois'\n    },\n\n    xMonths: {\n      one: '1 mois',\n      other: '{{count}} mois'\n    },\n\n    aboutXYears: {\n      one: 'environ 1 an',\n      other: 'environ {{count}} ans'\n    },\n\n    xYears: {\n      one: '1 an',\n      other: '{{count}} ans'\n    },\n\n    overXYears: {\n      one: 'plus d’un an',\n      other: 'plus de {{count}} ans'\n    },\n\n    almostXYears: {\n      one: 'presqu’un an',\n      other: 'presque {{count}} ans'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'dans ' + result\n      } else {\n        return 'il y a ' + result\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 216 */\n/***/ (function(module, exports) {\n\nfunction declension (scheme, count) {\n  // scheme for count=1 exists\n  if (scheme.one !== undefined && count === 1) {\n    return scheme.one\n  }\n\n  var rem10 = count % 10\n  var rem100 = count % 100\n\n  // 1, 21, 31, ...\n  if (rem10 === 1 && rem100 !== 11) {\n    return scheme.singularNominative.replace('{{count}}', count)\n\n  // 2, 3, 4, 22, 23, 24, 32 ...\n  } else if ((rem10 >= 2 && rem10 <= 4) && (rem100 < 10 || rem100 > 20)) {\n    return scheme.singularGenitive.replace('{{count}}', count)\n\n  // 5, 6, 7, 8, 9, 10, 11, ...\n  } else {\n    return scheme.pluralGenitive.replace('{{count}}', count)\n  }\n}\n\nfunction buildLocalizeTokenFn (scheme) {\n  return function (count, options) {\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        if (scheme.future) {\n          return declension(scheme.future, count)\n        } else {\n          return 'через ' + declension(scheme.regular, count)\n        }\n      } else {\n        if (scheme.past) {\n          return declension(scheme.past, count)\n        } else {\n          return declension(scheme.regular, count) + ' назад'\n        }\n      }\n    } else {\n      return declension(scheme.regular, count)\n    }\n  }\n}\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: buildLocalizeTokenFn({\n      regular: {\n        one: 'меньше секунды',\n        singularNominative: 'меньше {{count}} секунды',\n        singularGenitive: 'меньше {{count}} секунд',\n        pluralGenitive: 'меньше {{count}} секунд'\n      },\n      future: {\n        one: 'меньше, чем через секунду',\n        singularNominative: 'меньше, чем через {{count}} секунду',\n        singularGenitive: 'меньше, чем через {{count}} секунды',\n        pluralGenitive: 'меньше, чем через {{count}} секунд'\n      }\n    }),\n\n    xSeconds: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} секунда',\n        singularGenitive: '{{count}} секунды',\n        pluralGenitive: '{{count}} секунд'\n      },\n      past: {\n        singularNominative: '{{count}} секунду назад',\n        singularGenitive: '{{count}} секунды назад',\n        pluralGenitive: '{{count}} секунд назад'\n      },\n      future: {\n        singularNominative: 'через {{count}} секунду',\n        singularGenitive: 'через {{count}} секунды',\n        pluralGenitive: 'через {{count}} секунд'\n      }\n    }),\n\n    halfAMinute: function (_, options) {\n      if (options.addSuffix) {\n        if (options.comparison > 0) {\n          return 'через полминуты'\n        } else {\n          return 'полминуты назад'\n        }\n      }\n\n      return 'полминуты'\n    },\n\n    lessThanXMinutes: buildLocalizeTokenFn({\n      regular: {\n        one: 'меньше минуты',\n        singularNominative: 'меньше {{count}} минуты',\n        singularGenitive: 'меньше {{count}} минут',\n        pluralGenitive: 'меньше {{count}} минут'\n      },\n      future: {\n        one: 'меньше, чем через минуту',\n        singularNominative: 'меньше, чем через {{count}} минуту',\n        singularGenitive: 'меньше, чем через {{count}} минуты',\n        pluralGenitive: 'меньше, чем через {{count}} минут'\n      }\n    }),\n\n    xMinutes: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} минута',\n        singularGenitive: '{{count}} минуты',\n        pluralGenitive: '{{count}} минут'\n      },\n      past: {\n        singularNominative: '{{count}} минуту назад',\n        singularGenitive: '{{count}} минуты назад',\n        pluralGenitive: '{{count}} минут назад'\n      },\n      future: {\n        singularNominative: 'через {{count}} минуту',\n        singularGenitive: 'через {{count}} минуты',\n        pluralGenitive: 'через {{count}} минут'\n      }\n    }),\n\n    aboutXHours: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} часа',\n        singularGenitive: 'около {{count}} часов',\n        pluralGenitive: 'около {{count}} часов'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} час',\n        singularGenitive: 'приблизительно через {{count}} часа',\n        pluralGenitive: 'приблизительно через {{count}} часов'\n      }\n    }),\n\n    xHours: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} час',\n        singularGenitive: '{{count}} часа',\n        pluralGenitive: '{{count}} часов'\n      }\n    }),\n\n    xDays: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} день',\n        singularGenitive: '{{count}} дня',\n        pluralGenitive: '{{count}} дней'\n      }\n    }),\n\n    aboutXMonths: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} месяца',\n        singularGenitive: 'около {{count}} месяцев',\n        pluralGenitive: 'около {{count}} месяцев'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} месяц',\n        singularGenitive: 'приблизительно через {{count}} месяца',\n        pluralGenitive: 'приблизительно через {{count}} месяцев'\n      }\n    }),\n\n    xMonths: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} месяц',\n        singularGenitive: '{{count}} месяца',\n        pluralGenitive: '{{count}} месяцев'\n      }\n    }),\n\n    aboutXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} года',\n        singularGenitive: 'около {{count}} лет',\n        pluralGenitive: 'около {{count}} лет'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} год',\n        singularGenitive: 'приблизительно через {{count}} года',\n        pluralGenitive: 'приблизительно через {{count}} лет'\n      }\n    }),\n\n    xYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} год',\n        singularGenitive: '{{count}} года',\n        pluralGenitive: '{{count}} лет'\n      }\n    }),\n\n    overXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'больше {{count}} года',\n        singularGenitive: 'больше {{count}} лет',\n        pluralGenitive: 'больше {{count}} лет'\n      },\n      future: {\n        singularNominative: 'больше, чем через {{count}} год',\n        singularGenitive: 'больше, чем через {{count}} года',\n        pluralGenitive: 'больше, чем через {{count}} лет'\n      }\n    }),\n\n    almostXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'почти {{count}} год',\n        singularGenitive: 'почти {{count}} года',\n        pluralGenitive: 'почти {{count}} лет'\n      },\n      future: {\n        singularNominative: 'почти через {{count}} год',\n        singularGenitive: 'почти через {{count}} года',\n        pluralGenitive: 'почти через {{count}} лет'\n      }\n    })\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n    return distanceInWordsLocale[token](count, options)\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 217 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 218 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar GT_ACCESS_TOKEN = exports.GT_ACCESS_TOKEN = 'GT_ACCESS_TOKEN';\nvar GT_VERSION = exports.GT_VERSION = \"1.6.2\"; // eslint-disable-line\nvar GT_COMMENT = exports.GT_COMMENT = 'GT_COMMENT';\n\n/***/ }),\n/* 219 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _toConsumableArray2 = __webpack_require__(220);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _util = __webpack_require__(71);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getQL = function getQL(vars, pagerDirection) {\n  var cursorDirection = pagerDirection === 'last' ? 'before' : 'after';\n  var ql = '\\n  query getIssueAndComments(\\n    $owner: String!,\\n    $repo: String!,\\n    $id: Int!,\\n    $cursor: String,\\n    $pageSize: Int!\\n  ) {\\n    repository(owner: $owner, name: $repo) {\\n      issue(number: $id) {\\n        title\\n        url\\n        bodyHTML\\n        createdAt\\n        comments(' + pagerDirection + ': $pageSize, ' + cursorDirection + ': $cursor) {\\n          totalCount\\n          pageInfo {\\n            ' + (pagerDirection === 'last' ? 'hasPreviousPage' : 'hasNextPage') + '\\n            ' + (cursorDirection === 'before' ? 'startCursor' : 'endCursor') + '\\n          }\\n          nodes {\\n            id\\n            databaseId\\n            author {\\n              avatarUrl\\n              login\\n              url\\n            }\\n            bodyHTML\\n            body\\n            createdAt\\n            reactions(first: 100, content: HEART) {\\n              totalCount\\n              viewerHasReacted\\n              pageInfo{\\n                hasNextPage\\n              }\\n              nodes {\\n                id\\n                databaseId\\n                user {\\n                  login\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n  ';\n\n  if (vars.cursor === null) delete vars.cursor;\n\n  return {\n    operationName: 'getIssueAndComments',\n    query: ql,\n    variables: vars\n  };\n};\n\nfunction getComments(issue) {\n  var _this = this;\n\n  var _options = this.options,\n      owner = _options.owner,\n      repo = _options.repo,\n      perPage = _options.perPage,\n      pagerDirection = _options.pagerDirection,\n      defaultAuthor = _options.defaultAuthor;\n  var _state = this.state,\n      cursor = _state.cursor,\n      comments = _state.comments;\n\n  return _util.axiosGithub.post('/graphql', getQL({\n    owner: owner,\n    repo: repo,\n    id: issue.number,\n    pageSize: perPage,\n    cursor: cursor\n  }, pagerDirection), {\n    headers: {\n      Authorization: 'bearer ' + this.accessToken\n    }\n  }).then(function (res) {\n    var data = res.data.data.repository.issue.comments;\n    var items = data.nodes.map(function (node) {\n      var author = node.author || defaultAuthor;\n\n      return {\n        id: node.databaseId,\n        gId: node.id,\n        user: {\n          avatar_url: author.avatarUrl,\n          login: author.login,\n          html_url: author.url\n        },\n        created_at: node.createdAt,\n        body_html: node.bodyHTML,\n        body: node.body,\n        html_url: 'https://github.com/' + owner + '/' + repo + '/issues/' + issue.number + '#issuecomment-' + node.databaseId,\n        reactions: node.reactions\n      };\n    });\n\n    var cs = void 0;\n\n    if (pagerDirection === 'last') {\n      cs = [].concat((0, _toConsumableArray3.default)(items), (0, _toConsumableArray3.default)(comments));\n    } else {\n      cs = [].concat((0, _toConsumableArray3.default)(comments), (0, _toConsumableArray3.default)(items));\n    }\n\n    var isLoadOver = data.pageInfo.hasPreviousPage === false || data.pageInfo.hasNextPage === false;\n    _this.setState({\n      comments: cs,\n      isLoadOver: isLoadOver,\n      cursor: data.pageInfo.startCursor || data.pageInfo.endCursor\n    });\n    return cs;\n  });\n}\n\nexports.default = getComments;\n\n/***/ }),\n/* 220 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _from = __webpack_require__(221);\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n/***/ }),\n/* 221 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(222), __esModule: true };\n\n/***/ }),\n/* 222 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(20);\n__webpack_require__(223);\nmodule.exports = __webpack_require__(0).Array.from;\n\n\n/***/ }),\n/* 223 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ctx = __webpack_require__(13);\nvar $export = __webpack_require__(4);\nvar toObject = __webpack_require__(17);\nvar call = __webpack_require__(57);\nvar isArrayIter = __webpack_require__(58);\nvar toLength = __webpack_require__(37);\nvar createProperty = __webpack_require__(224);\nvar getIterFn = __webpack_require__(42);\n\n$export($export.S + $export.F * !__webpack_require__(63)(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n/***/ }),\n/* 224 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $defineProperty = __webpack_require__(7);\nvar createDesc = __webpack_require__(19);\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=gitalk.js.map"]}]}