{"remainingRequest":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\vuepress-starter\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\vuepress-starter\\node_modules\\gitalk\\dist\\gitalk.js","dependencies":[{"path":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\vuepress-starter\\node_modules\\gitalk\\dist\\gitalk.js","mtime":1591948918348},{"path":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\vuepress-starter\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591862511060},{"path":"D:\\项目\\My_project\\vuepress-starter\\vuepress-starter\\vuepress-starter\\node_modules\\babel-loader\\lib\\index.js","mtime":1591862511204}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmV2ZXJ5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmlzLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuaXMtdmlldyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUubm93Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1pc28tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1qc29uIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5iaW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5jcmVhdGUiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LW5hbWVzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMtZXh0ZW5zaWJsZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnByZXZlbnQtZXh0ZW5zaW9ucyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1jbGFtcGVkLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmltbWVkaWF0ZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uIik7Cgp2YXIgX3R5cGVvZjQgPSByZXF1aXJlKCJEOi9cdTk4NzlcdTc2RUUvTXlfcHJvamVjdC92dWVwcmVzcy1zdGFydGVyL3Z1ZXByZXNzLXN0YXJ0ZXIvdnVlcHJlc3Mtc3RhcnRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YiKTsKCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7CiAgaWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Y0KGV4cG9ydHMpKSA9PT0gJ29iamVjdCcgJiYgKHR5cGVvZiBtb2R1bGUgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mNChtb2R1bGUpKSA9PT0gJ29iamVjdCcpIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO2Vsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgZGVmaW5lKFtdLCBmYWN0b3J5KTtlbHNlIGlmICgodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mNChleHBvcnRzKSkgPT09ICdvYmplY3QnKSBleHBvcnRzWyJHaXRhbGsiXSA9IGZhY3RvcnkoKTtlbHNlIHJvb3RbIkdpdGFsayJdID0gZmFjdG9yeSgpOwp9KSh0aGlzLCBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuICgKICAgIC8qKioqKiovCiAgICBmdW5jdGlvbiAobW9kdWxlcykgewogICAgICAvLyB3ZWJwYWNrQm9vdHN0cmFwCgogICAgICAvKioqKioqLwogICAgICAvLyBUaGUgbW9kdWxlIGNhY2hlCgogICAgICAvKioqKioqLwogICAgICB2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KCiAgICAgIC8qKioqKiovCgogICAgICBmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7CiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgLyoqKioqKi8KICAgICAgICAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKCiAgICAgICAgLyoqKioqKi8KICAgICAgICBpZiAoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHsKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgfQogICAgICAgIC8qKioqKiovCiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKCiAgICAgICAgLyoqKioqKi8KCgogICAgICAgIHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICBpOiBtb2R1bGVJZCwKCiAgICAgICAgICAvKioqKioqLwogICAgICAgICAgbDogZmFsc2UsCgogICAgICAgICAgLyoqKioqKi8KICAgICAgICAgIGV4cG9ydHM6IHt9CiAgICAgICAgICAvKioqKioqLwoKICAgICAgICB9OwogICAgICAgIC8qKioqKiovCgogICAgICAgIC8qKioqKiovCiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCgogICAgICAgIC8qKioqKiovCgogICAgICAgIG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOwogICAgICAgIC8qKioqKiovCgogICAgICAgIC8qKioqKiovCiAgICAgICAgLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAoKICAgICAgICAvKioqKioqLwoKICAgICAgICBtb2R1bGUubCA9IHRydWU7CiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgLyoqKioqKi8KICAgICAgICAvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQoKICAgICAgICAvKioqKioqLwoKICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7CiAgICAgICAgLyoqKioqKi8KICAgICAgfQogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCgogICAgICAvKioqKioqLwoKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQoKICAgICAgLyoqKioqKi8KCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKCiAgICAgIC8qKioqKiovCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbiAoZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7CiAgICAgICAgLyoqKioqKi8KICAgICAgICBpZiAoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewogICAgICAgICAgLyoqKioqKi8KICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7CiAgICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsCgogICAgICAgICAgICAvKioqKioqLwogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAoKICAgICAgICAgICAgLyoqKioqKi8KICAgICAgICAgICAgZ2V0OiBnZXR0ZXIKICAgICAgICAgICAgLyoqKioqKi8KCiAgICAgICAgICB9KTsKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgfQogICAgICAgIC8qKioqKiovCgogICAgICB9OwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKCiAgICAgIC8qKioqKiovCgoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24gKG1vZHVsZSkgewogICAgICAgIC8qKioqKiovCiAgICAgICAgdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/CiAgICAgICAgLyoqKioqKi8KICAgICAgICBmdW5jdGlvbiBnZXREZWZhdWx0KCkgewogICAgICAgICAgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOwogICAgICAgIH0gOgogICAgICAgIC8qKioqKiovCiAgICAgICAgZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsKICAgICAgICAgIHJldHVybiBtb2R1bGU7CiAgICAgICAgfTsKICAgICAgICAvKioqKioqLwoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7CiAgICAgICAgLyoqKioqKi8KCgogICAgICAgIHJldHVybiBnZXR0ZXI7CiAgICAgICAgLyoqKioqKi8KICAgICAgfTsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAoKICAgICAgLyoqKioqKi8KCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSkgewogICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7CiAgICAgIH07CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwoKICAgICAgLyoqKioqKi8KCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiL2Rpc3QiOwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCgogICAgICAvKioqKioqLwoKICAgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gODIpOwogICAgICAvKioqKioqLwogICAgfSgKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgLyoqKioqKi8KICAgIFsKICAgIC8qIDAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICB2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0gewogICAgICAgIHZlcnNpb246ICcyLjYuMTEnCiAgICAgIH07CiAgICAgIGlmICh0eXBlb2YgX19lID09ICdudW1iZXInKSBfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmCgogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAogICAgICB2YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGggPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jCiAgICAgIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsKICAgICAgaWYgKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpIF9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSkoJ3drcycpOwoKICAgICAgdmFyIHVpZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpOwoKICAgICAgdmFyIF9TeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLlN5bWJvbDsKCiAgICAgIHZhciBVU0VfU1lNQk9MID0gdHlwZW9mIF9TeW1ib2wgPT0gJ2Z1bmN0aW9uJzsKCiAgICAgIHZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0gVVNFX1NZTUJPTCAmJiBfU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gX1N5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpOwogICAgICB9OwoKICAgICAgJGV4cG9ydHMuc3RvcmUgPSBzdG9yZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGJpbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKICAgICAgLypnbG9iYWwgdG9TdHJpbmc6dHJ1ZSovCiAgICAgIC8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zCgoKICAgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCiAgICAgIGZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkgewogICAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCdWZmZXIKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzQnVmZmVyKHZhbCkgewogICAgICAgIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpICYmIHR5cGVvZiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHZhbCk7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGEKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgRm9ybURhdGE7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlcgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkgewogICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIEFycmF5QnVmZmVyLmlzVmlldykgewogICAgICAgICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdCA9IHZhbCAmJiB2YWwuYnVmZmVyICYmIHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc1N0cmluZyh2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc051bWJlcih2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkgewogICAgICAgIHJldHVybiB2YWwgIT09IG51bGwgJiYgX3R5cGVvZjQodmFsKSA9PT0gJ29iamVjdCc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzRmlsZSh2YWwpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzQmxvYih2YWwpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBCbG9iXSc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb24KICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7CiAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkgewogICAgICAgIHJldHVybiB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXM7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZwogICAgICAgKgogICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbQogICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIHRyaW0oc3RyKSB7CiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMqLywgJycpLnJlcGxhY2UoL1xzKiQvLCAnJyk7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudAogICAgICAgKgogICAgICAgKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLgogICAgICAgKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuCiAgICAgICAqCiAgICAgICAqIHdlYiB3b3JrZXJzOgogICAgICAgKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWQKICAgICAgICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWQKICAgICAgICoKICAgICAgICogcmVhY3QtbmF0aXZlOgogICAgICAgKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJwogICAgICAgKiBuYXRpdmVzY3JpcHQKICAgICAgICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdOYXRpdmVTY3JpcHQnIG9yICdOUycKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fCBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05hdGl2ZVNjcmlwdCcgfHwgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdOUycpKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uCiAgICAgICAqCiAgICAgICAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmcKICAgICAgICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uCiAgICAgICAqCiAgICAgICAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nCiAgICAgICAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZQogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW0KICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7CiAgICAgICAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkCiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlCgoKICAgICAgICBpZiAoX3R5cGVvZjQob2JqKSAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLwogICAgICAgICAgb2JqID0gW29ial07CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNBcnJheShvYmopKSB7CiAgICAgICAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzCiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5cwogICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAvKioKICAgICAgICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlbgogICAgICAgKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC4KICAgICAgICoKICAgICAgICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW4KICAgICAgICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLgogICAgICAgKgogICAgICAgKiBFeGFtcGxlOgogICAgICAgKgogICAgICAgKiBgYGBqcwogICAgICAgKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7CiAgICAgICAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NgogICAgICAgKiBgYGAKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlCiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllcwogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBtZXJnZSgpCiAgICAgIC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLwogICAgICB7CiAgICAgICAgdmFyIHJlc3VsdCA9IHt9OwoKICAgICAgICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkgewogICAgICAgICAgaWYgKF90eXBlb2Y0KHJlc3VsdFtrZXldKSA9PT0gJ29iamVjdCcgJiYgX3R5cGVvZjQodmFsKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAvKioKICAgICAgICogRnVuY3Rpb24gZXF1YWwgdG8gbWVyZ2Ugd2l0aCB0aGUgZGlmZmVyZW5jZSBiZWluZyB0aGF0IG5vIHJlZmVyZW5jZQogICAgICAgKiB0byBvcmlnaW5hbCBvYmplY3RzIGlzIGtlcHQuCiAgICAgICAqCiAgICAgICAqIEBzZWUgbWVyZ2UKICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlCiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllcwogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBkZWVwTWVyZ2UoKQogICAgICAvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8KICAgICAgewogICAgICAgIHZhciByZXN1bHQgPSB7fTsKCiAgICAgICAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHsKICAgICAgICAgIGlmIChfdHlwZW9mNChyZXN1bHRba2V5XSkgPT09ICdvYmplY3QnICYmIF90eXBlb2Y0KHZhbCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gZGVlcE1lcmdlKHJlc3VsdFtrZXldLCB2YWwpOwogICAgICAgICAgfSBlbHNlIGlmIChfdHlwZW9mNCh2YWwpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZSh7fSwgdmFsKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAvKioKICAgICAgICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZAogICAgICAgKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0bwogICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGEKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHsKICAgICAgICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7CiAgICAgICAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFba2V5XSA9IHZhbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gYTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgaXNBcnJheTogaXNBcnJheSwKICAgICAgICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLAogICAgICAgIGlzQnVmZmVyOiBpc0J1ZmZlciwKICAgICAgICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLAogICAgICAgIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldywKICAgICAgICBpc1N0cmluZzogaXNTdHJpbmcsCiAgICAgICAgaXNOdW1iZXI6IGlzTnVtYmVyLAogICAgICAgIGlzT2JqZWN0OiBpc09iamVjdCwKICAgICAgICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsCiAgICAgICAgaXNEYXRlOiBpc0RhdGUsCiAgICAgICAgaXNGaWxlOiBpc0ZpbGUsCiAgICAgICAgaXNCbG9iOiBpc0Jsb2IsCiAgICAgICAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbiwKICAgICAgICBpc1N0cmVhbTogaXNTdHJlYW0sCiAgICAgICAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLAogICAgICAgIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudiwKICAgICAgICBmb3JFYWNoOiBmb3JFYWNoLAogICAgICAgIG1lcmdlOiBtZXJnZSwKICAgICAgICBkZWVwTWVyZ2U6IGRlZXBNZXJnZSwKICAgICAgICBleHRlbmQ6IGV4dGVuZCwKICAgICAgICB0cmltOiB0cmltCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKICAgICAgdmFyIGN0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKICAgICAgdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKCiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCiAgICAgIHZhciAkZXhwb3J0ID0gZnVuY3Rpb24gJGV4cG9ydCh0eXBlLCBuYW1lLCBzb3VyY2UpIHsKICAgICAgICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRjsKICAgICAgICB2YXIgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuRzsKICAgICAgICB2YXIgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuUzsKICAgICAgICB2YXIgSVNfUFJPVE8gPSB0eXBlICYgJGV4cG9ydC5QOwogICAgICAgIHZhciBJU19CSU5EID0gdHlwZSAmICRleHBvcnQuQjsKICAgICAgICB2YXIgSVNfV1JBUCA9IHR5cGUgJiAkZXhwb3J0Llc7CiAgICAgICAgdmFyIGV4cG9ydHMgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KTsKICAgICAgICB2YXIgZXhwUHJvdG8gPSBleHBvcnRzW1BST1RPVFlQRV07CiAgICAgICAgdmFyIHRhcmdldCA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV07CiAgICAgICAgdmFyIGtleSwgb3duLCBvdXQ7CiAgICAgICAgaWYgKElTX0dMT0JBTCkgc291cmNlID0gbmFtZTsKCiAgICAgICAgZm9yIChrZXkgaW4gc291cmNlKSB7CiAgICAgICAgICAvLyBjb250YWlucyBpbiBuYXRpdmUKICAgICAgICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CiAgICAgICAgICBpZiAob3duICYmIGhhcyhleHBvcnRzLCBrZXkpKSBjb250aW51ZTsgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQKCiAgICAgICAgICBvdXQgPSBvd24gPyB0YXJnZXRba2V5XSA6IHNvdXJjZVtrZXldOyAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMKCiAgICAgICAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XSAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dAogICAgICAgICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnkKICAgICAgICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyBmdW5jdGlvbiAoQykgewogICAgICAgICAgICB2YXIgRiA9IGZ1bmN0aW9uIEYoYSwgYiwgYykgewogICAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgQykgewogICAgICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEMoKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEMoYSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDKGEsIGIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQyhhLCBiLCBjKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBDLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07CiAgICAgICAgICAgIHJldHVybiBGOyAvLyBtYWtlIHN0YXRpYyB2ZXJzaW9ucyBmb3IgcHJvdG90eXBlIG1ldGhvZHMKICAgICAgICAgIH0ob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0OyAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKCiAgICAgICAgICBpZiAoSVNfUFJPVE8pIHsKICAgICAgICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0OyAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQoKICAgICAgICAgICAgaWYgKHR5cGUgJiAkZXhwb3J0LlIgJiYgZXhwUHJvdG8gJiYgIWV4cFByb3RvW2tleV0pIGhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07IC8vIHR5cGUgYml0bWFwCgoKICAgICAgJGV4cG9ydC5GID0gMTsgLy8gZm9yY2VkCgogICAgICAkZXhwb3J0LkcgPSAyOyAvLyBnbG9iYWwKCiAgICAgICRleHBvcnQuUyA9IDQ7IC8vIHN0YXRpYwoKICAgICAgJGV4cG9ydC5QID0gODsgLy8gcHJvdG8KCiAgICAgICRleHBvcnQuQiA9IDE2OyAvLyBiaW5kCgogICAgICAkZXhwb3J0LlcgPSAzMjsgLy8gd3JhcAoKICAgICAgJGV4cG9ydC5VID0gNjQ7IC8vIHNhZmUKCiAgICAgICRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YAoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ2ZXJzaW9uIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHZlcnNpb247CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkRPTSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBET007CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkNoaWxkcmVuIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIENoaWxkcmVuOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyZW5kZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcmVuZGVyJDE7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNyZWF0ZUNsYXNzIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGNyZWF0ZUNsYXNzOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjcmVhdGVGYWN0b3J5IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGNyZWF0ZUZhY3Rvcnk7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNyZWF0ZUVsZW1lbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudDsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY2xvbmVFbGVtZW50IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudCQxOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpc1ZhbGlkRWxlbWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBpc1ZhbGlkRWxlbWVudDsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmluZERPTU5vZGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gZmluZERPTU5vZGU7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInVubW91bnRDb21wb25lbnRBdE5vZGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gdW5tb3VudENvbXBvbmVudEF0Tm9kZTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQ29tcG9uZW50IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIENvbXBvbmVudCQxOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJQdXJlQ29tcG9uZW50IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFB1cmVDb21wb25lbnQ7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgaW1wb3J0ICovCgoKICAgICAgICB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Byb3BfdHlwZXNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODYpOwogICAgICAgIC8qIGhhcm1vbnkgaW1wb3J0ICovCgoKICAgICAgICB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Byb3BfdHlwZXNfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9wcm9wX3R5cGVzX18pOwogICAgICAgIC8qIGhhcm1vbnkgaW1wb3J0ICovCgoKICAgICAgICB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7CiAgICAgICAgLyogaGFybW9ueSBpbXBvcnQgKi8KCgogICAgICAgIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X18pOwogICAgICAgIC8qIGhhcm1vbnkgcmVleHBvcnQgKGRlZmF1bHQgZnJvbSBub24taGFtb3J5KSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJQcm9wVHlwZXMiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Byb3BfdHlwZXNfX19kZWZhdWx0LmE7CiAgICAgICAgfSk7CgogICAgICAgIHZhciB2ZXJzaW9uID0gJzE1LjEuMCc7IC8vIHRyaWNrIGxpYnJhcmllcyB0byB0aGluayB3ZSBhcmUgcmVhY3QKCiAgICAgICAgdmFyIEVMRU1FTlRTID0gJ2EgYWJiciBhZGRyZXNzIGFyZWEgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiIGJhc2UgYmRpIGJkbyBiaWcgYmxvY2txdW90ZSBib2R5IGJyIGJ1dHRvbiBjYW52YXMgY2FwdGlvbiBjaXRlIGNvZGUgY29sIGNvbGdyb3VwIGRhdGEgZGF0YWxpc3QgZGQgZGVsIGRldGFpbHMgZGZuIGRpYWxvZyBkaXYgZGwgZHQgZW0gZW1iZWQgZmllbGRzZXQgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGZvcm0gaDEgaDIgaDMgaDQgaDUgaDYgaGVhZCBoZWFkZXIgaGdyb3VwIGhyIGh0bWwgaSBpZnJhbWUgaW1nIGlucHV0IGlucyBrYmQga2V5Z2VuIGxhYmVsIGxlZ2VuZCBsaSBsaW5rIG1haW4gbWFwIG1hcmsgbWVudSBtZW51aXRlbSBtZXRhIG1ldGVyIG5hdiBub3NjcmlwdCBvYmplY3Qgb2wgb3B0Z3JvdXAgb3B0aW9uIG91dHB1dCBwIHBhcmFtIHBpY3R1cmUgcHJlIHByb2dyZXNzIHEgcnAgcnQgcnVieSBzIHNhbXAgc2NyaXB0IHNlY3Rpb24gc2VsZWN0IHNtYWxsIHNvdXJjZSBzcGFuIHN0cm9uZyBzdHlsZSBzdWIgc3VtbWFyeSBzdXAgdGFibGUgdGJvZHkgdGQgdGV4dGFyZWEgdGZvb3QgdGggdGhlYWQgdGltZSB0aXRsZSB0ciB0cmFjayB1IHVsIHZhciB2aWRlbyB3YnIgY2lyY2xlIGNsaXBQYXRoIGRlZnMgZWxsaXBzZSBnIGltYWdlIGxpbmUgbGluZWFyR3JhZGllbnQgbWFzayBwYXRoIHBhdHRlcm4gcG9seWdvbiBwb2x5bGluZSByYWRpYWxHcmFkaWVudCByZWN0IHN0b3Agc3ZnIHRleHQgdHNwYW4nLnNwbGl0KCcgJyk7CiAgICAgICAgdmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbFsiZm9yIl0gJiYgU3ltYm9sWyJmb3IiXSgncmVhY3QuZWxlbWVudCcpIHx8IDB4ZWFjNzsKICAgICAgICB2YXIgQ09NUE9ORU5UX1dSQVBQRVJfS0VZID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgPyBTeW1ib2xbImZvciJdKCdfX3ByZWFjdENvbXBhdFdyYXBwZXInKSA6ICdfX3ByZWFjdENvbXBhdFdyYXBwZXInOyAvLyBkb24ndCBhdXRvYmluZCB0aGVzZSBtZXRob2RzIHNpbmNlIHRoZXkgYWxyZWFkeSBoYXZlIGd1YXJhbnRlZWQgY29udGV4dC4KCiAgICAgICAgdmFyIEFVVE9CSU5EX0JMQUNLTElTVCA9IHsKICAgICAgICAgIGNvbnN0cnVjdG9yOiAxLAogICAgICAgICAgcmVuZGVyOiAxLAogICAgICAgICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiAxLAogICAgICAgICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogMSwKICAgICAgICAgIGNvbXBvbmVudFdpbGxVcGRhdGU6IDEsCiAgICAgICAgICBjb21wb25lbnREaWRVcGRhdGU6IDEsCiAgICAgICAgICBjb21wb25lbnRXaWxsTW91bnQ6IDEsCiAgICAgICAgICBjb21wb25lbnREaWRNb3VudDogMSwKICAgICAgICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiAxLAogICAgICAgICAgY29tcG9uZW50RGlkVW5tb3VudDogMQogICAgICAgIH07CiAgICAgICAgdmFyIENBTUVMX1BST1BTID0gL14oPzphY2NlbnR8YWxpZ25tZW50fGFyYWJpY3xiYXNlbGluZXxjYXB8Y2xpcHxjb2xvcnxmaWxsfGZsb29kfGZvbnR8Z2x5cGh8aG9yaXp8bWFya2VyfG92ZXJsaW5lfHBhaW50fHN0b3B8c3RyaWtldGhyb3VnaHxzdHJva2V8dGV4dHx1bmRlcmxpbmV8dW5pY29kZXx1bml0c3x2fHZlcnR8d29yZHx3cml0aW5nfHgpW0EtWl0vOwogICAgICAgIHZhciBCWVBBU1NfSE9PSyA9IHt9OwogICAgICAgIC8qZ2xvYmFsIHByb2Nlc3MqLwoKICAgICAgICB2YXIgREVWID0gdHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8ICFwcm9jZXNzLmVudiB8fCBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nOyAvLyBhIGNvbXBvbmVudCB0aGF0IHJlbmRlcnMgbm90aGluZy4gVXNlZCB0byByZXBsYWNlIGNvbXBvbmVudHMgZm9yIHVubW91bnRDb21wb25lbnRBdE5vZGUuCgogICAgICAgIGZ1bmN0aW9uIEVtcHR5Q29tcG9uZW50KCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSAvLyBtYWtlIHJlYWN0IHRoaW5rIHdlJ3JlIHJlYWN0LgoKCiAgICAgICAgdmFyIFZOb2RlID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJoIl0oJ2EnLCBudWxsKS5jb25zdHJ1Y3RvcjsKCiAgICAgICAgVk5vZGUucHJvdG90eXBlLiQkdHlwZW9mID0gUkVBQ1RfRUxFTUVOVF9UWVBFOwogICAgICAgIFZOb2RlLnByb3RvdHlwZS5wcmVhY3RDb21wYXRVcGdyYWRlZCA9IGZhbHNlOwogICAgICAgIFZOb2RlLnByb3RvdHlwZS5wcmVhY3RDb21wYXROb3JtYWxpemVkID0gZmFsc2U7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZOb2RlLnByb3RvdHlwZSwgJ3R5cGUnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZU5hbWU7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICAgICAgICB0aGlzLm5vZGVOYW1lID0gdjsKICAgICAgICAgIH0sCiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVk5vZGUucHJvdG90eXBlLCAncHJvcHMnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlczsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHY7CiAgICAgICAgICB9LAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgdmFyIG9sZEV2ZW50SG9vayA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1sib3B0aW9ucyJdLmV2ZW50OwoKICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bIm9wdGlvbnMiXS5ldmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAob2xkRXZlbnRIb29rKSB7CiAgICAgICAgICAgIGUgPSBvbGRFdmVudEhvb2soZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZS5wZXJzaXN0ID0gT2JqZWN0OwogICAgICAgICAgZS5uYXRpdmVFdmVudCA9IGU7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9OwoKICAgICAgICB2YXIgb2xkVm5vZGVIb29rID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJvcHRpb25zIl0udm5vZGU7CgogICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1sib3B0aW9ucyJdLnZub2RlID0gZnVuY3Rpb24gKHZub2RlKSB7CiAgICAgICAgICBpZiAoIXZub2RlLnByZWFjdENvbXBhdFVwZ3JhZGVkKSB7CiAgICAgICAgICAgIHZub2RlLnByZWFjdENvbXBhdFVwZ3JhZGVkID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIHRhZyA9IHZub2RlLm5vZGVOYW1lLAogICAgICAgICAgICAgICAgYXR0cnMgPSB2bm9kZS5hdHRyaWJ1dGVzID0gZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgdGFnID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgaWYgKHRhZ1tDT01QT05FTlRfV1JBUFBFUl9LRVldID09PSB0cnVlIHx8IHRhZy5wcm90b3R5cGUgJiYgJ2lzUmVhY3RDb21wb25lbnQnIGluIHRhZy5wcm90b3R5cGUpIHsKICAgICAgICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbiAmJiBTdHJpbmcodm5vZGUuY2hpbGRyZW4pID09PSAnJykgewogICAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgICAgYXR0cnMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIXZub2RlLnByZWFjdENvbXBhdE5vcm1hbGl6ZWQpIHsKICAgICAgICAgICAgICAgICAgbm9ybWFsaXplVk5vZGUodm5vZGUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGhhbmRsZUNvbXBvbmVudFZOb2RlKHZub2RlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuICYmIFN0cmluZyh2bm9kZS5jaGlsZHJlbikgPT09ICcnKSB7CiAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgYXR0cnMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChhdHRycy5kZWZhdWx0VmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmICghYXR0cnMudmFsdWUgJiYgYXR0cnMudmFsdWUgIT09IDApIHsKICAgICAgICAgICAgICAgICAgYXR0cnMudmFsdWUgPSBhdHRycy5kZWZhdWx0VmFsdWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVsZXRlIGF0dHJzLmRlZmF1bHRWYWx1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGhhbmRsZUVsZW1lbnRWTm9kZSh2bm9kZSwgYXR0cnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9sZFZub2RlSG9vaykgewogICAgICAgICAgICBvbGRWbm9kZUhvb2sodm5vZGUpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNvbXBvbmVudFZOb2RlKHZub2RlKSB7CiAgICAgICAgICB2YXIgdGFnID0gdm5vZGUubm9kZU5hbWUsCiAgICAgICAgICAgICAgYSA9IHZub2RlLmF0dHJpYnV0ZXM7CiAgICAgICAgICB2bm9kZS5hdHRyaWJ1dGVzID0ge307CgogICAgICAgICAgaWYgKHRhZy5kZWZhdWx0UHJvcHMpIHsKICAgICAgICAgICAgZXh0ZW5kKHZub2RlLmF0dHJpYnV0ZXMsIHRhZy5kZWZhdWx0UHJvcHMpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhKSB7CiAgICAgICAgICAgIGV4dGVuZCh2bm9kZS5hdHRyaWJ1dGVzLCBhKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVsZW1lbnRWTm9kZSh2bm9kZSwgYSkgewogICAgICAgICAgdmFyIHNob3VsZFNhbml0aXplLCBhdHRycywgaTsKCiAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICBmb3IgKGkgaW4gYSkgewogICAgICAgICAgICAgIGlmIChzaG91bGRTYW5pdGl6ZSA9IENBTUVMX1BST1BTLnRlc3QoaSkpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNob3VsZFNhbml0aXplKSB7CiAgICAgICAgICAgICAgYXR0cnMgPSB2bm9kZS5hdHRyaWJ1dGVzID0ge307CgogICAgICAgICAgICAgIGZvciAoaSBpbiBhKSB7CiAgICAgICAgICAgICAgICBpZiAoYS5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgICAgICAgICAgICBhdHRyc1tDQU1FTF9QUk9QUy50ZXN0KGkpID8gaS5yZXBsYWNlKC8oW0EtWjAtOV0pLywgJy0kMScpLnRvTG93ZXJDYXNlKCkgOiBpXSA9IGFbaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBwcm94eSByZW5kZXIoKSBzaW5jZSBSZWFjdCByZXR1cm5zIGEgQ29tcG9uZW50IHJlZmVyZW5jZS4KCgogICAgICAgIGZ1bmN0aW9uIHJlbmRlciQxKHZub2RlLCBwYXJlbnQsIGNhbGxiYWNrKSB7CiAgICAgICAgICB2YXIgcHJldiA9IHBhcmVudCAmJiBwYXJlbnQuX3ByZWFjdENvbXBhdFJlbmRlcmVkICYmIHBhcmVudC5fcHJlYWN0Q29tcGF0UmVuZGVyZWQuYmFzZTsgLy8gaWdub3JlIGltcG9zc2libGUgcHJldmlvdXMgcmVuZGVycwoKICAgICAgICAgIGlmIChwcmV2ICYmIHByZXYucGFyZW50Tm9kZSAhPT0gcGFyZW50KSB7CiAgICAgICAgICAgIHByZXYgPSBudWxsOwogICAgICAgICAgfSAvLyBkZWZhdWx0IHRvIGZpcnN0IEVsZW1lbnQgY2hpbGQKCgogICAgICAgICAgaWYgKCFwcmV2KSB7CiAgICAgICAgICAgIHByZXYgPSBwYXJlbnQuY2hpbGRyZW5bMF07CiAgICAgICAgICB9IC8vIHJlbW92ZSB1bmFmZmVjdGVkIHNpYmxpbmdzCgoKICAgICAgICAgIGZvciAodmFyIGkgPSBwYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGktLTspIHsKICAgICAgICAgICAgaWYgKHBhcmVudC5jaGlsZE5vZGVzW2ldICE9PSBwcmV2KSB7CiAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHBhcmVudC5jaGlsZE5vZGVzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvdXQgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bInJlbmRlciJdKHZub2RlLCBwYXJlbnQsIHByZXYpOwoKICAgICAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICAgICAgcGFyZW50Ll9wcmVhY3RDb21wYXRSZW5kZXJlZCA9IG91dCAmJiAob3V0Ll9jb21wb25lbnQgfHwgewogICAgICAgICAgICAgIGJhc2U6IG91dAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG91dCAmJiBvdXQuX2NvbXBvbmVudCB8fCBvdXQ7CiAgICAgICAgfQoKICAgICAgICB2YXIgQ29udGV4dFByb3ZpZGVyID0gZnVuY3Rpb24gQ29udGV4dFByb3ZpZGVyKCkge307CgogICAgICAgIENvbnRleHRQcm92aWRlci5wcm90b3R5cGUuZ2V0Q2hpbGRDb250ZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY29udGV4dDsKICAgICAgICB9OwoKICAgICAgICBDb250ZXh0UHJvdmlkZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChwcm9wcykgewogICAgICAgICAgcmV0dXJuIHByb3BzLmNoaWxkcmVuWzBdOwogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyKHBhcmVudENvbXBvbmVudCwgdm5vZGUsIGNvbnRhaW5lciwgY2FsbGJhY2spIHsKICAgICAgICAgIHZhciB3cmFwID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJoIl0oQ29udGV4dFByb3ZpZGVyLCB7CiAgICAgICAgICAgIGNvbnRleHQ6IHBhcmVudENvbXBvbmVudC5jb250ZXh0CiAgICAgICAgICB9LCB2bm9kZSk7CgogICAgICAgICAgdmFyIGMgPSByZW5kZXIkMSh3cmFwLCBjb250YWluZXIpOwoKICAgICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgICBjYWxsYmFjayhjKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gYy5fY29tcG9uZW50IHx8IGMuYmFzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVubW91bnRDb21wb25lbnRBdE5vZGUoY29udGFpbmVyKSB7CiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBjb250YWluZXIuX3ByZWFjdENvbXBhdFJlbmRlcmVkICYmIGNvbnRhaW5lci5fcHJlYWN0Q29tcGF0UmVuZGVyZWQuYmFzZTsKCiAgICAgICAgICBpZiAoZXhpc3RpbmcgJiYgZXhpc3RpbmcucGFyZW50Tm9kZSA9PT0gY29udGFpbmVyKSB7CiAgICAgICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1sicmVuZGVyIl0oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJoIl0oRW1wdHlDb21wb25lbnQpLCBjb250YWluZXIsIGV4aXN0aW5nKTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBBUlIgPSBbXTsgLy8gVGhpcyBBUEkgaXMgY29tcGxldGVseSB1bm5lY2Vzc2FyeSBmb3IgUHJlYWN0LCBzbyBpdCdzIGJhc2ljYWxseSBwYXNzdGhyb3VnaC4KCiAgICAgICAgdmFyIENoaWxkcmVuID0gewogICAgICAgICAgbWFwOiBmdW5jdGlvbiBtYXAoY2hpbGRyZW4sIGZuLCBjdHgpIHsKICAgICAgICAgICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2hpbGRyZW4gPSBDaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTsKCiAgICAgICAgICAgIGlmIChjdHggJiYgY3R4ICE9PSBjaGlsZHJlbikgewogICAgICAgICAgICAgIGZuID0gZm4uYmluZChjdHgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKGZuKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNoaWxkcmVuLCBmbiwgY3R4KSB7CiAgICAgICAgICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNoaWxkcmVuID0gQ2hpbGRyZW4udG9BcnJheShjaGlsZHJlbik7CgogICAgICAgICAgICBpZiAoY3R4ICYmIGN0eCAhPT0gY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBmbiA9IGZuLmJpbmQoY3R4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChmbik7CiAgICAgICAgICB9LAogICAgICAgICAgY291bnQ6IGZ1bmN0aW9uIGNvdW50KGNoaWxkcmVuKSB7CiAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGggfHwgMDsKICAgICAgICAgIH0sCiAgICAgICAgICBvbmx5OiBmdW5jdGlvbiBvbmx5KGNoaWxkcmVuKSB7CiAgICAgICAgICAgIGNoaWxkcmVuID0gQ2hpbGRyZW4udG9BcnJheShjaGlsZHJlbik7CgogICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGlsZHJlbi5vbmx5KCkgZXhwZWN0cyBvbmx5IG9uZSBjaGlsZC4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuWzBdOwogICAgICAgICAgfSwKICAgICAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIHRvQXJyYXkoY2hpbGRyZW4pIHsKICAgICAgICAgICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pID8gY2hpbGRyZW4gOiBBUlIuY29uY2F0KGNoaWxkcmVuKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8qKiBUcmFjayBjdXJyZW50IHJlbmRlcigpIGNvbXBvbmVudCBmb3IgcmVmIGFzc2lnbm1lbnQgKi8KCiAgICAgICAgdmFyIGN1cnJlbnRDb21wb25lbnQ7CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZhY3RvcnkodHlwZSkgewogICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQuYmluZChudWxsLCB0eXBlKTsKICAgICAgICB9CgogICAgICAgIHZhciBET00gPSB7fTsKCiAgICAgICAgZm9yICh2YXIgaSA9IEVMRU1FTlRTLmxlbmd0aDsgaS0tOykgewogICAgICAgICAgRE9NW0VMRU1FTlRTW2ldXSA9IGNyZWF0ZUZhY3RvcnkoRUxFTUVOVFNbaV0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBncmFkZVRvVk5vZGVzKGFyciwgb2Zmc2V0KSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gb2Zmc2V0IHx8IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIG9iaiA9IGFycltpXTsKCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHsKICAgICAgICAgICAgICB1cGdyYWRlVG9WTm9kZXMob2JqKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogJiYgX3R5cGVvZjQob2JqKSA9PT0gJ29iamVjdCcgJiYgIWlzVmFsaWRFbGVtZW50KG9iaikgJiYgKG9iai5wcm9wcyAmJiBvYmoudHlwZSB8fCBvYmouYXR0cmlidXRlcyAmJiBvYmoubm9kZU5hbWUgfHwgb2JqLmNoaWxkcmVuKSkgewogICAgICAgICAgICAgIGFycltpXSA9IGNyZWF0ZUVsZW1lbnQob2JqLnR5cGUgfHwgb2JqLm5vZGVOYW1lLCBvYmoucHJvcHMgfHwgb2JqLmF0dHJpYnV0ZXMsIG9iai5jaGlsZHJlbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzU3RhdGVsZXNzQ29tcG9uZW50KGMpIHsKICAgICAgICAgIHJldHVybiB0eXBlb2YgYyA9PT0gJ2Z1bmN0aW9uJyAmJiAhKGMucHJvdG90eXBlICYmIGMucHJvdG90eXBlLnJlbmRlcik7CiAgICAgICAgfSAvLyB3cmFwcyBzdGF0ZWxlc3MgZnVuY3Rpb25hbCBjb21wb25lbnRzIGluIGEgUHJvcFR5cGVzIHZhbGlkYXRvcgoKCiAgICAgICAgZnVuY3Rpb24gd3JhcFN0YXRlbGVzc0NvbXBvbmVudChXcmFwcGVkQ29tcG9uZW50KSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlQ2xhc3MoewogICAgICAgICAgICBkaXNwbGF5TmFtZTogV3JhcHBlZENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBXcmFwcGVkQ29tcG9uZW50Lm5hbWUsCiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAgICAgICAgIHJldHVybiBXcmFwcGVkQ29tcG9uZW50KHRoaXMucHJvcHMsIHRoaXMuY29udGV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3RhdGVsZXNzQ29tcG9uZW50SG9vayhDdG9yKSB7CiAgICAgICAgICB2YXIgV3JhcHBlZCA9IEN0b3JbQ09NUE9ORU5UX1dSQVBQRVJfS0VZXTsKCiAgICAgICAgICBpZiAoV3JhcHBlZCkgewogICAgICAgICAgICByZXR1cm4gV3JhcHBlZCA9PT0gdHJ1ZSA/IEN0b3IgOiBXcmFwcGVkOwogICAgICAgICAgfQoKICAgICAgICAgIFdyYXBwZWQgPSB3cmFwU3RhdGVsZXNzQ29tcG9uZW50KEN0b3IpOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyYXBwZWQsIENPTVBPTkVOVF9XUkFQUEVSX0tFWSwgewogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIFdyYXBwZWQuZGlzcGxheU5hbWUgPSBDdG9yLmRpc3BsYXlOYW1lOwogICAgICAgICAgV3JhcHBlZC5wcm9wVHlwZXMgPSBDdG9yLnByb3BUeXBlczsKICAgICAgICAgIFdyYXBwZWQuZGVmYXVsdFByb3BzID0gQ3Rvci5kZWZhdWx0UHJvcHM7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ3RvciwgQ09NUE9ORU5UX1dSQVBQRVJfS0VZLCB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmFsdWU6IFdyYXBwZWQKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIFdyYXBwZWQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KCkgewogICAgICAgICAgdmFyIGFyZ3MgPSBbXSwKICAgICAgICAgICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgICAgIHdoaWxlIChsZW4tLSkgewogICAgICAgICAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuXTsKICAgICAgICAgIH0KCiAgICAgICAgICB1cGdyYWRlVG9WTm9kZXMoYXJncywgMik7CiAgICAgICAgICByZXR1cm4gbm9ybWFsaXplVk5vZGUoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJoIl0uYXBwbHkodm9pZCAwLCBhcmdzKSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVWTm9kZSh2bm9kZSkgewogICAgICAgICAgdm5vZGUucHJlYWN0Q29tcGF0Tm9ybWFsaXplZCA9IHRydWU7CiAgICAgICAgICBhcHBseUNsYXNzTmFtZSh2bm9kZSk7CgogICAgICAgICAgaWYgKGlzU3RhdGVsZXNzQ29tcG9uZW50KHZub2RlLm5vZGVOYW1lKSkgewogICAgICAgICAgICB2bm9kZS5ub2RlTmFtZSA9IHN0YXRlbGVzc0NvbXBvbmVudEhvb2sodm5vZGUubm9kZU5hbWUpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZWYgPSB2bm9kZS5hdHRyaWJ1dGVzLnJlZiwKICAgICAgICAgICAgICB0eXBlID0gcmVmICYmIF90eXBlb2Y0KHJlZik7CgogICAgICAgICAgaWYgKGN1cnJlbnRDb21wb25lbnQgJiYgKHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInKSkgewogICAgICAgICAgICB2bm9kZS5hdHRyaWJ1dGVzLnJlZiA9IGNyZWF0ZVN0cmluZ1JlZlByb3h5KHJlZiwgY3VycmVudENvbXBvbmVudCk7CiAgICAgICAgICB9CgogICAgICAgICAgYXBwbHlFdmVudE5vcm1hbGl6YXRpb24odm5vZGUpOwogICAgICAgICAgcmV0dXJuIHZub2RlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvbmVFbGVtZW50JDEoZWxlbWVudCwgcHJvcHMpIHsKICAgICAgICAgIHZhciBjaGlsZHJlbiA9IFtdLAogICAgICAgICAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAyOwoKICAgICAgICAgIHdoaWxlIChsZW4tLSA+IDApIHsKICAgICAgICAgICAgY2hpbGRyZW5bbGVuXSA9IGFyZ3VtZW50c1tsZW4gKyAyXTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWlzVmFsaWRFbGVtZW50KGVsZW1lbnQpKSB7CiAgICAgICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBlbGVtZW50UHJvcHMgPSBlbGVtZW50LmF0dHJpYnV0ZXMgfHwgZWxlbWVudC5wcm9wczsKCiAgICAgICAgICB2YXIgbm9kZSA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siaCJdKGVsZW1lbnQubm9kZU5hbWUgfHwgZWxlbWVudC50eXBlLCBlbGVtZW50UHJvcHMsIGVsZW1lbnQuY2hpbGRyZW4gfHwgZWxlbWVudFByb3BzICYmIGVsZW1lbnRQcm9wcy5jaGlsZHJlbik7IC8vIE9ubHkgcHJvdmlkZSB0aGUgM3JkIGFyZ3VtZW50IGlmIG5lZWRlZC4KICAgICAgICAgIC8vIEFyZ3VtZW50cyAzKyBvdmVyd3JpdGUgZWxlbWVudC5jaGlsZHJlbiBpbiBwcmVhY3RDbG9uZUVsZW1lbnQKCgogICAgICAgICAgdmFyIGNsb25lQXJncyA9IFtub2RlLCBwcm9wc107CgogICAgICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICBjbG9uZUFyZ3MucHVzaChjaGlsZHJlbik7CiAgICAgICAgICB9IGVsc2UgaWYgKHByb3BzICYmIHByb3BzLmNoaWxkcmVuKSB7CiAgICAgICAgICAgIGNsb25lQXJncy5wdXNoKHByb3BzLmNoaWxkcmVuKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gbm9ybWFsaXplVk5vZGUoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJjbG9uZUVsZW1lbnQiXS5hcHBseSh2b2lkIDAsIGNsb25lQXJncykpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkgewogICAgICAgICAgcmV0dXJuIGVsZW1lbnQgJiYgKGVsZW1lbnQgaW5zdGFuY2VvZiBWTm9kZSB8fCBlbGVtZW50LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3RyaW5nUmVmUHJveHkobmFtZSwgY29tcG9uZW50KSB7CiAgICAgICAgICByZXR1cm4gY29tcG9uZW50Ll9yZWZQcm94aWVzW25hbWVdIHx8IChjb21wb25lbnQuX3JlZlByb3hpZXNbbmFtZV0gPSBmdW5jdGlvbiAocmVzb2x2ZWQpIHsKICAgICAgICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQucmVmcykgewogICAgICAgICAgICAgIGNvbXBvbmVudC5yZWZzW25hbWVdID0gcmVzb2x2ZWQ7CgogICAgICAgICAgICAgIGlmIChyZXNvbHZlZCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgZGVsZXRlIGNvbXBvbmVudC5fcmVmUHJveGllc1tuYW1lXTsKICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFwcGx5RXZlbnROb3JtYWxpemF0aW9uKHJlZikgewogICAgICAgICAgdmFyIG5vZGVOYW1lID0gcmVmLm5vZGVOYW1lOwogICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSByZWYuYXR0cmlidXRlczsKCiAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMgfHwgdHlwZW9mIG5vZGVOYW1lICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHByb3BzID0ge307CgogICAgICAgICAgZm9yICh2YXIgaSBpbiBhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgIHByb3BzW2kudG9Mb3dlckNhc2UoKV0gPSBpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwcm9wcy5vbmRvdWJsZWNsaWNrKSB7CiAgICAgICAgICAgIGF0dHJpYnV0ZXMub25kYmxjbGljayA9IGF0dHJpYnV0ZXNbcHJvcHMub25kb3VibGVjbGlja107CiAgICAgICAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzW3Byb3BzLm9uZG91YmxlY2xpY2tdOwogICAgICAgICAgfSAvLyBmb3IgKnRleHR1YWwgaW5wdXRzKiAoaW5jbCB0ZXh0YXJlYSksIG5vcm1hbGl6ZSBgb25DaGFuZ2VgIC0+IGBvbklucHV0YDoKCgogICAgICAgICAgaWYgKHByb3BzLm9uY2hhbmdlICYmIChub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyB8fCBub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmICEvXmZpbHxjaGV8cmFkL2kudGVzdChhdHRyaWJ1dGVzLnR5cGUpKSkgewogICAgICAgICAgICB2YXIgbm9ybWFsaXplZCA9IHByb3BzLm9uaW5wdXQgfHwgJ29uaW5wdXQnOwoKICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW25vcm1hbGl6ZWRdKSB7CiAgICAgICAgICAgICAgYXR0cmlidXRlc1tub3JtYWxpemVkXSA9IG11bHRpaG9vayhbYXR0cmlidXRlc1tub3JtYWxpemVkXSwgYXR0cmlidXRlc1twcm9wcy5vbmNoYW5nZV1dKTsKICAgICAgICAgICAgICBkZWxldGUgYXR0cmlidXRlc1twcm9wcy5vbmNoYW5nZV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFwcGx5Q2xhc3NOYW1lKHJlZikgewogICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSByZWYuYXR0cmlidXRlczsKCiAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBjbCA9IGF0dHJpYnV0ZXMuY2xhc3NOYW1lIHx8IGF0dHJpYnV0ZXNbImNsYXNzIl07CgogICAgICAgICAgaWYgKGNsKSB7CiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3NOYW1lID0gY2w7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBleHRlbmQoYmFzZSwgcHJvcHMpIHsKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykgewogICAgICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICAgIGJhc2Vba2V5XSA9IHByb3BzW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gYmFzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNoYWxsb3dEaWZmZXJzKGEsIGIpIHsKICAgICAgICAgIGZvciAodmFyIGkgaW4gYSkgewogICAgICAgICAgICBpZiAoIShpIGluIGIpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBpJDEgaW4gYikgewogICAgICAgICAgICBpZiAoYVtpJDFdICE9PSBiW2kkMV0pIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZpbmRET01Ob2RlKGNvbXBvbmVudCkgewogICAgICAgICAgcmV0dXJuIGNvbXBvbmVudCAmJiBjb21wb25lbnQuYmFzZSB8fCBjb21wb25lbnQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBGKCkge30KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2xhc3Mob2JqKSB7CiAgICAgICAgICBmdW5jdGlvbiBjbChwcm9wcywgY29udGV4dCkgewogICAgICAgICAgICBiaW5kQWxsKHRoaXMpOwogICAgICAgICAgICBDb21wb25lbnQkMS5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0LCBCWVBBU1NfSE9PSyk7CiAgICAgICAgICAgIG5ld0NvbXBvbmVudEhvb2suY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCk7CiAgICAgICAgICB9CgogICAgICAgICAgb2JqID0gZXh0ZW5kKHsKICAgICAgICAgICAgY29uc3RydWN0b3I6IGNsCiAgICAgICAgICB9LCBvYmopOyAvLyBXZSBuZWVkIHRvIGFwcGx5IG1peGlucyBoZXJlIHNvIHRoYXQgZ2V0RGVmYXVsdFByb3BzIGlzIGNvcnJlY3RseSBtaXhlZAoKICAgICAgICAgIGlmIChvYmoubWl4aW5zKSB7CiAgICAgICAgICAgIGFwcGx5TWl4aW5zKG9iaiwgY29sbGF0ZU1peGlucyhvYmoubWl4aW5zKSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9iai5zdGF0aWNzKSB7CiAgICAgICAgICAgIGV4dGVuZChjbCwgb2JqLnN0YXRpY3MpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvYmoucHJvcFR5cGVzKSB7CiAgICAgICAgICAgIGNsLnByb3BUeXBlcyA9IG9iai5wcm9wVHlwZXM7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9iai5kZWZhdWx0UHJvcHMpIHsKICAgICAgICAgICAgY2wuZGVmYXVsdFByb3BzID0gb2JqLmRlZmF1bHRQcm9wczsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob2JqLmdldERlZmF1bHRQcm9wcykgewogICAgICAgICAgICBjbC5kZWZhdWx0UHJvcHMgPSBvYmouZ2V0RGVmYXVsdFByb3BzKCk7CiAgICAgICAgICB9CgogICAgICAgICAgRi5wcm90b3R5cGUgPSBDb21wb25lbnQkMS5wcm90b3R5cGU7CiAgICAgICAgICBjbC5wcm90b3R5cGUgPSBleHRlbmQobmV3IEYoKSwgb2JqKTsKICAgICAgICAgIGNsLmRpc3BsYXlOYW1lID0gb2JqLmRpc3BsYXlOYW1lIHx8ICdDb21wb25lbnQnOwogICAgICAgICAgcmV0dXJuIGNsOwogICAgICAgIH0gLy8gRmxhdHRlbiBhbiBBcnJheSBvZiBtaXhpbnMgdG8gYSBtYXAgb2YgbWV0aG9kIG5hbWUgdG8gbWl4aW4gaW1wbGVtZW50YXRpb25zCgoKICAgICAgICBmdW5jdGlvbiBjb2xsYXRlTWl4aW5zKG1peGlucykgewogICAgICAgICAgdmFyIGtleWVkID0ge307CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaXhpbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIG1peGluID0gbWl4aW5zW2ldOwoKICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1peGluKSB7CiAgICAgICAgICAgICAgaWYgKG1peGluLmhhc093blByb3BlcnR5KGtleSkgJiYgdHlwZW9mIG1peGluW2tleV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIChrZXllZFtrZXldIHx8IChrZXllZFtrZXldID0gW10pKS5wdXNoKG1peGluW2tleV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBrZXllZDsKICAgICAgICB9IC8vIGFwcGx5IGEgbWFwcGluZyBvZiBBcnJheXMgb2YgbWl4aW4gbWV0aG9kcyB0byBhIGNvbXBvbmVudCBwcm90b3R5cGUKCgogICAgICAgIGZ1bmN0aW9uIGFwcGx5TWl4aW5zKHByb3RvLCBtaXhpbnMpIHsKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtaXhpbnMpIHsKICAgICAgICAgICAgaWYgKG1peGlucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgICAgcHJvdG9ba2V5XSA9IG11bHRpaG9vayhtaXhpbnNba2V5XS5jb25jYXQocHJvdG9ba2V5XSB8fCBBUlIpLCBrZXkgPT09ICdnZXREZWZhdWx0UHJvcHMnIHx8IGtleSA9PT0gJ2dldEluaXRpYWxTdGF0ZScgfHwga2V5ID09PSAnZ2V0Q2hpbGRDb250ZXh0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGJpbmRBbGwoY3R4KSB7CiAgICAgICAgICBmb3IgKHZhciBpIGluIGN0eCkgewogICAgICAgICAgICB2YXIgdiA9IGN0eFtpXTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Z1bmN0aW9uJyAmJiAhdi5fX2JvdW5kICYmICFBVVRPQklORF9CTEFDS0xJU1QuaGFzT3duUHJvcGVydHkoaSkpIHsKICAgICAgICAgICAgICAoY3R4W2ldID0gdi5iaW5kKGN0eCkpLl9fYm91bmQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjYWxsTWV0aG9kKGN0eCwgbSwgYXJncykgewogICAgICAgICAgaWYgKHR5cGVvZiBtID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBtID0gY3R4LmNvbnN0cnVjdG9yLnByb3RvdHlwZVttXTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodHlwZW9mIG0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0dXJuIG0uYXBwbHkoY3R4LCBhcmdzKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG11bHRpaG9vayhob29rcywgc2tpcER1cGxpY2F0ZXMpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKICAgICAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgICAgICAgICAgIHZhciByZXQ7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHIgPSBjYWxsTWV0aG9kKHRoaXMkMSwgaG9va3NbaV0sIGFyZ3VtZW50cyQxKTsKCiAgICAgICAgICAgICAgaWYgKHNraXBEdXBsaWNhdGVzICYmIHIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKCFyZXQpIHsKICAgICAgICAgICAgICAgICAgcmV0ID0ge307CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHIuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICAgICAgICAgIHJldFtrZXldID0gcltrZXldOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIHJldCA9IHI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG5ld0NvbXBvbmVudEhvb2socHJvcHMsIGNvbnRleHQpIHsKICAgICAgICAgIHByb3BzSG9vay5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KTsKICAgICAgICAgIHRoaXMuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IG11bHRpaG9vayhbcHJvcHNIb29rLCB0aGlzLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgfHwgJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnXSk7CiAgICAgICAgICB0aGlzLnJlbmRlciA9IG11bHRpaG9vayhbcHJvcHNIb29rLCBiZWZvcmVSZW5kZXIsIHRoaXMucmVuZGVyIHx8ICdyZW5kZXInLCBhZnRlclJlbmRlcl0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJvcHNIb29rKHByb3BzLCBjb250ZXh0KSB7CiAgICAgICAgICBpZiAoIXByb3BzKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8gUmVhY3QgYW5ub3lpbmdseSBzcGVjaWFsLWNhc2VzIHNpbmdsZSBjaGlsZHJlbiwgYW5kIHNvbWUgcmVhY3QgY29tcG9uZW50cyBhcmUgcmlkaWN1bG91c2x5IHN0cmljdCBhYm91dCB0aGlzLgoKCiAgICAgICAgICB2YXIgYyA9IHByb3BzLmNoaWxkcmVuOwoKICAgICAgICAgIGlmIChjICYmIEFycmF5LmlzQXJyYXkoYykgJiYgYy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgcHJvcHMuY2hpbGRyZW4gPSBjWzBdOyAvLyBidXQgaXRzIHRvdGFsbHkgc3RpbGwgZ29pbmcgdG8gYmUgYW4gQXJyYXkuCgogICAgICAgICAgICBpZiAocHJvcHMuY2hpbGRyZW4gJiYgX3R5cGVvZjQocHJvcHMuY2hpbGRyZW4pID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgIHByb3BzLmNoaWxkcmVuLmxlbmd0aCA9IDE7CiAgICAgICAgICAgICAgcHJvcHMuY2hpbGRyZW5bMF0gPSBwcm9wcy5jaGlsZHJlbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBhZGQgcHJvcHR5cGUgY2hlY2tpbmcKCgogICAgICAgICAgaWYgKERFVikgewogICAgICAgICAgICB2YXIgY3RvciA9IHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nID8gdGhpcyA6IHRoaXMuY29uc3RydWN0b3IsCiAgICAgICAgICAgICAgICBwcm9wVHlwZXMgPSB0aGlzLnByb3BUeXBlcyB8fCBjdG9yLnByb3BUeXBlczsKICAgICAgICAgICAgdmFyIGRpc3BsYXlOYW1lID0gdGhpcy5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWU7CgogICAgICAgICAgICBpZiAocHJvcFR5cGVzKSB7CiAgICAgICAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEuY2hlY2tQcm9wVHlwZXMocHJvcFR5cGVzLCBwcm9wcywgJ3Byb3AnLCBkaXNwbGF5TmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGJlZm9yZVJlbmRlcihwcm9wcykgewogICAgICAgICAgY3VycmVudENvbXBvbmVudCA9IHRoaXM7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZnRlclJlbmRlcigpIHsKICAgICAgICAgIGlmIChjdXJyZW50Q29tcG9uZW50ID09PSB0aGlzKSB7CiAgICAgICAgICAgIGN1cnJlbnRDb21wb25lbnQgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gQ29tcG9uZW50JDEocHJvcHMsIGNvbnRleHQsIG9wdHMpIHsKICAgICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siQ29tcG9uZW50Il0uY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCk7CgogICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0SW5pdGlhbFN0YXRlID8gdGhpcy5nZXRJbml0aWFsU3RhdGUoKSA6IHt9OwogICAgICAgICAgdGhpcy5yZWZzID0ge307CiAgICAgICAgICB0aGlzLl9yZWZQcm94aWVzID0ge307CgogICAgICAgICAgaWYgKG9wdHMgIT09IEJZUEFTU19IT09LKSB7CiAgICAgICAgICAgIG5ld0NvbXBvbmVudEhvb2suY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBleHRlbmQoQ29tcG9uZW50JDEucHJvdG90eXBlID0gbmV3IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1siQ29tcG9uZW50Il0oKSwgewogICAgICAgICAgY29uc3RydWN0b3I6IENvbXBvbmVudCQxLAogICAgICAgICAgaXNSZWFjdENvbXBvbmVudDoge30sCiAgICAgICAgICByZXBsYWNlU3RhdGU6IGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZShzdGF0ZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUsIGNhbGxiYWNrKTsKCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcyQxLnN0YXRlKSB7CiAgICAgICAgICAgICAgaWYgKCEoaSBpbiBzdGF0ZSkpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzJDEuc3RhdGVbaV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0RE9NTm9kZTogZnVuY3Rpb24gZ2V0RE9NTm9kZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZTsKICAgICAgICAgIH0sCiAgICAgICAgICBpc01vdW50ZWQ6IGZ1bmN0aW9uIGlzTW91bnRlZCgpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5iYXNlOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiBQdXJlQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7CiAgICAgICAgICBDb21wb25lbnQkMS5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KTsKICAgICAgICB9CgogICAgICAgIEYucHJvdG90eXBlID0gQ29tcG9uZW50JDEucHJvdG90eXBlOwogICAgICAgIFB1cmVDb21wb25lbnQucHJvdG90eXBlID0gbmV3IEYoKTsKICAgICAgICBQdXJlQ29tcG9uZW50LnByb3RvdHlwZS5pc1B1cmVSZWFjdENvbXBvbmVudCA9IHRydWU7CgogICAgICAgIFB1cmVDb21wb25lbnQucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wcywgc3RhdGUpIHsKICAgICAgICAgIHJldHVybiBzaGFsbG93RGlmZmVycyh0aGlzLnByb3BzLCBwcm9wcykgfHwgc2hhbGxvd0RpZmZlcnModGhpcy5zdGF0ZSwgc3RhdGUpOwogICAgICAgIH07CgogICAgICAgIHZhciBpbmRleCA9IHsKICAgICAgICAgIHZlcnNpb246IHZlcnNpb24sCiAgICAgICAgICBET006IERPTSwKICAgICAgICAgIFByb3BUeXBlczogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Byb3BfdHlwZXNfX19kZWZhdWx0LmEsCiAgICAgICAgICBDaGlsZHJlbjogQ2hpbGRyZW4sCiAgICAgICAgICByZW5kZXI6IHJlbmRlciQxLAogICAgICAgICAgY3JlYXRlQ2xhc3M6IGNyZWF0ZUNsYXNzLAogICAgICAgICAgY3JlYXRlRmFjdG9yeTogY3JlYXRlRmFjdG9yeSwKICAgICAgICAgIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsCiAgICAgICAgICBjbG9uZUVsZW1lbnQ6IGNsb25lRWxlbWVudCQxLAogICAgICAgICAgaXNWYWxpZEVsZW1lbnQ6IGlzVmFsaWRFbGVtZW50LAogICAgICAgICAgZmluZERPTU5vZGU6IGZpbmRET01Ob2RlLAogICAgICAgICAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogdW5tb3VudENvbXBvbmVudEF0Tm9kZSwKICAgICAgICAgIENvbXBvbmVudDogQ29tcG9uZW50JDEsCiAgICAgICAgICBQdXJlQ29tcG9uZW50OiBQdXJlQ29tcG9uZW50LAogICAgICAgICAgdW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyCiAgICAgICAgfTsKICAgICAgICAvKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovCgogICAgICAgIF9fd2VicGFja19leHBvcnRzX19bImRlZmF1bHQiXSA9IGluZGV4OwogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwogICAgICB9KS5jYWxsKF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgaWYgKCFpc09iamVjdChpdCkpIHRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTsKICAgICAgICByZXR1cm4gaXQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7CgogICAgICB2YXIgdG9QcmltaXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTsKCiAgICAgIHZhciBkUCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKICAgICAgZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpIHsKICAgICAgICBhbk9iamVjdChPKTsKICAgICAgICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7CiAgICAgICAgYW5PYmplY3QoQXR0cmlidXRlcyk7CiAgICAgICAgaWYgKElFOF9ET01fREVGSU5FKSB0cnkgewogICAgICAgICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8qIGVtcHR5ICovCiAgICAgICAgfQogICAgICAgIGlmICgnZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpIHRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhJyk7CiAgICAgICAgaWYgKCd2YWx1ZScgaW4gQXR0cmlidXRlcykgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7CiAgICAgICAgcmV0dXJuIE87CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiA3OwogICAgICAgICAgfQogICAgICAgIH0pLmEgIT0gNzsKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlcgogICAgICB2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307IC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdAogICAgICAvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXMKICAgICAgLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYQogICAgICAvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLgoKICAgICAgdmFyIGNhY2hlZFNldFRpbWVvdXQ7CiAgICAgIHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7CgogICAgICBmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7CiAgICAgIH0KCiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0OwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0OwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDsKICAgICAgICB9CiAgICAgIH0pKCk7CgogICAgICBmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikgewogICAgICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7CiAgICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnMKICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7CiAgICAgICAgfSAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZAoKCiAgICAgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7CiAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDsKICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzcwogICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHkKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvcgogICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7CiAgICAgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7CiAgICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnMKICAgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTsKICAgICAgICB9IC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWQKCgogICAgICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkgewogICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0OwogICAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3MKICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5CiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci4KICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dAogICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBxdWV1ZSA9IFtdOwogICAgICB2YXIgZHJhaW5pbmcgPSBmYWxzZTsKICAgICAgdmFyIGN1cnJlbnRRdWV1ZTsKICAgICAgdmFyIHF1ZXVlSW5kZXggPSAtMTsKCiAgICAgIGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHsKICAgICAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGRyYWluaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7CiAgICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgICAgfQoKICAgICAgICBpZiAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgICBkcmFpblF1ZXVlKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBkcmFpblF1ZXVlKCkgewogICAgICAgIGlmIChkcmFpbmluZykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7CiAgICAgICAgZHJhaW5pbmcgPSB0cnVlOwogICAgICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7CgogICAgICAgIHdoaWxlIChsZW4pIHsKICAgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlOwogICAgICAgICAgcXVldWUgPSBbXTsKCiAgICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHsKICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBjdXJyZW50UXVldWUgPSBudWxsOwogICAgICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICAgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICB9CgogICAgICBwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikgewogICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKCiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7CgogICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7CiAgICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpOwogICAgICAgIH0KICAgICAgfTsgLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0cwoKCiAgICAgIGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkgewogICAgICAgIHRoaXMuZnVuID0gZnVuOwogICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTsKICAgICAgfQoKICAgICAgSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwogICAgICB9OwoKICAgICAgcHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJzsKICAgICAgcHJvY2Vzcy5icm93c2VyID0gdHJ1ZTsKICAgICAgcHJvY2Vzcy5lbnYgPSB7fTsKICAgICAgcHJvY2Vzcy5hcmd2ID0gW107CiAgICAgIHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3VlcwoKICAgICAgcHJvY2Vzcy52ZXJzaW9ucyA9IHt9OwoKICAgICAgZnVuY3Rpb24gbm9vcCgpIHt9CgogICAgICBwcm9jZXNzLm9uID0gbm9vcDsKICAgICAgcHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7CiAgICAgIHByb2Nlc3Mub25jZSA9IG5vb3A7CiAgICAgIHByb2Nlc3Mub2ZmID0gbm9vcDsKICAgICAgcHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7CiAgICAgIHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDsKICAgICAgcHJvY2Vzcy5lbWl0ID0gbm9vcDsKICAgICAgcHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wOwogICAgICBwcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wOwoKICAgICAgcHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfTsKCiAgICAgIHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpOwogICAgICB9OwoKICAgICAgcHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICcvJzsKICAgICAgfTsKCiAgICAgIHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgfTsKCiAgICAgIHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gX3R5cGVvZjQoaXQpID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBkUCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CgogICAgICB2YXIgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpID8gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkgewogICAgICAgIHJldHVybiBkUC5mKG9iamVjdCwga2V5LCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7CiAgICAgIH0gOiBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7CiAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTsKICAgICAgICByZXR1cm4gb2JqZWN0OwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgdmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwga2V5KSB7CiAgICAgICAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCiAgICAgIHZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuLCB0aGF0LCBsZW5ndGgpIHsKICAgICAgICBhRnVuY3Rpb24oZm4pOwogICAgICAgIGlmICh0aGF0ID09PSB1bmRlZmluZWQpIHJldHVybiBmbjsKCiAgICAgICAgc3dpdGNoIChsZW5ndGgpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpCiAgICAgICAgLyogLi4uYXJncyAqLwogICAgICAgIHsKICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYykgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gISFleGVjKCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0ge307CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3MKICAgICAgdmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKCiAgICAgIHZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBJT2JqZWN0KGRlZmluZWQoaXQpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCiAgICAgIHZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBpc0RhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMik7CgogICAgICB2YXIgTUlMTElTRUNPTkRTX0lOX0hPVVIgPSAzNjAwMDAwOwogICAgICB2YXIgTUlMTElTRUNPTkRTX0lOX01JTlVURSA9IDYwMDAwOwogICAgICB2YXIgREVGQVVMVF9BRERJVElPTkFMX0RJR0lUUyA9IDI7CiAgICAgIHZhciBwYXJzZVRva2VuRGF0ZVRpbWVEZWxpbWV0ZXIgPSAvW1QgXS87CiAgICAgIHZhciBwYXJzZVRva2VuUGxhaW5UaW1lID0gLzovOyAvLyB5ZWFyIHRva2VucwoKICAgICAgdmFyIHBhcnNlVG9rZW5ZWSA9IC9eKFxkezJ9KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbnNZWVkgPSBbL14oWystXVxkezJ9KSQvLCAvLyAwIGFkZGl0aW9uYWwgZGlnaXRzCiAgICAgIC9eKFsrLV1cZHszfSkkLywgLy8gMSBhZGRpdGlvbmFsIGRpZ2l0CiAgICAgIC9eKFsrLV1cZHs0fSkkLyAvLyAyIGFkZGl0aW9uYWwgZGlnaXRzCiAgICAgIF07CiAgICAgIHZhciBwYXJzZVRva2VuWVlZWSA9IC9eKFxkezR9KS87CiAgICAgIHZhciBwYXJzZVRva2Vuc1lZWVlZID0gWy9eKFsrLV1cZHs0fSkvLCAvLyAwIGFkZGl0aW9uYWwgZGlnaXRzCiAgICAgIC9eKFsrLV1cZHs1fSkvLCAvLyAxIGFkZGl0aW9uYWwgZGlnaXQKICAgICAgL14oWystXVxkezZ9KS8gLy8gMiBhZGRpdGlvbmFsIGRpZ2l0cwogICAgICBdOyAvLyBkYXRlIHRva2VucwoKICAgICAgdmFyIHBhcnNlVG9rZW5NTSA9IC9eLShcZHsyfSkkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5EREQgPSAvXi0/KFxkezN9KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbk1NREQgPSAvXi0/KFxkezJ9KS0/KFxkezJ9KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbld3dyA9IC9eLT9XKFxkezJ9KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbld3d0QgPSAvXi0/VyhcZHsyfSktPyhcZHsxfSkkLzsgLy8gdGltZSB0b2tlbnMKCiAgICAgIHZhciBwYXJzZVRva2VuSEggPSAvXihcZHsyfShbLixdXGQqKT8pJC87CiAgICAgIHZhciBwYXJzZVRva2VuSEhNTSA9IC9eKFxkezJ9KTo/KFxkezJ9KFsuLF1cZCopPykkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5ISE1NU1MgPSAvXihcZHsyfSk6PyhcZHsyfSk6PyhcZHsyfShbLixdXGQqKT8pJC87IC8vIHRpbWV6b25lIHRva2VucwoKICAgICAgdmFyIHBhcnNlVG9rZW5UaW1lem9uZSA9IC8oW1orLV0uKikkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5UaW1lem9uZVogPSAvXihaKSQvOwogICAgICB2YXIgcGFyc2VUb2tlblRpbWV6b25lSEggPSAvXihbKy1dKShcZHsyfSkkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5UaW1lem9uZUhITU0gPSAvXihbKy1dKShcZHsyfSk6PyhcZHsyfSkkLzsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS4KICAgICAgICoKICAgICAgICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS4KICAgICAgICoKICAgICAgICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLgogICAgICAgKgogICAgICAgKiBJZiBhbiBhcmd1bWVudCBpcyBhIHN0cmluZywgdGhlIGZ1bmN0aW9uIHRyaWVzIHRvIHBhcnNlIGl0LgogICAgICAgKiBGdW5jdGlvbiBhY2NlcHRzIGNvbXBsZXRlIElTTyA4NjAxIGZvcm1hdHMgYXMgd2VsbCBhcyBwYXJ0aWFsIGltcGxlbWVudGF0aW9ucy4KICAgICAgICogSVNPIDg2MDE6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEKICAgICAgICoKICAgICAgICogSWYgYWxsIGFib3ZlIGZhaWxzLCB0aGUgZnVuY3Rpb24gcGFzc2VzIHRoZSBnaXZlbiBhcmd1bWVudCB0byBEYXRlIGNvbnN0cnVjdG9yLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydAogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMKICAgICAgICogQHBhcmFtIHswIHwgMSB8IDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdAogICAgICAgKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmUKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gQ29udmVydCBzdHJpbmcgJzIwMTQtMDItMTFUMTE6MzA6MzAnIHRvIGRhdGU6CiAgICAgICAqIHZhciByZXN1bHQgPSBwYXJzZSgnMjAxNC0wMi0xMVQxMTozMDozMCcpCiAgICAgICAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFBhcnNlIHN0cmluZyAnKzAyMDE0MTAxJywKICAgICAgICogLy8gaWYgdGhlIGFkZGl0aW9uYWwgbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgZXh0ZW5kZWQgeWVhciBmb3JtYXQgaXMgMToKICAgICAgICogdmFyIHJlc3VsdCA9IHBhcnNlKCcrMDIwMTQxMDEnLCB7YWRkaXRpb25hbERpZ2l0czogMX0pCiAgICAgICAqIC8vPT4gRnJpIEFwciAxMSAyMDE0IDAwOjAwOjAwCiAgICAgICAqLwoKICAgICAgZnVuY3Rpb24gcGFyc2UoYXJndW1lbnQsIGRpcnR5T3B0aW9ucykgewogICAgICAgIGlmIChpc0RhdGUoYXJndW1lbnQpKSB7CiAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTAKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ICE9PSAnc3RyaW5nJykgewogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTsKICAgICAgICB9CgogICAgICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogICAgICAgIHZhciBhZGRpdGlvbmFsRGlnaXRzID0gb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzOwoKICAgICAgICBpZiAoYWRkaXRpb25hbERpZ2l0cyA9PSBudWxsKSB7CiAgICAgICAgICBhZGRpdGlvbmFsRGlnaXRzID0gREVGQVVMVF9BRERJVElPTkFMX0RJR0lUUzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWRkaXRpb25hbERpZ2l0cyA9IE51bWJlcihhZGRpdGlvbmFsRGlnaXRzKTsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRlU3RyaW5ncyA9IHNwbGl0RGF0ZVN0cmluZyhhcmd1bWVudCk7CiAgICAgICAgdmFyIHBhcnNlWWVhclJlc3VsdCA9IHBhcnNlWWVhcihkYXRlU3RyaW5ncy5kYXRlLCBhZGRpdGlvbmFsRGlnaXRzKTsKICAgICAgICB2YXIgeWVhciA9IHBhcnNlWWVhclJlc3VsdC55ZWFyOwogICAgICAgIHZhciByZXN0RGF0ZVN0cmluZyA9IHBhcnNlWWVhclJlc3VsdC5yZXN0RGF0ZVN0cmluZzsKICAgICAgICB2YXIgZGF0ZSA9IHBhcnNlRGF0ZShyZXN0RGF0ZVN0cmluZywgeWVhcik7CgogICAgICAgIGlmIChkYXRlKSB7CiAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7CiAgICAgICAgICB2YXIgdGltZSA9IDA7CiAgICAgICAgICB2YXIgb2Zmc2V0OwoKICAgICAgICAgIGlmIChkYXRlU3RyaW5ncy50aW1lKSB7CiAgICAgICAgICAgIHRpbWUgPSBwYXJzZVRpbWUoZGF0ZVN0cmluZ3MudGltZSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGRhdGVTdHJpbmdzLnRpbWV6b25lKSB7CiAgICAgICAgICAgIG9mZnNldCA9IHBhcnNlVGltZXpvbmUoZGF0ZVN0cmluZ3MudGltZXpvbmUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gZ2V0IG9mZnNldCBhY2N1cmF0ZSB0byBob3VyIGluIHRpbWV6b25lcyB0aGF0IGNoYW5nZSBvZmZzZXQKICAgICAgICAgICAgb2Zmc2V0ID0gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSkuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgICAgICAgb2Zmc2V0ID0gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSArIG9mZnNldCAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUpLmdldFRpbWV6b25lT2Zmc2V0KCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUgKyBvZmZzZXQgKiBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNwbGl0RGF0ZVN0cmluZyhkYXRlU3RyaW5nKSB7CiAgICAgICAgdmFyIGRhdGVTdHJpbmdzID0ge307CiAgICAgICAgdmFyIGFycmF5ID0gZGF0ZVN0cmluZy5zcGxpdChwYXJzZVRva2VuRGF0ZVRpbWVEZWxpbWV0ZXIpOwogICAgICAgIHZhciB0aW1lU3RyaW5nOwoKICAgICAgICBpZiAocGFyc2VUb2tlblBsYWluVGltZS50ZXN0KGFycmF5WzBdKSkgewogICAgICAgICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IG51bGw7CiAgICAgICAgICB0aW1lU3RyaW5nID0gYXJyYXlbMF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBhcnJheVswXTsKICAgICAgICAgIHRpbWVTdHJpbmcgPSBhcnJheVsxXTsKICAgICAgICB9CgogICAgICAgIGlmICh0aW1lU3RyaW5nKSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSBwYXJzZVRva2VuVGltZXpvbmUuZXhlYyh0aW1lU3RyaW5nKTsKCiAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmcucmVwbGFjZSh0b2tlblsxXSwgJycpOwogICAgICAgICAgICBkYXRlU3RyaW5ncy50aW1lem9uZSA9IHRva2VuWzFdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZGF0ZVN0cmluZ3M7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHBhcnNlWWVhcihkYXRlU3RyaW5nLCBhZGRpdGlvbmFsRGlnaXRzKSB7CiAgICAgICAgdmFyIHBhcnNlVG9rZW5ZWVkgPSBwYXJzZVRva2Vuc1lZWVthZGRpdGlvbmFsRGlnaXRzXTsKICAgICAgICB2YXIgcGFyc2VUb2tlbllZWVlZID0gcGFyc2VUb2tlbnNZWVlZWVthZGRpdGlvbmFsRGlnaXRzXTsKICAgICAgICB2YXIgdG9rZW47IC8vIFlZWVkgb3IgwrFZWVlZWQoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5ZWVlZLmV4ZWMoZGF0ZVN0cmluZykgfHwgcGFyc2VUb2tlbllZWVlZLmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgdmFyIHllYXJTdHJpbmcgPSB0b2tlblsxXTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHllYXI6IHBhcnNlSW50KHllYXJTdHJpbmcsIDEwKSwKICAgICAgICAgICAgcmVzdERhdGVTdHJpbmc6IGRhdGVTdHJpbmcuc2xpY2UoeWVhclN0cmluZy5sZW5ndGgpCiAgICAgICAgICB9OwogICAgICAgIH0gLy8gWVkgb3IgwrFZWVkKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbllZLmV4ZWMoZGF0ZVN0cmluZykgfHwgcGFyc2VUb2tlbllZWS5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHZhciBjZW50dXJ5U3RyaW5nID0gdG9rZW5bMV07CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB5ZWFyOiBwYXJzZUludChjZW50dXJ5U3RyaW5nLCAxMCkgKiAxMDAsCiAgICAgICAgICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKGNlbnR1cnlTdHJpbmcubGVuZ3RoKQogICAgICAgICAgfTsKICAgICAgICB9IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyCgoKICAgICAgICByZXR1cm4gewogICAgICAgICAgeWVhcjogbnVsbAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlU3RyaW5nLCB5ZWFyKSB7CiAgICAgICAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXIKICAgICAgICBpZiAoeWVhciA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICB2YXIgdG9rZW47CiAgICAgICAgdmFyIGRhdGU7CiAgICAgICAgdmFyIG1vbnRoOwogICAgICAgIHZhciB3ZWVrOyAvLyBZWVlZCgogICAgICAgIGlmIChkYXRlU3RyaW5nLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDApOwogICAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyKTsKICAgICAgICAgIHJldHVybiBkYXRlOwogICAgICAgIH0gLy8gWVlZWS1NTQoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuTU0uZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMCk7CiAgICAgICAgICBtb250aCA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCkgLSAxOwogICAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCk7CiAgICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgICB9IC8vIFlZWVktREREIG9yIFlZWVlEREQKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbkRERC5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgICAgICAgIHZhciBkYXlPZlllYXIgPSBwYXJzZUludCh0b2tlblsxXSwgMTApOwogICAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCBkYXlPZlllYXIpOwogICAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgICAgfSAvLyBZWVlZLU1NLUREIG9yIFlZWVlNTURECgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5NTURELmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDApOwogICAgICAgICAgbW9udGggPSBwYXJzZUludCh0b2tlblsxXSwgMTApIC0gMTsKICAgICAgICAgIHZhciBkYXkgPSBwYXJzZUludCh0b2tlblsyXSwgMTApOwogICAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCwgZGF5KTsKICAgICAgICAgIHJldHVybiBkYXRlOwogICAgICAgIH0gLy8gWVlZWS1Xd3cgb3IgWVlZWVd3dwoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuV3d3LmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgd2VlayA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCkgLSAxOwogICAgICAgICAgcmV0dXJuIGRheU9mSVNPWWVhcih5ZWFyLCB3ZWVrKTsKICAgICAgICB9IC8vIFlZWVktV3d3LUQgb3IgWVlZWVd3d0QKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbld3d0QuZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICB3ZWVrID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKSAtIDE7CiAgICAgICAgICB2YXIgZGF5T2ZXZWVrID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKSAtIDE7CiAgICAgICAgICByZXR1cm4gZGF5T2ZJU09ZZWFyKHllYXIsIHdlZWssIGRheU9mV2Vlayk7CiAgICAgICAgfSAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgZGF0ZQoKCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHBhcnNlVGltZSh0aW1lU3RyaW5nKSB7CiAgICAgICAgdmFyIHRva2VuOwogICAgICAgIHZhciBob3VyczsKICAgICAgICB2YXIgbWludXRlczsgLy8gaGgKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuSEguZXhlYyh0aW1lU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBob3VycyA9IHBhcnNlRmxvYXQodG9rZW5bMV0ucmVwbGFjZSgnLCcsICcuJykpOwogICAgICAgICAgcmV0dXJuIGhvdXJzICUgMjQgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUjsKICAgICAgICB9IC8vIGhoOm1tIG9yIGhobW0KCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbkhITU0uZXhlYyh0aW1lU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCk7CiAgICAgICAgICBtaW51dGVzID0gcGFyc2VGbG9hdCh0b2tlblsyXS5yZXBsYWNlKCcsJywgJy4nKSk7CiAgICAgICAgICByZXR1cm4gaG91cnMgJSAyNCAqIE1JTExJU0VDT05EU19JTl9IT1VSICsgbWludXRlcyAqIE1JTExJU0VDT05EU19JTl9NSU5VVEU7CiAgICAgICAgfSAvLyBoaDptbTpzcyBvciBoaG1tc3MKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbkhITU1TUy5leGVjKHRpbWVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKTsKICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0b2tlblsyXSwgMTApOwogICAgICAgICAgdmFyIHNlY29uZHMgPSBwYXJzZUZsb2F0KHRva2VuWzNdLnJlcGxhY2UoJywnLCAnLicpKTsKICAgICAgICAgIHJldHVybiBob3VycyAlIDI0ICogTUlMTElTRUNPTkRTX0lOX0hPVVIgKyBtaW51dGVzICogTUlMTElTRUNPTkRTX0lOX01JTlVURSArIHNlY29uZHMgKiAxMDAwOwogICAgICAgIH0gLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHRpbWUKCgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICBmdW5jdGlvbiBwYXJzZVRpbWV6b25lKHRpbWV6b25lU3RyaW5nKSB7CiAgICAgICAgdmFyIHRva2VuOwogICAgICAgIHZhciBhYnNvbHV0ZU9mZnNldDsgLy8gWgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5UaW1lem9uZVouZXhlYyh0aW1lem9uZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSAvLyDCsWhoCgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5UaW1lem9uZUhILmV4ZWModGltZXpvbmVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGFic29sdXRlT2Zmc2V0ID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKSAqIDYwOwogICAgICAgICAgcmV0dXJuIHRva2VuWzFdID09PSAnKycgPyAtYWJzb2x1dGVPZmZzZXQgOiBhYnNvbHV0ZU9mZnNldDsKICAgICAgICB9IC8vIMKxaGg6bW0gb3IgwrFoaG1tCgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5UaW1lem9uZUhITU0uZXhlYyh0aW1lem9uZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgYWJzb2x1dGVPZmZzZXQgPSBwYXJzZUludCh0b2tlblsyXSwgMTApICogNjAgKyBwYXJzZUludCh0b2tlblszXSwgMTApOwogICAgICAgICAgcmV0dXJuIHRva2VuWzFdID09PSAnKycgPyAtYWJzb2x1dGVPZmZzZXQgOiBhYnNvbHV0ZU9mZnNldDsKICAgICAgICB9CgogICAgICAgIHJldHVybiAwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkYXlPZklTT1llYXIoaXNvWWVhciwgd2VlaywgZGF5KSB7CiAgICAgICAgd2VlayA9IHdlZWsgfHwgMDsKICAgICAgICBkYXkgPSBkYXkgfHwgMDsKICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApOwogICAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoaXNvWWVhciwgMCwgNCk7CiAgICAgICAgdmFyIGZvdXJ0aE9mSmFudWFyeURheSA9IGRhdGUuZ2V0VVRDRGF5KCkgfHwgNzsKICAgICAgICB2YXIgZGlmZiA9IHdlZWsgKiA3ICsgZGF5ICsgMSAtIGZvdXJ0aE9mSmFudWFyeURheTsKICAgICAgICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBkaWZmKTsKICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBwYXJzZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGJpdG1hcCwgdmFsdWUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZW51bWVyYWJsZTogIShiaXRtYXAgJiAxKSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSwKICAgICAgICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLAogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgJGF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpKHRydWUpOyAvLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCgoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1MSkoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24gKGl0ZXJhdGVkKSB7CiAgICAgICAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldAoKICAgICAgICB0aGlzLl9pID0gMDsgLy8gbmV4dCBpbmRleAogICAgICAgIC8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBPID0gdGhpcy5fdDsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9pOwogICAgICAgIHZhciBwb2ludDsKICAgICAgICBpZiAoaW5kZXggPj0gTy5sZW5ndGgpIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLAogICAgICAgICAgZG9uZTogdHJ1ZQogICAgICAgIH07CiAgICAgICAgcG9pbnQgPSAkYXQoTywgaW5kZXgpOwogICAgICAgIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogcG9pbnQsCiAgICAgICAgICBkb25lOiBmYWxzZQogICAgICAgIH07CiAgICAgIH0pOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gdHJ1ZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKQogICAgICB2YXIgJGtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTsKCiAgICAgIHZhciBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pIHsKICAgICAgICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgaWYgKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKSB0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpOwogICAgICAgIHJldHVybiBpdDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICB2YXIgaWQgPSAwOwogICAgICB2YXIgcHggPSBNYXRoLnJhbmRvbSgpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZGVmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KS5mOwoKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgdGFnLCBzdGF0KSB7CiAgICAgICAgaWYgKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpIGRlZihpdCwgVEFHLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogdGFnCiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDI3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpOwoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgaGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKICAgICAgdmFyIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKICAgICAgdmFyIFRPX1NUUklOR19UQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCd0b1N0cmluZ1RhZycpOwoKICAgICAgdmFyIERPTUl0ZXJhYmxlcyA9ICgnQ1NTUnVsZUxpc3QsQ1NTU3R5bGVEZWNsYXJhdGlvbixDU1NWYWx1ZUxpc3QsQ2xpZW50UmVjdExpc3QsRE9NUmVjdExpc3QsRE9NU3RyaW5nTGlzdCwnICsgJ0RPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsJyArICdNZWRpYUxpc3QsTWltZVR5cGVBcnJheSxOYW1lZE5vZGVNYXAsTm9kZUxpc3QsUGFpbnRSZXF1ZXN0TGlzdCxQbHVnaW4sUGx1Z2luQXJyYXksU1ZHTGVuZ3RoTGlzdCxTVkdOdW1iZXJMaXN0LCcgKyAnU1ZHUGF0aFNlZ0xpc3QsU1ZHUG9pbnRMaXN0LFNWR1N0cmluZ0xpc3QsU1ZHVHJhbnNmb3JtTGlzdCxTb3VyY2VCdWZmZXJMaXN0LFN0eWxlU2hlZXRMaXN0LFRleHRUcmFja0N1ZUxpc3QsJyArICdUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdCcpLnNwbGl0KCcsJyk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IERPTUl0ZXJhYmxlcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBOQU1FID0gRE9NSXRlcmFibGVzW2ldOwogICAgICAgIHZhciBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdOwogICAgICAgIHZhciBwcm90byA9IENvbGxlY3Rpb24gJiYgQ29sbGVjdGlvbi5wcm90b3R5cGU7CiAgICAgICAgaWYgKHByb3RvICYmICFwcm90b1tUT19TVFJJTkdfVEFHXSkgaGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7CiAgICAgICAgSXRlcmF0b3JzW05BTUVdID0gSXRlcmF0b3JzLkFycmF5OwogICAgICB9CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDI4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZXhwb3J0cy5mID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDMwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIHZhciBfZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTsKCiAgICAgIHZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICAgICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTJbImRlZmF1bHQiXSkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgICAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgICAgICAgcmV0dXJuIENvbnN0cnVjdG9yOwogICAgICAgIH07CiAgICAgIH0oKTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIHZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQ7IC8vIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnIGluIG9sZCBJRQoKCiAgICAgIHZhciBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7IC8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlCiAgICAgIC8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIFMpIHsKICAgICAgICBpZiAoIWlzT2JqZWN0KGl0KSkgcmV0dXJuIGl0OwogICAgICAgIHZhciBmbiwgdmFsOwogICAgICAgIGlmIChTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsOwogICAgICAgIGlmICh0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsOwogICAgICAgIGlmICghUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSkgcmV0dXJuIHZhbDsKICAgICAgICB0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLgogICAgICAgKgogICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgKi8KCiAgICAgIHZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9ICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCc7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZXNTZWNyZXQ7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMzQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvLyA3LjEuNCBUb0ludGVnZXIKICAgICAgdmFyIGNlaWwgPSBNYXRoLmNlaWw7CiAgICAgIHZhciBmbG9vciA9IE1hdGguZmxvb3I7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBpc05hTihpdCA9ICtpdCkgPyAwIDogKGl0ID4gMCA/IGZsb29yIDogY2VpbCkoaXQpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgaWYgKGl0ID09IHVuZGVmaW5lZCkgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIiArIGl0KTsKICAgICAgICByZXR1cm4gaXQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDM2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgZFBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpOwoKICAgICAgdmFyIGVudW1CdWdLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7CgogICAgICB2YXIgSUVfUFJPVE8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSgnSUVfUFJPVE8nKTsKCiAgICAgIHZhciBFbXB0eSA9IGZ1bmN0aW9uIEVtcHR5KCkgewogICAgICAgIC8qIGVtcHR5ICovCiAgICAgIH07CgogICAgICB2YXIgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7IC8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGUKCiAgICAgIHZhciBfY3JlYXRlRGljdCA9IGZ1bmN0aW9uIGNyZWF0ZURpY3QoKSB7CiAgICAgICAgLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWcKICAgICAgICB2YXIgaWZyYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSkoJ2lmcmFtZScpOwoKICAgICAgICB2YXIgaSA9IGVudW1CdWdLZXlzLmxlbmd0aDsKICAgICAgICB2YXIgbHQgPSAnPCc7CiAgICAgICAgdmFyIGd0ID0gJz4nOwogICAgICAgIHZhciBpZnJhbWVEb2N1bWVudDsKICAgICAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1NSkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKCiAgICAgICAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybAogICAgICAgIC8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7CiAgICAgICAgLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwoKICAgICAgICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50OwogICAgICAgIGlmcmFtZURvY3VtZW50Lm9wZW4oKTsKICAgICAgICBpZnJhbWVEb2N1bWVudC53cml0ZShsdCArICdzY3JpcHQnICsgZ3QgKyAnZG9jdW1lbnQuRj1PYmplY3QnICsgbHQgKyAnL3NjcmlwdCcgKyBndCk7CiAgICAgICAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTsKICAgICAgICBfY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7CgogICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgIGRlbGV0ZSBfY3JlYXRlRGljdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2ldXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBfY3JlYXRlRGljdCgpOwogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgaWYgKE8gIT09IG51bGwpIHsKICAgICAgICAgIEVtcHR5W1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTsKICAgICAgICAgIHJlc3VsdCA9IG5ldyBFbXB0eSgpOwogICAgICAgICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7IC8vIGFkZCAiX19wcm90b19fIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsCgogICAgICAgICAgcmVzdWx0W0lFX1BST1RPXSA9IE87CiAgICAgICAgfSBlbHNlIHJlc3VsdCA9IF9jcmVhdGVEaWN0KCk7CgogICAgICAgIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkUHMocmVzdWx0LCBQcm9wZXJ0aWVzKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyA3LjEuMTUgVG9MZW5ndGgKICAgICAgdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKICAgICAgdmFyIG1pbiA9IE1hdGgubWluOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBzaGFyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KSgna2V5cycpOwoKICAgICAgdmFyIHVpZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIHNoYXJlZFtrZXldIHx8IChzaGFyZWRba2V5XSA9IHVpZChrZXkpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJzsKICAgICAgdmFyIHN0b3JlID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOwogICAgICAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewogICAgICAgIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoge30pOwogICAgICB9KSgndmVyc2lvbnMnLCBbXSkucHVzaCh7CiAgICAgICAgdmVyc2lvbjogY29yZS52ZXJzaW9uLAogICAgICAgIG1vZGU6IF9fd2VicGFja19yZXF1aXJlX18oMjEpID8gJ3B1cmUnIDogJ2dsb2JhbCcsCiAgICAgICAgY29weXJpZ2h0OiAnwqkgMjAxOSBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KScKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNDAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzCiAgICAgIG1vZHVsZS5leHBvcnRzID0gJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZicuc3BsaXQoJywnKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCiAgICAgIHZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKCiAgICAgIHZhciBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCd0b1N0cmluZ1RhZycpOyAvLyBFUzMgd3JvbmcgaGVyZQoKCiAgICAgIHZhciBBUkcgPSBjb2YoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBhcmd1bWVudHM7CiAgICAgIH0oKSkgPT0gJ0FyZ3VtZW50cyc7IC8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yCgogICAgICB2YXIgdHJ5R2V0ID0gZnVuY3Rpb24gdHJ5R2V0KGl0LCBrZXkpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGl0W2tleV07CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLyogZW1wdHkgKi8KICAgICAgICB9CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHZhciBPLCBULCBCOwogICAgICAgIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkID8gJ1VuZGVmaW5lZCcgOiBpdCA9PT0gbnVsbCA/ICdOdWxsJyAvLyBAQHRvU3RyaW5nVGFnIGNhc2UKICAgICAgICA6IHR5cGVvZiAoVCA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVEFHKSkgPT0gJ3N0cmluZycgPyBUIC8vIGJ1aWx0aW5UYWcgY2FzZQogICAgICAgIDogQVJHID8gY29mKE8pIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2sKICAgICAgICA6IChCID0gY29mKE8pKSA9PSAnT2JqZWN0JyAmJiB0eXBlb2YgTy5jYWxsZWUgPT0gJ2Z1bmN0aW9uJyA/ICdBcmd1bWVudHMnIDogQjsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNDIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgY2xhc3NvZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwoKICAgICAgdmFyIElURVJBVE9SID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKTsKCiAgICAgIHZhciBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5nZXRJdGVyYXRvck1ldGhvZCA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIGlmIChpdCAhPSB1bmRlZmluZWQpIHJldHVybiBpdFtJVEVSQVRPUl0gfHwgaXRbJ0BAaXRlcmF0b3InXSB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA0MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gMjUuNC4xLjUgTmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKCiAgICAgIHZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCiAgICAgIGZ1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KEMpIHsKICAgICAgICB2YXIgcmVzb2x2ZSwgcmVqZWN0OwogICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uICgkJHJlc29sdmUsICQkcmVqZWN0KSB7CiAgICAgICAgICBpZiAocmVzb2x2ZSAhPT0gdW5kZWZpbmVkIHx8IHJlamVjdCAhPT0gdW5kZWZpbmVkKSB0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7CiAgICAgICAgICByZXNvbHZlID0gJCRyZXNvbHZlOwogICAgICAgICAgcmVqZWN0ID0gJCRyZWplY3Q7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpOwogICAgICAgIHRoaXMucmVqZWN0ID0gYUZ1bmN0aW9uKHJlamVjdCk7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiAoQykgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDQ0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIGV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNDYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCiAgICAgIHZhciBMSUJSQVJZID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7CgogICAgICB2YXIgd2tzRXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7CgogICAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLmY7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTsKICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSkgZGVmaW5lUHJvcGVydHkoJFN5bWJvbCwgbmFtZSwgewogICAgICAgICAgdmFsdWU6IHdrc0V4dC5mKG5hbWUpCiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDQ3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgICBleHBvcnRzLm9taXQgPSBvbWl0OwogICAgICBleHBvcnRzLmFycmF5c0VxdWFsID0gYXJyYXlzRXF1YWw7CgogICAgICB2YXIgaXNFbGVtZW50QW5TRkMgPSBleHBvcnRzLmlzRWxlbWVudEFuU0ZDID0gZnVuY3Rpb24gaXNFbGVtZW50QW5TRkMoZWxlbWVudCkgewogICAgICAgIHZhciBpc05hdGl2ZURPTUVsZW1lbnQgPSB0eXBlb2YgZWxlbWVudC50eXBlID09PSAnc3RyaW5nJzsKCiAgICAgICAgaWYgKGlzTmF0aXZlRE9NRWxlbWVudCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICFlbGVtZW50LnR5cGUucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQ7CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBvbWl0KG9iaikgewogICAgICAgIHZhciBhdHRycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZihrZXkpID09PSAtMSkgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGFycmF5c0VxdWFsKGEsIGIpIHsKICAgICAgICB2YXIgc2FtZU9iamVjdCA9IGEgPT09IGI7CgogICAgICAgIGlmIChzYW1lT2JqZWN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHZhciBub3RCb3RoQXJyYXlzID0gIUFycmF5LmlzQXJyYXkoYSkgfHwgIUFycmF5LmlzQXJyYXkoYik7CiAgICAgICAgdmFyIGRpZmZlcmVudExlbmd0aHMgPSBhLmxlbmd0aCAhPT0gYi5sZW5ndGg7CgogICAgICAgIGlmIChub3RCb3RoQXJyYXlzIHx8IGRpZmZlcmVudExlbmd0aHMpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhLmV2ZXJ5KGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkgewogICAgICAgICAgcmV0dXJuIGVsZW1lbnQgPT09IGJbaW5kZXhdOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBtZW1vaXplU3RyaW5nKGZuKSB7CiAgICAgICAgdmFyIGNhY2hlID0ge307CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICAgIGlmICghY2FjaGVbc3RyXSkgewogICAgICAgICAgICBjYWNoZVtzdHJdID0gZm4oc3RyKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gY2FjaGVbc3RyXTsKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgaHlwaGVuYXRlID0gZXhwb3J0cy5oeXBoZW5hdGUgPSBtZW1vaXplU3RyaW5nKGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbQS1aXSkvZywgJy0kMScpLnRvTG93ZXJDYXNlKCk7CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQ4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXyg4KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX3JlcXVpcmVfXygzMSkoJ2RpdicpLCAnYScsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICAgIH0KICAgICAgICB9KS5hICE9IDc7CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQ5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oODcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oODgpOwogICAgICAgIH0KICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvKioqLwogICAgfSwKICAgIC8qIDUxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIExJQlJBUlkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciByZWRlZmluZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpOwoKICAgICAgdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKCiAgICAgIHZhciBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCiAgICAgIHZhciAkaXRlckNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTAyKTsKCiAgICAgIHZhciBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwoKICAgICAgdmFyIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7CgogICAgICB2YXIgSVRFUkFUT1IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpOwoKICAgICAgdmFyIEJVR0dZID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpOyAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgCgogICAgICB2YXIgRkZfSVRFUkFUT1IgPSAnQEBpdGVyYXRvcic7CiAgICAgIHZhciBLRVlTID0gJ2tleXMnOwogICAgICB2YXIgVkFMVUVTID0gJ3ZhbHVlcyc7CgogICAgICB2YXIgcmV0dXJuVGhpcyA9IGZ1bmN0aW9uIHJldHVyblRoaXMoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpIHsKICAgICAgICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7CgogICAgICAgIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbiBnZXRNZXRob2Qoa2luZCkgewogICAgICAgICAgaWYgKCFCVUdHWSAmJiBraW5kIGluIHByb3RvKSByZXR1cm4gcHJvdG9ba2luZF07CgogICAgICAgICAgc3dpdGNoIChraW5kKSB7CiAgICAgICAgICAgIGNhc2UgS0VZUzoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ga2V5cygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNhc2UgVkFMVUVTOgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGVudHJpZXMoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7CiAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIHZhciBUQUcgPSBOQU1FICsgJyBJdGVyYXRvcic7CiAgICAgICAgdmFyIERFRl9WQUxVRVMgPSBERUZBVUxUID09IFZBTFVFUzsKICAgICAgICB2YXIgVkFMVUVTX0JVRyA9IGZhbHNlOwogICAgICAgIHZhciBwcm90byA9IEJhc2UucHJvdG90eXBlOwogICAgICAgIHZhciAkbmF0aXZlID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdOwogICAgICAgIHZhciAkZGVmYXVsdCA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpOwogICAgICAgIHZhciAkZW50cmllcyA9IERFRkFVTFQgPyAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJykgOiB1bmRlZmluZWQ7CiAgICAgICAgdmFyICRhbnlOYXRpdmUgPSBOQU1FID09ICdBcnJheScgPyBwcm90by5lbnRyaWVzIHx8ICRuYXRpdmUgOiAkbmF0aXZlOwogICAgICAgIHZhciBtZXRob2RzLCBrZXksIEl0ZXJhdG9yUHJvdG90eXBlOyAvLyBGaXggbmF0aXZlCgogICAgICAgIGlmICgkYW55TmF0aXZlKSB7CiAgICAgICAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSgpKSk7CgogICAgICAgICAgaWYgKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlICYmIEl0ZXJhdG9yUHJvdG90eXBlLm5leHQpIHsKICAgICAgICAgICAgLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9ycwogICAgICAgICAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTsgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzCgogICAgICAgICAgICBpZiAoIUxJQlJBUlkgJiYgdHlwZW9mIEl0ZXJhdG9yUHJvdG90eXBlW0lURVJBVE9SXSAhPSAnZnVuY3Rpb24nKSBoaWRlKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUiwgcmV0dXJuVGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGCgoKICAgICAgICBpZiAoREVGX1ZBTFVFUyAmJiAkbmF0aXZlICYmICRuYXRpdmUubmFtZSAhPT0gVkFMVUVTKSB7CiAgICAgICAgICBWQUxVRVNfQlVHID0gdHJ1ZTsKCiAgICAgICAgICAkZGVmYXVsdCA9IGZ1bmN0aW9uIHZhbHVlcygpIHsKICAgICAgICAgICAgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsKICAgICAgICAgIH07CiAgICAgICAgfSAvLyBEZWZpbmUgaXRlcmF0b3IKCgogICAgICAgIGlmICgoIUxJQlJBUlkgfHwgRk9SQ0VEKSAmJiAoQlVHR1kgfHwgVkFMVUVTX0JVRyB8fCAhcHJvdG9bSVRFUkFUT1JdKSkgewogICAgICAgICAgaGlkZShwcm90bywgSVRFUkFUT1IsICRkZWZhdWx0KTsKICAgICAgICB9IC8vIFBsdWcgZm9yIGxpYnJhcnkKCgogICAgICAgIEl0ZXJhdG9yc1tOQU1FXSA9ICRkZWZhdWx0OwogICAgICAgIEl0ZXJhdG9yc1tUQUddID0gcmV0dXJuVGhpczsKCiAgICAgICAgaWYgKERFRkFVTFQpIHsKICAgICAgICAgIG1ldGhvZHMgPSB7CiAgICAgICAgICAgIHZhbHVlczogREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKFZBTFVFUyksCiAgICAgICAgICAgIGtleXM6IElTX1NFVCA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLAogICAgICAgICAgICBlbnRyaWVzOiAkZW50cmllcwogICAgICAgICAgfTsKICAgICAgICAgIGlmIChGT1JDRUQpIGZvciAoa2V5IGluIG1ldGhvZHMpIHsKICAgICAgICAgICAgaWYgKCEoa2V5IGluIHByb3RvKSkgcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTsKICAgICAgICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbWV0aG9kczsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDUzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwoKICAgICAgdmFyIGFycmF5SW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTA0KShmYWxzZSk7CgogICAgICB2YXIgSUVfUFJPVE8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSgnSUVfUFJPVE8nKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZXMpIHsKICAgICAgICB2YXIgTyA9IHRvSU9iamVjdChvYmplY3QpOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgdmFyIGtleTsKCiAgICAgICAgZm9yIChrZXkgaW4gTykgewogICAgICAgICAgaWYgKGtleSAhPSBJRV9QUk9UTykgaGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTsKICAgICAgICB9IC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXMKCgogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPiBpKSB7CiAgICAgICAgICBpZiAoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKSB7CiAgICAgICAgICAgIH5hcnJheUluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA1NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCiAgICAgIHZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLmRvY3VtZW50OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCiAgICAgIHZhciBJRV9QUk9UTyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpKCdJRV9QUk9UTycpOwoKICAgICAgdmFyIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIChPKSB7CiAgICAgICAgTyA9IHRvT2JqZWN0KE8pOwogICAgICAgIGlmIChoYXMoTywgSUVfUFJPVE8pKSByZXR1cm4gT1tJRV9QUk9UT107CgogICAgICAgIGlmICh0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gTyBpbnN0YW5jZW9mIE9iamVjdCA/IE9iamVjdFByb3RvIDogbnVsbDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVyYXRvciwgZm4sIHZhbHVlLCBlbnRyaWVzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBlbnRyaWVzID8gZm4oYW5PYmplY3QodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7IC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTsKICAgICAgICAgIGlmIChyZXQgIT09IHVuZGVmaW5lZCkgYW5PYmplY3QocmV0LmNhbGwoaXRlcmF0b3IpKTsKICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA1OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3IKICAgICAgdmFyIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKICAgICAgdmFyIElURVJBVE9SID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKTsKCiAgICAgIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA1OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDcuMy4yMCBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKQogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoKICAgICAgdmFyIFNQRUNJRVMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdzcGVjaWVzJyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChPLCBEKSB7CiAgICAgICAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvcjsKICAgICAgICB2YXIgUzsKICAgICAgICByZXR1cm4gQyA9PT0gdW5kZWZpbmVkIHx8IChTID0gYW5PYmplY3QoQylbU1BFQ0lFU10pID09IHVuZGVmaW5lZCA/IEQgOiBhRnVuY3Rpb24oUyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDYwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGN0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKICAgICAgdmFyIGludm9rZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKTsKCiAgICAgIHZhciBodG1sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7CgogICAgICB2YXIgY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7CgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBwcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3M7CiAgICAgIHZhciBzZXRUYXNrID0gZ2xvYmFsLnNldEltbWVkaWF0ZTsKICAgICAgdmFyIGNsZWFyVGFzayA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZTsKICAgICAgdmFyIE1lc3NhZ2VDaGFubmVsID0gZ2xvYmFsLk1lc3NhZ2VDaGFubmVsOwogICAgICB2YXIgRGlzcGF0Y2ggPSBnbG9iYWwuRGlzcGF0Y2g7CiAgICAgIHZhciBjb3VudGVyID0gMDsKICAgICAgdmFyIHF1ZXVlID0ge307CiAgICAgIHZhciBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJzsKICAgICAgdmFyIGRlZmVyLCBjaGFubmVsLCBwb3J0OwoKICAgICAgdmFyIHJ1biA9IGZ1bmN0aW9uIHJ1bigpIHsKICAgICAgICB2YXIgaWQgPSArdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwoKICAgICAgICBpZiAocXVldWUuaGFzT3duUHJvcGVydHkoaWQpKSB7CiAgICAgICAgICB2YXIgZm4gPSBxdWV1ZVtpZF07CiAgICAgICAgICBkZWxldGUgcXVldWVbaWRdOwogICAgICAgICAgZm4oKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcihldmVudCkgewogICAgICAgIHJ1bi5jYWxsKGV2ZW50LmRhdGEpOwogICAgICB9OyAvLyBOb2RlLmpzIDAuOSsgJiBJRTEwKyBoYXMgc2V0SW1tZWRpYXRlLCBvdGhlcndpc2U6CgoKICAgICAgaWYgKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spIHsKICAgICAgICBzZXRUYXNrID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGZuKSB7CiAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgdmFyIGkgPSAxOwoKICAgICAgICAgIHdoaWxlIChhcmd1bWVudHMubGVuZ3RoID4gaSkgewogICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOwogICAgICAgICAgfQoKICAgICAgICAgIHF1ZXVlWysrY291bnRlcl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwogICAgICAgICAgICBpbnZva2UodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSwgYXJncyk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGRlZmVyKGNvdW50ZXIpOwogICAgICAgICAgcmV0dXJuIGNvdW50ZXI7CiAgICAgICAgfTsKCiAgICAgICAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpIHsKICAgICAgICAgIGRlbGV0ZSBxdWV1ZVtpZF07CiAgICAgICAgfTsgLy8gTm9kZS5qcyAwLjgtCgoKICAgICAgICBpZiAoX193ZWJwYWNrX3JlcXVpcmVfXygyMykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKSB7CiAgICAgICAgICBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGlkKSB7CiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soY3R4KHJ1biwgaWQsIDEpKTsKICAgICAgICAgIH07IC8vIFNwaGVyZSAoSlMgZ2FtZSBlbmdpbmUpIERpc3BhdGNoIEFQSQoKICAgICAgICB9IGVsc2UgaWYgKERpc3BhdGNoICYmIERpc3BhdGNoLm5vdykgewogICAgICAgICAgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihpZCkgewogICAgICAgICAgICBEaXNwYXRjaC5ub3coY3R4KHJ1biwgaWQsIDEpKTsKICAgICAgICAgIH07IC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnMKCiAgICAgICAgfSBlbHNlIGlmIChNZXNzYWdlQ2hhbm5lbCkgewogICAgICAgICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpOwogICAgICAgICAgcG9ydCA9IGNoYW5uZWwucG9ydDI7CiAgICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpc3RlbmVyOwogICAgICAgICAgZGVmZXIgPSBjdHgocG9ydC5wb3N0TWVzc2FnZSwgcG9ydCwgMSk7IC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2VycwogICAgICAgICAgLy8gSUU4IGhhcyBwb3N0TWVzc2FnZSwgYnV0IGl0J3Mgc3luYyAmIHR5cGVvZiBpdHMgcG9zdE1lc3NhZ2UgaXMgJ29iamVjdCcKICAgICAgICB9IGVsc2UgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykgewogICAgICAgICAgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihpZCkgewogICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoaWQgKyAnJywgJyonKTsKICAgICAgICAgIH07CgogICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpOyAvLyBJRTgtCiAgICAgICAgfSBlbHNlIGlmIChPTlJFQURZU1RBVEVDSEFOR0UgaW4gY2VsKCdzY3JpcHQnKSkgewogICAgICAgICAgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihpZCkgewogICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgICAgICAgICAgICBydW4uY2FsbChpZCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9OyAvLyBSZXN0IG9sZCBicm93c2VycwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVmZXIgPSBmdW5jdGlvbiBkZWZlcihpZCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgc2V0OiBzZXRUYXNrLAogICAgICAgIGNsZWFyOiBjbGVhclRhc2sKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA2MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZTogZmFsc2UsCiAgICAgICAgICAgIHY6IGV4ZWMoKQogICAgICAgICAgfTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBlOiB0cnVlLAogICAgICAgICAgICB2OiBlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEMsIHgpIHsKICAgICAgICBhbk9iamVjdChDKTsKICAgICAgICBpZiAoaXNPYmplY3QoeCkgJiYgeC5jb25zdHJ1Y3RvciA9PT0gQykgcmV0dXJuIHg7CiAgICAgICAgdmFyIHByb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkuZihDKTsKICAgICAgICB2YXIgcmVzb2x2ZSA9IHByb21pc2VDYXBhYmlsaXR5LnJlc29sdmU7CiAgICAgICAgcmVzb2x2ZSh4KTsKICAgICAgICByZXR1cm4gcHJvbWlzZUNhcGFiaWxpdHkucHJvbWlzZTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgSVRFUkFUT1IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpOwoKICAgICAgdmFyIFNBRkVfQ0xPU0lORyA9IGZhbHNlOwoKICAgICAgdHJ5IHsKICAgICAgICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7CgogICAgICAgIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIFNBRkVfQ0xPU0lORyA9IHRydWU7CiAgICAgICAgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRocm93LWxpdGVyYWwKCgogICAgICAgIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IDI7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvKiBlbXB0eSAqLwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjLCBza2lwQ2xvc2luZykgewogICAgICAgIGlmICghc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORykgcmV0dXJuIGZhbHNlOwogICAgICAgIHZhciBzYWZlID0gZmFsc2U7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgYXJyID0gWzddOwogICAgICAgICAgdmFyIGl0ZXIgPSBhcnJbSVRFUkFUT1JdKCk7CgogICAgICAgICAgaXRlci5uZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGRvbmU6IHNhZmUgPSB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICB9OwoKICAgICAgICAgIGFycltJVEVSQVRPUl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVyOwogICAgICAgICAgfTsKCiAgICAgICAgICBleGVjKGFycik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLyogZW1wdHkgKi8KICAgICAgICB9CgogICAgICAgIHJldHVybiBzYWZlOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA2NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlcwogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CgogICAgICB2YXIgZmFpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEtFWSwgZXhlYykgewogICAgICAgIHZhciBmbiA9IChjb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXTsKICAgICAgICB2YXIgZXhwID0ge307CiAgICAgICAgZXhwW0tFWV0gPSBleGVjKGZuKTsKICAgICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZuKDEpOwogICAgICAgIH0pLCAnT2JqZWN0JywgZXhwKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7CgogICAgICB2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHsKICAgICAgICBpZiAoIXNlbGYpIHsKICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogKDAsIF90eXBlb2YzWyJkZWZhdWx0Il0pKGNhbGwpKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDY3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTsKCiAgICAgIHZhciBfc3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjcpOwoKICAgICAgdmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTsKCiAgICAgIHZhciBfdHlwZW9mID0gdHlwZW9mIF9zeW1ib2wyWyJkZWZhdWx0Il0gPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjQoX2l0ZXJhdG9yMlsiZGVmYXVsdCJdKSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIF90eXBlb2Y0KG9iaik7CiAgICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDJbImRlZmF1bHQiXSA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyWyJkZWZhdWx0Il0gJiYgb2JqICE9PSBfc3ltYm9sMlsiZGVmYXVsdCJdLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjQob2JqKTsKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gdHlwZW9mIF9zeW1ib2wyWyJkZWZhdWx0Il0gPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZihfaXRlcmF0b3IyWyJkZWZhdWx0Il0pID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKICAgICAgfSA6IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMlsiZGVmYXVsdCJdID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDJbImRlZmF1bHQiXSAmJiBvYmogIT09IF9zeW1ib2wyWyJkZWZhdWx0Il0ucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDY4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQogICAgICB2YXIgJGtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTsKCiAgICAgIHZhciBoaWRkZW5LZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCkuY29uY2F0KCdsZW5ndGgnLCAncHJvdG90eXBlJyk7CgogICAgICBleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHsKICAgICAgICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDY5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHBJRSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKICAgICAgdmFyIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKCiAgICAgIHZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKCiAgICAgIHZhciB0b1ByaW1pdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpOwoKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7CgogICAgICB2YXIgZ09QRCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgICAgIGV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oOCkgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApIHsKICAgICAgICBPID0gdG9JT2JqZWN0KE8pOwogICAgICAgIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICAgICAgICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7CiAgICAgICAgICByZXR1cm4gZ09QRChPLCBQKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvKiBlbXB0eSAqLwogICAgICAgIH0KICAgICAgICBpZiAoaGFzKE8sIFApKSByZXR1cm4gY3JlYXRlRGVzYyghcElFLmYuY2FsbChPLCBQKSwgT1tQXSk7CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNzAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgdmFyIF9zZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTsKCiAgICAgIHZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpOwoKICAgICAgdmFyIF9jcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MCk7CgogICAgICB2YXIgX2NyZWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGUpOwoKICAgICAgdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7CgogICAgICB2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgICAgICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mM1siZGVmYXVsdCJdKShzdXBlckNsYXNzKSkpOwogICAgICAgIH0KCiAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gKDAsIF9jcmVhdGUyWyJkZWZhdWx0Il0pKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgICAgICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgICAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mMlsiZGVmYXVsdCJdID8gKDAsIF9zZXRQcm90b3R5cGVPZjJbImRlZmF1bHQiXSkoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CiAgICAgIGV4cG9ydHMuaGFzQ2xhc3NJblBhcmVudCA9IGV4cG9ydHMuZm9ybWF0RXJyb3JNc2cgPSBleHBvcnRzLmdldE1ldGFDb250ZW50ID0gZXhwb3J0cy5heGlvc0dpdGh1YiA9IGV4cG9ydHMuYXhpb3NKU09OID0gZXhwb3J0cy5xdWVyeVN0cmluZ2lmeSA9IGV4cG9ydHMucXVlcnlQYXJzZSA9IHVuZGVmaW5lZDsKCiAgICAgIHZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYxKTsKCiAgICAgIHZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCiAgICAgIHZhciBfc2xpY2VkVG9BcnJheTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NCk7CgogICAgICB2YXIgX3NsaWNlZFRvQXJyYXkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2xpY2VkVG9BcnJheTIpOwoKICAgICAgdmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKTsKCiAgICAgIHZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgcXVlcnlQYXJzZSA9IGV4cG9ydHMucXVlcnlQYXJzZSA9IGZ1bmN0aW9uIHF1ZXJ5UGFyc2UoKSB7CiAgICAgICAgdmFyIHNlYXJjaCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogd2luZG93LmxvY2F0aW9uLnNlYXJjaDsKICAgICAgICBpZiAoIXNlYXJjaCkgcmV0dXJuIHt9OwogICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHNlYXJjaFswXSA9PT0gJz8nID8gc2VhcmNoLnN1YnN0cmluZygxKSA6IHNlYXJjaDsKICAgICAgICB2YXIgcXVlcnkgPSB7fTsKICAgICAgICBxdWVyeVN0cmluZy5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24gKHF1ZXJ5U3RyKSB7CiAgICAgICAgICB2YXIgX3F1ZXJ5U3RyJHNwbGl0ID0gcXVlcnlTdHIuc3BsaXQoJz0nKSwKICAgICAgICAgICAgICBfcXVlcnlTdHIkc3BsaXQyID0gKDAsIF9zbGljZWRUb0FycmF5M1siZGVmYXVsdCJdKShfcXVlcnlTdHIkc3BsaXQsIDIpLAogICAgICAgICAgICAgIGtleSA9IF9xdWVyeVN0ciRzcGxpdDJbMF0sCiAgICAgICAgICAgICAgdmFsdWUgPSBfcXVlcnlTdHIkc3BsaXQyWzFdOwogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KCgogICAgICAgICAgaWYgKGtleSkgcXVlcnlbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcXVlcnk7CiAgICAgIH07CgogICAgICB2YXIgcXVlcnlTdHJpbmdpZnkgPSBleHBvcnRzLnF1ZXJ5U3RyaW5naWZ5ID0gZnVuY3Rpb24gcXVlcnlTdHJpbmdpZnkocXVlcnkpIHsKICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAoMCwgX2tleXMyWyJkZWZhdWx0Il0pKHF1ZXJ5KS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcmV0dXJuIGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeVtrZXldIHx8ICcnKTsKICAgICAgICB9KS5qb2luKCcmJyk7CiAgICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nOwogICAgICB9OwoKICAgICAgdmFyIGF4aW9zSlNPTiA9IGV4cG9ydHMuYXhpb3NKU09OID0gX2F4aW9zMlsiZGVmYXVsdCJdLmNyZWF0ZSh7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB2YXIgYXhpb3NHaXRodWIgPSBleHBvcnRzLmF4aW9zR2l0aHViID0gX2F4aW9zMlsiZGVmYXVsdCJdLmNyZWF0ZSh7CiAgICAgICAgYmFzZVVSTDogJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20nLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIGdldE1ldGFDb250ZW50ID0gZXhwb3J0cy5nZXRNZXRhQ29udGVudCA9IGZ1bmN0aW9uIGdldE1ldGFDb250ZW50KG5hbWUsIGNvbnRlbnQpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIGNvbnRlbnQgfHwgKGNvbnRlbnQgPSAnY29udGVudCcpOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIHZhciBlbCA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCcnICsgbmFtZSArICdcJ10nKTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICByZXR1cm4gZWwgJiYgZWwuZ2V0QXR0cmlidXRlKGNvbnRlbnQpOwogICAgICB9OwoKICAgICAgdmFyIGZvcm1hdEVycm9yTXNnID0gZXhwb3J0cy5mb3JtYXRFcnJvck1zZyA9IGZ1bmN0aW9uIGZvcm1hdEVycm9yTXNnKGVycikgewogICAgICAgIHZhciBtc2cgPSAnRXJyb3I6ICc7CgogICAgICAgIGlmIChlcnIucmVzcG9uc2UgJiYgZXJyLnJlc3BvbnNlLmRhdGEgJiYgZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICAgICAgbXNnICs9IGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgKyAnLiAnOwogICAgICAgICAgZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3JzICYmIChtc2cgKz0gZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3JzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZS5tZXNzYWdlOwogICAgICAgICAgfSkuam9pbignLCAnKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1zZyArPSBlcnIubWVzc2FnZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtc2c7CiAgICAgIH07CgogICAgICB2YXIgaGFzQ2xhc3NJblBhcmVudCA9IGV4cG9ydHMuaGFzQ2xhc3NJblBhcmVudCA9IGZ1bmN0aW9uIGhhc0NsYXNzSW5QYXJlbnQoZWxlbWVudCkgewogICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBjbGFzc05hbWUgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICBjbGFzc05hbWVbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldOwogICAgICAgIH0KICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKCiAgICAgICAgdmFyIHllcyA9IGZhbHNlOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgdmFyIGNsYXNzZXMgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIGNsYXNzTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChjLCBpKSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgICAgeWVzID0geWVzIHx8IGNsYXNzZXMuaW5kZXhPZihjKSA+PSAwOwogICAgICAgIH0pOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIGlmICh5ZXMpIHJldHVybiB5ZXM7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgcmV0dXJuIGVsZW1lbnQucGFyZW50Tm9kZSAmJiBoYXNDbGFzc0luUGFyZW50KGVsZW1lbnQucGFyZW50Tm9kZSwgY2xhc3NOYW1lKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHsKICAgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTsKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICBmdW5jdGlvbiBlbmNvZGUodmFsKSB7CiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLnJlcGxhY2UoLyU0MC9naSwgJ0AnKS5yZXBsYWNlKC8lM0EvZ2ksICc6JykucmVwbGFjZSgvJTI0L2csICckJykucmVwbGFjZSgvJTJDL2dpLCAnLCcpLnJlcGxhY2UoLyUyMC9nLCAnKycpLnJlcGxhY2UoLyU1Qi9naSwgJ1snKS5yZXBsYWNlKC8lNUQvZ2ksICddJyk7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSkKICAgICAgICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWQKICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmwKICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikgewogICAgICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLwogICAgICAgIGlmICghcGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gdXJsOwogICAgICAgIH0KCiAgICAgICAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7CgogICAgICAgIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7CiAgICAgICAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpOwogICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkgewogICAgICAgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgcGFydHMgPSBbXTsKICAgICAgICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHsKICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkgewogICAgICAgICAgICAgIGtleSA9IGtleSArICdbXSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFsID0gW3ZhbF07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHsKICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7CiAgICAgICAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHsKICAgICAgICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHBhcnRzLnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodikpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTsKICAgICAgICB9CgogICAgICAgIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7CiAgICAgICAgICB2YXIgaGFzaG1hcmtJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7CgogICAgICAgICAgaWYgKGhhc2htYXJrSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTsKICAgICAgICAgIH0KCiAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdXJsOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHsKICAgICAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDc1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICAgIHZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpOwoKICAgICAgICB2YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHsKICAgICAgICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7CiAgICAgICAgICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHsKICAgICAgICAgIHZhciBhZGFwdGVyOwoKICAgICAgICAgIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXIKICAgICAgICAgICAgYWRhcHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHsKICAgICAgICAgICAgLy8gRm9yIG5vZGUgdXNlIEhUVFAgYWRhcHRlcgogICAgICAgICAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGFkYXB0ZXI7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgICAgICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLAogICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykgewogICAgICAgICAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdBY2NlcHQnKTsKICAgICAgICAgICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7CgogICAgICAgICAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fCB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8IHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8IHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8IHV0aWxzLmlzRmlsZShkYXRhKSB8fCB1dGlscy5pc0Jsb2IoZGF0YSkpIHsKICAgICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHsKICAgICAgICAgICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7CiAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpKSB7CiAgICAgICAgICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnKTsKICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgICAgfV0sCiAgICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHsKICAgICAgICAgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgLyogSWdub3JlICovCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICAgIH1dLAoKICAgICAgICAgIC8qKgogICAgICAgICAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhCiAgICAgICAgICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLgogICAgICAgICAgICovCiAgICAgICAgICB0aW1lb3V0OiAwLAogICAgICAgICAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJywKICAgICAgICAgIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJywKICAgICAgICAgIG1heENvbnRlbnRMZW5ndGg6IC0xLAogICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykgewogICAgICAgICAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBkZWZhdWx0cy5oZWFkZXJzID0gewogICAgICAgICAgY29tbW9uOiB7CiAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkgewogICAgICAgICAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307CiAgICAgICAgfSk7CiAgICAgICAgdXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHsKICAgICAgICAgIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTsKICAgICAgICB9KTsKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzOwogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDc2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIHZhciBzZXR0bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OCk7CgogICAgICB2YXIgYnVpbGRVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTsKCiAgICAgIHZhciBidWlsZEZ1bGxQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODApOwoKICAgICAgdmFyIHBhcnNlSGVhZGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgzKTsKCiAgICAgIHZhciBpc1VSTFNhbWVPcmlnaW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NCk7CgogICAgICB2YXIgY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7CiAgICAgICAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVyczsKCiAgICAgICAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHsKICAgICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdAogICAgICAgICAgfQoKICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb24KCiAgICAgICAgICBpZiAoY29uZmlnLmF1dGgpIHsKICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7CiAgICAgICAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkIHx8ICcnOwogICAgICAgICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpOwogICAgICAgICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7IC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TCgogICAgICAgICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7IC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGUKCiAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7CiAgICAgICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gLy8gVGhlIHJlcXVlc3QgZXJyb3JlZCBvdXQgYW5kIHdlIGRpZG4ndCBnZXQgYSByZXNwb25zZSwgdGhpcyB3aWxsIGJlCiAgICAgICAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkCiAgICAgICAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzCiAgICAgICAgICAgIC8vIHdpbGwgcmV0dXJuIHN0YXR1cyBhcyAwIGV2ZW4gdGhvdWdoIGl0J3MgYSBzdWNjZXNzZnVsIHJlcXVlc3QKCgogICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2UKCgogICAgICAgICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7CiAgICAgICAgICAgIHZhciByZXNwb25zZURhdGEgPSAhY29uZmlnLnJlc3BvbnNlVHlwZSB8fCBjb25maWcucmVzcG9uc2VUeXBlID09PSAndGV4dCcgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7CiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHsKICAgICAgICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsCiAgICAgICAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cywKICAgICAgICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsCiAgICAgICAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLAogICAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLAogICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcXVlc3QKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpOyAvLyBDbGVhbiB1cCByZXF1ZXN0CgogICAgICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgICAgIH07IC8vIEhhbmRsZSBicm93c2VyIHJlcXVlc3QgY2FuY2VsbGF0aW9uIChhcyBvcHBvc2VkIHRvIGEgbWFudWFsIGNhbmNlbGxhdGlvbikKCgogICAgICAgICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7CiAgICAgICAgICAgIGlmICghcmVxdWVzdCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7IC8vIENsZWFuIHVwIHJlcXVlc3QKCiAgICAgICAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgICAgICAgfTsgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9ycwoKCiAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHsKICAgICAgICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyCiAgICAgICAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvcgogICAgICAgICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBjb25maWcsIG51bGwsIHJlcXVlc3QpKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgICAgICB9OyAvLyBIYW5kbGUgdGltZW91dAoKCiAgICAgICAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7CiAgICAgICAgICAgIHZhciB0aW1lb3V0RXJyb3JNZXNzYWdlID0gJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJzsKCiAgICAgICAgICAgIGlmIChjb25maWcudGltZW91dEVycm9yTWVzc2FnZSkgewogICAgICAgICAgICAgIHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBjb25maWcudGltZW91dEVycm9yTWVzc2FnZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKHRpbWVvdXRFcnJvck1lc3NhZ2UsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsIHJlcXVlc3QpKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgICAgICB9OyAvLyBBZGQgeHNyZiBoZWFkZXIKICAgICAgICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LgogICAgICAgICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS4KCgogICAgICAgICAgaWYgKHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHsKICAgICAgICAgICAgdmFyIGNvb2tpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NSk7IC8vIEFkZCB4c3JmIGhlYWRlcgoKCiAgICAgICAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oZnVsbFBhdGgpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgPyBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6IHVuZGVmaW5lZDsKCiAgICAgICAgICAgIGlmICh4c3JmVmFsdWUpIHsKICAgICAgICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0CgoKICAgICAgICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkgewogICAgICAgICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7CiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkCiAgICAgICAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3QKICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZAoKCiAgICAgICAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7CiAgICAgICAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gISFjb25maWcud2l0aENyZWRlbnRpYWxzOwogICAgICAgICAgfSAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkCgoKICAgICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLgogICAgICAgICAgICAgIC8vIEJ1dCwgdGhpcyBjYW4gYmUgc3VwcHJlc3NlZCBmb3IgJ2pzb24nIHR5cGUgYXMgaXQgY2FuIGJlIHBhcnNlZCBieSBkZWZhdWx0ICd0cmFuc2Zvcm1SZXNwb25zZScgZnVuY3Rpb24uCiAgICAgICAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykgewogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZAoKCiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpOwogICAgICAgICAgfSAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50cwoKCiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7CiAgICAgICAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHsKICAgICAgICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvbgogICAgICAgICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7CiAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXF1ZXN0LmFib3J0KCk7CiAgICAgICAgICAgICAgcmVqZWN0KGNhbmNlbCk7IC8vIENsZWFuIHVwIHJlcXVlc3QKCiAgICAgICAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJlcXVlc3REYXRhID0gbnVsbDsKICAgICAgICAgIH0gLy8gU2VuZCB0aGUgcmVxdWVzdAoKCiAgICAgICAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBlbmhhbmNlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OSk7CiAgICAgIC8qKgogICAgICAgKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS4KICAgICAgICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci4KICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgICAgIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CiAgICAgIC8qKgogICAgICAgKiBDb25maWctc3BlY2lmaWMgbWVyZ2UtZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBhIG5ldyBjb25maWctb2JqZWN0CiAgICAgICAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzEKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzIKICAgICAgICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMQogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICBjb25maWcyID0gY29uZmlnMiB8fCB7fTsKICAgICAgICB2YXIgY29uZmlnID0ge307CiAgICAgICAgdmFyIHZhbHVlRnJvbUNvbmZpZzJLZXlzID0gWyd1cmwnLCAnbWV0aG9kJywgJ3BhcmFtcycsICdkYXRhJ107CiAgICAgICAgdmFyIG1lcmdlRGVlcFByb3BlcnRpZXNLZXlzID0gWydoZWFkZXJzJywgJ2F1dGgnLCAncHJveHknXTsKICAgICAgICB2YXIgZGVmYXVsdFRvQ29uZmlnMktleXMgPSBbJ2Jhc2VVUkwnLCAndXJsJywgJ3RyYW5zZm9ybVJlcXVlc3QnLCAndHJhbnNmb3JtUmVzcG9uc2UnLCAncGFyYW1zU2VyaWFsaXplcicsICd0aW1lb3V0JywgJ3dpdGhDcmVkZW50aWFscycsICdhZGFwdGVyJywgJ3Jlc3BvbnNlVHlwZScsICd4c3JmQ29va2llTmFtZScsICd4c3JmSGVhZGVyTmFtZScsICdvblVwbG9hZFByb2dyZXNzJywgJ29uRG93bmxvYWRQcm9ncmVzcycsICdtYXhDb250ZW50TGVuZ3RoJywgJ3ZhbGlkYXRlU3RhdHVzJywgJ21heFJlZGlyZWN0cycsICdodHRwQWdlbnQnLCAnaHR0cHNBZ2VudCcsICdjYW5jZWxUb2tlbicsICdzb2NrZXRQYXRoJ107CiAgICAgICAgdXRpbHMuZm9yRWFjaCh2YWx1ZUZyb21Db25maWcyS2V5cywgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihwcm9wKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdXRpbHMuZm9yRWFjaChtZXJnZURlZXBQcm9wZXJ0aWVzS2V5cywgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKSB7CiAgICAgICAgICBpZiAodXRpbHMuaXNPYmplY3QoY29uZmlnMltwcm9wXSkpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gdXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTsKICAgICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QoY29uZmlnMVtwcm9wXSkpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gdXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0pOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB1dGlscy5mb3JFYWNoKGRlZmF1bHRUb0NvbmZpZzJLZXlzLCBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHsKICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzFbcHJvcF07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGF4aW9zS2V5cyA9IHZhbHVlRnJvbUNvbmZpZzJLZXlzLmNvbmNhdChtZXJnZURlZXBQcm9wZXJ0aWVzS2V5cykuY29uY2F0KGRlZmF1bHRUb0NvbmZpZzJLZXlzKTsKICAgICAgICB2YXIgb3RoZXJLZXlzID0gT2JqZWN0LmtleXMoY29uZmlnMikuZmlsdGVyKGZ1bmN0aW9uIGZpbHRlckF4aW9zS2V5cyhrZXkpIHsKICAgICAgICAgIHJldHVybiBheGlvc0tleXMuaW5kZXhPZihrZXkpID09PSAtMTsKICAgICAgICB9KTsKICAgICAgICB1dGlscy5mb3JFYWNoKG90aGVyS2V5cywgZnVuY3Rpb24gb3RoZXJLZXlzRGVmYXVsdFRvQ29uZmlnMihwcm9wKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcxW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBjb25maWc7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDc5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuCiAgICAgICAqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuCiAgICAgICAqLwoKICAgICAgZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2UpIHsKICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB9CgogICAgICBDYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7CiAgICAgIH07CgogICAgICBDYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IENhbmNlbDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHNyYyA9IF9yZWYuc3JjLAogICAgICAgICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSwKICAgICAgICAgICAgYWx0ID0gX3JlZi5hbHQsCiAgICAgICAgICAgIG9uRXJyb3IgPSBfcmVmLm9uRXJyb3I7CiAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICdndC1hdmF0YXIgJyArIGNsYXNzTmFtZQogICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdpbWcnLCB7CiAgICAgICAgICBzcmM6IHNyYywKICAgICAgICAgIGFsdDogJ0AnICsgYWx0LAogICAgICAgICAgb25FcnJvcjogb25FcnJvcgogICAgICAgIH0pKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogODEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSwKICAgICAgICAgICAgdGV4dCA9IF9yZWYudGV4dCwKICAgICAgICAgICAgbmFtZSA9IF9yZWYubmFtZTsKICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1pY28gIiArIGNsYXNzTmFtZQogICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3Qtc3ZnIiwKICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7CiAgICAgICAgICAgIF9faHRtbDogX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpKCIuLyIgKyBuYW1lICsgIi5zdmciKQogICAgICAgICAgfQogICAgICAgIH0pLCB0ZXh0ICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtaWNvLXRleHQiCiAgICAgICAgfSwgdGV4dCkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA4MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7CgogICAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzApOwoKICAgICAgdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7CgogICAgICB2YXIgX2dpdGFsayA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwoKICAgICAgdmFyIF9naXRhbGsyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2l0YWxrKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIEdpdGFsayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBHaXRhbGsoKSB7CiAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1siZGVmYXVsdCJdKSh0aGlzLCBHaXRhbGspOwogICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgICAgICB9CgogICAgICAgICgwLCBfY3JlYXRlQ2xhc3MzWyJkZWZhdWx0Il0pKEdpdGFsaywgW3sKICAgICAgICAgIGtleTogJ3JlbmRlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKGNvbnRhaW5lciwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIG5vZGUgPSBudWxsOwogICAgICAgICAgICBjb250YWluZXIgPSBjb250YWluZXIgfHwgdGhpcy5vcHRpb25zLmNvbnRhaW5lcjsKICAgICAgICAgICAgaWYgKCFjb250YWluZXIpIHRocm93IG5ldyBFcnJvcignQ29udGFpbmVyIGlzIHJlcXVpcmVkOiAnICsgY29udGFpbmVyKTsKCiAgICAgICAgICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgewogICAgICAgICAgICAgIG5vZGUgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKTsKICAgICAgICAgICAgICBpZiAoIW5vZGUpIHRocm93IG5ldyBFcnJvcignQ29udGFpbmVyIG5vdCBmb3VuZCwgd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkOiAnICsgY29udGFpbmVyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBub2RlID0gY29udGFpbmVyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHt9OwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9naXRhbGsyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMKICAgICAgICAgICAgfSksIG5vZGUsIGNhbGxiYWNrKTsKICAgICAgICAgIH0KICAgICAgICB9XSk7CiAgICAgICAgcmV0dXJuIEdpdGFsazsKICAgICAgfSgpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBHaXRhbGs7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogODMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODQpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oODUpOwoKICAgICAgdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYykgewogICAgICAgIHJldHVybiAkT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA4NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsgLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKCgogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLCAnT2JqZWN0JywgewogICAgICAgIGRlZmluZVByb3BlcnR5OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLmYKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogODYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgLyoqCiAgICAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4KICAgICAgICAqCiAgICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICAqLwogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB2YXIgUmVhY3RJcyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOyAvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBkZXZlbG9wbWVudCBiZWhhdmlvci4KICAgICAgICAgIC8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2QKCgogICAgICAgICAgdmFyIHRocm93T25EaXJlY3RBY2Nlc3MgPSB0cnVlOwogICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KShSZWFjdElzLmlzRWxlbWVudCwgdGhyb3dPbkRpcmVjdEFjY2Vzcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IHByb2R1Y3Rpb24gYmVoYXZpb3IuCiAgICAgICAgICAvLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kCiAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpKCk7CiAgICAgICAgfQogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xMi4wCiAgICAgICAqIHJlYWN0LWlzLnByb2R1Y3Rpb24ubWluLmpzCiAgICAgICAqCiAgICAgICAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogICAgICAgKgogICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgKi8KCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogITAKICAgICAgfSk7CiAgICAgIHZhciBiID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2xbImZvciJdLAogICAgICAgICAgYyA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5lbGVtZW50IikgOiA2MDEwMywKICAgICAgICAgIGQgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QucG9ydGFsIikgOiA2MDEwNiwKICAgICAgICAgIGUgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuZnJhZ21lbnQiKSA6IDYwMTA3LAogICAgICAgICAgZiA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5zdHJpY3RfbW9kZSIpIDogNjAxMDgsCiAgICAgICAgICBnID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnByb2ZpbGVyIikgOiA2MDExNCwKICAgICAgICAgIGggPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QucHJvdmlkZXIiKSA6IDYwMTA5LAogICAgICAgICAgayA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5jb250ZXh0IikgOiA2MDExMCwKICAgICAgICAgIGwgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuYXN5bmNfbW9kZSIpIDogNjAxMTEsCiAgICAgICAgICBtID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmNvbmN1cnJlbnRfbW9kZSIpIDogNjAxMTEsCiAgICAgICAgICBuID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmZvcndhcmRfcmVmIikgOiA2MDExMiwKICAgICAgICAgIHAgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3Quc3VzcGVuc2UiKSA6IDYwMTEzLAogICAgICAgICAgcSA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5zdXNwZW5zZV9saXN0IikgOiA2MDEyMCwKICAgICAgICAgIHIgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QubWVtbyIpIDogNjAxMTUsCiAgICAgICAgICB0ID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmxhenkiKSA6IDYwMTE2LAogICAgICAgICAgdiA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5mdW5kYW1lbnRhbCIpIDogNjAxMTcsCiAgICAgICAgICB3ID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnJlc3BvbmRlciIpIDogNjAxMTgsCiAgICAgICAgICB4ID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnNjb3BlIikgOiA2MDExOTsKCiAgICAgIGZ1bmN0aW9uIHkoYSkgewogICAgICAgIGlmICgib2JqZWN0IiA9PT0gX3R5cGVvZjQoYSkgJiYgbnVsbCAhPT0gYSkgewogICAgICAgICAgdmFyIHUgPSBhLiQkdHlwZW9mOwoKICAgICAgICAgIHN3aXRjaCAodSkgewogICAgICAgICAgICBjYXNlIGM6CiAgICAgICAgICAgICAgc3dpdGNoIChhID0gYS50eXBlLCBhKSB7CiAgICAgICAgICAgICAgICBjYXNlIGw6CiAgICAgICAgICAgICAgICBjYXNlIG06CiAgICAgICAgICAgICAgICBjYXNlIGU6CiAgICAgICAgICAgICAgICBjYXNlIGc6CiAgICAgICAgICAgICAgICBjYXNlIGY6CiAgICAgICAgICAgICAgICBjYXNlIHA6CiAgICAgICAgICAgICAgICAgIHJldHVybiBhOwoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYSA9IGEgJiYgYS4kJHR5cGVvZiwgYSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgazoKICAgICAgICAgICAgICAgICAgICBjYXNlIG46CiAgICAgICAgICAgICAgICAgICAgY2FzZSB0OgogICAgICAgICAgICAgICAgICAgIGNhc2UgcjoKICAgICAgICAgICAgICAgICAgICBjYXNlIGg6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsKCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1OwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgZDoKICAgICAgICAgICAgICByZXR1cm4gdTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHooYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBtOwogICAgICB9CgogICAgICBleHBvcnRzLnR5cGVPZiA9IHk7CiAgICAgIGV4cG9ydHMuQXN5bmNNb2RlID0gbDsKICAgICAgZXhwb3J0cy5Db25jdXJyZW50TW9kZSA9IG07CiAgICAgIGV4cG9ydHMuQ29udGV4dENvbnN1bWVyID0gazsKICAgICAgZXhwb3J0cy5Db250ZXh0UHJvdmlkZXIgPSBoOwogICAgICBleHBvcnRzLkVsZW1lbnQgPSBjOwogICAgICBleHBvcnRzLkZvcndhcmRSZWYgPSBuOwogICAgICBleHBvcnRzLkZyYWdtZW50ID0gZTsKICAgICAgZXhwb3J0cy5MYXp5ID0gdDsKICAgICAgZXhwb3J0cy5NZW1vID0gcjsKICAgICAgZXhwb3J0cy5Qb3J0YWwgPSBkOwogICAgICBleHBvcnRzLlByb2ZpbGVyID0gZzsKICAgICAgZXhwb3J0cy5TdHJpY3RNb2RlID0gZjsKICAgICAgZXhwb3J0cy5TdXNwZW5zZSA9IHA7CgogICAgICBleHBvcnRzLmlzVmFsaWRFbGVtZW50VHlwZSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICJzdHJpbmciID09PSB0eXBlb2YgYSB8fCAiZnVuY3Rpb24iID09PSB0eXBlb2YgYSB8fCBhID09PSBlIHx8IGEgPT09IG0gfHwgYSA9PT0gZyB8fCBhID09PSBmIHx8IGEgPT09IHAgfHwgYSA9PT0gcSB8fCAib2JqZWN0IiA9PT0gX3R5cGVvZjQoYSkgJiYgbnVsbCAhPT0gYSAmJiAoYS4kJHR5cGVvZiA9PT0gdCB8fCBhLiQkdHlwZW9mID09PSByIHx8IGEuJCR0eXBlb2YgPT09IGggfHwgYS4kJHR5cGVvZiA9PT0gayB8fCBhLiQkdHlwZW9mID09PSBuIHx8IGEuJCR0eXBlb2YgPT09IHYgfHwgYS4kJHR5cGVvZiA9PT0gdyB8fCBhLiQkdHlwZW9mID09PSB4KTsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNBc3luY01vZGUgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB6KGEpIHx8IHkoYSkgPT09IGw7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzQ29uY3VycmVudE1vZGUgPSB6OwoKICAgICAgZXhwb3J0cy5pc0NvbnRleHRDb25zdW1lciA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IGs7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzQ29udGV4dFByb3ZpZGVyID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gaDsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNFbGVtZW50ID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT09IF90eXBlb2Y0KGEpICYmIG51bGwgIT09IGEgJiYgYS4kJHR5cGVvZiA9PT0gYzsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNGb3J3YXJkUmVmID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gbjsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNGcmFnbWVudCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IGU7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzTGF6eSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IHQ7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzTWVtbyA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IHI7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzUG9ydGFsID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gZDsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNQcm9maWxlciA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IGc7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzU3RyaWN0TW9kZSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IGY7CiAgICAgIH07CgogICAgICBleHBvcnRzLmlzU3VzcGVuc2UgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBwOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA4OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICAvKiogQGxpY2Vuc2UgUmVhY3QgdjE2LjEyLjAKICAgICAgICAqIHJlYWN0LWlzLmRldmVsb3BtZW50LmpzCiAgICAgICAgKgogICAgICAgICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuCiAgICAgICAgKgogICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAgKi8KICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICJwcm9kdWN0aW9uIikgewogICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogICAgICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgICAgIH0pOyAvLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQtbGlrZSB0eXBlcy4gSWYgdGhlcmUgaXMgbm8gbmF0aXZlIFN5bWJvbAogICAgICAgICAgICAvLyBub3IgcG9seWZpbGwsIHRoZW4gYSBwbGFpbiBudW1iZXIgaXMgdXNlZCBmb3IgcGVyZm9ybWFuY2UuCgogICAgICAgICAgICB2YXIgaGFzU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2xbImZvciJdOwogICAgICAgICAgICB2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuZWxlbWVudCcpIDogMHhlYWM3OwogICAgICAgICAgICB2YXIgUkVBQ1RfUE9SVEFMX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5wb3J0YWwnKSA6IDB4ZWFjYTsKICAgICAgICAgICAgdmFyIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5mcmFnbWVudCcpIDogMHhlYWNiOwogICAgICAgICAgICB2YXIgUkVBQ1RfU1RSSUNUX01PREVfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnN0cmljdF9tb2RlJykgOiAweGVhY2M7CiAgICAgICAgICAgIHZhciBSRUFDVF9QUk9GSUxFUl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QucHJvZmlsZXInKSA6IDB4ZWFkMjsKICAgICAgICAgICAgdmFyIFJFQUNUX1BST1ZJREVSX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5wcm92aWRlcicpIDogMHhlYWNkOwogICAgICAgICAgICB2YXIgUkVBQ1RfQ09OVEVYVF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuY29udGV4dCcpIDogMHhlYWNlOyAvLyBUT0RPOiBXZSBkb24ndCB1c2UgQXN5bmNNb2RlIG9yIENvbmN1cnJlbnRNb2RlIGFueW1vcmUuIFRoZXkgd2VyZSB0ZW1wb3JhcnkKICAgICAgICAgICAgLy8gKHVuc3RhYmxlKSBBUElzIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZWQuIENhbiB3ZSByZW1vdmUgdGhlIHN5bWJvbHM/CgogICAgICAgICAgICB2YXIgUkVBQ1RfQVNZTkNfTU9ERV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuYXN5bmNfbW9kZScpIDogMHhlYWNmOwogICAgICAgICAgICB2YXIgUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5jb25jdXJyZW50X21vZGUnKSA6IDB4ZWFjZjsKICAgICAgICAgICAgdmFyIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5mb3J3YXJkX3JlZicpIDogMHhlYWQwOwogICAgICAgICAgICB2YXIgUkVBQ1RfU1VTUEVOU0VfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnN1c3BlbnNlJykgOiAweGVhZDE7CiAgICAgICAgICAgIHZhciBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5zdXNwZW5zZV9saXN0JykgOiAweGVhZDg7CiAgICAgICAgICAgIHZhciBSRUFDVF9NRU1PX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5tZW1vJykgOiAweGVhZDM7CiAgICAgICAgICAgIHZhciBSRUFDVF9MQVpZX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5sYXp5JykgOiAweGVhZDQ7CiAgICAgICAgICAgIHZhciBSRUFDVF9GVU5EQU1FTlRBTF9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QuZnVuZGFtZW50YWwnKSA6IDB4ZWFkNTsKICAgICAgICAgICAgdmFyIFJFQUNUX1JFU1BPTkRFUl9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3QucmVzcG9uZGVyJykgOiAweGVhZDY7CiAgICAgICAgICAgIHZhciBSRUFDVF9TQ09QRV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3Quc2NvcGUnKSA6IDB4ZWFkNzsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50VHlwZSh0eXBlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAvLyBOb3RlOiBpdHMgdHlwZW9mIG1pZ2h0IGJlIG90aGVyIHRoYW4gJ3N5bWJvbCcgb3IgJ251bWJlcicgaWYgaXQncyBhIHBvbHlmaWxsLgogICAgICAgICAgICAgIHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfUFJPRklMRVJfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFIHx8IF90eXBlb2Y0KHR5cGUpID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsICYmICh0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTUVNT19UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1BST1ZJREVSX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRlVOREFNRU5UQUxfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9SRVNQT05ERVJfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9TQ09QRV9UWVBFKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRm9ya2VkIGZyb20gZmJqcy93YXJuaW5nOgogICAgICAgICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmJqcy9ibG9iL2U2NmJhMjBhZDViZTQzM2ViNTQ0MjNmMmIwOTdkODI5MzI0ZDlkZTYvcGFja2FnZXMvZmJqcy9zcmMvX19mb3Jrc19fL3dhcm5pbmcuanMKICAgICAgICAgICAgICoKICAgICAgICAgICAgICogT25seSBjaGFuZ2UgaXMgd2UgdXNlIGNvbnNvbGUud2FybiBpbnN0ZWFkIG9mIGNvbnNvbGUuZXJyb3IsCiAgICAgICAgICAgICAqIGFuZCBkbyBub3RoaW5nIHdoZW4gJ2NvbnNvbGUnIGlzIG5vdCBzdXBwb3J0ZWQuCiAgICAgICAgICAgICAqIFRoaXMgcmVhbGx5IHNpbXBsaWZpZXMgdGhlIGNvZGUuCiAgICAgICAgICAgICAqIC0tLQogICAgICAgICAgICAgKiBTaW1pbGFyIHRvIGludmFyaWFudCBidXQgb25seSBsb2dzIGEgd2FybmluZyBpZiB0aGUgY29uZGl0aW9uIGlzIG5vdCBtZXQuCiAgICAgICAgICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMgaW4gY3JpdGljYWwKICAgICAgICAgICAgICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGUKICAgICAgICAgICAgICogc2FtZSBsb2dpYyBhbmQgZm9sbG93IHRoZSBzYW1lIGNvZGUgcGF0aHMuCiAgICAgICAgICAgICAqLwoKCiAgICAgICAgICAgIHZhciBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2sgPSBmdW5jdGlvbiBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2soKSB7fTsKCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB2YXIgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKGZvcm1hdCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgYXJnSW5kZXggPSAwOwogICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLQogICAgICAgICAgICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2sKICAgICAgICAgICAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHt9CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrID0gZnVuY3Rpb24gbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrKGNvbmRpdGlvbiwgZm9ybWF0KSB7CiAgICAgICAgICAgICAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgKyAnbWVzc2FnZSBhcmd1bWVudCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghY29uZGl0aW9uKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiA+IDIgPyBfbGVuMiAtIDIgOiAwKSwgX2tleTIgPSAyOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgICAgICAgICAgICAgICAgYXJnc1tfa2V5MiAtIDJdID0gYXJndW1lbnRzW19rZXkyXTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nLmFwcGx5KHZvaWQgMCwgW2Zvcm1hdF0uY29uY2F0KGFyZ3MpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2skMSA9IGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjazsKCiAgICAgICAgICAgIGZ1bmN0aW9uIHR5cGVPZihvYmplY3QpIHsKICAgICAgICAgICAgICBpZiAoX3R5cGVvZjQob2JqZWN0KSA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB2YXIgJCR0eXBlb2YgPSBvYmplY3QuJCR0eXBlb2Y7CgogICAgICAgICAgICAgICAgc3dpdGNoICgkJHR5cGVvZikgewogICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0VMRU1FTlRfVFlQRToKICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IG9iamVjdC50eXBlOwoKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfQVNZTkNfTU9ERV9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfRlJBR01FTlRfVFlQRToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRToKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7CgogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICQkdHlwZW9mVHlwZSA9IHR5cGUgJiYgdHlwZS4kJHR5cGVvZjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoJCR0eXBlb2ZUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfUFJPVklERVJfVFlQRToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkJHR5cGVvZlR5cGU7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCR0eXBlb2Y7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCR0eXBlb2Y7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgICAgICB9IC8vIEFzeW5jTW9kZSBpcyBkZXByZWNhdGVkIGFsb25nIHdpdGggaXNBc3luY01vZGUKCgogICAgICAgICAgICB2YXIgQXN5bmNNb2RlID0gUkVBQ1RfQVNZTkNfTU9ERV9UWVBFOwogICAgICAgICAgICB2YXIgQ29uY3VycmVudE1vZGUgPSBSRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRTsKICAgICAgICAgICAgdmFyIENvbnRleHRDb25zdW1lciA9IFJFQUNUX0NPTlRFWFRfVFlQRTsKICAgICAgICAgICAgdmFyIENvbnRleHRQcm92aWRlciA9IFJFQUNUX1BST1ZJREVSX1RZUEU7CiAgICAgICAgICAgIHZhciBFbGVtZW50ID0gUkVBQ1RfRUxFTUVOVF9UWVBFOwogICAgICAgICAgICB2YXIgRm9yd2FyZFJlZiA9IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU7CiAgICAgICAgICAgIHZhciBGcmFnbWVudCA9IFJFQUNUX0ZSQUdNRU5UX1RZUEU7CiAgICAgICAgICAgIHZhciBMYXp5ID0gUkVBQ1RfTEFaWV9UWVBFOwogICAgICAgICAgICB2YXIgTWVtbyA9IFJFQUNUX01FTU9fVFlQRTsKICAgICAgICAgICAgdmFyIFBvcnRhbCA9IFJFQUNUX1BPUlRBTF9UWVBFOwogICAgICAgICAgICB2YXIgUHJvZmlsZXIgPSBSRUFDVF9QUk9GSUxFUl9UWVBFOwogICAgICAgICAgICB2YXIgU3RyaWN0TW9kZSA9IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7CiAgICAgICAgICAgIHZhciBTdXNwZW5zZSA9IFJFQUNUX1NVU1BFTlNFX1RZUEU7CiAgICAgICAgICAgIHZhciBoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0FzeW5jTW9kZSA9IGZhbHNlOyAvLyBBc3luY01vZGUgc2hvdWxkIGJlIGRlcHJlY2F0ZWQKCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQXN5bmNNb2RlKG9iamVjdCkgewogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUpIHsKICAgICAgICAgICAgICAgICAgaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2skMShmYWxzZSwgJ1RoZSBSZWFjdElzLmlzQXN5bmNNb2RlKCkgYWxpYXMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgJyArICdhbmQgd2lsbCBiZSByZW1vdmVkIGluIFJlYWN0IDE3Ky4gVXBkYXRlIHlvdXIgY29kZSB0byB1c2UgJyArICdSZWFjdElzLmlzQ29uY3VycmVudE1vZGUoKSBpbnN0ZWFkLiBJdCBoYXMgdGhlIGV4YWN0IHNhbWUgQVBJLicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gaXNDb25jdXJyZW50TW9kZShvYmplY3QpIHx8IHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9BU1lOQ19NT0RFX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQ29uY3VycmVudE1vZGUob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNDb250ZXh0Q29uc3VtZXIob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9DT05URVhUX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQ29udGV4dFByb3ZpZGVyKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfUFJPVklERVJfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNFbGVtZW50KG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiBfdHlwZW9mNChvYmplY3QpID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IG51bGwgJiYgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRm9yd2FyZFJlZihvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRnJhZ21lbnQob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9GUkFHTUVOVF9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0xhenkob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9MQVpZX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzTWVtbyhvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX01FTU9fVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNQb3J0YWwob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QT1JUQUxfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNQcm9maWxlcihvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1BST0ZJTEVSX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzU3RyaWN0TW9kZShvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzU3VzcGVuc2Uob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9TVVNQRU5TRV9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBleHBvcnRzLnR5cGVPZiA9IHR5cGVPZjsKICAgICAgICAgICAgZXhwb3J0cy5Bc3luY01vZGUgPSBBc3luY01vZGU7CiAgICAgICAgICAgIGV4cG9ydHMuQ29uY3VycmVudE1vZGUgPSBDb25jdXJyZW50TW9kZTsKICAgICAgICAgICAgZXhwb3J0cy5Db250ZXh0Q29uc3VtZXIgPSBDb250ZXh0Q29uc3VtZXI7CiAgICAgICAgICAgIGV4cG9ydHMuQ29udGV4dFByb3ZpZGVyID0gQ29udGV4dFByb3ZpZGVyOwogICAgICAgICAgICBleHBvcnRzLkVsZW1lbnQgPSBFbGVtZW50OwogICAgICAgICAgICBleHBvcnRzLkZvcndhcmRSZWYgPSBGb3J3YXJkUmVmOwogICAgICAgICAgICBleHBvcnRzLkZyYWdtZW50ID0gRnJhZ21lbnQ7CiAgICAgICAgICAgIGV4cG9ydHMuTGF6eSA9IExhenk7CiAgICAgICAgICAgIGV4cG9ydHMuTWVtbyA9IE1lbW87CiAgICAgICAgICAgIGV4cG9ydHMuUG9ydGFsID0gUG9ydGFsOwogICAgICAgICAgICBleHBvcnRzLlByb2ZpbGVyID0gUHJvZmlsZXI7CiAgICAgICAgICAgIGV4cG9ydHMuU3RyaWN0TW9kZSA9IFN0cmljdE1vZGU7CiAgICAgICAgICAgIGV4cG9ydHMuU3VzcGVuc2UgPSBTdXNwZW5zZTsKICAgICAgICAgICAgZXhwb3J0cy5pc1ZhbGlkRWxlbWVudFR5cGUgPSBpc1ZhbGlkRWxlbWVudFR5cGU7CiAgICAgICAgICAgIGV4cG9ydHMuaXNBc3luY01vZGUgPSBpc0FzeW5jTW9kZTsKICAgICAgICAgICAgZXhwb3J0cy5pc0NvbmN1cnJlbnRNb2RlID0gaXNDb25jdXJyZW50TW9kZTsKICAgICAgICAgICAgZXhwb3J0cy5pc0NvbnRleHRDb25zdW1lciA9IGlzQ29udGV4dENvbnN1bWVyOwogICAgICAgICAgICBleHBvcnRzLmlzQ29udGV4dFByb3ZpZGVyID0gaXNDb250ZXh0UHJvdmlkZXI7CiAgICAgICAgICAgIGV4cG9ydHMuaXNFbGVtZW50ID0gaXNFbGVtZW50OwogICAgICAgICAgICBleHBvcnRzLmlzRm9yd2FyZFJlZiA9IGlzRm9yd2FyZFJlZjsKICAgICAgICAgICAgZXhwb3J0cy5pc0ZyYWdtZW50ID0gaXNGcmFnbWVudDsKICAgICAgICAgICAgZXhwb3J0cy5pc0xhenkgPSBpc0xhenk7CiAgICAgICAgICAgIGV4cG9ydHMuaXNNZW1vID0gaXNNZW1vOwogICAgICAgICAgICBleHBvcnRzLmlzUG9ydGFsID0gaXNQb3J0YWw7CiAgICAgICAgICAgIGV4cG9ydHMuaXNQcm9maWxlciA9IGlzUHJvZmlsZXI7CiAgICAgICAgICAgIGV4cG9ydHMuaXNTdHJpY3RNb2RlID0gaXNTdHJpY3RNb2RlOwogICAgICAgICAgICBleHBvcnRzLmlzU3VzcGVuc2UgPSBpc1N1c3BlbnNlOwogICAgICAgICAgfSkoKTsKICAgICAgICB9CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDg5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIC8qKgogICAgICAgICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuCiAgICAgICAgKgogICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAgKi8KICAgICAgICB2YXIgUmVhY3RJcyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwoKICAgICAgICB2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7CgogICAgICAgIHZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwoKICAgICAgICB2YXIgY2hlY2tQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKTsKCiAgICAgICAgdmFyIGhhcyA9IEZ1bmN0aW9uLmNhbGwuYmluZChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTsKCiAgICAgICAgdmFyIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZygpIHt9OwoKICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKHRleHQpIHsKICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArIHRleHQ7CgogICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tCiAgICAgICAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrCiAgICAgICAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgICAgICAgICB9IGNhdGNoICh4KSB7fQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGwoKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGlzVmFsaWRFbGVtZW50LCB0aHJvd09uRGlyZWN0QWNjZXNzKSB7CiAgICAgICAgICAvKiBnbG9iYWwgU3ltYm9sICovCiAgICAgICAgICB2YXIgSVRFUkFUT1JfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3I7CiAgICAgICAgICB2YXIgRkFVWF9JVEVSQVRPUl9TWU1CT0wgPSAnQEBpdGVyYXRvcic7IC8vIEJlZm9yZSBTeW1ib2wgc3BlYy4KCiAgICAgICAgICAvKioKICAgICAgICAgICAqIFJldHVybnMgdGhlIGl0ZXJhdG9yIG1ldGhvZCBmdW5jdGlvbiBjb250YWluZWQgb24gdGhlIGl0ZXJhYmxlIG9iamVjdC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBCZSBzdXJlIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgaXRlcmFibGUgYXMgY29udGV4dDoKICAgICAgICAgICAqCiAgICAgICAgICAgKiAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKG15SXRlcmFibGUpOwogICAgICAgICAgICogICAgIGlmIChpdGVyYXRvckZuKSB7CiAgICAgICAgICAgKiAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobXlJdGVyYWJsZSk7CiAgICAgICAgICAgKiAgICAgICAuLi4KICAgICAgICAgICAqICAgICB9CiAgICAgICAgICAgKgogICAgICAgICAgICogQHBhcmFtIHs/b2JqZWN0fSBtYXliZUl0ZXJhYmxlCiAgICAgICAgICAgKiBAcmV0dXJuIHs/ZnVuY3Rpb259CiAgICAgICAgICAgKi8KCiAgICAgICAgICBmdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHsKICAgICAgICAgICAgdmFyIGl0ZXJhdG9yRm4gPSBtYXliZUl0ZXJhYmxlICYmIChJVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtJVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIHJldHVybiBpdGVyYXRvckZuOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvKioKICAgICAgICAgICAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlCiAgICAgICAgICAgKiBzdXBwbGllZCB0byBSZWFjdCBjb21wb25lbnRzLiBFeGFtcGxlIHVzYWdlOgogICAgICAgICAgICoKICAgICAgICAgICAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTsKICAgICAgICAgICAqICAgdmFyIE15QXJ0aWNsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHsKICAgICAgICAgICAqICAgICBwcm9wVHlwZXM6IHsKICAgICAgICAgICAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkICJkZXNjcmlwdGlvbiIuCiAgICAgICAgICAgKiAgICAgICBkZXNjcmlwdGlvbjogUHJvcHMuc3RyaW5nLAogICAgICAgICAgICoKICAgICAgICAgICAqICAgICAgIC8vIEEgcmVxdWlyZWQgZW51bSBwcm9wIG5hbWVkICJjYXRlZ29yeSIuCiAgICAgICAgICAgKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsCiAgICAgICAgICAgKgogICAgICAgICAgICogICAgICAgLy8gQSBwcm9wIG5hbWVkICJkaWFsb2ciIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLgogICAgICAgICAgICogICAgICAgZGlhbG9nOiBQcm9wcy5pbnN0YW5jZU9mKERpYWxvZykuaXNSZXF1aXJlZAogICAgICAgICAgICogICAgIH0sCiAgICAgICAgICAgKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH0KICAgICAgICAgICAqICAgfSk7CiAgICAgICAgICAgKgogICAgICAgICAgICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOgogICAgICAgICAgICoKICAgICAgICAgICAqICAgdHlwZSA6PSBhcnJheXxib29sfGZ1bmN8b2JqZWN0fG51bWJlcnxzdHJpbmd8b25lT2YoWy4uLl0pfGluc3RhbmNlT2YoLi4uKQogICAgICAgICAgICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/CiAgICAgICAgICAgKgogICAgICAgICAgICogRWFjaCBhbmQgZXZlcnkgZGVjbGFyYXRpb24gcHJvZHVjZXMgYSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIHNpZ25hdHVyZS4gVGhpcwogICAgICAgICAgICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOgogICAgICAgICAgICoKICAgICAgICAgICAqICB2YXIgTXlMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3MoewogICAgICAgICAgICogICAgcHJvcFR5cGVzOiB7CiAgICAgICAgICAgKiAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBvciBVUkkgcHJvcCBuYW1lZCAiaHJlZiIuCiAgICAgICAgICAgKiAgICAgIGhyZWY6IGZ1bmN0aW9uKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkgewogICAgICAgICAgICogICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CiAgICAgICAgICAgKiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPSBudWxsICYmIHR5cGVvZiBwcm9wVmFsdWUgIT09ICdzdHJpbmcnICYmCiAgICAgICAgICAgKiAgICAgICAgICAgICEocHJvcFZhbHVlIGluc3RhbmNlb2YgVVJJKSkgewogICAgICAgICAgICogICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcigKICAgICAgICAgICAqICAgICAgICAgICAgJ0V4cGVjdGVkIGEgc3RyaW5nIG9yIGFuIFVSSSBmb3IgJyArIHByb3BOYW1lICsgJyBpbiAnICsKICAgICAgICAgICAqICAgICAgICAgICAgY29tcG9uZW50TmFtZQogICAgICAgICAgICogICAgICAgICAgKTsKICAgICAgICAgICAqICAgICAgICB9CiAgICAgICAgICAgKiAgICAgIH0KICAgICAgICAgICAqICAgIH0sCiAgICAgICAgICAgKiAgICByZW5kZXI6IGZ1bmN0aW9uKCkgey4uLn0KICAgICAgICAgICAqICB9KTsKICAgICAgICAgICAqCiAgICAgICAgICAgKiBAaW50ZXJuYWwKICAgICAgICAgICAqLwoKCiAgICAgICAgICB2YXIgQU5PTllNT1VTID0gJzw8YW5vbnltb3VzPj4nOyAvLyBJbXBvcnRhbnQhCiAgICAgICAgICAvLyBLZWVwIHRoaXMgbGlzdCBpbiBzeW5jIHdpdGggcHJvZHVjdGlvbiB2ZXJzaW9uIGluIGAuL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcy5qc2AuCgogICAgICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzID0gewogICAgICAgICAgICBhcnJheTogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksCiAgICAgICAgICAgIGJvb2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdib29sZWFuJyksCiAgICAgICAgICAgIGZ1bmM6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdmdW5jdGlvbicpLAogICAgICAgICAgICBudW1iZXI6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSwKICAgICAgICAgICAgb2JqZWN0OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignb2JqZWN0JyksCiAgICAgICAgICAgIHN0cmluZzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N0cmluZycpLAogICAgICAgICAgICBzeW1ib2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzeW1ib2wnKSwKICAgICAgICAgICAgYW55OiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpLAogICAgICAgICAgICBhcnJheU9mOiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIsCiAgICAgICAgICAgIGVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpLAogICAgICAgICAgICBlbGVtZW50VHlwZTogY3JlYXRlRWxlbWVudFR5cGVUeXBlQ2hlY2tlcigpLAogICAgICAgICAgICBpbnN0YW5jZU9mOiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyLAogICAgICAgICAgICBub2RlOiBjcmVhdGVOb2RlQ2hlY2tlcigpLAogICAgICAgICAgICBvYmplY3RPZjogY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlciwKICAgICAgICAgICAgb25lT2Y6IGNyZWF0ZUVudW1UeXBlQ2hlY2tlciwKICAgICAgICAgICAgb25lT2ZUeXBlOiBjcmVhdGVVbmlvblR5cGVDaGVja2VyLAogICAgICAgICAgICBzaGFwZTogY3JlYXRlU2hhcGVUeXBlQ2hlY2tlciwKICAgICAgICAgICAgZXhhY3Q6IGNyZWF0ZVN0cmljdFNoYXBlVHlwZUNoZWNrZXIKICAgICAgICAgIH07CiAgICAgICAgICAvKioKICAgICAgICAgICAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd24KICAgICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pcwogICAgICAgICAgICovCgogICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSBuby1zZWxmLWNvbXBhcmUqLwoKICAgICAgICAgIGZ1bmN0aW9uIGlzKHgsIHkpIHsKICAgICAgICAgICAgLy8gU2FtZVZhbHVlIGFsZ29yaXRobQogICAgICAgICAgICBpZiAoeCA9PT0geSkgewogICAgICAgICAgICAgIC8vIFN0ZXBzIDEtNSwgNy0xMAogICAgICAgICAgICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wCiAgICAgICAgICAgICAgcmV0dXJuIHggIT09IDAgfHwgMSAvIHggPT09IDEgLyB5OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOCiAgICAgICAgICAgICAgcmV0dXJuIHggIT09IHggJiYgeSAhPT0geTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLyplc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSovCgogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBXZSB1c2UgYW4gRXJyb3ItbGlrZSBvYmplY3QgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgYXMgcGVvcGxlIG1heSBjYWxsCiAgICAgICAgICAgKiBQcm9wVHlwZXMgZGlyZWN0bHkgYW5kIGluc3BlY3QgdGhlaXIgb3V0cHV0LiBIb3dldmVyLCB3ZSBkb24ndCB1c2UgcmVhbAogICAgICAgICAgICogRXJyb3JzIGFueW1vcmUuIFdlIGRvbid0IGluc3BlY3QgdGhlaXIgc3RhY2sgYW55d2F5LCBhbmQgY3JlYXRpbmcgdGhlbQogICAgICAgICAgICogaXMgcHJvaGliaXRpdmVseSBleHBlbnNpdmUgaWYgdGhleSBhcmUgY3JlYXRlZCB0b28gb2Z0ZW4sIHN1Y2ggYXMgd2hhdAogICAgICAgICAgICogaGFwcGVucyBpbiBvbmVPZlR5cGUoKSBmb3IgYW55IHR5cGUgYmVmb3JlIHRoZSBvbmUgdGhhdCBtYXRjaGVkLgogICAgICAgICAgICovCgoKICAgICAgICAgIGZ1bmN0aW9uIFByb3BUeXBlRXJyb3IobWVzc2FnZSkgewogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICAgICAgICB0aGlzLnN0YWNrID0gJyc7CiAgICAgICAgICB9IC8vIE1ha2UgYGluc3RhbmNlb2YgRXJyb3JgIHN0aWxsIHdvcmsgZm9yIHJldHVybmVkIGVycm9ycy4KCgogICAgICAgICAgUHJvcFR5cGVFcnJvci5wcm90b3R5cGUgPSBFcnJvci5wcm90b3R5cGU7CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpIHsKICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICB2YXIgbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGUgPSB7fTsKICAgICAgICAgICAgICB2YXIgbWFudWFsUHJvcFR5cGVXYXJuaW5nQ291bnQgPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjaGVja1R5cGUoaXNSZXF1aXJlZCwgcHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCBzZWNyZXQpIHsKICAgICAgICAgICAgICBjb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZSB8fCBBTk9OWU1PVVM7CiAgICAgICAgICAgICAgcHJvcEZ1bGxOYW1lID0gcHJvcEZ1bGxOYW1lIHx8IHByb3BOYW1lOwoKICAgICAgICAgICAgICBpZiAoc2VjcmV0ICE9PSBSZWFjdFByb3BUeXBlc1NlY3JldCkgewogICAgICAgICAgICAgICAgaWYgKHRocm93T25EaXJlY3RBY2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgLy8gTmV3IGJlaGF2aW9yIG9ubHkgZm9yIHVzZXJzIG9mIGBwcm9wLXR5cGVzYCBwYWNrYWdlCiAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0NhbGxpbmcgUHJvcFR5cGVzIHZhbGlkYXRvcnMgZGlyZWN0bHkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcgKyAnVXNlIGBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoKWAgdG8gY2FsbCB0aGVtLiAnICsgJ1JlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMnKTsKICAgICAgICAgICAgICAgICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7CiAgICAgICAgICAgICAgICAgIHRocm93IGVycjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgLy8gT2xkIGJlaGF2aW9yIGZvciBwZW9wbGUgdXNpbmcgUmVhY3QuUHJvcFR5cGVzCiAgICAgICAgICAgICAgICAgIHZhciBjYWNoZUtleSA9IGNvbXBvbmVudE5hbWUgKyAnOicgKyBwcm9wTmFtZTsKCiAgICAgICAgICAgICAgICAgIGlmICghbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldICYmIC8vIEF2b2lkIHNwYW1taW5nIHRoZSBjb25zb2xlIGJlY2F1c2UgdGhleSBhcmUgb2Z0ZW4gbm90IGFjdGlvbmFibGUgZXhjZXB0IGZvciBsaWIgYXV0aG9ycwogICAgICAgICAgICAgICAgICBtYW51YWxQcm9wVHlwZVdhcm5pbmdDb3VudCA8IDMpIHsKICAgICAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcoJ1lvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBhIFJlYWN0LlByb3BUeXBlcyB2YWxpZGF0aW9uICcgKyAnZnVuY3Rpb24gZm9yIHRoZSBgJyArIHByb3BGdWxsTmFtZSArICdgIHByb3Agb24gYCcgKyBjb21wb25lbnROYW1lICsgJ2AuIFRoaXMgaXMgZGVwcmVjYXRlZCAnICsgJ2FuZCB3aWxsIHRocm93IGluIHRoZSBzdGFuZGFsb25lIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnICsgJ1lvdSBtYXkgYmUgc2VlaW5nIHRoaXMgd2FybmluZyBkdWUgdG8gYSB0aGlyZC1wYXJ0eSBQcm9wVHlwZXMgJyArICdsaWJyYXJ5LiBTZWUgaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLWRvbnQtY2FsbC1wcm9wdHlwZXMgJyArICdmb3IgZGV0YWlscy4nKTsKICAgICAgICAgICAgICAgICAgICBtYW51YWxQcm9wVHlwZUNhbGxDYWNoZVtjYWNoZUtleV0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIG1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50Kys7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKGlzUmVxdWlyZWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignVGhlICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBpcyBtYXJrZWQgYXMgcmVxdWlyZWQgJyArICgnaW4gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGJ1dCBpdHMgdmFsdWUgaXMgYG51bGxgLicpKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdUaGUgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIGlzIG1hcmtlZCBhcyByZXF1aXJlZCBpbiAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgYnV0IGl0cyB2YWx1ZSBpcyBgdW5kZWZpbmVkYC4nKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNoYWluZWRDaGVja1R5cGUgPSBjaGVja1R5cGUuYmluZChudWxsLCBmYWxzZSk7CiAgICAgICAgICAgIGNoYWluZWRDaGVja1R5cGUuaXNSZXF1aXJlZCA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIHRydWUpOwogICAgICAgICAgICByZXR1cm4gY2hhaW5lZENoZWNrVHlwZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcihleHBlY3RlZFR5cGUpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCBzZWNyZXQpIHsKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwogICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CgogICAgICAgICAgICAgIGlmIChwcm9wVHlwZSAhPT0gZXhwZWN0ZWRUeXBlKSB7CiAgICAgICAgICAgICAgICAvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCcKICAgICAgICAgICAgICAgIC8vIGNoZWNrLCBidXQgd2UgY2FuIG9mZmVyIGEgbW9yZSBwcmVjaXNlIGVycm9yIG1lc3NhZ2UgaGVyZSByYXRoZXIgdGhhbgogICAgICAgICAgICAgICAgLy8gJ29mIHR5cGUgYG9iamVjdGAnLgogICAgICAgICAgICAgICAgdmFyIHByZWNpc2VUeXBlID0gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByZWNpc2VUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdgJyArIGV4cGVjdGVkVHlwZSArICdgLicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFueVR5cGVDaGVja2VyKCkgewogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZUNoZWNrZXIgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiBjb21wb25lbnQgYCcgKyBjb21wb25lbnROYW1lICsgJ2AgaGFzIGludmFsaWQgUHJvcFR5cGUgbm90YXRpb24gaW5zaWRlIGFycmF5T2YuJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwoKICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIGFycmF5LicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcFZhbHVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnWycgKyBpICsgJ10nLCBSZWFjdFByb3BUeXBlc1NlY3JldCk7CgogICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCkgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwoKICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFR5cGVUeXBlQ2hlY2tlcigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKCiAgICAgICAgICAgICAgaWYgKCFSZWFjdElzLmlzVmFsaWRFbGVtZW50VHlwZShwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50IHR5cGUuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcihleHBlY3RlZENsYXNzKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIGlmICghKHByb3BzW3Byb3BOYW1lXSBpbnN0YW5jZW9mIGV4cGVjdGVkQ2xhc3MpKSB7CiAgICAgICAgICAgICAgICB2YXIgZXhwZWN0ZWRDbGFzc05hbWUgPSBleHBlY3RlZENsYXNzLm5hbWUgfHwgQU5PTllNT1VTOwogICAgICAgICAgICAgICAgdmFyIGFjdHVhbENsYXNzTmFtZSA9IGdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgYWN0dWFsQ2xhc3NOYW1lICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdpbnN0YW5jZSBvZiBgJyArIGV4cGVjdGVkQ2xhc3NOYW1lICsgJ2AuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRW51bVR5cGVDaGVja2VyKGV4cGVjdGVkVmFsdWVzKSB7CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleHBlY3RlZFZhbHVlcykpIHsKICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgIHByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudHMgc3VwcGxpZWQgdG8gb25lT2YsIGV4cGVjdGVkIGFuIGFycmF5LCBnb3QgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIGFyZ3VtZW50cy4gJyArICdBIGNvbW1vbiBtaXN0YWtlIGlzIHRvIHdyaXRlIG9uZU9mKHgsIHksIHopIGluc3RlYWQgb2Ygb25lT2YoW3gsIHksIHpdKS4nKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZiwgZXhwZWN0ZWQgYW4gYXJyYXkuJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZFZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKGlzKHByb3BWYWx1ZSwgZXhwZWN0ZWRWYWx1ZXNbaV0pKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHZhbHVlc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGV4cGVjdGVkVmFsdWVzLCBmdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7CiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGdldFByZWNpc2VUeXBlKHZhbHVlKTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N5bWJvbCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdmFsdWUgYCcgKyBTdHJpbmcocHJvcFZhbHVlKSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBvbmUgb2YgJyArIHZhbHVlc1N0cmluZyArICcuJykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlQ2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdQcm9wZXJ0eSBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIGNvbXBvbmVudCBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgb2JqZWN0T2YuJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwogICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CgogICAgICAgICAgICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcFZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAoaGFzKHByb3BWYWx1ZSwga2V5KSkgewogICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpOwoKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIoYXJyYXlPZlR5cGVDaGVja2VycykgewogICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2VycykpIHsKICAgICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gcHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJykgOiB2b2lkIDA7CiAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTsKCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGVja2VyICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2ZUeXBlLiBFeHBlY3RlZCBhbiBhcnJheSBvZiBjaGVjayBmdW5jdGlvbnMsIGJ1dCAnICsgJ3JlY2VpdmVkICcgKyBnZXRQb3N0Zml4Rm9yVHlwZVdhcm5pbmcoY2hlY2tlcikgKyAnIGF0IGluZGV4ICcgKyBpICsgJy4nKTsKICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlciA9IGFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07CgogICAgICAgICAgICAgICAgaWYgKGNoZWNrZXIocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCBSZWFjdFByb3BUeXBlc1NlY3JldCkgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGVDaGVja2VyKCkgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICBpZiAoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIFJlYWN0Tm9kZS4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwoKICAgICAgICAgICAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc2hhcGVUeXBlcykgewogICAgICAgICAgICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07CgogICAgICAgICAgICAgICAgaWYgKCFjaGVja2VyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IGNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTsKCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3RyaWN0U2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CiAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlIGAnICsgcHJvcFR5cGUgKyAnYCAnICsgKCdzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpOwogICAgICAgICAgICAgIH0gLy8gV2UgbmVlZCB0byBjaGVjayBhbGwga2V5cyBpbiBjYXNlIHNvbWUgYXJlIHJlcXVpcmVkIGJ1dCBtaXNzaW5nIGZyb20KICAgICAgICAgICAgICAvLyBwcm9wcy4KCgogICAgICAgICAgICAgIHZhciBhbGxLZXlzID0gYXNzaWduKHt9LCBwcm9wc1twcm9wTmFtZV0sIHNoYXBlVHlwZXMpOwoKICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWxsS2V5cykgewogICAgICAgICAgICAgICAgdmFyIGNoZWNrZXIgPSBzaGFwZVR5cGVzW2tleV07CgogICAgICAgICAgICAgICAgaWYgKCFjaGVja2VyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Aga2V5IGAnICsga2V5ICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJyArICdcbkJhZCBvYmplY3Q6ICcgKyBKU09OLnN0cmluZ2lmeShwcm9wc1twcm9wTmFtZV0sIG51bGwsICcgICcpICsgJ1xuVmFsaWQga2V5czogJyArIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHNoYXBlVHlwZXMpLCBudWxsLCAnICAnKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGVycm9yID0gY2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpOwoKICAgICAgICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpc05vZGUocHJvcFZhbHVlKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX3R5cGVvZjQocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6CiAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOgogICAgICAgICAgICAgICAgcmV0dXJuICFwcm9wVmFsdWU7CgogICAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6CiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocHJvcFZhbHVlID09PSBudWxsIHx8IGlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKHByb3BWYWx1ZSk7CgogICAgICAgICAgICAgICAgaWYgKGl0ZXJhdG9yRm4pIHsKICAgICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7CiAgICAgICAgICAgICAgICAgIHZhciBzdGVwOwoKICAgICAgICAgICAgICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IHByb3BWYWx1ZS5lbnRyaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05vZGUoc3RlcC52YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy4KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cnkgPSBzdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTm9kZShlbnRyeVsxXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGlzU3ltYm9sKHByb3BUeXBlLCBwcm9wVmFsdWUpIHsKICAgICAgICAgICAgLy8gTmF0aXZlIFN5bWJvbC4KICAgICAgICAgICAgaWYgKHByb3BUeXBlID09PSAnc3ltYm9sJykgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IC8vIGZhbHN5IHZhbHVlIGNhbid0IGJlIGEgU3ltYm9sCgoKICAgICAgICAgICAgaWYgKCFwcm9wVmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXSA9PT0gJ1N5bWJvbCcKCgogICAgICAgICAgICBpZiAocHJvcFZhbHVlWydAQHRvU3RyaW5nVGFnJ10gPT09ICdTeW1ib2wnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gLy8gRmFsbGJhY2sgZm9yIG5vbi1zcGVjIGNvbXBsaWFudCBTeW1ib2xzIHdoaWNoIGFyZSBwb2x5ZmlsbGVkLgoKCiAgICAgICAgICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHByb3BWYWx1ZSBpbnN0YW5jZW9mIFN5bWJvbCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9IC8vIEVxdWl2YWxlbnQgb2YgYHR5cGVvZmAgYnV0IHdpdGggc3BlY2lhbCBoYW5kbGluZyBmb3IgYXJyYXkgYW5kIHJlZ2V4cC4KCgogICAgICAgICAgZnVuY3Rpb24gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKSB7CiAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IF90eXBlb2Y0KHByb3BWYWx1ZSk7CgogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdhcnJheSc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgICAgICAvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuCiAgICAgICAgICAgICAgLy8gJ29iamVjdCcgZm9yIHR5cGVvZiBhIFJlZ0V4cC4gV2UnbGwgbm9ybWFsaXplIHRoaXMgaGVyZSBzbyB0aGF0IC9ibGEvCiAgICAgICAgICAgICAgLy8gcGFzc2VzIFByb3BUeXBlcy5vYmplY3QuCiAgICAgICAgICAgICAgcmV0dXJuICdvYmplY3QnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaXNTeW1ib2wocHJvcFR5cGUsIHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICByZXR1cm4gJ3N5bWJvbCc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBwcm9wVHlwZTsKICAgICAgICAgIH0gLy8gVGhpcyBoYW5kbGVzIG1vcmUgdHlwZXMgdGhhbiBgZ2V0UHJvcFR5cGVgLiBPbmx5IHVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzLgogICAgICAgICAgLy8gU2VlIGBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcmAuCgoKICAgICAgICAgIGZ1bmN0aW9uIGdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSkgewogICAgICAgICAgICBpZiAodHlwZW9mIHByb3BWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgcHJvcFZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuICcnICsgcHJvcFZhbHVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwoKICAgICAgICAgICAgaWYgKHByb3BUeXBlID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2RhdGUnOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3JlZ2V4cCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcHJvcFR5cGU7CiAgICAgICAgICB9IC8vIFJldHVybnMgYSBzdHJpbmcgdGhhdCBpcyBwb3N0Zml4ZWQgdG8gYSB3YXJuaW5nIGFib3V0IGFuIGludmFsaWQgdHlwZS4KICAgICAgICAgIC8vIEZvciBleGFtcGxlLCAidW5kZWZpbmVkIiBvciAib2YgdHlwZSBhcnJheSIKCgogICAgICAgICAgZnVuY3Rpb24gZ2V0UG9zdGZpeEZvclR5cGVXYXJuaW5nKHZhbHVlKSB7CiAgICAgICAgICAgIHZhciB0eXBlID0gZ2V0UHJlY2lzZVR5cGUodmFsdWUpOwoKICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAnYXJyYXknOgogICAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6CiAgICAgICAgICAgICAgICByZXR1cm4gJ2FuICcgKyB0eXBlOwoKICAgICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgICBjYXNlICdkYXRlJzoKICAgICAgICAgICAgICBjYXNlICdyZWdleHAnOgogICAgICAgICAgICAgICAgcmV0dXJuICdhICcgKyB0eXBlOwoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gUmV0dXJucyBjbGFzcyBuYW1lIG9mIHRoZSBvYmplY3QsIGlmIGFueS4KCgogICAgICAgICAgZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKHByb3BWYWx1ZSkgewogICAgICAgICAgICBpZiAoIXByb3BWYWx1ZS5jb25zdHJ1Y3RvciB8fCAhcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpIHsKICAgICAgICAgICAgICByZXR1cm4gQU5PTllNT1VTOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgICB9CgogICAgICAgICAgUmVhY3RQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMgPSBjaGVja1Byb3BUeXBlczsKICAgICAgICAgIFJlYWN0UHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlID0gY2hlY2tQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGU7CiAgICAgICAgICBSZWFjdFByb3BUeXBlcy5Qcm9wVHlwZXMgPSBSZWFjdFByb3BUeXBlczsKICAgICAgICAgIHJldHVybiBSZWFjdFByb3BUeXBlczsKICAgICAgICB9OwogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoKICAgICAgb2JqZWN0LWFzc2lnbgogICAgICAoYykgU2luZHJlIFNvcmh1cwogICAgICBAbGljZW5zZSBNSVQKICAgICAgKi8KCiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovCgogICAgICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsKICAgICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKICAgICAgdmFyIHByb3BJc0VudW1lcmFibGUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlOwoKICAgICAgZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7CiAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBPYmplY3QodmFsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIU9iamVjdC5hc3NpZ24pIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSAvLyBEZXRlY3QgYnVnZ3kgcHJvcGVydHkgZW51bWVyYXRpb24gb3JkZXIgaW4gb2xkZXIgVjggdmVyc2lvbnMuCiAgICAgICAgICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD00MTE4CgoKICAgICAgICAgIHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldy13cmFwcGVycwoKICAgICAgICAgIHRlc3QxWzVdID0gJ2RlJzsKCiAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDEpWzBdID09PSAnNScpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2CgoKICAgICAgICAgIHZhciB0ZXN0MiA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICB0ZXN0MlsnXycgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXSA9IGk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG9yZGVyMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHRlc3QyW25dOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKG9yZGVyMi5qb2luKCcnKSAhPT0gJzAxMjM0NTY3ODknKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NgoKCiAgICAgICAgICB2YXIgdGVzdDMgPSB7fTsKICAgICAgICAgICdhYmNkZWZnaGlqa2xtbm9wcXJzdCcuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKGxldHRlcikgewogICAgICAgICAgICB0ZXN0M1tsZXR0ZXJdID0gbGV0dGVyOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgLy8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS4KICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXNlTmF0aXZlKCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7CiAgICAgICAgdmFyIGZyb207CiAgICAgICAgdmFyIHRvID0gdG9PYmplY3QodGFyZ2V0KTsKICAgICAgICB2YXIgc3ltYm9sczsKCiAgICAgICAgZm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHsKICAgICAgICAgIGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkgewogICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7CiAgICAgICAgICAgICAgdG9ba2V5XSA9IGZyb21ba2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgc3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHsKICAgICAgICAgICAgICAgIHRvW3N5bWJvbHNbaV1dID0gZnJvbVtzeW1ib2xzW2ldXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0bzsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICAvKioKICAgICAgICAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLgogICAgICAgICoKICAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgICovCiAgICAgICAgdmFyIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZygpIHt9OwoKICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7CgogICAgICAgICAgdmFyIGxvZ2dlZFR5cGVGYWlsdXJlcyA9IHt9OwogICAgICAgICAgdmFyIGhhcyA9IEZ1bmN0aW9uLmNhbGwuYmluZChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTsKCiAgICAgICAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiBwcmludFdhcm5pbmcodGV4dCkgewogICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgdGV4dDsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS0KICAgICAgICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2sKICAgICAgICAgICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS4KICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHt9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBc3NlcnQgdGhhdCB0aGUgdmFsdWVzIG1hdGNoIHdpdGggdGhlIHR5cGUgc3BlY3MuCiAgICAgICAgICogRXJyb3IgbWVzc2FnZXMgYXJlIG1lbW9yaXplZCBhbmQgd2lsbCBvbmx5IGJlIHNob3duIG9uY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gdHlwZVNwZWNzIE1hcCBvZiBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZQogICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZXMgUnVudGltZSB2YWx1ZXMgdGhhdCBuZWVkIHRvIGJlIHR5cGUtY2hlY2tlZAogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuICJwcm9wIiwgImNvbnRleHQiLCAiY2hpbGQgY29udGV4dCIKICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgZm9yIGVycm9yIG1lc3NhZ2VzLgogICAgICAgICAqIEBwYXJhbSB7P0Z1bmN0aW9ufSBnZXRTdGFjayBSZXR1cm5zIHRoZSBjb21wb25lbnQgc3RhY2suCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KCgogICAgICAgIGZ1bmN0aW9uIGNoZWNrUHJvcFR5cGVzKHR5cGVTcGVjcywgdmFsdWVzLCBsb2NhdGlvbiwgY29tcG9uZW50TmFtZSwgZ2V0U3RhY2spIHsKICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgIGZvciAodmFyIHR5cGVTcGVjTmFtZSBpbiB0eXBlU3BlY3MpIHsKICAgICAgICAgICAgICBpZiAoaGFzKHR5cGVTcGVjcywgdHlwZVNwZWNOYW1lKSkgewogICAgICAgICAgICAgICAgdmFyIGVycm9yOyAvLyBQcm9wIHR5cGUgdmFsaWRhdGlvbiBtYXkgdGhyb3cuIEluIGNhc2UgdGhleSBkbywgd2UgZG9uJ3Qgd2FudCB0bwogICAgICAgICAgICAgICAgLy8gZmFpbCB0aGUgcmVuZGVyIHBoYXNlIHdoZXJlIGl0IGRpZG4ndCBmYWlsIGJlZm9yZS4gU28gd2UgbG9nIGl0LgogICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhlc2UgaGF2ZSBiZWVuIGNsZWFuZWQgdXAsIHdlJ2xsIGxldCB0aGVtIHRocm93LgoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBhbiBpbnZhcmlhbnQgdGhhdCBnZXRzIGNhdWdodC4gSXQncyB0aGUgc2FtZQogICAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBhcyB3aXRob3V0IHRoaXMgc3RhdGVtZW50IGV4Y2VwdCB3aXRoIGEgYmV0dGVyIG1lc3NhZ2UuCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZVNwZWNzW3R5cGVTcGVjTmFtZV0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gRXJyb3IoKGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJykgKyAnOiAnICsgbG9jYXRpb24gKyAnIHR5cGUgYCcgKyB0eXBlU3BlY05hbWUgKyAnYCBpcyBpbnZhbGlkOyAnICsgJ2l0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tIHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZSwgYnV0IHJlY2VpdmVkIGAnICsgX3R5cGVvZjQodHlwZVNwZWNzW3R5cGVTcGVjTmFtZV0pICsgJ2AuJyk7CiAgICAgICAgICAgICAgICAgICAgZXJyLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBlcnJvciA9IHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdKHZhbHVlcywgdHlwZVNwZWNOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgICAgICAgZXJyb3IgPSBleDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkgewogICAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcoKGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJykgKyAnOiB0eXBlIHNwZWNpZmljYXRpb24gb2YgJyArIGxvY2F0aW9uICsgJyBgJyArIHR5cGVTcGVjTmFtZSArICdgIGlzIGludmFsaWQ7IHRoZSB0eXBlIGNoZWNrZXIgJyArICdmdW5jdGlvbiBtdXN0IHJldHVybiBgbnVsbGAgb3IgYW4gYEVycm9yYCBidXQgcmV0dXJuZWQgYSAnICsgX3R5cGVvZjQoZXJyb3IpICsgJy4gJyArICdZb3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIHBhc3MgYW4gYXJndW1lbnQgdG8gdGhlIHR5cGUgY2hlY2tlciAnICsgJ2NyZWF0b3IgKGFycmF5T2YsIGluc3RhbmNlT2YsIG9iamVjdE9mLCBvbmVPZiwgb25lT2ZUeXBlLCBhbmQgJyArICdzaGFwZSBhbGwgcmVxdWlyZSBhbiBhcmd1bWVudCkuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpIHsKICAgICAgICAgICAgICAgICAgLy8gT25seSBtb25pdG9yIHRoaXMgZmFpbHVyZSBvbmNlIGJlY2F1c2UgdGhlcmUgdGVuZHMgdG8gYmUgYSBsb3Qgb2YgdGhlCiAgICAgICAgICAgICAgICAgIC8vIHNhbWUgZXJyb3IuCiAgICAgICAgICAgICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHZhciBzdGFjayA9IGdldFN0YWNrID8gZ2V0U3RhY2soKSA6ICcnOwogICAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcoJ0ZhaWxlZCAnICsgbG9jYXRpb24gKyAnIHR5cGU6ICcgKyBlcnJvci5tZXNzYWdlICsgKHN0YWNrICE9IG51bGwgPyBzdGFjayA6ICcnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJlc2V0cyB3YXJuaW5nIGNhY2hlIHdoZW4gdGVzdGluZy4KICAgICAgICAgKgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCgoKICAgICAgICBjaGVja1Byb3BUeXBlcy5yZXNldFdhcm5pbmdDYWNoZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgIGxvZ2dlZFR5cGVGYWlsdXJlcyA9IHt9OwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gY2hlY2tQcm9wVHlwZXM7CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4KICAgICAgICoKICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICovCgogICAgICB2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsKCiAgICAgIGZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKSB7fQoKICAgICAgZnVuY3Rpb24gZW1wdHlGdW5jdGlvbldpdGhSZXNldCgpIHt9CgogICAgICBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LnJlc2V0V2FybmluZ0NhY2hlID0gZW1wdHlGdW5jdGlvbjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIHNoaW0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lLCBzZWNyZXQpIHsKICAgICAgICAgIGlmIChzZWNyZXQgPT09IFJlYWN0UHJvcFR5cGVzU2VjcmV0KSB7CiAgICAgICAgICAgIC8vIEl0IGlzIHN0aWxsIHNhZmUgd2hlbiBjYWxsZWQgZnJvbSBSZWFjdC4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0NhbGxpbmcgUHJvcFR5cGVzIHZhbGlkYXRvcnMgZGlyZWN0bHkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcgKyAnVXNlIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpIHRvIGNhbGwgdGhlbS4gJyArICdSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJyk7CiAgICAgICAgICBlcnIubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJzsKICAgICAgICAgIHRocm93IGVycjsKICAgICAgICB9CgogICAgICAgIDsKICAgICAgICBzaGltLmlzUmVxdWlyZWQgPSBzaGltOwoKICAgICAgICBmdW5jdGlvbiBnZXRTaGltKCkgewogICAgICAgICAgcmV0dXJuIHNoaW07CiAgICAgICAgfQoKICAgICAgICA7IC8vIEltcG9ydGFudCEKICAgICAgICAvLyBLZWVwIHRoaXMgbGlzdCBpbiBzeW5jIHdpdGggcHJvZHVjdGlvbiB2ZXJzaW9uIGluIGAuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzYC4KCiAgICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzID0gewogICAgICAgICAgYXJyYXk6IHNoaW0sCiAgICAgICAgICBib29sOiBzaGltLAogICAgICAgICAgZnVuYzogc2hpbSwKICAgICAgICAgIG51bWJlcjogc2hpbSwKICAgICAgICAgIG9iamVjdDogc2hpbSwKICAgICAgICAgIHN0cmluZzogc2hpbSwKICAgICAgICAgIHN5bWJvbDogc2hpbSwKICAgICAgICAgIGFueTogc2hpbSwKICAgICAgICAgIGFycmF5T2Y6IGdldFNoaW0sCiAgICAgICAgICBlbGVtZW50OiBzaGltLAogICAgICAgICAgZWxlbWVudFR5cGU6IHNoaW0sCiAgICAgICAgICBpbnN0YW5jZU9mOiBnZXRTaGltLAogICAgICAgICAgbm9kZTogc2hpbSwKICAgICAgICAgIG9iamVjdE9mOiBnZXRTaGltLAogICAgICAgICAgb25lT2Y6IGdldFNoaW0sCiAgICAgICAgICBvbmVPZlR5cGU6IGdldFNoaW0sCiAgICAgICAgICBzaGFwZTogZ2V0U2hpbSwKICAgICAgICAgIGV4YWN0OiBnZXRTaGltLAogICAgICAgICAgY2hlY2tQcm9wVHlwZXM6IGVtcHR5RnVuY3Rpb25XaXRoUmVzZXQsCiAgICAgICAgICByZXNldFdhcm5pbmdDYWNoZTogZW1wdHlGdW5jdGlvbgogICAgICAgIH07CiAgICAgICAgUmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzID0gUmVhY3RQcm9wVHlwZXM7CiAgICAgICAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA5MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICFmdW5jdGlvbiAoKSB7CiAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICBmdW5jdGlvbiBWTm9kZSgpIHt9CgogICAgICAgIGZ1bmN0aW9uIGgobm9kZU5hbWUsIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgIHZhciBsYXN0U2ltcGxlLAogICAgICAgICAgICAgIGNoaWxkLAogICAgICAgICAgICAgIHNpbXBsZSwKICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgIGNoaWxkcmVuID0gRU1QVFlfQ0hJTERSRU47CgogICAgICAgICAgZm9yIChpID0gYXJndW1lbnRzLmxlbmd0aDsgaS0tID4gMjspIHsKICAgICAgICAgICAgc3RhY2sucHVzaChhcmd1bWVudHNbaV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIG51bGwgIT0gYXR0cmlidXRlcy5jaGlsZHJlbikgewogICAgICAgICAgICBpZiAoIXN0YWNrLmxlbmd0aCkgc3RhY2sucHVzaChhdHRyaWJ1dGVzLmNoaWxkcmVuKTsKICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47CiAgICAgICAgICB9CgogICAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkgewogICAgICAgICAgICBpZiAoKGNoaWxkID0gc3RhY2sucG9wKCkpICYmIHZvaWQgMCAhPT0gY2hpbGQucG9wKSBmb3IgKGkgPSBjaGlsZC5sZW5ndGg7IGktLTspIHsKICAgICAgICAgICAgICBzdGFjay5wdXNoKGNoaWxkW2ldKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoY2hpbGQgPT09ICEwIHx8IGNoaWxkID09PSAhMSkgY2hpbGQgPSBudWxsOwogICAgICAgICAgICAgIGlmIChzaW1wbGUgPSAnZnVuY3Rpb24nICE9IHR5cGVvZiBub2RlTmFtZSkgaWYgKG51bGwgPT0gY2hpbGQpIGNoaWxkID0gJyc7ZWxzZSBpZiAoJ251bWJlcicgPT0gdHlwZW9mIGNoaWxkKSBjaGlsZCA9IFN0cmluZyhjaGlsZCk7ZWxzZSBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIGNoaWxkKSBzaW1wbGUgPSAhMTsKICAgICAgICAgICAgICBpZiAoc2ltcGxlICYmIGxhc3RTaW1wbGUpIGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdICs9IGNoaWxkO2Vsc2UgaWYgKGNoaWxkcmVuID09PSBFTVBUWV9DSElMRFJFTikgY2hpbGRyZW4gPSBbY2hpbGRdO2Vsc2UgY2hpbGRyZW4ucHVzaChjaGlsZCk7CiAgICAgICAgICAgICAgbGFzdFNpbXBsZSA9IHNpbXBsZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwID0gbmV3IFZOb2RlKCk7CiAgICAgICAgICBwLm5vZGVOYW1lID0gbm9kZU5hbWU7CiAgICAgICAgICBwLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICAgICAgICBwLmF0dHJpYnV0ZXMgPSBudWxsID09IGF0dHJpYnV0ZXMgPyB2b2lkIDAgOiBhdHRyaWJ1dGVzOwogICAgICAgICAgcC5rZXkgPSBudWxsID09IGF0dHJpYnV0ZXMgPyB2b2lkIDAgOiBhdHRyaWJ1dGVzLmtleTsKICAgICAgICAgIGlmICh2b2lkIDAgIT09IG9wdGlvbnMudm5vZGUpIG9wdGlvbnMudm5vZGUocCk7CiAgICAgICAgICByZXR1cm4gcDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4dGVuZChvYmosIHByb3BzKSB7CiAgICAgICAgICBmb3IgKHZhciBpIGluIHByb3BzKSB7CiAgICAgICAgICAgIG9ialtpXSA9IHByb3BzW2ldOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9uZUVsZW1lbnQodm5vZGUsIHByb3BzKSB7CiAgICAgICAgICByZXR1cm4gaCh2bm9kZS5ub2RlTmFtZSwgZXh0ZW5kKGV4dGVuZCh7fSwgdm5vZGUuYXR0cmlidXRlcyksIHByb3BzKSwgYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiB2bm9kZS5jaGlsZHJlbik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCkgewogICAgICAgICAgaWYgKCFjb21wb25lbnQuX19kICYmIChjb21wb25lbnQuX19kID0gITApICYmIDEgPT0gaXRlbXMucHVzaChjb21wb25lbnQpKSAob3B0aW9ucy5kZWJvdW5jZVJlbmRlcmluZyB8fCBzZXRUaW1lb3V0KShyZXJlbmRlcik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXJlbmRlcigpIHsKICAgICAgICAgIHZhciBwLAogICAgICAgICAgICAgIGxpc3QgPSBpdGVtczsKICAgICAgICAgIGl0ZW1zID0gW107CgogICAgICAgICAgd2hpbGUgKHAgPSBsaXN0LnBvcCgpKSB7CiAgICAgICAgICAgIGlmIChwLl9fZCkgcmVuZGVyQ29tcG9uZW50KHApOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNTYW1lTm9kZVR5cGUobm9kZSwgdm5vZGUsIGh5ZHJhdGluZykgewogICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2bm9kZSB8fCAnbnVtYmVyJyA9PSB0eXBlb2Ygdm5vZGUpIHJldHVybiB2b2lkIDAgIT09IG5vZGUuc3BsaXRUZXh0OwogICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2bm9kZS5ub2RlTmFtZSkgcmV0dXJuICFub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciAmJiBpc05hbWVkTm9kZShub2RlLCB2bm9kZS5ub2RlTmFtZSk7ZWxzZSByZXR1cm4gaHlkcmF0aW5nIHx8IG5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzTmFtZWROb2RlKG5vZGUsIG5vZGVOYW1lKSB7CiAgICAgICAgICByZXR1cm4gbm9kZS5fX24gPT09IG5vZGVOYW1lIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE5vZGVQcm9wcyh2bm9kZSkgewogICAgICAgICAgdmFyIHByb3BzID0gZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKTsKICAgICAgICAgIHByb3BzLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47CiAgICAgICAgICB2YXIgZGVmYXVsdFByb3BzID0gdm5vZGUubm9kZU5hbWUuZGVmYXVsdFByb3BzOwogICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZGVmYXVsdFByb3BzKSBmb3IgKHZhciBpIGluIGRlZmF1bHRQcm9wcykgewogICAgICAgICAgICBpZiAodm9pZCAwID09PSBwcm9wc1tpXSkgcHJvcHNbaV0gPSBkZWZhdWx0UHJvcHNbaV07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcHJvcHM7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVOb2RlKG5vZGVOYW1lLCBpc1N2ZykgewogICAgICAgICAgdmFyIG5vZGUgPSBpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTsKICAgICAgICAgIG5vZGUuX19uID0gbm9kZU5hbWU7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkgewogICAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0QWNjZXNzb3Iobm9kZSwgbmFtZSwgb2xkLCB2YWx1ZSwgaXNTdmcpIHsKICAgICAgICAgIGlmICgnY2xhc3NOYW1lJyA9PT0gbmFtZSkgbmFtZSA9ICdjbGFzcyc7CiAgICAgICAgICBpZiAoJ2tleScgPT09IG5hbWUpIDtlbHNlIGlmICgncmVmJyA9PT0gbmFtZSkgewogICAgICAgICAgICBpZiAob2xkKSBvbGQobnVsbCk7CiAgICAgICAgICAgIGlmICh2YWx1ZSkgdmFsdWUobm9kZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKCdjbGFzcycgPT09IG5hbWUgJiYgIWlzU3ZnKSBub2RlLmNsYXNzTmFtZSA9IHZhbHVlIHx8ICcnO2Vsc2UgaWYgKCdzdHlsZScgPT09IG5hbWUpIHsKICAgICAgICAgICAgaWYgKCF2YWx1ZSB8fCAnc3RyaW5nJyA9PSB0eXBlb2YgdmFsdWUgfHwgJ3N0cmluZycgPT0gdHlwZW9mIG9sZCkgbm9kZS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgfHwgJyc7CgogICAgICAgICAgICBpZiAodmFsdWUgJiYgJ29iamVjdCcgPT0gX3R5cGVvZjQodmFsdWUpKSB7CiAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBvbGQpIGZvciAodmFyIGkgaW4gb2xkKSB7CiAgICAgICAgICAgICAgICBpZiAoIShpIGluIHZhbHVlKSkgbm9kZS5zdHlsZVtpXSA9ICcnOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB2YWx1ZSkgewogICAgICAgICAgICAgICAgbm9kZS5zdHlsZVtpXSA9ICdudW1iZXInID09IHR5cGVvZiB2YWx1ZVtpXSAmJiBJU19OT05fRElNRU5TSU9OQUwudGVzdChpKSA9PT0gITEgPyB2YWx1ZVtpXSArICdweCcgOiB2YWx1ZVtpXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoJ2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MJyA9PT0gbmFtZSkgewogICAgICAgICAgICBpZiAodmFsdWUpIG5vZGUuaW5uZXJIVE1MID0gdmFsdWUuX19odG1sIHx8ICcnOwogICAgICAgICAgfSBlbHNlIGlmICgnbycgPT0gbmFtZVswXSAmJiAnbicgPT0gbmFtZVsxXSkgewogICAgICAgICAgICB2YXIgdXNlQ2FwdHVyZSA9IG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9DYXB0dXJlJC8sICcnKSk7CiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKDIpOwoKICAgICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgICAgaWYgKCFvbGQpIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5LCB1c2VDYXB0dXJlKTsKICAgICAgICAgICAgfSBlbHNlIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5LCB1c2VDYXB0dXJlKTsKCiAgICAgICAgICAgIChub2RlLl9fbCB8fCAobm9kZS5fX2wgPSB7fSkpW25hbWVdID0gdmFsdWU7CiAgICAgICAgICB9IGVsc2UgaWYgKCdsaXN0JyAhPT0gbmFtZSAmJiAndHlwZScgIT09IG5hbWUgJiYgIWlzU3ZnICYmIG5hbWUgaW4gbm9kZSkgewogICAgICAgICAgICBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCBudWxsID09IHZhbHVlID8gJycgOiB2YWx1ZSk7CiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8IHZhbHVlID09PSAhMSkgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgbnMgPSBpc1N2ZyAmJiBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvXnhsaW5rXDo/LywgJycpKTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gdmFsdWUgfHwgdmFsdWUgPT09ICExKSB7CiAgICAgICAgICAgICAgaWYgKG5zKSBub2RlLnJlbW92ZUF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpKTtlbHNlIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCdmdW5jdGlvbicgIT0gdHlwZW9mIHZhbHVlKSBpZiAobnMpIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBuYW1lLnRvTG93ZXJDYXNlKCksIHZhbHVlKTtlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNldFByb3BlcnR5KG5vZGUsIG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBub2RlW25hbWVdID0gdmFsdWU7CiAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXZlbnRQcm94eShlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fX2xbZS50eXBlXShvcHRpb25zLmV2ZW50ICYmIG9wdGlvbnMuZXZlbnQoZSkgfHwgZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmbHVzaE1vdW50cygpIHsKICAgICAgICAgIHZhciBjOwoKICAgICAgICAgIHdoaWxlIChjID0gbW91bnRzLnBvcCgpKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmFmdGVyTW91bnQpIG9wdGlvbnMuYWZ0ZXJNb3VudChjKTsKICAgICAgICAgICAgaWYgKGMuY29tcG9uZW50RGlkTW91bnQpIGMuY29tcG9uZW50RGlkTW91bnQoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkgewogICAgICAgICAgaWYgKCFkaWZmTGV2ZWwrKykgewogICAgICAgICAgICBpc1N2Z01vZGUgPSBudWxsICE9IHBhcmVudCAmJiB2b2lkIDAgIT09IHBhcmVudC5vd25lclNWR0VsZW1lbnQ7CiAgICAgICAgICAgIGh5ZHJhdGluZyA9IG51bGwgIT0gZG9tICYmICEoJ19fcHJlYWN0YXR0cl8nIGluIGRvbSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJldCA9IGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KTsKICAgICAgICAgIGlmIChwYXJlbnQgJiYgcmV0LnBhcmVudE5vZGUgIT09IHBhcmVudCkgcGFyZW50LmFwcGVuZENoaWxkKHJldCk7CgogICAgICAgICAgaWYgKCEgLS1kaWZmTGV2ZWwpIHsKICAgICAgICAgICAgaHlkcmF0aW5nID0gITE7CiAgICAgICAgICAgIGlmICghY29tcG9uZW50Um9vdCkgZmx1c2hNb3VudHMoKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaWRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIGNvbXBvbmVudFJvb3QpIHsKICAgICAgICAgIHZhciBvdXQgPSBkb20sCiAgICAgICAgICAgICAgcHJldlN2Z01vZGUgPSBpc1N2Z01vZGU7CiAgICAgICAgICBpZiAobnVsbCA9PSB2bm9kZSkgdm5vZGUgPSAnJzsKCiAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZub2RlKSB7CiAgICAgICAgICAgIGlmIChkb20gJiYgdm9pZCAwICE9PSBkb20uc3BsaXRUZXh0ICYmIGRvbS5wYXJlbnROb2RlICYmICghZG9tLl9jb21wb25lbnQgfHwgY29tcG9uZW50Um9vdCkpIHsKICAgICAgICAgICAgICBpZiAoZG9tLm5vZGVWYWx1ZSAhPSB2bm9kZSkgZG9tLm5vZGVWYWx1ZSA9IHZub2RlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG91dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZub2RlKTsKCiAgICAgICAgICAgICAgaWYgKGRvbSkgewogICAgICAgICAgICAgICAgaWYgKGRvbS5wYXJlbnROb2RlKSBkb20ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQob3V0LCBkb20pOwogICAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCAhMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBvdXQuX19wcmVhY3RhdHRyXyA9ICEwOwogICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgfQoKICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB2bm9kZS5ub2RlTmFtZSkgcmV0dXJuIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKTsKICAgICAgICAgIGlzU3ZnTW9kZSA9ICdzdmcnID09PSB2bm9kZS5ub2RlTmFtZSA/ICEwIDogJ2ZvcmVpZ25PYmplY3QnID09PSB2bm9kZS5ub2RlTmFtZSA/ICExIDogaXNTdmdNb2RlOwoKICAgICAgICAgIGlmICghZG9tIHx8ICFpc05hbWVkTm9kZShkb20sIFN0cmluZyh2bm9kZS5ub2RlTmFtZSkpKSB7CiAgICAgICAgICAgIG91dCA9IGNyZWF0ZU5vZGUoU3RyaW5nKHZub2RlLm5vZGVOYW1lKSwgaXNTdmdNb2RlKTsKCiAgICAgICAgICAgIGlmIChkb20pIHsKICAgICAgICAgICAgICB3aGlsZSAoZG9tLmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgICAgIG91dC5hcHBlbmRDaGlsZChkb20uZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoZG9tLnBhcmVudE5vZGUpIGRvbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChvdXQsIGRvbSk7CiAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCAhMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZmMgPSBvdXQuZmlyc3RDaGlsZCwKICAgICAgICAgICAgICBwcm9wcyA9IG91dC5fX3ByZWFjdGF0dHJfIHx8IChvdXQuX19wcmVhY3RhdHRyXyA9IHt9KSwKICAgICAgICAgICAgICB2Y2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKCiAgICAgICAgICBpZiAoIWh5ZHJhdGluZyAmJiB2Y2hpbGRyZW4gJiYgMSA9PT0gdmNoaWxkcmVuLmxlbmd0aCAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgdmNoaWxkcmVuWzBdICYmIG51bGwgIT0gZmMgJiYgdm9pZCAwICE9PSBmYy5zcGxpdFRleHQgJiYgbnVsbCA9PSBmYy5uZXh0U2libGluZykgewogICAgICAgICAgICBpZiAoZmMubm9kZVZhbHVlICE9IHZjaGlsZHJlblswXSkgZmMubm9kZVZhbHVlID0gdmNoaWxkcmVuWzBdOwogICAgICAgICAgfSBlbHNlIGlmICh2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCB8fCBudWxsICE9IGZjKSBpbm5lckRpZmZOb2RlKG91dCwgdmNoaWxkcmVuLCBjb250ZXh0LCBtb3VudEFsbCwgaHlkcmF0aW5nIHx8IG51bGwgIT0gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpOwoKICAgICAgICAgIGRpZmZBdHRyaWJ1dGVzKG91dCwgdm5vZGUuYXR0cmlidXRlcywgcHJvcHMpOwogICAgICAgICAgaXNTdmdNb2RlID0gcHJldlN2Z01vZGU7CiAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaW5uZXJEaWZmTm9kZShkb20sIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGlzSHlkcmF0aW5nKSB7CiAgICAgICAgICB2YXIgaiwKICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgIHZjaGlsZCwKICAgICAgICAgICAgICBjaGlsZCwKICAgICAgICAgICAgICBvcmlnaW5hbENoaWxkcmVuID0gZG9tLmNoaWxkTm9kZXMsCiAgICAgICAgICAgICAgY2hpbGRyZW4gPSBbXSwKICAgICAgICAgICAgICBrZXllZCA9IHt9LAogICAgICAgICAgICAgIGtleWVkTGVuID0gMCwKICAgICAgICAgICAgICBtaW4gPSAwLAogICAgICAgICAgICAgIGxlbiA9IG9yaWdpbmFsQ2hpbGRyZW4ubGVuZ3RoLAogICAgICAgICAgICAgIGNoaWxkcmVuTGVuID0gMCwKICAgICAgICAgICAgICB2bGVuID0gdmNoaWxkcmVuID8gdmNoaWxkcmVuLmxlbmd0aCA6IDA7CiAgICAgICAgICBpZiAoMCAhPT0gbGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBfY2hpbGQgPSBvcmlnaW5hbENoaWxkcmVuW2ldLAogICAgICAgICAgICAgICAgcHJvcHMgPSBfY2hpbGQuX19wcmVhY3RhdHRyXywKICAgICAgICAgICAgICAgIGtleSA9IHZsZW4gJiYgcHJvcHMgPyBfY2hpbGQuX2NvbXBvbmVudCA/IF9jaGlsZC5fY29tcG9uZW50Ll9fayA6IHByb3BzLmtleSA6IG51bGw7CgogICAgICAgICAgICBpZiAobnVsbCAhPSBrZXkpIHsKICAgICAgICAgICAgICBrZXllZExlbisrOwogICAgICAgICAgICAgIGtleWVkW2tleV0gPSBfY2hpbGQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcHMgfHwgKHZvaWQgMCAhPT0gX2NoaWxkLnNwbGl0VGV4dCA/IGlzSHlkcmF0aW5nID8gX2NoaWxkLm5vZGVWYWx1ZS50cmltKCkgOiAhMCA6IGlzSHlkcmF0aW5nKSkgY2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBfY2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoMCAhPT0gdmxlbikgZm9yICh2YXIgaSA9IDA7IGkgPCB2bGVuOyBpKyspIHsKICAgICAgICAgICAgdmNoaWxkID0gdmNoaWxkcmVuW2ldOwogICAgICAgICAgICBjaGlsZCA9IG51bGw7CiAgICAgICAgICAgIHZhciBrZXkgPSB2Y2hpbGQua2V5OwoKICAgICAgICAgICAgaWYgKG51bGwgIT0ga2V5KSB7CiAgICAgICAgICAgICAgaWYgKGtleWVkTGVuICYmIHZvaWQgMCAhPT0ga2V5ZWRba2V5XSkgewogICAgICAgICAgICAgICAgY2hpbGQgPSBrZXllZFtrZXldOwogICAgICAgICAgICAgICAga2V5ZWRba2V5XSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIGtleWVkTGVuLS07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKCFjaGlsZCAmJiBtaW4gPCBjaGlsZHJlbkxlbikgZm9yIChqID0gbWluOyBqIDwgY2hpbGRyZW5MZW47IGorKykgewogICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGNoaWxkcmVuW2pdICYmIGlzU2FtZU5vZGVUeXBlKGMgPSBjaGlsZHJlbltqXSwgdmNoaWxkLCBpc0h5ZHJhdGluZykpIHsKICAgICAgICAgICAgICAgIGNoaWxkID0gYzsKICAgICAgICAgICAgICAgIGNoaWxkcmVuW2pdID0gdm9pZCAwOwogICAgICAgICAgICAgICAgaWYgKGogPT09IGNoaWxkcmVuTGVuIC0gMSkgY2hpbGRyZW5MZW4tLTsKICAgICAgICAgICAgICAgIGlmIChqID09PSBtaW4pIG1pbisrOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBjaGlsZCA9IGlkaWZmKGNoaWxkLCB2Y2hpbGQsIGNvbnRleHQsIG1vdW50QWxsKTsKICAgICAgICAgICAgaWYgKGNoaWxkICYmIGNoaWxkICE9PSBkb20pIGlmIChpID49IGxlbikgZG9tLmFwcGVuZENoaWxkKGNoaWxkKTtlbHNlIGlmIChjaGlsZCAhPT0gb3JpZ2luYWxDaGlsZHJlbltpXSkgaWYgKGNoaWxkID09PSBvcmlnaW5hbENoaWxkcmVuW2kgKyAxXSkgcmVtb3ZlTm9kZShvcmlnaW5hbENoaWxkcmVuW2ldKTtlbHNlIGRvbS5pbnNlcnRCZWZvcmUoY2hpbGQsIG9yaWdpbmFsQ2hpbGRyZW5baV0gfHwgbnVsbCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoa2V5ZWRMZW4pIGZvciAodmFyIGkgaW4ga2V5ZWQpIHsKICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0ga2V5ZWRbaV0pIHJlY29sbGVjdE5vZGVUcmVlKGtleWVkW2ldLCAhMSk7CiAgICAgICAgICB9CgogICAgICAgICAgd2hpbGUgKG1pbiA8PSBjaGlsZHJlbkxlbikgewogICAgICAgICAgICBpZiAodm9pZCAwICE9PSAoY2hpbGQgPSBjaGlsZHJlbltjaGlsZHJlbkxlbi0tXSkpIHJlY29sbGVjdE5vZGVUcmVlKGNoaWxkLCAhMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWNvbGxlY3ROb2RlVHJlZShub2RlLCB1bm1vdW50T25seSkgewogICAgICAgICAgdmFyIGNvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudDsKICAgICAgICAgIGlmIChjb21wb25lbnQpIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50KTtlbHNlIHsKICAgICAgICAgICAgaWYgKG51bGwgIT0gbm9kZS5fX3ByZWFjdGF0dHJfICYmIG5vZGUuX19wcmVhY3RhdHRyXy5yZWYpIG5vZGUuX19wcmVhY3RhdHRyXy5yZWYobnVsbCk7CiAgICAgICAgICAgIGlmICh1bm1vdW50T25seSA9PT0gITEgfHwgbnVsbCA9PSBub2RlLl9fcHJlYWN0YXR0cl8pIHJlbW92ZU5vZGUobm9kZSk7CiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKG5vZGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkgewogICAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkOwoKICAgICAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsICEwKTsKICAgICAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaWZmQXR0cmlidXRlcyhkb20sIGF0dHJzLCBvbGQpIHsKICAgICAgICAgIHZhciBuYW1lOwoKICAgICAgICAgIGZvciAobmFtZSBpbiBvbGQpIHsKICAgICAgICAgICAgaWYgKCghYXR0cnMgfHwgbnVsbCA9PSBhdHRyc1tuYW1lXSkgJiYgbnVsbCAhPSBvbGRbbmFtZV0pIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSB2b2lkIDAsIGlzU3ZnTW9kZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yIChuYW1lIGluIGF0dHJzKSB7CiAgICAgICAgICAgIGlmICghKCdjaGlsZHJlbicgPT09IG5hbWUgfHwgJ2lubmVySFRNTCcgPT09IG5hbWUgfHwgbmFtZSBpbiBvbGQgJiYgYXR0cnNbbmFtZV0gPT09ICgndmFsdWUnID09PSBuYW1lIHx8ICdjaGVja2VkJyA9PT0gbmFtZSA/IGRvbVtuYW1lXSA6IG9sZFtuYW1lXSkpKSBzZXRBY2Nlc3Nvcihkb20sIG5hbWUsIG9sZFtuYW1lXSwgb2xkW25hbWVdID0gYXR0cnNbbmFtZV0sIGlzU3ZnTW9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCkgewogICAgICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IubmFtZTsKICAgICAgICAgIChjb21wb25lbnRzW25hbWVdIHx8IChjb21wb25lbnRzW25hbWVdID0gW10pKS5wdXNoKGNvbXBvbmVudCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQoQ3RvciwgcHJvcHMsIGNvbnRleHQpIHsKICAgICAgICAgIHZhciBpbnN0LAogICAgICAgICAgICAgIGxpc3QgPSBjb21wb25lbnRzW0N0b3IubmFtZV07CgogICAgICAgICAgaWYgKEN0b3IucHJvdG90eXBlICYmIEN0b3IucHJvdG90eXBlLnJlbmRlcikgewogICAgICAgICAgICBpbnN0ID0gbmV3IEN0b3IocHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgICBDb21wb25lbnQuY2FsbChpbnN0LCBwcm9wcywgY29udGV4dCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbnN0ID0gbmV3IENvbXBvbmVudChwcm9wcywgY29udGV4dCk7CiAgICAgICAgICAgIGluc3QuY29uc3RydWN0b3IgPSBDdG9yOwogICAgICAgICAgICBpbnN0LnJlbmRlciA9IGRvUmVuZGVyOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChsaXN0KSBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGg7IGktLTspIHsKICAgICAgICAgICAgaWYgKGxpc3RbaV0uY29uc3RydWN0b3IgPT09IEN0b3IpIHsKICAgICAgICAgICAgICBpbnN0Ll9fYiA9IGxpc3RbaV0uX19iOwogICAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaW5zdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRvUmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0Q29tcG9uZW50UHJvcHMoY29tcG9uZW50LCBwcm9wcywgb3B0cywgY29udGV4dCwgbW91bnRBbGwpIHsKICAgICAgICAgIGlmICghY29tcG9uZW50Ll9feCkgewogICAgICAgICAgICBjb21wb25lbnQuX194ID0gITA7CiAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yID0gcHJvcHMucmVmKSBkZWxldGUgcHJvcHMucmVmOwogICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fayA9IHByb3BzLmtleSkgZGVsZXRlIHByb3BzLmtleTsKCiAgICAgICAgICAgIGlmICghY29tcG9uZW50LmJhc2UgfHwgbW91bnRBbGwpIHsKICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSBjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhwcm9wcywgY29udGV4dCk7CgogICAgICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBjb21wb25lbnQuY29udGV4dCkgewogICAgICAgICAgICAgIGlmICghY29tcG9uZW50Ll9fYykgY29tcG9uZW50Ll9fYyA9IGNvbXBvbmVudC5jb250ZXh0OwogICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFjb21wb25lbnQuX19wKSBjb21wb25lbnQuX19wID0gY29tcG9uZW50LnByb3BzOwogICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wczsKICAgICAgICAgICAgY29tcG9uZW50Ll9feCA9ICExOwogICAgICAgICAgICBpZiAoMCAhPT0gb3B0cykgaWYgKDEgPT09IG9wdHMgfHwgb3B0aW9ucy5zeW5jQ29tcG9uZW50VXBkYXRlcyAhPT0gITEgfHwgIWNvbXBvbmVudC5iYXNlKSByZW5kZXJDb21wb25lbnQoY29tcG9uZW50LCAxLCBtb3VudEFsbCk7ZWxzZSBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCk7CiAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19yKSBjb21wb25lbnQuX19yKGNvbXBvbmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXJDb21wb25lbnQoY29tcG9uZW50LCBvcHRzLCBtb3VudEFsbCwgaXNDaGlsZCkgewogICAgICAgICAgaWYgKCFjb21wb25lbnQuX194KSB7CiAgICAgICAgICAgIHZhciByZW5kZXJlZCwKICAgICAgICAgICAgICAgIGluc3QsCiAgICAgICAgICAgICAgICBjYmFzZSwKICAgICAgICAgICAgICAgIHByb3BzID0gY29tcG9uZW50LnByb3BzLAogICAgICAgICAgICAgICAgc3RhdGUgPSBjb21wb25lbnQuc3RhdGUsCiAgICAgICAgICAgICAgICBjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQsCiAgICAgICAgICAgICAgICBwcmV2aW91c1Byb3BzID0gY29tcG9uZW50Ll9fcCB8fCBwcm9wcywKICAgICAgICAgICAgICAgIHByZXZpb3VzU3RhdGUgPSBjb21wb25lbnQuX19zIHx8IHN0YXRlLAogICAgICAgICAgICAgICAgcHJldmlvdXNDb250ZXh0ID0gY29tcG9uZW50Ll9fYyB8fCBjb250ZXh0LAogICAgICAgICAgICAgICAgaXNVcGRhdGUgPSBjb21wb25lbnQuYmFzZSwKICAgICAgICAgICAgICAgIG5leHRCYXNlID0gY29tcG9uZW50Ll9fYiwKICAgICAgICAgICAgICAgIGluaXRpYWxCYXNlID0gaXNVcGRhdGUgfHwgbmV4dEJhc2UsCiAgICAgICAgICAgICAgICBpbml0aWFsQ2hpbGRDb21wb25lbnQgPSBjb21wb25lbnQuX2NvbXBvbmVudCwKICAgICAgICAgICAgICAgIHNraXAgPSAhMTsKCiAgICAgICAgICAgIGlmIChpc1VwZGF0ZSkgewogICAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByZXZpb3VzUHJvcHM7CiAgICAgICAgICAgICAgY29tcG9uZW50LnN0YXRlID0gcHJldmlvdXNTdGF0ZTsKICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IHByZXZpb3VzQ29udGV4dDsKICAgICAgICAgICAgICBpZiAoMiAhPT0gb3B0cyAmJiBjb21wb25lbnQuc2hvdWxkQ29tcG9uZW50VXBkYXRlICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KSA9PT0gITEpIHNraXAgPSAhMDtlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZSkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KTsKICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wczsKICAgICAgICAgICAgICBjb21wb25lbnQuc3RhdGUgPSBzdGF0ZTsKICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbXBvbmVudC5fX3AgPSBjb21wb25lbnQuX19zID0gY29tcG9uZW50Ll9fYyA9IGNvbXBvbmVudC5fX2IgPSBudWxsOwogICAgICAgICAgICBjb21wb25lbnQuX19kID0gITE7CgogICAgICAgICAgICBpZiAoIXNraXApIHsKICAgICAgICAgICAgICByZW5kZXJlZCA9IGNvbXBvbmVudC5yZW5kZXIocHJvcHMsIHN0YXRlLCBjb250ZXh0KTsKICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmdldENoaWxkQ29udGV4dCkgY29udGV4dCA9IGV4dGVuZChleHRlbmQoe30sIGNvbnRleHQpLCBjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KCkpOwogICAgICAgICAgICAgIHZhciB0b1VubW91bnQsCiAgICAgICAgICAgICAgICAgIGJhc2UsCiAgICAgICAgICAgICAgICAgIGNoaWxkQ29tcG9uZW50ID0gcmVuZGVyZWQgJiYgcmVuZGVyZWQubm9kZU5hbWU7CgogICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBjaGlsZENvbXBvbmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoaWxkUHJvcHMgPSBnZXROb2RlUHJvcHMocmVuZGVyZWQpOwogICAgICAgICAgICAgICAgaW5zdCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDsKICAgICAgICAgICAgICAgIGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3IgPT09IGNoaWxkQ29tcG9uZW50ICYmIGNoaWxkUHJvcHMua2V5ID09IGluc3QuX19rKSBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAxLCBjb250ZXh0LCAhMSk7ZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluc3Q7CiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fY29tcG9uZW50ID0gaW5zdCA9IGNyZWF0ZUNvbXBvbmVudChjaGlsZENvbXBvbmVudCwgY2hpbGRQcm9wcywgY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGluc3QuX19iID0gaW5zdC5fX2IgfHwgbmV4dEJhc2U7CiAgICAgICAgICAgICAgICAgIGluc3QuX191ID0gY29tcG9uZW50OwogICAgICAgICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAwLCBjb250ZXh0LCAhMSk7CiAgICAgICAgICAgICAgICAgIHJlbmRlckNvbXBvbmVudChpbnN0LCAxLCBtb3VudEFsbCwgITApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYmFzZSA9IGluc3QuYmFzZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2Jhc2UgPSBpbml0aWFsQmFzZTsKICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDsKICAgICAgICAgICAgICAgIGlmICh0b1VubW91bnQpIGNiYXNlID0gY29tcG9uZW50Ll9jb21wb25lbnQgPSBudWxsOwoKICAgICAgICAgICAgICAgIGlmIChpbml0aWFsQmFzZSB8fCAxID09PSBvcHRzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjYmFzZSkgY2Jhc2UuX2NvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIGJhc2UgPSBkaWZmKGNiYXNlLCByZW5kZXJlZCwgY29udGV4dCwgbW91bnRBbGwgfHwgIWlzVXBkYXRlLCBpbml0aWFsQmFzZSAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlLCAhMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgYmFzZVBhcmVudCA9IGluaXRpYWxCYXNlLnBhcmVudE5vZGU7CgogICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJlbnQgJiYgYmFzZSAhPT0gYmFzZVBhcmVudCkgewogICAgICAgICAgICAgICAgICBiYXNlUGFyZW50LnJlcGxhY2VDaGlsZChiYXNlLCBpbml0aWFsQmFzZSk7CgogICAgICAgICAgICAgICAgICBpZiAoIXRvVW5tb3VudCkgewogICAgICAgICAgICAgICAgICAgIGluaXRpYWxCYXNlLl9jb21wb25lbnQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKGluaXRpYWxCYXNlLCAhMSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICh0b1VubW91bnQpIHVubW91bnRDb21wb25lbnQodG9Vbm1vdW50KTsKICAgICAgICAgICAgICBjb21wb25lbnQuYmFzZSA9IGJhc2U7CgogICAgICAgICAgICAgIGlmIChiYXNlICYmICFpc0NoaWxkKSB7CiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50UmVmID0gY29tcG9uZW50LAogICAgICAgICAgICAgICAgICAgIHQgPSBjb21wb25lbnQ7CgogICAgICAgICAgICAgICAgd2hpbGUgKHQgPSB0Ll9fdSkgewogICAgICAgICAgICAgICAgICAoY29tcG9uZW50UmVmID0gdCkuYmFzZSA9IGJhc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYmFzZS5fY29tcG9uZW50ID0gY29tcG9uZW50UmVmOwogICAgICAgICAgICAgICAgYmFzZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPSBjb21wb25lbnRSZWYuY29uc3RydWN0b3I7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWlzVXBkYXRlIHx8IG1vdW50QWxsKSBtb3VudHMudW5zaGlmdChjb21wb25lbnQpO2Vsc2UgaWYgKCFza2lwKSB7CiAgICAgICAgICAgICAgZmx1c2hNb3VudHMoKTsKICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZSkgY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZShwcmV2aW91c1Byb3BzLCBwcmV2aW91c1N0YXRlLCBwcmV2aW91c0NvbnRleHQpOwogICAgICAgICAgICAgIGlmIChvcHRpb25zLmFmdGVyVXBkYXRlKSBvcHRpb25zLmFmdGVyVXBkYXRlKGNvbXBvbmVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG51bGwgIT0gY29tcG9uZW50Ll9faCkgd2hpbGUgKGNvbXBvbmVudC5fX2gubGVuZ3RoKSB7CiAgICAgICAgICAgICAgY29tcG9uZW50Ll9faC5wb3AoKS5jYWxsKGNvbXBvbmVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFkaWZmTGV2ZWwgJiYgIWlzQ2hpbGQpIGZsdXNoTW91bnRzKCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCkgewogICAgICAgICAgdmFyIGMgPSBkb20gJiYgZG9tLl9jb21wb25lbnQsCiAgICAgICAgICAgICAgb3JpZ2luYWxDb21wb25lbnQgPSBjLAogICAgICAgICAgICAgIG9sZERvbSA9IGRvbSwKICAgICAgICAgICAgICBpc0RpcmVjdE93bmVyID0gYyAmJiBkb20uX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZSwKICAgICAgICAgICAgICBpc093bmVyID0gaXNEaXJlY3RPd25lciwKICAgICAgICAgICAgICBwcm9wcyA9IGdldE5vZGVQcm9wcyh2bm9kZSk7CgogICAgICAgICAgd2hpbGUgKGMgJiYgIWlzT3duZXIgJiYgKGMgPSBjLl9fdSkpIHsKICAgICAgICAgICAgaXNPd25lciA9IGMuY29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjICYmIGlzT3duZXIgJiYgKCFtb3VudEFsbCB8fCBjLl9jb21wb25lbnQpKSB7CiAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAzLCBjb250ZXh0LCBtb3VudEFsbCk7CiAgICAgICAgICAgIGRvbSA9IGMuYmFzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChvcmlnaW5hbENvbXBvbmVudCAmJiAhaXNEaXJlY3RPd25lcikgewogICAgICAgICAgICAgIHVubW91bnRDb21wb25lbnQob3JpZ2luYWxDb21wb25lbnQpOwogICAgICAgICAgICAgIGRvbSA9IG9sZERvbSA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGMgPSBjcmVhdGVDb21wb25lbnQodm5vZGUubm9kZU5hbWUsIHByb3BzLCBjb250ZXh0KTsKCiAgICAgICAgICAgIGlmIChkb20gJiYgIWMuX19iKSB7CiAgICAgICAgICAgICAgYy5fX2IgPSBkb207CiAgICAgICAgICAgICAgb2xkRG9tID0gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2V0Q29tcG9uZW50UHJvcHMoYywgcHJvcHMsIDEsIGNvbnRleHQsIG1vdW50QWxsKTsKICAgICAgICAgICAgZG9tID0gYy5iYXNlOwoKICAgICAgICAgICAgaWYgKG9sZERvbSAmJiBkb20gIT09IG9sZERvbSkgewogICAgICAgICAgICAgIG9sZERvbS5fY29tcG9uZW50ID0gbnVsbDsKICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShvbGREb20sICExKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBkb207CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50KGNvbXBvbmVudCkgewogICAgICAgICAgaWYgKG9wdGlvbnMuYmVmb3JlVW5tb3VudCkgb3B0aW9ucy5iZWZvcmVVbm1vdW50KGNvbXBvbmVudCk7CiAgICAgICAgICB2YXIgYmFzZSA9IGNvbXBvbmVudC5iYXNlOwogICAgICAgICAgY29tcG9uZW50Ll9feCA9ICEwOwogICAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxVbm1vdW50KCk7CiAgICAgICAgICBjb21wb25lbnQuYmFzZSA9IG51bGw7CiAgICAgICAgICB2YXIgaW5uZXIgPSBjb21wb25lbnQuX2NvbXBvbmVudDsKICAgICAgICAgIGlmIChpbm5lcikgdW5tb3VudENvbXBvbmVudChpbm5lcik7ZWxzZSBpZiAoYmFzZSkgewogICAgICAgICAgICBpZiAoYmFzZS5fX3ByZWFjdGF0dHJfICYmIGJhc2UuX19wcmVhY3RhdHRyXy5yZWYpIGJhc2UuX19wcmVhY3RhdHRyXy5yZWYobnVsbCk7CiAgICAgICAgICAgIGNvbXBvbmVudC5fX2IgPSBiYXNlOwogICAgICAgICAgICByZW1vdmVOb2RlKGJhc2UpOwogICAgICAgICAgICBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7CiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGJhc2UpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbXBvbmVudC5fX3IpIGNvbXBvbmVudC5fX3IobnVsbCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpIHsKICAgICAgICAgIHRoaXMuX19kID0gITA7CiAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzOwogICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgfHwge307CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXIodm5vZGUsIHBhcmVudCwgbWVyZ2UpIHsKICAgICAgICAgIHJldHVybiBkaWZmKG1lcmdlLCB2bm9kZSwge30sICExLCBwYXJlbnQsICExKTsKICAgICAgICB9CgogICAgICAgIHZhciBvcHRpb25zID0ge307CiAgICAgICAgdmFyIHN0YWNrID0gW107CiAgICAgICAgdmFyIEVNUFRZX0NISUxEUkVOID0gW107CiAgICAgICAgdmFyIElTX05PTl9ESU1FTlNJT05BTCA9IC9hY2l0fGV4KD86c3xnfG58cHwkKXxycGh8b3dzfG1uY3xudHd8aW5lW2NoXXx6b298Xm9yZC9pOwogICAgICAgIHZhciBpdGVtcyA9IFtdOwogICAgICAgIHZhciBtb3VudHMgPSBbXTsKICAgICAgICB2YXIgZGlmZkxldmVsID0gMDsKICAgICAgICB2YXIgaXNTdmdNb2RlID0gITE7CiAgICAgICAgdmFyIGh5ZHJhdGluZyA9ICExOwogICAgICAgIHZhciBjb21wb25lbnRzID0ge307CiAgICAgICAgZXh0ZW5kKENvbXBvbmVudC5wcm90b3R5cGUsIHsKICAgICAgICAgIHNldFN0YXRlOiBmdW5jdGlvbiBzZXRTdGF0ZShzdGF0ZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHMgPSB0aGlzLnN0YXRlOwogICAgICAgICAgICBpZiAoIXRoaXMuX19zKSB0aGlzLl9fcyA9IGV4dGVuZCh7fSwgcyk7CiAgICAgICAgICAgIGV4dGVuZChzLCAnZnVuY3Rpb24nID09IHR5cGVvZiBzdGF0ZSA/IHN0YXRlKHMsIHRoaXMucHJvcHMpIDogc3RhdGUpOwogICAgICAgICAgICBpZiAoY2FsbGJhY2spICh0aGlzLl9faCA9IHRoaXMuX19oIHx8IFtdKS5wdXNoKGNhbGxiYWNrKTsKICAgICAgICAgICAgZW5xdWV1ZVJlbmRlcih0aGlzKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24gZm9yY2VVcGRhdGUoY2FsbGJhY2spIHsKICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSAodGhpcy5fX2ggPSB0aGlzLl9faCB8fCBbXSkucHVzaChjYWxsYmFjayk7CiAgICAgICAgICAgIHJlbmRlckNvbXBvbmVudCh0aGlzLCAyKTsKICAgICAgICAgIH0sCiAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHt9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHByZWFjdCA9IHsKICAgICAgICAgIGg6IGgsCiAgICAgICAgICBjcmVhdGVFbGVtZW50OiBoLAogICAgICAgICAgY2xvbmVFbGVtZW50OiBjbG9uZUVsZW1lbnQsCiAgICAgICAgICBDb21wb25lbnQ6IENvbXBvbmVudCwKICAgICAgICAgIHJlbmRlcjogcmVuZGVyLAogICAgICAgICAgcmVyZW5kZXI6IHJlcmVuZGVyLAogICAgICAgICAgb3B0aW9uczogb3B0aW9ucwogICAgICAgIH07CiAgICAgICAgaWYgKHRydWUpIG1vZHVsZS5leHBvcnRzID0gcHJlYWN0O2Vsc2Ugc2VsZi5wcmVhY3QgPSBwcmVhY3Q7CiAgICAgIH0oKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gVGhpcyBmaWxlIGNhbiBiZSByZXF1aXJlZCBpbiBCcm93c2VyaWZ5IGFuZCBOb2RlLmpzIGZvciBhdXRvbWF0aWMgcG9seWZpbGwKICAgICAgLy8gVG8gdXNlIGl0OiAgcmVxdWlyZSgnZXM2LXByb21pc2UvYXV0bycpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KS5wb2x5ZmlsbCgpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDk1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcywgZ2xvYmFsKSB7CiAgICAgICAgdmFyIHJlcXVpcmU7CiAgICAgICAgLyohCiAgICAgICAgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuCiAgICAgICAgKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKQogICAgICAgICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZQogICAgICAgICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRQogICAgICAgICogQHZlcnNpb24gICA0LjEuMQogICAgICAgICovCgoKICAgICAgICAoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICAgICAgICAgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDogdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDogZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCk7CiAgICAgICAgfSkodGhpcywgZnVuY3Rpb24gKCkgewogICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgIGZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkgewogICAgICAgICAgICB2YXIgdHlwZSA9IF90eXBlb2Y0KHgpOwoKICAgICAgICAgICAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkgewogICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkOwoKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KSB7CiAgICAgICAgICAgIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9pc0FycmF5ID0gZnVuY3Rpb24gX2lzQXJyYXkoeCkgewogICAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlzQXJyYXkgPSBfaXNBcnJheTsKICAgICAgICAgIHZhciBsZW4gPSAwOwogICAgICAgICAgdmFyIHZlcnR4TmV4dCA9IHVuZGVmaW5lZDsKICAgICAgICAgIHZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHVuZGVmaW5lZDsKCiAgICAgICAgICB2YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykgewogICAgICAgICAgICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7CiAgICAgICAgICAgIHF1ZXVlW2xlbiArIDFdID0gYXJnOwogICAgICAgICAgICBsZW4gKz0gMjsKCiAgICAgICAgICAgIGlmIChsZW4gPT09IDIpIHsKICAgICAgICAgICAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guCiAgICAgICAgICAgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXkKICAgICAgICAgICAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuCiAgICAgICAgICAgICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7CiAgICAgICAgICAgICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNjaGVkdWxlRmx1c2goKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHsKICAgICAgICAgICAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7CiAgICAgICAgICAgIGFzYXAgPSBhc2FwRm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDsKICAgICAgICAgIHZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTsKICAgICAgICAgIHZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgICAgICAgICB2YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7IC8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwCgogICAgICAgICAgdmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJzsgLy8gbm9kZQoKICAgICAgICAgIGZ1bmN0aW9uIHVzZU5leHRUaWNrKCkgewogICAgICAgICAgICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHkKICAgICAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSAvLyB2ZXJ0eAoKCiAgICAgICAgICBmdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkgewogICAgICAgICAgICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmVydHhOZXh0KGZsdXNoKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7CiAgICAgICAgICAgIHZhciBpdGVyYXRpb25zID0gMDsKICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTsKICAgICAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7CiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgewogICAgICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IC8vIHdlYiB3b3JrZXIKCgogICAgICAgICAgZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7CiAgICAgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7CiAgICAgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHsKICAgICAgICAgICAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5CiAgICAgICAgICAgIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKQogICAgICAgICAgICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTsKCiAgICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikgewogICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldOwogICAgICAgICAgICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07CiAgICAgICAgICAgICAgY2FsbGJhY2soYXJnKTsKICAgICAgICAgICAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxlbiA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHZhciByID0gcmVxdWlyZTsKCiAgICAgICAgICAgICAgdmFyIHZlcnR4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nyk7CgogICAgICAgICAgICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7CiAgICAgICAgICAgICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDsgLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczoKCiAgICAgICAgICBpZiAoaXNOb2RlKSB7CiAgICAgICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpOwogICAgICAgICAgfSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikgewogICAgICAgICAgICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpOwogICAgICAgICAgfSBlbHNlIGlmIChpc1dvcmtlcikgewogICAgICAgICAgICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTsKICAgICAgICAgIH0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmICJmdW5jdGlvbiIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7CiAgICAgICAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpczsKICAgICAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7CgogICAgICAgICAgICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIG1ha2VQcm9taXNlKGNoaWxkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9zdGF0ZSA9IHBhcmVudC5fc3RhdGU7CgogICAgICAgICAgICBpZiAoX3N0YXRlKSB7CiAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07CiAgICAgICAgICAgICAgICBhc2FwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIC8qKgogICAgICAgICAgICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlCiAgICAgICAgICAgIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgcmVzb2x2ZSgxKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAvLyB2YWx1ZSA9PT0gMQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7CiAgICAgICAgICAKICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAvLyB2YWx1ZSA9PT0gMQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQG1ldGhvZCByZXNvbHZlCiAgICAgICAgICAgIEBzdGF0aWMKICAgICAgICAgICAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoCiAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuCiAgICAgICAgICAgIGB2YWx1ZWAKICAgICAgICAgICovCgoKICAgICAgICAgIGZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHsKICAgICAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpczsKCiAgICAgICAgICAgIGlmIChvYmplY3QgJiYgX3R5cGVvZjQob2JqZWN0KSA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3RvcikgewogICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApOwogICAgICAgICAgICByZXNvbHZlKHByb21pc2UsIG9iamVjdCk7CiAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTsKCiAgICAgICAgICBmdW5jdGlvbiBub29wKCkge30KCiAgICAgICAgICB2YXIgUEVORElORyA9IHZvaWQgMDsKICAgICAgICAgIHZhciBGVUxGSUxMRUQgPSAxOwogICAgICAgICAgdmFyIFJFSkVDVEVEID0gMjsKICAgICAgICAgIHZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpOwoKICAgICAgICAgIGZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGYiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yOwogICAgICAgICAgICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHRyeVRoZW4odGhlbiQkMSwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHRoZW4kJDEuY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuJCQxKSB7CiAgICAgICAgICAgIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHsKICAgICAgICAgICAgICB2YXIgc2VhbGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuJCQxLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAoc2VhbGVkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZWFsZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICBpZiAoc2VhbGVkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZWFsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICAgICAgICAgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTsKCiAgICAgICAgICAgICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHsKICAgICAgICAgICAgICAgIHNlYWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgcHJvbWlzZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHsKICAgICAgICAgICAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7CiAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7CiAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpIHsKICAgICAgICAgICAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkMSA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUkMSkgewogICAgICAgICAgICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh0aGVuJCQxID09PSBHRVRfVEhFTl9FUlJPUikgewogICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTsKICAgICAgICAgICAgICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gbnVsbDsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoZW4kJDEgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkMSkpIHsKICAgICAgICAgICAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkgewogICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHsKICAgICAgICAgICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHsKICAgICAgICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHsKICAgICAgICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHB1Ymxpc2gocHJvbWlzZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkgewogICAgICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlOwogICAgICAgICAgICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDsKCiAgICAgICAgICAgIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbikgewogICAgICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7CiAgICAgICAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjsKICAgICAgICAgICAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHsKICAgICAgICAgICAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7CiAgICAgICAgICAgIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoOwogICAgICAgICAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsOwogICAgICAgICAgICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkOwogICAgICAgICAgICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7CiAgICAgICAgICAgIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjsKCiAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkgewogICAgICAgICAgICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkgewogICAgICAgICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVyczsKICAgICAgICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTsKCiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjaGlsZCA9IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0OwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykgewogICAgICAgICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07CiAgICAgICAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07CgogICAgICAgICAgICAgIGlmIChjaGlsZCkgewogICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBFcnJvck9iamVjdCgpIHsKICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpOwoKICAgICAgICAgIGZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7CiAgICAgICAgICAgICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHsKICAgICAgICAgICAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGVycm9yID0gdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgc3VjY2VlZGVkID0gdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgZmFpbGVkID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7CiAgICAgICAgICAgICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTsKCiAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHsKICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBlcnJvciA9IHZhbHVlLmVycm9yOwogICAgICAgICAgICAgICAgdmFsdWUuZXJyb3IgPSBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7CiAgICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YWx1ZSA9IGRldGFpbDsKICAgICAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHsvLyBub29wCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7CiAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHsKICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkgewogICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikgewogICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaWQgPSAwOwoKICAgICAgICAgIGZ1bmN0aW9uIG5leHRJZCgpIHsKICAgICAgICAgICAgcmV0dXJuIGlkKys7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkgewogICAgICAgICAgICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKzsKICAgICAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBFbnVtZXJhdG9yJDEoQ29uc3RydWN0b3IsIGlucHV0KSB7CiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjsKICAgICAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApOwoKICAgICAgICAgICAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHsKICAgICAgICAgICAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaXNBcnJheShpbnB1dCkpIHsKICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDsKICAgICAgICAgICAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7CiAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKCiAgICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwOwoKICAgICAgICAgICAgICAgIHRoaXMuX2VudW1lcmF0ZShpbnB1dCk7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTsKICAgICAgICAgIH0KCiAgICAgICAgICBFbnVtZXJhdG9yJDEucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgRW51bWVyYXRvciQxLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjsKICAgICAgICAgICAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7CgogICAgICAgICAgICBpZiAocmVzb2x2ZSQkMSA9PT0gcmVzb2x2ZSQxKSB7CiAgICAgICAgICAgICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7CgogICAgICAgICAgICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9yZW1haW5pbmctLTsKICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5OwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSQyKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApOwogICAgICAgICAgICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pOwoKICAgICAgICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQxKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlJCQxKGVudHJ5KTsKICAgICAgICAgICAgICAgIH0pLCBpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJDEoZW50cnkpLCBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBFbnVtZXJhdG9yJDEucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7CiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlOwoKICAgICAgICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7CiAgICAgICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07CgogICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHsKICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBFbnVtZXJhdG9yJDEucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkgewogICAgICAgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7CiAgICAgICAgICAgIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CiAgICAgICAgICAvKioKICAgICAgICAgICAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoCiAgICAgICAgICAgIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3IKICAgICAgICAgICAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsCiAgICAgICAgICAgIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS4KICAgICAgICAgIAogICAgICAgICAgICBFeGFtcGxlOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTsKICAgICAgICAgICAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTsKICAgICAgICAgICAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTsKICAgICAgICAgICAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07CiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpewogICAgICAgICAgICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2UKICAgICAgICAgICAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzCiAgICAgICAgICAgIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZToKICAgICAgICAgIAogICAgICAgICAgICBFeGFtcGxlOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTsKICAgICAgICAgICAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcigiMiIpKTsKICAgICAgICAgICAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcigiMyIpKTsKICAgICAgICAgICAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07CiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpewogICAgICAgICAgICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIQogICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09ICIyIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQG1ldGhvZCBhbGwKICAgICAgICAgICAgQHN0YXRpYwogICAgICAgICAgICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzCiAgICAgICAgICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLgogICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW4KICAgICAgICAgICAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuCiAgICAgICAgICAgIEBzdGF0aWMKICAgICAgICAgICovCgoKICAgICAgICAgIGZ1bmN0aW9uIGFsbCQxKGVudHJpZXMpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yJDEodGhpcywgZW50cmllcykucHJvbWlzZTsKICAgICAgICAgIH0KICAgICAgICAgIC8qKgogICAgICAgICAgICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlCiAgICAgICAgICAgIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS4KICAgICAgICAgIAogICAgICAgICAgICBFeGFtcGxlOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTsKICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpOwogICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpewogICAgICAgICAgICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxCiAgICAgICAgICAgICAgLy8gd2FzIHJlc29sdmVkLgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdAogICAgICAgICAgICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlCiAgICAgICAgICAgIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXMKICAgICAgICAgICAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkCiAgICAgICAgICAgIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpOwogICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpOwogICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpewogICAgICAgICAgICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmUKICAgICAgICAgICAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czoKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pCiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEBtZXRob2QgcmFjZQogICAgICAgICAgICBAc3RhdGljCiAgICAgICAgICAgIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmUKICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZAogICAgICAgICAgICBwcm9taXNlIHRvIHNldHRsZS4KICAgICAgICAgICovCgoKICAgICAgICAgIGZ1bmN0aW9uIHJhY2UkMShlbnRyaWVzKSB7CiAgICAgICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgICAgICAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7CgogICAgICAgICAgICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvKioKICAgICAgICAgICAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuCiAgICAgICAgICAgIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzoKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpOwogICAgICAgICAgCiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBAbWV0aG9kIHJlamVjdAogICAgICAgICAgICBAc3RhdGljCiAgICAgICAgICAgIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguCiAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLgogICAgICAgICAgKi8KCgogICAgICAgICAgZnVuY3Rpb24gcmVqZWN0JDEocmVhc29uKSB7CiAgICAgICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgICAgICAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7CiAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApOwogICAgICAgICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG5lZWRzTmV3KCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTsKICAgICAgICAgIH0KICAgICAgICAgIC8qKgogICAgICAgICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlCiAgICAgICAgICAgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoCiAgICAgICAgICAgIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvbgogICAgICAgICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC4KICAgICAgICAgIAogICAgICAgICAgICBUZXJtaW5vbG9neQogICAgICAgICAgICAtLS0tLS0tLS0tLQogICAgICAgICAgCiAgICAgICAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uCiAgICAgICAgICAgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC4KICAgICAgICAgICAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLgogICAgICAgICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC4KICAgICAgICAgICAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLgogICAgICAgICAgICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC4KICAgICAgICAgIAogICAgICAgICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuCiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWQKICAgICAgICAgICAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZQogICAgICAgICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS4KICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGEKICAgICAgICAgICAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUncwogICAgICAgICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGwKICAgICAgICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbAogICAgICAgICAgICBpdHNlbGYgZnVsZmlsbC4KICAgICAgICAgIAogICAgICAgICAgCiAgICAgICAgICAgIEJhc2ljIFVzYWdlOgogICAgICAgICAgICAtLS0tLS0tLS0tLS0KICAgICAgICAgIAogICAgICAgICAgICBgYGBqcwogICAgICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIC8vIG9uIHN1Y2Nlc3MKICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgICAgIAogICAgICAgICAgICAgIC8vIG9uIGZhaWx1cmUKICAgICAgICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgICAgLy8gb24gZnVsZmlsbG1lbnQKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgICAgICAgLy8gb24gcmVqZWN0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBBZHZhbmNlZCBVc2FnZToKICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhcwogICAgICAgICAgICBgWE1MSHR0cFJlcXVlc3Rgcy4KICAgICAgICAgIAogICAgICAgICAgICBgYGBqcwogICAgICAgICAgICBmdW5jdGlvbiBnZXRKU09OKHVybCkgewogICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgCiAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTsKICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyOwogICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJzsKICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpOwogICAgICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHsKICAgICAgICAgICAgICAvLyBvbiBmdWxmaWxsbWVudAogICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICAgICAgICAvLyBvbiByZWplY3Rpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuCiAgICAgICAgICAKICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgICAgICAgIGdldEpTT04oJy9wb3N0cycpLAogICAgICAgICAgICAgIGdldEpTT04oJy9jb21tZW50cycpCiAgICAgICAgICAgIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXsKICAgICAgICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OCiAgICAgICAgICAgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTgogICAgICAgICAgCiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlczsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEBjbGFzcyBQcm9taXNlCiAgICAgICAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyCiAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgQGNvbnN0cnVjdG9yCiAgICAgICAgICAqLwoKCiAgICAgICAgICBmdW5jdGlvbiBQcm9taXNlJDIocmVzb2x2ZXIpIHsKICAgICAgICAgICAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpOwogICAgICAgICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTsKCiAgICAgICAgICAgIGlmIChub29wICE9PSByZXNvbHZlcikgewogICAgICAgICAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7CiAgICAgICAgICAgICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UkMiA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBQcm9taXNlJDIuYWxsID0gYWxsJDE7CiAgICAgICAgICBQcm9taXNlJDIucmFjZSA9IHJhY2UkMTsKICAgICAgICAgIFByb21pc2UkMi5yZXNvbHZlID0gcmVzb2x2ZSQxOwogICAgICAgICAgUHJvbWlzZSQyLnJlamVjdCA9IHJlamVjdCQxOwogICAgICAgICAgUHJvbWlzZSQyLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7CiAgICAgICAgICBQcm9taXNlJDIuX3NldEFzYXAgPSBzZXRBc2FwOwogICAgICAgICAgUHJvbWlzZSQyLl9hc2FwID0gYXNhcDsKICAgICAgICAgIFByb21pc2UkMi5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBQcm9taXNlJDIsCgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwKICAgICAgICAgICAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZQogICAgICAgICAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC4KICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7CiAgICAgICAgICAgICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBDaGFpbmluZwogICAgICAgICAgICAgIC0tLS0tLS0tCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nCiAgICAgICAgICAgICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudAogICAgICAgICAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLgogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIubmFtZTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHsKICAgICAgICAgICAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXQKICAgICAgICAgICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuCiAgICAgICAgICAgICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy4KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS4KICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAvLyBuZXZlciByZWFjaGVkCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgQXNzaW1pbGF0aW9uCiAgICAgICAgICAgICAgLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlCiAgICAgICAgICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZQogICAgICAgICAgICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nCiAgICAgICAgICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHsKICAgICAgICAgICAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHsKICAgICAgICAgICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmUKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFNpbXBsZSBFeGFtcGxlCiAgICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgU3luY2hyb25vdXMgRXhhbXBsZQogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgICAgbGV0IHJlc3VsdDsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTsKICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikgewogICAgICAgICAgICAgICAgLy8gZmFpbHVyZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgRXJyYmFjayBFeGFtcGxlCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIC8vIGZhaWx1cmUKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgUHJvbWlzZSBFeGFtcGxlOwogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgICAgLy8gZmFpbHVyZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBBZHZhbmNlZCBFeGFtcGxlCiAgICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgU3luY2hyb25vdXMgRXhhbXBsZQogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgICAgbGV0IGF1dGhvciwgYm9va3M7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7CiAgICAgICAgICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpOwogICAgICAgICAgICAgICAgLy8gc3VjY2VzcwogICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgICAgICAgICAgICAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBFcnJiYWNrIEV4YW1wbGUKICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgCiAgICAgICAgICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykgewogICAgICAgICAgICAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTsKICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgLy8gc3VjY2VzcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBQcm9taXNlIEV4YW1wbGU7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgICBmaW5kQXV0aG9yKCkuCiAgICAgICAgICAgICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS4KICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3MpewogICAgICAgICAgICAgICAgICAvLyBmb3VuZCBib29rcwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBAbWV0aG9kIHRoZW4KICAgICAgICAgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZAogICAgICAgICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWQKICAgICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgICAgQHJldHVybiB7UHJvbWlzZX0KICAgICAgICAgICAgKi8KICAgICAgICAgICAgdGhlbjogdGhlbiwKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWUKICAgICAgICAgICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LgogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgLy8gc3luY2hyb25vdXMKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZmluZEF1dGhvcigpOwogICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgICAgICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlcwogICAgICAgICAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pewogICAgICAgICAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgQG1ldGhvZCBjYXRjaAogICAgICAgICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uCiAgICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICAgIEByZXR1cm4ge1Byb21pc2V9CiAgICAgICAgICAgICovCiAgICAgICAgICAgICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgLypnbG9iYWwgc2VsZiovCgogICAgICAgICAgZnVuY3Rpb24gcG9seWZpbGwkMSgpIHsKICAgICAgICAgICAgdmFyIGxvY2FsID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgbG9jYWwgPSBnbG9iYWw7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgbG9jYWwgPSBzZWxmOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTsKCiAgICAgICAgICAgIGlmIChQKSB7CiAgICAgICAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsvLyBzaWxlbnRseSBpZ25vcmVkCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMjsKICAgICAgICAgIH0gLy8gU3RyYW5nZSBjb21wYXQuLgoKCiAgICAgICAgICBQcm9taXNlJDIucG9seWZpbGwgPSBwb2x5ZmlsbCQxOwogICAgICAgICAgUHJvbWlzZSQyLlByb21pc2UgPSBQcm9taXNlJDI7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZSQyOwogICAgICAgIH0pOwogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICB2YXIgZzsgLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGUKCiAgICAgIGcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0oKTsKCiAgICAgIHRyeSB7CiAgICAgICAgLy8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApCiAgICAgICAgZyA9IGcgfHwgRnVuY3Rpb24oInJldHVybiB0aGlzIikoKSB8fCAoMSwgZXZhbCkoInRoaXMiKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlCiAgICAgICAgaWYgKCh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZjQod2luZG93KSkgPT09ICJvYmplY3QiKSBnID0gd2luZG93OwogICAgICB9IC8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi4KICAgICAgLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3MKICAgICAgLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufQoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8qIChpZ25vcmVkKSAqLwoKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBfcHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwoKICAgICAgdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKICAgICAgdmFyIF9hc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7CgogICAgICB2YXIgX2Fzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hc3NpZ24pOwoKICAgICAgdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpOwoKICAgICAgdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7CgogICAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpOwoKICAgICAgdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKICAgICAgdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCiAgICAgIHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTsKCiAgICAgIHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7CgogICAgICB2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOwoKICAgICAgdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIHZhciBfcmVhY3RGbGlwTW92ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQzKTsKCiAgICAgIHZhciBfcmVhY3RGbGlwTW92ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdEZsaXBNb3ZlKTsKCiAgICAgIHZhciBfYXV0b3NpemUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCk7CgogICAgICB2YXIgX2F1dG9zaXplMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zaXplKTsKCiAgICAgIHZhciBfaTE4biA9IF9fd2VicGFja19yZXF1aXJlX18oMTUxKTsKCiAgICAgIHZhciBfaTE4bjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pMThuKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTYwKTsKCiAgICAgIHZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOwoKICAgICAgdmFyIF9hdmF0YXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTsKCiAgICAgIHZhciBfYXZhdGFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F2YXRhcik7CgogICAgICB2YXIgX2J1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTg4KTsKCiAgICAgIHZhciBfYnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2J1dHRvbik7CgogICAgICB2YXIgX2FjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTg5KTsKCiAgICAgIHZhciBfYWN0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FjdGlvbik7CgogICAgICB2YXIgX2NvbW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MCk7CgogICAgICB2YXIgX2NvbW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbWVudCk7CgogICAgICB2YXIgX3N2ZyA9IF9fd2VicGFja19yZXF1aXJlX18oODEpOwoKICAgICAgdmFyIF9zdmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ZnKTsKCiAgICAgIHZhciBfY29uc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOCk7CgogICAgICB2YXIgX2dldENvbW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTkpOwoKICAgICAgdmFyIF9nZXRDb21tZW50czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRDb21tZW50cyk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBHaXRhbGtDb21wb25lbnQgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogICAgICAgICgwLCBfaW5oZXJpdHMzWyJkZWZhdWx0Il0pKEdpdGFsa0NvbXBvbmVudCwgX0NvbXBvbmVudCk7CgogICAgICAgIGZ1bmN0aW9uIEdpdGFsa0NvbXBvbmVudChwcm9wcykgewogICAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbImRlZmF1bHQiXSkodGhpcywgR2l0YWxrQ29tcG9uZW50KTsKCiAgICAgICAgICB2YXIgX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zWyJkZWZhdWx0Il0pKHRoaXMsIChHaXRhbGtDb21wb25lbnQuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyWyJkZWZhdWx0Il0pKEdpdGFsa0NvbXBvbmVudCkpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgdXNlcjogbnVsbCwKICAgICAgICAgICAgaXNzdWU6IG51bGwsCiAgICAgICAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgICAgICAgbG9jYWxDb21tZW50czogW10sCiAgICAgICAgICAgIGNvbW1lbnQ6ICcnLAogICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICBwYWdlckRpcmVjdGlvbjogJ2xhc3QnLAogICAgICAgICAgICBjdXJzb3I6IG51bGwsCiAgICAgICAgICAgIHByZXZpZXdIdG1sOiAnJywKICAgICAgICAgICAgaXNOb0luaXQ6IGZhbHNlLAogICAgICAgICAgICBpc0luaXRpbmc6IHRydWUsCiAgICAgICAgICAgIGlzQ3JlYXRpbmc6IGZhbHNlLAogICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBpc0xvYWRNb3JlOiBmYWxzZSwKICAgICAgICAgICAgaXNMb2FkT3ZlcjogZmFsc2UsCiAgICAgICAgICAgIGlzSXNzdWVDcmVhdGluZzogZmFsc2UsCiAgICAgICAgICAgIGlzUG9wdXBWaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgaXNJbnB1dEZvY3VzZWQ6IGZhbHNlLAogICAgICAgICAgICBpc1ByZXZpZXc6IGZhbHNlLAogICAgICAgICAgICBpc09jY3VyRXJyb3I6IGZhbHNlLAogICAgICAgICAgICBlcnJvck1zZzogJycKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuZ2V0Q29tbWVudHNWMyA9IGZ1bmN0aW9uIChpc3N1ZSkgewogICAgICAgICAgICB2YXIgX3RoaXMkb3B0aW9ucyA9IF90aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBjbGllbnRJRCA9IF90aGlzJG9wdGlvbnMuY2xpZW50SUQsCiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQgPSBfdGhpcyRvcHRpb25zLmNsaWVudFNlY3JldCwKICAgICAgICAgICAgICAgIHBlclBhZ2UgPSBfdGhpcyRvcHRpb25zLnBlclBhZ2U7CiAgICAgICAgICAgIHZhciBwYWdlID0gX3RoaXMuc3RhdGUucGFnZTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldElzc3VlKCkudGhlbihmdW5jdGlvbiAoaXNzdWUpIHsKICAgICAgICAgICAgICBpZiAoIWlzc3VlKSByZXR1cm47CiAgICAgICAgICAgICAgcmV0dXJuIF91dGlsLmF4aW9zR2l0aHViLmdldChpc3N1ZS5jb21tZW50c191cmwsIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vdm5kLmdpdGh1Yi52My5mdWxsK2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogY2xpZW50SUQsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBjbGllbnRTZWNyZXQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgcGVyX3BhZ2U6IHBlclBhZ2UsCiAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gX3RoaXMkc3RhdGUuY29tbWVudHMsCiAgICAgICAgICAgICAgICAgICAgaXNzdWUgPSBfdGhpcyRzdGF0ZS5pc3N1ZTsKICAgICAgICAgICAgICAgIHZhciBpc0xvYWRPdmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgY3MgPSBjb21tZW50cy5jb25jYXQocmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgIGlmIChjcy5sZW5ndGggPj0gaXNzdWUuY29tbWVudHMgfHwgcmVzLmRhdGEubGVuZ3RoIDwgcGVyUGFnZSkgewogICAgICAgICAgICAgICAgICBpc0xvYWRPdmVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBjcywKICAgICAgICAgICAgICAgICAgaXNMb2FkT3ZlcjogaXNMb2FkT3ZlciwKICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSArIDEKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBjczsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmdldFJlZiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLnB1YmxpY0J0bkVMID0gZTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMucmVwbHkgPSBmdW5jdGlvbiAocmVwbHlDb21tZW50KSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBfdGhpcy5zdGF0ZS5jb21tZW50OwogICAgICAgICAgICAgIHZhciByZXBseUNvbW1lbnRCb2R5ID0gcmVwbHlDb21tZW50LmJvZHk7CiAgICAgICAgICAgICAgdmFyIHJlcGx5Q29tbWVudEFycmF5ID0gcmVwbHlDb21tZW50Qm9keS5zcGxpdCgnXG4nKTsKICAgICAgICAgICAgICByZXBseUNvbW1lbnRBcnJheS51bnNoaWZ0KCdAJyArIHJlcGx5Q29tbWVudC51c2VyLmxvZ2luKTsKICAgICAgICAgICAgICByZXBseUNvbW1lbnRBcnJheSA9IHJlcGx5Q29tbWVudEFycmF5Lm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuICc+ICcgKyB0OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJlcGx5Q29tbWVudEFycmF5LnB1c2goJycpOwogICAgICAgICAgICAgIHJlcGx5Q29tbWVudEFycmF5LnB1c2goJycpOwogICAgICAgICAgICAgIGlmIChjb21tZW50KSByZXBseUNvbW1lbnRBcnJheS51bnNoaWZ0KCcnKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgY29tbWVudDogY29tbWVudCArIHJlcGx5Q29tbWVudEFycmF5LmpvaW4oJ1xuJykKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfYXV0b3NpemUyWyJkZWZhdWx0Il0udXBkYXRlKF90aGlzLmNvbW1lbnRFTCk7CgogICAgICAgICAgICAgICAgX3RoaXMuY29tbWVudEVMLmZvY3VzKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZVBvcHVwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB2YXIgaXNWaXNpYmxlID0gIV90aGlzLnN0YXRlLmlzUG9wdXBWaXNpYmxlOwoKICAgICAgICAgICAgdmFyIGhpZGVIYW5kbGUgPSBmdW5jdGlvbiBoaWRlSGFuZGxlKGUxKSB7CiAgICAgICAgICAgICAgaWYgKCgwLCBfdXRpbC5oYXNDbGFzc0luUGFyZW50KShlMS50YXJnZXQsICdndC11c2VyJywgJ2d0LXBvcHVwJykpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIYW5kbGUpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1BvcHVwVmlzaWJsZTogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc1BvcHVwVmlzaWJsZTogaXNWaXNpYmxlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSkgewogICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIYW5kbGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIYW5kbGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUxvZ2luID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgY29tbWVudCA9IF90aGlzLnN0YXRlLmNvbW1lbnQ7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShfY29uc3QuR1RfQ09NTUVOVCwgZW5jb2RlVVJJQ29tcG9uZW50KGNvbW1lbnQpKTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfdGhpcy5sb2dpbkxpbms7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUlzc3VlQ3JlYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNJc3N1ZUNyZWF0aW5nOiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMuY3JlYXRlSXNzdWUoKS50aGVuKGZ1bmN0aW9uIChpc3N1ZSkgewogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzSXNzdWVDcmVhdGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRDb21tZW50cyhpc3N1ZSk7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0lzc3VlQ3JlYXRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykoZXJyKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzTm9Jbml0OiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudENyZWF0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmICghX3RoaXMuc3RhdGUuY29tbWVudC5sZW5ndGgpIHsKICAgICAgICAgICAgICBlICYmIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgX3RoaXMuY29tbWVudEVMLmZvY3VzKCk7CgogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLmlzQ3JlYXRpbmcpIHJldHVybjsKCiAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlQ29tbWVudCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNDcmVhdGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNDcmVhdGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykoZXJyKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBpc0NyZWF0aW5nOiB0cnVlCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRQcmV2aWV3ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGlzUHJldmlldzogIV90aGlzLnN0YXRlLmlzUHJldmlldwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF91dGlsLmF4aW9zR2l0aHViLnBvc3QoJy9tYXJrZG93bicsIHsKICAgICAgICAgICAgICB0ZXh0OiBfdGhpcy5zdGF0ZS5jb21tZW50CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiBfdGhpcy5hY2Nlc3NUb2tlbiAmJiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAndG9rZW4gJyArIF90aGlzLmFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBwcmV2aWV3SHRtbDogcmVzLmRhdGEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKGVycikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRMb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX3RoaXMkc3RhdGUyID0gX3RoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICBpc3N1ZSA9IF90aGlzJHN0YXRlMi5pc3N1ZSwKICAgICAgICAgICAgICAgIGlzTG9hZE1vcmUgPSBfdGhpcyRzdGF0ZTIuaXNMb2FkTW9yZTsKICAgICAgICAgICAgaWYgKGlzTG9hZE1vcmUpIHJldHVybjsKCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc0xvYWRNb3JlOiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMuZ2V0Q29tbWVudHMoaXNzdWUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0xvYWRNb3JlOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudENoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgY29tbWVudDogZS50YXJnZXQudmFsdWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUxvZ291dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMubG9nb3V0KCk7CgogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRGb2N1cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBkaXN0cmFjdGlvbkZyZWVNb2RlID0gX3RoaXMub3B0aW9ucy5kaXN0cmFjdGlvbkZyZWVNb2RlOwogICAgICAgICAgICBpZiAoIWRpc3RyYWN0aW9uRnJlZU1vZGUpIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNJbnB1dEZvY3VzZWQ6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZUNvbW1lbnRCbHVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIGRpc3RyYWN0aW9uRnJlZU1vZGUgPSBfdGhpcy5vcHRpb25zLmRpc3RyYWN0aW9uRnJlZU1vZGU7CiAgICAgICAgICAgIGlmICghZGlzdHJhY3Rpb25GcmVlTW9kZSkgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc0lucHV0Rm9jdXNlZDogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLmhhbmRsZVNvcnQgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHBhZ2VyRGlyZWN0aW9uOiBkaXJlY3Rpb24KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudEtleURvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgZW5hYmxlSG90S2V5ID0gX3RoaXMub3B0aW9ucy5lbmFibGVIb3RLZXk7CgogICAgICAgICAgICBpZiAoZW5hYmxlSG90S2V5ICYmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSAmJiBlLmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgICAgICAgX3RoaXMucHVibGljQnRuRUwgJiYgX3RoaXMucHVibGljQnRuRUwuZm9jdXMoKTsKCiAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudENyZWF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIF90aGlzLm9wdGlvbnMgPSAoMCwgX2Fzc2lnbjJbImRlZmF1bHQiXSkoe30sIHsKICAgICAgICAgICAgaWQ6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLAogICAgICAgICAgICBudW1iZXI6IC0xLAogICAgICAgICAgICBsYWJlbHM6IFsnR2l0YWxrJ10sCiAgICAgICAgICAgIHRpdGxlOiB3aW5kb3cuZG9jdW1lbnQudGl0bGUsCiAgICAgICAgICAgIGJvZHk6ICcnLAogICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiArIGhlYWRlci5tZXRhW2Rlc2NyaXB0aW9uXQogICAgICAgICAgICBsYW5ndWFnZTogd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZSB8fCB3aW5kb3cubmF2aWdhdG9yLnVzZXJMYW5ndWFnZSwKICAgICAgICAgICAgcGVyUGFnZTogMTAsCiAgICAgICAgICAgIHBhZ2VyRGlyZWN0aW9uOiAnbGFzdCcsCiAgICAgICAgICAgIC8vIGxhc3Qgb3IgZmlyc3QKICAgICAgICAgICAgY3JlYXRlSXNzdWVNYW51YWxseTogZmFsc2UsCiAgICAgICAgICAgIGRpc3RyYWN0aW9uRnJlZU1vZGU6IGZhbHNlLAogICAgICAgICAgICBwcm94eTogJ2h0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hY2Nlc3NfdG9rZW4nLAogICAgICAgICAgICBmbGlwTW92ZU9wdGlvbnM6IHsKICAgICAgICAgICAgICBzdGFnZ2VyRGVsYXlCeTogMTUwLAogICAgICAgICAgICAgIGFwcGVhckFuaW1hdGlvbjogJ2FjY29yZGlvblZlcnRpY2FsJywKICAgICAgICAgICAgICBlbnRlckFuaW1hdGlvbjogJ2FjY29yZGlvblZlcnRpY2FsJywKICAgICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbjogJ2FjY29yZGlvblZlcnRpY2FsJwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGVIb3RLZXk6IHRydWUsCiAgICAgICAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsCiAgICAgICAgICAgIGRlZmF1bHRBdXRob3I6IHsKICAgICAgICAgICAgICBhdmF0YXJVcmw6ICcvL2F2YXRhcnMxLmdpdGh1YnVzZXJjb250ZW50LmNvbS91LzI5Njk3MTMzP3M9NTAnLAogICAgICAgICAgICAgIGxvZ2luOiAnbnVsbCcsCiAgICAgICAgICAgICAgdXJsOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICB1cGRhdGVDb3VudENhbGxiYWNrOiBudWxsCiAgICAgICAgICB9LCBwcm9wcy5vcHRpb25zKTsKICAgICAgICAgIF90aGlzLnN0YXRlLnBhZ2VyRGlyZWN0aW9uID0gX3RoaXMub3B0aW9ucy5wYWdlckRpcmVjdGlvbjsKICAgICAgICAgIHZhciBzdG9yZWRDb21tZW50ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKF9jb25zdC5HVF9DT01NRU5UKTsKCiAgICAgICAgICBpZiAoc3RvcmVkQ29tbWVudCkgewogICAgICAgICAgICBfdGhpcy5zdGF0ZS5jb21tZW50ID0gZGVjb2RlVVJJQ29tcG9uZW50KHN0b3JlZENvbW1lbnQpOwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oX2NvbnN0LkdUX0NPTU1FTlQpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBxdWVyeSA9ICgwLCBfdXRpbC5xdWVyeVBhcnNlKSgpOwoKICAgICAgICAgIGlmIChxdWVyeS5jb2RlKSB7CiAgICAgICAgICAgIHZhciBjb2RlID0gcXVlcnkuY29kZTsKICAgICAgICAgICAgZGVsZXRlIHF1ZXJ5LmNvZGU7CiAgICAgICAgICAgIHZhciByZXBsYWNlZFVybCA9ICcnICsgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArICgwLCBfdXRpbC5xdWVyeVN0cmluZ2lmeSkocXVlcnkpICsgd2luZG93LmxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsIHJlcGxhY2VkVXJsKTsKICAgICAgICAgICAgX3RoaXMub3B0aW9ucyA9ICgwLCBfYXNzaWduMlsiZGVmYXVsdCJdKSh7fSwgX3RoaXMub3B0aW9ucywgewogICAgICAgICAgICAgIHVybDogcmVwbGFjZWRVcmwsCiAgICAgICAgICAgICAgaWQ6IHJlcGxhY2VkVXJsCiAgICAgICAgICAgIH0sIHByb3BzLm9wdGlvbnMpOwoKICAgICAgICAgICAgX3V0aWwuYXhpb3NKU09OLnBvc3QoX3RoaXMub3B0aW9ucy5wcm94eSwgewogICAgICAgICAgICAgIGNvZGU6IGNvZGUsCiAgICAgICAgICAgICAgY2xpZW50X2lkOiBfdGhpcy5vcHRpb25zLmNsaWVudElELAogICAgICAgICAgICAgIGNsaWVudF9zZWNyZXQ6IF90aGlzLm9wdGlvbnMuY2xpZW50U2VjcmV0CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5hY2Nlc3NfdG9rZW4pIHsKICAgICAgICAgICAgICAgIF90aGlzLmFjY2Vzc1Rva2VuID0gcmVzLmRhdGEuYWNjZXNzX3Rva2VuOwoKICAgICAgICAgICAgICAgIF90aGlzLmdldEluaXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc0luaXRpbmc6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOicsIGVycik7CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgaXNJbml0aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykoZXJyKQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBubyBhY2Nlc3NfdG9rZW4KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMuZGF0YSBlcnI6JywgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShuZXcgRXJyb3IoJ25vIGFjY2VzcyB0b2tlbicpKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykoZXJyKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLmdldEluaXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNJbml0aW5nOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjonLCBlcnIpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0luaXRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykoZXJyKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5pMThuID0gKDAsIF9pMThuMlsiZGVmYXVsdCJdKShfdGhpcy5vcHRpb25zLmxhbmd1YWdlKTsKICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CgogICAgICAgICgwLCBfY3JlYXRlQ2xhc3MzWyJkZWZhdWx0Il0pKEdpdGFsa0NvbXBvbmVudCwgW3sKICAgICAgICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkgewogICAgICAgICAgICB0aGlzLmNvbW1lbnRFTCAmJiAoMCwgX2F1dG9zaXplMlsiZGVmYXVsdCJdKSh0aGlzLmNvbW1lbnRFTCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0SW5pdCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5pdCgpIHsKICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0SXNzdWUoKTsKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoaXNzdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldENvbW1lbnRzKGlzc3VlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0VXNlckluZm8nLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkgewogICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgICAgICAgIHJldHVybiBfdXRpbC5heGlvc0dpdGh1Yi5nZXQoJy91c2VyJywgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICd0b2tlbiAnICsgdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHVzZXI6IHJlcy5kYXRhCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBfdGhpczMubG9nb3V0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldElzc3VlQnlJZCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXNzdWVCeUlkKCkgewogICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIG93bmVyID0gX29wdGlvbnMub3duZXIsCiAgICAgICAgICAgICAgICByZXBvID0gX29wdGlvbnMucmVwbywKICAgICAgICAgICAgICAgIG51bWJlciA9IF9vcHRpb25zLm51bWJlciwKICAgICAgICAgICAgICAgIGNsaWVudElEID0gX29wdGlvbnMuY2xpZW50SUQsCiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQgPSBfb3B0aW9ucy5jbGllbnRTZWNyZXQ7CiAgICAgICAgICAgIHZhciBnZXRVcmwgPSAnL3JlcG9zLycgKyBvd25lciArICcvJyArIHJlcG8gKyAnL2lzc3Vlcy8nICsgbnVtYmVyOwogICAgICAgICAgICByZXR1cm4gbmV3IF9wcm9taXNlMlsiZGVmYXVsdCJdKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICBfdXRpbC5heGlvc0dpdGh1Yi5nZXQoZ2V0VXJsLCB7CiAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBjbGllbnRJRCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGNsaWVudFNlY3JldAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICB0OiBEYXRlLm5vdygpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICB2YXIgaXNzdWUgPSBudWxsOwoKICAgICAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEgJiYgcmVzLmRhdGEubnVtYmVyID09PSBudW1iZXIpIHsKICAgICAgICAgICAgICAgICAgaXNzdWUgPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgaXNzdWU6IGlzc3VlLAogICAgICAgICAgICAgICAgICAgIGlzTm9Jbml0OiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXNvbHZlKGlzc3VlKTsKICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzdGF0dXMgY29kZSBpcyA0MDQsIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoIG51bGwKICAgICAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHJlc29sdmUobnVsbCk7CiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0SXNzdWVCeUxhYmVscycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXNzdWVCeUxhYmVscygpIHsKICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgb3duZXIgPSBfb3B0aW9uczIub3duZXIsCiAgICAgICAgICAgICAgICByZXBvID0gX29wdGlvbnMyLnJlcG8sCiAgICAgICAgICAgICAgICBpZCA9IF9vcHRpb25zMi5pZCwKICAgICAgICAgICAgICAgIGxhYmVscyA9IF9vcHRpb25zMi5sYWJlbHMsCiAgICAgICAgICAgICAgICBjbGllbnRJRCA9IF9vcHRpb25zMi5jbGllbnRJRCwKICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldCA9IF9vcHRpb25zMi5jbGllbnRTZWNyZXQ7CiAgICAgICAgICAgIHJldHVybiBfdXRpbC5heGlvc0dpdGh1Yi5nZXQoJy9yZXBvcy8nICsgb3duZXIgKyAnLycgKyByZXBvICsgJy9pc3N1ZXMnLCB7CiAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IGNsaWVudElELAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGNsaWVudFNlY3JldAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBsYWJlbHM6IGxhYmVscy5jb25jYXQoaWQpLmpvaW4oJywnKSwKICAgICAgICAgICAgICAgIHQ6IERhdGUubm93KCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHZhciBjcmVhdGVJc3N1ZU1hbnVhbGx5ID0gX3RoaXM1Lm9wdGlvbnMuY3JlYXRlSXNzdWVNYW51YWxseTsKICAgICAgICAgICAgICB2YXIgaXNOb0luaXQgPSBmYWxzZTsKICAgICAgICAgICAgICB2YXIgaXNzdWUgPSBudWxsOwoKICAgICAgICAgICAgICBpZiAoIShyZXMgJiYgcmVzLmRhdGEgJiYgcmVzLmRhdGEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgaWYgKCFjcmVhdGVJc3N1ZU1hbnVhbGx5ICYmIF90aGlzNS5pc0FkbWluKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuY3JlYXRlSXNzdWUoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpc05vSW5pdCA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlzc3VlID0gcmVzLmRhdGFbMF07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpczUuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNzdWU6IGlzc3VlLAogICAgICAgICAgICAgICAgaXNOb0luaXQ6IGlzTm9Jbml0CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBpc3N1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0SXNzdWUnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldElzc3VlKCkgewogICAgICAgICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBudW1iZXIgPSB0aGlzLm9wdGlvbnMubnVtYmVyOwogICAgICAgICAgICB2YXIgaXNzdWUgPSB0aGlzLnN0YXRlLmlzc3VlOwoKICAgICAgICAgICAgaWYgKGlzc3VlKSB7CiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc05vSW5pdDogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gX3Byb21pc2UyWyJkZWZhdWx0Il0ucmVzb2x2ZShpc3N1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnbnVtYmVyJyAmJiBudW1iZXIgPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXNzdWVCeUlkKCkudGhlbihmdW5jdGlvbiAocmVzSXNzdWUpIHsKICAgICAgICAgICAgICAgIGlmICghcmVzSXNzdWUpIHJldHVybiBfdGhpczYuZ2V0SXNzdWVCeUxhYmVscygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc0lzc3VlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJc3N1ZUJ5TGFiZWxzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY3JlYXRlSXNzdWUnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUlzc3VlKCkgewogICAgICAgICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBvd25lciA9IF9vcHRpb25zMy5vd25lciwKICAgICAgICAgICAgICAgIHJlcG8gPSBfb3B0aW9uczMucmVwbywKICAgICAgICAgICAgICAgIHRpdGxlID0gX29wdGlvbnMzLnRpdGxlLAogICAgICAgICAgICAgICAgYm9keSA9IF9vcHRpb25zMy5ib2R5LAogICAgICAgICAgICAgICAgaWQgPSBfb3B0aW9uczMuaWQsCiAgICAgICAgICAgICAgICBsYWJlbHMgPSBfb3B0aW9uczMubGFiZWxzLAogICAgICAgICAgICAgICAgdXJsID0gX29wdGlvbnMzLnVybDsKICAgICAgICAgICAgcmV0dXJuIF91dGlsLmF4aW9zR2l0aHViLnBvc3QoJy9yZXBvcy8nICsgb3duZXIgKyAnLycgKyByZXBvICsgJy9pc3N1ZXMnLCB7CiAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgIGxhYmVsczogbGFiZWxzLmNvbmNhdChpZCksCiAgICAgICAgICAgICAgYm9keTogYm9keSB8fCB1cmwgKyAnIFxuXG4gJyArICgoMCwgX3V0aWwuZ2V0TWV0YUNvbnRlbnQpKCdkZXNjcmlwdGlvbicpIHx8ICgwLCBfdXRpbC5nZXRNZXRhQ29udGVudCkoJ2Rlc2NyaXB0aW9uJywgJ29nOmRlc2NyaXB0aW9uJykgfHwgJycpCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAndG9rZW4gJyArIHRoaXMuYWNjZXNzVG9rZW4KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzNy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc3N1ZTogcmVzLmRhdGEKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy8gR2V0IGNvbW1lbnRzIHZpYSB2MyBhcGksIGRvbid0IHJlcXVpcmUgbG9naW4sIGJ1dCBzb3J0aW5nIGZlYXR1cmUgaXMgZGlzYWJsZQoKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRDb21tZW50cycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29tbWVudHMoaXNzdWUpIHsKICAgICAgICAgICAgaWYgKCFpc3N1ZSkgcmV0dXJuOyAvLyBHZXQgY29tbWVudHMgdmlhIHY0IGdyYXBocWwgYXBpLCBsb2dpbiByZXF1aXJlZCBhbmQgc29ydGluZyBmZWF0dXJlIGlzIGF2YWlsYWJsZQoKICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4pIHJldHVybiBfZ2V0Q29tbWVudHMyWyJkZWZhdWx0Il0uY2FsbCh0aGlzLCBpc3N1ZSk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbW1lbnRzVjMoaXNzdWUpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NyZWF0ZUNvbW1lbnQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICBjb21tZW50ID0gX3N0YXRlLmNvbW1lbnQsCiAgICAgICAgICAgICAgICBsb2NhbENvbW1lbnRzID0gX3N0YXRlLmxvY2FsQ29tbWVudHMsCiAgICAgICAgICAgICAgICBjb21tZW50cyA9IF9zdGF0ZS5jb21tZW50czsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXNzdWUoKS50aGVuKGZ1bmN0aW9uIChpc3N1ZSkgewogICAgICAgICAgICAgIHJldHVybiBfdXRpbC5heGlvc0dpdGh1Yi5wb3N0KGlzc3VlLmNvbW1lbnRzX3VybCwgewogICAgICAgICAgICAgICAgYm9keTogY29tbWVudAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vdm5kLmdpdGh1Yi52My5mdWxsK2pzb24nLAogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAndG9rZW4gJyArIF90aGlzOC5hY2Nlc3NUb2tlbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoewogICAgICAgICAgICAgICAgY29tbWVudDogJycsCiAgICAgICAgICAgICAgICBjb21tZW50czogY29tbWVudHMuY29uY2F0KHJlcy5kYXRhKSwKICAgICAgICAgICAgICAgIGxvY2FsQ29tbWVudHM6IGxvY2FsQ29tbWVudHMuY29uY2F0KHJlcy5kYXRhKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdsb2dvdXQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgdXNlcjogbnVsbAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKF9jb25zdC5HVF9BQ0NFU1NfVE9LRU4pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2xpa2UnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxpa2UoY29tbWVudCkgewogICAgICAgICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfb3B0aW9uczQgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBvd25lciA9IF9vcHRpb25zNC5vd25lciwKICAgICAgICAgICAgICAgIHJlcG8gPSBfb3B0aW9uczQucmVwbzsKICAgICAgICAgICAgdmFyIHVzZXIgPSB0aGlzLnN0YXRlLnVzZXI7CiAgICAgICAgICAgIHZhciBjb21tZW50cyA9IHRoaXMuc3RhdGUuY29tbWVudHM7CgogICAgICAgICAgICBfdXRpbC5heGlvc0dpdGh1Yi5wb3N0KCcvcmVwb3MvJyArIG93bmVyICsgJy8nICsgcmVwbyArICcvaXNzdWVzL2NvbW1lbnRzLycgKyBjb21tZW50LmlkICsgJy9yZWFjdGlvbnMnLCB7CiAgICAgICAgICAgICAgY29udGVudDogJ2hlYXJ0JwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ3Rva2VuICcgKyB0aGlzLmFjY2Vzc1Rva2VuLAogICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vdm5kLmdpdGh1Yi5zcXVpcnJlbC1naXJsLXByZXZpZXcnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBjb21tZW50cyA9IGNvbW1lbnRzLm1hcChmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgaWYgKGMuaWQgPT09IGNvbW1lbnQuaWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKGMucmVhY3Rpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF+Yy5yZWFjdGlvbnMubm9kZXMuZmluZEluZGV4KGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi51c2VyLmxvZ2luID09PSB1c2VyLmxvZ2luOwogICAgICAgICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy50b3RhbENvdW50ICs9IDE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zID0gewogICAgICAgICAgICAgICAgICAgICAgbm9kZXM6IFtdCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy50b3RhbENvdW50ID0gMTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMubm9kZXMucHVzaChyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLnZpZXdlckhhc1JlYWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpczkuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgY29tbWVudHM6IGNvbW1lbnRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3VuTGlrZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdW5MaWtlKGNvbW1lbnQpIHsKICAgICAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIHVzZXIgPSB0aGlzLnN0YXRlLnVzZXI7CiAgICAgICAgICAgIHZhciBjb21tZW50cyA9IHRoaXMuc3RhdGUuY29tbWVudHM7IC8vIGNvbnN0IHsgIHVzZXIgfSA9IHRoaXMuc3RhdGUKICAgICAgICAgICAgLy8gbGV0IGlkCiAgICAgICAgICAgIC8vIGNvbW1lbnQucmVhY3Rpb25zLm5vZGVzLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgIC8vICAgaWYgKHIudXNlci5sb2dpbiA9IHVzZXIubG9naW4pIGlkID0gci5kYXRhYmFzZUlkCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgIC8vIHJldHVybiBheGlvc0dpdGh1Yi5kZWxldGUoYC9yZWFjdGlvbnMvJHtpZH1gLCB7CiAgICAgICAgICAgIC8vICAgaGVhZGVyczogewogICAgICAgICAgICAvLyAgICAgQXV0aG9yaXphdGlvbjogYHRva2VuICR7dGhpcy5hY2Nlc3NUb2tlbn1gLAogICAgICAgICAgICAvLyAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vdm5kLmdpdGh1Yi5zcXVpcnJlbC1naXJsLXByZXZpZXcnCiAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAvLyB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coJ3JlczonLCByZXMpCiAgICAgICAgICAgIC8vIH0pCgogICAgICAgICAgICB2YXIgZ2V0UUwgPSBmdW5jdGlvbiBnZXRRTChpZCkgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBvcGVyYXRpb25OYW1lOiAnUmVtb3ZlUmVhY3Rpb24nLAogICAgICAgICAgICAgICAgcXVlcnk6ICdcbiAgICAgICAgICBtdXRhdGlvbiBSZW1vdmVSZWFjdGlvbntcbiAgICAgICAgICAgIHJlbW92ZVJlYWN0aW9uIChpbnB1dDp7XG4gICAgICAgICAgICAgIHN1YmplY3RJZDogIicgKyBpZCArICciLFxuICAgICAgICAgICAgICBjb250ZW50OiBIRUFSVFxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgICByZWFjdGlvbiB7XG4gICAgICAgICAgICAgICAgY29udGVudFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAnCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIF91dGlsLmF4aW9zR2l0aHViLnBvc3QoJy9ncmFwaHFsJywgZ2V0UUwoY29tbWVudC5nSWQpLCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ2JlYXJlciAnICsgdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICAgICAgICBjb21tZW50cyA9IGNvbW1lbnRzLm1hcChmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICBpZiAoYy5pZCA9PT0gY29tbWVudC5pZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGMucmVhY3Rpb25zLm5vZGVzLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udXNlci5sb2dpbiA9PT0gdXNlci5sb2dpbjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKH5pbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMudG90YWxDb3VudCAtPSAxOwogICAgICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMubm9kZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLnZpZXdlckhhc1JlYWN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczEwLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgY29tbWVudHM6IGNvbW1lbnRzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2luaXRpbmcnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRpbmcoKSB7CiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWluaXRpbmcnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdpJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWxvYWRlcicKICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdwJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWluaXRpbmctdGV4dCcKICAgICAgICAgICAgfSwgdGhpcy5pMThuLnQoJ2luaXQnKSkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ25vSW5pdCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbm9Jbml0KCkgewogICAgICAgICAgICB2YXIgX3N0YXRlMiA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICB1c2VyID0gX3N0YXRlMi51c2VyLAogICAgICAgICAgICAgICAgaXNJc3N1ZUNyZWF0aW5nID0gX3N0YXRlMi5pc0lzc3VlQ3JlYXRpbmc7CiAgICAgICAgICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBvd25lciA9IF9vcHRpb25zNS5vd25lciwKICAgICAgICAgICAgICAgIHJlcG8gPSBfb3B0aW9uczUucmVwbywKICAgICAgICAgICAgICAgIGFkbWluID0gX29wdGlvbnM1LmFkbWluOwogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1uby1pbml0JywKICAgICAgICAgICAgICBrZXk6ICduby1pbml0JwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgncCcsIHsKICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgICAgICAgICAgX19odG1sOiB0aGlzLmkxOG4udCgnbm8tZm91bmQtcmVsYXRlZCcsIHsKICAgICAgICAgICAgICAgICAgbGluazogJzxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS8nICsgb3duZXIgKyAnLycgKyByZXBvICsgJy9pc3N1ZXMiPklzc3VlczwvYT4nCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdwJywgbnVsbCwgdGhpcy5pMThuLnQoJ3BsZWFzZS1jb250YWN0JywgewogICAgICAgICAgICAgIHVzZXI6IFtdLmNvbmNhdChhZG1pbikubWFwKGZ1bmN0aW9uICh1KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ0AnICsgdTsKICAgICAgICAgICAgICB9KS5qb2luKCcgJykKICAgICAgICAgICAgfSkpLCB0aGlzLmlzQWRtaW4gPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgncCcsIG51bGwsIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9idXR0b24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUlzc3VlQ3JlYXRlLAogICAgICAgICAgICAgIGlzTG9hZGluZzogaXNJc3N1ZUNyZWF0aW5nLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdpbml0LWlzc3VlJykKICAgICAgICAgICAgfSkpIDogbnVsbCwgIXVzZXIgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2J1dHRvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWJ0bi1sb2dpbicsCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVMb2dpbiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnbG9naW4td2l0aC1naXRodWInKQogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaGFuZGxlSW1hZ2VFcnJvcmVkJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVJbWFnZUVycm9yZWQob2JqKSB7CiAgICAgICAgICAgIG9iai50YXJnZXQuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZ2l0YWxrQDEvc3JjL2Fzc2V0cy9pY29uL2dpdGh1Yi5zdmciOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2hlYWRlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGVhZGVyKCkgewogICAgICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX3N0YXRlMyA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICB1c2VyID0gX3N0YXRlMy51c2VyLAogICAgICAgICAgICAgICAgY29tbWVudCA9IF9zdGF0ZTMuY29tbWVudCwKICAgICAgICAgICAgICAgIGlzQ3JlYXRpbmcgPSBfc3RhdGUzLmlzQ3JlYXRpbmcsCiAgICAgICAgICAgICAgICBwcmV2aWV3SHRtbCA9IF9zdGF0ZTMucHJldmlld0h0bWwsCiAgICAgICAgICAgICAgICBpc1ByZXZpZXcgPSBfc3RhdGUzLmlzUHJldmlldzsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyJywKICAgICAgICAgICAgICBrZXk6ICdoZWFkZXInCiAgICAgICAgICAgIH0sIHVzZXIgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYXZhdGFyMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyLWF2YXRhcicsCiAgICAgICAgICAgICAgc3JjOiB1c2VyLmF2YXRhcl91cmwsCiAgICAgICAgICAgICAgYWx0OiB1c2VyLmxvZ2luLAogICAgICAgICAgICAgIG9uRXJyb3I6IHRoaXMuaGFuZGxlSW1hZ2VFcnJvcmVkLmJpbmQodGhpcykKICAgICAgICAgICAgfSkgOiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1hdmF0YXItZ2l0aHViJywKICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVMb2dpbgogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLWdpdGh1YicsCiAgICAgICAgICAgICAgbmFtZTogJ2dpdGh1YicKICAgICAgICAgICAgfSkpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlci1jb21tZW50JwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCB7CiAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYodCkgewogICAgICAgICAgICAgICAgX3RoaXMxMS5jb21tZW50RUwgPSB0OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyLXRleHRhcmVhICcgKyAoaXNQcmV2aWV3ID8gJ2hpZGUnIDogJycpLAogICAgICAgICAgICAgIHZhbHVlOiBjb21tZW50LAogICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNvbW1lbnRDaGFuZ2UsCiAgICAgICAgICAgICAgb25Gb2N1czogdGhpcy5oYW5kbGVDb21tZW50Rm9jdXMsCiAgICAgICAgICAgICAgb25CbHVyOiB0aGlzLmhhbmRsZUNvbW1lbnRCbHVyLAogICAgICAgICAgICAgIG9uS2V5RG93bjogdGhpcy5oYW5kbGVDb21tZW50S2V5RG93biwKICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5pMThuLnQoJ2xlYXZlLWEtY29tbWVudCcpCiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlci1wcmV2aWV3IG1hcmtkb3duLWJvZHkgJyArIChpc1ByZXZpZXcgPyAnJyA6ICdoaWRlJyksCiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICAgICAgICAgIF9faHRtbDogcHJldmlld0h0bWwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWhlYWRlci1jb250cm9scycKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyLWNvbnRyb2xzLXRpcCcsCiAgICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vZ3VpZGVzLmdpdGh1Yi5jb20vZmVhdHVyZXMvbWFzdGVyaW5nLW1hcmtkb3duLycsCiAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLXRpcCcsCiAgICAgICAgICAgICAgbmFtZTogJ3RpcCcsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ3N1cHBvcnQtbWFya2Rvd24nKQogICAgICAgICAgICB9KSksIHVzZXIgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2J1dHRvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGdldFJlZjogdGhpcy5nZXRSZWYsCiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYnRuLXB1YmxpYycsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlQ29tbWVudENyZWF0ZSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnY29tbWVudCcpLAogICAgICAgICAgICAgIGlzTG9hZGluZzogaXNDcmVhdGluZwogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2J1dHRvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWJ0bi1wcmV2aWV3JywKICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVDb21tZW50UHJldmlldywKICAgICAgICAgICAgICB0ZXh0OiBpc1ByZXZpZXcgPyB0aGlzLmkxOG4udCgnZWRpdCcpIDogdGhpcy5pMThuLnQoJ3ByZXZpZXcnKSAvLyBpc0xvYWRpbmc9e2lzUHJldmlld2luZ30KCiAgICAgICAgICAgIH0pLCAhdXNlciAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYnV0dG9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYnRuLWxvZ2luJywKICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVMb2dpbiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnbG9naW4td2l0aC1naXRodWInKQogICAgICAgICAgICB9KSkpKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjb21tZW50cycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tbWVudHMoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfc3RhdGU0ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIHVzZXIgPSBfc3RhdGU0LnVzZXIsCiAgICAgICAgICAgICAgICBjb21tZW50cyA9IF9zdGF0ZTQuY29tbWVudHMsCiAgICAgICAgICAgICAgICBpc0xvYWRPdmVyID0gX3N0YXRlNC5pc0xvYWRPdmVyLAogICAgICAgICAgICAgICAgaXNMb2FkTW9yZSA9IF9zdGF0ZTQuaXNMb2FkTW9yZSwKICAgICAgICAgICAgICAgIHBhZ2VyRGlyZWN0aW9uID0gX3N0YXRlNC5wYWdlckRpcmVjdGlvbjsKICAgICAgICAgICAgdmFyIF9vcHRpb25zNiA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gX29wdGlvbnM2Lmxhbmd1YWdlLAogICAgICAgICAgICAgICAgZmxpcE1vdmVPcHRpb25zID0gX29wdGlvbnM2LmZsaXBNb3ZlT3B0aW9ucywKICAgICAgICAgICAgICAgIGFkbWluID0gX29wdGlvbnM2LmFkbWluOwogICAgICAgICAgICB2YXIgdG90YWxDb21tZW50cyA9IGNvbW1lbnRzLmNvbmNhdChbXSk7CgogICAgICAgICAgICBpZiAocGFnZXJEaXJlY3Rpb24gPT09ICdsYXN0JyAmJiB0aGlzLmFjY2Vzc1Rva2VuKSB7CiAgICAgICAgICAgICAgdG90YWxDb21tZW50cy5yZXZlcnNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnRzJywKICAgICAgICAgICAgICBrZXk6ICdjb21tZW50cycKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3JlYWN0RmxpcE1vdmUyWyJkZWZhdWx0Il0sIGZsaXBNb3ZlT3B0aW9ucywgdG90YWxDb21tZW50cy5tYXAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2NvbW1lbnQyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGMsCiAgICAgICAgICAgICAgICBrZXk6IGMuaWQsCiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyLAogICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlLAogICAgICAgICAgICAgICAgY29tbWVudGVkVGV4dDogX3RoaXMxMi5pMThuLnQoJ2NvbW1lbnRlZCcpLAogICAgICAgICAgICAgICAgYWRtaW46IGFkbWluLAogICAgICAgICAgICAgICAgcmVwbHlDYWxsYmFjazogX3RoaXMxMi5yZXBseShjKSwKICAgICAgICAgICAgICAgIGxpa2VDYWxsYmFjazogYy5yZWFjdGlvbnMgJiYgYy5yZWFjdGlvbnMudmlld2VySGFzUmVhY3RlZCA/IF90aGlzMTIudW5MaWtlLmJpbmQoX3RoaXMxMiwgYykgOiBfdGhpczEyLmxpa2UuYmluZChfdGhpczEyLCBjKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSksICF0b3RhbENvbW1lbnRzLmxlbmd0aCAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgncCcsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50cy1udWxsJwogICAgICAgICAgICB9LCB0aGlzLmkxOG4udCgnZmlyc3QtY29tbWVudC1wZXJzb24nKSksICFpc0xvYWRPdmVyICYmIHRvdGFsQ29tbWVudHMubGVuZ3RoID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50cy1jb250cm9scycKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2J1dHRvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWJ0bi1sb2FkbW9yZScsCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb21tZW50TG9hZCwKICAgICAgICAgICAgICBpc0xvYWRpbmc6IGlzTG9hZE1vcmUsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ2xvYWQtbW9yZScpCiAgICAgICAgICAgIH0pKSA6IG51bGwpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ21ldGEnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1ldGEoKSB7CiAgICAgICAgICAgIHZhciBfc3RhdGU1ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIHVzZXIgPSBfc3RhdGU1LnVzZXIsCiAgICAgICAgICAgICAgICBpc3N1ZSA9IF9zdGF0ZTUuaXNzdWUsCiAgICAgICAgICAgICAgICBpc1BvcHVwVmlzaWJsZSA9IF9zdGF0ZTUuaXNQb3B1cFZpc2libGUsCiAgICAgICAgICAgICAgICBwYWdlckRpcmVjdGlvbiA9IF9zdGF0ZTUucGFnZXJEaXJlY3Rpb24sCiAgICAgICAgICAgICAgICBsb2NhbENvbW1lbnRzID0gX3N0YXRlNS5sb2NhbENvbW1lbnRzOwogICAgICAgICAgICB2YXIgY250ID0gKGlzc3VlICYmIGlzc3VlLmNvbW1lbnRzKSArIGxvY2FsQ29tbWVudHMubGVuZ3RoOwogICAgICAgICAgICB2YXIgaXNEZXNjID0gcGFnZXJEaXJlY3Rpb24gPT09ICdsYXN0JzsKICAgICAgICAgICAgdmFyIHVwZGF0ZUNvdW50Q2FsbGJhY2sgPSB0aGlzLm9wdGlvbnMudXBkYXRlQ291bnRDYWxsYmFjazsgLy8gd2luZG93LkdJVEFMS19DT01NRU5UU19DT1VOVCA9IGNudAoKICAgICAgICAgICAgaWYgKHVwZGF0ZUNvdW50Q2FsbGJhY2sgJiYge30udG9TdHJpbmcuY2FsbCh1cGRhdGVDb3VudENhbGxiYWNrKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJykgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB1cGRhdGVDb3VudENhbGxiYWNrKGNudCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQW4gZXJyb3Igb2NjdXJyZWQgZXhlY3V0aW5nIHRoZSB1cGRhdGVDb3VudENhbGxiYWNrOicsIGVycik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1tZXRhJywKICAgICAgICAgICAgICBrZXk6ICdtZXRhJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb3VudHMnLAogICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7CiAgICAgICAgICAgICAgICBfX2h0bWw6IHRoaXMuaTE4bi50KCdjb3VudHMnLCB7CiAgICAgICAgICAgICAgICAgIGNvdW50czogJzxhIGNsYXNzPSJndC1saW5rIGd0LWxpbmstY291bnRzIiBocmVmPSInICsgKGlzc3VlICYmIGlzc3VlLmh0bWxfdXJsKSArICciIHRhcmdldD0iX2JsYW5rIj4nICsgY250ICsgJzwvYT4nLAogICAgICAgICAgICAgICAgICBzbWFydF9jb3VudDogY250CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIGlzUG9wdXBWaXNpYmxlICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtcG9wdXAnCiAgICAgICAgICAgIH0sIHVzZXIgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYWN0aW9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYWN0aW9uLXNvcnRhc2MnICsgKCFpc0Rlc2MgPyAnIGlzLS1hY3RpdmUnIDogJycpLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU29ydCgnZmlyc3QnKSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnc29ydC1hc2MnKQogICAgICAgICAgICB9KSA6IG51bGwsIHVzZXIgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYWN0aW9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYWN0aW9uLXNvcnRkZXNjJyArIChpc0Rlc2MgPyAnIGlzLS1hY3RpdmUnIDogJycpLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU29ydCgnbGFzdCcpLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdzb3J0LWRlc2MnKQogICAgICAgICAgICB9KSA6IG51bGwsIHVzZXIgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYWN0aW9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYWN0aW9uLWxvZ291dCcsCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVMb2dvdXQsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ2xvZ291dCcpCiAgICAgICAgICAgIH0pIDogX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYWN0aW9uIGd0LWFjdGlvbi1sb2dpbicsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlTG9naW4KICAgICAgICAgICAgfSwgdGhpcy5pMThuLnQoJ2xvZ2luLXdpdGgtZ2l0aHViJykpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvcHlyaWdodCcKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtbGluayBndC1saW5rLXByb2plY3QnLAogICAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20vZ2l0YWxrL2dpdGFsaycsCiAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJwogICAgICAgICAgICB9LCAnR2l0YWxrJyksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LXZlcnNpb24nCiAgICAgICAgICAgIH0sIF9jb25zdC5HVF9WRVJTSU9OKSkpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LXVzZXInCiAgICAgICAgICAgIH0sIHVzZXIgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogaXNQb3B1cFZpc2libGUgPyAnZ3QtdXNlci1pbm5lciBpcy0tcG9waW5nJyA6ICdndC11c2VyLWlubmVyJywKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVBvcHVwCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LXVzZXItbmFtZScKICAgICAgICAgICAgfSwgdXNlci5sb2dpbiksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28tYXJyZG93bicsCiAgICAgICAgICAgICAgbmFtZTogJ2Fycm93X2Rvd24nCiAgICAgICAgICAgIH0pKSA6IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBpc1BvcHVwVmlzaWJsZSA/ICdndC11c2VyLWlubmVyIGlzLS1wb3BpbmcnIDogJ2d0LXVzZXItaW5uZXInLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUG9wdXAKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtdXNlci1uYW1lJwogICAgICAgICAgICB9LCB0aGlzLmkxOG4udCgnYW5vbnltb3VzJykpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLWFycmRvd24nLAogICAgICAgICAgICAgIG5hbWU6ICdhcnJvd19kb3duJwogICAgICAgICAgICB9KSkpKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdyZW5kZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgICAgdmFyIF9zdGF0ZTYgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgaXNJbml0aW5nID0gX3N0YXRlNi5pc0luaXRpbmcsCiAgICAgICAgICAgICAgICBpc05vSW5pdCA9IF9zdGF0ZTYuaXNOb0luaXQsCiAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3IgPSBfc3RhdGU2LmlzT2NjdXJFcnJvciwKICAgICAgICAgICAgICAgIGVycm9yTXNnID0gX3N0YXRlNi5lcnJvck1zZywKICAgICAgICAgICAgICAgIGlzSW5wdXRGb2N1c2VkID0gX3N0YXRlNi5pc0lucHV0Rm9jdXNlZDsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29udGFpbmVyJyArIChpc0lucHV0Rm9jdXNlZCA/ICcgZ3QtaW5wdXQtZm9jdXNlZCcgOiAnJykKICAgICAgICAgICAgfSwgaXNJbml0aW5nICYmIHRoaXMuaW5pdGluZygpLCAhaXNJbml0aW5nICYmIChpc05vSW5pdCA/IFtdIDogW3RoaXMubWV0YSgpXSksIGlzT2NjdXJFcnJvciAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWVycm9yJwogICAgICAgICAgICB9LCBlcnJvck1zZyksICFpc0luaXRpbmcgJiYgKGlzTm9Jbml0ID8gW3RoaXMubm9Jbml0KCldIDogW3RoaXMuaGVhZGVyKCksIHRoaXMuY29tbWVudHMoKV0pKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdhY2Nlc3NUb2tlbicsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjY2Vzc1Rva2UgfHwgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKF9jb25zdC5HVF9BQ0NFU1NfVE9LRU4pOwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHRva2VuKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShfY29uc3QuR1RfQUNDRVNTX1RPS0VOLCB0b2tlbik7CiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuID0gdG9rZW47CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnbG9naW5MaW5rJywKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICB2YXIgZ2l0aHViT2F1dGhVcmwgPSAnaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2F1dGhvcml6ZSc7CiAgICAgICAgICAgIHZhciBjbGllbnRJRCA9IHRoaXMub3B0aW9ucy5jbGllbnRJRDsKICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gewogICAgICAgICAgICAgIGNsaWVudF9pZDogY2xpZW50SUQsCiAgICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgICBzY29wZTogJ3B1YmxpY19yZXBvJwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gZ2l0aHViT2F1dGhVcmwgKyAnPycgKyAoMCwgX3V0aWwucXVlcnlTdHJpbmdpZnkpKHF1ZXJ5KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdpc0FkbWluJywKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICB2YXIgYWRtaW4gPSB0aGlzLm9wdGlvbnMuYWRtaW47CiAgICAgICAgICAgIHZhciB1c2VyID0gdGhpcy5zdGF0ZS51c2VyOwogICAgICAgICAgICByZXR1cm4gdXNlciAmJiB+W10uY29uY2F0KGFkbWluKS5tYXAoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICByZXR1cm4gYS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB9KS5pbmRleE9mKHVzZXIubG9naW4udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICB9CiAgICAgICAgfV0pOwogICAgICAgIHJldHVybiBHaXRhbGtDb21wb25lbnQ7CiAgICAgIH0oX3JlYWN0LkNvbXBvbmVudCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IEdpdGFsa0NvbXBvbmVudDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxMDApLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMDAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjApOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuUHJvbWlzZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMDEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7CgogICAgICB2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOyAvLyB0cnVlICAtPiBTdHJpbmcjYXQKICAgICAgLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0CgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoVE9fU1RSSU5HKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aGF0LCBwb3MpIHsKICAgICAgICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpOwogICAgICAgICAgdmFyIGkgPSB0b0ludGVnZXIocG9zKTsKICAgICAgICAgIHZhciBsID0gcy5sZW5ndGg7CiAgICAgICAgICB2YXIgYSwgYjsKICAgICAgICAgIGlmIChpIDwgMCB8fCBpID49IGwpIHJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDsKICAgICAgICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZiA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYSA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDsKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMDIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7CgogICAgICB2YXIgZGVzY3JpcHRvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwoKICAgICAgdmFyIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7CgogICAgICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTsgLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTEpKEl0ZXJhdG9yUHJvdG90eXBlLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0pOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpIHsKICAgICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHsKICAgICAgICAgIG5leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCkKICAgICAgICB9KTsKICAgICAgICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTAzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGRQID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgZ2V0S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpIHsKICAgICAgICBhbk9iamVjdChPKTsKICAgICAgICB2YXIga2V5cyA9IGdldEtleXMoUHJvcGVydGllcyk7CiAgICAgICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIgUDsKCiAgICAgICAgd2hpbGUgKGxlbmd0aCA+IGkpIHsKICAgICAgICAgIGRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gTzsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMDQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mCiAgICAgIC8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzCiAgICAgIHZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKCiAgICAgIHZhciB0b0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwoKICAgICAgdmFyIHRvQWJzb2x1dGVJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKElTX0lOQ0xVREVTKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkdGhpcywgZWwsIGZyb21JbmRleCkgewogICAgICAgICAgdmFyIE8gPSB0b0lPYmplY3QoJHRoaXMpOwogICAgICAgICAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTsKICAgICAgICAgIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleChmcm9tSW5kZXgsIGxlbmd0aCk7CiAgICAgICAgICB2YXIgdmFsdWU7IC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKCiAgICAgICAgICBpZiAoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpIHdoaWxlIChsZW5ndGggPiBpbmRleCkgewogICAgICAgICAgICB2YWx1ZSA9IE9baW5kZXgrK107IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKCiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSB2YWx1ZSkgcmV0dXJuIHRydWU7IC8vIEFycmF5I2luZGV4T2YgaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3QKICAgICAgICAgIH0gZWxzZSBmb3IgKDsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHsKICAgICAgICAgICAgaWYgKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pIHsKICAgICAgICAgICAgICBpZiAoT1tpbmRleF0gPT09IGVsKSByZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTsKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMDUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7CgogICAgICB2YXIgbWF4ID0gTWF0aC5tYXg7CiAgICAgIHZhciBtaW4gPSBNYXRoLm1pbjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGluZGV4LCBsZW5ndGgpIHsKICAgICAgICBpbmRleCA9IHRvSW50ZWdlcihpbmRleCk7CiAgICAgICAgcmV0dXJuIGluZGV4IDwgMCA/IG1heChpbmRleCArIGxlbmd0aCwgMCkgOiBtaW4oaW5kZXgsIGxlbmd0aCk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBhZGRUb1Vuc2NvcGFibGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpOwoKICAgICAgdmFyIHN0ZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7CgogICAgICB2YXIgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CgogICAgICB2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7IC8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKCkKICAgICAgLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5rZXlzKCkKICAgICAgLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKQogICAgICAvLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbiAoaXRlcmF0ZWQsIGtpbmQpIHsKICAgICAgICB0aGlzLl90ID0gdG9JT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CgogICAgICAgIHRoaXMuX2kgPSAwOyAvLyBuZXh0IGluZGV4CgogICAgICAgIHRoaXMuX2sgPSBraW5kOyAvLyBraW5kCiAgICAgICAgLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgTyA9IHRoaXMuX3Q7CiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLl9rOwogICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2krKzsKCiAgICAgICAgaWYgKCFPIHx8IGluZGV4ID49IE8ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLl90ID0gdW5kZWZpbmVkOwogICAgICAgICAgcmV0dXJuIHN0ZXAoMSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoa2luZCA9PSAna2V5cycpIHJldHVybiBzdGVwKDAsIGluZGV4KTsKICAgICAgICBpZiAoa2luZCA9PSAndmFsdWVzJykgcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pOwogICAgICAgIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTsKICAgICAgfSwgJ3ZhbHVlcycpOyAvLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpCgogICAgICBJdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5OwogICAgICBhZGRUb1Vuc2NvcGFibGVzKCdrZXlzJyk7CiAgICAgIGFkZFRvVW5zY29wYWJsZXMoJ3ZhbHVlcycpOwogICAgICBhZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTA3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLyogZW1wdHkgKi8KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTA4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZG9uZSwgdmFsdWUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgZG9uZTogISFkb25lCiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTA5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIExJQlJBUlkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIGN0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKICAgICAgdmFyIGNsYXNzb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTsKCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgdmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoKICAgICAgdmFyIGFuSW5zdGFuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCk7CgogICAgICB2YXIgZm9yT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSk7CgogICAgICB2YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7CgogICAgICB2YXIgdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjApLnNldDsKCiAgICAgIHZhciBtaWNyb3Rhc2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMykoKTsKCiAgICAgIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpOwoKICAgICAgdmFyIHBlcmZvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTsKCiAgICAgIHZhciB1c2VyQWdlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNCk7CgogICAgICB2YXIgcHJvbWlzZVJlc29sdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTsKCiAgICAgIHZhciBQUk9NSVNFID0gJ1Byb21pc2UnOwogICAgICB2YXIgVHlwZUVycm9yID0gZ2xvYmFsLlR5cGVFcnJvcjsKICAgICAgdmFyIHByb2Nlc3MgPSBnbG9iYWwucHJvY2VzczsKICAgICAgdmFyIHZlcnNpb25zID0gcHJvY2VzcyAmJiBwcm9jZXNzLnZlcnNpb25zOwogICAgICB2YXIgdjggPSB2ZXJzaW9ucyAmJiB2ZXJzaW9ucy52OCB8fCAnJzsKICAgICAgdmFyICRQcm9taXNlID0gZ2xvYmFsW1BST01JU0VdOwogICAgICB2YXIgaXNOb2RlID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2Vzcyc7CgogICAgICB2YXIgZW1wdHkgPSBmdW5jdGlvbiBlbXB0eSgpIHsKICAgICAgICAvKiBlbXB0eSAqLwogICAgICB9OwoKICAgICAgdmFyIEludGVybmFsLCBuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHksIE93blByb21pc2VDYXBhYmlsaXR5LCBXcmFwcGVyOwogICAgICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZS5mOwogICAgICB2YXIgVVNFX05BVElWRSA9ICEhZnVuY3Rpb24gKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKICAgICAgICAgIHZhciBwcm9taXNlID0gJFByb21pc2UucmVzb2x2ZSgxKTsKCiAgICAgICAgICB2YXIgRmFrZVByb21pc2UgPSAocHJvbWlzZS5jb25zdHJ1Y3RvciA9IHt9KVtfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdzcGVjaWVzJyldID0gZnVuY3Rpb24gKGV4ZWMpIHsKICAgICAgICAgICAgZXhlYyhlbXB0eSwgZW1wdHkpOwogICAgICAgICAgfTsgLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdAoKCiAgICAgICAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZSAvLyB2OCA2LjYgKE5vZGUgMTAgYW5kIENocm9tZSA2NikgaGF2ZSBhIGJ1ZyB3aXRoIHJlc29sdmluZyBjdXN0b20gdGhlbmFibGVzCiAgICAgICAgICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD04MzA1NjUKICAgICAgICAgIC8vIHdlIGNhbid0IGRldGVjdCBpdCBzeW5jaHJvbm91c2x5LCBzbyBqdXN0IGNoZWNrIHZlcnNpb25zCiAgICAgICAgICAmJiB2OC5pbmRleE9mKCc2LjYnKSAhPT0gMCAmJiB1c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lLzY2JykgPT09IC0xOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8qIGVtcHR5ICovCiAgICAgICAgfQogICAgICB9KCk7IC8vIGhlbHBlcnMKCiAgICAgIHZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24gaXNUaGVuYWJsZShpdCkgewogICAgICAgIHZhciB0aGVuOwogICAgICAgIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTsKICAgICAgfTsKCiAgICAgIHZhciBub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkocHJvbWlzZSwgaXNSZWplY3QpIHsKICAgICAgICBpZiAocHJvbWlzZS5fbikgcmV0dXJuOwogICAgICAgIHByb21pc2UuX24gPSB0cnVlOwogICAgICAgIHZhciBjaGFpbiA9IHByb21pc2UuX2M7CiAgICAgICAgbWljcm90YXNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3Y7CiAgICAgICAgICB2YXIgb2sgPSBwcm9taXNlLl9zID09IDE7CiAgICAgICAgICB2YXIgaSA9IDA7CgogICAgICAgICAgdmFyIHJ1biA9IGZ1bmN0aW9uIHJ1bihyZWFjdGlvbikgewogICAgICAgICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsOwogICAgICAgICAgICB2YXIgcmVzb2x2ZSA9IHJlYWN0aW9uLnJlc29sdmU7CiAgICAgICAgICAgIHZhciByZWplY3QgPSByZWFjdGlvbi5yZWplY3Q7CiAgICAgICAgICAgIHZhciBkb21haW4gPSByZWFjdGlvbi5kb21haW47CiAgICAgICAgICAgIHZhciByZXN1bHQsIHRoZW4sIGV4aXRlZDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHsKICAgICAgICAgICAgICAgIGlmICghb2spIHsKICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2UuX2ggPT0gMikgb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSk7CiAgICAgICAgICAgICAgICAgIHByb21pc2UuX2ggPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyID09PSB0cnVlKSByZXN1bHQgPSB2YWx1ZTtlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKGRvbWFpbikgZG9tYWluLmVudGVyKCk7CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpOyAvLyBtYXkgdGhyb3cKCiAgICAgICAgICAgICAgICAgIGlmIChkb21haW4pIHsKICAgICAgICAgICAgICAgICAgICBkb21haW4uZXhpdCgpOwogICAgICAgICAgICAgICAgICAgIGV4aXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKSB7CiAgICAgICAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpIHsKICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBpZiAoZG9tYWluICYmICFleGl0ZWQpIGRvbWFpbi5leGl0KCk7CiAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIHdoaWxlIChjaGFpbi5sZW5ndGggPiBpKSB7CiAgICAgICAgICAgIHJ1bihjaGFpbltpKytdKTsKICAgICAgICAgIH0gLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gKCgogICAgICAgICAgcHJvbWlzZS5fYyA9IFtdOwogICAgICAgICAgcHJvbWlzZS5fbiA9IGZhbHNlOwogICAgICAgICAgaWYgKGlzUmVqZWN0ICYmICFwcm9taXNlLl9oKSBvblVuaGFuZGxlZChwcm9taXNlKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uIG9uVW5oYW5kbGVkKHByb21pc2UpIHsKICAgICAgICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92OwogICAgICAgICAgdmFyIHVuaGFuZGxlZCA9IGlzVW5oYW5kbGVkKHByb21pc2UpOwogICAgICAgICAgdmFyIHJlc3VsdCwgaGFuZGxlciwgY29uc29sZTsKCiAgICAgICAgICBpZiAodW5oYW5kbGVkKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHBlcmZvcm0oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChpc05vZGUpIHsKICAgICAgICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlciA9IGdsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbikgewogICAgICAgICAgICAgICAgaGFuZGxlcih7CiAgICAgICAgICAgICAgICAgIHByb21pc2U6IHByb21pc2UsCiAgICAgICAgICAgICAgICAgIHJlYXNvbjogdmFsdWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZSkgJiYgY29uc29sZS5lcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgdmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7IC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkCgogICAgICAgICAgICBwcm9taXNlLl9oID0gaXNOb2RlIHx8IGlzVW5oYW5kbGVkKHByb21pc2UpID8gMiA6IDE7CiAgICAgICAgICB9CgogICAgICAgICAgcHJvbWlzZS5fYSA9IHVuZGVmaW5lZDsKICAgICAgICAgIGlmICh1bmhhbmRsZWQgJiYgcmVzdWx0LmUpIHRocm93IHJlc3VsdC52OwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIGlzVW5oYW5kbGVkID0gZnVuY3Rpb24gaXNVbmhhbmRsZWQocHJvbWlzZSkgewogICAgICAgIHJldHVybiBwcm9taXNlLl9oICE9PSAxICYmIChwcm9taXNlLl9hIHx8IHByb21pc2UuX2MpLmxlbmd0aCA9PT0gMDsKICAgICAgfTsKCiAgICAgIHZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uIG9uSGFuZGxlVW5oYW5kbGVkKHByb21pc2UpIHsKICAgICAgICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgaGFuZGxlcjsKCiAgICAgICAgICBpZiAoaXNOb2RlKSB7CiAgICAgICAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpOwogICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyID0gZ2xvYmFsLm9ucmVqZWN0aW9uaGFuZGxlZCkgewogICAgICAgICAgICBoYW5kbGVyKHsKICAgICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLAogICAgICAgICAgICAgIHJlYXNvbjogcHJvbWlzZS5fdgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciAkcmVqZWN0ID0gZnVuY3Rpb24gJHJlamVjdCh2YWx1ZSkgewogICAgICAgIHZhciBwcm9taXNlID0gdGhpczsKICAgICAgICBpZiAocHJvbWlzZS5fZCkgcmV0dXJuOwogICAgICAgIHByb21pc2UuX2QgPSB0cnVlOwogICAgICAgIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAoKICAgICAgICBwcm9taXNlLl92ID0gdmFsdWU7CiAgICAgICAgcHJvbWlzZS5fcyA9IDI7CiAgICAgICAgaWYgKCFwcm9taXNlLl9hKSBwcm9taXNlLl9hID0gcHJvbWlzZS5fYy5zbGljZSgpOwogICAgICAgIG5vdGlmeShwcm9taXNlLCB0cnVlKTsKICAgICAgfTsKCiAgICAgIHZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uICRyZXNvbHZlKHZhbHVlKSB7CiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzOwogICAgICAgIHZhciB0aGVuOwogICAgICAgIGlmIChwcm9taXNlLl9kKSByZXR1cm47CiAgICAgICAgcHJvbWlzZS5fZCA9IHRydWU7CiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwCgogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsKCiAgICAgICAgICBpZiAodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKSB7CiAgICAgICAgICAgIG1pY3JvdGFzayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSB7CiAgICAgICAgICAgICAgICBfdzogcHJvbWlzZSwKICAgICAgICAgICAgICAgIF9kOiBmYWxzZQogICAgICAgICAgICAgIH07IC8vIHdyYXAKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgY3R4KCRyZXNvbHZlLCB3cmFwcGVyLCAxKSwgY3R4KCRyZWplY3QsIHdyYXBwZXIsIDEpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTsKICAgICAgICAgICAgcHJvbWlzZS5fcyA9IDE7CiAgICAgICAgICAgIG5vdGlmeShwcm9taXNlLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgJHJlamVjdC5jYWxsKHsKICAgICAgICAgICAgX3c6IHByb21pc2UsCiAgICAgICAgICAgIF9kOiBmYWxzZQogICAgICAgICAgfSwgZSk7IC8vIHdyYXAKICAgICAgICB9CiAgICAgIH07IC8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsCgoKICAgICAgaWYgKCFVU0VfTkFUSVZFKSB7CiAgICAgICAgLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikKICAgICAgICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpIHsKICAgICAgICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpOwogICAgICAgICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTsKICAgICAgICAgIEludGVybmFsLmNhbGwodGhpcyk7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCB0aGlzLCAxKSwgY3R4KCRyZWplY3QsIHRoaXMsIDEpKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKCgogICAgICAgIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikgewogICAgICAgICAgdGhpcy5fYyA9IFtdOyAvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMKCiAgICAgICAgICB0aGlzLl9hID0gdW5kZWZpbmVkOyAvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9ucwoKICAgICAgICAgIHRoaXMuX3MgPSAwOyAvLyA8LSBzdGF0ZQoKICAgICAgICAgIHRoaXMuX2QgPSBmYWxzZTsgLy8gPC0gZG9uZQoKICAgICAgICAgIHRoaXMuX3YgPSB1bmRlZmluZWQ7IC8vIDwtIHZhbHVlCgogICAgICAgICAgdGhpcy5faCA9IDA7IC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCgogICAgICAgICAgdGhpcy5fbiA9IGZhbHNlOyAvLyA8LSBub3RpZnkKICAgICAgICB9OwoKICAgICAgICBJbnRlcm5hbC5wcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNSkoJFByb21pc2UucHJvdG90eXBlLCB7CiAgICAgICAgICAvLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKQogICAgICAgICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkgewogICAgICAgICAgICB2YXIgcmVhY3Rpb24gPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJFByb21pc2UpKTsKICAgICAgICAgICAgcmVhY3Rpb24ub2sgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTsKICAgICAgICAgICAgcmVhY3Rpb24uZmFpbCA9IHR5cGVvZiBvblJlamVjdGVkID09ICdmdW5jdGlvbicgJiYgb25SZWplY3RlZDsKICAgICAgICAgICAgcmVhY3Rpb24uZG9tYWluID0gaXNOb2RlID8gcHJvY2Vzcy5kb21haW4gOiB1bmRlZmluZWQ7CgogICAgICAgICAgICB0aGlzLl9jLnB1c2gocmVhY3Rpb24pOwoKICAgICAgICAgICAgaWYgKHRoaXMuX2EpIHRoaXMuX2EucHVzaChyZWFjdGlvbik7CiAgICAgICAgICAgIGlmICh0aGlzLl9zKSBub3RpZnkodGhpcywgZmFsc2UpOwogICAgICAgICAgICByZXR1cm4gcmVhY3Rpb24ucHJvbWlzZTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQogICAgICAgICAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBPd25Qcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIE93blByb21pc2VDYXBhYmlsaXR5KCkgewogICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgSW50ZXJuYWwoKTsKICAgICAgICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7CiAgICAgICAgICB0aGlzLnJlc29sdmUgPSBjdHgoJHJlc29sdmUsIHByb21pc2UsIDEpOwogICAgICAgICAgdGhpcy5yZWplY3QgPSBjdHgoJHJlamVjdCwgcHJvbWlzZSwgMSk7CiAgICAgICAgfTsKCiAgICAgICAgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUuZiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykgewogICAgICAgICAgcmV0dXJuIEMgPT09ICRQcm9taXNlIHx8IEMgPT09IFdyYXBwZXIgPyBuZXcgT3duUHJvbWlzZUNhcGFiaWxpdHkoQykgOiBuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgewogICAgICAgIFByb21pc2U6ICRQcm9taXNlCiAgICAgIH0pOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJFByb21pc2UsIFBST01JU0UpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpKFBST01JU0UpOwoKICAgICAgV3JhcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMClbUFJPTUlTRV07IC8vIHN0YXRpY3MKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHsKICAgICAgICAvLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKQogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHIpIHsKICAgICAgICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcyk7CiAgICAgICAgICB2YXIgJCRyZWplY3QgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgICAgICAgICQkcmVqZWN0KHIpOwogICAgICAgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIChMSUJSQVJZIHx8ICFVU0VfTkFUSVZFKSwgUFJPTUlTRSwgewogICAgICAgIC8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KQogICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoeCkgewogICAgICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKExJQlJBUlkgJiYgdGhpcyA9PT0gV3JhcHBlciA/ICRQcm9taXNlIDogdGhpcywgeCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgX193ZWJwYWNrX3JlcXVpcmVfXyg2MykoZnVuY3Rpb24gKGl0ZXIpIHsKICAgICAgICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpOwogICAgICB9KSksIFBST01JU0UsIHsKICAgICAgICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKICAgICAgICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSkgewogICAgICAgICAgdmFyIEMgPSB0aGlzOwogICAgICAgICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKTsKICAgICAgICAgIHZhciByZXNvbHZlID0gY2FwYWJpbGl0eS5yZXNvbHZlOwogICAgICAgICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgICAgICAgdmFyIHJlc3VsdCA9IHBlcmZvcm0oZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdmFsdWVzID0gW107CiAgICAgICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSAxOwogICAgICAgICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uIChwcm9taXNlKSB7CiAgICAgICAgICAgICAgdmFyICRpbmRleCA9IGluZGV4Kys7CiAgICAgICAgICAgICAgdmFyIGFscmVhZHlDYWxsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh1bmRlZmluZWQpOwogICAgICAgICAgICAgIHJlbWFpbmluZysrOwogICAgICAgICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKGFscmVhZHlDYWxsZWQpIHJldHVybjsKICAgICAgICAgICAgICAgIGFscmVhZHlDYWxsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgICAgICAgICAgICB9LCByZWplY3QpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocmVzdWx0LmUpIHJlamVjdChyZXN1bHQudik7CiAgICAgICAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogICAgICAgIH0sCiAgICAgICAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQogICAgICAgIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpIHsKICAgICAgICAgIHZhciBDID0gdGhpczsKICAgICAgICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQyk7CiAgICAgICAgICB2YXIgcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gcGVyZm9ybShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24gKHByb21pc2UpIHsKICAgICAgICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocmVzdWx0LmUpIHJlamVjdChyZXN1bHQudik7CiAgICAgICAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTEwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCkgewogICAgICAgIGlmICghKGl0IGluc3RhbmNlb2YgQ29uc3RydWN0b3IpIHx8IGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpIHsKICAgICAgICAgIHRocm93IFR5cGVFcnJvcihuYW1lICsgJzogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDExMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBjdHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKCiAgICAgIHZhciBjYWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7CgogICAgICB2YXIgaXNBcnJheUl0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTsKCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgdG9MZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKCiAgICAgIHZhciBnZXRJdGVyRm4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTsKCiAgICAgIHZhciBCUkVBSyA9IHt9OwogICAgICB2YXIgUkVUVVJOID0ge307CgogICAgICB2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBlbnRyaWVzLCBmbiwgdGhhdCwgSVRFUkFUT1IpIHsKICAgICAgICB2YXIgaXRlckZuID0gSVRFUkFUT1IgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gaXRlcmFibGU7CiAgICAgICAgfSA6IGdldEl0ZXJGbihpdGVyYWJsZSk7CiAgICAgICAgdmFyIGYgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSk7CiAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICB2YXIgbGVuZ3RoLCBzdGVwLCBpdGVyYXRvciwgcmVzdWx0OwogICAgICAgIGlmICh0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpIHRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpOyAvLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3IKCiAgICAgICAgaWYgKGlzQXJyYXlJdGVyKGl0ZXJGbikpIGZvciAobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHsKICAgICAgICAgIHJlc3VsdCA9IGVudHJpZXMgPyBmKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKSA6IGYoaXRlcmFibGVbaW5kZXhdKTsKICAgICAgICAgIGlmIChyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKSByZXR1cm4gcmVzdWx0OwogICAgICAgIH0gZWxzZSBmb3IgKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoaXRlcmFibGUpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7KSB7CiAgICAgICAgICByZXN1bHQgPSBjYWxsKGl0ZXJhdG9yLCBmLCBzdGVwLnZhbHVlLCBlbnRyaWVzKTsKICAgICAgICAgIGlmIChyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKSByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGV4cG9ydHMuQlJFQUsgPSBCUkVBSzsKICAgICAgZXhwb3J0cy5SRVRVUk4gPSBSRVRVUk47CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTEyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuLCBhcmdzLCB0aGF0KSB7CiAgICAgICAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkOwoKICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiB1biA/IGZuKCkgOiBmbi5jYWxsKHRoYXQpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIHVuID8gZm4oYXJnc1swXSkgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSkgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSkgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSkgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3MpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBtYWNyb3Rhc2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKS5zZXQ7CgogICAgICB2YXIgT2JzZXJ2ZXIgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjsKICAgICAgdmFyIHByb2Nlc3MgPSBnbG9iYWwucHJvY2VzczsKICAgICAgdmFyIFByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTsKICAgICAgdmFyIGlzTm9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpKHByb2Nlc3MpID09ICdwcm9jZXNzJzsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7CgogICAgICAgIHZhciBmbHVzaCA9IGZ1bmN0aW9uIGZsdXNoKCkgewogICAgICAgICAgdmFyIHBhcmVudCwgZm47CiAgICAgICAgICBpZiAoaXNOb2RlICYmIChwYXJlbnQgPSBwcm9jZXNzLmRvbWFpbikpIHBhcmVudC5leGl0KCk7CgogICAgICAgICAgd2hpbGUgKGhlYWQpIHsKICAgICAgICAgICAgZm4gPSBoZWFkLmZuOwogICAgICAgICAgICBoZWFkID0gaGVhZC5uZXh0OwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmbigpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgaWYgKGhlYWQpIG5vdGlmeSgpO2Vsc2UgbGFzdCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgbGFzdCA9IHVuZGVmaW5lZDsKICAgICAgICAgIGlmIChwYXJlbnQpIHBhcmVudC5lbnRlcigpOwogICAgICAgIH07IC8vIE5vZGUuanMKCgogICAgICAgIGlmIChpc05vZGUpIHsKICAgICAgICAgIG5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSgpIHsKICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7CiAgICAgICAgICB9OyAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXIsIGV4Y2VwdCBpT1MgU2FmYXJpIC0gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzMzOQoKICAgICAgICB9IGVsc2UgaWYgKE9ic2VydmVyICYmICEoZ2xvYmFsLm5hdmlnYXRvciAmJiBnbG9iYWwubmF2aWdhdG9yLnN0YW5kYWxvbmUpKSB7CiAgICAgICAgICB2YXIgdG9nZ2xlID0gdHJ1ZTsKICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOwogICAgICAgICAgbmV3IE9ic2VydmVyKGZsdXNoKS5vYnNlcnZlKG5vZGUsIHsKICAgICAgICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZQogICAgICAgICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CgogICAgICAgICAgbm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KCkgewogICAgICAgICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlOwogICAgICAgICAgfTsgLy8gZW52aXJvbm1lbnRzIHdpdGggbWF5YmUgbm9uLWNvbXBsZXRlbHkgY29ycmVjdCwgYnV0IGV4aXN0ZW50IFByb21pc2UKCiAgICAgICAgfSBlbHNlIGlmIChQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSkgewogICAgICAgICAgLy8gUHJvbWlzZS5yZXNvbHZlIHdpdGhvdXQgYW4gYXJndW1lbnQgdGhyb3dzIGFuIGVycm9yIGluIExHIFdlYk9TIDIKICAgICAgICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7CgogICAgICAgICAgbm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KCkgewogICAgICAgICAgICBwcm9taXNlLnRoZW4oZmx1c2gpOwogICAgICAgICAgfTsgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjoKICAgICAgICAgIC8vIC0gc2V0SW1tZWRpYXRlCiAgICAgICAgICAvLyAtIE1lc3NhZ2VDaGFubmVsCiAgICAgICAgICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnCiAgICAgICAgICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZQogICAgICAgICAgLy8gLSBzZXRUaW1lb3V0CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkoKSB7CiAgICAgICAgICAgIC8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkKICAgICAgICAgICAgbWFjcm90YXNrLmNhbGwoZ2xvYmFsLCBmbHVzaCk7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikgewogICAgICAgICAgdmFyIHRhc2sgPSB7CiAgICAgICAgICAgIGZuOiBmbiwKICAgICAgICAgICAgbmV4dDogdW5kZWZpbmVkCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKGxhc3QpIGxhc3QubmV4dCA9IHRhc2s7CgogICAgICAgICAgaWYgKCFoZWFkKSB7CiAgICAgICAgICAgIGhlYWQgPSB0YXNrOwogICAgICAgICAgICBub3RpZnkoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBsYXN0ID0gdGFzazsKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBuYXZpZ2F0b3IgPSBnbG9iYWwubmF2aWdhdG9yOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDExNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXQsIHNyYywgc2FmZSkgewogICAgICAgIGZvciAodmFyIGtleSBpbiBzcmMpIHsKICAgICAgICAgIGlmIChzYWZlICYmIHRhcmdldFtrZXldKSB0YXJnZXRba2V5XSA9IHNyY1trZXldO2Vsc2UgaGlkZSh0YXJnZXQsIGtleSwgc3JjW2tleV0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTE2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CgogICAgICB2YXIgZFAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKICAgICAgdmFyIERFU0NSSVBUT1JTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCiAgICAgIHZhciBTUEVDSUVTID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoS0VZKSB7CiAgICAgICAgdmFyIEMgPSB0eXBlb2YgY29yZVtLRVldID09ICdmdW5jdGlvbicgPyBjb3JlW0tFWV0gOiBnbG9iYWxbS0VZXTsKICAgICAgICBpZiAoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSkgZFAuZihDLCBTUEVDSUVTLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDExNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS1maW5hbGx5CgogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCiAgICAgIHZhciBwcm9taXNlUmVzb2x2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpOwoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LlIsICdQcm9taXNlJywgewogICAgICAgICdmaW5hbGx5JzogZnVuY3Rpb24gX2ZpbmFsbHkob25GaW5hbGx5KSB7CiAgICAgICAgICB2YXIgQyA9IHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCBjb3JlLlByb21pc2UgfHwgZ2xvYmFsLlByb21pc2UpOwogICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2Ygb25GaW5hbGx5ID09ICdmdW5jdGlvbic7CiAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKGlzRnVuY3Rpb24gPyBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICByZXR1cm4gcHJvbWlzZVJlc29sdmUoQywgb25GaW5hbGx5KCkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB4OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gOiBvbkZpbmFsbHksIGlzRnVuY3Rpb24gPyBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gcHJvbWlzZVJlc29sdmUoQywgb25GaW5hbGx5KCkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSA6IG9uRmluYWxseSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtdHJ5CgogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCiAgICAgIHZhciBwZXJmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7CgogICAgICAkZXhwb3J0KCRleHBvcnQuUywgJ1Byb21pc2UnLCB7CiAgICAgICAgJ3RyeSc6IGZ1bmN0aW9uIF90cnkoY2FsbGJhY2tmbikgewogICAgICAgICAgdmFyIHByb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkuZih0aGlzKTsKICAgICAgICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGNhbGxiYWNrZm4pOwogICAgICAgICAgKHJlc3VsdC5lID8gcHJvbWlzZUNhcGFiaWxpdHkucmVqZWN0IDogcHJvbWlzZUNhcGFiaWxpdHkucmVzb2x2ZSkocmVzdWx0LnYpOwogICAgICAgICAgcmV0dXJuIHByb21pc2VDYXBhYmlsaXR5LnByb21pc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTIwKSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTIwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5hc3NpZ247CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTIxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSkKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7CiAgICAgICAgYXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMikKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTIyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCgogICAgICB2YXIgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKICAgICAgdmFyIGdldEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTsKCiAgICAgIHZhciBnT1BTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7CgogICAgICB2YXIgcElFID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7CgogICAgICB2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCiAgICAgIHZhciBJT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7CgogICAgICB2YXIgJGFzc2lnbiA9IE9iamVjdC5hc3NpZ247IC8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIEEgPSB7fTsKICAgICAgICB2YXIgQiA9IHt9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKCiAgICAgICAgdmFyIFMgPSBTeW1ib2woKTsKICAgICAgICB2YXIgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7CiAgICAgICAgQVtTXSA9IDc7CiAgICAgICAgSy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbiAoaykgewogICAgICAgICAgQltrXSA9IGs7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7CiAgICAgIH0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgICAgIHZhciBUID0gdG9PYmplY3QodGFyZ2V0KTsKICAgICAgICB2YXIgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgICAgdmFyIGluZGV4ID0gMTsKICAgICAgICB2YXIgZ2V0U3ltYm9scyA9IGdPUFMuZjsKICAgICAgICB2YXIgaXNFbnVtID0gcElFLmY7CgogICAgICAgIHdoaWxlIChhTGVuID4gaW5kZXgpIHsKICAgICAgICAgIHZhciBTID0gSU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pOwogICAgICAgICAgdmFyIGtleXMgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpOwogICAgICAgICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoOwogICAgICAgICAgdmFyIGogPSAwOwogICAgICAgICAgdmFyIGtleTsKCiAgICAgICAgICB3aGlsZSAobGVuZ3RoID4gaikgewogICAgICAgICAgICBrZXkgPSBrZXlzW2orK107CiAgICAgICAgICAgIGlmICghREVTQ1JJUFRPUlMgfHwgaXNFbnVtLmNhbGwoUywga2V5KSkgVFtrZXldID0gU1trZXldOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFQ7CiAgICAgIH0gOiAkYXNzaWduOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTI0KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Y7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTI0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCiAgICAgIHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoKICAgICAgdmFyICRnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkoJ2dldFByb3RvdHlwZU9mJywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCkgewogICAgICAgICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMjUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTI2KSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTI2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkuZignaXRlcmF0b3InKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTI4KSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTI4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjkpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuU3ltYm9sOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIHJlZGVmaW5lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7CgogICAgICB2YXIgTUVUQSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKS5LRVk7CgogICAgICB2YXIgJGZhaWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7CgogICAgICB2YXIgc2hhcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7CgogICAgICB2YXIgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTsKCiAgICAgIHZhciB1aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTsKCiAgICAgIHZhciB3a3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwoKICAgICAgdmFyIHdrc0V4dCA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwoKICAgICAgdmFyIHdrc0RlZmluZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwoKICAgICAgdmFyIGVudW1LZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpOwoKICAgICAgdmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMik7CgogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICB2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCiAgICAgIHZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKCiAgICAgIHZhciB0b1ByaW1pdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpOwoKICAgICAgdmFyIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKCiAgICAgIHZhciBfY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7CgogICAgICB2YXIgZ09QTkV4dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsKCiAgICAgIHZhciAkR09QRCA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpOwoKICAgICAgdmFyICRHT1BTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7CgogICAgICB2YXIgJERQID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCiAgICAgIHZhciAka2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwoKICAgICAgdmFyIGdPUEQgPSAkR09QRC5mOwogICAgICB2YXIgZFAgPSAkRFAuZjsKICAgICAgdmFyIGdPUE4gPSBnT1BORXh0LmY7CiAgICAgIHZhciAkU3ltYm9sID0gZ2xvYmFsLlN5bWJvbDsKICAgICAgdmFyICRKU09OID0gZ2xvYmFsLkpTT047CgogICAgICB2YXIgX3N0cmluZ2lmeSA9ICRKU09OICYmICRKU09OLnN0cmluZ2lmeTsKCiAgICAgIHZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKICAgICAgdmFyIEhJRERFTiA9IHdrcygnX2hpZGRlbicpOwogICAgICB2YXIgVE9fUFJJTUlUSVZFID0gd2tzKCd0b1ByaW1pdGl2ZScpOwogICAgICB2YXIgaXNFbnVtID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7CiAgICAgIHZhciBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5Jyk7CiAgICAgIHZhciBBbGxTeW1ib2xzID0gc2hhcmVkKCdzeW1ib2xzJyk7CiAgICAgIHZhciBPUFN5bWJvbHMgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKTsKICAgICAgdmFyIE9iamVjdFByb3RvID0gT2JqZWN0W1BST1RPVFlQRV07CiAgICAgIHZhciBVU0VfTkFUSVZFID0gdHlwZW9mICRTeW1ib2wgPT0gJ2Z1bmN0aW9uJyAmJiAhISRHT1BTLmY7CiAgICAgIHZhciBRT2JqZWN0ID0gZ2xvYmFsLlFPYmplY3Q7IC8vIERvbid0IHVzZSBzZXR0ZXJzIGluIFF0IFNjcmlwdCwgaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzE3MwoKICAgICAgdmFyIHNldHRlciA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7IC8vIGZhbGxiYWNrIGZvciBvbGQgQW5kcm9pZCwgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTY4NwoKICAgICAgdmFyIHNldFN5bWJvbERlc2MgPSBERVNDUklQVE9SUyAmJiAkZmFpbHMoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfY3JlYXRlKGRQKHt9LCAnYScsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gZFAodGhpcywgJ2EnLCB7CiAgICAgICAgICAgICAgdmFsdWU6IDcKICAgICAgICAgICAgfSkuYTsKICAgICAgICAgIH0KICAgICAgICB9KSkuYSAhPSA3OwogICAgICB9KSA/IGZ1bmN0aW9uIChpdCwga2V5LCBEKSB7CiAgICAgICAgdmFyIHByb3RvRGVzYyA9IGdPUEQoT2JqZWN0UHJvdG8sIGtleSk7CiAgICAgICAgaWYgKHByb3RvRGVzYykgZGVsZXRlIE9iamVjdFByb3RvW2tleV07CiAgICAgICAgZFAoaXQsIGtleSwgRCk7CiAgICAgICAgaWYgKHByb3RvRGVzYyAmJiBpdCAhPT0gT2JqZWN0UHJvdG8pIGRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7CiAgICAgIH0gOiBkUDsKCiAgICAgIHZhciB3cmFwID0gZnVuY3Rpb24gd3JhcCh0YWcpIHsKICAgICAgICB2YXIgc3ltID0gQWxsU3ltYm9sc1t0YWddID0gX2NyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pOwoKICAgICAgICBzeW0uX2sgPSB0YWc7CiAgICAgICAgcmV0dXJuIHN5bTsKICAgICAgfTsKCiAgICAgIHZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgX3R5cGVvZjQoJFN5bWJvbC5pdGVyYXRvcikgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gX3R5cGVvZjQoaXQpID09ICdzeW1ib2wnOwogICAgICB9IDogZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGl0IGluc3RhbmNlb2YgJFN5bWJvbDsKICAgICAgfTsKCiAgICAgIHZhciAkZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBEKSB7CiAgICAgICAgaWYgKGl0ID09PSBPYmplY3RQcm90bykgJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTsKICAgICAgICBhbk9iamVjdChpdCk7CiAgICAgICAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsKICAgICAgICBhbk9iamVjdChEKTsKCiAgICAgICAgaWYgKGhhcyhBbGxTeW1ib2xzLCBrZXkpKSB7CiAgICAgICAgICBpZiAoIUQuZW51bWVyYWJsZSkgewogICAgICAgICAgICBpZiAoIWhhcyhpdCwgSElEREVOKSkgZFAoaXQsIEhJRERFTiwgY3JlYXRlRGVzYygxLCB7fSkpOwogICAgICAgICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pIGl0W0hJRERFTl1ba2V5XSA9IGZhbHNlOwogICAgICAgICAgICBEID0gX2NyZWF0ZShELCB7CiAgICAgICAgICAgICAgZW51bWVyYWJsZTogY3JlYXRlRGVzYygwLCBmYWxzZSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHNldFN5bWJvbERlc2MoaXQsIGtleSwgRCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZFAoaXQsIGtleSwgRCk7CiAgICAgIH07CgogICAgICB2YXIgJGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGl0LCBQKSB7CiAgICAgICAgYW5PYmplY3QoaXQpOwogICAgICAgIHZhciBrZXlzID0gZW51bUtleXMoUCA9IHRvSU9iamVjdChQKSk7CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciBsID0ga2V5cy5sZW5ndGg7CiAgICAgICAgdmFyIGtleTsKCiAgICAgICAgd2hpbGUgKGwgPiBpKSB7CiAgICAgICAgICAkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpdDsKICAgICAgfTsKCiAgICAgIHZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKSB7CiAgICAgICAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApOwogICAgICB9OwoKICAgICAgdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKGtleSkgewogICAgICAgIHZhciBFID0gaXNFbnVtLmNhbGwodGhpcywga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSk7CiAgICAgICAgaWYgKHRoaXMgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIEUgfHwgIWhhcyh0aGlzLCBrZXkpIHx8ICFoYXMoQWxsU3ltYm9scywga2V5KSB8fCBoYXModGhpcywgSElEREVOKSAmJiB0aGlzW0hJRERFTl1ba2V5XSA/IEUgOiB0cnVlOwogICAgICB9OwoKICAgICAgdmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSkgewogICAgICAgIGl0ID0gdG9JT2JqZWN0KGl0KTsKICAgICAgICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOwogICAgICAgIGlmIChpdCA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpIHJldHVybjsKICAgICAgICB2YXIgRCA9IGdPUEQoaXQsIGtleSk7CiAgICAgICAgaWYgKEQgJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIShoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSkgRC5lbnVtZXJhYmxlID0gdHJ1ZTsKICAgICAgICByZXR1cm4gRDsKICAgICAgfTsKCiAgICAgIHZhciAkZ2V0T3duUHJvcGVydHlOYW1lcyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpIHsKICAgICAgICB2YXIgbmFtZXMgPSBnT1BOKHRvSU9iamVjdChpdCkpOwogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIGtleTsKCiAgICAgICAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIHsKICAgICAgICAgIGlmICghaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpIHJlc3VsdC5wdXNoKGtleSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwoKICAgICAgdmFyICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpIHsKICAgICAgICB2YXIgSVNfT1AgPSBpdCA9PT0gT2JqZWN0UHJvdG87CiAgICAgICAgdmFyIG5hbWVzID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpOwogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIGtleTsKCiAgICAgICAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIHsKICAgICAgICAgIGlmIChoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpIHJlc3VsdC5wdXNoKEFsbFN5bWJvbHNba2V5XSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OyAvLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKCgogICAgICBpZiAoIVVTRV9OQVRJVkUpIHsKICAgICAgICAkU3ltYm9sID0gZnVuY3Rpb24gX1N5bWJvbDIoKSB7CiAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mICRTeW1ib2wpIHRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpOwogICAgICAgICAgdmFyIHRhZyA9IHVpZChhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7CgogICAgICAgICAgdmFyICRzZXQgPSBmdW5jdGlvbiAkc2V0KHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh0aGlzID09PSBPYmplY3RQcm90bykgJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpOwogICAgICAgICAgICBpZiAoaGFzKHRoaXMsIEhJRERFTikgJiYgaGFzKHRoaXNbSElEREVOXSwgdGFnKSkgdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTsKICAgICAgICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKERFU0NSSVBUT1JTICYmIHNldHRlcikgc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgc2V0OiAkc2V0CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB3cmFwKHRhZyk7CiAgICAgICAgfTsKCiAgICAgICAgcmVkZWZpbmUoJFN5bWJvbFtQUk9UT1RZUEVdLCAndG9TdHJpbmcnLCBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9rOwogICAgICAgIH0pOwogICAgICAgICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogICAgICAgICREUC5mID0gJGRlZmluZVByb3BlcnR5OwogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNjgpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lczsKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KS5mID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlOwogICAgICAgICRHT1BTLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzOwoKICAgICAgICBpZiAoREVTQ1JJUFRPUlMgJiYgIV9fd2VicGFja19yZXF1aXJlX18oMjEpKSB7CiAgICAgICAgICByZWRlZmluZShPYmplY3RQcm90bywgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJHByb3BlcnR5SXNFbnVtZXJhYmxlLCB0cnVlKTsKICAgICAgICB9CgogICAgICAgIHdrc0V4dC5mID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgewogICAgICAgIFN5bWJvbDogJFN5bWJvbAogICAgICB9KTsKCiAgICAgIGZvciAodmFyIGVzNlN5bWJvbHMgPSAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNAogICAgICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnLnNwbGl0KCcsJyksIGogPSAwOyBlczZTeW1ib2xzLmxlbmd0aCA+IGo7KSB7CiAgICAgICAgd2tzKGVzNlN5bWJvbHNbaisrXSk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIHdlbGxLbm93blN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBrID0gMDsgd2VsbEtub3duU3ltYm9scy5sZW5ndGggPiBrOykgewogICAgICAgIHdrc0RlZmluZSh3ZWxsS25vd25TeW1ib2xzW2srK10pOwogICAgICB9CgogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywgewogICAgICAgIC8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQogICAgICAgICdmb3InOiBmdW5jdGlvbiBfZm9yKGtleSkgewogICAgICAgICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKSA/IFN5bWJvbFJlZ2lzdHJ5W2tleV0gOiBTeW1ib2xSZWdpc3RyeVtrZXldID0gJFN5bWJvbChrZXkpOwogICAgICAgIH0sCiAgICAgICAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pCiAgICAgICAga2V5Rm9yOiBmdW5jdGlvbiBrZXlGb3Ioc3ltKSB7CiAgICAgICAgICBpZiAoIWlzU3ltYm9sKHN5bSkpIHRocm93IFR5cGVFcnJvcihzeW0gKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gU3ltYm9sUmVnaXN0cnkpIHsKICAgICAgICAgICAgaWYgKFN5bWJvbFJlZ2lzdHJ5W2tleV0gPT09IHN5bSkgcmV0dXJuIGtleTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVNldHRlcjogZnVuY3Rpb24gdXNlU2V0dGVyKCkgewogICAgICAgICAgc2V0dGVyID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHVzZVNpbXBsZTogZnVuY3Rpb24gdXNlU2ltcGxlKCkgewogICAgICAgICAgc2V0dGVyID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHsKICAgICAgICAvLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCiAgICAgICAgY3JlYXRlOiAkY3JlYXRlLAogICAgICAgIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQogICAgICAgIGRlZmluZVByb3BlcnR5OiAkZGVmaW5lUHJvcGVydHksCiAgICAgICAgLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykKICAgICAgICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcywKICAgICAgICAvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCiAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLAogICAgICAgIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCiAgICAgICAgZ2V0T3duUHJvcGVydHlOYW1lczogJGdldE93blByb3BlcnR5TmFtZXMsCiAgICAgICAgLy8gMTkuMS4yLjggT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhPKQogICAgICAgIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9scwogICAgICB9KTsgLy8gQ2hyb21lIDM4IGFuZCAzOSBgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc2AgZmFpbHMgb24gcHJpbWl0aXZlcwogICAgICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zNDQzCgogICAgICB2YXIgRkFJTFNfT05fUFJJTUlUSVZFUyA9ICRmYWlscyhmdW5jdGlvbiAoKSB7CiAgICAgICAgJEdPUFMuZigxKTsKICAgICAgfSk7CiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogRkFJTFNfT05fUFJJTUlUSVZFUywgJ09iamVjdCcsIHsKICAgICAgICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhpdCkgewogICAgICAgICAgcmV0dXJuICRHT1BTLmYodG9PYmplY3QoaXQpKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyAyNC4zLjIgSlNPTi5zdHJpbmdpZnkodmFsdWUgWywgcmVwbGFjZXIgWywgc3BhY2VdXSkKCiAgICAgICRKU09OICYmICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKCFVU0VfTkFUSVZFIHx8ICRmYWlscyhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIFMgPSAkU3ltYm9sKCk7IC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9CiAgICAgICAgLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsCiAgICAgICAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKCiAgICAgICAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHsKICAgICAgICAgIGE6IFMKICAgICAgICB9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nOwogICAgICB9KSksICdKU09OJywgewogICAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KSB7CiAgICAgICAgICB2YXIgYXJncyA9IFtpdF07CiAgICAgICAgICB2YXIgaSA9IDE7CiAgICAgICAgICB2YXIgcmVwbGFjZXIsICRyZXBsYWNlcjsKCiAgICAgICAgICB3aGlsZSAoYXJndW1lbnRzLmxlbmd0aCA+IGkpIHsKICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTsKICAgICAgICAgIH0KCiAgICAgICAgICAkcmVwbGFjZXIgPSByZXBsYWNlciA9IGFyZ3NbMV07CiAgICAgICAgICBpZiAoIWlzT2JqZWN0KHJlcGxhY2VyKSAmJiBpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSkgcmV0dXJuOyAvLyBJRTggcmV0dXJucyBzdHJpbmcgb24gdW5kZWZpbmVkCgogICAgICAgICAgaWYgKCFpc0FycmF5KHJlcGxhY2VyKSkgcmVwbGFjZXIgPSBmdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgJHJlcGxhY2VyID09ICdmdW5jdGlvbicpIHZhbHVlID0gJHJlcGxhY2VyLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIGlmICghaXNTeW1ib2wodmFsdWUpKSByZXR1cm4gdmFsdWU7CiAgICAgICAgICB9OwogICAgICAgICAgYXJnc1sxXSA9IHJlcGxhY2VyOwogICAgICAgICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpOwogICAgICAgIH0KICAgICAgfSk7IC8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludCkKCiAgICAgICRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IF9fd2VicGFja19yZXF1aXJlX18oMTEpKCRTeW1ib2xbUFJPVE9UWVBFXSwgVE9fUFJJTUlUSVZFLCAkU3ltYm9sW1BST1RPVFlQRV0udmFsdWVPZik7IC8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10KCiAgICAgIHNldFRvU3RyaW5nVGFnKCRTeW1ib2wsICdTeW1ib2wnKTsgLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXQoKICAgICAgc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTsgLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ10KCiAgICAgIHNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCAnSlNPTicsIHRydWUpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEzMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBNRVRBID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkoJ21ldGEnKTsKCiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIHNldERlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLmY7CgogICAgICB2YXIgaWQgPSAwOwoKICAgICAgdmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9OwoKICAgICAgdmFyIEZSRUVaRSA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTsKICAgICAgfSk7CgogICAgICB2YXIgc2V0TWV0YSA9IGZ1bmN0aW9uIHNldE1ldGEoaXQpIHsKICAgICAgICBzZXREZXNjKGl0LCBNRVRBLCB7CiAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICBpOiAnTycgKyArK2lkLAogICAgICAgICAgICAvLyBvYmplY3QgSUQKICAgICAgICAgICAgdzoge30gLy8gd2VhayBjb2xsZWN0aW9ucyBJRHMKCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgZmFzdEtleSA9IGZ1bmN0aW9uIGZhc3RLZXkoaXQsIGNyZWF0ZSkgewogICAgICAgIC8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXgKICAgICAgICBpZiAoIWlzT2JqZWN0KGl0KSkgcmV0dXJuIF90eXBlb2Y0KGl0KSA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDsKCiAgICAgICAgaWYgKCFoYXMoaXQsIE1FVEEpKSB7CiAgICAgICAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAogICAgICAgICAgaWYgKCFpc0V4dGVuc2libGUoaXQpKSByZXR1cm4gJ0YnOyAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQoKICAgICAgICAgIGlmICghY3JlYXRlKSByZXR1cm4gJ0UnOyAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQoKICAgICAgICAgIHNldE1ldGEoaXQpOyAvLyByZXR1cm4gb2JqZWN0IElECiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXRbTUVUQV0uaTsKICAgICAgfTsKCiAgICAgIHZhciBnZXRXZWFrID0gZnVuY3Rpb24gZ2V0V2VhayhpdCwgY3JlYXRlKSB7CiAgICAgICAgaWYgKCFoYXMoaXQsIE1FVEEpKSB7CiAgICAgICAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAogICAgICAgICAgaWYgKCFpc0V4dGVuc2libGUoaXQpKSByZXR1cm4gdHJ1ZTsgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKCiAgICAgICAgICBpZiAoIWNyZWF0ZSkgcmV0dXJuIGZhbHNlOyAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQoKICAgICAgICAgIHNldE1ldGEoaXQpOyAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEcwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGl0W01FVEFdLnc7CiAgICAgIH07IC8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZwoKCiAgICAgIHZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uIG9uRnJlZXplKGl0KSB7CiAgICAgICAgaWYgKEZSRUVaRSAmJiBtZXRhLk5FRUQgJiYgaXNFeHRlbnNpYmxlKGl0KSAmJiAhaGFzKGl0LCBNRVRBKSkgc2V0TWV0YShpdCk7CiAgICAgICAgcmV0dXJuIGl0OwogICAgICB9OwoKICAgICAgdmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICBLRVk6IE1FVEEsCiAgICAgICAgTkVFRDogZmFsc2UsCiAgICAgICAgZmFzdEtleTogZmFzdEtleSwKICAgICAgICBnZXRXZWFrOiBnZXRXZWFrLAogICAgICAgIG9uRnJlZXplOiBvbkZyZWV6ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEzMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGFsbCBlbnVtZXJhYmxlIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBzeW1ib2xzCiAgICAgIHZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CgogICAgICB2YXIgZ09QUyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwoKICAgICAgdmFyIHBJRSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0S2V5cyhpdCk7CiAgICAgICAgdmFyIGdldFN5bWJvbHMgPSBnT1BTLmY7CgogICAgICAgIGlmIChnZXRTeW1ib2xzKSB7CiAgICAgICAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpOwogICAgICAgICAgdmFyIGlzRW51bSA9IHBJRS5mOwogICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgdmFyIGtleTsKCiAgICAgICAgICB3aGlsZSAoc3ltYm9scy5sZW5ndGggPiBpKSB7CiAgICAgICAgICAgIGlmIChpc0VudW0uY2FsbChpdCwga2V5ID0gc3ltYm9sc1tpKytdKSkgcmVzdWx0LnB1c2goa2V5KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEzMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpCiAgICAgIHZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZykgewogICAgICAgIHJldHVybiBjb2YoYXJnKSA9PSAnQXJyYXknOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMzMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93CiAgICAgIHZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKCiAgICAgIHZhciBnT1BOID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCkuZjsKCiAgICAgIHZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwogICAgICB2YXIgd2luZG93TmFtZXMgPSAodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Y0KHdpbmRvdykpID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTsKCiAgICAgIHZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uIGdldFdpbmRvd05hbWVzKGl0KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBnT1BOKGl0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCkgewogICAgICAgIHJldHVybiB3aW5kb3dOYW1lcyAmJiB0b1N0cmluZy5jYWxsKGl0KSA9PSAnW29iamVjdCBXaW5kb3ddJyA/IGdldFdpbmRvd05hbWVzKGl0KSA6IGdPUE4odG9JT2JqZWN0KGl0KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEzNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNDYpKCdhc3luY0l0ZXJhdG9yJyk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEzNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNDYpKCdvYnNlcnZhYmxlJyk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEzNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxMzcpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMzcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LnNldFByb3RvdHlwZU9mOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEzOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0JywgewogICAgICAgIHNldFByb3RvdHlwZU9mOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSkuc2V0CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEzOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLgoKICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soTywgcHJvdG8pIHsKICAgICAgICBhbk9iamVjdChPKTsKICAgICAgICBpZiAoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCkgdGhyb3cgVHlwZUVycm9yKHByb3RvICsgIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKTsKICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICBmdW5jdGlvbiAodGVzdCwgYnVnZ3ksIHNldCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykoRnVuY3Rpb24uY2FsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyg2OSkuZihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTsKICAgICAgICAgICAgc2V0KHRlc3QsIFtdKTsKICAgICAgICAgICAgYnVnZ3kgPSAhKHRlc3QgaW5zdGFuY2VvZiBBcnJheSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGJ1Z2d5ID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pIHsKICAgICAgICAgICAgY2hlY2soTywgcHJvdG8pOwogICAgICAgICAgICBpZiAoYnVnZ3kpIE8uX19wcm90b19fID0gcHJvdG87ZWxzZSBzZXQoTywgcHJvdG8pOwogICAgICAgICAgICByZXR1cm4gTzsKICAgICAgICAgIH07CiAgICAgICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSwKICAgICAgICBjaGVjazogY2hlY2sKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTQxKSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpOwoKICAgICAgdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlKFAsIEQpIHsKICAgICAgICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE0MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsgLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCgoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7CiAgICAgICAgY3JlYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KQogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX0ZsaXBNb3ZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDQpOwoKICAgICAgdmFyIF9GbGlwTW92ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GbGlwTW92ZSk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IF9GbGlwTW92ZTJbImRlZmF1bHQiXTsKICAgICAgLyoqCiAgICAgICAqIFJlYWN0IEZsaXAgTW92ZQogICAgICAgKiAoYykgMjAxNi1wcmVzZW50IEpvc2h1YSBDb21lYXUKICAgICAgICovCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsKICAgICAgICAgIHZhciBfYXJyID0gW107CiAgICAgICAgICB2YXIgX24gPSB0cnVlOwogICAgICAgICAgdmFyIF9kID0gZmFsc2U7CiAgICAgICAgICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICAgICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICAgICAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9kID0gdHJ1ZTsKICAgICAgICAgICAgX2UgPSBlcnI7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdKSBfaVsicmV0dXJuIl0oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9hcnI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgewogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgICAgICAgICByZXR1cm4gYXJyOwogICAgICAgICAgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsKICAgICAgICAgICAgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KCk7CgogICAgICB2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgfTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICAgICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgICAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICAgICAgICB9OwogICAgICB9KCk7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpOwoKICAgICAgdmFyIF9wcm9wQ29udmVydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpOwoKICAgICAgdmFyIF9wcm9wQ29udmVydGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BDb252ZXJ0ZXIpOwoKICAgICAgdmFyIF9kb21NYW5pcHVsYXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSk7CgogICAgICB2YXIgX2hlbHBlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICAgICAgICBpZiAoIXNlbGYpIHsKICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY2FsbCAmJiAoX3R5cGVvZjQoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICAgICAgICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgX3R5cGVvZjQoc3VwZXJDbGFzcykpOwogICAgICAgIH0KCiAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBSZWFjdCBGbGlwIE1vdmUKICAgICAgICogKGMpIDIwMTYtcHJlc2VudCBKb3NodWEgQ29tZWF1CiAgICAgICAqCiAgICAgICAqIEZvciBpbmZvcm1hdGlvbiBvbiBob3cgdGhpcyBjb2RlIGlzIGxhaWQgb3V0LCBjaGVjayBvdXQgQ09ERV9UT1VSLm1kCiAgICAgICAqLwoKICAgICAgLyogZXNsaW50LWRpc2FibGUgcmVhY3QvcHJvcC10eXBlcyAqLwoKCiAgICAgIHZhciB0cmFuc2l0aW9uRW5kID0gKDAsIF9kb21NYW5pcHVsYXRpb24ud2hpY2hUcmFuc2l0aW9uRXZlbnQpKCk7CiAgICAgIHZhciBub0Jyb3dzZXJTdXBwb3J0ID0gIXRyYW5zaXRpb25FbmQ7CgogICAgICBmdW5jdGlvbiBnZXRLZXkoY2hpbGREYXRhKSB7CiAgICAgICAgcmV0dXJuIGNoaWxkRGF0YS5rZXkgfHwgJyc7CiAgICAgIH0KCiAgICAgIHZhciBGbGlwTW92ZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgICAgICAgX2luaGVyaXRzKEZsaXBNb3ZlLCBfQ29tcG9uZW50KTsKCiAgICAgICAgZnVuY3Rpb24gRmxpcE1vdmUoKSB7CiAgICAgICAgICB2YXIgX3JlZjsKCiAgICAgICAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0OwoKICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGbGlwTW92ZSk7CgogICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfcmVmID0gRmxpcE1vdmUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGbGlwTW92ZSkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICBjaGlsZHJlbjogX3JlYWN0LkNoaWxkcmVuLnRvQXJyYXkoX3RoaXMucHJvcHMuY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgZWxlbWVudCwgewogICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgIGFwcGVhcmluZzogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgICAgfSwgX3RoaXMuY2hpbGRyZW5EYXRhID0ge30sIF90aGlzLnBhcmVudERhdGEgPSB7CiAgICAgICAgICAgIGRvbU5vZGU6IG51bGwsCiAgICAgICAgICAgIGJvdW5kaW5nQm94OiBudWxsCiAgICAgICAgICB9LCBfdGhpcy5oZWlnaHRQbGFjZWhvbGRlckRhdGEgPSB7CiAgICAgICAgICAgIGRvbU5vZGU6IG51bGwKICAgICAgICAgIH0sIF90aGlzLnJlbWFpbmluZ0FuaW1hdGlvbnMgPSAwLCBfdGhpcy5jaGlsZHJlblRvQW5pbWF0ZSA9IFtdLCBfdGhpcy5ydW5BbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBkeW5hbWljQ2hpbGRyZW4gPSBfdGhpcy5zdGF0ZS5jaGlsZHJlbi5maWx0ZXIoX3RoaXMuZG9lc0NoaWxkTmVlZFRvQmVBbmltYXRlZCk7CgogICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIG4pIHsKICAgICAgICAgICAgICBfdGhpcy5yZW1haW5pbmdBbmltYXRpb25zICs9IDE7CgogICAgICAgICAgICAgIF90aGlzLmNoaWxkcmVuVG9BbmltYXRlLnB1c2goZ2V0S2V5KGNoaWxkKSk7CgogICAgICAgICAgICAgIF90aGlzLmFuaW1hdGVDaGlsZChjaGlsZCwgbik7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5wcm9wcy5vblN0YXJ0QWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgX3RoaXMuY2FsbENoaWxkcmVuSG9vayhfdGhpcy5wcm9wcy5vblN0YXJ0QWxsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX3RoaXMuZG9lc0NoaWxkTmVlZFRvQmVBbmltYXRlZCA9IGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAvLyBJZiB0aGUgY2hpbGQgZG9lc24ndCBoYXZlIGEga2V5LCBpdCdzIGFuIGltbW92YWJsZSBjaGlsZCAob25lIHRoYXQgd2UKICAgICAgICAgICAgLy8gZG8gbm90IHdhbnQgdG8gZG8gRkxJUCBzdHVmZiB0by4pCiAgICAgICAgICAgIGlmICghZ2V0S2V5KGNoaWxkKSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNoaWxkRGF0YSA9IF90aGlzLmdldENoaWxkRGF0YShnZXRLZXkoY2hpbGQpKTsKCiAgICAgICAgICAgIHZhciBjaGlsZERvbU5vZGUgPSBjaGlsZERhdGEuZG9tTm9kZTsKICAgICAgICAgICAgdmFyIGNoaWxkQm91bmRpbmdCb3ggPSBjaGlsZERhdGEuYm91bmRpbmdCb3g7CiAgICAgICAgICAgIHZhciBwYXJlbnRCb3VuZGluZ0JveCA9IF90aGlzLnBhcmVudERhdGEuYm91bmRpbmdCb3g7CgogICAgICAgICAgICBpZiAoIWNoaWxkRG9tTm9kZSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICAgICAgICBhcHBlYXJBbmltYXRpb24gPSBfdGhpcyRwcm9wcy5hcHBlYXJBbmltYXRpb24sCiAgICAgICAgICAgICAgICBlbnRlckFuaW1hdGlvbiA9IF90aGlzJHByb3BzLmVudGVyQW5pbWF0aW9uLAogICAgICAgICAgICAgICAgbGVhdmVBbmltYXRpb24gPSBfdGhpcyRwcm9wcy5sZWF2ZUFuaW1hdGlvbiwKICAgICAgICAgICAgICAgIGdldFBvc2l0aW9uID0gX3RoaXMkcHJvcHMuZ2V0UG9zaXRpb247CiAgICAgICAgICAgIHZhciBpc0FwcGVhcmluZ1dpdGhBbmltYXRpb24gPSBjaGlsZC5hcHBlYXJpbmcgJiYgYXBwZWFyQW5pbWF0aW9uOwogICAgICAgICAgICB2YXIgaXNFbnRlcmluZ1dpdGhBbmltYXRpb24gPSBjaGlsZC5lbnRlcmluZyAmJiBlbnRlckFuaW1hdGlvbjsKICAgICAgICAgICAgdmFyIGlzTGVhdmluZ1dpdGhBbmltYXRpb24gPSBjaGlsZC5sZWF2aW5nICYmIGxlYXZlQW5pbWF0aW9uOwoKICAgICAgICAgICAgaWYgKGlzQXBwZWFyaW5nV2l0aEFuaW1hdGlvbiB8fCBpc0VudGVyaW5nV2l0aEFuaW1hdGlvbiB8fCBpc0xlYXZpbmdXaXRoQW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gLy8gSWYgaXQgaXNuJ3QgZW50ZXJpbmcvbGVhdmluZywgd2Ugd2FudCB0byBhbmltYXRlIGl0IGlmIGl0J3MKICAgICAgICAgICAgLy8gb24tc2NyZWVuIHBvc2l0aW9uIGhhcyBjaGFuZ2VkLgoKCiAgICAgICAgICAgIHZhciBfZ2V0UG9zaXRpb25EZWx0YSA9ICgwLCBfZG9tTWFuaXB1bGF0aW9uLmdldFBvc2l0aW9uRGVsdGEpKHsKICAgICAgICAgICAgICBjaGlsZERvbU5vZGU6IGNoaWxkRG9tTm9kZSwKICAgICAgICAgICAgICBjaGlsZEJvdW5kaW5nQm94OiBjaGlsZEJvdW5kaW5nQm94LAogICAgICAgICAgICAgIHBhcmVudEJvdW5kaW5nQm94OiBwYXJlbnRCb3VuZGluZ0JveCwKICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogZ2V0UG9zaXRpb24KICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBfZ2V0UG9zaXRpb25EZWx0YTIgPSBfc2xpY2VkVG9BcnJheShfZ2V0UG9zaXRpb25EZWx0YSwgMiksCiAgICAgICAgICAgICAgICBkWCA9IF9nZXRQb3NpdGlvbkRlbHRhMlswXSwKICAgICAgICAgICAgICAgIGRZID0gX2dldFBvc2l0aW9uRGVsdGEyWzFdOwoKICAgICAgICAgICAgcmV0dXJuIGRYICE9PSAwIHx8IGRZICE9PSAwOwogICAgICAgICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7CiAgICAgICAgfSAvLyBDb3B5IHByb3BzLmNoaWxkcmVuIGludG8gc3RhdGUuCiAgICAgICAgLy8gVG8gdW5kZXJzdGFuZCB3aHkgdGhpcyBpcyBpbXBvcnRhbnQgKGFuZCBub3QgYW4gYW50aS1wYXR0ZXJuKSwgY29uc2lkZXIKICAgICAgICAvLyBob3cgImxlYXZlIiBhbmltYXRpb25zIHdvcmsuIEFuIGl0ZW0gaGFzICJsZWZ0IiB3aGVuIHRoZSBjb21wb25lbnQKICAgICAgICAvLyByZWNlaXZlcyBhIG5ldyBzZXQgb2YgcHJvcHMgdGhhdCBkbyBOT1QgY29udGFpbiB0aGUgaXRlbS4KICAgICAgICAvLyBJZiB3ZSBqdXN0IHJlbmRlciB0aGUgcHJvcHMgYXMtaXMsIHRoZSBpdGVtIHdvdWxkIGluc3RhbnRseSBkaXNhcHBlYXIuCiAgICAgICAgLy8gV2Ugd2FudCB0byBrZWVwIHRoZSBpdGVtIHJlbmRlcmVkIGZvciBhIGxpdHRsZSB3aGlsZSwgdW50aWwgaXRzIGFuaW1hdGlvbgogICAgICAgIC8vIGNhbiBjb21wbGV0ZS4gQmVjYXVzZSB3ZSBjYW5ub3QgbXV0YXRlIHByb3BzLCB3ZSBtYWtlIGBzdGF0ZWAgdGhlIHNvdXJjZQogICAgICAgIC8vIG9mIHRydXRoLgogICAgICAgIC8vIEZsaXBNb3ZlIG5lZWRzIHRvIGtub3cgcXVpdGUgYSBiaXQgYWJvdXQgaXRzIGNoaWxkcmVuIGluIG9yZGVyIHRvIGRvCiAgICAgICAgLy8gaXRzIGpvYi4gV2Ugc3RvcmUgdGhlc2UgYXMgYSBwcm9wZXJ0eSBvbiB0aGUgaW5zdGFuY2UuIFdlJ3JlIG5vdCB1c2luZwogICAgICAgIC8vIHN0YXRlLCBiZWNhdXNlIHdlIGRvbid0IHdhbnQgY2hhbmdlcyB0byB0cmlnZ2VyIHJlLXJlbmRlcnMsIHdlIGp1c3QKICAgICAgICAvLyBuZWVkIGEgcGxhY2UgdG8ga2VlcCB0aGUgZGF0YSBmb3IgcmVmZXJlbmNlLCB3aGVuIGNoYW5nZXMgaGFwcGVuLgogICAgICAgIC8vIFRoaXMgZmllbGQgc2hvdWxkIG5vdCBiZSBhY2Nlc3NlZCBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIGdldENoaWxkRGF0YSwKICAgICAgICAvLyBwdXRDaGlsZERhdGEsIGV0Yy4uLgogICAgICAgIC8vIFNpbWlsYXJseSwgdHJhY2sgdGhlIGRvbSBub2RlIGFuZCBib3ggb2Ygb3VyIHBhcmVudCBlbGVtZW50LgogICAgICAgIC8vIElmIGBtYWludGFpbkNvbnRhaW5lckhlaWdodGAgcHJvcCBpcyBzZXQgdG8gdHJ1ZSwgd2UnbGwgY3JlYXRlIGEKICAgICAgICAvLyBwbGFjZWhvbGRlciBlbGVtZW50IHdoaWNoIG9jY3VwaWVzIHNwYWNlIHNvIHRoYXQgdGhlIHBhcmVudCBoZWlnaHQKICAgICAgICAvLyBkb2Vzbid0IGNoYW5nZSB3aGVuIGl0ZW1zIGFyZSByZW1vdmVkIGZyb20gdGhlIGRvY3VtZW50IGZsb3cgKHdoaWNoCiAgICAgICAgLy8gaGFwcGVucyBkdXJpbmcgbGVhdmUgYW5pbWF0aW9ucykKICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHJlbWFpbmluZyBhbmltYXRpb25zIHNvIHdlIGtub3cgd2hlbiB0byBmaXJlIHRoZQogICAgICAgIC8vIGFsbC1maW5pc2hlZCBjYWxsYmFjaywgYW5kIGNsZWFuIHVwIGFmdGVyIG91cnNlbHZlcy4KICAgICAgICAvLyBOT1RFOiB3ZSBjYW4ndCBzaW1wbHkgdXNlIGNoaWxkcmVuVG9BbmltYXRlLmxlbmd0aCB0byB0cmFjayByZW1haW5pbmcKICAgICAgICAvLyBhbmltYXRpb25zLCBiZWNhdXNlIHdlIG5lZWQgdG8gbWFpbnRhaW4gdGhlIGxpc3Qgb2YgYW5pbWF0aW5nIGNoaWxkcmVuLAogICAgICAgIC8vIHRvIHBhc3MgdG8gdGhlIGBvbkZpbmlzaEFsbGAgaGFuZGxlci4KCgogICAgICAgIF9jcmVhdGVDbGFzcyhGbGlwTW92ZSwgW3sKICAgICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgICAgICAgLy8gUnVuIG91ciBgYXBwZWFyQW5pbWF0aW9uYCBpZiBpdCB3YXMgcmVxdWVzdGVkLCByaWdodCBhZnRlciB0aGUKICAgICAgICAgICAgLy8gY29tcG9uZW50IG1vdW50cy4KICAgICAgICAgICAgdmFyIHNob3VsZFRyaWdnZXJGTElQID0gdGhpcy5wcm9wcy5hcHBlYXJBbmltYXRpb24gJiYgIXRoaXMuaXNBbmltYXRpb25EaXNhYmxlZCh0aGlzLnByb3BzKTsKCiAgICAgICAgICAgIGlmIChzaG91bGRUcmlnZ2VyRkxJUCkgewogICAgICAgICAgICAgIHRoaXMucHJlcEZvckFuaW1hdGlvbigpOwogICAgICAgICAgICAgIHRoaXMucnVuQW5pbWF0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykgewogICAgICAgICAgICAvLyBXaGVuIHRoZSBjb21wb25lbnQgaXMgaGFuZGVkIG5ldyBwcm9wcywgd2UgbmVlZCB0byBmaWd1cmUgb3V0IHRoZQogICAgICAgICAgICAvLyAicmVzdGluZyIgcG9zaXRpb24gb2YgYWxsIGN1cnJlbnRseS1yZW5kZXJlZCBET00gbm9kZXMuCiAgICAgICAgICAgIC8vIFdlIHN0b3JlIHRoYXQgZGF0YSBpbiB0aGlzLnBhcmVudCBhbmQgdGhpcy5jaGlsZHJlbiwKICAgICAgICAgICAgLy8gc28gaXQgY2FuIGJlIHVzZWQgbGF0ZXIgdG8gd29yayBvdXQgdGhlIGFuaW1hdGlvbi4KICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ0JveENhY2hlcygpOyAvLyBDb252ZXJ0IG9wYXF1ZSBjaGlsZHJlbiBvYmplY3QgdG8gYXJyYXkuCgogICAgICAgICAgICB2YXIgbmV4dENoaWxkcmVuID0gX3JlYWN0LkNoaWxkcmVuLnRvQXJyYXkobmV4dFByb3BzLmNoaWxkcmVuKTsgLy8gTmV4dCwgd2UgbmVlZCB0byB1cGRhdGUgb3VyIHN0YXRlLCBzbyB0aGF0IGl0IGNvbnRhaW5zIG91ciBuZXcgc2V0IG9mCiAgICAgICAgICAgIC8vIGNoaWxkcmVuLiBJZiBhbmltYXRpb24gaXMgZGlzYWJsZWQgb3IgdW5zdXBwb3J0ZWQsIHRoaXMgaXMgZWFzeTsKICAgICAgICAgICAgLy8gd2UganVzdCBjb3B5IG91ciBwcm9wcyBpbnRvIHN0YXRlLgogICAgICAgICAgICAvLyBBc3N1bWluZyB0aGF0IHdlIGNhbiBhbmltYXRlLCB0aG91Z2gsIHdlIGhhdmUgdG8gZG8gc29tZSB3b3JrLgogICAgICAgICAgICAvLyBFc3NlbnRpYWxseSwgd2Ugd2FudCB0byBrZWVwIGp1c3QtZGVsZXRlZCBub2RlcyBpbiB0aGUgRE9NIGZvciBhIGJpdAogICAgICAgICAgICAvLyBsb25nZXIsIHNvIHRoYXQgd2UgY2FuIGFuaW1hdGUgdGhlbSBhd2F5LgoKCiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGNoaWxkcmVuOiB0aGlzLmlzQW5pbWF0aW9uRGlzYWJsZWQobmV4dFByb3BzKSA/IG5leHRDaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgZWxlbWVudCwgewogICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSA6IHRoaXMuY2FsY3VsYXRlTmV4dFNldE9mQ2hpbGRyZW4obmV4dENoaWxkcmVuKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2aW91c1Byb3BzKSB7CiAgICAgICAgICAgIC8vIElmIHRoZSBjaGlsZHJlbiBoYXZlIGJlZW4gcmUtYXJyYW5nZWQsIG1vdmVkLCBvciBhZGRlZC9yZW1vdmVkLAogICAgICAgICAgICAvLyB0cmlnZ2VyIHRoZSBtYWluIEZMSVAgYW5pbWF0aW9uLgogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyBJTVBPUlRBTlQ6IFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGNoaWxkcmVuIGhhdmUgYWN0dWFsbHkgY2hhbmdlZC4KICAgICAgICAgICAgLy8gQXQgdGhlIGVuZCBvZiB0aGUgdHJhbnNpdGlvbiwgd2UgY2xlYW4gdXAgbm9kZXMgdGhhdCBuZWVkIHRvIGJlIHJlbW92ZWQuCiAgICAgICAgICAgIHZhciBvbGRDaGlsZHJlbktleXMgPSBfcmVhY3QuQ2hpbGRyZW4udG9BcnJheSh0aGlzLnByb3BzLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5rZXk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIG5leHRDaGlsZHJlbktleXMgPSBfcmVhY3QuQ2hpbGRyZW4udG9BcnJheShwcmV2aW91c1Byb3BzLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5rZXk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIHNob3VsZFRyaWdnZXJGTElQID0gISgwLCBfaGVscGVycy5hcnJheXNFcXVhbCkob2xkQ2hpbGRyZW5LZXlzLCBuZXh0Q2hpbGRyZW5LZXlzKSAmJiAhdGhpcy5pc0FuaW1hdGlvbkRpc2FibGVkKHRoaXMucHJvcHMpOwoKICAgICAgICAgICAgaWYgKHNob3VsZFRyaWdnZXJGTElQKSB7CiAgICAgICAgICAgICAgdGhpcy5wcmVwRm9yQW5pbWF0aW9uKCk7CiAgICAgICAgICAgICAgdGhpcy5ydW5BbmltYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NhbGN1bGF0ZU5leHRTZXRPZkNoaWxkcmVuJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVOZXh0U2V0T2ZDaGlsZHJlbihuZXh0Q2hpbGRyZW4pIHsKICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7IC8vIFdlIHdhbnQgdG86CiAgICAgICAgICAgIC8vICAgLSBNYXJrIGFsbCBuZXcgY2hpbGRyZW4gYXMgYGVudGVyaW5nYAogICAgICAgICAgICAvLyAgIC0gUHVsbCBpbiBwcmV2aW91cyBjaGlsZHJlbiB0aGF0IGFyZW4ndCBpbiBuZXh0Q2hpbGRyZW4sIGFuZCBtYXJrIHRoZW0KICAgICAgICAgICAgLy8gICAgIGFzIGBsZWF2aW5nYAogICAgICAgICAgICAvLyAgIC0gUHJlc2VydmUgdGhlIG5leHRDaGlsZHJlbiBsaXN0IG9yZGVyLCB3aXRoIGxlYXZpbmcgY2hpbGRyZW4gaW4gdGhlaXIKICAgICAgICAgICAgLy8gICAgIGFwcHJvcHJpYXRlIHBsYWNlcy4KICAgICAgICAgICAgLy8KCgogICAgICAgICAgICB2YXIgdXBkYXRlZENoaWxkcmVuID0gbmV4dENoaWxkcmVuLm1hcChmdW5jdGlvbiAobmV4dENoaWxkKSB7CiAgICAgICAgICAgICAgdmFyIGNoaWxkID0gX3RoaXMyLmZpbmRDaGlsZEJ5S2V5KG5leHRDaGlsZC5rZXkgfHwgJycpOyAvLyBJZiB0aGUgY3VycmVudCBjaGlsZCBkaWQgZXhpc3QsIGJ1dCBpdCB3YXMgaW4gdGhlIG1pZHN0IG9mIGxlYXZpbmcsCiAgICAgICAgICAgICAgLy8gd2Ugd2FudCB0byB0cmVhdCBpdCBhcyB0aG91Z2ggaXQncyBlbnRlcmluZwoKCiAgICAgICAgICAgICAgdmFyIGlzRW50ZXJpbmcgPSAhY2hpbGQgfHwgY2hpbGQubGVhdmluZzsKICAgICAgICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIG5leHRDaGlsZCwgewogICAgICAgICAgICAgICAgZWxlbWVudDogbmV4dENoaWxkLAogICAgICAgICAgICAgICAgZW50ZXJpbmc6IGlzRW50ZXJpbmcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7IC8vIFRoaXMgaXMgdHJpY2t5LiBXZSB3YW50IHRvIGtlZXAgdGhlIG5leHRDaGlsZHJlbidzIG9yZGVyaW5nLCBidXQgd2l0aAogICAgICAgICAgICAvLyBhbnkganVzdC1yZW1vdmVkIGl0ZW1zIG1haW50YWluaW5nIHRoZWlyIG9yaWdpbmFsIHBvc2l0aW9uLgogICAgICAgICAgICAvLyBlZy4KICAgICAgICAgICAgLy8gICB0aGlzLnN0YXRlLmNoaWxkcmVuICA9IFsgMSwgMiwgMywgNCBdCiAgICAgICAgICAgIC8vICAgbmV4dENoaWxkcmVuICAgICAgICAgPSBbIDMsIDEgXQogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyBJbiB0aGlzIGV4YW1wbGUsIHdlJ3ZlIHJlbW92ZWQgdGhlICcyJyAmICc0JwogICAgICAgICAgICAvLyBXZSB3YW50IHRvIGVuZCB1cCB3aXRoOiAgWyAyLCAzLCAxLCA0IF0KICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gVG8gYWNjb21wbGlzaCB0aGF0LCB3ZSdsbCBpdGVyYXRlIHRocm91Z2ggdGhpcy5zdGF0ZS5jaGlsZHJlbi4gd2hlbmV2ZXIKICAgICAgICAgICAgLy8gd2UgZmluZCBhIG1hdGNoLCB3ZSdsbCBhcHBlbmQgb3VyIGBsZWF2aW5nYCBmbGFnIHRvIGl0LCBhbmQgaW5zZXJ0IGl0CiAgICAgICAgICAgIC8vIGludG8gdGhlIG5leHRDaGlsZHJlbiBpbiBpdHMgT1JJR0lOQUwgcG9zaXRpb24uIE5vdGUgdGhhdCwgYXMgd2Uga2VlcAogICAgICAgICAgICAvLyBpbnNlcnRpbmcgb2xkIGl0ZW1zIGludG8gdGhlIG5ldyBsaXN0LCB0aGUgIm9yaWdpbmFsIiBwb3NpdGlvbiB3aWxsCiAgICAgICAgICAgIC8vIGtlZXAgaW5jcmVtZW50aW5nLgoKICAgICAgICAgICAgdmFyIG51bU9mQ2hpbGRyZW5MZWF2aW5nID0gMDsKICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaW5kZXgpIHsKICAgICAgICAgICAgICB2YXIgaXNMZWF2aW5nID0gIW5leHRDaGlsZHJlbi5maW5kKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgICAgICAgdmFyIGtleSA9IF9yZWYyLmtleTsKICAgICAgICAgICAgICAgIHJldHVybiBrZXkgPT09IGdldEtleShjaGlsZCk7CiAgICAgICAgICAgICAgfSk7IC8vIElmIHRoZSBjaGlsZCBpc24ndCBsZWF2aW5nIChvciwgaWYgdGhlcmUgaXMgbm8gbGVhdmUgYW5pbWF0aW9uKSwKICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGFkZCBpdCBpbnRvIHRoZSBzdGF0ZSBjaGlsZHJlbi4KCiAgICAgICAgICAgICAgaWYgKCFpc0xlYXZpbmcgfHwgIV90aGlzMi5wcm9wcy5sZWF2ZUFuaW1hdGlvbikgcmV0dXJuOwoKICAgICAgICAgICAgICB2YXIgbmV4dENoaWxkID0gX2V4dGVuZHMoe30sIGNoaWxkLCB7CiAgICAgICAgICAgICAgICBsZWF2aW5nOiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHZhciBuZXh0Q2hpbGRJbmRleCA9IGluZGV4ICsgbnVtT2ZDaGlsZHJlbkxlYXZpbmc7CiAgICAgICAgICAgICAgdXBkYXRlZENoaWxkcmVuLnNwbGljZShuZXh0Q2hpbGRJbmRleCwgMCwgbmV4dENoaWxkKTsKICAgICAgICAgICAgICBudW1PZkNoaWxkcmVuTGVhdmluZyArPSAxOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRDaGlsZHJlbjsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdwcmVwRm9yQW5pbWF0aW9uJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwRm9yQW5pbWF0aW9uKCkgewogICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsgLy8gT3VyIGFuaW1hdGlvbiBwcmVwIGNvbnNpc3RzIG9mOgogICAgICAgICAgICAvLyAtIHJlbW92ZSBjaGlsZHJlbiB0aGF0IGFyZSBsZWF2aW5nIGZyb20gdGhlIERPTSBmbG93LCBzbyB0aGF0IHRoZSBuZXcKICAgICAgICAgICAgLy8gICBsYXlvdXQgY2FuIGJlIGFjY3VyYXRlbHkgY2FsY3VsYXRlZCwKICAgICAgICAgICAgLy8gLSB1cGRhdGUgdGhlIHBsYWNlaG9sZGVyIGNvbnRhaW5lciBoZWlnaHQsIGlmIG5lZWRlZCwgdG8gZW5zdXJlIHRoYXQKICAgICAgICAgICAgLy8gICB0aGUgcGFyZW50J3MgaGVpZ2h0IGRvZXNuJ3QgY29sbGFwc2UuCgoKICAgICAgICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbiA9IF9wcm9wcy5sZWF2ZUFuaW1hdGlvbiwKICAgICAgICAgICAgICAgIG1haW50YWluQ29udGFpbmVySGVpZ2h0ID0gX3Byb3BzLm1haW50YWluQ29udGFpbmVySGVpZ2h0LAogICAgICAgICAgICAgICAgZ2V0UG9zaXRpb24gPSBfcHJvcHMuZ2V0UG9zaXRpb247IC8vIHdlIG5lZWQgdG8gbWFrZSBhbGwgbGVhdmluZyBub2RlcyAiaW52aXNpYmxlIiB0byB0aGUgbGF5b3V0IGNhbGN1bGF0aW9ucwogICAgICAgICAgICAvLyB0aGF0IHdpbGwgdGFrZSBwbGFjZSBpbiB0aGUgbmV4dCBzdGVwICh0aGlzLnJ1bkFuaW1hdGlvbikuCgogICAgICAgICAgICBpZiAobGVhdmVBbmltYXRpb24pIHsKICAgICAgICAgICAgICB2YXIgbGVhdmluZ0NoaWxkcmVuID0gdGhpcy5zdGF0ZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQubGVhdmluZzsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBsZWF2aW5nQ2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAobGVhdmluZ0NoaWxkKSB7CiAgICAgICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gX3RoaXMzLmdldENoaWxkRGF0YShnZXRLZXkobGVhdmluZ0NoaWxkKSk7IC8vIFdlIG5lZWQgdG8gdGFrZSB0aGUgaXRlbXMgb3V0IG9mIHRoZSAiZmxvdyIgb2YgdGhlIGRvY3VtZW50LCBzbyB0aGF0CiAgICAgICAgICAgICAgICAvLyBpdHMgc2libGluZ3MgY2FuIG1vdmUgdG8gdGFrZSBpdHMgcGxhY2UuCgoKICAgICAgICAgICAgICAgIGlmIChjaGlsZERhdGEuYm91bmRpbmdCb3gpIHsKICAgICAgICAgICAgICAgICAgKDAsIF9kb21NYW5pcHVsYXRpb24ucmVtb3ZlTm9kZUZyb21ET01GbG93KShjaGlsZERhdGEsIF90aGlzMy5wcm9wcy52ZXJ0aWNhbEFsaWdubWVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmIChtYWludGFpbkNvbnRhaW5lckhlaWdodCAmJiB0aGlzLmhlaWdodFBsYWNlaG9sZGVyRGF0YS5kb21Ob2RlKSB7CiAgICAgICAgICAgICAgICAoMCwgX2RvbU1hbmlwdWxhdGlvbi51cGRhdGVIZWlnaHRQbGFjZWhvbGRlcikoewogICAgICAgICAgICAgICAgICBkb21Ob2RlOiB0aGlzLmhlaWdodFBsYWNlaG9sZGVyRGF0YS5kb21Ob2RlLAogICAgICAgICAgICAgICAgICBwYXJlbnREYXRhOiB0aGlzLnBhcmVudERhdGEsCiAgICAgICAgICAgICAgICAgIGdldFBvc2l0aW9uOiBnZXRQb3NpdGlvbgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IC8vIEZvciBhbGwgY2hpbGRyZW4gbm90IGluIHRoZSBtaWRkbGUgb2YgZW50ZXJpbmcgb3IgbGVhdmluZywKICAgICAgICAgICAgLy8gd2UgbmVlZCB0byByZXNldCB0aGUgdHJhbnNpdGlvbiwgc28gdGhhdCB0aGUgTkVXIHNodWZmbGUgc3RhcnRzIGZyb20KICAgICAgICAgICAgLy8gdGhlIHJpZ2h0IHBsYWNlLgoKCiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgICB2YXIgX2dldENoaWxkRGF0YSA9IF90aGlzMy5nZXRDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSksCiAgICAgICAgICAgICAgICAgIGRvbU5vZGUgPSBfZ2V0Q2hpbGREYXRhLmRvbU5vZGU7IC8vIElnbm9yZSBjaGlsZHJlbiB0aGF0IGRvbid0IHJlbmRlciBET00gbm9kZXMgKGVnLiBieSByZXR1cm5pbmcgbnVsbCkKCgogICAgICAgICAgICAgIGlmICghZG9tTm9kZSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCFjaGlsZC5lbnRlcmluZyAmJiAhY2hpbGQubGVhdmluZykgewogICAgICAgICAgICAgICAgKDAsIF9kb21NYW5pcHVsYXRpb24uYXBwbHlTdHlsZXNUb0RPTU5vZGUpKHsKICAgICAgICAgICAgICAgICAgZG9tTm9kZTogZG9tTm9kZSwKICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJycKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdhbmltYXRlQ2hpbGQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGVDaGlsZChjaGlsZCwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX2dldENoaWxkRGF0YTIgPSB0aGlzLmdldENoaWxkRGF0YShnZXRLZXkoY2hpbGQpKSwKICAgICAgICAgICAgICAgIGRvbU5vZGUgPSBfZ2V0Q2hpbGREYXRhMi5kb21Ob2RlOwoKICAgICAgICAgICAgaWYgKCFkb21Ob2RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IC8vIEFwcGx5IHRoZSByZWxldmFudCBzdHlsZSBmb3IgdGhpcyBET00gbm9kZQogICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBvZmZzZXQgZnJvbSBpdHMgYWN0dWFsIERPTSBwb3NpdGlvbi4KICAgICAgICAgICAgLy8gZWcuIGlmIGFuIGl0ZW0gaGFzIGJlZW4gcmUtcmVuZGVyZWQgMjBweCBsb3dlciwgd2Ugd2FudCB0byBhcHBseSBhCiAgICAgICAgICAgIC8vIHN0eWxlIG9mICd0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMjBweCknLCBzbyB0aGF0IGl0IGFwcGVhcnMgdG8gYmUgd2hlcmUKICAgICAgICAgICAgLy8gaXQgc3RhcnRlZC4KICAgICAgICAgICAgLy8gSW4gRkxJUCB0ZXJtaW5vbG9neSwgdGhpcyBpcyB0aGUgJ0ludmVydCcgc3RhZ2UuCgoKICAgICAgICAgICAgKDAsIF9kb21NYW5pcHVsYXRpb24uYXBwbHlTdHlsZXNUb0RPTU5vZGUpKHsKICAgICAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlLAogICAgICAgICAgICAgIHN0eWxlczogdGhpcy5jb21wdXRlSW5pdGlhbFN0eWxlcyhjaGlsZCkKICAgICAgICAgICAgfSk7IC8vIFN0YXJ0IGJ5IGludm9raW5nIHRoZSBvblN0YXJ0IGNhbGxiYWNrIGZvciB0aGlzIGNoaWxkLgoKICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25TdGFydCkgdGhpcy5wcm9wcy5vblN0YXJ0KGNoaWxkLCBkb21Ob2RlKTsgLy8gTmV4dCwgYW5pbWF0ZSB0aGUgaXRlbSBmcm9tIGl0J3MgYXJ0aWZpY2lhbGx5LW9mZnNldCBwb3NpdGlvbiB0byBpdHMKICAgICAgICAgICAgLy8gbmV3LCBuYXR1cmFsIHBvc2l0aW9uLgoKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gTk9URSwgUkU6IHRoZSBkb3VibGUtcmVxdWVzdEFuaW1hdGlvbkZyYW1lOgogICAgICAgICAgICAgICAgLy8gU2FkbHksIHRoaXMgaXMgdGhlIG1vc3QgYnJvd3Nlci1jb21wYXRpYmxlIHdheSB0byBkbyB0aGlzIEkndmUgZm91bmQuCiAgICAgICAgICAgICAgICAvLyBFc3NlbnRpYWxseSB3ZSBuZWVkIHRvIHNldCB0aGUgaW5pdGlhbCBzdHlsZXMgb3V0c2lkZSBvZiBhbnkgcmVxdWVzdAogICAgICAgICAgICAgICAgLy8gY2FsbGJhY2tzIHRvIGF2b2lkIGJhdGNoaW5nIHRoZW0uIFRoZW4sIGEgZnJhbWUgbmVlZHMgdG8gcGFzcyB3aXRoCiAgICAgICAgICAgICAgICAvLyB0aGUgc3R5bGVzIGFib3ZlIHJlbmRlcmVkLiBUaGVuLCBvbiB0aGUgc2Vjb25kIGZyYW1lLCB3ZSBjYW4gYXBwbHkKICAgICAgICAgICAgICAgIC8vIG91ciBmaW5hbCBzdHlsZXMgdG8gcGVyZm9ybSB0aGUgYW5pbWF0aW9uLgogICAgICAgICAgICAgICAgLy8gT3VyIGZpcnN0IG9yZGVyIG9mIGJ1c2luZXNzIGlzIHRvICJ1bmRvIiB0aGUgc3R5bGVzIGFwcGxpZWQgaW4gdGhlCiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBmcmFtZXMsIHdoaWxlIGFsc28gYWRkaW5nIGEgYHRyYW5zaXRpb25gIHByb3BlcnR5LgogICAgICAgICAgICAgICAgLy8gVGhpcyB3YXksIHRoZSBpdGVtIHdpbGwgc21vb3RobHkgdHJhbnNpdGlvbiBmcm9tIGl0cyBvbGQgcG9zaXRpb24KICAgICAgICAgICAgICAgIC8vIHRvIGl0cyBuZXcgcG9zaXRpb24uCiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZmxvd3R5cGUvcmVxdWlyZS12YXJpYWJsZS10eXBlCiAgICAgICAgICAgICAgICB2YXIgc3R5bGVzID0gewogICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAoMCwgX2RvbU1hbmlwdWxhdGlvbi5jcmVhdGVUcmFuc2l0aW9uU3RyaW5nKShpbmRleCwgX3RoaXM0LnByb3BzKSwKICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnJywKICAgICAgICAgICAgICAgICAgb3BhY2l0eTogJycKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKGNoaWxkLmFwcGVhcmluZyAmJiBfdGhpczQucHJvcHMuYXBwZWFyQW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IF9leHRlbmRzKHt9LCBzdHlsZXMsIF90aGlzNC5wcm9wcy5hcHBlYXJBbmltYXRpb24udG8pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaGlsZC5lbnRlcmluZyAmJiBfdGhpczQucHJvcHMuZW50ZXJBbmltYXRpb24pIHsKICAgICAgICAgICAgICAgICAgc3R5bGVzID0gX2V4dGVuZHMoe30sIHN0eWxlcywgX3RoaXM0LnByb3BzLmVudGVyQW5pbWF0aW9uLnRvKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGQubGVhdmluZyAmJiBfdGhpczQucHJvcHMubGVhdmVBbmltYXRpb24pIHsKICAgICAgICAgICAgICAgICAgc3R5bGVzID0gX2V4dGVuZHMoe30sIHN0eWxlcywgX3RoaXM0LnByb3BzLmxlYXZlQW5pbWF0aW9uLnRvKTsKICAgICAgICAgICAgICAgIH0gLy8gSW4gRkxJUCB0ZXJtaW5vbG9neSwgdGhpcyBpcyB0aGUgJ1BsYXknIHN0YWdlLgoKCiAgICAgICAgICAgICAgICAoMCwgX2RvbU1hbmlwdWxhdGlvbi5hcHBseVN0eWxlc1RvRE9NTm9kZSkoewogICAgICAgICAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlLAogICAgICAgICAgICAgICAgICBzdHlsZXM6IHN0eWxlcwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmJpbmRUcmFuc2l0aW9uRW5kSGFuZGxlcihjaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnYmluZFRyYW5zaXRpb25FbmRIYW5kbGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kVHJhbnNpdGlvbkVuZEhhbmRsZXIoY2hpbGQpIHsKICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX2dldENoaWxkRGF0YTMgPSB0aGlzLmdldENoaWxkRGF0YShnZXRLZXkoY2hpbGQpKSwKICAgICAgICAgICAgICAgIGRvbU5vZGUgPSBfZ2V0Q2hpbGREYXRhMy5kb21Ob2RlOwoKICAgICAgICAgICAgaWYgKCFkb21Ob2RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IC8vIFRoZSBvbkZpbmlzaCBjYWxsYmFjayBuZWVkcyB0byBiZSBib3VuZCB0byB0aGUgdHJhbnNpdGlvbkVuZCBldmVudC4KICAgICAgICAgICAgLy8gV2UgYWxzbyBuZWVkIHRvIHVuYmluZCBpdCB3aGVuIHRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlcywgc28gdGhpcyB1Z2x5CiAgICAgICAgICAgIC8vIGlubGluZSBmdW5jdGlvbiBpcyByZXF1aXJlZCAod2UgbmVlZCBpdCBoZXJlIHNvIGl0IGNsb3NlcyBvdmVyCiAgICAgICAgICAgIC8vIGRlcGVuZGVudCB2YXJpYWJsZXMgYGNoaWxkYCBhbmQgYGRvbU5vZGVgKQoKCiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uRW5kSGFuZGxlciA9IGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRIYW5kbGVyKGV2KSB7CiAgICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoaXMgaGFuZGxlciBpcyBmaXJlZCBub3Qgb24gb3VyIHByaW1hcnkgdHJhbnNpdGlvbiwKICAgICAgICAgICAgICAvLyBidXQgb24gYSBuZXN0ZWQgdHJhbnNpdGlvbiAoZWcuIGEgaG92ZXIgZWZmZWN0KS4gSWdub3JlIHRoZXNlIGNhc2VzLgogICAgICAgICAgICAgIGlmIChldi50YXJnZXQgIT09IGRvbU5vZGUpIHJldHVybjsgLy8gUmVtb3ZlIHRoZSAndHJhbnNpdGlvbicgaW5saW5lIHN0eWxlIHdlIGFkZGVkLiBUaGlzIGlzIGNsZWFudXAuCgogICAgICAgICAgICAgIGRvbU5vZGUuc3R5bGUudHJhbnNpdGlvbiA9ICcnOyAvLyBUcmlnZ2VyIGFueSBhcHBsaWNhYmxlIG9uRmluaXNoL29uRmluaXNoQWxsIGhvb2tzCgogICAgICAgICAgICAgIF90aGlzNS50cmlnZ2VyRmluaXNoSG9va3MoY2hpbGQsIGRvbU5vZGUpOwoKICAgICAgICAgICAgICBkb21Ob2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCwgdHJhbnNpdGlvbkVuZEhhbmRsZXIpOwoKICAgICAgICAgICAgICBpZiAoY2hpbGQubGVhdmluZykgewogICAgICAgICAgICAgICAgX3RoaXM1LnJlbW92ZUNoaWxkRGF0YShnZXRLZXkoY2hpbGQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBkb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCwgdHJhbnNpdGlvbkVuZEhhbmRsZXIpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3RyaWdnZXJGaW5pc2hIb29rcycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlckZpbmlzaEhvb2tzKGNoaWxkLCBkb21Ob2RlKSB7CiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25GaW5pc2gpIHRoaXMucHJvcHMub25GaW5pc2goY2hpbGQsIGRvbU5vZGUpOyAvLyBSZWR1Y2UgdGhlIG51bWJlciBvZiBjaGlsZHJlbiB3ZSBuZWVkIHRvIGFuaW1hdGUgYnkgMSwKICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gdGVsbCB3aGVuIGFsbCBjaGlsZHJlbiBoYXZlIGZpbmlzaGVkLgoKICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdBbmltYXRpb25zIC09IDE7CgogICAgICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdBbmltYXRpb25zID09PSAwKSB7CiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGFueSBpdGVtcyBmcm9tIHRoZSBET00gdGhhdCBoYXZlIGxlZnQsIGFuZCByZXNldCBgZW50ZXJpbmdgLgogICAgICAgICAgICAgIHZhciBuZXh0Q2hpbGRyZW4gPSB0aGlzLnN0YXRlLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgICAgICAgIHZhciBsZWF2aW5nID0gX3JlZjMubGVhdmluZzsKICAgICAgICAgICAgICAgIHJldHVybiAhbGVhdmluZzsKICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgaXRlbSwgewogICAgICAgICAgICAgICAgICBhcHBlYXJpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBlbnRlcmluZzogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgY2hpbGRyZW46IG5leHRDaGlsZHJlbgogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXM2LnByb3BzLm9uRmluaXNoQWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5jYWxsQ2hpbGRyZW5Ib29rKF90aGlzNi5wcm9wcy5vbkZpbmlzaEFsbCk7CiAgICAgICAgICAgICAgICB9IC8vIFJlc2V0IG91ciB2YXJpYWJsZXMgZm9yIHRoZSBuZXh0IGl0ZXJhdGlvbgoKCiAgICAgICAgICAgICAgICBfdGhpczYuY2hpbGRyZW5Ub0FuaW1hdGUgPSBbXTsKICAgICAgICAgICAgICB9KTsgLy8gSWYgdGhlIHBsYWNlaG9sZGVyIHdhcyBob2xkaW5nIHRoZSBjb250YWluZXIgb3BlbiB3aGlsZSBlbGVtZW50cyB3ZXJlCiAgICAgICAgICAgICAgLy8gbGVhdmluZywgd2Ugd2UgY2FuIG5vdyBzZXQgaXRzIGhlaWdodCB0byB6ZXJvLgoKICAgICAgICAgICAgICBpZiAodGhpcy5oZWlnaHRQbGFjZWhvbGRlckRhdGEuZG9tTm9kZSkgewogICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRQbGFjZWhvbGRlckRhdGEuZG9tTm9kZS5zdHlsZS5oZWlnaHQgPSAnMCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY2FsbENoaWxkcmVuSG9vaycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsbENoaWxkcmVuSG9vayhob29rKSB7CiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gW107CiAgICAgICAgICAgIHZhciBkb21Ob2RlcyA9IFtdOwogICAgICAgICAgICB0aGlzLmNoaWxkcmVuVG9BbmltYXRlLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkS2V5KSB7CiAgICAgICAgICAgICAgLy8gSWYgdGhpcyB3YXMgYW4gZXhpdCBhbmltYXRpb24sIHRoZSBjaGlsZCBtYXkgbm8gbG9uZ2VyIGV4aXN0LgogICAgICAgICAgICAgIC8vIElmIHNvLCBza2lwIGl0LgogICAgICAgICAgICAgIHZhciBjaGlsZCA9IF90aGlzNy5maW5kQ2hpbGRCeUtleShjaGlsZEtleSk7CgogICAgICAgICAgICAgIGlmICghY2hpbGQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goY2hpbGQpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXM3Lmhhc0NoaWxkRGF0YShjaGlsZEtleSkpIHsKICAgICAgICAgICAgICAgIGRvbU5vZGVzLnB1c2goX3RoaXM3LmdldENoaWxkRGF0YShjaGlsZEtleSkuZG9tTm9kZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaG9vayhlbGVtZW50cywgZG9tTm9kZXMpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3VwZGF0ZUJvdW5kaW5nQm94Q2FjaGVzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVCb3VuZGluZ0JveENhY2hlcygpIHsKICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7IC8vIFRoaXMgaXMgdGhlIE9OTFkgcGxhY2UgdGhhdCBwYXJlbnREYXRhIGFuZCBjaGlsZHJlbkRhdGEncwogICAgICAgICAgICAvLyBib3VuZGluZyBib3hlcyBhcmUgdXBkYXRlZC4gVGhleSB3aWxsIGJlIGNhbGN1bGF0ZWQgYXQgb3RoZXIgdGltZXMKICAgICAgICAgICAgLy8gdG8gYmUgY29tcGFyZWQgdG8gdGhpcyB2YWx1ZSwgYnV0IGl0J3MgaW1wb3J0YW50IHRoYXQgdGhlIGNhY2hlIGlzCiAgICAgICAgICAgIC8vIHVwZGF0ZWQgb25jZSBwZXIgdXBkYXRlLgoKCiAgICAgICAgICAgIHZhciBwYXJlbnREb21Ob2RlID0gdGhpcy5wYXJlbnREYXRhLmRvbU5vZGU7CgogICAgICAgICAgICBpZiAoIXBhcmVudERvbU5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMucGFyZW50RGF0YS5ib3VuZGluZ0JveCA9IHRoaXMucHJvcHMuZ2V0UG9zaXRpb24ocGFyZW50RG9tTm9kZSk7CiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBnZXRLZXkoY2hpbGQpOyAvLyBJdCBpcyBwb3NzaWJsZSB0aGF0IGEgY2hpbGQgZG9lcyBub3QgaGF2ZSBhIGBrZXlgIHByb3BlcnR5OwogICAgICAgICAgICAgIC8vIElnbm9yZSB0aGVzZSBjaGlsZHJlbiwgdGhleSBkb24ndCBuZWVkIHRvIGJlIG1vdmVkLgoKICAgICAgICAgICAgICBpZiAoIWNoaWxkS2V5KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfSAvLyBJbiB2ZXJ5IHJhcmUgY2lyY3Vtc3RhbmNlcywgZm9yIHJlYXNvbnMgdW5rbm93biwgdGhlIHJlZiBpcyBuZXZlcgogICAgICAgICAgICAgIC8vIHBvcHVsYXRlZCBmb3IgY2VydGFpbiBjaGlsZHJlbi4gSW4gdGhpcyBjYXNlLCBhdm9pZCBkb2luZyB0aGlzIHVwZGF0ZS4KICAgICAgICAgICAgICAvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3Nod2NvbWVhdS9yZWFjdC1mbGlwLW1vdmUvcHVsbC85MQoKCiAgICAgICAgICAgICAgaWYgKCFfdGhpczguaGFzQ2hpbGREYXRhKGNoaWxkS2V5KSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIGNoaWxkRGF0YSA9IF90aGlzOC5nZXRDaGlsZERhdGEoY2hpbGRLZXkpOyAvLyBJZiB0aGUgY2hpbGQgZWxlbWVudCByZXR1cm5zIG51bGwsIHdlIG5lZWQgdG8gYXZvaWQgdHJ5aW5nIHRvCiAgICAgICAgICAgICAgLy8gYWNjb3VudCBmb3IgaXQKCgogICAgICAgICAgICAgIGlmICghY2hpbGREYXRhLmRvbU5vZGUgfHwgIWNoaWxkKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpczguc2V0Q2hpbGREYXRhKGNoaWxkS2V5LCB7CiAgICAgICAgICAgICAgICBib3VuZGluZ0JveDogKDAsIF9kb21NYW5pcHVsYXRpb24uZ2V0UmVsYXRpdmVCb3VuZGluZ0JveCkoewogICAgICAgICAgICAgICAgICBjaGlsZERvbU5vZGU6IGNoaWxkRGF0YS5kb21Ob2RlLAogICAgICAgICAgICAgICAgICBwYXJlbnREb21Ob2RlOiBwYXJlbnREb21Ob2RlLAogICAgICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogX3RoaXM4LnByb3BzLmdldFBvc2l0aW9uCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjb21wdXRlSW5pdGlhbFN0eWxlcycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZUluaXRpYWxTdHlsZXMoY2hpbGQpIHsKICAgICAgICAgICAgaWYgKGNoaWxkLmFwcGVhcmluZykgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmFwcGVhckFuaW1hdGlvbiA/IHRoaXMucHJvcHMuYXBwZWFyQW5pbWF0aW9uLmZyb20gOiB7fTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjaGlsZC5lbnRlcmluZykgewogICAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5lbnRlckFuaW1hdGlvbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgICAgICAgIH0gLy8gSWYgdGhpcyBjaGlsZCB3YXMgaW4gdGhlIG1pZGRsZSBvZiBsZWF2aW5nLCBpdCBzdGlsbCBoYXMgaXRzCiAgICAgICAgICAgICAgLy8gYWJzb2x1dGUgcG9zaXRpb25pbmcgc3R5bGVzIGFwcGxpZWQuIFdlIG5lZWQgdG8gdW5kbyB0aG9zZS4KCgogICAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsCiAgICAgICAgICAgICAgICB0b3A6ICcnLAogICAgICAgICAgICAgICAgbGVmdDogJycsCiAgICAgICAgICAgICAgICByaWdodDogJycsCiAgICAgICAgICAgICAgICBib3R0b206ICcnCiAgICAgICAgICAgICAgfSwgdGhpcy5wcm9wcy5lbnRlckFuaW1hdGlvbi5mcm9tKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjaGlsZC5sZWF2aW5nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMubGVhdmVBbmltYXRpb24gPyB0aGlzLnByb3BzLmxlYXZlQW5pbWF0aW9uLmZyb20gOiB7fTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNoaWxkRGF0YSA9IHRoaXMuZ2V0Q2hpbGREYXRhKGdldEtleShjaGlsZCkpOwogICAgICAgICAgICB2YXIgY2hpbGREb21Ob2RlID0gY2hpbGREYXRhLmRvbU5vZGU7CiAgICAgICAgICAgIHZhciBjaGlsZEJvdW5kaW5nQm94ID0gY2hpbGREYXRhLmJvdW5kaW5nQm94OwogICAgICAgICAgICB2YXIgcGFyZW50Qm91bmRpbmdCb3ggPSB0aGlzLnBhcmVudERhdGEuYm91bmRpbmdCb3g7CgogICAgICAgICAgICBpZiAoIWNoaWxkRG9tTm9kZSkgewogICAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9nZXRQb3NpdGlvbkRlbHRhMyA9ICgwLCBfZG9tTWFuaXB1bGF0aW9uLmdldFBvc2l0aW9uRGVsdGEpKHsKICAgICAgICAgICAgICBjaGlsZERvbU5vZGU6IGNoaWxkRG9tTm9kZSwKICAgICAgICAgICAgICBjaGlsZEJvdW5kaW5nQm94OiBjaGlsZEJvdW5kaW5nQm94LAogICAgICAgICAgICAgIHBhcmVudEJvdW5kaW5nQm94OiBwYXJlbnRCb3VuZGluZ0JveCwKICAgICAgICAgICAgICBnZXRQb3NpdGlvbjogdGhpcy5wcm9wcy5nZXRQb3NpdGlvbgogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIF9nZXRQb3NpdGlvbkRlbHRhNCA9IF9zbGljZWRUb0FycmF5KF9nZXRQb3NpdGlvbkRlbHRhMywgMiksCiAgICAgICAgICAgICAgICBkWCA9IF9nZXRQb3NpdGlvbkRlbHRhNFswXSwKICAgICAgICAgICAgICAgIGRZID0gX2dldFBvc2l0aW9uRGVsdGE0WzFdOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoJyArIGRYICsgJ3B4LCAnICsgZFkgKyAncHgpJwogICAgICAgICAgICB9OwogICAgICAgICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcwoKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdpc0FuaW1hdGlvbkRpc2FibGVkJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FuaW1hdGlvbkRpc2FibGVkKHByb3BzKSB7CiAgICAgICAgICAgIC8vIElmIHRoZSBjb21wb25lbnQgaXMgZXhwbGljaXRseSBwYXNzZWQgYSBgZGlzYWJsZUFsbEFuaW1hdGlvbnNgIGZsYWcsCiAgICAgICAgICAgIC8vIHdlIGNhbiBza2lwIHRoaXMgd2hvbGUgcHJvY2Vzcy4gU2ltaWxhcmx5LCBpZiBhbGwgb2YgdGhlIG51bWJlcnMgaGF2ZQogICAgICAgICAgICAvLyBiZWVuIHNldCB0byAwLCB0aGVyZSBpcyBubyBwb2ludCBpbiB0cnlpbmcgdG8gYW5pbWF0ZTsgZG9pbmcgc28gd291bGQKICAgICAgICAgICAgLy8gb25seSBjYXVzZSBhIGZsaWNrZXIgKGFuZCB0aGUgaW50ZW50IGlzIHByb2JhYmx5IHRvIGRpc2FibGUgYW5pbWF0aW9ucykKICAgICAgICAgICAgLy8gV2UgY2FuIGFsc28gc2tpcCB0aGlzIHJpZ2FtYXJvbGUgaWYgdGhlcmUncyBubyBicm93c2VyIHN1cHBvcnQgZm9yIGl0LgogICAgICAgICAgICByZXR1cm4gbm9Ccm93c2VyU3VwcG9ydCB8fCBwcm9wcy5kaXNhYmxlQWxsQW5pbWF0aW9ucyB8fCBwcm9wcy5kdXJhdGlvbiA9PT0gMCAmJiBwcm9wcy5kZWxheSA9PT0gMCAmJiBwcm9wcy5zdGFnZ2VyRHVyYXRpb25CeSA9PT0gMCAmJiBwcm9wcy5zdGFnZ2VyRGVsYXlCeSA9PT0gMDsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdmaW5kQ2hpbGRCeUtleScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZENoaWxkQnlLZXkoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmNoaWxkcmVuLmZpbmQoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGdldEtleShjaGlsZCkgPT09IGtleTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaGFzQ2hpbGREYXRhJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNDaGlsZERhdGEoa2V5KSB7CiAgICAgICAgICAgIC8vIE9iamVjdCBoYXMgc29tZSBidWlsdC1pbiBwcm9wZXJ0aWVzIG9uIGl0cyBwcm90b3R5cGUsIHN1Y2ggYXMgdG9TdHJpbmcuICBoYXNPd25Qcm9wZXJ0eSBtYWtlcwogICAgICAgICAgICAvLyBzdXJlIHRoYXQga2V5IGlzIHByZXNlbnQgb24gY2hpbGRyZW5EYXRhIGl0c2VsZiwgbm90IG9uIGl0cyBwcm90b3R5cGUuCiAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jaGlsZHJlbkRhdGEsIGtleSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0Q2hpbGREYXRhJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDaGlsZERhdGEoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0NoaWxkRGF0YShrZXkpID8gdGhpcy5jaGlsZHJlbkRhdGFba2V5XSA6IHt9OwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3NldENoaWxkRGF0YScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q2hpbGREYXRhKGtleSwgZGF0YSkgewogICAgICAgICAgICB0aGlzLmNoaWxkcmVuRGF0YVtrZXldID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0Q2hpbGREYXRhKGtleSksIGRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3JlbW92ZUNoaWxkRGF0YScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQ2hpbGREYXRhKGtleSkgewogICAgICAgICAgICBkZWxldGUgdGhpcy5jaGlsZHJlbkRhdGFba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjcmVhdGVIZWlnaHRQbGFjZWhvbGRlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlSGVpZ2h0UGxhY2Vob2xkZXIoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIHR5cGVOYW1lID0gdGhpcy5wcm9wcy50eXBlTmFtZTsgLy8gSWYgcmVxdWVzdGVkLCBjcmVhdGUgYW4gaW52aXNpYmxlIGVsZW1lbnQgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdC4KICAgICAgICAgICAgLy8gSXRzIGhlaWdodCB3aWxsIGJlIG1vZGlmaWVkIHRvIHByZXZlbnQgdGhlIGNvbnRhaW5lciBmcm9tIGNvbGxhcHNpbmcKICAgICAgICAgICAgLy8gcHJlbWF0dXJlbHkuCgogICAgICAgICAgICB2YXIgaXNDb250YWluZXJBTGlzdCA9IHR5cGVOYW1lID09PSAndWwnIHx8IHR5cGVOYW1lID09PSAnb2wnOwogICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXJUeXBlID0gaXNDb250YWluZXJBTGlzdCA/ICdsaScgOiAnZGl2JzsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KHBsYWNlaG9sZGVyVHlwZSwgewogICAgICAgICAgICAgIGtleTogJ2hlaWdodC1wbGFjZWhvbGRlcicsCiAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZG9tTm9kZSkgewogICAgICAgICAgICAgICAgX3RoaXM5LmhlaWdodFBsYWNlaG9sZGVyRGF0YS5kb21Ob2RlID0gZG9tTm9kZTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJywKICAgICAgICAgICAgICAgIGhlaWdodDogMAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY2hpbGRyZW5XaXRoUmVmcycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hpbGRyZW5XaXRoUmVmcygpIHsKICAgICAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOyAvLyBXZSBuZWVkIHRvIGNsb25lIHRoZSBwcm92aWRlZCBjaGlsZHJlbiwgY2FwdHVyaW5nIGEgcmVmZXJlbmNlIHRvIHRoZQogICAgICAgICAgICAvLyB1bmRlcmx5aW5nIERPTSBub2RlLiBGbGlwIE1vdmUgbmVlZHMgdG8gdXNlIHRoZSBSZWFjdCBlc2NhcGUgaGF0Y2hlcyB0bwogICAgICAgICAgICAvLyBiZSBhYmxlIHRvIGRvIGl0cyBjYWxjdWxhdGlvbnMuCgoKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY2xvbmVFbGVtZW50KGNoaWxkLmVsZW1lbnQsIHsKICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgLy8gU3RhdGVsZXNzIEZ1bmN0aW9uYWwgQ29tcG9uZW50cyBhcmUgbm90IHN1cHBvcnRlZCBieSBGbGlwTW92ZSwKICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGV5IGRvbid0IGhhdmUgaW5zdGFuY2VzLgogICAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBkb21Ob2RlID0gKDAsIF9kb21NYW5pcHVsYXRpb24uZ2V0TmF0aXZlTm9kZSkoZWxlbWVudCk7CgogICAgICAgICAgICAgICAgICBfdGhpczEwLnNldENoaWxkRGF0YShnZXRLZXkoY2hpbGQpLCB7CiAgICAgICAgICAgICAgICAgICAgZG9tTm9kZTogZG9tTm9kZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncmVuZGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gX3Byb3BzMi50eXBlTmFtZSwKICAgICAgICAgICAgICAgIGRlbGVnYXRlZCA9IF9wcm9wczIuZGVsZWdhdGVkLAogICAgICAgICAgICAgICAgbGVhdmVBbmltYXRpb24gPSBfcHJvcHMyLmxlYXZlQW5pbWF0aW9uLAogICAgICAgICAgICAgICAgbWFpbnRhaW5Db250YWluZXJIZWlnaHQgPSBfcHJvcHMyLm1haW50YWluQ29udGFpbmVySGVpZ2h0OwoKICAgICAgICAgICAgdmFyIHByb3BzID0gX2V4dGVuZHMoe30sIGRlbGVnYXRlZCwgewogICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG5vZGUpIHsKICAgICAgICAgICAgICAgIF90aGlzMTEucGFyZW50RGF0YS5kb21Ob2RlID0gbm9kZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbldpdGhSZWZzKCk7CgogICAgICAgICAgICBpZiAobGVhdmVBbmltYXRpb24gJiYgbWFpbnRhaW5Db250YWluZXJIZWlnaHQpIHsKICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHRoaXMuY3JlYXRlSGVpZ2h0UGxhY2Vob2xkZXIoKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCh0eXBlTmFtZSwgcHJvcHMsIGNoaWxkcmVuKTsKICAgICAgICAgIH0KICAgICAgICB9XSk7CgogICAgICAgIHJldHVybiBGbGlwTW92ZTsKICAgICAgfShfcmVhY3QuQ29tcG9uZW50KTsKCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9ICgwLCBfcHJvcENvbnZlcnRlcjJbImRlZmF1bHQiXSkoRmxpcE1vdmUpOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIEBub2Zsb3cKCiAgICAgIC8qKgogICAgICAgKiBSZWFjdCBGbGlwIE1vdmUgLSBQb2x5ZmlsbHMKICAgICAgICogKGMpIDIwMTYtcHJlc2VudCBKb3NodWEgQ29tZWF1CiAgICAgICAqLwoKICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KCiAgICAgIGlmICghQXJyYXkucHJvdG90eXBlLmZpbmQpIHsKICAgICAgICBBcnJheS5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHsKICAgICAgICAgIGlmICh0aGlzID09PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5LnByb3RvdHlwZS5maW5kIGNhbGxlZCBvbiBudWxsIG9yIHVuZGVmaW5lZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbGlzdCA9IE9iamVjdCh0aGlzKTsKICAgICAgICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMDsKICAgICAgICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdOwogICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFsdWUgPSBsaXN0W2ldOwoKICAgICAgICAgICAgaWYgKHByZWRpY2F0ZS5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpLCBsaXN0KSkgewogICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKCFBcnJheS5wcm90b3R5cGUuZXZlcnkpIHsKICAgICAgICBBcnJheS5wcm90b3R5cGUuZXZlcnkgPSBmdW5jdGlvbiAoY2FsbGJhY2tmbiwgdGhpc0FyZykgewogICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgIHZhciBULCBrOwoKICAgICAgICAgIGlmICh0aGlzID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGhpcyBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIE8gPSBPYmplY3QodGhpcyk7CiAgICAgICAgICB2YXIgbGVuID0gTy5sZW5ndGggPj4+IDA7CgogICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFja2ZuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgVCA9IHRoaXNBcmc7CiAgICAgICAgICB9CgogICAgICAgICAgayA9IDA7CgogICAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsKICAgICAgICAgICAgdmFyIGtWYWx1ZTsKCiAgICAgICAgICAgIGlmIChrIGluIE8pIHsKICAgICAgICAgICAgICBrVmFsdWUgPSBPW2tdOwogICAgICAgICAgICAgIHZhciB0ZXN0UmVzdWx0ID0gY2FsbGJhY2tmbi5jYWxsKFQsIGtWYWx1ZSwgaywgTyk7CgogICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaysrOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICghQXJyYXkuaXNBcnJheSkgewogICAgICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbiAoYXJnKSB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7CiAgICAgICAgfTsKICAgICAgfQogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNDYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgICAgdmFsdWU6IHRydWUKICAgICAgICB9KTsKCiAgICAgICAgdmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2Y0KFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgcmV0dXJuIF90eXBlb2Y0KG9iaik7CiAgICAgICAgfSA6IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2Y0KG9iaik7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0YXJnZXQ7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICAgICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICAgICAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgICAgICAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgICAgICAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgICAgICAgICB9OwogICAgICAgIH0oKTsKCiAgICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgICB2YXIgX2Vycm9yTWVzc2FnZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nyk7CgogICAgICAgIHZhciBfZW50ZXJMZWF2ZVByZXNldHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OCk7CgogICAgICAgIHZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpOwoKICAgICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgICAgICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICAgICAgICAgIGlmICghc2VsZikgewogICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBjYWxsICYmIChfdHlwZW9mNChjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIF90eXBlb2Y0KHN1cGVyQ2xhc3MpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgICAgICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZWFjdCBGbGlwIE1vdmUgfCBwcm9wQ29udmVydGVyCiAgICAgICAgICogKGMpIDIwMTYtcHJlc2VudCBKb3NodWEgQ29tZWF1CiAgICAgICAgICoKICAgICAgICAgKiBBYnN0cmFjdGVkIGF3YXkgYSBidW5jaCBvZiB0aGUgbWVzc3kgYnVzaW5lc3Mgd2l0aCBwcm9wcy4KICAgICAgICAgKiAgIC0gcHJvcHMgZmxvdyB0eXBlcyBhbmQgZGVmYXVsdFByb3BzCiAgICAgICAgICogICAtIFR5cGUgY29udmVyc2lvbiAoV2UgYWNjZXB0ICdzdHJpbmcnIGFuZCAnbnVtYmVyJyB2YWx1ZXMgZm9yIGR1cmF0aW9uLAogICAgICAgICAqICAgICBkZWxheSwgYW5kIG90aGVyIGZpZWxkcywgYnV0IHdlIGFjdHVhbGx5IG5lZWQgdGhlbSB0byBiZSBpbnRzLikKICAgICAgICAgKiAgIC0gQ2hpbGRyZW4gY29udmVyc2lvbiAod2UgbmVlZCB0aGUgY2hpbGRyZW4gdG8gYmUgYW4gYXJyYXkuIE1heSBub3QgYWx3YXlzCiAgICAgICAgICogICAgIGJlLCBpZiBhIHNpbmdsZSBjaGlsZCBpcyBwYXNzZWQgaW4uKQogICAgICAgICAqICAgLSBSZXNvbHZpbmcgYW5pbWF0aW9uIHByZXNldHMgaW50byB0aGVpciBiYXNlIENTUyBzdHlsZXMKICAgICAgICAgKi8KCiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgYmxvY2stc2NvcGVkLXZhciAqLwoKCiAgICAgICAgdmFyIG5vZGVFbnYgPSB2b2lkIDA7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBub2RlRW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgbm9kZUVudiA9ICdkZXZlbG9wbWVudCc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcm9wQ29udmVydGVyKENvbXBvc2VkQ29tcG9uZW50KSB7CiAgICAgICAgICB2YXIgX2NsYXNzLCBfdGVtcDsKCiAgICAgICAgICByZXR1cm4gX3RlbXAgPSBfY2xhc3MgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogICAgICAgICAgICBfaW5oZXJpdHMoRmxpcE1vdmVQcm9wQ29udmVydGVyLCBfQ29tcG9uZW50KTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIEZsaXBNb3ZlUHJvcENvbnZlcnRlcigpIHsKICAgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmxpcE1vdmVQcm9wQ29udmVydGVyKTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGbGlwTW92ZVByb3BDb252ZXJ0ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGbGlwTW92ZVByb3BDb252ZXJ0ZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NyZWF0ZUNsYXNzKEZsaXBNb3ZlUHJvcENvbnZlcnRlciwgW3sKICAgICAgICAgICAgICBrZXk6ICdjaGVja0ZvclN0YXRlbGVzc0Z1bmN0aW9uYWxDb21wb25lbnRzJywKICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcwogICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0ZvclN0YXRlbGVzc0Z1bmN0aW9uYWxDb21wb25lbnRzKGNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICAvLyBTa2lwIGFsbCBjb25zb2xlIHdhcm5pbmdzIGluIHByb2R1Y3Rpb24uCiAgICAgICAgICAgICAgICAvLyBCYWlsIGVhcmx5LCB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3b3JrLgogICAgICAgICAgICAgICAgaWYgKG5vZGVFbnYgPT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IC8vIEZsaXBNb3ZlIGRvZXMgbm90IHN1cHBvcnQgc3RhdGVsZXNzIGZ1bmN0aW9uYWwgY29tcG9uZW50cy4KICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBhbnkgc3VwcGxpZWQgY29tcG9uZW50cyB3b24ndCB3b3JrLgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNoaWxkIGRvZXNuJ3QgaGF2ZSBhIGtleSwgaXQgbWVhbnMgd2UgYXJlbid0IGFuaW1hdGluZyBpdC4KICAgICAgICAgICAgICAgIC8vIEl0J3MgYWxsb3dlZCB0byBiZSBhbiBTRkMsIHNpbmNlIHdlIGlnbm9yZSBpdC4KCgogICAgICAgICAgICAgICAgdmFyIGNoaWxkQXJyYXkgPSBfcmVhY3QuQ2hpbGRyZW4udG9BcnJheShjaGlsZHJlbik7CgogICAgICAgICAgICAgICAgdmFyIG5vU3RhdGVsZXNzID0gY2hpbGRBcnJheS5ldmVyeShmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICEoMCwgX2hlbHBlcnMuaXNFbGVtZW50QW5TRkMpKGNoaWxkKSB8fCB0eXBlb2YgY2hpbGQua2V5ID09PSAndW5kZWZpbmVkJzsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghbm9TdGF0ZWxlc3MpIHsKICAgICAgICAgICAgICAgICAgKDAsIF9lcnJvck1lc3NhZ2VzLnN0YXRlbGVzc0Z1bmN0aW9uYWxDb21wb25lbnRTdXBwbGllZCkoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBrZXk6ICdjb252ZXJ0UHJvcHMnLAogICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0UHJvcHMocHJvcHMpIHsKICAgICAgICAgICAgICAgIHZhciB3b3JraW5nUHJvcHMgPSB7CiAgICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgYnlwYXNzIHRoZSBwcm9wcyB0aGF0IGRvbid0IG5lZWQgY29udmVyc2lvbgogICAgICAgICAgICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sCiAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcHMuZWFzaW5nLAogICAgICAgICAgICAgICAgICBvblN0YXJ0OiBwcm9wcy5vblN0YXJ0LAogICAgICAgICAgICAgICAgICBvbkZpbmlzaDogcHJvcHMub25GaW5pc2gsCiAgICAgICAgICAgICAgICAgIG9uU3RhcnRBbGw6IHByb3BzLm9uU3RhcnRBbGwsCiAgICAgICAgICAgICAgICAgIG9uRmluaXNoQWxsOiBwcm9wcy5vbkZpbmlzaEFsbCwKICAgICAgICAgICAgICAgICAgdHlwZU5hbWU6IHByb3BzLnR5cGVOYW1lLAogICAgICAgICAgICAgICAgICBkaXNhYmxlQWxsQW5pbWF0aW9uczogcHJvcHMuZGlzYWJsZUFsbEFuaW1hdGlvbnMsCiAgICAgICAgICAgICAgICAgIGdldFBvc2l0aW9uOiBwcm9wcy5nZXRQb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgbWFpbnRhaW5Db250YWluZXJIZWlnaHQ6IHByb3BzLm1haW50YWluQ29udGFpbmVySGVpZ2h0LAogICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudDogcHJvcHMudmVydGljYWxBbGlnbm1lbnQsCiAgICAgICAgICAgICAgICAgIC8vIERvIHN0cmluZy10by1pbnQgY29udmVyc2lvbiBmb3IgYWxsIHRpbWluZy1yZWxhdGVkIHByb3BzCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmNvbnZlcnRUaW1pbmdQcm9wKCdkdXJhdGlvbicpLAogICAgICAgICAgICAgICAgICBkZWxheTogdGhpcy5jb252ZXJ0VGltaW5nUHJvcCgnZGVsYXknKSwKICAgICAgICAgICAgICAgICAgc3RhZ2dlckR1cmF0aW9uQnk6IHRoaXMuY29udmVydFRpbWluZ1Byb3AoJ3N0YWdnZXJEdXJhdGlvbkJ5JyksCiAgICAgICAgICAgICAgICAgIHN0YWdnZXJEZWxheUJ5OiB0aGlzLmNvbnZlcnRUaW1pbmdQcm9wKCdzdGFnZ2VyRGVsYXlCeScpLAogICAgICAgICAgICAgICAgICAvLyBPdXIgZW50ZXIvbGVhdmUgYW5pbWF0aW9ucyBjYW4gYmUgc3BlY2lmaWVkIGFzIGJvb2xlYW4gKGRlZmF1bHQgb3IKICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZWQpLCBzdHJpbmcgKHByZXNldCBuYW1lKSwgb3Igb2JqZWN0IChhY3R1YWwgYW5pbWF0aW9uIHZhbHVlcykuCiAgICAgICAgICAgICAgICAgIC8vIExldCdzIHN0YW5kYXJkaXplIHRoaXMgc28gdGhhdCB0aGV5J3JlIGFsd2F5cyBvYmplY3RzCiAgICAgICAgICAgICAgICAgIGFwcGVhckFuaW1hdGlvbjogdGhpcy5jb252ZXJ0QW5pbWF0aW9uUHJvcChwcm9wcy5hcHBlYXJBbmltYXRpb24sIF9lbnRlckxlYXZlUHJlc2V0cy5hcHBlYXJQcmVzZXRzKSwKICAgICAgICAgICAgICAgICAgZW50ZXJBbmltYXRpb246IHRoaXMuY29udmVydEFuaW1hdGlvblByb3AocHJvcHMuZW50ZXJBbmltYXRpb24sIF9lbnRlckxlYXZlUHJlc2V0cy5lbnRlclByZXNldHMpLAogICAgICAgICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbjogdGhpcy5jb252ZXJ0QW5pbWF0aW9uUHJvcChwcm9wcy5sZWF2ZUFuaW1hdGlvbiwgX2VudGVyTGVhdmVQcmVzZXRzLmxlYXZlUHJlc2V0cyksCiAgICAgICAgICAgICAgICAgIGRlbGVnYXRlZDoge30KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRm9yU3RhdGVsZXNzRnVuY3Rpb25hbENvbXBvbmVudHMod29ya2luZ1Byb3BzLmNoaWxkcmVuKTsgLy8gQWNjZXB0IGBkaXNhYmxlQW5pbWF0aW9uc2AsIGJ1dCBhZGQgYSBkZXByZWNhdGlvbiB3YXJuaW5nCgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wcy5kaXNhYmxlQW5pbWF0aW9ucyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgaWYgKG5vZGVFbnYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICgwLCBfZXJyb3JNZXNzYWdlcy5kZXByZWNhdGVkRGlzYWJsZUFuaW1hdGlvbnMpKCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHdvcmtpbmdQcm9wcy5kaXNhYmxlQWxsQW5pbWF0aW9ucyA9IHByb3BzLmRpc2FibGVBbmltYXRpb25zOwogICAgICAgICAgICAgICAgfSAvLyBHYXRoZXIgYW55IGFkZGl0aW9uYWwgcHJvcHM7CiAgICAgICAgICAgICAgICAvLyB0aGV5IHdpbGwgYmUgZGVsZWdhdGVkIHRvIHRoZSBSZWFjdEVsZW1lbnQgY3JlYXRlZC4KCgogICAgICAgICAgICAgICAgdmFyIHByaW1hcnlQcm9wS2V5cyA9IE9iamVjdC5rZXlzKHdvcmtpbmdQcm9wcyk7CiAgICAgICAgICAgICAgICB2YXIgZGVsZWdhdGVkUHJvcHMgPSAoMCwgX2hlbHBlcnMub21pdCkodGhpcy5wcm9wcywgcHJpbWFyeVByb3BLZXlzKTsgLy8gVGhlIEZsaXBNb3ZlIGNvbnRhaW5lciBlbGVtZW50IG5lZWRzIHRvIGhhdmUgYSBub24tc3RhdGljIHBvc2l0aW9uLgogICAgICAgICAgICAgICAgLy8gV2UgdXNlIGByZWxhdGl2ZWAgYnkgZGVmYXVsdCwgYnV0IGl0IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHRoZSB1c2VyLgogICAgICAgICAgICAgICAgLy8gTm93IHRoYXQgd2UncmUgZGVsZWdhdGluZyBwcm9wcywgd2UgbmVlZCB0byBtZXJnZSB0aGlzIGluLgoKICAgICAgICAgICAgICAgIGRlbGVnYXRlZFByb3BzLnN0eWxlID0gX2V4dGVuZHMoewogICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJwogICAgICAgICAgICAgICAgfSwgZGVsZWdhdGVkUHJvcHMuc3R5bGUpOwogICAgICAgICAgICAgICAgd29ya2luZ1Byb3BzLmRlbGVnYXRlZCA9IGRlbGVnYXRlZFByb3BzOwogICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtpbmdQcm9wczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBrZXk6ICdjb252ZXJ0VGltaW5nUHJvcCcsCiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnZlcnRUaW1pbmdQcm9wKHByb3ApIHsKICAgICAgICAgICAgICAgIHZhciByYXdWYWx1ZSA9IHRoaXMucHJvcHNbcHJvcF07CiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0eXBlb2YgcmF3VmFsdWUgPT09ICdudW1iZXInID8gcmF3VmFsdWUgOiBwYXJzZUludChyYXdWYWx1ZSwgMTApOwoKICAgICAgICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IEZsaXBNb3ZlUHJvcENvbnZlcnRlci5kZWZhdWx0UHJvcHNbcHJvcF07CgogICAgICAgICAgICAgICAgICBpZiAobm9kZUVudiAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgKDAsIF9lcnJvck1lc3NhZ2VzLmludmFsaWRUeXBlRm9yVGltaW5nUHJvcCkoewogICAgICAgICAgICAgICAgICAgICAgcHJvcDogcHJvcCwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByYXdWYWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMKCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBrZXk6ICdjb252ZXJ0QW5pbWF0aW9uUHJvcCcsCiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnZlcnRBbmltYXRpb25Qcm9wKGFuaW1hdGlvbiwgcHJlc2V0cykgewogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgYW5pbWF0aW9uID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhbmltYXRpb24pKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgdHJ1ZSwgd2Ugd2FudCB0byB1c2UgdGhlIGRlZmF1bHQgcHJlc2V0LgogICAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBmYWxzZSwgd2Ugd2FudCB0byB1c2UgdGhlICdub25lJyBwcmVzZXQuCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlc2V0c1thbmltYXRpb24gPyBfZW50ZXJMZWF2ZVByZXNldHMuZGVmYXVsdFByZXNldCA6IF9lbnRlckxlYXZlUHJlc2V0cy5kaXNhYmxlUHJlc2V0XTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZXRLZXlzID0gT2JqZWN0LmtleXMocHJlc2V0cyk7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXNldEtleXMuaW5kZXhPZihhbmltYXRpb24pID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZUVudiAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF9lcnJvck1lc3NhZ2VzLmludmFsaWRFbnRlckxlYXZlUHJlc2V0KSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYW5pbWF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0YWJsZVZhbHVlczogcHJlc2V0S2V5cy5qb2luKCcsICcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBfZW50ZXJMZWF2ZVByZXNldHMuZGVmYXVsdFByZXNldAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlc2V0c1tfZW50ZXJMZWF2ZVByZXNldHMuZGVmYXVsdFByZXNldF07CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXNldHNbYW5pbWF0aW9uXTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGtleTogJ3JlbmRlcicsCiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChDb21wb3NlZENvbXBvbmVudCwgdGhpcy5jb252ZXJ0UHJvcHModGhpcy5wcm9wcykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfV0pOwoKICAgICAgICAgICAgcmV0dXJuIEZsaXBNb3ZlUHJvcENvbnZlcnRlcjsKICAgICAgICAgIH0oX3JlYWN0LkNvbXBvbmVudCksIF9jbGFzcy5kZWZhdWx0UHJvcHMgPSB7CiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2UtaW4tb3V0JywKICAgICAgICAgICAgZHVyYXRpb246IDM1MCwKICAgICAgICAgICAgZGVsYXk6IDAsCiAgICAgICAgICAgIHN0YWdnZXJEdXJhdGlvbkJ5OiAwLAogICAgICAgICAgICBzdGFnZ2VyRGVsYXlCeTogMCwKICAgICAgICAgICAgdHlwZU5hbWU6ICdkaXYnLAogICAgICAgICAgICBlbnRlckFuaW1hdGlvbjogX2VudGVyTGVhdmVQcmVzZXRzLmRlZmF1bHRQcmVzZXQsCiAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uOiBfZW50ZXJMZWF2ZVByZXNldHMuZGVmYXVsdFByZXNldCwKICAgICAgICAgICAgZGlzYWJsZUFsbEFuaW1hdGlvbnM6IGZhbHNlLAogICAgICAgICAgICBnZXRQb3NpdGlvbjogZnVuY3Rpb24gZ2V0UG9zaXRpb24obm9kZSkgewogICAgICAgICAgICAgIHJldHVybiBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYWludGFpbkNvbnRhaW5lckhlaWdodDogZmFsc2UsCiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ25tZW50OiAndG9wJwogICAgICAgICAgfSwgX3RlbXA7CiAgICAgICAgfQoKICAgICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBwcm9wQ29udmVydGVyOwogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIGZ1bmN0aW9uIHdhcm5PbmNlKG1zZykgewogICAgICAgIHZhciBoYXNXYXJuZWQgPSBmYWxzZTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCFoYXNXYXJuZWQpIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKG1zZyk7CiAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHN0YXRlbGVzc0Z1bmN0aW9uYWxDb21wb25lbnRTdXBwbGllZCA9IGV4cG9ydHMuc3RhdGVsZXNzRnVuY3Rpb25hbENvbXBvbmVudFN1cHBsaWVkID0gd2Fybk9uY2UoJ1xuPj4gRXJyb3IsIHZpYSByZWFjdC1mbGlwLW1vdmUgPDxcblxuWW91IHByb3ZpZGVkIGEgc3RhdGVsZXNzIGZ1bmN0aW9uYWwgY29tcG9uZW50IGFzIGEgY2hpbGQgdG8gPEZsaXBNb3ZlPi4gVW5mb3J0dW5hdGVseSwgU0ZDcyBhcmVuXCd0IHN1cHBvcnRlZCwgYmVjYXVzZSBGbGlwIE1vdmUgbmVlZHMgYWNjZXNzIHRvIHRoZSBiYWNraW5nIGluc3RhbmNlcyB2aWEgcmVmcywgYW5kIFNGQ3MgZG9uXCd0IGhhdmUgYSBwdWJsaWMgaW5zdGFuY2UgdGhhdCBob2xkcyB0aGF0IGluZm8uXG5cblBsZWFzZSB3cmFwIHlvdXIgY29tcG9uZW50cyBpbiBhIG5hdGl2ZSBlbGVtZW50IChlZy4gPGRpdj4pLCBvciBhIG5vbi1mdW5jdGlvbmFsIGNvbXBvbmVudC5cbicpOwoKICAgICAgdmFyIGludmFsaWRUeXBlRm9yVGltaW5nUHJvcCA9IGV4cG9ydHMuaW52YWxpZFR5cGVGb3JUaW1pbmdQcm9wID0gZnVuY3Rpb24gaW52YWxpZFR5cGVGb3JUaW1pbmdQcm9wKGFyZ3MpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignXG4+PiBFcnJvciwgdmlhIHJlYWN0LWZsaXAtbW92ZSA8PFxuXG5UaGUgcHJvcCB5b3UgcHJvdmlkZWQgZm9yIFwnJyArIGFyZ3MucHJvcCArICdcJyBpcyBpbnZhbGlkLiBJdCBuZWVkcyB0byBiZSBhIHBvc2l0aXZlIGludGVnZXIsIG9yIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHJlc29sdmVkIHRvIGEgbnVtYmVyLiBUaGUgdmFsdWUgeW91IHByb3ZpZGVkIGlzIFwnJyArIGFyZ3MudmFsdWUgKyAnXCcuXG5cbkFzIGEgcmVzdWx0LCAgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgdXNlZCwgd2hpY2ggaXMgXCcnICsgYXJncy5kZWZhdWx0VmFsdWUgKyAnXCcuXG4nKTsKICAgICAgfTsKCiAgICAgIHZhciBkZXByZWNhdGVkRGlzYWJsZUFuaW1hdGlvbnMgPSBleHBvcnRzLmRlcHJlY2F0ZWREaXNhYmxlQW5pbWF0aW9ucyA9IHdhcm5PbmNlKCdcbj4+IFdhcm5pbmcsIHZpYSByZWFjdC1mbGlwLW1vdmUgPDxcblxuVGhlIFwnZGlzYWJsZUFuaW1hdGlvbnNcJyBwcm9wIHlvdSBwcm92aWRlZCBpcyBkZXByZWNhdGVkLiBQbGVhc2Ugc3dpdGNoIHRvIHVzZSBcJ2Rpc2FibGVBbGxBbmltYXRpb25zXCcuXG5cblRoaXMgd2lsbCBiZWNvbWUgYSBzaWxlbnQgZXJyb3IgaW4gZnV0dXJlIHZlcnNpb25zIG9mIHJlYWN0LWZsaXAtbW92ZS5cbicpOwoKICAgICAgdmFyIGludmFsaWRFbnRlckxlYXZlUHJlc2V0ID0gZXhwb3J0cy5pbnZhbGlkRW50ZXJMZWF2ZVByZXNldCA9IGZ1bmN0aW9uIGludmFsaWRFbnRlckxlYXZlUHJlc2V0KGFyZ3MpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignXG4+PiBFcnJvciwgdmlhIHJlYWN0LWZsaXAtbW92ZSA8PFxuXG5UaGUgZW50ZXIvbGVhdmUgcHJlc2V0IHlvdSBwcm92aWRlZCBpcyBpbnZhbGlkLiBXZSBkb25cJ3QgY3VycmVudGx5IGhhdmUgYSBcJycgKyBhcmdzLnZhbHVlICsgJyBwcmVzZXQuXCdcblxuQWNjZXB0YWJsZSB2YWx1ZXMgYXJlICcgKyBhcmdzLmFjY2VwdGFibGVWYWx1ZXMgKyAnLiBUaGUgZGVmYXVsdCB2YWx1ZSBvZiBcJycgKyBhcmdzLmRlZmF1bHRWYWx1ZSArICdcJyB3aWxsIGJlIHVzZWQuXG4nKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTQ4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgICB2YXIgZW50ZXJQcmVzZXRzID0gZXhwb3J0cy5lbnRlclByZXNldHMgPSB7CiAgICAgICAgZWxldmF0b3I6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMCknLAogICAgICAgICAgICBvcGFjaXR5OiAnMCcKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICB0cmFuc2Zvcm06ICcnLAogICAgICAgICAgICBvcGFjaXR5OiAnJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZmFkZTogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICBvcGFjaXR5OiAnMCcKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICBvcGFjaXR5OiAnJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWNjb3JkaW9uVmVydGljYWw6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGVZKDApJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnY2VudGVyIHRvcCcKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICB0cmFuc2Zvcm06ICcnLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdjZW50ZXIgdG9wJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWNjb3JkaW9uSG9yaXpvbnRhbDogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVgoMCknLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICB0cmFuc2Zvcm06ICcnLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG5vbmU6IG51bGwKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFJlYWN0IEZsaXAgTW92ZSB8IGVudGVyTGVhdmVQcmVzZXRzCiAgICAgICAqIChjKSAyMDE2LXByZXNlbnQgSm9zaHVhIENvbWVhdQogICAgICAgKgogICAgICAgKiBUaGlzIGNvbnRhaW5zIHRoZSBtYXN0ZXIgbGlzdCBvZiBwcmVzZXRzIGF2YWlsYWJsZSBmb3IgZW50ZXIvbGVhdmUgYW5pbWF0aW9ucywKICAgICAgICogYWxvbmcgd2l0aCB0aGUgbWFwcGluZyBiZXR3ZWVuIHByZXNldCBhbmQgc3R5bGVzLgogICAgICAgKi8KCiAgICAgIHZhciBsZWF2ZVByZXNldHMgPSBleHBvcnRzLmxlYXZlUHJlc2V0cyA9IHsKICAgICAgICBlbGV2YXRvcjogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsCiAgICAgICAgICAgIG9wYWNpdHk6ICcxJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDApJywKICAgICAgICAgICAgb3BhY2l0eTogJzAnCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmYWRlOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIG9wYWNpdHk6ICcxJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIG9wYWNpdHk6ICcwJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWNjb3JkaW9uVmVydGljYWw6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGVZKDEpJywKICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnY2VudGVyIHRvcCcKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVkoMCknLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdjZW50ZXIgdG9wJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWNjb3JkaW9uSG9yaXpvbnRhbDogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVgoMSknLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicKICAgICAgICAgIH0sCiAgICAgICAgICB0bzogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVgoMCknLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdsZWZ0IGNlbnRlcicKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG5vbmU6IG51bGwKICAgICAgfTsgLy8gRm9yIG5vdywgYXBwZWFyUHJlc2V0cyB3aWxsIGJlIGlkZW50aWNhbCB0byBlbnRlclByZXNldHMuCiAgICAgIC8vIEFzc2lnbmluZyBhIGN1c3RvbSBleHBvcnQgaW4gY2FzZSB3ZSBldmVyIHdhbnQgdG8gYWRkIGFwcGVhci1zcGVjaWZpYyBvbmVzLgoKICAgICAgdmFyIGFwcGVhclByZXNldHMgPSBleHBvcnRzLmFwcGVhclByZXNldHMgPSBlbnRlclByZXNldHM7IC8vIEVtYmFycmFzc2luZ2x5IGVub3VnaCwgdjIuMCBsYXVuY2hlZCB3aXRoIHR5cG8nZWQgcHJlc2V0IG5hbWVzLgogICAgICAvLyBUbyBhdm9pZCBwZW5uaW5nIGEgbmV3IG1ham9yIHZlcnNpb24gb3ZlciBzb21ldGhpbmcgc28gaW5jb25zZXF1ZW50aWFsLAogICAgICAvLyB3ZSdyZSBzdXBwb3J0aW5nIGJvdGggc3BlbGxpbmdzLiBJbiBhIGZ1dHVyZSB2ZXJzaW9uLCB0aGVzZSBhbHRlcm5hdGl2ZXMKICAgICAgLy8gbWF5IGJlIGRlcHJlY2F0ZWQuCiAgICAgIC8vICRGbG93Rml4TWUKCiAgICAgIGVudGVyUHJlc2V0cy5hY2NvcmRpYW5WZXJ0aWNhbCA9IGVudGVyUHJlc2V0cy5hY2NvcmRpb25WZXJ0aWNhbDsgLy8gJEZsb3dGaXhNZQoKICAgICAgZW50ZXJQcmVzZXRzLmFjY29yZGlhbkhvcml6b250YWwgPSBlbnRlclByZXNldHMuYWNjb3JkaW9uSG9yaXpvbnRhbDsgLy8gJEZsb3dGaXhNZQoKICAgICAgbGVhdmVQcmVzZXRzLmFjY29yZGlhblZlcnRpY2FsID0gbGVhdmVQcmVzZXRzLmFjY29yZGlvblZlcnRpY2FsOyAvLyAkRmxvd0ZpeE1lCgogICAgICBsZWF2ZVByZXNldHMuYWNjb3JkaWFuSG9yaXpvbnRhbCA9IGxlYXZlUHJlc2V0cy5hY2NvcmRpb25Ib3Jpem9udGFsOwogICAgICB2YXIgZGVmYXVsdFByZXNldCA9IGV4cG9ydHMuZGVmYXVsdFByZXNldCA9ICdlbGV2YXRvcic7CiAgICAgIHZhciBkaXNhYmxlUHJlc2V0ID0gZXhwb3J0cy5kaXNhYmxlUHJlc2V0ID0gJ25vbmUnOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKICAgICAgZXhwb3J0cy5jcmVhdGVUcmFuc2l0aW9uU3RyaW5nID0gZXhwb3J0cy5nZXROYXRpdmVOb2RlID0gZXhwb3J0cy51cGRhdGVIZWlnaHRQbGFjZWhvbGRlciA9IGV4cG9ydHMucmVtb3ZlTm9kZUZyb21ET01GbG93ID0gZXhwb3J0cy5nZXRQb3NpdGlvbkRlbHRhID0gZXhwb3J0cy5nZXRSZWxhdGl2ZUJvdW5kaW5nQm94ID0gdW5kZWZpbmVkOwoKICAgICAgdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0YXJnZXQ7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBSZWFjdCBGbGlwIE1vdmUKICAgICAgICogKGMpIDIwMTYtcHJlc2VudCBKb3NodWEgQ29tZWF1CiAgICAgICAqCiAgICAgICAqIFRoZXNlIG1ldGhvZHMgcmVhZCBmcm9tIGFuZCB3cml0ZSB0byB0aGUgRE9NLgogICAgICAgKiBUaGV5IGFsbW9zdCBhbHdheXMgaGF2ZSBzaWRlIGVmZmVjdHMsIGFuZCB3aWxsIGhvcGVmdWxseSBiZWNvbWUgdGhlCiAgICAgICAqIG9ubHkgc3BvdCBpbiB0aGUgY29kZWJhc2Ugd2l0aCBpbXB1cmUgZnVuY3Rpb25zLgogICAgICAgKi8KCgogICAgICBleHBvcnRzLmFwcGx5U3R5bGVzVG9ET01Ob2RlID0gYXBwbHlTdHlsZXNUb0RPTU5vZGU7CiAgICAgIGV4cG9ydHMud2hpY2hUcmFuc2l0aW9uRXZlbnQgPSB3aGljaFRyYW5zaXRpb25FdmVudDsKCiAgICAgIHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7CgogICAgICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgICAgICAgaWYgKGtleSBpbiBvYmopIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvYmpba2V5XSA9IHZhbHVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG9iajsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYXBwbHlTdHlsZXNUb0RPTU5vZGUoX3JlZikgewogICAgICAgIHZhciBkb21Ob2RlID0gX3JlZi5kb21Ob2RlLAogICAgICAgICAgICBzdHlsZXMgPSBfcmVmLnN0eWxlczsgLy8gQ2FuJ3QganVzdCBkbyBhbiBvYmplY3QgbWVyZ2UgYmVjYXVzZSBkb21Ob2RlLnN0eWxlcyBpcyBubyByZWd1bGFyIG9iamVjdC4KICAgICAgICAvLyBOZWVkIHRvIGRvIGl0IHRoaXMgd2F5IGZvciB0aGUgZW5naW5lIHRvIGZpcmUgaXRzIGBzZXRgIGxpc3RlbmVycy4KCiAgICAgICAgT2JqZWN0LmtleXMoc3R5bGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIGRvbU5vZGUuc3R5bGUuc2V0UHJvcGVydHkoKDAsIF9oZWxwZXJzLmh5cGhlbmF0ZSkoa2V5KSwgc3R5bGVzW2tleV0pOwogICAgICAgIH0pOwogICAgICB9IC8vIE1vZGlmaWVkIGZyb20gTW9kZXJuaXpyCgoKICAgICAgZnVuY3Rpb24gd2hpY2hUcmFuc2l0aW9uRXZlbnQoKSB7CiAgICAgICAgdmFyIHRyYW5zaXRpb25zID0gewogICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLAogICAgICAgICAgJy1vLXRyYW5zaXRpb24nOiAnb1RyYW5zaXRpb25FbmQnLAogICAgICAgICAgJy1tb3otdHJhbnNpdGlvbic6ICd0cmFuc2l0aW9uZW5kJywKICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24nOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcKICAgICAgICB9OyAvLyBJZiB3ZSdyZSBydW5uaW5nIGluIGEgYnJvd3Nlcmxlc3MgZW52aXJvbm1lbnQgKGVnLiBTU1IpLCBpdCBkb2Vzbid0IGFwcGx5LgogICAgICAgIC8vIFJldHVybiBhIHBsYWNlaG9sZGVyIHN0cmluZywgZm9yIGNvbnNpc3RlbnQgdHlwZSByZXR1cm4uCgogICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gJyc7CiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmFrZWVsZW1lbnQnKTsKICAgICAgICB2YXIgbWF0Y2ggPSBPYmplY3Qua2V5cyh0cmFuc2l0aW9ucykuZmluZChmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIGVsLnN0eWxlLmdldFByb3BlcnR5VmFsdWUodCkgIT09IHVuZGVmaW5lZDsKICAgICAgICB9KTsgLy8gSWYgbm8gYHRyYW5zaXRpb25gIGlzIGZvdW5kLCB3ZSBtdXN0IGJlIHJ1bm5pbmcgaW4gYSBicm93c2VyIHNvIGFuY2llbnQsCiAgICAgICAgLy8gUmVhY3QgaXRzZWxmIHdvbid0IHJ1bi4gUmV0dXJuIGFuIGVtcHR5IHN0cmluZywgZm9yIGNvbnNpc3RlbnQgdHlwZSByZXR1cm4KCiAgICAgICAgcmV0dXJuIG1hdGNoID8gdHJhbnNpdGlvbnNbbWF0Y2hdIDogJyc7CiAgICAgIH0KCiAgICAgIHZhciBnZXRSZWxhdGl2ZUJvdW5kaW5nQm94ID0gZXhwb3J0cy5nZXRSZWxhdGl2ZUJvdW5kaW5nQm94ID0gZnVuY3Rpb24gZ2V0UmVsYXRpdmVCb3VuZGluZ0JveChfcmVmMikgewogICAgICAgIHZhciBjaGlsZERvbU5vZGUgPSBfcmVmMi5jaGlsZERvbU5vZGUsCiAgICAgICAgICAgIHBhcmVudERvbU5vZGUgPSBfcmVmMi5wYXJlbnREb21Ob2RlLAogICAgICAgICAgICBnZXRQb3NpdGlvbiA9IF9yZWYyLmdldFBvc2l0aW9uOwogICAgICAgIHZhciBwYXJlbnRCb3ggPSBnZXRQb3NpdGlvbihwYXJlbnREb21Ob2RlKTsKCiAgICAgICAgdmFyIF9nZXRQb3NpdGlvbiA9IGdldFBvc2l0aW9uKGNoaWxkRG9tTm9kZSksCiAgICAgICAgICAgIHRvcCA9IF9nZXRQb3NpdGlvbi50b3AsCiAgICAgICAgICAgIGxlZnQgPSBfZ2V0UG9zaXRpb24ubGVmdCwKICAgICAgICAgICAgcmlnaHQgPSBfZ2V0UG9zaXRpb24ucmlnaHQsCiAgICAgICAgICAgIGJvdHRvbSA9IF9nZXRQb3NpdGlvbi5ib3R0b20sCiAgICAgICAgICAgIHdpZHRoID0gX2dldFBvc2l0aW9uLndpZHRoLAogICAgICAgICAgICBoZWlnaHQgPSBfZ2V0UG9zaXRpb24uaGVpZ2h0OwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgdG9wOiB0b3AgLSBwYXJlbnRCb3gudG9wLAogICAgICAgICAgbGVmdDogbGVmdCAtIHBhcmVudEJveC5sZWZ0LAogICAgICAgICAgcmlnaHQ6IHBhcmVudEJveC5yaWdodCAtIHJpZ2h0LAogICAgICAgICAgYm90dG9tOiBwYXJlbnRCb3guYm90dG9tIC0gYm90dG9tLAogICAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgICAgaGVpZ2h0OiBoZWlnaHQKICAgICAgICB9OwogICAgICB9OwogICAgICAvKiogZ2V0UG9zaXRpb25EZWx0YQogICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBkZWx0YSBiZXR3ZWVuIHR3byBib3VuZGluZyBib3hlcywgdG8gZmlndXJlIG91dAogICAgICAgKiBob3cgbWFueSBwaXhlbHMgb24gZWFjaCBheGlzIHRoZSBlbGVtZW50IGhhcyBtb3ZlZC4KICAgICAgICoKICAgICAgICovCgoKICAgICAgdmFyIGdldFBvc2l0aW9uRGVsdGEgPSBleHBvcnRzLmdldFBvc2l0aW9uRGVsdGEgPSBmdW5jdGlvbiBnZXRQb3NpdGlvbkRlbHRhKF9yZWYzKSB7CiAgICAgICAgdmFyIGNoaWxkRG9tTm9kZSA9IF9yZWYzLmNoaWxkRG9tTm9kZSwKICAgICAgICAgICAgY2hpbGRCb3VuZGluZ0JveCA9IF9yZWYzLmNoaWxkQm91bmRpbmdCb3gsCiAgICAgICAgICAgIHBhcmVudEJvdW5kaW5nQm94ID0gX3JlZjMucGFyZW50Qm91bmRpbmdCb3gsCiAgICAgICAgICAgIGdldFBvc2l0aW9uID0gX3JlZjMuZ2V0UG9zaXRpb247IC8vIFRFTVA6IEEgbXlzdGVyeSBidWcgaXMgc29tZXRpbWVzIGNhdXNpbmcgdW5uZWNlc3NhcnkgYm91bmRpbmdCb3hlcyB0bwoKICAgICAgICB2YXIgZGVmYXVsdEJveCA9IHsKICAgICAgICAgIHRvcDogMCwKICAgICAgICAgIGxlZnQ6IDAsCiAgICAgICAgICByaWdodDogMCwKICAgICAgICAgIGJvdHRvbTogMCwKICAgICAgICAgIGhlaWdodDogMCwKICAgICAgICAgIHdpZHRoOiAwCiAgICAgICAgfTsgLy8gT3VyIG9sZCBib3ggaXMgaXRzIGxhc3QgY2FsY3VsYXRlZCBwb3NpdGlvbiwgZGVyaXZlZCBvbiBtb3VudCBvciBhdCB0aGUKICAgICAgICAvLyBzdGFydCBvZiB0aGUgcHJldmlvdXMgYW5pbWF0aW9uLgoKICAgICAgICB2YXIgb2xkUmVsYXRpdmVCb3ggPSBjaGlsZEJvdW5kaW5nQm94IHx8IGRlZmF1bHRCb3g7CiAgICAgICAgdmFyIHBhcmVudEJveCA9IHBhcmVudEJvdW5kaW5nQm94IHx8IGRlZmF1bHRCb3g7IC8vIE91ciBuZXcgYm94IGlzIHRoZSBuZXcgZmluYWwgcmVzdGluZyBwbGFjZTogV2hlcmUgd2UgZXhwZWN0IGl0IHRvIHdpbmQgdXAKICAgICAgICAvLyBhZnRlciB0aGUgYW5pbWF0aW9uLiBGaXJzdCB3ZSBnZXQgdGhlIGJveCBpbiBhYnNvbHV0ZSB0ZXJtcyAoQUtBIHJlbGF0aXZlCiAgICAgICAgLy8gdG8gdGhlIHZpZXdwb3J0KSwgYW5kIHRoZW4gd2UgY2FsY3VsYXRlIGl0cyByZWxhdGl2ZSBib3ggKHJlbGF0aXZlIHRvIHRoZQogICAgICAgIC8vIHBhcmVudCBjb250YWluZXIpCgogICAgICAgIHZhciBuZXdBYnNvbHV0ZUJveCA9IGdldFBvc2l0aW9uKGNoaWxkRG9tTm9kZSk7CiAgICAgICAgdmFyIG5ld1JlbGF0aXZlQm94ID0gewogICAgICAgICAgdG9wOiBuZXdBYnNvbHV0ZUJveC50b3AgLSBwYXJlbnRCb3gudG9wLAogICAgICAgICAgbGVmdDogbmV3QWJzb2x1dGVCb3gubGVmdCAtIHBhcmVudEJveC5sZWZ0CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gW29sZFJlbGF0aXZlQm94LmxlZnQgLSBuZXdSZWxhdGl2ZUJveC5sZWZ0LCBvbGRSZWxhdGl2ZUJveC50b3AgLSBuZXdSZWxhdGl2ZUJveC50b3BdOwogICAgICB9OwogICAgICAvKiogcmVtb3ZlTm9kZUZyb21ET01GbG93CiAgICAgICAqIFRoaXMgbWV0aG9kIGRvZXMgc29tZXRoaW5nIHZlcnkgc25lYWt5OiBpdCByZW1vdmVzIGEgRE9NIG5vZGUgZnJvbSB0aGUKICAgICAgICogZG9jdW1lbnQgZmxvdywgYnV0IHdpdGhvdXQgYWN0dWFsbHkgY2hhbmdpbmcgaXRzIG9uLXNjcmVlbiBwb3NpdGlvbi4KICAgICAgICoKICAgICAgICogSXQgd29ya3MgYnkgY2FsY3VsYXRpbmcgd2hlcmUgdGhlIG5vZGUgaXMsIGFuZCB0aGVuIGFwcGx5aW5nIHN0eWxlcwogICAgICAgKiBzbyB0aGF0IGl0IHdpbmRzIHVwIGJlaW5nIHBvc2l0aW9uZWQgYWJzb2x1dGVseSwgYnV0IGluIGV4YWN0bHkgdGhlCiAgICAgICAqIHNhbWUgcGxhY2UuCiAgICAgICAqCiAgICAgICAqIFRoaXMgaXMgYSB2aXRhbCBwYXJ0IG9mIHRoZSBGTElQIHRlY2huaXF1ZS4KICAgICAgICovCgoKICAgICAgdmFyIHJlbW92ZU5vZGVGcm9tRE9NRmxvdyA9IGV4cG9ydHMucmVtb3ZlTm9kZUZyb21ET01GbG93ID0gZnVuY3Rpb24gcmVtb3ZlTm9kZUZyb21ET01GbG93KGNoaWxkRGF0YSwgdmVydGljYWxBbGlnbm1lbnQpIHsKICAgICAgICB2YXIgZG9tTm9kZSA9IGNoaWxkRGF0YS5kb21Ob2RlLAogICAgICAgICAgICBib3VuZGluZ0JveCA9IGNoaWxkRGF0YS5ib3VuZGluZ0JveDsKCiAgICAgICAgaWYgKCFkb21Ob2RlIHx8ICFib3VuZGluZ0JveCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gRm9yIHRoaXMgdG8gd29yaywgd2UgaGF2ZSB0byBvZmZzZXQgYW55IGdpdmVuIGBtYXJnaW5gLgoKCiAgICAgICAgdmFyIGNvbXB1dGVkID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tTm9kZSk7IC8vIFdlIG5lZWQgdG8gY2xlYW4gdXAgbWFyZ2lucywgYnkgY29udmVydGluZyBhbmQgcmVtb3Zpbmcgc3VmZml4OgogICAgICAgIC8vIGVnLiAnMjFweCcgLT4gMjEKCiAgICAgICAgdmFyIG1hcmdpbkF0dHJzID0gWydtYXJnaW4tdG9wJywgJ21hcmdpbi1sZWZ0JywgJ21hcmdpbi1yaWdodCddOwogICAgICAgIHZhciBtYXJnaW5zID0gbWFyZ2luQXR0cnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG1hcmdpbikgewogICAgICAgICAgdmFyIHByb3BlcnR5VmFsID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZShtYXJnaW4pOwogICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBhY2MsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbWFyZ2luLCBOdW1iZXIocHJvcGVydHlWYWwucmVwbGFjZSgncHgnLCAnJykpKSk7CiAgICAgICAgfSwge30pOyAvLyBJZiB3ZSdyZSBib3R0b20tYWxpZ25lZCwgd2UgbmVlZCB0byBhZGQgdGhlIGhlaWdodCBvZiB0aGUgY2hpbGQgdG8gaXRzCiAgICAgICAgLy8gdG9wIG9mZnNldC4gVGhpcyBpcyBiZWNhdXNlLCB3aGVuIHRoZSBjb250YWluZXIgaXMgYm90dG9tLWFsaWduZWQsIGl0cwogICAgICAgIC8vIGhlaWdodCBzaHJpbmtzIGZyb20gdGhlIHRvcCwgbm90IHRoZSBib3R0b20uIFdlJ3JlIHJlbW92aW5nIHRoaXMgbm9kZQogICAgICAgIC8vIGZyb20gdGhlIGZsb3csIHNvIHRoZSB0b3AgaXMgZ29pbmcgdG8gZHJvcCBieSBpdHMgaGVpZ2h0LgoKICAgICAgICB2YXIgdG9wT2Zmc2V0ID0gdmVydGljYWxBbGlnbm1lbnQgPT09ICdib3R0b20nID8gYm91bmRpbmdCb3gudG9wIC0gYm91bmRpbmdCb3guaGVpZ2h0IDogYm91bmRpbmdCb3gudG9wOwogICAgICAgIHZhciBzdHlsZXMgPSB7CiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgICAgIHRvcDogdG9wT2Zmc2V0IC0gbWFyZ2luc1snbWFyZ2luLXRvcCddICsgJ3B4JywKICAgICAgICAgIGxlZnQ6IGJvdW5kaW5nQm94LmxlZnQgLSBtYXJnaW5zWydtYXJnaW4tbGVmdCddICsgJ3B4JywKICAgICAgICAgIHJpZ2h0OiBib3VuZGluZ0JveC5yaWdodCAtIG1hcmdpbnNbJ21hcmdpbi1yaWdodCddICsgJ3B4JwogICAgICAgIH07CiAgICAgICAgYXBwbHlTdHlsZXNUb0RPTU5vZGUoewogICAgICAgICAgZG9tTm9kZTogZG9tTm9kZSwKICAgICAgICAgIHN0eWxlczogc3R5bGVzCiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiB1cGRhdGVIZWlnaHRQbGFjZWhvbGRlcgogICAgICAgKiBBbiBvcHRpb25hbCBwcm9wZXJ0eSB0byBGbGlwTW92ZSBpcyBhIGBtYWludGFpbkNvbnRhaW5lckhlaWdodGAgYm9vbGVhbi4KICAgICAgICogVGhpcyBwcm9wZXJ0eSBjcmVhdGVzIGEgbm9kZSB0aGF0IGZpbGxzIHNwYWNlLCBzbyB0aGF0IHRoZSBwYXJlbnQKICAgICAgICogY29udGFpbmVyIGRvZXNuJ3QgY29sbGFwc2Ugd2hlbiBpdHMgY2hpbGRyZW4gYXJlIHJlbW92ZWQgZnJvbSB0aGUKICAgICAgICogZG9jdW1lbnQgZmxvdy4KICAgICAgICovCgoKICAgICAgdmFyIHVwZGF0ZUhlaWdodFBsYWNlaG9sZGVyID0gZXhwb3J0cy51cGRhdGVIZWlnaHRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIHVwZGF0ZUhlaWdodFBsYWNlaG9sZGVyKF9yZWY0KSB7CiAgICAgICAgdmFyIGRvbU5vZGUgPSBfcmVmNC5kb21Ob2RlLAogICAgICAgICAgICBwYXJlbnREYXRhID0gX3JlZjQucGFyZW50RGF0YSwKICAgICAgICAgICAgZ2V0UG9zaXRpb24gPSBfcmVmNC5nZXRQb3NpdGlvbjsKICAgICAgICB2YXIgcGFyZW50RG9tTm9kZSA9IHBhcmVudERhdGEuZG9tTm9kZTsKICAgICAgICB2YXIgcGFyZW50Qm91bmRpbmdCb3ggPSBwYXJlbnREYXRhLmJvdW5kaW5nQm94OwoKICAgICAgICBpZiAoIXBhcmVudERvbU5vZGUgfHwgIXBhcmVudEJvdW5kaW5nQm94KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBXZSBuZWVkIHRvIGZpbmQgdGhlIGhlaWdodCBvZiB0aGUgY29udGFpbmVyICp3aXRob3V0KiB0aGUgcGxhY2Vob2xkZXIuCiAgICAgICAgLy8gU2luY2UgaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBwbGFjZWhvbGRlciBtaWdodCBhbHJlYWR5IGJlIHByZXNlbnQsCiAgICAgICAgLy8gd2UgZmlyc3Qgc2V0IGl0cyBoZWlnaHQgdG8gMC4KICAgICAgICAvLyBUaGlzIGFsbG93cyB0aGUgY29udGFpbmVyIHRvIGNvbGxhcHNlIGRvd24gdG8gdGhlIHNpemUgb2YganVzdCBpdHMKICAgICAgICAvLyBjb250ZW50IChwbHVzIGNvbnRhaW5lciBwYWRkaW5nIG9yIGJvcmRlcnMgaWYgYW55KS4KCgogICAgICAgIGFwcGx5U3R5bGVzVG9ET01Ob2RlKHsKICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUsCiAgICAgICAgICBzdHlsZXM6IHsKICAgICAgICAgICAgaGVpZ2h0OiAnMCcKICAgICAgICAgIH0KICAgICAgICB9KTsgLy8gRmluZCB0aGUgZGlzdGFuY2UgYnkgd2hpY2ggdGhlIGNvbnRhaW5lciB3b3VsZCBiZSBjb2xsYXBzZWQgYnkgZWxlbWVudHMKICAgICAgICAvLyBsZWF2aW5nLiBXZSBjb21wYXJlIHRoZSBmcmVzaGx5LWF2YWlsYWJsZSBwYXJlbnQgaGVpZ2h0IHdpdGggdGhlIG9yaWdpbmFsLAogICAgICAgIC8vIGNhY2hlZCBjb250YWluZXIgaGVpZ2h0LgoKICAgICAgICB2YXIgb3JpZ2luYWxQYXJlbnRIZWlnaHQgPSBwYXJlbnRCb3VuZGluZ0JveC5oZWlnaHQ7CiAgICAgICAgdmFyIGNvbGxhcHNlZFBhcmVudEhlaWdodCA9IGdldFBvc2l0aW9uKHBhcmVudERvbU5vZGUpLmhlaWdodDsKICAgICAgICB2YXIgcmVkdWN0aW9uSW5IZWlnaHQgPSBvcmlnaW5hbFBhcmVudEhlaWdodCAtIGNvbGxhcHNlZFBhcmVudEhlaWdodDsgLy8gSWYgdGhlIGNvbnRhaW5lciBoYXMgYmVjb21lIHNob3J0ZXIsIHVwZGF0ZSB0aGUgcGFkZGluZyBlbGVtZW50J3MKICAgICAgICAvLyBoZWlnaHQgdG8gdGFrZSB1cCB0aGUgZGlmZmVyZW5jZS4gT3RoZXJ3aXNlIHNldCBpdHMgaGVpZ2h0IHRvIHplcm8sCiAgICAgICAgLy8gc28gdGhhdCBpdCBoYXMgbm8gZWZmZWN0LgoKICAgICAgICB2YXIgc3R5bGVzID0gewogICAgICAgICAgaGVpZ2h0OiByZWR1Y3Rpb25JbkhlaWdodCA+IDAgPyByZWR1Y3Rpb25JbkhlaWdodCArICdweCcgOiAnMCcKICAgICAgICB9OwogICAgICAgIGFwcGx5U3R5bGVzVG9ET01Ob2RlKHsKICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUsCiAgICAgICAgICBzdHlsZXM6IHN0eWxlcwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIGdldE5hdGl2ZU5vZGUgPSBleHBvcnRzLmdldE5hdGl2ZU5vZGUgPSBmdW5jdGlvbiBnZXROYXRpdmVOb2RlKGVsZW1lbnQpIHsKICAgICAgICAvLyBXaGVuIHJ1bm5pbmcgaW4gYSB3aW5kb3dsZXNzIGVudmlyb25tZW50LCBhYm9ydCEKICAgICAgICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSAvLyBgZWxlbWVudGAgbWF5IGFscmVhZHkgYmUgYSBuYXRpdmUgbm9kZS4KCgogICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsKICAgICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICAgIH0gLy8gV2hpbGUgUmVhY3RET00ncyBgZmluZERPTU5vZGVgIGlzIGRpc2NvdXJhZ2VkLCBpdCdzIHRoZSBvbmx5CiAgICAgICAgLy8gcHVibGljbHktZXhwb3NlZCB3YXkgdG8gZmluZCB0aGUgdW5kZXJseWluZyBET00gbm9kZSBmb3IKICAgICAgICAvLyBjb21wb3NpdGUgY29tcG9uZW50cy4KCgogICAgICAgIHZhciBmb3VuZE5vZGUgPSAoMCwgX3JlYWN0RG9tLmZpbmRET01Ob2RlKShlbGVtZW50KTsKCiAgICAgICAgaWYgKCEoZm91bmROb2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7CiAgICAgICAgICAvLyBUZXh0IG5vZGVzIGFyZSBub3Qgc3VwcG9ydGVkCiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmb3VuZE5vZGU7CiAgICAgIH07CgogICAgICB2YXIgY3JlYXRlVHJhbnNpdGlvblN0cmluZyA9IGV4cG9ydHMuY3JlYXRlVHJhbnNpdGlvblN0cmluZyA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zaXRpb25TdHJpbmcoaW5kZXgsIHByb3BzKSB7CiAgICAgICAgdmFyIGRlbGF5ID0gcHJvcHMuZGVsYXksCiAgICAgICAgICAgIGR1cmF0aW9uID0gcHJvcHMuZHVyYXRpb247CiAgICAgICAgdmFyIHN0YWdnZXJEdXJhdGlvbkJ5ID0gcHJvcHMuc3RhZ2dlckR1cmF0aW9uQnksCiAgICAgICAgICAgIHN0YWdnZXJEZWxheUJ5ID0gcHJvcHMuc3RhZ2dlckRlbGF5QnksCiAgICAgICAgICAgIGVhc2luZyA9IHByb3BzLmVhc2luZzsKICAgICAgICBkZWxheSArPSBpbmRleCAqIHN0YWdnZXJEZWxheUJ5OwogICAgICAgIGR1cmF0aW9uICs9IGluZGV4ICogc3RhZ2dlckR1cmF0aW9uQnk7CiAgICAgICAgdmFyIGNzc1Byb3BlcnRpZXMgPSBbJ3RyYW5zZm9ybScsICdvcGFjaXR5J107CiAgICAgICAgcmV0dXJuIGNzc1Byb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChwcm9wKSB7CiAgICAgICAgICByZXR1cm4gcHJvcCArICcgJyArIGR1cmF0aW9uICsgJ21zICcgKyBlYXNpbmcgKyAnICcgKyBkZWxheSArICdtcyc7CiAgICAgICAgfSkuam9pbignLCAnKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTUwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187CiAgICAgIC8qIQogICAgICBBdXRvc2l6ZSAzLjAuMjEKICAgICAgbGljZW5zZTogTUlUCiAgICAgIGh0dHA6Ly93d3cuamFja2xtb29yZS5jb20vYXV0b3NpemUKICAgICAgKi8KCgogICAgICAoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbZXhwb3J0cywgbW9kdWxlXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gZmFjdG9yeSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSB0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID8gX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIGZhY3RvcnkoZXhwb3J0cywgbW9kdWxlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG1vZCA9IHsKICAgICAgICAgICAgZXhwb3J0czoge30KICAgICAgICAgIH07CiAgICAgICAgICBmYWN0b3J5KG1vZC5leHBvcnRzLCBtb2QpOwogICAgICAgICAgZ2xvYmFsLmF1dG9zaXplID0gbW9kLmV4cG9ydHM7CiAgICAgICAgfQogICAgICB9KSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cywgbW9kdWxlKSB7CiAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICB2YXIgbWFwID0gdHlwZW9mIE1hcCA9PT0gImZ1bmN0aW9uIiA/IG5ldyBNYXAoKSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBrZXlzID0gW107CiAgICAgICAgICB2YXIgdmFsdWVzID0gW107CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoYXM6IGZ1bmN0aW9uIGhhcyhrZXkpIHsKICAgICAgICAgICAgICByZXR1cm4ga2V5cy5pbmRleE9mKGtleSkgPiAtMTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlc1trZXlzLmluZGV4T2Yoa2V5KV07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgICBpZiAoa2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdkZWxldGUnOiBmdW5jdGlvbiBfZGVsZXRlKGtleSkgewogICAgICAgICAgICAgIHZhciBpbmRleCA9IGtleXMuaW5kZXhPZihrZXkpOwoKICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgICAgICAga2V5cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgdmFsdWVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0oKTsKCiAgICAgICAgdmFyIGNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkgewogICAgICAgICAgcmV0dXJuIG5ldyBFdmVudChuYW1lLCB7CiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHRyeSB7CiAgICAgICAgICBuZXcgRXZlbnQoJ3Rlc3QnKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvLyBJRSBkb2VzIG5vdCBzdXBwb3J0IGBuZXcgRXZlbnQoKWAKICAgICAgICAgIGNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkgewogICAgICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7CiAgICAgICAgICAgIGV2dC5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgZmFsc2UpOwogICAgICAgICAgICByZXR1cm4gZXZ0OwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFzc2lnbih0YSkgewogICAgICAgICAgaWYgKCF0YSB8fCAhdGEubm9kZU5hbWUgfHwgdGEubm9kZU5hbWUgIT09ICdURVhUQVJFQScgfHwgbWFwLmhhcyh0YSkpIHJldHVybjsKICAgICAgICAgIHZhciBoZWlnaHRPZmZzZXQgPSBudWxsOwogICAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gdGEuY2xpZW50V2lkdGg7CiAgICAgICAgICB2YXIgY2FjaGVkSGVpZ2h0ID0gbnVsbDsKCiAgICAgICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YSwgbnVsbCk7CgogICAgICAgICAgICBpZiAoc3R5bGUucmVzaXplID09PSAndmVydGljYWwnKSB7CiAgICAgICAgICAgICAgdGEuc3R5bGUucmVzaXplID0gJ25vbmUnOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlLnJlc2l6ZSA9PT0gJ2JvdGgnKSB7CiAgICAgICAgICAgICAgdGEuc3R5bGUucmVzaXplID0gJ2hvcml6b250YWwnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc3R5bGUuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnKSB7CiAgICAgICAgICAgICAgaGVpZ2h0T2Zmc2V0ID0gLShwYXJzZUZsb2F0KHN0eWxlLnBhZGRpbmdUb3ApICsgcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nQm90dG9tKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaGVpZ2h0T2Zmc2V0ID0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCkgKyBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKTsKICAgICAgICAgICAgfSAvLyBGaXggd2hlbiBhIHRleHRhcmVhIGlzIG5vdCBvbiBkb2N1bWVudCBib2R5IGFuZCBoZWlnaHRPZmZzZXQgaXMgTm90IGEgTnVtYmVyCgoKICAgICAgICAgICAgaWYgKGlzTmFOKGhlaWdodE9mZnNldCkpIHsKICAgICAgICAgICAgICBoZWlnaHRPZmZzZXQgPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICB1cGRhdGUoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjaGFuZ2VPdmVyZmxvdyh2YWx1ZSkgewogICAgICAgICAgICB7CiAgICAgICAgICAgICAgLy8gQ2hyb21lL1NhZmFyaS1zcGVjaWZpYyBmaXg6CiAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgdGV4dGFyZWEgeS1vdmVyZmxvdyBpcyBoaWRkZW4sIENocm9tZS9TYWZhcmkgZG8gbm90IHJlZmxvdyB0aGUgdGV4dCB0byBhY2NvdW50IGZvciB0aGUgc3BhY2UKICAgICAgICAgICAgICAvLyBtYWRlIGF2YWlsYWJsZSBieSByZW1vdmluZyB0aGUgc2Nyb2xsYmFyLiBUaGUgZm9sbG93aW5nIGZvcmNlcyB0aGUgbmVjZXNzYXJ5IHRleHQgcmVmbG93LgogICAgICAgICAgICAgIHZhciB3aWR0aCA9IHRhLnN0eWxlLndpZHRoOwogICAgICAgICAgICAgIHRhLnN0eWxlLndpZHRoID0gJzBweCc7IC8vIEZvcmNlIHJlZmxvdzoKCiAgICAgICAgICAgICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqLwoKICAgICAgICAgICAgICB0YS5vZmZzZXRXaWR0aDsKICAgICAgICAgICAgICAvKiBqc2hpbnQgaWdub3JlOmVuZCAqLwoKICAgICAgICAgICAgICB0YS5zdHlsZS53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRhLnN0eWxlLm92ZXJmbG93WSA9IHZhbHVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdldFBhcmVudE92ZXJmbG93cyhlbCkgewogICAgICAgICAgICB2YXIgYXJyID0gW107CgogICAgICAgICAgICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlIGluc3RhbmNlb2YgRWxlbWVudCkgewogICAgICAgICAgICAgIGlmIChlbC5wYXJlbnROb2RlLnNjcm9sbFRvcCkgewogICAgICAgICAgICAgICAgYXJyLnB1c2goewogICAgICAgICAgICAgICAgICBub2RlOiBlbC5wYXJlbnROb2RlLAogICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IGVsLnBhcmVudE5vZGUuc2Nyb2xsVG9wCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiByZXNpemUoKSB7CiAgICAgICAgICAgIHZhciBvcmlnaW5hbEhlaWdodCA9IHRhLnN0eWxlLmhlaWdodDsKICAgICAgICAgICAgdmFyIG92ZXJmbG93cyA9IGdldFBhcmVudE92ZXJmbG93cyh0YSk7CiAgICAgICAgICAgIHZhciBkb2NUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsgLy8gTmVlZGVkIGZvciBNb2JpbGUgSUUgKHRpY2tldCAjMjQwKQoKICAgICAgICAgICAgdGEuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgICAgICAgICB2YXIgZW5kSGVpZ2h0ID0gdGEuc2Nyb2xsSGVpZ2h0ICsgaGVpZ2h0T2Zmc2V0OwoKICAgICAgICAgICAgaWYgKHRhLnNjcm9sbEhlaWdodCA9PT0gMCkgewogICAgICAgICAgICAgIC8vIElmIHRoZSBzY3JvbGxIZWlnaHQgaXMgMCwgdGhlbiB0aGUgZWxlbWVudCBwcm9iYWJseSBoYXMgZGlzcGxheTpub25lIG9yIGlzIGRldGFjaGVkIGZyb20gdGhlIERPTS4KICAgICAgICAgICAgICB0YS5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodDsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRhLnN0eWxlLmhlaWdodCA9IGVuZEhlaWdodCArICdweCc7IC8vIHVzZWQgdG8gY2hlY2sgaWYgYW4gdXBkYXRlIGlzIGFjdHVhbGx5IG5lY2Vzc2FyeSBvbiB3aW5kb3cucmVzaXplCgogICAgICAgICAgICBjbGllbnRXaWR0aCA9IHRhLmNsaWVudFdpZHRoOyAvLyBwcmV2ZW50cyBzY3JvbGwtcG9zaXRpb24ganVtcGluZwoKICAgICAgICAgICAgb3ZlcmZsb3dzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgICAgZWwubm9kZS5zY3JvbGxUb3AgPSBlbC5zY3JvbGxUb3A7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKGRvY1RvcCkgewogICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSBkb2NUb3A7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgICAgICAgIHJlc2l6ZSgpOwogICAgICAgICAgICB2YXIgc3R5bGVIZWlnaHQgPSBNYXRoLnJvdW5kKHBhcnNlRmxvYXQodGEuc3R5bGUuaGVpZ2h0KSk7CiAgICAgICAgICAgIHZhciBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhLCBudWxsKTsgLy8gVXNpbmcgb2Zmc2V0SGVpZ2h0IGFzIGEgcmVwbGFjZW1lbnQgZm9yIGNvbXB1dGVkLmhlaWdodCBpbiBJRSwgYmVjYXVzZSBJRSBkb2VzIG5vdCBhY2NvdW50IHVzZSBvZiBib3JkZXItYm94CgogICAgICAgICAgICB2YXIgYWN0dWFsSGVpZ2h0ID0gY29tcHV0ZWQuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGNvbXB1dGVkLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0OyAvLyBUaGUgYWN0dWFsIGhlaWdodCBub3QgbWF0Y2hpbmcgdGhlIHN0eWxlIGhlaWdodCAoc2V0IHZpYSB0aGUgcmVzaXplIG1ldGhvZCkgaW5kaWNhdGVzIHRoYXQKICAgICAgICAgICAgLy8gdGhlIG1heC1oZWlnaHQgaGFzIGJlZW4gZXhjZWVkZWQsIGluIHdoaWNoIGNhc2UgdGhlIG92ZXJmbG93IHNob3VsZCBiZSBhbGxvd2VkLgoKICAgICAgICAgICAgaWYgKGFjdHVhbEhlaWdodCAhPT0gc3R5bGVIZWlnaHQpIHsKICAgICAgICAgICAgICBpZiAoY29tcHV0ZWQub3ZlcmZsb3dZID09PSAnaGlkZGVuJykgewogICAgICAgICAgICAgICAgY2hhbmdlT3ZlcmZsb3coJ3Njcm9sbCcpOwogICAgICAgICAgICAgICAgcmVzaXplKCk7CiAgICAgICAgICAgICAgICBhY3R1YWxIZWlnaHQgPSBjb21wdXRlZC5ib3hTaXppbmcgPT09ICdjb250ZW50LWJveCcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBOb3JtYWxseSBrZWVwIG92ZXJmbG93IHNldCB0byBoaWRkZW4sIHRvIGF2b2lkIGZsYXNoIG9mIHNjcm9sbGJhciBhcyB0aGUgdGV4dGFyZWEgZXhwYW5kcy4KICAgICAgICAgICAgICBpZiAoY29tcHV0ZWQub3ZlcmZsb3dZICE9PSAnaGlkZGVuJykgewogICAgICAgICAgICAgICAgY2hhbmdlT3ZlcmZsb3coJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgcmVzaXplKCk7CiAgICAgICAgICAgICAgICBhY3R1YWxIZWlnaHQgPSBjb21wdXRlZC5ib3hTaXppbmcgPT09ICdjb250ZW50LWJveCcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGNhY2hlZEhlaWdodCAhPT0gYWN0dWFsSGVpZ2h0KSB7CiAgICAgICAgICAgICAgY2FjaGVkSGVpZ2h0ID0gYWN0dWFsSGVpZ2h0OwogICAgICAgICAgICAgIHZhciBldnQgPSBjcmVhdGVFdmVudCgnYXV0b3NpemU6cmVzaXplZCcpOwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGEuZGlzcGF0Y2hFdmVudChldnQpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgey8vIEZpcmVmb3ggd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBkaXNwYXRjaEV2ZW50IGZvciBhIGRldGFjaGVkIGVsZW1lbnQKICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTg4OTM3NgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBwYWdlUmVzaXplID0gZnVuY3Rpb24gcGFnZVJlc2l6ZSgpIHsKICAgICAgICAgICAgaWYgKHRhLmNsaWVudFdpZHRoICE9PSBjbGllbnRXaWR0aCkgewogICAgICAgICAgICAgIHVwZGF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24gKHN0eWxlKSB7CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBwYWdlUmVzaXplLCBmYWxzZSk7CiAgICAgICAgICAgIHRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlLCBmYWxzZSk7CiAgICAgICAgICAgIHRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlLCBmYWxzZSk7CiAgICAgICAgICAgIHRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOmRlc3Ryb3knLCBkZXN0cm95LCBmYWxzZSk7CiAgICAgICAgICAgIHRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOnVwZGF0ZScsIHVwZGF0ZSwgZmFsc2UpOwogICAgICAgICAgICBPYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdGEuc3R5bGVba2V5XSA9IHN0eWxlW2tleV07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtYXBbJ2RlbGV0ZSddKHRhKTsKICAgICAgICAgIH0uYmluZCh0YSwgewogICAgICAgICAgICBoZWlnaHQ6IHRhLnN0eWxlLmhlaWdodCwKICAgICAgICAgICAgcmVzaXplOiB0YS5zdHlsZS5yZXNpemUsCiAgICAgICAgICAgIG92ZXJmbG93WTogdGEuc3R5bGUub3ZlcmZsb3dZLAogICAgICAgICAgICBvdmVyZmxvd1g6IHRhLnN0eWxlLm92ZXJmbG93WCwKICAgICAgICAgICAgd29yZFdyYXA6IHRhLnN0eWxlLndvcmRXcmFwCiAgICAgICAgICB9KTsKCiAgICAgICAgICB0YS5hZGRFdmVudExpc3RlbmVyKCdhdXRvc2l6ZTpkZXN0cm95JywgZGVzdHJveSwgZmFsc2UpOyAvLyBJRTkgZG9lcyBub3QgZmlyZSBvbnByb3BlcnR5Y2hhbmdlIG9yIG9uaW5wdXQgZm9yIGRlbGV0aW9ucywKICAgICAgICAgIC8vIHNvIGJpbmRpbmcgdG8gb25rZXl1cCB0byBjYXRjaCBtb3N0IG9mIHRob3NlIGV2ZW50cy4KICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIHdheSB0aGF0IEkga25vdyBvZiB0byBkZXRlY3Qgc29tZXRoaW5nIGxpa2UgJ2N1dCcgaW4gSUU5LgoKICAgICAgICAgIGlmICgnb25wcm9wZXJ0eWNoYW5nZScgaW4gdGEgJiYgJ29uaW5wdXQnIGluIHRhKSB7CiAgICAgICAgICAgIHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlLCBmYWxzZSk7CiAgICAgICAgICB9CgogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHBhZ2VSZXNpemUsIGZhbHNlKTsKICAgICAgICAgIHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlLCBmYWxzZSk7CiAgICAgICAgICB0YS5hZGRFdmVudExpc3RlbmVyKCdhdXRvc2l6ZTp1cGRhdGUnLCB1cGRhdGUsIGZhbHNlKTsKICAgICAgICAgIHRhLnN0eWxlLm92ZXJmbG93WCA9ICdoaWRkZW4nOwogICAgICAgICAgdGEuc3R5bGUud29yZFdyYXAgPSAnYnJlYWstd29yZCc7CiAgICAgICAgICBtYXAuc2V0KHRhLCB7CiAgICAgICAgICAgIGRlc3Ryb3k6IGRlc3Ryb3ksCiAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgICAgICB9KTsKICAgICAgICAgIGluaXQoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3kodGEpIHsKICAgICAgICAgIHZhciBtZXRob2RzID0gbWFwLmdldCh0YSk7CgogICAgICAgICAgaWYgKG1ldGhvZHMpIHsKICAgICAgICAgICAgbWV0aG9kcy5kZXN0cm95KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGUodGEpIHsKICAgICAgICAgIHZhciBtZXRob2RzID0gbWFwLmdldCh0YSk7CgogICAgICAgICAgaWYgKG1ldGhvZHMpIHsKICAgICAgICAgICAgbWV0aG9kcy51cGRhdGUoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBhdXRvc2l6ZSA9IG51bGw7IC8vIERvIG5vdGhpbmcgaW4gTm9kZS5qcyBlbnZpcm9ubWVudCBhbmQgSUU4IChvciBsb3dlcikKCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgYXV0b3NpemUgPSBmdW5jdGlvbiBhdXRvc2l6ZShlbCkgewogICAgICAgICAgICByZXR1cm4gZWw7CiAgICAgICAgICB9OwoKICAgICAgICAgIGF1dG9zaXplLmRlc3Ryb3kgPSBmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfTsKCiAgICAgICAgICBhdXRvc2l6ZS51cGRhdGUgPSBmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXV0b3NpemUgPSBmdW5jdGlvbiBhdXRvc2l6ZShlbCwgb3B0aW9ucykgewogICAgICAgICAgICBpZiAoZWwpIHsKICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsLmxlbmd0aCA/IGVsIDogW2VsXSwgZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhc3NpZ24oeCwgb3B0aW9ucyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBlbDsKICAgICAgICAgIH07CgogICAgICAgICAgYXV0b3NpemUuZGVzdHJveSA9IGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICBpZiAoZWwpIHsKICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsLmxlbmd0aCA/IGVsIDogW2VsXSwgZGVzdHJveSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBlbDsKICAgICAgICAgIH07CgogICAgICAgICAgYXV0b3NpemUudXBkYXRlID0gZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIGlmIChlbCkgewogICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWwubGVuZ3RoID8gZWwgOiBbZWxdLCB1cGRhdGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZWw7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBhdXRvc2l6ZTsKICAgICAgfSk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE1MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChsYW5ndWFnZSkgewogICAgICAgIHJldHVybiBuZXcgX3BvbHlnbG90MlsiZGVmYXVsdCJdKHsKICAgICAgICAgIHBocmFzZXM6IGkxOG5NYXBbbGFuZ3VhZ2VdIHx8IGkxOG5NYXAuZW4sCiAgICAgICAgICBsb2NhbGU6IGxhbmd1YWdlCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgX3BvbHlnbG90ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTIpOwoKICAgICAgdmFyIF9wb2x5Z2xvdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb2x5Z2xvdCk7CgogICAgICB2YXIgX3poQ04gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7CgogICAgICB2YXIgX3poQ04yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfemhDTik7CgogICAgICB2YXIgX3poVFcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NCk7CgogICAgICB2YXIgX3poVFcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfemhUVyk7CgogICAgICB2YXIgX2VuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpOwoKICAgICAgdmFyIF9lbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lbik7CgogICAgICB2YXIgX2VzRVMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nik7CgogICAgICB2YXIgX2VzRVMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNFUyk7CgogICAgICB2YXIgX2ZyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTcpOwoKICAgICAgdmFyIF9mcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mcik7CgogICAgICB2YXIgX3J1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpOwoKICAgICAgdmFyIF9ydTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ydSk7CgogICAgICB2YXIgX2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTkpOwoKICAgICAgdmFyIF9kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZSk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBpMThuTWFwID0gewogICAgICAgICd6aCc6IF96aENOMlsiZGVmYXVsdCJdLAogICAgICAgICd6aC1DTic6IF96aENOMlsiZGVmYXVsdCJdLAogICAgICAgICd6aC1UVyc6IF96aFRXMlsiZGVmYXVsdCJdLAogICAgICAgICdlbic6IF9lbjJbImRlZmF1bHQiXSwKICAgICAgICAnZXMtRVMnOiBfZXNFUzJbImRlZmF1bHQiXSwKICAgICAgICAnZnInOiBfZnIyWyJkZWZhdWx0Il0sCiAgICAgICAgJ3J1JzogX3J1MlsiZGVmYXVsdCJdLAogICAgICAgICdkZSc6IF9kZTJbImRlZmF1bHQiXQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsgLy8gICAgIChjKSAyMDEyIEFpcmJuYiwgSW5jLgogICAgICAvLwogICAgICAvLyAgICAgcG9seWdsb3QuanMgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEJTRAogICAgICAvLyAgICAgbGljZW5zZS4gRm9yIGFsbCBsaWNlbnNpbmcgaW5mb3JtYXRpb24sIGRldGFpbHMsIGFuZCBkb2N1bWVudGlvbjoKICAgICAgLy8gICAgIGh0dHA6Ly9haXJibmIuZ2l0aHViLmNvbS9wb2x5Z2xvdC5qcwogICAgICAvLwogICAgICAvLwogICAgICAvLyBQb2x5Z2xvdC5qcyBpcyBhbiBJMThuIGhlbHBlciBsaWJyYXJ5IHdyaXR0ZW4gaW4gSmF2YVNjcmlwdCwgbWFkZSB0bwogICAgICAvLyB3b3JrIGJvdGggaW4gdGhlIGJyb3dzZXIgYW5kIGluIE5vZGUuIEl0IHByb3ZpZGVzIGEgc2ltcGxlIHNvbHV0aW9uIGZvcgogICAgICAvLyBpbnRlcnBvbGF0aW9uIGFuZCBwbHVyYWxpemF0aW9uLCBiYXNlZCBvZmYgb2YgQWlyYm5iJ3MKICAgICAgLy8gZXhwZXJpZW5jZSBhZGRpbmcgSTE4biBmdW5jdGlvbmFsaXR5IHRvIGl0cyBCYWNrYm9uZS5qcyBhbmQgTm9kZSBhcHBzLgogICAgICAvLwogICAgICAvLyBQb2x5bGdsb3QgaXMgYWdub3N0aWMgdG8geW91ciB0cmFuc2xhdGlvbiBiYWNrZW5kLiBJdCBkb2Vzbid0IHBlcmZvcm0gYW55CiAgICAgIC8vIHRyYW5zbGF0aW9uOyBpdCBzaW1wbHkgZ2l2ZXMgeW91IGEgd2F5IHRvIG1hbmFnZSB0cmFuc2xhdGVkIHBocmFzZXMgZnJvbQogICAgICAvLyB5b3VyIGNsaWVudC0gb3Igc2VydmVyLXNpZGUgSmF2YVNjcmlwdCBhcHBsaWNhdGlvbi4KICAgICAgLy8KCgogICAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgICBpZiAodHJ1ZSkgewogICAgICAgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZmFjdG9yeShyb290KTsKICAgICAgICAgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKICAgICAgICB9IGVsc2UgaWYgKF90eXBlb2Y0KGV4cG9ydHMpID09PSAnb2JqZWN0JykgewogICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJvb3QpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByb290LlBvbHlnbG90ID0gZmFjdG9yeShyb290KTsKICAgICAgICB9CiAgICAgIH0pKHRoaXMsIGZ1bmN0aW9uIChyb290KSB7CiAgICAgICAgJ3VzZSBzdHJpY3QnOyAvLyAjIyMgUG9seWdsb3QgY2xhc3MgY29uc3RydWN0b3IKCiAgICAgICAgZnVuY3Rpb24gUG9seWdsb3Qob3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICB0aGlzLnBocmFzZXMgPSB7fTsKICAgICAgICAgIHRoaXMuZXh0ZW5kKG9wdGlvbnMucGhyYXNlcyB8fCB7fSk7CiAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhbGUgPSBvcHRpb25zLmxvY2FsZSB8fCAnZW4nOwogICAgICAgICAgdGhpcy5hbGxvd01pc3NpbmcgPSAhIW9wdGlvbnMuYWxsb3dNaXNzaW5nOwogICAgICAgICAgdGhpcy53YXJuID0gb3B0aW9ucy53YXJuIHx8IHdhcm47CiAgICAgICAgfSAvLyAjIyMgVmVyc2lvbgoKCiAgICAgICAgUG9seWdsb3QuVkVSU0lPTiA9ICcwLjQuMyc7IC8vICMjIyBwb2x5Z2xvdC5sb2NhbGUoW2xvY2FsZV0pCiAgICAgICAgLy8KICAgICAgICAvLyBHZXQgb3Igc2V0IGxvY2FsZS4gSW50ZXJuYWxseSwgUG9seWdsb3Qgb25seSB1c2VzIGxvY2FsZSBmb3IgcGx1cmFsaXphdGlvbi4KCiAgICAgICAgUG9seWdsb3QucHJvdG90eXBlLmxvY2FsZSA9IGZ1bmN0aW9uIChuZXdMb2NhbGUpIHsKICAgICAgICAgIGlmIChuZXdMb2NhbGUpIHRoaXMuY3VycmVudExvY2FsZSA9IG5ld0xvY2FsZTsKICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRMb2NhbGU7CiAgICAgICAgfTsgLy8gIyMjIHBvbHlnbG90LmV4dGVuZChwaHJhc2VzKQogICAgICAgIC8vCiAgICAgICAgLy8gVXNlIGBleHRlbmRgIHRvIHRlbGwgUG9seWdsb3QgaG93IHRvIHRyYW5zbGF0ZSBhIGdpdmVuIGtleS4KICAgICAgICAvLwogICAgICAgIC8vICAgICBwb2x5Z2xvdC5leHRlbmQoewogICAgICAgIC8vICAgICAgICJoZWxsbyI6ICJIZWxsbyIsCiAgICAgICAgLy8gICAgICAgImhlbGxvX25hbWUiOiAiSGVsbG8sICV7bmFtZX0iCiAgICAgICAgLy8gICAgIH0pOwogICAgICAgIC8vCiAgICAgICAgLy8gVGhlIGtleSBjYW4gYmUgYW55IHN0cmluZy4gIEZlZWwgZnJlZSB0byBjYWxsIGBleHRlbmRgIG11bHRpcGxlIHRpbWVzOwogICAgICAgIC8vIGl0IHdpbGwgb3ZlcnJpZGUgYW55IHBocmFzZXMgd2l0aCB0aGUgc2FtZSBrZXksIGJ1dCBsZWF2ZSBleGlzdGluZyBwaHJhc2VzCiAgICAgICAgLy8gdW50b3VjaGVkLgogICAgICAgIC8vCiAgICAgICAgLy8gSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBwYXNzIG5lc3RlZCBwaHJhc2Ugb2JqZWN0cywgd2hpY2ggZ2V0IGZsYXR0ZW5lZAogICAgICAgIC8vIGludG8gYW4gb2JqZWN0IHdpdGggdGhlIG5lc3RlZCBrZXlzIGNvbmNhdGVuYXRlZCB1c2luZyBkb3Qgbm90YXRpb24uCiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcG9seWdsb3QuZXh0ZW5kKHsKICAgICAgICAvLyAgICAgICAibmF2IjogewogICAgICAgIC8vICAgICAgICAgImhlbGxvIjogIkhlbGxvIiwKICAgICAgICAvLyAgICAgICAgICJoZWxsb19uYW1lIjogIkhlbGxvLCAle25hbWV9IiwKICAgICAgICAvLyAgICAgICAgICJzaWRlYmFyIjogewogICAgICAgIC8vICAgICAgICAgICAid2VsY29tZSI6ICJXZWxjb21lIgogICAgICAgIC8vICAgICAgICAgfQogICAgICAgIC8vICAgICAgIH0KICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgLy8KICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocG9seWdsb3QucGhyYXNlcyk7CiAgICAgICAgLy8gICAgIC8vIHsKICAgICAgICAvLyAgICAgLy8gICAnbmF2LmhlbGxvJzogJ0hlbGxvJywKICAgICAgICAvLyAgICAgLy8gICAnbmF2LmhlbGxvX25hbWUnOiAnSGVsbG8sICV7bmFtZX0nLAogICAgICAgIC8vICAgICAvLyAgICduYXYuc2lkZWJhci53ZWxjb21lJzogJ1dlbGNvbWUnCiAgICAgICAgLy8gICAgIC8vIH0KICAgICAgICAvLwogICAgICAgIC8vIGBleHRlbmRgIGFjY2VwdHMgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50LCBgcHJlZml4YCwgd2hpY2ggY2FuIGJlIHVzZWQKICAgICAgICAvLyB0byBwcmVmaXggZXZlcnkga2V5IGluIHRoZSBwaHJhc2VzIG9iamVjdCB3aXRoIHNvbWUgc3RyaW5nLCB1c2luZyBkb3QKICAgICAgICAvLyBub3RhdGlvbi4KICAgICAgICAvLwogICAgICAgIC8vICAgICBwb2x5Z2xvdC5leHRlbmQoewogICAgICAgIC8vICAgICAgICJoZWxsbyI6ICJIZWxsbyIsCiAgICAgICAgLy8gICAgICAgImhlbGxvX25hbWUiOiAiSGVsbG8sICV7bmFtZX0iCiAgICAgICAgLy8gICAgIH0sICJuYXYiKTsKICAgICAgICAvLwogICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhwb2x5Z2xvdC5waHJhc2VzKTsKICAgICAgICAvLyAgICAgLy8gewogICAgICAgIC8vICAgICAvLyAgICduYXYuaGVsbG8nOiAnSGVsbG8nLAogICAgICAgIC8vICAgICAvLyAgICduYXYuaGVsbG9fbmFtZSc6ICdIZWxsbywgJXtuYW1lfScKICAgICAgICAvLyAgICAgLy8gfQogICAgICAgIC8vCiAgICAgICAgLy8gVGhpcyBmZWF0dXJlIGlzIHVzZWQgaW50ZXJuYWxseSB0byBzdXBwb3J0IG5lc3RlZCBwaHJhc2Ugb2JqZWN0cy4KCgogICAgICAgIFBvbHlnbG90LnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAobW9yZVBocmFzZXMsIHByZWZpeCkgewogICAgICAgICAgdmFyIHBocmFzZTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbW9yZVBocmFzZXMpIHsKICAgICAgICAgICAgaWYgKG1vcmVQaHJhc2VzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICBwaHJhc2UgPSBtb3JlUGhyYXNlc1trZXldOwogICAgICAgICAgICAgIGlmIChwcmVmaXgpIGtleSA9IHByZWZpeCArICcuJyArIGtleTsKCiAgICAgICAgICAgICAgaWYgKF90eXBlb2Y0KHBocmFzZSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZChwaHJhc2UsIGtleSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMucGhyYXNlc1trZXldID0gcGhyYXNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07IC8vICMjIyBwb2x5Z2xvdC5jbGVhcigpCiAgICAgICAgLy8KICAgICAgICAvLyBDbGVhcnMgYWxsIHBocmFzZXMuIFVzZWZ1bCBmb3Igc3BlY2lhbCBjYXNlcywgc3VjaCBhcyBmcmVlaW5nCiAgICAgICAgLy8gdXAgbWVtb3J5IGlmIHlvdSBoYXZlIGxvdHMgb2YgcGhyYXNlcyBidXQgbm8gbG9uZ2VyIG5lZWQgdG8KICAgICAgICAvLyBwZXJmb3JtIGFueSB0cmFuc2xhdGlvbi4gQWxzbyB1c2VkIGludGVybmFsbHkgYnkgYHJlcGxhY2VgLgoKCiAgICAgICAgUG9seWdsb3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy5waHJhc2VzID0ge307CiAgICAgICAgfTsgLy8gIyMjIHBvbHlnbG90LnJlcGxhY2UocGhyYXNlcykKICAgICAgICAvLwogICAgICAgIC8vIENvbXBsZXRlbHkgcmVwbGFjZSB0aGUgZXhpc3RpbmcgcGhyYXNlcyB3aXRoIGEgbmV3IHNldCBvZiBwaHJhc2VzLgogICAgICAgIC8vIE5vcm1hbGx5LCBqdXN0IHVzZSBgZXh0ZW5kYCB0byBhZGQgbW9yZSBwaHJhc2VzLCBidXQgdW5kZXIgY2VydGFpbgogICAgICAgIC8vIGNpcmN1bXN0YW5jZXMsIHlvdSBtYXkgd2FudCB0byBtYWtlIHN1cmUgbm8gb2xkIHBocmFzZXMgYXJlIGx5aW5nIGFyb3VuZC4KCgogICAgICAgIFBvbHlnbG90LnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKG5ld1BocmFzZXMpIHsKICAgICAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgICAgIHRoaXMuZXh0ZW5kKG5ld1BocmFzZXMpOwogICAgICAgIH07IC8vICMjIyBwb2x5Z2xvdC50KGtleSwgb3B0aW9ucykKICAgICAgICAvLwogICAgICAgIC8vIFRoZSBtb3N0LXVzZWQgbWV0aG9kLiBQcm92aWRlIGEga2V5LCBhbmQgYHRgIHdpbGwgcmV0dXJuIHRoZQogICAgICAgIC8vIHBocmFzZS4KICAgICAgICAvLwogICAgICAgIC8vICAgICBwb2x5Z2xvdC50KCJoZWxsbyIpOwogICAgICAgIC8vICAgICA9PiAiSGVsbG8iCiAgICAgICAgLy8KICAgICAgICAvLyBUaGUgcGhyYXNlIHZhbHVlIGlzIHByb3ZpZGVkIGZpcnN0IGJ5IGEgY2FsbCB0byBgcG9seWdsb3QuZXh0ZW5kKClgIG9yCiAgICAgICAgLy8gYHBvbHlnbG90LnJlcGxhY2UoKWAuCiAgICAgICAgLy8KICAgICAgICAvLyBQYXNzIGluIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHBlcmZvcm0gaW50ZXJwb2xhdGlvbi4KICAgICAgICAvLwogICAgICAgIC8vICAgICBwb2x5Z2xvdC50KCJoZWxsb19uYW1lIiwge25hbWU6ICJTcGlrZSJ9KTsKICAgICAgICAvLyAgICAgPT4gIkhlbGxvLCBTcGlrZSIKICAgICAgICAvLwogICAgICAgIC8vIElmIHlvdSBsaWtlLCB5b3UgY2FuIHByb3ZpZGUgYSBkZWZhdWx0IHZhbHVlIGluIGNhc2UgdGhlIHBocmFzZSBpcyBtaXNzaW5nLgogICAgICAgIC8vIFVzZSB0aGUgc3BlY2lhbCBvcHRpb24ga2V5ICJfIiB0byBzcGVjaWZ5IGEgZGVmYXVsdC4KICAgICAgICAvLwogICAgICAgIC8vICAgICBwb2x5Z2xvdC50KCJpX2xpa2VfdG9fd3JpdGVfaW5fbGFuZ3VhZ2UiLCB7CiAgICAgICAgLy8gICAgICAgXzogIkkgbGlrZSB0byB3cml0ZSBpbiAle2xhbmd1YWdlfS4iLAogICAgICAgIC8vICAgICAgIGxhbmd1YWdlOiAiSmF2YVNjcmlwdCIKICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgLy8gICAgID0+ICJJIGxpa2UgdG8gd3JpdGUgaW4gSmF2YVNjcmlwdC4iCiAgICAgICAgLy8KCgogICAgICAgIFBvbHlnbG90LnByb3RvdHlwZS50ID0gZnVuY3Rpb24gKGtleSwgb3B0aW9ucykgewogICAgICAgICAgdmFyIHBocmFzZSwgcmVzdWx0OwogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPT0gbnVsbCA/IHt9IDogb3B0aW9uczsgLy8gYWxsb3cgbnVtYmVyIGFzIGEgcGx1cmFsaXphdGlvbiBzaG9ydGN1dAoKICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICBzbWFydF9jb3VudDogb3B0aW9ucwogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5waHJhc2VzW2tleV0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHBocmFzZSA9IHRoaXMucGhyYXNlc1trZXldOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5fID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBwaHJhc2UgPSBvcHRpb25zLl87CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWxsb3dNaXNzaW5nKSB7CiAgICAgICAgICAgIHBocmFzZSA9IGtleTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMud2FybignTWlzc2luZyB0cmFuc2xhdGlvbiBmb3Iga2V5OiAiJyArIGtleSArICciJyk7CiAgICAgICAgICAgIHJlc3VsdCA9IGtleTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodHlwZW9mIHBocmFzZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgb3B0aW9ucyA9IGNsb25lKG9wdGlvbnMpOwogICAgICAgICAgICByZXN1bHQgPSBjaG9vc2VQbHVyYWxGb3JtKHBocmFzZSwgdGhpcy5jdXJyZW50TG9jYWxlLCBvcHRpb25zLnNtYXJ0X2NvdW50KTsKICAgICAgICAgICAgcmVzdWx0ID0gaW50ZXJwb2xhdGUocmVzdWx0LCBvcHRpb25zKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH07IC8vICMjIyBwb2x5Z2xvdC5oYXMoa2V5KQogICAgICAgIC8vCiAgICAgICAgLy8gQ2hlY2sgaWYgcG9seWdsb3QgaGFzIGEgdHJhbnNsYXRpb24gZm9yIGdpdmVuIGtleQoKCiAgICAgICAgUG9seWdsb3QucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5waHJhc2VzOwogICAgICAgIH07IC8vICMjIyMgUGx1cmFsaXphdGlvbiBtZXRob2RzCiAgICAgICAgLy8gVGhlIHN0cmluZyB0aGF0IHNlcGFyYXRlcyB0aGUgZGlmZmVyZW50IHBocmFzZSBwb3NzaWJpbGl0aWVzLgoKCiAgICAgICAgdmFyIGRlbGltZXRlciA9ICd8fHx8JzsgLy8gTWFwcGluZyBmcm9tIHBsdXJhbGl6YXRpb24gZ3JvdXAgcGx1cmFsIGxvZ2ljLgoKICAgICAgICB2YXIgcGx1cmFsVHlwZXMgPSB7CiAgICAgICAgICBjaGluZXNlOiBmdW5jdGlvbiBjaGluZXNlKG4pIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9LAogICAgICAgICAgZ2VybWFuOiBmdW5jdGlvbiBnZXJtYW4obikgewogICAgICAgICAgICByZXR1cm4gbiAhPT0gMSA/IDEgOiAwOwogICAgICAgICAgfSwKICAgICAgICAgIGZyZW5jaDogZnVuY3Rpb24gZnJlbmNoKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gPiAxID8gMSA6IDA7CiAgICAgICAgICB9LAogICAgICAgICAgcnVzc2lhbjogZnVuY3Rpb24gcnVzc2lhbihuKSB7CiAgICAgICAgICAgIHJldHVybiBuICUgMTAgPT09IDEgJiYgbiAlIDEwMCAhPT0gMTEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyOwogICAgICAgICAgfSwKICAgICAgICAgIGN6ZWNoOiBmdW5jdGlvbiBjemVjaChuKSB7CiAgICAgICAgICAgIHJldHVybiBuID09PSAxID8gMCA6IG4gPj0gMiAmJiBuIDw9IDQgPyAxIDogMjsKICAgICAgICAgIH0sCiAgICAgICAgICBwb2xpc2g6IGZ1bmN0aW9uIHBvbGlzaChuKSB7CiAgICAgICAgICAgIHJldHVybiBuID09PSAxID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMjsKICAgICAgICAgIH0sCiAgICAgICAgICBpY2VsYW5kaWM6IGZ1bmN0aW9uIGljZWxhbmRpYyhuKSB7CiAgICAgICAgICAgIHJldHVybiBuICUgMTAgIT09IDEgfHwgbiAlIDEwMCA9PT0gMTEgPyAxIDogMDsKICAgICAgICAgIH0KICAgICAgICB9OyAvLyBNYXBwaW5nIGZyb20gcGx1cmFsaXphdGlvbiBncm91cCB0byBpbmRpdmlkdWFsIGxvY2FsZXMuCgogICAgICAgIHZhciBwbHVyYWxUeXBlVG9MYW5ndWFnZXMgPSB7CiAgICAgICAgICBjaGluZXNlOiBbJ2ZhJywgJ2lkJywgJ2phJywgJ2tvJywgJ2xvJywgJ21zJywgJ3RoJywgJ3RyJywgJ3poJ10sCiAgICAgICAgICBnZXJtYW46IFsnZGEnLCAnZGUnLCAnZW4nLCAnZXMnLCAnZmknLCAnZWwnLCAnaGUnLCAnaHUnLCAnaXQnLCAnbmwnLCAnbm8nLCAncHQnLCAnc3YnXSwKICAgICAgICAgIGZyZW5jaDogWydmcicsICd0bCcsICdwdC1iciddLAogICAgICAgICAgcnVzc2lhbjogWydocicsICdydSddLAogICAgICAgICAgY3plY2g6IFsnY3MnXSwKICAgICAgICAgIHBvbGlzaDogWydwbCddLAogICAgICAgICAgaWNlbGFuZGljOiBbJ2lzJ10KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsYW5nVG9UeXBlTWFwKG1hcHBpbmcpIHsKICAgICAgICAgIHZhciB0eXBlLAogICAgICAgICAgICAgIGxhbmdzLAogICAgICAgICAgICAgIGwsCiAgICAgICAgICAgICAgcmV0ID0ge307CgogICAgICAgICAgZm9yICh0eXBlIGluIG1hcHBpbmcpIHsKICAgICAgICAgICAgaWYgKG1hcHBpbmcuaGFzT3duUHJvcGVydHkodHlwZSkpIHsKICAgICAgICAgICAgICBsYW5ncyA9IG1hcHBpbmdbdHlwZV07CgogICAgICAgICAgICAgIGZvciAobCBpbiBsYW5ncykgewogICAgICAgICAgICAgICAgcmV0W2xhbmdzW2xdXSA9IHR5cGU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9IC8vIFRyaW0gYSBzdHJpbmcuCgoKICAgICAgICBmdW5jdGlvbiB0cmltKHN0cikgewogICAgICAgICAgdmFyIHRyaW1SZSA9IC9eXHMrfFxzKyQvZzsKICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSh0cmltUmUsICcnKTsKICAgICAgICB9IC8vIEJhc2VkIG9uIGEgcGhyYXNlIHRleHQgdGhhdCBjb250YWlucyBgbmAgcGx1cmFsIGZvcm1zIHNlcGFyYXRlZAogICAgICAgIC8vIGJ5IGBkZWxpbWV0ZXJgLCBhIGBsb2NhbGVgLCBhbmQgYSBgY291bnRgLCBjaG9vc2UgdGhlIGNvcnJlY3QKICAgICAgICAvLyBwbHVyYWwgZm9ybSwgb3Igbm9uZSBpZiBgY291bnRgIGlzIGBudWxsYC4KCgogICAgICAgIGZ1bmN0aW9uIGNob29zZVBsdXJhbEZvcm0odGV4dCwgbG9jYWxlLCBjb3VudCkgewogICAgICAgICAgdmFyIHJldCwgdGV4dHMsIGNob3NlblRleHQ7CgogICAgICAgICAgaWYgKGNvdW50ICE9IG51bGwgJiYgdGV4dCkgewogICAgICAgICAgICB0ZXh0cyA9IHRleHQuc3BsaXQoZGVsaW1ldGVyKTsKICAgICAgICAgICAgY2hvc2VuVGV4dCA9IHRleHRzW3BsdXJhbFR5cGVJbmRleChsb2NhbGUsIGNvdW50KV0gfHwgdGV4dHNbMF07CiAgICAgICAgICAgIHJldCA9IHRyaW0oY2hvc2VuVGV4dCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXQgPSB0ZXh0OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwbHVyYWxUeXBlTmFtZShsb2NhbGUpIHsKICAgICAgICAgIHZhciBsYW5nVG9QbHVyYWxUeXBlID0gbGFuZ1RvVHlwZU1hcChwbHVyYWxUeXBlVG9MYW5ndWFnZXMpOwogICAgICAgICAgcmV0dXJuIGxhbmdUb1BsdXJhbFR5cGVbbG9jYWxlXSB8fCBsYW5nVG9QbHVyYWxUeXBlLmVuOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcGx1cmFsVHlwZUluZGV4KGxvY2FsZSwgY291bnQpIHsKICAgICAgICAgIHJldHVybiBwbHVyYWxUeXBlc1twbHVyYWxUeXBlTmFtZShsb2NhbGUpXShjb3VudCk7CiAgICAgICAgfSAvLyAjIyMgaW50ZXJwb2xhdGUKICAgICAgICAvLwogICAgICAgIC8vIERvZXMgdGhlIGRpcnR5IHdvcmsuIENyZWF0ZXMgYSBgUmVnRXhwYCBvYmplY3QgZm9yIGVhY2gKICAgICAgICAvLyBpbnRlcnBvbGF0aW9uIHBsYWNlaG9sZGVyLgoKCiAgICAgICAgZnVuY3Rpb24gaW50ZXJwb2xhdGUocGhyYXNlLCBvcHRpb25zKSB7CiAgICAgICAgICBmb3IgKHZhciBhcmcgaW4gb3B0aW9ucykgewogICAgICAgICAgICBpZiAoYXJnICE9PSAnXycgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShhcmcpKSB7CiAgICAgICAgICAgICAgLy8gV2UgY3JlYXRlIGEgbmV3IGBSZWdFeHBgIGVhY2ggdGltZSBpbnN0ZWFkIG9mIHVzaW5nIGEgbW9yZS1lZmZpY2llbnQKICAgICAgICAgICAgICAvLyBzdHJpbmcgcmVwbGFjZSBzbyB0aGF0IHRoZSBzYW1lIGFyZ3VtZW50IGNhbiBiZSByZXBsYWNlZCBtdWx0aXBsZSB0aW1lcwogICAgICAgICAgICAgIC8vIGluIHRoZSBzYW1lIHBocmFzZS4KICAgICAgICAgICAgICBwaHJhc2UgPSBwaHJhc2UucmVwbGFjZShuZXcgUmVnRXhwKCclXFx7JyArIGFyZyArICdcXH0nLCAnZycpLCBvcHRpb25zW2FyZ10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHBocmFzZTsKICAgICAgICB9IC8vICMjIyB3YXJuCiAgICAgICAgLy8KICAgICAgICAvLyBQcm92aWRlcyBhIHdhcm5pbmcgaW4gdGhlIGNvbnNvbGUgaWYgYSBwaHJhc2Uga2V5IGlzIG1pc3NpbmcuCgoKICAgICAgICBmdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHsKICAgICAgICAgIHJvb3QuY29uc29sZSAmJiByb290LmNvbnNvbGUud2FybiAmJiByb290LmNvbnNvbGUud2FybignV0FSTklORzogJyArIG1lc3NhZ2UpOwogICAgICAgIH0gLy8gIyMjIGNsb25lCiAgICAgICAgLy8KICAgICAgICAvLyBDbG9uZSBhbiBvYmplY3QuCgoKICAgICAgICBmdW5jdGlvbiBjbG9uZShzb3VyY2UpIHsKICAgICAgICAgIHZhciByZXQgPSB7fTsKCiAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkgewogICAgICAgICAgICByZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBQb2x5Z2xvdDsKICAgICAgfSk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE1MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsayDliqDovb3kuK0gLi4uIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICLmnKrmib7liLDnm7jlhbPnmoQgJXtsaW5rfSDov5vooYzor4TorroiLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICLor7fogZTns7sgJXt1c2VyfSDliJ3lp4vljJbliJvlu7oiLAogICAgICAgICJpbml0LWlzc3VlIjogIuWIneWni+WMliBJc3N1ZSIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICLor7Tngrnku4DkuYgiLAogICAgICAgICJwcmV2aWV3IjogIumihOiniCIsCiAgICAgICAgImVkaXQiOiAi57yW6L6RIiwKICAgICAgICAiY29tbWVudCI6ICLor4TorroiLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogIuaUr+aMgSBNYXJrZG93biDor63ms5UiLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICLkvb/nlKggR2l0SHViIOeZu+W9lSIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogIuadpeWBmuesrOS4gOS4queVmeiogOeahOS6uuWQp++8gSIsCiAgICAgICAgImNvbW1lbnRlZCI6ICLlj5Hooajkuo4iLAogICAgICAgICJsb2FkLW1vcmUiOiAi5Yqg6L295pu05aSaIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSDmnaHor4TorroiLAogICAgICAgICJzb3J0LWFzYyI6ICLku47ml6fliLDmlrDmjpLluo8iLAogICAgICAgICJzb3J0LWRlc2MiOiAi5LuO5paw5Yiw5pen5o6S5bqPIiwKICAgICAgICAibG9nb3V0IjogIuazqOmUgCIsCiAgICAgICAgImFub255bW91cyI6ICLmnKrnmbvlvZXnlKjmiLciCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTU0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxrIOi8ieWFpeS4reKApiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAi5pyq5om+5Yiw55u46Zec55qEICV7bGlua30iLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICLoq4voga/ntaEgJXt1c2VyfSDliJ3lp4vljJboqZXoq5YiLAogICAgICAgICJpbml0LWlzc3VlIjogIuWIneWni+WMliBJc3N1ZSIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICLlr6vpu57ku4DpurwiLAogICAgICAgICJwcmV2aWV3IjogIumgkOimvSIsCiAgICAgICAgImVkaXQiOiAi57eo6LyvIiwKICAgICAgICAiY29tbWVudCI6ICLoqZXoq5YiLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogIuaUr+aPtCBNYXJrZG93biDoqp7ms5UiLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICLkvb/nlKggR2l0SHViIOeZu+WFpSIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogIuaIkOeCuummluWAi+eVmeiogOeahOS6uuWQp++8gSIsCiAgICAgICAgImNvbW1lbnRlZCI6ICLoqZXoq5bmlrwiLAogICAgICAgICJsb2FkLW1vcmUiOiAi6LyJ5YWl5pu05aSaIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSDnrYboqZXoq5YiLAogICAgICAgICJzb3J0LWFzYyI6ICLlvp7oiIroh7PmlrDmjpLluo8iLAogICAgICAgICJzb3J0LWRlc2MiOiAi5b6e5paw6Iez6IiK5o6S5bqPIiwKICAgICAgICAibG9nb3V0IjogIueZu+WHuiIsCiAgICAgICAgImFub255bW91cyI6ICLoqKrlrqIiCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTU1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxraW5nIC4uLiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAiUmVsYXRlZCAle2xpbmt9IG5vdCBmb3VuZCIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogIlBsZWFzZSBjb250YWN0ICV7dXNlcn0gdG8gaW5pdGlhbGl6ZSB0aGUgY29tbWVudCIsCiAgICAgICAgImluaXQtaXNzdWUiOiAiSW5pdCBJc3N1ZSIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICJMZWF2ZSBhIGNvbW1lbnQiLAogICAgICAgICJwcmV2aWV3IjogIlByZXZpZXciLAogICAgICAgICJlZGl0IjogIkVkaXQiLAogICAgICAgICJjb21tZW50IjogIkNvbW1lbnQiLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogIk1hcmtkb3duIGlzIHN1cHBvcnRlZCIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogIkxvZ2luIHdpdGggR2l0SHViIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAiQmUgdGhlIGZpcnN0IHBlcnNvbiB0byBsZWF2ZSBhIGNvbW1lbnQhIiwKICAgICAgICAiY29tbWVudGVkIjogImNvbW1lbnRlZCIsCiAgICAgICAgImxvYWQtbW9yZSI6ICJMb2FkIG1vcmUiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9IGNvbW1lbnQgfHx8fCAle2NvdW50c30gY29tbWVudHMiLAogICAgICAgICJzb3J0LWFzYyI6ICJTb3J0IGJ5IE9sZGVzdCIsCiAgICAgICAgInNvcnQtZGVzYyI6ICJTb3J0IGJ5IExhdGVzdCIsCiAgICAgICAgImxvZ291dCI6ICJMb2dvdXQiLAogICAgICAgICJhbm9ueW1vdXMiOiAiQW5vbnltb3VzIgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsa2luZyAuLi4iLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogIkxpbmsgJXtsaW5rfSBubyBlbmNvbnRyYWRvIiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAiUG9yIGZhdm9yIGNvbnRhY3RhIGNvbiAle3VzZXJ9IHBhcmEgaW5pY2lhbGl6YXIgZWwgY29tZW50YXJpbyIsCiAgICAgICAgImluaXQtaXNzdWUiOiAiSW5pY2lhciBJc3N1ZSIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICJEZWphIHVuIGNvbWVudGFyaW8iLAogICAgICAgICJwcmV2aWV3IjogIkF2YW5jZSIsCiAgICAgICAgImVkaXQiOiAiRWRpdGFyIiwKICAgICAgICAiY29tbWVudCI6ICJDb21lbnRhcmlvIiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICJNYXJrZG93biBlcyBzb3BvcnRhZG8iLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICJFbnRyYXIgY29uIEdpdEh1YiIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogIlPDqSBlbCBwcmltZXJvIGVuIGRlamFyIHVuIGNvbWVudGFyaW8hIiwKICAgICAgICAiY29tbWVudGVkIjogImNvbWVudMOzIiwKICAgICAgICAibG9hZC1tb3JlIjogIkNhcmdhciBtw6FzIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSBjb21lbnRhcmlvIHx8fHwgJXtjb3VudHN9IGNvbWVudGFyaW9zIiwKICAgICAgICAic29ydC1hc2MiOiAiT3JkZW5hciBwb3IgQW50aWd1b3MiLAogICAgICAgICJzb3J0LWRlc2MiOiAiT3JkZW5hciBwb3IgUmVjaWVudGVzIiwKICAgICAgICAibG9nb3V0IjogIlNhbGlyIiwKICAgICAgICAiYW5vbnltb3VzIjogIkFuw7NuaW1vIgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsa2luZyAuLi4iLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogIkxpZW4gJXtsaW5rfSBub24gdHJvdXbDqSIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogIlPigJlpbCB2b3VzIHBsYcOudCBjb250YWN0ZXogJXt1c2VyfSBwb3VyIGluaXRpYWxpc2VyIGxlcyBjb21tZW50YWlyZXMiLAogICAgICAgICJpbml0LWlzc3VlIjogIkluaXRpYWxpc2F0aW9uIGRlcyBpc3N1ZXMiLAogICAgICAgICJsZWF2ZS1hLWNvbW1lbnQiOiAiTGFpc3NlciB1biBjb21tZW50YWlyZSIsCiAgICAgICAgInByZXZpZXciOiAiQXBlcsOndSIsCiAgICAgICAgImVkaXQiOiAiTW9kaWZpZXIiLAogICAgICAgICJjb21tZW50IjogIkNvbW1lbnRhaXJlIiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICJNYXJrZG93biBlc3Qgc3VwcG9ydMOpIiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAiU2UgY29ubmVjdGVyIGF2ZWMgR2l0SHViIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAiw4p0cmUgbGUgcHJlbWllciDDoCBsYWlzc2VyIHVuIGNvbW1lbnRhaXJlICEiLAogICAgICAgICJjb21tZW50ZWQiOiAiY29tbWVudGVyIiwKICAgICAgICAibG9hZC1tb3JlIjogIkNoYXJnZXIgcGx1cyIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30gY29tbWVudGFpcmUgfHx8fCAle2NvdW50c30gY29tbWVudGFpcmVzIiwKICAgICAgICAic29ydC1hc2MiOiAiVHJpZXIgcGFyIHBsdXMgYW5jaWVuIiwKICAgICAgICAic29ydC1kZXNjIjogIlRyaWVyIHBhciBwbHVzIHLDqWNlbnQiLAogICAgICAgICJsb2dvdXQiOiAiRMOpY29ubmV4aW9uIiwKICAgICAgICAiYW5vbnltb3VzIjogIkFub255bWUiCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTU4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxraW5nIC4uLiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAi0KHQstGP0LfQsNC90L3Ri9C1ICV7bGlua30g0L3QtSDQvdCw0LnQtNC10L3RiyIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogItCf0L7QttCw0LvRg9C50YHRgtCwLCDRgdCy0Y/QttC40YLQtdGB0Ywg0YEgJXt1c2VyfSDRh9GC0L7QsdGLINC40L3QuNGG0LjQsNC70LjQt9C40YDQvtCy0LDRgtGMINC60L7QvNC80LXQvdGC0LDRgNC40LkiLAogICAgICAgICJpbml0LWlzc3VlIjogItCS0YvQv9GD0YHQuiDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICLQntGB0YLQsNCy0LjRgtGMINC60L7QvNC80LXQvdGC0LDRgNC40LkiLAogICAgICAgICJwcmV2aWV3IjogItCf0YDQtdC00LLQsNGA0LjRgtC10LvRjNC90YvQuSDQv9GA0L7RgdC80L7RgtGAIiwKICAgICAgICAiZWRpdCI6ICJQ0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMIiwKICAgICAgICAiY29tbWVudCI6ICLQmtC+0LzQvNC10L3RgtCw0YDQuNC5IiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICLQn9C+0LTQtNC10YDQttC40LLQsNC10YLRgdGPIE1hcmtkb3duIiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAi0JLRhdC+0LQg0YfQtdGA0LXQtyBHaXRIdWIiLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICLQkdGD0LTRjNGC0LUg0L/QtdGA0LLRi9C8LCDQutGC0L4g0L7RgdGC0LDQstC40Lsg0LrQvtC80LzQtdC90YLQsNGA0LjQuSIsCiAgICAgICAgImNvbW1lbnRlZCI6ICLQv9GA0L7QutC+0LzQvNC10L3RgtC40YDQvtCy0LDQvdC90YvQuSIsCiAgICAgICAgImxvYWQtbW9yZSI6ICLQl9Cw0LPRgNGD0LfQuNGC0Ywg0LXRidGRIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSDQutC+0LzQvNC10L3RgtCw0YDQuNC5IHx8fHwgJXtjb3VudHN9INC60L7QvNC80LXQvdGC0LDRgNGM0LXQsiIsCiAgICAgICAgInNvcnQtYXNjIjogItCh0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0L/QviDRgdGC0LDRgNGL0LwiLAogICAgICAgICJzb3J0LWRlc2MiOiAi0KHQvtGA0YLQuNGA0L7QstCw0YLRjCDQv9C+INC/0L7RgdC70LXQtNC90LjQvCIsCiAgICAgICAgImxvZ291dCI6ICLQktGL0YXQvtC0IiwKICAgICAgICAiYW5vbnltb3VzIjogItCQ0L3QvtC90LjQvNC90YvQuSIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGtpbmcgLi4uIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICJadWdlaMO2cmlnZXIgJXtsaW5rfSBuaWNodCBnZWZ1bmRlbiIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogIkJpdHRlIGtvbnRha3RpZXJlICV7dXNlcn0gdW0gZGVuIEtvbW1lbnRhciB6dSBpbml0aWFsaXNpZXJlbiIsCiAgICAgICAgImluaXQtaXNzdWUiOiAiSW5pdGlhbGlzaWVyZSBJc3N1ZSIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICJIaW50ZXJsYXNzZSBlaW5lbiBLb21tZW50YXIiLAogICAgICAgICJwcmV2aWV3IjogIlZvcnNjaGF1IiwKICAgICAgICAiZWRpdCI6ICJFZGl0aWVyZW4iLAogICAgICAgICJjb21tZW50IjogIktvbW1lbnRpZXJlbiIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAiTWFya2Rvd24gd2lyZCB1bnRlcnN0w7x0enQiLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICJNaXQgR2l0SHViLUFjY291bnQgYW5tZWxkZW4iLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICJTZWkgZGllIGVyc3RlIFBlcnNvbiwgd2VsY2hlIGVpbmVuIEtvbW1lbnRhciBoaW50ZXJsw6Rzc3QhIiwKICAgICAgICAiY29tbWVudGVkIjogImtvbW1lbnRpZXJ0ZSIsCiAgICAgICAgImxvYWQtbW9yZSI6ICJaZWlnZSBtZWhyIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSBLb21tZW50YXIgfHx8fCAle2NvdW50c30gS29tbWVudGFyZSIsCiAgICAgICAgInNvcnQtYXNjIjogIsOEbHRlc3RlIHp1ZXJzdCIsCiAgICAgICAgInNvcnQtZGVzYyI6ICJOZXVzdGUgenVlcnN0IiwKICAgICAgICAibG9nb3V0IjogIkFibWVsZGVuIiwKICAgICAgICAiYW5vbnltb3VzIjogIkFub255bSIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgey8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luCgogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Myk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmtleXM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTYzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pCiAgICAgIHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoKICAgICAgdmFyICRrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KSgna2V5cycsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCkgewogICAgICAgICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE2NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICB2YXIgX2lzSXRlcmFibGUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjUpOwoKICAgICAgdmFyIF9pc0l0ZXJhYmxlMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzSXRlcmFibGUyKTsKCiAgICAgIHZhciBfZ2V0SXRlcmF0b3IyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpOwoKICAgICAgdmFyIF9nZXRJdGVyYXRvcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRJdGVyYXRvcjIpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsKICAgICAgICAgIHZhciBfYXJyID0gW107CiAgICAgICAgICB2YXIgX24gPSB0cnVlOwogICAgICAgICAgdmFyIF9kID0gZmFsc2U7CiAgICAgICAgICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAoMCwgX2dldEl0ZXJhdG9yM1siZGVmYXVsdCJdKShhcnIpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICAgICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICAgICAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9kID0gdHJ1ZTsKICAgICAgICAgICAgX2UgPSBlcnI7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdKSBfaVsicmV0dXJuIl0oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9hcnI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgewogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgICAgICAgICByZXR1cm4gYXJyOwogICAgICAgICAgfSBlbHNlIGlmICgoMCwgX2lzSXRlcmFibGUzWyJkZWZhdWx0Il0pKE9iamVjdChhcnIpKSkgewogICAgICAgICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0oKTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTY1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NiksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjcpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY3KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgY2xhc3NvZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwoKICAgICAgdmFyIElURVJBVE9SID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKTsKCiAgICAgIHZhciBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5pc0l0ZXJhYmxlID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgdmFyIE8gPSBPYmplY3QoaXQpOwogICAgICAgIHJldHVybiBPW0lURVJBVE9SXSAhPT0gdW5kZWZpbmVkIHx8ICdAQGl0ZXJhdG9yJyBpbiBPIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICB8fCBJdGVyYXRvcnMuaGFzT3duUHJvcGVydHkoY2xhc3NvZihPKSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE2OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxNjkpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjApOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MCk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTcwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHZhciBpdGVyRm4gPSBnZXQoaXQpOwogICAgICAgIGlmICh0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpIHRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGl0ZXJhYmxlIScpOwogICAgICAgIHJldHVybiBhbk9iamVjdChpdGVyRm4uY2FsbChpdCkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNzEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcyKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNzIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgdmFyIGJpbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKCiAgICAgIHZhciBBeGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTczKTsKCiAgICAgIHZhciBtZXJnZUNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpOwoKICAgICAgdmFyIGRlZmF1bHRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7CiAgICAgIC8qKgogICAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3MKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2UKICAgICAgICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHsKICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTsKICAgICAgICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTsgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2UKCiAgICAgICAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpOyAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2UKCiAgICAgICAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTsKICAgICAgICByZXR1cm4gaW5zdGFuY2U7CiAgICAgIH0gLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkCgoKICAgICAgdmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpOyAvLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2UKCiAgICAgIGF4aW9zLkF4aW9zID0gQXhpb3M7IC8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXMKCiAgICAgIGF4aW9zLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykgewogICAgICAgIHJldHVybiBjcmVhdGVJbnN0YW5jZShtZXJnZUNvbmZpZyhheGlvcy5kZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTsKICAgICAgfTsgLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuCgoKICAgICAgYXhpb3MuQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7CiAgICAgIGF4aW9zLkNhbmNlbFRva2VuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODYpOwogICAgICBheGlvcy5pc0NhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOyAvLyBFeHBvc2UgYWxsL3NwcmVhZAoKICAgICAgYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgfTsKCiAgICAgIGF4aW9zLnNwcmVhZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTg3KTsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBheGlvczsgLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0CgogICAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gYXhpb3M7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTczICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIHZhciBidWlsZFVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpOwoKICAgICAgdmFyIEludGVyY2VwdG9yTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTc0KTsKCiAgICAgIHZhciBkaXNwYXRjaFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NSk7CgogICAgICB2YXIgbWVyZ2VDb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTsKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBBeGlvcwogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHsKICAgICAgICB0aGlzLmRlZmF1bHRzID0gaW5zdGFuY2VDb25maWc7CiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7CiAgICAgICAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksCiAgICAgICAgICByZXNwb25zZTogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpCiAgICAgICAgfTsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGlzcGF0Y2ggYSByZXF1ZXN0CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKQogICAgICAgKi8KCgogICAgICBBeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7CiAgICAgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAgICAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSQogICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykgewogICAgICAgICAgY29uZmlnID0gYXJndW1lbnRzWzFdIHx8IHt9OwogICAgICAgICAgY29uZmlnLnVybCA9IGFyZ3VtZW50c1swXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uZmlnID0gY29uZmlnIHx8IHt9OwogICAgICAgIH0KCiAgICAgICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTsgLy8gU2V0IGNvbmZpZy5tZXRob2QKCiAgICAgICAgaWYgKGNvbmZpZy5tZXRob2QpIHsKICAgICAgICAgIGNvbmZpZy5tZXRob2QgPSBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLm1ldGhvZCkgewogICAgICAgICAgY29uZmlnLm1ldGhvZCA9IHRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbmZpZy5tZXRob2QgPSAnZ2V0JzsKICAgICAgICB9IC8vIEhvb2sgdXAgaW50ZXJjZXB0b3JzIG1pZGRsZXdhcmUKCgogICAgICAgIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07CiAgICAgICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTsKICAgICAgICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHsKICAgICAgICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHsKICAgICAgICAgIGNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7CiAgICAgICAgfSk7CgogICAgICAgIHdoaWxlIChjaGFpbi5sZW5ndGgpIHsKICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2hhaW4uc2hpZnQoKSwgY2hhaW4uc2hpZnQoKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgfTsKCiAgICAgIEF4aW9zLnByb3RvdHlwZS5nZXRVcmkgPSBmdW5jdGlvbiBnZXRVcmkoY29uZmlnKSB7CiAgICAgICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTsKICAgICAgICByZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sICcnKTsKICAgICAgfTsgLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzCgoKICAgICAgdXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7CiAgICAgICAgLyplc2xpbnQgZnVuYy1uYW1lczowKi8KICAgICAgICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICh1cmwsIGNvbmZpZykgewogICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHsKICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgIHVybDogdXJsCiAgICAgICAgICB9KSk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7CiAgICAgICAgLyplc2xpbnQgZnVuYy1uYW1lczowKi8KICAgICAgICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIGNvbmZpZykgewogICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHsKICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICB9KSk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gQXhpb3M7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTc0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIGZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHsKICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2sKICAgICAgICoKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYAogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYAogICAgICAgKgogICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyCiAgICAgICAqLwoKCiAgICAgIEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHsKICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goewogICAgICAgICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsCiAgICAgICAgICByZWplY3RlZDogcmVqZWN0ZWQKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxOwogICAgICB9OwogICAgICAvKioKICAgICAgICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWAKICAgICAgICovCgoKICAgICAgSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5lamVjdCA9IGZ1bmN0aW9uIGVqZWN0KGlkKSB7CiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7CiAgICAgICAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioKICAgICAgICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnMKICAgICAgICoKICAgICAgICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnkKICAgICAgICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yCiAgICAgICAqLwoKCiAgICAgIEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHsKICAgICAgICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHsKICAgICAgICAgIGlmIChoICE9PSBudWxsKSB7CiAgICAgICAgICAgIGZuKGgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNlcHRvck1hbmFnZXI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTc1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIHZhciB0cmFuc2Zvcm1EYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzYpOwoKICAgICAgdmFyIGlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7CgogICAgICB2YXIgZGVmYXVsdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKICAgICAgLyoqCiAgICAgICAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7CiAgICAgICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikgewogICAgICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0CiAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWQKICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7CiAgICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpOyAvLyBFbnN1cmUgaGVhZGVycyBleGlzdAoKICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9OyAvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhCgogICAgICAgIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShjb25maWcuZGF0YSwgY29uZmlnLmhlYWRlcnMsIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTsgLy8gRmxhdHRlbiBoZWFkZXJzCgogICAgICAgIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LCBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSwgY29uZmlnLmhlYWRlcnMpOwogICAgICAgIHV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnY29tbW9uJ10sIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkgewogICAgICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyOwogICAgICAgIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7IC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhCgogICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEocmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuaGVhZGVycywgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlKTsKICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7CiAgICAgICAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHsKICAgICAgICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpOyAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YQoKICAgICAgICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHsKICAgICAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEocmVhc29uLnJlc3BvbnNlLmRhdGEsIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLCBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE3NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CiAgICAgIC8qKgogICAgICAgKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gZGF0YSBUaGUgZGF0YSB0byBiZSB0cmFuc2Zvcm1lZAogICAgICAgKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZQogICAgICAgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zCiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybWVkIGRhdGEKICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsIGhlYWRlcnMsIGZucykgewogICAgICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLwogICAgICAgIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHsKICAgICAgICAgIGRhdGEgPSBmbihkYXRhLCBoZWFkZXJzKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTc3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkgewogICAgICAgIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkgewogICAgICAgICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkgewogICAgICAgICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlOwogICAgICAgICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTc4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGNyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7CiAgICAgIC8qKgogICAgICAgKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS4KICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLgogICAgICAgKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLgogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzOwoKICAgICAgICBpZiAoIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHsKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UuY29uZmlnLCBudWxsLCByZXNwb25zZS5yZXF1ZXN0LCByZXNwb25zZSkpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTc5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS4KICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuCiAgICAgICAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLgogICAgICAgKi8KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7CiAgICAgICAgZXJyb3IuY29uZmlnID0gY29uZmlnOwoKICAgICAgICBpZiAoY29kZSkgewogICAgICAgICAgZXJyb3IuY29kZSA9IGNvZGU7CiAgICAgICAgfQoKICAgICAgICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDsKICAgICAgICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICAgIGVycm9yLmlzQXhpb3NFcnJvciA9IHRydWU7CgogICAgICAgIGVycm9yLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8vIFN0YW5kYXJkCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSwKICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgICAvLyBNaWNyb3NvZnQKICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsCiAgICAgICAgICAgIC8vIE1vemlsbGEKICAgICAgICAgICAgZmlsZU5hbWU6IHRoaXMuZmlsZU5hbWUsCiAgICAgICAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlciwKICAgICAgICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlciwKICAgICAgICAgICAgc3RhY2s6IHRoaXMuc3RhY2ssCiAgICAgICAgICAgIC8vIEF4aW9zCiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsCiAgICAgICAgICAgIGNvZGU6IHRoaXMuY29kZQogICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBpc0Fic29sdXRlVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODEpOwoKICAgICAgdmFyIGNvbWJpbmVVUkxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpOwogICAgICAvKioKICAgICAgICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBiYXNlVVJMIHdpdGggdGhlIHJlcXVlc3RlZFVSTCwKICAgICAgICogb25seSB3aGVuIHRoZSByZXF1ZXN0ZWRVUkwgaXMgbm90IGFscmVhZHkgYW4gYWJzb2x1dGUgVVJMLgogICAgICAgKiBJZiB0aGUgcmVxdWVzdFVSTCBpcyBhYnNvbHV0ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSByZXF1ZXN0ZWRVUkwgdW50b3VjaGVkLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkwKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFVSTCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgdG8gY29tYmluZQogICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHsKICAgICAgICBpZiAoYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChyZXF1ZXN0ZWRVUkwpKSB7CiAgICAgICAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXF1ZXN0ZWRVUkw7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkgewogICAgICAgIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggIjxzY2hlbWU+Oi8vIiBvciAiLy8iIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLgogICAgICAgIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZAogICAgICAgIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLgogICAgICAgIHJldHVybiAvXihbYS16XVthLXpcZFwrXC1cLl0qOik/XC9cLy9pLnRlc3QodXJsKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTgyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMcwogICAgICAgKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkwKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkwKICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTAogICAgICAgKi8KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHsKICAgICAgICByZXR1cm4gcmVsYXRpdmVVUkwgPyBiYXNlVVJMLnJlcGxhY2UoL1wvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXC8rLywgJycpIDogYmFzZVVSTDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTgzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsgLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGUKICAgICAgLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVycwoKCiAgICAgIHZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFsnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLCAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJywgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCddOwogICAgICAvKioKICAgICAgICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdAogICAgICAgKgogICAgICAgKiBgYGAKICAgICAgICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVQKICAgICAgICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uCiAgICAgICAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmUKICAgICAgICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQKICAgICAgICogYGBgCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWQKICAgICAgICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3QKICAgICAgICovCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7CiAgICAgICAgdmFyIHBhcnNlZCA9IHt9OwogICAgICAgIHZhciBrZXk7CiAgICAgICAgdmFyIHZhbDsKICAgICAgICB2YXIgaTsKCiAgICAgICAgaWYgKCFoZWFkZXJzKSB7CiAgICAgICAgICByZXR1cm4gcGFyc2VkOwogICAgICAgIH0KCiAgICAgICAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkgewogICAgICAgICAgaSA9IGxpbmUuaW5kZXhPZignOicpOwogICAgICAgICAga2V5ID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cigwLCBpKSkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTsKCiAgICAgICAgICBpZiAoa2V5KSB7CiAgICAgICAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7CiAgICAgICAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcGFyc2VkOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID8gLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0CiAgICAgIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLgogICAgICBmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICAgICAgdmFyIG1zaWUgPSAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwogICAgICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICB2YXIgb3JpZ2luVVJMOwogICAgICAgIC8qKgogICAgICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzCiAgICAgICAgKgogICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZAogICAgICAgICogQHJldHVybnMge09iamVjdH0KICAgICAgICAqLwoKICAgICAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkgewogICAgICAgICAgdmFyIGhyZWYgPSB1cmw7CgogICAgICAgICAgaWYgKG1zaWUpIHsKICAgICAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllcwogICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTsKICAgICAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7CiAgICAgICAgICB9CgogICAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7IC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHMKCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLAogICAgICAgICAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLAogICAgICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LAogICAgICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXD8vLCAnJykgOiAnJywKICAgICAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJywKICAgICAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLAogICAgICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LAogICAgICAgICAgICBwYXRobmFtZTogdXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycgPyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6ICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgb3JpZ2luVVJMID0gcmVzb2x2ZVVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7CiAgICAgICAgLyoqCiAgICAgICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvbgogICAgICAgICoKICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdAogICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZQogICAgICAgICovCgogICAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkgewogICAgICAgICAgdmFyIHBhcnNlZCA9IHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpID8gcmVzb2x2ZVVSTChyZXF1ZXN0VVJMKSA6IHJlcXVlc3RVUkw7CiAgICAgICAgICByZXR1cm4gcGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VUkwucHJvdG9jb2wgJiYgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0OwogICAgICAgIH07CiAgICAgIH0oKSA6IC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudnMgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuCiAgICAgIGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgfSgpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE4NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgPyAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWUKICAgICAgZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7CiAgICAgICAgICAgIHZhciBjb29raWUgPSBbXTsKICAgICAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpOwoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpKSB7CiAgICAgICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHsKICAgICAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7CiAgICAgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNlY3VyZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7CiAgICAgICAgICB9LAogICAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxzKikoJyArIG5hbWUgKyAnKT0oW147XSopJykpOwogICAgICAgICAgICByZXR1cm4gbWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbDsKICAgICAgICAgIH0sCiAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7CiAgICAgICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSgpIDogLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LgogICAgICBmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LAogICAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9LAogICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fQogICAgICAgIH07CiAgICAgIH0oKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxODYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7CiAgICAgIC8qKgogICAgICAgKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLgogICAgICAgKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgVGhlIGV4ZWN1dG9yIGZ1bmN0aW9uLgogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcikgewogICAgICAgIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTsKICAgICAgICB9CgogICAgICAgIHZhciByZXNvbHZlUHJvbWlzZTsKICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkgewogICAgICAgICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlOwogICAgICAgIH0pOwogICAgICAgIHZhciB0b2tlbiA9IHRoaXM7CiAgICAgICAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHsKICAgICAgICAgIGlmICh0b2tlbi5yZWFzb24pIHsKICAgICAgICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpOwogICAgICAgICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICAvKioKICAgICAgICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC4KICAgICAgICovCgoKICAgICAgQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkgewogICAgICAgIGlmICh0aGlzLnJlYXNvbikgewogICAgICAgICAgdGhyb3cgdGhpcy5yZWFzb247CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioKICAgICAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLAogICAgICAgKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLgogICAgICAgKi8KCgogICAgICBDYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7CiAgICAgICAgdmFyIGNhbmNlbDsKICAgICAgICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykgewogICAgICAgICAgY2FuY2VsID0gYzsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdG9rZW46IHRva2VuLAogICAgICAgICAgY2FuY2VsOiBjYW5jZWwKICAgICAgICB9OwogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxODcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLgogICAgICAgKgogICAgICAgKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLgogICAgICAgKgogICAgICAgKiAgYGBganMKICAgICAgICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge30KICAgICAgICogIHZhciBhcmdzID0gWzEsIDIsIDNdOwogICAgICAgKiAgZi5hcHBseShudWxsLCBhcmdzKTsKICAgICAgICogIGBgYAogICAgICAgKgogICAgICAgKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi4KICAgICAgICoKICAgICAgICogIGBgYGpzCiAgICAgICAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7CiAgICAgICAqICBgYGAKICAgICAgICoKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufQogICAgICAgKi8KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7CiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTsKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSwKICAgICAgICAgICAgZ2V0UmVmID0gX3JlZi5nZXRSZWYsCiAgICAgICAgICAgIG9uQ2xpY2sgPSBfcmVmLm9uQ2xpY2ssCiAgICAgICAgICAgIG9uTW91c2VEb3duID0gX3JlZi5vbk1vdXNlRG93biwKICAgICAgICAgICAgdGV4dCA9IF9yZWYudGV4dCwKICAgICAgICAgICAgaXNMb2FkaW5nID0gX3JlZi5pc0xvYWRpbmc7CiAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkgewogICAgICAgICAgICByZXR1cm4gZ2V0UmVmICYmIGdldFJlZihlbCk7CiAgICAgICAgICB9LAogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtYnRuICIgKyBjbGFzc05hbWUsCiAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrLAogICAgICAgICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duCiAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1idG4tdGV4dCIKICAgICAgICB9LCB0ZXh0KSwgaXNMb2FkaW5nICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtYnRuLWxvYWRpbmcgZ3Qtc3Bpbm5lciIKICAgICAgICB9KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLAogICAgICAgICAgICBvbkNsaWNrID0gX3JlZi5vbkNsaWNrLAogICAgICAgICAgICB0ZXh0ID0gX3JlZi50ZXh0OwogICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWFjdGlvbiAiICsgY2xhc3NOYW1lLAogICAgICAgICAgb25DbGljazogb25DbGljawogICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtYWN0aW9uLXRleHQiCiAgICAgICAgfSwgdGV4dCkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxOTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CgogICAgICB2YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7CgogICAgICB2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCiAgICAgIHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7CgogICAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzApOwoKICAgICAgdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKICAgICAgdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpOwoKICAgICAgdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCiAgICAgIHZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7CgogICAgICB2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgdmFyIF9hdmF0YXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTsKCiAgICAgIHZhciBfYXZhdGFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F2YXRhcik7CgogICAgICB2YXIgX3N2ZyA9IF9fd2VicGFja19yZXF1aXJlX18oODEpOwoKICAgICAgdmFyIF9zdmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ZnKTsKCiAgICAgIHZhciBfZGlzdGFuY2VfaW5fd29yZHNfdG9fbm93ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTkpOwoKICAgICAgdmFyIF9kaXN0YW5jZV9pbl93b3Jkc190b19ub3cyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGlzdGFuY2VfaW5fd29yZHNfdG9fbm93KTsKCiAgICAgIHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMik7CgogICAgICB2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTsKCiAgICAgIHZhciBfaW5kZXgzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTMpOwoKICAgICAgdmFyIF9pbmRleDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDMpOwoKICAgICAgdmFyIF9pbmRleDUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNCk7CgogICAgICB2YXIgX2luZGV4NiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4NSk7CgogICAgICB2YXIgX2luZGV4NyA9IF9fd2VicGFja19yZXF1aXJlX18oMjE1KTsKCiAgICAgIHZhciBfaW5kZXg4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXg3KTsKCiAgICAgIHZhciBfaW5kZXg5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTYpOwoKICAgICAgdmFyIF9pbmRleDEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXg5KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjE3KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIFpIQ04gPSAoMCwgX2luZGV4MlsiZGVmYXVsdCJdKSgpOwogICAgICB2YXIgWkhUVyA9ICgwLCBfaW5kZXg0WyJkZWZhdWx0Il0pKCk7CiAgICAgIHZhciBFUyA9ICgwLCBfaW5kZXg2WyJkZWZhdWx0Il0pKCk7CiAgICAgIHZhciBGUiA9ICgwLCBfaW5kZXg4WyJkZWZhdWx0Il0pKCk7CiAgICAgIHZhciBSVSA9ICgwLCBfaW5kZXgxMFsiZGVmYXVsdCJdKSgpOwoKICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgd2luZG93LkdUX2kxOG5fZGlzdGFuY2VJbldvcmRzTG9jYWxlTWFwID0gewogICAgICAgICAgemg6IFpIQ04sCiAgICAgICAgICAnemgtQ04nOiBaSENOLAogICAgICAgICAgJ3poLVRXJzogWkhUVywKICAgICAgICAgICdlcy1FUyc6IEVTLAogICAgICAgICAgZnI6IEZSLAogICAgICAgICAgcnU6IFJVCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIENvbW1lbnQgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogICAgICAgICgwLCBfaW5oZXJpdHMzWyJkZWZhdWx0Il0pKENvbW1lbnQsIF9Db21wb25lbnQpOwoKICAgICAgICBmdW5jdGlvbiBDb21tZW50KCkgewogICAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbImRlZmF1bHQiXSkodGhpcywgQ29tbWVudCk7CiAgICAgICAgICByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuM1siZGVmYXVsdCJdKSh0aGlzLCAoQ29tbWVudC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjJbImRlZmF1bHQiXSkoQ29tbWVudCkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgICAgIH0KCiAgICAgICAgKDAsIF9jcmVhdGVDbGFzczNbImRlZmF1bHQiXSkoQ29tbWVudCwgW3sKICAgICAgICAgIGtleTogJ3Nob3VsZENvbXBvbmVudFVwZGF0ZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICAgICAgICB2YXIgY29tbWVudCA9IHRoaXMubm9kZTsKICAgICAgICAgICAgdmFyIGVtYWlsUmVzcG9uc2UgPSBjb21tZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbWFpbC1oaWRkZW4tdG9nZ2xlPmEnKTsKCiAgICAgICAgICAgIGlmIChlbWFpbFJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgZW1haWxSZXNwb25zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBjb21tZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbWFpbC1oaWRkZW4tcmVwbHknKS5jbGFzc0xpc3QudG9nZ2xlKCdleHBhbmRlZCcpOwogICAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaGFuZGxlSW1hZ2VFcnJvcmVkJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVJbWFnZUVycm9yZWQob2JqKSB7CiAgICAgICAgICAgIG9iai50YXJnZXQuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZ2l0YWxrQDEvc3JjL2Fzc2V0cy9pY29uL2dpdGh1Yi5zdmciOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3JlbmRlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgICAgICAgY29tbWVudCA9IF9wcm9wcy5jb21tZW50LAogICAgICAgICAgICAgICAgdXNlciA9IF9wcm9wcy51c2VyLAogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSBfcHJvcHMubGFuZ3VhZ2UsCiAgICAgICAgICAgICAgICBfcHJvcHMkY29tbWVudGVkVGV4dCA9IF9wcm9wcy5jb21tZW50ZWRUZXh0LAogICAgICAgICAgICAgICAgY29tbWVudGVkVGV4dCA9IF9wcm9wcyRjb21tZW50ZWRUZXh0ID09PSB1bmRlZmluZWQgPyAnJyA6IF9wcm9wcyRjb21tZW50ZWRUZXh0LAogICAgICAgICAgICAgICAgX3Byb3BzJGFkbWluID0gX3Byb3BzLmFkbWluLAogICAgICAgICAgICAgICAgYWRtaW4gPSBfcHJvcHMkYWRtaW4gPT09IHVuZGVmaW5lZCA/IFtdIDogX3Byb3BzJGFkbWluLAogICAgICAgICAgICAgICAgcmVwbHlDYWxsYmFjayA9IF9wcm9wcy5yZXBseUNhbGxiYWNrLAogICAgICAgICAgICAgICAgbGlrZUNhbGxiYWNrID0gX3Byb3BzLmxpa2VDYWxsYmFjazsKICAgICAgICAgICAgdmFyIGVuYWJsZUVkaXQgPSB1c2VyICYmIGNvbW1lbnQudXNlci5sb2dpbiA9PT0gdXNlci5sb2dpbjsKICAgICAgICAgICAgdmFyIGlzQWRtaW4gPSB+W10uY29uY2F0KGFkbWluKS5tYXAoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICByZXR1cm4gYS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB9KS5pbmRleE9mKGNvbW1lbnQudXNlci5sb2dpbi50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgdmFyIHJlYWN0aW9ucyA9IGNvbW1lbnQucmVhY3Rpb25zOwogICAgICAgICAgICB2YXIgcmVhY3Rpb25Ub3RhbENvdW50ID0gJyc7CgogICAgICAgICAgICBpZiAocmVhY3Rpb25zICYmIHJlYWN0aW9ucy50b3RhbENvdW50KSB7CiAgICAgICAgICAgICAgcmVhY3Rpb25Ub3RhbENvdW50ID0gcmVhY3Rpb25zLnRvdGFsQ291bnQ7CgogICAgICAgICAgICAgIGlmIChyZWFjdGlvbnMudG90YWxDb3VudCA9PT0gMTAwICYmIHJlYWN0aW9ucy5wYWdlSW5mbyAmJiByZWFjdGlvbnMucGFnZUluZm8uaGFzTmV4dFBhZ2UpIHsKICAgICAgICAgICAgICAgIHJlYWN0aW9uVG90YWxDb3VudCA9ICcxMDArJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG5vZGUpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5ub2RlID0gbm9kZTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQgJyArIChpc0FkbWluID8gJ2d0LWNvbW1lbnQtYWRtaW4nIDogJycpCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9hdmF0YXIyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWF2YXRhcicsCiAgICAgICAgICAgICAgc3JjOiBjb21tZW50LnVzZXIgJiYgY29tbWVudC51c2VyLmF2YXRhcl91cmwsCiAgICAgICAgICAgICAgYWx0OiBjb21tZW50LnVzZXIgJiYgY29tbWVudC51c2VyLmxvZ2luLAogICAgICAgICAgICAgIG9uRXJyb3I6IHRoaXMuaGFuZGxlSW1hZ2VFcnJvcmVkLmJpbmQodGhpcykKICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1jb250ZW50JwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtaGVhZGVyJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtYmxvY2stJyArICh1c2VyID8gJzInIDogJzEnKQogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC11c2VybmFtZScsCiAgICAgICAgICAgICAgaHJlZjogY29tbWVudC51c2VyICYmIGNvbW1lbnQudXNlci5odG1sX3VybAogICAgICAgICAgICB9LCBjb21tZW50LnVzZXIgJiYgY29tbWVudC51c2VyLmxvZ2luKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC10ZXh0JwogICAgICAgICAgICB9LCBjb21tZW50ZWRUZXh0KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1kYXRlJwogICAgICAgICAgICB9LCAoMCwgX2Rpc3RhbmNlX2luX3dvcmRzX3RvX25vdzJbImRlZmF1bHQiXSkoY29tbWVudC5jcmVhdGVkX2F0LCB7CiAgICAgICAgICAgICAgYWRkU3VmZml4OiB0cnVlLAogICAgICAgICAgICAgIGxvY2FsZTogewogICAgICAgICAgICAgICAgZGlzdGFuY2VJbldvcmRzOiB3aW5kb3cuR1RfaTE4bl9kaXN0YW5jZUluV29yZHNMb2NhbGVNYXBbbGFuZ3VhZ2VdCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSksIHJlYWN0aW9ucyAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWxpa2UnLAogICAgICAgICAgICAgIHRpdGxlOiAnTGlrZScsCiAgICAgICAgICAgICAgb25DbGljazogbGlrZUNhbGxiYWNrCiAgICAgICAgICAgIH0sIHJlYWN0aW9ucy52aWV3ZXJIYXNSZWFjdGVkID8gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1oZWFydCcsCiAgICAgICAgICAgICAgbmFtZTogJ2hlYXJ0X29uJywKICAgICAgICAgICAgICB0ZXh0OiByZWFjdGlvblRvdGFsQ291bnQKICAgICAgICAgICAgfSkgOiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLWhlYXJ0JywKICAgICAgICAgICAgICBuYW1lOiAnaGVhcnQnLAogICAgICAgICAgICAgIHRleHQ6IHJlYWN0aW9uVG90YWxDb3VudAogICAgICAgICAgICB9KSksIGVuYWJsZUVkaXQgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBocmVmOiBjb21tZW50Lmh0bWxfdXJsLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtZWRpdCcsCiAgICAgICAgICAgICAgdGl0bGU6ICdFZGl0JywKICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28tZWRpdCcsCiAgICAgICAgICAgICAgbmFtZTogJ2VkaXQnCiAgICAgICAgICAgIH0pKSA6IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtcmVwbHknLAogICAgICAgICAgICAgIHRpdGxlOiAnUmVwbHknLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHJlcGx5Q2FsbGJhY2sKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1yZXBseScsCiAgICAgICAgICAgICAgbmFtZTogJ3JlcGx5JwogICAgICAgICAgICB9KSkpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtYm9keSBtYXJrZG93bi1ib2R5JywKICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgICAgICAgICAgX19odG1sOiBjb21tZW50LmJvZHlfaHRtbAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpKTsKICAgICAgICAgIH0KICAgICAgICB9XSk7CiAgICAgICAgcmV0dXJuIENvbW1lbnQ7CiAgICAgIH0oX3JlYWN0LkNvbXBvbmVudCk7CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBDb21tZW50OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBtYXAgPSB7CiAgICAgICAgIi4vYXJyb3dfZG93bi5zdmciOiAxOTIsCiAgICAgICAgIi4vZWRpdC5zdmciOiAxOTMsCiAgICAgICAgIi4vZ2l0aHViLnN2ZyI6IDE5NCwKICAgICAgICAiLi9oZWFydC5zdmciOiAxOTUsCiAgICAgICAgIi4vaGVhcnRfb24uc3ZnIjogMTk2LAogICAgICAgICIuL3JlcGx5LnN2ZyI6IDE5NywKICAgICAgICAiLi90aXAuc3ZnIjogMTk4CiAgICAgIH07CgogICAgICBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHsKICAgICAgICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyh3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSk7CiAgICAgIH0KCiAgICAgIDsKCiAgICAgIGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHsKICAgICAgICB2YXIgaWQgPSBtYXBbcmVxXTsKICAgICAgICBpZiAoIShpZCArIDEpKSAvLyBjaGVjayBmb3IgbnVtYmVyIG9yIHN0cmluZwogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIgKyByZXEgKyAiJy4iKTsKICAgICAgICByZXR1cm4gaWQ7CiAgICAgIH0KCiAgICAgIDsKCiAgICAgIHdlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7CiAgICAgIH07CgogICAgICB3ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0OwogICAgICB3ZWJwYWNrQ29udGV4dC5pZCA9IDE5MTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCIxNjE5XCI+PHBhdGggZD1cIk01MTEuODcyIDY3Ni44Yy0wLjAwMyAwLTAuMDA2IDAtMC4wMDggMC05LjEzNyAwLTE3LjM3OS0zLjgyOS0yMy4yMS05Ljk3bC0yNTEuMjc3LTI2NS42MTRjLTUuNDE1LTUuNzItOC43NDMtMTMuNDY0LTguNzQ0LTIxLjk4NCAwLTE3LjY3OCAxNC4zMy0zMi4wMDggMzIuMDA4LTMyLjAwOCA5LjE1NyAwIDE3LjQxNiAzLjg0NSAyMy4yNSAxMC4wMDlsMjI4LjA0NSAyNDEuMTAzIDIyOC4yMjQtMjQxLjA4OGM1Ljg1NS02LjE2NSAxNC4xMTMtMTAuMDAxIDIzLjI2Ni0xMC4wMDEgOC41MTYgMCAxNi4yNTYgMy4zMiAyMS45OTggOC43MzYgMTIuNzg0IDEyLjE0NSAxMy4zNiAzMi40MzQgMS4yNjQgNDUuMjMzbC0yNTEuNTIgMjY1LjZjLTUuODQ0IDYuMTU1LTE0LjA4NiA5Ljk4NC0yMy4yMjMgOS45ODQtMC4wMjUgMC0wLjA1MSAwLTAuMDc2IDB6XCIgcC1pZD1cIjE2MjBcIj48L3BhdGg+PC9zdmc+IjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICA8cGF0aCBkPVwiTTc4NS4zMzMzMzMgODUuMzMzMzMzQzc3NC42NjY2NjcgODUuMzMzMzMzIDc2My4yIDkwLjEzMzMzMyA3NTQuNjY2NjY3IDk4LjY2NjY2N0w2ODIuNjY2NjY3IDE3MC42NjY2NjcgODUzLjMzMzMzMyAzNDEuMzMzMzMzIDkyNS4zMzMzMzMgMjY5LjMzMzMzM0M5NDIuNCAyNTIuMjY2NjY3IDk0Mi40IDIyMi4xMzMzMzMgOTI1LjMzMzMzMyAyMDkuMzMzMzMzTDgxNC42NjY2NjcgOTguNjY2NjY3QzgwNi4xMzMzMzMgOTAuMTMzMzMzIDc5NiA4NS4zMzMzMzMgNzg1LjMzMzMzMyA4NS4zMzMzMzN6TTY0MCAyMTcuMzMzMzMzIDg1LjMzMzMzMyA3NjggODUuMzMzMzMzIDkzOC42NjY2NjcgMjU2IDkzOC42NjY2NjcgODA2LjY2NjY2NyAzODQgNjQwIDIxNy4zMzMzMzN6XCI+PC9wYXRoPlxuPC9zdmc+XG4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICA8cGF0aCBkPVwiTTY0IDUyNEM2NCA3MTkuNjAyIDE4OS4zNTYgODg1LjkyNiAzNjQuMTEzIDk0Ny4wMTcgMzg3LjY1Nzk5IDk1MyAzODQgOTM2LjExNSAzODQgOTI0Ljc2N0wzODQgODQ3LjEwN0MyNDguMTE4IDg2My4wMDcgMjQyLjY3NCA3NzMuMDUyIDIzMy41IDc1OC4wMDEgMjE1IDcyNi41MDEgMTcxLjUgNzE4LjUwMSAxODQuNSA3MDMuNTAxIDIxNS41IDY4Ny41MDEgMjQ3IDcwNy41MDEgMjgzLjUgNzYxLjUwMSAzMDkuOTU2IDgwMC42NDIgMzYxLjM2NiA3OTQuMDc1IDM4Ny42NTggNzg3LjQ5NyAzOTMuNDAzIDc2My45OTcgNDA1LjYzNyA3NDMuMDQyIDQyMi4zNTMgNzI2LjYzOCAyODEuNzc0IDcwMS42MDkgMjIzIDYxNS42NyAyMjMgNTEzLjUgMjIzIDQ2NC4wNTMgMjM5LjMyMiA0MTguNDA2IDI3MS40NjUgMzgxLjYyNyAyNTEuMTQyIDMyMC45MjggMjczLjQyMSAyNjkuMTkgMjc2LjMzNyAyNjEuNDE1IDMzNC40NTggMjU2LjEzMSAzOTQuODg4IDMwMi45OTMgMzk5LjU0OSAzMDYuNjg1IDQzMi42NjMgMjk3LjgzNSA0NzAuMzQxIDI5MyA1MTIuNSAyOTMgNTU0LjkyNCAyOTMgNTkyLjgxIDI5Ny44OTYgNjI2LjA3NSAzMDYuODUzIDYzNy40MjYgMjk4LjIxOSA2OTMuNDYgMjU4LjA1NCA3NDcuNSAyNjIuOTY2IDc1MC4zODIgMjcwLjY1MiA3NzIuMTg1IDMyMS4yOTIgNzUzLjA1OCAzODEuMDgzIDc4NS41MTYgNDE3Ljk1NiA4MDIgNDYzLjgwOSA4MDIgNTEzLjUgODAyIDYxNS44NzQgNzQyLjk5IDcwMS45NTMgNjAxLjgwMyA3MjYuNzg2IDYyNS4zODEgNzUwLjAwMyA2NDAgNzgyLjI5NSA2NDAgODE4LjAwOEw2NDAgOTMwLjY1M0M2NDAuNzUyIDkzOS42MjYgNjQwIDk0OC42NjQ5NzggNjU1LjA4NiA5NDguNjY1IDgzMi4zNDQgODg4Ljk2MiA5NjAgNzIxLjM4OSA5NjAgNTI0IDk2MCAyNzYuNTc2IDc1OS40MjQgNzYgNTEyIDc2IDI2NC41NzcgNzYgNjQgMjc2LjU3NiA2NCA1MjRaXCI+PC9wYXRoPlxuPC9zdmc+XG4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICA8cGF0aCBkPVwiTTUyNy4wNjEzMzMgMTY2LjUyOEEyNzcuMzMzMzMzIDI3Ny4zMzMzMzMgMCAwIDEgMTAwMC42MTg2NjcgMzYyLjY2NjY2N2EyNzcuMzMzMzMzIDI3Ny4zMzMzMzMgMCAwIDEtODEuMjggMTk2LjEzODY2NmwtMzc3LjE3MzMzNCAzNzcuMTczMzM0YTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDEtNjAuMzMwNjY2IDBsLTM3Ny4xNzMzMzQtMzc3LjE3MzMzNGEyNzcuMzc2IDI3Ny4zNzYgMCAwIDEgMzkyLjI3NzMzNC0zOTIuMjc3MzMzbDE1LjA2MTMzMyAxNS4wNjEzMzMgMTUuMDYxMzMzLTE1LjA2MTMzM3ogbTI4Ni43MiAzNzcuMTczMzMzbDQ1LjIyNjY2Ny00NS4yMjY2NjZhMTkyIDE5MiAwIDAgMC0xMzUuODA4LTMyNy44OTMzMzQgMTkyIDE5MiAwIDAgMC0xMzUuODA4IDU2LjMybC00NS4yMjY2NjcgNDUuMjI2NjY3YTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDEtNjAuMzMwNjY2IDBsLTQ1LjIyNjY2Ny00NS4yMjY2NjdhMTkyLjA0MjY2NyAxOTIuMDQyNjY3IDAgMCAwLTI3MS42MTYgMjcxLjU3MzMzNEw1MTIgODQ1LjQ4MjY2N2wzMDEuNzgxMzMzLTMwMS43ODEzMzR6XCI+PC9wYXRoPlxuPC9zdmc+XG4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdD1cIjE1MTI0NjMzNjM3MjRcIiB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XG4gIDxwYXRoIGQ9XCJNNTI3LjA2MTMzMyAxNjYuNTI4QTI3Ny4zMzMzMzMgMjc3LjMzMzMzMyAwIDAgMSAxMDAwLjYxODY2NyAzNjIuNjY2NjY3YTI3Ny4zMzMzMzMgMjc3LjMzMzMzMyAwIDAgMS04MS4yOCAxOTYuMTM4NjY2bC0zNzcuMTczMzM0IDM3Ny4xNzMzMzRhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMS02MC4zMzA2NjYgMGwtMzc3LjE3MzMzNC0zNzcuMTczMzM0YTI3Ny4zNzYgMjc3LjM3NiAwIDAgMSAzOTIuMjc3MzM0LTM5Mi4yNzczMzNsMTUuMDYxMzMzIDE1LjA2MTMzMyAxNS4wNjEzMzMtMTUuMDYxMzMzelwiPjwvcGF0aD5cbjwvc3ZnPlxuIjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHZpZXdCb3g9XCIwIDAgMTMzMiAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgPHBhdGggZD1cIk01MjkuMDY2NjY1IDI3My4wNjY2NjYgNTI5LjA2NjY2NSAwIDUxLjIgNDc3Ljg2NjY2NiA1MjkuMDY2NjY1IDk1NS43MzMzMzUgNTI5LjA2NjY2NSA2NzUuODRDODcwLjQgNjc1Ljg0IDExMDkuMzMzMzM1IDc4NS4wNjY2NjUgMTI4MCAxMDI0IDEyMTEuNzMzMzM1IDY4Mi42NjY2NjUgMTAwNi45MzMzMzUgMzQxLjMzMzMzNCA1MjkuMDY2NjY1IDI3My4wNjY2NjZcIj48L3BhdGg+XG48L3N2Zz5cbiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTk4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gIDxwYXRoIGQ9XCJNNTEyIDM2Ni45NDk1MzVjLTE2LjA2NTU1NCAwLTI5Ljk4MjIxMiAxMy40MDUwMTYtMjkuOTgyMjEyIDI5Ljg3OTg4NGwwIDM1OS4wNzAyNTFjMCAxNi4xNjc4ODIgMTMuNDA1MDE2IDI5Ljg3OTg4NCAyOS45ODIyMTIgMjkuODc5ODg0IDE1Ljk2MzIyNiAwIDI5Ljg3OTg4NC0xMy40MDUwMTYgMjkuODc5ODg0LTI5Ljg3OTg4NEw1NDEuODc5ODg0IDM5Ni44Mjk0MTlDNTQxLjg3OTg4NCAzODAuNzYzODY1IDUyOC40NzQ4NjggMzY2Ljk0OTUzNSA1MTIgMzY2Ljk0OTUzNUw1MTIgMzY2Ljk0OTUzNXpcIlxuICAgIHAtaWQ9XCIzMDgzXCI+PC9wYXRoPlxuICA8cGF0aCBkPVwiTTQ4Mi4wMTc3ODggMjg3LjY0NTA0OGMwLTcuNzc2OTU2IDMuMjc0NTA4LTE1LjU1MzkxMiA4LjgwMDI0LTIxLjE4MTk3MyA1LjUyNTczMi01LjUyNTczMiAxMy4zMDI2ODgtOC44MDAyNCAyMS4xODE5NzMtOC44MDAyNCA3Ljc3Njk1NiAwIDE1LjU1MzkxMiAzLjI3NDUwOCAyMS4wNzk2NDQgOC44MDAyNCA1LjUyNTczMiA1LjYyODA2IDguODAwMjQgMTMuNDA1MDE2IDguODAwMjQgMjEuMTgxOTczIDAgNy43NzY5NTYtMy4yNzQ1MDggMTUuNjU2MjQxLTguODAwMjQgMjEuMTgxOTczLTUuNTI1NzMyIDUuNTI1NzMyLTEzLjQwNTAxNiA4LjY5NzkxMS0yMS4wNzk2NDQgOC42OTc5MTEtNy44NzkyODUgMC0xNS42NTYyNDEtMy4yNzQ1MDgtMjEuMTgxOTczLTguNjk3OTExQzQ4NS4yOTIyOTUgMzAzLjMwMTI4OSA0ODIuMDE3Nzg4IDI5NS41MjQzMzMgNDgyLjAxNzc4OCAyODcuNjQ1MDQ4TDQ4Mi4wMTc3ODggMjg3LjY0NTA0OHpcIlxuICAgIHAtaWQ9XCIzMDg0XCI+PC9wYXRoPlxuICA8cGF0aCBkPVwiTTUxMiA5NDYuODQ0NDA5Yy0yMzkuODU3NyAwLTQzNC44OTU1NzMtMTk1LjAzNzg3My00MzQuODk1NTczLTQzNC44OTU1NzMgMC0yMzkuODU3NyAxOTUuMDM3ODczLTQzNC44OTU1NzMgNDM0Ljg5NTU3My00MzQuODk1NTczIDIzOS43NTUzNzEgMCA0MzQuODk1NTczIDE5NS4wMzc4NzMgNDM0Ljg5NTU3MyA0MzQuODk1NTczQzk0Ni44OTU1NzMgNzUxLjgwNjUzNSA3NTEuNzU1MzcxIDk0Ni44NDQ0MDkgNTEyIDk0Ni44NDQ0MDl6TTUxMiAxMjYuMTcwODhjLTIxMi43NDA2ODIgMC0zODUuODgwMjg0IDE3My4wMzcyNzQtMzg1Ljg4MDI4NCAzODUuNzc3OTU1IDAgMjEyLjc0MDY4MiAxNzMuMDM3Mjc0IDM4NS43Nzc5NTUgMzg1Ljg4MDI4NCAzODUuNzc3OTU1IDIxMi43NDA2ODIgMCAzODUuNzc3OTU1LTE3My4wMzcyNzQgMzg1Ljc3Nzk1NS0zODUuNzc3OTU1Qzg5Ny43Nzc5NTUgMjk5LjIwODE1NCA3MjQuNzQwNjgyIDEyNi4xNzA4OCA1MTIgMTI2LjE3MDg4elwiXG4gICAgcC1pZD1cIjMwODVcIj48L3BhdGg+XG48L3N2Zz5cbiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTk5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGRpc3RhbmNlSW5Xb3JkcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAwKTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBSZXR1cm4gdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGdpdmVuIGRhdGUgYW5kIG5vdyBpbiB3b3Jkcy4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIFJldHVybiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZSBhbmQgbm93IGluIHdvcmRzLgogICAgICAgKgogICAgICAgKiB8IERpc3RhbmNlIHRvIG5vdyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUmVzdWx0ICAgICAgICAgICAgICB8CiAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwKICAgICAgICogfCAwIC4uLiAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGxlc3MgdGhhbiBhIG1pbnV0ZSAgfAogICAgICAgKiB8IDMwIHNlY3MgLi4uIDEgbWluIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMSBtaW51dGUgICAgICAgICAgICB8CiAgICAgICAqIHwgMSBtaW4gMzAgc2VjcyAuLi4gNDQgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBbMi4uNDRdIG1pbnV0ZXMgICAgIHwKICAgICAgICogfCA0NCBtaW5zIC4uLiAzMCBzZWNzIC4uLiA4OSBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IDEgaG91ciAgICAgICAgfAogICAgICAgKiB8IDg5IG1pbnMgMzAgc2VjcyAuLi4gMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgWzIuLjI0XSBob3VycyB8CiAgICAgICAqIHwgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gNDEgaHJzIDU5IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgfCAxIGRheSAgICAgICAgICAgICAgIHwKICAgICAgICogfCA0MSBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiAyOSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgICAgICAgICB8IFsyLi4zMF0gZGF5cyAgICAgICAgfAogICAgICAgKiB8IDI5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gNDQgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIHwgYWJvdXQgMSBtb250aCAgICAgICB8CiAgICAgICAqIHwgNDQgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiA1OSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgfCBhYm91dCAyIG1vbnRocyAgICAgIHwKICAgICAgICogfCA1OSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDEgeXIgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFsyLi4xMl0gbW9udGhzICAgICAgfAogICAgICAgKiB8IDEgeXIgLi4uIDEgeXIgMyBtb250aHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgMSB5ZWFyICAgICAgICB8CiAgICAgICAqIHwgMSB5ciAzIG1vbnRocyAuLi4gMSB5ciA5IG1vbnRoIHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBvdmVyIDEgeWVhciAgICAgICAgIHwKICAgICAgICogfCAxIHlyIDkgbW9udGhzIC4uLiAyIHlycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFsbW9zdCAyIHllYXJzICAgICAgfAogICAgICAgKiB8IE4geXJzIC4uLiBOIHlycyAzIG1vbnRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgTiB5ZWFycyAgICAgICB8CiAgICAgICAqIHwgTiB5cnMgMyBtb250aHMgLi4uIE4geXJzIDkgbW9udGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBvdmVyIE4geWVhcnMgICAgICAgIHwKICAgICAgICogfCBOIHlycyA5IG1vbnRocyAuLi4gTisxIHlycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFsbW9zdCBOKzEgeWVhcnMgICAgfAogICAgICAgKgogICAgICAgKiBXaXRoIGBvcHRpb25zLmluY2x1ZGVTZWNvbmRzID09IHRydWVgOgogICAgICAgKiB8IERpc3RhbmNlIHRvIG5vdyAgICAgfCBSZXN1bHQgICAgICAgICAgICAgICB8CiAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwKICAgICAgICogfCAwIHNlY3MgLi4uIDUgc2VjcyAgIHwgbGVzcyB0aGFuIDUgc2Vjb25kcyAgfAogICAgICAgKiB8IDUgc2VjcyAuLi4gMTAgc2VjcyAgfCBsZXNzIHRoYW4gMTAgc2Vjb25kcyB8CiAgICAgICAqIHwgMTAgc2VjcyAuLi4gMjAgc2VjcyB8IGxlc3MgdGhhbiAyMCBzZWNvbmRzIHwKICAgICAgICogfCAyMCBzZWNzIC4uLiA0MCBzZWNzIHwgaGFsZiBhIG1pbnV0ZSAgICAgICAgfAogICAgICAgKiB8IDQwIHNlY3MgLi4uIDYwIHNlY3MgfCBsZXNzIHRoYW4gYSBtaW51dGUgICB8CiAgICAgICAqIHwgNjAgc2VjcyAuLi4gOTAgc2VjcyB8IDEgbWludXRlICAgICAgICAgICAgIHwKICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGUgLSB0aGUgZ2l2ZW4gZGF0ZQogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMKICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pbmNsdWRlU2Vjb25kcz1mYWxzZV0gLSBkaXN0YW5jZXMgbGVzcyB0aGFuIGEgbWludXRlIGFyZSBtb3JlIGRldGFpbGVkCiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYWRkU3VmZml4PWZhbHNlXSAtIHJlc3VsdCBzcGVjaWZpZXMgaWYgdGhlIHNlY29uZCBkYXRlIGlzIGVhcmxpZXIgb3IgbGF0ZXIgdGhhbiB0aGUgZmlyc3QKICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmxvY2FsZT1lbkxvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdAogICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgZGlzdGFuY2UgaW4gd29yZHMKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSWYgdG9kYXkgaXMgMSBKYW51YXJ5IDIwMTUsIHdoYXQgaXMgdGhlIGRpc3RhbmNlIHRvIDIgSnVseSAyMDE0PwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzVG9Ob3coCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgNiwgMikKICAgICAgICogKQogICAgICAgKiAvLz0+ICc2IG1vbnRocycKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSWYgbm93IGlzIDEgSmFudWFyeSAyMDE1IDAwOjAwOjAwLAogICAgICAgKiAvLyB3aGF0IGlzIHRoZSBkaXN0YW5jZSB0byAxIEphbnVhcnkgMjAxNSAwMDowMDoxNSwgaW5jbHVkaW5nIHNlY29uZHM/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNUb05vdygKICAgICAgICogICBuZXcgRGF0ZSgyMDE1LCAwLCAxLCAwLCAwLCAxNSksCiAgICAgICAqICAge2luY2x1ZGVTZWNvbmRzOiB0cnVlfQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJ2xlc3MgdGhhbiAyMCBzZWNvbmRzJwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBJZiB0b2RheSBpcyAxIEphbnVhcnkgMjAxNSwKICAgICAgICogLy8gd2hhdCBpcyB0aGUgZGlzdGFuY2UgdG8gMSBKYW51YXJ5IDIwMTYsIHdpdGggYSBzdWZmaXg/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNUb05vdygKICAgICAgICogICBuZXcgRGF0ZSgyMDE2LCAwLCAxKSwKICAgICAgICogICB7YWRkU3VmZml4OiB0cnVlfQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJ2luIGFib3V0IDEgeWVhcicKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSWYgdG9kYXkgaXMgMSBKYW51YXJ5IDIwMTUsCiAgICAgICAqIC8vIHdoYXQgaXMgdGhlIGRpc3RhbmNlIHRvIDEgQXVndXN0IDIwMTYgaW4gRXNwZXJhbnRvPwogICAgICAgKiB2YXIgZW9Mb2NhbGUgPSByZXF1aXJlKCdkYXRlLWZucy9sb2NhbGUvZW8nKQogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzVG9Ob3coCiAgICAgICAqICAgbmV3IERhdGUoMjAxNiwgNywgMSksCiAgICAgICAqICAge2xvY2FsZTogZW9Mb2NhbGV9CiAgICAgICAqICkKICAgICAgICogLy89PiAncGxpIG9sIDEgamFybycKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZGlzdGFuY2VJbldvcmRzVG9Ob3coZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHsKICAgICAgICByZXR1cm4gZGlzdGFuY2VJbldvcmRzKERhdGUubm93KCksIGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkaXN0YW5jZUluV29yZHNUb05vdzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgY29tcGFyZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMSk7CgogICAgICB2YXIgcGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCiAgICAgIHZhciBkaWZmZXJlbmNlSW5TZWNvbmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDMpOwoKICAgICAgdmFyIGRpZmZlcmVuY2VJbk1vbnRocyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA1KTsKCiAgICAgIHZhciBlbkxvY2FsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjA4KTsKCiAgICAgIHZhciBNSU5VVEVTX0lOX0RBWSA9IDE0NDA7CiAgICAgIHZhciBNSU5VVEVTX0lOX0FMTU9TVF9UV09fREFZUyA9IDI1MjA7CiAgICAgIHZhciBNSU5VVEVTX0lOX01PTlRIID0gNDMyMDA7CiAgICAgIHZhciBNSU5VVEVTX0lOX1RXT19NT05USFMgPSA4NjQwMDsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBSZXR1cm4gdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzIGluIHdvcmRzLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogUmV0dXJuIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcyBpbiB3b3Jkcy4KICAgICAgICoKICAgICAgICogfCBEaXN0YW5jZSBiZXR3ZWVuIGRhdGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJlc3VsdCAgICAgICAgICAgICAgfAogICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS18CiAgICAgICAqIHwgMCAuLi4gMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBsZXNzIHRoYW4gYSBtaW51dGUgIHwKICAgICAgICogfCAzMCBzZWNzIC4uLiAxIG1pbiAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDEgbWludXRlICAgICAgICAgICAgfAogICAgICAgKiB8IDEgbWluIDMwIHNlY3MgLi4uIDQ0IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWzIuLjQ0XSBtaW51dGVzICAgICB8CiAgICAgICAqIHwgNDQgbWlucyAuLi4gMzAgc2VjcyAuLi4gODkgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCAxIGhvdXIgICAgICAgIHwKICAgICAgICogfCA4OSBtaW5zIDMwIHNlY3MgLi4uIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IFsyLi4yNF0gaG91cnMgfAogICAgICAgKiB8IDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDQxIGhycyA1OSBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgIHwgMSBkYXkgICAgICAgICAgICAgICB8CiAgICAgICAqIHwgNDEgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gMjkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzICAgICAgICAgfCBbMi4uMzBdIGRheXMgICAgICAgIHwKICAgICAgICogfCAyOSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDQ0IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyB8IGFib3V0IDEgbW9udGggICAgICAgfAogICAgICAgKiB8IDQ0IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gNTkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIHwgYWJvdXQgMiBtb250aHMgICAgICB8CiAgICAgICAqIHwgNTkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiAxIHlyICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBbMi4uMTJdIG1vbnRocyAgICAgIHwKICAgICAgICogfCAxIHlyIC4uLiAxIHlyIDMgbW9udGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IDEgeWVhciAgICAgICAgfAogICAgICAgKiB8IDEgeXIgMyBtb250aHMgLi4uIDEgeXIgOSBtb250aCBzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgb3ZlciAxIHllYXIgICAgICAgICB8CiAgICAgICAqIHwgMSB5ciA5IG1vbnRocyAuLi4gMiB5cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhbG1vc3QgMiB5ZWFycyAgICAgIHwKICAgICAgICogfCBOIHlycyAuLi4gTiB5cnMgMyBtb250aHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IE4geWVhcnMgICAgICAgfAogICAgICAgKiB8IE4geXJzIDMgbW9udGhzIC4uLiBOIHlycyA5IG1vbnRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgb3ZlciBOIHllYXJzICAgICAgICB8CiAgICAgICAqIHwgTiB5cnMgOSBtb250aHMgLi4uIE4rMSB5cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhbG1vc3QgTisxIHllYXJzICAgIHwKICAgICAgICoKICAgICAgICogV2l0aCBgb3B0aW9ucy5pbmNsdWRlU2Vjb25kcyA9PSB0cnVlYDoKICAgICAgICogfCBEaXN0YW5jZSBiZXR3ZWVuIGRhdGVzIHwgUmVzdWx0ICAgICAgICAgICAgICAgfAogICAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS18CiAgICAgICAqIHwgMCBzZWNzIC4uLiA1IHNlY3MgICAgICB8IGxlc3MgdGhhbiA1IHNlY29uZHMgIHwKICAgICAgICogfCA1IHNlY3MgLi4uIDEwIHNlY3MgICAgIHwgbGVzcyB0aGFuIDEwIHNlY29uZHMgfAogICAgICAgKiB8IDEwIHNlY3MgLi4uIDIwIHNlY3MgICAgfCBsZXNzIHRoYW4gMjAgc2Vjb25kcyB8CiAgICAgICAqIHwgMjAgc2VjcyAuLi4gNDAgc2VjcyAgICB8IGhhbGYgYSBtaW51dGUgICAgICAgIHwKICAgICAgICogfCA0MCBzZWNzIC4uLiA2MCBzZWNzICAgIHwgbGVzcyB0aGFuIGEgbWludXRlICAgfAogICAgICAgKiB8IDYwIHNlY3MgLi4uIDkwIHNlY3MgICAgfCAxIG1pbnV0ZSAgICAgICAgICAgICB8CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlVG9Db21wYXJlIC0gdGhlIGRhdGUgdG8gY29tcGFyZSB3aXRoCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlIC0gdGhlIG90aGVyIGRhdGUKICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zCiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaW5jbHVkZVNlY29uZHM9ZmFsc2VdIC0gZGlzdGFuY2VzIGxlc3MgdGhhbiBhIG1pbnV0ZSBhcmUgbW9yZSBkZXRhaWxlZAogICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFkZFN1ZmZpeD1mYWxzZV0gLSByZXN1bHQgaW5kaWNhdGVzIGlmIHRoZSBzZWNvbmQgZGF0ZSBpcyBlYXJsaWVyIG9yIGxhdGVyIHRoYW4gdGhlIGZpcnN0CiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5sb2NhbGU9ZW5Mb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QKICAgICAgICogQHJldHVybnMge1N0cmluZ30gdGhlIGRpc3RhbmNlIGluIHdvcmRzCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFdoYXQgaXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gMiBKdWx5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1PwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDYsIDIpLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTUsIDAsIDEpCiAgICAgICAqICkKICAgICAgICogLy89PiAnNiBtb250aHMnCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFdoYXQgaXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gMSBKYW51YXJ5IDIwMTUgMDA6MDA6MTUKICAgICAgICogLy8gYW5kIDEgSmFudWFyeSAyMDE1IDAwOjAwOjAwLCBpbmNsdWRpbmcgc2Vjb25kcz8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3JkcygKICAgICAgICogICBuZXcgRGF0ZSgyMDE1LCAwLCAxLCAwLCAwLCAxNSksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNSwgMCwgMSwgMCwgMCwgMCksCiAgICAgICAqICAge2luY2x1ZGVTZWNvbmRzOiB0cnVlfQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJ2xlc3MgdGhhbiAyMCBzZWNvbmRzJwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBXaGF0IGlzIHRoZSBkaXN0YW5jZSBmcm9tIDEgSmFudWFyeSAyMDE2CiAgICAgICAqIC8vIHRvIDEgSmFudWFyeSAyMDE1LCB3aXRoIGEgc3VmZml4PwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTYsIDAsIDEpLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTUsIDAsIDEpLAogICAgICAgKiAgIHthZGRTdWZmaXg6IHRydWV9CiAgICAgICAqICkKICAgICAgICogLy89PiAnYWJvdXQgMSB5ZWFyIGFnbycKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gV2hhdCBpcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAxIEF1Z3VzdCAyMDE2IGFuZCAxIEphbnVhcnkgMjAxNSBpbiBFc3BlcmFudG8/CiAgICAgICAqIHZhciBlb0xvY2FsZSA9IHJlcXVpcmUoJ2RhdGUtZm5zL2xvY2FsZS9lbycpCiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNiwgNywgMSksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNSwgMCwgMSksCiAgICAgICAqICAge2xvY2FsZTogZW9Mb2NhbGV9CiAgICAgICAqICkKICAgICAgICogLy89PiAncGxpIG9sIDEgamFybycKICAgICAgICovCgogICAgICBmdW5jdGlvbiBkaXN0YW5jZUluV29yZHMoZGlydHlEYXRlVG9Db21wYXJlLCBkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykgewogICAgICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogICAgICAgIHZhciBjb21wYXJpc29uID0gY29tcGFyZURlc2MoZGlydHlEYXRlVG9Db21wYXJlLCBkaXJ0eURhdGUpOwogICAgICAgIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTsKICAgICAgICB2YXIgbG9jYWxpemUgPSBlbkxvY2FsZS5kaXN0YW5jZUluV29yZHMubG9jYWxpemU7CgogICAgICAgIGlmIChsb2NhbGUgJiYgbG9jYWxlLmRpc3RhbmNlSW5Xb3JkcyAmJiBsb2NhbGUuZGlzdGFuY2VJbldvcmRzLmxvY2FsaXplKSB7CiAgICAgICAgICBsb2NhbGl6ZSA9IGxvY2FsZS5kaXN0YW5jZUluV29yZHMubG9jYWxpemU7CiAgICAgICAgfQoKICAgICAgICB2YXIgbG9jYWxpemVPcHRpb25zID0gewogICAgICAgICAgYWRkU3VmZml4OiBCb29sZWFuKG9wdGlvbnMuYWRkU3VmZml4KSwKICAgICAgICAgIGNvbXBhcmlzb246IGNvbXBhcmlzb24KICAgICAgICB9OwogICAgICAgIHZhciBkYXRlTGVmdCwgZGF0ZVJpZ2h0OwoKICAgICAgICBpZiAoY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlVG9Db21wYXJlKTsKICAgICAgICAgIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlKTsKICAgICAgICAgIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZVRvQ29tcGFyZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc2Vjb25kcyA9IGRpZmZlcmVuY2VJblNlY29uZHMoZGF0ZVJpZ2h0LCBkYXRlTGVmdCk7CiAgICAgICAgdmFyIG9mZnNldCA9IGRhdGVSaWdodC5nZXRUaW1lem9uZU9mZnNldCgpIC0gZGF0ZUxlZnQuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgICB2YXIgbWludXRlcyA9IE1hdGgucm91bmQoc2Vjb25kcyAvIDYwKSAtIG9mZnNldDsKICAgICAgICB2YXIgbW9udGhzOyAvLyAwIHVwIHRvIDIgbWlucwoKICAgICAgICBpZiAobWludXRlcyA8IDIpIHsKICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVTZWNvbmRzKSB7CiAgICAgICAgICAgIGlmIChzZWNvbmRzIDwgNSkgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnbGVzc1RoYW5YU2Vjb25kcycsIDUsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA8IDEwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdsZXNzVGhhblhTZWNvbmRzJywgMTAsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA8IDIwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdsZXNzVGhhblhTZWNvbmRzJywgMjAsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA8IDQwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdoYWxmQU1pbnV0ZScsIG51bGwsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA8IDYwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdsZXNzVGhhblhNaW51dGVzJywgMSwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ3hNaW51dGVzJywgMSwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKG1pbnV0ZXMgPT09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2xlc3NUaGFuWE1pbnV0ZXMnLCAxLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgneE1pbnV0ZXMnLCBtaW51dGVzLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIDIgbWlucyB1cCB0byAwLjc1IGhycwoKICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCA0NSkgewogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCd4TWludXRlcycsIG1pbnV0ZXMsIGxvY2FsaXplT3B0aW9ucyk7IC8vIDAuNzUgaHJzIHVwIHRvIDEuNSBocnMKICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCA5MCkgewogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdhYm91dFhIb3VycycsIDEsIGxvY2FsaXplT3B0aW9ucyk7IC8vIDEuNSBocnMgdXAgdG8gMjQgaHJzCiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgTUlOVVRFU19JTl9EQVkpIHsKICAgICAgICAgIHZhciBob3VycyA9IE1hdGgucm91bmQobWludXRlcyAvIDYwKTsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnYWJvdXRYSG91cnMnLCBob3VycywgbG9jYWxpemVPcHRpb25zKTsgLy8gMSBkYXkgdXAgdG8gMS43NSBkYXlzCiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgTUlOVVRFU19JTl9BTE1PU1RfVFdPX0RBWVMpIHsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgneERheXMnLCAxLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyAxLjc1IGRheXMgdXAgdG8gMzAgZGF5cwogICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IE1JTlVURVNfSU5fTU9OVEgpIHsKICAgICAgICAgIHZhciBkYXlzID0gTWF0aC5yb3VuZChtaW51dGVzIC8gTUlOVVRFU19JTl9EQVkpOwogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCd4RGF5cycsIGRheXMsIGxvY2FsaXplT3B0aW9ucyk7IC8vIDEgbW9udGggdXAgdG8gMiBtb250aHMKICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCBNSU5VVEVTX0lOX1RXT19NT05USFMpIHsKICAgICAgICAgIG1vbnRocyA9IE1hdGgucm91bmQobWludXRlcyAvIE1JTlVURVNfSU5fTU9OVEgpOwogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdhYm91dFhNb250aHMnLCBtb250aHMsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICBtb250aHMgPSBkaWZmZXJlbmNlSW5Nb250aHMoZGF0ZVJpZ2h0LCBkYXRlTGVmdCk7IC8vIDIgbW9udGhzIHVwIHRvIDEyIG1vbnRocwoKICAgICAgICBpZiAobW9udGhzIDwgMTIpIHsKICAgICAgICAgIHZhciBuZWFyZXN0TW9udGggPSBNYXRoLnJvdW5kKG1pbnV0ZXMgLyBNSU5VVEVTX0lOX01PTlRIKTsKICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgneE1vbnRocycsIG5lYXJlc3RNb250aCwgbG9jYWxpemVPcHRpb25zKTsgLy8gMSB5ZWFyIHVwIHRvIG1heCBEYXRlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBtb250aHNTaW5jZVN0YXJ0T2ZZZWFyID0gbW9udGhzICUgMTI7CiAgICAgICAgICB2YXIgeWVhcnMgPSBNYXRoLmZsb29yKG1vbnRocyAvIDEyKTsgLy8gTiB5ZWFycyB1cCB0byAxIHllYXJzIDMgbW9udGhzCgogICAgICAgICAgaWYgKG1vbnRoc1NpbmNlU3RhcnRPZlllYXIgPCAzKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnYWJvdXRYWWVhcnMnLCB5ZWFycywgbG9jYWxpemVPcHRpb25zKTsgLy8gTiB5ZWFycyAzIG1vbnRocyB1cCB0byBOIHllYXJzIDkgbW9udGhzCiAgICAgICAgICB9IGVsc2UgaWYgKG1vbnRoc1NpbmNlU3RhcnRPZlllYXIgPCA5KSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnb3ZlclhZZWFycycsIHllYXJzLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyBOIHllYXJzIDkgbW9udGhzIHVwIHRvIE4geWVhciAxMiBtb250aHMKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnYWxtb3N0WFllYXJzJywgeWVhcnMgKyAxLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkaXN0YW5jZUluV29yZHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjAxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHBhcnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgQ29tcGFyZSB0aGUgdHdvIGRhdGVzIHJldmVyc2UgY2hyb25vbG9naWNhbGx5IGFuZCByZXR1cm4gLTEsIDAgb3IgMS4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIENvbXBhcmUgdGhlIHR3byBkYXRlcyBhbmQgcmV0dXJuIC0xIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGFmdGVyIHRoZSBzZWNvbmQsCiAgICAgICAqIDEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYmVmb3JlIHRoZSBzZWNvbmQgb3IgMCBpZiBkYXRlcyBhcmUgZXF1YWwuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNvbXBhcmUKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjb21wYXJlCiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb24KICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gQ29tcGFyZSAxMSBGZWJydWFyeSAxOTg3IGFuZCAxMCBKdWx5IDE5ODkgcmV2ZXJzZSBjaHJvbm9sb2dpY2FsbHk6CiAgICAgICAqIHZhciByZXN1bHQgPSBjb21wYXJlRGVzYygKICAgICAgICogICBuZXcgRGF0ZSgxOTg3LCAxLCAxMSksCiAgICAgICAqICAgbmV3IERhdGUoMTk4OSwgNiwgMTApCiAgICAgICAqICkKICAgICAgICogLy89PiAxCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFNvcnQgdGhlIGFycmF5IG9mIGRhdGVzIGluIHJldmVyc2UgY2hyb25vbG9naWNhbCBvcmRlcjoKICAgICAgICogdmFyIHJlc3VsdCA9IFsKICAgICAgICogICBuZXcgRGF0ZSgxOTk1LCA2LCAyKSwKICAgICAgICogICBuZXcgRGF0ZSgxOTg3LCAxLCAxMSksCiAgICAgICAqICAgbmV3IERhdGUoMTk4OSwgNiwgMTApCiAgICAgICAqIF0uc29ydChjb21wYXJlRGVzYykKICAgICAgICogLy89PiBbCiAgICAgICAqIC8vICAgU3VuIEp1bCAwMiAxOTk1IDAwOjAwOjAwLAogICAgICAgKiAvLyAgIE1vbiBKdWwgMTAgMTk4OSAwMDowMDowMCwKICAgICAgICogLy8gICBXZWQgRmViIDExIDE5ODcgMDA6MDA6MDAKICAgICAgICogLy8gXQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBjb21wYXJlRGVzYyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgewogICAgICAgIHZhciBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZUxlZnQpOwogICAgICAgIHZhciB0aW1lTGVmdCA9IGRhdGVMZWZ0LmdldFRpbWUoKTsKICAgICAgICB2YXIgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlUmlnaHQpOwogICAgICAgIHZhciB0aW1lUmlnaHQgPSBkYXRlUmlnaHQuZ2V0VGltZSgpOwoKICAgICAgICBpZiAodGltZUxlZnQgPiB0aW1lUmlnaHQpIHsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9IGVsc2UgaWYgKHRpbWVMZWZ0IDwgdGltZVJpZ2h0KSB7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGNvbXBhcmVEZXNjOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGFyZ3VtZW50IGFuIGluc3RhbmNlIG9mIERhdGU/CiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBJcyB0aGUgZ2l2ZW4gYXJndW1lbnQgYW4gaW5zdGFuY2Ugb2YgRGF0ZT8KICAgICAgICoKICAgICAgICogQHBhcmFtIHsqfSBhcmd1bWVudCAtIHRoZSBhcmd1bWVudCB0byBjaGVjawogICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSXMgJ21heW9ubmFpc2UnIGEgRGF0ZT8KICAgICAgICogdmFyIHJlc3VsdCA9IGlzRGF0ZSgnbWF5b25uYWlzZScpCiAgICAgICAqIC8vPT4gZmFsc2UKICAgICAgICovCiAgICAgIGZ1bmN0aW9uIGlzRGF0ZShhcmd1bWVudCkgewogICAgICAgIHJldHVybiBhcmd1bWVudCBpbnN0YW5jZW9mIERhdGU7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gaXNEYXRlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBkaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgU2Vjb25kIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIEdldCB0aGUgbnVtYmVyIG9mIHNlY29uZHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBsYXRlciBkYXRlCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgZWFybGllciBkYXRlCiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSBudW1iZXIgb2Ygc2Vjb25kcwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBIb3cgbWFueSBzZWNvbmRzIGFyZSBiZXR3ZWVuCiAgICAgICAqIC8vIDIgSnVseSAyMDE0IDEyOjMwOjA3Ljk5OSBhbmQgMiBKdWx5IDIwMTQgMTI6MzA6MjAuMDAwPwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlmZmVyZW5jZUluU2Vjb25kcygKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxMiwgMzAsIDIwLCAwKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxMiwgMzAsIDcsIDk5OSkKICAgICAgICogKQogICAgICAgKiAvLz0+IDEyCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJblNlY29uZHMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHsKICAgICAgICB2YXIgZGlmZiA9IGRpZmZlcmVuY2VJbk1pbGxpc2Vjb25kcyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgLyAxMDAwOwogICAgICAgIHJldHVybiBkaWZmID4gMCA/IE1hdGguZmxvb3IoZGlmZikgOiBNYXRoLmNlaWwoZGlmZik7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZGlmZmVyZW5jZUluU2Vjb25kczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgcGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBNaWxsaXNlY29uZCBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IEdldCB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIEdldCB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGxhdGVyIGRhdGUKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBlYXJsaWVyIGRhdGUKICAgICAgICogQHJldHVybnMge051bWJlcn0gdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gSG93IG1hbnkgbWlsbGlzZWNvbmRzIGFyZSBiZXR3ZWVuCiAgICAgICAqIC8vIDIgSnVseSAyMDE0IDEyOjMwOjIwLjYwMCBhbmQgMiBKdWx5IDIwMTQgMTI6MzA6MjEuNzAwPwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDYsIDIsIDEyLCAzMCwgMjEsIDcwMCksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiwgMTIsIDMwLCAyMCwgNjAwKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gMTEwMAogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBkaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHsKICAgICAgICB2YXIgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGVMZWZ0KTsKICAgICAgICB2YXIgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlUmlnaHQpOwogICAgICAgIHJldHVybiBkYXRlTGVmdC5nZXRUaW1lKCkgLSBkYXRlUmlnaHQuZ2V0VGltZSgpOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRpZmZlcmVuY2VJbk1pbGxpc2Vjb25kczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgcGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCiAgICAgIHZhciBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA2KTsKCiAgICAgIHZhciBjb21wYXJlQXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDcpOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IE1vbnRoIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2YgZnVsbCBtb250aHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBmdWxsIG1vbnRocyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGxhdGVyIGRhdGUKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBlYXJsaWVyIGRhdGUKICAgICAgICogQHJldHVybnMge051bWJlcn0gdGhlIG51bWJlciBvZiBmdWxsIG1vbnRocwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBIb3cgbWFueSBmdWxsIG1vbnRocyBhcmUgYmV0d2VlbiAzMSBKYW51YXJ5IDIwMTQgYW5kIDEgU2VwdGVtYmVyIDIwMTQ/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaWZmZXJlbmNlSW5Nb250aHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgOCwgMSksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgMCwgMzEpCiAgICAgICAqICkKICAgICAgICogLy89PiA3CiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJbk1vbnRocyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgewogICAgICAgIHZhciBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZUxlZnQpOwogICAgICAgIHZhciBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGVSaWdodCk7CiAgICAgICAgdmFyIHNpZ24gPSBjb21wYXJlQXNjKGRhdGVMZWZ0LCBkYXRlUmlnaHQpOwogICAgICAgIHZhciBkaWZmZXJlbmNlID0gTWF0aC5hYnMoZGlmZmVyZW5jZUluQ2FsZW5kYXJNb250aHMoZGF0ZUxlZnQsIGRhdGVSaWdodCkpOwogICAgICAgIGRhdGVMZWZ0LnNldE1vbnRoKGRhdGVMZWZ0LmdldE1vbnRoKCkgLSBzaWduICogZGlmZmVyZW5jZSk7IC8vIE1hdGguYWJzKGRpZmYgaW4gZnVsbCBtb250aHMgLSBkaWZmIGluIGNhbGVuZGFyIG1vbnRocykgPT09IDEgaWYgbGFzdCBjYWxlbmRhciBtb250aCBpcyBub3QgZnVsbAogICAgICAgIC8vIElmIHNvLCByZXN1bHQgbXVzdCBiZSBkZWNyZWFzZWQgYnkgMSBpbiBhYnNvbHV0ZSB2YWx1ZQoKICAgICAgICB2YXIgaXNMYXN0TW9udGhOb3RGdWxsID0gY29tcGFyZUFzYyhkYXRlTGVmdCwgZGF0ZVJpZ2h0KSA9PT0gLXNpZ247CiAgICAgICAgcmV0dXJuIHNpZ24gKiAoZGlmZmVyZW5jZSAtIGlzTGFzdE1vbnRoTm90RnVsbCk7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZGlmZmVyZW5jZUluTW9udGhzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBwYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IE1vbnRoIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgbW9udGhzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgbW9udGhzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgbGF0ZXIgZGF0ZQogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIGVhcmxpZXIgZGF0ZQogICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgbnVtYmVyIG9mIGNhbGVuZGFyIG1vbnRocwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBIb3cgbWFueSBjYWxlbmRhciBtb250aHMgYXJlIGJldHdlZW4gMzEgSmFudWFyeSAyMDE0IGFuZCAxIFNlcHRlbWJlciAyMDE0PwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJNb250aHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgOCwgMSksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgMCwgMzEpCiAgICAgICAqICkKICAgICAgICogLy89PiA4CiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7CiAgICAgICAgdmFyIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlTGVmdCk7CiAgICAgICAgdmFyIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZVJpZ2h0KTsKICAgICAgICB2YXIgeWVhckRpZmYgPSBkYXRlTGVmdC5nZXRGdWxsWWVhcigpIC0gZGF0ZVJpZ2h0LmdldEZ1bGxZZWFyKCk7CiAgICAgICAgdmFyIG1vbnRoRGlmZiA9IGRhdGVMZWZ0LmdldE1vbnRoKCkgLSBkYXRlUmlnaHQuZ2V0TW9udGgoKTsKICAgICAgICByZXR1cm4geWVhckRpZmYgKiAxMiArIG1vbnRoRGlmZjsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRoczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgcGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBDb21wYXJlIHRoZSB0d28gZGF0ZXMgYW5kIHJldHVybiAtMSwgMCBvciAxLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogQ29tcGFyZSB0aGUgdHdvIGRhdGVzIGFuZCByZXR1cm4gMSBpZiB0aGUgZmlyc3QgZGF0ZSBpcyBhZnRlciB0aGUgc2Vjb25kLAogICAgICAgKiAtMSBpZiB0aGUgZmlyc3QgZGF0ZSBpcyBiZWZvcmUgdGhlIHNlY29uZCBvciAwIGlmIGRhdGVzIGFyZSBlcXVhbC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY29tcGFyZQogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNvbXBhcmUKICAgICAgICogQHJldHVybnMge051bWJlcn0gdGhlIHJlc3VsdCBvZiB0aGUgY29tcGFyaXNvbgogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBDb21wYXJlIDExIEZlYnJ1YXJ5IDE5ODcgYW5kIDEwIEp1bHkgMTk4OToKICAgICAgICogdmFyIHJlc3VsdCA9IGNvbXBhcmVBc2MoCiAgICAgICAqICAgbmV3IERhdGUoMTk4NywgMSwgMTEpLAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODksIDYsIDEwKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gLTEKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gU29ydCB0aGUgYXJyYXkgb2YgZGF0ZXM6CiAgICAgICAqIHZhciByZXN1bHQgPSBbCiAgICAgICAqICAgbmV3IERhdGUoMTk5NSwgNiwgMiksCiAgICAgICAqICAgbmV3IERhdGUoMTk4NywgMSwgMTEpLAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODksIDYsIDEwKQogICAgICAgKiBdLnNvcnQoY29tcGFyZUFzYykKICAgICAgICogLy89PiBbCiAgICAgICAqIC8vICAgV2VkIEZlYiAxMSAxOTg3IDAwOjAwOjAwLAogICAgICAgKiAvLyAgIE1vbiBKdWwgMTAgMTk4OSAwMDowMDowMCwKICAgICAgICogLy8gICBTdW4gSnVsIDAyIDE5OTUgMDA6MDA6MDAKICAgICAgICogLy8gXQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBjb21wYXJlQXNjKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7CiAgICAgICAgdmFyIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlTGVmdCk7CiAgICAgICAgdmFyIHRpbWVMZWZ0ID0gZGF0ZUxlZnQuZ2V0VGltZSgpOwogICAgICAgIHZhciBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGVSaWdodCk7CiAgICAgICAgdmFyIHRpbWVSaWdodCA9IGRhdGVSaWdodC5nZXRUaW1lKCk7CgogICAgICAgIGlmICh0aW1lTGVmdCA8IHRpbWVSaWdodCkgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0gZWxzZSBpZiAodGltZUxlZnQgPiB0aW1lUmlnaHQpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gY29tcGFyZUFzYzsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwOSk7CgogICAgICB2YXIgYnVpbGRGb3JtYXRMb2NhbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgTG9jYWxlcwogICAgICAgKiBAc3VtbWFyeSBFbmdsaXNoIGxvY2FsZS4KICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgZGlzdGFuY2VJbldvcmRzOiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpLAogICAgICAgIGZvcm1hdDogYnVpbGRGb3JtYXRMb2NhbGUoKQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCkgewogICAgICAgIHZhciBkaXN0YW5jZUluV29yZHNMb2NhbGUgPSB7CiAgICAgICAgICBsZXNzVGhhblhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJ2xlc3MgdGhhbiBhIHNlY29uZCcsCiAgICAgICAgICAgIG90aGVyOiAnbGVzcyB0aGFuIHt7Y291bnR9fSBzZWNvbmRzJwogICAgICAgICAgfSwKICAgICAgICAgIHhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJzEgc2Vjb25kJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gc2Vjb25kcycKICAgICAgICAgIH0sCiAgICAgICAgICBoYWxmQU1pbnV0ZTogJ2hhbGYgYSBtaW51dGUnLAogICAgICAgICAgbGVzc1RoYW5YTWludXRlczogewogICAgICAgICAgICBvbmU6ICdsZXNzIHRoYW4gYSBtaW51dGUnLAogICAgICAgICAgICBvdGhlcjogJ2xlc3MgdGhhbiB7e2NvdW50fX0gbWludXRlcycKICAgICAgICAgIH0sCiAgICAgICAgICB4TWludXRlczogewogICAgICAgICAgICBvbmU6ICcxIG1pbnV0ZScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IG1pbnV0ZXMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYSG91cnM6IHsKICAgICAgICAgICAgb25lOiAnYWJvdXQgMSBob3VyJywKICAgICAgICAgICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0gaG91cnMnCiAgICAgICAgICB9LAogICAgICAgICAgeEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEgaG91cicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGhvdXJzJwogICAgICAgICAgfSwKICAgICAgICAgIHhEYXlzOiB7CiAgICAgICAgICAgIG9uZTogJzEgZGF5JywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gZGF5cycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnYWJvdXQgMSBtb250aCcsCiAgICAgICAgICAgIG90aGVyOiAnYWJvdXQge3tjb3VudH19IG1vbnRocycKICAgICAgICAgIH0sCiAgICAgICAgICB4TW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJzEgbW9udGgnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBtb250aHMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnYWJvdXQgMSB5ZWFyJywKICAgICAgICAgICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0geWVhcnMnCiAgICAgICAgICB9LAogICAgICAgICAgeFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEgeWVhcicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IHllYXJzJwogICAgICAgICAgfSwKICAgICAgICAgIG92ZXJYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnb3ZlciAxIHllYXInLAogICAgICAgICAgICBvdGhlcjogJ292ZXIge3tjb3VudH19IHllYXJzJwogICAgICAgICAgfSwKICAgICAgICAgIGFsbW9zdFhZZWFyczogewogICAgICAgICAgICBvbmU6ICdhbG1vc3QgMSB5ZWFyJywKICAgICAgICAgICAgb3RoZXI6ICdhbG1vc3Qge3tjb3VudH19IHllYXJzJwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxvY2FsaXplKHRva2VuLCBjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXTsKICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vbmU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm90aGVyLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gJ2luICcgKyByZXN1bHQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCArICcgYWdvJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9jYWxpemU6IGxvY2FsaXplCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgYnVpbGRGb3JtYXR0aW5nVG9rZW5zUmVnRXhwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTEpOwoKICAgICAgZnVuY3Rpb24gYnVpbGRGb3JtYXRMb2NhbGUoKSB7CiAgICAgICAgLy8gTm90ZTogaW4gRW5nbGlzaCwgdGhlIG5hbWVzIG9mIGRheXMgb2YgdGhlIHdlZWsgYW5kIG1vbnRocyBhcmUgY2FwaXRhbGl6ZWQuCiAgICAgICAgLy8gSWYgeW91IGFyZSBtYWtpbmcgYSBuZXcgbG9jYWxlIGJhc2VkIG9uIHRoaXMgb25lLCBjaGVjayBpZiB0aGUgc2FtZSBpcyB0cnVlIGZvciB0aGUgbGFuZ3VhZ2UgeW91J3JlIHdvcmtpbmcgb24uCiAgICAgICAgLy8gR2VuZXJhbGx5LCBmb3JtYXR0ZWQgZGF0ZXMgc2hvdWxkIGxvb2sgbGlrZSB0aGV5IGFyZSBpbiB0aGUgbWlkZGxlIG9mIGEgc2VudGVuY2UsCiAgICAgICAgLy8gZS5nLiBpbiBTcGFuaXNoIGxhbmd1YWdlIHRoZSB3ZWVrZGF5cyBhbmQgbW9udGhzIHNob3VsZCBiZSBpbiB0aGUgbG93ZXJjYXNlLgogICAgICAgIHZhciBtb250aHMzY2hhciA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXTsKICAgICAgICB2YXIgbW9udGhzRnVsbCA9IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddOwogICAgICAgIHZhciB3ZWVrZGF5czJjaGFyID0gWydTdScsICdNbycsICdUdScsICdXZScsICdUaCcsICdGcicsICdTYSddOwogICAgICAgIHZhciB3ZWVrZGF5czNjaGFyID0gWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXTsKICAgICAgICB2YXIgd2Vla2RheXNGdWxsID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddOwogICAgICAgIHZhciBtZXJpZGllbVVwcGVyY2FzZSA9IFsnQU0nLCAnUE0nXTsKICAgICAgICB2YXIgbWVyaWRpZW1Mb3dlcmNhc2UgPSBbJ2FtJywgJ3BtJ107CiAgICAgICAgdmFyIG1lcmlkaWVtRnVsbCA9IFsnYS5tLicsICdwLm0uJ107CiAgICAgICAgdmFyIGZvcm1hdHRlcnMgPSB7CiAgICAgICAgICAvLyBNb250aDogSmFuLCBGZWIsIC4uLiwgRGVjCiAgICAgICAgICAnTU1NJzogZnVuY3Rpb24gTU1NKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIG1vbnRoczNjaGFyW2RhdGUuZ2V0TW9udGgoKV07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gTW9udGg6IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyCiAgICAgICAgICAnTU1NTSc6IGZ1bmN0aW9uIE1NTU0oZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gbW9udGhzRnVsbFtkYXRlLmdldE1vbnRoKCldOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIERheSBvZiB3ZWVrOiBTdSwgTW8sIC4uLiwgU2EKICAgICAgICAgICdkZCc6IGZ1bmN0aW9uIGRkKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXlzMmNoYXJbZGF0ZS5nZXREYXkoKV07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gRGF5IG9mIHdlZWs6IFN1biwgTW9uLCAuLi4sIFNhdAogICAgICAgICAgJ2RkZCc6IGZ1bmN0aW9uIGRkZChkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5czNjaGFyW2RhdGUuZ2V0RGF5KCldOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIERheSBvZiB3ZWVrOiBTdW5kYXksIE1vbmRheSwgLi4uLCBTYXR1cmRheQogICAgICAgICAgJ2RkZGQnOiBmdW5jdGlvbiBkZGRkKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXlzRnVsbFtkYXRlLmdldERheSgpXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBBTSwgUE0KICAgICAgICAgICdBJzogZnVuY3Rpb24gQShkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCkgLyAxMiA+PSAxID8gbWVyaWRpZW1VcHBlcmNhc2VbMV0gOiBtZXJpZGllbVVwcGVyY2FzZVswXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBhbSwgcG0KICAgICAgICAgICdhJzogZnVuY3Rpb24gYShkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCkgLyAxMiA+PSAxID8gbWVyaWRpZW1Mb3dlcmNhc2VbMV0gOiBtZXJpZGllbUxvd2VyY2FzZVswXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBhLm0uLCBwLm0uCiAgICAgICAgICAnYWEnOiBmdW5jdGlvbiBhYShkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCkgLyAxMiA+PSAxID8gbWVyaWRpZW1GdWxsWzFdIDogbWVyaWRpZW1GdWxsWzBdOwogICAgICAgICAgfQogICAgICAgIH07IC8vIEdlbmVyYXRlIG9yZGluYWwgdmVyc2lvbiBvZiBmb3JtYXR0ZXJzOiBNIC0+IE1vLCBEIC0+IERvLCBldGMuCgogICAgICAgIHZhciBvcmRpbmFsRm9ybWF0dGVycyA9IFsnTScsICdEJywgJ0RERCcsICdkJywgJ1EnLCAnVyddOwogICAgICAgIG9yZGluYWxGb3JtYXR0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGZvcm1hdHRlclRva2VuKSB7CiAgICAgICAgICBmb3JtYXR0ZXJzW2Zvcm1hdHRlclRva2VuICsgJ28nXSA9IGZ1bmN0aW9uIChkYXRlLCBmb3JtYXR0ZXJzKSB7CiAgICAgICAgICAgIHJldHVybiBvcmRpbmFsKGZvcm1hdHRlcnNbZm9ybWF0dGVyVG9rZW5dKGRhdGUpKTsKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGZvcm1hdHRlcnM6IGZvcm1hdHRlcnMsCiAgICAgICAgICBmb3JtYXR0aW5nVG9rZW5zUmVnRXhwOiBidWlsZEZvcm1hdHRpbmdUb2tlbnNSZWdFeHAoZm9ybWF0dGVycykKICAgICAgICB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikgewogICAgICAgIHZhciByZW0xMDAgPSBudW1iZXIgJSAxMDA7CgogICAgICAgIGlmIChyZW0xMDAgPiAyMCB8fCByZW0xMDAgPCAxMCkgewogICAgICAgICAgc3dpdGNoIChyZW0xMDAgJSAxMCkgewogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgcmV0dXJuIG51bWJlciArICdzdCc7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmV0dXJuIG51bWJlciArICduZCc7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIG51bWJlciArICdyZCc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3RoJzsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZEZvcm1hdExvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICB2YXIgY29tbW9uRm9ybWF0dGVyS2V5cyA9IFsnTScsICdNTScsICdRJywgJ0QnLCAnREQnLCAnREREJywgJ0REREQnLCAnZCcsICdFJywgJ1cnLCAnV1cnLCAnWVknLCAnWVlZWScsICdHRycsICdHR0dHJywgJ0gnLCAnSEgnLCAnaCcsICdoaCcsICdtJywgJ21tJywgJ3MnLCAnc3MnLCAnUycsICdTUycsICdTU1MnLCAnWicsICdaWicsICdYJywgJ3gnXTsKCiAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cChmb3JtYXR0ZXJzKSB7CiAgICAgICAgdmFyIGZvcm1hdHRlcktleXMgPSBbXTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIGZvcm1hdHRlcnMpIHsKICAgICAgICAgIGlmIChmb3JtYXR0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgZm9ybWF0dGVyS2V5cy5wdXNoKGtleSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgZm9ybWF0dGluZ1Rva2VucyA9IGNvbW1vbkZvcm1hdHRlcktleXMuY29uY2F0KGZvcm1hdHRlcktleXMpLnNvcnQoKS5yZXZlcnNlKCk7CiAgICAgICAgdmFyIGZvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSBuZXcgUmVnRXhwKCcoXFxbW15cXFtdKlxcXSl8KFxcXFwpPycgKyAnKCcgKyBmb3JtYXR0aW5nVG9rZW5zLmpvaW4oJ3wnKSArICd8LiknLCAnZycpOwogICAgICAgIHJldHVybiBmb3JtYXR0aW5nVG9rZW5zUmVnRXhwOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBmdW5jdGlvbiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpIHsKICAgICAgICB2YXIgZGlzdGFuY2VJbldvcmRzTG9jYWxlID0gewogICAgICAgICAgbGVzc1RoYW5YU2Vjb25kczogewogICAgICAgICAgICBvbmU6ICfkuI3liLAgMSDnp5InLAogICAgICAgICAgICBvdGhlcjogJ+S4jeWIsCB7e2NvdW50fX0g56eSJwogICAgICAgICAgfSwKICAgICAgICAgIHhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJzEg56eSJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g56eSJwogICAgICAgICAgfSwKICAgICAgICAgIGhhbGZBTWludXRlOiAn5Y2K5YiG6ZKfJywKICAgICAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAn5LiN5YiwIDEg5YiG6ZKfJywKICAgICAgICAgICAgb3RoZXI6ICfkuI3liLAge3tjb3VudH19IOWIhumSnycKICAgICAgICAgIH0sCiAgICAgICAgICB4TWludXRlczogewogICAgICAgICAgICBvbmU6ICcxIOWIhumSnycsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWIhumSnycKICAgICAgICAgIH0sCiAgICAgICAgICB4SG91cnM6IHsKICAgICAgICAgICAgb25lOiAnMSDlsI/ml7YnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlsI/ml7YnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYSG91cnM6IHsKICAgICAgICAgICAgb25lOiAn5aSn57qmIDEg5bCP5pe2JywKICAgICAgICAgICAgb3RoZXI6ICflpKfnuqYge3tjb3VudH19IOWwj+aXticKICAgICAgICAgIH0sCiAgICAgICAgICB4RGF5czogewogICAgICAgICAgICBvbmU6ICcxIOWkqScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWkqScKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAn5aSn57qmIDEg5Liq5pyIJywKICAgICAgICAgICAgb3RoZXI6ICflpKfnuqYge3tjb3VudH19IOS4quaciCcKICAgICAgICAgIH0sCiAgICAgICAgICB4TW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5Liq5pyIJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5Liq5pyIJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wkp+e6piAxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAn5aSn57qmIHt7Y291bnR9fSDlubQnCiAgICAgICAgICB9LAogICAgICAgICAgeFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5bm0JwogICAgICAgICAgfSwKICAgICAgICAgIG92ZXJYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAn6LaF6L+HIDEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICfotoXov4cge3tjb3VudH19IOW5tCcKICAgICAgICAgIH0sCiAgICAgICAgICBhbG1vc3RYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAn5bCG6L+RIDEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICflsIbov5Ege3tjb3VudH19IOW5tCcKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsb2NhbGl6ZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgICBpZiAodHlwZW9mIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl07CiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub25lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vdGhlci5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCArICflhoUnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQgKyAn5YmNJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9jYWxpemU6IGxvY2FsaXplCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBmdW5jdGlvbiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpIHsKICAgICAgICB2YXIgZGlzdGFuY2VJbldvcmRzTG9jYWxlID0gewogICAgICAgICAgbGVzc1RoYW5YU2Vjb25kczogewogICAgICAgICAgICBvbmU6ICflsJHmlrwgMSDnp5InLAogICAgICAgICAgICBvdGhlcjogJ+WwkeaWvCB7e2NvdW50fX0g56eSJwogICAgICAgICAgfSwKICAgICAgICAgIHhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJzEg56eSJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g56eSJwogICAgICAgICAgfSwKICAgICAgICAgIGhhbGZBTWludXRlOiAn5Y2K5YiG6ZCYJywKICAgICAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAn5bCR5pa8IDEg5YiG6ZCYJywKICAgICAgICAgICAgb3RoZXI6ICflsJHmlrwge3tjb3VudH19IOWIhumQmCcKICAgICAgICAgIH0sCiAgICAgICAgICB4TWludXRlczogewogICAgICAgICAgICBvbmU6ICcxIOWIhumQmCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWIhumQmCcKICAgICAgICAgIH0sCiAgICAgICAgICB4SG91cnM6IHsKICAgICAgICAgICAgb25lOiAnMSDlsI/mmYInLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlsI/mmYInCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYSG91cnM6IHsKICAgICAgICAgICAgb25lOiAn5aSn57SEIDEg5bCP5pmCJywKICAgICAgICAgICAgb3RoZXI6ICflpKfntIQge3tjb3VudH19IOWwj+aZgicKICAgICAgICAgIH0sCiAgICAgICAgICB4RGF5czogewogICAgICAgICAgICBvbmU6ICcxIOWkqScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWkqScKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAn5aSn57SEIDEg5YCL5pyIJywKICAgICAgICAgICAgb3RoZXI6ICflpKfntIQge3tjb3VudH19IOWAi+aciCcKICAgICAgICAgIH0sCiAgICAgICAgICB4TW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5YCL5pyIJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5YCL5pyIJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ+Wkp+e0hCAxIOW5tCcsCiAgICAgICAgICAgIG90aGVyOiAn5aSn57SEIHt7Y291bnR9fSDlubQnCiAgICAgICAgICB9LAogICAgICAgICAgeFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5bm0JwogICAgICAgICAgfSwKICAgICAgICAgIG92ZXJYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAn6LaF6YGOIDEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICfotoXpgY4ge3tjb3VudH19IOW5tCcKICAgICAgICAgIH0sCiAgICAgICAgICBhbG1vc3RYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAn5bCH6L+RIDEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICflsIfov5Ege3tjb3VudH19IOW5tCcKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsb2NhbGl6ZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgICBpZiAodHlwZW9mIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl07CiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub25lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vdGhlci5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCArICflhacnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQgKyAn5YmNJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9jYWxpemU6IGxvY2FsaXplCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBmdW5jdGlvbiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpIHsKICAgICAgICB2YXIgZGlzdGFuY2VJbldvcmRzTG9jYWxlID0gewogICAgICAgICAgbGVzc1RoYW5YU2Vjb25kczogewogICAgICAgICAgICBvbmU6ICdtZW5vcyBkZSB1biBzZWd1bmRvJywKICAgICAgICAgICAgb3RoZXI6ICdtZW5vcyBkZSB7e2NvdW50fX0gc2VndW5kb3MnCiAgICAgICAgICB9LAogICAgICAgICAgeFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnMSBzZWd1bmRvJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gc2VndW5kb3MnCiAgICAgICAgICB9LAogICAgICAgICAgaGFsZkFNaW51dGU6ICdtZWRpbyBtaW51dG8nLAogICAgICAgICAgbGVzc1RoYW5YTWludXRlczogewogICAgICAgICAgICBvbmU6ICdtZW5vcyBkZSB1biBtaW51dG8nLAogICAgICAgICAgICBvdGhlcjogJ21lbm9zIGRlIHt7Y291bnR9fSBtaW51dG9zJwogICAgICAgICAgfSwKICAgICAgICAgIHhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJzEgbWludXRvJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gbWludXRvcycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhIb3VyczogewogICAgICAgICAgICBvbmU6ICdhbHJlZGVkb3IgZGUgMSBob3JhJywKICAgICAgICAgICAgb3RoZXI6ICdhbHJlZGVkb3IgZGUge3tjb3VudH19IGhvcmFzJwogICAgICAgICAgfSwKICAgICAgICAgIHhIb3VyczogewogICAgICAgICAgICBvbmU6ICcxIGhvcmEnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBob3JhcycKICAgICAgICAgIH0sCiAgICAgICAgICB4RGF5czogewogICAgICAgICAgICBvbmU6ICcxIGTDrWEnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBkw61hcycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnYWxyZWRlZG9yIGRlIDEgbWVzJywKICAgICAgICAgICAgb3RoZXI6ICdhbHJlZGVkb3IgZGUge3tjb3VudH19IG1lc2VzJwogICAgICAgICAgfSwKICAgICAgICAgIHhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnMSBtZXMnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBtZXNlcycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhZZWFyczogewogICAgICAgICAgICBvbmU6ICdhbHJlZGVkb3IgZGUgMSBhw7FvJywKICAgICAgICAgICAgb3RoZXI6ICdhbHJlZGVkb3IgZGUge3tjb3VudH19IGHDsW9zJwogICAgICAgICAgfSwKICAgICAgICAgIHhZZWFyczogewogICAgICAgICAgICBvbmU6ICcxIGHDsW8nLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBhw7FvcycKICAgICAgICAgIH0sCiAgICAgICAgICBvdmVyWFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ23DoXMgZGUgMSBhw7FvJywKICAgICAgICAgICAgb3RoZXI6ICdtw6FzIGRlIHt7Y291bnR9fSBhw7FvcycKICAgICAgICAgIH0sCiAgICAgICAgICBhbG1vc3RYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnY2FzaSAxIGHDsW8nLAogICAgICAgICAgICBvdGhlcjogJ2Nhc2kge3tjb3VudH19IGHDsW9zJwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxvY2FsaXplKHRva2VuLCBjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXTsKICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vbmU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm90aGVyLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gJ2VuICcgKyByZXN1bHQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuICdoYWNlICcgKyByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxvY2FsaXplOiBsb2NhbGl6ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjE1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZnVuY3Rpb24gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSB7CiAgICAgICAgdmFyIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IHsKICAgICAgICAgIGxlc3NUaGFuWFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnbW9pbnMgZOKAmXVuZSBzZWNvbmRlJywKICAgICAgICAgICAgb3RoZXI6ICdtb2lucyBkZSB7e2NvdW50fX0gc2Vjb25kZXMnCiAgICAgICAgICB9LAogICAgICAgICAgeFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnMSBzZWNvbmRlJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gc2Vjb25kZXMnCiAgICAgICAgICB9LAogICAgICAgICAgaGFsZkFNaW51dGU6ICczMCBzZWNvbmRlcycsCiAgICAgICAgICBsZXNzVGhhblhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJ21vaW5zIGTigJl1bmUgbWludXRlJywKICAgICAgICAgICAgb3RoZXI6ICdtb2lucyBkZSB7e2NvdW50fX0gbWludXRlcycKICAgICAgICAgIH0sCiAgICAgICAgICB4TWludXRlczogewogICAgICAgICAgICBvbmU6ICcxIG1pbnV0ZScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IG1pbnV0ZXMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYSG91cnM6IHsKICAgICAgICAgICAgb25lOiAnZW52aXJvbiAxIGhldXJlJywKICAgICAgICAgICAgb3RoZXI6ICdlbnZpcm9uIHt7Y291bnR9fSBoZXVyZXMnCiAgICAgICAgICB9LAogICAgICAgICAgeEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEgaGV1cmUnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBoZXVyZXMnCiAgICAgICAgICB9LAogICAgICAgICAgeERheXM6IHsKICAgICAgICAgICAgb25lOiAnMSBqb3VyJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gam91cnMnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYTW9udGhzOiB7CiAgICAgICAgICAgIG9uZTogJ2Vudmlyb24gMSBtb2lzJywKICAgICAgICAgICAgb3RoZXI6ICdlbnZpcm9uIHt7Y291bnR9fSBtb2lzJwogICAgICAgICAgfSwKICAgICAgICAgIHhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnMSBtb2lzJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gbW9pcycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhZZWFyczogewogICAgICAgICAgICBvbmU6ICdlbnZpcm9uIDEgYW4nLAogICAgICAgICAgICBvdGhlcjogJ2Vudmlyb24ge3tjb3VudH19IGFucycKICAgICAgICAgIH0sCiAgICAgICAgICB4WWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnMSBhbicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGFucycKICAgICAgICAgIH0sCiAgICAgICAgICBvdmVyWFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ3BsdXMgZOKAmXVuIGFuJywKICAgICAgICAgICAgb3RoZXI6ICdwbHVzIGRlIHt7Y291bnR9fSBhbnMnCiAgICAgICAgICB9LAogICAgICAgICAgYWxtb3N0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ3ByZXNxdeKAmXVuIGFuJywKICAgICAgICAgICAgb3RoZXI6ICdwcmVzcXVlIHt7Y291bnR9fSBhbnMnCiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbG9jYWxpemUodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dOwogICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm9uZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgIHJldHVybiAnZGFucyAnICsgcmVzdWx0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiAnaWwgeSBhICcgKyByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxvY2FsaXplOiBsb2NhbGl6ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjE2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZnVuY3Rpb24gZGVjbGVuc2lvbihzY2hlbWUsIGNvdW50KSB7CiAgICAgICAgLy8gc2NoZW1lIGZvciBjb3VudD0xIGV4aXN0cwogICAgICAgIGlmIChzY2hlbWUub25lICE9PSB1bmRlZmluZWQgJiYgY291bnQgPT09IDEpIHsKICAgICAgICAgIHJldHVybiBzY2hlbWUub25lOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlbTEwID0gY291bnQgJSAxMDsKICAgICAgICB2YXIgcmVtMTAwID0gY291bnQgJSAxMDA7IC8vIDEsIDIxLCAzMSwgLi4uCgogICAgICAgIGlmIChyZW0xMCA9PT0gMSAmJiByZW0xMDAgIT09IDExKSB7CiAgICAgICAgICByZXR1cm4gc2NoZW1lLnNpbmd1bGFyTm9taW5hdGl2ZS5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7IC8vIDIsIDMsIDQsIDIyLCAyMywgMjQsIDMyIC4uLgogICAgICAgIH0gZWxzZSBpZiAocmVtMTAgPj0gMiAmJiByZW0xMCA8PSA0ICYmIChyZW0xMDAgPCAxMCB8fCByZW0xMDAgPiAyMCkpIHsKICAgICAgICAgIHJldHVybiBzY2hlbWUuc2luZ3VsYXJHZW5pdGl2ZS5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7IC8vIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgLi4uCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBzY2hlbWUucGx1cmFsR2VuaXRpdmUucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gYnVpbGRMb2NhbGl6ZVRva2VuRm4oc2NoZW1lKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgaWYgKHNjaGVtZS5mdXR1cmUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkZWNsZW5zaW9uKHNjaGVtZS5mdXR1cmUsIGNvdW50KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICfRh9C10YDQtdC3ICcgKyBkZWNsZW5zaW9uKHNjaGVtZS5yZWd1bGFyLCBjb3VudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChzY2hlbWUucGFzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlY2xlbnNpb24oc2NoZW1lLnBhc3QsIGNvdW50KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlY2xlbnNpb24oc2NoZW1lLnJlZ3VsYXIsIGNvdW50KSArICcg0L3QsNC30LDQtCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZGVjbGVuc2lvbihzY2hlbWUucmVndWxhciwgY291bnQpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCkgewogICAgICAgIHZhciBkaXN0YW5jZUluV29yZHNMb2NhbGUgPSB7CiAgICAgICAgICBsZXNzVGhhblhTZWNvbmRzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBvbmU6ICfQvNC10L3RjNGI0LUg0YHQtdC60YPQvdC00YsnLAogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C80LXQvdGM0YjQtSB7e2NvdW50fX0g0YHQtdC60YPQvdC00YsnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUge3tjb3VudH19INGB0LXQutGD0L3QtCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUge3tjb3VudH19INGB0LXQutGD0L3QtCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgb25lOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyDRgdC10LrRg9C90LTRgycsCiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0YHQtdC60YPQvdC00YMnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDRgdC10LrRg9C90LTRiycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDRgdC10LrRg9C90LQnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgeFNlY29uZHM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDRgdC10LrRg9C90LTQsCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDRgdC10LrRg9C90LTRiycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0YHQtdC60YPQvdC0JwogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXN0OiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INGB0LXQutGD0L3QtNGDINC90LDQt9Cw0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0YHQtdC60YPQvdC00Ysg0L3QsNC30LDQtCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0YHQtdC60YPQvdC0INC90LDQt9Cw0LQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9GH0LXRgNC10Lcge3tjb3VudH19INGB0LXQutGD0L3QtNGDJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0YfQtdGA0LXQtyB7e2NvdW50fX0g0YHQtdC60YPQvdC00YsnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0YfQtdGA0LXQtyB7e2NvdW50fX0g0YHQtdC60YPQvdC0JwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIGhhbGZBTWludXRlOiBmdW5jdGlvbiBoYWxmQU1pbnV0ZShfLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ9GH0LXRgNC10Lcg0L/QvtC70LzQuNC90YPRgtGLJzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICfQv9C+0LvQvNC40L3Rg9GC0Ysg0L3QsNC30LDQtCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gJ9C/0L7Qu9C80LjQvdGD0YLRiyc7CiAgICAgICAgICB9LAogICAgICAgICAgbGVzc1RoYW5YTWludXRlczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgb25lOiAn0LzQtdC90YzRiNC1INC80LjQvdGD0YLRiycsCiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0LzQtdC90YzRiNC1IHt7Y291bnR9fSDQvNC40L3Rg9GC0YsnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUge3tjb3VudH19INC80LjQvdGD0YInLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0LzQtdC90YzRiNC1IHt7Y291bnR9fSDQvNC40L3Rg9GCJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBvbmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3INC80LjQvdGD0YLRgycsCiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQuNC90YPRgtGDJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQuNC90YPRgtGLJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INC80LjQvdGD0YInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgeE1pbnV0ZXM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDQvNC40L3Rg9GC0LAnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0LzQuNC90YPRgtGLJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDQvNC40L3Rg9GCJwogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXN0OiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INC80LjQvdGD0YLRgyDQvdCw0LfQsNC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INC80LjQvdGD0YLRiyDQvdCw0LfQsNC0JywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDQvNC40L3Rg9GCINC90LDQt9Cw0LQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9GH0LXRgNC10Lcge3tjb3VudH19INC80LjQvdGD0YLRgycsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9GH0LXRgNC10Lcge3tjb3VudH19INC80LjQvdGD0YLRiycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC40L3Rg9GCJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIGFib3V0WEhvdXJzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDRh9Cw0YHQsCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INGH0LDRgdC+0LInLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0YfQsNGB0L7QsicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDRh9Cw0YEnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INGH0LDRgdCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0YfQsNGB0L7QsicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICB4SG91cnM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDRh9Cw0YEnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0YfQsNGB0LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INGH0LDRgdC+0LInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgeERheXM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDQtNC10L3RjCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDQtNC90Y8nLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INC00L3QtdC5JwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIGFib3V0WE1vbnRoczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0LzQtdGB0Y/RhtCwJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0LzQtdGB0Y/RhtC10LInLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0LzQtdGB0Y/RhtC10LInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQtdGB0Y/RhicsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQtdGB0Y/RhtCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQtdGB0Y/RhtC10LInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgeE1vbnRoczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INC80LXRgdGP0YYnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0LzQtdGB0Y/RhtCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDQvNC10YHRj9GG0LXQsicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBhYm91dFhZZWFyczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDQu9C10YInLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INCz0L7QtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgeFllYXJzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0LPQvtC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgb3ZlclhZZWFyczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0LHQvtC70YzRiNC1IHt7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9Cx0L7Qu9GM0YjQtSB7e2NvdW50fX0g0LvQtdGCJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9Cx0L7Qu9GM0YjQtSB7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQsdC+0LvRjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDQs9C+0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQsdC+0LvRjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQsdC+0LvRjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgYWxtb3N0WFllYXJzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQv9C+0YfRgtC4IHt7Y291bnR9fSDQs9C+0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQv9C+0YfRgtC4IHt7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQv9C+0YfRgtC4IHt7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C/0L7Rh9GC0Lgg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LPQvtC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L/QvtGH0YLQuCDRh9C10YDQtdC3IHt7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQv9C+0YfRgtC4INGH0LXRgNC10Lcge3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsb2NhbGl6ZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgcmV0dXJuIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0oY291bnQsIG9wdGlvbnMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxvY2FsaXplOiBsb2NhbGl6ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjE3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpbgoKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CiAgICAgIHZhciBHVF9BQ0NFU1NfVE9LRU4gPSBleHBvcnRzLkdUX0FDQ0VTU19UT0tFTiA9ICdHVF9BQ0NFU1NfVE9LRU4nOwogICAgICB2YXIgR1RfVkVSU0lPTiA9IGV4cG9ydHMuR1RfVkVSU0lPTiA9ICIxLjYuMiI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgICAgIHZhciBHVF9DT01NRU5UID0gZXhwb3J0cy5HVF9DT01NRU5UID0gJ0dUX0NPTU1FTlQnOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfdG9Db25zdW1hYmxlQXJyYXkyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjApOwoKICAgICAgdmFyIF90b0NvbnN1bWFibGVBcnJheTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90b0NvbnN1bWFibGVBcnJheTIpOwoKICAgICAgdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBnZXRRTCA9IGZ1bmN0aW9uIGdldFFMKHZhcnMsIHBhZ2VyRGlyZWN0aW9uKSB7CiAgICAgICAgdmFyIGN1cnNvckRpcmVjdGlvbiA9IHBhZ2VyRGlyZWN0aW9uID09PSAnbGFzdCcgPyAnYmVmb3JlJyA6ICdhZnRlcic7CiAgICAgICAgdmFyIHFsID0gJ1xuICBxdWVyeSBnZXRJc3N1ZUFuZENvbW1lbnRzKFxuICAgICRvd25lcjogU3RyaW5nISxcbiAgICAkcmVwbzogU3RyaW5nISxcbiAgICAkaWQ6IEludCEsXG4gICAgJGN1cnNvcjogU3RyaW5nLFxuICAgICRwYWdlU2l6ZTogSW50IVxuICApIHtcbiAgICByZXBvc2l0b3J5KG93bmVyOiAkb3duZXIsIG5hbWU6ICRyZXBvKSB7XG4gICAgICBpc3N1ZShudW1iZXI6ICRpZCkge1xuICAgICAgICB0aXRsZVxuICAgICAgICB1cmxcbiAgICAgICAgYm9keUhUTUxcbiAgICAgICAgY3JlYXRlZEF0XG4gICAgICAgIGNvbW1lbnRzKCcgKyBwYWdlckRpcmVjdGlvbiArICc6ICRwYWdlU2l6ZSwgJyArIGN1cnNvckRpcmVjdGlvbiArICc6ICRjdXJzb3IpIHtcbiAgICAgICAgICB0b3RhbENvdW50XG4gICAgICAgICAgcGFnZUluZm8ge1xuICAgICAgICAgICAgJyArIChwYWdlckRpcmVjdGlvbiA9PT0gJ2xhc3QnID8gJ2hhc1ByZXZpb3VzUGFnZScgOiAnaGFzTmV4dFBhZ2UnKSArICdcbiAgICAgICAgICAgICcgKyAoY3Vyc29yRGlyZWN0aW9uID09PSAnYmVmb3JlJyA/ICdzdGFydEN1cnNvcicgOiAnZW5kQ3Vyc29yJykgKyAnXG4gICAgICAgICAgfVxuICAgICAgICAgIG5vZGVzIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBkYXRhYmFzZUlkXG4gICAgICAgICAgICBhdXRob3Ige1xuICAgICAgICAgICAgICBhdmF0YXJVcmxcbiAgICAgICAgICAgICAgbG9naW5cbiAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5SFRNTFxuICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgY3JlYXRlZEF0XG4gICAgICAgICAgICByZWFjdGlvbnMoZmlyc3Q6IDEwMCwgY29udGVudDogSEVBUlQpIHtcbiAgICAgICAgICAgICAgdG90YWxDb3VudFxuICAgICAgICAgICAgICB2aWV3ZXJIYXNSZWFjdGVkXG4gICAgICAgICAgICAgIHBhZ2VJbmZve1xuICAgICAgICAgICAgICAgIGhhc05leHRQYWdlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbm9kZXMge1xuICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgZGF0YWJhc2VJZFxuICAgICAgICAgICAgICAgIHVzZXIge1xuICAgICAgICAgICAgICAgICAgbG9naW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgJzsKICAgICAgICBpZiAodmFycy5jdXJzb3IgPT09IG51bGwpIGRlbGV0ZSB2YXJzLmN1cnNvcjsKICAgICAgICByZXR1cm4gewogICAgICAgICAgb3BlcmF0aW9uTmFtZTogJ2dldElzc3VlQW5kQ29tbWVudHMnLAogICAgICAgICAgcXVlcnk6IHFsLAogICAgICAgICAgdmFyaWFibGVzOiB2YXJzCiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIGdldENvbW1lbnRzKGlzc3VlKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICBvd25lciA9IF9vcHRpb25zLm93bmVyLAogICAgICAgICAgICByZXBvID0gX29wdGlvbnMucmVwbywKICAgICAgICAgICAgcGVyUGFnZSA9IF9vcHRpb25zLnBlclBhZ2UsCiAgICAgICAgICAgIHBhZ2VyRGlyZWN0aW9uID0gX29wdGlvbnMucGFnZXJEaXJlY3Rpb24sCiAgICAgICAgICAgIGRlZmF1bHRBdXRob3IgPSBfb3B0aW9ucy5kZWZhdWx0QXV0aG9yOwogICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICBjdXJzb3IgPSBfc3RhdGUuY3Vyc29yLAogICAgICAgICAgICBjb21tZW50cyA9IF9zdGF0ZS5jb21tZW50czsKICAgICAgICByZXR1cm4gX3V0aWwuYXhpb3NHaXRodWIucG9zdCgnL2dyYXBocWwnLCBnZXRRTCh7CiAgICAgICAgICBvd25lcjogb3duZXIsCiAgICAgICAgICByZXBvOiByZXBvLAogICAgICAgICAgaWQ6IGlzc3VlLm51bWJlciwKICAgICAgICAgIHBhZ2VTaXplOiBwZXJQYWdlLAogICAgICAgICAgY3Vyc29yOiBjdXJzb3IKICAgICAgICB9LCBwYWdlckRpcmVjdGlvbiksIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ2JlYXJlciAnICsgdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhLnJlcG9zaXRvcnkuaXNzdWUuY29tbWVudHM7CiAgICAgICAgICB2YXIgaXRlbXMgPSBkYXRhLm5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICB2YXIgYXV0aG9yID0gbm9kZS5hdXRob3IgfHwgZGVmYXVsdEF1dGhvcjsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBpZDogbm9kZS5kYXRhYmFzZUlkLAogICAgICAgICAgICAgIGdJZDogbm9kZS5pZCwKICAgICAgICAgICAgICB1c2VyOiB7CiAgICAgICAgICAgICAgICBhdmF0YXJfdXJsOiBhdXRob3IuYXZhdGFyVXJsLAogICAgICAgICAgICAgICAgbG9naW46IGF1dGhvci5sb2dpbiwKICAgICAgICAgICAgICAgIGh0bWxfdXJsOiBhdXRob3IudXJsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBub2RlLmNyZWF0ZWRBdCwKICAgICAgICAgICAgICBib2R5X2h0bWw6IG5vZGUuYm9keUhUTUwsCiAgICAgICAgICAgICAgYm9keTogbm9kZS5ib2R5LAogICAgICAgICAgICAgIGh0bWxfdXJsOiAnaHR0cHM6Ly9naXRodWIuY29tLycgKyBvd25lciArICcvJyArIHJlcG8gKyAnL2lzc3Vlcy8nICsgaXNzdWUubnVtYmVyICsgJyNpc3N1ZWNvbW1lbnQtJyArIG5vZGUuZGF0YWJhc2VJZCwKICAgICAgICAgICAgICByZWFjdGlvbnM6IG5vZGUucmVhY3Rpb25zCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBjcyA9IHZvaWQgMDsKCiAgICAgICAgICBpZiAocGFnZXJEaXJlY3Rpb24gPT09ICdsYXN0JykgewogICAgICAgICAgICBjcyA9IFtdLmNvbmNhdCgoMCwgX3RvQ29uc3VtYWJsZUFycmF5M1siZGVmYXVsdCJdKShpdGVtcyksICgwLCBfdG9Db25zdW1hYmxlQXJyYXkzWyJkZWZhdWx0Il0pKGNvbW1lbnRzKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjcyA9IFtdLmNvbmNhdCgoMCwgX3RvQ29uc3VtYWJsZUFycmF5M1siZGVmYXVsdCJdKShjb21tZW50cyksICgwLCBfdG9Db25zdW1hYmxlQXJyYXkzWyJkZWZhdWx0Il0pKGl0ZW1zKSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlzTG9hZE92ZXIgPSBkYXRhLnBhZ2VJbmZvLmhhc1ByZXZpb3VzUGFnZSA9PT0gZmFsc2UgfHwgZGF0YS5wYWdlSW5mby5oYXNOZXh0UGFnZSA9PT0gZmFsc2U7CgogICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBjb21tZW50czogY3MsCiAgICAgICAgICAgIGlzTG9hZE92ZXI6IGlzTG9hZE92ZXIsCiAgICAgICAgICAgIGN1cnNvcjogZGF0YS5wYWdlSW5mby5zdGFydEN1cnNvciB8fCBkYXRhLnBhZ2VJbmZvLmVuZEN1cnNvcgogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIGNzOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBnZXRDb21tZW50czsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMjAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgdmFyIF9mcm9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjEpOwoKICAgICAgdmFyIF9mcm9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zyb20pOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBhcnIyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKDAsIF9mcm9tMlsiZGVmYXVsdCJdKShhcnIpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjIxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMiksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIyMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjApOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMjMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLkFycmF5LmZyb207CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjIzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGN0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgogICAgICB2YXIgY2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpOwoKICAgICAgdmFyIGlzQXJyYXlJdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7CgogICAgICB2YXIgdG9MZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKCiAgICAgIHZhciBjcmVhdGVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjI0KTsKCiAgICAgIHZhciBnZXRJdGVyRm4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTsKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oNjMpKGZ1bmN0aW9uIChpdGVyKSB7CiAgICAgICAgQXJyYXkuZnJvbShpdGVyKTsKICAgICAgfSksICdBcnJheScsIHsKICAgICAgICAvLyAyMi4xLjIuMSBBcnJheS5mcm9tKGFycmF5TGlrZSwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQpCiAgICAgICAgZnJvbTogZnVuY3Rpb24gZnJvbShhcnJheUxpa2UKICAgICAgICAvKiAsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkICovCiAgICAgICAgKSB7CiAgICAgICAgICB2YXIgTyA9IHRvT2JqZWN0KGFycmF5TGlrZSk7CiAgICAgICAgICB2YXIgQyA9IHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgPyB0aGlzIDogQXJyYXk7CiAgICAgICAgICB2YXIgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgICAgICB2YXIgbWFwZm4gPSBhTGVuID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgICAgIHZhciBtYXBwaW5nID0gbWFwZm4gIT09IHVuZGVmaW5lZDsKICAgICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgICB2YXIgaXRlckZuID0gZ2V0SXRlckZuKE8pOwogICAgICAgICAgdmFyIGxlbmd0aCwgcmVzdWx0LCBzdGVwLCBpdGVyYXRvcjsKICAgICAgICAgIGlmIChtYXBwaW5nKSBtYXBmbiA9IGN0eChtYXBmbiwgYUxlbiA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQsIDIpOyAvLyBpZiBvYmplY3QgaXNuJ3QgaXRlcmFibGUgb3IgaXQncyBhcnJheSB3aXRoIGRlZmF1bHQgaXRlcmF0b3IgLSB1c2Ugc2ltcGxlIGNhc2UKCiAgICAgICAgICBpZiAoaXRlckZuICE9IHVuZGVmaW5lZCAmJiAhKEMgPT0gQXJyYXkgJiYgaXNBcnJheUl0ZXIoaXRlckZuKSkpIHsKICAgICAgICAgICAgZm9yIChpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKE8pLCByZXN1bHQgPSBuZXcgQygpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7IGluZGV4KyspIHsKICAgICAgICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBtYXBwaW5nID8gY2FsbChpdGVyYXRvciwgbWFwZm4sIFtzdGVwLnZhbHVlLCBpbmRleF0sIHRydWUpIDogc3RlcC52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTsKCiAgICAgICAgICAgIGZvciAocmVzdWx0ID0gbmV3IEMobGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHsKICAgICAgICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBtYXBwaW5nID8gbWFwZm4oT1tpbmRleF0sIGluZGV4KSA6IE9baW5kZXhdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJlc3VsdC5sZW5ndGggPSBpbmRleDsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMjQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgJGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCiAgICAgIHZhciBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIGluZGV4LCB2YWx1ZSkgewogICAgICAgIGlmIChpbmRleCBpbiBvYmplY3QpICRkZWZpbmVQcm9wZXJ0eS5mKG9iamVjdCwgaW5kZXgsIGNyZWF0ZURlc2MoMCwgdmFsdWUpKTtlbHNlIG9iamVjdFtpbmRleF0gPSB2YWx1ZTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9CiAgICAvKioqKioqLwogICAgXSkKICApOwp9KTs="},{"version":3,"sources":["D:/项目/My_project/vuepress-starter/vuepress-starter/vuepress-starter/node_modules/gitalk/dist/gitalk.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","core","version","__e","global","window","Math","self","Function","__g","store","uid","Symbol","USE_SYMBOL","$exports","bind","toString","isArray","val","isUndefined","isBuffer","constructor","isArrayBuffer","isFormData","FormData","isArrayBufferView","result","ArrayBuffer","isView","buffer","isString","isNumber","isObject","isDate","isFile","isBlob","isFunction","isStream","pipe","isURLSearchParams","URLSearchParams","trim","str","replace","isStandardBrowserEnv","navigator","product","document","forEach","obj","fn","length","key","merge","assignValue","arguments","deepMerge","extend","a","b","thisArg","ctx","hide","has","PROTOTYPE","$export","type","source","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","target","own","out","undefined","C","apply","virtual","R","U","__webpack_exports__","value","process","DOM","Children","render$1","createClass","createFactory","createElement","cloneElement$1","isValidElement","findDOMNode","unmountComponentAtNode","Component$1","PureComponent","renderSubtreeIntoContainer","__WEBPACK_IMPORTED_MODULE_0_prop_types__","__WEBPACK_IMPORTED_MODULE_0_prop_types___default","__WEBPACK_IMPORTED_MODULE_1_preact__","__WEBPACK_IMPORTED_MODULE_1_preact___default","ELEMENTS","split","REACT_ELEMENT_TYPE","COMPONENT_WRAPPER_KEY","AUTOBIND_BLACKLIST","render","shouldComponentUpdate","componentWillReceiveProps","componentWillUpdate","componentDidUpdate","componentWillMount","componentDidMount","componentWillUnmount","componentDidUnmount","CAMEL_PROPS","BYPASS_HOOK","DEV","env","NODE_ENV","EmptyComponent","VNode","$$typeof","preactCompatUpgraded","preactCompatNormalized","nodeName","set","v","attributes","oldEventHook","event","e","persist","nativeEvent","oldVnodeHook","vnode","tag","attrs","children","String","normalizeVNode","handleComponentVNode","defaultValue","handleElementVNode","defaultProps","shouldSanitize","test","toLowerCase","parent","callback","prev","_preactCompatRendered","base","parentNode","childNodes","removeChild","_component","ContextProvider","getChildContext","props","context","parentComponent","container","wrap","existing","ARR","map","toArray","count","only","Error","Array","concat","currentComponent","upgradeToVNodes","arr","offset","isStatelessComponent","wrapStatelessComponent","WrappedComponent","displayName","statelessComponentHook","Ctor","Wrapped","propTypes","args","len","applyClassName","ref","createStringRefProxy","applyEventNormalization","element","elementProps","node","cloneArgs","push","component","_refProxies","resolved","refs","ondoubleclick","ondblclick","onchange","normalized","oninput","multihook","cl","className","shallowDiffers","i$1","bindAll","newComponentHook","mixins","applyMixins","collateMixins","statics","getDefaultProps","keyed","mixin","proto","__bound","callMethod","hooks","skipDuplicates","arguments$1","this$1","ret","r","propsHook","beforeRender","afterRender","ctor","checkPropTypes","opts","state","getInitialState","isReactComponent","replaceState","setState","getDOMNode","isMounted","isPureReactComponent","index","PropTypes","cloneElement","Component","unstable_renderSubtreeIntoContainer","it","TypeError","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","array","title","browser","argv","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","createDesc","aFunction","that","exec","IObject","defined","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE","DEFAULT_ADDITIONAL_DIGITS","parseTokenDateTimeDelimeter","parseTokenPlainTime","parseTokenYY","parseTokensYYY","parseTokenYYYY","parseTokensYYYYY","parseTokenMM","parseTokenDDD","parseTokenMMDD","parseTokenWww","parseTokenWwwD","parseTokenHH","parseTokenHHMM","parseTokenHHMMSS","parseTokenTimezone","parseTokenTimezoneZ","parseTokenTimezoneHH","parseTokenTimezoneHHMM","parse","argument","dirtyOptions","Date","getTime","options","additionalDigits","Number","dateStrings","splitDateString","parseYearResult","parseYear","date","year","restDateString","parseDate","timestamp","time","parseTime","timezone","parseTimezone","getTimezoneOffset","dateString","timeString","token","parseTokenYYY","parseTokenYYYYY","yearString","parseInt","slice","centuryString","month","week","setUTCFullYear","dayOfYear","day","dayOfISOYear","dayOfWeek","hours","minutes","parseFloat","seconds","timezoneString","absoluteOffset","isoYear","fourthOfJanuaryDay","getUTCDay","diff","setUTCDate","getUTCDate","bitmap","writable","$at","iterated","_t","_i","point","done","$keys","enumBugKeys","keys","id","px","random","def","TAG","stat","Iterators","TO_STRING_TAG","DOMIterables","NAME","Collection","propertyIsEnumerable","instance","Constructor","_defineProperty","_defineProperty2","_interopRequireDefault","defineProperties","descriptor","protoProps","staticProps","is","valueOf","ReactPropTypesSecret","ceil","floor","isNaN","dPs","IE_PROTO","Empty","createDict","iframe","lt","gt","iframeDocument","style","display","appendChild","src","contentWindow","open","write","close","create","Properties","toInteger","min","shared","SHARED","mode","copyright","cof","ARG","tryGet","T","callee","classof","ITERATOR","getIteratorMethod","PromiseCapability","resolve","reject","promise","$$resolve","$$reject","getOwnPropertySymbols","LIBRARY","wksExt","$Symbol","charAt","omit","arraysEqual","isElementAnSFC","isNativeDOMElement","indexOf","sameObject","notBothArrays","differentLengths","every","memoizeString","cache","hyphenate","redefine","$iterCreate","setToStringTag","getPrototypeOf","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","next","DEFAULT","IS_SET","FORCED","getMethod","kind","values","entries","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","methods","IteratorPrototype","toIObject","arrayIndexOf","names","documentElement","toObject","ObjectProto","iterator","ArrayProto","SPECIES","D","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","ONREADYSTATECHANGE","defer","channel","port","listener","data","now","port2","port1","onmessage","postMessage","addEventListener","importScripts","clear","newPromiseCapability","x","promiseCapability","SAFE_CLOSING","riter","from","skipClosing","safe","iter","fails","KEY","exp","_typeof2","_typeof3","ReferenceError","_iterator","_iterator2","_symbol","_symbol2","_typeof","hiddenKeys","getOwnPropertyNames","pIE","gOPD","getOwnPropertyDescriptor","_setPrototypeOf","_setPrototypeOf2","_create","_create2","subClass","superClass","__proto__","hasClassInParent","formatErrorMsg","getMetaContent","axiosGithub","axiosJSON","queryStringify","queryParse","_keys","_keys2","_slicedToArray2","_slicedToArray3","_axios","_axios2","search","location","queryString","substring","query","queryStr","_queryStr$split","_queryStr$split2","decodeURIComponent","encodeURIComponent","join","headers","baseURL","content","el","querySelector","getAttribute","err","msg","response","message","errors","_len","_key","yes","classes","utils","encode","buildURL","url","params","paramsSerializer","serializedParams","parts","serialize","parseValue","toISOString","JSON","stringify","hashmarkIndex","isCancel","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","getDefaultAdapter","adapter","XMLHttpRequest","defaults","transformRequest","transformResponse","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","status","common","forEachMethodNoData","method","forEachMethodWithData","settle","buildFullPath","parseHeaders","isURLSameOrigin","createError","xhrAdapter","config","Promise","dispatchXhrRequest","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","fullPath","toUpperCase","onreadystatechange","handleLoad","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseData","responseType","responseText","statusText","onabort","handleAbort","onerror","handleError","ontimeout","handleTimeout","timeoutErrorMessage","cookies","xsrfValue","withCredentials","read","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","then","onCanceled","cancel","abort","send","enhanceError","code","error","mergeConfig","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","valueFromConfig2","prop","mergeDeepProperties","defaultToConfig2","axiosKeys","otherKeys","filter","filterAxiosKeys","otherKeysDefaultToConfig2","Cancel","_react","_react2","_ref","alt","onError","text","dangerouslySetInnerHTML","__html","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_reactDom","_gitalk","_gitalk2","Gitalk","HTMLElement","getElementById","$Object","desc","ReactIs","throwOnDirectAccess","isElement","g","h","k","q","t","w","y","u","z","typeOf","AsyncMode","ConcurrentMode","ContextConsumer","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isValidElementType","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","hasSymbol","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","lowPriorityWarningWithoutStack","printWarning","format","argIndex","console","warn","condition","_len2","_key2","lowPriorityWarningWithoutStack$1","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","assign","emptyFunctionThatReturnsNull","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","iteratorFn","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","bool","func","number","string","symbol","any","createAnyTypeChecker","arrayOf","createArrayOfTypeChecker","createElementTypeChecker","elementType","createElementTypeTypeChecker","instanceOf","createInstanceTypeChecker","createNodeChecker","objectOf","createObjectOfTypeChecker","oneOf","createEnumTypeChecker","oneOfType","createUnionTypeChecker","shape","createShapeTypeChecker","exact","createStrictShapeTypeChecker","PropTypeError","stack","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propName","componentName","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","replacer","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","isNode","shapeTypes","allKeys","step","entry","isSymbol","RegExp","resetWarningCache","propIsEnumerable","shouldUseNative","test1","test2","fromCharCode","order2","test3","letter","to","symbols","loggedTypeFailures","typeSpecs","getStack","typeSpecName","ex","emptyFunction","emptyFunctionWithReset","shim","getShim","lastSimple","child","simple","EMPTY_CHILDREN","pop","enqueueRender","__d","items","debounceRendering","rerender","list","renderComponent","isSameNodeType","hydrating","splitText","_componentConstructor","isNamedNode","__n","getNodeProps","createNode","isSvg","createElementNS","removeNode","setAccessor","old","cssText","IS_NON_DIMENSIONAL","innerHTML","useCapture","eventProxy","removeEventListener","__l","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","flushMounts","mounts","afterMount","dom","mountAll","componentRoot","diffLevel","isSvgMode","ownerSVGElement","idiff","prevSvgMode","nodeValue","createTextNode","replaceChild","recollectNodeTree","__preactattr_","buildComponentFromVNode","firstChild","fc","vchildren","nextSibling","innerDiffNode","diffAttributes","isHydrating","j","vchild","originalChildren","keyedLen","childrenLen","vlen","_child","__k","insertBefore","unmountOnly","unmountComponent","removeChildren","lastChild","previousSibling","collectComponent","components","createComponent","inst","doRender","__b","splice","setComponentProps","__x","__r","__c","__p","syncComponentUpdates","isChild","rendered","cbase","previousProps","previousState","__s","previousContext","isUpdate","nextBase","initialBase","initialChildComponent","skip","toUnmount","childComponent","childProps","__u","baseParent","componentRef","unshift","afterUpdate","__h","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","inner","forceUpdate","preact","polyfill","require","ES6Promise","objectOrFunction","_isArray","vertxNext","customSchedulerFn","asap","arg","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isWorker","Uint8ClampedArray","useNextTick","useVertxTimer","useSetTimeout","useMutationObserver","iterations","observer","observe","characterData","useMessageChannel","globalSetTimeout","attemptVertx","vertx","runOnLoop","runOnContext","onFulfillment","onRejection","_arguments","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","PENDING","FULFILLED","REJECTED","GET_THEN_ERROR","ErrorObject","selfFulfillment","cannotReturnOwn","getThen","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","detail","TRY_CATCH_ERROR","tryCatch","hasCallback","succeeded","failed","initializePromise","resolver","resolvePromise","rejectPromise","nextId","Enumerator$1","input","_instanceConstructor","_remaining","_enumerate","validationError","_eachEntry","resolve$$1","_then","_settledAt","Promise$2","_willSettleAt","enumerator","all$1","race$1","_","reject$1","needsResolver","needsNew","all","race","_setScheduler","_setAsap","_asap","_catch","polyfill$1","local","promiseToString","cast","eval","_promise","_promise2","_assign","_assign2","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_reactFlipMove","_reactFlipMove2","_autosize","_autosize2","_i18n","_i18n2","_util","_avatar","_avatar2","_button","_button2","_action","_action2","_comment","_comment2","_svg","_svg2","_const","_getComments","_getComments2","GitalkComponent","_Component","_this","user","issue","comments","localComments","comment","page","pagerDirection","cursor","previewHtml","isNoInit","isIniting","isCreating","isLoading","isLoadMore","isLoadOver","isIssueCreating","isPopupVisible","isInputFocused","isPreview","isOccurError","errorMsg","getCommentsV3","_this$options","clientID","clientSecret","perPage","getIssue","comments_url","Accept","per_page","res","_this$state","cs","getRef","publicBtnEL","reply","replyComment","replyCommentBody","body","replyCommentArray","login","update","commentEL","focus","handlePopup","preventDefault","stopPropagation","isVisible","hideHandle","e1","handleLogin","localStorage","setItem","GT_COMMENT","href","loginLink","handleIssueCreate","createIssue","getComments","handleCommentCreate","createComment","handleCommentPreview","post","accessToken","handleCommentLoad","_this$state2","handleCommentChange","handleLogout","logout","reload","handleCommentFocus","distractionFreeMode","handleCommentBlur","handleSort","direction","handleCommentKeyDown","enableHotKey","metaKey","ctrlKey","keyCode","labels","language","userLanguage","createIssueManually","proxy","flipMoveOptions","staggerDelayBy","appearAnimation","enterAnimation","leaveAnimation","defaultAuthor","avatarUrl","updateCountCallback","storedComment","getItem","removeItem","replacedUrl","origin","pathname","hash","history","client_id","client_secret","access_token","getInit","log","i18n","_this2","getUserInfo","_this3","getIssueById","_this4","_options","owner","repo","getUrl","getIssueByLabels","_this5","_options2","isAdmin","_this6","resIssue","_this7","_options3","_this8","GT_ACCESS_TOKEN","like","_this9","_options4","reactions","nodes","findIndex","totalCount","viewerHasReacted","unLike","_this10","getQL","operationName","gId","initing","noInit","_state2","_options5","admin","link","onClick","handleImageErrored","header","_this11","_state3","avatar_url","onMouseDown","onChange","onFocus","onBlur","onKeyDown","placeholder","_this12","_state4","_options6","totalComments","reverse","commentedText","replyCallback","likeCallback","meta","_state5","cnt","isDesc","counts","html_url","smart_count","GT_VERSION","_state6","_accessToke","_accessToken","githubOauthUrl","redirect_uri","scope","TO_STRING","pos","charCodeAt","getKeys","toLength","toAbsoluteIndex","IS_INCLUDES","$this","fromIndex","max","addToUnscopables","_k","Arguments","anInstance","forOf","speciesConstructor","task","microtask","newPromiseCapabilityModule","perform","userAgent","promiseResolve","PROMISE","v8","$Promise","empty","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","USE_NATIVE","FakePromise","PromiseRejectionEvent","isThenable","notify","isReject","_n","chain","_c","_v","ok","_s","reaction","handler","fail","domain","exited","_h","onHandleUnhandled","enter","exit","onUnhandled","unhandled","isUnhandled","onunhandledrejection","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","onFulfilled","onRejected","capability","iterable","remaining","$index","alreadyCalled","forbiddenField","isArrayIter","getIterFn","BREAK","RETURN","iterFn","un","macrotask","Observer","head","last","standalone","toggle","DESCRIPTORS","onFinally","callbackfn","gOPS","$assign","A","K","aLen","getSymbols","isEnum","$getPrototypeOf","META","$fails","wks","wksDefine","enumKeys","gOPNExt","$GOPD","$GOPS","$DP","gOPN","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","QObject","setter","findChild","setSymbolDesc","protoDesc","sym","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","wellKnownSymbols","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","$replacer","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","fastKey","getWeak","onFreeze","NEED","windowNames","getWindowNames","setPrototypeOf","check","buggy","_FlipMove","_FlipMove2","_slicedToArray","sliceIterator","_arr","_e","_extends","_createClass","_propConverter","_propConverter2","_domManipulation","_helpers","_classCallCheck","_possibleConstructorReturn","_inherits","transitionEnd","whichTransitionEvent","noBrowserSupport","getKey","childData","FlipMove","_temp","_ret","appearing","childrenData","parentData","domNode","boundingBox","heightPlaceholderData","remainingAnimations","childrenToAnimate","runAnimation","dynamicChildren","doesChildNeedToBeAnimated","animateChild","onStartAll","callChildrenHook","getChildData","childDomNode","childBoundingBox","parentBoundingBox","_this$props","getPosition","isAppearingWithAnimation","isEnteringWithAnimation","entering","isLeavingWithAnimation","leaving","_getPositionDelta","getPositionDelta","_getPositionDelta2","dX","dY","shouldTriggerFLIP","isAnimationDisabled","prepForAnimation","nextProps","updateBoundingBoxCaches","nextChildren","calculateNextSetOfChildren","oldChildrenKeys","nextChildrenKeys","updatedChildren","nextChild","findChildByKey","isEntering","numOfChildrenLeaving","isLeaving","find","_ref2","nextChildIndex","_props","maintainContainerHeight","leavingChildren","leavingChild","removeNodeFromDOMFlow","verticalAlignment","updateHeightPlaceholder","_getChildData","applyStylesToDOMNode","styles","transition","_getChildData2","computeInitialStyles","onStart","requestAnimationFrame","createTransitionString","transform","opacity","bindTransitionEndHandler","_getChildData3","transitionEndHandler","ev","triggerFinishHooks","removeChildData","onFinish","_ref3","item","onFinishAll","height","hook","elements","domNodes","childKey","hasChildData","parentDomNode","setChildData","getRelativeBoundingBox","position","top","left","right","bottom","_getPositionDelta3","_getPositionDelta4","disableAllAnimations","duration","delay","staggerDurationBy","createHeightPlaceholder","typeName","isContainerAList","placeholderType","visibility","childrenWithRefs","getNativeNode","_props2","delegated","predicate","kValue","testResult","_errorMessages","_enterLeavePresets","nodeEnv","propConverter","ComposedComponent","_class","FlipMovePropConverter","checkForStatelessFunctionalComponents","childArray","noStateless","statelessFunctionalComponentSupplied","convertProps","workingProps","easing","convertTimingProp","convertAnimationProp","appearPresets","enterPresets","leavePresets","disableAnimations","deprecatedDisableAnimations","primaryPropKeys","delegatedProps","rawValue","invalidTypeForTimingProp","animation","presets","defaultPreset","disablePreset","presetKeys","invalidEnterLeavePreset","acceptableValues","getBoundingClientRect","warnOnce","hasWarned","elevator","fade","accordionVertical","transformOrigin","accordionHorizontal","none","accordianVertical","accordianHorizontal","transitions","match","getPropertyValue","parentBox","_getPosition","width","defaultBox","oldRelativeBox","newAbsoluteBox","newRelativeBox","computed","getComputedStyle","marginAttrs","margins","reduce","acc","margin","propertyVal","topOffset","_ref4","originalParentHeight","collapsedParentHeight","reductionInHeight","foundNode","cssProperties","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","mod","autosize","Map","_delete","createEvent","Event","bubbles","evt","initEvent","ta","heightOffset","clientWidth","cachedHeight","init","resize","boxSizing","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","changeOverflow","offsetWidth","overflowY","getParentOverflows","scrollTop","originalHeight","overflows","docTop","endHeight","scrollHeight","styleHeight","round","actualHeight","offsetHeight","dispatchEvent","pageResize","destroy","overflowX","wordWrap","_polyglot2","phrases","i18nMap","en","locale","_polyglot","_zhCN","_zhCN2","_zhTW","_zhTW2","_en","_en2","_esES","_esES2","_fr","_fr2","_ru","_ru2","_de","_de2","Polyglot","currentLocale","allowMissing","VERSION","newLocale","morePhrases","prefix","phrase","newPhrases","clone","choosePluralForm","interpolate","delimeter","pluralTypes","chinese","german","french","russian","czech","polish","icelandic","pluralTypeToLanguages","langToTypeMap","mapping","langs","trimRe","texts","chosenText","pluralTypeIndex","pluralTypeName","langToPluralType","_isIterable2","_isIterable3","_getIterator2","_getIterator3","isIterable","getIterator","Axios","createInstance","defaultConfig","axios","instanceConfig","CancelToken","promises","spread","InterceptorManager","dispatchRequest","interceptors","unshiftRequestInterceptors","interceptor","fulfilled","rejected","pushResponseInterceptors","shift","getUri","handlers","use","eject","forEachHandler","transformData","throwIfCancellationRequested","throwIfRequested","cleanHeaderConfig","onAdapterResolution","onAdapterRejection","fns","normalizedName","processHeader","isAxiosError","toJSON","description","fileName","lineNumber","columnNumber","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","parsed","parser","line","substr","standardBrowserEnv","msie","urlParsingNode","originURL","resolveURL","protocol","host","hostname","requestURL","nonStandardBrowserEnv","expires","path","secure","cookie","toGMTString","remove","promiseExecutor","_distance_in_words_to_now","_distance_in_words_to_now2","_index","_index2","_index3","_index4","_index5","_index6","_index7","_index8","_index9","_index10","ZHCN","ZHTW","ES","FR","RU","GT_i18n_distanceInWordsLocaleMap","zh","fr","ru","Comment","emailResponse","classList","_props$commentedText","_props$admin","enableEdit","reactionTotalCount","pageInfo","hasNextPage","created_at","addSuffix","distanceInWords","body_html","webpackContext","req","webpackContextResolve","webpackContextKeys","distanceInWordsToNow","dirtyDate","compareDesc","differenceInSeconds","differenceInMonths","enLocale","MINUTES_IN_DAY","MINUTES_IN_ALMOST_TWO_DAYS","MINUTES_IN_MONTH","MINUTES_IN_TWO_MONTHS","dirtyDateToCompare","comparison","localize","localizeOptions","Boolean","dateLeft","dateRight","months","includeSeconds","days","nearestMonth","monthsSinceStartOfYear","years","dirtyDateLeft","dirtyDateRight","timeLeft","timeRight","differenceInMilliseconds","differenceInCalendarMonths","compareAsc","sign","difference","abs","setMonth","getMonth","isLastMonthNotFull","yearDiff","getFullYear","monthDiff","buildDistanceInWordsLocale","buildFormatLocale","distanceInWordsLocale","lessThanXSeconds","one","other","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","buildFormattingTokensRegExp","months3char","monthsFull","weekdays2char","weekdays3char","weekdaysFull","meridiemUppercase","meridiemLowercase","meridiemFull","formatters","getDay","getHours","ordinalFormatters","formatterToken","ordinal","formattingTokensRegExp","rem100","commonFormatterKeys","formatterKeys","formattingTokens","sort","declension","scheme","rem10","singularNominative","singularGenitive","pluralGenitive","buildLocalizeTokenFn","future","regular","past","_toConsumableArray2","_toConsumableArray3","vars","cursorDirection","ql","variables","pageSize","repository","author","databaseId","createdAt","bodyHTML","hasPreviousPage","startCursor","endCursor","_from","_from2","arr2","createProperty","arrayLike","mapfn"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gitalk\"] = factory();\n\telse\n\t\troot[\"Gitalk\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 82);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(39)('wks');\nvar uid = __webpack_require__(25);\nvar Symbol = __webpack_require__(1).Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar bind = __webpack_require__(72);\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar ctx = __webpack_require__(13);\nvar hide = __webpack_require__(11);\nvar has = __webpack_require__(12);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"version\", function() { return version; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOM\", function() { return DOM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Children\", function() { return Children; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return render$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createClass\", function() { return createClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createFactory\", function() { return createFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createElement\", function() { return createElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cloneElement\", function() { return cloneElement$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isValidElement\", function() { return isValidElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findDOMNode\", function() { return findDOMNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unmountComponentAtNode\", function() { return unmountComponentAtNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PureComponent\", function() { return PureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unstable_renderSubtreeIntoContainer\", function() { return renderSubtreeIntoContainer; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_prop_types__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_preact__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"PropTypes\", function() { return __WEBPACK_IMPORTED_MODULE_0_prop_types___default.a; });\n\n\n\nvar version = '15.1.0'; // trick libraries to think we are react\n\nvar ELEMENTS = 'a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan'.split(' ');\n\nvar REACT_ELEMENT_TYPE = (typeof Symbol!=='undefined' && Symbol.for && Symbol.for('react.element')) || 0xeac7;\n\nvar COMPONENT_WRAPPER_KEY = typeof Symbol!=='undefined' ? Symbol.for('__preactCompatWrapper') : '__preactCompatWrapper';\n\n// don't autobind these methods since they already have guaranteed context.\nvar AUTOBIND_BLACKLIST = {\n\tconstructor: 1,\n\trender: 1,\n\tshouldComponentUpdate: 1,\n\tcomponentWillReceiveProps: 1,\n\tcomponentWillUpdate: 1,\n\tcomponentDidUpdate: 1,\n\tcomponentWillMount: 1,\n\tcomponentDidMount: 1,\n\tcomponentWillUnmount: 1,\n\tcomponentDidUnmount: 1\n};\n\n\nvar CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vert|word|writing|x)[A-Z]/;\n\n\nvar BYPASS_HOOK = {};\n\n/*global process*/\nvar DEV = typeof process==='undefined' || !process.env || process.env.NODE_ENV!=='production';\n\n// a component that renders nothing. Used to replace components for unmountComponentAtNode.\nfunction EmptyComponent() { return null; }\n\n\n\n// make react think we're react.\nvar VNode = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"]('a', null).constructor;\nVNode.prototype.$$typeof = REACT_ELEMENT_TYPE;\nVNode.prototype.preactCompatUpgraded = false;\nVNode.prototype.preactCompatNormalized = false;\n\nObject.defineProperty(VNode.prototype, 'type', {\n\tget: function() { return this.nodeName; },\n\tset: function(v) { this.nodeName = v; },\n\tconfigurable:true\n});\n\nObject.defineProperty(VNode.prototype, 'props', {\n\tget: function() { return this.attributes; },\n\tset: function(v) { this.attributes = v; },\n\tconfigurable:true\n});\n\n\n\nvar oldEventHook = __WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].event;\n__WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].event = function (e) {\n\tif (oldEventHook) { e = oldEventHook(e); }\n\te.persist = Object;\n\te.nativeEvent = e;\n\treturn e;\n};\n\n\nvar oldVnodeHook = __WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].vnode;\n__WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].vnode = function (vnode) {\n\tif (!vnode.preactCompatUpgraded) {\n\t\tvnode.preactCompatUpgraded = true;\n\n\t\tvar tag = vnode.nodeName,\n\t\t\tattrs = vnode.attributes = extend({}, vnode.attributes);\n\n\t\tif (typeof tag==='function') {\n\t\t\tif (tag[COMPONENT_WRAPPER_KEY]===true || (tag.prototype && 'isReactComponent' in tag.prototype)) {\n\t\t\t\tif (vnode.children && String(vnode.children)==='') { vnode.children = undefined; }\n\t\t\t\tif (vnode.children) { attrs.children = vnode.children; }\n\n\t\t\t\tif (!vnode.preactCompatNormalized) {\n\t\t\t\t\tnormalizeVNode(vnode);\n\t\t\t\t}\n\t\t\t\thandleComponentVNode(vnode);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (vnode.children && String(vnode.children)==='') { vnode.children = undefined; }\n\t\t\tif (vnode.children) { attrs.children = vnode.children; }\n\n\t\t\tif (attrs.defaultValue) {\n\t\t\t\tif (!attrs.value && attrs.value!==0) {\n\t\t\t\t\tattrs.value = attrs.defaultValue;\n\t\t\t\t}\n\t\t\t\tdelete attrs.defaultValue;\n\t\t\t}\n\n\t\t\thandleElementVNode(vnode, attrs);\n\t\t}\n\t}\n\n\tif (oldVnodeHook) { oldVnodeHook(vnode); }\n};\n\nfunction handleComponentVNode(vnode) {\n\tvar tag = vnode.nodeName,\n\t\ta = vnode.attributes;\n\n\tvnode.attributes = {};\n\tif (tag.defaultProps) { extend(vnode.attributes, tag.defaultProps); }\n\tif (a) { extend(vnode.attributes, a); }\n}\n\nfunction handleElementVNode(vnode, a) {\n\tvar shouldSanitize, attrs, i;\n\tif (a) {\n\t\tfor (i in a) { if ((shouldSanitize = CAMEL_PROPS.test(i))) { break; } }\n\t\tif (shouldSanitize) {\n\t\t\tattrs = vnode.attributes = {};\n\t\t\tfor (i in a) {\n\t\t\t\tif (a.hasOwnProperty(i)) {\n\t\t\t\t\tattrs[ CAMEL_PROPS.test(i) ? i.replace(/([A-Z0-9])/, '-$1').toLowerCase() : i ] = a[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// proxy render() since React returns a Component reference.\nfunction render$1(vnode, parent, callback) {\n\tvar prev = parent && parent._preactCompatRendered && parent._preactCompatRendered.base;\n\n\t// ignore impossible previous renders\n\tif (prev && prev.parentNode!==parent) { prev = null; }\n\n\t// default to first Element child\n\tif (!prev) { prev = parent.children[0]; }\n\n\t// remove unaffected siblings\n\tfor (var i=parent.childNodes.length; i--; ) {\n\t\tif (parent.childNodes[i]!==prev) {\n\t\t\tparent.removeChild(parent.childNodes[i]);\n\t\t}\n\t}\n\n\tvar out = __WEBPACK_IMPORTED_MODULE_1_preact__[\"render\"](vnode, parent, prev);\n\tif (parent) { parent._preactCompatRendered = out && (out._component || { base: out }); }\n\tif (typeof callback==='function') { callback(); }\n\treturn out && out._component || out;\n}\n\n\nvar ContextProvider = function () {};\n\nContextProvider.prototype.getChildContext = function () {\n\treturn this.props.context;\n};\nContextProvider.prototype.render = function (props) {\n\treturn props.children[0];\n};\n\nfunction renderSubtreeIntoContainer(parentComponent, vnode, container, callback) {\n\tvar wrap = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](ContextProvider, { context: parentComponent.context }, vnode);\n\tvar c = render$1(wrap, container);\n\tif (callback) { callback(c); }\n\treturn c._component || c.base;\n}\n\n\nfunction unmountComponentAtNode(container) {\n\tvar existing = container._preactCompatRendered && container._preactCompatRendered.base;\n\tif (existing && existing.parentNode===container) {\n\t\t__WEBPACK_IMPORTED_MODULE_1_preact__[\"render\"](__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](EmptyComponent), container, existing);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n\nvar ARR = [];\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nvar Children = {\n\tmap: function(children, fn, ctx) {\n\t\tif (children == null) { return null; }\n\t\tchildren = Children.toArray(children);\n\t\tif (ctx && ctx!==children) { fn = fn.bind(ctx); }\n\t\treturn children.map(fn);\n\t},\n\tforEach: function(children, fn, ctx) {\n\t\tif (children == null) { return null; }\n\t\tchildren = Children.toArray(children);\n\t\tif (ctx && ctx!==children) { fn = fn.bind(ctx); }\n\t\tchildren.forEach(fn);\n\t},\n\tcount: function(children) {\n\t\treturn children && children.length || 0;\n\t},\n\tonly: function(children) {\n\t\tchildren = Children.toArray(children);\n\t\tif (children.length!==1) { throw new Error('Children.only() expects only one child.'); }\n\t\treturn children[0];\n\t},\n\ttoArray: function(children) {\n\t\tif (children == null) { return []; }\n\t\treturn Array.isArray && Array.isArray(children) ? children : ARR.concat(children);\n\t}\n};\n\n\n/** Track current render() component for ref assignment */\nvar currentComponent;\n\n\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n\nvar DOM = {};\nfor (var i=ELEMENTS.length; i--; ) {\n\tDOM[ELEMENTS[i]] = createFactory(ELEMENTS[i]);\n}\n\nfunction upgradeToVNodes(arr, offset) {\n\tfor (var i=offset || 0; i<arr.length; i++) {\n\t\tvar obj = arr[i];\n\t\tif (Array.isArray(obj)) {\n\t\t\tupgradeToVNodes(obj);\n\t\t}\n\t\telse if (obj && typeof obj==='object' && !isValidElement(obj) && ((obj.props && obj.type) || (obj.attributes && obj.nodeName) || obj.children)) {\n\t\t\tarr[i] = createElement(obj.type || obj.nodeName, obj.props || obj.attributes, obj.children);\n\t\t}\n\t}\n}\n\nfunction isStatelessComponent(c) {\n\treturn typeof c==='function' && !(c.prototype && c.prototype.render);\n}\n\n\n// wraps stateless functional components in a PropTypes validator\nfunction wrapStatelessComponent(WrappedComponent) {\n\treturn createClass({\n\t\tdisplayName: WrappedComponent.displayName || WrappedComponent.name,\n\t\trender: function() {\n\t\t\treturn WrappedComponent(this.props, this.context);\n\t\t}\n\t});\n}\n\n\nfunction statelessComponentHook(Ctor) {\n\tvar Wrapped = Ctor[COMPONENT_WRAPPER_KEY];\n\tif (Wrapped) { return Wrapped===true ? Ctor : Wrapped; }\n\n\tWrapped = wrapStatelessComponent(Ctor);\n\n\tObject.defineProperty(Wrapped, COMPONENT_WRAPPER_KEY, { configurable:true, value:true });\n\tWrapped.displayName = Ctor.displayName;\n\tWrapped.propTypes = Ctor.propTypes;\n\tWrapped.defaultProps = Ctor.defaultProps;\n\n\tObject.defineProperty(Ctor, COMPONENT_WRAPPER_KEY, { configurable:true, value:Wrapped });\n\n\treturn Wrapped;\n}\n\n\nfunction createElement() {\n\tvar args = [], len = arguments.length;\n\twhile ( len-- ) args[ len ] = arguments[ len ];\n\n\tupgradeToVNodes(args, 2);\n\treturn normalizeVNode(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"].apply(void 0, args));\n}\n\n\nfunction normalizeVNode(vnode) {\n\tvnode.preactCompatNormalized = true;\n\n\tapplyClassName(vnode);\n\n\tif (isStatelessComponent(vnode.nodeName)) {\n\t\tvnode.nodeName = statelessComponentHook(vnode.nodeName);\n\t}\n\n\tvar ref = vnode.attributes.ref,\n\t\ttype = ref && typeof ref;\n\tif (currentComponent && (type==='string' || type==='number')) {\n\t\tvnode.attributes.ref = createStringRefProxy(ref, currentComponent);\n\t}\n\n\tapplyEventNormalization(vnode);\n\n\treturn vnode;\n}\n\n\nfunction cloneElement$1(element, props) {\n\tvar children = [], len = arguments.length - 2;\n\twhile ( len-- > 0 ) children[ len ] = arguments[ len + 2 ];\n\n\tif (!isValidElement(element)) { return element; }\n\tvar elementProps = element.attributes || element.props;\n\tvar node = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](\n\t\telement.nodeName || element.type,\n\t\telementProps,\n\t\telement.children || elementProps && elementProps.children\n\t);\n\t// Only provide the 3rd argument if needed.\n\t// Arguments 3+ overwrite element.children in preactCloneElement\n\tvar cloneArgs = [node, props];\n\tif (children && children.length) {\n\t\tcloneArgs.push(children);\n\t}\n\telse if (props && props.children) {\n\t\tcloneArgs.push(props.children);\n\t}\n\treturn normalizeVNode(__WEBPACK_IMPORTED_MODULE_1_preact__[\"cloneElement\"].apply(void 0, cloneArgs));\n}\n\n\nfunction isValidElement(element) {\n\treturn element && ((element instanceof VNode) || element.$$typeof===REACT_ELEMENT_TYPE);\n}\n\n\nfunction createStringRefProxy(name, component) {\n\treturn component._refProxies[name] || (component._refProxies[name] = function (resolved) {\n\t\tif (component && component.refs) {\n\t\t\tcomponent.refs[name] = resolved;\n\t\t\tif (resolved===null) {\n\t\t\t\tdelete component._refProxies[name];\n\t\t\t\tcomponent = null;\n\t\t\t}\n\t\t}\n\t});\n}\n\n\nfunction applyEventNormalization(ref) {\n\tvar nodeName = ref.nodeName;\n\tvar attributes = ref.attributes;\n\n\tif (!attributes || typeof nodeName!=='string') { return; }\n\tvar props = {};\n\tfor (var i in attributes) {\n\t\tprops[i.toLowerCase()] = i;\n\t}\n\tif (props.ondoubleclick) {\n\t\tattributes.ondblclick = attributes[props.ondoubleclick];\n\t\tdelete attributes[props.ondoubleclick];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (props.onchange && (nodeName==='textarea' || (nodeName.toLowerCase()==='input' && !/^fil|che|rad/i.test(attributes.type)))) {\n\t\tvar normalized = props.oninput || 'oninput';\n\t\tif (!attributes[normalized]) {\n\t\t\tattributes[normalized] = multihook([attributes[normalized], attributes[props.onchange]]);\n\t\t\tdelete attributes[props.onchange];\n\t\t}\n\t}\n}\n\n\nfunction applyClassName(ref) {\n\tvar attributes = ref.attributes;\n\n\tif (!attributes) { return; }\n\tvar cl = attributes.className || attributes.class;\n\tif (cl) { attributes.className = cl; }\n}\n\n\nfunction extend(base, props) {\n\tfor (var key in props) {\n\t\tif (props.hasOwnProperty(key)) {\n\t\t\tbase[key] = props[key];\n\t\t}\n\t}\n\treturn base;\n}\n\n\nfunction shallowDiffers(a, b) {\n\tfor (var i in a) { if (!(i in b)) { return true; } }\n\tfor (var i$1 in b) { if (a[i$1]!==b[i$1]) { return true; } }\n\treturn false;\n}\n\n\nfunction findDOMNode(component) {\n\treturn component && component.base || component;\n}\n\n\nfunction F(){}\n\nfunction createClass(obj) {\n\tfunction cl(props, context) {\n\t\tbindAll(this);\n\t\tComponent$1.call(this, props, context, BYPASS_HOOK);\n\t\tnewComponentHook.call(this, props, context);\n\t}\n\n\tobj = extend({ constructor: cl }, obj);\n\n\t// We need to apply mixins here so that getDefaultProps is correctly mixed\n\tif (obj.mixins) {\n\t\tapplyMixins(obj, collateMixins(obj.mixins));\n\t}\n\tif (obj.statics) {\n\t\textend(cl, obj.statics);\n\t}\n\tif (obj.propTypes) {\n\t\tcl.propTypes = obj.propTypes;\n\t}\n\tif (obj.defaultProps) {\n\t\tcl.defaultProps = obj.defaultProps;\n\t}\n\tif (obj.getDefaultProps) {\n\t\tcl.defaultProps = obj.getDefaultProps();\n\t}\n\n\tF.prototype = Component$1.prototype;\n\tcl.prototype = extend(new F(), obj);\n\n\tcl.displayName = obj.displayName || 'Component';\n\n\treturn cl;\n}\n\n\n// Flatten an Array of mixins to a map of method name to mixin implementations\nfunction collateMixins(mixins) {\n\tvar keyed = {};\n\tfor (var i=0; i<mixins.length; i++) {\n\t\tvar mixin = mixins[i];\n\t\tfor (var key in mixin) {\n\t\t\tif (mixin.hasOwnProperty(key) && typeof mixin[key]==='function') {\n\t\t\t\t(keyed[key] || (keyed[key]=[])).push(mixin[key]);\n\t\t\t}\n\t\t}\n\t}\n\treturn keyed;\n}\n\n\n// apply a mapping of Arrays of mixin methods to a component prototype\nfunction applyMixins(proto, mixins) {\n\tfor (var key in mixins) { if (mixins.hasOwnProperty(key)) {\n\t\tproto[key] = multihook(\n\t\t\tmixins[key].concat(proto[key] || ARR),\n\t\t\tkey==='getDefaultProps' || key==='getInitialState' || key==='getChildContext'\n\t\t);\n\t} }\n}\n\n\nfunction bindAll(ctx) {\n\tfor (var i in ctx) {\n\t\tvar v = ctx[i];\n\t\tif (typeof v==='function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(i)) {\n\t\t\t(ctx[i] = v.bind(ctx)).__bound = true;\n\t\t}\n\t}\n}\n\n\nfunction callMethod(ctx, m, args) {\n\tif (typeof m==='string') {\n\t\tm = ctx.constructor.prototype[m];\n\t}\n\tif (typeof m==='function') {\n\t\treturn m.apply(ctx, args);\n\t}\n}\n\nfunction multihook(hooks, skipDuplicates) {\n\treturn function() {\n\t\tvar arguments$1 = arguments;\n\t\tvar this$1 = this;\n\n\t\tvar ret;\n\t\tfor (var i=0; i<hooks.length; i++) {\n\t\t\tvar r = callMethod(this$1, hooks[i], arguments$1);\n\n\t\t\tif (skipDuplicates && r!=null) {\n\t\t\t\tif (!ret) { ret = {}; }\n\t\t\t\tfor (var key in r) { if (r.hasOwnProperty(key)) {\n\t\t\t\t\tret[key] = r[key];\n\t\t\t\t} }\n\t\t\t}\n\t\t\telse if (typeof r!=='undefined') { ret = r; }\n\t\t}\n\t\treturn ret;\n\t};\n}\n\n\nfunction newComponentHook(props, context) {\n\tpropsHook.call(this, props, context);\n\tthis.componentWillReceiveProps = multihook([propsHook, this.componentWillReceiveProps || 'componentWillReceiveProps']);\n\tthis.render = multihook([propsHook, beforeRender, this.render || 'render', afterRender]);\n}\n\n\nfunction propsHook(props, context) {\n\tif (!props) { return; }\n\n\t// React annoyingly special-cases single children, and some react components are ridiculously strict about this.\n\tvar c = props.children;\n\tif (c && Array.isArray(c) && c.length===1) {\n\t\tprops.children = c[0];\n\n\t\t// but its totally still going to be an Array.\n\t\tif (props.children && typeof props.children==='object') {\n\t\t\tprops.children.length = 1;\n\t\t\tprops.children[0] = props.children;\n\t\t}\n\t}\n\n\t// add proptype checking\n\tif (DEV) {\n\t\tvar ctor = typeof this==='function' ? this : this.constructor,\n\t\t\tpropTypes = this.propTypes || ctor.propTypes;\n\t\tvar displayName = this.displayName || ctor.name;\n\n\t\tif (propTypes) {\n\t\t\t__WEBPACK_IMPORTED_MODULE_0_prop_types___default.a.checkPropTypes(propTypes, props, 'prop', displayName);\n\t\t}\n\t}\n}\n\n\nfunction beforeRender(props) {\n\tcurrentComponent = this;\n}\n\nfunction afterRender() {\n\tif (currentComponent===this) {\n\t\tcurrentComponent = null;\n\t}\n}\n\n\n\nfunction Component$1(props, context, opts) {\n\t__WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"].call(this, props, context);\n\tthis.state = this.getInitialState ? this.getInitialState() : {};\n\tthis.refs = {};\n\tthis._refProxies = {};\n\tif (opts!==BYPASS_HOOK) {\n\t\tnewComponentHook.call(this, props, context);\n\t}\n}\nextend(Component$1.prototype = new __WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"](), {\n\tconstructor: Component$1,\n\n\tisReactComponent: {},\n\n\treplaceState: function(state, callback) {\n\t\tvar this$1 = this;\n\n\t\tthis.setState(state, callback);\n\t\tfor (var i in this$1.state) {\n\t\t\tif (!(i in state)) {\n\t\t\t\tdelete this$1.state[i];\n\t\t\t}\n\t\t}\n\t},\n\n\tgetDOMNode: function() {\n\t\treturn this.base;\n\t},\n\n\tisMounted: function() {\n\t\treturn !!this.base;\n\t}\n});\n\n\n\nfunction PureComponent(props, context) {\n\tComponent$1.call(this, props, context);\n}\nF.prototype = Component$1.prototype;\nPureComponent.prototype = new F();\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function(props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n\n\n\nvar index = {\n\tversion: version,\n\tDOM: DOM,\n\tPropTypes: __WEBPACK_IMPORTED_MODULE_0_prop_types___default.a,\n\tChildren: Children,\n\trender: render$1,\n\tcreateClass: createClass,\n\tcreateFactory: createFactory,\n\tcreateElement: createElement,\n\tcloneElement: cloneElement$1,\n\tisValidElement: isValidElement,\n\tfindDOMNode: findDOMNode,\n\tunmountComponentAtNode: unmountComponentAtNode,\n\tComponent: Component$1,\n\tPureComponent: PureComponent,\n\tunstable_renderSubtreeIntoContainer: renderSubtreeIntoContainer\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (index);\n//# sourceMappingURL=preact-compat.es.js.map\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(9)))\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(10);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar IE8_DOM_DEFINE = __webpack_require__(48);\nvar toPrimitive = __webpack_require__(32);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(8) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(14)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(7);\nvar createDesc = __webpack_require__(19);\nmodule.exports = __webpack_require__(8) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(24);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = {};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(54);\nvar defined = __webpack_require__(35);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(35);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isDate = __webpack_require__(202)\n\nvar MILLISECONDS_IN_HOUR = 3600000\nvar MILLISECONDS_IN_MINUTE = 60000\nvar DEFAULT_ADDITIONAL_DIGITS = 2\n\nvar parseTokenDateTimeDelimeter = /[T ]/\nvar parseTokenPlainTime = /:/\n\n// year tokens\nvar parseTokenYY = /^(\\d{2})$/\nvar parseTokensYYY = [\n  /^([+-]\\d{2})$/, // 0 additional digits\n  /^([+-]\\d{3})$/, // 1 additional digit\n  /^([+-]\\d{4})$/ // 2 additional digits\n]\n\nvar parseTokenYYYY = /^(\\d{4})/\nvar parseTokensYYYYY = [\n  /^([+-]\\d{4})/, // 0 additional digits\n  /^([+-]\\d{5})/, // 1 additional digit\n  /^([+-]\\d{6})/ // 2 additional digits\n]\n\n// date tokens\nvar parseTokenMM = /^-(\\d{2})$/\nvar parseTokenDDD = /^-?(\\d{3})$/\nvar parseTokenMMDD = /^-?(\\d{2})-?(\\d{2})$/\nvar parseTokenWww = /^-?W(\\d{2})$/\nvar parseTokenWwwD = /^-?W(\\d{2})-?(\\d{1})$/\n\n// time tokens\nvar parseTokenHH = /^(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMM = /^(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMMSS = /^(\\d{2}):?(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\n\n// timezone tokens\nvar parseTokenTimezone = /([Z+-].*)$/\nvar parseTokenTimezoneZ = /^(Z)$/\nvar parseTokenTimezoneHH = /^([+-])(\\d{2})$/\nvar parseTokenTimezoneHHMM = /^([+-])(\\d{2}):?(\\d{2})$/\n\n/**\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If an argument is a string, the function tries to parse it.\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If all above fails, the function passes the given argument to Date constructor.\n *\n * @param {Date|String|Number} argument - the value to convert\n * @param {Object} [options] - the object with options\n * @param {0 | 1 | 2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = parse('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Parse string '+02014101',\n * // if the additional number of digits in the extended year format is 1:\n * var result = parse('+02014101', {additionalDigits: 1})\n * //=> Fri Apr 11 2014 00:00:00\n */\nfunction parse (argument, dirtyOptions) {\n  if (isDate(argument)) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime())\n  } else if (typeof argument !== 'string') {\n    return new Date(argument)\n  }\n\n  var options = dirtyOptions || {}\n  var additionalDigits = options.additionalDigits\n  if (additionalDigits == null) {\n    additionalDigits = DEFAULT_ADDITIONAL_DIGITS\n  } else {\n    additionalDigits = Number(additionalDigits)\n  }\n\n  var dateStrings = splitDateString(argument)\n\n  var parseYearResult = parseYear(dateStrings.date, additionalDigits)\n  var year = parseYearResult.year\n  var restDateString = parseYearResult.restDateString\n\n  var date = parseDate(restDateString, year)\n\n  if (date) {\n    var timestamp = date.getTime()\n    var time = 0\n    var offset\n\n    if (dateStrings.time) {\n      time = parseTime(dateStrings.time)\n    }\n\n    if (dateStrings.timezone) {\n      offset = parseTimezone(dateStrings.timezone)\n    } else {\n      // get offset accurate to hour in timezones that change offset\n      offset = new Date(timestamp + time).getTimezoneOffset()\n      offset = new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE).getTimezoneOffset()\n    }\n\n    return new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE)\n  } else {\n    return new Date(argument)\n  }\n}\n\nfunction splitDateString (dateString) {\n  var dateStrings = {}\n  var array = dateString.split(parseTokenDateTimeDelimeter)\n  var timeString\n\n  if (parseTokenPlainTime.test(array[0])) {\n    dateStrings.date = null\n    timeString = array[0]\n  } else {\n    dateStrings.date = array[0]\n    timeString = array[1]\n  }\n\n  if (timeString) {\n    var token = parseTokenTimezone.exec(timeString)\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '')\n      dateStrings.timezone = token[1]\n    } else {\n      dateStrings.time = timeString\n    }\n  }\n\n  return dateStrings\n}\n\nfunction parseYear (dateString, additionalDigits) {\n  var parseTokenYYY = parseTokensYYY[additionalDigits]\n  var parseTokenYYYYY = parseTokensYYYYY[additionalDigits]\n\n  var token\n\n  // YYYY or ±YYYYY\n  token = parseTokenYYYY.exec(dateString) || parseTokenYYYYY.exec(dateString)\n  if (token) {\n    var yearString = token[1]\n    return {\n      year: parseInt(yearString, 10),\n      restDateString: dateString.slice(yearString.length)\n    }\n  }\n\n  // YY or ±YYY\n  token = parseTokenYY.exec(dateString) || parseTokenYYY.exec(dateString)\n  if (token) {\n    var centuryString = token[1]\n    return {\n      year: parseInt(centuryString, 10) * 100,\n      restDateString: dateString.slice(centuryString.length)\n    }\n  }\n\n  // Invalid ISO-formatted year\n  return {\n    year: null\n  }\n}\n\nfunction parseDate (dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) {\n    return null\n  }\n\n  var token\n  var date\n  var month\n  var week\n\n  // YYYY\n  if (dateString.length === 0) {\n    date = new Date(0)\n    date.setUTCFullYear(year)\n    return date\n  }\n\n  // YYYY-MM\n  token = parseTokenMM.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    date.setUTCFullYear(year, month)\n    return date\n  }\n\n  // YYYY-DDD or YYYYDDD\n  token = parseTokenDDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    var dayOfYear = parseInt(token[1], 10)\n    date.setUTCFullYear(year, 0, dayOfYear)\n    return date\n  }\n\n  // YYYY-MM-DD or YYYYMMDD\n  token = parseTokenMMDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    var day = parseInt(token[2], 10)\n    date.setUTCFullYear(year, month, day)\n    return date\n  }\n\n  // YYYY-Www or YYYYWww\n  token = parseTokenWww.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    return dayOfISOYear(year, week)\n  }\n\n  // YYYY-Www-D or YYYYWwwD\n  token = parseTokenWwwD.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    var dayOfWeek = parseInt(token[2], 10) - 1\n    return dayOfISOYear(year, week, dayOfWeek)\n  }\n\n  // Invalid ISO-formatted date\n  return null\n}\n\nfunction parseTime (timeString) {\n  var token\n  var hours\n  var minutes\n\n  // hh\n  token = parseTokenHH.exec(timeString)\n  if (token) {\n    hours = parseFloat(token[1].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR\n  }\n\n  // hh:mm or hhmm\n  token = parseTokenHHMM.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseFloat(token[2].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE\n  }\n\n  // hh:mm:ss or hhmmss\n  token = parseTokenHHMMSS.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseInt(token[2], 10)\n    var seconds = parseFloat(token[3].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE +\n      seconds * 1000\n  }\n\n  // Invalid ISO-formatted time\n  return null\n}\n\nfunction parseTimezone (timezoneString) {\n  var token\n  var absoluteOffset\n\n  // Z\n  token = parseTokenTimezoneZ.exec(timezoneString)\n  if (token) {\n    return 0\n  }\n\n  // ±hh\n  token = parseTokenTimezoneHH.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  // ±hh:mm or ±hhmm\n  token = parseTokenTimezoneHHMM.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60 + parseInt(token[3], 10)\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  return 0\n}\n\nfunction dayOfISOYear (isoYear, week, day) {\n  week = week || 0\n  day = day || 0\n  var date = new Date(0)\n  date.setUTCFullYear(isoYear, 0, 4)\n  var fourthOfJanuaryDay = date.getUTCDay() || 7\n  var diff = week * 7 + day + 1 - fourthOfJanuaryDay\n  date.setUTCDate(date.getUTCDate() + diff)\n  return date\n}\n\nmodule.exports = parse\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $at = __webpack_require__(101)(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n__webpack_require__(51)(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports = true;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(53);\nvar enumBugKeys = __webpack_require__(40);\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nvar id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar def = __webpack_require__(7).f;\nvar has = __webpack_require__(12);\nvar TAG = __webpack_require__(2)('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(106);\nvar global = __webpack_require__(1);\nvar hide = __webpack_require__(11);\nvar Iterators = __webpack_require__(15);\nvar TO_STRING_TAG = __webpack_require__(2)('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(83);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(10);\nvar document = __webpack_require__(1).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(10);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(6);\nvar dPs = __webpack_require__(103);\nvar enumBugKeys = __webpack_require__(40);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(31)('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(55).appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(34);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(39)('keys');\nvar uid = __webpack_require__(25);\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(0);\nvar global = __webpack_require__(1);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: __webpack_require__(21) ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(23);\nvar TAG = __webpack_require__(2)('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(41);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar Iterators = __webpack_require__(15);\nmodule.exports = __webpack_require__(0).getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = __webpack_require__(24);\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.f = __webpack_require__(2);\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar LIBRARY = __webpack_require__(21);\nvar wksExt = __webpack_require__(45);\nvar defineProperty = __webpack_require__(7).f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.omit = omit;\nexports.arraysEqual = arraysEqual;\nvar isElementAnSFC = exports.isElementAnSFC = function isElementAnSFC(element) {\n  var isNativeDOMElement = typeof element.type === 'string';\n\n  if (isNativeDOMElement) {\n    return false;\n  }\n\n  return !element.type.prototype.isReactComponent;\n};\nfunction omit(obj) {\n  var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (attrs.indexOf(key) === -1) {\n      result[key] = obj[key];\n    }\n  });\n  return result;\n}\n\nfunction arraysEqual(a, b) {\n  var sameObject = a === b;\n  if (sameObject) {\n    return true;\n  }\n\n  var notBothArrays = !Array.isArray(a) || !Array.isArray(b);\n  var differentLengths = a.length !== b.length;\n\n  if (notBothArrays || differentLengths) {\n    return false;\n  }\n\n  return a.every(function (element, index) {\n    return element === b[index];\n  });\n}\n\nfunction memoizeString(fn) {\n  var cache = {};\n\n  return function (str) {\n    if (!cache[str]) {\n      cache[str] = fn(str);\n    }\n    return cache[str];\n  };\n}\n\nvar hyphenate = exports.hyphenate = memoizeString(function (str) {\n  return str.replace(/([A-Z])/g, '-$1').toLowerCase();\n});\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(8) && !__webpack_require__(14)(function () {\n  return Object.defineProperty(__webpack_require__(31)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = __webpack_require__(87);\n} else {\n  module.exports = __webpack_require__(88);\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(21);\nvar $export = __webpack_require__(4);\nvar redefine = __webpack_require__(52);\nvar hide = __webpack_require__(11);\nvar Iterators = __webpack_require__(15);\nvar $iterCreate = __webpack_require__(102);\nvar setToStringTag = __webpack_require__(26);\nvar getPrototypeOf = __webpack_require__(56);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(11);\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(12);\nvar toIObject = __webpack_require__(16);\nvar arrayIndexOf = __webpack_require__(104)(false);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(23);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar document = __webpack_require__(1).document;\nmodule.exports = document && document.documentElement;\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(12);\nvar toObject = __webpack_require__(17);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(6);\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// check on default Array iterator\nvar Iterators = __webpack_require__(15);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = __webpack_require__(6);\nvar aFunction = __webpack_require__(24);\nvar SPECIES = __webpack_require__(2)('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(13);\nvar invoke = __webpack_require__(112);\nvar html = __webpack_require__(55);\nvar cel = __webpack_require__(31);\nvar global = __webpack_require__(1);\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (__webpack_require__(23)(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar isObject = __webpack_require__(10);\nvar newPromiseCapability = __webpack_require__(43);\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(123), __esModule: true };\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(4);\nvar core = __webpack_require__(0);\nvar fails = __webpack_require__(14);\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _typeof2 = __webpack_require__(67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _iterator = __webpack_require__(125);\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = __webpack_require__(127);\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(53);\nvar hiddenKeys = __webpack_require__(40).concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pIE = __webpack_require__(28);\nvar createDesc = __webpack_require__(19);\nvar toIObject = __webpack_require__(16);\nvar toPrimitive = __webpack_require__(32);\nvar has = __webpack_require__(12);\nvar IE8_DOM_DEFINE = __webpack_require__(48);\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(8) ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = __webpack_require__(136);\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = __webpack_require__(140);\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = __webpack_require__(67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasClassInParent = exports.formatErrorMsg = exports.getMetaContent = exports.axiosGithub = exports.axiosJSON = exports.queryStringify = exports.queryParse = undefined;\n\nvar _keys = __webpack_require__(161);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _slicedToArray2 = __webpack_require__(164);\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _axios = __webpack_require__(171);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar queryParse = exports.queryParse = function queryParse() {\n  var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n  if (!search) return {};\n  var queryString = search[0] === '?' ? search.substring(1) : search;\n  var query = {};\n  queryString.split('&').forEach(function (queryStr) {\n    var _queryStr$split = queryStr.split('='),\n        _queryStr$split2 = (0, _slicedToArray3.default)(_queryStr$split, 2),\n        key = _queryStr$split2[0],\n        value = _queryStr$split2[1];\n    /* istanbul ignore else */\n\n\n    if (key) query[decodeURIComponent(key)] = decodeURIComponent(value);\n  });\n\n  return query;\n};\n\nvar queryStringify = exports.queryStringify = function queryStringify(query) {\n  var queryString = (0, _keys2.default)(query).map(function (key) {\n    return key + '=' + encodeURIComponent(query[key] || '');\n  }).join('&');\n  return queryString;\n};\n\nvar axiosJSON = exports.axiosJSON = _axios2.default.create({\n  headers: {\n    'Accept': 'application/json'\n  }\n});\n\nvar axiosGithub = exports.axiosGithub = _axios2.default.create({\n  baseURL: 'https://api.github.com',\n  headers: {\n    'Accept': 'application/json'\n  }\n});\n\nvar getMetaContent = exports.getMetaContent = function getMetaContent(name, content) {\n  /* istanbul ignore next */\n  content || (content = 'content');\n  /* istanbul ignore next */\n  var el = window.document.querySelector('meta[name=\\'' + name + '\\']');\n  /* istanbul ignore next */\n  return el && el.getAttribute(content);\n};\n\nvar formatErrorMsg = exports.formatErrorMsg = function formatErrorMsg(err) {\n  var msg = 'Error: ';\n  if (err.response && err.response.data && err.response.data.message) {\n    msg += err.response.data.message + '. ';\n    err.response.data.errors && (msg += err.response.data.errors.map(function (e) {\n      return e.message;\n    }).join(', '));\n  } else {\n    msg += err.message;\n  }\n  return msg;\n};\n\nvar hasClassInParent = exports.hasClassInParent = function hasClassInParent(element) {\n  for (var _len = arguments.length, className = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    className[_key - 1] = arguments[_key];\n  }\n\n  /* istanbul ignore next */\n  var yes = false;\n  /* istanbul ignore next */\n  if (typeof element.className === 'undefined') return false;\n  /* istanbul ignore next */\n  var classes = element.className.split(' ');\n  /* istanbul ignore next */\n  className.forEach(function (c, i) {\n    /* istanbul ignore next */\n    yes = yes || classes.indexOf(c) >= 0;\n  });\n  /* istanbul ignore next */\n  if (yes) return yes;\n  /* istanbul ignore next */\n  return element.parentNode && hasClassInParent(element.parentNode, className);\n};\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nvar utils = __webpack_require__(3);\nvar normalizeHeaderName = __webpack_require__(177);\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = __webpack_require__(76);\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = __webpack_require__(76);\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar settle = __webpack_require__(178);\nvar buildURL = __webpack_require__(73);\nvar buildFullPath = __webpack_require__(180);\nvar parseHeaders = __webpack_require__(183);\nvar isURLSameOrigin = __webpack_require__(184);\nvar createError = __webpack_require__(77);\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = __webpack_require__(185);\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar enhanceError = __webpack_require__(179);\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var src = _ref.src,\n      className = _ref.className,\n      alt = _ref.alt,\n      onError = _ref.onError;\n  return _react2.default.createElement(\n    'div',\n    { className: 'gt-avatar ' + className },\n    _react2.default.createElement('img', { src: src, alt: '@' + alt, onError: onError })\n  );\n};\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      name = _ref.name;\n  return _react2.default.createElement(\n    \"span\",\n    { className: \"gt-ico \" + className },\n    _react2.default.createElement(\"span\", { className: \"gt-svg\", dangerouslySetInnerHTML: {\n        __html: __webpack_require__(191)(\"./\" + name + \".svg\")\n      } }),\n    text && _react2.default.createElement(\n      \"span\",\n      { className: \"gt-ico-text\" },\n      text\n    )\n  );\n};\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(5);\n\n__webpack_require__(94);\n\nvar _gitalk = __webpack_require__(98);\n\nvar _gitalk2 = _interopRequireDefault(_gitalk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Gitalk = function () {\n  function Gitalk() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck3.default)(this, Gitalk);\n\n    this.options = options;\n  }\n\n  (0, _createClass3.default)(Gitalk, [{\n    key: 'render',\n    value: function render(container, callback) {\n      var node = null;\n      container = container || this.options.container;\n\n      if (!container) throw new Error('Container is required: ' + container);\n\n      if (!(container instanceof HTMLElement)) {\n        node = window.document.getElementById(container);\n        if (!node) throw new Error('Container not found, window.document.getElementById: ' + container);\n      } else {\n        node = container;\n      }\n\n      if (!callback) {\n        callback = function callback() {};\n      }\n\n      return (0, _reactDom.render)(_react2.default.createElement(_gitalk2.default, { options: this.options }), node, callback);\n    }\n  }]);\n  return Gitalk;\n}();\n\nmodule.exports = Gitalk;\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(84), __esModule: true };\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(85);\nvar $Object = __webpack_require__(0).Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(4);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(8), 'Object', { defineProperty: __webpack_require__(7).f });\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = __webpack_require__(49);\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = __webpack_require__(89)(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(92)();\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/** @license React v16.12.0\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nObject.defineProperty(exports,\"__esModule\",{value:!0});\nvar b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?Symbol.for(\"react.suspense_list\"):\n60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.fundamental\"):60117,w=b?Symbol.for(\"react.responder\"):60118,x=b?Symbol.for(\"react.scope\"):60119;function y(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function z(a){return y(a)===m}\nexports.typeOf=y;exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===v||a.$$typeof===w||a.$$typeof===x)};exports.isAsyncMode=function(a){return z(a)||y(a)===l};exports.isConcurrentMode=z;exports.isContextConsumer=function(a){return y(a)===k};exports.isContextProvider=function(a){return y(a)===h};\nexports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return y(a)===n};exports.isFragment=function(a){return y(a)===e};exports.isLazy=function(a){return y(a)===t};exports.isMemo=function(a){return y(a)===r};exports.isPortal=function(a){return y(a)===d};exports.isProfiler=function(a){return y(a)===g};exports.isStrictMode=function(a){return y(a)===f};exports.isSuspense=function(a){return y(a)===p};\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/** @license React v16.12.0\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE);\n}\n\n/**\n * Forked from fbjs/warning:\n * https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/__forks__/warning.js\n *\n * Only change is we use console.warn instead of console.error,\n * and do nothing when 'console' is not supported.\n * This really simplifies the code.\n * ---\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\nvar lowPriorityWarningWithoutStack = function () {};\n\n{\n  var printWarning = function (format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n\n    if (typeof console !== 'undefined') {\n      console.warn(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  lowPriorityWarningWithoutStack = function (condition, format) {\n    if (format === undefined) {\n      throw new Error('`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(void 0, [format].concat(args));\n    }\n  };\n}\n\nvar lowPriorityWarningWithoutStack$1 = lowPriorityWarningWithoutStack;\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true;\n      lowPriorityWarningWithoutStack$1(false, 'The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.typeOf = typeOf;\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isValidElementType = isValidElementType;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\n  })();\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactIs = __webpack_require__(49);\nvar assign = __webpack_require__(90);\n\nvar ReactPropTypesSecret = __webpack_require__(33);\nvar checkPropTypes = __webpack_require__(91);\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = __webpack_require__(33);\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(33);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function() {\n    'use strict';\n    function VNode() {}\n    function h(nodeName, attributes) {\n        var lastSimple, child, simple, i, children = EMPTY_CHILDREN;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && null != attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) && void 0 !== child.pop) for (i = child.length; i--; ) stack.push(child[i]); else {\n            if (child === !0 || child === !1) child = null;\n            if (simple = 'function' != typeof nodeName) if (null == child) child = ''; else if ('number' == typeof child) child = String(child); else if ('string' != typeof child) simple = !1;\n            if (simple && lastSimple) children[children.length - 1] += child; else if (children === EMPTY_CHILDREN) children = [ child ]; else children.push(child);\n            lastSimple = simple;\n        }\n        var p = new VNode();\n        p.nodeName = nodeName;\n        p.children = children;\n        p.attributes = null == attributes ? void 0 : attributes;\n        p.key = null == attributes ? void 0 : attributes.key;\n        if (void 0 !== options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function enqueueRender(component) {\n        if (!component.__d && (component.__d = !0) && 1 == items.push(component)) (options.debounceRendering || setTimeout)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p.__d) renderComponent(p);\n    }\n    function isSameNodeType(node, vnode, hydrating) {\n        if ('string' == typeof vnode || 'number' == typeof vnode) return void 0 !== node.splitText;\n        if ('string' == typeof vnode.nodeName) return !node._componentConstructor && isNamedNode(node, vnode.nodeName); else return hydrating || node._componentConstructor === vnode.nodeName;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.__n === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n    }\n    function getNodeProps(vnode) {\n        var props = extend({}, vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (void 0 !== defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function createNode(nodeName, isSvg) {\n        var node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n        node.__n = nodeName;\n        return node;\n    }\n    function removeNode(node) {\n        if (node.parentNode) node.parentNode.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('key' === name) ; else if ('ref' === name) {\n            if (old) old(null);\n            if (value) value(node);\n        } else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || 'string' == typeof value || 'string' == typeof old) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if ('string' != typeof old) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && IS_NON_DIMENSIONAL.test(i) === !1 ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var useCapture = name !== (name = name.replace(/Capture$/, ''));\n            name = name.toLowerCase().substring(2);\n            if (value) {\n                if (!old) node.addEventListener(name, eventProxy, useCapture);\n            } else node.removeEventListener(name, eventProxy, useCapture);\n            (node.__l || (node.__l = {}))[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name !== (name = name.replace(/^xlink\\:?/, ''));\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase()); else node.removeAttribute(name); else if ('function' != typeof value) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this.__l[e.type](options.event && options.event(e) || e);\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = null != parent && void 0 !== parent.ownerSVGElement;\n            hydrating = null != dom && !('__preactattr_' in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll, componentRoot);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll, componentRoot) {\n        var out = dom, prevSvgMode = isSvgMode;\n        if (null == vnode) vnode = '';\n        if ('string' == typeof vnode) {\n            if (dom && void 0 !== dom.splitText && dom.parentNode && (!dom._component || componentRoot)) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                out = document.createTextNode(vnode);\n                if (dom) {\n                    if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n                    recollectNodeTree(dom, !0);\n                }\n            }\n            out.__preactattr_ = !0;\n            return out;\n        }\n        if ('function' == typeof vnode.nodeName) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        isSvgMode = 'svg' === vnode.nodeName ? !0 : 'foreignObject' === vnode.nodeName ? !1 : isSvgMode;\n        if (!dom || !isNamedNode(dom, String(vnode.nodeName))) {\n            out = createNode(String(vnode.nodeName), isSvgMode);\n            if (dom) {\n                while (dom.firstChild) out.appendChild(dom.firstChild);\n                if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n                recollectNodeTree(dom, !0);\n            }\n        }\n        var fc = out.firstChild, props = out.__preactattr_ || (out.__preactattr_ = {}), vchildren = vnode.children;\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && null != fc && void 0 !== fc.splitText && null == fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || null != fc) innerDiffNode(out, vchildren, context, mountAll, hydrating || null != props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren ? vchildren.length : 0;\n        if (0 !== len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child.__preactattr_, key = vlen && props ? _child._component ? _child._component.__k : props.key : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (props || (void 0 !== _child.splitText ? isHydrating ? _child.nodeValue.trim() : !0 : isHydrating)) children[childrenLen++] = _child;\n        }\n        if (0 !== vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && void 0 !== keyed[key]) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) if (void 0 !== children[j] && isSameNodeType(c = children[j], vchild, isHydrating)) {\n                child = c;\n                children[j] = void 0;\n                if (j === childrenLen - 1) childrenLen--;\n                if (j === min) min++;\n                break;\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) if (child === originalChildren[i + 1]) removeNode(originalChildren[i]); else dom.insertBefore(child, originalChildren[i] || null);\n        }\n        if (keyedLen) for (var i in keyed) if (void 0 !== keyed[i]) recollectNodeTree(keyed[i], !1);\n        while (min <= childrenLen) if (void 0 !== (child = children[childrenLen--])) recollectNodeTree(child, !1);\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component); else {\n            if (null != node.__preactattr_ && node.__preactattr_.ref) node.__preactattr_.ref(null);\n            if (unmountOnly === !1 || null == node.__preactattr_) removeNode(node);\n            removeChildren(node);\n        }\n    }\n    function removeChildren(node) {\n        node = node.lastChild;\n        while (node) {\n            var next = node.previousSibling;\n            recollectNodeTree(node, !0);\n            node = next;\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if ((!attrs || null == attrs[name]) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name;\n        (components[name] || (components[name] = [])).push(component);\n    }\n    function createComponent(Ctor, props, context) {\n        var inst, list = components[Ctor.name];\n        if (Ctor.prototype && Ctor.prototype.render) {\n            inst = new Ctor(props, context);\n            Component.call(inst, props, context);\n        } else {\n            inst = new Component(props, context);\n            inst.constructor = Ctor;\n            inst.render = doRender;\n        }\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.__b = list[i].__b;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function doRender(props, state, context) {\n        return this.constructor(props, context);\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component.__x) {\n            component.__x = !0;\n            if (component.__r = props.ref) delete props.ref;\n            if (component.__k = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.__c) component.__c = component.context;\n                component.context = context;\n            }\n            if (!component.__p) component.__p = component.props;\n            component.props = props;\n            component.__x = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__r) component.__r(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component.__x) {\n            var rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.__p || props, previousState = component.__s || state, previousContext = component.__c || context, isUpdate = component.base, nextBase = component.__b, initialBase = isUpdate || nextBase, initialChildComponent = component._component, skip = !1;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.__p = component.__s = component.__c = component.__b = null;\n            component.__d = !1;\n            if (!skip) {\n                rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(extend({}, context), component.getChildContext());\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if ('function' == typeof childComponent) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__k) setComponentProps(inst, childProps, 1, context, !1); else {\n                        toUnmount = inst;\n                        component._component = inst = createComponent(childComponent, childProps, context);\n                        inst.__b = inst.__b || nextBase;\n                        inst.__u = component;\n                        setComponentProps(inst, childProps, 0, context, !1);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase, !1);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t.__u) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                flushMounts();\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            if (null != component.__h) while (component.__h.length) component.__h.pop().call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c.__u)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.__b) {\n                c.__b = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom, !1);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component.__x = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner); else if (base) {\n            if (base.__preactattr_ && base.__preactattr_.ref) base.__preactattr_.ref(null);\n            component.__b = base;\n            removeNode(base);\n            collectComponent(component);\n            removeChildren(base);\n        }\n        if (component.__r) component.__r(null);\n    }\n    function Component(props, context) {\n        this.__d = !0;\n        this.context = context;\n        this.props = props;\n        this.state = this.state || {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent, !1);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n    var items = [];\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.__s) this.__s = extend({}, s);\n            extend(s, 'function' == typeof state ? state(s, this.props) : state);\n            if (callback) (this.__h = this.__h || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function(callback) {\n            if (callback) (this.__h = this.__h || []).push(callback);\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    var preact = {\n        h: h,\n        createElement: h,\n        cloneElement: cloneElement,\n        Component: Component,\n        render: render,\n        rerender: rerender,\n        options: options\n    };\n    if (true) module.exports = preact; else self.preact = preact;\n}();\n//# sourceMappingURL=preact.js.map\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n\nmodule.exports = __webpack_require__(95).polyfill();\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process, global) {var require;/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.1\n */\n\n(function (global, factory) {\n\t true ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = __webpack_require__(97);\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && \"function\" === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator$1(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate(input);\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nEnumerator$1.prototype._enumerate = function (input) {\n  for (var i = 0; this._state === PENDING && i < input.length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator$1.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$1 = c.resolve;\n\n  if (resolve$$1 === resolve$1) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise$2) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$1) {\n        return resolve$$1(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$1(entry), i);\n  }\n};\n\nEnumerator$1.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator$1.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all$1(entries) {\n  return new Enumerator$1(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race$1(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise$2(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise$2.all = all$1;\nPromise$2.race = race$1;\nPromise$2.resolve = resolve$1;\nPromise$2.reject = reject$1;\nPromise$2._setScheduler = setScheduler;\nPromise$2._setAsap = setAsap;\nPromise$2._asap = asap;\n\nPromise$2.prototype = {\n  constructor: Promise$2,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\n/*global self*/\nfunction polyfill$1() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise$2;\n}\n\n// Strange compat..\nPromise$2.polyfill = polyfill$1;\nPromise$2.Promise = Promise$2;\n\nreturn Promise$2;\n\n})));\n\n//# sourceMappingURL=es6-promise.map\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(96)))\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(99);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(119);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(64);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(66);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(70);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactFlipMove = __webpack_require__(143);\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _autosize = __webpack_require__(150);\n\nvar _autosize2 = _interopRequireDefault(_autosize);\n\nvar _i18n = __webpack_require__(151);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\n__webpack_require__(160);\n\nvar _util = __webpack_require__(71);\n\nvar _avatar = __webpack_require__(80);\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nvar _button = __webpack_require__(188);\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _action = __webpack_require__(189);\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _comment = __webpack_require__(190);\n\nvar _comment2 = _interopRequireDefault(_comment);\n\nvar _svg = __webpack_require__(81);\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _const = __webpack_require__(218);\n\nvar _getComments = __webpack_require__(219);\n\nvar _getComments2 = _interopRequireDefault(_getComments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GitalkComponent = function (_Component) {\n  (0, _inherits3.default)(GitalkComponent, _Component);\n\n  function GitalkComponent(props) {\n    (0, _classCallCheck3.default)(this, GitalkComponent);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (GitalkComponent.__proto__ || (0, _getPrototypeOf2.default)(GitalkComponent)).call(this, props));\n\n    _this.state = {\n      user: null,\n      issue: null,\n      comments: [],\n      localComments: [],\n      comment: '',\n      page: 1,\n      pagerDirection: 'last',\n      cursor: null,\n      previewHtml: '',\n\n      isNoInit: false,\n      isIniting: true,\n      isCreating: false,\n      isLoading: false,\n      isLoadMore: false,\n      isLoadOver: false,\n      isIssueCreating: false,\n      isPopupVisible: false,\n      isInputFocused: false,\n      isPreview: false,\n\n      isOccurError: false,\n      errorMsg: ''\n    };\n\n    _this.getCommentsV3 = function (issue) {\n      var _this$options = _this.options,\n          clientID = _this$options.clientID,\n          clientSecret = _this$options.clientSecret,\n          perPage = _this$options.perPage;\n      var page = _this.state.page;\n\n\n      return _this.getIssue().then(function (issue) {\n        if (!issue) return;\n\n        return _util.axiosGithub.get(issue.comments_url, {\n          headers: {\n            Accept: 'application/vnd.github.v3.full+json'\n          },\n          auth: {\n            username: clientID,\n            password: clientSecret\n          },\n          params: {\n            per_page: perPage,\n            page: page\n          }\n        }).then(function (res) {\n          var _this$state = _this.state,\n              comments = _this$state.comments,\n              issue = _this$state.issue;\n\n          var isLoadOver = false;\n          var cs = comments.concat(res.data);\n          if (cs.length >= issue.comments || res.data.length < perPage) {\n            isLoadOver = true;\n          }\n          _this.setState({\n            comments: cs,\n            isLoadOver: isLoadOver,\n            page: page + 1\n          });\n          return cs;\n        });\n      });\n    };\n\n    _this.getRef = function (e) {\n      _this.publicBtnEL = e;\n    };\n\n    _this.reply = function (replyComment) {\n      return function () {\n        var comment = _this.state.comment;\n\n        var replyCommentBody = replyComment.body;\n        var replyCommentArray = replyCommentBody.split('\\n');\n        replyCommentArray.unshift('@' + replyComment.user.login);\n        replyCommentArray = replyCommentArray.map(function (t) {\n          return '> ' + t;\n        });\n        replyCommentArray.push('');\n        replyCommentArray.push('');\n        if (comment) replyCommentArray.unshift('');\n        _this.setState({ comment: comment + replyCommentArray.join('\\n') }, function () {\n          _autosize2.default.update(_this.commentEL);\n          _this.commentEL.focus();\n        });\n      };\n    };\n\n    _this.handlePopup = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var isVisible = !_this.state.isPopupVisible;\n      var hideHandle = function hideHandle(e1) {\n        if ((0, _util.hasClassInParent)(e1.target, 'gt-user', 'gt-popup')) {\n          return;\n        }\n        window.document.removeEventListener('click', hideHandle);\n        _this.setState({ isPopupVisible: false });\n      };\n      _this.setState({ isPopupVisible: isVisible });\n      if (isVisible) {\n        window.document.addEventListener('click', hideHandle);\n      } else {\n        window.document.removeEventListener('click', hideHandle);\n      }\n    };\n\n    _this.handleLogin = function () {\n      var comment = _this.state.comment;\n\n      window.localStorage.setItem(_const.GT_COMMENT, encodeURIComponent(comment));\n      window.location.href = _this.loginLink;\n    };\n\n    _this.handleIssueCreate = function () {\n      _this.setState({ isIssueCreating: true });\n      _this.createIssue().then(function (issue) {\n        _this.setState({\n          isIssueCreating: false,\n          isOccurError: false\n        });\n        return _this.getComments(issue);\n      }).catch(function (err) {\n        _this.setState({\n          isIssueCreating: false,\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      }).then(function (res) {\n        if (res) {\n          _this.setState({\n            isNoInit: false\n          });\n        }\n      });\n    };\n\n    _this.handleCommentCreate = function (e) {\n      if (!_this.state.comment.length) {\n        e && e.preventDefault();\n        _this.commentEL.focus();\n        return;\n      }\n      _this.setState(function (state) {\n        if (state.isCreating) return;\n\n        _this.createComment().then(function () {\n          return _this.setState({\n            isCreating: false,\n            isOccurError: false\n          });\n        }).catch(function (err) {\n          _this.setState({\n            isCreating: false,\n            isOccurError: true,\n            errorMsg: (0, _util.formatErrorMsg)(err)\n          });\n        });\n        return { isCreating: true };\n      });\n    };\n\n    _this.handleCommentPreview = function (e) {\n      _this.setState({\n        isPreview: !_this.state.isPreview\n      });\n\n      _util.axiosGithub.post('/markdown', {\n        text: _this.state.comment\n      }, {\n        headers: _this.accessToken && { Authorization: 'token ' + _this.accessToken }\n      }).then(function (res) {\n        _this.setState({\n          previewHtml: res.data\n        });\n      }).catch(function (err) {\n        _this.setState({\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    };\n\n    _this.handleCommentLoad = function () {\n      var _this$state2 = _this.state,\n          issue = _this$state2.issue,\n          isLoadMore = _this$state2.isLoadMore;\n\n      if (isLoadMore) return;\n      _this.setState({ isLoadMore: true });\n      _this.getComments(issue).then(function () {\n        return _this.setState({ isLoadMore: false });\n      });\n    };\n\n    _this.handleCommentChange = function (e) {\n      return _this.setState({ comment: e.target.value });\n    };\n\n    _this.handleLogout = function () {\n      _this.logout();\n      window.location.reload();\n    };\n\n    _this.handleCommentFocus = function (e) {\n      var distractionFreeMode = _this.options.distractionFreeMode;\n\n      if (!distractionFreeMode) return e.preventDefault();\n      _this.setState({ isInputFocused: true });\n    };\n\n    _this.handleCommentBlur = function (e) {\n      var distractionFreeMode = _this.options.distractionFreeMode;\n\n      if (!distractionFreeMode) return e.preventDefault();\n      _this.setState({ isInputFocused: false });\n    };\n\n    _this.handleSort = function (direction) {\n      return function (e) {\n        _this.setState({ pagerDirection: direction });\n      };\n    };\n\n    _this.handleCommentKeyDown = function (e) {\n      var enableHotKey = _this.options.enableHotKey;\n\n      if (enableHotKey && (e.metaKey || e.ctrlKey) && e.keyCode === 13) {\n        _this.publicBtnEL && _this.publicBtnEL.focus();\n        _this.handleCommentCreate();\n      }\n    };\n\n    _this.options = (0, _assign2.default)({}, {\n      id: window.location.href,\n      number: -1,\n      labels: ['Gitalk'],\n      title: window.document.title,\n      body: '', // window.location.href + header.meta[description]\n      language: window.navigator.language || window.navigator.userLanguage,\n      perPage: 10,\n      pagerDirection: 'last', // last or first\n      createIssueManually: false,\n      distractionFreeMode: false,\n      proxy: 'https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token',\n      flipMoveOptions: {\n        staggerDelayBy: 150,\n        appearAnimation: 'accordionVertical',\n        enterAnimation: 'accordionVertical',\n        leaveAnimation: 'accordionVertical'\n      },\n      enableHotKey: true,\n\n      url: window.location.href,\n\n      defaultAuthor: {\n        avatarUrl: '//avatars1.githubusercontent.com/u/29697133?s=50',\n        login: 'null',\n        url: ''\n      },\n\n      updateCountCallback: null\n    }, props.options);\n\n    _this.state.pagerDirection = _this.options.pagerDirection;\n    var storedComment = window.localStorage.getItem(_const.GT_COMMENT);\n    if (storedComment) {\n      _this.state.comment = decodeURIComponent(storedComment);\n      window.localStorage.removeItem(_const.GT_COMMENT);\n    }\n\n    var query = (0, _util.queryParse)();\n    if (query.code) {\n      var code = query.code;\n      delete query.code;\n      var replacedUrl = '' + window.location.origin + window.location.pathname + (0, _util.queryStringify)(query) + window.location.hash;\n      history.replaceState(null, null, replacedUrl);\n      _this.options = (0, _assign2.default)({}, _this.options, {\n        url: replacedUrl,\n        id: replacedUrl\n      }, props.options);\n\n      _util.axiosJSON.post(_this.options.proxy, {\n        code: code,\n        client_id: _this.options.clientID,\n        client_secret: _this.options.clientSecret\n      }).then(function (res) {\n        if (res.data && res.data.access_token) {\n          _this.accessToken = res.data.access_token;\n\n          _this.getInit().then(function () {\n            return _this.setState({ isIniting: false });\n          }).catch(function (err) {\n            console.log('err:', err);\n            _this.setState({\n              isIniting: false,\n              isOccurError: true,\n              errorMsg: (0, _util.formatErrorMsg)(err)\n            });\n          });\n        } else {\n          // no access_token\n          console.log('res.data err:', res.data);\n          _this.setState({\n            isOccurError: true,\n            errorMsg: (0, _util.formatErrorMsg)(new Error('no access token'))\n          });\n        }\n      }).catch(function (err) {\n        console.log('err: ', err);\n        _this.setState({\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    } else {\n      _this.getInit().then(function () {\n        return _this.setState({ isIniting: false });\n      }).catch(function (err) {\n        console.log('err:', err);\n        _this.setState({\n          isIniting: false,\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    }\n\n    _this.i18n = (0, _i18n2.default)(_this.options.language);\n    return _this;\n  }\n\n  (0, _createClass3.default)(GitalkComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.commentEL && (0, _autosize2.default)(this.commentEL);\n    }\n  }, {\n    key: 'getInit',\n    value: function getInit() {\n      var _this2 = this;\n\n      return this.getUserInfo().then(function () {\n        return _this2.getIssue();\n      }).then(function (issue) {\n        return _this2.getComments(issue);\n      });\n    }\n  }, {\n    key: 'getUserInfo',\n    value: function getUserInfo() {\n      var _this3 = this;\n\n      return _util.axiosGithub.get('/user', {\n        headers: {\n          Authorization: 'token ' + this.accessToken\n        }\n      }).then(function (res) {\n        _this3.setState({ user: res.data });\n      }).catch(function (err) {\n        _this3.logout();\n      });\n    }\n  }, {\n    key: 'getIssueById',\n    value: function getIssueById() {\n      var _this4 = this;\n\n      var _options = this.options,\n          owner = _options.owner,\n          repo = _options.repo,\n          number = _options.number,\n          clientID = _options.clientID,\n          clientSecret = _options.clientSecret;\n\n      var getUrl = '/repos/' + owner + '/' + repo + '/issues/' + number;\n\n      return new _promise2.default(function (resolve, reject) {\n        _util.axiosGithub.get(getUrl, {\n          auth: {\n            username: clientID,\n            password: clientSecret\n          },\n          params: {\n            t: Date.now()\n          }\n        }).then(function (res) {\n          var issue = null;\n\n          if (res && res.data && res.data.number === number) {\n            issue = res.data;\n\n            _this4.setState({ issue: issue, isNoInit: false });\n          }\n          resolve(issue);\n        }).catch(function (err) {\n          // When the status code is 404, promise will be resolved with null\n          if (err.response.status === 404) resolve(null);\n          reject(err);\n        });\n      });\n    }\n  }, {\n    key: 'getIssueByLabels',\n    value: function getIssueByLabels() {\n      var _this5 = this;\n\n      var _options2 = this.options,\n          owner = _options2.owner,\n          repo = _options2.repo,\n          id = _options2.id,\n          labels = _options2.labels,\n          clientID = _options2.clientID,\n          clientSecret = _options2.clientSecret;\n\n\n      return _util.axiosGithub.get('/repos/' + owner + '/' + repo + '/issues', {\n        auth: {\n          username: clientID,\n          password: clientSecret\n        },\n        params: {\n          labels: labels.concat(id).join(','),\n          t: Date.now()\n        }\n      }).then(function (res) {\n        var createIssueManually = _this5.options.createIssueManually;\n\n        var isNoInit = false;\n        var issue = null;\n        if (!(res && res.data && res.data.length)) {\n          if (!createIssueManually && _this5.isAdmin) {\n            return _this5.createIssue();\n          }\n\n          isNoInit = true;\n        } else {\n          issue = res.data[0];\n        }\n        _this5.setState({ issue: issue, isNoInit: isNoInit });\n        return issue;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      var _this6 = this;\n\n      var number = this.options.number;\n      var issue = this.state.issue;\n\n      if (issue) {\n        this.setState({ isNoInit: false });\n        return _promise2.default.resolve(issue);\n      }\n\n      if (typeof number === 'number' && number > 0) {\n        return this.getIssueById().then(function (resIssue) {\n          if (!resIssue) return _this6.getIssueByLabels();\n          return resIssue;\n        });\n      }\n      return this.getIssueByLabels();\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this7 = this;\n\n      var _options3 = this.options,\n          owner = _options3.owner,\n          repo = _options3.repo,\n          title = _options3.title,\n          body = _options3.body,\n          id = _options3.id,\n          labels = _options3.labels,\n          url = _options3.url;\n\n      return _util.axiosGithub.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(id),\n        body: body || url + ' \\n\\n ' + ((0, _util.getMetaContent)('description') || (0, _util.getMetaContent)('description', 'og:description') || '')\n      }, {\n        headers: {\n          Authorization: 'token ' + this.accessToken\n        }\n      }).then(function (res) {\n        _this7.setState({ issue: res.data });\n        return res.data;\n      });\n    }\n    // Get comments via v3 api, don't require login, but sorting feature is disable\n\n  }, {\n    key: 'getComments',\n    value: function getComments(issue) {\n      if (!issue) return;\n      // Get comments via v4 graphql api, login required and sorting feature is available\n      if (this.accessToken) return _getComments2.default.call(this, issue);\n      return this.getCommentsV3(issue);\n    }\n  }, {\n    key: 'createComment',\n    value: function createComment() {\n      var _this8 = this;\n\n      var _state = this.state,\n          comment = _state.comment,\n          localComments = _state.localComments,\n          comments = _state.comments;\n\n\n      return this.getIssue().then(function (issue) {\n        return _util.axiosGithub.post(issue.comments_url, {\n          body: comment\n        }, {\n          headers: {\n            Accept: 'application/vnd.github.v3.full+json',\n            Authorization: 'token ' + _this8.accessToken\n          }\n        });\n      }).then(function (res) {\n        _this8.setState({\n          comment: '',\n          comments: comments.concat(res.data),\n          localComments: localComments.concat(res.data)\n        });\n      });\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      this.setState({ user: null });\n      window.localStorage.removeItem(_const.GT_ACCESS_TOKEN);\n    }\n  }, {\n    key: 'like',\n    value: function like(comment) {\n      var _this9 = this;\n\n      var _options4 = this.options,\n          owner = _options4.owner,\n          repo = _options4.repo;\n      var user = this.state.user;\n      var comments = this.state.comments;\n\n\n      _util.axiosGithub.post('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {\n        content: 'heart'\n      }, {\n        headers: {\n          Authorization: 'token ' + this.accessToken,\n          Accept: 'application/vnd.github.squirrel-girl-preview'\n        }\n      }).then(function (res) {\n        comments = comments.map(function (c) {\n          if (c.id === comment.id) {\n            if (c.reactions) {\n              if (!~c.reactions.nodes.findIndex(function (n) {\n                return n.user.login === user.login;\n              })) {\n                c.reactions.totalCount += 1;\n              }\n            } else {\n              c.reactions = { nodes: [] };\n              c.reactions.totalCount = 1;\n            }\n\n            c.reactions.nodes.push(res.data);\n            c.reactions.viewerHasReacted = true;\n          }\n          return c;\n        });\n\n        _this9.setState({\n          comments: comments\n        });\n      });\n    }\n  }, {\n    key: 'unLike',\n    value: function unLike(comment) {\n      var _this10 = this;\n\n      var user = this.state.user;\n      var comments = this.state.comments;\n\n      // const {  user } = this.state\n      // let id\n      // comment.reactions.nodes.forEach(r => {\n      //   if (r.user.login = user.login) id = r.databaseId\n      // })\n      // return axiosGithub.delete(`/reactions/${id}`, {\n      //   headers: {\n      //     Authorization: `token ${this.accessToken}`,\n      //     Accept: 'application/vnd.github.squirrel-girl-preview'\n      //   }\n      // }).then(res => {\n      //   console.log('res:', res)\n      // })\n\n      var getQL = function getQL(id) {\n        return {\n          operationName: 'RemoveReaction',\n          query: '\\n          mutation RemoveReaction{\\n            removeReaction (input:{\\n              subjectId: \"' + id + '\",\\n              content: HEART\\n            }) {\\n              reaction {\\n                content\\n              }\\n            }\\n          }\\n        '\n        };\n      };\n\n      _util.axiosGithub.post('/graphql', getQL(comment.gId), {\n        headers: {\n          Authorization: 'bearer ' + this.accessToken\n        }\n      }).then(function (res) {\n        if (res.data) {\n          comments = comments.map(function (c) {\n            if (c.id === comment.id) {\n              var index = c.reactions.nodes.findIndex(function (n) {\n                return n.user.login === user.login;\n              });\n              if (~index) {\n                c.reactions.totalCount -= 1;\n                c.reactions.nodes.splice(index, 1);\n              }\n              c.reactions.viewerHasReacted = false;\n            }\n            return c;\n          });\n\n          _this10.setState({\n            comments: comments\n          });\n        }\n      });\n    }\n  }, {\n    key: 'initing',\n    value: function initing() {\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-initing' },\n        _react2.default.createElement('i', { className: 'gt-loader' }),\n        _react2.default.createElement(\n          'p',\n          { className: 'gt-initing-text' },\n          this.i18n.t('init')\n        )\n      );\n    }\n  }, {\n    key: 'noInit',\n    value: function noInit() {\n      var _state2 = this.state,\n          user = _state2.user,\n          isIssueCreating = _state2.isIssueCreating;\n      var _options5 = this.options,\n          owner = _options5.owner,\n          repo = _options5.repo,\n          admin = _options5.admin;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-no-init', key: 'no-init' },\n        _react2.default.createElement('p', { dangerouslySetInnerHTML: {\n            __html: this.i18n.t('no-found-related', {\n              link: '<a href=\"https://github.com/' + owner + '/' + repo + '/issues\">Issues</a>'\n            })\n          } }),\n        _react2.default.createElement(\n          'p',\n          null,\n          this.i18n.t('please-contact', { user: [].concat(admin).map(function (u) {\n              return '@' + u;\n            }).join(' ') })\n        ),\n        this.isAdmin ? _react2.default.createElement(\n          'p',\n          null,\n          _react2.default.createElement(_button2.default, { onClick: this.handleIssueCreate, isLoading: isIssueCreating, text: this.i18n.t('init-issue') })\n        ) : null,\n        !user && _react2.default.createElement(_button2.default, { className: 'gt-btn-login', onClick: this.handleLogin, text: this.i18n.t('login-with-github') })\n      );\n    }\n  }, {\n    key: 'handleImageErrored',\n    value: function handleImageErrored(obj) {\n      obj.target.src = \"https://cdn.jsdelivr.net/npm/gitalk@1/src/assets/icon/github.svg\";\n    }\n  }, {\n    key: 'header',\n    value: function header() {\n      var _this11 = this;\n\n      var _state3 = this.state,\n          user = _state3.user,\n          comment = _state3.comment,\n          isCreating = _state3.isCreating,\n          previewHtml = _state3.previewHtml,\n          isPreview = _state3.isPreview;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-header', key: 'header' },\n        user ? _react2.default.createElement(_avatar2.default, { className: 'gt-header-avatar', src: user.avatar_url, alt: user.login, onError: this.handleImageErrored.bind(this) }) : _react2.default.createElement(\n          'a',\n          { className: 'gt-avatar-github', onMouseDown: this.handleLogin },\n          _react2.default.createElement(_svg2.default, { className: 'gt-ico-github', name: 'github' })\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-header-comment' },\n          _react2.default.createElement('textarea', {\n            ref: function ref(t) {\n              _this11.commentEL = t;\n            },\n            className: 'gt-header-textarea ' + (isPreview ? 'hide' : ''),\n            value: comment,\n            onChange: this.handleCommentChange,\n            onFocus: this.handleCommentFocus,\n            onBlur: this.handleCommentBlur,\n            onKeyDown: this.handleCommentKeyDown,\n            placeholder: this.i18n.t('leave-a-comment')\n          }),\n          _react2.default.createElement('div', {\n            className: 'gt-header-preview markdown-body ' + (isPreview ? '' : 'hide'),\n            dangerouslySetInnerHTML: { __html: previewHtml }\n          }),\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-header-controls' },\n            _react2.default.createElement(\n              'a',\n              { className: 'gt-header-controls-tip', href: 'https://guides.github.com/features/mastering-markdown/', target: '_blank' },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-tip', name: 'tip', text: this.i18n.t('support-markdown') })\n            ),\n            user && _react2.default.createElement(_button2.default, {\n              getRef: this.getRef,\n              className: 'gt-btn-public',\n              onMouseDown: this.handleCommentCreate,\n              text: this.i18n.t('comment'),\n              isLoading: isCreating\n            }),\n            _react2.default.createElement(_button2.default, {\n              className: 'gt-btn-preview',\n              onMouseDown: this.handleCommentPreview,\n              text: isPreview ? this.i18n.t('edit') : this.i18n.t('preview')\n              // isLoading={isPreviewing}\n            }),\n            !user && _react2.default.createElement(_button2.default, { className: 'gt-btn-login', onMouseDown: this.handleLogin, text: this.i18n.t('login-with-github') })\n          )\n        )\n      );\n    }\n  }, {\n    key: 'comments',\n    value: function comments() {\n      var _this12 = this;\n\n      var _state4 = this.state,\n          user = _state4.user,\n          comments = _state4.comments,\n          isLoadOver = _state4.isLoadOver,\n          isLoadMore = _state4.isLoadMore,\n          pagerDirection = _state4.pagerDirection;\n      var _options6 = this.options,\n          language = _options6.language,\n          flipMoveOptions = _options6.flipMoveOptions,\n          admin = _options6.admin;\n\n      var totalComments = comments.concat([]);\n      if (pagerDirection === 'last' && this.accessToken) {\n        totalComments.reverse();\n      }\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-comments', key: 'comments' },\n        _react2.default.createElement(\n          _reactFlipMove2.default,\n          flipMoveOptions,\n          totalComments.map(function (c) {\n            return _react2.default.createElement(_comment2.default, {\n              comment: c,\n              key: c.id,\n              user: user,\n              language: language,\n              commentedText: _this12.i18n.t('commented'),\n              admin: admin,\n              replyCallback: _this12.reply(c),\n              likeCallback: c.reactions && c.reactions.viewerHasReacted ? _this12.unLike.bind(_this12, c) : _this12.like.bind(_this12, c)\n            });\n          })\n        ),\n        !totalComments.length && _react2.default.createElement(\n          'p',\n          { className: 'gt-comments-null' },\n          this.i18n.t('first-comment-person')\n        ),\n        !isLoadOver && totalComments.length ? _react2.default.createElement(\n          'div',\n          { className: 'gt-comments-controls' },\n          _react2.default.createElement(_button2.default, { className: 'gt-btn-loadmore', onClick: this.handleCommentLoad, isLoading: isLoadMore, text: this.i18n.t('load-more') })\n        ) : null\n      );\n    }\n  }, {\n    key: 'meta',\n    value: function meta() {\n      var _state5 = this.state,\n          user = _state5.user,\n          issue = _state5.issue,\n          isPopupVisible = _state5.isPopupVisible,\n          pagerDirection = _state5.pagerDirection,\n          localComments = _state5.localComments;\n\n      var cnt = (issue && issue.comments) + localComments.length;\n      var isDesc = pagerDirection === 'last';\n      var updateCountCallback = this.options.updateCountCallback;\n\n      // window.GITALK_COMMENTS_COUNT = cnt\n\n      if (updateCountCallback && {}.toString.call(updateCountCallback) === '[object Function]') {\n        try {\n          updateCountCallback(cnt);\n        } catch (err) {\n          console.log('An error occurred executing the updateCountCallback:', err);\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-meta', key: 'meta' },\n        _react2.default.createElement('span', { className: 'gt-counts', dangerouslySetInnerHTML: {\n            __html: this.i18n.t('counts', {\n              counts: '<a class=\"gt-link gt-link-counts\" href=\"' + (issue && issue.html_url) + '\" target=\"_blank\">' + cnt + '</a>',\n              smart_count: cnt\n            })\n          } }),\n        isPopupVisible && _react2.default.createElement(\n          'div',\n          { className: 'gt-popup' },\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-sortasc' + (!isDesc ? ' is--active' : ''), onClick: this.handleSort('first'), text: this.i18n.t('sort-asc') }) : null,\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-sortdesc' + (isDesc ? ' is--active' : ''), onClick: this.handleSort('last'), text: this.i18n.t('sort-desc') }) : null,\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-logout', onClick: this.handleLogout, text: this.i18n.t('logout') }) : _react2.default.createElement(\n            'a',\n            { className: 'gt-action gt-action-login', onMouseDown: this.handleLogin },\n            this.i18n.t('login-with-github')\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-copyright' },\n            _react2.default.createElement(\n              'a',\n              { className: 'gt-link gt-link-project', href: 'https://github.com/gitalk/gitalk', target: '_blank' },\n              'Gitalk'\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-version' },\n              _const.GT_VERSION\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-user' },\n          user ? _react2.default.createElement(\n            'div',\n            { className: isPopupVisible ? 'gt-user-inner is--poping' : 'gt-user-inner', onClick: this.handlePopup },\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-user-name' },\n              user.login\n            ),\n            _react2.default.createElement(_svg2.default, { className: 'gt-ico-arrdown', name: 'arrow_down' })\n          ) : _react2.default.createElement(\n            'div',\n            { className: isPopupVisible ? 'gt-user-inner is--poping' : 'gt-user-inner', onClick: this.handlePopup },\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-user-name' },\n              this.i18n.t('anonymous')\n            ),\n            _react2.default.createElement(_svg2.default, { className: 'gt-ico-arrdown', name: 'arrow_down' })\n          )\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state6 = this.state,\n          isIniting = _state6.isIniting,\n          isNoInit = _state6.isNoInit,\n          isOccurError = _state6.isOccurError,\n          errorMsg = _state6.errorMsg,\n          isInputFocused = _state6.isInputFocused;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-container' + (isInputFocused ? ' gt-input-focused' : '') },\n        isIniting && this.initing(),\n        !isIniting && (isNoInit ? [] : [this.meta()]),\n        isOccurError && _react2.default.createElement(\n          'div',\n          { className: 'gt-error' },\n          errorMsg\n        ),\n        !isIniting && (isNoInit ? [this.noInit()] : [this.header(), this.comments()])\n      );\n    }\n  }, {\n    key: 'accessToken',\n    get: function get() {\n      return this._accessToke || window.localStorage.getItem(_const.GT_ACCESS_TOKEN);\n    },\n    set: function set(token) {\n      window.localStorage.setItem(_const.GT_ACCESS_TOKEN, token);\n      this._accessToken = token;\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var githubOauthUrl = 'https://github.com/login/oauth/authorize';\n      var clientID = this.options.clientID;\n\n      var query = {\n        client_id: clientID,\n        redirect_uri: window.location.href,\n        scope: 'public_repo'\n      };\n      return githubOauthUrl + '?' + (0, _util.queryStringify)(query);\n    }\n  }, {\n    key: 'isAdmin',\n    get: function get() {\n      var admin = this.options.admin;\n      var user = this.state.user;\n\n\n      return user && ~[].concat(admin).map(function (a) {\n        return a.toLowerCase();\n      }).indexOf(user.login.toLowerCase());\n    }\n  }]);\n  return GitalkComponent;\n}(_react.Component);\n\nmodule.exports = GitalkComponent;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(100), __esModule: true };\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(50);\n__webpack_require__(20);\n__webpack_require__(27);\n__webpack_require__(109);\n__webpack_require__(117);\n__webpack_require__(118);\nmodule.exports = __webpack_require__(0).Promise;\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(34);\nvar defined = __webpack_require__(35);\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar create = __webpack_require__(36);\nvar descriptor = __webpack_require__(19);\nvar setToStringTag = __webpack_require__(26);\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(11)(IteratorPrototype, __webpack_require__(2)('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(7);\nvar anObject = __webpack_require__(6);\nvar getKeys = __webpack_require__(22);\n\nmodule.exports = __webpack_require__(8) ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(16);\nvar toLength = __webpack_require__(37);\nvar toAbsoluteIndex = __webpack_require__(105);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(34);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar addToUnscopables = __webpack_require__(107);\nvar step = __webpack_require__(108);\nvar Iterators = __webpack_require__(15);\nvar toIObject = __webpack_require__(16);\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(51)(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = function () { /* empty */ };\n\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(21);\nvar global = __webpack_require__(1);\nvar ctx = __webpack_require__(13);\nvar classof = __webpack_require__(41);\nvar $export = __webpack_require__(4);\nvar isObject = __webpack_require__(10);\nvar aFunction = __webpack_require__(24);\nvar anInstance = __webpack_require__(110);\nvar forOf = __webpack_require__(111);\nvar speciesConstructor = __webpack_require__(59);\nvar task = __webpack_require__(60).set;\nvar microtask = __webpack_require__(113)();\nvar newPromiseCapabilityModule = __webpack_require__(43);\nvar perform = __webpack_require__(61);\nvar userAgent = __webpack_require__(114);\nvar promiseResolve = __webpack_require__(62);\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[__webpack_require__(2)('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = __webpack_require__(115)($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\n__webpack_require__(26)($Promise, PROMISE);\n__webpack_require__(116)(PROMISE);\nWrapper = __webpack_require__(0)[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(63)(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(13);\nvar call = __webpack_require__(57);\nvar isArrayIter = __webpack_require__(58);\nvar anObject = __webpack_require__(6);\nvar toLength = __webpack_require__(37);\nvar getIterFn = __webpack_require__(42);\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports) {\n\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar macrotask = __webpack_require__(60).set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = __webpack_require__(23)(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hide = __webpack_require__(11);\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar dP = __webpack_require__(7);\nvar DESCRIPTORS = __webpack_require__(8);\nvar SPECIES = __webpack_require__(2)('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// https://github.com/tc39/proposal-promise-finally\n\nvar $export = __webpack_require__(4);\nvar core = __webpack_require__(0);\nvar global = __webpack_require__(1);\nvar speciesConstructor = __webpack_require__(59);\nvar promiseResolve = __webpack_require__(62);\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// https://github.com/tc39/proposal-promise-try\nvar $export = __webpack_require__(4);\nvar newPromiseCapability = __webpack_require__(43);\nvar perform = __webpack_require__(61);\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(120), __esModule: true };\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(121);\nmodule.exports = __webpack_require__(0).Object.assign;\n\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(4);\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(122) });\n\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = __webpack_require__(8);\nvar getKeys = __webpack_require__(22);\nvar gOPS = __webpack_require__(44);\nvar pIE = __webpack_require__(28);\nvar toObject = __webpack_require__(17);\nvar IObject = __webpack_require__(54);\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(14)(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(124);\nmodule.exports = __webpack_require__(0).Object.getPrototypeOf;\n\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = __webpack_require__(17);\nvar $getPrototypeOf = __webpack_require__(56);\n\n__webpack_require__(65)('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(126), __esModule: true };\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(20);\n__webpack_require__(27);\nmodule.exports = __webpack_require__(45).f('iterator');\n\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(128), __esModule: true };\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(129);\n__webpack_require__(50);\n__webpack_require__(134);\n__webpack_require__(135);\nmodule.exports = __webpack_require__(0).Symbol;\n\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// ECMAScript 6 symbols shim\nvar global = __webpack_require__(1);\nvar has = __webpack_require__(12);\nvar DESCRIPTORS = __webpack_require__(8);\nvar $export = __webpack_require__(4);\nvar redefine = __webpack_require__(52);\nvar META = __webpack_require__(130).KEY;\nvar $fails = __webpack_require__(14);\nvar shared = __webpack_require__(39);\nvar setToStringTag = __webpack_require__(26);\nvar uid = __webpack_require__(25);\nvar wks = __webpack_require__(2);\nvar wksExt = __webpack_require__(45);\nvar wksDefine = __webpack_require__(46);\nvar enumKeys = __webpack_require__(131);\nvar isArray = __webpack_require__(132);\nvar anObject = __webpack_require__(6);\nvar isObject = __webpack_require__(10);\nvar toObject = __webpack_require__(17);\nvar toIObject = __webpack_require__(16);\nvar toPrimitive = __webpack_require__(32);\nvar createDesc = __webpack_require__(19);\nvar _create = __webpack_require__(36);\nvar gOPNExt = __webpack_require__(133);\nvar $GOPD = __webpack_require__(69);\nvar $GOPS = __webpack_require__(44);\nvar $DP = __webpack_require__(7);\nvar $keys = __webpack_require__(22);\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(68).f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(28).f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(21)) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(11)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar META = __webpack_require__(25)('meta');\nvar isObject = __webpack_require__(10);\nvar has = __webpack_require__(12);\nvar setDesc = __webpack_require__(7).f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(14)(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(22);\nvar gOPS = __webpack_require__(44);\nvar pIE = __webpack_require__(28);\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(23);\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(16);\nvar gOPN = __webpack_require__(68).f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(46)('asyncIterator');\n\n\n/***/ }),\n/* 135 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(46)('observable');\n\n\n/***/ }),\n/* 136 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(137), __esModule: true };\n\n/***/ }),\n/* 137 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(138);\nmodule.exports = __webpack_require__(0).Object.setPrototypeOf;\n\n\n/***/ }),\n/* 138 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = __webpack_require__(4);\n$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(139).set });\n\n\n/***/ }),\n/* 139 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(10);\nvar anObject = __webpack_require__(6);\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = __webpack_require__(13)(Function.call, __webpack_require__(69).f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/***/ }),\n/* 140 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(141), __esModule: true };\n\n/***/ }),\n/* 141 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(142);\nvar $Object = __webpack_require__(0).Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n/***/ }),\n/* 142 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(4);\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: __webpack_require__(36) });\n\n\n/***/ }),\n/* 143 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _FlipMove = __webpack_require__(144);\n\nvar _FlipMove2 = _interopRequireDefault(_FlipMove);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _FlipMove2.default;\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n */\n\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 144 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\n__webpack_require__(145);\n\nvar _propConverter = __webpack_require__(146);\n\nvar _propConverter2 = _interopRequireDefault(_propConverter);\n\nvar _domManipulation = __webpack_require__(149);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n *\n * For information on how this code is laid out, check out CODE_TOUR.md\n */\n\n/* eslint-disable react/prop-types */\n\nvar transitionEnd = (0, _domManipulation.whichTransitionEvent)();\nvar noBrowserSupport = !transitionEnd;\n\nfunction getKey(childData) {\n  return childData.key || '';\n}\n\nvar FlipMove = function (_Component) {\n  _inherits(FlipMove, _Component);\n\n  function FlipMove() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, FlipMove);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = FlipMove.__proto__ || Object.getPrototypeOf(FlipMove)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      children: _react.Children.toArray(_this.props.children).map(function (element) {\n        return _extends({}, element, {\n          element: element,\n          appearing: true\n        });\n      })\n    }, _this.childrenData = {}, _this.parentData = {\n      domNode: null,\n      boundingBox: null\n    }, _this.heightPlaceholderData = {\n      domNode: null\n    }, _this.remainingAnimations = 0, _this.childrenToAnimate = [], _this.runAnimation = function () {\n      var dynamicChildren = _this.state.children.filter(_this.doesChildNeedToBeAnimated);\n\n      dynamicChildren.forEach(function (child, n) {\n        _this.remainingAnimations += 1;\n        _this.childrenToAnimate.push(getKey(child));\n        _this.animateChild(child, n);\n      });\n\n      if (typeof _this.props.onStartAll === 'function') {\n        _this.callChildrenHook(_this.props.onStartAll);\n      }\n    }, _this.doesChildNeedToBeAnimated = function (child) {\n      // If the child doesn't have a key, it's an immovable child (one that we\n      // do not want to do FLIP stuff to.)\n      if (!getKey(child)) {\n        return false;\n      }\n\n      var childData = _this.getChildData(getKey(child));\n      var childDomNode = childData.domNode;\n      var childBoundingBox = childData.boundingBox;\n      var parentBoundingBox = _this.parentData.boundingBox;\n\n      if (!childDomNode) {\n        return false;\n      }\n\n      var _this$props = _this.props,\n          appearAnimation = _this$props.appearAnimation,\n          enterAnimation = _this$props.enterAnimation,\n          leaveAnimation = _this$props.leaveAnimation,\n          getPosition = _this$props.getPosition;\n\n\n      var isAppearingWithAnimation = child.appearing && appearAnimation;\n      var isEnteringWithAnimation = child.entering && enterAnimation;\n      var isLeavingWithAnimation = child.leaving && leaveAnimation;\n\n      if (isAppearingWithAnimation || isEnteringWithAnimation || isLeavingWithAnimation) {\n        return true;\n      }\n\n      // If it isn't entering/leaving, we want to animate it if it's\n      // on-screen position has changed.\n\n      var _getPositionDelta = (0, _domManipulation.getPositionDelta)({\n        childDomNode: childDomNode,\n        childBoundingBox: childBoundingBox,\n        parentBoundingBox: parentBoundingBox,\n        getPosition: getPosition\n      }),\n          _getPositionDelta2 = _slicedToArray(_getPositionDelta, 2),\n          dX = _getPositionDelta2[0],\n          dY = _getPositionDelta2[1];\n\n      return dX !== 0 || dY !== 0;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  // Copy props.children into state.\n  // To understand why this is important (and not an anti-pattern), consider\n  // how \"leave\" animations work. An item has \"left\" when the component\n  // receives a new set of props that do NOT contain the item.\n  // If we just render the props as-is, the item would instantly disappear.\n  // We want to keep the item rendered for a little while, until its animation\n  // can complete. Because we cannot mutate props, we make `state` the source\n  // of truth.\n\n\n  // FlipMove needs to know quite a bit about its children in order to do\n  // its job. We store these as a property on the instance. We're not using\n  // state, because we don't want changes to trigger re-renders, we just\n  // need a place to keep the data for reference, when changes happen.\n  // This field should not be accessed directly. Instead, use getChildData,\n  // putChildData, etc...\n\n\n  // Similarly, track the dom node and box of our parent element.\n\n\n  // If `maintainContainerHeight` prop is set to true, we'll create a\n  // placeholder element which occupies space so that the parent height\n  // doesn't change when items are removed from the document flow (which\n  // happens during leave animations)\n\n\n  // Keep track of remaining animations so we know when to fire the\n  // all-finished callback, and clean up after ourselves.\n  // NOTE: we can't simply use childrenToAnimate.length to track remaining\n  // animations, because we need to maintain the list of animating children,\n  // to pass to the `onFinishAll` handler.\n\n\n  _createClass(FlipMove, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Run our `appearAnimation` if it was requested, right after the\n      // component mounts.\n      var shouldTriggerFLIP = this.props.appearAnimation && !this.isAnimationDisabled(this.props);\n\n      if (shouldTriggerFLIP) {\n        this.prepForAnimation();\n        this.runAnimation();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      // When the component is handed new props, we need to figure out the\n      // \"resting\" position of all currently-rendered DOM nodes.\n      // We store that data in this.parent and this.children,\n      // so it can be used later to work out the animation.\n      this.updateBoundingBoxCaches();\n\n      // Convert opaque children object to array.\n      var nextChildren = _react.Children.toArray(nextProps.children);\n\n      // Next, we need to update our state, so that it contains our new set of\n      // children. If animation is disabled or unsupported, this is easy;\n      // we just copy our props into state.\n      // Assuming that we can animate, though, we have to do some work.\n      // Essentially, we want to keep just-deleted nodes in the DOM for a bit\n      // longer, so that we can animate them away.\n      this.setState({\n        children: this.isAnimationDisabled(nextProps) ? nextChildren.map(function (element) {\n          return _extends({}, element, { element: element });\n        }) : this.calculateNextSetOfChildren(nextChildren)\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(previousProps) {\n      // If the children have been re-arranged, moved, or added/removed,\n      // trigger the main FLIP animation.\n      //\n      // IMPORTANT: We need to make sure that the children have actually changed.\n      // At the end of the transition, we clean up nodes that need to be removed.\n      var oldChildrenKeys = _react.Children.toArray(this.props.children).map(function (d) {\n        return d.key;\n      });\n      var nextChildrenKeys = _react.Children.toArray(previousProps.children).map(function (d) {\n        return d.key;\n      });\n\n      var shouldTriggerFLIP = !(0, _helpers.arraysEqual)(oldChildrenKeys, nextChildrenKeys) && !this.isAnimationDisabled(this.props);\n\n      if (shouldTriggerFLIP) {\n        this.prepForAnimation();\n        this.runAnimation();\n      }\n    }\n  }, {\n    key: 'calculateNextSetOfChildren',\n    value: function calculateNextSetOfChildren(nextChildren) {\n      var _this2 = this;\n\n      // We want to:\n      //   - Mark all new children as `entering`\n      //   - Pull in previous children that aren't in nextChildren, and mark them\n      //     as `leaving`\n      //   - Preserve the nextChildren list order, with leaving children in their\n      //     appropriate places.\n      //\n\n      var updatedChildren = nextChildren.map(function (nextChild) {\n        var child = _this2.findChildByKey(nextChild.key || '');\n\n        // If the current child did exist, but it was in the midst of leaving,\n        // we want to treat it as though it's entering\n        var isEntering = !child || child.leaving;\n\n        return _extends({}, nextChild, { element: nextChild, entering: isEntering });\n      });\n\n      // This is tricky. We want to keep the nextChildren's ordering, but with\n      // any just-removed items maintaining their original position.\n      // eg.\n      //   this.state.children  = [ 1, 2, 3, 4 ]\n      //   nextChildren         = [ 3, 1 ]\n      //\n      // In this example, we've removed the '2' & '4'\n      // We want to end up with:  [ 2, 3, 1, 4 ]\n      //\n      // To accomplish that, we'll iterate through this.state.children. whenever\n      // we find a match, we'll append our `leaving` flag to it, and insert it\n      // into the nextChildren in its ORIGINAL position. Note that, as we keep\n      // inserting old items into the new list, the \"original\" position will\n      // keep incrementing.\n      var numOfChildrenLeaving = 0;\n      this.state.children.forEach(function (child, index) {\n        var isLeaving = !nextChildren.find(function (_ref2) {\n          var key = _ref2.key;\n          return key === getKey(child);\n        });\n\n        // If the child isn't leaving (or, if there is no leave animation),\n        // we don't need to add it into the state children.\n        if (!isLeaving || !_this2.props.leaveAnimation) return;\n\n        var nextChild = _extends({}, child, { leaving: true });\n        var nextChildIndex = index + numOfChildrenLeaving;\n\n        updatedChildren.splice(nextChildIndex, 0, nextChild);\n        numOfChildrenLeaving += 1;\n      });\n\n      return updatedChildren;\n    }\n  }, {\n    key: 'prepForAnimation',\n    value: function prepForAnimation() {\n      var _this3 = this;\n\n      // Our animation prep consists of:\n      // - remove children that are leaving from the DOM flow, so that the new\n      //   layout can be accurately calculated,\n      // - update the placeholder container height, if needed, to ensure that\n      //   the parent's height doesn't collapse.\n\n      var _props = this.props,\n          leaveAnimation = _props.leaveAnimation,\n          maintainContainerHeight = _props.maintainContainerHeight,\n          getPosition = _props.getPosition;\n\n      // we need to make all leaving nodes \"invisible\" to the layout calculations\n      // that will take place in the next step (this.runAnimation).\n\n      if (leaveAnimation) {\n        var leavingChildren = this.state.children.filter(function (child) {\n          return child.leaving;\n        });\n\n        leavingChildren.forEach(function (leavingChild) {\n          var childData = _this3.getChildData(getKey(leavingChild));\n\n          // We need to take the items out of the \"flow\" of the document, so that\n          // its siblings can move to take its place.\n          if (childData.boundingBox) {\n            (0, _domManipulation.removeNodeFromDOMFlow)(childData, _this3.props.verticalAlignment);\n          }\n        });\n\n        if (maintainContainerHeight && this.heightPlaceholderData.domNode) {\n          (0, _domManipulation.updateHeightPlaceholder)({\n            domNode: this.heightPlaceholderData.domNode,\n            parentData: this.parentData,\n            getPosition: getPosition\n          });\n        }\n      }\n\n      // For all children not in the middle of entering or leaving,\n      // we need to reset the transition, so that the NEW shuffle starts from\n      // the right place.\n      this.state.children.forEach(function (child) {\n        var _getChildData = _this3.getChildData(getKey(child)),\n            domNode = _getChildData.domNode;\n\n        // Ignore children that don't render DOM nodes (eg. by returning null)\n\n\n        if (!domNode) {\n          return;\n        }\n\n        if (!child.entering && !child.leaving) {\n          (0, _domManipulation.applyStylesToDOMNode)({\n            domNode: domNode,\n            styles: {\n              transition: ''\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: 'animateChild',\n    value: function animateChild(child, index) {\n      var _this4 = this;\n\n      var _getChildData2 = this.getChildData(getKey(child)),\n          domNode = _getChildData2.domNode;\n\n      if (!domNode) {\n        return;\n      }\n\n      // Apply the relevant style for this DOM node\n      // This is the offset from its actual DOM position.\n      // eg. if an item has been re-rendered 20px lower, we want to apply a\n      // style of 'transform: translate(-20px)', so that it appears to be where\n      // it started.\n      // In FLIP terminology, this is the 'Invert' stage.\n      (0, _domManipulation.applyStylesToDOMNode)({\n        domNode: domNode,\n        styles: this.computeInitialStyles(child)\n      });\n\n      // Start by invoking the onStart callback for this child.\n      if (this.props.onStart) this.props.onStart(child, domNode);\n\n      // Next, animate the item from it's artificially-offset position to its\n      // new, natural position.\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          // NOTE, RE: the double-requestAnimationFrame:\n          // Sadly, this is the most browser-compatible way to do this I've found.\n          // Essentially we need to set the initial styles outside of any request\n          // callbacks to avoid batching them. Then, a frame needs to pass with\n          // the styles above rendered. Then, on the second frame, we can apply\n          // our final styles to perform the animation.\n\n          // Our first order of business is to \"undo\" the styles applied in the\n          // previous frames, while also adding a `transition` property.\n          // This way, the item will smoothly transition from its old position\n          // to its new position.\n\n          // eslint-disable-next-line flowtype/require-variable-type\n          var styles = {\n            transition: (0, _domManipulation.createTransitionString)(index, _this4.props),\n            transform: '',\n            opacity: ''\n          };\n\n          if (child.appearing && _this4.props.appearAnimation) {\n            styles = _extends({}, styles, _this4.props.appearAnimation.to);\n          } else if (child.entering && _this4.props.enterAnimation) {\n            styles = _extends({}, styles, _this4.props.enterAnimation.to);\n          } else if (child.leaving && _this4.props.leaveAnimation) {\n            styles = _extends({}, styles, _this4.props.leaveAnimation.to);\n          }\n\n          // In FLIP terminology, this is the 'Play' stage.\n          (0, _domManipulation.applyStylesToDOMNode)({ domNode: domNode, styles: styles });\n        });\n      });\n\n      this.bindTransitionEndHandler(child);\n    }\n  }, {\n    key: 'bindTransitionEndHandler',\n    value: function bindTransitionEndHandler(child) {\n      var _this5 = this;\n\n      var _getChildData3 = this.getChildData(getKey(child)),\n          domNode = _getChildData3.domNode;\n\n      if (!domNode) {\n        return;\n      }\n\n      // The onFinish callback needs to be bound to the transitionEnd event.\n      // We also need to unbind it when the transition completes, so this ugly\n      // inline function is required (we need it here so it closes over\n      // dependent variables `child` and `domNode`)\n      var transitionEndHandler = function transitionEndHandler(ev) {\n        // It's possible that this handler is fired not on our primary transition,\n        // but on a nested transition (eg. a hover effect). Ignore these cases.\n        if (ev.target !== domNode) return;\n\n        // Remove the 'transition' inline style we added. This is cleanup.\n        domNode.style.transition = '';\n\n        // Trigger any applicable onFinish/onFinishAll hooks\n        _this5.triggerFinishHooks(child, domNode);\n\n        domNode.removeEventListener(transitionEnd, transitionEndHandler);\n\n        if (child.leaving) {\n          _this5.removeChildData(getKey(child));\n        }\n      };\n\n      domNode.addEventListener(transitionEnd, transitionEndHandler);\n    }\n  }, {\n    key: 'triggerFinishHooks',\n    value: function triggerFinishHooks(child, domNode) {\n      var _this6 = this;\n\n      if (this.props.onFinish) this.props.onFinish(child, domNode);\n\n      // Reduce the number of children we need to animate by 1,\n      // so that we can tell when all children have finished.\n      this.remainingAnimations -= 1;\n\n      if (this.remainingAnimations === 0) {\n        // Remove any items from the DOM that have left, and reset `entering`.\n        var nextChildren = this.state.children.filter(function (_ref3) {\n          var leaving = _ref3.leaving;\n          return !leaving;\n        }).map(function (item) {\n          return _extends({}, item, {\n            appearing: false,\n            entering: false\n          });\n        });\n\n        this.setState({ children: nextChildren }, function () {\n          if (typeof _this6.props.onFinishAll === 'function') {\n            _this6.callChildrenHook(_this6.props.onFinishAll);\n          }\n\n          // Reset our variables for the next iteration\n          _this6.childrenToAnimate = [];\n        });\n\n        // If the placeholder was holding the container open while elements were\n        // leaving, we we can now set its height to zero.\n        if (this.heightPlaceholderData.domNode) {\n          this.heightPlaceholderData.domNode.style.height = '0';\n        }\n      }\n    }\n  }, {\n    key: 'callChildrenHook',\n    value: function callChildrenHook(hook) {\n      var _this7 = this;\n\n      var elements = [];\n      var domNodes = [];\n\n      this.childrenToAnimate.forEach(function (childKey) {\n        // If this was an exit animation, the child may no longer exist.\n        // If so, skip it.\n        var child = _this7.findChildByKey(childKey);\n\n        if (!child) {\n          return;\n        }\n\n        elements.push(child);\n\n        if (_this7.hasChildData(childKey)) {\n          domNodes.push(_this7.getChildData(childKey).domNode);\n        }\n      });\n\n      hook(elements, domNodes);\n    }\n  }, {\n    key: 'updateBoundingBoxCaches',\n    value: function updateBoundingBoxCaches() {\n      var _this8 = this;\n\n      // This is the ONLY place that parentData and childrenData's\n      // bounding boxes are updated. They will be calculated at other times\n      // to be compared to this value, but it's important that the cache is\n      // updated once per update.\n      var parentDomNode = this.parentData.domNode;\n\n      if (!parentDomNode) {\n        return;\n      }\n\n      this.parentData.boundingBox = this.props.getPosition(parentDomNode);\n\n      this.state.children.forEach(function (child) {\n        var childKey = getKey(child);\n\n        // It is possible that a child does not have a `key` property;\n        // Ignore these children, they don't need to be moved.\n        if (!childKey) {\n          return;\n        }\n\n        // In very rare circumstances, for reasons unknown, the ref is never\n        // populated for certain children. In this case, avoid doing this update.\n        // see: https://github.com/joshwcomeau/react-flip-move/pull/91\n        if (!_this8.hasChildData(childKey)) {\n          return;\n        }\n\n        var childData = _this8.getChildData(childKey);\n\n        // If the child element returns null, we need to avoid trying to\n        // account for it\n        if (!childData.domNode || !child) {\n          return;\n        }\n\n        _this8.setChildData(childKey, {\n          boundingBox: (0, _domManipulation.getRelativeBoundingBox)({\n            childDomNode: childData.domNode,\n            parentDomNode: parentDomNode,\n            getPosition: _this8.props.getPosition\n          })\n        });\n      });\n    }\n  }, {\n    key: 'computeInitialStyles',\n    value: function computeInitialStyles(child) {\n      if (child.appearing) {\n        return this.props.appearAnimation ? this.props.appearAnimation.from : {};\n      } else if (child.entering) {\n        if (!this.props.enterAnimation) {\n          return {};\n        }\n        // If this child was in the middle of leaving, it still has its\n        // absolute positioning styles applied. We need to undo those.\n        return _extends({\n          position: '',\n          top: '',\n          left: '',\n          right: '',\n          bottom: ''\n        }, this.props.enterAnimation.from);\n      } else if (child.leaving) {\n        return this.props.leaveAnimation ? this.props.leaveAnimation.from : {};\n      }\n\n      var childData = this.getChildData(getKey(child));\n      var childDomNode = childData.domNode;\n      var childBoundingBox = childData.boundingBox;\n      var parentBoundingBox = this.parentData.boundingBox;\n\n      if (!childDomNode) {\n        return {};\n      }\n\n      var _getPositionDelta3 = (0, _domManipulation.getPositionDelta)({\n        childDomNode: childDomNode,\n        childBoundingBox: childBoundingBox,\n        parentBoundingBox: parentBoundingBox,\n        getPosition: this.props.getPosition\n      }),\n          _getPositionDelta4 = _slicedToArray(_getPositionDelta3, 2),\n          dX = _getPositionDelta4[0],\n          dY = _getPositionDelta4[1];\n\n      return {\n        transform: 'translate(' + dX + 'px, ' + dY + 'px)'\n      };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'isAnimationDisabled',\n    value: function isAnimationDisabled(props) {\n      // If the component is explicitly passed a `disableAllAnimations` flag,\n      // we can skip this whole process. Similarly, if all of the numbers have\n      // been set to 0, there is no point in trying to animate; doing so would\n      // only cause a flicker (and the intent is probably to disable animations)\n      // We can also skip this rigamarole if there's no browser support for it.\n      return noBrowserSupport || props.disableAllAnimations || props.duration === 0 && props.delay === 0 && props.staggerDurationBy === 0 && props.staggerDelayBy === 0;\n    }\n  }, {\n    key: 'findChildByKey',\n    value: function findChildByKey(key) {\n      return this.state.children.find(function (child) {\n        return getKey(child) === key;\n      });\n    }\n  }, {\n    key: 'hasChildData',\n    value: function hasChildData(key) {\n      // Object has some built-in properties on its prototype, such as toString.  hasOwnProperty makes\n      // sure that key is present on childrenData itself, not on its prototype.\n      return Object.prototype.hasOwnProperty.call(this.childrenData, key);\n    }\n  }, {\n    key: 'getChildData',\n    value: function getChildData(key) {\n      return this.hasChildData(key) ? this.childrenData[key] : {};\n    }\n  }, {\n    key: 'setChildData',\n    value: function setChildData(key, data) {\n      this.childrenData[key] = _extends({}, this.getChildData(key), data);\n    }\n  }, {\n    key: 'removeChildData',\n    value: function removeChildData(key) {\n      delete this.childrenData[key];\n    }\n  }, {\n    key: 'createHeightPlaceholder',\n    value: function createHeightPlaceholder() {\n      var _this9 = this;\n\n      var typeName = this.props.typeName;\n\n      // If requested, create an invisible element at the end of the list.\n      // Its height will be modified to prevent the container from collapsing\n      // prematurely.\n\n      var isContainerAList = typeName === 'ul' || typeName === 'ol';\n      var placeholderType = isContainerAList ? 'li' : 'div';\n\n      return _react2.default.createElement(placeholderType, {\n        key: 'height-placeholder',\n        ref: function ref(domNode) {\n          _this9.heightPlaceholderData.domNode = domNode;\n        },\n        style: { visibility: 'hidden', height: 0 }\n      });\n    }\n  }, {\n    key: 'childrenWithRefs',\n    value: function childrenWithRefs() {\n      var _this10 = this;\n\n      // We need to clone the provided children, capturing a reference to the\n      // underlying DOM node. Flip Move needs to use the React escape hatches to\n      // be able to do its calculations.\n      return this.state.children.map(function (child) {\n        return _react2.default.cloneElement(child.element, {\n          ref: function ref(element) {\n            // Stateless Functional Components are not supported by FlipMove,\n            // because they don't have instances.\n            if (!element) {\n              return;\n            }\n\n            var domNode = (0, _domManipulation.getNativeNode)(element);\n            _this10.setChildData(getKey(child), { domNode: domNode });\n          }\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this11 = this;\n\n      var _props2 = this.props,\n          typeName = _props2.typeName,\n          delegated = _props2.delegated,\n          leaveAnimation = _props2.leaveAnimation,\n          maintainContainerHeight = _props2.maintainContainerHeight;\n\n\n      var props = _extends({}, delegated, {\n        ref: function ref(node) {\n          _this11.parentData.domNode = node;\n        }\n      });\n\n      var children = this.childrenWithRefs();\n      if (leaveAnimation && maintainContainerHeight) {\n        children.push(this.createHeightPlaceholder());\n      }\n\n      return _react2.default.createElement(typeName, props, children);\n    }\n  }]);\n\n  return FlipMove;\n}(_react.Component);\n\nexports.default = (0, _propConverter2.default)(FlipMove);\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 145 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// @noflow\n/**\n * React Flip Move - Polyfills\n * (c) 2016-present Joshua Comeau\n */\n\n/* eslint-disable */\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value = void 0;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\nif (!Array.prototype.every) {\n  Array.prototype.every = function (callbackfn, thisArg) {\n    'use strict';\n\n    var T, k;\n\n    if (this == null) {\n      throw new TypeError('this is null or not defined');\n    }\n\n    var O = Object(this);\n    var len = O.length >>> 0;\n\n    if (typeof callbackfn !== 'function') {\n      throw new TypeError();\n    }\n\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    k = 0;\n\n    while (k < len) {\n\n      var kValue;\n\n      if (k in O) {\n        kValue = O[k];\n\n        var testResult = callbackfn.call(T, kValue, k, O);\n\n        if (!testResult) {\n          return false;\n        }\n      }\n      k++;\n    }\n    return true;\n  };\n}\n\nif (!Array.isArray) {\n  Array.isArray = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\n/***/ }),\n/* 146 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _errorMessages = __webpack_require__(147);\n\nvar _enterLeavePresets = __webpack_require__(148);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * React Flip Move | propConverter\n * (c) 2016-present Joshua Comeau\n *\n * Abstracted away a bunch of the messy business with props.\n *   - props flow types and defaultProps\n *   - Type conversion (We accept 'string' and 'number' values for duration,\n *     delay, and other fields, but we actually need them to be ints.)\n *   - Children conversion (we need the children to be an array. May not always\n *     be, if a single child is passed in.)\n *   - Resolving animation presets into their base CSS styles\n */\n/* eslint-disable block-scoped-var */\n\nvar nodeEnv = void 0;\ntry {\n  nodeEnv = process.env.NODE_ENV;\n} catch (e) {\n  nodeEnv = 'development';\n}\n\nfunction propConverter(ComposedComponent) {\n  var _class, _temp;\n\n  return _temp = _class = function (_Component) {\n    _inherits(FlipMovePropConverter, _Component);\n\n    function FlipMovePropConverter() {\n      _classCallCheck(this, FlipMovePropConverter);\n\n      return _possibleConstructorReturn(this, (FlipMovePropConverter.__proto__ || Object.getPrototypeOf(FlipMovePropConverter)).apply(this, arguments));\n    }\n\n    _createClass(FlipMovePropConverter, [{\n      key: 'checkForStatelessFunctionalComponents',\n\n\n      // eslint-disable-next-line class-methods-use-this\n      value: function checkForStatelessFunctionalComponents(children) {\n        // Skip all console warnings in production.\n        // Bail early, to avoid unnecessary work.\n        if (nodeEnv === 'production') {\n          return;\n        }\n\n        // FlipMove does not support stateless functional components.\n        // Check to see if any supplied components won't work.\n        // If the child doesn't have a key, it means we aren't animating it.\n        // It's allowed to be an SFC, since we ignore it.\n        var childArray = _react.Children.toArray(children);\n        var noStateless = childArray.every(function (child) {\n          return !(0, _helpers.isElementAnSFC)(child) || typeof child.key === 'undefined';\n        });\n\n        if (!noStateless) {\n          (0, _errorMessages.statelessFunctionalComponentSupplied)();\n        }\n      }\n    }, {\n      key: 'convertProps',\n      value: function convertProps(props) {\n        var workingProps = {\n          // explicitly bypass the props that don't need conversion\n          children: props.children,\n          easing: props.easing,\n          onStart: props.onStart,\n          onFinish: props.onFinish,\n          onStartAll: props.onStartAll,\n          onFinishAll: props.onFinishAll,\n          typeName: props.typeName,\n          disableAllAnimations: props.disableAllAnimations,\n          getPosition: props.getPosition,\n          maintainContainerHeight: props.maintainContainerHeight,\n          verticalAlignment: props.verticalAlignment,\n\n          // Do string-to-int conversion for all timing-related props\n          duration: this.convertTimingProp('duration'),\n          delay: this.convertTimingProp('delay'),\n          staggerDurationBy: this.convertTimingProp('staggerDurationBy'),\n          staggerDelayBy: this.convertTimingProp('staggerDelayBy'),\n\n          // Our enter/leave animations can be specified as boolean (default or\n          // disabled), string (preset name), or object (actual animation values).\n          // Let's standardize this so that they're always objects\n          appearAnimation: this.convertAnimationProp(props.appearAnimation, _enterLeavePresets.appearPresets),\n          enterAnimation: this.convertAnimationProp(props.enterAnimation, _enterLeavePresets.enterPresets),\n          leaveAnimation: this.convertAnimationProp(props.leaveAnimation, _enterLeavePresets.leavePresets),\n\n          delegated: {}\n        };\n\n        this.checkForStatelessFunctionalComponents(workingProps.children);\n\n        // Accept `disableAnimations`, but add a deprecation warning\n        if (typeof props.disableAnimations !== 'undefined') {\n          if (nodeEnv !== 'production') {\n            (0, _errorMessages.deprecatedDisableAnimations)();\n          }\n\n          workingProps.disableAllAnimations = props.disableAnimations;\n        }\n\n        // Gather any additional props;\n        // they will be delegated to the ReactElement created.\n        var primaryPropKeys = Object.keys(workingProps);\n        var delegatedProps = (0, _helpers.omit)(this.props, primaryPropKeys);\n\n        // The FlipMove container element needs to have a non-static position.\n        // We use `relative` by default, but it can be overridden by the user.\n        // Now that we're delegating props, we need to merge this in.\n        delegatedProps.style = _extends({\n          position: 'relative'\n        }, delegatedProps.style);\n\n        workingProps.delegated = delegatedProps;\n\n        return workingProps;\n      }\n    }, {\n      key: 'convertTimingProp',\n      value: function convertTimingProp(prop) {\n        var rawValue = this.props[prop];\n\n        var value = typeof rawValue === 'number' ? rawValue : parseInt(rawValue, 10);\n\n        if (isNaN(value)) {\n          var defaultValue = FlipMovePropConverter.defaultProps[prop];\n\n          if (nodeEnv !== 'production') {\n            (0, _errorMessages.invalidTypeForTimingProp)({\n              prop: prop,\n              value: rawValue,\n              defaultValue: defaultValue\n            });\n          }\n\n          return defaultValue;\n        }\n\n        return value;\n      }\n\n      // eslint-disable-next-line class-methods-use-this\n\n    }, {\n      key: 'convertAnimationProp',\n      value: function convertAnimationProp(animation, presets) {\n        switch (typeof animation === 'undefined' ? 'undefined' : _typeof(animation)) {\n          case 'boolean':\n            {\n              // If it's true, we want to use the default preset.\n              // If it's false, we want to use the 'none' preset.\n              return presets[animation ? _enterLeavePresets.defaultPreset : _enterLeavePresets.disablePreset];\n            }\n\n          case 'string':\n            {\n              var presetKeys = Object.keys(presets);\n\n              if (presetKeys.indexOf(animation) === -1) {\n                if (nodeEnv !== 'production') {\n                  (0, _errorMessages.invalidEnterLeavePreset)({\n                    value: animation,\n                    acceptableValues: presetKeys.join(', '),\n                    defaultValue: _enterLeavePresets.defaultPreset\n                  });\n                }\n\n                return presets[_enterLeavePresets.defaultPreset];\n              }\n\n              return presets[animation];\n            }\n\n          default:\n            {\n              return animation;\n            }\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(ComposedComponent, this.convertProps(this.props));\n      }\n    }]);\n\n    return FlipMovePropConverter;\n  }(_react.Component), _class.defaultProps = {\n    easing: 'ease-in-out',\n    duration: 350,\n    delay: 0,\n    staggerDurationBy: 0,\n    staggerDelayBy: 0,\n    typeName: 'div',\n    enterAnimation: _enterLeavePresets.defaultPreset,\n    leaveAnimation: _enterLeavePresets.defaultPreset,\n    disableAllAnimations: false,\n    getPosition: function getPosition(node) {\n      return node.getBoundingClientRect();\n    },\n    maintainContainerHeight: false,\n    verticalAlignment: 'top'\n  }, _temp;\n}\n\nexports.default = propConverter;\nmodule.exports = exports['default'];\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 147 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nfunction warnOnce(msg) {\n  var hasWarned = false;\n  return function () {\n    if (!hasWarned) {\n      console.warn(msg);\n      hasWarned = true;\n    }\n  };\n}\nvar statelessFunctionalComponentSupplied = exports.statelessFunctionalComponentSupplied = warnOnce('\\n>> Error, via react-flip-move <<\\n\\nYou provided a stateless functional component as a child to <FlipMove>. Unfortunately, SFCs aren\\'t supported, because Flip Move needs access to the backing instances via refs, and SFCs don\\'t have a public instance that holds that info.\\n\\nPlease wrap your components in a native element (eg. <div>), or a non-functional component.\\n');\n\nvar invalidTypeForTimingProp = exports.invalidTypeForTimingProp = function invalidTypeForTimingProp(args) {\n  return console.error('\\n>> Error, via react-flip-move <<\\n\\nThe prop you provided for \\'' + args.prop + '\\' is invalid. It needs to be a positive integer, or a string that can be resolved to a number. The value you provided is \\'' + args.value + '\\'.\\n\\nAs a result,  the default value for this parameter will be used, which is \\'' + args.defaultValue + '\\'.\\n');\n};\n\nvar deprecatedDisableAnimations = exports.deprecatedDisableAnimations = warnOnce('\\n>> Warning, via react-flip-move <<\\n\\nThe \\'disableAnimations\\' prop you provided is deprecated. Please switch to use \\'disableAllAnimations\\'.\\n\\nThis will become a silent error in future versions of react-flip-move.\\n');\n\nvar invalidEnterLeavePreset = exports.invalidEnterLeavePreset = function invalidEnterLeavePreset(args) {\n  return console.error('\\n>> Error, via react-flip-move <<\\n\\nThe enter/leave preset you provided is invalid. We don\\'t currently have a \\'' + args.value + ' preset.\\'\\n\\nAcceptable values are ' + args.acceptableValues + '. The default value of \\'' + args.defaultValue + '\\' will be used.\\n');\n};\n\n/***/ }),\n/* 148 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar enterPresets = exports.enterPresets = {\n  elevator: {\n    from: { transform: 'scale(0)', opacity: '0' },\n    to: { transform: '', opacity: '' }\n  },\n  fade: {\n    from: { opacity: '0' },\n    to: { opacity: '' }\n  },\n  accordionVertical: {\n    from: { transform: 'scaleY(0)', transformOrigin: 'center top' },\n    to: { transform: '', transformOrigin: 'center top' }\n  },\n  accordionHorizontal: {\n    from: { transform: 'scaleX(0)', transformOrigin: 'left center' },\n    to: { transform: '', transformOrigin: 'left center' }\n  },\n  none: null\n};\n/**\n * React Flip Move | enterLeavePresets\n * (c) 2016-present Joshua Comeau\n *\n * This contains the master list of presets available for enter/leave animations,\n * along with the mapping between preset and styles.\n */\nvar leavePresets = exports.leavePresets = {\n  elevator: {\n    from: { transform: 'scale(1)', opacity: '1' },\n    to: { transform: 'scale(0)', opacity: '0' }\n  },\n  fade: {\n    from: { opacity: '1' },\n    to: { opacity: '0' }\n  },\n  accordionVertical: {\n    from: { transform: 'scaleY(1)', transformOrigin: 'center top' },\n    to: { transform: 'scaleY(0)', transformOrigin: 'center top' }\n  },\n  accordionHorizontal: {\n    from: { transform: 'scaleX(1)', transformOrigin: 'left center' },\n    to: { transform: 'scaleX(0)', transformOrigin: 'left center' }\n  },\n  none: null\n};\n\n// For now, appearPresets will be identical to enterPresets.\n// Assigning a custom export in case we ever want to add appear-specific ones.\nvar appearPresets = exports.appearPresets = enterPresets;\n\n// Embarrassingly enough, v2.0 launched with typo'ed preset names.\n// To avoid penning a new major version over something so inconsequential,\n// we're supporting both spellings. In a future version, these alternatives\n// may be deprecated.\n// $FlowFixMe\nenterPresets.accordianVertical = enterPresets.accordionVertical;\n// $FlowFixMe\nenterPresets.accordianHorizontal = enterPresets.accordionHorizontal;\n// $FlowFixMe\nleavePresets.accordianVertical = leavePresets.accordionVertical;\n// $FlowFixMe\nleavePresets.accordianHorizontal = leavePresets.accordionHorizontal;\n\nvar defaultPreset = exports.defaultPreset = 'elevator';\nvar disablePreset = exports.disablePreset = 'none';\n\n/***/ }),\n/* 149 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTransitionString = exports.getNativeNode = exports.updateHeightPlaceholder = exports.removeNodeFromDOMFlow = exports.getPositionDelta = exports.getRelativeBoundingBox = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n *\n * These methods read from and write to the DOM.\n * They almost always have side effects, and will hopefully become the\n * only spot in the codebase with impure functions.\n */\n\n\nexports.applyStylesToDOMNode = applyStylesToDOMNode;\nexports.whichTransitionEvent = whichTransitionEvent;\n\nvar _reactDom = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction applyStylesToDOMNode(_ref) {\n  var domNode = _ref.domNode,\n      styles = _ref.styles;\n\n  // Can't just do an object merge because domNode.styles is no regular object.\n  // Need to do it this way for the engine to fire its `set` listeners.\n  Object.keys(styles).forEach(function (key) {\n    domNode.style.setProperty((0, _helpers.hyphenate)(key), styles[key]);\n  });\n}\n\n// Modified from Modernizr\nfunction whichTransitionEvent() {\n  var transitions = {\n    transition: 'transitionend',\n    '-o-transition': 'oTransitionEnd',\n    '-moz-transition': 'transitionend',\n    '-webkit-transition': 'webkitTransitionEnd'\n  };\n\n  // If we're running in a browserless environment (eg. SSR), it doesn't apply.\n  // Return a placeholder string, for consistent type return.\n  if (typeof document === 'undefined') return '';\n\n  var el = document.createElement('fakeelement');\n\n  var match = Object.keys(transitions).find(function (t) {\n    return el.style.getPropertyValue(t) !== undefined;\n  });\n\n  // If no `transition` is found, we must be running in a browser so ancient,\n  // React itself won't run. Return an empty string, for consistent type return\n  return match ? transitions[match] : '';\n}\n\nvar getRelativeBoundingBox = exports.getRelativeBoundingBox = function getRelativeBoundingBox(_ref2) {\n  var childDomNode = _ref2.childDomNode,\n      parentDomNode = _ref2.parentDomNode,\n      getPosition = _ref2.getPosition;\n\n  var parentBox = getPosition(parentDomNode);\n\n  var _getPosition = getPosition(childDomNode),\n      top = _getPosition.top,\n      left = _getPosition.left,\n      right = _getPosition.right,\n      bottom = _getPosition.bottom,\n      width = _getPosition.width,\n      height = _getPosition.height;\n\n  return {\n    top: top - parentBox.top,\n    left: left - parentBox.left,\n    right: parentBox.right - right,\n    bottom: parentBox.bottom - bottom,\n    width: width,\n    height: height\n  };\n};\n\n/** getPositionDelta\n * This method returns the delta between two bounding boxes, to figure out\n * how many pixels on each axis the element has moved.\n *\n */\nvar getPositionDelta = exports.getPositionDelta = function getPositionDelta(_ref3) {\n  var childDomNode = _ref3.childDomNode,\n      childBoundingBox = _ref3.childBoundingBox,\n      parentBoundingBox = _ref3.parentBoundingBox,\n      getPosition = _ref3.getPosition;\n\n  // TEMP: A mystery bug is sometimes causing unnecessary boundingBoxes to\n  var defaultBox = { top: 0, left: 0, right: 0, bottom: 0, height: 0, width: 0 };\n\n  // Our old box is its last calculated position, derived on mount or at the\n  // start of the previous animation.\n  var oldRelativeBox = childBoundingBox || defaultBox;\n  var parentBox = parentBoundingBox || defaultBox;\n\n  // Our new box is the new final resting place: Where we expect it to wind up\n  // after the animation. First we get the box in absolute terms (AKA relative\n  // to the viewport), and then we calculate its relative box (relative to the\n  // parent container)\n  var newAbsoluteBox = getPosition(childDomNode);\n  var newRelativeBox = {\n    top: newAbsoluteBox.top - parentBox.top,\n    left: newAbsoluteBox.left - parentBox.left\n  };\n\n  return [oldRelativeBox.left - newRelativeBox.left, oldRelativeBox.top - newRelativeBox.top];\n};\n\n/** removeNodeFromDOMFlow\n * This method does something very sneaky: it removes a DOM node from the\n * document flow, but without actually changing its on-screen position.\n *\n * It works by calculating where the node is, and then applying styles\n * so that it winds up being positioned absolutely, but in exactly the\n * same place.\n *\n * This is a vital part of the FLIP technique.\n */\nvar removeNodeFromDOMFlow = exports.removeNodeFromDOMFlow = function removeNodeFromDOMFlow(childData, verticalAlignment) {\n  var domNode = childData.domNode,\n      boundingBox = childData.boundingBox;\n\n\n  if (!domNode || !boundingBox) {\n    return;\n  }\n\n  // For this to work, we have to offset any given `margin`.\n  var computed = window.getComputedStyle(domNode);\n\n  // We need to clean up margins, by converting and removing suffix:\n  // eg. '21px' -> 21\n  var marginAttrs = ['margin-top', 'margin-left', 'margin-right'];\n  var margins = marginAttrs.reduce(function (acc, margin) {\n    var propertyVal = computed.getPropertyValue(margin);\n\n    return _extends({}, acc, _defineProperty({}, margin, Number(propertyVal.replace('px', ''))));\n  }, {});\n\n  // If we're bottom-aligned, we need to add the height of the child to its\n  // top offset. This is because, when the container is bottom-aligned, its\n  // height shrinks from the top, not the bottom. We're removing this node\n  // from the flow, so the top is going to drop by its height.\n  var topOffset = verticalAlignment === 'bottom' ? boundingBox.top - boundingBox.height : boundingBox.top;\n\n  var styles = {\n    position: 'absolute',\n    top: topOffset - margins['margin-top'] + 'px',\n    left: boundingBox.left - margins['margin-left'] + 'px',\n    right: boundingBox.right - margins['margin-right'] + 'px'\n  };\n\n  applyStylesToDOMNode({ domNode: domNode, styles: styles });\n};\n\n/** updateHeightPlaceholder\n * An optional property to FlipMove is a `maintainContainerHeight` boolean.\n * This property creates a node that fills space, so that the parent\n * container doesn't collapse when its children are removed from the\n * document flow.\n */\nvar updateHeightPlaceholder = exports.updateHeightPlaceholder = function updateHeightPlaceholder(_ref4) {\n  var domNode = _ref4.domNode,\n      parentData = _ref4.parentData,\n      getPosition = _ref4.getPosition;\n\n  var parentDomNode = parentData.domNode;\n  var parentBoundingBox = parentData.boundingBox;\n\n  if (!parentDomNode || !parentBoundingBox) {\n    return;\n  }\n\n  // We need to find the height of the container *without* the placeholder.\n  // Since it's possible that the placeholder might already be present,\n  // we first set its height to 0.\n  // This allows the container to collapse down to the size of just its\n  // content (plus container padding or borders if any).\n  applyStylesToDOMNode({ domNode: domNode, styles: { height: '0' } });\n\n  // Find the distance by which the container would be collapsed by elements\n  // leaving. We compare the freshly-available parent height with the original,\n  // cached container height.\n  var originalParentHeight = parentBoundingBox.height;\n  var collapsedParentHeight = getPosition(parentDomNode).height;\n  var reductionInHeight = originalParentHeight - collapsedParentHeight;\n\n  // If the container has become shorter, update the padding element's\n  // height to take up the difference. Otherwise set its height to zero,\n  // so that it has no effect.\n  var styles = {\n    height: reductionInHeight > 0 ? reductionInHeight + 'px' : '0'\n  };\n\n  applyStylesToDOMNode({ domNode: domNode, styles: styles });\n};\n\nvar getNativeNode = exports.getNativeNode = function getNativeNode(element) {\n  // When running in a windowless environment, abort!\n  if (typeof HTMLElement === 'undefined') {\n    return null;\n  }\n\n  // `element` may already be a native node.\n  if (element instanceof HTMLElement) {\n    return element;\n  }\n\n  // While ReactDOM's `findDOMNode` is discouraged, it's the only\n  // publicly-exposed way to find the underlying DOM node for\n  // composite components.\n  var foundNode = (0, _reactDom.findDOMNode)(element);\n\n  if (!(foundNode instanceof HTMLElement)) {\n    // Text nodes are not supported\n    return null;\n  }\n\n  return foundNode;\n};\n\nvar createTransitionString = exports.createTransitionString = function createTransitionString(index, props) {\n  var delay = props.delay,\n      duration = props.duration;\n  var staggerDurationBy = props.staggerDurationBy,\n      staggerDelayBy = props.staggerDelayBy,\n      easing = props.easing;\n\n\n  delay += index * staggerDelayBy;\n  duration += index * staggerDurationBy;\n\n  var cssProperties = ['transform', 'opacity'];\n\n  return cssProperties.map(function (prop) {\n    return prop + ' ' + duration + 'ms ' + easing + ' ' + delay + 'ms';\n  }).join(', ');\n};\n\n/***/ }),\n/* 150 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\tAutosize 3.0.21\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tfactory(exports, module);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports, mod);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (exports, module) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : (function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'delete': function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function (name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = ta.clientWidth;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tvar originalHeight = ta.style.height;\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = 'auto';\n\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\n\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\tta.style.height = originalHeight;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tta.style.height = endHeight + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that\n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight !== styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = (function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap['delete'](ta);\n\t\t}).bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function (el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\tmodule.exports = autosize;\n});\n\n/***/ }),\n/* 151 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (language) {\n  return new _polyglot2.default({\n    phrases: i18nMap[language] || i18nMap.en,\n    locale: language\n  });\n};\n\nvar _polyglot = __webpack_require__(152);\n\nvar _polyglot2 = _interopRequireDefault(_polyglot);\n\nvar _zhCN = __webpack_require__(153);\n\nvar _zhCN2 = _interopRequireDefault(_zhCN);\n\nvar _zhTW = __webpack_require__(154);\n\nvar _zhTW2 = _interopRequireDefault(_zhTW);\n\nvar _en = __webpack_require__(155);\n\nvar _en2 = _interopRequireDefault(_en);\n\nvar _esES = __webpack_require__(156);\n\nvar _esES2 = _interopRequireDefault(_esES);\n\nvar _fr = __webpack_require__(157);\n\nvar _fr2 = _interopRequireDefault(_fr);\n\nvar _ru = __webpack_require__(158);\n\nvar _ru2 = _interopRequireDefault(_ru);\n\nvar _de = __webpack_require__(159);\n\nvar _de2 = _interopRequireDefault(_de);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar i18nMap = {\n  'zh': _zhCN2.default,\n  'zh-CN': _zhCN2.default,\n  'zh-TW': _zhTW2.default,\n  'en': _en2.default,\n  'es-ES': _esES2.default,\n  'fr': _fr2.default,\n  'ru': _ru2.default,\n  'de': _de2.default\n};\n\n/***/ }),\n/* 152 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     (c) 2012 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n\n(function(root, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n      return factory(root);\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.Polyglot = factory(root);\n  }\n}(this, function(root) {\n  'use strict';\n\n  // ### Polyglot class constructor\n  function Polyglot(options) {\n    options = options || {};\n    this.phrases = {};\n    this.extend(options.phrases || {});\n    this.currentLocale = options.locale || 'en';\n    this.allowMissing = !!options.allowMissing;\n    this.warn = options.warn || warn;\n  }\n\n  // ### Version\n  Polyglot.VERSION = '0.4.3';\n\n  // ### polyglot.locale([locale])\n  //\n  // Get or set locale. Internally, Polyglot only uses locale for pluralization.\n  Polyglot.prototype.locale = function(newLocale) {\n    if (newLocale) this.currentLocale = newLocale;\n    return this.currentLocale;\n  };\n\n  // ### polyglot.extend(phrases)\n  //\n  // Use `extend` to tell Polyglot how to translate a given key.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The key can be any string.  Feel free to call `extend` multiple times;\n  // it will override any phrases with the same key, but leave existing phrases\n  // untouched.\n  //\n  // It is also possible to pass nested phrase objects, which get flattened\n  // into an object with the nested keys concatenated using dot notation.\n  //\n  //     polyglot.extend({\n  //       \"nav\": {\n  //         \"hello\": \"Hello\",\n  //         \"hello_name\": \"Hello, %{name}\",\n  //         \"sidebar\": {\n  //           \"welcome\": \"Welcome\"\n  //         }\n  //       }\n  //     });\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}',\n  //     //   'nav.sidebar.welcome': 'Welcome'\n  //     // }\n  //\n  // `extend` accepts an optional second argument, `prefix`, which can be used\n  // to prefix every key in the phrases object with some string, using dot\n  // notation.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     }, \"nav\");\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}'\n  //     // }\n  //\n  // This feature is used internally to support nested phrase objects.\n  Polyglot.prototype.extend = function(morePhrases, prefix) {\n    var phrase;\n\n    for (var key in morePhrases) {\n      if (morePhrases.hasOwnProperty(key)) {\n        phrase = morePhrases[key];\n        if (prefix) key = prefix + '.' + key;\n        if (typeof phrase === 'object') {\n          this.extend(phrase, key);\n        } else {\n          this.phrases[key] = phrase;\n        }\n      }\n    }\n  };\n\n  // ### polyglot.clear()\n  //\n  // Clears all phrases. Useful for special cases, such as freeing\n  // up memory if you have lots of phrases but no longer need to\n  // perform any translation. Also used internally by `replace`.\n  Polyglot.prototype.clear = function() {\n    this.phrases = {};\n  };\n\n  // ### polyglot.replace(phrases)\n  //\n  // Completely replace the existing phrases with a new set of phrases.\n  // Normally, just use `extend` to add more phrases, but under certain\n  // circumstances, you may want to make sure no old phrases are lying around.\n  Polyglot.prototype.replace = function(newPhrases) {\n    this.clear();\n    this.extend(newPhrases);\n  };\n\n\n  // ### polyglot.t(key, options)\n  //\n  // The most-used method. Provide a key, and `t` will return the\n  // phrase.\n  //\n  //     polyglot.t(\"hello\");\n  //     => \"Hello\"\n  //\n  // The phrase value is provided first by a call to `polyglot.extend()` or\n  // `polyglot.replace()`.\n  //\n  // Pass in an object as the second argument to perform interpolation.\n  //\n  //     polyglot.t(\"hello_name\", {name: \"Spike\"});\n  //     => \"Hello, Spike\"\n  //\n  // If you like, you can provide a default value in case the phrase is missing.\n  // Use the special option key \"_\" to specify a default.\n  //\n  //     polyglot.t(\"i_like_to_write_in_language\", {\n  //       _: \"I like to write in %{language}.\",\n  //       language: \"JavaScript\"\n  //     });\n  //     => \"I like to write in JavaScript.\"\n  //\n  Polyglot.prototype.t = function(key, options) {\n    var phrase, result;\n    options = options == null ? {} : options;\n    // allow number as a pluralization shortcut\n    if (typeof options === 'number') {\n      options = {smart_count: options};\n    }\n    if (typeof this.phrases[key] === 'string') {\n      phrase = this.phrases[key];\n    } else if (typeof options._ === 'string') {\n      phrase = options._;\n    } else if (this.allowMissing) {\n      phrase = key;\n    } else {\n      this.warn('Missing translation for key: \"'+key+'\"');\n      result = key;\n    }\n    if (typeof phrase === 'string') {\n      options = clone(options);\n      result = choosePluralForm(phrase, this.currentLocale, options.smart_count);\n      result = interpolate(result, options);\n    }\n    return result;\n  };\n\n\n  // ### polyglot.has(key)\n  //\n  // Check if polyglot has a translation for given key\n  Polyglot.prototype.has = function(key) {\n    return key in this.phrases;\n  };\n\n\n  // #### Pluralization methods\n  // The string that separates the different phrase possibilities.\n  var delimeter = '||||';\n\n  // Mapping from pluralization group plural logic.\n  var pluralTypes = {\n    chinese:   function(n) { return 0; },\n    german:    function(n) { return n !== 1 ? 1 : 0; },\n    french:    function(n) { return n > 1 ? 1 : 0; },\n    russian:   function(n) { return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2; },\n    czech:     function(n) { return (n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2; },\n    polish:    function(n) { return (n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2); },\n    icelandic: function(n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; }\n  };\n\n  // Mapping from pluralization group to individual locales.\n  var pluralTypeToLanguages = {\n    chinese:   ['fa', 'id', 'ja', 'ko', 'lo', 'ms', 'th', 'tr', 'zh'],\n    german:    ['da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hu', 'it', 'nl', 'no', 'pt', 'sv'],\n    french:    ['fr', 'tl', 'pt-br'],\n    russian:   ['hr', 'ru'],\n    czech:     ['cs'],\n    polish:    ['pl'],\n    icelandic: ['is']\n  };\n\n  function langToTypeMap(mapping) {\n    var type, langs, l, ret = {};\n    for (type in mapping) {\n      if (mapping.hasOwnProperty(type)) {\n        langs = mapping[type];\n        for (l in langs) {\n          ret[langs[l]] = type;\n        }\n      }\n    }\n    return ret;\n  }\n\n  // Trim a string.\n  function trim(str){\n    var trimRe = /^\\s+|\\s+$/g;\n    return str.replace(trimRe, '');\n  }\n\n  // Based on a phrase text that contains `n` plural forms separated\n  // by `delimeter`, a `locale`, and a `count`, choose the correct\n  // plural form, or none if `count` is `null`.\n  function choosePluralForm(text, locale, count){\n    var ret, texts, chosenText;\n    if (count != null && text) {\n      texts = text.split(delimeter);\n      chosenText = texts[pluralTypeIndex(locale, count)] || texts[0];\n      ret = trim(chosenText);\n    } else {\n      ret = text;\n    }\n    return ret;\n  }\n\n  function pluralTypeName(locale) {\n    var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n    return langToPluralType[locale] || langToPluralType.en;\n  }\n\n  function pluralTypeIndex(locale, count) {\n    return pluralTypes[pluralTypeName(locale)](count);\n  }\n\n  // ### interpolate\n  //\n  // Does the dirty work. Creates a `RegExp` object for each\n  // interpolation placeholder.\n  function interpolate(phrase, options) {\n    for (var arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = phrase.replace(new RegExp('%\\\\{'+arg+'\\\\}', 'g'), options[arg]);\n      }\n    }\n    return phrase;\n  }\n\n  // ### warn\n  //\n  // Provides a warning in the console if a phrase key is missing.\n  function warn(message) {\n    root.console && root.console.warn && root.console.warn('WARNING: ' + message);\n  }\n\n  // ### clone\n  //\n  // Clone an object.\n  function clone(source) {\n    var ret = {};\n    for (var prop in source) {\n      ret[prop] = source[prop];\n    }\n    return ret;\n  }\n\n  return Polyglot;\n}));\n\n\n/***/ }),\n/* 153 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalk 加载中 ...\",\"no-found-related\":\"未找到相关的 %{link} 进行评论\",\"please-contact\":\"请联系 %{user} 初始化创建\",\"init-issue\":\"初始化 Issue\",\"leave-a-comment\":\"说点什么\",\"preview\":\"预览\",\"edit\":\"编辑\",\"comment\":\"评论\",\"support-markdown\":\"支持 Markdown 语法\",\"login-with-github\":\"使用 GitHub 登录\",\"first-comment-person\":\"来做第一个留言的人吧！\",\"commented\":\"发表于\",\"load-more\":\"加载更多\",\"counts\":\"%{counts} 条评论\",\"sort-asc\":\"从旧到新排序\",\"sort-desc\":\"从新到旧排序\",\"logout\":\"注销\",\"anonymous\":\"未登录用户\"}\n\n/***/ }),\n/* 154 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalk 載入中…\",\"no-found-related\":\"未找到相關的 %{link}\",\"please-contact\":\"請聯絡 %{user} 初始化評論\",\"init-issue\":\"初始化 Issue\",\"leave-a-comment\":\"寫點什麼\",\"preview\":\"預覽\",\"edit\":\"編輯\",\"comment\":\"評論\",\"support-markdown\":\"支援 Markdown 語法\",\"login-with-github\":\"使用 GitHub 登入\",\"first-comment-person\":\"成為首個留言的人吧！\",\"commented\":\"評論於\",\"load-more\":\"載入更多\",\"counts\":\"%{counts} 筆評論\",\"sort-asc\":\"從舊至新排序\",\"sort-desc\":\"從新至舊排序\",\"logout\":\"登出\",\"anonymous\":\"訪客\"}\n\n/***/ }),\n/* 155 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Related %{link} not found\",\"please-contact\":\"Please contact %{user} to initialize the comment\",\"init-issue\":\"Init Issue\",\"leave-a-comment\":\"Leave a comment\",\"preview\":\"Preview\",\"edit\":\"Edit\",\"comment\":\"Comment\",\"support-markdown\":\"Markdown is supported\",\"login-with-github\":\"Login with GitHub\",\"first-comment-person\":\"Be the first person to leave a comment!\",\"commented\":\"commented\",\"load-more\":\"Load more\",\"counts\":\"%{counts} comment |||| %{counts} comments\",\"sort-asc\":\"Sort by Oldest\",\"sort-desc\":\"Sort by Latest\",\"logout\":\"Logout\",\"anonymous\":\"Anonymous\"}\n\n/***/ }),\n/* 156 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Link %{link} no encontrado\",\"please-contact\":\"Por favor contacta con %{user} para inicializar el comentario\",\"init-issue\":\"Iniciar Issue\",\"leave-a-comment\":\"Deja un comentario\",\"preview\":\"Avance\",\"edit\":\"Editar\",\"comment\":\"Comentario\",\"support-markdown\":\"Markdown es soportado\",\"login-with-github\":\"Entrar con GitHub\",\"first-comment-person\":\"Sé el primero en dejar un comentario!\",\"commented\":\"comentó\",\"load-more\":\"Cargar más\",\"counts\":\"%{counts} comentario |||| %{counts} comentarios\",\"sort-asc\":\"Ordenar por Antiguos\",\"sort-desc\":\"Ordenar por Recientes\",\"logout\":\"Salir\",\"anonymous\":\"Anónimo\"}\n\n/***/ }),\n/* 157 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Lien %{link} non trouvé\",\"please-contact\":\"S’il vous plaît contactez %{user} pour initialiser les commentaires\",\"init-issue\":\"Initialisation des issues\",\"leave-a-comment\":\"Laisser un commentaire\",\"preview\":\"Aperçu\",\"edit\":\"Modifier\",\"comment\":\"Commentaire\",\"support-markdown\":\"Markdown est supporté\",\"login-with-github\":\"Se connecter avec GitHub\",\"first-comment-person\":\"Être le premier à laisser un commentaire !\",\"commented\":\"commenter\",\"load-more\":\"Charger plus\",\"counts\":\"%{counts} commentaire |||| %{counts} commentaires\",\"sort-asc\":\"Trier par plus ancien\",\"sort-desc\":\"Trier par plus récent\",\"logout\":\"Déconnexion\",\"anonymous\":\"Anonyme\"}\n\n/***/ }),\n/* 158 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Связанные %{link} не найдены\",\"please-contact\":\"Пожалуйста, свяжитесь с %{user} чтобы инициализировать комментарий\",\"init-issue\":\"Выпуск инициализации\",\"leave-a-comment\":\"Оставить комментарий\",\"preview\":\"Предварительный просмотр\",\"edit\":\"Pедактировать\",\"comment\":\"Комментарий\",\"support-markdown\":\"Поддерживается Markdown\",\"login-with-github\":\"Вход через GitHub\",\"first-comment-person\":\"Будьте первым, кто оставил комментарий\",\"commented\":\"прокомментированный\",\"load-more\":\"Загрузить ещё\",\"counts\":\"%{counts} комментарий |||| %{counts} комментарьев\",\"sort-asc\":\"Сортировать по старым\",\"sort-desc\":\"Сортировать по последним\",\"logout\":\"Выход\",\"anonymous\":\"Анонимный\"}\n\n/***/ }),\n/* 159 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Zugehöriger %{link} nicht gefunden\",\"please-contact\":\"Bitte kontaktiere %{user} um den Kommentar zu initialisieren\",\"init-issue\":\"Initialisiere Issue\",\"leave-a-comment\":\"Hinterlasse einen Kommentar\",\"preview\":\"Vorschau\",\"edit\":\"Editieren\",\"comment\":\"Kommentieren\",\"support-markdown\":\"Markdown wird unterstützt\",\"login-with-github\":\"Mit GitHub-Account anmelden\",\"first-comment-person\":\"Sei die erste Person, welche einen Kommentar hinterlässt!\",\"commented\":\"kommentierte\",\"load-more\":\"Zeige mehr\",\"counts\":\"%{counts} Kommentar |||| %{counts} Kommentare\",\"sort-asc\":\"Älteste zuerst\",\"sort-desc\":\"Neuste zuerst\",\"logout\":\"Abmelden\",\"anonymous\":\"Anonym\"}\n\n/***/ }),\n/* 160 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 161 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(162), __esModule: true };\n\n/***/ }),\n/* 162 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(163);\nmodule.exports = __webpack_require__(0).Object.keys;\n\n\n/***/ }),\n/* 163 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(17);\nvar $keys = __webpack_require__(22);\n\n__webpack_require__(65)('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 164 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _isIterable2 = __webpack_require__(165);\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = __webpack_require__(168);\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n/***/ }),\n/* 165 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(166), __esModule: true };\n\n/***/ }),\n/* 166 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(27);\n__webpack_require__(20);\nmodule.exports = __webpack_require__(167);\n\n\n/***/ }),\n/* 167 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(41);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar Iterators = __webpack_require__(15);\nmodule.exports = __webpack_require__(0).isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/***/ }),\n/* 168 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(169), __esModule: true };\n\n/***/ }),\n/* 169 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(27);\n__webpack_require__(20);\nmodule.exports = __webpack_require__(170);\n\n\n/***/ }),\n/* 170 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar get = __webpack_require__(42);\nmodule.exports = __webpack_require__(0).getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/***/ }),\n/* 171 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(172);\n\n/***/ }),\n/* 172 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar bind = __webpack_require__(72);\nvar Axios = __webpack_require__(173);\nvar mergeConfig = __webpack_require__(78);\nvar defaults = __webpack_require__(75);\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = __webpack_require__(79);\naxios.CancelToken = __webpack_require__(186);\naxios.isCancel = __webpack_require__(74);\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = __webpack_require__(187);\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n/***/ }),\n/* 173 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar buildURL = __webpack_require__(73);\nvar InterceptorManager = __webpack_require__(174);\nvar dispatchRequest = __webpack_require__(175);\nvar mergeConfig = __webpack_require__(78);\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n/***/ }),\n/* 174 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n/***/ }),\n/* 175 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar transformData = __webpack_require__(176);\nvar isCancel = __webpack_require__(74);\nvar defaults = __webpack_require__(75);\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n/***/ }),\n/* 176 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n/***/ }),\n/* 177 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n/***/ }),\n/* 178 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar createError = __webpack_require__(77);\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n\n\n/***/ }),\n/* 179 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n\n\n/***/ }),\n/* 180 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isAbsoluteURL = __webpack_require__(181);\nvar combineURLs = __webpack_require__(182);\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n\n\n/***/ }),\n/* 181 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n/***/ }),\n/* 182 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n\n\n/***/ }),\n/* 183 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n\n\n/***/ }),\n/* 184 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n\n\n/***/ }),\n/* 185 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n\n\n/***/ }),\n/* 186 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Cancel = __webpack_require__(79);\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n/***/ }),\n/* 187 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n/***/ }),\n/* 188 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      getRef = _ref.getRef,\n      onClick = _ref.onClick,\n      onMouseDown = _ref.onMouseDown,\n      text = _ref.text,\n      isLoading = _ref.isLoading;\n  return _react2.default.createElement(\n    \"button\",\n    {\n      ref: function ref(el) {\n        return getRef && getRef(el);\n      },\n      className: \"gt-btn \" + className,\n      onClick: onClick,\n      onMouseDown: onMouseDown },\n    _react2.default.createElement(\n      \"span\",\n      { className: \"gt-btn-text\" },\n      text\n    ),\n    isLoading && _react2.default.createElement(\"span\", { className: \"gt-btn-loading gt-spinner\" })\n  );\n};\n\n/***/ }),\n/* 189 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      onClick = _ref.onClick,\n      text = _ref.text;\n  return _react2.default.createElement(\n    \"a\",\n    { className: \"gt-action \" + className, onClick: onClick },\n    _react2.default.createElement(\n      \"span\",\n      { className: \"gt-action-text\" },\n      text\n    )\n  );\n};\n\n/***/ }),\n/* 190 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(64);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(66);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(70);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _avatar = __webpack_require__(80);\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nvar _svg = __webpack_require__(81);\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _distance_in_words_to_now = __webpack_require__(199);\n\nvar _distance_in_words_to_now2 = _interopRequireDefault(_distance_in_words_to_now);\n\nvar _index = __webpack_require__(212);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(213);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _index5 = __webpack_require__(214);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _index7 = __webpack_require__(215);\n\nvar _index8 = _interopRequireDefault(_index7);\n\nvar _index9 = __webpack_require__(216);\n\nvar _index10 = _interopRequireDefault(_index9);\n\n__webpack_require__(217);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ZHCN = (0, _index2.default)();\nvar ZHTW = (0, _index4.default)();\nvar ES = (0, _index6.default)();\nvar FR = (0, _index8.default)();\nvar RU = (0, _index10.default)();\n\nif (typeof window !== 'undefined') {\n  window.GT_i18n_distanceInWordsLocaleMap = {\n    zh: ZHCN,\n    'zh-CN': ZHCN,\n    'zh-TW': ZHTW,\n    'es-ES': ES,\n    fr: FR,\n    ru: RU\n  };\n}\n\nvar Comment = function (_Component) {\n  (0, _inherits3.default)(Comment, _Component);\n\n  function Comment() {\n    (0, _classCallCheck3.default)(this, Comment);\n    return (0, _possibleConstructorReturn3.default)(this, (Comment.__proto__ || (0, _getPrototypeOf2.default)(Comment)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Comment, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var comment = this.node;\n      var emailResponse = comment.querySelector('.email-hidden-toggle>a');\n      if (emailResponse) {\n        emailResponse.addEventListener('click', function (e) {\n          e.preventDefault();\n          comment.querySelector('.email-hidden-reply').classList.toggle('expanded');\n        }, true);\n      }\n    }\n  }, {\n    key: 'handleImageErrored',\n    value: function handleImageErrored(obj) {\n      obj.target.src = \"https://cdn.jsdelivr.net/npm/gitalk@1/src/assets/icon/github.svg\";\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          comment = _props.comment,\n          user = _props.user,\n          language = _props.language,\n          _props$commentedText = _props.commentedText,\n          commentedText = _props$commentedText === undefined ? '' : _props$commentedText,\n          _props$admin = _props.admin,\n          admin = _props$admin === undefined ? [] : _props$admin,\n          replyCallback = _props.replyCallback,\n          likeCallback = _props.likeCallback;\n\n      var enableEdit = user && comment.user.login === user.login;\n      var isAdmin = ~[].concat(admin).map(function (a) {\n        return a.toLowerCase();\n      }).indexOf(comment.user.login.toLowerCase());\n      var reactions = comment.reactions;\n\n      var reactionTotalCount = '';\n      if (reactions && reactions.totalCount) {\n        reactionTotalCount = reactions.totalCount;\n        if (reactions.totalCount === 100 && reactions.pageInfo && reactions.pageInfo.hasNextPage) {\n          reactionTotalCount = '100+';\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { ref: function ref(node) {\n            _this2.node = node;\n          }, className: 'gt-comment ' + (isAdmin ? 'gt-comment-admin' : '') },\n        _react2.default.createElement(_avatar2.default, {\n          className: 'gt-comment-avatar',\n          src: comment.user && comment.user.avatar_url,\n          alt: comment.user && comment.user.login,\n          onError: this.handleImageErrored.bind(this)\n        }),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-comment-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-comment-header' },\n            _react2.default.createElement('div', { className: 'gt-comment-block-' + (user ? '2' : '1') }),\n            _react2.default.createElement(\n              'a',\n              {\n                className: 'gt-comment-username',\n                href: comment.user && comment.user.html_url\n              },\n              comment.user && comment.user.login\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-comment-text' },\n              commentedText\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-comment-date' },\n              (0, _distance_in_words_to_now2.default)(comment.created_at, {\n                addSuffix: true,\n                locale: {\n                  distanceInWords: window.GT_i18n_distanceInWordsLocaleMap[language]\n                }\n              })\n            ),\n            reactions && _react2.default.createElement(\n              'a',\n              { className: 'gt-comment-like', title: 'Like', onClick: likeCallback },\n              reactions.viewerHasReacted ? _react2.default.createElement(_svg2.default, {\n                className: 'gt-ico-heart',\n                name: 'heart_on',\n                text: reactionTotalCount\n              }) : _react2.default.createElement(_svg2.default, {\n                className: 'gt-ico-heart',\n                name: 'heart',\n                text: reactionTotalCount\n              })\n            ),\n            enableEdit ? _react2.default.createElement(\n              'a',\n              {\n                href: comment.html_url,\n                className: 'gt-comment-edit',\n                title: 'Edit',\n                target: '_blank'\n              },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-edit', name: 'edit' })\n            ) : _react2.default.createElement(\n              'a',\n              { className: 'gt-comment-reply', title: 'Reply', onClick: replyCallback },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-reply', name: 'reply' })\n            )\n          ),\n          _react2.default.createElement('div', {\n            className: 'gt-comment-body markdown-body',\n            dangerouslySetInnerHTML: {\n              __html: comment.body_html\n            }\n          })\n        )\n      );\n    }\n  }]);\n  return Comment;\n}(_react.Component);\n\nexports.default = Comment;\n\n/***/ }),\n/* 191 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./arrow_down.svg\": 192,\n\t\"./edit.svg\": 193,\n\t\"./github.svg\": 194,\n\t\"./heart.svg\": 195,\n\t\"./heart_on.svg\": 196,\n\t\"./reply.svg\": 197,\n\t\"./tip.svg\": 198\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 191;\n\n/***/ }),\n/* 192 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"1619\\\"><path d=\\\"M511.872 676.8c-0.003 0-0.006 0-0.008 0-9.137 0-17.379-3.829-23.21-9.97l-251.277-265.614c-5.415-5.72-8.743-13.464-8.744-21.984 0-17.678 14.33-32.008 32.008-32.008 9.157 0 17.416 3.845 23.25 10.009l228.045 241.103 228.224-241.088c5.855-6.165 14.113-10.001 23.266-10.001 8.516 0 16.256 3.32 21.998 8.736 12.784 12.145 13.36 32.434 1.264 45.233l-251.52 265.6c-5.844 6.155-14.086 9.984-23.223 9.984-0.025 0-0.051 0-0.076 0z\\\" p-id=\\\"1620\\\"></path></svg>\"\n\n/***/ }),\n/* 193 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M785.333333 85.333333C774.666667 85.333333 763.2 90.133333 754.666667 98.666667L682.666667 170.666667 853.333333 341.333333 925.333333 269.333333C942.4 252.266667 942.4 222.133333 925.333333 209.333333L814.666667 98.666667C806.133333 90.133333 796 85.333333 785.333333 85.333333zM640 217.333333 85.333333 768 85.333333 938.666667 256 938.666667 806.666667 384 640 217.333333z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 194 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 195 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n  <path d=\\\"M527.061333 166.528A277.333333 277.333333 0 0 1 1000.618667 362.666667a277.333333 277.333333 0 0 1-81.28 196.138666l-377.173334 377.173334a42.666667 42.666667 0 0 1-60.330666 0l-377.173334-377.173334a277.376 277.376 0 0 1 392.277334-392.277333l15.061333 15.061333 15.061333-15.061333z m286.72 377.173333l45.226667-45.226666a192 192 0 0 0-135.808-327.893334 192 192 0 0 0-135.808 56.32l-45.226667 45.226667a42.666667 42.666667 0 0 1-60.330666 0l-45.226667-45.226667a192.042667 192.042667 0 0 0-271.616 271.573334L512 845.482667l301.781333-301.781334z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 196 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg t=\\\"1512463363724\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n  <path d=\\\"M527.061333 166.528A277.333333 277.333333 0 0 1 1000.618667 362.666667a277.333333 277.333333 0 0 1-81.28 196.138666l-377.173334 377.173334a42.666667 42.666667 0 0 1-60.330666 0l-377.173334-377.173334a277.376 277.376 0 0 1 392.277334-392.277333l15.061333 15.061333 15.061333-15.061333z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 197 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1332 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M529.066665 273.066666 529.066665 0 51.2 477.866666 529.066665 955.733335 529.066665 675.84C870.4 675.84 1109.333335 785.066665 1280 1024 1211.733335 682.666665 1006.933335 341.333334 529.066665 273.066666\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 198 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z\\\"\\n    p-id=\\\"3083\\\"></path>\\n  <path d=\\\"M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z\\\"\\n    p-id=\\\"3084\\\"></path>\\n  <path d=\\\"M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z\\\"\\n    p-id=\\\"3085\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 199 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distanceInWords = __webpack_require__(200)\n\n/**\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * @param {Date|String|Number} date - the given date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result specifies if the second date is earlier or later than the first\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the distance in words\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * var result = distanceInWordsToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * var result = distanceInWordsToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * var result = distanceInWordsToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * var eoLocale = require('date-fns/locale/eo')\n * var result = distanceInWordsToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nfunction distanceInWordsToNow (dirtyDate, dirtyOptions) {\n  return distanceInWords(Date.now(), dirtyDate, dirtyOptions)\n}\n\nmodule.exports = distanceInWordsToNow\n\n\n/***/ }),\n/* 200 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar compareDesc = __webpack_require__(201)\nvar parse = __webpack_require__(18)\nvar differenceInSeconds = __webpack_require__(203)\nvar differenceInMonths = __webpack_require__(205)\nvar enLocale = __webpack_require__(208)\n\nvar MINUTES_IN_DAY = 1440\nvar MINUTES_IN_ALMOST_TWO_DAYS = 2520\nvar MINUTES_IN_MONTH = 43200\nvar MINUTES_IN_TWO_MONTHS = 86400\n\n/**\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @param {Date|String|Number} dateToCompare - the date to compare with\n * @param {Date|String|Number} date - the other date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the distance in words\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * var result = distanceInWords(\n *   new Date(2014, 6, 2),\n *   new Date(2015, 0, 1)\n * )\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * var result = distanceInWords(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * var result = distanceInWords(\n *   new Date(2016, 0, 1),\n *   new Date(2015, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * var eoLocale = require('date-fns/locale/eo')\n * var result = distanceInWords(\n *   new Date(2016, 7, 1),\n *   new Date(2015, 0, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nfunction distanceInWords (dirtyDateToCompare, dirtyDate, dirtyOptions) {\n  var options = dirtyOptions || {}\n\n  var comparison = compareDesc(dirtyDateToCompare, dirtyDate)\n\n  var locale = options.locale\n  var localize = enLocale.distanceInWords.localize\n  if (locale && locale.distanceInWords && locale.distanceInWords.localize) {\n    localize = locale.distanceInWords.localize\n  }\n\n  var localizeOptions = {\n    addSuffix: Boolean(options.addSuffix),\n    comparison: comparison\n  }\n\n  var dateLeft, dateRight\n  if (comparison > 0) {\n    dateLeft = parse(dirtyDateToCompare)\n    dateRight = parse(dirtyDate)\n  } else {\n    dateLeft = parse(dirtyDate)\n    dateRight = parse(dirtyDateToCompare)\n  }\n\n  var seconds = differenceInSeconds(dateRight, dateLeft)\n  var offset = dateRight.getTimezoneOffset() - dateLeft.getTimezoneOffset()\n  var minutes = Math.round(seconds / 60) - offset\n  var months\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options.includeSeconds) {\n      if (seconds < 5) {\n        return localize('lessThanXSeconds', 5, localizeOptions)\n      } else if (seconds < 10) {\n        return localize('lessThanXSeconds', 10, localizeOptions)\n      } else if (seconds < 20) {\n        return localize('lessThanXSeconds', 20, localizeOptions)\n      } else if (seconds < 40) {\n        return localize('halfAMinute', null, localizeOptions)\n      } else if (seconds < 60) {\n        return localize('lessThanXMinutes', 1, localizeOptions)\n      } else {\n        return localize('xMinutes', 1, localizeOptions)\n      }\n    } else {\n      if (minutes === 0) {\n        return localize('lessThanXMinutes', 1, localizeOptions)\n      } else {\n        return localize('xMinutes', minutes, localizeOptions)\n      }\n    }\n\n  // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return localize('xMinutes', minutes, localizeOptions)\n\n  // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return localize('aboutXHours', 1, localizeOptions)\n\n  // 1.5 hrs up to 24 hrs\n  } else if (minutes < MINUTES_IN_DAY) {\n    var hours = Math.round(minutes / 60)\n    return localize('aboutXHours', hours, localizeOptions)\n\n  // 1 day up to 1.75 days\n  } else if (minutes < MINUTES_IN_ALMOST_TWO_DAYS) {\n    return localize('xDays', 1, localizeOptions)\n\n  // 1.75 days up to 30 days\n  } else if (minutes < MINUTES_IN_MONTH) {\n    var days = Math.round(minutes / MINUTES_IN_DAY)\n    return localize('xDays', days, localizeOptions)\n\n  // 1 month up to 2 months\n  } else if (minutes < MINUTES_IN_TWO_MONTHS) {\n    months = Math.round(minutes / MINUTES_IN_MONTH)\n    return localize('aboutXMonths', months, localizeOptions)\n  }\n\n  months = differenceInMonths(dateRight, dateLeft)\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    var nearestMonth = Math.round(minutes / MINUTES_IN_MONTH)\n    return localize('xMonths', nearestMonth, localizeOptions)\n\n  // 1 year up to max Date\n  } else {\n    var monthsSinceStartOfYear = months % 12\n    var years = Math.floor(months / 12)\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return localize('aboutXYears', years, localizeOptions)\n\n    // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return localize('overXYears', years, localizeOptions)\n\n    // N years 9 months up to N year 12 months\n    } else {\n      return localize('almostXYears', years + 1, localizeOptions)\n    }\n  }\n}\n\nmodule.exports = distanceInWords\n\n\n/***/ }),\n/* 201 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Common Helpers\n * @summary Compare the two dates reverse chronologically and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return -1 if the first date is after the second,\n * 1 if the first date is before the second or 0 if dates are equal.\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989 reverse chronologically:\n * var result = compareDesc(\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * )\n * //=> 1\n *\n * @example\n * // Sort the array of dates in reverse chronological order:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareDesc)\n * //=> [\n * //   Sun Jul 02 1995 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Wed Feb 11 1987 00:00:00\n * // ]\n */\nfunction compareDesc (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var timeLeft = dateLeft.getTime()\n  var dateRight = parse(dirtyDateRight)\n  var timeRight = dateRight.getTime()\n\n  if (timeLeft > timeRight) {\n    return -1\n  } else if (timeLeft < timeRight) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nmodule.exports = compareDesc\n\n\n/***/ }),\n/* 202 */\n/***/ (function(module, exports) {\n\n/**\n * @category Common Helpers\n * @summary Is the given argument an instance of Date?\n *\n * @description\n * Is the given argument an instance of Date?\n *\n * @param {*} argument - the argument to check\n * @returns {Boolean} the given argument is an instance of Date\n *\n * @example\n * // Is 'mayonnaise' a Date?\n * var result = isDate('mayonnaise')\n * //=> false\n */\nfunction isDate (argument) {\n  return argument instanceof Date\n}\n\nmodule.exports = isDate\n\n\n/***/ }),\n/* 203 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar differenceInMilliseconds = __webpack_require__(204)\n\n/**\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * var result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nfunction differenceInSeconds (dirtyDateLeft, dirtyDateRight) {\n  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / 1000\n  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)\n}\n\nmodule.exports = differenceInSeconds\n\n\n/***/ }),\n/* 204 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * var result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nfunction differenceInMilliseconds (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n  return dateLeft.getTime() - dateRight.getTime()\n}\n\nmodule.exports = differenceInMilliseconds\n\n\n/***/ }),\n/* 205 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\nvar differenceInCalendarMonths = __webpack_require__(206)\nvar compareAsc = __webpack_require__(207)\n\n/**\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @description\n * Get the number of full months between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 7\n */\nfunction differenceInMonths (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n\n  var sign = compareAsc(dateLeft, dateRight)\n  var difference = Math.abs(differenceInCalendarMonths(dateLeft, dateRight))\n  dateLeft.setMonth(dateLeft.getMonth() - sign * difference)\n\n  // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full\n  // If so, result must be decreased by 1 in absolute value\n  var isLastMonthNotFull = compareAsc(dateLeft, dateRight) === -sign\n  return sign * (difference - isLastMonthNotFull)\n}\n\nmodule.exports = differenceInMonths\n\n\n/***/ }),\n/* 206 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar months\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\nfunction differenceInCalendarMonths (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n\n  var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear()\n  var monthDiff = dateLeft.getMonth() - dateRight.getMonth()\n\n  return yearDiff * 12 + monthDiff\n}\n\nmodule.exports = differenceInCalendarMonths\n\n\n/***/ }),\n/* 207 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * )\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nfunction compareAsc (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var timeLeft = dateLeft.getTime()\n  var dateRight = parse(dirtyDateRight)\n  var timeRight = dateRight.getTime()\n\n  if (timeLeft < timeRight) {\n    return -1\n  } else if (timeLeft > timeRight) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nmodule.exports = compareAsc\n\n\n/***/ }),\n/* 208 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar buildDistanceInWordsLocale = __webpack_require__(209)\nvar buildFormatLocale = __webpack_require__(210)\n\n/**\n * @category Locales\n * @summary English locale.\n */\nmodule.exports = {\n  distanceInWords: buildDistanceInWordsLocale(),\n  format: buildFormatLocale()\n}\n\n\n/***/ }),\n/* 209 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'less than a second',\n      other: 'less than {{count}} seconds'\n    },\n\n    xSeconds: {\n      one: '1 second',\n      other: '{{count}} seconds'\n    },\n\n    halfAMinute: 'half a minute',\n\n    lessThanXMinutes: {\n      one: 'less than a minute',\n      other: 'less than {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'about 1 hour',\n      other: 'about {{count}} hours'\n    },\n\n    xHours: {\n      one: '1 hour',\n      other: '{{count}} hours'\n    },\n\n    xDays: {\n      one: '1 day',\n      other: '{{count}} days'\n    },\n\n    aboutXMonths: {\n      one: 'about 1 month',\n      other: 'about {{count}} months'\n    },\n\n    xMonths: {\n      one: '1 month',\n      other: '{{count}} months'\n    },\n\n    aboutXYears: {\n      one: 'about 1 year',\n      other: 'about {{count}} years'\n    },\n\n    xYears: {\n      one: '1 year',\n      other: '{{count}} years'\n    },\n\n    overXYears: {\n      one: 'over 1 year',\n      other: 'over {{count}} years'\n    },\n\n    almostXYears: {\n      one: 'almost 1 year',\n      other: 'almost {{count}} years'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'in ' + result\n      } else {\n        return result + ' ago'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 210 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar buildFormattingTokensRegExp = __webpack_require__(211)\n\nfunction buildFormatLocale () {\n  // Note: in English, the names of days of the week and months are capitalized.\n  // If you are making a new locale based on this one, check if the same is true for the language you're working on.\n  // Generally, formatted dates should look like they are in the middle of a sentence,\n  // e.g. in Spanish language the weekdays and months should be in the lowercase.\n  var months3char = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  var monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n  var weekdays2char = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']\n  var weekdays3char = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  var weekdaysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n  var meridiemUppercase = ['AM', 'PM']\n  var meridiemLowercase = ['am', 'pm']\n  var meridiemFull = ['a.m.', 'p.m.']\n\n  var formatters = {\n    // Month: Jan, Feb, ..., Dec\n    'MMM': function (date) {\n      return months3char[date.getMonth()]\n    },\n\n    // Month: January, February, ..., December\n    'MMMM': function (date) {\n      return monthsFull[date.getMonth()]\n    },\n\n    // Day of week: Su, Mo, ..., Sa\n    'dd': function (date) {\n      return weekdays2char[date.getDay()]\n    },\n\n    // Day of week: Sun, Mon, ..., Sat\n    'ddd': function (date) {\n      return weekdays3char[date.getDay()]\n    },\n\n    // Day of week: Sunday, Monday, ..., Saturday\n    'dddd': function (date) {\n      return weekdaysFull[date.getDay()]\n    },\n\n    // AM, PM\n    'A': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemUppercase[1] : meridiemUppercase[0]\n    },\n\n    // am, pm\n    'a': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemLowercase[1] : meridiemLowercase[0]\n    },\n\n    // a.m., p.m.\n    'aa': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemFull[1] : meridiemFull[0]\n    }\n  }\n\n  // Generate ordinal version of formatters: M -> Mo, D -> Do, etc.\n  var ordinalFormatters = ['M', 'D', 'DDD', 'd', 'Q', 'W']\n  ordinalFormatters.forEach(function (formatterToken) {\n    formatters[formatterToken + 'o'] = function (date, formatters) {\n      return ordinal(formatters[formatterToken](date))\n    }\n  })\n\n  return {\n    formatters: formatters,\n    formattingTokensRegExp: buildFormattingTokensRegExp(formatters)\n  }\n}\n\nfunction ordinal (number) {\n  var rem100 = number % 100\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st'\n      case 2:\n        return number + 'nd'\n      case 3:\n        return number + 'rd'\n    }\n  }\n  return number + 'th'\n}\n\nmodule.exports = buildFormatLocale\n\n\n/***/ }),\n/* 211 */\n/***/ (function(module, exports) {\n\nvar commonFormatterKeys = [\n  'M', 'MM', 'Q', 'D', 'DD', 'DDD', 'DDDD', 'd',\n  'E', 'W', 'WW', 'YY', 'YYYY', 'GG', 'GGGG',\n  'H', 'HH', 'h', 'hh', 'm', 'mm',\n  's', 'ss', 'S', 'SS', 'SSS',\n  'Z', 'ZZ', 'X', 'x'\n]\n\nfunction buildFormattingTokensRegExp (formatters) {\n  var formatterKeys = []\n  for (var key in formatters) {\n    if (formatters.hasOwnProperty(key)) {\n      formatterKeys.push(key)\n    }\n  }\n\n  var formattingTokens = commonFormatterKeys\n    .concat(formatterKeys)\n    .sort()\n    .reverse()\n  var formattingTokensRegExp = new RegExp(\n    '(\\\\[[^\\\\[]*\\\\])|(\\\\\\\\)?' + '(' + formattingTokens.join('|') + '|.)', 'g'\n  )\n\n  return formattingTokensRegExp\n}\n\nmodule.exports = buildFormattingTokensRegExp\n\n\n/***/ }),\n/* 212 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: '不到 1 秒',\n      other: '不到 {{count}} 秒'\n    },\n\n    xSeconds: {\n      one: '1 秒',\n      other: '{{count}} 秒'\n    },\n\n    halfAMinute: '半分钟',\n\n    lessThanXMinutes: {\n      one: '不到 1 分钟',\n      other: '不到 {{count}} 分钟'\n    },\n\n    xMinutes: {\n      one: '1 分钟',\n      other: '{{count}} 分钟'\n    },\n\n    xHours: {\n      one: '1 小时',\n      other: '{{count}} 小时'\n    },\n\n    aboutXHours: {\n      one: '大约 1 小时',\n      other: '大约 {{count}} 小时'\n    },\n\n    xDays: {\n      one: '1 天',\n      other: '{{count}} 天'\n    },\n\n    aboutXMonths: {\n      one: '大约 1 个月',\n      other: '大约 {{count}} 个月'\n    },\n\n    xMonths: {\n      one: '1 个月',\n      other: '{{count}} 个月'\n    },\n\n    aboutXYears: {\n      one: '大约 1 年',\n      other: '大约 {{count}} 年'\n    },\n\n    xYears: {\n      one: '1 年',\n      other: '{{count}} 年'\n    },\n\n    overXYears: {\n      one: '超过 1 年',\n      other: '超过 {{count}} 年'\n    },\n\n    almostXYears: {\n      one: '将近 1 年',\n      other: '将近 {{count}} 年'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return result + '内'\n      } else {\n        return result + '前'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 213 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: '少於 1 秒',\n      other: '少於 {{count}} 秒'\n    },\n\n    xSeconds: {\n      one: '1 秒',\n      other: '{{count}} 秒'\n    },\n\n    halfAMinute: '半分鐘',\n\n    lessThanXMinutes: {\n      one: '少於 1 分鐘',\n      other: '少於 {{count}} 分鐘'\n    },\n\n    xMinutes: {\n      one: '1 分鐘',\n      other: '{{count}} 分鐘'\n    },\n\n    xHours: {\n      one: '1 小時',\n      other: '{{count}} 小時'\n    },\n\n    aboutXHours: {\n      one: '大約 1 小時',\n      other: '大約 {{count}} 小時'\n    },\n\n    xDays: {\n      one: '1 天',\n      other: '{{count}} 天'\n    },\n\n    aboutXMonths: {\n      one: '大約 1 個月',\n      other: '大約 {{count}} 個月'\n    },\n\n    xMonths: {\n      one: '1 個月',\n      other: '{{count}} 個月'\n    },\n\n    aboutXYears: {\n      one: '大約 1 年',\n      other: '大約 {{count}} 年'\n    },\n\n    xYears: {\n      one: '1 年',\n      other: '{{count}} 年'\n    },\n\n    overXYears: {\n      one: '超過 1 年',\n      other: '超過 {{count}} 年'\n    },\n\n    almostXYears: {\n      one: '將近 1 年',\n      other: '將近 {{count}} 年'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return result + '內'\n      } else {\n        return result + '前'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 214 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'menos de un segundo',\n      other: 'menos de {{count}} segundos'\n    },\n\n    xSeconds: {\n      one: '1 segundo',\n      other: '{{count}} segundos'\n    },\n\n    halfAMinute: 'medio minuto',\n\n    lessThanXMinutes: {\n      one: 'menos de un minuto',\n      other: 'menos de {{count}} minutos'\n    },\n\n    xMinutes: {\n      one: '1 minuto',\n      other: '{{count}} minutos'\n    },\n\n    aboutXHours: {\n      one: 'alrededor de 1 hora',\n      other: 'alrededor de {{count}} horas'\n    },\n\n    xHours: {\n      one: '1 hora',\n      other: '{{count}} horas'\n    },\n\n    xDays: {\n      one: '1 día',\n      other: '{{count}} días'\n    },\n\n    aboutXMonths: {\n      one: 'alrededor de 1 mes',\n      other: 'alrededor de {{count}} meses'\n    },\n\n    xMonths: {\n      one: '1 mes',\n      other: '{{count}} meses'\n    },\n\n    aboutXYears: {\n      one: 'alrededor de 1 año',\n      other: 'alrededor de {{count}} años'\n    },\n\n    xYears: {\n      one: '1 año',\n      other: '{{count}} años'\n    },\n\n    overXYears: {\n      one: 'más de 1 año',\n      other: 'más de {{count}} años'\n    },\n\n    almostXYears: {\n      one: 'casi 1 año',\n      other: 'casi {{count}} años'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'en ' + result\n      } else {\n        return 'hace ' + result\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 215 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'moins d’une seconde',\n      other: 'moins de {{count}} secondes'\n    },\n\n    xSeconds: {\n      one: '1 seconde',\n      other: '{{count}} secondes'\n    },\n\n    halfAMinute: '30 secondes',\n\n    lessThanXMinutes: {\n      one: 'moins d’une minute',\n      other: 'moins de {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'environ 1 heure',\n      other: 'environ {{count}} heures'\n    },\n\n    xHours: {\n      one: '1 heure',\n      other: '{{count}} heures'\n    },\n\n    xDays: {\n      one: '1 jour',\n      other: '{{count}} jours'\n    },\n\n    aboutXMonths: {\n      one: 'environ 1 mois',\n      other: 'environ {{count}} mois'\n    },\n\n    xMonths: {\n      one: '1 mois',\n      other: '{{count}} mois'\n    },\n\n    aboutXYears: {\n      one: 'environ 1 an',\n      other: 'environ {{count}} ans'\n    },\n\n    xYears: {\n      one: '1 an',\n      other: '{{count}} ans'\n    },\n\n    overXYears: {\n      one: 'plus d’un an',\n      other: 'plus de {{count}} ans'\n    },\n\n    almostXYears: {\n      one: 'presqu’un an',\n      other: 'presque {{count}} ans'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'dans ' + result\n      } else {\n        return 'il y a ' + result\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 216 */\n/***/ (function(module, exports) {\n\nfunction declension (scheme, count) {\n  // scheme for count=1 exists\n  if (scheme.one !== undefined && count === 1) {\n    return scheme.one\n  }\n\n  var rem10 = count % 10\n  var rem100 = count % 100\n\n  // 1, 21, 31, ...\n  if (rem10 === 1 && rem100 !== 11) {\n    return scheme.singularNominative.replace('{{count}}', count)\n\n  // 2, 3, 4, 22, 23, 24, 32 ...\n  } else if ((rem10 >= 2 && rem10 <= 4) && (rem100 < 10 || rem100 > 20)) {\n    return scheme.singularGenitive.replace('{{count}}', count)\n\n  // 5, 6, 7, 8, 9, 10, 11, ...\n  } else {\n    return scheme.pluralGenitive.replace('{{count}}', count)\n  }\n}\n\nfunction buildLocalizeTokenFn (scheme) {\n  return function (count, options) {\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        if (scheme.future) {\n          return declension(scheme.future, count)\n        } else {\n          return 'через ' + declension(scheme.regular, count)\n        }\n      } else {\n        if (scheme.past) {\n          return declension(scheme.past, count)\n        } else {\n          return declension(scheme.regular, count) + ' назад'\n        }\n      }\n    } else {\n      return declension(scheme.regular, count)\n    }\n  }\n}\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: buildLocalizeTokenFn({\n      regular: {\n        one: 'меньше секунды',\n        singularNominative: 'меньше {{count}} секунды',\n        singularGenitive: 'меньше {{count}} секунд',\n        pluralGenitive: 'меньше {{count}} секунд'\n      },\n      future: {\n        one: 'меньше, чем через секунду',\n        singularNominative: 'меньше, чем через {{count}} секунду',\n        singularGenitive: 'меньше, чем через {{count}} секунды',\n        pluralGenitive: 'меньше, чем через {{count}} секунд'\n      }\n    }),\n\n    xSeconds: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} секунда',\n        singularGenitive: '{{count}} секунды',\n        pluralGenitive: '{{count}} секунд'\n      },\n      past: {\n        singularNominative: '{{count}} секунду назад',\n        singularGenitive: '{{count}} секунды назад',\n        pluralGenitive: '{{count}} секунд назад'\n      },\n      future: {\n        singularNominative: 'через {{count}} секунду',\n        singularGenitive: 'через {{count}} секунды',\n        pluralGenitive: 'через {{count}} секунд'\n      }\n    }),\n\n    halfAMinute: function (_, options) {\n      if (options.addSuffix) {\n        if (options.comparison > 0) {\n          return 'через полминуты'\n        } else {\n          return 'полминуты назад'\n        }\n      }\n\n      return 'полминуты'\n    },\n\n    lessThanXMinutes: buildLocalizeTokenFn({\n      regular: {\n        one: 'меньше минуты',\n        singularNominative: 'меньше {{count}} минуты',\n        singularGenitive: 'меньше {{count}} минут',\n        pluralGenitive: 'меньше {{count}} минут'\n      },\n      future: {\n        one: 'меньше, чем через минуту',\n        singularNominative: 'меньше, чем через {{count}} минуту',\n        singularGenitive: 'меньше, чем через {{count}} минуты',\n        pluralGenitive: 'меньше, чем через {{count}} минут'\n      }\n    }),\n\n    xMinutes: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} минута',\n        singularGenitive: '{{count}} минуты',\n        pluralGenitive: '{{count}} минут'\n      },\n      past: {\n        singularNominative: '{{count}} минуту назад',\n        singularGenitive: '{{count}} минуты назад',\n        pluralGenitive: '{{count}} минут назад'\n      },\n      future: {\n        singularNominative: 'через {{count}} минуту',\n        singularGenitive: 'через {{count}} минуты',\n        pluralGenitive: 'через {{count}} минут'\n      }\n    }),\n\n    aboutXHours: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} часа',\n        singularGenitive: 'около {{count}} часов',\n        pluralGenitive: 'около {{count}} часов'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} час',\n        singularGenitive: 'приблизительно через {{count}} часа',\n        pluralGenitive: 'приблизительно через {{count}} часов'\n      }\n    }),\n\n    xHours: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} час',\n        singularGenitive: '{{count}} часа',\n        pluralGenitive: '{{count}} часов'\n      }\n    }),\n\n    xDays: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} день',\n        singularGenitive: '{{count}} дня',\n        pluralGenitive: '{{count}} дней'\n      }\n    }),\n\n    aboutXMonths: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} месяца',\n        singularGenitive: 'около {{count}} месяцев',\n        pluralGenitive: 'около {{count}} месяцев'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} месяц',\n        singularGenitive: 'приблизительно через {{count}} месяца',\n        pluralGenitive: 'приблизительно через {{count}} месяцев'\n      }\n    }),\n\n    xMonths: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} месяц',\n        singularGenitive: '{{count}} месяца',\n        pluralGenitive: '{{count}} месяцев'\n      }\n    }),\n\n    aboutXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} года',\n        singularGenitive: 'около {{count}} лет',\n        pluralGenitive: 'около {{count}} лет'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} год',\n        singularGenitive: 'приблизительно через {{count}} года',\n        pluralGenitive: 'приблизительно через {{count}} лет'\n      }\n    }),\n\n    xYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} год',\n        singularGenitive: '{{count}} года',\n        pluralGenitive: '{{count}} лет'\n      }\n    }),\n\n    overXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'больше {{count}} года',\n        singularGenitive: 'больше {{count}} лет',\n        pluralGenitive: 'больше {{count}} лет'\n      },\n      future: {\n        singularNominative: 'больше, чем через {{count}} год',\n        singularGenitive: 'больше, чем через {{count}} года',\n        pluralGenitive: 'больше, чем через {{count}} лет'\n      }\n    }),\n\n    almostXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'почти {{count}} год',\n        singularGenitive: 'почти {{count}} года',\n        pluralGenitive: 'почти {{count}} лет'\n      },\n      future: {\n        singularNominative: 'почти через {{count}} год',\n        singularGenitive: 'почти через {{count}} года',\n        pluralGenitive: 'почти через {{count}} лет'\n      }\n    })\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n    return distanceInWordsLocale[token](count, options)\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 217 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 218 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar GT_ACCESS_TOKEN = exports.GT_ACCESS_TOKEN = 'GT_ACCESS_TOKEN';\nvar GT_VERSION = exports.GT_VERSION = \"1.6.2\"; // eslint-disable-line\nvar GT_COMMENT = exports.GT_COMMENT = 'GT_COMMENT';\n\n/***/ }),\n/* 219 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _toConsumableArray2 = __webpack_require__(220);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _util = __webpack_require__(71);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getQL = function getQL(vars, pagerDirection) {\n  var cursorDirection = pagerDirection === 'last' ? 'before' : 'after';\n  var ql = '\\n  query getIssueAndComments(\\n    $owner: String!,\\n    $repo: String!,\\n    $id: Int!,\\n    $cursor: String,\\n    $pageSize: Int!\\n  ) {\\n    repository(owner: $owner, name: $repo) {\\n      issue(number: $id) {\\n        title\\n        url\\n        bodyHTML\\n        createdAt\\n        comments(' + pagerDirection + ': $pageSize, ' + cursorDirection + ': $cursor) {\\n          totalCount\\n          pageInfo {\\n            ' + (pagerDirection === 'last' ? 'hasPreviousPage' : 'hasNextPage') + '\\n            ' + (cursorDirection === 'before' ? 'startCursor' : 'endCursor') + '\\n          }\\n          nodes {\\n            id\\n            databaseId\\n            author {\\n              avatarUrl\\n              login\\n              url\\n            }\\n            bodyHTML\\n            body\\n            createdAt\\n            reactions(first: 100, content: HEART) {\\n              totalCount\\n              viewerHasReacted\\n              pageInfo{\\n                hasNextPage\\n              }\\n              nodes {\\n                id\\n                databaseId\\n                user {\\n                  login\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n  ';\n\n  if (vars.cursor === null) delete vars.cursor;\n\n  return {\n    operationName: 'getIssueAndComments',\n    query: ql,\n    variables: vars\n  };\n};\n\nfunction getComments(issue) {\n  var _this = this;\n\n  var _options = this.options,\n      owner = _options.owner,\n      repo = _options.repo,\n      perPage = _options.perPage,\n      pagerDirection = _options.pagerDirection,\n      defaultAuthor = _options.defaultAuthor;\n  var _state = this.state,\n      cursor = _state.cursor,\n      comments = _state.comments;\n\n  return _util.axiosGithub.post('/graphql', getQL({\n    owner: owner,\n    repo: repo,\n    id: issue.number,\n    pageSize: perPage,\n    cursor: cursor\n  }, pagerDirection), {\n    headers: {\n      Authorization: 'bearer ' + this.accessToken\n    }\n  }).then(function (res) {\n    var data = res.data.data.repository.issue.comments;\n    var items = data.nodes.map(function (node) {\n      var author = node.author || defaultAuthor;\n\n      return {\n        id: node.databaseId,\n        gId: node.id,\n        user: {\n          avatar_url: author.avatarUrl,\n          login: author.login,\n          html_url: author.url\n        },\n        created_at: node.createdAt,\n        body_html: node.bodyHTML,\n        body: node.body,\n        html_url: 'https://github.com/' + owner + '/' + repo + '/issues/' + issue.number + '#issuecomment-' + node.databaseId,\n        reactions: node.reactions\n      };\n    });\n\n    var cs = void 0;\n\n    if (pagerDirection === 'last') {\n      cs = [].concat((0, _toConsumableArray3.default)(items), (0, _toConsumableArray3.default)(comments));\n    } else {\n      cs = [].concat((0, _toConsumableArray3.default)(comments), (0, _toConsumableArray3.default)(items));\n    }\n\n    var isLoadOver = data.pageInfo.hasPreviousPage === false || data.pageInfo.hasNextPage === false;\n    _this.setState({\n      comments: cs,\n      isLoadOver: isLoadOver,\n      cursor: data.pageInfo.startCursor || data.pageInfo.endCursor\n    });\n    return cs;\n  });\n}\n\nexports.default = getComments;\n\n/***/ }),\n/* 220 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _from = __webpack_require__(221);\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n/***/ }),\n/* 221 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(222), __esModule: true };\n\n/***/ }),\n/* 222 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(20);\n__webpack_require__(223);\nmodule.exports = __webpack_require__(0).Array.from;\n\n\n/***/ }),\n/* 223 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ctx = __webpack_require__(13);\nvar $export = __webpack_require__(4);\nvar toObject = __webpack_require__(17);\nvar call = __webpack_require__(57);\nvar isArrayIter = __webpack_require__(58);\nvar toLength = __webpack_require__(37);\nvar createProperty = __webpack_require__(224);\nvar getIterFn = __webpack_require__(42);\n\n$export($export.S + $export.F * !__webpack_require__(63)(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n/***/ }),\n/* 224 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $defineProperty = __webpack_require__(7);\nvar createDesc = __webpack_require__(19);\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=gitalk.js.map"]}]}