{"remainingRequest":"D:\\项目\\My_project\\vuepress-starter\\新建文件夹\\vuepress-starter\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\项目\\My_project\\vuepress-starter\\新建文件夹\\vuepress-starter\\node_modules\\gitalk\\dist\\gitalk.js","dependencies":[{"path":"D:\\项目\\My_project\\vuepress-starter\\新建文件夹\\vuepress-starter\\node_modules\\gitalk\\dist\\gitalk.js","mtime":1591948918348},{"path":"D:\\项目\\My_project\\vuepress-starter\\新建文件夹\\vuepress-starter\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591862511060},{"path":"D:\\项目\\My_project\\vuepress-starter\\新建文件夹\\vuepress-starter\\node_modules\\babel-loader\\lib\\index.js","mtime":1591862511204}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmV2ZXJ5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmlzLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuaXMtdmlldyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUubm93Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1pc28tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1qc29uIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5iaW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5jcmVhdGUiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LW5hbWVzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuaXMtZXh0ZW5zaWJsZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnByZXZlbnQtZXh0ZW5zaW9ucyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1jbGFtcGVkLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmltbWVkaWF0ZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uIik7Cgp2YXIgX3R5cGVvZjQgPSByZXF1aXJlKCJEOi9cdTk4NzlcdTc2RUUvTXlfcHJvamVjdC92dWVwcmVzcy1zdGFydGVyL1x1NjVCMFx1NUVGQVx1NjU4N1x1NEVGNlx1NTkzOS92dWVwcmVzcy1zdGFydGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIpOwoKKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKICBpZiAoKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZjQoZXhwb3J0cykpID09PSAnb2JqZWN0JyAmJiAodHlwZW9mIG1vZHVsZSA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Y0KG1vZHVsZSkpID09PSAnb2JqZWN0JykgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7ZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSBkZWZpbmUoW10sIGZhY3RvcnkpO2Vsc2UgaWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Y0KGV4cG9ydHMpKSA9PT0gJ29iamVjdCcpIGV4cG9ydHNbIkdpdGFsayJdID0gZmFjdG9yeSgpO2Vsc2Ugcm9vdFsiR2l0YWxrIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uICgpIHsKICByZXR1cm4gKAogICAgLyoqKioqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGVzKSB7CiAgICAgIC8vIHdlYnBhY2tCb290c3RyYXAKCiAgICAgIC8qKioqKiovCiAgICAgIC8vIFRoZSBtb2R1bGUgY2FjaGUKCiAgICAgIC8qKioqKiovCiAgICAgIHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgoKICAgICAgLyoqKioqKi8KCiAgICAgIGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHsKICAgICAgICAvKioqKioqLwoKICAgICAgICAvKioqKioqLwogICAgICAgIC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQoKICAgICAgICAvKioqKioqLwogICAgICAgIGlmIChpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkgewogICAgICAgICAgLyoqKioqKi8KICAgICAgICAgIHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwogICAgICAgICAgLyoqKioqKi8KICAgICAgICB9CiAgICAgICAgLyoqKioqKi8KICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQoKICAgICAgICAvKioqKioqLwoKCiAgICAgICAgdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewogICAgICAgICAgLyoqKioqKi8KICAgICAgICAgIGk6IG1vZHVsZUlkLAoKICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICBsOiBmYWxzZSwKCiAgICAgICAgICAvKioqKioqLwogICAgICAgICAgZXhwb3J0czoge30KICAgICAgICAgIC8qKioqKiovCgogICAgICAgIH07CiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgLyoqKioqKi8KICAgICAgICAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KCiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CiAgICAgICAgLyoqKioqKi8KCiAgICAgICAgLyoqKioqKi8KICAgICAgICAvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCgogICAgICAgIC8qKioqKiovCgogICAgICAgIG1vZHVsZS5sID0gdHJ1ZTsKICAgICAgICAvKioqKioqLwoKICAgICAgICAvKioqKioqLwogICAgICAgIC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCgogICAgICAgIC8qKioqKiovCgogICAgICAgIHJldHVybiBtb2R1bGUuZXhwb3J0czsKICAgICAgICAvKioqKioqLwogICAgICB9CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKCiAgICAgIC8qKioqKiovCgoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCgogICAgICAvKioqKioqLwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwoKICAgICAgLyoqKioqKi8KCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uIChleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHsKICAgICAgICAvKioqKioqLwogICAgICAgIGlmICghX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7CiAgICAgICAgICAvKioqKioqLwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKICAgICAgICAgICAgLyoqKioqKi8KICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKCiAgICAgICAgICAgIC8qKioqKiovCiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsCgogICAgICAgICAgICAvKioqKioqLwogICAgICAgICAgICBnZXQ6IGdldHRlcgogICAgICAgICAgICAvKioqKioqLwoKICAgICAgICAgIH0pOwogICAgICAgICAgLyoqKioqKi8KICAgICAgICB9CiAgICAgICAgLyoqKioqKi8KCiAgICAgIH07CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwoKICAgICAgLyoqKioqKi8KCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbiAobW9kdWxlKSB7CiAgICAgICAgLyoqKioqKi8KICAgICAgICB2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KICAgICAgICAvKioqKioqLwogICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7CiAgICAgICAgICByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107CiAgICAgICAgfSA6CiAgICAgICAgLyoqKioqKi8KICAgICAgICBmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgewogICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICB9OwogICAgICAgIC8qKioqKiovCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsKICAgICAgICAvKioqKioqLwoKCiAgICAgICAgcmV0dXJuIGdldHRlcjsKICAgICAgICAvKioqKioqLwogICAgICB9OwogICAgICAvKioqKioqLwoKICAgICAgLyoqKioqKi8KICAgICAgLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCgogICAgICAvKioqKioqLwoKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uIChvYmplY3QsIHByb3BlcnR5KSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsKICAgICAgfTsKICAgICAgLyoqKioqKi8KCiAgICAgIC8qKioqKiovCiAgICAgIC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCgogICAgICAvKioqKioqLwoKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18ucCA9ICIvZGlzdCI7CiAgICAgIC8qKioqKiovCgogICAgICAvKioqKioqLwogICAgICAvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKCiAgICAgIC8qKioqKiovCgogICAgICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA4Mik7CiAgICAgIC8qKioqKiovCiAgICB9KAogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvKioqKioqLwogICAgWwogICAgLyogMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIHZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgdmVyc2lvbjogJzIuNi4xMScKICAgICAgfTsKICAgICAgaWYgKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpIF9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4CiAgICAgIHZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aCA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKICAgICAgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwogICAgICBpZiAodHlwZW9mIF9fZyA9PSAnbnVtYmVyJykgX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmCgogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KSgnd2tzJyk7CgogICAgICB2YXIgdWlkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7CgogICAgICB2YXIgX1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuU3ltYm9sOwoKICAgICAgdmFyIFVTRV9TWU1CT0wgPSB0eXBlb2YgX1N5bWJvbCA9PSAnZnVuY3Rpb24nOwoKICAgICAgdmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHJldHVybiBzdG9yZVtuYW1lXSB8fCAoc3RvcmVbbmFtZV0gPSBVU0VfU1lNQk9MICYmIF9TeW1ib2xbbmFtZV0gfHwgKFVTRV9TWU1CT0wgPyBfU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7CiAgICAgIH07CgogICAgICAkZXhwb3J0cy5zdG9yZSA9IHN0b3JlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpOwogICAgICAvKmdsb2JhbCB0b1N0cmluZzp0cnVlKi8KICAgICAgLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3MKCgogICAgICB2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXkKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKICAgICAgZnVuY3Rpb24gaXNBcnJheSh2YWwpIHsKICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWQKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlcgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7CiAgICAgICAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsKSAmJiB2YWwuY29uc3RydWN0b3IgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbC5jb25zdHJ1Y3RvcikgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7CiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YQogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWwpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBGb3JtRGF0YTsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KSB7CiAgICAgICAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0ID0gdmFsICYmIHZhbC5idWZmZXIgJiYgdmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmcKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkgewogICAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXIKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkgewogICAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7CiAgICAgICAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiBfdHlwZW9mNCh2YWwpID09PSAnb2JqZWN0JzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNEYXRlKHZhbCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNGaWxlKHZhbCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCbG9iCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNCbG9iKHZhbCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJzsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvbgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHsKICAgICAgICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0CiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtczsKICAgICAgfQogICAgICAvKioKICAgICAgICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltCiAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2UKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gdHJpbShzdHIpIHsKICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15ccyovLCAnJykucmVwbGFjZSgvXHMqJC8sICcnKTsKICAgICAgfQogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50CiAgICAgICAqCiAgICAgICAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuCiAgICAgICAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy4KICAgICAgICoKICAgICAgICogd2ViIHdvcmtlcnM6CiAgICAgICAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZAogICAgICAgKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZAogICAgICAgKgogICAgICAgKiByZWFjdC1uYXRpdmU6CiAgICAgICAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnCiAgICAgICAqIG5hdGl2ZXNjcmlwdAogICAgICAgKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJwogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHsKICAgICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgKG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnIHx8IG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fCBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05TJykpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS4KICAgICAgICoKICAgICAgICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZwogICAgICAgKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS4KICAgICAgICoKICAgICAgICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmcKICAgICAgICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHsKICAgICAgICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWQKICAgICAgICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGUKCgogICAgICAgIGlmIChfdHlwZW9mNChvYmopICE9PSAnb2JqZWN0JykgewogICAgICAgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAgICAgICBvYmogPSBbb2JqXTsKICAgICAgICB9CgogICAgICAgIGlmIChpc0FycmF5KG9iaikpIHsKICAgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXMKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuCiAgICAgICAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LgogICAgICAgKgogICAgICAgKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpbgogICAgICAgKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuCiAgICAgICAqCiAgICAgICAqIEV4YW1wbGU6CiAgICAgICAqCiAgICAgICAqIGBgYGpzCiAgICAgICAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTsKICAgICAgICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2CiAgICAgICAqIGBgYAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2UKICAgICAgICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIG1lcmdlKCkKICAgICAgLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovCiAgICAgIHsKICAgICAgICB2YXIgcmVzdWx0ID0ge307CgogICAgICAgIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7CiAgICAgICAgICBpZiAoX3R5cGVvZjQocmVzdWx0W2tleV0pID09PSAnb2JqZWN0JyAmJiBfdHlwZW9mNCh2YWwpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBGdW5jdGlvbiBlcXVhbCB0byBtZXJnZSB3aXRoIHRoZSBkaWZmZXJlbmNlIGJlaW5nIHRoYXQgbm8gcmVmZXJlbmNlCiAgICAgICAqIHRvIG9yaWdpbmFsIG9iamVjdHMgaXMga2VwdC4KICAgICAgICoKICAgICAgICogQHNlZSBtZXJnZQogICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2UKICAgICAgICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGRlZXBNZXJnZSgpCiAgICAgIC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLwogICAgICB7CiAgICAgICAgdmFyIHJlc3VsdCA9IHt9OwoKICAgICAgICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkgewogICAgICAgICAgaWYgKF90eXBlb2Y0KHJlc3VsdFtrZXldKSA9PT0gJ29iamVjdCcgJiYgX3R5cGVvZjQodmFsKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBkZWVwTWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90eXBlb2Y0KHZhbCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gZGVlcE1lcmdlKHt9LCB2YWwpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20KICAgICAgICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvCiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykgewogICAgICAgIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHsKICAgICAgICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYVtrZXldID0gdmFsOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBhOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICBpc0FycmF5OiBpc0FycmF5LAogICAgICAgIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsCiAgICAgICAgaXNCdWZmZXI6IGlzQnVmZmVyLAogICAgICAgIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsCiAgICAgICAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LAogICAgICAgIGlzU3RyaW5nOiBpc1N0cmluZywKICAgICAgICBpc051bWJlcjogaXNOdW1iZXIsCiAgICAgICAgaXNPYmplY3Q6IGlzT2JqZWN0LAogICAgICAgIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCwKICAgICAgICBpc0RhdGU6IGlzRGF0ZSwKICAgICAgICBpc0ZpbGU6IGlzRmlsZSwKICAgICAgICBpc0Jsb2I6IGlzQmxvYiwKICAgICAgICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLAogICAgICAgIGlzU3RyZWFtOiBpc1N0cmVhbSwKICAgICAgICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsCiAgICAgICAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LAogICAgICAgIGZvckVhY2g6IGZvckVhY2gsCiAgICAgICAgbWVyZ2U6IG1lcmdlLAogICAgICAgIGRlZXBNZXJnZTogZGVlcE1lcmdlLAogICAgICAgIGV4dGVuZDogZXh0ZW5kLAogICAgICAgIHRyaW06IHRyaW0KICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CgogICAgICB2YXIgY3R4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgogICAgICB2YXIgaGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKICAgICAgdmFyIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpOwoKICAgICAgdmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnOwoKICAgICAgdmFyICRleHBvcnQgPSBmdW5jdGlvbiAkZXhwb3J0KHR5cGUsIG5hbWUsIHNvdXJjZSkgewogICAgICAgIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GOwogICAgICAgIHZhciBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HOwogICAgICAgIHZhciBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TOwogICAgICAgIHZhciBJU19QUk9UTyA9IHR5cGUgJiAkZXhwb3J0LlA7CiAgICAgICAgdmFyIElTX0JJTkQgPSB0eXBlICYgJGV4cG9ydC5COwogICAgICAgIHZhciBJU19XUkFQID0gdHlwZSAmICRleHBvcnQuVzsKICAgICAgICB2YXIgZXhwb3J0cyA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pOwogICAgICAgIHZhciBleHBQcm90byA9IGV4cG9ydHNbUFJPVE9UWVBFXTsKICAgICAgICB2YXIgdGFyZ2V0ID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXTsKICAgICAgICB2YXIga2V5LCBvd24sIG91dDsKICAgICAgICBpZiAoSVNfR0xPQkFMKSBzb3VyY2UgPSBuYW1lOwoKICAgICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHsKICAgICAgICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZQogICAgICAgICAgb3duID0gIUlTX0ZPUkNFRCAmJiB0YXJnZXQgJiYgdGFyZ2V0W2tleV0gIT09IHVuZGVmaW5lZDsKICAgICAgICAgIGlmIChvd24gJiYgaGFzKGV4cG9ydHMsIGtleSkpIGNvbnRpbnVlOyAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZAoKICAgICAgICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07IC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwoKICAgICAgICAgIGV4cG9ydHNba2V5XSA9IElTX0dMT0JBTCAmJiB0eXBlb2YgdGFyZ2V0W2tleV0gIT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZVtrZXldIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CiAgICAgICAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKSAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeQogICAgICAgICAgOiBJU19XUkFQICYmIHRhcmdldFtrZXldID09IG91dCA/IGZ1bmN0aW9uIChDKSB7CiAgICAgICAgICAgIHZhciBGID0gZnVuY3Rpb24gRihhLCBiLCBjKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBDKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQygpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQyhhKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEMoYSwgYik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDKGEsIGIsIGMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIEMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTsKICAgICAgICAgICAgcmV0dXJuIEY7IC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kcwogICAgICAgICAgfShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7IC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJQoKICAgICAgICAgIGlmIChJU19QUk9UTykgewogICAgICAgICAgICAoZXhwb3J0cy52aXJ0dWFsIHx8IChleHBvcnRzLnZpcnR1YWwgPSB7fSkpW2tleV0gPSBvdXQ7IC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlCgogICAgICAgICAgICBpZiAodHlwZSAmICRleHBvcnQuUiAmJiBleHBQcm90byAmJiAhZXhwUHJvdG9ba2V5XSkgaGlkZShleHBQcm90bywga2V5LCBvdXQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsgLy8gdHlwZSBiaXRtYXAKCgogICAgICAkZXhwb3J0LkYgPSAxOyAvLyBmb3JjZWQKCiAgICAgICRleHBvcnQuRyA9IDI7IC8vIGdsb2JhbAoKICAgICAgJGV4cG9ydC5TID0gNDsgLy8gc3RhdGljCgogICAgICAkZXhwb3J0LlAgPSA4OyAvLyBwcm90bwoKICAgICAgJGV4cG9ydC5CID0gMTY7IC8vIGJpbmQKCiAgICAgICRleHBvcnQuVyA9IDMyOyAvLyB3cmFwCgogICAgICAkZXhwb3J0LlUgPSA2NDsgLy8gc2FmZQoKICAgICAgJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgCgogICAgICBtb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInZlcnNpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gdmVyc2lvbjsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiRE9NIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIERPTTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQ2hpbGRyZW4iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gQ2hpbGRyZW47CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlbmRlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiByZW5kZXIkMTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY3JlYXRlQ2xhc3MiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlQ2xhc3M7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNyZWF0ZUZhY3RvcnkiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlRmFjdG9yeTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY3JlYXRlRWxlbWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50OwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjbG9uZUVsZW1lbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY2xvbmVFbGVtZW50JDE7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzVmFsaWRFbGVtZW50IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGlzVmFsaWRFbGVtZW50OwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmaW5kRE9NTm9kZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBmaW5kRE9NTm9kZTsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidW5tb3VudENvbXBvbmVudEF0Tm9kZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB1bm1vdW50Q29tcG9uZW50QXROb2RlOwogICAgICAgIH0pOwogICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLwoKCiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJDb21wb25lbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gQ29tcG9uZW50JDE7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlB1cmVDb21wb25lbnQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gUHVyZUNvbXBvbmVudDsKICAgICAgICB9KTsKICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCgogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcmVuZGVyU3VidHJlZUludG9Db250YWluZXI7CiAgICAgICAgfSk7CiAgICAgICAgLyogaGFybW9ueSBpbXBvcnQgKi8KCgogICAgICAgIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcHJvcF90eXBlc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7CiAgICAgICAgLyogaGFybW9ueSBpbXBvcnQgKi8KCgogICAgICAgIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcHJvcF90eXBlc19fX2RlZmF1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm4oX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX3Byb3BfdHlwZXNfXyk7CiAgICAgICAgLyogaGFybW9ueSBpbXBvcnQgKi8KCgogICAgICAgIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKTsKICAgICAgICAvKiBoYXJtb255IGltcG9ydCAqLwoKCiAgICAgICAgdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX19kZWZhdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfXyk7CiAgICAgICAgLyogaGFybW9ueSByZWV4cG9ydCAoZGVmYXVsdCBmcm9tIG5vbi1oYW1vcnkpICovCgoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlByb3BUeXBlcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcHJvcF90eXBlc19fX2RlZmF1bHQuYTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIHZlcnNpb24gPSAnMTUuMS4wJzsgLy8gdHJpY2sgbGlicmFyaWVzIHRvIHRoaW5rIHdlIGFyZSByZWFjdAoKICAgICAgICB2YXIgRUxFTUVOVFMgPSAnYSBhYmJyIGFkZHJlc3MgYXJlYSBhcnRpY2xlIGFzaWRlIGF1ZGlvIGIgYmFzZSBiZGkgYmRvIGJpZyBibG9ja3F1b3RlIGJvZHkgYnIgYnV0dG9uIGNhbnZhcyBjYXB0aW9uIGNpdGUgY29kZSBjb2wgY29sZ3JvdXAgZGF0YSBkYXRhbGlzdCBkZCBkZWwgZGV0YWlscyBkZm4gZGlhbG9nIGRpdiBkbCBkdCBlbSBlbWJlZCBmaWVsZHNldCBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgZm9ybSBoMSBoMiBoMyBoNCBoNSBoNiBoZWFkIGhlYWRlciBoZ3JvdXAgaHIgaHRtbCBpIGlmcmFtZSBpbWcgaW5wdXQgaW5zIGtiZCBrZXlnZW4gbGFiZWwgbGVnZW5kIGxpIGxpbmsgbWFpbiBtYXAgbWFyayBtZW51IG1lbnVpdGVtIG1ldGEgbWV0ZXIgbmF2IG5vc2NyaXB0IG9iamVjdCBvbCBvcHRncm91cCBvcHRpb24gb3V0cHV0IHAgcGFyYW0gcGljdHVyZSBwcmUgcHJvZ3Jlc3MgcSBycCBydCBydWJ5IHMgc2FtcCBzY3JpcHQgc2VjdGlvbiBzZWxlY3Qgc21hbGwgc291cmNlIHNwYW4gc3Ryb25nIHN0eWxlIHN1YiBzdW1tYXJ5IHN1cCB0YWJsZSB0Ym9keSB0ZCB0ZXh0YXJlYSB0Zm9vdCB0aCB0aGVhZCB0aW1lIHRpdGxlIHRyIHRyYWNrIHUgdWwgdmFyIHZpZGVvIHdiciBjaXJjbGUgY2xpcFBhdGggZGVmcyBlbGxpcHNlIGcgaW1hZ2UgbGluZSBsaW5lYXJHcmFkaWVudCBtYXNrIHBhdGggcGF0dGVybiBwb2x5Z29uIHBvbHlsaW5lIHJhZGlhbEdyYWRpZW50IHJlY3Qgc3RvcCBzdmcgdGV4dCB0c3Bhbicuc3BsaXQoJyAnKTsKICAgICAgICB2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sWyJmb3IiXSAmJiBTeW1ib2xbImZvciJdKCdyZWFjdC5lbGVtZW50JykgfHwgMHhlYWM3OwogICAgICAgIHZhciBDT01QT05FTlRfV1JBUFBFUl9LRVkgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFN5bWJvbFsiZm9yIl0oJ19fcHJlYWN0Q29tcGF0V3JhcHBlcicpIDogJ19fcHJlYWN0Q29tcGF0V3JhcHBlcic7IC8vIGRvbid0IGF1dG9iaW5kIHRoZXNlIG1ldGhvZHMgc2luY2UgdGhleSBhbHJlYWR5IGhhdmUgZ3VhcmFudGVlZCBjb250ZXh0LgoKICAgICAgICB2YXIgQVVUT0JJTkRfQkxBQ0tMSVNUID0gewogICAgICAgICAgY29uc3RydWN0b3I6IDEsCiAgICAgICAgICByZW5kZXI6IDEsCiAgICAgICAgICBzaG91bGRDb21wb25lbnRVcGRhdGU6IDEsCiAgICAgICAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiAxLAogICAgICAgICAgY29tcG9uZW50V2lsbFVwZGF0ZTogMSwKICAgICAgICAgIGNvbXBvbmVudERpZFVwZGF0ZTogMSwKICAgICAgICAgIGNvbXBvbmVudFdpbGxNb3VudDogMSwKICAgICAgICAgIGNvbXBvbmVudERpZE1vdW50OiAxLAogICAgICAgICAgY29tcG9uZW50V2lsbFVubW91bnQ6IDEsCiAgICAgICAgICBjb21wb25lbnREaWRVbm1vdW50OiAxCiAgICAgICAgfTsKICAgICAgICB2YXIgQ0FNRUxfUFJPUFMgPSAvXig/OmFjY2VudHxhbGlnbm1lbnR8YXJhYmljfGJhc2VsaW5lfGNhcHxjbGlwfGNvbG9yfGZpbGx8Zmxvb2R8Zm9udHxnbHlwaHxob3JpenxtYXJrZXJ8b3ZlcmxpbmV8cGFpbnR8c3RvcHxzdHJpa2V0aHJvdWdofHN0cm9rZXx0ZXh0fHVuZGVybGluZXx1bmljb2RlfHVuaXRzfHZ8dmVydHx3b3JkfHdyaXRpbmd8eClbQS1aXS87CiAgICAgICAgdmFyIEJZUEFTU19IT09LID0ge307CiAgICAgICAgLypnbG9iYWwgcHJvY2VzcyovCgogICAgICAgIHZhciBERVYgPSB0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXByb2Nlc3MuZW52IHx8IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbic7IC8vIGEgY29tcG9uZW50IHRoYXQgcmVuZGVycyBub3RoaW5nLiBVc2VkIHRvIHJlcGxhY2UgY29tcG9uZW50cyBmb3IgdW5tb3VudENvbXBvbmVudEF0Tm9kZS4KCiAgICAgICAgZnVuY3Rpb24gRW1wdHlDb21wb25lbnQoKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9IC8vIG1ha2UgcmVhY3QgdGhpbmsgd2UncmUgcmVhY3QuCgoKICAgICAgICB2YXIgVk5vZGUgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bImgiXSgnYScsIG51bGwpLmNvbnN0cnVjdG9yOwoKICAgICAgICBWTm9kZS5wcm90b3R5cGUuJCR0eXBlb2YgPSBSRUFDVF9FTEVNRU5UX1RZUEU7CiAgICAgICAgVk5vZGUucHJvdG90eXBlLnByZWFjdENvbXBhdFVwZ3JhZGVkID0gZmFsc2U7CiAgICAgICAgVk5vZGUucHJvdG90eXBlLnByZWFjdENvbXBhdE5vcm1hbGl6ZWQgPSBmYWxzZTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVk5vZGUucHJvdG90eXBlLCAndHlwZScsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlTmFtZTsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgICAgICAgIHRoaXMubm9kZU5hbWUgPSB2OwogICAgICAgICAgfSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWTm9kZS5wcm90b3R5cGUsICdwcm9wcycsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzOwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHsKICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gdjsKICAgICAgICAgIH0sCiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICB2YXIgb2xkRXZlbnRIb29rID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJvcHRpb25zIl0uZXZlbnQ7CgogICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1sib3B0aW9ucyJdLmV2ZW50ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmIChvbGRFdmVudEhvb2spIHsKICAgICAgICAgICAgZSA9IG9sZEV2ZW50SG9vayhlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBlLnBlcnNpc3QgPSBPYmplY3Q7CiAgICAgICAgICBlLm5hdGl2ZUV2ZW50ID0gZTsKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH07CgogICAgICAgIHZhciBvbGRWbm9kZUhvb2sgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bIm9wdGlvbnMiXS52bm9kZTsKCiAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJvcHRpb25zIl0udm5vZGUgPSBmdW5jdGlvbiAodm5vZGUpIHsKICAgICAgICAgIGlmICghdm5vZGUucHJlYWN0Q29tcGF0VXBncmFkZWQpIHsKICAgICAgICAgICAgdm5vZGUucHJlYWN0Q29tcGF0VXBncmFkZWQgPSB0cnVlOwogICAgICAgICAgICB2YXIgdGFnID0gdm5vZGUubm9kZU5hbWUsCiAgICAgICAgICAgICAgICBhdHRycyA9IHZub2RlLmF0dHJpYnV0ZXMgPSBleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiB0YWcgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBpZiAodGFnW0NPTVBPTkVOVF9XUkFQUEVSX0tFWV0gPT09IHRydWUgfHwgdGFnLnByb3RvdHlwZSAmJiAnaXNSZWFjdENvbXBvbmVudCcgaW4gdGFnLnByb3RvdHlwZSkgewogICAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuICYmIFN0cmluZyh2bm9kZS5jaGlsZHJlbikgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIHZub2RlLmNoaWxkcmVuID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICBhdHRycy5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghdm5vZGUucHJlYWN0Q29tcGF0Tm9ybWFsaXplZCkgewogICAgICAgICAgICAgICAgICBub3JtYWxpemVWTm9kZSh2bm9kZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaGFuZGxlQ29tcG9uZW50Vk5vZGUodm5vZGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4gJiYgU3RyaW5nKHZub2RlLmNoaWxkcmVuKSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIHZub2RlLmNoaWxkcmVuID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICBhdHRycy5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGF0dHJzLmRlZmF1bHRWYWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKCFhdHRycy52YWx1ZSAmJiBhdHRycy52YWx1ZSAhPT0gMCkgewogICAgICAgICAgICAgICAgICBhdHRycy52YWx1ZSA9IGF0dHJzLmRlZmF1bHRWYWx1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWxldGUgYXR0cnMuZGVmYXVsdFZhbHVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaGFuZGxlRWxlbWVudFZOb2RlKHZub2RlLCBhdHRycyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob2xkVm5vZGVIb29rKSB7CiAgICAgICAgICAgIG9sZFZub2RlSG9vayh2bm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ29tcG9uZW50Vk5vZGUodm5vZGUpIHsKICAgICAgICAgIHZhciB0YWcgPSB2bm9kZS5ub2RlTmFtZSwKICAgICAgICAgICAgICBhID0gdm5vZGUuYXR0cmlidXRlczsKICAgICAgICAgIHZub2RlLmF0dHJpYnV0ZXMgPSB7fTsKCiAgICAgICAgICBpZiAodGFnLmRlZmF1bHRQcm9wcykgewogICAgICAgICAgICBleHRlbmQodm5vZGUuYXR0cmlidXRlcywgdGFnLmRlZmF1bHRQcm9wcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgZXh0ZW5kKHZub2RlLmF0dHJpYnV0ZXMsIGEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRWxlbWVudFZOb2RlKHZub2RlLCBhKSB7CiAgICAgICAgICB2YXIgc2hvdWxkU2FuaXRpemUsIGF0dHJzLCBpOwoKICAgICAgICAgIGlmIChhKSB7CiAgICAgICAgICAgIGZvciAoaSBpbiBhKSB7CiAgICAgICAgICAgICAgaWYgKHNob3VsZFNhbml0aXplID0gQ0FNRUxfUFJPUFMudGVzdChpKSkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2hvdWxkU2FuaXRpemUpIHsKICAgICAgICAgICAgICBhdHRycyA9IHZub2RlLmF0dHJpYnV0ZXMgPSB7fTsKCiAgICAgICAgICAgICAgZm9yIChpIGluIGEpIHsKICAgICAgICAgICAgICAgIGlmIChhLmhhc093blByb3BlcnR5KGkpKSB7CiAgICAgICAgICAgICAgICAgIGF0dHJzW0NBTUVMX1BST1BTLnRlc3QoaSkgPyBpLnJlcGxhY2UoLyhbQS1aMC05XSkvLCAnLSQxJykudG9Mb3dlckNhc2UoKSA6IGldID0gYVtpXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IC8vIHByb3h5IHJlbmRlcigpIHNpbmNlIFJlYWN0IHJldHVybnMgYSBDb21wb25lbnQgcmVmZXJlbmNlLgoKCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyJDEodm5vZGUsIHBhcmVudCwgY2FsbGJhY2spIHsKICAgICAgICAgIHZhciBwcmV2ID0gcGFyZW50ICYmIHBhcmVudC5fcHJlYWN0Q29tcGF0UmVuZGVyZWQgJiYgcGFyZW50Ll9wcmVhY3RDb21wYXRSZW5kZXJlZC5iYXNlOyAvLyBpZ25vcmUgaW1wb3NzaWJsZSBwcmV2aW91cyByZW5kZXJzCgogICAgICAgICAgaWYgKHByZXYgJiYgcHJldi5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHsKICAgICAgICAgICAgcHJldiA9IG51bGw7CiAgICAgICAgICB9IC8vIGRlZmF1bHQgdG8gZmlyc3QgRWxlbWVudCBjaGlsZAoKCiAgICAgICAgICBpZiAoIXByZXYpIHsKICAgICAgICAgICAgcHJldiA9IHBhcmVudC5jaGlsZHJlblswXTsKICAgICAgICAgIH0gLy8gcmVtb3ZlIHVuYWZmZWN0ZWQgc2libGluZ3MKCgogICAgICAgICAgZm9yICh2YXIgaSA9IHBhcmVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaS0tOykgewogICAgICAgICAgICBpZiAocGFyZW50LmNoaWxkTm9kZXNbaV0gIT09IHByZXYpIHsKICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmNoaWxkTm9kZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG91dCA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9wcmVhY3RfX1sicmVuZGVyIl0odm5vZGUsIHBhcmVudCwgcHJldik7CgogICAgICAgICAgaWYgKHBhcmVudCkgewogICAgICAgICAgICBwYXJlbnQuX3ByZWFjdENvbXBhdFJlbmRlcmVkID0gb3V0ICYmIChvdXQuX2NvbXBvbmVudCB8fCB7CiAgICAgICAgICAgICAgYmFzZTogb3V0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gb3V0ICYmIG91dC5fY29tcG9uZW50IHx8IG91dDsKICAgICAgICB9CgogICAgICAgIHZhciBDb250ZXh0UHJvdmlkZXIgPSBmdW5jdGlvbiBDb250ZXh0UHJvdmlkZXIoKSB7fTsKCiAgICAgICAgQ29udGV4dFByb3ZpZGVyLnByb3RvdHlwZS5nZXRDaGlsZENvbnRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jb250ZXh0OwogICAgICAgIH07CgogICAgICAgIENvbnRleHRQcm92aWRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHByb3BzKSB7CiAgICAgICAgICByZXR1cm4gcHJvcHMuY2hpbGRyZW5bMF07CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyU3VidHJlZUludG9Db250YWluZXIocGFyZW50Q29tcG9uZW50LCB2bm9kZSwgY29udGFpbmVyLCBjYWxsYmFjaykgewogICAgICAgICAgdmFyIHdyYXAgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bImgiXShDb250ZXh0UHJvdmlkZXIsIHsKICAgICAgICAgICAgY29udGV4dDogcGFyZW50Q29tcG9uZW50LmNvbnRleHQKICAgICAgICAgIH0sIHZub2RlKTsKCiAgICAgICAgICB2YXIgYyA9IHJlbmRlciQxKHdyYXAsIGNvbnRhaW5lcik7CgogICAgICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKGMpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBjLl9jb21wb25lbnQgfHwgYy5iYXNlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudEF0Tm9kZShjb250YWluZXIpIHsKICAgICAgICAgIHZhciBleGlzdGluZyA9IGNvbnRhaW5lci5fcHJlYWN0Q29tcGF0UmVuZGVyZWQgJiYgY29udGFpbmVyLl9wcmVhY3RDb21wYXRSZW5kZXJlZC5iYXNlOwoKICAgICAgICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy5wYXJlbnROb2RlID09PSBjb250YWluZXIpIHsKICAgICAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJyZW5kZXIiXShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bImgiXShFbXB0eUNvbXBvbmVudCksIGNvbnRhaW5lciwgZXhpc3RpbmcpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdmFyIEFSUiA9IFtdOyAvLyBUaGlzIEFQSSBpcyBjb21wbGV0ZWx5IHVubmVjZXNzYXJ5IGZvciBQcmVhY3QsIHNvIGl0J3MgYmFzaWNhbGx5IHBhc3N0aHJvdWdoLgoKICAgICAgICB2YXIgQ2hpbGRyZW4gPSB7CiAgICAgICAgICBtYXA6IGZ1bmN0aW9uIG1hcChjaGlsZHJlbiwgZm4sIGN0eCkgewogICAgICAgICAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjaGlsZHJlbiA9IENoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pOwoKICAgICAgICAgICAgaWYgKGN0eCAmJiBjdHggIT09IGNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgZm4gPSBmbi5iaW5kKGN0eCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbi5tYXAoZm4pOwogICAgICAgICAgfSwKICAgICAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goY2hpbGRyZW4sIGZuLCBjdHgpIHsKICAgICAgICAgICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2hpbGRyZW4gPSBDaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTsKCiAgICAgICAgICAgIGlmIChjdHggJiYgY3R4ICE9PSBjaGlsZHJlbikgewogICAgICAgICAgICAgIGZuID0gZm4uYmluZChjdHgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZuKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjb3VudDogZnVuY3Rpb24gY291bnQoY2hpbGRyZW4pIHsKICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCB8fCAwOwogICAgICAgICAgfSwKICAgICAgICAgIG9ubHk6IGZ1bmN0aW9uIG9ubHkoY2hpbGRyZW4pIHsKICAgICAgICAgICAgY2hpbGRyZW4gPSBDaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTsKCiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggIT09IDEpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoaWxkcmVuLm9ubHkoKSBleHBlY3RzIG9ubHkgb25lIGNoaWxkLicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5bMF07CiAgICAgICAgICB9LAogICAgICAgICAgdG9BcnJheTogZnVuY3Rpb24gdG9BcnJheShjaGlsZHJlbikgewogICAgICAgICAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkgJiYgQXJyYXkuaXNBcnJheShjaGlsZHJlbikgPyBjaGlsZHJlbiA6IEFSUi5jb25jYXQoY2hpbGRyZW4pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLyoqIFRyYWNrIGN1cnJlbnQgcmVuZGVyKCkgY29tcG9uZW50IGZvciByZWYgYXNzaWdubWVudCAqLwoKICAgICAgICB2YXIgY3VycmVudENvbXBvbmVudDsKCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmFjdG9yeSh0eXBlKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudC5iaW5kKG51bGwsIHR5cGUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIERPTSA9IHt9OwoKICAgICAgICBmb3IgKHZhciBpID0gRUxFTUVOVFMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICBET01bRUxFTUVOVFNbaV1dID0gY3JlYXRlRmFjdG9yeShFTEVNRU5UU1tpXSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGdyYWRlVG9WTm9kZXMoYXJyLCBvZmZzZXQpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSBvZmZzZXQgfHwgMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgb2JqID0gYXJyW2ldOwoKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAgICAgICAgIHVwZ3JhZGVUb1ZOb2RlcyhvYmopOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiAmJiBfdHlwZW9mNChvYmopID09PSAnb2JqZWN0JyAmJiAhaXNWYWxpZEVsZW1lbnQob2JqKSAmJiAob2JqLnByb3BzICYmIG9iai50eXBlIHx8IG9iai5hdHRyaWJ1dGVzICYmIG9iai5ub2RlTmFtZSB8fCBvYmouY2hpbGRyZW4pKSB7CiAgICAgICAgICAgICAgYXJyW2ldID0gY3JlYXRlRWxlbWVudChvYmoudHlwZSB8fCBvYmoubm9kZU5hbWUsIG9iai5wcm9wcyB8fCBvYmouYXR0cmlidXRlcywgb2JqLmNoaWxkcmVuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNTdGF0ZWxlc3NDb21wb25lbnQoYykgewogICAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnZnVuY3Rpb24nICYmICEoYy5wcm90b3R5cGUgJiYgYy5wcm90b3R5cGUucmVuZGVyKTsKICAgICAgICB9IC8vIHdyYXBzIHN0YXRlbGVzcyBmdW5jdGlvbmFsIGNvbXBvbmVudHMgaW4gYSBQcm9wVHlwZXMgdmFsaWRhdG9yCgoKICAgICAgICBmdW5jdGlvbiB3cmFwU3RhdGVsZXNzQ29tcG9uZW50KFdyYXBwZWRDb21wb25lbnQpIHsKICAgICAgICAgIHJldHVybiBjcmVhdGVDbGFzcyh7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBXcmFwcGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IFdyYXBwZWRDb21wb25lbnQubmFtZSwKICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFdyYXBwZWRDb21wb25lbnQodGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGF0ZWxlc3NDb21wb25lbnRIb29rKEN0b3IpIHsKICAgICAgICAgIHZhciBXcmFwcGVkID0gQ3RvcltDT01QT05FTlRfV1JBUFBFUl9LRVldOwoKICAgICAgICAgIGlmIChXcmFwcGVkKSB7CiAgICAgICAgICAgIHJldHVybiBXcmFwcGVkID09PSB0cnVlID8gQ3RvciA6IFdyYXBwZWQ7CiAgICAgICAgICB9CgogICAgICAgICAgV3JhcHBlZCA9IHdyYXBTdGF0ZWxlc3NDb21wb25lbnQoQ3Rvcik7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JhcHBlZCwgQ09NUE9ORU5UX1dSQVBQRVJfS0VZLCB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmFsdWU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgV3JhcHBlZC5kaXNwbGF5TmFtZSA9IEN0b3IuZGlzcGxheU5hbWU7CiAgICAgICAgICBXcmFwcGVkLnByb3BUeXBlcyA9IEN0b3IucHJvcFR5cGVzOwogICAgICAgICAgV3JhcHBlZC5kZWZhdWx0UHJvcHMgPSBDdG9yLmRlZmF1bHRQcm9wczsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDdG9yLCBDT01QT05FTlRfV1JBUFBFUl9LRVksIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogV3JhcHBlZAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gV3JhcHBlZDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoKSB7CiAgICAgICAgICB2YXIgYXJncyA9IFtdLAogICAgICAgICAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CgogICAgICAgICAgd2hpbGUgKGxlbi0tKSB7CiAgICAgICAgICAgIGFyZ3NbbGVuXSA9IGFyZ3VtZW50c1tsZW5dOwogICAgICAgICAgfQoKICAgICAgICAgIHVwZ3JhZGVUb1ZOb2RlcyhhcmdzLCAyKTsKICAgICAgICAgIHJldHVybiBub3JtYWxpemVWTm9kZShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bImgiXS5hcHBseSh2b2lkIDAsIGFyZ3MpKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVZOb2RlKHZub2RlKSB7CiAgICAgICAgICB2bm9kZS5wcmVhY3RDb21wYXROb3JtYWxpemVkID0gdHJ1ZTsKICAgICAgICAgIGFwcGx5Q2xhc3NOYW1lKHZub2RlKTsKCiAgICAgICAgICBpZiAoaXNTdGF0ZWxlc3NDb21wb25lbnQodm5vZGUubm9kZU5hbWUpKSB7CiAgICAgICAgICAgIHZub2RlLm5vZGVOYW1lID0gc3RhdGVsZXNzQ29tcG9uZW50SG9vayh2bm9kZS5ub2RlTmFtZSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJlZiA9IHZub2RlLmF0dHJpYnV0ZXMucmVmLAogICAgICAgICAgICAgIHR5cGUgPSByZWYgJiYgX3R5cGVvZjQocmVmKTsKCiAgICAgICAgICBpZiAoY3VycmVudENvbXBvbmVudCAmJiAodHlwZSA9PT0gJ3N0cmluZycgfHwgdHlwZSA9PT0gJ251bWJlcicpKSB7CiAgICAgICAgICAgIHZub2RlLmF0dHJpYnV0ZXMucmVmID0gY3JlYXRlU3RyaW5nUmVmUHJveHkocmVmLCBjdXJyZW50Q29tcG9uZW50KTsKICAgICAgICAgIH0KCiAgICAgICAgICBhcHBseUV2ZW50Tm9ybWFsaXphdGlvbih2bm9kZSk7CiAgICAgICAgICByZXR1cm4gdm5vZGU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9uZUVsZW1lbnQkMShlbGVtZW50LCBwcm9wcykgewogICAgICAgICAgdmFyIGNoaWxkcmVuID0gW10sCiAgICAgICAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7CgogICAgICAgICAgd2hpbGUgKGxlbi0tID4gMCkgewogICAgICAgICAgICBjaGlsZHJlbltsZW5dID0gYXJndW1lbnRzW2xlbiArIDJdOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkpIHsKICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGVsZW1lbnRQcm9wcyA9IGVsZW1lbnQuYXR0cmlidXRlcyB8fCBlbGVtZW50LnByb3BzOwoKICAgICAgICAgIHZhciBub2RlID0gX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJoIl0oZWxlbWVudC5ub2RlTmFtZSB8fCBlbGVtZW50LnR5cGUsIGVsZW1lbnRQcm9wcywgZWxlbWVudC5jaGlsZHJlbiB8fCBlbGVtZW50UHJvcHMgJiYgZWxlbWVudFByb3BzLmNoaWxkcmVuKTsgLy8gT25seSBwcm92aWRlIHRoZSAzcmQgYXJndW1lbnQgaWYgbmVlZGVkLgogICAgICAgICAgLy8gQXJndW1lbnRzIDMrIG92ZXJ3cml0ZSBlbGVtZW50LmNoaWxkcmVuIGluIHByZWFjdENsb25lRWxlbWVudAoKCiAgICAgICAgICB2YXIgY2xvbmVBcmdzID0gW25vZGUsIHByb3BzXTsKCiAgICAgICAgICBpZiAoY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgIGNsb25lQXJncy5wdXNoKGNoaWxkcmVuKTsKICAgICAgICAgIH0gZWxzZSBpZiAocHJvcHMgJiYgcHJvcHMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgY2xvbmVBcmdzLnB1c2gocHJvcHMuY2hpbGRyZW4pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBub3JtYWxpemVWTm9kZShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfcHJlYWN0X19bImNsb25lRWxlbWVudCJdLmFwcGx5KHZvaWQgMCwgY2xvbmVBcmdzKSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc1ZhbGlkRWxlbWVudChlbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gZWxlbWVudCAmJiAoZWxlbWVudCBpbnN0YW5jZW9mIFZOb2RlIHx8IGVsZW1lbnQuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVTdHJpbmdSZWZQcm94eShuYW1lLCBjb21wb25lbnQpIHsKICAgICAgICAgIHJldHVybiBjb21wb25lbnQuX3JlZlByb3hpZXNbbmFtZV0gfHwgKGNvbXBvbmVudC5fcmVmUHJveGllc1tuYW1lXSA9IGZ1bmN0aW9uIChyZXNvbHZlZCkgewogICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudC5yZWZzKSB7CiAgICAgICAgICAgICAgY29tcG9uZW50LnJlZnNbbmFtZV0gPSByZXNvbHZlZDsKCiAgICAgICAgICAgICAgaWYgKHJlc29sdmVkID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgY29tcG9uZW50Ll9yZWZQcm94aWVzW25hbWVdOwogICAgICAgICAgICAgICAgY29tcG9uZW50ID0gbnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYXBwbHlFdmVudE5vcm1hbGl6YXRpb24ocmVmKSB7CiAgICAgICAgICB2YXIgbm9kZU5hbWUgPSByZWYubm9kZU5hbWU7CiAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHJlZi5hdHRyaWJ1dGVzOwoKICAgICAgICAgIGlmICghYXR0cmlidXRlcyB8fCB0eXBlb2Ygbm9kZU5hbWUgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcHJvcHMgPSB7fTsKCiAgICAgICAgICBmb3IgKHZhciBpIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgcHJvcHNbaS50b0xvd2VyQ2FzZSgpXSA9IGk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHByb3BzLm9uZG91YmxlY2xpY2spIHsKICAgICAgICAgICAgYXR0cmlidXRlcy5vbmRibGNsaWNrID0gYXR0cmlidXRlc1twcm9wcy5vbmRvdWJsZWNsaWNrXTsKICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXNbcHJvcHMub25kb3VibGVjbGlja107CiAgICAgICAgICB9IC8vIGZvciAqdGV4dHVhbCBpbnB1dHMqIChpbmNsIHRleHRhcmVhKSwgbm9ybWFsaXplIGBvbkNoYW5nZWAgLT4gYG9uSW5wdXRgOgoKCiAgICAgICAgICBpZiAocHJvcHMub25jaGFuZ2UgJiYgKG5vZGVOYW1lID09PSAndGV4dGFyZWEnIHx8IG5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgJiYgIS9eZmlsfGNoZXxyYWQvaS50ZXN0KGF0dHJpYnV0ZXMudHlwZSkpKSB7CiAgICAgICAgICAgIHZhciBub3JtYWxpemVkID0gcHJvcHMub25pbnB1dCB8fCAnb25pbnB1dCc7CgogICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXNbbm9ybWFsaXplZF0pIHsKICAgICAgICAgICAgICBhdHRyaWJ1dGVzW25vcm1hbGl6ZWRdID0gbXVsdGlob29rKFthdHRyaWJ1dGVzW25vcm1hbGl6ZWRdLCBhdHRyaWJ1dGVzW3Byb3BzLm9uY2hhbmdlXV0pOwogICAgICAgICAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzW3Byb3BzLm9uY2hhbmdlXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYXBwbHlDbGFzc05hbWUocmVmKSB7CiAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHJlZi5hdHRyaWJ1dGVzOwoKICAgICAgICAgIGlmICghYXR0cmlidXRlcykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGNsID0gYXR0cmlidXRlcy5jbGFzc05hbWUgfHwgYXR0cmlidXRlc1siY2xhc3MiXTsKCiAgICAgICAgICBpZiAoY2wpIHsKICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzc05hbWUgPSBjbDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4dGVuZChiYXNlLCBwcm9wcykgewogICAgICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7CiAgICAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgICAgYmFzZVtrZXldID0gcHJvcHNba2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBiYXNlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2hhbGxvd0RpZmZlcnMoYSwgYikgewogICAgICAgICAgZm9yICh2YXIgaSBpbiBhKSB7CiAgICAgICAgICAgIGlmICghKGkgaW4gYikpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZvciAodmFyIGkkMSBpbiBiKSB7CiAgICAgICAgICAgIGlmIChhW2kkMV0gIT09IGJbaSQxXSkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZmluZERPTU5vZGUoY29tcG9uZW50KSB7CiAgICAgICAgICByZXR1cm4gY29tcG9uZW50ICYmIGNvbXBvbmVudC5iYXNlIHx8IGNvbXBvbmVudDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEYoKSB7fQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhvYmopIHsKICAgICAgICAgIGZ1bmN0aW9uIGNsKHByb3BzLCBjb250ZXh0KSB7CiAgICAgICAgICAgIGJpbmRBbGwodGhpcyk7CiAgICAgICAgICAgIENvbXBvbmVudCQxLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQsIEJZUEFTU19IT09LKTsKICAgICAgICAgICAgbmV3Q29tcG9uZW50SG9vay5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBvYmogPSBleHRlbmQoewogICAgICAgICAgICBjb25zdHJ1Y3RvcjogY2wKICAgICAgICAgIH0sIG9iaik7IC8vIFdlIG5lZWQgdG8gYXBwbHkgbWl4aW5zIGhlcmUgc28gdGhhdCBnZXREZWZhdWx0UHJvcHMgaXMgY29ycmVjdGx5IG1peGVkCgogICAgICAgICAgaWYgKG9iai5taXhpbnMpIHsKICAgICAgICAgICAgYXBwbHlNaXhpbnMob2JqLCBjb2xsYXRlTWl4aW5zKG9iai5taXhpbnMpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob2JqLnN0YXRpY3MpIHsKICAgICAgICAgICAgZXh0ZW5kKGNsLCBvYmouc3RhdGljcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9iai5wcm9wVHlwZXMpIHsKICAgICAgICAgICAgY2wucHJvcFR5cGVzID0gb2JqLnByb3BUeXBlczsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob2JqLmRlZmF1bHRQcm9wcykgewogICAgICAgICAgICBjbC5kZWZhdWx0UHJvcHMgPSBvYmouZGVmYXVsdFByb3BzOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvYmouZ2V0RGVmYXVsdFByb3BzKSB7CiAgICAgICAgICAgIGNsLmRlZmF1bHRQcm9wcyA9IG9iai5nZXREZWZhdWx0UHJvcHMoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBGLnByb3RvdHlwZSA9IENvbXBvbmVudCQxLnByb3RvdHlwZTsKICAgICAgICAgIGNsLnByb3RvdHlwZSA9IGV4dGVuZChuZXcgRigpLCBvYmopOwogICAgICAgICAgY2wuZGlzcGxheU5hbWUgPSBvYmouZGlzcGxheU5hbWUgfHwgJ0NvbXBvbmVudCc7CiAgICAgICAgICByZXR1cm4gY2w7CiAgICAgICAgfSAvLyBGbGF0dGVuIGFuIEFycmF5IG9mIG1peGlucyB0byBhIG1hcCBvZiBtZXRob2QgbmFtZSB0byBtaXhpbiBpbXBsZW1lbnRhdGlvbnMKCgogICAgICAgIGZ1bmN0aW9uIGNvbGxhdGVNaXhpbnMobWl4aW5zKSB7CiAgICAgICAgICB2YXIga2V5ZWQgPSB7fTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgbWl4aW4gPSBtaXhpbnNbaV07CgogICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWl4aW4pIHsKICAgICAgICAgICAgICBpZiAobWl4aW4uaGFzT3duUHJvcGVydHkoa2V5KSAmJiB0eXBlb2YgbWl4aW5ba2V5XSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgKGtleWVkW2tleV0gfHwgKGtleWVkW2tleV0gPSBbXSkpLnB1c2gobWl4aW5ba2V5XSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGtleWVkOwogICAgICAgIH0gLy8gYXBwbHkgYSBtYXBwaW5nIG9mIEFycmF5cyBvZiBtaXhpbiBtZXRob2RzIHRvIGEgY29tcG9uZW50IHByb3RvdHlwZQoKCiAgICAgICAgZnVuY3Rpb24gYXBwbHlNaXhpbnMocHJvdG8sIG1peGlucykgewogICAgICAgICAgZm9yICh2YXIga2V5IGluIG1peGlucykgewogICAgICAgICAgICBpZiAobWl4aW5zLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICBwcm90b1trZXldID0gbXVsdGlob29rKG1peGluc1trZXldLmNvbmNhdChwcm90b1trZXldIHx8IEFSUiksIGtleSA9PT0gJ2dldERlZmF1bHRQcm9wcycgfHwga2V5ID09PSAnZ2V0SW5pdGlhbFN0YXRlJyB8fCBrZXkgPT09ICdnZXRDaGlsZENvbnRleHQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYmluZEFsbChjdHgpIHsKICAgICAgICAgIGZvciAodmFyIGkgaW4gY3R4KSB7CiAgICAgICAgICAgIHZhciB2ID0gY3R4W2ldOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnZnVuY3Rpb24nICYmICF2Ll9fYm91bmQgJiYgIUFVVE9CSU5EX0JMQUNLTElTVC5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgICAgICAgIChjdHhbaV0gPSB2LmJpbmQoY3R4KSkuX19ib3VuZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbGxNZXRob2QoY3R4LCBtLCBhcmdzKSB7CiAgICAgICAgICBpZiAodHlwZW9mIG0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIG0gPSBjdHguY29uc3RydWN0b3IucHJvdG90eXBlW21dOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICByZXR1cm4gbS5hcHBseShjdHgsIGFyZ3MpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbXVsdGlob29rKGhvb2tzLCBza2lwRHVwbGljYXRlcykgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwogICAgICAgICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgICAgICAgdmFyIHJldDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgciA9IGNhbGxNZXRob2QodGhpcyQxLCBob29rc1tpXSwgYXJndW1lbnRzJDEpOwoKICAgICAgICAgICAgICBpZiAoc2tpcER1cGxpY2F0ZXMgJiYgciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoIXJldCkgewogICAgICAgICAgICAgICAgICByZXQgPSB7fTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcikgewogICAgICAgICAgICAgICAgICBpZiAoci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0W2tleV0gPSByW2tleV07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgcmV0ID0gcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbmV3Q29tcG9uZW50SG9vayhwcm9wcywgY29udGV4dCkgewogICAgICAgICAgcHJvcHNIb29rLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpOwogICAgICAgICAgdGhpcy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gbXVsdGlob29rKFtwcm9wc0hvb2ssIHRoaXMuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyB8fCAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyddKTsKICAgICAgICAgIHRoaXMucmVuZGVyID0gbXVsdGlob29rKFtwcm9wc0hvb2ssIGJlZm9yZVJlbmRlciwgdGhpcy5yZW5kZXIgfHwgJ3JlbmRlcicsIGFmdGVyUmVuZGVyXSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcm9wc0hvb2socHJvcHMsIGNvbnRleHQpIHsKICAgICAgICAgIGlmICghcHJvcHMpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSAvLyBSZWFjdCBhbm5veWluZ2x5IHNwZWNpYWwtY2FzZXMgc2luZ2xlIGNoaWxkcmVuLCBhbmQgc29tZSByZWFjdCBjb21wb25lbnRzIGFyZSByaWRpY3Vsb3VzbHkgc3RyaWN0IGFib3V0IHRoaXMuCgoKICAgICAgICAgIHZhciBjID0gcHJvcHMuY2hpbGRyZW47CgogICAgICAgICAgaWYgKGMgJiYgQXJyYXkuaXNBcnJheShjKSAmJiBjLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IGNbMF07IC8vIGJ1dCBpdHMgdG90YWxseSBzdGlsbCBnb2luZyB0byBiZSBhbiBBcnJheS4KCiAgICAgICAgICAgIGlmIChwcm9wcy5jaGlsZHJlbiAmJiBfdHlwZW9mNChwcm9wcy5jaGlsZHJlbikgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgcHJvcHMuY2hpbGRyZW4ubGVuZ3RoID0gMTsKICAgICAgICAgICAgICBwcm9wcy5jaGlsZHJlblswXSA9IHByb3BzLmNoaWxkcmVuOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIGFkZCBwcm9wdHlwZSBjaGVja2luZwoKCiAgICAgICAgICBpZiAoREVWKSB7CiAgICAgICAgICAgIHZhciBjdG9yID0gdHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogdGhpcy5jb25zdHJ1Y3RvciwKICAgICAgICAgICAgICAgIHByb3BUeXBlcyA9IHRoaXMucHJvcFR5cGVzIHx8IGN0b3IucHJvcFR5cGVzOwogICAgICAgICAgICB2YXIgZGlzcGxheU5hbWUgPSB0aGlzLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZTsKCiAgICAgICAgICAgIGlmIChwcm9wVHlwZXMpIHsKICAgICAgICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcHJvcF90eXBlc19fX2RlZmF1bHQuYS5jaGVja1Byb3BUeXBlcyhwcm9wVHlwZXMsIHByb3BzLCAncHJvcCcsIGRpc3BsYXlOYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYmVmb3JlUmVuZGVyKHByb3BzKSB7CiAgICAgICAgICBjdXJyZW50Q29tcG9uZW50ID0gdGhpczsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFmdGVyUmVuZGVyKCkgewogICAgICAgICAgaWYgKGN1cnJlbnRDb21wb25lbnQgPT09IHRoaXMpIHsKICAgICAgICAgICAgY3VycmVudENvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBDb21wb25lbnQkMShwcm9wcywgY29udGV4dCwgb3B0cykgewogICAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJDb21wb25lbnQiXS5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KTsKCiAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5nZXRJbml0aWFsU3RhdGUgPyB0aGlzLmdldEluaXRpYWxTdGF0ZSgpIDoge307CiAgICAgICAgICB0aGlzLnJlZnMgPSB7fTsKICAgICAgICAgIHRoaXMuX3JlZlByb3hpZXMgPSB7fTsKCiAgICAgICAgICBpZiAob3B0cyAhPT0gQllQQVNTX0hPT0spIHsKICAgICAgICAgICAgbmV3Q29tcG9uZW50SG9vay5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGV4dGVuZChDb21wb25lbnQkMS5wcm90b3R5cGUgPSBuZXcgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3ByZWFjdF9fWyJDb21wb25lbnQiXSgpLCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcjogQ29tcG9uZW50JDEsCiAgICAgICAgICBpc1JlYWN0Q29tcG9uZW50OiB7fSwKICAgICAgICAgIHJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gcmVwbGFjZVN0YXRlKHN0YXRlLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSwgY2FsbGJhY2spOwoKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzJDEuc3RhdGUpIHsKICAgICAgICAgICAgICBpZiAoIShpIGluIHN0YXRlKSkgewogICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMkMS5zdGF0ZVtpXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBnZXRET01Ob2RlOiBmdW5jdGlvbiBnZXRET01Ob2RlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5iYXNlOwogICAgICAgICAgfSwKICAgICAgICAgIGlzTW91bnRlZDogZnVuY3Rpb24gaXNNb3VudGVkKCkgewogICAgICAgICAgICByZXR1cm4gISF0aGlzLmJhc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGZ1bmN0aW9uIFB1cmVDb21wb25lbnQocHJvcHMsIGNvbnRleHQpIHsKICAgICAgICAgIENvbXBvbmVudCQxLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpOwogICAgICAgIH0KCiAgICAgICAgRi5wcm90b3R5cGUgPSBDb21wb25lbnQkMS5wcm90b3R5cGU7CiAgICAgICAgUHVyZUNvbXBvbmVudC5wcm90b3R5cGUgPSBuZXcgRigpOwogICAgICAgIFB1cmVDb21wb25lbnQucHJvdG90eXBlLmlzUHVyZVJlYWN0Q29tcG9uZW50ID0gdHJ1ZTsKCiAgICAgICAgUHVyZUNvbXBvbmVudC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gKHByb3BzLCBzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIHNoYWxsb3dEaWZmZXJzKHRoaXMucHJvcHMsIHByb3BzKSB8fCBzaGFsbG93RGlmZmVycyh0aGlzLnN0YXRlLCBzdGF0ZSk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGluZGV4ID0gewogICAgICAgICAgdmVyc2lvbjogdmVyc2lvbiwKICAgICAgICAgIERPTTogRE9NLAogICAgICAgICAgUHJvcFR5cGVzOiBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfcHJvcF90eXBlc19fX2RlZmF1bHQuYSwKICAgICAgICAgIENoaWxkcmVuOiBDaGlsZHJlbiwKICAgICAgICAgIHJlbmRlcjogcmVuZGVyJDEsCiAgICAgICAgICBjcmVhdGVDbGFzczogY3JlYXRlQ2xhc3MsCiAgICAgICAgICBjcmVhdGVGYWN0b3J5OiBjcmVhdGVGYWN0b3J5LAogICAgICAgICAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCwKICAgICAgICAgIGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50JDEsCiAgICAgICAgICBpc1ZhbGlkRWxlbWVudDogaXNWYWxpZEVsZW1lbnQsCiAgICAgICAgICBmaW5kRE9NTm9kZTogZmluZERPTU5vZGUsCiAgICAgICAgICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiB1bm1vdW50Q29tcG9uZW50QXROb2RlLAogICAgICAgICAgQ29tcG9uZW50OiBDb21wb25lbnQkMSwKICAgICAgICAgIFB1cmVDb21wb25lbnQ6IFB1cmVDb21wb25lbnQsCiAgICAgICAgICB1bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogcmVuZGVyU3VidHJlZUludG9Db250YWluZXIKICAgICAgICB9OwogICAgICAgIC8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8KCiAgICAgICAgX193ZWJwYWNrX2V4cG9ydHNfX1siZGVmYXVsdCJdID0gaW5kZXg7CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCiAgICAgIH0pLmNhbGwoX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICBpZiAoIWlzT2JqZWN0KGl0KSkgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpOwogICAgICAgIHJldHVybiBpdDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTsKCiAgICAgIHZhciB0b1ByaW1pdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpOwoKICAgICAgdmFyIGRQID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwogICAgICBleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykgewogICAgICAgIGFuT2JqZWN0KE8pOwogICAgICAgIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICAgICAgICBhbk9iamVjdChBdHRyaWJ1dGVzKTsKICAgICAgICBpZiAoSUU4X0RPTV9ERUZJTkUpIHRyeSB7CiAgICAgICAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLyogZW1wdHkgKi8KICAgICAgICB9CiAgICAgICAgaWYgKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcykgdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsKICAgICAgICBpZiAoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKSBPW1BdID0gQXR0cmlidXRlcy52YWx1ZTsKICAgICAgICByZXR1cm4gTzsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQogICAgICBtb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIDc7CiAgICAgICAgICB9CiAgICAgICAgfSkuYSAhPSA3OwogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyCiAgICAgIHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTsgLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0CiAgICAgIC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpcwogICAgICAvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhCiAgICAgIC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuCgogICAgICB2YXIgY2FjaGVkU2V0VGltZW91dDsKICAgICAgdmFyIGNhY2hlZENsZWFyVGltZW91dDsKCiAgICAgIGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTsKICAgICAgfQoKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0OwogICAgICAgIH0KICAgICAgfSkoKTsKCiAgICAgIGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7CiAgICAgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHsKICAgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9ucwogICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTsKICAgICAgICB9IC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkCgoKICAgICAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHsKICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwogICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzCiAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseQogICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yCiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHsKICAgICAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHsKICAgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9ucwogICAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpOwogICAgICAgIH0gLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZAoKCiAgICAgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7CiAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7CiAgICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzcwogICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHkKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLgogICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0CiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHF1ZXVlID0gW107CiAgICAgIHZhciBkcmFpbmluZyA9IGZhbHNlOwogICAgICB2YXIgY3VycmVudFF1ZXVlOwogICAgICB2YXIgcXVldWVJbmRleCA9IC0xOwoKICAgICAgZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkgewogICAgICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZHJhaW5pbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHsKICAgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgICAgICB9CgogICAgICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICAgIGRyYWluUXVldWUoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7CiAgICAgICAgaWYgKGRyYWluaW5nKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTsKICAgICAgICBkcmFpbmluZyA9IHRydWU7CiAgICAgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDsKCiAgICAgICAgd2hpbGUgKGxlbikgewogICAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7CiAgICAgICAgICBxdWV1ZSA9IFtdOwoKICAgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkgewogICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7CiAgICAgICAgZHJhaW5pbmcgPSBmYWxzZTsKICAgICAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIH0KCiAgICAgIHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpOwoKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTsKCiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7CiAgICAgICAgfQogICAgICB9OyAvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzCgoKICAgICAgZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7CiAgICAgICAgdGhpcy5mdW4gPSBmdW47CiAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5OwogICAgICB9CgogICAgICBJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7CiAgICAgIH07CgogICAgICBwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInOwogICAgICBwcm9jZXNzLmJyb3dzZXIgPSB0cnVlOwogICAgICBwcm9jZXNzLmVudiA9IHt9OwogICAgICBwcm9jZXNzLmFyZ3YgPSBbXTsKICAgICAgcHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzCgogICAgICBwcm9jZXNzLnZlcnNpb25zID0ge307CgogICAgICBmdW5jdGlvbiBub29wKCkge30KCiAgICAgIHByb2Nlc3Mub24gPSBub29wOwogICAgICBwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDsKICAgICAgcHJvY2Vzcy5vbmNlID0gbm9vcDsKICAgICAgcHJvY2Vzcy5vZmYgPSBub29wOwogICAgICBwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDsKICAgICAgcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wOwogICAgICBwcm9jZXNzLmVtaXQgPSBub29wOwogICAgICBwcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7CiAgICAgIHByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7CgogICAgICBwcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9OwoKICAgICAgcHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7CiAgICAgIH07CgogICAgICBwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gJy8nOwogICAgICB9OwoKICAgICAgcHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpOwogICAgICB9OwoKICAgICAgcHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBfdHlwZW9mNChpdCkgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDExICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGRQID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCiAgICAgIHZhciBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkgPyBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsKICAgICAgfSA6IGZ1bmN0aW9uIChvYmplY3QsIGtleSwgdmFsdWUpIHsKICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlOwogICAgICAgIHJldHVybiBvYmplY3Q7CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICB2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCBrZXkpIHsKICAgICAgICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmcKICAgICAgdmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4sIHRoYXQsIGxlbmd0aCkgewogICAgICAgIGFGdW5jdGlvbihmbik7CiAgICAgICAgaWYgKHRoYXQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZuOwoKICAgICAgICBzd2l0Y2ggKGxlbmd0aCkgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpOwogICAgICAgICAgICB9OwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkKICAgICAgICAvKiAuLi5hcmdzICovCiAgICAgICAgewogICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleGVjKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiAhIWV4ZWMoKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7fTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncwogICAgICB2YXIgSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpOwoKICAgICAgdmFyIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudCkKICAgICAgdmFyIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGlzRGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjAyKTsKCiAgICAgIHZhciBNSUxMSVNFQ09ORFNfSU5fSE9VUiA9IDM2MDAwMDA7CiAgICAgIHZhciBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFID0gNjAwMDA7CiAgICAgIHZhciBERUZBVUxUX0FERElUSU9OQUxfRElHSVRTID0gMjsKICAgICAgdmFyIHBhcnNlVG9rZW5EYXRlVGltZURlbGltZXRlciA9IC9bVCBdLzsKICAgICAgdmFyIHBhcnNlVG9rZW5QbGFpblRpbWUgPSAvOi87IC8vIHllYXIgdG9rZW5zCgogICAgICB2YXIgcGFyc2VUb2tlbllZID0gL14oXGR7Mn0pJC87CiAgICAgIHZhciBwYXJzZVRva2Vuc1lZWSA9IFsvXihbKy1dXGR7Mn0pJC8sIC8vIDAgYWRkaXRpb25hbCBkaWdpdHMKICAgICAgL14oWystXVxkezN9KSQvLCAvLyAxIGFkZGl0aW9uYWwgZGlnaXQKICAgICAgL14oWystXVxkezR9KSQvIC8vIDIgYWRkaXRpb25hbCBkaWdpdHMKICAgICAgXTsKICAgICAgdmFyIHBhcnNlVG9rZW5ZWVlZID0gL14oXGR7NH0pLzsKICAgICAgdmFyIHBhcnNlVG9rZW5zWVlZWVkgPSBbL14oWystXVxkezR9KS8sIC8vIDAgYWRkaXRpb25hbCBkaWdpdHMKICAgICAgL14oWystXVxkezV9KS8sIC8vIDEgYWRkaXRpb25hbCBkaWdpdAogICAgICAvXihbKy1dXGR7Nn0pLyAvLyAyIGFkZGl0aW9uYWwgZGlnaXRzCiAgICAgIF07IC8vIGRhdGUgdG9rZW5zCgogICAgICB2YXIgcGFyc2VUb2tlbk1NID0gL14tKFxkezJ9KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbkRERCA9IC9eLT8oXGR7M30pJC87CiAgICAgIHZhciBwYXJzZVRva2VuTU1ERCA9IC9eLT8oXGR7Mn0pLT8oXGR7Mn0pJC87CiAgICAgIHZhciBwYXJzZVRva2VuV3d3ID0gL14tP1coXGR7Mn0pJC87CiAgICAgIHZhciBwYXJzZVRva2VuV3d3RCA9IC9eLT9XKFxkezJ9KS0/KFxkezF9KSQvOyAvLyB0aW1lIHRva2VucwoKICAgICAgdmFyIHBhcnNlVG9rZW5ISCA9IC9eKFxkezJ9KFsuLF1cZCopPykkLzsKICAgICAgdmFyIHBhcnNlVG9rZW5ISE1NID0gL14oXGR7Mn0pOj8oXGR7Mn0oWy4sXVxkKik/KSQvOwogICAgICB2YXIgcGFyc2VUb2tlbkhITU1TUyA9IC9eKFxkezJ9KTo/KFxkezJ9KTo/KFxkezJ9KFsuLF1cZCopPykkLzsgLy8gdGltZXpvbmUgdG9rZW5zCgogICAgICB2YXIgcGFyc2VUb2tlblRpbWV6b25lID0gLyhbWistXS4qKSQvOwogICAgICB2YXIgcGFyc2VUb2tlblRpbWV6b25lWiA9IC9eKFopJC87CiAgICAgIHZhciBwYXJzZVRva2VuVGltZXpvbmVISCA9IC9eKFsrLV0pKFxkezJ9KSQvOwogICAgICB2YXIgcGFyc2VUb2tlblRpbWV6b25lSEhNTSA9IC9eKFsrLV0pKFxkezJ9KTo/KFxkezJ9KSQvOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLgogICAgICAgKgogICAgICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLgogICAgICAgKgogICAgICAgKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuCiAgICAgICAqCiAgICAgICAqIElmIGFuIGFyZ3VtZW50IGlzIGEgc3RyaW5nLCB0aGUgZnVuY3Rpb24gdHJpZXMgdG8gcGFyc2UgaXQuCiAgICAgICAqIEZ1bmN0aW9uIGFjY2VwdHMgY29tcGxldGUgSVNPIDg2MDEgZm9ybWF0cyBhcyB3ZWxsIGFzIHBhcnRpYWwgaW1wbGVtZW50YXRpb25zLgogICAgICAgKiBJU08gODYwMTogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMQogICAgICAgKgogICAgICAgKiBJZiBhbGwgYWJvdmUgZmFpbHMsIHRoZSBmdW5jdGlvbiBwYXNzZXMgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIERhdGUgY29uc3RydWN0b3IuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0CiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9ucwogICAgICAgKiBAcGFyYW0gezAgfCAxIHwgMn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0CiAgICAgICAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZQogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBDb252ZXJ0IHN0cmluZyAnMjAxNC0wMi0xMVQxMTozMDozMCcgdG8gZGF0ZToKICAgICAgICogdmFyIHJlc3VsdCA9IHBhcnNlKCcyMDE0LTAyLTExVDExOjMwOjMwJykKICAgICAgICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzAKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gUGFyc2Ugc3RyaW5nICcrMDIwMTQxMDEnLAogICAgICAgKiAvLyBpZiB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdCBpcyAxOgogICAgICAgKiB2YXIgcmVzdWx0ID0gcGFyc2UoJyswMjAxNDEwMScsIHthZGRpdGlvbmFsRGlnaXRzOiAxfSkKICAgICAgICogLy89PiBGcmkgQXByIDExIDIwMTQgMDA6MDA6MDAKICAgICAgICovCgogICAgICBmdW5jdGlvbiBwYXJzZShhcmd1bWVudCwgZGlydHlPcHRpb25zKSB7CiAgICAgICAgaWYgKGlzRGF0ZShhcmd1bWVudCkpIHsKICAgICAgICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMAogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307CiAgICAgICAgdmFyIGFkZGl0aW9uYWxEaWdpdHMgPSBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM7CgogICAgICAgIGlmIChhZGRpdGlvbmFsRGlnaXRzID09IG51bGwpIHsKICAgICAgICAgIGFkZGl0aW9uYWxEaWdpdHMgPSBERUZBVUxUX0FERElUSU9OQUxfRElHSVRTOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZGRpdGlvbmFsRGlnaXRzID0gTnVtYmVyKGFkZGl0aW9uYWxEaWdpdHMpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGVTdHJpbmdzID0gc3BsaXREYXRlU3RyaW5nKGFyZ3VtZW50KTsKICAgICAgICB2YXIgcGFyc2VZZWFyUmVzdWx0ID0gcGFyc2VZZWFyKGRhdGVTdHJpbmdzLmRhdGUsIGFkZGl0aW9uYWxEaWdpdHMpOwogICAgICAgIHZhciB5ZWFyID0gcGFyc2VZZWFyUmVzdWx0LnllYXI7CiAgICAgICAgdmFyIHJlc3REYXRlU3RyaW5nID0gcGFyc2VZZWFyUmVzdWx0LnJlc3REYXRlU3RyaW5nOwogICAgICAgIHZhciBkYXRlID0gcGFyc2VEYXRlKHJlc3REYXRlU3RyaW5nLCB5ZWFyKTsKCiAgICAgICAgaWYgKGRhdGUpIHsKICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTsKICAgICAgICAgIHZhciB0aW1lID0gMDsKICAgICAgICAgIHZhciBvZmZzZXQ7CgogICAgICAgICAgaWYgKGRhdGVTdHJpbmdzLnRpbWUpIHsKICAgICAgICAgICAgdGltZSA9IHBhcnNlVGltZShkYXRlU3RyaW5ncy50aW1lKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZGF0ZVN0cmluZ3MudGltZXpvbmUpIHsKICAgICAgICAgICAgb2Zmc2V0ID0gcGFyc2VUaW1lem9uZShkYXRlU3RyaW5ncy50aW1lem9uZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBnZXQgb2Zmc2V0IGFjY3VyYXRlIHRvIGhvdXIgaW4gdGltZXpvbmVzIHRoYXQgY2hhbmdlIG9mZnNldAogICAgICAgICAgICBvZmZzZXQgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lKS5nZXRUaW1lem9uZU9mZnNldCgpOwogICAgICAgICAgICBvZmZzZXQgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lICsgb2Zmc2V0ICogTUlMTElTRUNPTkRTX0lOX01JTlVURSkuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSArIG9mZnNldCAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gc3BsaXREYXRlU3RyaW5nKGRhdGVTdHJpbmcpIHsKICAgICAgICB2YXIgZGF0ZVN0cmluZ3MgPSB7fTsKICAgICAgICB2YXIgYXJyYXkgPSBkYXRlU3RyaW5nLnNwbGl0KHBhcnNlVG9rZW5EYXRlVGltZURlbGltZXRlcik7CiAgICAgICAgdmFyIHRpbWVTdHJpbmc7CgogICAgICAgIGlmIChwYXJzZVRva2VuUGxhaW5UaW1lLnRlc3QoYXJyYXlbMF0pKSB7CiAgICAgICAgICBkYXRlU3RyaW5ncy5kYXRlID0gbnVsbDsKICAgICAgICAgIHRpbWVTdHJpbmcgPSBhcnJheVswXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGFycmF5WzBdOwogICAgICAgICAgdGltZVN0cmluZyA9IGFycmF5WzFdOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRpbWVTdHJpbmcpIHsKICAgICAgICAgIHZhciB0b2tlbiA9IHBhcnNlVG9rZW5UaW1lem9uZS5leGVjKHRpbWVTdHJpbmcpOwoKICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZy5yZXBsYWNlKHRva2VuWzFdLCAnJyk7CiAgICAgICAgICAgIGRhdGVTdHJpbmdzLnRpbWV6b25lID0gdG9rZW5bMV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBkYXRlU3RyaW5nczsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcGFyc2VZZWFyKGRhdGVTdHJpbmcsIGFkZGl0aW9uYWxEaWdpdHMpIHsKICAgICAgICB2YXIgcGFyc2VUb2tlbllZWSA9IHBhcnNlVG9rZW5zWVlZW2FkZGl0aW9uYWxEaWdpdHNdOwogICAgICAgIHZhciBwYXJzZVRva2VuWVlZWVkgPSBwYXJzZVRva2Vuc1lZWVlZW2FkZGl0aW9uYWxEaWdpdHNdOwogICAgICAgIHZhciB0b2tlbjsgLy8gWVlZWSBvciDCsVlZWVlZCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbllZWVkuZXhlYyhkYXRlU3RyaW5nKSB8fCBwYXJzZVRva2VuWVlZWVkuZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICB2YXIgeWVhclN0cmluZyA9IHRva2VuWzFdOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgeWVhcjogcGFyc2VJbnQoeWVhclN0cmluZywgMTApLAogICAgICAgICAgICByZXN0RGF0ZVN0cmluZzogZGF0ZVN0cmluZy5zbGljZSh5ZWFyU3RyaW5nLmxlbmd0aCkKICAgICAgICAgIH07CiAgICAgICAgfSAvLyBZWSBvciDCsVlZWQoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuWVkuZXhlYyhkYXRlU3RyaW5nKSB8fCBwYXJzZVRva2VuWVlZLmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgdmFyIGNlbnR1cnlTdHJpbmcgPSB0b2tlblsxXTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHllYXI6IHBhcnNlSW50KGNlbnR1cnlTdHJpbmcsIDEwKSAqIDEwMCwKICAgICAgICAgICAgcmVzdERhdGVTdHJpbmc6IGRhdGVTdHJpbmcuc2xpY2UoY2VudHVyeVN0cmluZy5sZW5ndGgpCiAgICAgICAgICB9OwogICAgICAgIH0gLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXIKCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICB5ZWFyOiBudWxsCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGVTdHJpbmcsIHllYXIpIHsKICAgICAgICAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhcgogICAgICAgIGlmICh5ZWFyID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHZhciB0b2tlbjsKICAgICAgICB2YXIgZGF0ZTsKICAgICAgICB2YXIgbW9udGg7CiAgICAgICAgdmFyIHdlZWs7IC8vIFlZWVkKCiAgICAgICAgaWYgKGRhdGVTdHJpbmcubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMCk7CiAgICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIpOwogICAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgICAgfSAvLyBZWVlZLU1NCgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5NTS5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgICAgICAgIG1vbnRoID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKSAtIDE7CiAgICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIG1vbnRoKTsKICAgICAgICAgIHJldHVybiBkYXRlOwogICAgICAgIH0gLy8gWVlZWS1EREQgb3IgWVlZWURERAoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuRERELmV4ZWMoZGF0ZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDApOwogICAgICAgICAgdmFyIGRheU9mWWVhciA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCk7CiAgICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIGRheU9mWWVhcik7CiAgICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgICB9IC8vIFlZWVktTU0tREQgb3IgWVlZWU1NREQKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlbk1NREQuZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMCk7CiAgICAgICAgICBtb250aCA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCkgLSAxOwogICAgICAgICAgdmFyIGRheSA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCk7CiAgICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIG1vbnRoLCBkYXkpOwogICAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgICAgfSAvLyBZWVlZLVd3dyBvciBZWVlZV3d3CgoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5Xd3cuZXhlYyhkYXRlU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICB3ZWVrID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKSAtIDE7CiAgICAgICAgICByZXR1cm4gZGF5T2ZJU09ZZWFyKHllYXIsIHdlZWspOwogICAgICAgIH0gLy8gWVlZWS1Xd3ctRCBvciBZWVlZV3d3RAoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuV3d3RC5leGVjKGRhdGVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHdlZWsgPSBwYXJzZUludCh0b2tlblsxXSwgMTApIC0gMTsKICAgICAgICAgIHZhciBkYXlPZldlZWsgPSBwYXJzZUludCh0b2tlblsyXSwgMTApIC0gMTsKICAgICAgICAgIHJldHVybiBkYXlPZklTT1llYXIoeWVhciwgd2VlaywgZGF5T2ZXZWVrKTsKICAgICAgICB9IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCBkYXRlCgoKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcGFyc2VUaW1lKHRpbWVTdHJpbmcpIHsKICAgICAgICB2YXIgdG9rZW47CiAgICAgICAgdmFyIGhvdXJzOwogICAgICAgIHZhciBtaW51dGVzOyAvLyBoaAoKICAgICAgICB0b2tlbiA9IHBhcnNlVG9rZW5ISC5leGVjKHRpbWVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGhvdXJzID0gcGFyc2VGbG9hdCh0b2tlblsxXS5yZXBsYWNlKCcsJywgJy4nKSk7CiAgICAgICAgICByZXR1cm4gaG91cnMgJSAyNCAqIE1JTExJU0VDT05EU19JTl9IT1VSOwogICAgICAgIH0gLy8gaGg6bW0gb3IgaGhtbQoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuSEhNTS5leGVjKHRpbWVTdHJpbmcpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKTsKICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUZsb2F0KHRva2VuWzJdLnJlcGxhY2UoJywnLCAnLicpKTsKICAgICAgICAgIHJldHVybiBob3VycyAlIDI0ICogTUlMTElTRUNPTkRTX0lOX0hPVVIgKyBtaW51dGVzICogTUlMTElTRUNPTkRTX0lOX01JTlVURTsKICAgICAgICB9IC8vIGhoOm1tOnNzIG9yIGhobW1zcwoKCiAgICAgICAgdG9rZW4gPSBwYXJzZVRva2VuSEhNTVNTLmV4ZWModGltZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0b2tlblsxXSwgMTApOwogICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCk7CiAgICAgICAgICB2YXIgc2Vjb25kcyA9IHBhcnNlRmxvYXQodG9rZW5bM10ucmVwbGFjZSgnLCcsICcuJykpOwogICAgICAgICAgcmV0dXJuIGhvdXJzICUgMjQgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUiArIG1pbnV0ZXMgKiBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFICsgc2Vjb25kcyAqIDEwMDA7CiAgICAgICAgfSAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgdGltZQoKCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHBhcnNlVGltZXpvbmUodGltZXpvbmVTdHJpbmcpIHsKICAgICAgICB2YXIgdG9rZW47CiAgICAgICAgdmFyIGFic29sdXRlT2Zmc2V0OyAvLyBaCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlblRpbWV6b25lWi5leGVjKHRpbWV6b25lU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IC8vIMKxaGgKCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlblRpbWV6b25lSEguZXhlYyh0aW1lem9uZVN0cmluZyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgYWJzb2x1dGVPZmZzZXQgPSBwYXJzZUludCh0b2tlblsyXSwgMTApICogNjA7CiAgICAgICAgICByZXR1cm4gdG9rZW5bMV0gPT09ICcrJyA/IC1hYnNvbHV0ZU9mZnNldCA6IGFic29sdXRlT2Zmc2V0OwogICAgICAgIH0gLy8gwrFoaDptbSBvciDCsWhobW0KCgogICAgICAgIHRva2VuID0gcGFyc2VUb2tlblRpbWV6b25lSEhNTS5leGVjKHRpbWV6b25lU3RyaW5nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBhYnNvbHV0ZU9mZnNldCA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCkgKiA2MCArIHBhcnNlSW50KHRva2VuWzNdLCAxMCk7CiAgICAgICAgICByZXR1cm4gdG9rZW5bMV0gPT09ICcrJyA/IC1hYnNvbHV0ZU9mZnNldCA6IGFic29sdXRlT2Zmc2V0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGRheU9mSVNPWWVhcihpc29ZZWFyLCB3ZWVrLCBkYXkpIHsKICAgICAgICB3ZWVrID0gd2VlayB8fCAwOwogICAgICAgIGRheSA9IGRheSB8fCAwOwogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCk7CiAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcihpc29ZZWFyLCAwLCA0KTsKICAgICAgICB2YXIgZm91cnRoT2ZKYW51YXJ5RGF5ID0gZGF0ZS5nZXRVVENEYXkoKSB8fCA3OwogICAgICAgIHZhciBkaWZmID0gd2VlayAqIDcgKyBkYXkgKyAxIC0gZm91cnRoT2ZKYW51YXJ5RGF5OwogICAgICAgIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpZmYpOwogICAgICAgIHJldHVybiBkYXRlOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHBhcnNlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0bWFwLCB2YWx1ZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhKGJpdG1hcCAmIDEpLAogICAgICAgICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLAogICAgICAgICAgd3JpdGFibGU6ICEoYml0bWFwICYgNCksCiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciAkYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSkodHJ1ZSk7IC8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKCgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbiAoaXRlcmF0ZWQpIHsKICAgICAgICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CgogICAgICAgIHRoaXMuX2kgPSAwOyAvLyBuZXh0IGluZGV4CiAgICAgICAgLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIE8gPSB0aGlzLl90OwogICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2k7CiAgICAgICAgdmFyIHBvaW50OwogICAgICAgIGlmIChpbmRleCA+PSBPLmxlbmd0aCkgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsCiAgICAgICAgICBkb25lOiB0cnVlCiAgICAgICAgfTsKICAgICAgICBwb2ludCA9ICRhdChPLCBpbmRleCk7CiAgICAgICAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBwb2ludCwKICAgICAgICAgIGRvbmU6IGZhbHNlCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDIxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB0cnVlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCiAgICAgIHZhciAka2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpOwoKICAgICAgdmFyIGVudW1CdWdLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMoTykgewogICAgICAgIHJldHVybiAka2V5cyhPLCBlbnVtQnVnS2V5cyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDIzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDI0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICBpZiAodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpIHRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7CiAgICAgICAgcmV0dXJuIGl0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIHZhciBpZCA9IDA7CiAgICAgIHZhciBweCA9IE1hdGgucmFuZG9tKCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyNiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBkZWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLmY7CgogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0LCB0YWcsIHN0YXQpIHsKICAgICAgICBpZiAoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSkgZGVmKGl0LCBUQUcsIHsKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiB0YWcKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7CgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7CgogICAgICB2YXIgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CgogICAgICB2YXIgVE9fU1RSSU5HX1RBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7CgogICAgICB2YXIgRE9NSXRlcmFibGVzID0gKCdDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LCcgKyAnRE9NVG9rZW5MaXN0LERhdGFUcmFuc2Zlckl0ZW1MaXN0LEZpbGVMaXN0LEhUTUxBbGxDb2xsZWN0aW9uLEhUTUxDb2xsZWN0aW9uLEhUTUxGb3JtRWxlbWVudCxIVE1MU2VsZWN0RWxlbWVudCwnICsgJ01lZGlhTGlzdCxNaW1lVHlwZUFycmF5LE5hbWVkTm9kZU1hcCxOb2RlTGlzdCxQYWludFJlcXVlc3RMaXN0LFBsdWdpbixQbHVnaW5BcnJheSxTVkdMZW5ndGhMaXN0LFNWR051bWJlckxpc3QsJyArICdTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCwnICsgJ1RleHRUcmFja0xpc3QsVG91Y2hMaXN0Jykuc3BsaXQoJywnKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgRE9NSXRlcmFibGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIE5BTUUgPSBET01JdGVyYWJsZXNbaV07CiAgICAgICAgdmFyIENvbGxlY3Rpb24gPSBnbG9iYWxbTkFNRV07CiAgICAgICAgdmFyIHByb3RvID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTsKICAgICAgICBpZiAocHJvdG8gJiYgIXByb3RvW1RPX1NUUklOR19UQUddKSBoaWRlKHByb3RvLCBUT19TVFJJTkdfVEFHLCBOQU1FKTsKICAgICAgICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7CiAgICAgIH0KICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMjggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgICAgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgdmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oODMpOwoKICAgICAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MlsiZGVmYXVsdCJdKSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICAgICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICAgICAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgICAgICAgfTsKICAgICAgfSgpOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKICAgICAgdmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudDsgLy8gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcgaW4gb2xkIElFCgoKICAgICAgdmFyIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsgLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKICAgICAgLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcKCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgUykgewogICAgICAgIGlmICghaXNPYmplY3QoaXQpKSByZXR1cm4gaXQ7CiAgICAgICAgdmFyIGZuLCB2YWw7CiAgICAgICAgaWYgKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7CiAgICAgICAgaWYgKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpIHJldHVybiB2YWw7CiAgICAgICAgaWYgKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKSByZXR1cm4gdmFsOwogICAgICAgIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDMzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuCiAgICAgICAqCiAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAqLwoKICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJzsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlc1NlY3JldDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAzNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8vIDcuMS40IFRvSW50ZWdlcgogICAgICB2YXIgY2VpbCA9IE1hdGguY2VpbDsKICAgICAgdmFyIGZsb29yID0gTWF0aC5mbG9vcjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDM1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudCkKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICBpZiAoaXQgPT0gdW5kZWZpbmVkKSB0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiICsgaXQpOwogICAgICAgIHJldHVybiBpdDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMzYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBkUHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7CgogICAgICB2YXIgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKCiAgICAgIHZhciBJRV9QUk9UTyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpKCdJRV9QUk9UTycpOwoKICAgICAgdmFyIEVtcHR5ID0gZnVuY3Rpb24gRW1wdHkoKSB7CiAgICAgICAgLyogZW1wdHkgKi8KICAgICAgfTsKCiAgICAgIHZhciBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsgLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZQoKICAgICAgdmFyIF9jcmVhdGVEaWN0ID0gZnVuY3Rpb24gY3JlYXRlRGljdCgpIHsKICAgICAgICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1ZwogICAgICAgIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSgnaWZyYW1lJyk7CgogICAgICAgIHZhciBpID0gZW51bUJ1Z0tleXMubGVuZ3RoOwogICAgICAgIHZhciBsdCA9ICc8JzsKICAgICAgICB2YXIgZ3QgPSAnPic7CiAgICAgICAgdmFyIGlmcmFtZURvY3VtZW50OwogICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoKICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KS5hcHBlbmRDaGlsZChpZnJhbWUpOwoKICAgICAgICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsCiAgICAgICAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKICAgICAgICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CgogICAgICAgIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgICAgICAgaWZyYW1lRG9jdW1lbnQub3BlbigpOwogICAgICAgIGlmcmFtZURvY3VtZW50LndyaXRlKGx0ICsgJ3NjcmlwdCcgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvc2NyaXB0JyArIGd0KTsKICAgICAgICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpOwogICAgICAgIF9jcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjsKCiAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgZGVsZXRlIF9jcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9jcmVhdGVEaWN0KCk7CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpIHsKICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICBpZiAoTyAhPT0gbnVsbCkgewogICAgICAgICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pOwogICAgICAgICAgcmVzdWx0ID0gbmV3IEVtcHR5KCk7CiAgICAgICAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDsgLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKCiAgICAgICAgICByZXN1bHRbSUVfUFJPVE9dID0gTzsKICAgICAgICB9IGVsc2UgcmVzdWx0ID0gX2NyZWF0ZURpY3QoKTsKCiAgICAgICAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDcuMS4xNSBUb0xlbmd0aAogICAgICB2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7CgogICAgICB2YXIgbWluID0gTWF0aC5taW47CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxCiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDM4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHNoYXJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpKCdrZXlzJyk7CgogICAgICB2YXIgdWlkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gdWlkKGtleSkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAzOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nOwogICAgICB2YXIgc3RvcmUgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7CiAgICAgIChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB7fSk7CiAgICAgIH0pKCd2ZXJzaW9ucycsIFtdKS5wdXNoKHsKICAgICAgICB2ZXJzaW9uOiBjb3JlLnZlcnNpb24sCiAgICAgICAgbW9kZTogX193ZWJwYWNrX3JlcXVpcmVfXygyMSkgPyAncHVyZScgOiAnZ2xvYmFsJywKICAgICAgICBjb3B5cmlnaHQ6ICfCqSAyMDE5IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpJwogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAnY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mJy5zcGxpdCgnLCcpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKICAgICAgdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOwoKICAgICAgdmFyIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7IC8vIEVTMyB3cm9uZyBoZXJlCgoKICAgICAgdmFyIEFSRyA9IGNvZihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGFyZ3VtZW50czsKICAgICAgfSgpKSA9PSAnQXJndW1lbnRzJzsgLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3IKCiAgICAgIHZhciB0cnlHZXQgPSBmdW5jdGlvbiB0cnlHZXQoaXQsIGtleSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gaXRba2V5XTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvKiBlbXB0eSAqLwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgdmFyIE8sIFQsIEI7CiAgICAgICAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnIC8vIEBAdG9TdHJpbmdUYWcgY2FzZQogICAgICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFQgLy8gYnVpbHRpblRhZyBjYXNlCiAgICAgICAgOiBBUkcgPyBjb2YoTykgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFjawogICAgICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA0MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBjbGFzc29mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7CgogICAgICB2YXIgSVRFUkFUT1IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpOwoKICAgICAgdmFyIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgaWYgKGl0ICE9IHVuZGVmaW5lZCkgcmV0dXJuIGl0W0lURVJBVE9SXSB8fCBpdFsnQEBpdGVyYXRvciddIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDQzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyAyNS40LjEuNSBOZXdQcm9taXNlQ2FwYWJpbGl0eShDKQoKICAgICAgdmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoKICAgICAgZnVuY3Rpb24gUHJvbWlzZUNhcGFiaWxpdHkoQykgewogICAgICAgIHZhciByZXNvbHZlLCByZWplY3Q7CiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IEMoZnVuY3Rpb24gKCQkcmVzb2x2ZSwgJCRyZWplY3QpIHsKICAgICAgICAgIGlmIChyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpIHRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTsKICAgICAgICAgIHJlc29sdmUgPSAkJHJlc29sdmU7CiAgICAgICAgICByZWplY3QgPSAkJHJlamVjdDsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSk7CiAgICAgICAgdGhpcy5yZWplY3QgPSBhRnVuY3Rpb24ocmVqZWN0KTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIChDKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNDQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDQ1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA0NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIGNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKICAgICAgdmFyIExJQlJBUlkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCiAgICAgIHZhciB3a3NFeHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTsKCiAgICAgIHZhciBkZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNykuZjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICB2YXIgJFN5bWJvbCA9IGNvcmUuU3ltYm9sIHx8IChjb3JlLlN5bWJvbCA9IExJQlJBUlkgPyB7fSA6IGdsb2JhbC5TeW1ib2wgfHwge30pOwogICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSAhPSAnXycgJiYgIShuYW1lIGluICRTeW1ib2wpKSBkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7CiAgICAgICAgICB2YWx1ZTogd2tzRXh0LmYobmFtZSkKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNDcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CiAgICAgIGV4cG9ydHMub21pdCA9IG9taXQ7CiAgICAgIGV4cG9ydHMuYXJyYXlzRXF1YWwgPSBhcnJheXNFcXVhbDsKCiAgICAgIHZhciBpc0VsZW1lbnRBblNGQyA9IGV4cG9ydHMuaXNFbGVtZW50QW5TRkMgPSBmdW5jdGlvbiBpc0VsZW1lbnRBblNGQyhlbGVtZW50KSB7CiAgICAgICAgdmFyIGlzTmF0aXZlRE9NRWxlbWVudCA9IHR5cGVvZiBlbGVtZW50LnR5cGUgPT09ICdzdHJpbmcnOwoKICAgICAgICBpZiAoaXNOYXRpdmVET01FbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gIWVsZW1lbnQudHlwZS5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudDsKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIG9taXQob2JqKSB7CiAgICAgICAgdmFyIGF0dHJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICAgICAgICB2YXIgcmVzdWx0ID0ge307CiAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIGlmIChhdHRycy5pbmRleE9mKGtleSkgPT09IC0xKSB7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYXJyYXlzRXF1YWwoYSwgYikgewogICAgICAgIHZhciBzYW1lT2JqZWN0ID0gYSA9PT0gYjsKCiAgICAgICAgaWYgKHNhbWVPYmplY3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5vdEJvdGhBcnJheXMgPSAhQXJyYXkuaXNBcnJheShhKSB8fCAhQXJyYXkuaXNBcnJheShiKTsKICAgICAgICB2YXIgZGlmZmVyZW50TGVuZ3RocyA9IGEubGVuZ3RoICE9PSBiLmxlbmd0aDsKCiAgICAgICAgaWYgKG5vdEJvdGhBcnJheXMgfHwgZGlmZmVyZW50TGVuZ3RocykgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGEuZXZlcnkoZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gZWxlbWVudCA9PT0gYltpbmRleF07CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG1lbW9pemVTdHJpbmcoZm4pIHsKICAgICAgICB2YXIgY2FjaGUgPSB7fTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikgewogICAgICAgICAgaWYgKCFjYWNoZVtzdHJdKSB7CiAgICAgICAgICAgIGNhY2hlW3N0cl0gPSBmbihzdHIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBjYWNoZVtzdHJdOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBoeXBoZW5hdGUgPSBleHBvcnRzLmh5cGhlbmF0ZSA9IG1lbW9pemVTdHJpbmcoZnVuY3Rpb24gKHN0cikgewogICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFtBLVpdKS9nLCAnLSQxJykudG9Mb3dlckNhc2UoKTsKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNDggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDgpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSgnZGl2JyksICdhJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiA3OwogICAgICAgICAgfQogICAgICAgIH0pLmEgIT0gNzsKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNDkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7CiAgICAgICAgfQogICAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA1MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNTEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgTElCUkFSWSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwoKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIHJlZGVmaW5lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7CgogICAgICB2YXIgaGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKICAgICAgdmFyIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKICAgICAgdmFyICRpdGVyQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpOwoKICAgICAgdmFyIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7CgogICAgICB2YXIgZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTsKCiAgICAgIHZhciBJVEVSQVRPUiA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyk7CgogICAgICB2YXIgQlVHR1kgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSk7IC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGAKCiAgICAgIHZhciBGRl9JVEVSQVRPUiA9ICdAQGl0ZXJhdG9yJzsKICAgICAgdmFyIEtFWVMgPSAna2V5cyc7CiAgICAgIHZhciBWQUxVRVMgPSAndmFsdWVzJzsKCiAgICAgIHZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24gcmV0dXJuVGhpcygpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEJhc2UsIE5BTUUsIENvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCkgewogICAgICAgICRpdGVyQ3JlYXRlKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KTsKCiAgICAgICAgdmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uIGdldE1ldGhvZChraW5kKSB7CiAgICAgICAgICBpZiAoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pIHJldHVybiBwcm90b1traW5kXTsKCiAgICAgICAgICBzd2l0Y2ggKGtpbmQpIHsKICAgICAgICAgICAgY2FzZSBLRVlTOgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBrZXlzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgY2FzZSBWQUxVRVM6CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHZhbHVlcygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsKICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAgICAgdmFyIFRBRyA9IE5BTUUgKyAnIEl0ZXJhdG9yJzsKICAgICAgICB2YXIgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTOwogICAgICAgIHZhciBWQUxVRVNfQlVHID0gZmFsc2U7CiAgICAgICAgdmFyIHByb3RvID0gQmFzZS5wcm90b3R5cGU7CiAgICAgICAgdmFyICRuYXRpdmUgPSBwcm90b1tJVEVSQVRPUl0gfHwgcHJvdG9bRkZfSVRFUkFUT1JdIHx8IERFRkFVTFQgJiYgcHJvdG9bREVGQVVMVF07CiAgICAgICAgdmFyICRkZWZhdWx0ID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCk7CiAgICAgICAgdmFyICRlbnRyaWVzID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZDsKICAgICAgICB2YXIgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmU7CiAgICAgICAgdmFyIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7IC8vIEZpeCBuYXRpdmUKCiAgICAgICAgaWYgKCRhbnlOYXRpdmUpIHsKICAgICAgICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YoJGFueU5hdGl2ZS5jYWxsKG5ldyBCYXNlKCkpKTsKCiAgICAgICAgICBpZiAoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgSXRlcmF0b3JQcm90b3R5cGUubmV4dCkgewogICAgICAgICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzCiAgICAgICAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpOyAvLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKCiAgICAgICAgICAgIGlmICghTElCUkFSWSAmJiB0eXBlb2YgSXRlcmF0b3JQcm90b3R5cGVbSVRFUkFUT1JdICE9ICdmdW5jdGlvbicpIGhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkYKCgogICAgICAgIGlmIChERUZfVkFMVUVTICYmICRuYXRpdmUgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpIHsKICAgICAgICAgIFZBTFVFU19CVUcgPSB0cnVlOwoKICAgICAgICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCkgewogICAgICAgICAgICByZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpOwogICAgICAgICAgfTsKICAgICAgICB9IC8vIERlZmluZSBpdGVyYXRvcgoKCiAgICAgICAgaWYgKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKSB7CiAgICAgICAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpOwogICAgICAgIH0gLy8gUGx1ZyBmb3IgbGlicmFyeQoKCiAgICAgICAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7CiAgICAgICAgSXRlcmF0b3JzW1RBR10gPSByZXR1cm5UaGlzOwoKICAgICAgICBpZiAoREVGQVVMVCkgewogICAgICAgICAgbWV0aG9kcyA9IHsKICAgICAgICAgICAgdmFsdWVzOiBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSwKICAgICAgICAgICAga2V5czogSVNfU0VUID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoS0VZUyksCiAgICAgICAgICAgIGVudHJpZXM6ICRlbnRyaWVzCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKEZPUkNFRCkgZm9yIChrZXkgaW4gbWV0aG9kcykgewogICAgICAgICAgICBpZiAoIShrZXkgaW4gcHJvdG8pKSByZWRlZmluZShwcm90bywga2V5LCBtZXRob2RzW2tleV0pOwogICAgICAgICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtZXRob2RzOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA1MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNTMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CgogICAgICB2YXIgYXJyYXlJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpKGZhbHNlKTsKCiAgICAgIHZhciBJRV9QUk9UTyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpKCdJRV9QUk9UTycpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lcykgewogICAgICAgIHZhciBPID0gdG9JT2JqZWN0KG9iamVjdCk7CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICB2YXIga2V5OwoKICAgICAgICBmb3IgKGtleSBpbiBPKSB7CiAgICAgICAgICBpZiAoa2V5ICE9IElFX1BST1RPKSBoYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOwogICAgICAgIH0gLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5cwoKCiAgICAgICAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkpIHsKICAgICAgICAgIGlmIChoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpIHsKICAgICAgICAgICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDU0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MKICAgICAgdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKSA/IE9iamVjdCA6IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA1NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQ7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRvY3VtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA1NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoKICAgICAgdmFyIElFX1BST1RPID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCkoJ0lFX1BST1RPJyk7CgogICAgICB2YXIgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gKE8pIHsKICAgICAgICBPID0gdG9PYmplY3QoTyk7CiAgICAgICAgaWYgKGhhcyhPLCBJRV9QUk9UTykpIHJldHVybiBPW0lFX1BST1RPXTsKCiAgICAgICAgaWYgKHR5cGVvZiBPLmNvbnN0cnVjdG9yID09ICdmdW5jdGlvbicgJiYgTyBpbnN0YW5jZW9mIE8uY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA1NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3IKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTsgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbikKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB2YXIgcmV0ID0gaXRlcmF0b3JbJ3JldHVybiddOwogICAgICAgICAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSBhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpOwogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDU4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvcgogICAgICB2YXIgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CgogICAgICB2YXIgSVRFUkFUT1IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpOwoKICAgICAgdmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG9bSVRFUkFUT1JdID09PSBpdCk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDU5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7CgogICAgICB2YXIgU1BFQ0lFUyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKE8sIEQpIHsKICAgICAgICB2YXIgQyA9IGFuT2JqZWN0KE8pLmNvbnN0cnVjdG9yOwogICAgICAgIHZhciBTOwogICAgICAgIHJldHVybiBDID09PSB1bmRlZmluZWQgfHwgKFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXSkgPT0gdW5kZWZpbmVkID8gRCA6IGFGdW5jdGlvbihTKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgY3R4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgogICAgICB2YXIgaW52b2tlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTIpOwoKICAgICAgdmFyIGh0bWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTsKCiAgICAgIHZhciBjZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIHByb2Nlc3MgPSBnbG9iYWwucHJvY2VzczsKICAgICAgdmFyIHNldFRhc2sgPSBnbG9iYWwuc2V0SW1tZWRpYXRlOwogICAgICB2YXIgY2xlYXJUYXNrID0gZ2xvYmFsLmNsZWFySW1tZWRpYXRlOwogICAgICB2YXIgTWVzc2FnZUNoYW5uZWwgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWw7CiAgICAgIHZhciBEaXNwYXRjaCA9IGdsb2JhbC5EaXNwYXRjaDsKICAgICAgdmFyIGNvdW50ZXIgPSAwOwogICAgICB2YXIgcXVldWUgPSB7fTsKICAgICAgdmFyIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnOwogICAgICB2YXIgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7CgogICAgICB2YXIgcnVuID0gZnVuY3Rpb24gcnVuKCkgewogICAgICAgIHZhciBpZCA9ICt0aGlzOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCgogICAgICAgIGlmIChxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHsKICAgICAgICAgIHZhciBmbiA9IHF1ZXVlW2lkXTsKICAgICAgICAgIGRlbGV0ZSBxdWV1ZVtpZF07CiAgICAgICAgICBmbigpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKGV2ZW50KSB7CiAgICAgICAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7CiAgICAgIH07IC8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKCgogICAgICBpZiAoIXNldFRhc2sgfHwgIWNsZWFyVGFzaykgewogICAgICAgIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pIHsKICAgICAgICAgIHZhciBhcmdzID0gW107CiAgICAgICAgICB2YXIgaSA9IDE7CgogICAgICAgICAgd2hpbGUgKGFyZ3VtZW50cy5sZW5ndGggPiBpKSB7CiAgICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CiAgICAgICAgICB9CgogICAgICAgICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jCiAgICAgICAgICAgIGludm9rZSh0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJyA/IGZuIDogRnVuY3Rpb24oZm4pLCBhcmdzKTsKICAgICAgICAgIH07CgogICAgICAgICAgZGVmZXIoY291bnRlcik7CiAgICAgICAgICByZXR1cm4gY291bnRlcjsKICAgICAgICB9OwoKICAgICAgICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCkgewogICAgICAgICAgZGVsZXRlIHF1ZXVlW2lkXTsKICAgICAgICB9OyAvLyBOb2RlLmpzIDAuOC0KCgogICAgICAgIGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKShwcm9jZXNzKSA9PSAncHJvY2VzcycpIHsKICAgICAgICAgIGRlZmVyID0gZnVuY3Rpb24gZGVmZXIoaWQpIHsKICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpOwogICAgICAgICAgfTsgLy8gU3BoZXJlIChKUyBnYW1lIGVuZ2luZSkgRGlzcGF0Y2ggQVBJCgogICAgICAgIH0gZWxzZSBpZiAoRGlzcGF0Y2ggJiYgRGlzcGF0Y2gubm93KSB7CiAgICAgICAgICBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGlkKSB7CiAgICAgICAgICAgIERpc3BhdGNoLm5vdyhjdHgocnVuLCBpZCwgMSkpOwogICAgICAgICAgfTsgLy8gQnJvd3NlcnMgd2l0aCBNZXNzYWdlQ2hhbm5lbCwgaW5jbHVkZXMgV2ViV29ya2VycwoKICAgICAgICB9IGVsc2UgaWYgKE1lc3NhZ2VDaGFubmVsKSB7CiAgICAgICAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7CiAgICAgICAgICBwb3J0ID0gY2hhbm5lbC5wb3J0MjsKICAgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7CiAgICAgICAgICBkZWZlciA9IGN0eChwb3J0LnBvc3RNZXNzYWdlLCBwb3J0LCAxKTsgLy8gQnJvd3NlcnMgd2l0aCBwb3N0TWVzc2FnZSwgc2tpcCBXZWJXb3JrZXJzCiAgICAgICAgICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0JwogICAgICAgIH0gZWxzZSBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgJiYgdHlwZW9mIHBvc3RNZXNzYWdlID09ICdmdW5jdGlvbicgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7CiAgICAgICAgICBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGlkKSB7CiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpOwogICAgICAgICAgfTsKCiAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RlbmVyLCBmYWxzZSk7IC8vIElFOC0KICAgICAgICB9IGVsc2UgaWYgKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjZWwoJ3NjcmlwdCcpKSB7CiAgICAgICAgICBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGlkKSB7CiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHRoaXMpOwogICAgICAgICAgICAgIHJ1bi5jYWxsKGlkKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH07IC8vIFJlc3Qgb2xkIGJyb3dzZXJzCgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGlkKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoY3R4KHJ1biwgaWQsIDEpLCAwKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICBzZXQ6IHNldFRhc2ssCiAgICAgICAgY2xlYXI6IGNsZWFyVGFzawogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDYxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhlYykgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBlOiBmYWxzZSwKICAgICAgICAgICAgdjogZXhlYygpCiAgICAgICAgICB9OwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGU6IHRydWUsCiAgICAgICAgICAgIHY6IGUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQywgeCkgewogICAgICAgIGFuT2JqZWN0KEMpOwogICAgICAgIGlmIChpc09iamVjdCh4KSAmJiB4LmNvbnN0cnVjdG9yID09PSBDKSByZXR1cm4geDsKICAgICAgICB2YXIgcHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eS5mKEMpOwogICAgICAgIHZhciByZXNvbHZlID0gcHJvbWlzZUNhcGFiaWxpdHkucmVzb2x2ZTsKICAgICAgICByZXNvbHZlKHgpOwogICAgICAgIHJldHVybiBwcm9taXNlQ2FwYWJpbGl0eS5wcm9taXNlOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBJVEVSQVRPUiA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyk7CgogICAgICB2YXIgU0FGRV9DTE9TSU5HID0gZmFsc2U7CgogICAgICB0cnkgewogICAgICAgIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTsKCiAgICAgICAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgU0FGRV9DTE9TSU5HID0gdHJ1ZTsKICAgICAgICB9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbAoKCiAgICAgICAgQXJyYXkuZnJvbShyaXRlciwgZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgMjsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8qIGVtcHR5ICovCiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV4ZWMsIHNraXBDbG9zaW5nKSB7CiAgICAgICAgaWYgKCFza2lwQ2xvc2luZyAmJiAhU0FGRV9DTE9TSU5HKSByZXR1cm4gZmFsc2U7CiAgICAgICAgdmFyIHNhZmUgPSBmYWxzZTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBhcnIgPSBbN107CiAgICAgICAgICB2YXIgaXRlciA9IGFycltJVEVSQVRPUl0oKTsKCiAgICAgICAgICBpdGVyLm5leHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgZG9uZTogc2FmZSA9IHRydWUKICAgICAgICAgICAgfTsKICAgICAgICAgIH07CgogICAgICAgICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZXI7CiAgICAgICAgICB9OwoKICAgICAgICAgIGV4ZWMoYXJyKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvKiBlbXB0eSAqLwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNhZmU7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDY0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDY1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciBjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCiAgICAgIHZhciBmYWlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoS0VZLCBleGVjKSB7CiAgICAgICAgdmFyIGZuID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldOwogICAgICAgIHZhciBleHAgPSB7fTsKICAgICAgICBleHBbS0VZXSA9IGV4ZWMoZm4pOwogICAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24gKCkgewogICAgICAgICAgZm4oMSk7CiAgICAgICAgfSksICdPYmplY3QnLCBleHApOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA2NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICB2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTsKCiAgICAgIHZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkgewogICAgICAgIGlmICghc2VsZikgewogICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjNbImRlZmF1bHQiXSkoY2FsbCkpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KTsKCiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXRlcmF0b3IpOwoKICAgICAgdmFyIF9zeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNyk7CgogICAgICB2YXIgX3N5bWJvbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zeW1ib2wpOwoKICAgICAgdmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDJbImRlZmF1bHQiXSA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mNChfaXRlcmF0b3IyWyJkZWZhdWx0Il0pID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gX3R5cGVvZjQob2JqKTsKICAgICAgfSA6IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMlsiZGVmYXVsdCJdID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDJbImRlZmF1bHQiXSAmJiBvYmogIT09IF9zeW1ib2wyWyJkZWZhdWx0Il0ucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mNChvYmopOwogICAgICB9OwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSB0eXBlb2YgX3N5bWJvbDJbImRlZmF1bHQiXSA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mKF9pdGVyYXRvcjJbImRlZmF1bHQiXSkgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOwogICAgICB9IDogZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyWyJkZWZhdWx0Il0gPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMlsiZGVmYXVsdCJdICYmIG9iaiAhPT0gX3N5bWJvbDJbImRlZmF1bHQiXS5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmogPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG9iaik7CiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNjggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCiAgICAgIHZhciAka2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpOwoKICAgICAgdmFyIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsKCiAgICAgIGV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTykgewogICAgICAgIHJldHVybiAka2V5cyhPLCBoaWRkZW5LZXlzKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNjkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgcElFID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7CgogICAgICB2YXIgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwoKICAgICAgdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwoKICAgICAgdmFyIHRvUHJpbWl0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7CgogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTsKCiAgICAgIHZhciBnT1BEID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICAgICAgZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KSA/IGdPUEQgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkgewogICAgICAgIE8gPSB0b0lPYmplY3QoTyk7CiAgICAgICAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpOwogICAgICAgIGlmIChJRThfRE9NX0RFRklORSkgdHJ5IHsKICAgICAgICAgIHJldHVybiBnT1BEKE8sIFApOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8qIGVtcHR5ICovCiAgICAgICAgfQogICAgICAgIGlmIChoYXMoTywgUCkpIHJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTsKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA3MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICB2YXIgX3NldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzYpOwoKICAgICAgdmFyIF9zZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXRQcm90b3R5cGVPZik7CgogICAgICB2YXIgX2NyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTsKCiAgICAgIHZhciBfY3JlYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZSk7CgogICAgICB2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTsKCiAgICAgIHZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBleHBvcnRzWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICAgICAgICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogKDAsIF90eXBlb2YzWyJkZWZhdWx0Il0pKHN1cGVyQ2xhc3MpKSk7CiAgICAgICAgfQoKICAgICAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSAoMCwgX2NyZWF0ZTJbImRlZmF1bHQiXSkoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2YyWyJkZWZhdWx0Il0gPyAoMCwgX3NldFByb3RvdHlwZU9mMlsiZGVmYXVsdCJdKShzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKICAgICAgZXhwb3J0cy5oYXNDbGFzc0luUGFyZW50ID0gZXhwb3J0cy5mb3JtYXRFcnJvck1zZyA9IGV4cG9ydHMuZ2V0TWV0YUNvbnRlbnQgPSBleHBvcnRzLmF4aW9zR2l0aHViID0gZXhwb3J0cy5heGlvc0pTT04gPSBleHBvcnRzLnF1ZXJ5U3RyaW5naWZ5ID0gZXhwb3J0cy5xdWVyeVBhcnNlID0gdW5kZWZpbmVkOwoKICAgICAgdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpOwoKICAgICAgdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKICAgICAgdmFyIF9zbGljZWRUb0FycmF5MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTY0KTsKCiAgICAgIHZhciBfc2xpY2VkVG9BcnJheTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zbGljZWRUb0FycmF5Mik7CgogICAgICB2YXIgX2F4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpOwoKICAgICAgdmFyIF9heGlvczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9heGlvcyk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBxdWVyeVBhcnNlID0gZXhwb3J0cy5xdWVyeVBhcnNlID0gZnVuY3Rpb24gcXVlcnlQYXJzZSgpIHsKICAgICAgICB2YXIgc2VhcmNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB3aW5kb3cubG9jYXRpb24uc2VhcmNoOwogICAgICAgIGlmICghc2VhcmNoKSByZXR1cm4ge307CiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gc2VhcmNoWzBdID09PSAnPycgPyBzZWFyY2guc3Vic3RyaW5nKDEpIDogc2VhcmNoOwogICAgICAgIHZhciBxdWVyeSA9IHt9OwogICAgICAgIHF1ZXJ5U3RyaW5nLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbiAocXVlcnlTdHIpIHsKICAgICAgICAgIHZhciBfcXVlcnlTdHIkc3BsaXQgPSBxdWVyeVN0ci5zcGxpdCgnPScpLAogICAgICAgICAgICAgIF9xdWVyeVN0ciRzcGxpdDIgPSAoMCwgX3NsaWNlZFRvQXJyYXkzWyJkZWZhdWx0Il0pKF9xdWVyeVN0ciRzcGxpdCwgMiksCiAgICAgICAgICAgICAga2V5ID0gX3F1ZXJ5U3RyJHNwbGl0MlswXSwKICAgICAgICAgICAgICB2YWx1ZSA9IF9xdWVyeVN0ciRzcGxpdDJbMV07CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwoKCiAgICAgICAgICBpZiAoa2V5KSBxdWVyeVtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBxdWVyeTsKICAgICAgfTsKCiAgICAgIHZhciBxdWVyeVN0cmluZ2lmeSA9IGV4cG9ydHMucXVlcnlTdHJpbmdpZnkgPSBmdW5jdGlvbiBxdWVyeVN0cmluZ2lmeShxdWVyeSkgewogICAgICAgIHZhciBxdWVyeVN0cmluZyA9ICgwLCBfa2V5czJbImRlZmF1bHQiXSkocXVlcnkpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICByZXR1cm4ga2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5W2tleV0gfHwgJycpOwogICAgICAgIH0pLmpvaW4oJyYnKTsKICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmc7CiAgICAgIH07CgogICAgICB2YXIgYXhpb3NKU09OID0gZXhwb3J0cy5heGlvc0pTT04gPSBfYXhpb3MyWyJkZWZhdWx0Il0uY3JlYXRlKHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHZhciBheGlvc0dpdGh1YiA9IGV4cG9ydHMuYXhpb3NHaXRodWIgPSBfYXhpb3MyWyJkZWZhdWx0Il0uY3JlYXRlKHsKICAgICAgICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbScsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB2YXIgZ2V0TWV0YUNvbnRlbnQgPSBleHBvcnRzLmdldE1ldGFDb250ZW50ID0gZnVuY3Rpb24gZ2V0TWV0YUNvbnRlbnQobmFtZSwgY29udGVudCkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgY29udGVudCB8fCAoY29udGVudCA9ICdjb250ZW50Jyk7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgdmFyIGVsID0gd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cJycgKyBuYW1lICsgJ1wnXScpOwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICAgIHJldHVybiBlbCAmJiBlbC5nZXRBdHRyaWJ1dGUoY29udGVudCk7CiAgICAgIH07CgogICAgICB2YXIgZm9ybWF0RXJyb3JNc2cgPSBleHBvcnRzLmZvcm1hdEVycm9yTXNnID0gZnVuY3Rpb24gZm9ybWF0RXJyb3JNc2coZXJyKSB7CiAgICAgICAgdmFyIG1zZyA9ICdFcnJvcjogJzsKCiAgICAgICAgaWYgKGVyci5yZXNwb25zZSAmJiBlcnIucmVzcG9uc2UuZGF0YSAmJiBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICBtc2cgKz0gZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSArICcuICc7CiAgICAgICAgICBlcnIucmVzcG9uc2UuZGF0YS5lcnJvcnMgJiYgKG1zZyArPSBlcnIucmVzcG9uc2UuZGF0YS5lcnJvcnMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlLm1lc3NhZ2U7CiAgICAgICAgICB9KS5qb2luKCcsICcpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbXNnICs9IGVyci5tZXNzYWdlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1zZzsKICAgICAgfTsKCiAgICAgIHZhciBoYXNDbGFzc0luUGFyZW50ID0gZXhwb3J0cy5oYXNDbGFzc0luUGFyZW50ID0gZnVuY3Rpb24gaGFzQ2xhc3NJblBhcmVudChlbGVtZW50KSB7CiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzTmFtZSA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgIGNsYXNzTmFtZVtfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgfQogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgoKICAgICAgICB2YXIgeWVzID0gZmFsc2U7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICB2YXIgY2xhc3NlcyA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgY2xhc3NOYW1lLmZvckVhY2goZnVuY3Rpb24gKGMsIGkpIHsKICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgICB5ZXMgPSB5ZXMgfHwgY2xhc3Nlcy5pbmRleE9mKGMpID49IDA7CiAgICAgICAgfSk7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgICAgaWYgKHllcykgcmV0dXJuIHllczsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICByZXR1cm4gZWxlbWVudC5wYXJlbnROb2RlICYmIGhhc0NsYXNzSW5QYXJlbnQoZWxlbWVudC5wYXJlbnROb2RlLCBjbGFzc05hbWUpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA3MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiB3cmFwKCkgewogICAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDczICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIGZ1bmN0aW9uIGVuY29kZSh2YWwpIHsKICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkucmVwbGFjZSgvJTQwL2dpLCAnQCcpLnJlcGxhY2UoLyUzQS9naSwgJzonKS5yZXBsYWNlKC8lMjQvZywgJyQnKS5yZXBsYWNlKC8lMkMvZ2ksICcsJykucmVwbGFjZSgvJTIwL2csICcrJykucmVwbGFjZSgvJTVCL2dpLCAnWycpLnJlcGxhY2UoLyU1RC9naSwgJ10nKTsKICAgICAgfQogICAgICAvKioKICAgICAgICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKQogICAgICAgKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZAogICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybAogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7CiAgICAgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAgICAgaWYgKCFwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiB1cmw7CiAgICAgICAgfQoKICAgICAgICB2YXIgc2VyaWFsaXplZFBhcmFtczsKCiAgICAgICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHsKICAgICAgICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7CiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7CiAgICAgICAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBwYXJ0cyA9IFtdOwogICAgICAgICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkgewogICAgICAgICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7CiAgICAgICAgICAgICAga2V5ID0ga2V5ICsgJ1tdJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YWwgPSBbdmFsXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikgewogICAgICAgICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHsKICAgICAgICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkgewogICAgICAgICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHsKICAgICAgICAgIHZhciBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoJyMnKTsKCiAgICAgICAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIGhhc2htYXJrSW5kZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtczsKICAgICAgICB9CgogICAgICAgIHJldHVybiB1cmw7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDc0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkgewogICAgICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgICAgdmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nyk7CgogICAgICAgIHZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkgewogICAgICAgICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSAmJiB1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzWydDb250ZW50LVR5cGUnXSkpIHsKICAgICAgICAgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkgewogICAgICAgICAgdmFyIGFkYXB0ZXI7CgogICAgICAgICAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlcgogICAgICAgICAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykgewogICAgICAgICAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyCiAgICAgICAgICAgIGFkYXB0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gYWRhcHRlcjsKICAgICAgICB9CgogICAgICAgIHZhciBkZWZhdWx0cyA9IHsKICAgICAgICAgIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksCiAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7CiAgICAgICAgICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0FjY2VwdCcpOwogICAgICAgICAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTsKCiAgICAgICAgICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8IHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHwgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHwgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHwgdXRpbHMuaXNGaWxlKGRhdGEpIHx8IHV0aWxzLmlzQmxvYihkYXRhKSkgewogICAgICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHsKICAgICAgICAgICAgICByZXR1cm4gZGF0YS5idWZmZXI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkgewogICAgICAgICAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTsKICAgICAgICAgICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHsKICAgICAgICAgICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpOwogICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgICB9XSwKICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkgewogICAgICAgICAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi8KICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAvKiBJZ25vcmUgKi8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgICAgfV0sCgogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGEKICAgICAgICAgICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuCiAgICAgICAgICAgKi8KICAgICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLAogICAgICAgICAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLAogICAgICAgICAgbWF4Q29udGVudExlbmd0aDogLTEsCiAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7CiAgICAgICAgICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGRlZmF1bHRzLmhlYWRlcnMgPSB7CiAgICAgICAgICBjb21tb246IHsKICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7CiAgICAgICAgICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTsKICAgICAgICB9KTsKICAgICAgICB1dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkgewogICAgICAgICAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpOwogICAgICAgIH0pOwogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogNzYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgdmFyIHNldHRsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc4KTsKCiAgICAgIHZhciBidWlsZFVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpOwoKICAgICAgdmFyIGJ1aWxkRnVsbFBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MCk7CgogICAgICB2YXIgcGFyc2VIZWFkZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODMpOwoKICAgICAgdmFyIGlzVVJMU2FtZU9yaWdpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTg0KTsKCiAgICAgIHZhciBjcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4aHJBZGFwdGVyKGNvbmZpZykgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTsKICAgICAgICAgIHZhciByZXF1ZXN0SGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzOwoKICAgICAgICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkgewogICAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddOyAvLyBMZXQgdGhlIGJyb3dzZXIgc2V0IGl0CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvbgoKICAgICAgICAgIGlmIChjb25maWcuYXV0aCkgewogICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJzsKICAgICAgICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7CiAgICAgICAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGZ1bGxQYXRoID0gYnVpbGRGdWxsUGF0aChjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7CiAgICAgICAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTsgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVMKCiAgICAgICAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDsgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZQoKICAgICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHsKICAgICAgICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmUKICAgICAgICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWQKICAgICAgICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnMKICAgICAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdAoKCiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSAvLyBQcmVwYXJlIHRoZSByZXNwb25zZQoKCiAgICAgICAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDsKICAgICAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTsKICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gewogICAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSwKICAgICAgICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLAogICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCwKICAgICAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsCiAgICAgICAgICAgICAgY29uZmlnOiBjb25maWcsCiAgICAgICAgICAgICAgcmVxdWVzdDogcmVxdWVzdAogICAgICAgICAgICB9OwogICAgICAgICAgICBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSk7IC8vIENsZWFuIHVwIHJlcXVlc3QKCiAgICAgICAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgICAgICAgfTsgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKQoKCiAgICAgICAgICByZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbiBoYW5kbGVBYm9ydCgpIHsKICAgICAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsIHJlcXVlc3QpKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgICAgICB9OyAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzCgoKICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkgewogICAgICAgICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXIKICAgICAgICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yCiAgICAgICAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpOyAvLyBDbGVhbiB1cCByZXF1ZXN0CgogICAgICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgICAgIH07IC8vIEhhbmRsZSB0aW1lb3V0CgoKICAgICAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHsKICAgICAgICAgICAgdmFyIHRpbWVvdXRFcnJvck1lc3NhZ2UgPSAndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnOwoKICAgICAgICAgICAgaWYgKGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlKSB7CiAgICAgICAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZWplY3QoY3JlYXRlRXJyb3IodGltZW91dEVycm9yTWVzc2FnZSwgY29uZmlnLCAnRUNPTk5BQk9SVEVEJywgcmVxdWVzdCkpOyAvLyBDbGVhbiB1cCByZXF1ZXN0CgogICAgICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgICAgIH07IC8vIEFkZCB4c3JmIGhlYWRlcgogICAgICAgICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuCiAgICAgICAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLgoKCiAgICAgICAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkgewogICAgICAgICAgICB2YXIgY29va2llcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg1KTsgLy8gQWRkIHhzcmYgaGVhZGVyCgoKICAgICAgICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihmdWxsUGF0aCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/IGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDogdW5kZWZpbmVkOwoKICAgICAgICAgICAgaWYgKHhzcmZWYWx1ZSkgewogICAgICAgICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3QKCgogICAgICAgICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7CiAgICAgICAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHsKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWQKICAgICAgICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdAogICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkCgoKICAgICAgICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykpIHsKICAgICAgICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSAhIWNvbmZpZy53aXRoQ3JlZGVudGlhbHM7CiAgICAgICAgICB9IC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWQKCgogICAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAvLyBFeHBlY3RlZCBET01FeGNlcHRpb24gdGhyb3duIGJ5IGJyb3dzZXJzIG5vdCBjb21wYXRpYmxlIFhNTEh0dHBSZXF1ZXN0IExldmVsIDIuCiAgICAgICAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi4KICAgICAgICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkCgoKICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7CiAgICAgICAgICB9IC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzCgoKICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHsKICAgICAgICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikgewogICAgICAgICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uCiAgICAgICAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpIHsKICAgICAgICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJlcXVlc3QuYWJvcnQoKTsKICAgICAgICAgICAgICByZWplY3QoY2FuY2VsKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmVxdWVzdERhdGEgPSBudWxsOwogICAgICAgICAgfSAvLyBTZW5kIHRoZSByZXF1ZXN0CgoKICAgICAgICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDc3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGVuaGFuY2VFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTc5KTsKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy4KICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS4KICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC4KICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLgogICAgICAgKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLgogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7CiAgICAgICAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDc4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKICAgICAgLyoqCiAgICAgICAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3QKICAgICAgICogYnkgbWVyZ2luZyB0d28gY29uZmlndXJhdGlvbiBvYmplY3RzIHRvZ2V0aGVyLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMQogICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMgogICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWVyZ2VDb25maWcoY29uZmlnMSwgY29uZmlnMikgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9OwogICAgICAgIHZhciBjb25maWcgPSB7fTsKICAgICAgICB2YXIgdmFsdWVGcm9tQ29uZmlnMktleXMgPSBbJ3VybCcsICdtZXRob2QnLCAncGFyYW1zJywgJ2RhdGEnXTsKICAgICAgICB2YXIgbWVyZ2VEZWVwUHJvcGVydGllc0tleXMgPSBbJ2hlYWRlcnMnLCAnYXV0aCcsICdwcm94eSddOwogICAgICAgIHZhciBkZWZhdWx0VG9Db25maWcyS2V5cyA9IFsnYmFzZVVSTCcsICd1cmwnLCAndHJhbnNmb3JtUmVxdWVzdCcsICd0cmFuc2Zvcm1SZXNwb25zZScsICdwYXJhbXNTZXJpYWxpemVyJywgJ3RpbWVvdXQnLCAnd2l0aENyZWRlbnRpYWxzJywgJ2FkYXB0ZXInLCAncmVzcG9uc2VUeXBlJywgJ3hzcmZDb29raWVOYW1lJywgJ3hzcmZIZWFkZXJOYW1lJywgJ29uVXBsb2FkUHJvZ3Jlc3MnLCAnb25Eb3dubG9hZFByb2dyZXNzJywgJ21heENvbnRlbnRMZW5ndGgnLCAndmFsaWRhdGVTdGF0dXMnLCAnbWF4UmVkaXJlY3RzJywgJ2h0dHBBZ2VudCcsICdodHRwc0FnZW50JywgJ2NhbmNlbFRva2VuJywgJ3NvY2tldFBhdGgnXTsKICAgICAgICB1dGlscy5mb3JFYWNoKHZhbHVlRnJvbUNvbmZpZzJLZXlzLCBmdW5jdGlvbiB2YWx1ZUZyb21Db25maWcyKHByb3ApIHsKICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB1dGlscy5mb3JFYWNoKG1lcmdlRGVlcFByb3BlcnRpZXNLZXlzLCBmdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKHByb3ApIHsKICAgICAgICAgIGlmICh1dGlscy5pc09iamVjdChjb25maWcyW3Byb3BdKSkgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSB1dGlscy5kZWVwTWVyZ2UoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdOwogICAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdChjb25maWcxW3Byb3BdKSkgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSB1dGlscy5kZWVwTWVyZ2UoY29uZmlnMVtwcm9wXSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcxW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHV0aWxzLmZvckVhY2goZGVmYXVsdFRvQ29uZmlnMktleXMsIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCkgewogICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgYXhpb3NLZXlzID0gdmFsdWVGcm9tQ29uZmlnMktleXMuY29uY2F0KG1lcmdlRGVlcFByb3BlcnRpZXNLZXlzKS5jb25jYXQoZGVmYXVsdFRvQ29uZmlnMktleXMpOwogICAgICAgIHZhciBvdGhlcktleXMgPSBPYmplY3Qua2V5cyhjb25maWcyKS5maWx0ZXIoZnVuY3Rpb24gZmlsdGVyQXhpb3NLZXlzKGtleSkgewogICAgICAgICAgcmV0dXJuIGF4aW9zS2V5cy5pbmRleE9mKGtleSkgPT09IC0xOwogICAgICAgIH0pOwogICAgICAgIHV0aWxzLmZvckVhY2gob3RoZXJLZXlzLCBmdW5jdGlvbiBvdGhlcktleXNEZWZhdWx0VG9Db25maWcyKHByb3ApIHsKICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzFbcHJvcF07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGNvbmZpZzsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogNzkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC4KICAgICAgICoKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS4KICAgICAgICovCgogICAgICBmdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkgewogICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIH0KCiAgICAgIENhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gJ0NhbmNlbCcgKyAodGhpcy5tZXNzYWdlID8gJzogJyArIHRoaXMubWVzc2FnZSA6ICcnKTsKICAgICAgfTsKCiAgICAgIENhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXyA9IHRydWU7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gQ2FuY2VsOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDgwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgc3JjID0gX3JlZi5zcmMsCiAgICAgICAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLAogICAgICAgICAgICBhbHQgPSBfcmVmLmFsdCwKICAgICAgICAgICAgb25FcnJvciA9IF9yZWYub25FcnJvcjsKICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWF2YXRhciAnICsgY2xhc3NOYW1lCiAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsKICAgICAgICAgIHNyYzogc3JjLAogICAgICAgICAgYWx0OiAnQCcgKyBhbHQsCiAgICAgICAgICBvbkVycm9yOiBvbkVycm9yCiAgICAgICAgfSkpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiA4MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLAogICAgICAgICAgICB0ZXh0ID0gX3JlZi50ZXh0LAogICAgICAgICAgICBuYW1lID0gX3JlZi5uYW1lOwogICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWljbyAiICsgY2xhc3NOYW1lCiAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1zdmciLAogICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICAgICAgX19odG1sOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MSkoIi4vIiArIG5hbWUgKyAiLnN2ZyIpCiAgICAgICAgICB9CiAgICAgICAgfSksIHRleHQgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1pY28tdGV4dCIKICAgICAgICB9LCB0ZXh0KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDgyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCiAgICAgIHZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgdmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTsKCiAgICAgIHZhciBfZ2l0YWxrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7CgogICAgICB2YXIgX2dpdGFsazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9naXRhbGspOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgR2l0YWxrID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEdpdGFsaygpIHsKICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szWyJkZWZhdWx0Il0pKHRoaXMsIEdpdGFsayk7CiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICAgIH0KCiAgICAgICAgKDAsIF9jcmVhdGVDbGFzczNbImRlZmF1bHQiXSkoR2l0YWxrLCBbewogICAgICAgICAga2V5OiAncmVuZGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoY29udGFpbmVyLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgbm9kZSA9IG51bGw7CiAgICAgICAgICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCB0aGlzLm9wdGlvbnMuY29udGFpbmVyOwogICAgICAgICAgICBpZiAoIWNvbnRhaW5lcikgdGhyb3cgbmV3IEVycm9yKCdDb250YWluZXIgaXMgcmVxdWlyZWQ6ICcgKyBjb250YWluZXIpOwoKICAgICAgICAgICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7CiAgICAgICAgICAgICAgbm9kZSA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpOwogICAgICAgICAgICAgIGlmICghbm9kZSkgdGhyb3cgbmV3IEVycm9yKCdDb250YWluZXIgbm90IGZvdW5kLCB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQ6ICcgKyBjb250YWluZXIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5vZGUgPSBjb250YWluZXI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghY2FsbGJhY2spIHsKICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkge307CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2dpdGFsazJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucwogICAgICAgICAgICB9KSwgbm9kZSwgY2FsbGJhY2spOwogICAgICAgICAgfQogICAgICAgIH1dKTsKICAgICAgICByZXR1cm4gR2l0YWxrOwogICAgICB9KCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IEdpdGFsazsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4NCksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDg0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NSk7CgogICAgICB2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKSB7CiAgICAgICAgcmV0dXJuICRPYmplY3QuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDg1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOyAvLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQoKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oOCksICdPYmplY3QnLCB7CiAgICAgICAgZGVmaW5lUHJvcGVydHk6IF9fd2VicGFja19yZXF1aXJlX18oNykuZgogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA4NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICAvKioKICAgICAgICAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLgogICAgICAgICoKICAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgICovCiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgIHZhciBSZWFjdElzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7IC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IGRldmVsb3BtZW50IGJlaGF2aW9yLgogICAgICAgICAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZAoKCiAgICAgICAgICB2YXIgdGhyb3dPbkRpcmVjdEFjY2VzcyA9IHRydWU7CiAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oODkpKFJlYWN0SXMuaXNFbGVtZW50LCB0aHJvd09uRGlyZWN0QWNjZXNzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgcHJvZHVjdGlvbiBiZWhhdmlvci4KICAgICAgICAgIC8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2QKICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MikoKTsKICAgICAgICB9CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDg3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiogQGxpY2Vuc2UgUmVhY3QgdjE2LjEyLjAKICAgICAgICogcmVhY3QtaXMucHJvZHVjdGlvbi5taW4uanMKICAgICAgICoKICAgICAgICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuCiAgICAgICAqCiAgICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAqLwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiAhMAogICAgICB9KTsKICAgICAgdmFyIGIgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbFsiZm9yIl0sCiAgICAgICAgICBjID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmVsZW1lbnQiKSA6IDYwMTAzLAogICAgICAgICAgZCA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5wb3J0YWwiKSA6IDYwMTA2LAogICAgICAgICAgZSA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5mcmFnbWVudCIpIDogNjAxMDcsCiAgICAgICAgICBmID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnN0cmljdF9tb2RlIikgOiA2MDEwOCwKICAgICAgICAgIGcgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QucHJvZmlsZXIiKSA6IDYwMTE0LAogICAgICAgICAgaCA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5wcm92aWRlciIpIDogNjAxMDksCiAgICAgICAgICBrID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmNvbnRleHQiKSA6IDYwMTEwLAogICAgICAgICAgbCA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5hc3luY19tb2RlIikgOiA2MDExMSwKICAgICAgICAgIG0gPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuY29uY3VycmVudF9tb2RlIikgOiA2MDExMSwKICAgICAgICAgIG4gPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QuZm9yd2FyZF9yZWYiKSA6IDYwMTEyLAogICAgICAgICAgcCA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5zdXNwZW5zZSIpIDogNjAxMTMsCiAgICAgICAgICBxID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LnN1c3BlbnNlX2xpc3QiKSA6IDYwMTIwLAogICAgICAgICAgciA9IGIgPyBTeW1ib2xbImZvciJdKCJyZWFjdC5tZW1vIikgOiA2MDExNSwKICAgICAgICAgIHQgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QubGF6eSIpIDogNjAxMTYsCiAgICAgICAgICB2ID0gYiA/IFN5bWJvbFsiZm9yIl0oInJlYWN0LmZ1bmRhbWVudGFsIikgOiA2MDExNywKICAgICAgICAgIHcgPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3QucmVzcG9uZGVyIikgOiA2MDExOCwKICAgICAgICAgIHggPSBiID8gU3ltYm9sWyJmb3IiXSgicmVhY3Quc2NvcGUiKSA6IDYwMTE5OwoKICAgICAgZnVuY3Rpb24geShhKSB7CiAgICAgICAgaWYgKCJvYmplY3QiID09PSBfdHlwZW9mNChhKSAmJiBudWxsICE9PSBhKSB7CiAgICAgICAgICB2YXIgdSA9IGEuJCR0eXBlb2Y7CgogICAgICAgICAgc3dpdGNoICh1KSB7CiAgICAgICAgICAgIGNhc2UgYzoKICAgICAgICAgICAgICBzd2l0Y2ggKGEgPSBhLnR5cGUsIGEpIHsKICAgICAgICAgICAgICAgIGNhc2UgbDoKICAgICAgICAgICAgICAgIGNhc2UgbToKICAgICAgICAgICAgICAgIGNhc2UgZToKICAgICAgICAgICAgICAgIGNhc2UgZzoKICAgICAgICAgICAgICAgIGNhc2UgZjoKICAgICAgICAgICAgICAgIGNhc2UgcDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7CgogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgc3dpdGNoIChhID0gYSAmJiBhLiQkdHlwZW9mLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBrOgogICAgICAgICAgICAgICAgICAgIGNhc2UgbjoKICAgICAgICAgICAgICAgICAgICBjYXNlIHQ6CiAgICAgICAgICAgICAgICAgICAgY2FzZSByOgogICAgICAgICAgICAgICAgICAgIGNhc2UgaDoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhOwoKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSBkOgogICAgICAgICAgICAgIHJldHVybiB1OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24geihhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IG07CiAgICAgIH0KCiAgICAgIGV4cG9ydHMudHlwZU9mID0geTsKICAgICAgZXhwb3J0cy5Bc3luY01vZGUgPSBsOwogICAgICBleHBvcnRzLkNvbmN1cnJlbnRNb2RlID0gbTsKICAgICAgZXhwb3J0cy5Db250ZXh0Q29uc3VtZXIgPSBrOwogICAgICBleHBvcnRzLkNvbnRleHRQcm92aWRlciA9IGg7CiAgICAgIGV4cG9ydHMuRWxlbWVudCA9IGM7CiAgICAgIGV4cG9ydHMuRm9yd2FyZFJlZiA9IG47CiAgICAgIGV4cG9ydHMuRnJhZ21lbnQgPSBlOwogICAgICBleHBvcnRzLkxhenkgPSB0OwogICAgICBleHBvcnRzLk1lbW8gPSByOwogICAgICBleHBvcnRzLlBvcnRhbCA9IGQ7CiAgICAgIGV4cG9ydHMuUHJvZmlsZXIgPSBnOwogICAgICBleHBvcnRzLlN0cmljdE1vZGUgPSBmOwogICAgICBleHBvcnRzLlN1c3BlbnNlID0gcDsKCiAgICAgIGV4cG9ydHMuaXNWYWxpZEVsZW1lbnRUeXBlID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gInN0cmluZyIgPT09IHR5cGVvZiBhIHx8ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBhIHx8IGEgPT09IGUgfHwgYSA9PT0gbSB8fCBhID09PSBnIHx8IGEgPT09IGYgfHwgYSA9PT0gcCB8fCBhID09PSBxIHx8ICJvYmplY3QiID09PSBfdHlwZW9mNChhKSAmJiBudWxsICE9PSBhICYmIChhLiQkdHlwZW9mID09PSB0IHx8IGEuJCR0eXBlb2YgPT09IHIgfHwgYS4kJHR5cGVvZiA9PT0gaCB8fCBhLiQkdHlwZW9mID09PSBrIHx8IGEuJCR0eXBlb2YgPT09IG4gfHwgYS4kJHR5cGVvZiA9PT0gdiB8fCBhLiQkdHlwZW9mID09PSB3IHx8IGEuJCR0eXBlb2YgPT09IHgpOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0FzeW5jTW9kZSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHooYSkgfHwgeShhKSA9PT0gbDsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNDb25jdXJyZW50TW9kZSA9IHo7CgogICAgICBleHBvcnRzLmlzQ29udGV4dENvbnN1bWVyID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gazsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNDb250ZXh0UHJvdmlkZXIgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBoOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0VsZW1lbnQgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiAib2JqZWN0IiA9PT0gX3R5cGVvZjQoYSkgJiYgbnVsbCAhPT0gYSAmJiBhLiQkdHlwZW9mID09PSBjOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0ZvcndhcmRSZWYgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBuOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc0ZyYWdtZW50ID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gZTsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNMYXp5ID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gdDsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNNZW1vID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gcjsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNQb3J0YWwgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiB5KGEpID09PSBkOwogICAgICB9OwoKICAgICAgZXhwb3J0cy5pc1Byb2ZpbGVyID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gZzsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNTdHJpY3RNb2RlID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4geShhKSA9PT0gZjsKICAgICAgfTsKCiAgICAgIGV4cG9ydHMuaXNTdXNwZW5zZSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIHkoYSkgPT09IHA7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDg4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIC8qKiBAbGljZW5zZSBSZWFjdCB2MTYuMTIuMAogICAgICAgICogcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanMKICAgICAgICAqCiAgICAgICAgKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy4KICAgICAgICAqCiAgICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICAqLwogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gInByb2R1Y3Rpb24iKSB7CiAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7CiAgICAgICAgICAgICAgdmFsdWU6IHRydWUKICAgICAgICAgICAgfSk7IC8vIFRoZSBTeW1ib2wgdXNlZCB0byB0YWcgdGhlIFJlYWN0RWxlbWVudC1saWtlIHR5cGVzLiBJZiB0aGVyZSBpcyBubyBuYXRpdmUgU3ltYm9sCiAgICAgICAgICAgIC8vIG5vciBwb2x5ZmlsbCwgdGhlbiBhIHBsYWluIG51bWJlciBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZS4KCiAgICAgICAgICAgIHZhciBoYXNTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbFsiZm9yIl07CiAgICAgICAgICAgIHZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5lbGVtZW50JykgOiAweGVhYzc7CiAgICAgICAgICAgIHZhciBSRUFDVF9QT1JUQUxfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnBvcnRhbCcpIDogMHhlYWNhOwogICAgICAgICAgICB2YXIgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmZyYWdtZW50JykgOiAweGVhY2I7CiAgICAgICAgICAgIHZhciBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3Quc3RyaWN0X21vZGUnKSA6IDB4ZWFjYzsKICAgICAgICAgICAgdmFyIFJFQUNUX1BST0ZJTEVSX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5wcm9maWxlcicpIDogMHhlYWQyOwogICAgICAgICAgICB2YXIgUkVBQ1RfUFJPVklERVJfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnByb3ZpZGVyJykgOiAweGVhY2Q7CiAgICAgICAgICAgIHZhciBSRUFDVF9DT05URVhUX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5jb250ZXh0JykgOiAweGVhY2U7IC8vIFRPRE86IFdlIGRvbid0IHVzZSBBc3luY01vZGUgb3IgQ29uY3VycmVudE1vZGUgYW55bW9yZS4gVGhleSB3ZXJlIHRlbXBvcmFyeQogICAgICAgICAgICAvLyAodW5zdGFibGUpIEFQSXMgdGhhdCBoYXZlIGJlZW4gcmVtb3ZlZC4gQ2FuIHdlIHJlbW92ZSB0aGUgc3ltYm9scz8KCiAgICAgICAgICAgIHZhciBSRUFDVF9BU1lOQ19NT0RFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5hc3luY19tb2RlJykgOiAweGVhY2Y7CiAgICAgICAgICAgIHZhciBSRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmNvbmN1cnJlbnRfbW9kZScpIDogMHhlYWNmOwogICAgICAgICAgICB2YXIgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmZvcndhcmRfcmVmJykgOiAweGVhZDA7CiAgICAgICAgICAgIHZhciBSRUFDVF9TVVNQRU5TRV9UWVBFID0gaGFzU3ltYm9sID8gU3ltYm9sWyJmb3IiXSgncmVhY3Quc3VzcGVuc2UnKSA6IDB4ZWFkMTsKICAgICAgICAgICAgdmFyIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LnN1c3BlbnNlX2xpc3QnKSA6IDB4ZWFkODsKICAgICAgICAgICAgdmFyIFJFQUNUX01FTU9fVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0Lm1lbW8nKSA6IDB4ZWFkMzsKICAgICAgICAgICAgdmFyIFJFQUNUX0xBWllfVFlQRSA9IGhhc1N5bWJvbCA/IFN5bWJvbFsiZm9yIl0oJ3JlYWN0LmxhenknKSA6IDB4ZWFkNDsKICAgICAgICAgICAgdmFyIFJFQUNUX0ZVTkRBTUVOVEFMX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5mdW5kYW1lbnRhbCcpIDogMHhlYWQ1OwogICAgICAgICAgICB2YXIgUkVBQ1RfUkVTUE9OREVSX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5yZXNwb25kZXInKSA6IDB4ZWFkNjsKICAgICAgICAgICAgdmFyIFJFQUNUX1NDT1BFX1RZUEUgPSBoYXNTeW1ib2wgPyBTeW1ib2xbImZvciJdKCdyZWFjdC5zY29wZScpIDogMHhlYWQ3OwoKICAgICAgICAgICAgZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnRUeXBlKHR5cGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IC8vIE5vdGU6IGl0cyB0eXBlb2YgbWlnaHQgYmUgb3RoZXIgdGhhbiAnc3ltYm9sJyBvciAnbnVtYmVyJyBpZiBpdCdzIGEgcG9seWZpbGwuCiAgICAgICAgICAgICAgdHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9QUk9GSUxFUl9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfU1VTUEVOU0VfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgfHwgX3R5cGVvZjQodHlwZSkgPT09ICdvYmplY3QnICYmIHR5cGUgIT09IG51bGwgJiYgKHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0xBWllfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9NRU1PX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfUFJPVklERVJfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DT05URVhUX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9GVU5EQU1FTlRBTF9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1JFU1BPTkRFUl9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1NDT1BFX1RZUEUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBGb3JrZWQgZnJvbSBmYmpzL3dhcm5pbmc6CiAgICAgICAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mYmpzL2Jsb2IvZTY2YmEyMGFkNWJlNDMzZWI1NDQyM2YyYjA5N2Q4MjkzMjRkOWRlNi9wYWNrYWdlcy9mYmpzL3NyYy9fX2ZvcmtzX18vd2FybmluZy5qcwogICAgICAgICAgICAgKgogICAgICAgICAgICAgKiBPbmx5IGNoYW5nZSBpcyB3ZSB1c2UgY29uc29sZS53YXJuIGluc3RlYWQgb2YgY29uc29sZS5lcnJvciwKICAgICAgICAgICAgICogYW5kIGRvIG5vdGhpbmcgd2hlbiAnY29uc29sZScgaXMgbm90IHN1cHBvcnRlZC4KICAgICAgICAgICAgICogVGhpcyByZWFsbHkgc2ltcGxpZmllcyB0aGUgY29kZS4KICAgICAgICAgICAgICogLS0tCiAgICAgICAgICAgICAqIFNpbWlsYXIgdG8gaW52YXJpYW50IGJ1dCBvbmx5IGxvZ3MgYSB3YXJuaW5nIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IG1ldC4KICAgICAgICAgICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbAogICAgICAgICAgICAgKiBwYXRocy4gUmVtb3ZpbmcgdGhlIGxvZ2dpbmcgY29kZSBmb3IgcHJvZHVjdGlvbiBlbnZpcm9ubWVudHMgd2lsbCBrZWVwIHRoZQogICAgICAgICAgICAgKiBzYW1lIGxvZ2ljIGFuZCBmb2xsb3cgdGhlIHNhbWUgY29kZSBwYXRocy4KICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgdmFyIGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjayA9IGZ1bmN0aW9uIGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjaygpIHt9OwoKICAgICAgICAgICAgewogICAgICAgICAgICAgIHZhciBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiBwcmludFdhcm5pbmcoZm9ybWF0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBhcmdJbmRleCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tCiAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFjawogICAgICAgICAgICAgICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS4KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoeCkge30KICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2sgPSBmdW5jdGlvbiBsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2soY29uZGl0aW9uLCBmb3JtYXQpIHsKICAgICAgICAgICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Bsb3dQcmlvcml0eVdhcm5pbmdXaXRob3V0U3RhY2soY29uZGl0aW9uLCBmb3JtYXQsIC4uLmFyZ3MpYCByZXF1aXJlcyBhIHdhcm5pbmcgJyArICdtZXNzYWdlIGFyZ3VtZW50Jyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb24pIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yID4gMiA/IF9sZW4yIC0gMiA6IDApLCBfa2V5MiA9IDI7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKICAgICAgICAgICAgICAgICAgICBhcmdzW19rZXkyIC0gMl0gPSBhcmd1bWVudHNbX2tleTJdOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBwcmludFdhcm5pbmcuYXBwbHkodm9pZCAwLCBbZm9ybWF0XS5jb25jYXQoYXJncykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjayQxID0gbG93UHJpb3JpdHlXYXJuaW5nV2l0aG91dFN0YWNrOwoKICAgICAgICAgICAgZnVuY3Rpb24gdHlwZU9mKG9iamVjdCkgewogICAgICAgICAgICAgIGlmIChfdHlwZW9mNChvYmplY3QpID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHZhciAkJHR5cGVvZiA9IG9iamVjdC4kJHR5cGVvZjsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggKCQkdHlwZW9mKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfRUxFTUVOVF9UWVBFOgogICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gb2JqZWN0LnR5cGU7CgogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9BU1lOQ19NT0RFX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZTsKCiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJCR0eXBlb2ZUeXBlID0gdHlwZSAmJiB0eXBlLiQkdHlwZW9mOwoKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgkJHR5cGVvZlR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0NPTlRFWFRfVFlQRToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QUk9WSURFUl9UWVBFOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQkdHlwZW9mVHlwZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkJHR5cGVvZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAkJHR5cGVvZjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0gLy8gQXN5bmNNb2RlIGlzIGRlcHJlY2F0ZWQgYWxvbmcgd2l0aCBpc0FzeW5jTW9kZQoKCiAgICAgICAgICAgIHZhciBBc3luY01vZGUgPSBSRUFDVF9BU1lOQ19NT0RFX1RZUEU7CiAgICAgICAgICAgIHZhciBDb25jdXJyZW50TW9kZSA9IFJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFOwogICAgICAgICAgICB2YXIgQ29udGV4dENvbnN1bWVyID0gUkVBQ1RfQ09OVEVYVF9UWVBFOwogICAgICAgICAgICB2YXIgQ29udGV4dFByb3ZpZGVyID0gUkVBQ1RfUFJPVklERVJfVFlQRTsKICAgICAgICAgICAgdmFyIEVsZW1lbnQgPSBSRUFDVF9FTEVNRU5UX1RZUEU7CiAgICAgICAgICAgIHZhciBGb3J3YXJkUmVmID0gUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTsKICAgICAgICAgICAgdmFyIEZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTsKICAgICAgICAgICAgdmFyIExhenkgPSBSRUFDVF9MQVpZX1RZUEU7CiAgICAgICAgICAgIHZhciBNZW1vID0gUkVBQ1RfTUVNT19UWVBFOwogICAgICAgICAgICB2YXIgUG9ydGFsID0gUkVBQ1RfUE9SVEFMX1RZUEU7CiAgICAgICAgICAgIHZhciBQcm9maWxlciA9IFJFQUNUX1BST0ZJTEVSX1RZUEU7CiAgICAgICAgICAgIHZhciBTdHJpY3RNb2RlID0gUkVBQ1RfU1RSSUNUX01PREVfVFlQRTsKICAgICAgICAgICAgdmFyIFN1c3BlbnNlID0gUkVBQ1RfU1VTUEVOU0VfVFlQRTsKICAgICAgICAgICAgdmFyIGhhc1dhcm5lZEFib3V0RGVwcmVjYXRlZElzQXN5bmNNb2RlID0gZmFsc2U7IC8vIEFzeW5jTW9kZSBzaG91bGQgYmUgZGVwcmVjYXRlZAoKICAgICAgICAgICAgZnVuY3Rpb24gaXNBc3luY01vZGUob2JqZWN0KSB7CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCFoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0FzeW5jTW9kZSkgewogICAgICAgICAgICAgICAgICBoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0FzeW5jTW9kZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIGxvd1ByaW9yaXR5V2FybmluZ1dpdGhvdXRTdGFjayQxKGZhbHNlLCAnVGhlIFJlYWN0SXMuaXNBc3luY01vZGUoKSBhbGlhcyBoYXMgYmVlbiBkZXByZWNhdGVkLCAnICsgJ2FuZCB3aWxsIGJlIHJlbW92ZWQgaW4gUmVhY3QgMTcrLiBVcGRhdGUgeW91ciBjb2RlIHRvIHVzZSAnICsgJ1JlYWN0SXMuaXNDb25jdXJyZW50TW9kZSgpIGluc3RlYWQuIEl0IGhhcyB0aGUgZXhhY3Qgc2FtZSBBUEkuJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBpc0NvbmN1cnJlbnRNb2RlKG9iamVjdCkgfHwgdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0FTWU5DX01PREVfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNDb25jdXJyZW50TW9kZShvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0NvbnRleHRDb25zdW1lcihvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0NPTlRFWFRfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNDb250ZXh0UHJvdmlkZXIob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QUk9WSURFUl9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc0VsZW1lbnQob2JqZWN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90eXBlb2Y0KG9iamVjdCkgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCAmJiBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNGb3J3YXJkUmVmKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNGcmFnbWVudChvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzTGF6eShvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0xBWllfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNNZW1vKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfTUVNT19UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc1BvcnRhbChvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1BPUlRBTF9UWVBFOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc1Byb2ZpbGVyKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfUFJPRklMRVJfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNTdHJpY3RNb2RlKG9iamVjdCkgewogICAgICAgICAgICAgIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfU1RSSUNUX01PREVfVFlQRTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaXNTdXNwZW5zZShvYmplY3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGV4cG9ydHMudHlwZU9mID0gdHlwZU9mOwogICAgICAgICAgICBleHBvcnRzLkFzeW5jTW9kZSA9IEFzeW5jTW9kZTsKICAgICAgICAgICAgZXhwb3J0cy5Db25jdXJyZW50TW9kZSA9IENvbmN1cnJlbnRNb2RlOwogICAgICAgICAgICBleHBvcnRzLkNvbnRleHRDb25zdW1lciA9IENvbnRleHRDb25zdW1lcjsKICAgICAgICAgICAgZXhwb3J0cy5Db250ZXh0UHJvdmlkZXIgPSBDb250ZXh0UHJvdmlkZXI7CiAgICAgICAgICAgIGV4cG9ydHMuRWxlbWVudCA9IEVsZW1lbnQ7CiAgICAgICAgICAgIGV4cG9ydHMuRm9yd2FyZFJlZiA9IEZvcndhcmRSZWY7CiAgICAgICAgICAgIGV4cG9ydHMuRnJhZ21lbnQgPSBGcmFnbWVudDsKICAgICAgICAgICAgZXhwb3J0cy5MYXp5ID0gTGF6eTsKICAgICAgICAgICAgZXhwb3J0cy5NZW1vID0gTWVtbzsKICAgICAgICAgICAgZXhwb3J0cy5Qb3J0YWwgPSBQb3J0YWw7CiAgICAgICAgICAgIGV4cG9ydHMuUHJvZmlsZXIgPSBQcm9maWxlcjsKICAgICAgICAgICAgZXhwb3J0cy5TdHJpY3RNb2RlID0gU3RyaWN0TW9kZTsKICAgICAgICAgICAgZXhwb3J0cy5TdXNwZW5zZSA9IFN1c3BlbnNlOwogICAgICAgICAgICBleHBvcnRzLmlzVmFsaWRFbGVtZW50VHlwZSA9IGlzVmFsaWRFbGVtZW50VHlwZTsKICAgICAgICAgICAgZXhwb3J0cy5pc0FzeW5jTW9kZSA9IGlzQXN5bmNNb2RlOwogICAgICAgICAgICBleHBvcnRzLmlzQ29uY3VycmVudE1vZGUgPSBpc0NvbmN1cnJlbnRNb2RlOwogICAgICAgICAgICBleHBvcnRzLmlzQ29udGV4dENvbnN1bWVyID0gaXNDb250ZXh0Q29uc3VtZXI7CiAgICAgICAgICAgIGV4cG9ydHMuaXNDb250ZXh0UHJvdmlkZXIgPSBpc0NvbnRleHRQcm92aWRlcjsKICAgICAgICAgICAgZXhwb3J0cy5pc0VsZW1lbnQgPSBpc0VsZW1lbnQ7CiAgICAgICAgICAgIGV4cG9ydHMuaXNGb3J3YXJkUmVmID0gaXNGb3J3YXJkUmVmOwogICAgICAgICAgICBleHBvcnRzLmlzRnJhZ21lbnQgPSBpc0ZyYWdtZW50OwogICAgICAgICAgICBleHBvcnRzLmlzTGF6eSA9IGlzTGF6eTsKICAgICAgICAgICAgZXhwb3J0cy5pc01lbW8gPSBpc01lbW87CiAgICAgICAgICAgIGV4cG9ydHMuaXNQb3J0YWwgPSBpc1BvcnRhbDsKICAgICAgICAgICAgZXhwb3J0cy5pc1Byb2ZpbGVyID0gaXNQcm9maWxlcjsKICAgICAgICAgICAgZXhwb3J0cy5pc1N0cmljdE1vZGUgPSBpc1N0cmljdE1vZGU7CiAgICAgICAgICAgIGV4cG9ydHMuaXNTdXNwZW5zZSA9IGlzU3VzcGVuc2U7CiAgICAgICAgICB9KSgpOwogICAgICAgIH0KICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogODkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwoKICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzKSB7CiAgICAgICAgLyoqCiAgICAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4KICAgICAgICAqCiAgICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgICAgICAqLwogICAgICAgIHZhciBSZWFjdElzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7CgogICAgICAgIHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKTsKCiAgICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7CgogICAgICAgIHZhciBjaGVja1Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpOwoKICAgICAgICB2YXIgaGFzID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpOwoKICAgICAgICB2YXIgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKCkge307CgogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiBwcmludFdhcm5pbmcodGV4dCkgewogICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgdGV4dDsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS0KICAgICAgICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2sKICAgICAgICAgICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS4KICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHt9CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbCgpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXNWYWxpZEVsZW1lbnQsIHRocm93T25EaXJlY3RBY2Nlc3MpIHsKICAgICAgICAgIC8qIGdsb2JhbCBTeW1ib2wgKi8KICAgICAgICAgIHZhciBJVEVSQVRPUl9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5pdGVyYXRvcjsKICAgICAgICAgIHZhciBGQVVYX0lURVJBVE9SX1NZTUJPTCA9ICdAQGl0ZXJhdG9yJzsgLy8gQmVmb3JlIFN5bWJvbCBzcGVjLgoKICAgICAgICAgIC8qKgogICAgICAgICAgICogUmV0dXJucyB0aGUgaXRlcmF0b3IgbWV0aG9kIGZ1bmN0aW9uIGNvbnRhaW5lZCBvbiB0aGUgaXRlcmFibGUgb2JqZWN0LgogICAgICAgICAgICoKICAgICAgICAgICAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OgogICAgICAgICAgICoKICAgICAgICAgICAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7CiAgICAgICAgICAgKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHsKICAgICAgICAgICAqICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChteUl0ZXJhYmxlKTsKICAgICAgICAgICAqICAgICAgIC4uLgogICAgICAgICAgICogICAgIH0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGUKICAgICAgICAgICAqIEByZXR1cm4gez9mdW5jdGlvbn0KICAgICAgICAgICAqLwoKICAgICAgICAgIGZ1bmN0aW9uIGdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSkgewogICAgICAgICAgICB2YXIgaXRlcmF0b3JGbiA9IG1heWJlSXRlcmFibGUgJiYgKElURVJBVE9SX1NZTUJPTCAmJiBtYXliZUl0ZXJhYmxlW0lURVJBVE9SX1NZTUJPTF0gfHwgbWF5YmVJdGVyYWJsZVtGQVVYX0lURVJBVE9SX1NZTUJPTF0pOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVyYXRvckZuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8qKgogICAgICAgICAgICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIHRoYXQgYWxsb3cgZGVjbGFyYXRpb24gYW5kIHZhbGlkYXRpb24gb2YgcHJvcHMgdGhhdCBhcmUKICAgICAgICAgICAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6CiAgICAgICAgICAgKgogICAgICAgICAgICogICB2YXIgUHJvcHMgPSByZXF1aXJlKCdSZWFjdFByb3BUeXBlcycpOwogICAgICAgICAgICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3MoewogICAgICAgICAgICogICAgIHByb3BUeXBlczogewogICAgICAgICAgICogICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIHByb3AgbmFtZWQgImRlc2NyaXB0aW9uIi4KICAgICAgICAgICAqICAgICAgIGRlc2NyaXB0aW9uOiBQcm9wcy5zdHJpbmcsCiAgICAgICAgICAgKgogICAgICAgICAgICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgImNhdGVnb3J5Ii4KICAgICAgICAgICAqICAgICAgIGNhdGVnb3J5OiBQcm9wcy5vbmVPZihbJ05ld3MnLCdQaG90b3MnXSkuaXNSZXF1aXJlZCwKICAgICAgICAgICAqCiAgICAgICAgICAgKiAgICAgICAvLyBBIHByb3AgbmFtZWQgImRpYWxvZyIgdGhhdCByZXF1aXJlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2cuCiAgICAgICAgICAgKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkCiAgICAgICAgICAgKiAgICAgfSwKICAgICAgICAgICAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgeyAuLi4gfQogICAgICAgICAgICogICB9KTsKICAgICAgICAgICAqCiAgICAgICAgICAgKiBBIG1vcmUgZm9ybWFsIHNwZWNpZmljYXRpb24gb2YgaG93IHRoZXNlIG1ldGhvZHMgYXJlIHVzZWQ6CiAgICAgICAgICAgKgogICAgICAgICAgICogICB0eXBlIDo9IGFycmF5fGJvb2x8ZnVuY3xvYmplY3R8bnVtYmVyfHN0cmluZ3xvbmVPZihbLi4uXSl8aW5zdGFuY2VPZiguLi4pCiAgICAgICAgICAgKiAgIGRlY2wgOj0gUmVhY3RQcm9wVHlwZXMue3R5cGV9KC5pc1JlcXVpcmVkKT8KICAgICAgICAgICAqCiAgICAgICAgICAgKiBFYWNoIGFuZCBldmVyeSBkZWNsYXJhdGlvbiBwcm9kdWNlcyBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgc2lnbmF0dXJlLiBUaGlzCiAgICAgICAgICAgKiBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6CiAgICAgICAgICAgKgogICAgICAgICAgICogIHZhciBNeUxpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7CiAgICAgICAgICAgKiAgICBwcm9wVHlwZXM6IHsKICAgICAgICAgICAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkICJocmVmIi4KICAgICAgICAgICAqICAgICAgaHJlZjogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7CiAgICAgICAgICAgKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKICAgICAgICAgICAqICAgICAgICBpZiAocHJvcFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHByb3BWYWx1ZSAhPT0gJ3N0cmluZycgJiYKICAgICAgICAgICAqICAgICAgICAgICAgIShwcm9wVmFsdWUgaW5zdGFuY2VvZiBVUkkpKSB7CiAgICAgICAgICAgKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKAogICAgICAgICAgICogICAgICAgICAgICAnRXhwZWN0ZWQgYSBzdHJpbmcgb3IgYW4gVVJJIGZvciAnICsgcHJvcE5hbWUgKyAnIGluICcgKwogICAgICAgICAgICogICAgICAgICAgICBjb21wb25lbnROYW1lCiAgICAgICAgICAgKiAgICAgICAgICApOwogICAgICAgICAgICogICAgICAgIH0KICAgICAgICAgICAqICAgICAgfQogICAgICAgICAgICogICAgfSwKICAgICAgICAgICAqICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7Li4ufQogICAgICAgICAgICogIH0pOwogICAgICAgICAgICoKICAgICAgICAgICAqIEBpbnRlcm5hbAogICAgICAgICAgICovCgoKICAgICAgICAgIHZhciBBTk9OWU1PVVMgPSAnPDxhbm9ueW1vdXM+Pic7IC8vIEltcG9ydGFudCEKICAgICAgICAgIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzYC4KCiAgICAgICAgICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7CiAgICAgICAgICAgIGFycmF5OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYXJyYXknKSwKICAgICAgICAgICAgYm9vbDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Jvb2xlYW4nKSwKICAgICAgICAgICAgZnVuYzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Z1bmN0aW9uJyksCiAgICAgICAgICAgIG51bWJlcjogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ251bWJlcicpLAogICAgICAgICAgICBvYmplY3Q6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdvYmplY3QnKSwKICAgICAgICAgICAgc3RyaW5nOiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3RyaW5nJyksCiAgICAgICAgICAgIHN5bWJvbDogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N5bWJvbCcpLAogICAgICAgICAgICBhbnk6IGNyZWF0ZUFueVR5cGVDaGVja2VyKCksCiAgICAgICAgICAgIGFycmF5T2Y6IGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlciwKICAgICAgICAgICAgZWxlbWVudDogY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCksCiAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBjcmVhdGVFbGVtZW50VHlwZVR5cGVDaGVja2VyKCksCiAgICAgICAgICAgIGluc3RhbmNlT2Y6IGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsCiAgICAgICAgICAgIG5vZGU6IGNyZWF0ZU5vZGVDaGVja2VyKCksCiAgICAgICAgICAgIG9iamVjdE9mOiBjcmVhdGVPYmplY3RPZlR5cGVDaGVja2VyLAogICAgICAgICAgICBvbmVPZjogY3JlYXRlRW51bVR5cGVDaGVja2VyLAogICAgICAgICAgICBvbmVPZlR5cGU6IGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsCiAgICAgICAgICAgIHNoYXBlOiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyLAogICAgICAgICAgICBleGFjdDogY3JlYXRlU3RyaWN0U2hhcGVUeXBlQ2hlY2tlcgogICAgICAgICAgfTsKICAgICAgICAgIC8qKgogICAgICAgICAgICogaW5saW5lZCBPYmplY3QuaXMgcG9seWZpbGwgdG8gYXZvaWQgcmVxdWlyaW5nIGNvbnN1bWVycyBzaGlwIHRoZWlyIG93bgogICAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzCiAgICAgICAgICAgKi8KCiAgICAgICAgICAvKmVzbGludC1kaXNhYmxlIG5vLXNlbGYtY29tcGFyZSovCgogICAgICAgICAgZnVuY3Rpb24gaXMoeCwgeSkgewogICAgICAgICAgICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtCiAgICAgICAgICAgIGlmICh4ID09PSB5KSB7CiAgICAgICAgICAgICAgLy8gU3RlcHMgMS01LCA3LTEwCiAgICAgICAgICAgICAgLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTAKICAgICAgICAgICAgICByZXR1cm4geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gU3RlcCA2LmE6IE5hTiA9PSBOYU4KICAgICAgICAgICAgICByZXR1cm4geCAhPT0geCAmJiB5ICE9PSB5OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvKmVzbGludC1lbmFibGUgbm8tc2VsZi1jb21wYXJlKi8KCiAgICAgICAgICAvKioKICAgICAgICAgICAqIFdlIHVzZSBhbiBFcnJvci1saWtlIG9iamVjdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBhcyBwZW9wbGUgbWF5IGNhbGwKICAgICAgICAgICAqIFByb3BUeXBlcyBkaXJlY3RseSBhbmQgaW5zcGVjdCB0aGVpciBvdXRwdXQuIEhvd2V2ZXIsIHdlIGRvbid0IHVzZSByZWFsCiAgICAgICAgICAgKiBFcnJvcnMgYW55bW9yZS4gV2UgZG9uJ3QgaW5zcGVjdCB0aGVpciBzdGFjayBhbnl3YXksIGFuZCBjcmVhdGluZyB0aGVtCiAgICAgICAgICAgKiBpcyBwcm9oaWJpdGl2ZWx5IGV4cGVuc2l2ZSBpZiB0aGV5IGFyZSBjcmVhdGVkIHRvbyBvZnRlbiwgc3VjaCBhcyB3aGF0CiAgICAgICAgICAgKiBoYXBwZW5zIGluIG9uZU9mVHlwZSgpIGZvciBhbnkgdHlwZSBiZWZvcmUgdGhlIG9uZSB0aGF0IG1hdGNoZWQuCiAgICAgICAgICAgKi8KCgogICAgICAgICAgZnVuY3Rpb24gUHJvcFR5cGVFcnJvcihtZXNzYWdlKSB7CiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSAnJzsKICAgICAgICAgIH0gLy8gTWFrZSBgaW5zdGFuY2VvZiBFcnJvcmAgc3RpbGwgd29yayBmb3IgcmV0dXJuZWQgZXJyb3JzLgoKCiAgICAgICAgICBQcm9wVHlwZUVycm9yLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTsKCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSkgewogICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgICAgIHZhciBtYW51YWxQcm9wVHlwZUNhbGxDYWNoZSA9IHt9OwogICAgICAgICAgICAgIHZhciBtYW51YWxQcm9wVHlwZVdhcm5pbmdDb3VudCA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrVHlwZShpc1JlcXVpcmVkLCBwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkgewogICAgICAgICAgICAgIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lIHx8IEFOT05ZTU9VUzsKICAgICAgICAgICAgICBwcm9wRnVsbE5hbWUgPSBwcm9wRnVsbE5hbWUgfHwgcHJvcE5hbWU7CgogICAgICAgICAgICAgIGlmIChzZWNyZXQgIT09IFJlYWN0UHJvcFR5cGVzU2VjcmV0KSB7CiAgICAgICAgICAgICAgICBpZiAodGhyb3dPbkRpcmVjdEFjY2VzcykgewogICAgICAgICAgICAgICAgICAvLyBOZXcgYmVoYXZpb3Igb25seSBmb3IgdXNlcnMgb2YgYHByb3AtdHlwZXNgIHBhY2thZ2UKICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJyArICdVc2UgYFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpYCB0byBjYWxsIHRoZW0uICcgKyAnUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcycpOwogICAgICAgICAgICAgICAgICBlcnIubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJzsKICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAvLyBPbGQgYmVoYXZpb3IgZm9yIHBlb3BsZSB1c2luZyBSZWFjdC5Qcm9wVHlwZXMKICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlS2V5ID0gY29tcG9uZW50TmFtZSArICc6JyArIHByb3BOYW1lOwoKICAgICAgICAgICAgICAgICAgaWYgKCFtYW51YWxQcm9wVHlwZUNhbGxDYWNoZVtjYWNoZUtleV0gJiYgLy8gQXZvaWQgc3BhbW1pbmcgdGhlIGNvbnNvbGUgYmVjYXVzZSB0aGV5IGFyZSBvZnRlbiBub3QgYWN0aW9uYWJsZSBleGNlcHQgZm9yIGxpYiBhdXRob3JzCiAgICAgICAgICAgICAgICAgIG1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50IDwgMykgewogICAgICAgICAgICAgICAgICAgIHByaW50V2FybmluZygnWW91IGFyZSBtYW51YWxseSBjYWxsaW5nIGEgUmVhY3QuUHJvcFR5cGVzIHZhbGlkYXRpb24gJyArICdmdW5jdGlvbiBmb3IgdGhlIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2AgcHJvcCBvbiBgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4gVGhpcyBpcyBkZXByZWNhdGVkICcgKyAnYW5kIHdpbGwgdGhyb3cgaW4gdGhlIHN0YW5kYWxvbmUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcgKyAnWW91IG1heSBiZSBzZWVpbmcgdGhpcyB3YXJuaW5nIGR1ZSB0byBhIHRoaXJkLXBhcnR5IFByb3BUeXBlcyAnICsgJ2xpYnJhcnkuIFNlZSBodHRwczovL2ZiLm1lL3JlYWN0LXdhcm5pbmctZG9udC1jYWxsLXByb3B0eXBlcyAnICsgJ2ZvciBkZXRhaWxzLicpOwogICAgICAgICAgICAgICAgICAgIG1hbnVhbFByb3BUeXBlQ2FsbENhY2hlW2NhY2hlS2V5XSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbWFudWFsUHJvcFR5cGVXYXJuaW5nQ291bnQrKzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHByb3BzW3Byb3BOYW1lXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNSZXF1aXJlZCkgewogICAgICAgICAgICAgICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdUaGUgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIGlzIG1hcmtlZCBhcyByZXF1aXJlZCAnICsgKCdpbiBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgYnV0IGl0cyB2YWx1ZSBpcyBgbnVsbGAuJykpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2AgaXMgbWFya2VkIGFzIHJlcXVpcmVkIGluICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBidXQgaXRzIHZhbHVlIGlzIGB1bmRlZmluZWRgLicpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgY2hhaW5lZENoZWNrVHlwZSA9IGNoZWNrVHlwZS5iaW5kKG51bGwsIGZhbHNlKTsKICAgICAgICAgICAgY2hhaW5lZENoZWNrVHlwZS5pc1JlcXVpcmVkID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBjaGFpbmVkQ2hlY2tUeXBlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKGV4cGVjdGVkVHlwZSkgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkgewogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CiAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKHByb3BUeXBlICE9PSBleHBlY3RlZFR5cGUpIHsKICAgICAgICAgICAgICAgIC8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0JwogICAgICAgICAgICAgICAgLy8gY2hlY2ssIGJ1dCB3ZSBjYW4gb2ZmZXIgYSBtb3JlIHByZWNpc2UgZXJyb3IgbWVzc2FnZSBoZXJlIHJhdGhlciB0aGFuCiAgICAgICAgICAgICAgICAvLyAnb2YgdHlwZSBgb2JqZWN0YCcuCiAgICAgICAgICAgICAgICB2YXIgcHJlY2lzZVR5cGUgPSBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJlY2lzZVR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2AnICsgZXhwZWN0ZWRUeXBlICsgJ2AuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVBcnJheU9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlQ2hlY2tlciAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdQcm9wZXJ0eSBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIGNvbXBvbmVudCBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgYXJyYXlPZi4nKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CgogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gYXJyYXkuJykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwgaSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICdbJyArIGkgKyAnXScsIFJlYWN0UHJvcFR5cGVzU2VjcmV0KTsKCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CgogICAgICAgICAgICAgIGlmICghaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByb3BUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudC4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZVR5cGVDaGVja2VyKCkgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwoKICAgICAgICAgICAgICBpZiAoIVJlYWN0SXMuaXNWYWxpZEVsZW1lbnRUeXBlKHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQgdHlwZS4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyKGV4cGVjdGVkQ2xhc3MpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgaWYgKCEocHJvcHNbcHJvcE5hbWVdIGluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpIHsKICAgICAgICAgICAgICAgIHZhciBleHBlY3RlZENsYXNzTmFtZSA9IGV4cGVjdGVkQ2xhc3MubmFtZSB8fCBBTk9OWU1PVVM7CiAgICAgICAgICAgICAgICB2YXIgYWN0dWFsQ2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKHByb3BzW3Byb3BOYW1lXSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBhY3R1YWxDbGFzc05hbWUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2luc3RhbmNlIG9mIGAnICsgZXhwZWN0ZWRDbGFzc05hbWUgKyAnYC4nKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIoZXhwZWN0ZWRWYWx1ZXMpIHsKICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVmFsdWVzKSkgewogICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50cyBzdXBwbGllZCB0byBvbmVPZiwgZXhwZWN0ZWQgYW4gYXJyYXksIGdvdCAnICsgYXJndW1lbnRzLmxlbmd0aCArICcgYXJndW1lbnRzLiAnICsgJ0EgY29tbW9uIG1pc3Rha2UgaXMgdG8gd3JpdGUgb25lT2YoeCwgeSwgeikgaW5zdGVhZCBvZiBvbmVPZihbeCwgeSwgel0pLicpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheS4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwoKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkVmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaXMocHJvcFZhbHVlLCBleHBlY3RlZFZhbHVlc1tpXSkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgdmFsdWVzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRWYWx1ZXMsIGZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZ2V0UHJlY2lzZVR5cGUodmFsdWUpOwoKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnc3ltYm9sJykgewogICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB2YWx1ZSBgJyArIFN0cmluZyhwcm9wVmFsdWUpICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIG9uZSBvZiAnICsgdmFsdWVzU3RyaW5nICsgJy4nKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVDaGVja2VyICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1Byb3BlcnR5IGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgY29tcG9uZW50IGAnICsgY29tcG9uZW50TmFtZSArICdgIGhhcyBpbnZhbGlkIFByb3BUeXBlIG5vdGF0aW9uIGluc2lkZSBvYmplY3RPZi4nKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07CiAgICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gb2JqZWN0LicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wVmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmIChoYXMocHJvcFZhbHVlLCBrZXkpKSB7CiAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7CgogICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKSB7CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheU9mVHlwZUNoZWNrZXJzKSkgewogICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2ZUeXBlLCBleHBlY3RlZCBhbiBpbnN0YW5jZSBvZiBhcnJheS4nKSA6IHZvaWQgMDsKICAgICAgICAgICAgICByZXR1cm4gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIGNoZWNrZXIgPSBhcnJheU9mVHlwZUNoZWNrZXJzW2ldOwoKICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoZWNrZXIgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUuIEV4cGVjdGVkIGFuIGFycmF5IG9mIGNoZWNrIGZ1bmN0aW9ucywgYnV0ICcgKyAncmVjZWl2ZWQgJyArIGdldFBvc3RmaXhGb3JUeXBlV2FybmluZyhjaGVja2VyKSArICcgYXQgaW5kZXggJyArIGkgKyAnLicpOwogICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5T2ZUeXBlQ2hlY2tlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTsKCiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlcihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIFJlYWN0UHJvcFR5cGVzU2VjcmV0KSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgewogICAgICAgICAgICAgIGlmICghaXNOb2RlKHByb3BzW3Byb3BOYW1lXSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgUmVhY3ROb2RlLicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIoc2hhcGVUeXBlcykgewogICAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHsKICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdOwogICAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CgogICAgICAgICAgICAgIGlmIChwcm9wVHlwZSAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb24gKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSBgJyArIHByb3BUeXBlICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGBvYmplY3RgLicpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzaGFwZVR5cGVzKSB7CiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTsKCiAgICAgICAgICAgICAgICBpZiAoIWNoZWNrZXIpIHsKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGVycm9yID0gY2hlY2tlcihwcm9wVmFsdWUsIGtleSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSArICcuJyArIGtleSwgUmVhY3RQcm9wVHlwZXNTZWNyZXQpOwoKICAgICAgICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTdHJpY3RTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTsKICAgICAgICAgICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpOwoKICAgICAgICAgICAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7CiAgICAgICAgICAgICAgfSAvLyBXZSBuZWVkIHRvIGNoZWNrIGFsbCBrZXlzIGluIGNhc2Ugc29tZSBhcmUgcmVxdWlyZWQgYnV0IG1pc3NpbmcgZnJvbQogICAgICAgICAgICAgIC8vIHByb3BzLgoKCiAgICAgICAgICAgICAgdmFyIGFsbEtleXMgPSBhc3NpZ24oe30sIHByb3BzW3Byb3BOYW1lXSwgc2hhcGVUeXBlcyk7CgogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBhbGxLZXlzKSB7CiAgICAgICAgICAgICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTsKCiAgICAgICAgICAgICAgICBpZiAoIWNoZWNrZXIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbiArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBrZXkgYCcgKyBrZXkgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nICsgJ1xuQmFkIG9iamVjdDogJyArIEpTT04uc3RyaW5naWZ5KHByb3BzW3Byb3BOYW1lXSwgbnVsbCwgJyAgJykgKyAnXG5WYWxpZCBrZXlzOiAnICsgSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmtleXMoc2hhcGVUeXBlcyksIG51bGwsICcgICcpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCBSZWFjdFByb3BUeXBlc1NlY3JldCk7CgogICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpIHsKICAgICAgICAgICAgc3dpdGNoIChfdHlwZW9mNChwcm9wVmFsdWUpKSB7CiAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6CiAgICAgICAgICAgICAgICByZXR1cm4gIXByb3BWYWx1ZTsKCiAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzoKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BWYWx1ZS5ldmVyeShpc05vZGUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChwcm9wVmFsdWUgPT09IG51bGwgfHwgaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4ocHJvcFZhbHVlKTsKCiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0b3JGbikgewogICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwocHJvcFZhbHVlKTsKICAgICAgICAgICAgICAgICAgdmFyIHN0ZXA7CgogICAgICAgICAgICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gcHJvcFZhbHVlLmVudHJpZXMpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTm9kZShzdGVwLnZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLgogICAgICAgICAgICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOb2RlKGVudHJ5WzFdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaXNTeW1ib2wocHJvcFR5cGUsIHByb3BWYWx1ZSkgewogICAgICAgICAgICAvLyBOYXRpdmUgU3ltYm9sLgogICAgICAgICAgICBpZiAocHJvcFR5cGUgPT09ICdzeW1ib2wnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0gLy8gZmFsc3kgdmFsdWUgY2FuJ3QgYmUgYSBTeW1ib2wKCgogICAgICAgICAgICBpZiAoIXByb3BWYWx1ZSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSAvLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddID09PSAnU3ltYm9sJwoKCiAgICAgICAgICAgIGlmIChwcm9wVmFsdWVbJ0BAdG9TdHJpbmdUYWcnXSA9PT0gJ1N5bWJvbCcpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSAvLyBGYWxsYmFjayBmb3Igbm9uLXNwZWMgY29tcGxpYW50IFN5bWJvbHMgd2hpY2ggYXJlIHBvbHlmaWxsZWQuCgoKICAgICAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgcHJvcFZhbHVlIGluc3RhbmNlb2YgU3ltYm9sKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gLy8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLgoKCiAgICAgICAgICBmdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpIHsKICAgICAgICAgICAgdmFyIHByb3BUeXBlID0gX3R5cGVvZjQocHJvcFZhbHVlKTsKCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHsKICAgICAgICAgICAgICByZXR1cm4gJ2FycmF5JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICAgICAgICAgIC8vIE9sZCB3ZWJraXRzIChhdCBsZWFzdCB1bnRpbCBBbmRyb2lkIDQuMCkgcmV0dXJuICdmdW5jdGlvbicgcmF0aGVyIHRoYW4KICAgICAgICAgICAgICAvLyAnb2JqZWN0JyBmb3IgdHlwZW9mIGEgUmVnRXhwLiBXZSdsbCBub3JtYWxpemUgdGhpcyBoZXJlIHNvIHRoYXQgL2JsYS8KICAgICAgICAgICAgICAvLyBwYXNzZXMgUHJvcFR5cGVzLm9iamVjdC4KICAgICAgICAgICAgICByZXR1cm4gJ29iamVjdCc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc1N5bWJvbChwcm9wVHlwZSwgcHJvcFZhbHVlKSkgewogICAgICAgICAgICAgIHJldHVybiAnc3ltYm9sJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHByb3BUeXBlOwogICAgICAgICAgfSAvLyBUaGlzIGhhbmRsZXMgbW9yZSB0eXBlcyB0aGFuIGBnZXRQcm9wVHlwZWAuIE9ubHkgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuCiAgICAgICAgICAvLyBTZWUgYGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyYC4KCgogICAgICAgICAgZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcFZhbHVlID09PSAndW5kZWZpbmVkJyB8fCBwcm9wVmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gJycgKyBwcm9wVmFsdWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7CgogICAgICAgICAgICBpZiAocHJvcFR5cGUgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIERhdGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnZGF0ZSc7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgICAgICAgIHJldHVybiAncmVnZXhwJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBwcm9wVHlwZTsKICAgICAgICAgIH0gLy8gUmV0dXJucyBhIHN0cmluZyB0aGF0IGlzIHBvc3RmaXhlZCB0byBhIHdhcm5pbmcgYWJvdXQgYW4gaW52YWxpZCB0eXBlLgogICAgICAgICAgLy8gRm9yIGV4YW1wbGUsICJ1bmRlZmluZWQiIG9yICJvZiB0eXBlIGFycmF5IgoKCiAgICAgICAgICBmdW5jdGlvbiBnZXRQb3N0Zml4Rm9yVHlwZVdhcm5pbmcodmFsdWUpIHsKICAgICAgICAgICAgdmFyIHR5cGUgPSBnZXRQcmVjaXNlVHlwZSh2YWx1ZSk7CgogICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICBjYXNlICdhcnJheSc6CiAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzoKICAgICAgICAgICAgICAgIHJldHVybiAnYW4gJyArIHR5cGU7CgogICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOgogICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOgogICAgICAgICAgICAgIGNhc2UgJ3JlZ2V4cCc6CiAgICAgICAgICAgICAgICByZXR1cm4gJ2EgJyArIHR5cGU7CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZXR1cm5zIGNsYXNzIG5hbWUgb2YgdGhlIG9iamVjdCwgaWYgYW55LgoKCiAgICAgICAgICBmdW5jdGlvbiBnZXRDbGFzc05hbWUocHJvcFZhbHVlKSB7CiAgICAgICAgICAgIGlmICghcHJvcFZhbHVlLmNvbnN0cnVjdG9yIHx8ICFwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZSkgewogICAgICAgICAgICAgIHJldHVybiBBTk9OWU1PVVM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZTsKICAgICAgICAgIH0KCiAgICAgICAgICBSZWFjdFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcyA9IGNoZWNrUHJvcFR5cGVzOwogICAgICAgICAgUmVhY3RQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGUgPSBjaGVja1Byb3BUeXBlcy5yZXNldFdhcm5pbmdDYWNoZTsKICAgICAgICAgIFJlYWN0UHJvcFR5cGVzLlByb3BUeXBlcyA9IFJlYWN0UHJvcFR5cGVzOwogICAgICAgICAgcmV0dXJuIFJlYWN0UHJvcFR5cGVzOwogICAgICAgIH07CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSkpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDkwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKgogICAgICBvYmplY3QtYXNzaWduCiAgICAgIChjKSBTaW5kcmUgU29yaHVzCiAgICAgIEBsaWNlbnNlIE1JVAogICAgICAqLwoKICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KCiAgICAgIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwogICAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogICAgICB2YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7CgogICAgICBmdW5jdGlvbiB0b09iamVjdCh2YWwpIHsKICAgICAgICBpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIE9iamVjdCh2YWwpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghT2JqZWN0LmFzc2lnbikgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9IC8vIERldGVjdCBidWdneSBwcm9wZXJ0eSBlbnVtZXJhdGlvbiBvcmRlciBpbiBvbGRlciBWOCB2ZXJzaW9ucy4KICAgICAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTQxMTgKCgogICAgICAgICAgdmFyIHRlc3QxID0gbmV3IFN0cmluZygnYWJjJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LXdyYXBwZXJzCgogICAgICAgICAgdGVzdDFbNV0gPSAnZGUnOwoKICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MSlbMF0gPT09ICc1JykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9IC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTYKCgogICAgICAgICAgdmFyIHRlc3QyID0ge307CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICAgICAgICAgIHRlc3QyWydfJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikgewogICAgICAgICAgICByZXR1cm4gdGVzdDJbbl07CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAob3JkZXIyLmpvaW4oJycpICE9PSAnMDEyMzQ1Njc4OScpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2CgoKICAgICAgICAgIHZhciB0ZXN0MyA9IHt9OwogICAgICAgICAgJ2FiY2RlZmdoaWprbG1ub3BxcnN0Jy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbiAobGV0dGVyKSB7CiAgICAgICAgICAgIHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgdGVzdDMpKS5qb2luKCcnKSAhPT0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAvLyBXZSBkb24ndCBleHBlY3QgYW55IG9mIHRoZSBhYm92ZSB0byB0aHJvdywgYnV0IGJldHRlciB0byBiZSBzYWZlLgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHsKICAgICAgICB2YXIgZnJvbTsKICAgICAgICB2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpOwogICAgICAgIHZhciBzeW1ib2xzOwoKICAgICAgICBmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykgewogICAgICAgICAgZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBmcm9tKSB7CiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHsKICAgICAgICAgICAgICB0b1trZXldID0gZnJvbVtrZXldOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICBzeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pOwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKHByb3BJc0VudW1lcmFibGUuY2FsbChmcm9tLCBzeW1ib2xzW2ldKSkgewogICAgICAgICAgICAgICAgdG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRvOwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDkxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KCiAgICAgIChmdW5jdGlvbiAocHJvY2VzcykgewogICAgICAgIC8qKgogICAgICAgICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuCiAgICAgICAgKgogICAgICAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICAgICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICAgICAgKi8KICAgICAgICB2YXIgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKCkge307CgogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsKCiAgICAgICAgICB2YXIgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307CiAgICAgICAgICB2YXIgaGFzID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpOwoKICAgICAgICAgIHByaW50V2FybmluZyA9IGZ1bmN0aW9uIHByaW50V2FybmluZyh0ZXh0KSB7CiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJ1dhcm5pbmc6ICcgKyB0ZXh0OwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLQogICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFjawogICAgICAgICAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgfSBjYXRjaCAoeCkge30KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFzc2VydCB0aGF0IHRoZSB2YWx1ZXMgbWF0Y2ggd2l0aCB0aGUgdHlwZSBzcGVjcy4KICAgICAgICAgKiBFcnJvciBtZXNzYWdlcyBhcmUgbWVtb3JpemVkIGFuZCB3aWxsIG9ubHkgYmUgc2hvd24gb25jZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0eXBlU3BlY3MgTWFwIG9mIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlCiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcyBSdW50aW1lIHZhbHVlcyB0aGF0IG5lZWQgdG8gYmUgdHlwZS1jaGVja2VkCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gInByb3AiLCAiY29udGV4dCIsICJjaGlsZCBjb250ZXh0IgogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBmb3IgZXJyb3IgbWVzc2FnZXMuCiAgICAgICAgICogQHBhcmFtIHs/RnVuY3Rpb259IGdldFN0YWNrIFJldHVybnMgdGhlIGNvbXBvbmVudCBzdGFjay4KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwoKCiAgICAgICAgZnVuY3Rpb24gY2hlY2tQcm9wVHlwZXModHlwZVNwZWNzLCB2YWx1ZXMsIGxvY2F0aW9uLCBjb21wb25lbnROYW1lLCBnZXRTdGFjaykgewogICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgZm9yICh2YXIgdHlwZVNwZWNOYW1lIGluIHR5cGVTcGVjcykgewogICAgICAgICAgICAgIGlmIChoYXModHlwZVNwZWNzLCB0eXBlU3BlY05hbWUpKSB7CiAgICAgICAgICAgICAgICB2YXIgZXJyb3I7IC8vIFByb3AgdHlwZSB2YWxpZGF0aW9uIG1heSB0aHJvdy4gSW4gY2FzZSB0aGV5IGRvLCB3ZSBkb24ndCB3YW50IHRvCiAgICAgICAgICAgICAgICAvLyBmYWlsIHRoZSByZW5kZXIgcGhhc2Ugd2hlcmUgaXQgZGlkbid0IGZhaWwgYmVmb3JlLiBTbyB3ZSBsb2cgaXQuCiAgICAgICAgICAgICAgICAvLyBBZnRlciB0aGVzZSBoYXZlIGJlZW4gY2xlYW5lZCB1cCwgd2UnbGwgbGV0IHRoZW0gdGhyb3cuCgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFuIGludmFyaWFudCB0aGF0IGdldHMgY2F1Z2h0LiBJdCdzIHRoZSBzYW1lCiAgICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS4KICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBFcnJvcigoY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnKSArICc6ICcgKyBsb2NhdGlvbiArICcgdHlwZSBgJyArIHR5cGVTcGVjTmFtZSArICdgIGlzIGludmFsaWQ7ICcgKyAnaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5IGZyb20gdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLCBidXQgcmVjZWl2ZWQgYCcgKyBfdHlwZW9mNCh0eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSkgKyAnYC4nKTsKICAgICAgICAgICAgICAgICAgICBlcnIubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJzsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGVycm9yID0gdHlwZVNwZWNzW3R5cGVTcGVjTmFtZV0odmFsdWVzLCB0eXBlU3BlY05hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBudWxsLCBSZWFjdFByb3BUeXBlc1NlY3JldCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgewogICAgICAgICAgICAgICAgICBlcnJvciA9IGV4OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiAhKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7CiAgICAgICAgICAgICAgICAgIHByaW50V2FybmluZygoY29tcG9uZW50TmFtZSB8fCAnUmVhY3QgY2xhc3MnKSArICc6IHR5cGUgc3BlY2lmaWNhdGlvbiBvZiAnICsgbG9jYXRpb24gKyAnIGAnICsgdHlwZVNwZWNOYW1lICsgJ2AgaXMgaW52YWxpZDsgdGhlIHR5cGUgY2hlY2tlciAnICsgJ2Z1bmN0aW9uIG11c3QgcmV0dXJuIGBudWxsYCBvciBhbiBgRXJyb3JgIGJ1dCByZXR1cm5lZCBhICcgKyBfdHlwZW9mNChlcnJvcikgKyAnLiAnICsgJ1lvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgdHlwZSBjaGVja2VyICcgKyAnY3JlYXRvciAoYXJyYXlPZiwgaW5zdGFuY2VPZiwgb2JqZWN0T2YsIG9uZU9mLCBvbmVPZlR5cGUsIGFuZCAnICsgJ3NoYXBlIGFsbCByZXF1aXJlIGFuIGFyZ3VtZW50KS4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkgewogICAgICAgICAgICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGUKICAgICAgICAgICAgICAgICAgLy8gc2FtZSBlcnJvci4KICAgICAgICAgICAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdmFyIHN0YWNrID0gZ2V0U3RhY2sgPyBnZXRTdGFjaygpIDogJyc7CiAgICAgICAgICAgICAgICAgIHByaW50V2FybmluZygnRmFpbGVkICcgKyBsb2NhdGlvbiArICcgdHlwZTogJyArIGVycm9yLm1lc3NhZ2UgKyAoc3RhY2sgIT0gbnVsbCA/IHN0YWNrIDogJycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVzZXRzIHdhcm5pbmcgY2FjaGUgd2hlbiB0ZXN0aW5nLgogICAgICAgICAqCiAgICAgICAgICogQHByaXZhdGUKICAgICAgICAgKi8KCgogICAgICAgIGNoZWNrUHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzID0ge307CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBjaGVja1Byb3BUeXBlczsKICAgICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KICAgICAgfSkuY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLgogICAgICAgKgogICAgICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICAgKi8KCiAgICAgIHZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwoKICAgICAgZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9CgogICAgICBmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0KCkge30KCiAgICAgIGVtcHR5RnVuY3Rpb25XaXRoUmVzZXQucmVzZXRXYXJuaW5nQ2FjaGUgPSBlbXB0eUZ1bmN0aW9uOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gc2hpbShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkgewogICAgICAgICAgaWYgKHNlY3JldCA9PT0gUmVhY3RQcm9wVHlwZXNTZWNyZXQpIHsKICAgICAgICAgICAgLy8gSXQgaXMgc3RpbGwgc2FmZSB3aGVuIGNhbGxlZCBmcm9tIFJlYWN0LgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJyArICdVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnICsgJ1JlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMnKTsKICAgICAgICAgIGVyci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nOwogICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgIH0KCiAgICAgICAgOwogICAgICAgIHNoaW0uaXNSZXF1aXJlZCA9IHNoaW07CgogICAgICAgIGZ1bmN0aW9uIGdldFNoaW0oKSB7CiAgICAgICAgICByZXR1cm4gc2hpbTsKICAgICAgICB9CgogICAgICAgIDsgLy8gSW1wb3J0YW50IQogICAgICAgIC8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLgoKICAgICAgICB2YXIgUmVhY3RQcm9wVHlwZXMgPSB7CiAgICAgICAgICBhcnJheTogc2hpbSwKICAgICAgICAgIGJvb2w6IHNoaW0sCiAgICAgICAgICBmdW5jOiBzaGltLAogICAgICAgICAgbnVtYmVyOiBzaGltLAogICAgICAgICAgb2JqZWN0OiBzaGltLAogICAgICAgICAgc3RyaW5nOiBzaGltLAogICAgICAgICAgc3ltYm9sOiBzaGltLAogICAgICAgICAgYW55OiBzaGltLAogICAgICAgICAgYXJyYXlPZjogZ2V0U2hpbSwKICAgICAgICAgIGVsZW1lbnQ6IHNoaW0sCiAgICAgICAgICBlbGVtZW50VHlwZTogc2hpbSwKICAgICAgICAgIGluc3RhbmNlT2Y6IGdldFNoaW0sCiAgICAgICAgICBub2RlOiBzaGltLAogICAgICAgICAgb2JqZWN0T2Y6IGdldFNoaW0sCiAgICAgICAgICBvbmVPZjogZ2V0U2hpbSwKICAgICAgICAgIG9uZU9mVHlwZTogZ2V0U2hpbSwKICAgICAgICAgIHNoYXBlOiBnZXRTaGltLAogICAgICAgICAgZXhhY3Q6IGdldFNoaW0sCiAgICAgICAgICBjaGVja1Byb3BUeXBlczogZW1wdHlGdW5jdGlvbldpdGhSZXNldCwKICAgICAgICAgIHJlc2V0V2FybmluZ0NhY2hlOiBlbXB0eUZ1bmN0aW9uCiAgICAgICAgfTsKICAgICAgICBSZWFjdFByb3BUeXBlcy5Qcm9wVHlwZXMgPSBSZWFjdFByb3BUeXBlczsKICAgICAgICByZXR1cm4gUmVhY3RQcm9wVHlwZXM7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDkzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgIWZ1bmN0aW9uICgpIHsKICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgIGZ1bmN0aW9uIFZOb2RlKCkge30KCiAgICAgICAgZnVuY3Rpb24gaChub2RlTmFtZSwgYXR0cmlidXRlcykgewogICAgICAgICAgdmFyIGxhc3RTaW1wbGUsCiAgICAgICAgICAgICAgY2hpbGQsCiAgICAgICAgICAgICAgc2ltcGxlLAogICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgY2hpbGRyZW4gPSBFTVBUWV9DSElMRFJFTjsKCiAgICAgICAgICBmb3IgKGkgPSBhcmd1bWVudHMubGVuZ3RoOyBpLS0gPiAyOykgewogICAgICAgICAgICBzdGFjay5wdXNoKGFyZ3VtZW50c1tpXSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgbnVsbCAhPSBhdHRyaWJ1dGVzLmNoaWxkcmVuKSB7CiAgICAgICAgICAgIGlmICghc3RhY2subGVuZ3RoKSBzdGFjay5wdXNoKGF0dHJpYnV0ZXMuY2hpbGRyZW4pOwogICAgICAgICAgICBkZWxldGUgYXR0cmlidXRlcy5jaGlsZHJlbjsKICAgICAgICAgIH0KCiAgICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7CiAgICAgICAgICAgIGlmICgoY2hpbGQgPSBzdGFjay5wb3AoKSkgJiYgdm9pZCAwICE9PSBjaGlsZC5wb3ApIGZvciAoaSA9IGNoaWxkLmxlbmd0aDsgaS0tOykgewogICAgICAgICAgICAgIHN0YWNrLnB1c2goY2hpbGRbaV0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChjaGlsZCA9PT0gITAgfHwgY2hpbGQgPT09ICExKSBjaGlsZCA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHNpbXBsZSA9ICdmdW5jdGlvbicgIT0gdHlwZW9mIG5vZGVOYW1lKSBpZiAobnVsbCA9PSBjaGlsZCkgY2hpbGQgPSAnJztlbHNlIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgY2hpbGQpIGNoaWxkID0gU3RyaW5nKGNoaWxkKTtlbHNlIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgY2hpbGQpIHNpbXBsZSA9ICExOwogICAgICAgICAgICAgIGlmIChzaW1wbGUgJiYgbGFzdFNpbXBsZSkgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gKz0gY2hpbGQ7ZWxzZSBpZiAoY2hpbGRyZW4gPT09IEVNUFRZX0NISUxEUkVOKSBjaGlsZHJlbiA9IFtjaGlsZF07ZWxzZSBjaGlsZHJlbi5wdXNoKGNoaWxkKTsKICAgICAgICAgICAgICBsYXN0U2ltcGxlID0gc2ltcGxlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHAgPSBuZXcgVk5vZGUoKTsKICAgICAgICAgIHAubm9kZU5hbWUgPSBub2RlTmFtZTsKICAgICAgICAgIHAuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICAgIHAuYXR0cmlidXRlcyA9IG51bGwgPT0gYXR0cmlidXRlcyA/IHZvaWQgMCA6IGF0dHJpYnV0ZXM7CiAgICAgICAgICBwLmtleSA9IG51bGwgPT0gYXR0cmlidXRlcyA/IHZvaWQgMCA6IGF0dHJpYnV0ZXMua2V5OwogICAgICAgICAgaWYgKHZvaWQgMCAhPT0gb3B0aW9ucy52bm9kZSkgb3B0aW9ucy52bm9kZShwKTsKICAgICAgICAgIHJldHVybiBwOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHsKICAgICAgICAgIGZvciAodmFyIGkgaW4gcHJvcHMpIHsKICAgICAgICAgICAgb2JqW2ldID0gcHJvcHNbaV07CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMpIHsKICAgICAgICAgIHJldHVybiBoKHZub2RlLm5vZGVOYW1lLCBleHRlbmQoZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKSwgcHJvcHMpLCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSA6IHZub2RlLmNoaWxkcmVuKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7CiAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX2QgJiYgKGNvbXBvbmVudC5fX2QgPSAhMCkgJiYgMSA9PSBpdGVtcy5wdXNoKGNvbXBvbmVudCkpIChvcHRpb25zLmRlYm91bmNlUmVuZGVyaW5nIHx8IHNldFRpbWVvdXQpKHJlcmVuZGVyKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlcmVuZGVyKCkgewogICAgICAgICAgdmFyIHAsCiAgICAgICAgICAgICAgbGlzdCA9IGl0ZW1zOwogICAgICAgICAgaXRlbXMgPSBbXTsKCiAgICAgICAgICB3aGlsZSAocCA9IGxpc3QucG9wKCkpIHsKICAgICAgICAgICAgaWYgKHAuX19kKSByZW5kZXJDb21wb25lbnQocCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSwgaHlkcmF0aW5nKSB7CiAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZub2RlIHx8ICdudW1iZXInID09IHR5cGVvZiB2bm9kZSkgcmV0dXJuIHZvaWQgMCAhPT0gbm9kZS5zcGxpdFRleHQ7CiAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZub2RlLm5vZGVOYW1lKSByZXR1cm4gIW5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yICYmIGlzTmFtZWROb2RlKG5vZGUsIHZub2RlLm5vZGVOYW1lKTtlbHNlIHJldHVybiBoeWRyYXRpbmcgfHwgbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNOYW1lZE5vZGUobm9kZSwgbm9kZU5hbWUpIHsKICAgICAgICAgIHJldHVybiBub2RlLl9fbiA9PT0gbm9kZU5hbWUgfHwgbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZVByb3BzKHZub2RlKSB7CiAgICAgICAgICB2YXIgcHJvcHMgPSBleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpOwogICAgICAgICAgcHJvcHMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgICAgIHZhciBkZWZhdWx0UHJvcHMgPSB2bm9kZS5ub2RlTmFtZS5kZWZhdWx0UHJvcHM7CiAgICAgICAgICBpZiAodm9pZCAwICE9PSBkZWZhdWx0UHJvcHMpIGZvciAodmFyIGkgaW4gZGVmYXVsdFByb3BzKSB7CiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHByb3BzW2ldKSBwcm9wc1tpXSA9IGRlZmF1bHRQcm9wc1tpXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBwcm9wczsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUobm9kZU5hbWUsIGlzU3ZnKSB7CiAgICAgICAgICB2YXIgbm9kZSA9IGlzU3ZnID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIG5vZGVOYW1lKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpOwogICAgICAgICAgbm9kZS5fX24gPSBub2RlTmFtZTsKICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlKSB7CiAgICAgICAgICBpZiAobm9kZS5wYXJlbnROb2RlKSBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXRBY2Nlc3Nvcihub2RlLCBuYW1lLCBvbGQsIHZhbHVlLCBpc1N2ZykgewogICAgICAgICAgaWYgKCdjbGFzc05hbWUnID09PSBuYW1lKSBuYW1lID0gJ2NsYXNzJzsKICAgICAgICAgIGlmICgna2V5JyA9PT0gbmFtZSkgO2Vsc2UgaWYgKCdyZWYnID09PSBuYW1lKSB7CiAgICAgICAgICAgIGlmIChvbGQpIG9sZChudWxsKTsKICAgICAgICAgICAgaWYgKHZhbHVlKSB2YWx1ZShub2RlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoJ2NsYXNzJyA9PT0gbmFtZSAmJiAhaXNTdmcpIG5vZGUuY2xhc3NOYW1lID0gdmFsdWUgfHwgJyc7ZWxzZSBpZiAoJ3N0eWxlJyA9PT0gbmFtZSkgewogICAgICAgICAgICBpZiAoIXZhbHVlIHx8ICdzdHJpbmcnID09IHR5cGVvZiB2YWx1ZSB8fCAnc3RyaW5nJyA9PSB0eXBlb2Ygb2xkKSBub2RlLnN0eWxlLmNzc1RleHQgPSB2YWx1ZSB8fCAnJzsKCiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAnb2JqZWN0JyA9PSBfdHlwZW9mNCh2YWx1ZSkpIHsKICAgICAgICAgICAgICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIG9sZCkgZm9yICh2YXIgaSBpbiBvbGQpIHsKICAgICAgICAgICAgICAgIGlmICghKGkgaW4gdmFsdWUpKSBub2RlLnN0eWxlW2ldID0gJyc7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHZhbHVlKSB7CiAgICAgICAgICAgICAgICBub2RlLnN0eWxlW2ldID0gJ251bWJlcicgPT0gdHlwZW9mIHZhbHVlW2ldICYmIElTX05PTl9ESU1FTlNJT05BTC50ZXN0KGkpID09PSAhMSA/IHZhbHVlW2ldICsgJ3B4JyA6IHZhbHVlW2ldOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICgnZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwnID09PSBuYW1lKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSkgbm9kZS5pbm5lckhUTUwgPSB2YWx1ZS5fX2h0bWwgfHwgJyc7CiAgICAgICAgICB9IGVsc2UgaWYgKCdvJyA9PSBuYW1lWzBdICYmICduJyA9PSBuYW1lWzFdKSB7CiAgICAgICAgICAgIHZhciB1c2VDYXB0dXJlID0gbmFtZSAhPT0gKG5hbWUgPSBuYW1lLnJlcGxhY2UoL0NhcHR1cmUkLywgJycpKTsKICAgICAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMik7CgogICAgICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgICBpZiAoIW9sZCkgbm9kZS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpOwogICAgICAgICAgICB9IGVsc2Ugbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpOwoKICAgICAgICAgICAgKG5vZGUuX19sIHx8IChub2RlLl9fbCA9IHt9KSlbbmFtZV0gPSB2YWx1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoJ2xpc3QnICE9PSBuYW1lICYmICd0eXBlJyAhPT0gbmFtZSAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7CiAgICAgICAgICAgIHNldFByb3BlcnR5KG5vZGUsIG5hbWUsIG51bGwgPT0gdmFsdWUgPyAnJyA6IHZhbHVlKTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gdmFsdWUgfHwgdmFsdWUgPT09ICExKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBucyA9IGlzU3ZnICYmIG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9eeGxpbmtcOj8vLCAnJykpOwogICAgICAgICAgICBpZiAobnVsbCA9PSB2YWx1ZSB8fCB2YWx1ZSA9PT0gITEpIHsKICAgICAgICAgICAgICBpZiAobnMpIG5vZGUucmVtb3ZlQXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBuYW1lLnRvTG93ZXJDYXNlKCkpO2Vsc2Ugbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoJ2Z1bmN0aW9uJyAhPSB0eXBlb2YgdmFsdWUpIGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIG5hbWUudG9Mb3dlckNhc2UoKSwgdmFsdWUpO2Vsc2Ugbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0UHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIG5vZGVbbmFtZV0gPSB2YWx1ZTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBldmVudFByb3h5KGUpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9fbFtlLnR5cGVdKG9wdGlvbnMuZXZlbnQgJiYgb3B0aW9ucy5ldmVudChlKSB8fCBlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZsdXNoTW91bnRzKCkgewogICAgICAgICAgdmFyIGM7CgogICAgICAgICAgd2hpbGUgKGMgPSBtb3VudHMucG9wKCkpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJNb3VudCkgb3B0aW9ucy5hZnRlck1vdW50KGMpOwogICAgICAgICAgICBpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgcGFyZW50LCBjb21wb25lbnRSb290KSB7CiAgICAgICAgICBpZiAoIWRpZmZMZXZlbCsrKSB7CiAgICAgICAgICAgIGlzU3ZnTW9kZSA9IG51bGwgIT0gcGFyZW50ICYmIHZvaWQgMCAhPT0gcGFyZW50Lm93bmVyU1ZHRWxlbWVudDsKICAgICAgICAgICAgaHlkcmF0aW5nID0gbnVsbCAhPSBkb20gJiYgISgnX19wcmVhY3RhdHRyXycgaW4gZG9tKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmV0ID0gaWRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIGNvbXBvbmVudFJvb3QpOwogICAgICAgICAgaWYgKHBhcmVudCAmJiByZXQucGFyZW50Tm9kZSAhPT0gcGFyZW50KSBwYXJlbnQuYXBwZW5kQ2hpbGQocmV0KTsKCiAgICAgICAgICBpZiAoISAtLWRpZmZMZXZlbCkgewogICAgICAgICAgICBoeWRyYXRpbmcgPSAhMTsKICAgICAgICAgICAgaWYgKCFjb21wb25lbnRSb290KSBmbHVzaE1vdW50cygpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgY29tcG9uZW50Um9vdCkgewogICAgICAgICAgdmFyIG91dCA9IGRvbSwKICAgICAgICAgICAgICBwcmV2U3ZnTW9kZSA9IGlzU3ZnTW9kZTsKICAgICAgICAgIGlmIChudWxsID09IHZub2RlKSB2bm9kZSA9ICcnOwoKICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygdm5vZGUpIHsKICAgICAgICAgICAgaWYgKGRvbSAmJiB2b2lkIDAgIT09IGRvbS5zcGxpdFRleHQgJiYgZG9tLnBhcmVudE5vZGUgJiYgKCFkb20uX2NvbXBvbmVudCB8fCBjb21wb25lbnRSb290KSkgewogICAgICAgICAgICAgIGlmIChkb20ubm9kZVZhbHVlICE9IHZub2RlKSBkb20ubm9kZVZhbHVlID0gdm5vZGU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgb3V0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodm5vZGUpOwoKICAgICAgICAgICAgICBpZiAoZG9tKSB7CiAgICAgICAgICAgICAgICBpZiAoZG9tLnBhcmVudE5vZGUpIGRvbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChvdXQsIGRvbSk7CiAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShkb20sICEwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG91dC5fX3ByZWFjdGF0dHJfID0gITA7CiAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHZub2RlLm5vZGVOYW1lKSByZXR1cm4gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpOwogICAgICAgICAgaXNTdmdNb2RlID0gJ3N2ZycgPT09IHZub2RlLm5vZGVOYW1lID8gITAgOiAnZm9yZWlnbk9iamVjdCcgPT09IHZub2RlLm5vZGVOYW1lID8gITEgOiBpc1N2Z01vZGU7CgogICAgICAgICAgaWYgKCFkb20gfHwgIWlzTmFtZWROb2RlKGRvbSwgU3RyaW5nKHZub2RlLm5vZGVOYW1lKSkpIHsKICAgICAgICAgICAgb3V0ID0gY3JlYXRlTm9kZShTdHJpbmcodm5vZGUubm9kZU5hbWUpLCBpc1N2Z01vZGUpOwoKICAgICAgICAgICAgaWYgKGRvbSkgewogICAgICAgICAgICAgIHdoaWxlIChkb20uZmlyc3RDaGlsZCkgewogICAgICAgICAgICAgICAgb3V0LmFwcGVuZENoaWxkKGRvbS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTsKICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShkb20sICEwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBmYyA9IG91dC5maXJzdENoaWxkLAogICAgICAgICAgICAgIHByb3BzID0gb3V0Ll9fcHJlYWN0YXR0cl8gfHwgKG91dC5fX3ByZWFjdGF0dHJfID0ge30pLAogICAgICAgICAgICAgIHZjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuOwoKICAgICAgICAgIGlmICghaHlkcmF0aW5nICYmIHZjaGlsZHJlbiAmJiAxID09PSB2Y2hpbGRyZW4ubGVuZ3RoICYmICdzdHJpbmcnID09IHR5cGVvZiB2Y2hpbGRyZW5bMF0gJiYgbnVsbCAhPSBmYyAmJiB2b2lkIDAgIT09IGZjLnNwbGl0VGV4dCAmJiBudWxsID09IGZjLm5leHRTaWJsaW5nKSB7CiAgICAgICAgICAgIGlmIChmYy5ub2RlVmFsdWUgIT0gdmNoaWxkcmVuWzBdKSBmYy5ub2RlVmFsdWUgPSB2Y2hpbGRyZW5bMF07CiAgICAgICAgICB9IGVsc2UgaWYgKHZjaGlsZHJlbiAmJiB2Y2hpbGRyZW4ubGVuZ3RoIHx8IG51bGwgIT0gZmMpIGlubmVyRGlmZk5vZGUob3V0LCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBoeWRyYXRpbmcgfHwgbnVsbCAhPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCk7CgogICAgICAgICAgZGlmZkF0dHJpYnV0ZXMob3V0LCB2bm9kZS5hdHRyaWJ1dGVzLCBwcm9wcyk7CiAgICAgICAgICBpc1N2Z01vZGUgPSBwcmV2U3ZnTW9kZTsKICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpbm5lckRpZmZOb2RlKGRvbSwgdmNoaWxkcmVuLCBjb250ZXh0LCBtb3VudEFsbCwgaXNIeWRyYXRpbmcpIHsKICAgICAgICAgIHZhciBqLAogICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgdmNoaWxkLAogICAgICAgICAgICAgIGNoaWxkLAogICAgICAgICAgICAgIG9yaWdpbmFsQ2hpbGRyZW4gPSBkb20uY2hpbGROb2RlcywKICAgICAgICAgICAgICBjaGlsZHJlbiA9IFtdLAogICAgICAgICAgICAgIGtleWVkID0ge30sCiAgICAgICAgICAgICAga2V5ZWRMZW4gPSAwLAogICAgICAgICAgICAgIG1pbiA9IDAsCiAgICAgICAgICAgICAgbGVuID0gb3JpZ2luYWxDaGlsZHJlbi5sZW5ndGgsCiAgICAgICAgICAgICAgY2hpbGRyZW5MZW4gPSAwLAogICAgICAgICAgICAgIHZsZW4gPSB2Y2hpbGRyZW4gPyB2Y2hpbGRyZW4ubGVuZ3RoIDogMDsKICAgICAgICAgIGlmICgwICE9PSBsZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgdmFyIF9jaGlsZCA9IG9yaWdpbmFsQ2hpbGRyZW5baV0sCiAgICAgICAgICAgICAgICBwcm9wcyA9IF9jaGlsZC5fX3ByZWFjdGF0dHJfLAogICAgICAgICAgICAgICAga2V5ID0gdmxlbiAmJiBwcm9wcyA/IF9jaGlsZC5fY29tcG9uZW50ID8gX2NoaWxkLl9jb21wb25lbnQuX19rIDogcHJvcHMua2V5IDogbnVsbDsKCiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkgewogICAgICAgICAgICAgIGtleWVkTGVuKys7CiAgICAgICAgICAgICAga2V5ZWRba2V5XSA9IF9jaGlsZDsKICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wcyB8fCAodm9pZCAwICE9PSBfY2hpbGQuc3BsaXRUZXh0ID8gaXNIeWRyYXRpbmcgPyBfY2hpbGQubm9kZVZhbHVlLnRyaW0oKSA6ICEwIDogaXNIeWRyYXRpbmcpKSBjaGlsZHJlbltjaGlsZHJlbkxlbisrXSA9IF9jaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgwICE9PSB2bGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IHZsZW47IGkrKykgewogICAgICAgICAgICB2Y2hpbGQgPSB2Y2hpbGRyZW5baV07CiAgICAgICAgICAgIGNoaWxkID0gbnVsbDsKICAgICAgICAgICAgdmFyIGtleSA9IHZjaGlsZC5rZXk7CgogICAgICAgICAgICBpZiAobnVsbCAhPSBrZXkpIHsKICAgICAgICAgICAgICBpZiAoa2V5ZWRMZW4gJiYgdm9pZCAwICE9PSBrZXllZFtrZXldKSB7CiAgICAgICAgICAgICAgICBjaGlsZCA9IGtleWVkW2tleV07CiAgICAgICAgICAgICAgICBrZXllZFtrZXldID0gdm9pZCAwOwogICAgICAgICAgICAgICAga2V5ZWRMZW4tLTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNoaWxkICYmIG1pbiA8IGNoaWxkcmVuTGVuKSBmb3IgKGogPSBtaW47IGogPCBjaGlsZHJlbkxlbjsgaisrKSB7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gY2hpbGRyZW5bal0gJiYgaXNTYW1lTm9kZVR5cGUoYyA9IGNoaWxkcmVuW2pdLCB2Y2hpbGQsIGlzSHlkcmF0aW5nKSkgewogICAgICAgICAgICAgICAgY2hpbGQgPSBjOwogICAgICAgICAgICAgICAgY2hpbGRyZW5bal0gPSB2b2lkIDA7CiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gY2hpbGRyZW5MZW4gLSAxKSBjaGlsZHJlbkxlbi0tOwogICAgICAgICAgICAgICAgaWYgKGogPT09IG1pbikgbWluKys7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNoaWxkID0gaWRpZmYoY2hpbGQsIHZjaGlsZCwgY29udGV4dCwgbW91bnRBbGwpOwogICAgICAgICAgICBpZiAoY2hpbGQgJiYgY2hpbGQgIT09IGRvbSkgaWYgKGkgPj0gbGVuKSBkb20uYXBwZW5kQ2hpbGQoY2hpbGQpO2Vsc2UgaWYgKGNoaWxkICE9PSBvcmlnaW5hbENoaWxkcmVuW2ldKSBpZiAoY2hpbGQgPT09IG9yaWdpbmFsQ2hpbGRyZW5baSArIDFdKSByZW1vdmVOb2RlKG9yaWdpbmFsQ2hpbGRyZW5baV0pO2Vsc2UgZG9tLmluc2VydEJlZm9yZShjaGlsZCwgb3JpZ2luYWxDaGlsZHJlbltpXSB8fCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChrZXllZExlbikgZm9yICh2YXIgaSBpbiBrZXllZCkgewogICAgICAgICAgICBpZiAodm9pZCAwICE9PSBrZXllZFtpXSkgcmVjb2xsZWN0Tm9kZVRyZWUoa2V5ZWRbaV0sICExKTsKICAgICAgICAgIH0KCiAgICAgICAgICB3aGlsZSAobWluIDw9IGNoaWxkcmVuTGVuKSB7CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IChjaGlsZCA9IGNoaWxkcmVuW2NoaWxkcmVuTGVuLS1dKSkgcmVjb2xsZWN0Tm9kZVRyZWUoY2hpbGQsICExKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsIHVubW91bnRPbmx5KSB7CiAgICAgICAgICB2YXIgY29tcG9uZW50ID0gbm9kZS5fY29tcG9uZW50OwogICAgICAgICAgaWYgKGNvbXBvbmVudCkgdW5tb3VudENvbXBvbmVudChjb21wb25lbnQpO2Vsc2UgewogICAgICAgICAgICBpZiAobnVsbCAhPSBub2RlLl9fcHJlYWN0YXR0cl8gJiYgbm9kZS5fX3ByZWFjdGF0dHJfLnJlZikgbm9kZS5fX3ByZWFjdGF0dHJfLnJlZihudWxsKTsKICAgICAgICAgICAgaWYgKHVubW91bnRPbmx5ID09PSAhMSB8fCBudWxsID09IG5vZGUuX19wcmVhY3RhdHRyXykgcmVtb3ZlTm9kZShub2RlKTsKICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4obm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7CiAgICAgICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7CgogICAgICAgICAgd2hpbGUgKG5vZGUpIHsKICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLnByZXZpb3VzU2libGluZzsKICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgITApOwogICAgICAgICAgICBub2RlID0gbmV4dDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRpZmZBdHRyaWJ1dGVzKGRvbSwgYXR0cnMsIG9sZCkgewogICAgICAgICAgdmFyIG5hbWU7CgogICAgICAgICAgZm9yIChuYW1lIGluIG9sZCkgewogICAgICAgICAgICBpZiAoKCFhdHRycyB8fCBudWxsID09IGF0dHJzW25hbWVdKSAmJiBudWxsICE9IG9sZFtuYW1lXSkgc2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IHZvaWQgMCwgaXNTdmdNb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKG5hbWUgaW4gYXR0cnMpIHsKICAgICAgICAgICAgaWYgKCEoJ2NoaWxkcmVuJyA9PT0gbmFtZSB8fCAnaW5uZXJIVE1MJyA9PT0gbmFtZSB8fCBuYW1lIGluIG9sZCAmJiBhdHRyc1tuYW1lXSA9PT0gKCd2YWx1ZScgPT09IG5hbWUgfHwgJ2NoZWNrZWQnID09PSBuYW1lID8gZG9tW25hbWVdIDogb2xkW25hbWVdKSkpIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSBhdHRyc1tuYW1lXSwgaXNTdmdNb2RlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxlY3RDb21wb25lbnQoY29tcG9uZW50KSB7CiAgICAgICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgICAgKGNvbXBvbmVudHNbbmFtZV0gfHwgKGNvbXBvbmVudHNbbmFtZV0gPSBbXSkpLnB1c2goY29tcG9uZW50KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudChDdG9yLCBwcm9wcywgY29udGV4dCkgewogICAgICAgICAgdmFyIGluc3QsCiAgICAgICAgICAgICAgbGlzdCA9IGNvbXBvbmVudHNbQ3Rvci5uYW1lXTsKCiAgICAgICAgICBpZiAoQ3Rvci5wcm90b3R5cGUgJiYgQ3Rvci5wcm90b3R5cGUucmVuZGVyKSB7CiAgICAgICAgICAgIGluc3QgPSBuZXcgQ3Rvcihwcm9wcywgY29udGV4dCk7CiAgICAgICAgICAgIENvbXBvbmVudC5jYWxsKGluc3QsIHByb3BzLCBjb250ZXh0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluc3QgPSBuZXcgQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KTsKICAgICAgICAgICAgaW5zdC5jb25zdHJ1Y3RvciA9IEN0b3I7CiAgICAgICAgICAgIGluc3QucmVuZGVyID0gZG9SZW5kZXI7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGxpc3QpIGZvciAodmFyIGkgPSBsaXN0Lmxlbmd0aDsgaS0tOykgewogICAgICAgICAgICBpZiAobGlzdFtpXS5jb25zdHJ1Y3RvciA9PT0gQ3RvcikgewogICAgICAgICAgICAgIGluc3QuX19iID0gbGlzdFtpXS5fX2I7CiAgICAgICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpbnN0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZG9SZW5kZXIocHJvcHMsIHN0YXRlLCBjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQsIHByb3BzLCBvcHRzLCBjb250ZXh0LCBtb3VudEFsbCkgewogICAgICAgICAgaWYgKCFjb21wb25lbnQuX194KSB7CiAgICAgICAgICAgIGNvbXBvbmVudC5fX3ggPSAhMDsKICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fX3IgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7CiAgICAgICAgICAgIGlmIChjb21wb25lbnQuX19rID0gcHJvcHMua2V5KSBkZWxldGUgcHJvcHMua2V5OwoKICAgICAgICAgICAgaWYgKCFjb21wb25lbnQuYmFzZSB8fCBtb3VudEFsbCkgewogICAgICAgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzLCBjb250ZXh0KTsKCiAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQgIT09IGNvbXBvbmVudC5jb250ZXh0KSB7CiAgICAgICAgICAgICAgaWYgKCFjb21wb25lbnQuX19jKSBjb21wb25lbnQuX19jID0gY29tcG9uZW50LmNvbnRleHQ7CiAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX3ApIGNvbXBvbmVudC5fX3AgPSBjb21wb25lbnQucHJvcHM7CiAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByb3BzOwogICAgICAgICAgICBjb21wb25lbnQuX194ID0gITE7CiAgICAgICAgICAgIGlmICgwICE9PSBvcHRzKSBpZiAoMSA9PT0gb3B0cyB8fCBvcHRpb25zLnN5bmNDb21wb25lbnRVcGRhdGVzICE9PSAhMSB8fCAhY29tcG9uZW50LmJhc2UpIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIDEsIG1vdW50QWxsKTtlbHNlIGVucXVldWVSZW5kZXIoY29tcG9uZW50KTsKICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fX3IpIGNvbXBvbmVudC5fX3IoY29tcG9uZW50KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIG9wdHMsIG1vdW50QWxsLCBpc0NoaWxkKSB7CiAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX3gpIHsKICAgICAgICAgICAgdmFyIHJlbmRlcmVkLAogICAgICAgICAgICAgICAgaW5zdCwKICAgICAgICAgICAgICAgIGNiYXNlLAogICAgICAgICAgICAgICAgcHJvcHMgPSBjb21wb25lbnQucHJvcHMsCiAgICAgICAgICAgICAgICBzdGF0ZSA9IGNvbXBvbmVudC5zdGF0ZSwKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dCwKICAgICAgICAgICAgICAgIHByZXZpb3VzUHJvcHMgPSBjb21wb25lbnQuX19wIHx8IHByb3BzLAogICAgICAgICAgICAgICAgcHJldmlvdXNTdGF0ZSA9IGNvbXBvbmVudC5fX3MgfHwgc3RhdGUsCiAgICAgICAgICAgICAgICBwcmV2aW91c0NvbnRleHQgPSBjb21wb25lbnQuX19jIHx8IGNvbnRleHQsCiAgICAgICAgICAgICAgICBpc1VwZGF0ZSA9IGNvbXBvbmVudC5iYXNlLAogICAgICAgICAgICAgICAgbmV4dEJhc2UgPSBjb21wb25lbnQuX19iLAogICAgICAgICAgICAgICAgaW5pdGlhbEJhc2UgPSBpc1VwZGF0ZSB8fCBuZXh0QmFzZSwKICAgICAgICAgICAgICAgIGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50LAogICAgICAgICAgICAgICAgc2tpcCA9ICExOwoKICAgICAgICAgICAgaWYgKGlzVXBkYXRlKSB7CiAgICAgICAgICAgICAgY29tcG9uZW50LnByb3BzID0gcHJldmlvdXNQcm9wczsKICAgICAgICAgICAgICBjb21wb25lbnQuc3RhdGUgPSBwcmV2aW91c1N0YXRlOwogICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gcHJldmlvdXNDb250ZXh0OwogICAgICAgICAgICAgIGlmICgyICE9PSBvcHRzICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpID09PSAhMSkgc2tpcCA9ICEwO2Vsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKSBjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByb3BzOwogICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHN0YXRlOwogICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29tcG9uZW50Ll9fcCA9IGNvbXBvbmVudC5fX3MgPSBjb21wb25lbnQuX19jID0gY29tcG9uZW50Ll9fYiA9IG51bGw7CiAgICAgICAgICAgIGNvbXBvbmVudC5fX2QgPSAhMTsKCiAgICAgICAgICAgIGlmICghc2tpcCkgewogICAgICAgICAgICAgIHJlbmRlcmVkID0gY29tcG9uZW50LnJlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpOwogICAgICAgICAgICAgIGlmIChjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KSBjb250ZXh0ID0gZXh0ZW5kKGV4dGVuZCh7fSwgY29udGV4dCksIGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQoKSk7CiAgICAgICAgICAgICAgdmFyIHRvVW5tb3VudCwKICAgICAgICAgICAgICAgICAgYmFzZSwKICAgICAgICAgICAgICAgICAgY2hpbGRDb21wb25lbnQgPSByZW5kZXJlZCAmJiByZW5kZXJlZC5ub2RlTmFtZTsKCiAgICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGNoaWxkQ29tcG9uZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7CiAgICAgICAgICAgICAgICBpbnN0ID0gaW5pdGlhbENoaWxkQ29tcG9uZW50OwogICAgICAgICAgICAgICAgaWYgKGluc3QgJiYgaW5zdC5jb25zdHJ1Y3RvciA9PT0gY2hpbGRDb21wb25lbnQgJiYgY2hpbGRQcm9wcy5rZXkgPT0gaW5zdC5fX2spIHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDEsIGNvbnRleHQsICExKTtlbHNlIHsKICAgICAgICAgICAgICAgICAgdG9Vbm1vdW50ID0gaW5zdDsKICAgICAgICAgICAgICAgICAgY29tcG9uZW50Ll9jb21wb25lbnQgPSBpbnN0ID0gY3JlYXRlQ29tcG9uZW50KGNoaWxkQ29tcG9uZW50LCBjaGlsZFByb3BzLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgICAgaW5zdC5fX2IgPSBpbnN0Ll9fYiB8fCBuZXh0QmFzZTsKICAgICAgICAgICAgICAgICAgaW5zdC5fX3UgPSBjb21wb25lbnQ7CiAgICAgICAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDAsIGNvbnRleHQsICExKTsKICAgICAgICAgICAgICAgICAgcmVuZGVyQ29tcG9uZW50KGluc3QsIDEsIG1vdW50QWxsLCAhMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBiYXNlID0gaW5zdC5iYXNlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYmFzZSA9IGluaXRpYWxCYXNlOwogICAgICAgICAgICAgICAgdG9Vbm1vdW50ID0gaW5pdGlhbENoaWxkQ29tcG9uZW50OwogICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgY2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKGluaXRpYWxCYXNlIHx8IDEgPT09IG9wdHMpIHsKICAgICAgICAgICAgICAgICAgaWYgKGNiYXNlKSBjYmFzZS5fY29tcG9uZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgYmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUsIGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLnBhcmVudE5vZGUsICEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChpbml0aWFsQmFzZSAmJiBiYXNlICE9PSBpbml0aWFsQmFzZSAmJiBpbnN0ICE9PSBpbml0aWFsQ2hpbGRDb21wb25lbnQpIHsKICAgICAgICAgICAgICAgIHZhciBiYXNlUGFyZW50ID0gaW5pdGlhbEJhc2UucGFyZW50Tm9kZTsKCiAgICAgICAgICAgICAgICBpZiAoYmFzZVBhcmVudCAmJiBiYXNlICE9PSBiYXNlUGFyZW50KSB7CiAgICAgICAgICAgICAgICAgIGJhc2VQYXJlbnQucmVwbGFjZUNoaWxkKGJhc2UsIGluaXRpYWxCYXNlKTsKCiAgICAgICAgICAgICAgICAgIGlmICghdG9Vbm1vdW50KSB7CiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEJhc2UuX2NvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUoaW5pdGlhbEJhc2UsICExKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgdW5tb3VudENvbXBvbmVudCh0b1VubW91bnQpOwogICAgICAgICAgICAgIGNvbXBvbmVudC5iYXNlID0gYmFzZTsKCiAgICAgICAgICAgICAgaWYgKGJhc2UgJiYgIWlzQ2hpbGQpIHsKICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnRSZWYgPSBjb21wb25lbnQsCiAgICAgICAgICAgICAgICAgICAgdCA9IGNvbXBvbmVudDsKCiAgICAgICAgICAgICAgICB3aGlsZSAodCA9IHQuX191KSB7CiAgICAgICAgICAgICAgICAgIChjb21wb25lbnRSZWYgPSB0KS5iYXNlID0gYmFzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBiYXNlLl9jb21wb25lbnQgPSBjb21wb25lbnRSZWY7CiAgICAgICAgICAgICAgICBiYXNlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9IGNvbXBvbmVudFJlZi5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghaXNVcGRhdGUgfHwgbW91bnRBbGwpIG1vdW50cy51bnNoaWZ0KGNvbXBvbmVudCk7ZWxzZSBpZiAoIXNraXApIHsKICAgICAgICAgICAgICBmbHVzaE1vdW50cygpOwogICAgICAgICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50RGlkVXBkYXRlKSBjb21wb25lbnQuY29tcG9uZW50RGlkVXBkYXRlKHByZXZpb3VzUHJvcHMsIHByZXZpb3VzU3RhdGUsIHByZXZpb3VzQ29udGV4dCk7CiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJVcGRhdGUpIG9wdGlvbnMuYWZ0ZXJVcGRhdGUoY29tcG9uZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobnVsbCAhPSBjb21wb25lbnQuX19oKSB3aGlsZSAoY29tcG9uZW50Ll9faC5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb21wb25lbnQuX19oLnBvcCgpLmNhbGwoY29tcG9uZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRpZmZMZXZlbCAmJiAhaXNDaGlsZCkgZmx1c2hNb3VudHMoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7CiAgICAgICAgICB2YXIgYyA9IGRvbSAmJiBkb20uX2NvbXBvbmVudCwKICAgICAgICAgICAgICBvcmlnaW5hbENvbXBvbmVudCA9IGMsCiAgICAgICAgICAgICAgb2xkRG9tID0gZG9tLAogICAgICAgICAgICAgIGlzRGlyZWN0T3duZXIgPSBjICYmIGRvbS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lLAogICAgICAgICAgICAgIGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLAogICAgICAgICAgICAgIHByb3BzID0gZ2V0Tm9kZVByb3BzKHZub2RlKTsKCiAgICAgICAgICB3aGlsZSAoYyAmJiAhaXNPd25lciAmJiAoYyA9IGMuX191KSkgewogICAgICAgICAgICBpc093bmVyID0gYy5jb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGMgJiYgaXNPd25lciAmJiAoIW1vdW50QWxsIHx8IGMuX2NvbXBvbmVudCkpIHsKICAgICAgICAgICAgc2V0Q29tcG9uZW50UHJvcHMoYywgcHJvcHMsIDMsIGNvbnRleHQsIG1vdW50QWxsKTsKICAgICAgICAgICAgZG9tID0gYy5iYXNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKG9yaWdpbmFsQ29tcG9uZW50ICYmICFpc0RpcmVjdE93bmVyKSB7CiAgICAgICAgICAgICAgdW5tb3VudENvbXBvbmVudChvcmlnaW5hbENvbXBvbmVudCk7CiAgICAgICAgICAgICAgZG9tID0gb2xkRG9tID0gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYyA9IGNyZWF0ZUNvbXBvbmVudCh2bm9kZS5ub2RlTmFtZSwgcHJvcHMsIGNvbnRleHQpOwoKICAgICAgICAgICAgaWYgKGRvbSAmJiAhYy5fX2IpIHsKICAgICAgICAgICAgICBjLl9fYiA9IGRvbTsKICAgICAgICAgICAgICBvbGREb20gPSBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMSwgY29udGV4dCwgbW91bnRBbGwpOwogICAgICAgICAgICBkb20gPSBjLmJhc2U7CgogICAgICAgICAgICBpZiAob2xkRG9tICYmIGRvbSAhPT0gb2xkRG9tKSB7CiAgICAgICAgICAgICAgb2xkRG9tLl9jb21wb25lbnQgPSBudWxsOwogICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG9sZERvbSwgITEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGRvbTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50KSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5iZWZvcmVVbm1vdW50KSBvcHRpb25zLmJlZm9yZVVubW91bnQoY29tcG9uZW50KTsKICAgICAgICAgIHZhciBiYXNlID0gY29tcG9uZW50LmJhc2U7CiAgICAgICAgICBjb21wb25lbnQuX194ID0gITA7CiAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxVbm1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQoKTsKICAgICAgICAgIGNvbXBvbmVudC5iYXNlID0gbnVsbDsKICAgICAgICAgIHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50OwogICAgICAgICAgaWYgKGlubmVyKSB1bm1vdW50Q29tcG9uZW50KGlubmVyKTtlbHNlIGlmIChiYXNlKSB7CiAgICAgICAgICAgIGlmIChiYXNlLl9fcHJlYWN0YXR0cl8gJiYgYmFzZS5fX3ByZWFjdGF0dHJfLnJlZikgYmFzZS5fX3ByZWFjdGF0dHJfLnJlZihudWxsKTsKICAgICAgICAgICAgY29tcG9uZW50Ll9fYiA9IGJhc2U7CiAgICAgICAgICAgIHJlbW92ZU5vZGUoYmFzZSk7CiAgICAgICAgICAgIGNvbGxlY3RDb21wb25lbnQoY29tcG9uZW50KTsKICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oYmFzZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fcikgY29tcG9uZW50Ll9fcihudWxsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIENvbXBvbmVudChwcm9wcywgY29udGV4dCkgewogICAgICAgICAgdGhpcy5fX2QgPSAhMDsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7CiAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGF0ZSB8fCB7fTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlcih2bm9kZSwgcGFyZW50LCBtZXJnZSkgewogICAgICAgICAgcmV0dXJuIGRpZmYobWVyZ2UsIHZub2RlLCB7fSwgITEsIHBhcmVudCwgITEpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTsKICAgICAgICB2YXIgc3RhY2sgPSBbXTsKICAgICAgICB2YXIgRU1QVFlfQ0hJTERSRU4gPSBbXTsKICAgICAgICB2YXIgSVNfTk9OX0RJTUVOU0lPTkFMID0gL2FjaXR8ZXgoPzpzfGd8bnxwfCQpfHJwaHxvd3N8bW5jfG50d3xpbmVbY2hdfHpvb3xeb3JkL2k7CiAgICAgICAgdmFyIGl0ZW1zID0gW107CiAgICAgICAgdmFyIG1vdW50cyA9IFtdOwogICAgICAgIHZhciBkaWZmTGV2ZWwgPSAwOwogICAgICAgIHZhciBpc1N2Z01vZGUgPSAhMTsKICAgICAgICB2YXIgaHlkcmF0aW5nID0gITE7CiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSB7fTsKICAgICAgICBleHRlbmQoQ29tcG9uZW50LnByb3RvdHlwZSwgewogICAgICAgICAgc2V0U3RhdGU6IGZ1bmN0aW9uIHNldFN0YXRlKHN0YXRlLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGU7CiAgICAgICAgICAgIGlmICghdGhpcy5fX3MpIHRoaXMuX19zID0gZXh0ZW5kKHt9LCBzKTsKICAgICAgICAgICAgZXh0ZW5kKHMsICdmdW5jdGlvbicgPT0gdHlwZW9mIHN0YXRlID8gc3RhdGUocywgdGhpcy5wcm9wcykgOiBzdGF0ZSk7CiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgKHRoaXMuX19oID0gdGhpcy5fX2ggfHwgW10pLnB1c2goY2FsbGJhY2spOwogICAgICAgICAgICBlbnF1ZXVlUmVuZGVyKHRoaXMpOwogICAgICAgICAgfSwKICAgICAgICAgIGZvcmNlVXBkYXRlOiBmdW5jdGlvbiBmb3JjZVVwZGF0ZShjYWxsYmFjaykgewogICAgICAgICAgICBpZiAoY2FsbGJhY2spICh0aGlzLl9faCA9IHRoaXMuX19oIHx8IFtdKS5wdXNoKGNhbGxiYWNrKTsKICAgICAgICAgICAgcmVuZGVyQ29tcG9uZW50KHRoaXMsIDIpOwogICAgICAgICAgfSwKICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge30KICAgICAgICB9KTsKICAgICAgICB2YXIgcHJlYWN0ID0gewogICAgICAgICAgaDogaCwKICAgICAgICAgIGNyZWF0ZUVsZW1lbnQ6IGgsCiAgICAgICAgICBjbG9uZUVsZW1lbnQ6IGNsb25lRWxlbWVudCwKICAgICAgICAgIENvbXBvbmVudDogQ29tcG9uZW50LAogICAgICAgICAgcmVuZGVyOiByZW5kZXIsCiAgICAgICAgICByZXJlbmRlcjogcmVyZW5kZXIsCiAgICAgICAgICBvcHRpb25zOiBvcHRpb25zCiAgICAgICAgfTsKICAgICAgICBpZiAodHJ1ZSkgbW9kdWxlLmV4cG9ydHMgPSBwcmVhY3Q7ZWxzZSBzZWxmLnByZWFjdCA9IHByZWFjdDsKICAgICAgfSgpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDk0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyBUaGlzIGZpbGUgY2FuIGJlIHJlcXVpcmVkIGluIEJyb3dzZXJpZnkgYW5kIE5vZGUuanMgZm9yIGF1dG9tYXRpYyBwb2x5ZmlsbAogICAgICAvLyBUbyB1c2UgaXQ6ICByZXF1aXJlKCdlczYtcHJvbWlzZS9hdXRvJyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpLnBvbHlmaWxsKCk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogOTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KICAgICAgKGZ1bmN0aW9uIChwcm9jZXNzLCBnbG9iYWwpIHsKICAgICAgICB2YXIgcmVxdWlyZTsKICAgICAgICAvKiEKICAgICAgICAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy4KICAgICAgICAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpCiAgICAgICAgKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlCiAgICAgICAgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFCiAgICAgICAgKiBAdmVyc2lvbiAgIDQuMS4xCiAgICAgICAgKi8KCgogICAgICAgIChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgICAgICAgICB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOiB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiBnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKTsKICAgICAgICB9KSh0aGlzLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgICAgZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7CiAgICAgICAgICAgIHZhciB0eXBlID0gX3R5cGVvZjQoeCk7CgogICAgICAgICAgICByZXR1cm4geCAhPT0gbnVsbCAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJzsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgX2lzQXJyYXkgPSB1bmRlZmluZWQ7CgogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkpIHsKICAgICAgICAgICAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2lzQXJyYXkgPSBmdW5jdGlvbiBfaXNBcnJheSh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaXNBcnJheSA9IF9pc0FycmF5OwogICAgICAgICAgdmFyIGxlbiA9IDA7CiAgICAgICAgICB2YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkOwogICAgICAgICAgdmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkOwoKICAgICAgICAgIHZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7CiAgICAgICAgICAgIHF1ZXVlW2xlbl0gPSBjYWxsYmFjazsKICAgICAgICAgICAgcXVldWVbbGVuICsgMV0gPSBhcmc7CiAgICAgICAgICAgIGxlbiArPSAyOwoKICAgICAgICAgICAgaWYgKGxlbiA9PT0gMikgewogICAgICAgICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC4KICAgICAgICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleQogICAgICAgICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy4KICAgICAgICAgICAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHsKICAgICAgICAgICAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBmdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikgewogICAgICAgICAgICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHsKICAgICAgICAgICAgYXNhcCA9IGFzYXBGbjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkOwogICAgICAgICAgdmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9OwogICAgICAgICAgdmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjsKICAgICAgICAgIHZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJzsgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTAKCiAgICAgICAgICB2YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnOyAvLyBub2RlCgogICAgICAgICAgZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7CiAgICAgICAgICAgIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseQogICAgICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHMKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IC8vIHZlcnR4CgoKICAgICAgICAgIGZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdmVydHhOZXh0ICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2ZXJ0eE5leHQoZmx1c2gpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHsKICAgICAgICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwOwogICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpOwogICAgICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTsKICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7CiAgICAgICAgICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gLy8gd2ViIHdvcmtlcgoKCiAgICAgICAgICBmdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHsKICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTsKICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkgewogICAgICAgICAgICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnkKICAgICAgICAgICAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpCiAgICAgICAgICAgIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApOwoKICAgICAgICAgIGZ1bmN0aW9uIGZsdXNoKCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7CiAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07CiAgICAgICAgICAgICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTsKICAgICAgICAgICAgICBjYWxsYmFjayhhcmcpOwogICAgICAgICAgICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGVuID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIHIgPSByZXF1aXJlOwoKICAgICAgICAgICAgICB2YXIgdmVydHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTsKCiAgICAgICAgICAgICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDsKICAgICAgICAgICAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkOyAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOgoKICAgICAgICAgIGlmIChpc05vZGUpIHsKICAgICAgICAgICAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7CiAgICAgICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKGlzV29ya2VyKSB7CiAgICAgICAgICAgIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpOwogICAgICAgICAgfSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgImZ1bmN0aW9uIiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHsKICAgICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzOwogICAgICAgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTsKCiAgICAgICAgICAgIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgbWFrZVByb21pc2UoY2hpbGQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTsKCiAgICAgICAgICAgIGlmIChfc3RhdGUpIHsKICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTsKICAgICAgICAgICAgICAgIGFzYXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNoaWxkOwogICAgICAgICAgfQogICAgICAgICAgLyoqCiAgICAgICAgICAgIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGUKICAgICAgICAgICAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzoKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICByZXNvbHZlKDEpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgIC8vIHZhbHVlID09PSAxCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTsKICAgICAgICAgIAogICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgIC8vIHZhbHVlID09PSAxCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBAbWV0aG9kIHJlc29sdmUKICAgICAgICAgICAgQHN0YXRpYwogICAgICAgICAgICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGgKICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW4KICAgICAgICAgICAgYHZhbHVlYAogICAgICAgICAgKi8KCgogICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZSQxKG9iamVjdCkgewogICAgICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICAgICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKG9iamVjdCAmJiBfdHlwZW9mNChvYmplY3QpID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7CiAgICAgICAgICAgIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpOwoKICAgICAgICAgIGZ1bmN0aW9uIG5vb3AoKSB7fQoKICAgICAgICAgIHZhciBQRU5ESU5HID0gdm9pZCAwOwogICAgICAgICAgdmFyIEZVTEZJTExFRCA9IDE7CiAgICAgICAgICB2YXIgUkVKRUNURUQgPSAyOwogICAgICAgICAgdmFyIEdFVF9USEVOX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7CgogICAgICAgICAgZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcigiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7CiAgICAgICAgICAgICAgcmV0dXJuIEdFVF9USEVOX0VSUk9SOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gdHJ5VGhlbih0aGVuJCQxLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdGhlbiQkMS5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHsKICAgICAgICAgICAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkgewogICAgICAgICAgICAgIHZhciBzZWFsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmIChzZWFsZWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNlYWxlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkgewogICAgICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIGlmIChzZWFsZWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNlYWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTsKICAgICAgICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpOwoKICAgICAgICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikgewogICAgICAgICAgICAgICAgc2VhbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBwcm9taXNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkgewogICAgICAgICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHsKICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHsKICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QocHJvbWlzZSwgcmVhc29uKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSkgewogICAgICAgICAgICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7CiAgICAgICAgICAgICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoZW4kJDEgPT09IEdFVF9USEVOX0VSUk9SKSB7CiAgICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpOwogICAgICAgICAgICAgICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhlbiQkMSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQxKSkgewogICAgICAgICAgICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkgewogICAgICAgICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkgewogICAgICAgICAgICBpZiAocHJvbWlzZS5fb25lcnJvcikgewogICAgICAgICAgICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHVibGlzaChwcm9taXNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7CiAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEOwoKICAgICAgICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7CiAgICAgICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDsKICAgICAgICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uOwogICAgICAgICAgICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikgewogICAgICAgICAgICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVyczsKICAgICAgICAgICAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7CiAgICAgICAgICAgIHBhcmVudC5fb25lcnJvciA9IG51bGw7CiAgICAgICAgICAgIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7CiAgICAgICAgICAgIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDsKICAgICAgICAgICAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uOwoKICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7CiAgICAgICAgICAgICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7CiAgICAgICAgICAgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzOwogICAgICAgICAgICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlOwoKICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7CiAgICAgICAgICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTsKICAgICAgICAgICAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTsKCiAgICAgICAgICAgICAgaWYgKGNoaWxkKSB7CiAgICAgICAgICAgICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRldGFpbCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEVycm9yT2JqZWN0KCkgewogICAgICAgICAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgVFJZX0NBVENIX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7CgogICAgICAgICAgZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTsKICAgICAgICAgICAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkgewogICAgICAgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSwKICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgZXJyb3IgPSB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7CgogICAgICAgICAgICBpZiAoaGFzQ2FsbGJhY2spIHsKICAgICAgICAgICAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpOwoKICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikgewogICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7CiAgICAgICAgICAgICAgICB2YWx1ZS5lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHsKICAgICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhbHVlID0gZGV0YWlsOwogICAgICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykgey8vIG5vb3AKICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHsKICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHsKICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkgewogICAgICAgICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7CiAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7CiAgICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpZCA9IDA7CgogICAgICAgICAgZnVuY3Rpb24gbmV4dElkKCkgewogICAgICAgICAgICByZXR1cm4gaWQrKzsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7CiAgICAgICAgICAgIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrOwogICAgICAgICAgICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkOwogICAgICAgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEVudW1lcmF0b3IkMShDb25zdHJ1Y3RvciwgaW5wdXQpIHsKICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yOwogICAgICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7CgogICAgICAgICAgICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkgewogICAgICAgICAgICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc0FycmF5KGlucHV0KSkgewogICAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoOwogICAgICAgICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDsKICAgICAgICAgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwoKICAgICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7CgogICAgICAgICAgICAgICAgdGhpcy5fZW51bWVyYXRlKGlucHV0KTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpOwogICAgICAgICAgfQoKICAgICAgICAgIEVudW1lcmF0b3IkMS5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uIChpbnB1dCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBFbnVtZXJhdG9yJDEucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiAoZW50cnksIGkpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yOwogICAgICAgICAgICB2YXIgcmVzb2x2ZSQkMSA9IGMucmVzb2x2ZTsKCiAgICAgICAgICAgIGlmIChyZXNvbHZlJCQxID09PSByZXNvbHZlJDEpIHsKICAgICAgICAgICAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTsKCiAgICAgICAgICAgICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykgewogICAgICAgICAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tOwogICAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDIpIHsKICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7CiAgICAgICAgICAgICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7CgogICAgICAgICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJDEpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUkJDEoZW50cnkpOwogICAgICAgICAgICAgICAgfSksIGkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIEVudW1lcmF0b3IkMS5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHsKICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7CgogICAgICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHsKICAgICAgICAgICAgICB0aGlzLl9yZW1haW5pbmctLTsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkgewogICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7CiAgICAgICAgICAgICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIEVudW1lcmF0b3IkMS5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIChwcm9taXNlLCBpKSB7CiAgICAgICAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpczsKICAgICAgICAgICAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKICAgICAgICAgIC8qKgogICAgICAgICAgICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2gKICAgICAgICAgICAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvcgogICAgICAgICAgICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGwKICAgICAgICAgICAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLgogICAgICAgICAgCiAgICAgICAgICAgIEV4YW1wbGU6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpOwogICAgICAgICAgICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpOwogICAgICAgICAgICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpOwogICAgICAgICAgICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTsKICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7CiAgICAgICAgICAgICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZQogICAgICAgICAgICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3MKICAgICAgICAgICAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOgogICAgICAgICAgCiAgICAgICAgICAgIEV4YW1wbGU6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpOwogICAgICAgICAgICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKCIyIikpOwogICAgICAgICAgICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKCIzIikpOwogICAgICAgICAgICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTsKICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7CiAgICAgICAgICAgICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gIjIiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBAbWV0aG9kIGFsbAogICAgICAgICAgICBAc3RhdGljCiAgICAgICAgICAgIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXMKICAgICAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuCiAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlbgogICAgICAgICAgICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC4KICAgICAgICAgICAgQHN0YXRpYwogICAgICAgICAgKi8KCgogICAgICAgICAgZnVuY3Rpb24gYWxsJDEoZW50cmllcykgewogICAgICAgICAgICByZXR1cm4gbmV3IEVudW1lcmF0b3IkMSh0aGlzLCBlbnRyaWVzKS5wcm9taXNlOwogICAgICAgICAgfQogICAgICAgICAgLyoqCiAgICAgICAgICAgIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGUKICAgICAgICAgICAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLgogICAgICAgICAgCiAgICAgICAgICAgIEV4YW1wbGU6CiAgICAgICAgICAKICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpOwogICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7CiAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAgICAgICAgICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTEKICAgICAgICAgICAgICAvLyB3YXMgcmVzb2x2ZWQuCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0CiAgICAgICAgICAgIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGUKICAgICAgICAgICAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhcwogICAgICAgICAgICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWQKICAgICAgICAgICAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDoKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7CiAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7CiAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAgICAgICAgICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZQogICAgICAgICAgICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBgYGAKICAgICAgICAgIAogICAgICAgICAgICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSkKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQG1ldGhvZCByYWNlCiAgICAgICAgICAgIEBzdGF0aWMKICAgICAgICAgICAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZQogICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkCiAgICAgICAgICAgIHByb21pc2UgdG8gc2V0dGxlLgogICAgICAgICAgKi8KCgogICAgICAgICAgZnVuY3Rpb24gcmFjZSQxKGVudHJpZXMpIHsKICAgICAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpczsKCiAgICAgICAgICAgIGlmICghaXNBcnJheShlbnRyaWVzKSkgewogICAgICAgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8qKgogICAgICAgICAgICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC4KICAgICAgICAgICAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAKICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCEKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzoKICAgICAgICAgIAogICAgICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgICAgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7CiAgICAgICAgICAKICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCEKICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEBtZXRob2QgcmVqZWN0CiAgICAgICAgICAgIEBzdGF0aWMKICAgICAgICAgICAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC4KICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuCiAgICAgICAgICAqLwoKCiAgICAgICAgICBmdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHsKICAgICAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpczsKICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7CiAgICAgICAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pOwogICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gbmVlZHNOZXcoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpOwogICAgICAgICAgfQogICAgICAgICAgLyoqCiAgICAgICAgICAgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGUKICAgICAgICAgICAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2gKICAgICAgICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uCiAgICAgICAgICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLgogICAgICAgICAgCiAgICAgICAgICAgIFRlcm1pbm9sb2d5CiAgICAgICAgICAgIC0tLS0tLS0tLS0tCiAgICAgICAgICAKICAgICAgICAgICAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi4KICAgICAgICAgICAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLgogICAgICAgICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuCiAgICAgICAgICAgIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LgogICAgICAgICAgICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuCiAgICAgICAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLgogICAgICAgICAgCiAgICAgICAgICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC4KICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZAogICAgICAgICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlCiAgICAgICAgICAgIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLgogICAgICAgICAgCiAgICAgICAgICAgIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYQogICAgICAgICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzCiAgICAgICAgICAgIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbAogICAgICAgICAgICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsCiAgICAgICAgICAgIGl0c2VsZiBmdWxmaWxsLgogICAgICAgICAgCiAgICAgICAgICAKICAgICAgICAgICAgQmFzaWMgVXNhZ2U6CiAgICAgICAgICAgIC0tLS0tLS0tLS0tLQogICAgICAgICAgCiAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgLy8gb24gc3VjY2VzcwogICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpOwogICAgICAgICAgCiAgICAgICAgICAgICAgLy8gb24gZmFpbHVyZQogICAgICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICAvLyBvbiBmdWxmaWxsbWVudAogICAgICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICAgICAgICAvLyBvbiByZWplY3Rpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGBgYAogICAgICAgICAgCiAgICAgICAgICAgIEFkdmFuY2VkIFVzYWdlOgogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0KICAgICAgICAgIAogICAgICAgICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzCiAgICAgICAgICAgIGBYTUxIdHRwUmVxdWVzdGBzLgogICAgICAgICAgCiAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAKICAgICAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpOwogICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7CiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nOwogICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgICAgICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikgewogICAgICAgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAgIC8vIG9uIHJlamVjdGlvbgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy4KICAgICAgICAgIAogICAgICAgICAgICBgYGBqcwogICAgICAgICAgICBQcm9taXNlLmFsbChbCiAgICAgICAgICAgICAgZ2V0SlNPTignL3Bvc3RzJyksCiAgICAgICAgICAgICAgZ2V0SlNPTignL2NvbW1lbnRzJykKICAgICAgICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpewogICAgICAgICAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT04KICAgICAgICAgICAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OCiAgICAgICAgICAKICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYGBgCiAgICAgICAgICAKICAgICAgICAgICAgQGNsYXNzIFByb21pc2UKICAgICAgICAgICAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXIKICAgICAgICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICAgICAgICBAY29uc3RydWN0b3IKICAgICAgICAgICovCgoKICAgICAgICAgIGZ1bmN0aW9uIFByb21pc2UkMihyZXNvbHZlcikgewogICAgICAgICAgICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7CiAgICAgICAgICAgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkOwogICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdOwoKICAgICAgICAgICAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7CiAgICAgICAgICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTsKICAgICAgICAgICAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSQyID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIFByb21pc2UkMi5hbGwgPSBhbGwkMTsKICAgICAgICAgIFByb21pc2UkMi5yYWNlID0gcmFjZSQxOwogICAgICAgICAgUHJvbWlzZSQyLnJlc29sdmUgPSByZXNvbHZlJDE7CiAgICAgICAgICBQcm9taXNlJDIucmVqZWN0ID0gcmVqZWN0JDE7CiAgICAgICAgICBQcm9taXNlJDIuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjsKICAgICAgICAgIFByb21pc2UkMi5fc2V0QXNhcCA9IHNldEFzYXA7CiAgICAgICAgICBQcm9taXNlJDIuX2FzYXAgPSBhc2FwOwogICAgICAgICAgUHJvbWlzZSQyLnByb3RvdHlwZSA9IHsKICAgICAgICAgICAgY29uc3RydWN0b3I6IFByb21pc2UkMiwKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLAogICAgICAgICAgICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlCiAgICAgICAgICAgICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLgogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXsKICAgICAgICAgICAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIENoYWluaW5nCiAgICAgICAgICAgICAgLS0tLS0tLS0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbScKICAgICAgICAgICAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50CiAgICAgICAgICAgICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlci5uYW1lOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJzsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkgewogICAgICAgICAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdAogICAgICAgICAgICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAvLyBuZXZlciByZWFjaGVkCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy4KICAgICAgICAgICAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLgogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAvLyBuZXZlciByZWFjaGVkCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIC8vIG5ldmVyIHJlYWNoZWQKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBBc3NpbWlsYXRpb24KICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmUKICAgICAgICAgICAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlCiAgICAgICAgICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmcKICAgICAgICAgICAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi4KICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykgewogICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC4KICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykgewogICAgICAgICAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBgYGAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgU2ltcGxlIEV4YW1wbGUKICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAKICAgICAgICAgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgICBsZXQgcmVzdWx0OwogICAgICAgICAgICAKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpOwogICAgICAgICAgICAgICAgLy8gc3VjY2VzcwogICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgICAgICAgICAgICAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBFcnJiYWNrIEV4YW1wbGUKICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBganMKICAgICAgICAgICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXsKICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8gc3VjY2VzcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBQcm9taXNlIEV4YW1wbGU7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpewogICAgICAgICAgICAgICAgLy8gc3VjY2VzcwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgICAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIEFkdmFuY2VkIEV4YW1wbGUKICAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAKICAgICAgICAgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICAgICAgICBsZXQgYXV0aG9yLCBib29rczsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTsKICAgICAgICAgICAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7CiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzCiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAgICAgICAgICAgIC8vIGZhaWx1cmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIEVycmJhY2sgRXhhbXBsZQogICAgICAgICAgICAKICAgICAgICAgICAgICBgYGBqcwogICAgICAgICAgICAKICAgICAgICAgICAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXsKICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpOwogICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyBzdWNjZXNzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIFByb21pc2UgRXhhbXBsZTsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgICAgICAgIGZpbmRBdXRob3IoKS4KICAgICAgICAgICAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLgogICAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7CiAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGJvb2tzCiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYGBgCiAgICAgICAgICAgIAogICAgICAgICAgICAgIEBtZXRob2QgdGhlbgogICAgICAgICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkCiAgICAgICAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZAogICAgICAgICAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgICAgICAgICBAcmV0dXJuIHtQcm9taXNlfQogICAgICAgICAgICAqLwogICAgICAgICAgICB0aGVuOiB0aGVuLAoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZQogICAgICAgICAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuCiAgICAgICAgICAgIAogICAgICAgICAgICAgIGBgYGpzCiAgICAgICAgICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAvLyBzeW5jaHJvbm91cwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmaW5kQXV0aG9yKCk7CiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzCiAgICAgICAgICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGBgYAogICAgICAgICAgICAKICAgICAgICAgICAgICBAbWV0aG9kIGNhdGNoCiAgICAgICAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb24KICAgICAgICAgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgICAgICAgICAgQHJldHVybiB7UHJvbWlzZX0KICAgICAgICAgICAgKi8KICAgICAgICAgICAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICAvKmdsb2JhbCBzZWxmKi8KCiAgICAgICAgICBmdW5jdGlvbiBwb2x5ZmlsbCQxKCkgewogICAgICAgICAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7CgogICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICBsb2NhbCA9IGdsb2JhbDsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICBsb2NhbCA9IHNlbGY7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlOwoKICAgICAgICAgICAgaWYgKFApIHsKICAgICAgICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgey8vIHNpbGVudGx5IGlnbm9yZWQKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZSQyOwogICAgICAgICAgfSAvLyBTdHJhbmdlIGNvbXBhdC4uCgoKICAgICAgICAgIFByb21pc2UkMi5wb2x5ZmlsbCA9IHBvbHlmaWxsJDE7CiAgICAgICAgICBQcm9taXNlJDIuUHJvbWlzZSA9IFByb21pc2UkMjsKICAgICAgICAgIHJldHVybiBQcm9taXNlJDI7CiAgICAgICAgfSk7CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICB9KS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOSksIF9fd2VicGFja19yZXF1aXJlX18oOTYpKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiA5NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIHZhciBnOyAvLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZQoKICAgICAgZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSgpOwoKICAgICAgdHJ5IHsKICAgICAgICAvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUCkKICAgICAgICBnID0gZyB8fCBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpIHx8ICgxLCBldmFsKSgidGhpcyIpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGUKICAgICAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mNCh3aW5kb3cpKSA9PT0gIm9iamVjdCIpIGcgPSB3aW5kb3c7CiAgICAgIH0gLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLgogICAgICAvLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQncwogICAgICAvLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59CgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBnOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDk3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLyogKGlnbm9yZWQpICovCgogICAgICAvKioqLwogICAgfSwKICAgIC8qIDk4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7CgogICAgICB2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7CgogICAgICB2YXIgX2Fzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCiAgICAgIHZhciBfYXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Fzc2lnbik7CgogICAgICB2YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7CgogICAgICB2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCiAgICAgIHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7CgogICAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzApOwoKICAgICAgdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKICAgICAgdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpOwoKICAgICAgdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCiAgICAgIHZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7CgogICAgICB2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7CgogICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgIHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpOwoKICAgICAgdmFyIF9yZWFjdEZsaXBNb3ZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpOwoKICAgICAgdmFyIF9yZWFjdEZsaXBNb3ZlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RmxpcE1vdmUpOwoKICAgICAgdmFyIF9hdXRvc2l6ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUwKTsKCiAgICAgIHZhciBfYXV0b3NpemUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b3NpemUpOwoKICAgICAgdmFyIF9pMThuID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTEpOwoKICAgICAgdmFyIF9pMThuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2kxOG4pOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNjApOwoKICAgICAgdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7CgogICAgICB2YXIgX2F2YXRhciA9IF9fd2VicGFja19yZXF1aXJlX18oODApOwoKICAgICAgdmFyIF9hdmF0YXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXZhdGFyKTsKCiAgICAgIHZhciBfYnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODgpOwoKICAgICAgdmFyIF9idXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYnV0dG9uKTsKCiAgICAgIHZhciBfYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpOwoKICAgICAgdmFyIF9hY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWN0aW9uKTsKCiAgICAgIHZhciBfY29tbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkwKTsKCiAgICAgIHZhciBfY29tbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21tZW50KTsKCiAgICAgIHZhciBfc3ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7CgogICAgICB2YXIgX3N2ZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdmcpOwoKICAgICAgdmFyIF9jb25zdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjE4KTsKCiAgICAgIHZhciBfZ2V0Q29tbWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOSk7CgogICAgICB2YXIgX2dldENvbW1lbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldENvbW1lbnRzKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIEdpdGFsa0NvbXBvbmVudCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgICAgICAgKDAsIF9pbmhlcml0czNbImRlZmF1bHQiXSkoR2l0YWxrQ29tcG9uZW50LCBfQ29tcG9uZW50KTsKCiAgICAgICAgZnVuY3Rpb24gR2l0YWxrQ29tcG9uZW50KHByb3BzKSB7CiAgICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1siZGVmYXVsdCJdKSh0aGlzLCBHaXRhbGtDb21wb25lbnQpOwoKICAgICAgICAgIHZhciBfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjNbImRlZmF1bHQiXSkodGhpcywgKEdpdGFsa0NvbXBvbmVudC5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjJbImRlZmF1bHQiXSkoR2l0YWxrQ29tcG9uZW50KSkuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgICAgICAgIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICB1c2VyOiBudWxsLAogICAgICAgICAgICBpc3N1ZTogbnVsbCwKICAgICAgICAgICAgY29tbWVudHM6IFtdLAogICAgICAgICAgICBsb2NhbENvbW1lbnRzOiBbXSwKICAgICAgICAgICAgY29tbWVudDogJycsCiAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgIHBhZ2VyRGlyZWN0aW9uOiAnbGFzdCcsCiAgICAgICAgICAgIGN1cnNvcjogbnVsbCwKICAgICAgICAgICAgcHJldmlld0h0bWw6ICcnLAogICAgICAgICAgICBpc05vSW5pdDogZmFsc2UsCiAgICAgICAgICAgIGlzSW5pdGluZzogdHJ1ZSwKICAgICAgICAgICAgaXNDcmVhdGluZzogZmFsc2UsCiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIGlzTG9hZE1vcmU6IGZhbHNlLAogICAgICAgICAgICBpc0xvYWRPdmVyOiBmYWxzZSwKICAgICAgICAgICAgaXNJc3N1ZUNyZWF0aW5nOiBmYWxzZSwKICAgICAgICAgICAgaXNQb3B1cFZpc2libGU6IGZhbHNlLAogICAgICAgICAgICBpc0lucHV0Rm9jdXNlZDogZmFsc2UsCiAgICAgICAgICAgIGlzUHJldmlldzogZmFsc2UsCiAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogZmFsc2UsCiAgICAgICAgICAgIGVycm9yTXNnOiAnJwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5nZXRDb21tZW50c1YzID0gZnVuY3Rpb24gKGlzc3VlKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyRvcHRpb25zID0gX3RoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIGNsaWVudElEID0gX3RoaXMkb3B0aW9ucy5jbGllbnRJRCwKICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldCA9IF90aGlzJG9wdGlvbnMuY2xpZW50U2VjcmV0LAogICAgICAgICAgICAgICAgcGVyUGFnZSA9IF90aGlzJG9wdGlvbnMucGVyUGFnZTsKICAgICAgICAgICAgdmFyIHBhZ2UgPSBfdGhpcy5zdGF0ZS5wYWdlOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0SXNzdWUoKS50aGVuKGZ1bmN0aW9uIChpc3N1ZSkgewogICAgICAgICAgICAgIGlmICghaXNzdWUpIHJldHVybjsKICAgICAgICAgICAgICByZXR1cm4gX3V0aWwuYXhpb3NHaXRodWIuZ2V0KGlzc3VlLmNvbW1lbnRzX3VybCwgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi92bmQuZ2l0aHViLnYzLmZ1bGwranNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBjbGllbnRJRCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGNsaWVudFNlY3JldAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICBwZXJfcGFnZTogcGVyUGFnZSwKICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdmFyIF90aGlzJHN0YXRlID0gX3RoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICAgICAgY29tbWVudHMgPSBfdGhpcyRzdGF0ZS5jb21tZW50cywKICAgICAgICAgICAgICAgICAgICBpc3N1ZSA9IF90aGlzJHN0YXRlLmlzc3VlOwogICAgICAgICAgICAgICAgdmFyIGlzTG9hZE92ZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciBjcyA9IGNvbW1lbnRzLmNvbmNhdChyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKGNzLmxlbmd0aCA+PSBpc3N1ZS5jb21tZW50cyB8fCByZXMuZGF0YS5sZW5ndGggPCBwZXJQYWdlKSB7CiAgICAgICAgICAgICAgICAgIGlzTG9hZE92ZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgY29tbWVudHM6IGNzLAogICAgICAgICAgICAgICAgICBpc0xvYWRPdmVyOiBpc0xvYWRPdmVyLAogICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlICsgMQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGNzOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuZ2V0UmVmID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMucHVibGljQnRuRUwgPSBlOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5yZXBseSA9IGZ1bmN0aW9uIChyZXBseUNvbW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgY29tbWVudCA9IF90aGlzLnN0YXRlLmNvbW1lbnQ7CiAgICAgICAgICAgICAgdmFyIHJlcGx5Q29tbWVudEJvZHkgPSByZXBseUNvbW1lbnQuYm9keTsKICAgICAgICAgICAgICB2YXIgcmVwbHlDb21tZW50QXJyYXkgPSByZXBseUNvbW1lbnRCb2R5LnNwbGl0KCdcbicpOwogICAgICAgICAgICAgIHJlcGx5Q29tbWVudEFycmF5LnVuc2hpZnQoJ0AnICsgcmVwbHlDb21tZW50LnVzZXIubG9naW4pOwogICAgICAgICAgICAgIHJlcGx5Q29tbWVudEFycmF5ID0gcmVwbHlDb21tZW50QXJyYXkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJz4gJyArIHQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmVwbHlDb21tZW50QXJyYXkucHVzaCgnJyk7CiAgICAgICAgICAgICAgcmVwbHlDb21tZW50QXJyYXkucHVzaCgnJyk7CiAgICAgICAgICAgICAgaWYgKGNvbW1lbnQpIHJlcGx5Q29tbWVudEFycmF5LnVuc2hpZnQoJycpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjb21tZW50OiBjb21tZW50ICsgcmVwbHlDb21tZW50QXJyYXkuam9pbignXG4nKQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF9hdXRvc2l6ZTJbImRlZmF1bHQiXS51cGRhdGUoX3RoaXMuY29tbWVudEVMKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5jb21tZW50RUwuZm9jdXMoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlUG9wdXAgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHZhciBpc1Zpc2libGUgPSAhX3RoaXMuc3RhdGUuaXNQb3B1cFZpc2libGU7CgogICAgICAgICAgICB2YXIgaGlkZUhhbmRsZSA9IGZ1bmN0aW9uIGhpZGVIYW5kbGUoZTEpIHsKICAgICAgICAgICAgICBpZiAoKDAsIF91dGlsLmhhc0NsYXNzSW5QYXJlbnQpKGUxLnRhcmdldCwgJ2d0LXVzZXInLCAnZ3QtcG9wdXAnKSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhhbmRsZSk7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzUG9wdXBWaXNpYmxlOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGlzUG9wdXBWaXNpYmxlOiBpc1Zpc2libGUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoaXNWaXNpYmxlKSB7CiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhhbmRsZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhhbmRsZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlTG9naW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjb21tZW50ID0gX3RoaXMuc3RhdGUuY29tbWVudDsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKF9jb25zdC5HVF9DT01NRU5ULCBlbmNvZGVVUklDb21wb25lbnQoY29tbWVudCkpOwogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF90aGlzLmxvZ2luTGluazsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlSXNzdWVDcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc0lzc3VlQ3JlYXRpbmc6IHRydWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5jcmVhdGVJc3N1ZSgpLnRoZW4oZnVuY3Rpb24gKGlzc3VlKSB7CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNJc3N1ZUNyZWF0aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldENvbW1lbnRzKGlzc3VlKTsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzSXNzdWVDcmVhdGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShlcnIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNOb0luaXQ6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50Q3JlYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5jb21tZW50Lmxlbmd0aCkgewogICAgICAgICAgICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICBfdGhpcy5jb21tZW50RUwuZm9jdXMoKTsKCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoc3RhdGUpIHsKICAgICAgICAgICAgICBpZiAoc3RhdGUuaXNDcmVhdGluZykgcmV0dXJuOwoKICAgICAgICAgICAgICBfdGhpcy5jcmVhdGVDb21tZW50KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc0NyZWF0aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc0NyZWF0aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShlcnIpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlzQ3JlYXRpbmc6IHRydWUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudFByZXZpZXcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNQcmV2aWV3OiAhX3RoaXMuc3RhdGUuaXNQcmV2aWV3CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3V0aWwuYXhpb3NHaXRodWIucG9zdCgnL21hcmtkb3duJywgewogICAgICAgICAgICAgIHRleHQ6IF90aGlzLnN0YXRlLmNvbW1lbnQKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IF90aGlzLmFjY2Vzc1Rva2VuICYmIHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICd0b2tlbiAnICsgX3RoaXMuYWNjZXNzVG9rZW4KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHByZXZpZXdIdG1sOiByZXMuZGF0YQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNPY2N1ckVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgZXJyb3JNc2c6ICgwLCBfdXRpbC5mb3JtYXRFcnJvck1zZykoZXJyKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudExvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSBfdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIGlzc3VlID0gX3RoaXMkc3RhdGUyLmlzc3VlLAogICAgICAgICAgICAgICAgaXNMb2FkTW9yZSA9IF90aGlzJHN0YXRlMi5pc0xvYWRNb3JlOwogICAgICAgICAgICBpZiAoaXNMb2FkTW9yZSkgcmV0dXJuOwoKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGlzTG9hZE1vcmU6IHRydWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5nZXRDb21tZW50cyhpc3N1ZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzTG9hZE1vcmU6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50Q2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBjb21tZW50OiBlLnRhcmdldC52YWx1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlTG9nb3V0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5sb2dvdXQoKTsKCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudEZvY3VzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIGRpc3RyYWN0aW9uRnJlZU1vZGUgPSBfdGhpcy5vcHRpb25zLmRpc3RyYWN0aW9uRnJlZU1vZGU7CiAgICAgICAgICAgIGlmICghZGlzdHJhY3Rpb25GcmVlTW9kZSkgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc0lucHV0Rm9jdXNlZDogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlQ29tbWVudEJsdXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgZGlzdHJhY3Rpb25GcmVlTW9kZSA9IF90aGlzLm9wdGlvbnMuZGlzdHJhY3Rpb25GcmVlTW9kZTsKICAgICAgICAgICAgaWYgKCFkaXN0cmFjdGlvbkZyZWVNb2RlKSByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgIGlzSW5wdXRGb2N1c2VkOiBmYWxzZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuaGFuZGxlU29ydCA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgcGFnZXJEaXJlY3Rpb246IGRpcmVjdGlvbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50S2V5RG93biA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBlbmFibGVIb3RLZXkgPSBfdGhpcy5vcHRpb25zLmVuYWJsZUhvdEtleTsKCiAgICAgICAgICAgIGlmIChlbmFibGVIb3RLZXkgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpICYmIGUua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICAgICAgICBfdGhpcy5wdWJsaWNCdG5FTCAmJiBfdGhpcy5wdWJsaWNCdG5FTC5mb2N1cygpOwoKICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVDb21tZW50Q3JlYXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMub3B0aW9ucyA9ICgwLCBfYXNzaWduMlsiZGVmYXVsdCJdKSh7fSwgewogICAgICAgICAgICBpZDogd2luZG93LmxvY2F0aW9uLmhyZWYsCiAgICAgICAgICAgIG51bWJlcjogLTEsCiAgICAgICAgICAgIGxhYmVsczogWydHaXRhbGsnXSwKICAgICAgICAgICAgdGl0bGU6IHdpbmRvdy5kb2N1bWVudC50aXRsZSwKICAgICAgICAgICAgYm9keTogJycsCiAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgaGVhZGVyLm1ldGFbZGVzY3JpcHRpb25dCiAgICAgICAgICAgIGxhbmd1YWdlOiB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlIHx8IHdpbmRvdy5uYXZpZ2F0b3IudXNlckxhbmd1YWdlLAogICAgICAgICAgICBwZXJQYWdlOiAxMCwKICAgICAgICAgICAgcGFnZXJEaXJlY3Rpb246ICdsYXN0JywKICAgICAgICAgICAgLy8gbGFzdCBvciBmaXJzdAogICAgICAgICAgICBjcmVhdGVJc3N1ZU1hbnVhbGx5OiBmYWxzZSwKICAgICAgICAgICAgZGlzdHJhY3Rpb25GcmVlTW9kZTogZmFsc2UsCiAgICAgICAgICAgIHByb3h5OiAnaHR0cHM6Ly9jb3JzLWFueXdoZXJlLmhlcm9rdWFwcC5jb20vaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2FjY2Vzc190b2tlbicsCiAgICAgICAgICAgIGZsaXBNb3ZlT3B0aW9uczogewogICAgICAgICAgICAgIHN0YWdnZXJEZWxheUJ5OiAxNTAsCiAgICAgICAgICAgICAgYXBwZWFyQW5pbWF0aW9uOiAnYWNjb3JkaW9uVmVydGljYWwnLAogICAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uOiAnYWNjb3JkaW9uVmVydGljYWwnLAogICAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uOiAnYWNjb3JkaW9uVmVydGljYWwnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuYWJsZUhvdEtleTogdHJ1ZSwKICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgZGVmYXVsdEF1dGhvcjogewogICAgICAgICAgICAgIGF2YXRhclVybDogJy8vYXZhdGFyczEuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMjk2OTcxMzM/cz01MCcsCiAgICAgICAgICAgICAgbG9naW46ICdudWxsJywKICAgICAgICAgICAgICB1cmw6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZUNvdW50Q2FsbGJhY2s6IG51bGwKICAgICAgICAgIH0sIHByb3BzLm9wdGlvbnMpOwogICAgICAgICAgX3RoaXMuc3RhdGUucGFnZXJEaXJlY3Rpb24gPSBfdGhpcy5vcHRpb25zLnBhZ2VyRGlyZWN0aW9uOwogICAgICAgICAgdmFyIHN0b3JlZENvbW1lbnQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oX2NvbnN0LkdUX0NPTU1FTlQpOwoKICAgICAgICAgIGlmIChzdG9yZWRDb21tZW50KSB7CiAgICAgICAgICAgIF90aGlzLnN0YXRlLmNvbW1lbnQgPSBkZWNvZGVVUklDb21wb25lbnQoc3RvcmVkQ29tbWVudCk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShfY29uc3QuR1RfQ09NTUVOVCk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHF1ZXJ5ID0gKDAsIF91dGlsLnF1ZXJ5UGFyc2UpKCk7CgogICAgICAgICAgaWYgKHF1ZXJ5LmNvZGUpIHsKICAgICAgICAgICAgdmFyIGNvZGUgPSBxdWVyeS5jb2RlOwogICAgICAgICAgICBkZWxldGUgcXVlcnkuY29kZTsKICAgICAgICAgICAgdmFyIHJlcGxhY2VkVXJsID0gJycgKyB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgKDAsIF91dGlsLnF1ZXJ5U3RyaW5naWZ5KShxdWVyeSkgKyB3aW5kb3cubG9jYXRpb24uaGFzaDsKICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgcmVwbGFjZWRVcmwpOwogICAgICAgICAgICBfdGhpcy5vcHRpb25zID0gKDAsIF9hc3NpZ24yWyJkZWZhdWx0Il0pKHt9LCBfdGhpcy5vcHRpb25zLCB7CiAgICAgICAgICAgICAgdXJsOiByZXBsYWNlZFVybCwKICAgICAgICAgICAgICBpZDogcmVwbGFjZWRVcmwKICAgICAgICAgICAgfSwgcHJvcHMub3B0aW9ucyk7CgogICAgICAgICAgICBfdXRpbC5heGlvc0pTT04ucG9zdChfdGhpcy5vcHRpb25zLnByb3h5LCB7CiAgICAgICAgICAgICAgY29kZTogY29kZSwKICAgICAgICAgICAgICBjbGllbnRfaWQ6IF90aGlzLm9wdGlvbnMuY2xpZW50SUQsCiAgICAgICAgICAgICAgY2xpZW50X3NlY3JldDogX3RoaXMub3B0aW9ucy5jbGllbnRTZWNyZXQKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmFjY2Vzc190b2tlbikgewogICAgICAgICAgICAgICAgX3RoaXMuYWNjZXNzVG9rZW4gPSByZXMuZGF0YS5hY2Nlc3NfdG9rZW47CgogICAgICAgICAgICAgICAgX3RoaXMuZ2V0SW5pdCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGlzSW5pdGluZzogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6JywgZXJyKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc0luaXRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShlcnIpCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG5vIGFjY2Vzc190b2tlbgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlcy5kYXRhIGVycjonLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgIGVycm9yTXNnOiAoMCwgX3V0aWwuZm9ybWF0RXJyb3JNc2cpKG5ldyBFcnJvcignbm8gYWNjZXNzIHRva2VuJykpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShlcnIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuZ2V0SW5pdCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0luaXRpbmc6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOicsIGVycik7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzSW5pdGluZzogZmFsc2UsCiAgICAgICAgICAgICAgICBpc09jY3VyRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICBlcnJvck1zZzogKDAsIF91dGlsLmZvcm1hdEVycm9yTXNnKShlcnIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLmkxOG4gPSAoMCwgX2kxOG4yWyJkZWZhdWx0Il0pKF90aGlzLm9wdGlvbnMubGFuZ3VhZ2UpOwogICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KCiAgICAgICAgKDAsIF9jcmVhdGVDbGFzczNbImRlZmF1bHQiXSkoR2l0YWxrQ29tcG9uZW50LCBbewogICAgICAgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7CiAgICAgICAgICAgIHRoaXMuY29tbWVudEVMICYmICgwLCBfYXV0b3NpemUyWyJkZWZhdWx0Il0pKHRoaXMuY29tbWVudEVMKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRJbml0JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbml0KCkgewogICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5nZXRJc3N1ZSgpOwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChpc3N1ZSkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0Q29tbWVudHMoaXNzdWUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRVc2VySW5mbycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7CiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICAgICAgcmV0dXJuIF91dGlsLmF4aW9zR2l0aHViLmdldCgnL3VzZXInLCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ3Rva2VuICcgKyB0aGlzLmFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgdXNlcjogcmVzLmRhdGEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgIF90aGlzMy5sb2dvdXQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZ2V0SXNzdWVCeUlkJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJc3N1ZUJ5SWQoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgb3duZXIgPSBfb3B0aW9ucy5vd25lciwKICAgICAgICAgICAgICAgIHJlcG8gPSBfb3B0aW9ucy5yZXBvLAogICAgICAgICAgICAgICAgbnVtYmVyID0gX29wdGlvbnMubnVtYmVyLAogICAgICAgICAgICAgICAgY2xpZW50SUQgPSBfb3B0aW9ucy5jbGllbnRJRCwKICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldCA9IF9vcHRpb25zLmNsaWVudFNlY3JldDsKICAgICAgICAgICAgdmFyIGdldFVybCA9ICcvcmVwb3MvJyArIG93bmVyICsgJy8nICsgcmVwbyArICcvaXNzdWVzLycgKyBudW1iZXI7CiAgICAgICAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyWyJkZWZhdWx0Il0oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIF91dGlsLmF4aW9zR2l0aHViLmdldChnZXRVcmwsIHsKICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGNsaWVudElELAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogY2xpZW50U2VjcmV0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIHQ6IERhdGUubm93KCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHZhciBpc3N1ZSA9IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5udW1iZXIgPT09IG51bWJlcikgewogICAgICAgICAgICAgICAgICBpc3N1ZSA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgICAgICAgX3RoaXM0LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc3N1ZTogaXNzdWUsCiAgICAgICAgICAgICAgICAgICAgaXNOb0luaXQ6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlc29sdmUoaXNzdWUpOwogICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHN0YXR1cyBjb2RlIGlzIDQwNCwgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGggbnVsbAogICAgICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkgcmVzb2x2ZShudWxsKTsKICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRJc3N1ZUJ5TGFiZWxzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJc3N1ZUJ5TGFiZWxzKCkgewogICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgICAgICBvd25lciA9IF9vcHRpb25zMi5vd25lciwKICAgICAgICAgICAgICAgIHJlcG8gPSBfb3B0aW9uczIucmVwbywKICAgICAgICAgICAgICAgIGlkID0gX29wdGlvbnMyLmlkLAogICAgICAgICAgICAgICAgbGFiZWxzID0gX29wdGlvbnMyLmxhYmVscywKICAgICAgICAgICAgICAgIGNsaWVudElEID0gX29wdGlvbnMyLmNsaWVudElELAogICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0ID0gX29wdGlvbnMyLmNsaWVudFNlY3JldDsKICAgICAgICAgICAgcmV0dXJuIF91dGlsLmF4aW9zR2l0aHViLmdldCgnL3JlcG9zLycgKyBvd25lciArICcvJyArIHJlcG8gKyAnL2lzc3VlcycsIHsKICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogY2xpZW50SUQsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogY2xpZW50U2VjcmV0CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIGxhYmVsczogbGFiZWxzLmNvbmNhdChpZCkuam9pbignLCcpLAogICAgICAgICAgICAgICAgdDogRGF0ZS5ub3coKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgdmFyIGNyZWF0ZUlzc3VlTWFudWFsbHkgPSBfdGhpczUub3B0aW9ucy5jcmVhdGVJc3N1ZU1hbnVhbGx5OwogICAgICAgICAgICAgIHZhciBpc05vSW5pdCA9IGZhbHNlOwogICAgICAgICAgICAgIHZhciBpc3N1ZSA9IG51bGw7CgogICAgICAgICAgICAgIGlmICghKHJlcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICBpZiAoIWNyZWF0ZUlzc3VlTWFudWFsbHkgJiYgX3RoaXM1LmlzQWRtaW4pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5jcmVhdGVJc3N1ZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlzTm9Jbml0ID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXNzdWUgPSByZXMuZGF0YVswXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzNS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc3N1ZTogaXNzdWUsCiAgICAgICAgICAgICAgICBpc05vSW5pdDogaXNOb0luaXQKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRJc3N1ZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXNzdWUoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIG51bWJlciA9IHRoaXMub3B0aW9ucy5udW1iZXI7CiAgICAgICAgICAgIHZhciBpc3N1ZSA9IHRoaXMuc3RhdGUuaXNzdWU7CgogICAgICAgICAgICBpZiAoaXNzdWUpIHsKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzTm9Jbml0OiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBfcHJvbWlzZTJbImRlZmF1bHQiXS5yZXNvbHZlKGlzc3VlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdudW1iZXInICYmIG51bWJlciA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJc3N1ZUJ5SWQoKS50aGVuKGZ1bmN0aW9uIChyZXNJc3N1ZSkgewogICAgICAgICAgICAgICAgaWYgKCFyZXNJc3N1ZSkgcmV0dXJuIF90aGlzNi5nZXRJc3N1ZUJ5TGFiZWxzKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzSXNzdWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldElzc3VlQnlMYWJlbHMoKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjcmVhdGVJc3N1ZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlSXNzdWUoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIG93bmVyID0gX29wdGlvbnMzLm93bmVyLAogICAgICAgICAgICAgICAgcmVwbyA9IF9vcHRpb25zMy5yZXBvLAogICAgICAgICAgICAgICAgdGl0bGUgPSBfb3B0aW9uczMudGl0bGUsCiAgICAgICAgICAgICAgICBib2R5ID0gX29wdGlvbnMzLmJvZHksCiAgICAgICAgICAgICAgICBpZCA9IF9vcHRpb25zMy5pZCwKICAgICAgICAgICAgICAgIGxhYmVscyA9IF9vcHRpb25zMy5sYWJlbHMsCiAgICAgICAgICAgICAgICB1cmwgPSBfb3B0aW9uczMudXJsOwogICAgICAgICAgICByZXR1cm4gX3V0aWwuYXhpb3NHaXRodWIucG9zdCgnL3JlcG9zLycgKyBvd25lciArICcvJyArIHJlcG8gKyAnL2lzc3VlcycsIHsKICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgbGFiZWxzOiBsYWJlbHMuY29uY2F0KGlkKSwKICAgICAgICAgICAgICBib2R5OiBib2R5IHx8IHVybCArICcgXG5cbiAnICsgKCgwLCBfdXRpbC5nZXRNZXRhQ29udGVudCkoJ2Rlc2NyaXB0aW9uJykgfHwgKDAsIF91dGlsLmdldE1ldGFDb250ZW50KSgnZGVzY3JpcHRpb24nLCAnb2c6ZGVzY3JpcHRpb24nKSB8fCAnJykKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICd0b2tlbiAnICsgdGhpcy5hY2Nlc3NUb2tlbgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXM3LnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzc3VlOiByZXMuZGF0YQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSAvLyBHZXQgY29tbWVudHMgdmlhIHYzIGFwaSwgZG9uJ3QgcmVxdWlyZSBsb2dpbiwgYnV0IHNvcnRpbmcgZmVhdHVyZSBpcyBkaXNhYmxlCgogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2dldENvbW1lbnRzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb21tZW50cyhpc3N1ZSkgewogICAgICAgICAgICBpZiAoIWlzc3VlKSByZXR1cm47IC8vIEdldCBjb21tZW50cyB2aWEgdjQgZ3JhcGhxbCBhcGksIGxvZ2luIHJlcXVpcmVkIGFuZCBzb3J0aW5nIGZlYXR1cmUgaXMgYXZhaWxhYmxlCgogICAgICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikgcmV0dXJuIF9nZXRDb21tZW50czJbImRlZmF1bHQiXS5jYWxsKHRoaXMsIGlzc3VlKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tbWVudHNWMyhpc3N1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY3JlYXRlQ29tbWVudCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQ29tbWVudCgpIHsKICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICAgICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIGNvbW1lbnQgPSBfc3RhdGUuY29tbWVudCwKICAgICAgICAgICAgICAgIGxvY2FsQ29tbWVudHMgPSBfc3RhdGUubG9jYWxDb21tZW50cywKICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gX3N0YXRlLmNvbW1lbnRzOwogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJc3N1ZSgpLnRoZW4oZnVuY3Rpb24gKGlzc3VlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF91dGlsLmF4aW9zR2l0aHViLnBvc3QoaXNzdWUuY29tbWVudHNfdXJsLCB7CiAgICAgICAgICAgICAgICBib2R5OiBjb21tZW50CiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi92bmQuZ2l0aHViLnYzLmZ1bGwranNvbicsCiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICd0b2tlbiAnICsgX3RoaXM4LmFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjb21tZW50OiAnJywKICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBjb21tZW50cy5jb25jYXQocmVzLmRhdGEpLAogICAgICAgICAgICAgICAgbG9jYWxDb21tZW50czogbG9jYWxDb21tZW50cy5jb25jYXQocmVzLmRhdGEpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2xvZ291dCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICB1c2VyOiBudWxsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oX2NvbnN0LkdUX0FDQ0VTU19UT0tFTik7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnbGlrZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbGlrZShjb21tZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIG93bmVyID0gX29wdGlvbnM0Lm93bmVyLAogICAgICAgICAgICAgICAgcmVwbyA9IF9vcHRpb25zNC5yZXBvOwogICAgICAgICAgICB2YXIgdXNlciA9IHRoaXMuc3RhdGUudXNlcjsKICAgICAgICAgICAgdmFyIGNvbW1lbnRzID0gdGhpcy5zdGF0ZS5jb21tZW50czsKCiAgICAgICAgICAgIF91dGlsLmF4aW9zR2l0aHViLnBvc3QoJy9yZXBvcy8nICsgb3duZXIgKyAnLycgKyByZXBvICsgJy9pc3N1ZXMvY29tbWVudHMvJyArIGNvbW1lbnQuaWQgKyAnL3JlYWN0aW9ucycsIHsKICAgICAgICAgICAgICBjb250ZW50OiAnaGVhcnQnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAndG9rZW4gJyArIHRoaXMuYWNjZXNzVG9rZW4sCiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi92bmQuZ2l0aHViLnNxdWlycmVsLWdpcmwtcHJldmlldycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGNvbW1lbnRzID0gY29tbWVudHMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICBpZiAoYy5pZCA9PT0gY29tbWVudC5pZCkgewogICAgICAgICAgICAgICAgICBpZiAoYy5yZWFjdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIX5jLnJlYWN0aW9ucy5ub2Rlcy5maW5kSW5kZXgoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnVzZXIubG9naW4gPT09IHVzZXIubG9naW47CiAgICAgICAgICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLnRvdGFsQ291bnQgKz0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgICBub2RlczogW10KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGMucmVhY3Rpb25zLnRvdGFsQ291bnQgPSAxOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy5ub2Rlcy5wdXNoKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMudmlld2VySGFzUmVhY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzOS5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjb21tZW50czogY29tbWVudHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAndW5MaWtlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bkxpa2UoY29tbWVudCkgewogICAgICAgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICAgICAgICB2YXIgdXNlciA9IHRoaXMuc3RhdGUudXNlcjsKICAgICAgICAgICAgdmFyIGNvbW1lbnRzID0gdGhpcy5zdGF0ZS5jb21tZW50czsgLy8gY29uc3QgeyAgdXNlciB9ID0gdGhpcy5zdGF0ZQogICAgICAgICAgICAvLyBsZXQgaWQKICAgICAgICAgICAgLy8gY29tbWVudC5yZWFjdGlvbnMubm9kZXMuZm9yRWFjaChyID0+IHsKICAgICAgICAgICAgLy8gICBpZiAoci51c2VyLmxvZ2luID0gdXNlci5sb2dpbikgaWQgPSByLmRhdGFiYXNlSWQKICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgLy8gcmV0dXJuIGF4aW9zR2l0aHViLmRlbGV0ZShgL3JlYWN0aW9ucy8ke2lkfWAsIHsKICAgICAgICAgICAgLy8gICBoZWFkZXJzOiB7CiAgICAgICAgICAgIC8vICAgICBBdXRob3JpemF0aW9uOiBgdG9rZW4gJHt0aGlzLmFjY2Vzc1Rva2VufWAsCiAgICAgICAgICAgIC8vICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi92bmQuZ2l0aHViLnNxdWlycmVsLWdpcmwtcHJldmlldycKICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgIC8vIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygncmVzOicsIHJlcykKICAgICAgICAgICAgLy8gfSkKCiAgICAgICAgICAgIHZhciBnZXRRTCA9IGZ1bmN0aW9uIGdldFFMKGlkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6ICdSZW1vdmVSZWFjdGlvbicsCiAgICAgICAgICAgICAgICBxdWVyeTogJ1xuICAgICAgICAgIG11dGF0aW9uIFJlbW92ZVJlYWN0aW9ue1xuICAgICAgICAgICAgcmVtb3ZlUmVhY3Rpb24gKGlucHV0OntcbiAgICAgICAgICAgICAgc3ViamVjdElkOiAiJyArIGlkICsgJyIsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEhFQVJUXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICAgIHJlYWN0aW9uIHtcbiAgICAgICAgICAgICAgICBjb250ZW50XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICcKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3V0aWwuYXhpb3NHaXRodWIucG9zdCgnL2dyYXBocWwnLCBnZXRRTChjb21tZW50LmdJZCksIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnYmVhcmVyICcgKyB0aGlzLmFjY2Vzc1Rva2VuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gY29tbWVudHMubWFwKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjLmlkID09PSBjb21tZW50LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gYy5yZWFjdGlvbnMubm9kZXMuZmluZEluZGV4KGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi51c2VyLmxvZ2luID09PSB1c2VyLmxvZ2luOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAofmluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy50b3RhbENvdW50IC09IDE7CiAgICAgICAgICAgICAgICAgICAgICBjLnJlYWN0aW9ucy5ub2Rlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgYy5yZWFjdGlvbnMudmlld2VySGFzUmVhY3RlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzMTAuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBjb21tZW50czogY29tbWVudHMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaW5pdGluZycsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdGluZygpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaW5pdGluZycKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2knLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtbG9hZGVyJwogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3AnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaW5pdGluZy10ZXh0JwogICAgICAgICAgICB9LCB0aGlzLmkxOG4udCgnaW5pdCcpKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnbm9Jbml0JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBub0luaXQoKSB7CiAgICAgICAgICAgIHZhciBfc3RhdGUyID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIHVzZXIgPSBfc3RhdGUyLnVzZXIsCiAgICAgICAgICAgICAgICBpc0lzc3VlQ3JlYXRpbmcgPSBfc3RhdGUyLmlzSXNzdWVDcmVhdGluZzsKICAgICAgICAgICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgICAgIG93bmVyID0gX29wdGlvbnM1Lm93bmVyLAogICAgICAgICAgICAgICAgcmVwbyA9IF9vcHRpb25zNS5yZXBvLAogICAgICAgICAgICAgICAgYWRtaW4gPSBfb3B0aW9uczUuYWRtaW47CiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LW5vLWluaXQnLAogICAgICAgICAgICAgIGtleTogJ25vLWluaXQnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdwJywgewogICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7CiAgICAgICAgICAgICAgICBfX2h0bWw6IHRoaXMuaTE4bi50KCduby1mb3VuZC1yZWxhdGVkJywgewogICAgICAgICAgICAgICAgICBsaW5rOiAnPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tLycgKyBvd25lciArICcvJyArIHJlcG8gKyAnL2lzc3VlcyI+SXNzdWVzPC9hPicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3AnLCBudWxsLCB0aGlzLmkxOG4udCgncGxlYXNlLWNvbnRhY3QnLCB7CiAgICAgICAgICAgICAgdXNlcjogW10uY29uY2F0KGFkbWluKS5tYXAoZnVuY3Rpb24gKHUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnQCcgKyB1OwogICAgICAgICAgICAgIH0pLmpvaW4oJyAnKQogICAgICAgICAgICB9KSksIHRoaXMuaXNBZG1pbiA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdwJywgbnVsbCwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2J1dHRvbjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlSXNzdWVDcmVhdGUsCiAgICAgICAgICAgICAgaXNMb2FkaW5nOiBpc0lzc3VlQ3JlYXRpbmcsCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ2luaXQtaXNzdWUnKQogICAgICAgICAgICB9KSkgOiBudWxsLCAhdXNlciAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYnV0dG9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYnRuLWxvZ2luJywKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUxvZ2luLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdsb2dpbi13aXRoLWdpdGh1YicpCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdoYW5kbGVJbWFnZUVycm9yZWQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUltYWdlRXJyb3JlZChvYmopIHsKICAgICAgICAgICAgb2JqLnRhcmdldC5zcmMgPSAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9naXRhbGtAMS9zcmMvYXNzZXRzL2ljb24vZ2l0aHViLnN2ZyI7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaGVhZGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoZWFkZXIoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfc3RhdGUzID0gdGhpcy5zdGF0ZSwKICAgICAgICAgICAgICAgIHVzZXIgPSBfc3RhdGUzLnVzZXIsCiAgICAgICAgICAgICAgICBjb21tZW50ID0gX3N0YXRlMy5jb21tZW50LAogICAgICAgICAgICAgICAgaXNDcmVhdGluZyA9IF9zdGF0ZTMuaXNDcmVhdGluZywKICAgICAgICAgICAgICAgIHByZXZpZXdIdG1sID0gX3N0YXRlMy5wcmV2aWV3SHRtbCwKICAgICAgICAgICAgICAgIGlzUHJldmlldyA9IF9zdGF0ZTMuaXNQcmV2aWV3OwogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXInLAogICAgICAgICAgICAgIGtleTogJ2hlYWRlcicKICAgICAgICAgICAgfSwgdXNlciA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9hdmF0YXIyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXItYXZhdGFyJywKICAgICAgICAgICAgICBzcmM6IHVzZXIuYXZhdGFyX3VybCwKICAgICAgICAgICAgICBhbHQ6IHVzZXIubG9naW4sCiAgICAgICAgICAgICAgb25FcnJvcjogdGhpcy5oYW5kbGVJbWFnZUVycm9yZWQuYmluZCh0aGlzKQogICAgICAgICAgICB9KSA6IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWF2YXRhci1naXRodWInLAogICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUxvZ2luCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28tZ2l0aHViJywKICAgICAgICAgICAgICBuYW1lOiAnZ2l0aHViJwogICAgICAgICAgICB9KSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyLWNvbW1lbnQnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScsIHsKICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZih0KSB7CiAgICAgICAgICAgICAgICBfdGhpczExLmNvbW1lbnRFTCA9IHQ7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXItdGV4dGFyZWEgJyArIChpc1ByZXZpZXcgPyAnaGlkZScgOiAnJyksCiAgICAgICAgICAgICAgdmFsdWU6IGNvbW1lbnQsCiAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ29tbWVudENoYW5nZSwKICAgICAgICAgICAgICBvbkZvY3VzOiB0aGlzLmhhbmRsZUNvbW1lbnRGb2N1cywKICAgICAgICAgICAgICBvbkJsdXI6IHRoaXMuaGFuZGxlQ29tbWVudEJsdXIsCiAgICAgICAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUNvbW1lbnRLZXlEb3duLAogICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLmkxOG4udCgnbGVhdmUtYS1jb21tZW50JykKICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyLXByZXZpZXcgbWFya2Rvd24tYm9keSAnICsgKGlzUHJldmlldyA/ICcnIDogJ2hpZGUnKSwKICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgICAgICAgICAgX19odG1sOiBwcmV2aWV3SHRtbAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaGVhZGVyLWNvbnRyb2xzJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1oZWFkZXItY29udHJvbHMtdGlwJywKICAgICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly9ndWlkZXMuZ2l0aHViLmNvbS9mZWF0dXJlcy9tYXN0ZXJpbmctbWFya2Rvd24vJywKICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28tdGlwJywKICAgICAgICAgICAgICBuYW1lOiAndGlwJywKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnc3VwcG9ydC1tYXJrZG93bicpCiAgICAgICAgICAgIH0pKSwgdXNlciAmJiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYnV0dG9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgZ2V0UmVmOiB0aGlzLmdldFJlZiwKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1idG4tcHVibGljJywKICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVDb21tZW50Q3JlYXRlLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdjb21tZW50JyksCiAgICAgICAgICAgICAgaXNMb2FkaW5nOiBpc0NyZWF0aW5nCiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYnV0dG9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYnRuLXByZXZpZXcnLAogICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUNvbW1lbnRQcmV2aWV3LAogICAgICAgICAgICAgIHRleHQ6IGlzUHJldmlldyA/IHRoaXMuaTE4bi50KCdlZGl0JykgOiB0aGlzLmkxOG4udCgncHJldmlldycpIC8vIGlzTG9hZGluZz17aXNQcmV2aWV3aW5nfQoKICAgICAgICAgICAgfSksICF1c2VyICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9idXR0b24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1idG4tbG9naW4nLAogICAgICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUxvZ2luLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdsb2dpbi13aXRoLWdpdGh1YicpCiAgICAgICAgICAgIH0pKSkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NvbW1lbnRzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21tZW50cygpIHsKICAgICAgICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9zdGF0ZTQgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgdXNlciA9IF9zdGF0ZTQudXNlciwKICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gX3N0YXRlNC5jb21tZW50cywKICAgICAgICAgICAgICAgIGlzTG9hZE92ZXIgPSBfc3RhdGU0LmlzTG9hZE92ZXIsCiAgICAgICAgICAgICAgICBpc0xvYWRNb3JlID0gX3N0YXRlNC5pc0xvYWRNb3JlLAogICAgICAgICAgICAgICAgcGFnZXJEaXJlY3Rpb24gPSBfc3RhdGU0LnBhZ2VyRGlyZWN0aW9uOwogICAgICAgICAgICB2YXIgX29wdGlvbnM2ID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSBfb3B0aW9uczYubGFuZ3VhZ2UsCiAgICAgICAgICAgICAgICBmbGlwTW92ZU9wdGlvbnMgPSBfb3B0aW9uczYuZmxpcE1vdmVPcHRpb25zLAogICAgICAgICAgICAgICAgYWRtaW4gPSBfb3B0aW9uczYuYWRtaW47CiAgICAgICAgICAgIHZhciB0b3RhbENvbW1lbnRzID0gY29tbWVudHMuY29uY2F0KFtdKTsKCiAgICAgICAgICAgIGlmIChwYWdlckRpcmVjdGlvbiA9PT0gJ2xhc3QnICYmIHRoaXMuYWNjZXNzVG9rZW4pIHsKICAgICAgICAgICAgICB0b3RhbENvbW1lbnRzLnJldmVyc2UoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudHMnLAogICAgICAgICAgICAgIGtleTogJ2NvbW1lbnRzJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfcmVhY3RGbGlwTW92ZTJbImRlZmF1bHQiXSwgZmxpcE1vdmVPcHRpb25zLCB0b3RhbENvbW1lbnRzLm1hcChmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfY29tbWVudDJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgICAgY29tbWVudDogYywKICAgICAgICAgICAgICAgIGtleTogYy5pZCwKICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsCiAgICAgICAgICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UsCiAgICAgICAgICAgICAgICBjb21tZW50ZWRUZXh0OiBfdGhpczEyLmkxOG4udCgnY29tbWVudGVkJyksCiAgICAgICAgICAgICAgICBhZG1pbjogYWRtaW4sCiAgICAgICAgICAgICAgICByZXBseUNhbGxiYWNrOiBfdGhpczEyLnJlcGx5KGMpLAogICAgICAgICAgICAgICAgbGlrZUNhbGxiYWNrOiBjLnJlYWN0aW9ucyAmJiBjLnJlYWN0aW9ucy52aWV3ZXJIYXNSZWFjdGVkID8gX3RoaXMxMi51bkxpa2UuYmluZChfdGhpczEyLCBjKSA6IF90aGlzMTIubGlrZS5iaW5kKF90aGlzMTIsIGMpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pKSwgIXRvdGFsQ29tbWVudHMubGVuZ3RoICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdwJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnRzLW51bGwnCiAgICAgICAgICAgIH0sIHRoaXMuaTE4bi50KCdmaXJzdC1jb21tZW50LXBlcnNvbicpKSwgIWlzTG9hZE92ZXIgJiYgdG90YWxDb21tZW50cy5sZW5ndGggPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnRzLWNvbnRyb2xzJwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfYnV0dG9uMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtYnRuLWxvYWRtb3JlJywKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNvbW1lbnRMb2FkLAogICAgICAgICAgICAgIGlzTG9hZGluZzogaXNMb2FkTW9yZSwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnbG9hZC1tb3JlJykKICAgICAgICAgICAgfSkpIDogbnVsbCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnbWV0YScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWV0YSgpIHsKICAgICAgICAgICAgdmFyIF9zdGF0ZTUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgICAgICAgdXNlciA9IF9zdGF0ZTUudXNlciwKICAgICAgICAgICAgICAgIGlzc3VlID0gX3N0YXRlNS5pc3N1ZSwKICAgICAgICAgICAgICAgIGlzUG9wdXBWaXNpYmxlID0gX3N0YXRlNS5pc1BvcHVwVmlzaWJsZSwKICAgICAgICAgICAgICAgIHBhZ2VyRGlyZWN0aW9uID0gX3N0YXRlNS5wYWdlckRpcmVjdGlvbiwKICAgICAgICAgICAgICAgIGxvY2FsQ29tbWVudHMgPSBfc3RhdGU1LmxvY2FsQ29tbWVudHM7CiAgICAgICAgICAgIHZhciBjbnQgPSAoaXNzdWUgJiYgaXNzdWUuY29tbWVudHMpICsgbG9jYWxDb21tZW50cy5sZW5ndGg7CiAgICAgICAgICAgIHZhciBpc0Rlc2MgPSBwYWdlckRpcmVjdGlvbiA9PT0gJ2xhc3QnOwogICAgICAgICAgICB2YXIgdXBkYXRlQ291bnRDYWxsYmFjayA9IHRoaXMub3B0aW9ucy51cGRhdGVDb3VudENhbGxiYWNrOyAvLyB3aW5kb3cuR0lUQUxLX0NPTU1FTlRTX0NPVU5UID0gY250CgogICAgICAgICAgICBpZiAodXBkYXRlQ291bnRDYWxsYmFjayAmJiB7fS50b1N0cmluZy5jYWxsKHVwZGF0ZUNvdW50Q2FsbGJhY2spID09PSAnW29iamVjdCBGdW5jdGlvbl0nKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Q2FsbGJhY2soY250KTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbiBlcnJvciBvY2N1cnJlZCBleGVjdXRpbmcgdGhlIHVwZGF0ZUNvdW50Q2FsbGJhY2s6JywgZXJyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LW1ldGEnLAogICAgICAgICAgICAgIGtleTogJ21ldGEnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdzcGFuJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvdW50cycsCiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICAgICAgICAgIF9faHRtbDogdGhpcy5pMThuLnQoJ2NvdW50cycsIHsKICAgICAgICAgICAgICAgICAgY291bnRzOiAnPGEgY2xhc3M9Imd0LWxpbmsgZ3QtbGluay1jb3VudHMiIGhyZWY9IicgKyAoaXNzdWUgJiYgaXNzdWUuaHRtbF91cmwpICsgJyIgdGFyZ2V0PSJfYmxhbmsiPicgKyBjbnQgKyAnPC9hPicsCiAgICAgICAgICAgICAgICAgIHNtYXJ0X2NvdW50OiBjbnQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgaXNQb3B1cFZpc2libGUgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1wb3B1cCcKICAgICAgICAgICAgfSwgdXNlciA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9hY3Rpb24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1hY3Rpb24tc29ydGFzYycgKyAoIWlzRGVzYyA/ICcgaXMtLWFjdGl2ZScgOiAnJyksCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTb3J0KCdmaXJzdCcpLAogICAgICAgICAgICAgIHRleHQ6IHRoaXMuaTE4bi50KCdzb3J0LWFzYycpCiAgICAgICAgICAgIH0pIDogbnVsbCwgdXNlciA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9hY3Rpb24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1hY3Rpb24tc29ydGRlc2MnICsgKGlzRGVzYyA/ICcgaXMtLWFjdGl2ZScgOiAnJyksCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTb3J0KCdsYXN0JyksCiAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuLnQoJ3NvcnQtZGVzYycpCiAgICAgICAgICAgIH0pIDogbnVsbCwgdXNlciA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9hY3Rpb24yWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1hY3Rpb24tbG9nb3V0JywKICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUxvZ291dCwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmkxOG4udCgnbG9nb3V0JykKICAgICAgICAgICAgfSkgOiBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1hY3Rpb24gZ3QtYWN0aW9uLWxvZ2luJywKICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVMb2dpbgogICAgICAgICAgICB9LCB0aGlzLmkxOG4udCgnbG9naW4td2l0aC1naXRodWInKSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29weXJpZ2h0JwogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1saW5rIGd0LWxpbmstcHJvamVjdCcsCiAgICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9naXRhbGsvZ2l0YWxrJywKICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnCiAgICAgICAgICAgIH0sICdHaXRhbGsnKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtdmVyc2lvbicKICAgICAgICAgICAgfSwgX2NvbnN0LkdUX1ZFUlNJT04pKSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtdXNlcicKICAgICAgICAgICAgfSwgdXNlciA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBpc1BvcHVwVmlzaWJsZSA/ICdndC11c2VyLWlubmVyIGlzLS1wb3BpbmcnIDogJ2d0LXVzZXItaW5uZXInLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUG9wdXAKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtdXNlci1uYW1lJwogICAgICAgICAgICB9LCB1c2VyLmxvZ2luKSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1hcnJkb3duJywKICAgICAgICAgICAgICBuYW1lOiAnYXJyb3dfZG93bicKICAgICAgICAgICAgfSkpIDogX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6IGlzUG9wdXBWaXNpYmxlID8gJ2d0LXVzZXItaW5uZXIgaXMtLXBvcGluZycgOiAnZ3QtdXNlci1pbm5lcicsCiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVQb3B1cAogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC11c2VyLW5hbWUnCiAgICAgICAgICAgIH0sIHRoaXMuaTE4bi50KCdhbm9ueW1vdXMnKSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28tYXJyZG93bicsCiAgICAgICAgICAgICAgbmFtZTogJ2Fycm93X2Rvd24nCiAgICAgICAgICAgIH0pKSkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3JlbmRlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAgICAgICB2YXIgX3N0YXRlNiA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgICBpc0luaXRpbmcgPSBfc3RhdGU2LmlzSW5pdGluZywKICAgICAgICAgICAgICAgIGlzTm9Jbml0ID0gX3N0YXRlNi5pc05vSW5pdCwKICAgICAgICAgICAgICAgIGlzT2NjdXJFcnJvciA9IF9zdGF0ZTYuaXNPY2N1ckVycm9yLAogICAgICAgICAgICAgICAgZXJyb3JNc2cgPSBfc3RhdGU2LmVycm9yTXNnLAogICAgICAgICAgICAgICAgaXNJbnB1dEZvY3VzZWQgPSBfc3RhdGU2LmlzSW5wdXRGb2N1c2VkOwogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb250YWluZXInICsgKGlzSW5wdXRGb2N1c2VkID8gJyBndC1pbnB1dC1mb2N1c2VkJyA6ICcnKQogICAgICAgICAgICB9LCBpc0luaXRpbmcgJiYgdGhpcy5pbml0aW5nKCksICFpc0luaXRpbmcgJiYgKGlzTm9Jbml0ID8gW10gOiBbdGhpcy5tZXRhKCldKSwgaXNPY2N1ckVycm9yICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtZXJyb3InCiAgICAgICAgICAgIH0sIGVycm9yTXNnKSwgIWlzSW5pdGluZyAmJiAoaXNOb0luaXQgPyBbdGhpcy5ub0luaXQoKV0gOiBbdGhpcy5oZWFkZXIoKSwgdGhpcy5jb21tZW50cygpXSkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2FjY2Vzc1Rva2VuJywKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fYWNjZXNzVG9rZSB8fCB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oX2NvbnN0LkdUX0FDQ0VTU19UT0tFTik7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodG9rZW4pIHsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKF9jb25zdC5HVF9BQ0NFU1NfVE9LRU4sIHRva2VuKTsKICAgICAgICAgICAgdGhpcy5fYWNjZXNzVG9rZW4gPSB0b2tlbjsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdsb2dpbkxpbmsnLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHZhciBnaXRodWJPYXV0aFVybCA9ICdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYXV0aG9yaXplJzsKICAgICAgICAgICAgdmFyIGNsaWVudElEID0gdGhpcy5vcHRpb25zLmNsaWVudElEOwogICAgICAgICAgICB2YXIgcXVlcnkgPSB7CiAgICAgICAgICAgICAgY2xpZW50X2lkOiBjbGllbnRJRCwKICAgICAgICAgICAgICByZWRpcmVjdF91cmk6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLAogICAgICAgICAgICAgIHNjb3BlOiAncHVibGljX3JlcG8nCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiBnaXRodWJPYXV0aFVybCArICc/JyArICgwLCBfdXRpbC5xdWVyeVN0cmluZ2lmeSkocXVlcnkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2lzQWRtaW4nLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHZhciBhZG1pbiA9IHRoaXMub3B0aW9ucy5hZG1pbjsKICAgICAgICAgICAgdmFyIHVzZXIgPSB0aGlzLnN0YXRlLnVzZXI7CiAgICAgICAgICAgIHJldHVybiB1c2VyICYmIH5bXS5jb25jYXQoYWRtaW4pLm1hcChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIHJldHVybiBhLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIH0pLmluZGV4T2YodXNlci5sb2dpbi50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9XSk7CiAgICAgICAgcmV0dXJuIEdpdGFsa0NvbXBvbmVudDsKICAgICAgfShfcmVhY3QuQ29tcG9uZW50KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gR2l0YWxrQ29tcG9uZW50OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDk5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEwMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE3KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5Qcm9taXNlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEwMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCiAgICAgIHZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7IC8vIHRydWUgIC0+IFN0cmluZyNhdAogICAgICAvLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQKCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChUT19TVFJJTkcpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoYXQsIHBvcykgewogICAgICAgICAgdmFyIHMgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSk7CiAgICAgICAgICB2YXIgaSA9IHRvSW50ZWdlcihwb3MpOwogICAgICAgICAgdmFyIGwgPSBzLmxlbmd0aDsKICAgICAgICAgIHZhciBhLCBiOwogICAgICAgICAgaWYgKGkgPCAwIHx8IGkgPj0gbCkgcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkOwogICAgICAgICAgYSA9IHMuY2hhckNvZGVBdChpKTsKICAgICAgICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhIDogVE9fU1RSSU5HID8gcy5zbGljZShpLCBpICsgMikgOiAoYSAtIDB4ZDgwMCA8PCAxMCkgKyAoYiAtIDB4ZGMwMCkgKyAweDEwMDAwOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBjcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTsKCiAgICAgIHZhciBkZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7CgogICAgICB2YXIgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTsKCiAgICAgIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9OyAvLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKQoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoSXRlcmF0b3JQcm90b3R5cGUsIF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCkgewogICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwgewogICAgICAgICAgbmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KQogICAgICAgIH0pOwogICAgICAgIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBOQU1FICsgJyBJdGVyYXRvcicpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMDMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZFAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOCkgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykgewogICAgICAgIGFuT2JqZWN0KE8pOwogICAgICAgIHZhciBrZXlzID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKTsKICAgICAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7CiAgICAgICAgdmFyIGkgPSAwOwogICAgICAgIHZhciBQOwoKICAgICAgICB3aGlsZSAobGVuZ3RoID4gaSkgewogICAgICAgICAgZFAuZihPLCBQID0ga2V5c1tpKytdLCBQcm9wZXJ0aWVzW1BdKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBPOwogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEwNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YKICAgICAgLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXMKICAgICAgdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwoKICAgICAgdmFyIHRvTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7CgogICAgICB2YXIgdG9BYnNvbHV0ZUluZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoSVNfSU5DTFVERVMpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCR0aGlzLCBlbCwgZnJvbUluZGV4KSB7CiAgICAgICAgICB2YXIgTyA9IHRvSU9iamVjdCgkdGhpcyk7CiAgICAgICAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpOwogICAgICAgICAgdmFyIGluZGV4ID0gdG9BYnNvbHV0ZUluZGV4KGZyb21JbmRleCwgbGVuZ3RoKTsKICAgICAgICAgIHZhciB2YWx1ZTsgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQoKICAgICAgICAgIGlmIChJU19JTkNMVURFUyAmJiBlbCAhPSBlbCkgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSB7CiAgICAgICAgICAgIHZhbHVlID0gT1tpbmRleCsrXTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQoKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHZhbHVlKSByZXR1cm4gdHJ1ZTsgLy8gQXJyYXkjaW5kZXhPZiBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdAogICAgICAgICAgfSBlbHNlIGZvciAoOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgewogICAgICAgICAgICBpZiAoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTykgewogICAgICAgICAgICAgIGlmIChPW2luZGV4XSA9PT0gZWwpIHJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEwNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCiAgICAgIHZhciBtYXggPSBNYXRoLm1heDsKICAgICAgdmFyIG1pbiA9IE1hdGgubWluOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkgewogICAgICAgIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTsKICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTA2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGFkZFRvVW5zY29wYWJsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7CgogICAgICB2YXIgc3RlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTsKCiAgICAgIHZhciBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCiAgICAgIHZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsgLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKQogICAgICAvLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQogICAgICAvLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpCiAgICAgIC8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSkoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uIChpdGVyYXRlZCwga2luZCkgewogICAgICAgIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXQKCiAgICAgICAgdGhpcy5faSA9IDA7IC8vIG5leHQgaW5kZXgKCiAgICAgICAgdGhpcy5fayA9IGtpbmQ7IC8vIGtpbmQKICAgICAgICAvLyAyMi4xLjUuMi4xICVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBPID0gdGhpcy5fdDsKICAgICAgICB2YXIga2luZCA9IHRoaXMuX2s7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5faSsrOwoKICAgICAgICBpZiAoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7CiAgICAgICAgICByZXR1cm4gc3RlcCgxKTsKICAgICAgICB9CgogICAgICAgIGlmIChraW5kID09ICdrZXlzJykgcmV0dXJuIHN0ZXAoMCwgaW5kZXgpOwogICAgICAgIGlmIChraW5kID09ICd2YWx1ZXMnKSByZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7CiAgICAgICAgcmV0dXJuIHN0ZXAoMCwgW2luZGV4LCBPW2luZGV4XV0pOwogICAgICB9LCAndmFsdWVzJyk7IC8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNykKCiAgICAgIEl0ZXJhdG9ycy5Bcmd1bWVudHMgPSBJdGVyYXRvcnMuQXJyYXk7CiAgICAgIGFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTsKICAgICAgYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7CiAgICAgIGFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMDcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvKiBlbXB0eSAqLwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMDggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb25lLCB2YWx1ZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICBkb25lOiAhIWRvbmUKICAgICAgICB9OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMDkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgTElCUkFSWSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwoKICAgICAgdmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7CgogICAgICB2YXIgY3R4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgogICAgICB2YXIgY2xhc3NvZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwoKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICB2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7CgogICAgICB2YXIgYW5JbnN0YW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEwKTsKCiAgICAgIHZhciBmb3JPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTExKTsKCiAgICAgIHZhciBzcGVjaWVzQ29uc3RydWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCiAgICAgIHZhciB0YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkuc2V0OwoKICAgICAgdmFyIG1pY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oMTEzKSgpOwoKICAgICAgdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7CgogICAgICB2YXIgcGVyZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpOwoKICAgICAgdmFyIHVzZXJBZ2VudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTE0KTsKCiAgICAgIHZhciBwcm9taXNlUmVzb2x2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpOwoKICAgICAgdmFyIFBST01JU0UgPSAnUHJvbWlzZSc7CiAgICAgIHZhciBUeXBlRXJyb3IgPSBnbG9iYWwuVHlwZUVycm9yOwogICAgICB2YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzOwogICAgICB2YXIgdmVyc2lvbnMgPSBwcm9jZXNzICYmIHByb2Nlc3MudmVyc2lvbnM7CiAgICAgIHZhciB2OCA9IHZlcnNpb25zICYmIHZlcnNpb25zLnY4IHx8ICcnOwogICAgICB2YXIgJFByb21pc2UgPSBnbG9iYWxbUFJPTUlTRV07CiAgICAgIHZhciBpc05vZGUgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJzsKCiAgICAgIHZhciBlbXB0eSA9IGZ1bmN0aW9uIGVtcHR5KCkgewogICAgICAgIC8qIGVtcHR5ICovCiAgICAgIH07CgogICAgICB2YXIgSW50ZXJuYWwsIG5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgT3duUHJvbWlzZUNhcGFiaWxpdHksIFdyYXBwZXI7CiAgICAgIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IG5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmY7CiAgICAgIHZhciBVU0VfTkFUSVZFID0gISFmdW5jdGlvbiAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydAogICAgICAgICAgdmFyIHByb21pc2UgPSAkUHJvbWlzZS5yZXNvbHZlKDEpOwoKICAgICAgICAgIHZhciBGYWtlUHJvbWlzZSA9IChwcm9taXNlLmNvbnN0cnVjdG9yID0ge30pW19fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKV0gPSBmdW5jdGlvbiAoZXhlYykgewogICAgICAgICAgICBleGVjKGVtcHR5LCBlbXB0eSk7CiAgICAgICAgICB9OyAvLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0CgoKICAgICAgICAgIHJldHVybiAoaXNOb2RlIHx8IHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgPT0gJ2Z1bmN0aW9uJykgJiYgcHJvbWlzZS50aGVuKGVtcHR5KSBpbnN0YW5jZW9mIEZha2VQcm9taXNlIC8vIHY4IDYuNiAoTm9kZSAxMCBhbmQgQ2hyb21lIDY2KSBoYXZlIGEgYnVnIHdpdGggcmVzb2x2aW5nIGN1c3RvbSB0aGVuYWJsZXMKICAgICAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTgzMDU2NQogICAgICAgICAgLy8gd2UgY2FuJ3QgZGV0ZWN0IGl0IHN5bmNocm9ub3VzbHksIHNvIGp1c3QgY2hlY2sgdmVyc2lvbnMKICAgICAgICAgICYmIHY4LmluZGV4T2YoJzYuNicpICE9PSAwICYmIHVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUvNjYnKSA9PT0gLTE7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLyogZW1wdHkgKi8KICAgICAgICB9CiAgICAgIH0oKTsgLy8gaGVscGVycwoKICAgICAgdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbiBpc1RoZW5hYmxlKGl0KSB7CiAgICAgICAgdmFyIHRoZW47CiAgICAgICAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiB0eXBlb2YgKHRoZW4gPSBpdC50aGVuKSA9PSAnZnVuY3Rpb24nID8gdGhlbiA6IGZhbHNlOwogICAgICB9OwoKICAgICAgdmFyIG5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeShwcm9taXNlLCBpc1JlamVjdCkgewogICAgICAgIGlmIChwcm9taXNlLl9uKSByZXR1cm47CiAgICAgICAgcHJvbWlzZS5fbiA9IHRydWU7CiAgICAgICAgdmFyIGNoYWluID0gcHJvbWlzZS5fYzsKICAgICAgICBtaWNyb3Rhc2soZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdjsKICAgICAgICAgIHZhciBvayA9IHByb21pc2UuX3MgPT0gMTsKICAgICAgICAgIHZhciBpID0gMDsKCiAgICAgICAgICB2YXIgcnVuID0gZnVuY3Rpb24gcnVuKHJlYWN0aW9uKSB7CiAgICAgICAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWw7CiAgICAgICAgICAgIHZhciByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZTsKICAgICAgICAgICAgdmFyIHJlamVjdCA9IHJlYWN0aW9uLnJlamVjdDsKICAgICAgICAgICAgdmFyIGRvbWFpbiA9IHJlYWN0aW9uLmRvbWFpbjsKICAgICAgICAgICAgdmFyIHJlc3VsdCwgdGhlbiwgZXhpdGVkOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoaGFuZGxlcikgewogICAgICAgICAgICAgICAgaWYgKCFvaykgewogICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZS5faCA9PSAyKSBvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTsKICAgICAgICAgICAgICAgICAgcHJvbWlzZS5faCA9IDE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIgPT09IHRydWUpIHJlc3VsdCA9IHZhbHVlO2Vsc2UgewogICAgICAgICAgICAgICAgICBpZiAoZG9tYWluKSBkb21haW4uZW50ZXIoKTsKICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7IC8vIG1heSB0aHJvdwoKICAgICAgICAgICAgICAgICAgaWYgKGRvbWFpbikgewogICAgICAgICAgICAgICAgICAgIGRvbWFpbi5leGl0KCk7CiAgICAgICAgICAgICAgICAgICAgZXhpdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHJlYWN0aW9uLnByb21pc2UpIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KFR5cGVFcnJvcignUHJvbWlzZS1jaGFpbiBjeWNsZScpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhlbiA9IGlzVGhlbmFibGUocmVzdWx0KSkgewogICAgICAgICAgICAgICAgICB0aGVuLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTsKICAgICAgICAgICAgICB9IGVsc2UgcmVqZWN0KHZhbHVlKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGlmIChkb21haW4gJiYgIWV4aXRlZCkgZG9tYWluLmV4aXQoKTsKICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgd2hpbGUgKGNoYWluLmxlbmd0aCA+IGkpIHsKICAgICAgICAgICAgcnVuKGNoYWluW2krK10pOwogICAgICAgICAgfSAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaAoKCiAgICAgICAgICBwcm9taXNlLl9jID0gW107CiAgICAgICAgICBwcm9taXNlLl9uID0gZmFsc2U7CiAgICAgICAgICBpZiAoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpIG9uVW5oYW5kbGVkKHByb21pc2UpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIG9uVW5oYW5kbGVkID0gZnVuY3Rpb24gb25VbmhhbmRsZWQocHJvbWlzZSkgewogICAgICAgIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3Y7CiAgICAgICAgICB2YXIgdW5oYW5kbGVkID0gaXNVbmhhbmRsZWQocHJvbWlzZSk7CiAgICAgICAgICB2YXIgcmVzdWx0LCBoYW5kbGVyLCBjb25zb2xlOwoKICAgICAgICAgIGlmICh1bmhhbmRsZWQpIHsKICAgICAgICAgICAgcmVzdWx0ID0gcGVyZm9ybShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKGlzTm9kZSkgewogICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVyKHsKICAgICAgICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSwKICAgICAgICAgICAgICAgICAgcmVhc29uOiB2YWx1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICgoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsgLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQKCiAgICAgICAgICAgIHByb21pc2UuX2ggPSBpc05vZGUgfHwgaXNVbmhhbmRsZWQocHJvbWlzZSkgPyAyIDogMTsKICAgICAgICAgIH0KCiAgICAgICAgICBwcm9taXNlLl9hID0gdW5kZWZpbmVkOwogICAgICAgICAgaWYgKHVuaGFuZGxlZCAmJiByZXN1bHQuZSkgdGhyb3cgcmVzdWx0LnY7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbiBpc1VuaGFuZGxlZChwcm9taXNlKSB7CiAgICAgICAgcmV0dXJuIHByb21pc2UuX2ggIT09IDEgJiYgKHByb21pc2UuX2EgfHwgcHJvbWlzZS5fYykubGVuZ3RoID09PSAwOwogICAgICB9OwoKICAgICAgdmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24gb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSkgewogICAgICAgIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBoYW5kbGVyOwoKICAgICAgICAgIGlmIChpc05vZGUpIHsKICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KCdyZWplY3Rpb25IYW5kbGVkJywgcHJvbWlzZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPSBnbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKSB7CiAgICAgICAgICAgIGhhbmRsZXIoewogICAgICAgICAgICAgIHByb21pc2U6IHByb21pc2UsCiAgICAgICAgICAgICAgcmVhc29uOiBwcm9taXNlLl92CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyICRyZWplY3QgPSBmdW5jdGlvbiAkcmVqZWN0KHZhbHVlKSB7CiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzOwogICAgICAgIGlmIChwcm9taXNlLl9kKSByZXR1cm47CiAgICAgICAgcHJvbWlzZS5fZCA9IHRydWU7CiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwCgogICAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTsKICAgICAgICBwcm9taXNlLl9zID0gMjsKICAgICAgICBpZiAoIXByb21pc2UuX2EpIHByb21pc2UuX2EgPSBwcm9taXNlLl9jLnNsaWNlKCk7CiAgICAgICAgbm90aWZ5KHByb21pc2UsIHRydWUpOwogICAgICB9OwoKICAgICAgdmFyICRyZXNvbHZlID0gZnVuY3Rpb24gJHJlc29sdmUodmFsdWUpIHsKICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7CiAgICAgICAgdmFyIHRoZW47CiAgICAgICAgaWYgKHByb21pc2UuX2QpIHJldHVybjsKICAgICAgICBwcm9taXNlLl9kID0gdHJ1ZTsKICAgICAgICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkgdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOwoKICAgICAgICAgIGlmICh0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpIHsKICAgICAgICAgICAgbWljcm90YXNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHsKICAgICAgICAgICAgICAgIF93OiBwcm9taXNlLAogICAgICAgICAgICAgICAgX2Q6IGZhbHNlCiAgICAgICAgICAgICAgfTsgLy8gd3JhcAoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICRyZWplY3QuY2FsbCh3cmFwcGVyLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlOwogICAgICAgICAgICBwcm9taXNlLl9zID0gMTsKICAgICAgICAgICAgbm90aWZ5KHByb21pc2UsIGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAkcmVqZWN0LmNhbGwoewogICAgICAgICAgICBfdzogcHJvbWlzZSwKICAgICAgICAgICAgX2Q6IGZhbHNlCiAgICAgICAgICB9LCBlKTsgLy8gd3JhcAogICAgICAgIH0KICAgICAgfTsgLy8gY29uc3RydWN0b3IgcG9seWZpbGwKCgogICAgICBpZiAoIVVTRV9OQVRJVkUpIHsKICAgICAgICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQogICAgICAgICRQcm9taXNlID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcikgewogICAgICAgICAgYW5JbnN0YW5jZSh0aGlzLCAkUHJvbWlzZSwgUFJPTUlTRSwgJ19oJyk7CiAgICAgICAgICBhRnVuY3Rpb24oZXhlY3V0b3IpOwogICAgICAgICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBleGVjdXRvcihjdHgoJHJlc29sdmUsIHRoaXMsIDEpLCBjdHgoJHJlamVjdCwgdGhpcywgMSkpOwogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICRyZWplY3QuY2FsbCh0aGlzLCBlcnIpOwogICAgICAgICAgfQogICAgICAgIH07IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwoKCiAgICAgICAgSW50ZXJuYWwgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKSB7CiAgICAgICAgICB0aGlzLl9jID0gW107IC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9ucwoKICAgICAgICAgIHRoaXMuX2EgPSB1bmRlZmluZWQ7IC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCgogICAgICAgICAgdGhpcy5fcyA9IDA7IC8vIDwtIHN0YXRlCgogICAgICAgICAgdGhpcy5fZCA9IGZhbHNlOyAvLyA8LSBkb25lCgogICAgICAgICAgdGhpcy5fdiA9IHVuZGVmaW5lZDsgLy8gPC0gdmFsdWUKCiAgICAgICAgICB0aGlzLl9oID0gMDsgLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQKCiAgICAgICAgICB0aGlzLl9uID0gZmFsc2U7IC8vIDwtIG5vdGlmeQogICAgICAgIH07CgogICAgICAgIEludGVybmFsLnByb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE1KSgkUHJvbWlzZS5wcm90b3R5cGUsIHsKICAgICAgICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCiAgICAgICAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7CiAgICAgICAgICAgIHZhciByZWFjdGlvbiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpOwogICAgICAgICAgICByZWFjdGlvbi5vayA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiB0cnVlOwogICAgICAgICAgICByZWFjdGlvbi5mYWlsID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT0gJ2Z1bmN0aW9uJyAmJiBvblJlamVjdGVkOwogICAgICAgICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDsKCiAgICAgICAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7CgogICAgICAgICAgICBpZiAodGhpcy5fYSkgdGhpcy5fYS5wdXNoKHJlYWN0aW9uKTsKICAgICAgICAgICAgaWYgKHRoaXMuX3MpIG5vdGlmeSh0aGlzLCBmYWxzZSk7CiAgICAgICAgICAgIHJldHVybiByZWFjdGlvbi5wcm9taXNlOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCiAgICAgICAgICAnY2F0Y2gnOiBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3RlZCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIE93blByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24gT3duUHJvbWlzZUNhcGFiaWxpdHkoKSB7CiAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBJbnRlcm5hbCgpOwogICAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTsKICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7CiAgICAgICAgICB0aGlzLnJlamVjdCA9IGN0eCgkcmVqZWN0LCBwcm9taXNlLCAxKTsKICAgICAgICB9OwoKICAgICAgICBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZS5mID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbiBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKSB7CiAgICAgICAgICByZXR1cm4gQyA9PT0gJFByb21pc2UgfHwgQyA9PT0gV3JhcHBlciA/IG5ldyBPd25Qcm9taXNlQ2FwYWJpbGl0eShDKSA6IG5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKTsKICAgICAgICB9OwogICAgICB9CgogICAgICAkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7CiAgICAgICAgUHJvbWlzZTogJFByb21pc2UKICAgICAgfSk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSgkUHJvbWlzZSwgUFJPTUlTRSk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNikoUFJPTUlTRSk7CgogICAgICBXcmFwcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVtQUk9NSVNFXTsgLy8gc3RhdGljcwoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgUFJPTUlTRSwgewogICAgICAgIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocikgewogICAgICAgICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKTsKICAgICAgICAgIHZhciAkJHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgICAgICAgJCRyZWplY3Qocik7CiAgICAgICAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKExJQlJBUlkgfHwgIVVTRV9OQVRJVkUpLCBQUk9NSVNFLCB7CiAgICAgICAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCiAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KSB7CiAgICAgICAgICByZXR1cm4gcHJvbWlzZVJlc29sdmUoTElCUkFSWSAmJiB0aGlzID09PSBXcmFwcGVyID8gJFByb21pc2UgOiB0aGlzLCB4KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKShmdW5jdGlvbiAoaXRlcikgewogICAgICAgICRQcm9taXNlLmFsbChpdGVyKVsnY2F0Y2gnXShlbXB0eSk7CiAgICAgIH0pKSwgUFJPTUlTRSwgewogICAgICAgIC8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKQogICAgICAgIGFsbDogZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7CiAgICAgICAgICB2YXIgQyA9IHRoaXM7CiAgICAgICAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpOwogICAgICAgICAgdmFyIHJlc29sdmUgPSBjYXBhYmlsaXR5LnJlc29sdmU7CiAgICAgICAgICB2YXIgcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gcGVyZm9ybShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTsKICAgICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IDE7CiAgICAgICAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24gKHByb21pc2UpIHsKICAgICAgICAgICAgICB2YXIgJGluZGV4ID0gaW5kZXgrKzsKICAgICAgICAgICAgICB2YXIgYWxyZWFkeUNhbGxlZCA9IGZhbHNlOwogICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHVuZGVmaW5lZCk7CiAgICAgICAgICAgICAgcmVtYWluaW5nKys7CiAgICAgICAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAoYWxyZWFkeUNhbGxlZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgYWxyZWFkeUNhbGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB2YWx1ZXNbJGluZGV4XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgICAgICAgICAgIH0sIHJlamVjdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyZXN1bHQuZSkgcmVqZWN0KHJlc3VsdC52KTsKICAgICAgICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgICAgICAgfSwKICAgICAgICAvLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpCiAgICAgICAgcmFjZTogZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkgewogICAgICAgICAgdmFyIEMgPSB0aGlzOwogICAgICAgICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKTsKICAgICAgICAgIHZhciByZWplY3QgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgICAgICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbiAocHJvbWlzZSkgewogICAgICAgICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGNhcGFiaWxpdHkucmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyZXN1bHQuZSkgcmVqZWN0KHJlc3VsdC52KTsKICAgICAgICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCwgQ29uc3RydWN0b3IsIG5hbWUsIGZvcmJpZGRlbkZpZWxkKSB7CiAgICAgICAgaWYgKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkgewogICAgICAgICAgdGhyb3cgVHlwZUVycm9yKG5hbWUgKyAnOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEnKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpdDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTExICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGN0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKICAgICAgdmFyIGNhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTsKCiAgICAgIHZhciBpc0FycmF5SXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpOwoKICAgICAgdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgICAgIHZhciB0b0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwoKICAgICAgdmFyIGdldEl0ZXJGbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpOwoKICAgICAgdmFyIEJSRUFLID0ge307CiAgICAgIHZhciBSRVRVUk4gPSB7fTsKCiAgICAgIHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0LCBJVEVSQVRPUikgewogICAgICAgIHZhciBpdGVyRm4gPSBJVEVSQVRPUiA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBpdGVyYWJsZTsKICAgICAgICB9IDogZ2V0SXRlckZuKGl0ZXJhYmxlKTsKICAgICAgICB2YXIgZiA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKTsKICAgICAgICB2YXIgaW5kZXggPSAwOwogICAgICAgIHZhciBsZW5ndGgsIHN0ZXAsIGl0ZXJhdG9yLCByZXN1bHQ7CiAgICAgICAgaWYgKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJykgdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7IC8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcgoKICAgICAgICBpZiAoaXNBcnJheUl0ZXIoaXRlckZuKSkgZm9yIChsZW5ndGggPSB0b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgewogICAgICAgICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pOwogICAgICAgICAgaWYgKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIGZvciAoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTspIHsKICAgICAgICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpOwogICAgICAgICAgaWYgKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZXhwb3J0cy5CUkVBSyA9IEJSRUFLOwogICAgICBleHBvcnRzLlJFVFVSTiA9IFJFVFVSTjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMTIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICAvLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzUKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZm4sIGFyZ3MsIHRoYXQpIHsKICAgICAgICB2YXIgdW4gPSB0aGF0ID09PSB1bmRlZmluZWQ7CgogICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIHVuID8gZm4oKSA6IGZuLmNhbGwodGhhdCk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gdW4gPyBmbihhcmdzWzBdKSA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdKSA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKSA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKSA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJncyk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDExMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIG1hY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjApLnNldDsKCiAgICAgIHZhciBPYnNlcnZlciA9IGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyOwogICAgICB2YXIgcHJvY2VzcyA9IGdsb2JhbC5wcm9jZXNzOwogICAgICB2YXIgUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlOwogICAgICB2YXIgaXNOb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGhlYWQsIGxhc3QsIG5vdGlmeTsKCiAgICAgICAgdmFyIGZsdXNoID0gZnVuY3Rpb24gZmx1c2goKSB7CiAgICAgICAgICB2YXIgcGFyZW50LCBmbjsKICAgICAgICAgIGlmIChpc05vZGUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSkgcGFyZW50LmV4aXQoKTsKCiAgICAgICAgICB3aGlsZSAoaGVhZCkgewogICAgICAgICAgICBmbiA9IGhlYWQuZm47CiAgICAgICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZuKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBpZiAoaGVhZCkgbm90aWZ5KCk7ZWxzZSBsYXN0ID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBsYXN0ID0gdW5kZWZpbmVkOwogICAgICAgICAgaWYgKHBhcmVudCkgcGFyZW50LmVudGVyKCk7CiAgICAgICAgfTsgLy8gTm9kZS5qcwoKCiAgICAgICAgaWYgKGlzTm9kZSkgewogICAgICAgICAgbm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KCkgewogICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTsKICAgICAgICAgIH07IC8vIGJyb3dzZXJzIHdpdGggTXV0YXRpb25PYnNlcnZlciwgZXhjZXB0IGlPUyBTYWZhcmkgLSBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMzM5CgogICAgICAgIH0gZWxzZSBpZiAoT2JzZXJ2ZXIgJiYgIShnbG9iYWwubmF2aWdhdG9yICYmIGdsb2JhbC5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSkpIHsKICAgICAgICAgIHZhciB0b2dnbGUgPSB0cnVlOwogICAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7CiAgICAgICAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwgewogICAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlCiAgICAgICAgICB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKCiAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkoKSB7CiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7CiAgICAgICAgICB9OyAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZQoKICAgICAgICB9IGVsc2UgaWYgKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKSB7CiAgICAgICAgICAvLyBQcm9taXNlLnJlc29sdmUgd2l0aG91dCBhbiBhcmd1bWVudCB0aHJvd3MgYW4gZXJyb3IgaW4gTEcgV2ViT1MgMgogICAgICAgICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTsKCiAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkoKSB7CiAgICAgICAgICAgIHByb21pc2UudGhlbihmbHVzaCk7CiAgICAgICAgICB9OyAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOgogICAgICAgICAgLy8gLSBzZXRJbW1lZGlhdGUKICAgICAgICAgIC8vIC0gTWVzc2FnZUNoYW5uZWwKICAgICAgICAgIC8vIC0gd2luZG93LnBvc3RNZXNzYWcKICAgICAgICAgIC8vIC0gb25yZWFkeXN0YXRlY2hhbmdlCiAgICAgICAgICAvLyAtIHNldFRpbWVvdXQKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSgpIHsKICAgICAgICAgICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKQogICAgICAgICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTsKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICB2YXIgdGFzayA9IHsKICAgICAgICAgICAgZm46IGZuLAogICAgICAgICAgICBuZXh0OiB1bmRlZmluZWQKICAgICAgICAgIH07CiAgICAgICAgICBpZiAobGFzdCkgbGFzdC5uZXh0ID0gdGFzazsKCiAgICAgICAgICBpZiAoIWhlYWQpIHsKICAgICAgICAgICAgaGVhZCA9IHRhc2s7CiAgICAgICAgICAgIG5vdGlmeSgpOwogICAgICAgICAgfQoKICAgICAgICAgIGxhc3QgPSB0YXNrOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDExNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIG5hdmlnYXRvciA9IGdsb2JhbC5uYXZpZ2F0b3I7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gbmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQgfHwgJyc7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTE1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldCwgc3JjLCBzYWZlKSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIHNyYykgewogICAgICAgICAgaWYgKHNhZmUgJiYgdGFyZ2V0W2tleV0pIHRhcmdldFtrZXldID0gc3JjW2tleV07ZWxzZSBoaWRlKHRhcmdldCwga2V5LCBzcmNba2V5XSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxMTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCiAgICAgIHZhciBkUCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CgogICAgICB2YXIgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKICAgICAgdmFyIFNQRUNJRVMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdzcGVjaWVzJyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChLRVkpIHsKICAgICAgICB2YXIgQyA9IHR5cGVvZiBjb3JlW0tFWV0gPT0gJ2Z1bmN0aW9uJyA/IGNvcmVbS0VZXSA6IGdsb2JhbFtLRVldOwogICAgICAgIGlmIChERVNDUklQVE9SUyAmJiBDICYmICFDW1NQRUNJRVNdKSBkUC5mKEMsIFNQRUNJRVMsIHsKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTE3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLWZpbmFsbHkKCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciBjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCiAgICAgIHZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKICAgICAgdmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOwoKICAgICAgdmFyIHByb21pc2VSZXNvbHZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7CgogICAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuUiwgJ1Byb21pc2UnLCB7CiAgICAgICAgJ2ZpbmFsbHknOiBmdW5jdGlvbiBfZmluYWxseShvbkZpbmFsbHkpIHsKICAgICAgICAgIHZhciBDID0gc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsIGNvcmUuUHJvbWlzZSB8fCBnbG9iYWwuUHJvbWlzZSk7CiAgICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiBvbkZpbmFsbHkgPT0gJ2Z1bmN0aW9uJzsKICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4oaXNGdW5jdGlvbiA/IGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZShDLCBvbkZpbmFsbHkoKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHg7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSA6IG9uRmluYWxseSwgaXNGdW5jdGlvbiA/IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZShDLCBvbkZpbmFsbHkoKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IDogb25GaW5hbGx5KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDExOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS10cnkKCiAgICAgIHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKCiAgICAgIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpOwoKICAgICAgdmFyIHBlcmZvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTsKCiAgICAgICRleHBvcnQoJGV4cG9ydC5TLCAnUHJvbWlzZScsIHsKICAgICAgICAndHJ5JzogZnVuY3Rpb24gX3RyeShjYWxsYmFja2ZuKSB7CiAgICAgICAgICB2YXIgcHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eS5mKHRoaXMpOwogICAgICAgICAgdmFyIHJlc3VsdCA9IHBlcmZvcm0oY2FsbGJhY2tmbik7CiAgICAgICAgICAocmVzdWx0LmUgPyBwcm9taXNlQ2FwYWJpbGl0eS5yZWplY3QgOiBwcm9taXNlQ2FwYWJpbGl0eS5yZXNvbHZlKShyZXN1bHQudik7CiAgICAgICAgICByZXR1cm4gcHJvbWlzZUNhcGFiaWxpdHkucHJvbWlzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDExOSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxMjApLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmFzc2lnbjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKQogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHsKICAgICAgICBhc3NpZ246IF9fd2VicGFja19yZXF1aXJlX18oMTIyKQogICAgICB9KTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7IC8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLikKCiAgICAgIHZhciBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7CgogICAgICB2YXIgZ2V0S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwoKICAgICAgdmFyIGdPUFMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTsKCiAgICAgIHZhciBwSUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTsKCiAgICAgIHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoKICAgICAgdmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKCiAgICAgIHZhciAkYXNzaWduID0gT2JqZWN0LmFzc2lnbjsgLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpCgogICAgICBtb2R1bGUuZXhwb3J0cyA9ICEkYXNzaWduIHx8IF9fd2VicGFja19yZXF1aXJlX18oMTQpKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgQSA9IHt9OwogICAgICAgIHZhciBCID0ge307IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgoKICAgICAgICB2YXIgUyA9IFN5bWJvbCgpOwogICAgICAgIHZhciBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JzsKICAgICAgICBBW1NdID0gNzsKICAgICAgICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7CiAgICAgICAgICBCW2tdID0gazsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gJGFzc2lnbih7fSwgQSlbU10gIT0gNyB8fCBPYmplY3Qua2V5cygkYXNzaWduKHt9LCBCKSkuam9pbignJykgIT0gSzsKICAgICAgfSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgICAgdmFyIFQgPSB0b09iamVjdCh0YXJnZXQpOwogICAgICAgIHZhciBhTGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgICB2YXIgaW5kZXggPSAxOwogICAgICAgIHZhciBnZXRTeW1ib2xzID0gZ09QUy5mOwogICAgICAgIHZhciBpc0VudW0gPSBwSUUuZjsKCiAgICAgICAgd2hpbGUgKGFMZW4gPiBpbmRleCkgewogICAgICAgICAgdmFyIFMgPSBJT2JqZWN0KGFyZ3VtZW50c1tpbmRleCsrXSk7CiAgICAgICAgICB2YXIga2V5cyA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUyk7CiAgICAgICAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7CiAgICAgICAgICB2YXIgaiA9IDA7CiAgICAgICAgICB2YXIga2V5OwoKICAgICAgICAgIHdoaWxlIChsZW5ndGggPiBqKSB7CiAgICAgICAgICAgIGtleSA9IGtleXNbaisrXTsKICAgICAgICAgICAgaWYgKCFERVNDUklQVE9SUyB8fCBpc0VudW0uY2FsbChTLCBrZXkpKSBUW2tleV0gPSBTW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gVDsKICAgICAgfSA6ICRhc3NpZ247CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTIzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5nZXRQcm90b3R5cGVPZjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKICAgICAgdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgogICAgICB2YXIgJGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKGl0KSB7CiAgICAgICAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEyNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjcpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KS5mKCdpdGVyYXRvcicpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEyNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxMjggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTM0KTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTM1KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5TeW1ib2w7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTI5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOyAvLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltCgogICAgICB2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCiAgICAgIHZhciBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTsKCiAgICAgIHZhciBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7CgogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgcmVkZWZpbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTsKCiAgICAgIHZhciBNRVRBID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApLktFWTsKCiAgICAgIHZhciAkZmFpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCiAgICAgIHZhciBzaGFyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKCiAgICAgIHZhciBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwoKICAgICAgdmFyIHVpZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpOwoKICAgICAgdmFyIHdrcyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7CgogICAgICB2YXIgd2tzRXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7CgogICAgICB2YXIgd2tzRGVmaW5lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7CgogICAgICB2YXIgZW51bUtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMSk7CgogICAgICB2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKTsKCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoKICAgICAgdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwoKICAgICAgdmFyIHRvUHJpbWl0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7CgogICAgICB2YXIgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwoKICAgICAgdmFyIF9jcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTsKCiAgICAgIHZhciBnT1BORXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzMpOwoKICAgICAgdmFyICRHT1BEID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7CgogICAgICB2YXIgJEdPUFMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTsKCiAgICAgIHZhciAkRFAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKICAgICAgdmFyICRrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CgogICAgICB2YXIgZ09QRCA9ICRHT1BELmY7CiAgICAgIHZhciBkUCA9ICREUC5mOwogICAgICB2YXIgZ09QTiA9IGdPUE5FeHQuZjsKICAgICAgdmFyICRTeW1ib2wgPSBnbG9iYWwuU3ltYm9sOwogICAgICB2YXIgJEpTT04gPSBnbG9iYWwuSlNPTjsKCiAgICAgIHZhciBfc3RyaW5naWZ5ID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5OwoKICAgICAgdmFyIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnOwogICAgICB2YXIgSElEREVOID0gd2tzKCdfaGlkZGVuJyk7CiAgICAgIHZhciBUT19QUklNSVRJVkUgPSB3a3MoJ3RvUHJpbWl0aXZlJyk7CiAgICAgIHZhciBpc0VudW0gPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKICAgICAgdmFyIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKTsKICAgICAgdmFyIEFsbFN5bWJvbHMgPSBzaGFyZWQoJ3N5bWJvbHMnKTsKICAgICAgdmFyIE9QU3ltYm9scyA9IHNoYXJlZCgnb3Atc3ltYm9scycpOwogICAgICB2YXIgT2JqZWN0UHJvdG8gPSBPYmplY3RbUFJPVE9UWVBFXTsKICAgICAgdmFyIFVTRV9OQVRJVkUgPSB0eXBlb2YgJFN5bWJvbCA9PSAnZnVuY3Rpb24nICYmICEhJEdPUFMuZjsKICAgICAgdmFyIFFPYmplY3QgPSBnbG9iYWwuUU9iamVjdDsgLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczCgogICAgICB2YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDsgLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3CgogICAgICB2YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9jcmVhdGUoZFAoe30sICdhJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiBkUCh0aGlzLCAnYScsIHsKICAgICAgICAgICAgICB2YWx1ZTogNwogICAgICAgICAgICB9KS5hOwogICAgICAgICAgfQogICAgICAgIH0pKS5hICE9IDc7CiAgICAgIH0pID8gZnVuY3Rpb24gKGl0LCBrZXksIEQpIHsKICAgICAgICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTsKICAgICAgICBpZiAocHJvdG9EZXNjKSBkZWxldGUgT2JqZWN0UHJvdG9ba2V5XTsKICAgICAgICBkUChpdCwga2V5LCBEKTsKICAgICAgICBpZiAocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bykgZFAoT2JqZWN0UHJvdG8sIGtleSwgcHJvdG9EZXNjKTsKICAgICAgfSA6IGRQOwoKICAgICAgdmFyIHdyYXAgPSBmdW5jdGlvbiB3cmFwKHRhZykgewogICAgICAgIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7CgogICAgICAgIHN5bS5fayA9IHRhZzsKICAgICAgICByZXR1cm4gc3ltOwogICAgICB9OwoKICAgICAgdmFyIGlzU3ltYm9sID0gVVNFX05BVElWRSAmJiBfdHlwZW9mNCgkU3ltYm9sLml0ZXJhdG9yKSA9PSAnc3ltYm9sJyA/IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHJldHVybiBfdHlwZW9mNChpdCkgPT0gJ3N5bWJvbCc7CiAgICAgIH0gOiBmdW5jdGlvbiAoaXQpIHsKICAgICAgICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sOwogICAgICB9OwoKICAgICAgdmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpIHsKICAgICAgICBpZiAoaXQgPT09IE9iamVjdFByb3RvKSAkZGVmaW5lUHJvcGVydHkoT1BTeW1ib2xzLCBrZXksIEQpOwogICAgICAgIGFuT2JqZWN0KGl0KTsKICAgICAgICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOwogICAgICAgIGFuT2JqZWN0KEQpOwoKICAgICAgICBpZiAoaGFzKEFsbFN5bWJvbHMsIGtleSkpIHsKICAgICAgICAgIGlmICghRC5lbnVtZXJhYmxlKSB7CiAgICAgICAgICAgIGlmICghaGFzKGl0LCBISURERU4pKSBkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7CiAgICAgICAgICAgIGl0W0hJRERFTl1ba2V5XSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkgaXRbSElEREVOXVtrZXldID0gZmFsc2U7CiAgICAgICAgICAgIEQgPSBfY3JlYXRlKEQsIHsKICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBjcmVhdGVEZXNjKDAsIGZhbHNlKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBkUChpdCwga2V5LCBEKTsKICAgICAgfTsKCiAgICAgIHZhciAkZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoaXQsIFApIHsKICAgICAgICBhbk9iamVjdChpdCk7CiAgICAgICAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKTsKICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgdmFyIGwgPSBrZXlzLmxlbmd0aDsKICAgICAgICB2YXIga2V5OwoKICAgICAgICB3aGlsZSAobCA+IGkpIHsKICAgICAgICAgICRkZWZpbmVQcm9wZXJ0eShpdCwga2V5ID0ga2V5c1tpKytdLCBQW2tleV0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGl0OwogICAgICB9OwoKICAgICAgdmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaXQsIFApIHsKICAgICAgICByZXR1cm4gUCA9PT0gdW5kZWZpbmVkID8gX2NyZWF0ZShpdCkgOiAkZGVmaW5lUHJvcGVydGllcyhfY3JlYXRlKGl0KSwgUCk7CiAgICAgIH07CgogICAgICB2YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoa2V5KSB7CiAgICAgICAgdmFyIEUgPSBpc0VudW0uY2FsbCh0aGlzLCBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpKTsKICAgICAgICBpZiAodGhpcyA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gRSB8fCAhaGFzKHRoaXMsIGtleSkgfHwgIWhhcyhBbGxTeW1ib2xzLCBrZXkpIHx8IGhhcyh0aGlzLCBISURERU4pICYmIHRoaXNbSElEREVOXVtrZXldID8gRSA6IHRydWU7CiAgICAgIH07CgogICAgICB2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KSB7CiAgICAgICAgaXQgPSB0b0lPYmplY3QoaXQpOwogICAgICAgIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgICAgICAgaWYgKGl0ID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSkgcmV0dXJuOwogICAgICAgIHZhciBEID0gZ09QRChpdCwga2V5KTsKICAgICAgICBpZiAoRCAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pKSBELmVudW1lcmFibGUgPSB0cnVlOwogICAgICAgIHJldHVybiBEOwogICAgICB9OwoKICAgICAgdmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCkgewogICAgICAgIHZhciBuYW1lcyA9IGdPUE4odG9JT2JqZWN0KGl0KSk7CiAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIga2V5OwoKICAgICAgICB3aGlsZSAobmFtZXMubGVuZ3RoID4gaSkgewogICAgICAgICAgaWYgKCFoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYga2V5ICE9IEhJRERFTiAmJiBrZXkgIT0gTUVUQSkgcmVzdWx0LnB1c2goa2V5KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CgogICAgICB2YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhpdCkgewogICAgICAgIHZhciBJU19PUCA9IGl0ID09PSBPYmplY3RQcm90bzsKICAgICAgICB2YXIgbmFtZXMgPSBnT1BOKElTX09QID8gT1BTeW1ib2xzIDogdG9JT2JqZWN0KGl0KSk7CiAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIga2V5OwoKICAgICAgICB3aGlsZSAobmFtZXMubGVuZ3RoID4gaSkgewogICAgICAgICAgaWYgKGhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiAoSVNfT1AgPyBoYXMoT2JqZWN0UHJvdG8sIGtleSkgOiB0cnVlKSkgcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07IC8vIDE5LjQuMS4xIFN5bWJvbChbZGVzY3JpcHRpb25dKQoKCiAgICAgIGlmICghVVNFX05BVElWRSkgewogICAgICAgICRTeW1ib2wgPSBmdW5jdGlvbiBfU3ltYm9sMigpIHsKICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCkgdGhyb3cgVHlwZUVycm9yKCdTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhJyk7CiAgICAgICAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsKCiAgICAgICAgICB2YXIgJHNldCA9IGZ1bmN0aW9uICRzZXQodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHRoaXMgPT09IE9iamVjdFByb3RvKSAkc2V0LmNhbGwoT1BTeW1ib2xzLCB2YWx1ZSk7CiAgICAgICAgICAgIGlmIChoYXModGhpcywgSElEREVOKSAmJiBoYXModGhpc1tISURERU5dLCB0YWcpKSB0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlOwogICAgICAgICAgICBzZXRTeW1ib2xEZXNjKHRoaXMsIHRhZywgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAoREVTQ1JJUFRPUlMgJiYgc2V0dGVyKSBzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLCB0YWcsIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBzZXQ6ICRzZXQKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHdyYXAodGFnKTsKICAgICAgICB9OwoKICAgICAgICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX2s7CiAgICAgICAgfSk7CiAgICAgICAgJEdPUEQuZiA9ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgICAgICAgJERQLmYgPSAkZGVmaW5lUHJvcGVydHk7CiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2OCkuZiA9IGdPUE5FeHQuZiA9ICRnZXRPd25Qcm9wZXJ0eU5hbWVzOwogICAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjgpLmYgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7CiAgICAgICAgJEdPUFMuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CgogICAgICAgIGlmIChERVNDUklQVE9SUyAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyMSkpIHsKICAgICAgICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgd2tzRXh0LmYgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgcmV0dXJuIHdyYXAod2tzKG5hbWUpKTsKICAgICAgICB9OwogICAgICB9CgogICAgICAkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7CiAgICAgICAgU3ltYm9sOiAkU3ltYm9sCiAgICAgIH0pOwoKICAgICAgZm9yICh2YXIgZXM2U3ltYm9scyA9IC8vIDE5LjQuMi4yLCAxOS40LjIuMywgMTkuNC4yLjQsIDE5LjQuMi42LCAxOS40LjIuOCwgMTkuNC4yLjksIDE5LjQuMi4xMCwgMTkuNC4yLjExLCAxOS40LjIuMTIsIDE5LjQuMi4xMywgMTkuNC4yLjE0CiAgICAgICdoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcycuc3BsaXQoJywnKSwgaiA9IDA7IGVzNlN5bWJvbHMubGVuZ3RoID4gajspIHsKICAgICAgICB3a3MoZXM2U3ltYm9sc1tqKytdKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgd2VsbEtub3duU3ltYm9scyA9ICRrZXlzKHdrcy5zdG9yZSksIGsgPSAwOyB3ZWxsS25vd25TeW1ib2xzLmxlbmd0aCA+IGs7KSB7CiAgICAgICAgd2tzRGVmaW5lKHdlbGxLbm93blN5bWJvbHNbaysrXSk7CiAgICAgIH0KCiAgICAgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdTeW1ib2wnLCB7CiAgICAgICAgLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCiAgICAgICAgJ2Zvcic6IGZ1bmN0aW9uIF9mb3Ioa2V5KSB7CiAgICAgICAgICByZXR1cm4gaGFzKFN5bWJvbFJlZ2lzdHJ5LCBrZXkgKz0gJycpID8gU3ltYm9sUmVnaXN0cnlba2V5XSA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7CiAgICAgICAgfSwKICAgICAgICAvLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSkKICAgICAgICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihzeW0pIHsKICAgICAgICAgIGlmICghaXNTeW1ib2woc3ltKSkgdGhyb3cgVHlwZUVycm9yKHN5bSArICcgaXMgbm90IGEgc3ltYm9sIScpOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBTeW1ib2xSZWdpc3RyeSkgewogICAgICAgICAgICBpZiAoU3ltYm9sUmVnaXN0cnlba2V5XSA9PT0gc3ltKSByZXR1cm4ga2V5OwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXNlU2V0dGVyOiBmdW5jdGlvbiB1c2VTZXR0ZXIoKSB7CiAgICAgICAgICBzZXR0ZXIgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgdXNlU2ltcGxlOiBmdW5jdGlvbiB1c2VTaW1wbGUoKSB7CiAgICAgICAgICBzZXR0ZXIgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnT2JqZWN0JywgewogICAgICAgIC8vIDE5LjEuMi4yIE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKICAgICAgICBjcmVhdGU6ICRjcmVhdGUsCiAgICAgICAgLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCiAgICAgICAgZGVmaW5lUHJvcGVydHk6ICRkZWZpbmVQcm9wZXJ0eSwKICAgICAgICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQogICAgICAgIGRlZmluZVByb3BlcnRpZXM6ICRkZWZpbmVQcm9wZXJ0aWVzLAogICAgICAgIC8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsCiAgICAgICAgLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKICAgICAgICBnZXRPd25Qcm9wZXJ0eU5hbWVzOiAkZ2V0T3duUHJvcGVydHlOYW1lcywKICAgICAgICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCiAgICAgICAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiAkZ2V0T3duUHJvcGVydHlTeW1ib2xzCiAgICAgIH0pOyAvLyBDaHJvbWUgMzggYW5kIDM5IGBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzYCBmYWlscyBvbiBwcmltaXRpdmVzCiAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTM0NDMKCiAgICAgIHZhciBGQUlMU19PTl9QUklNSVRJVkVTID0gJGZhaWxzKGZ1bmN0aW9uICgpIHsKICAgICAgICAkR09QUy5mKDEpOwogICAgICB9KTsKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBGQUlMU19PTl9QUklNSVRJVkVTLCAnT2JqZWN0JywgewogICAgICAgIGdldE93blByb3BlcnR5U3ltYm9sczogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KSB7CiAgICAgICAgICByZXR1cm4gJEdPUFMuZih0b09iamVjdChpdCkpOwogICAgICAgIH0KICAgICAgfSk7IC8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQoKICAgICAgJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgUyA9ICRTeW1ib2woKTsgLy8gTVMgRWRnZSBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMge30KICAgICAgICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwKICAgICAgICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9scwoKICAgICAgICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoewogICAgICAgICAgYTogUwogICAgICAgIH0pICE9ICd7fScgfHwgX3N0cmluZ2lmeShPYmplY3QoUykpICE9ICd7fSc7CiAgICAgIH0pKSwgJ0pTT04nLCB7CiAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpIHsKICAgICAgICAgIHZhciBhcmdzID0gW2l0XTsKICAgICAgICAgIHZhciBpID0gMTsKICAgICAgICAgIHZhciByZXBsYWNlciwgJHJlcGxhY2VyOwoKICAgICAgICAgIHdoaWxlIChhcmd1bWVudHMubGVuZ3RoID4gaSkgewogICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOwogICAgICAgICAgfQoKICAgICAgICAgICRyZXBsYWNlciA9IHJlcGxhY2VyID0gYXJnc1sxXTsKICAgICAgICAgIGlmICghaXNPYmplY3QocmVwbGFjZXIpICYmIGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKSByZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQKCiAgICAgICAgICBpZiAoIWlzQXJyYXkocmVwbGFjZXIpKSByZXBsYWNlciA9IGZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiAkcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykgdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTsKICAgICAgICAgICAgaWYgKCFpc1N5bWJvbCh2YWx1ZSkpIHJldHVybiB2YWx1ZTsKICAgICAgICAgIH07CiAgICAgICAgICBhcmdzWzFdID0gcmVwbGFjZXI7CiAgICAgICAgICByZXR1cm4gX3N0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJncyk7CiAgICAgICAgfQogICAgICB9KTsgLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQoKICAgICAgJFN5bWJvbFtQUk9UT1RZUEVdW1RPX1BSSU1JVElWRV0gfHwgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsICRTeW1ib2xbUFJPVE9UWVBFXS52YWx1ZU9mKTsgLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQoKICAgICAgc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwgJ1N5bWJvbCcpOyAvLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCgogICAgICBzZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpOyAvLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQoKICAgICAgc2V0VG9TdHJpbmdUYWcoZ2xvYmFsLkpTT04sICdKU09OJywgdHJ1ZSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTMwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIE1FVEEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KSgnbWV0YScpOwoKICAgICAgdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgogICAgICB2YXIgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgogICAgICB2YXIgc2V0RGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oNykuZjsKCiAgICAgIHZhciBpZCA9IDA7CgogICAgICB2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CgogICAgICB2YXIgRlJFRVpFID0gIV9fd2VicGFja19yZXF1aXJlX18oMTQpKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gaXNFeHRlbnNpYmxlKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpOwogICAgICB9KTsKCiAgICAgIHZhciBzZXRNZXRhID0gZnVuY3Rpb24gc2V0TWV0YShpdCkgewogICAgICAgIHNldERlc2MoaXQsIE1FVEEsIHsKICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgIGk6ICdPJyArICsraWQsCiAgICAgICAgICAgIC8vIG9iamVjdCBJRAogICAgICAgICAgICB3OiB7fSAvLyB3ZWFrIGNvbGxlY3Rpb25zIElEcwoKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBmYXN0S2V5ID0gZnVuY3Rpb24gZmFzdEtleShpdCwgY3JlYXRlKSB7CiAgICAgICAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeAogICAgICAgIGlmICghaXNPYmplY3QoaXQpKSByZXR1cm4gX3R5cGVvZjQoaXQpID09ICdzeW1ib2wnID8gaXQgOiAodHlwZW9mIGl0ID09ICdzdHJpbmcnID8gJ1MnIDogJ1AnKSArIGl0OwoKICAgICAgICBpZiAoIWhhcyhpdCwgTUVUQSkpIHsKICAgICAgICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICAgICAgICBpZiAoIWlzRXh0ZW5zaWJsZShpdCkpIHJldHVybiAnRic7IC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCgogICAgICAgICAgaWYgKCFjcmVhdGUpIHJldHVybiAnRSc7IC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCgogICAgICAgICAgc2V0TWV0YShpdCk7IC8vIHJldHVybiBvYmplY3QgSUQKICAgICAgICB9CgogICAgICAgIHJldHVybiBpdFtNRVRBXS5pOwogICAgICB9OwoKICAgICAgdmFyIGdldFdlYWsgPSBmdW5jdGlvbiBnZXRXZWFrKGl0LCBjcmVhdGUpIHsKICAgICAgICBpZiAoIWhhcyhpdCwgTUVUQSkpIHsKICAgICAgICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICAgICAgICBpZiAoIWlzRXh0ZW5zaWJsZShpdCkpIHJldHVybiB0cnVlOyAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQoKICAgICAgICAgIGlmICghY3JlYXRlKSByZXR1cm4gZmFsc2U7IC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCgogICAgICAgICAgc2V0TWV0YShpdCk7IC8vIHJldHVybiBoYXNoIHdlYWsgY29sbGVjdGlvbnMgSURzCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXRbTUVUQV0udzsKICAgICAgfTsgLy8gYWRkIG1ldGFkYXRhIG9uIGZyZWV6ZS1mYW1pbHkgbWV0aG9kcyBjYWxsaW5nCgoKICAgICAgdmFyIG9uRnJlZXplID0gZnVuY3Rpb24gb25GcmVlemUoaXQpIHsKICAgICAgICBpZiAoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKSBzZXRNZXRhKGl0KTsKICAgICAgICByZXR1cm4gaXQ7CiAgICAgIH07CgogICAgICB2YXIgbWV0YSA9IG1vZHVsZS5leHBvcnRzID0gewogICAgICAgIEtFWTogTUVUQSwKICAgICAgICBORUVEOiBmYWxzZSwKICAgICAgICBmYXN0S2V5OiBmYXN0S2V5LAogICAgICAgIGdldFdlYWs6IGdldFdlYWssCiAgICAgICAgb25GcmVlemU6IG9uRnJlZXplCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTMxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMKICAgICAgdmFyIGdldEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTsKCiAgICAgIHZhciBnT1BTID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7CgogICAgICB2YXIgcElFID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdCkgewogICAgICAgIHZhciByZXN1bHQgPSBnZXRLZXlzKGl0KTsKICAgICAgICB2YXIgZ2V0U3ltYm9scyA9IGdPUFMuZjsKCiAgICAgICAgaWYgKGdldFN5bWJvbHMpIHsKICAgICAgICAgIHZhciBzeW1ib2xzID0gZ2V0U3ltYm9scyhpdCk7CiAgICAgICAgICB2YXIgaXNFbnVtID0gcElFLmY7CiAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICB2YXIga2V5OwoKICAgICAgICAgIHdoaWxlIChzeW1ib2xzLmxlbmd0aCA+IGkpIHsKICAgICAgICAgICAgaWYgKGlzRW51bS5jYWxsKGl0LCBrZXkgPSBzeW1ib2xzW2krK10pKSByZXN1bHQucHVzaChrZXkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTMyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudCkKICAgICAgdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7CiAgICAgICAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDEzMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIC8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3cKICAgICAgdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwoKICAgICAgdmFyIGdPUE4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KS5mOwoKICAgICAgdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7CiAgICAgIHZhciB3aW5kb3dOYW1lcyA9ICh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZjQod2luZG93KSkgPT0gJ29iamVjdCcgJiYgd2luZG93ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOwoKICAgICAgdmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24gZ2V0V2luZG93TmFtZXMoaXQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGdPUE4oaXQpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIG1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KSB7CiAgICAgICAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nLmNhbGwoaXQpID09ICdbb2JqZWN0IFdpbmRvd10nID8gZ2V0V2luZG93TmFtZXMoaXQpIDogZ09QTih0b0lPYmplY3QoaXQpKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTM0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0NikoJ2FzeW5jSXRlcmF0b3InKTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTM1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0NikoJ29ic2VydmFibGUnKTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTM2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDEzNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTM4KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Y7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTM4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7CiAgICAgICAgc2V0UHJvdG90eXBlT2Y6IF9fd2VicGFja19yZXF1aXJlX18oMTM5KS5zZXQKICAgICAgfSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTM5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuCgogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwogICAgICB2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCiAgICAgIHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgogICAgICB2YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjayhPLCBwcm90bykgewogICAgICAgIGFuT2JqZWN0KE8pOwogICAgICAgIGlmICghaXNPYmplY3QocHJvdG8pICYmIHByb3RvICE9PSBudWxsKSB0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyAiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpOwogICAgICB9OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgc2V0OiBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgIGZ1bmN0aW9uICh0ZXN0LCBidWdneSwgc2V0KSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBzZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKShGdW5jdGlvbi5jYWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KS5mKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQsIDIpOwogICAgICAgICAgICBzZXQodGVzdCwgW10pOwogICAgICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgYnVnZ3kgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90bykgewogICAgICAgICAgICBjaGVjayhPLCBwcm90byk7CiAgICAgICAgICAgIGlmIChidWdneSkgTy5fX3Byb3RvX18gPSBwcm90bztlbHNlIHNldChPLCBwcm90byk7CiAgICAgICAgICAgIHJldHVybiBPOwogICAgICAgICAgfTsKICAgICAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLAogICAgICAgIGNoZWNrOiBjaGVjawogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxNDEpLAogICAgICAgIF9fZXNNb2R1bGU6IHRydWUKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNDEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Mik7CgogICAgICB2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0OwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGUoUCwgRCkgewogICAgICAgIHJldHVybiAkT2JqZWN0LmNyZWF0ZShQLCBEKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTQyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOyAvLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKCgogICAgICAkZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHsKICAgICAgICBjcmVhdGU6IF9fd2VicGFja19yZXF1aXJlX18oMzYpCiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfRmxpcE1vdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCk7CgogICAgICB2YXIgX0ZsaXBNb3ZlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZsaXBNb3ZlKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gX0ZsaXBNb3ZlMlsiZGVmYXVsdCJdOwogICAgICAvKioKICAgICAgICogUmVhY3QgRmxpcCBNb3ZlCiAgICAgICAqIChjKSAyMDE2LXByZXNlbnQgSm9zaHVhIENvbWVhdQogICAgICAgKi8KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgewogICAgICAgICAgdmFyIF9hcnIgPSBbXTsKICAgICAgICAgIHZhciBfbiA9IHRydWU7CiAgICAgICAgICB2YXIgX2QgPSBmYWxzZTsKICAgICAgICAgIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgICAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2QgPSB0cnVlOwogICAgICAgICAgICBfZSA9IGVycjsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0pIF9pWyJyZXR1cm4iXSgpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX2FycjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICAgICAgICAgIHJldHVybiBhcnI7CiAgICAgICAgICB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgewogICAgICAgICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0oKTsKCiAgICAgIHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwoKICAgICAgdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgICAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgICAgICAgcmV0dXJuIENvbnN0cnVjdG9yOwogICAgICAgIH07CiAgICAgIH0oKTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSk7CgogICAgICB2YXIgX3Byb3BDb252ZXJ0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nik7CgogICAgICB2YXIgX3Byb3BDb252ZXJ0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcENvbnZlcnRlcik7CgogICAgICB2YXIgX2RvbU1hbmlwdWxhdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ5KTsKCiAgICAgIHZhciBfaGVscGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgICAgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogICAgICAgIGlmICghc2VsZikgewogICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjYWxsICYmIChfdHlwZW9mNChjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogICAgICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyBfdHlwZW9mNChzdXBlckNsYXNzKSk7CiAgICAgICAgfQoKICAgICAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgICAgICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgICAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIFJlYWN0IEZsaXAgTW92ZQogICAgICAgKiAoYykgMjAxNi1wcmVzZW50IEpvc2h1YSBDb21lYXUKICAgICAgICoKICAgICAgICogRm9yIGluZm9ybWF0aW9uIG9uIGhvdyB0aGlzIGNvZGUgaXMgbGFpZCBvdXQsIGNoZWNrIG91dCBDT0RFX1RPVVIubWQKICAgICAgICovCgogICAgICAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovCgoKICAgICAgdmFyIHRyYW5zaXRpb25FbmQgPSAoMCwgX2RvbU1hbmlwdWxhdGlvbi53aGljaFRyYW5zaXRpb25FdmVudCkoKTsKICAgICAgdmFyIG5vQnJvd3NlclN1cHBvcnQgPSAhdHJhbnNpdGlvbkVuZDsKCiAgICAgIGZ1bmN0aW9uIGdldEtleShjaGlsZERhdGEpIHsKICAgICAgICByZXR1cm4gY2hpbGREYXRhLmtleSB8fCAnJzsKICAgICAgfQoKICAgICAgdmFyIEZsaXBNb3ZlID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAgICAgICBfaW5oZXJpdHMoRmxpcE1vdmUsIF9Db21wb25lbnQpOwoKICAgICAgICBmdW5jdGlvbiBGbGlwTW92ZSgpIHsKICAgICAgICAgIHZhciBfcmVmOwoKICAgICAgICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7CgogICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZsaXBNb3ZlKTsKCiAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBGbGlwTW92ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZsaXBNb3ZlKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIGNoaWxkcmVuOiBfcmVhY3QuQ2hpbGRyZW4udG9BcnJheShfdGhpcy5wcm9wcy5jaGlsZHJlbikubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBlbGVtZW50LCB7CiAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgYXBwZWFyaW5nOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBfdGhpcy5jaGlsZHJlbkRhdGEgPSB7fSwgX3RoaXMucGFyZW50RGF0YSA9IHsKICAgICAgICAgICAgZG9tTm9kZTogbnVsbCwKICAgICAgICAgICAgYm91bmRpbmdCb3g6IG51bGwKICAgICAgICAgIH0sIF90aGlzLmhlaWdodFBsYWNlaG9sZGVyRGF0YSA9IHsKICAgICAgICAgICAgZG9tTm9kZTogbnVsbAogICAgICAgICAgfSwgX3RoaXMucmVtYWluaW5nQW5pbWF0aW9ucyA9IDAsIF90aGlzLmNoaWxkcmVuVG9BbmltYXRlID0gW10sIF90aGlzLnJ1bkFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGR5bmFtaWNDaGlsZHJlbiA9IF90aGlzLnN0YXRlLmNoaWxkcmVuLmZpbHRlcihfdGhpcy5kb2VzQ2hpbGROZWVkVG9CZUFuaW1hdGVkKTsKCiAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgbikgewogICAgICAgICAgICAgIF90aGlzLnJlbWFpbmluZ0FuaW1hdGlvbnMgKz0gMTsKCiAgICAgICAgICAgICAgX3RoaXMuY2hpbGRyZW5Ub0FuaW1hdGUucHVzaChnZXRLZXkoY2hpbGQpKTsKCiAgICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZUNoaWxkKGNoaWxkLCBuKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLnByb3BzLm9uU3RhcnRBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBfdGhpcy5jYWxsQ2hpbGRyZW5Ib29rKF90aGlzLnByb3BzLm9uU3RhcnRBbGwpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfdGhpcy5kb2VzQ2hpbGROZWVkVG9CZUFuaW1hdGVkID0gZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBkb2Vzbid0IGhhdmUgYSBrZXksIGl0J3MgYW4gaW1tb3ZhYmxlIGNoaWxkIChvbmUgdGhhdCB3ZQogICAgICAgICAgICAvLyBkbyBub3Qgd2FudCB0byBkbyBGTElQIHN0dWZmIHRvLikKICAgICAgICAgICAgaWYgKCFnZXRLZXkoY2hpbGQpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gX3RoaXMuZ2V0Q2hpbGREYXRhKGdldEtleShjaGlsZCkpOwoKICAgICAgICAgICAgdmFyIGNoaWxkRG9tTm9kZSA9IGNoaWxkRGF0YS5kb21Ob2RlOwogICAgICAgICAgICB2YXIgY2hpbGRCb3VuZGluZ0JveCA9IGNoaWxkRGF0YS5ib3VuZGluZ0JveDsKICAgICAgICAgICAgdmFyIHBhcmVudEJvdW5kaW5nQm94ID0gX3RoaXMucGFyZW50RGF0YS5ib3VuZGluZ0JveDsKCiAgICAgICAgICAgIGlmICghY2hpbGREb21Ob2RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgICAgICAgIGFwcGVhckFuaW1hdGlvbiA9IF90aGlzJHByb3BzLmFwcGVhckFuaW1hdGlvbiwKICAgICAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uID0gX3RoaXMkcHJvcHMuZW50ZXJBbmltYXRpb24sCiAgICAgICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbiA9IF90aGlzJHByb3BzLmxlYXZlQW5pbWF0aW9uLAogICAgICAgICAgICAgICAgZ2V0UG9zaXRpb24gPSBfdGhpcyRwcm9wcy5nZXRQb3NpdGlvbjsKICAgICAgICAgICAgdmFyIGlzQXBwZWFyaW5nV2l0aEFuaW1hdGlvbiA9IGNoaWxkLmFwcGVhcmluZyAmJiBhcHBlYXJBbmltYXRpb247CiAgICAgICAgICAgIHZhciBpc0VudGVyaW5nV2l0aEFuaW1hdGlvbiA9IGNoaWxkLmVudGVyaW5nICYmIGVudGVyQW5pbWF0aW9uOwogICAgICAgICAgICB2YXIgaXNMZWF2aW5nV2l0aEFuaW1hdGlvbiA9IGNoaWxkLmxlYXZpbmcgJiYgbGVhdmVBbmltYXRpb247CgogICAgICAgICAgICBpZiAoaXNBcHBlYXJpbmdXaXRoQW5pbWF0aW9uIHx8IGlzRW50ZXJpbmdXaXRoQW5pbWF0aW9uIHx8IGlzTGVhdmluZ1dpdGhBbmltYXRpb24pIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSAvLyBJZiBpdCBpc24ndCBlbnRlcmluZy9sZWF2aW5nLCB3ZSB3YW50IHRvIGFuaW1hdGUgaXQgaWYgaXQncwogICAgICAgICAgICAvLyBvbi1zY3JlZW4gcG9zaXRpb24gaGFzIGNoYW5nZWQuCgoKICAgICAgICAgICAgdmFyIF9nZXRQb3NpdGlvbkRlbHRhID0gKDAsIF9kb21NYW5pcHVsYXRpb24uZ2V0UG9zaXRpb25EZWx0YSkoewogICAgICAgICAgICAgIGNoaWxkRG9tTm9kZTogY2hpbGREb21Ob2RlLAogICAgICAgICAgICAgIGNoaWxkQm91bmRpbmdCb3g6IGNoaWxkQm91bmRpbmdCb3gsCiAgICAgICAgICAgICAgcGFyZW50Qm91bmRpbmdCb3g6IHBhcmVudEJvdW5kaW5nQm94LAogICAgICAgICAgICAgIGdldFBvc2l0aW9uOiBnZXRQb3NpdGlvbgogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIF9nZXRQb3NpdGlvbkRlbHRhMiA9IF9zbGljZWRUb0FycmF5KF9nZXRQb3NpdGlvbkRlbHRhLCAyKSwKICAgICAgICAgICAgICAgIGRYID0gX2dldFBvc2l0aW9uRGVsdGEyWzBdLAogICAgICAgICAgICAgICAgZFkgPSBfZ2V0UG9zaXRpb25EZWx0YTJbMV07CgogICAgICAgICAgICByZXR1cm4gZFggIT09IDAgfHwgZFkgIT09IDA7CiAgICAgICAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTsKICAgICAgICB9IC8vIENvcHkgcHJvcHMuY2hpbGRyZW4gaW50byBzdGF0ZS4KICAgICAgICAvLyBUbyB1bmRlcnN0YW5kIHdoeSB0aGlzIGlzIGltcG9ydGFudCAoYW5kIG5vdCBhbiBhbnRpLXBhdHRlcm4pLCBjb25zaWRlcgogICAgICAgIC8vIGhvdyAibGVhdmUiIGFuaW1hdGlvbnMgd29yay4gQW4gaXRlbSBoYXMgImxlZnQiIHdoZW4gdGhlIGNvbXBvbmVudAogICAgICAgIC8vIHJlY2VpdmVzIGEgbmV3IHNldCBvZiBwcm9wcyB0aGF0IGRvIE5PVCBjb250YWluIHRoZSBpdGVtLgogICAgICAgIC8vIElmIHdlIGp1c3QgcmVuZGVyIHRoZSBwcm9wcyBhcy1pcywgdGhlIGl0ZW0gd291bGQgaW5zdGFudGx5IGRpc2FwcGVhci4KICAgICAgICAvLyBXZSB3YW50IHRvIGtlZXAgdGhlIGl0ZW0gcmVuZGVyZWQgZm9yIGEgbGl0dGxlIHdoaWxlLCB1bnRpbCBpdHMgYW5pbWF0aW9uCiAgICAgICAgLy8gY2FuIGNvbXBsZXRlLiBCZWNhdXNlIHdlIGNhbm5vdCBtdXRhdGUgcHJvcHMsIHdlIG1ha2UgYHN0YXRlYCB0aGUgc291cmNlCiAgICAgICAgLy8gb2YgdHJ1dGguCiAgICAgICAgLy8gRmxpcE1vdmUgbmVlZHMgdG8ga25vdyBxdWl0ZSBhIGJpdCBhYm91dCBpdHMgY2hpbGRyZW4gaW4gb3JkZXIgdG8gZG8KICAgICAgICAvLyBpdHMgam9iLiBXZSBzdG9yZSB0aGVzZSBhcyBhIHByb3BlcnR5IG9uIHRoZSBpbnN0YW5jZS4gV2UncmUgbm90IHVzaW5nCiAgICAgICAgLy8gc3RhdGUsIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCBjaGFuZ2VzIHRvIHRyaWdnZXIgcmUtcmVuZGVycywgd2UganVzdAogICAgICAgIC8vIG5lZWQgYSBwbGFjZSB0byBrZWVwIHRoZSBkYXRhIGZvciByZWZlcmVuY2UsIHdoZW4gY2hhbmdlcyBoYXBwZW4uCiAgICAgICAgLy8gVGhpcyBmaWVsZCBzaG91bGQgbm90IGJlIGFjY2Vzc2VkIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2UgZ2V0Q2hpbGREYXRhLAogICAgICAgIC8vIHB1dENoaWxkRGF0YSwgZXRjLi4uCiAgICAgICAgLy8gU2ltaWxhcmx5LCB0cmFjayB0aGUgZG9tIG5vZGUgYW5kIGJveCBvZiBvdXIgcGFyZW50IGVsZW1lbnQuCiAgICAgICAgLy8gSWYgYG1haW50YWluQ29udGFpbmVySGVpZ2h0YCBwcm9wIGlzIHNldCB0byB0cnVlLCB3ZSdsbCBjcmVhdGUgYQogICAgICAgIC8vIHBsYWNlaG9sZGVyIGVsZW1lbnQgd2hpY2ggb2NjdXBpZXMgc3BhY2Ugc28gdGhhdCB0aGUgcGFyZW50IGhlaWdodAogICAgICAgIC8vIGRvZXNuJ3QgY2hhbmdlIHdoZW4gaXRlbXMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgZG9jdW1lbnQgZmxvdyAod2hpY2gKICAgICAgICAvLyBoYXBwZW5zIGR1cmluZyBsZWF2ZSBhbmltYXRpb25zKQogICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgcmVtYWluaW5nIGFuaW1hdGlvbnMgc28gd2Uga25vdyB3aGVuIHRvIGZpcmUgdGhlCiAgICAgICAgLy8gYWxsLWZpbmlzaGVkIGNhbGxiYWNrLCBhbmQgY2xlYW4gdXAgYWZ0ZXIgb3Vyc2VsdmVzLgogICAgICAgIC8vIE5PVEU6IHdlIGNhbid0IHNpbXBseSB1c2UgY2hpbGRyZW5Ub0FuaW1hdGUubGVuZ3RoIHRvIHRyYWNrIHJlbWFpbmluZwogICAgICAgIC8vIGFuaW1hdGlvbnMsIGJlY2F1c2Ugd2UgbmVlZCB0byBtYWludGFpbiB0aGUgbGlzdCBvZiBhbmltYXRpbmcgY2hpbGRyZW4sCiAgICAgICAgLy8gdG8gcGFzcyB0byB0aGUgYG9uRmluaXNoQWxsYCBoYW5kbGVyLgoKCiAgICAgICAgX2NyZWF0ZUNsYXNzKEZsaXBNb3ZlLCBbewogICAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICAgICAgICAvLyBSdW4gb3VyIGBhcHBlYXJBbmltYXRpb25gIGlmIGl0IHdhcyByZXF1ZXN0ZWQsIHJpZ2h0IGFmdGVyIHRoZQogICAgICAgICAgICAvLyBjb21wb25lbnQgbW91bnRzLgogICAgICAgICAgICB2YXIgc2hvdWxkVHJpZ2dlckZMSVAgPSB0aGlzLnByb3BzLmFwcGVhckFuaW1hdGlvbiAmJiAhdGhpcy5pc0FuaW1hdGlvbkRpc2FibGVkKHRoaXMucHJvcHMpOwoKICAgICAgICAgICAgaWYgKHNob3VsZFRyaWdnZXJGTElQKSB7CiAgICAgICAgICAgICAgdGhpcy5wcmVwRm9yQW5pbWF0aW9uKCk7CiAgICAgICAgICAgICAgdGhpcy5ydW5BbmltYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgICAgICAgIC8vIFdoZW4gdGhlIGNvbXBvbmVudCBpcyBoYW5kZWQgbmV3IHByb3BzLCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgdGhlCiAgICAgICAgICAgIC8vICJyZXN0aW5nIiBwb3NpdGlvbiBvZiBhbGwgY3VycmVudGx5LXJlbmRlcmVkIERPTSBub2Rlcy4KICAgICAgICAgICAgLy8gV2Ugc3RvcmUgdGhhdCBkYXRhIGluIHRoaXMucGFyZW50IGFuZCB0aGlzLmNoaWxkcmVuLAogICAgICAgICAgICAvLyBzbyBpdCBjYW4gYmUgdXNlZCBsYXRlciB0byB3b3JrIG91dCB0aGUgYW5pbWF0aW9uLgogICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nQm94Q2FjaGVzKCk7IC8vIENvbnZlcnQgb3BhcXVlIGNoaWxkcmVuIG9iamVjdCB0byBhcnJheS4KCiAgICAgICAgICAgIHZhciBuZXh0Q2hpbGRyZW4gPSBfcmVhY3QuQ2hpbGRyZW4udG9BcnJheShuZXh0UHJvcHMuY2hpbGRyZW4pOyAvLyBOZXh0LCB3ZSBuZWVkIHRvIHVwZGF0ZSBvdXIgc3RhdGUsIHNvIHRoYXQgaXQgY29udGFpbnMgb3VyIG5ldyBzZXQgb2YKICAgICAgICAgICAgLy8gY2hpbGRyZW4uIElmIGFuaW1hdGlvbiBpcyBkaXNhYmxlZCBvciB1bnN1cHBvcnRlZCwgdGhpcyBpcyBlYXN5OwogICAgICAgICAgICAvLyB3ZSBqdXN0IGNvcHkgb3VyIHByb3BzIGludG8gc3RhdGUuCiAgICAgICAgICAgIC8vIEFzc3VtaW5nIHRoYXQgd2UgY2FuIGFuaW1hdGUsIHRob3VnaCwgd2UgaGF2ZSB0byBkbyBzb21lIHdvcmsuCiAgICAgICAgICAgIC8vIEVzc2VudGlhbGx5LCB3ZSB3YW50IHRvIGtlZXAganVzdC1kZWxldGVkIG5vZGVzIGluIHRoZSBET00gZm9yIGEgYml0CiAgICAgICAgICAgIC8vIGxvbmdlciwgc28gdGhhdCB3ZSBjYW4gYW5pbWF0ZSB0aGVtIGF3YXkuCgoKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgY2hpbGRyZW46IHRoaXMuaXNBbmltYXRpb25EaXNhYmxlZChuZXh0UHJvcHMpID8gbmV4dENoaWxkcmVuLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBlbGVtZW50LCB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pIDogdGhpcy5jYWxjdWxhdGVOZXh0U2V0T2ZDaGlsZHJlbihuZXh0Q2hpbGRyZW4pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZpb3VzUHJvcHMpIHsKICAgICAgICAgICAgLy8gSWYgdGhlIGNoaWxkcmVuIGhhdmUgYmVlbiByZS1hcnJhbmdlZCwgbW92ZWQsIG9yIGFkZGVkL3JlbW92ZWQsCiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGhlIG1haW4gRkxJUCBhbmltYXRpb24uCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIElNUE9SVEFOVDogV2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgY2hpbGRyZW4gaGF2ZSBhY3R1YWxseSBjaGFuZ2VkLgogICAgICAgICAgICAvLyBBdCB0aGUgZW5kIG9mIHRoZSB0cmFuc2l0aW9uLCB3ZSBjbGVhbiB1cCBub2RlcyB0aGF0IG5lZWQgdG8gYmUgcmVtb3ZlZC4KICAgICAgICAgICAgdmFyIG9sZENoaWxkcmVuS2V5cyA9IF9yZWFjdC5DaGlsZHJlbi50b0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkLmtleTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgbmV4dENoaWxkcmVuS2V5cyA9IF9yZWFjdC5DaGlsZHJlbi50b0FycmF5KHByZXZpb3VzUHJvcHMuY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkLmtleTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgc2hvdWxkVHJpZ2dlckZMSVAgPSAhKDAsIF9oZWxwZXJzLmFycmF5c0VxdWFsKShvbGRDaGlsZHJlbktleXMsIG5leHRDaGlsZHJlbktleXMpICYmICF0aGlzLmlzQW5pbWF0aW9uRGlzYWJsZWQodGhpcy5wcm9wcyk7CgogICAgICAgICAgICBpZiAoc2hvdWxkVHJpZ2dlckZMSVApIHsKICAgICAgICAgICAgICB0aGlzLnByZXBGb3JBbmltYXRpb24oKTsKICAgICAgICAgICAgICB0aGlzLnJ1bkFuaW1hdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnY2FsY3VsYXRlTmV4dFNldE9mQ2hpbGRyZW4nLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGN1bGF0ZU5leHRTZXRPZkNoaWxkcmVuKG5leHRDaGlsZHJlbikgewogICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsgLy8gV2Ugd2FudCB0bzoKICAgICAgICAgICAgLy8gICAtIE1hcmsgYWxsIG5ldyBjaGlsZHJlbiBhcyBgZW50ZXJpbmdgCiAgICAgICAgICAgIC8vICAgLSBQdWxsIGluIHByZXZpb3VzIGNoaWxkcmVuIHRoYXQgYXJlbid0IGluIG5leHRDaGlsZHJlbiwgYW5kIG1hcmsgdGhlbQogICAgICAgICAgICAvLyAgICAgYXMgYGxlYXZpbmdgCiAgICAgICAgICAgIC8vICAgLSBQcmVzZXJ2ZSB0aGUgbmV4dENoaWxkcmVuIGxpc3Qgb3JkZXIsIHdpdGggbGVhdmluZyBjaGlsZHJlbiBpbiB0aGVpcgogICAgICAgICAgICAvLyAgICAgYXBwcm9wcmlhdGUgcGxhY2VzLgogICAgICAgICAgICAvLwoKCiAgICAgICAgICAgIHZhciB1cGRhdGVkQ2hpbGRyZW4gPSBuZXh0Q2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChuZXh0Q2hpbGQpIHsKICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBfdGhpczIuZmluZENoaWxkQnlLZXkobmV4dENoaWxkLmtleSB8fCAnJyk7IC8vIElmIHRoZSBjdXJyZW50IGNoaWxkIGRpZCBleGlzdCwgYnV0IGl0IHdhcyBpbiB0aGUgbWlkc3Qgb2YgbGVhdmluZywKICAgICAgICAgICAgICAvLyB3ZSB3YW50IHRvIHRyZWF0IGl0IGFzIHRob3VnaCBpdCdzIGVudGVyaW5nCgoKICAgICAgICAgICAgICB2YXIgaXNFbnRlcmluZyA9ICFjaGlsZCB8fCBjaGlsZC5sZWF2aW5nOwogICAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgbmV4dENoaWxkLCB7CiAgICAgICAgICAgICAgICBlbGVtZW50OiBuZXh0Q2hpbGQsCiAgICAgICAgICAgICAgICBlbnRlcmluZzogaXNFbnRlcmluZwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsgLy8gVGhpcyBpcyB0cmlja3kuIFdlIHdhbnQgdG8ga2VlcCB0aGUgbmV4dENoaWxkcmVuJ3Mgb3JkZXJpbmcsIGJ1dCB3aXRoCiAgICAgICAgICAgIC8vIGFueSBqdXN0LXJlbW92ZWQgaXRlbXMgbWFpbnRhaW5pbmcgdGhlaXIgb3JpZ2luYWwgcG9zaXRpb24uCiAgICAgICAgICAgIC8vIGVnLgogICAgICAgICAgICAvLyAgIHRoaXMuc3RhdGUuY2hpbGRyZW4gID0gWyAxLCAyLCAzLCA0IF0KICAgICAgICAgICAgLy8gICBuZXh0Q2hpbGRyZW4gICAgICAgICA9IFsgMywgMSBdCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIEluIHRoaXMgZXhhbXBsZSwgd2UndmUgcmVtb3ZlZCB0aGUgJzInICYgJzQnCiAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gZW5kIHVwIHdpdGg6ICBbIDIsIDMsIDEsIDQgXQogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyBUbyBhY2NvbXBsaXNoIHRoYXQsIHdlJ2xsIGl0ZXJhdGUgdGhyb3VnaCB0aGlzLnN0YXRlLmNoaWxkcmVuLiB3aGVuZXZlcgogICAgICAgICAgICAvLyB3ZSBmaW5kIGEgbWF0Y2gsIHdlJ2xsIGFwcGVuZCBvdXIgYGxlYXZpbmdgIGZsYWcgdG8gaXQsIGFuZCBpbnNlcnQgaXQKICAgICAgICAgICAgLy8gaW50byB0aGUgbmV4dENoaWxkcmVuIGluIGl0cyBPUklHSU5BTCBwb3NpdGlvbi4gTm90ZSB0aGF0LCBhcyB3ZSBrZWVwCiAgICAgICAgICAgIC8vIGluc2VydGluZyBvbGQgaXRlbXMgaW50byB0aGUgbmV3IGxpc3QsIHRoZSAib3JpZ2luYWwiIHBvc2l0aW9uIHdpbGwKICAgICAgICAgICAgLy8ga2VlcCBpbmNyZW1lbnRpbmcuCgogICAgICAgICAgICB2YXIgbnVtT2ZDaGlsZHJlbkxlYXZpbmcgPSAwOwogICAgICAgICAgICB0aGlzLnN0YXRlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpbmRleCkgewogICAgICAgICAgICAgIHZhciBpc0xlYXZpbmcgPSAhbmV4dENoaWxkcmVuLmZpbmQoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX3JlZjIua2V5OwogICAgICAgICAgICAgICAgcmV0dXJuIGtleSA9PT0gZ2V0S2V5KGNoaWxkKTsKICAgICAgICAgICAgICB9KTsgLy8gSWYgdGhlIGNoaWxkIGlzbid0IGxlYXZpbmcgKG9yLCBpZiB0aGVyZSBpcyBubyBsZWF2ZSBhbmltYXRpb24pLAogICAgICAgICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gYWRkIGl0IGludG8gdGhlIHN0YXRlIGNoaWxkcmVuLgoKICAgICAgICAgICAgICBpZiAoIWlzTGVhdmluZyB8fCAhX3RoaXMyLnByb3BzLmxlYXZlQW5pbWF0aW9uKSByZXR1cm47CgogICAgICAgICAgICAgIHZhciBuZXh0Q2hpbGQgPSBfZXh0ZW5kcyh7fSwgY2hpbGQsIHsKICAgICAgICAgICAgICAgIGxlYXZpbmc6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgdmFyIG5leHRDaGlsZEluZGV4ID0gaW5kZXggKyBudW1PZkNoaWxkcmVuTGVhdmluZzsKICAgICAgICAgICAgICB1cGRhdGVkQ2hpbGRyZW4uc3BsaWNlKG5leHRDaGlsZEluZGV4LCAwLCBuZXh0Q2hpbGQpOwogICAgICAgICAgICAgIG51bU9mQ2hpbGRyZW5MZWF2aW5nICs9IDE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gdXBkYXRlZENoaWxkcmVuOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3ByZXBGb3JBbmltYXRpb24nLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXBGb3JBbmltYXRpb24oKSB7CiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzOyAvLyBPdXIgYW5pbWF0aW9uIHByZXAgY29uc2lzdHMgb2Y6CiAgICAgICAgICAgIC8vIC0gcmVtb3ZlIGNoaWxkcmVuIHRoYXQgYXJlIGxlYXZpbmcgZnJvbSB0aGUgRE9NIGZsb3csIHNvIHRoYXQgdGhlIG5ldwogICAgICAgICAgICAvLyAgIGxheW91dCBjYW4gYmUgYWNjdXJhdGVseSBjYWxjdWxhdGVkLAogICAgICAgICAgICAvLyAtIHVwZGF0ZSB0aGUgcGxhY2Vob2xkZXIgY29udGFpbmVyIGhlaWdodCwgaWYgbmVlZGVkLCB0byBlbnN1cmUgdGhhdAogICAgICAgICAgICAvLyAgIHRoZSBwYXJlbnQncyBoZWlnaHQgZG9lc24ndCBjb2xsYXBzZS4KCgogICAgICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uID0gX3Byb3BzLmxlYXZlQW5pbWF0aW9uLAogICAgICAgICAgICAgICAgbWFpbnRhaW5Db250YWluZXJIZWlnaHQgPSBfcHJvcHMubWFpbnRhaW5Db250YWluZXJIZWlnaHQsCiAgICAgICAgICAgICAgICBnZXRQb3NpdGlvbiA9IF9wcm9wcy5nZXRQb3NpdGlvbjsgLy8gd2UgbmVlZCB0byBtYWtlIGFsbCBsZWF2aW5nIG5vZGVzICJpbnZpc2libGUiIHRvIHRoZSBsYXlvdXQgY2FsY3VsYXRpb25zCiAgICAgICAgICAgIC8vIHRoYXQgd2lsbCB0YWtlIHBsYWNlIGluIHRoZSBuZXh0IHN0ZXAgKHRoaXMucnVuQW5pbWF0aW9uKS4KCiAgICAgICAgICAgIGlmIChsZWF2ZUFuaW1hdGlvbikgewogICAgICAgICAgICAgIHZhciBsZWF2aW5nQ2hpbGRyZW4gPSB0aGlzLnN0YXRlLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5sZWF2aW5nOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGxlYXZpbmdDaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChsZWF2aW5nQ2hpbGQpIHsKICAgICAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpczMuZ2V0Q2hpbGREYXRhKGdldEtleShsZWF2aW5nQ2hpbGQpKTsgLy8gV2UgbmVlZCB0byB0YWtlIHRoZSBpdGVtcyBvdXQgb2YgdGhlICJmbG93IiBvZiB0aGUgZG9jdW1lbnQsIHNvIHRoYXQKICAgICAgICAgICAgICAgIC8vIGl0cyBzaWJsaW5ncyBjYW4gbW92ZSB0byB0YWtlIGl0cyBwbGFjZS4KCgogICAgICAgICAgICAgICAgaWYgKGNoaWxkRGF0YS5ib3VuZGluZ0JveCkgewogICAgICAgICAgICAgICAgICAoMCwgX2RvbU1hbmlwdWxhdGlvbi5yZW1vdmVOb2RlRnJvbURPTUZsb3cpKGNoaWxkRGF0YSwgX3RoaXMzLnByb3BzLnZlcnRpY2FsQWxpZ25tZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKG1haW50YWluQ29udGFpbmVySGVpZ2h0ICYmIHRoaXMuaGVpZ2h0UGxhY2Vob2xkZXJEYXRhLmRvbU5vZGUpIHsKICAgICAgICAgICAgICAgICgwLCBfZG9tTWFuaXB1bGF0aW9uLnVwZGF0ZUhlaWdodFBsYWNlaG9sZGVyKSh7CiAgICAgICAgICAgICAgICAgIGRvbU5vZGU6IHRoaXMuaGVpZ2h0UGxhY2Vob2xkZXJEYXRhLmRvbU5vZGUsCiAgICAgICAgICAgICAgICAgIHBhcmVudERhdGE6IHRoaXMucGFyZW50RGF0YSwKICAgICAgICAgICAgICAgICAgZ2V0UG9zaXRpb246IGdldFBvc2l0aW9uCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gLy8gRm9yIGFsbCBjaGlsZHJlbiBub3QgaW4gdGhlIG1pZGRsZSBvZiBlbnRlcmluZyBvciBsZWF2aW5nLAogICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIHJlc2V0IHRoZSB0cmFuc2l0aW9uLCBzbyB0aGF0IHRoZSBORVcgc2h1ZmZsZSBzdGFydHMgZnJvbQogICAgICAgICAgICAvLyB0aGUgcmlnaHQgcGxhY2UuCgoKICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgIHZhciBfZ2V0Q2hpbGREYXRhID0gX3RoaXMzLmdldENoaWxkRGF0YShnZXRLZXkoY2hpbGQpKSwKICAgICAgICAgICAgICAgICAgZG9tTm9kZSA9IF9nZXRDaGlsZERhdGEuZG9tTm9kZTsgLy8gSWdub3JlIGNoaWxkcmVuIHRoYXQgZG9uJ3QgcmVuZGVyIERPTSBub2RlcyAoZWcuIGJ5IHJldHVybmluZyBudWxsKQoKCiAgICAgICAgICAgICAgaWYgKCFkb21Ob2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIWNoaWxkLmVudGVyaW5nICYmICFjaGlsZC5sZWF2aW5nKSB7CiAgICAgICAgICAgICAgICAoMCwgX2RvbU1hbmlwdWxhdGlvbi5hcHBseVN0eWxlc1RvRE9NTm9kZSkoewogICAgICAgICAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlLAogICAgICAgICAgICAgICAgICBzdHlsZXM6IHsKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnJwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2FuaW1hdGVDaGlsZCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5pbWF0ZUNoaWxkKGNoaWxkLCBpbmRleCkgewogICAgICAgICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfZ2V0Q2hpbGREYXRhMiA9IHRoaXMuZ2V0Q2hpbGREYXRhKGdldEtleShjaGlsZCkpLAogICAgICAgICAgICAgICAgZG9tTm9kZSA9IF9nZXRDaGlsZERhdGEyLmRvbU5vZGU7CgogICAgICAgICAgICBpZiAoIWRvbU5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gLy8gQXBwbHkgdGhlIHJlbGV2YW50IHN0eWxlIGZvciB0aGlzIERPTSBub2RlCiAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIG9mZnNldCBmcm9tIGl0cyBhY3R1YWwgRE9NIHBvc2l0aW9uLgogICAgICAgICAgICAvLyBlZy4gaWYgYW4gaXRlbSBoYXMgYmVlbiByZS1yZW5kZXJlZCAyMHB4IGxvd2VyLCB3ZSB3YW50IHRvIGFwcGx5IGEKICAgICAgICAgICAgLy8gc3R5bGUgb2YgJ3RyYW5zZm9ybTogdHJhbnNsYXRlKC0yMHB4KScsIHNvIHRoYXQgaXQgYXBwZWFycyB0byBiZSB3aGVyZQogICAgICAgICAgICAvLyBpdCBzdGFydGVkLgogICAgICAgICAgICAvLyBJbiBGTElQIHRlcm1pbm9sb2d5LCB0aGlzIGlzIHRoZSAnSW52ZXJ0JyBzdGFnZS4KCgogICAgICAgICAgICAoMCwgX2RvbU1hbmlwdWxhdGlvbi5hcHBseVN0eWxlc1RvRE9NTm9kZSkoewogICAgICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUsCiAgICAgICAgICAgICAgc3R5bGVzOiB0aGlzLmNvbXB1dGVJbml0aWFsU3R5bGVzKGNoaWxkKQogICAgICAgICAgICB9KTsgLy8gU3RhcnQgYnkgaW52b2tpbmcgdGhlIG9uU3RhcnQgY2FsbGJhY2sgZm9yIHRoaXMgY2hpbGQuCgogICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vblN0YXJ0KSB0aGlzLnByb3BzLm9uU3RhcnQoY2hpbGQsIGRvbU5vZGUpOyAvLyBOZXh0LCBhbmltYXRlIHRoZSBpdGVtIGZyb20gaXQncyBhcnRpZmljaWFsbHktb2Zmc2V0IHBvc2l0aW9uIHRvIGl0cwogICAgICAgICAgICAvLyBuZXcsIG5hdHVyYWwgcG9zaXRpb24uCgogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBOT1RFLCBSRTogdGhlIGRvdWJsZS1yZXF1ZXN0QW5pbWF0aW9uRnJhbWU6CiAgICAgICAgICAgICAgICAvLyBTYWRseSwgdGhpcyBpcyB0aGUgbW9zdCBicm93c2VyLWNvbXBhdGlibGUgd2F5IHRvIGRvIHRoaXMgSSd2ZSBmb3VuZC4KICAgICAgICAgICAgICAgIC8vIEVzc2VudGlhbGx5IHdlIG5lZWQgdG8gc2V0IHRoZSBpbml0aWFsIHN0eWxlcyBvdXRzaWRlIG9mIGFueSByZXF1ZXN0CiAgICAgICAgICAgICAgICAvLyBjYWxsYmFja3MgdG8gYXZvaWQgYmF0Y2hpbmcgdGhlbS4gVGhlbiwgYSBmcmFtZSBuZWVkcyB0byBwYXNzIHdpdGgKICAgICAgICAgICAgICAgIC8vIHRoZSBzdHlsZXMgYWJvdmUgcmVuZGVyZWQuIFRoZW4sIG9uIHRoZSBzZWNvbmQgZnJhbWUsIHdlIGNhbiBhcHBseQogICAgICAgICAgICAgICAgLy8gb3VyIGZpbmFsIHN0eWxlcyB0byBwZXJmb3JtIHRoZSBhbmltYXRpb24uCiAgICAgICAgICAgICAgICAvLyBPdXIgZmlyc3Qgb3JkZXIgb2YgYnVzaW5lc3MgaXMgdG8gInVuZG8iIHRoZSBzdHlsZXMgYXBwbGllZCBpbiB0aGUKICAgICAgICAgICAgICAgIC8vIHByZXZpb3VzIGZyYW1lcywgd2hpbGUgYWxzbyBhZGRpbmcgYSBgdHJhbnNpdGlvbmAgcHJvcGVydHkuCiAgICAgICAgICAgICAgICAvLyBUaGlzIHdheSwgdGhlIGl0ZW0gd2lsbCBzbW9vdGhseSB0cmFuc2l0aW9uIGZyb20gaXRzIG9sZCBwb3NpdGlvbgogICAgICAgICAgICAgICAgLy8gdG8gaXRzIG5ldyBwb3NpdGlvbi4KICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmbG93dHlwZS9yZXF1aXJlLXZhcmlhYmxlLXR5cGUKICAgICAgICAgICAgICAgIHZhciBzdHlsZXMgPSB7CiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICgwLCBfZG9tTWFuaXB1bGF0aW9uLmNyZWF0ZVRyYW5zaXRpb25TdHJpbmcpKGluZGV4LCBfdGhpczQucHJvcHMpLAogICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICcnLAogICAgICAgICAgICAgICAgICBvcGFjaXR5OiAnJwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuYXBwZWFyaW5nICYmIF90aGlzNC5wcm9wcy5hcHBlYXJBbmltYXRpb24pIHsKICAgICAgICAgICAgICAgICAgc3R5bGVzID0gX2V4dGVuZHMoe30sIHN0eWxlcywgX3RoaXM0LnByb3BzLmFwcGVhckFuaW1hdGlvbi50byk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkLmVudGVyaW5nICYmIF90aGlzNC5wcm9wcy5lbnRlckFuaW1hdGlvbikgewogICAgICAgICAgICAgICAgICBzdHlsZXMgPSBfZXh0ZW5kcyh7fSwgc3R5bGVzLCBfdGhpczQucHJvcHMuZW50ZXJBbmltYXRpb24udG8pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaGlsZC5sZWF2aW5nICYmIF90aGlzNC5wcm9wcy5sZWF2ZUFuaW1hdGlvbikgewogICAgICAgICAgICAgICAgICBzdHlsZXMgPSBfZXh0ZW5kcyh7fSwgc3R5bGVzLCBfdGhpczQucHJvcHMubGVhdmVBbmltYXRpb24udG8pOwogICAgICAgICAgICAgICAgfSAvLyBJbiBGTElQIHRlcm1pbm9sb2d5LCB0aGlzIGlzIHRoZSAnUGxheScgc3RhZ2UuCgoKICAgICAgICAgICAgICAgICgwLCBfZG9tTWFuaXB1bGF0aW9uLmFwcGx5U3R5bGVzVG9ET01Ob2RlKSh7CiAgICAgICAgICAgICAgICAgIGRvbU5vZGU6IGRvbU5vZGUsCiAgICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYmluZFRyYW5zaXRpb25FbmRIYW5kbGVyKGNoaWxkKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdiaW5kVHJhbnNpdGlvbkVuZEhhbmRsZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRUcmFuc2l0aW9uRW5kSGFuZGxlcihjaGlsZCkgewogICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgICAgICAgIHZhciBfZ2V0Q2hpbGREYXRhMyA9IHRoaXMuZ2V0Q2hpbGREYXRhKGdldEtleShjaGlsZCkpLAogICAgICAgICAgICAgICAgZG9tTm9kZSA9IF9nZXRDaGlsZERhdGEzLmRvbU5vZGU7CgogICAgICAgICAgICBpZiAoIWRvbU5vZGUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gLy8gVGhlIG9uRmluaXNoIGNhbGxiYWNrIG5lZWRzIHRvIGJlIGJvdW5kIHRvIHRoZSB0cmFuc2l0aW9uRW5kIGV2ZW50LgogICAgICAgICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gdW5iaW5kIGl0IHdoZW4gdGhlIHRyYW5zaXRpb24gY29tcGxldGVzLCBzbyB0aGlzIHVnbHkKICAgICAgICAgICAgLy8gaW5saW5lIGZ1bmN0aW9uIGlzIHJlcXVpcmVkICh3ZSBuZWVkIGl0IGhlcmUgc28gaXQgY2xvc2VzIG92ZXIKICAgICAgICAgICAgLy8gZGVwZW5kZW50IHZhcmlhYmxlcyBgY2hpbGRgIGFuZCBgZG9tTm9kZWApCgoKICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25FbmRIYW5kbGVyID0gZnVuY3Rpb24gdHJhbnNpdGlvbkVuZEhhbmRsZXIoZXYpIHsKICAgICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhpcyBoYW5kbGVyIGlzIGZpcmVkIG5vdCBvbiBvdXIgcHJpbWFyeSB0cmFuc2l0aW9uLAogICAgICAgICAgICAgIC8vIGJ1dCBvbiBhIG5lc3RlZCB0cmFuc2l0aW9uIChlZy4gYSBob3ZlciBlZmZlY3QpLiBJZ25vcmUgdGhlc2UgY2FzZXMuCiAgICAgICAgICAgICAgaWYgKGV2LnRhcmdldCAhPT0gZG9tTm9kZSkgcmV0dXJuOyAvLyBSZW1vdmUgdGhlICd0cmFuc2l0aW9uJyBpbmxpbmUgc3R5bGUgd2UgYWRkZWQuIFRoaXMgaXMgY2xlYW51cC4KCiAgICAgICAgICAgICAgZG9tTm9kZS5zdHlsZS50cmFuc2l0aW9uID0gJyc7IC8vIFRyaWdnZXIgYW55IGFwcGxpY2FibGUgb25GaW5pc2gvb25GaW5pc2hBbGwgaG9va3MKCiAgICAgICAgICAgICAgX3RoaXM1LnRyaWdnZXJGaW5pc2hIb29rcyhjaGlsZCwgZG9tTm9kZSk7CgogICAgICAgICAgICAgIGRvbU5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kLCB0cmFuc2l0aW9uRW5kSGFuZGxlcik7CgogICAgICAgICAgICAgIGlmIChjaGlsZC5sZWF2aW5nKSB7CiAgICAgICAgICAgICAgICBfdGhpczUucmVtb3ZlQ2hpbGREYXRhKGdldEtleShjaGlsZCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGRvbU5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kLCB0cmFuc2l0aW9uRW5kSGFuZGxlcik7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAndHJpZ2dlckZpbmlzaEhvb2tzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyRmluaXNoSG9va3MoY2hpbGQsIGRvbU5vZGUpIHsKICAgICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkZpbmlzaCkgdGhpcy5wcm9wcy5vbkZpbmlzaChjaGlsZCwgZG9tTm9kZSk7IC8vIFJlZHVjZSB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIHdlIG5lZWQgdG8gYW5pbWF0ZSBieSAxLAogICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiB0ZWxsIHdoZW4gYWxsIGNoaWxkcmVuIGhhdmUgZmluaXNoZWQuCgogICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0FuaW1hdGlvbnMgLT0gMTsKCiAgICAgICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0FuaW1hdGlvbnMgPT09IDApIHsKICAgICAgICAgICAgICAvLyBSZW1vdmUgYW55IGl0ZW1zIGZyb20gdGhlIERPTSB0aGF0IGhhdmUgbGVmdCwgYW5kIHJlc2V0IGBlbnRlcmluZ2AuCiAgICAgICAgICAgICAgdmFyIG5leHRDaGlsZHJlbiA9IHRoaXMuc3RhdGUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgICAgICAgICAgdmFyIGxlYXZpbmcgPSBfcmVmMy5sZWF2aW5nOwogICAgICAgICAgICAgICAgcmV0dXJuICFsZWF2aW5nOwogICAgICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBpdGVtLCB7CiAgICAgICAgICAgICAgICAgIGFwcGVhcmluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGVudGVyaW5nOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjaGlsZHJlbjogbmV4dENoaWxkcmVuCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczYucHJvcHMub25GaW5pc2hBbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmNhbGxDaGlsZHJlbkhvb2soX3RoaXM2LnByb3BzLm9uRmluaXNoQWxsKTsKICAgICAgICAgICAgICAgIH0gLy8gUmVzZXQgb3VyIHZhcmlhYmxlcyBmb3IgdGhlIG5leHQgaXRlcmF0aW9uCgoKICAgICAgICAgICAgICAgIF90aGlzNi5jaGlsZHJlblRvQW5pbWF0ZSA9IFtdOwogICAgICAgICAgICAgIH0pOyAvLyBJZiB0aGUgcGxhY2Vob2xkZXIgd2FzIGhvbGRpbmcgdGhlIGNvbnRhaW5lciBvcGVuIHdoaWxlIGVsZW1lbnRzIHdlcmUKICAgICAgICAgICAgICAvLyBsZWF2aW5nLCB3ZSB3ZSBjYW4gbm93IHNldCBpdHMgaGVpZ2h0IHRvIHplcm8uCgogICAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodFBsYWNlaG9sZGVyRGF0YS5kb21Ob2RlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodFBsYWNlaG9sZGVyRGF0YS5kb21Ob2RlLnN0eWxlLmhlaWdodCA9ICcwJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjYWxsQ2hpbGRyZW5Ib29rJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxsQ2hpbGRyZW5Ib29rKGhvb2spIHsKICAgICAgICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBbXTsKICAgICAgICAgICAgdmFyIGRvbU5vZGVzID0gW107CiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5Ub0FuaW1hdGUuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRLZXkpIHsKICAgICAgICAgICAgICAvLyBJZiB0aGlzIHdhcyBhbiBleGl0IGFuaW1hdGlvbiwgdGhlIGNoaWxkIG1heSBubyBsb25nZXIgZXhpc3QuCiAgICAgICAgICAgICAgLy8gSWYgc28sIHNraXAgaXQuCiAgICAgICAgICAgICAgdmFyIGNoaWxkID0gX3RoaXM3LmZpbmRDaGlsZEJ5S2V5KGNoaWxkS2V5KTsKCiAgICAgICAgICAgICAgaWYgKCFjaGlsZCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChjaGlsZCk7CgogICAgICAgICAgICAgIGlmIChfdGhpczcuaGFzQ2hpbGREYXRhKGNoaWxkS2V5KSkgewogICAgICAgICAgICAgICAgZG9tTm9kZXMucHVzaChfdGhpczcuZ2V0Q2hpbGREYXRhKGNoaWxkS2V5KS5kb21Ob2RlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBob29rKGVsZW1lbnRzLCBkb21Ob2Rlcyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAndXBkYXRlQm91bmRpbmdCb3hDYWNoZXMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUJvdW5kaW5nQm94Q2FjaGVzKCkgewogICAgICAgICAgICB2YXIgX3RoaXM4ID0gdGhpczsgLy8gVGhpcyBpcyB0aGUgT05MWSBwbGFjZSB0aGF0IHBhcmVudERhdGEgYW5kIGNoaWxkcmVuRGF0YSdzCiAgICAgICAgICAgIC8vIGJvdW5kaW5nIGJveGVzIGFyZSB1cGRhdGVkLiBUaGV5IHdpbGwgYmUgY2FsY3VsYXRlZCBhdCBvdGhlciB0aW1lcwogICAgICAgICAgICAvLyB0byBiZSBjb21wYXJlZCB0byB0aGlzIHZhbHVlLCBidXQgaXQncyBpbXBvcnRhbnQgdGhhdCB0aGUgY2FjaGUgaXMKICAgICAgICAgICAgLy8gdXBkYXRlZCBvbmNlIHBlciB1cGRhdGUuCgoKICAgICAgICAgICAgdmFyIHBhcmVudERvbU5vZGUgPSB0aGlzLnBhcmVudERhdGEuZG9tTm9kZTsKCiAgICAgICAgICAgIGlmICghcGFyZW50RG9tTm9kZSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5wYXJlbnREYXRhLmJvdW5kaW5nQm94ID0gdGhpcy5wcm9wcy5nZXRQb3NpdGlvbihwYXJlbnREb21Ob2RlKTsKICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IGdldEtleShjaGlsZCk7IC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgYSBjaGlsZCBkb2VzIG5vdCBoYXZlIGEgYGtleWAgcHJvcGVydHk7CiAgICAgICAgICAgICAgLy8gSWdub3JlIHRoZXNlIGNoaWxkcmVuLCB0aGV5IGRvbid0IG5lZWQgdG8gYmUgbW92ZWQuCgogICAgICAgICAgICAgIGlmICghY2hpbGRLZXkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9IC8vIEluIHZlcnkgcmFyZSBjaXJjdW1zdGFuY2VzLCBmb3IgcmVhc29ucyB1bmtub3duLCB0aGUgcmVmIGlzIG5ldmVyCiAgICAgICAgICAgICAgLy8gcG9wdWxhdGVkIGZvciBjZXJ0YWluIGNoaWxkcmVuLiBJbiB0aGlzIGNhc2UsIGF2b2lkIGRvaW5nIHRoaXMgdXBkYXRlLgogICAgICAgICAgICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pvc2h3Y29tZWF1L3JlYWN0LWZsaXAtbW92ZS9wdWxsLzkxCgoKICAgICAgICAgICAgICBpZiAoIV90aGlzOC5oYXNDaGlsZERhdGEoY2hpbGRLZXkpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gX3RoaXM4LmdldENoaWxkRGF0YShjaGlsZEtleSk7IC8vIElmIHRoZSBjaGlsZCBlbGVtZW50IHJldHVybnMgbnVsbCwgd2UgbmVlZCB0byBhdm9pZCB0cnlpbmcgdG8KICAgICAgICAgICAgICAvLyBhY2NvdW50IGZvciBpdAoKCiAgICAgICAgICAgICAgaWYgKCFjaGlsZERhdGEuZG9tTm9kZSB8fCAhY2hpbGQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzOC5zZXRDaGlsZERhdGEoY2hpbGRLZXksIHsKICAgICAgICAgICAgICAgIGJvdW5kaW5nQm94OiAoMCwgX2RvbU1hbmlwdWxhdGlvbi5nZXRSZWxhdGl2ZUJvdW5kaW5nQm94KSh7CiAgICAgICAgICAgICAgICAgIGNoaWxkRG9tTm9kZTogY2hpbGREYXRhLmRvbU5vZGUsCiAgICAgICAgICAgICAgICAgIHBhcmVudERvbU5vZGU6IHBhcmVudERvbU5vZGUsCiAgICAgICAgICAgICAgICAgIGdldFBvc2l0aW9uOiBfdGhpczgucHJvcHMuZ2V0UG9zaXRpb24KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NvbXB1dGVJbml0aWFsU3R5bGVzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlSW5pdGlhbFN0eWxlcyhjaGlsZCkgewogICAgICAgICAgICBpZiAoY2hpbGQuYXBwZWFyaW5nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYXBwZWFyQW5pbWF0aW9uID8gdGhpcy5wcm9wcy5hcHBlYXJBbmltYXRpb24uZnJvbSA6IHt9OwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkLmVudGVyaW5nKSB7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLnByb3BzLmVudGVyQW5pbWF0aW9uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgICAgICAgfSAvLyBJZiB0aGlzIGNoaWxkIHdhcyBpbiB0aGUgbWlkZGxlIG9mIGxlYXZpbmcsIGl0IHN0aWxsIGhhcyBpdHMKICAgICAgICAgICAgICAvLyBhYnNvbHV0ZSBwb3NpdGlvbmluZyBzdHlsZXMgYXBwbGllZC4gV2UgbmVlZCB0byB1bmRvIHRob3NlLgoKCiAgICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnJywKICAgICAgICAgICAgICAgIHRvcDogJycsCiAgICAgICAgICAgICAgICBsZWZ0OiAnJywKICAgICAgICAgICAgICAgIHJpZ2h0OiAnJywKICAgICAgICAgICAgICAgIGJvdHRvbTogJycKICAgICAgICAgICAgICB9LCB0aGlzLnByb3BzLmVudGVyQW5pbWF0aW9uLmZyb20pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkLmxlYXZpbmcpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5sZWF2ZUFuaW1hdGlvbiA/IHRoaXMucHJvcHMubGVhdmVBbmltYXRpb24uZnJvbSA6IHt9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gdGhpcy5nZXRDaGlsZERhdGEoZ2V0S2V5KGNoaWxkKSk7CiAgICAgICAgICAgIHZhciBjaGlsZERvbU5vZGUgPSBjaGlsZERhdGEuZG9tTm9kZTsKICAgICAgICAgICAgdmFyIGNoaWxkQm91bmRpbmdCb3ggPSBjaGlsZERhdGEuYm91bmRpbmdCb3g7CiAgICAgICAgICAgIHZhciBwYXJlbnRCb3VuZGluZ0JveCA9IHRoaXMucGFyZW50RGF0YS5ib3VuZGluZ0JveDsKCiAgICAgICAgICAgIGlmICghY2hpbGREb21Ob2RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX2dldFBvc2l0aW9uRGVsdGEzID0gKDAsIF9kb21NYW5pcHVsYXRpb24uZ2V0UG9zaXRpb25EZWx0YSkoewogICAgICAgICAgICAgIGNoaWxkRG9tTm9kZTogY2hpbGREb21Ob2RlLAogICAgICAgICAgICAgIGNoaWxkQm91bmRpbmdCb3g6IGNoaWxkQm91bmRpbmdCb3gsCiAgICAgICAgICAgICAgcGFyZW50Qm91bmRpbmdCb3g6IHBhcmVudEJvdW5kaW5nQm94LAogICAgICAgICAgICAgIGdldFBvc2l0aW9uOiB0aGlzLnByb3BzLmdldFBvc2l0aW9uCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgX2dldFBvc2l0aW9uRGVsdGE0ID0gX3NsaWNlZFRvQXJyYXkoX2dldFBvc2l0aW9uRGVsdGEzLCAyKSwKICAgICAgICAgICAgICAgIGRYID0gX2dldFBvc2l0aW9uRGVsdGE0WzBdLAogICAgICAgICAgICAgICAgZFkgPSBfZ2V0UG9zaXRpb25EZWx0YTRbMV07CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgZFggKyAncHgsICcgKyBkWSArICdweCknCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzCgogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2lzQW5pbWF0aW9uRGlzYWJsZWQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQW5pbWF0aW9uRGlzYWJsZWQocHJvcHMpIHsKICAgICAgICAgICAgLy8gSWYgdGhlIGNvbXBvbmVudCBpcyBleHBsaWNpdGx5IHBhc3NlZCBhIGBkaXNhYmxlQWxsQW5pbWF0aW9uc2AgZmxhZywKICAgICAgICAgICAgLy8gd2UgY2FuIHNraXAgdGhpcyB3aG9sZSBwcm9jZXNzLiBTaW1pbGFybHksIGlmIGFsbCBvZiB0aGUgbnVtYmVycyBoYXZlCiAgICAgICAgICAgIC8vIGJlZW4gc2V0IHRvIDAsIHRoZXJlIGlzIG5vIHBvaW50IGluIHRyeWluZyB0byBhbmltYXRlOyBkb2luZyBzbyB3b3VsZAogICAgICAgICAgICAvLyBvbmx5IGNhdXNlIGEgZmxpY2tlciAoYW5kIHRoZSBpbnRlbnQgaXMgcHJvYmFibHkgdG8gZGlzYWJsZSBhbmltYXRpb25zKQogICAgICAgICAgICAvLyBXZSBjYW4gYWxzbyBza2lwIHRoaXMgcmlnYW1hcm9sZSBpZiB0aGVyZSdzIG5vIGJyb3dzZXIgc3VwcG9ydCBmb3IgaXQuCiAgICAgICAgICAgIHJldHVybiBub0Jyb3dzZXJTdXBwb3J0IHx8IHByb3BzLmRpc2FibGVBbGxBbmltYXRpb25zIHx8IHByb3BzLmR1cmF0aW9uID09PSAwICYmIHByb3BzLmRlbGF5ID09PSAwICYmIHByb3BzLnN0YWdnZXJEdXJhdGlvbkJ5ID09PSAwICYmIHByb3BzLnN0YWdnZXJEZWxheUJ5ID09PSAwOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2ZpbmRDaGlsZEJ5S2V5JywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kQ2hpbGRCeUtleShrZXkpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuY2hpbGRyZW4uZmluZChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0S2V5KGNoaWxkKSA9PT0ga2V5OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdoYXNDaGlsZERhdGEnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0NoaWxkRGF0YShrZXkpIHsKICAgICAgICAgICAgLy8gT2JqZWN0IGhhcyBzb21lIGJ1aWx0LWluIHByb3BlcnRpZXMgb24gaXRzIHByb3RvdHlwZSwgc3VjaCBhcyB0b1N0cmluZy4gIGhhc093blByb3BlcnR5IG1ha2VzCiAgICAgICAgICAgIC8vIHN1cmUgdGhhdCBrZXkgaXMgcHJlc2VudCBvbiBjaGlsZHJlbkRhdGEgaXRzZWxmLCBub3Qgb24gaXRzIHByb3RvdHlwZS4KICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmNoaWxkcmVuRGF0YSwga2V5KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdnZXRDaGlsZERhdGEnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENoaWxkRGF0YShrZXkpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzQ2hpbGREYXRhKGtleSkgPyB0aGlzLmNoaWxkcmVuRGF0YVtrZXldIDoge307CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnc2V0Q2hpbGREYXRhJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDaGlsZERhdGEoa2V5LCBkYXRhKSB7CiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5EYXRhW2tleV0gPSBfZXh0ZW5kcyh7fSwgdGhpcy5nZXRDaGlsZERhdGEoa2V5KSwgZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncmVtb3ZlQ2hpbGREYXRhJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVDaGlsZERhdGEoa2V5KSB7CiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoaWxkcmVuRGF0YVtrZXldOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NyZWF0ZUhlaWdodFBsYWNlaG9sZGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVIZWlnaHRQbGFjZWhvbGRlcigpIHsKICAgICAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICAgICAgICB2YXIgdHlwZU5hbWUgPSB0aGlzLnByb3BzLnR5cGVOYW1lOyAvLyBJZiByZXF1ZXN0ZWQsIGNyZWF0ZSBhbiBpbnZpc2libGUgZWxlbWVudCBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0LgogICAgICAgICAgICAvLyBJdHMgaGVpZ2h0IHdpbGwgYmUgbW9kaWZpZWQgdG8gcHJldmVudCB0aGUgY29udGFpbmVyIGZyb20gY29sbGFwc2luZwogICAgICAgICAgICAvLyBwcmVtYXR1cmVseS4KCiAgICAgICAgICAgIHZhciBpc0NvbnRhaW5lckFMaXN0ID0gdHlwZU5hbWUgPT09ICd1bCcgfHwgdHlwZU5hbWUgPT09ICdvbCc7CiAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlclR5cGUgPSBpc0NvbnRhaW5lckFMaXN0ID8gJ2xpJyA6ICdkaXYnOwogICAgICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQocGxhY2Vob2xkZXJUeXBlLCB7CiAgICAgICAgICAgICAga2V5OiAnaGVpZ2h0LXBsYWNlaG9sZGVyJywKICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihkb21Ob2RlKSB7CiAgICAgICAgICAgICAgICBfdGhpczkuaGVpZ2h0UGxhY2Vob2xkZXJEYXRhLmRvbU5vZGUgPSBkb21Ob2RlOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLAogICAgICAgICAgICAgICAgaGVpZ2h0OiAwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjaGlsZHJlbldpdGhSZWZzJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGlsZHJlbldpdGhSZWZzKCkgewogICAgICAgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7IC8vIFdlIG5lZWQgdG8gY2xvbmUgdGhlIHByb3ZpZGVkIGNoaWxkcmVuLCBjYXB0dXJpbmcgYSByZWZlcmVuY2UgdG8gdGhlCiAgICAgICAgICAgIC8vIHVuZGVybHlpbmcgRE9NIG5vZGUuIEZsaXAgTW92ZSBuZWVkcyB0byB1c2UgdGhlIFJlYWN0IGVzY2FwZSBoYXRjaGVzIHRvCiAgICAgICAgICAgIC8vIGJlIGFibGUgdG8gZG8gaXRzIGNhbGN1bGF0aW9ucy4KCgogICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jbG9uZUVsZW1lbnQoY2hpbGQuZWxlbWVudCwgewogICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAvLyBTdGF0ZWxlc3MgRnVuY3Rpb25hbCBDb21wb25lbnRzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IEZsaXBNb3ZlLAogICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHRoZXkgZG9uJ3QgaGF2ZSBpbnN0YW5jZXMuCiAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIGRvbU5vZGUgPSAoMCwgX2RvbU1hbmlwdWxhdGlvbi5nZXROYXRpdmVOb2RlKShlbGVtZW50KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTAuc2V0Q2hpbGREYXRhKGdldEtleShjaGlsZCksIHsKICAgICAgICAgICAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdyZW5kZXInLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9wcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgICAgICAgdHlwZU5hbWUgPSBfcHJvcHMyLnR5cGVOYW1lLAogICAgICAgICAgICAgICAgZGVsZWdhdGVkID0gX3Byb3BzMi5kZWxlZ2F0ZWQsCiAgICAgICAgICAgICAgICBsZWF2ZUFuaW1hdGlvbiA9IF9wcm9wczIubGVhdmVBbmltYXRpb24sCiAgICAgICAgICAgICAgICBtYWludGFpbkNvbnRhaW5lckhlaWdodCA9IF9wcm9wczIubWFpbnRhaW5Db250YWluZXJIZWlnaHQ7CgogICAgICAgICAgICB2YXIgcHJvcHMgPSBfZXh0ZW5kcyh7fSwgZGVsZWdhdGVkLCB7CiAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkgewogICAgICAgICAgICAgICAgX3RoaXMxMS5wYXJlbnREYXRhLmRvbU5vZGUgPSBub2RlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuV2l0aFJlZnMoKTsKCiAgICAgICAgICAgIGlmIChsZWF2ZUFuaW1hdGlvbiAmJiBtYWludGFpbkNvbnRhaW5lckhlaWdodCkgewogICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy5jcmVhdGVIZWlnaHRQbGFjZWhvbGRlcigpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KHR5cGVOYW1lLCBwcm9wcywgY2hpbGRyZW4pOwogICAgICAgICAgfQogICAgICAgIH1dKTsKCiAgICAgICAgcmV0dXJuIEZsaXBNb3ZlOwogICAgICB9KF9yZWFjdC5Db21wb25lbnQpOwoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gKDAsIF9wcm9wQ29udmVydGVyMlsiZGVmYXVsdCJdKShGbGlwTW92ZSk7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE0NSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsgLy8gQG5vZmxvdwoKICAgICAgLyoqCiAgICAgICAqIFJlYWN0IEZsaXAgTW92ZSAtIFBvbHlmaWxscwogICAgICAgKiAoYykgMjAxNi1wcmVzZW50IEpvc2h1YSBDb21lYXUKICAgICAgICovCgogICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwoKICAgICAgaWYgKCFBcnJheS5wcm90b3R5cGUuZmluZCkgewogICAgICAgIEFycmF5LnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHByZWRpY2F0ZSkgewogICAgICAgICAgaWYgKHRoaXMgPT09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkucHJvdG90eXBlLmZpbmQgY2FsbGVkIG9uIG51bGwgb3IgdW5kZWZpbmVkJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncHJlZGljYXRlIG11c3QgYmUgYSBmdW5jdGlvbicpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpOwogICAgICAgICAgdmFyIGxlbmd0aCA9IGxpc3QubGVuZ3RoID4+PiAwOwogICAgICAgICAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07CiAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YWx1ZSA9IGxpc3RbaV07CgogICAgICAgICAgICBpZiAocHJlZGljYXRlLmNhbGwodGhpc0FyZywgdmFsdWUsIGksIGxpc3QpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoIUFycmF5LnByb3RvdHlwZS5ldmVyeSkgewogICAgICAgIEFycmF5LnByb3RvdHlwZS5ldmVyeSA9IGZ1bmN0aW9uIChjYWxsYmFja2ZuLCB0aGlzQXJnKSB7CiAgICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgICAgdmFyIFQsIGs7CgogICAgICAgICAgaWYgKHRoaXMgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aGlzIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgTyA9IE9iamVjdCh0aGlzKTsKICAgICAgICAgIHZhciBsZW4gPSBPLmxlbmd0aCA+Pj4gMDsKCiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrZm4gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgICAgICBUID0gdGhpc0FyZzsKICAgICAgICAgIH0KCiAgICAgICAgICBrID0gMDsKCiAgICAgICAgICB3aGlsZSAoayA8IGxlbikgewogICAgICAgICAgICB2YXIga1ZhbHVlOwoKICAgICAgICAgICAgaWYgKGsgaW4gTykgewogICAgICAgICAgICAgIGtWYWx1ZSA9IE9ba107CiAgICAgICAgICAgICAgdmFyIHRlc3RSZXN1bHQgPSBjYWxsYmFja2ZuLmNhbGwoVCwga1ZhbHVlLCBrLCBPKTsKCiAgICAgICAgICAgICAgaWYgKCF0ZXN0UmVzdWx0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBrKys7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KSB7CiAgICAgICAgQXJyYXkuaXNBcnJheSA9IGZ1bmN0aW9uIChhcmcpIHsKICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKICAgICAgICB9OwogICAgICB9CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE0NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCgogICAgICAoZnVuY3Rpb24gKHByb2Nlc3MpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjQoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgICByZXR1cm4gX3R5cGVvZjQob2JqKTsKICAgICAgICB9IDogZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjQob2JqKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICB9OwoKICAgICAgICB2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICAgICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgICAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICAgICAgICAgIH07CiAgICAgICAgfSgpOwoKICAgICAgICB2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCiAgICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICAgIHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ3KTsKCiAgICAgICAgdmFyIF9lbnRlckxlYXZlUHJlc2V0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KTsKCiAgICAgICAgdmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7CgogICAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogICAgICAgICAgaWYgKCFzZWxmKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGNhbGwgJiYgKF90eXBlb2Y0KGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogICAgICAgICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgX3R5cGVvZjQoc3VwZXJDbGFzcykpOwogICAgICAgICAgfQoKICAgICAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJlYWN0IEZsaXAgTW92ZSB8IHByb3BDb252ZXJ0ZXIKICAgICAgICAgKiAoYykgMjAxNi1wcmVzZW50IEpvc2h1YSBDb21lYXUKICAgICAgICAgKgogICAgICAgICAqIEFic3RyYWN0ZWQgYXdheSBhIGJ1bmNoIG9mIHRoZSBtZXNzeSBidXNpbmVzcyB3aXRoIHByb3BzLgogICAgICAgICAqICAgLSBwcm9wcyBmbG93IHR5cGVzIGFuZCBkZWZhdWx0UHJvcHMKICAgICAgICAgKiAgIC0gVHlwZSBjb252ZXJzaW9uIChXZSBhY2NlcHQgJ3N0cmluZycgYW5kICdudW1iZXInIHZhbHVlcyBmb3IgZHVyYXRpb24sCiAgICAgICAgICogICAgIGRlbGF5LCBhbmQgb3RoZXIgZmllbGRzLCBidXQgd2UgYWN0dWFsbHkgbmVlZCB0aGVtIHRvIGJlIGludHMuKQogICAgICAgICAqICAgLSBDaGlsZHJlbiBjb252ZXJzaW9uICh3ZSBuZWVkIHRoZSBjaGlsZHJlbiB0byBiZSBhbiBhcnJheS4gTWF5IG5vdCBhbHdheXMKICAgICAgICAgKiAgICAgYmUsIGlmIGEgc2luZ2xlIGNoaWxkIGlzIHBhc3NlZCBpbi4pCiAgICAgICAgICogICAtIFJlc29sdmluZyBhbmltYXRpb24gcHJlc2V0cyBpbnRvIHRoZWlyIGJhc2UgQ1NTIHN0eWxlcwogICAgICAgICAqLwoKICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBibG9jay1zY29wZWQtdmFyICovCgoKICAgICAgICB2YXIgbm9kZUVudiA9IHZvaWQgMDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5vZGVFbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBub2RlRW52ID0gJ2RldmVsb3BtZW50JzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByb3BDb252ZXJ0ZXIoQ29tcG9zZWRDb21wb25lbnQpIHsKICAgICAgICAgIHZhciBfY2xhc3MsIF90ZW1wOwoKICAgICAgICAgIHJldHVybiBfdGVtcCA9IF9jbGFzcyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgICAgICAgICAgIF9pbmhlcml0cyhGbGlwTW92ZVByb3BDb252ZXJ0ZXIsIF9Db21wb25lbnQpOwoKICAgICAgICAgICAgZnVuY3Rpb24gRmxpcE1vdmVQcm9wQ29udmVydGVyKCkgewogICAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGbGlwTW92ZVByb3BDb252ZXJ0ZXIpOwoKICAgICAgICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZsaXBNb3ZlUHJvcENvbnZlcnRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZsaXBNb3ZlUHJvcENvbnZlcnRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY3JlYXRlQ2xhc3MoRmxpcE1vdmVQcm9wQ29udmVydGVyLCBbewogICAgICAgICAgICAgIGtleTogJ2NoZWNrRm9yU3RhdGVsZXNzRnVuY3Rpb25hbENvbXBvbmVudHMnLAogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzCiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrRm9yU3RhdGVsZXNzRnVuY3Rpb25hbENvbXBvbmVudHMoY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgIC8vIFNraXAgYWxsIGNvbnNvbGUgd2FybmluZ3MgaW4gcHJvZHVjdGlvbi4KICAgICAgICAgICAgICAgIC8vIEJhaWwgZWFybHksIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHdvcmsuCiAgICAgICAgICAgICAgICBpZiAobm9kZUVudiA9PT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gLy8gRmxpcE1vdmUgZG9lcyBub3Qgc3VwcG9ydCBzdGF0ZWxlc3MgZnVuY3Rpb25hbCBjb21wb25lbnRzLgogICAgICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGFueSBzdXBwbGllZCBjb21wb25lbnRzIHdvbid0IHdvcmsuCiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hpbGQgZG9lc24ndCBoYXZlIGEga2V5LCBpdCBtZWFucyB3ZSBhcmVuJ3QgYW5pbWF0aW5nIGl0LgogICAgICAgICAgICAgICAgLy8gSXQncyBhbGxvd2VkIHRvIGJlIGFuIFNGQywgc2luY2Ugd2UgaWdub3JlIGl0LgoKCiAgICAgICAgICAgICAgICB2YXIgY2hpbGRBcnJheSA9IF9yZWFjdC5DaGlsZHJlbi50b0FycmF5KGNoaWxkcmVuKTsKCiAgICAgICAgICAgICAgICB2YXIgbm9TdGF0ZWxlc3MgPSBjaGlsZEFycmF5LmV2ZXJ5KGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gISgwLCBfaGVscGVycy5pc0VsZW1lbnRBblNGQykoY2hpbGQpIHx8IHR5cGVvZiBjaGlsZC5rZXkgPT09ICd1bmRlZmluZWQnOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCFub1N0YXRlbGVzcykgewogICAgICAgICAgICAgICAgICAoMCwgX2Vycm9yTWVzc2FnZXMuc3RhdGVsZXNzRnVuY3Rpb25hbENvbXBvbmVudFN1cHBsaWVkKSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGtleTogJ2NvbnZlcnRQcm9wcycsCiAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnZlcnRQcm9wcyhwcm9wcykgewogICAgICAgICAgICAgICAgdmFyIHdvcmtpbmdQcm9wcyA9IHsKICAgICAgICAgICAgICAgICAgLy8gZXhwbGljaXRseSBieXBhc3MgdGhlIHByb3BzIHRoYXQgZG9uJ3QgbmVlZCBjb252ZXJzaW9uCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wcy5lYXNpbmcsCiAgICAgICAgICAgICAgICAgIG9uU3RhcnQ6IHByb3BzLm9uU3RhcnQsCiAgICAgICAgICAgICAgICAgIG9uRmluaXNoOiBwcm9wcy5vbkZpbmlzaCwKICAgICAgICAgICAgICAgICAgb25TdGFydEFsbDogcHJvcHMub25TdGFydEFsbCwKICAgICAgICAgICAgICAgICAgb25GaW5pc2hBbGw6IHByb3BzLm9uRmluaXNoQWxsLAogICAgICAgICAgICAgICAgICB0eXBlTmFtZTogcHJvcHMudHlwZU5hbWUsCiAgICAgICAgICAgICAgICAgIGRpc2FibGVBbGxBbmltYXRpb25zOiBwcm9wcy5kaXNhYmxlQWxsQW5pbWF0aW9ucywKICAgICAgICAgICAgICAgICAgZ2V0UG9zaXRpb246IHByb3BzLmdldFBvc2l0aW9uLAogICAgICAgICAgICAgICAgICBtYWludGFpbkNvbnRhaW5lckhlaWdodDogcHJvcHMubWFpbnRhaW5Db250YWluZXJIZWlnaHQsCiAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ25tZW50OiBwcm9wcy52ZXJ0aWNhbEFsaWdubWVudCwKICAgICAgICAgICAgICAgICAgLy8gRG8gc3RyaW5nLXRvLWludCBjb252ZXJzaW9uIGZvciBhbGwgdGltaW5nLXJlbGF0ZWQgcHJvcHMKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuY29udmVydFRpbWluZ1Byb3AoJ2R1cmF0aW9uJyksCiAgICAgICAgICAgICAgICAgIGRlbGF5OiB0aGlzLmNvbnZlcnRUaW1pbmdQcm9wKCdkZWxheScpLAogICAgICAgICAgICAgICAgICBzdGFnZ2VyRHVyYXRpb25CeTogdGhpcy5jb252ZXJ0VGltaW5nUHJvcCgnc3RhZ2dlckR1cmF0aW9uQnknKSwKICAgICAgICAgICAgICAgICAgc3RhZ2dlckRlbGF5Qnk6IHRoaXMuY29udmVydFRpbWluZ1Byb3AoJ3N0YWdnZXJEZWxheUJ5JyksCiAgICAgICAgICAgICAgICAgIC8vIE91ciBlbnRlci9sZWF2ZSBhbmltYXRpb25zIGNhbiBiZSBzcGVjaWZpZWQgYXMgYm9vbGVhbiAoZGVmYXVsdCBvcgogICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlZCksIHN0cmluZyAocHJlc2V0IG5hbWUpLCBvciBvYmplY3QgKGFjdHVhbCBhbmltYXRpb24gdmFsdWVzKS4KICAgICAgICAgICAgICAgICAgLy8gTGV0J3Mgc3RhbmRhcmRpemUgdGhpcyBzbyB0aGF0IHRoZXkncmUgYWx3YXlzIG9iamVjdHMKICAgICAgICAgICAgICAgICAgYXBwZWFyQW5pbWF0aW9uOiB0aGlzLmNvbnZlcnRBbmltYXRpb25Qcm9wKHByb3BzLmFwcGVhckFuaW1hdGlvbiwgX2VudGVyTGVhdmVQcmVzZXRzLmFwcGVhclByZXNldHMpLAogICAgICAgICAgICAgICAgICBlbnRlckFuaW1hdGlvbjogdGhpcy5jb252ZXJ0QW5pbWF0aW9uUHJvcChwcm9wcy5lbnRlckFuaW1hdGlvbiwgX2VudGVyTGVhdmVQcmVzZXRzLmVudGVyUHJlc2V0cyksCiAgICAgICAgICAgICAgICAgIGxlYXZlQW5pbWF0aW9uOiB0aGlzLmNvbnZlcnRBbmltYXRpb25Qcm9wKHByb3BzLmxlYXZlQW5pbWF0aW9uLCBfZW50ZXJMZWF2ZVByZXNldHMubGVhdmVQcmVzZXRzKSwKICAgICAgICAgICAgICAgICAgZGVsZWdhdGVkOiB7fQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JTdGF0ZWxlc3NGdW5jdGlvbmFsQ29tcG9uZW50cyh3b3JraW5nUHJvcHMuY2hpbGRyZW4pOyAvLyBBY2NlcHQgYGRpc2FibGVBbmltYXRpb25zYCwgYnV0IGFkZCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BzLmRpc2FibGVBbmltYXRpb25zICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICBpZiAobm9kZUVudiAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgKDAsIF9lcnJvck1lc3NhZ2VzLmRlcHJlY2F0ZWREaXNhYmxlQW5pbWF0aW9ucykoKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgd29ya2luZ1Byb3BzLmRpc2FibGVBbGxBbmltYXRpb25zID0gcHJvcHMuZGlzYWJsZUFuaW1hdGlvbnM7CiAgICAgICAgICAgICAgICB9IC8vIEdhdGhlciBhbnkgYWRkaXRpb25hbCBwcm9wczsKICAgICAgICAgICAgICAgIC8vIHRoZXkgd2lsbCBiZSBkZWxlZ2F0ZWQgdG8gdGhlIFJlYWN0RWxlbWVudCBjcmVhdGVkLgoKCiAgICAgICAgICAgICAgICB2YXIgcHJpbWFyeVByb3BLZXlzID0gT2JqZWN0LmtleXMod29ya2luZ1Byb3BzKTsKICAgICAgICAgICAgICAgIHZhciBkZWxlZ2F0ZWRQcm9wcyA9ICgwLCBfaGVscGVycy5vbWl0KSh0aGlzLnByb3BzLCBwcmltYXJ5UHJvcEtleXMpOyAvLyBUaGUgRmxpcE1vdmUgY29udGFpbmVyIGVsZW1lbnQgbmVlZHMgdG8gaGF2ZSBhIG5vbi1zdGF0aWMgcG9zaXRpb24uCiAgICAgICAgICAgICAgICAvLyBXZSB1c2UgYHJlbGF0aXZlYCBieSBkZWZhdWx0LCBidXQgaXQgY2FuIGJlIG92ZXJyaWRkZW4gYnkgdGhlIHVzZXIuCiAgICAgICAgICAgICAgICAvLyBOb3cgdGhhdCB3ZSdyZSBkZWxlZ2F0aW5nIHByb3BzLCB3ZSBuZWVkIHRvIG1lcmdlIHRoaXMgaW4uCgogICAgICAgICAgICAgICAgZGVsZWdhdGVkUHJvcHMuc3R5bGUgPSBfZXh0ZW5kcyh7CiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnCiAgICAgICAgICAgICAgICB9LCBkZWxlZ2F0ZWRQcm9wcy5zdHlsZSk7CiAgICAgICAgICAgICAgICB3b3JraW5nUHJvcHMuZGVsZWdhdGVkID0gZGVsZWdhdGVkUHJvcHM7CiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2luZ1Byb3BzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGtleTogJ2NvbnZlcnRUaW1pbmdQcm9wJywKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydFRpbWluZ1Byb3AocHJvcCkgewogICAgICAgICAgICAgICAgdmFyIHJhd1ZhbHVlID0gdGhpcy5wcm9wc1twcm9wXTsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHR5cGVvZiByYXdWYWx1ZSA9PT0gJ251bWJlcicgPyByYXdWYWx1ZSA6IHBhcnNlSW50KHJhd1ZhbHVlLCAxMCk7CgogICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkgewogICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gRmxpcE1vdmVQcm9wQ29udmVydGVyLmRlZmF1bHRQcm9wc1twcm9wXTsKCiAgICAgICAgICAgICAgICAgIGlmIChub2RlRW52ICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAoMCwgX2Vycm9yTWVzc2FnZXMuaW52YWxpZFR5cGVGb3JUaW1pbmdQcm9wKSh7CiAgICAgICAgICAgICAgICAgICAgICBwcm9wOiBwcm9wLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJhd1ZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcwoKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGtleTogJ2NvbnZlcnRBbmltYXRpb25Qcm9wJywKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydEFuaW1hdGlvblByb3AoYW5pbWF0aW9uLCBwcmVzZXRzKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBhbmltYXRpb24gPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGFuaW1hdGlvbikpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyB0cnVlLCB3ZSB3YW50IHRvIHVzZSB0aGUgZGVmYXVsdCBwcmVzZXQuCiAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGZhbHNlLCB3ZSB3YW50IHRvIHVzZSB0aGUgJ25vbmUnIHByZXNldC4KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVzZXRzW2FuaW1hdGlvbiA/IF9lbnRlckxlYXZlUHJlc2V0cy5kZWZhdWx0UHJlc2V0IDogX2VudGVyTGVhdmVQcmVzZXRzLmRpc2FibGVQcmVzZXRdOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXNldEtleXMgPSBPYmplY3Qua2V5cyhwcmVzZXRzKTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlc2V0S2V5cy5pbmRleE9mKGFuaW1hdGlvbikgPT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlRW52ICE9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgX2Vycm9yTWVzc2FnZXMuaW52YWxpZEVudGVyTGVhdmVQcmVzZXQpKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhbmltYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHRhYmxlVmFsdWVzOiBwcmVzZXRLZXlzLmpvaW4oJywgJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IF9lbnRlckxlYXZlUHJlc2V0cy5kZWZhdWx0UHJlc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVzZXRzW19lbnRlckxlYXZlUHJlc2V0cy5kZWZhdWx0UHJlc2V0XTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlc2V0c1thbmltYXRpb25dOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAga2V5OiAncmVuZGVyJywKICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KENvbXBvc2VkQ29tcG9uZW50LCB0aGlzLmNvbnZlcnRQcm9wcyh0aGlzLnByb3BzKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9XSk7CgogICAgICAgICAgICByZXR1cm4gRmxpcE1vdmVQcm9wQ29udmVydGVyOwogICAgICAgICAgfShfcmVhY3QuQ29tcG9uZW50KSwgX2NsYXNzLmRlZmF1bHRQcm9wcyA9IHsKICAgICAgICAgICAgZWFzaW5nOiAnZWFzZS1pbi1vdXQnLAogICAgICAgICAgICBkdXJhdGlvbjogMzUwLAogICAgICAgICAgICBkZWxheTogMCwKICAgICAgICAgICAgc3RhZ2dlckR1cmF0aW9uQnk6IDAsCiAgICAgICAgICAgIHN0YWdnZXJEZWxheUJ5OiAwLAogICAgICAgICAgICB0eXBlTmFtZTogJ2RpdicsCiAgICAgICAgICAgIGVudGVyQW5pbWF0aW9uOiBfZW50ZXJMZWF2ZVByZXNldHMuZGVmYXVsdFByZXNldCwKICAgICAgICAgICAgbGVhdmVBbmltYXRpb246IF9lbnRlckxlYXZlUHJlc2V0cy5kZWZhdWx0UHJlc2V0LAogICAgICAgICAgICBkaXNhYmxlQWxsQW5pbWF0aW9uczogZmFsc2UsCiAgICAgICAgICAgIGdldFBvc2l0aW9uOiBmdW5jdGlvbiBnZXRQb3NpdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1haW50YWluQ29udGFpbmVySGVpZ2h0OiBmYWxzZSwKICAgICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6ICd0b3AnCiAgICAgICAgICB9LCBfdGVtcDsKICAgICAgICB9CgogICAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IHByb3BDb252ZXJ0ZXI7CiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CiAgICAgICAgLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCiAgICAgIH0pLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQ3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24gd2Fybk9uY2UobXNnKSB7CiAgICAgICAgdmFyIGhhc1dhcm5lZCA9IGZhbHNlOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoIWhhc1dhcm5lZCkgewogICAgICAgICAgICBjb25zb2xlLndhcm4obXNnKTsKICAgICAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgc3RhdGVsZXNzRnVuY3Rpb25hbENvbXBvbmVudFN1cHBsaWVkID0gZXhwb3J0cy5zdGF0ZWxlc3NGdW5jdGlvbmFsQ29tcG9uZW50U3VwcGxpZWQgPSB3YXJuT25jZSgnXG4+PiBFcnJvciwgdmlhIHJlYWN0LWZsaXAtbW92ZSA8PFxuXG5Zb3UgcHJvdmlkZWQgYSBzdGF0ZWxlc3MgZnVuY3Rpb25hbCBjb21wb25lbnQgYXMgYSBjaGlsZCB0byA8RmxpcE1vdmU+LiBVbmZvcnR1bmF0ZWx5LCBTRkNzIGFyZW5cJ3Qgc3VwcG9ydGVkLCBiZWNhdXNlIEZsaXAgTW92ZSBuZWVkcyBhY2Nlc3MgdG8gdGhlIGJhY2tpbmcgaW5zdGFuY2VzIHZpYSByZWZzLCBhbmQgU0ZDcyBkb25cJ3QgaGF2ZSBhIHB1YmxpYyBpbnN0YW5jZSB0aGF0IGhvbGRzIHRoYXQgaW5mby5cblxuUGxlYXNlIHdyYXAgeW91ciBjb21wb25lbnRzIGluIGEgbmF0aXZlIGVsZW1lbnQgKGVnLiA8ZGl2PiksIG9yIGEgbm9uLWZ1bmN0aW9uYWwgY29tcG9uZW50LlxuJyk7CgogICAgICB2YXIgaW52YWxpZFR5cGVGb3JUaW1pbmdQcm9wID0gZXhwb3J0cy5pbnZhbGlkVHlwZUZvclRpbWluZ1Byb3AgPSBmdW5jdGlvbiBpbnZhbGlkVHlwZUZvclRpbWluZ1Byb3AoYXJncykgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdcbj4+IEVycm9yLCB2aWEgcmVhY3QtZmxpcC1tb3ZlIDw8XG5cblRoZSBwcm9wIHlvdSBwcm92aWRlZCBmb3IgXCcnICsgYXJncy5wcm9wICsgJ1wnIGlzIGludmFsaWQuIEl0IG5lZWRzIHRvIGJlIGEgcG9zaXRpdmUgaW50ZWdlciwgb3IgYSBzdHJpbmcgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgdG8gYSBudW1iZXIuIFRoZSB2YWx1ZSB5b3UgcHJvdmlkZWQgaXMgXCcnICsgYXJncy52YWx1ZSArICdcJy5cblxuQXMgYSByZXN1bHQsICB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgd2lsbCBiZSB1c2VkLCB3aGljaCBpcyBcJycgKyBhcmdzLmRlZmF1bHRWYWx1ZSArICdcJy5cbicpOwogICAgICB9OwoKICAgICAgdmFyIGRlcHJlY2F0ZWREaXNhYmxlQW5pbWF0aW9ucyA9IGV4cG9ydHMuZGVwcmVjYXRlZERpc2FibGVBbmltYXRpb25zID0gd2Fybk9uY2UoJ1xuPj4gV2FybmluZywgdmlhIHJlYWN0LWZsaXAtbW92ZSA8PFxuXG5UaGUgXCdkaXNhYmxlQW5pbWF0aW9uc1wnIHByb3AgeW91IHByb3ZpZGVkIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBzd2l0Y2ggdG8gdXNlIFwnZGlzYWJsZUFsbEFuaW1hdGlvbnNcJy5cblxuVGhpcyB3aWxsIGJlY29tZSBhIHNpbGVudCBlcnJvciBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgcmVhY3QtZmxpcC1tb3ZlLlxuJyk7CgogICAgICB2YXIgaW52YWxpZEVudGVyTGVhdmVQcmVzZXQgPSBleHBvcnRzLmludmFsaWRFbnRlckxlYXZlUHJlc2V0ID0gZnVuY3Rpb24gaW52YWxpZEVudGVyTGVhdmVQcmVzZXQoYXJncykgewogICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdcbj4+IEVycm9yLCB2aWEgcmVhY3QtZmxpcC1tb3ZlIDw8XG5cblRoZSBlbnRlci9sZWF2ZSBwcmVzZXQgeW91IHByb3ZpZGVkIGlzIGludmFsaWQuIFdlIGRvblwndCBjdXJyZW50bHkgaGF2ZSBhIFwnJyArIGFyZ3MudmFsdWUgKyAnIHByZXNldC5cJ1xuXG5BY2NlcHRhYmxlIHZhbHVlcyBhcmUgJyArIGFyZ3MuYWNjZXB0YWJsZVZhbHVlcyArICcuIFRoZSBkZWZhdWx0IHZhbHVlIG9mIFwnJyArIGFyZ3MuZGVmYXVsdFZhbHVlICsgJ1wnIHdpbGwgYmUgdXNlZC5cbicpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNDggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgdmFsdWU6IHRydWUKICAgICAgfSk7CiAgICAgIHZhciBlbnRlclByZXNldHMgPSBleHBvcnRzLmVudGVyUHJlc2V0cyA9IHsKICAgICAgICBlbGV2YXRvcjogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKScsCiAgICAgICAgICAgIG9wYWNpdHk6ICcwJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJycsCiAgICAgICAgICAgIG9wYWNpdHk6ICcnCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmYWRlOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIG9wYWNpdHk6ICcwJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIG9wYWNpdHk6ICcnCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhY2NvcmRpb25WZXJ0aWNhbDogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVkoMCknLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdjZW50ZXIgdG9wJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJycsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2NlbnRlciB0b3AnCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhY2NvcmRpb25Ib3Jpem9udGFsOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWCgwKScsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2xlZnQgY2VudGVyJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJycsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2xlZnQgY2VudGVyJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbm9uZTogbnVsbAogICAgICB9OwogICAgICAvKioKICAgICAgICogUmVhY3QgRmxpcCBNb3ZlIHwgZW50ZXJMZWF2ZVByZXNldHMKICAgICAgICogKGMpIDIwMTYtcHJlc2VudCBKb3NodWEgQ29tZWF1CiAgICAgICAqCiAgICAgICAqIFRoaXMgY29udGFpbnMgdGhlIG1hc3RlciBsaXN0IG9mIHByZXNldHMgYXZhaWxhYmxlIGZvciBlbnRlci9sZWF2ZSBhbmltYXRpb25zLAogICAgICAgKiBhbG9uZyB3aXRoIHRoZSBtYXBwaW5nIGJldHdlZW4gcHJlc2V0IGFuZCBzdHlsZXMuCiAgICAgICAqLwoKICAgICAgdmFyIGxlYXZlUHJlc2V0cyA9IGV4cG9ydHMubGVhdmVQcmVzZXRzID0gewogICAgICAgIGVsZXZhdG9yOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJywKICAgICAgICAgICAgb3BhY2l0eTogJzEnCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMCknLAogICAgICAgICAgICBvcGFjaXR5OiAnMCcKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZhZGU6IHsKICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgb3BhY2l0eTogJzEnCiAgICAgICAgICB9LAogICAgICAgICAgdG86IHsKICAgICAgICAgICAgb3BhY2l0eTogJzAnCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhY2NvcmRpb25WZXJ0aWNhbDogewogICAgICAgICAgZnJvbTogewogICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVkoMSknLAogICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICdjZW50ZXIgdG9wJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWSgwKScsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2NlbnRlciB0b3AnCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhY2NvcmRpb25Ib3Jpem9udGFsOiB7CiAgICAgICAgICBmcm9tOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWCgxKScsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2xlZnQgY2VudGVyJwogICAgICAgICAgfSwKICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWCgwKScsCiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ2xlZnQgY2VudGVyJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbm9uZTogbnVsbAogICAgICB9OyAvLyBGb3Igbm93LCBhcHBlYXJQcmVzZXRzIHdpbGwgYmUgaWRlbnRpY2FsIHRvIGVudGVyUHJlc2V0cy4KICAgICAgLy8gQXNzaWduaW5nIGEgY3VzdG9tIGV4cG9ydCBpbiBjYXNlIHdlIGV2ZXIgd2FudCB0byBhZGQgYXBwZWFyLXNwZWNpZmljIG9uZXMuCgogICAgICB2YXIgYXBwZWFyUHJlc2V0cyA9IGV4cG9ydHMuYXBwZWFyUHJlc2V0cyA9IGVudGVyUHJlc2V0czsgLy8gRW1iYXJyYXNzaW5nbHkgZW5vdWdoLCB2Mi4wIGxhdW5jaGVkIHdpdGggdHlwbydlZCBwcmVzZXQgbmFtZXMuCiAgICAgIC8vIFRvIGF2b2lkIHBlbm5pbmcgYSBuZXcgbWFqb3IgdmVyc2lvbiBvdmVyIHNvbWV0aGluZyBzbyBpbmNvbnNlcXVlbnRpYWwsCiAgICAgIC8vIHdlJ3JlIHN1cHBvcnRpbmcgYm90aCBzcGVsbGluZ3MuIEluIGEgZnV0dXJlIHZlcnNpb24sIHRoZXNlIGFsdGVybmF0aXZlcwogICAgICAvLyBtYXkgYmUgZGVwcmVjYXRlZC4KICAgICAgLy8gJEZsb3dGaXhNZQoKICAgICAgZW50ZXJQcmVzZXRzLmFjY29yZGlhblZlcnRpY2FsID0gZW50ZXJQcmVzZXRzLmFjY29yZGlvblZlcnRpY2FsOyAvLyAkRmxvd0ZpeE1lCgogICAgICBlbnRlclByZXNldHMuYWNjb3JkaWFuSG9yaXpvbnRhbCA9IGVudGVyUHJlc2V0cy5hY2NvcmRpb25Ib3Jpem9udGFsOyAvLyAkRmxvd0ZpeE1lCgogICAgICBsZWF2ZVByZXNldHMuYWNjb3JkaWFuVmVydGljYWwgPSBsZWF2ZVByZXNldHMuYWNjb3JkaW9uVmVydGljYWw7IC8vICRGbG93Rml4TWUKCiAgICAgIGxlYXZlUHJlc2V0cy5hY2NvcmRpYW5Ib3Jpem9udGFsID0gbGVhdmVQcmVzZXRzLmFjY29yZGlvbkhvcml6b250YWw7CiAgICAgIHZhciBkZWZhdWx0UHJlc2V0ID0gZXhwb3J0cy5kZWZhdWx0UHJlc2V0ID0gJ2VsZXZhdG9yJzsKICAgICAgdmFyIGRpc2FibGVQcmVzZXQgPSBleHBvcnRzLmRpc2FibGVQcmVzZXQgPSAnbm9uZSc7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTQ5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgICBleHBvcnRzLmNyZWF0ZVRyYW5zaXRpb25TdHJpbmcgPSBleHBvcnRzLmdldE5hdGl2ZU5vZGUgPSBleHBvcnRzLnVwZGF0ZUhlaWdodFBsYWNlaG9sZGVyID0gZXhwb3J0cy5yZW1vdmVOb2RlRnJvbURPTUZsb3cgPSBleHBvcnRzLmdldFBvc2l0aW9uRGVsdGEgPSBleHBvcnRzLmdldFJlbGF0aXZlQm91bmRpbmdCb3ggPSB1bmRlZmluZWQ7CgogICAgICB2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIFJlYWN0IEZsaXAgTW92ZQogICAgICAgKiAoYykgMjAxNi1wcmVzZW50IEpvc2h1YSBDb21lYXUKICAgICAgICoKICAgICAgICogVGhlc2UgbWV0aG9kcyByZWFkIGZyb20gYW5kIHdyaXRlIHRvIHRoZSBET00uCiAgICAgICAqIFRoZXkgYWxtb3N0IGFsd2F5cyBoYXZlIHNpZGUgZWZmZWN0cywgYW5kIHdpbGwgaG9wZWZ1bGx5IGJlY29tZSB0aGUKICAgICAgICogb25seSBzcG90IGluIHRoZSBjb2RlYmFzZSB3aXRoIGltcHVyZSBmdW5jdGlvbnMuCiAgICAgICAqLwoKCiAgICAgIGV4cG9ydHMuYXBwbHlTdHlsZXNUb0RPTU5vZGUgPSBhcHBseVN0eWxlc1RvRE9NTm9kZTsKICAgICAgZXhwb3J0cy53aGljaFRyYW5zaXRpb25FdmVudCA9IHdoaWNoVHJhbnNpdGlvbkV2ZW50OwoKICAgICAgdmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX2hlbHBlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTsKCiAgICAgIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICAgICAgICBpZiAoa2V5IGluIG9iaikgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9ialtrZXldID0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gb2JqOwogICAgICB9CgogICAgICBmdW5jdGlvbiBhcHBseVN0eWxlc1RvRE9NTm9kZShfcmVmKSB7CiAgICAgICAgdmFyIGRvbU5vZGUgPSBfcmVmLmRvbU5vZGUsCiAgICAgICAgICAgIHN0eWxlcyA9IF9yZWYuc3R5bGVzOyAvLyBDYW4ndCBqdXN0IGRvIGFuIG9iamVjdCBtZXJnZSBiZWNhdXNlIGRvbU5vZGUuc3R5bGVzIGlzIG5vIHJlZ3VsYXIgb2JqZWN0LgogICAgICAgIC8vIE5lZWQgdG8gZG8gaXQgdGhpcyB3YXkgZm9yIHRoZSBlbmdpbmUgdG8gZmlyZSBpdHMgYHNldGAgbGlzdGVuZXJzLgoKICAgICAgICBPYmplY3Qua2V5cyhzdHlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgZG9tTm9kZS5zdHlsZS5zZXRQcm9wZXJ0eSgoMCwgX2hlbHBlcnMuaHlwaGVuYXRlKShrZXkpLCBzdHlsZXNba2V5XSk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8gTW9kaWZpZWQgZnJvbSBNb2Rlcm5penIKCgogICAgICBmdW5jdGlvbiB3aGljaFRyYW5zaXRpb25FdmVudCgpIHsKICAgICAgICB2YXIgdHJhbnNpdGlvbnMgPSB7CiAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsCiAgICAgICAgICAnLW8tdHJhbnNpdGlvbic6ICdvVHJhbnNpdGlvbkVuZCcsCiAgICAgICAgICAnLW1vei10cmFuc2l0aW9uJzogJ3RyYW5zaXRpb25lbmQnLAogICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbic6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJwogICAgICAgIH07IC8vIElmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBicm93c2VybGVzcyBlbnZpcm9ubWVudCAoZWcuIFNTUiksIGl0IGRvZXNuJ3QgYXBwbHkuCiAgICAgICAgLy8gUmV0dXJuIGEgcGxhY2Vob2xkZXIgc3RyaW5nLCBmb3IgY29uc2lzdGVudCB0eXBlIHJldHVybi4KCiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiAnJzsKICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmYWtlZWxlbWVudCcpOwogICAgICAgIHZhciBtYXRjaCA9IE9iamVjdC5rZXlzKHRyYW5zaXRpb25zKS5maW5kKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gZWwuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSh0KSAhPT0gdW5kZWZpbmVkOwogICAgICAgIH0pOyAvLyBJZiBubyBgdHJhbnNpdGlvbmAgaXMgZm91bmQsIHdlIG11c3QgYmUgcnVubmluZyBpbiBhIGJyb3dzZXIgc28gYW5jaWVudCwKICAgICAgICAvLyBSZWFjdCBpdHNlbGYgd29uJ3QgcnVuLiBSZXR1cm4gYW4gZW1wdHkgc3RyaW5nLCBmb3IgY29uc2lzdGVudCB0eXBlIHJldHVybgoKICAgICAgICByZXR1cm4gbWF0Y2ggPyB0cmFuc2l0aW9uc1ttYXRjaF0gOiAnJzsKICAgICAgfQoKICAgICAgdmFyIGdldFJlbGF0aXZlQm91bmRpbmdCb3ggPSBleHBvcnRzLmdldFJlbGF0aXZlQm91bmRpbmdCb3ggPSBmdW5jdGlvbiBnZXRSZWxhdGl2ZUJvdW5kaW5nQm94KF9yZWYyKSB7CiAgICAgICAgdmFyIGNoaWxkRG9tTm9kZSA9IF9yZWYyLmNoaWxkRG9tTm9kZSwKICAgICAgICAgICAgcGFyZW50RG9tTm9kZSA9IF9yZWYyLnBhcmVudERvbU5vZGUsCiAgICAgICAgICAgIGdldFBvc2l0aW9uID0gX3JlZjIuZ2V0UG9zaXRpb247CiAgICAgICAgdmFyIHBhcmVudEJveCA9IGdldFBvc2l0aW9uKHBhcmVudERvbU5vZGUpOwoKICAgICAgICB2YXIgX2dldFBvc2l0aW9uID0gZ2V0UG9zaXRpb24oY2hpbGREb21Ob2RlKSwKICAgICAgICAgICAgdG9wID0gX2dldFBvc2l0aW9uLnRvcCwKICAgICAgICAgICAgbGVmdCA9IF9nZXRQb3NpdGlvbi5sZWZ0LAogICAgICAgICAgICByaWdodCA9IF9nZXRQb3NpdGlvbi5yaWdodCwKICAgICAgICAgICAgYm90dG9tID0gX2dldFBvc2l0aW9uLmJvdHRvbSwKICAgICAgICAgICAgd2lkdGggPSBfZ2V0UG9zaXRpb24ud2lkdGgsCiAgICAgICAgICAgIGhlaWdodCA9IF9nZXRQb3NpdGlvbi5oZWlnaHQ7CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0b3A6IHRvcCAtIHBhcmVudEJveC50b3AsCiAgICAgICAgICBsZWZ0OiBsZWZ0IC0gcGFyZW50Qm94LmxlZnQsCiAgICAgICAgICByaWdodDogcGFyZW50Qm94LnJpZ2h0IC0gcmlnaHQsCiAgICAgICAgICBib3R0b206IHBhcmVudEJveC5ib3R0b20gLSBib3R0b20sCiAgICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IGhlaWdodAogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiBnZXRQb3NpdGlvbkRlbHRhCiAgICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGRlbHRhIGJldHdlZW4gdHdvIGJvdW5kaW5nIGJveGVzLCB0byBmaWd1cmUgb3V0CiAgICAgICAqIGhvdyBtYW55IHBpeGVscyBvbiBlYWNoIGF4aXMgdGhlIGVsZW1lbnQgaGFzIG1vdmVkLgogICAgICAgKgogICAgICAgKi8KCgogICAgICB2YXIgZ2V0UG9zaXRpb25EZWx0YSA9IGV4cG9ydHMuZ2V0UG9zaXRpb25EZWx0YSA9IGZ1bmN0aW9uIGdldFBvc2l0aW9uRGVsdGEoX3JlZjMpIHsKICAgICAgICB2YXIgY2hpbGREb21Ob2RlID0gX3JlZjMuY2hpbGREb21Ob2RlLAogICAgICAgICAgICBjaGlsZEJvdW5kaW5nQm94ID0gX3JlZjMuY2hpbGRCb3VuZGluZ0JveCwKICAgICAgICAgICAgcGFyZW50Qm91bmRpbmdCb3ggPSBfcmVmMy5wYXJlbnRCb3VuZGluZ0JveCwKICAgICAgICAgICAgZ2V0UG9zaXRpb24gPSBfcmVmMy5nZXRQb3NpdGlvbjsgLy8gVEVNUDogQSBteXN0ZXJ5IGJ1ZyBpcyBzb21ldGltZXMgY2F1c2luZyB1bm5lY2Vzc2FyeSBib3VuZGluZ0JveGVzIHRvCgogICAgICAgIHZhciBkZWZhdWx0Qm94ID0gewogICAgICAgICAgdG9wOiAwLAogICAgICAgICAgbGVmdDogMCwKICAgICAgICAgIHJpZ2h0OiAwLAogICAgICAgICAgYm90dG9tOiAwLAogICAgICAgICAgaGVpZ2h0OiAwLAogICAgICAgICAgd2lkdGg6IDAKICAgICAgICB9OyAvLyBPdXIgb2xkIGJveCBpcyBpdHMgbGFzdCBjYWxjdWxhdGVkIHBvc2l0aW9uLCBkZXJpdmVkIG9uIG1vdW50IG9yIGF0IHRoZQogICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBwcmV2aW91cyBhbmltYXRpb24uCgogICAgICAgIHZhciBvbGRSZWxhdGl2ZUJveCA9IGNoaWxkQm91bmRpbmdCb3ggfHwgZGVmYXVsdEJveDsKICAgICAgICB2YXIgcGFyZW50Qm94ID0gcGFyZW50Qm91bmRpbmdCb3ggfHwgZGVmYXVsdEJveDsgLy8gT3VyIG5ldyBib3ggaXMgdGhlIG5ldyBmaW5hbCByZXN0aW5nIHBsYWNlOiBXaGVyZSB3ZSBleHBlY3QgaXQgdG8gd2luZCB1cAogICAgICAgIC8vIGFmdGVyIHRoZSBhbmltYXRpb24uIEZpcnN0IHdlIGdldCB0aGUgYm94IGluIGFic29sdXRlIHRlcm1zIChBS0EgcmVsYXRpdmUKICAgICAgICAvLyB0byB0aGUgdmlld3BvcnQpLCBhbmQgdGhlbiB3ZSBjYWxjdWxhdGUgaXRzIHJlbGF0aXZlIGJveCAocmVsYXRpdmUgdG8gdGhlCiAgICAgICAgLy8gcGFyZW50IGNvbnRhaW5lcikKCiAgICAgICAgdmFyIG5ld0Fic29sdXRlQm94ID0gZ2V0UG9zaXRpb24oY2hpbGREb21Ob2RlKTsKICAgICAgICB2YXIgbmV3UmVsYXRpdmVCb3ggPSB7CiAgICAgICAgICB0b3A6IG5ld0Fic29sdXRlQm94LnRvcCAtIHBhcmVudEJveC50b3AsCiAgICAgICAgICBsZWZ0OiBuZXdBYnNvbHV0ZUJveC5sZWZ0IC0gcGFyZW50Qm94LmxlZnQKICAgICAgICB9OwogICAgICAgIHJldHVybiBbb2xkUmVsYXRpdmVCb3gubGVmdCAtIG5ld1JlbGF0aXZlQm94LmxlZnQsIG9sZFJlbGF0aXZlQm94LnRvcCAtIG5ld1JlbGF0aXZlQm94LnRvcF07CiAgICAgIH07CiAgICAgIC8qKiByZW1vdmVOb2RlRnJvbURPTUZsb3cKICAgICAgICogVGhpcyBtZXRob2QgZG9lcyBzb21ldGhpbmcgdmVyeSBzbmVha3k6IGl0IHJlbW92ZXMgYSBET00gbm9kZSBmcm9tIHRoZQogICAgICAgKiBkb2N1bWVudCBmbG93LCBidXQgd2l0aG91dCBhY3R1YWxseSBjaGFuZ2luZyBpdHMgb24tc2NyZWVuIHBvc2l0aW9uLgogICAgICAgKgogICAgICAgKiBJdCB3b3JrcyBieSBjYWxjdWxhdGluZyB3aGVyZSB0aGUgbm9kZSBpcywgYW5kIHRoZW4gYXBwbHlpbmcgc3R5bGVzCiAgICAgICAqIHNvIHRoYXQgaXQgd2luZHMgdXAgYmVpbmcgcG9zaXRpb25lZCBhYnNvbHV0ZWx5LCBidXQgaW4gZXhhY3RseSB0aGUKICAgICAgICogc2FtZSBwbGFjZS4KICAgICAgICoKICAgICAgICogVGhpcyBpcyBhIHZpdGFsIHBhcnQgb2YgdGhlIEZMSVAgdGVjaG5pcXVlLgogICAgICAgKi8KCgogICAgICB2YXIgcmVtb3ZlTm9kZUZyb21ET01GbG93ID0gZXhwb3J0cy5yZW1vdmVOb2RlRnJvbURPTUZsb3cgPSBmdW5jdGlvbiByZW1vdmVOb2RlRnJvbURPTUZsb3coY2hpbGREYXRhLCB2ZXJ0aWNhbEFsaWdubWVudCkgewogICAgICAgIHZhciBkb21Ob2RlID0gY2hpbGREYXRhLmRvbU5vZGUsCiAgICAgICAgICAgIGJvdW5kaW5nQm94ID0gY2hpbGREYXRhLmJvdW5kaW5nQm94OwoKICAgICAgICBpZiAoIWRvbU5vZGUgfHwgIWJvdW5kaW5nQm94KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBGb3IgdGhpcyB0byB3b3JrLCB3ZSBoYXZlIHRvIG9mZnNldCBhbnkgZ2l2ZW4gYG1hcmdpbmAuCgoKICAgICAgICB2YXIgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb21Ob2RlKTsgLy8gV2UgbmVlZCB0byBjbGVhbiB1cCBtYXJnaW5zLCBieSBjb252ZXJ0aW5nIGFuZCByZW1vdmluZyBzdWZmaXg6CiAgICAgICAgLy8gZWcuICcyMXB4JyAtPiAyMQoKICAgICAgICB2YXIgbWFyZ2luQXR0cnMgPSBbJ21hcmdpbi10b3AnLCAnbWFyZ2luLWxlZnQnLCAnbWFyZ2luLXJpZ2h0J107CiAgICAgICAgdmFyIG1hcmdpbnMgPSBtYXJnaW5BdHRycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbWFyZ2luKSB7CiAgICAgICAgICB2YXIgcHJvcGVydHlWYWwgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKG1hcmdpbik7CiAgICAgICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGFjYywgX2RlZmluZVByb3BlcnR5KHt9LCBtYXJnaW4sIE51bWJlcihwcm9wZXJ0eVZhbC5yZXBsYWNlKCdweCcsICcnKSkpKTsKICAgICAgICB9LCB7fSk7IC8vIElmIHdlJ3JlIGJvdHRvbS1hbGlnbmVkLCB3ZSBuZWVkIHRvIGFkZCB0aGUgaGVpZ2h0IG9mIHRoZSBjaGlsZCB0byBpdHMKICAgICAgICAvLyB0b3Agb2Zmc2V0LiBUaGlzIGlzIGJlY2F1c2UsIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBib3R0b20tYWxpZ25lZCwgaXRzCiAgICAgICAgLy8gaGVpZ2h0IHNocmlua3MgZnJvbSB0aGUgdG9wLCBub3QgdGhlIGJvdHRvbS4gV2UncmUgcmVtb3ZpbmcgdGhpcyBub2RlCiAgICAgICAgLy8gZnJvbSB0aGUgZmxvdywgc28gdGhlIHRvcCBpcyBnb2luZyB0byBkcm9wIGJ5IGl0cyBoZWlnaHQuCgogICAgICAgIHZhciB0b3BPZmZzZXQgPSB2ZXJ0aWNhbEFsaWdubWVudCA9PT0gJ2JvdHRvbScgPyBib3VuZGluZ0JveC50b3AgLSBib3VuZGluZ0JveC5oZWlnaHQgOiBib3VuZGluZ0JveC50b3A7CiAgICAgICAgdmFyIHN0eWxlcyA9IHsKICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgICAgdG9wOiB0b3BPZmZzZXQgLSBtYXJnaW5zWydtYXJnaW4tdG9wJ10gKyAncHgnLAogICAgICAgICAgbGVmdDogYm91bmRpbmdCb3gubGVmdCAtIG1hcmdpbnNbJ21hcmdpbi1sZWZ0J10gKyAncHgnLAogICAgICAgICAgcmlnaHQ6IGJvdW5kaW5nQm94LnJpZ2h0IC0gbWFyZ2luc1snbWFyZ2luLXJpZ2h0J10gKyAncHgnCiAgICAgICAgfTsKICAgICAgICBhcHBseVN0eWxlc1RvRE9NTm9kZSh7CiAgICAgICAgICBkb21Ob2RlOiBkb21Ob2RlLAogICAgICAgICAgc3R5bGVzOiBzdHlsZXMKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqIHVwZGF0ZUhlaWdodFBsYWNlaG9sZGVyCiAgICAgICAqIEFuIG9wdGlvbmFsIHByb3BlcnR5IHRvIEZsaXBNb3ZlIGlzIGEgYG1haW50YWluQ29udGFpbmVySGVpZ2h0YCBib29sZWFuLgogICAgICAgKiBUaGlzIHByb3BlcnR5IGNyZWF0ZXMgYSBub2RlIHRoYXQgZmlsbHMgc3BhY2UsIHNvIHRoYXQgdGhlIHBhcmVudAogICAgICAgKiBjb250YWluZXIgZG9lc24ndCBjb2xsYXBzZSB3aGVuIGl0cyBjaGlsZHJlbiBhcmUgcmVtb3ZlZCBmcm9tIHRoZQogICAgICAgKiBkb2N1bWVudCBmbG93LgogICAgICAgKi8KCgogICAgICB2YXIgdXBkYXRlSGVpZ2h0UGxhY2Vob2xkZXIgPSBleHBvcnRzLnVwZGF0ZUhlaWdodFBsYWNlaG9sZGVyID0gZnVuY3Rpb24gdXBkYXRlSGVpZ2h0UGxhY2Vob2xkZXIoX3JlZjQpIHsKICAgICAgICB2YXIgZG9tTm9kZSA9IF9yZWY0LmRvbU5vZGUsCiAgICAgICAgICAgIHBhcmVudERhdGEgPSBfcmVmNC5wYXJlbnREYXRhLAogICAgICAgICAgICBnZXRQb3NpdGlvbiA9IF9yZWY0LmdldFBvc2l0aW9uOwogICAgICAgIHZhciBwYXJlbnREb21Ob2RlID0gcGFyZW50RGF0YS5kb21Ob2RlOwogICAgICAgIHZhciBwYXJlbnRCb3VuZGluZ0JveCA9IHBhcmVudERhdGEuYm91bmRpbmdCb3g7CgogICAgICAgIGlmICghcGFyZW50RG9tTm9kZSB8fCAhcGFyZW50Qm91bmRpbmdCb3gpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIFdlIG5lZWQgdG8gZmluZCB0aGUgaGVpZ2h0IG9mIHRoZSBjb250YWluZXIgKndpdGhvdXQqIHRoZSBwbGFjZWhvbGRlci4KICAgICAgICAvLyBTaW5jZSBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHBsYWNlaG9sZGVyIG1pZ2h0IGFscmVhZHkgYmUgcHJlc2VudCwKICAgICAgICAvLyB3ZSBmaXJzdCBzZXQgaXRzIGhlaWdodCB0byAwLgogICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBjb250YWluZXIgdG8gY29sbGFwc2UgZG93biB0byB0aGUgc2l6ZSBvZiBqdXN0IGl0cwogICAgICAgIC8vIGNvbnRlbnQgKHBsdXMgY29udGFpbmVyIHBhZGRpbmcgb3IgYm9yZGVycyBpZiBhbnkpLgoKCiAgICAgICAgYXBwbHlTdHlsZXNUb0RPTU5vZGUoewogICAgICAgICAgZG9tTm9kZTogZG9tTm9kZSwKICAgICAgICAgIHN0eWxlczogewogICAgICAgICAgICBoZWlnaHQ6ICcwJwogICAgICAgICAgfQogICAgICAgIH0pOyAvLyBGaW5kIHRoZSBkaXN0YW5jZSBieSB3aGljaCB0aGUgY29udGFpbmVyIHdvdWxkIGJlIGNvbGxhcHNlZCBieSBlbGVtZW50cwogICAgICAgIC8vIGxlYXZpbmcuIFdlIGNvbXBhcmUgdGhlIGZyZXNobHktYXZhaWxhYmxlIHBhcmVudCBoZWlnaHQgd2l0aCB0aGUgb3JpZ2luYWwsCiAgICAgICAgLy8gY2FjaGVkIGNvbnRhaW5lciBoZWlnaHQuCgogICAgICAgIHZhciBvcmlnaW5hbFBhcmVudEhlaWdodCA9IHBhcmVudEJvdW5kaW5nQm94LmhlaWdodDsKICAgICAgICB2YXIgY29sbGFwc2VkUGFyZW50SGVpZ2h0ID0gZ2V0UG9zaXRpb24ocGFyZW50RG9tTm9kZSkuaGVpZ2h0OwogICAgICAgIHZhciByZWR1Y3Rpb25JbkhlaWdodCA9IG9yaWdpbmFsUGFyZW50SGVpZ2h0IC0gY29sbGFwc2VkUGFyZW50SGVpZ2h0OyAvLyBJZiB0aGUgY29udGFpbmVyIGhhcyBiZWNvbWUgc2hvcnRlciwgdXBkYXRlIHRoZSBwYWRkaW5nIGVsZW1lbnQncwogICAgICAgIC8vIGhlaWdodCB0byB0YWtlIHVwIHRoZSBkaWZmZXJlbmNlLiBPdGhlcndpc2Ugc2V0IGl0cyBoZWlnaHQgdG8gemVybywKICAgICAgICAvLyBzbyB0aGF0IGl0IGhhcyBubyBlZmZlY3QuCgogICAgICAgIHZhciBzdHlsZXMgPSB7CiAgICAgICAgICBoZWlnaHQ6IHJlZHVjdGlvbkluSGVpZ2h0ID4gMCA/IHJlZHVjdGlvbkluSGVpZ2h0ICsgJ3B4JyA6ICcwJwogICAgICAgIH07CiAgICAgICAgYXBwbHlTdHlsZXNUb0RPTU5vZGUoewogICAgICAgICAgZG9tTm9kZTogZG9tTm9kZSwKICAgICAgICAgIHN0eWxlczogc3R5bGVzCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgZ2V0TmF0aXZlTm9kZSA9IGV4cG9ydHMuZ2V0TmF0aXZlTm9kZSA9IGZ1bmN0aW9uIGdldE5hdGl2ZU5vZGUoZWxlbWVudCkgewogICAgICAgIC8vIFdoZW4gcnVubmluZyBpbiBhIHdpbmRvd2xlc3MgZW52aXJvbm1lbnQsIGFib3J0IQogICAgICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9IC8vIGBlbGVtZW50YCBtYXkgYWxyZWFkeSBiZSBhIG5hdGl2ZSBub2RlLgoKCiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgewogICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICAgICAgfSAvLyBXaGlsZSBSZWFjdERPTSdzIGBmaW5kRE9NTm9kZWAgaXMgZGlzY291cmFnZWQsIGl0J3MgdGhlIG9ubHkKICAgICAgICAvLyBwdWJsaWNseS1leHBvc2VkIHdheSB0byBmaW5kIHRoZSB1bmRlcmx5aW5nIERPTSBub2RlIGZvcgogICAgICAgIC8vIGNvbXBvc2l0ZSBjb21wb25lbnRzLgoKCiAgICAgICAgdmFyIGZvdW5kTm9kZSA9ICgwLCBfcmVhY3REb20uZmluZERPTU5vZGUpKGVsZW1lbnQpOwoKICAgICAgICBpZiAoIShmb3VuZE5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHsKICAgICAgICAgIC8vIFRleHQgbm9kZXMgYXJlIG5vdCBzdXBwb3J0ZWQKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZvdW5kTm9kZTsKICAgICAgfTsKCiAgICAgIHZhciBjcmVhdGVUcmFuc2l0aW9uU3RyaW5nID0gZXhwb3J0cy5jcmVhdGVUcmFuc2l0aW9uU3RyaW5nID0gZnVuY3Rpb24gY3JlYXRlVHJhbnNpdGlvblN0cmluZyhpbmRleCwgcHJvcHMpIHsKICAgICAgICB2YXIgZGVsYXkgPSBwcm9wcy5kZWxheSwKICAgICAgICAgICAgZHVyYXRpb24gPSBwcm9wcy5kdXJhdGlvbjsKICAgICAgICB2YXIgc3RhZ2dlckR1cmF0aW9uQnkgPSBwcm9wcy5zdGFnZ2VyRHVyYXRpb25CeSwKICAgICAgICAgICAgc3RhZ2dlckRlbGF5QnkgPSBwcm9wcy5zdGFnZ2VyRGVsYXlCeSwKICAgICAgICAgICAgZWFzaW5nID0gcHJvcHMuZWFzaW5nOwogICAgICAgIGRlbGF5ICs9IGluZGV4ICogc3RhZ2dlckRlbGF5Qnk7CiAgICAgICAgZHVyYXRpb24gKz0gaW5kZXggKiBzdGFnZ2VyRHVyYXRpb25CeTsKICAgICAgICB2YXIgY3NzUHJvcGVydGllcyA9IFsndHJhbnNmb3JtJywgJ29wYWNpdHknXTsKICAgICAgICByZXR1cm4gY3NzUHJvcGVydGllcy5tYXAoZnVuY3Rpb24gKHByb3ApIHsKICAgICAgICAgIHJldHVybiBwcm9wICsgJyAnICsgZHVyYXRpb24gKyAnbXMgJyArIGVhc2luZyArICcgJyArIGRlbGF5ICsgJ21zJzsKICAgICAgICB9KS5qb2luKCcsICcpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNTAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsKICAgICAgLyohCiAgICAgIEF1dG9zaXplIDMuMC4yMQogICAgICBsaWNlbnNlOiBNSVQKICAgICAgaHR0cDovL3d3dy5qYWNrbG1vb3JlLmNvbS9hdXRvc2l6ZQogICAgICAqLwoKCiAgICAgIChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgICAgICAgaWYgKHRydWUpIHsKICAgICAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtleHBvcnRzLCBtb2R1bGVdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSBmYWN0b3J5LCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgPyBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXykgOiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgZmFjdG9yeShleHBvcnRzLCBtb2R1bGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbW9kID0gewogICAgICAgICAgICBleHBvcnRzOiB7fQogICAgICAgICAgfTsKICAgICAgICAgIGZhY3RvcnkobW9kLmV4cG9ydHMsIG1vZCk7CiAgICAgICAgICBnbG9iYWwuYXV0b3NpemUgPSBtb2QuZXhwb3J0czsKICAgICAgICB9CiAgICAgIH0pKHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzLCBtb2R1bGUpIHsKICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgIHZhciBtYXAgPSB0eXBlb2YgTWFwID09PSAiZnVuY3Rpb24iID8gbmV3IE1hcCgpIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGtleXMgPSBbXTsKICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gaGFzKGtleSkgewogICAgICAgICAgICAgIHJldHVybiBrZXlzLmluZGV4T2Yoa2V5KSA+IC0xOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldChrZXkpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzW2tleXMuaW5kZXhPZihrZXkpXTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkgewogICAgICAgICAgICAgIGlmIChrZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2RlbGV0ZSc6IGZ1bmN0aW9uIF9kZWxldGUoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIGluZGV4ID0ga2V5cy5pbmRleE9mKGtleSk7CgogICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7CiAgICAgICAgICAgICAgICBrZXlzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgICB2YWx1ZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSgpOwoKICAgICAgICB2YXIgY3JlYXRlRXZlbnQgPSBmdW5jdGlvbiBjcmVhdGVFdmVudChuYW1lKSB7CiAgICAgICAgICByZXR1cm4gbmV3IEV2ZW50KG5hbWUsIHsKICAgICAgICAgICAgYnViYmxlczogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBFdmVudCgndGVzdCcpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8vIElFIGRvZXMgbm90IHN1cHBvcnQgYG5ldyBFdmVudCgpYAogICAgICAgICAgY3JlYXRlRXZlbnQgPSBmdW5jdGlvbiBjcmVhdGVFdmVudChuYW1lKSB7CiAgICAgICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTsKICAgICAgICAgICAgZXZ0LmluaXRFdmVudChuYW1lLCB0cnVlLCBmYWxzZSk7CiAgICAgICAgICAgIHJldHVybiBldnQ7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYXNzaWduKHRhKSB7CiAgICAgICAgICBpZiAoIXRhIHx8ICF0YS5ub2RlTmFtZSB8fCB0YS5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJyB8fCBtYXAuaGFzKHRhKSkgcmV0dXJuOwogICAgICAgICAgdmFyIGhlaWdodE9mZnNldCA9IG51bGw7CiAgICAgICAgICB2YXIgY2xpZW50V2lkdGggPSB0YS5jbGllbnRXaWR0aDsKICAgICAgICAgIHZhciBjYWNoZWRIZWlnaHQgPSBudWxsOwoKICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhLCBudWxsKTsKCiAgICAgICAgICAgIGlmIChzdHlsZS5yZXNpemUgPT09ICd2ZXJ0aWNhbCcpIHsKICAgICAgICAgICAgICB0YS5zdHlsZS5yZXNpemUgPSAnbm9uZSc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3R5bGUucmVzaXplID09PSAnYm90aCcpIHsKICAgICAgICAgICAgICB0YS5zdHlsZS5yZXNpemUgPSAnaG9yaXpvbnRhbCc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzdHlsZS5ib3hTaXppbmcgPT09ICdjb250ZW50LWJveCcpIHsKICAgICAgICAgICAgICBoZWlnaHRPZmZzZXQgPSAtKHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ1RvcCkgKyBwYXJzZUZsb2F0KHN0eWxlLnBhZGRpbmdCb3R0b20pKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBoZWlnaHRPZmZzZXQgPSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSArIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpOwogICAgICAgICAgICB9IC8vIEZpeCB3aGVuIGEgdGV4dGFyZWEgaXMgbm90IG9uIGRvY3VtZW50IGJvZHkgYW5kIGhlaWdodE9mZnNldCBpcyBOb3QgYSBOdW1iZXIKCgogICAgICAgICAgICBpZiAoaXNOYU4oaGVpZ2h0T2Zmc2V0KSkgewogICAgICAgICAgICAgIGhlaWdodE9mZnNldCA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVwZGF0ZSgpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNoYW5nZU92ZXJmbG93KHZhbHVlKSB7CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAvLyBDaHJvbWUvU2FmYXJpLXNwZWNpZmljIGZpeDoKICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB0ZXh0YXJlYSB5LW92ZXJmbG93IGlzIGhpZGRlbiwgQ2hyb21lL1NhZmFyaSBkbyBub3QgcmVmbG93IHRoZSB0ZXh0IHRvIGFjY291bnQgZm9yIHRoZSBzcGFjZQogICAgICAgICAgICAgIC8vIG1hZGUgYXZhaWxhYmxlIGJ5IHJlbW92aW5nIHRoZSBzY3JvbGxiYXIuIFRoZSBmb2xsb3dpbmcgZm9yY2VzIHRoZSBuZWNlc3NhcnkgdGV4dCByZWZsb3cuCiAgICAgICAgICAgICAgdmFyIHdpZHRoID0gdGEuc3R5bGUud2lkdGg7CiAgICAgICAgICAgICAgdGEuc3R5bGUud2lkdGggPSAnMHB4JzsgLy8gRm9yY2UgcmVmbG93OgoKICAgICAgICAgICAgICAvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovCgogICAgICAgICAgICAgIHRhLm9mZnNldFdpZHRoOwogICAgICAgICAgICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovCgogICAgICAgICAgICAgIHRhLnN0eWxlLndpZHRoID0gd2lkdGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGEuc3R5bGUub3ZlcmZsb3dZID0gdmFsdWU7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gZ2V0UGFyZW50T3ZlcmZsb3dzKGVsKSB7CiAgICAgICAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgICAgICAgIHdoaWxlIChlbCAmJiBlbC5wYXJlbnROb2RlICYmIGVsLnBhcmVudE5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSB7CiAgICAgICAgICAgICAgaWYgKGVsLnBhcmVudE5vZGUuc2Nyb2xsVG9wKSB7CiAgICAgICAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5vZGU6IGVsLnBhcmVudE5vZGUsCiAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogZWwucGFyZW50Tm9kZS5zY3JvbGxUb3AKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gYXJyOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgICAgICAgICAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gdGEuc3R5bGUuaGVpZ2h0OwogICAgICAgICAgICB2YXIgb3ZlcmZsb3dzID0gZ2V0UGFyZW50T3ZlcmZsb3dzKHRhKTsKICAgICAgICAgICAgdmFyIGRvY1RvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOyAvLyBOZWVkZWQgZm9yIE1vYmlsZSBJRSAodGlja2V0ICMyNDApCgogICAgICAgICAgICB0YS5zdHlsZS5oZWlnaHQgPSAnYXV0byc7CiAgICAgICAgICAgIHZhciBlbmRIZWlnaHQgPSB0YS5zY3JvbGxIZWlnaHQgKyBoZWlnaHRPZmZzZXQ7CgogICAgICAgICAgICBpZiAodGEuc2Nyb2xsSGVpZ2h0ID09PSAwKSB7CiAgICAgICAgICAgICAgLy8gSWYgdGhlIHNjcm9sbEhlaWdodCBpcyAwLCB0aGVuIHRoZSBlbGVtZW50IHByb2JhYmx5IGhhcyBkaXNwbGF5Om5vbmUgb3IgaXMgZGV0YWNoZWQgZnJvbSB0aGUgRE9NLgogICAgICAgICAgICAgIHRhLnN0eWxlLmhlaWdodCA9IG9yaWdpbmFsSGVpZ2h0OwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGEuc3R5bGUuaGVpZ2h0ID0gZW5kSGVpZ2h0ICsgJ3B4JzsgLy8gdXNlZCB0byBjaGVjayBpZiBhbiB1cGRhdGUgaXMgYWN0dWFsbHkgbmVjZXNzYXJ5IG9uIHdpbmRvdy5yZXNpemUKCiAgICAgICAgICAgIGNsaWVudFdpZHRoID0gdGEuY2xpZW50V2lkdGg7IC8vIHByZXZlbnRzIHNjcm9sbC1wb3NpdGlvbiBqdW1waW5nCgogICAgICAgICAgICBvdmVyZmxvd3MuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICBlbC5ub2RlLnNjcm9sbFRvcCA9IGVsLnNjcm9sbFRvcDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoZG9jVG9wKSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IGRvY1RvcDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgICAgICAgcmVzaXplKCk7CiAgICAgICAgICAgIHZhciBzdHlsZUhlaWdodCA9IE1hdGgucm91bmQocGFyc2VGbG9hdCh0YS5zdHlsZS5oZWlnaHQpKTsKICAgICAgICAgICAgdmFyIGNvbXB1dGVkID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpOyAvLyBVc2luZyBvZmZzZXRIZWlnaHQgYXMgYSByZXBsYWNlbWVudCBmb3IgY29tcHV0ZWQuaGVpZ2h0IGluIElFLCBiZWNhdXNlIElFIGRvZXMgbm90IGFjY291bnQgdXNlIG9mIGJvcmRlci1ib3gKCiAgICAgICAgICAgIHZhciBhY3R1YWxIZWlnaHQgPSBjb21wdXRlZC5ib3hTaXppbmcgPT09ICdjb250ZW50LWJveCcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoY29tcHV0ZWQuaGVpZ2h0KSkgOiB0YS5vZmZzZXRIZWlnaHQ7IC8vIFRoZSBhY3R1YWwgaGVpZ2h0IG5vdCBtYXRjaGluZyB0aGUgc3R5bGUgaGVpZ2h0IChzZXQgdmlhIHRoZSByZXNpemUgbWV0aG9kKSBpbmRpY2F0ZXMgdGhhdAogICAgICAgICAgICAvLyB0aGUgbWF4LWhlaWdodCBoYXMgYmVlbiBleGNlZWRlZCwgaW4gd2hpY2ggY2FzZSB0aGUgb3ZlcmZsb3cgc2hvdWxkIGJlIGFsbG93ZWQuCgogICAgICAgICAgICBpZiAoYWN0dWFsSGVpZ2h0ICE9PSBzdHlsZUhlaWdodCkgewogICAgICAgICAgICAgIGlmIChjb21wdXRlZC5vdmVyZmxvd1kgPT09ICdoaWRkZW4nKSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VPdmVyZmxvdygnc2Nyb2xsJyk7CiAgICAgICAgICAgICAgICByZXNpemUoKTsKICAgICAgICAgICAgICAgIGFjdHVhbEhlaWdodCA9IGNvbXB1dGVkLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94JyA/IE1hdGgucm91bmQocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YSwgbnVsbCkuaGVpZ2h0KSkgOiB0YS5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIE5vcm1hbGx5IGtlZXAgb3ZlcmZsb3cgc2V0IHRvIGhpZGRlbiwgdG8gYXZvaWQgZmxhc2ggb2Ygc2Nyb2xsYmFyIGFzIHRoZSB0ZXh0YXJlYSBleHBhbmRzLgogICAgICAgICAgICAgIGlmIChjb21wdXRlZC5vdmVyZmxvd1kgIT09ICdoaWRkZW4nKSB7CiAgICAgICAgICAgICAgICBjaGFuZ2VPdmVyZmxvdygnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICByZXNpemUoKTsKICAgICAgICAgICAgICAgIGFjdHVhbEhlaWdodCA9IGNvbXB1dGVkLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94JyA/IE1hdGgucm91bmQocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YSwgbnVsbCkuaGVpZ2h0KSkgOiB0YS5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY2FjaGVkSGVpZ2h0ICE9PSBhY3R1YWxIZWlnaHQpIHsKICAgICAgICAgICAgICBjYWNoZWRIZWlnaHQgPSBhY3R1YWxIZWlnaHQ7CiAgICAgICAgICAgICAgdmFyIGV2dCA9IGNyZWF0ZUV2ZW50KCdhdXRvc2l6ZTpyZXNpemVkJyk7CgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0YS5kaXNwYXRjaEV2ZW50KGV2dCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7Ly8gRmlyZWZveCB3aWxsIHRocm93IGFuIGVycm9yIG9uIGRpc3BhdGNoRXZlbnQgZm9yIGEgZGV0YWNoZWQgZWxlbWVudAogICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9ODg5Mzc2CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHBhZ2VSZXNpemUgPSBmdW5jdGlvbiBwYWdlUmVzaXplKCkgewogICAgICAgICAgICBpZiAodGEuY2xpZW50V2lkdGggIT09IGNsaWVudFdpZHRoKSB7CiAgICAgICAgICAgICAgdXBkYXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgdmFyIGRlc3Ryb3kgPSBmdW5jdGlvbiAoc3R5bGUpIHsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHBhZ2VSZXNpemUsIGZhbHNlKTsKICAgICAgICAgICAgdGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGUsIGZhbHNlKTsKICAgICAgICAgICAgdGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB1cGRhdGUsIGZhbHNlKTsKICAgICAgICAgICAgdGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXV0b3NpemU6ZGVzdHJveScsIGRlc3Ryb3ksIGZhbHNlKTsKICAgICAgICAgICAgdGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXV0b3NpemU6dXBkYXRlJywgdXBkYXRlLCBmYWxzZSk7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICB0YS5zdHlsZVtrZXldID0gc3R5bGVba2V5XTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG1hcFsnZGVsZXRlJ10odGEpOwogICAgICAgICAgfS5iaW5kKHRhLCB7CiAgICAgICAgICAgIGhlaWdodDogdGEuc3R5bGUuaGVpZ2h0LAogICAgICAgICAgICByZXNpemU6IHRhLnN0eWxlLnJlc2l6ZSwKICAgICAgICAgICAgb3ZlcmZsb3dZOiB0YS5zdHlsZS5vdmVyZmxvd1ksCiAgICAgICAgICAgIG92ZXJmbG93WDogdGEuc3R5bGUub3ZlcmZsb3dYLAogICAgICAgICAgICB3b3JkV3JhcDogdGEuc3R5bGUud29yZFdyYXAKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOmRlc3Ryb3knLCBkZXN0cm95LCBmYWxzZSk7IC8vIElFOSBkb2VzIG5vdCBmaXJlIG9ucHJvcGVydHljaGFuZ2Ugb3Igb25pbnB1dCBmb3IgZGVsZXRpb25zLAogICAgICAgICAgLy8gc28gYmluZGluZyB0byBvbmtleXVwIHRvIGNhdGNoIG1vc3Qgb2YgdGhvc2UgZXZlbnRzLgogICAgICAgICAgLy8gVGhlcmUgaXMgbm8gd2F5IHRoYXQgSSBrbm93IG9mIHRvIGRldGVjdCBzb21ldGhpbmcgbGlrZSAnY3V0JyBpbiBJRTkuCgogICAgICAgICAgaWYgKCdvbnByb3BlcnR5Y2hhbmdlJyBpbiB0YSAmJiAnb25pbnB1dCcgaW4gdGEpIHsKICAgICAgICAgICAgdGEuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB1cGRhdGUsIGZhbHNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcGFnZVJlc2l6ZSwgZmFsc2UpOwogICAgICAgICAgdGEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGUsIGZhbHNlKTsKICAgICAgICAgIHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOnVwZGF0ZScsIHVwZGF0ZSwgZmFsc2UpOwogICAgICAgICAgdGEuc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7CiAgICAgICAgICB0YS5zdHlsZS53b3JkV3JhcCA9ICdicmVhay13b3JkJzsKICAgICAgICAgIG1hcC5zZXQodGEsIHsKICAgICAgICAgICAgZGVzdHJveTogZGVzdHJveSwKICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGUKICAgICAgICAgIH0pOwogICAgICAgICAgaW5pdCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZGVzdHJveSh0YSkgewogICAgICAgICAgdmFyIG1ldGhvZHMgPSBtYXAuZ2V0KHRhKTsKCiAgICAgICAgICBpZiAobWV0aG9kcykgewogICAgICAgICAgICBtZXRob2RzLmRlc3Ryb3koKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZSh0YSkgewogICAgICAgICAgdmFyIG1ldGhvZHMgPSBtYXAuZ2V0KHRhKTsKCiAgICAgICAgICBpZiAobWV0aG9kcykgewogICAgICAgICAgICBtZXRob2RzLnVwZGF0ZSgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIGF1dG9zaXplID0gbnVsbDsgLy8gRG8gbm90aGluZyBpbiBOb2RlLmpzIGVudmlyb25tZW50IGFuZCBJRTggKG9yIGxvd2VyKQoKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBhdXRvc2l6ZSA9IGZ1bmN0aW9uIGF1dG9zaXplKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBlbDsKICAgICAgICAgIH07CgogICAgICAgICAgYXV0b3NpemUuZGVzdHJveSA9IGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICByZXR1cm4gZWw7CiAgICAgICAgICB9OwoKICAgICAgICAgIGF1dG9zaXplLnVwZGF0ZSA9IGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICByZXR1cm4gZWw7CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdXRvc2l6ZSA9IGZ1bmN0aW9uIGF1dG9zaXplKGVsLCBvcHRpb25zKSB7CiAgICAgICAgICAgIGlmIChlbCkgewogICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWwubGVuZ3RoID8gZWwgOiBbZWxdLCBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGFzc2lnbih4LCBvcHRpb25zKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfTsKCiAgICAgICAgICBhdXRvc2l6ZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIGlmIChlbCkgewogICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWwubGVuZ3RoID8gZWwgOiBbZWxdLCBkZXN0cm95KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfTsKCiAgICAgICAgICBhdXRvc2l6ZS51cGRhdGUgPSBmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIHVwZGF0ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBlbDsKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGF1dG9zaXplOwogICAgICB9KTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTUxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKGxhbmd1YWdlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBfcG9seWdsb3QyWyJkZWZhdWx0Il0oewogICAgICAgICAgcGhyYXNlczogaTE4bk1hcFtsYW5ndWFnZV0gfHwgaTE4bk1hcC5lbiwKICAgICAgICAgIGxvY2FsZTogbGFuZ3VhZ2UKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBfcG9seWdsb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Mik7CgogICAgICB2YXIgX3BvbHlnbG90MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BvbHlnbG90KTsKCiAgICAgIHZhciBfemhDTiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUzKTsKCiAgICAgIHZhciBfemhDTjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF96aENOKTsKCiAgICAgIHZhciBfemhUVyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTsKCiAgICAgIHZhciBfemhUVzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF96aFRXKTsKCiAgICAgIHZhciBfZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSk7CgogICAgICB2YXIgX2VuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VuKTsKCiAgICAgIHZhciBfZXNFUyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU2KTsKCiAgICAgIHZhciBfZXNFUzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc0VTKTsKCiAgICAgIHZhciBfZnIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7CgogICAgICB2YXIgX2ZyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZyKTsKCiAgICAgIHZhciBfcnUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCk7CgogICAgICB2YXIgX3J1MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3J1KTsKCiAgICAgIHZhciBfZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OSk7CgogICAgICB2YXIgX2RlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGkxOG5NYXAgPSB7CiAgICAgICAgJ3poJzogX3poQ04yWyJkZWZhdWx0Il0sCiAgICAgICAgJ3poLUNOJzogX3poQ04yWyJkZWZhdWx0Il0sCiAgICAgICAgJ3poLVRXJzogX3poVFcyWyJkZWZhdWx0Il0sCiAgICAgICAgJ2VuJzogX2VuMlsiZGVmYXVsdCJdLAogICAgICAgICdlcy1FUyc6IF9lc0VTMlsiZGVmYXVsdCJdLAogICAgICAgICdmcic6IF9mcjJbImRlZmF1bHQiXSwKICAgICAgICAncnUnOiBfcnUyWyJkZWZhdWx0Il0sCiAgICAgICAgJ2RlJzogX2RlMlsiZGVmYXVsdCJdCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTUyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyAvLyAgICAgKGMpIDIwMTIgQWlyYm5iLCBJbmMuCiAgICAgIC8vCiAgICAgIC8vICAgICBwb2x5Z2xvdC5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQlNECiAgICAgIC8vICAgICBsaWNlbnNlLiBGb3IgYWxsIGxpY2Vuc2luZyBpbmZvcm1hdGlvbiwgZGV0YWlscywgYW5kIGRvY3VtZW50aW9uOgogICAgICAvLyAgICAgaHR0cDovL2FpcmJuYi5naXRodWIuY29tL3BvbHlnbG90LmpzCiAgICAgIC8vCiAgICAgIC8vCiAgICAgIC8vIFBvbHlnbG90LmpzIGlzIGFuIEkxOG4gaGVscGVyIGxpYnJhcnkgd3JpdHRlbiBpbiBKYXZhU2NyaXB0LCBtYWRlIHRvCiAgICAgIC8vIHdvcmsgYm90aCBpbiB0aGUgYnJvd3NlciBhbmQgaW4gTm9kZS4gSXQgcHJvdmlkZXMgYSBzaW1wbGUgc29sdXRpb24gZm9yCiAgICAgIC8vIGludGVycG9sYXRpb24gYW5kIHBsdXJhbGl6YXRpb24sIGJhc2VkIG9mZiBvZiBBaXJibmIncwogICAgICAvLyBleHBlcmllbmNlIGFkZGluZyBJMThuIGZ1bmN0aW9uYWxpdHkgdG8gaXRzIEJhY2tib25lLmpzIGFuZCBOb2RlIGFwcHMuCiAgICAgIC8vCiAgICAgIC8vIFBvbHlsZ2xvdCBpcyBhZ25vc3RpYyB0byB5b3VyIHRyYW5zbGF0aW9uIGJhY2tlbmQuIEl0IGRvZXNuJ3QgcGVyZm9ybSBhbnkKICAgICAgLy8gdHJhbnNsYXRpb247IGl0IHNpbXBseSBnaXZlcyB5b3UgYSB3YXkgdG8gbWFuYWdlIHRyYW5zbGF0ZWQgcGhyYXNlcyBmcm9tCiAgICAgIC8vIHlvdXIgY2xpZW50LSBvciBzZXJ2ZXItc2lkZSBKYXZhU2NyaXB0IGFwcGxpY2F0aW9uLgogICAgICAvLwoKCiAgICAgIChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkgewogICAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KHJvb3QpOwogICAgICAgICAgfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwogICAgICAgIH0gZWxzZSBpZiAoX3R5cGVvZjQoZXhwb3J0cykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkocm9vdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJvb3QuUG9seWdsb3QgPSBmYWN0b3J5KHJvb3QpOwogICAgICAgIH0KICAgICAgfSkodGhpcywgZnVuY3Rpb24gKHJvb3QpIHsKICAgICAgICAndXNlIHN0cmljdCc7IC8vICMjIyBQb2x5Z2xvdCBjbGFzcyBjb25zdHJ1Y3RvcgoKICAgICAgICBmdW5jdGlvbiBQb2x5Z2xvdChvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHRoaXMucGhyYXNlcyA9IHt9OwogICAgICAgICAgdGhpcy5leHRlbmQob3B0aW9ucy5waHJhc2VzIHx8IHt9KTsKICAgICAgICAgIHRoaXMuY3VycmVudExvY2FsZSA9IG9wdGlvbnMubG9jYWxlIHx8ICdlbic7CiAgICAgICAgICB0aGlzLmFsbG93TWlzc2luZyA9ICEhb3B0aW9ucy5hbGxvd01pc3Npbmc7CiAgICAgICAgICB0aGlzLndhcm4gPSBvcHRpb25zLndhcm4gfHwgd2FybjsKICAgICAgICB9IC8vICMjIyBWZXJzaW9uCgoKICAgICAgICBQb2x5Z2xvdC5WRVJTSU9OID0gJzAuNC4zJzsgLy8gIyMjIHBvbHlnbG90LmxvY2FsZShbbG9jYWxlXSkKICAgICAgICAvLwogICAgICAgIC8vIEdldCBvciBzZXQgbG9jYWxlLiBJbnRlcm5hbGx5LCBQb2x5Z2xvdCBvbmx5IHVzZXMgbG9jYWxlIGZvciBwbHVyYWxpemF0aW9uLgoKICAgICAgICBQb2x5Z2xvdC5wcm90b3R5cGUubG9jYWxlID0gZnVuY3Rpb24gKG5ld0xvY2FsZSkgewogICAgICAgICAgaWYgKG5ld0xvY2FsZSkgdGhpcy5jdXJyZW50TG9jYWxlID0gbmV3TG9jYWxlOwogICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudExvY2FsZTsKICAgICAgICB9OyAvLyAjIyMgcG9seWdsb3QuZXh0ZW5kKHBocmFzZXMpCiAgICAgICAgLy8KICAgICAgICAvLyBVc2UgYGV4dGVuZGAgdG8gdGVsbCBQb2x5Z2xvdCBob3cgdG8gdHJhbnNsYXRlIGEgZ2l2ZW4ga2V5LgogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHBvbHlnbG90LmV4dGVuZCh7CiAgICAgICAgLy8gICAgICAgImhlbGxvIjogIkhlbGxvIiwKICAgICAgICAvLyAgICAgICAiaGVsbG9fbmFtZSI6ICJIZWxsbywgJXtuYW1lfSIKICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgLy8KICAgICAgICAvLyBUaGUga2V5IGNhbiBiZSBhbnkgc3RyaW5nLiAgRmVlbCBmcmVlIHRvIGNhbGwgYGV4dGVuZGAgbXVsdGlwbGUgdGltZXM7CiAgICAgICAgLy8gaXQgd2lsbCBvdmVycmlkZSBhbnkgcGhyYXNlcyB3aXRoIHRoZSBzYW1lIGtleSwgYnV0IGxlYXZlIGV4aXN0aW5nIHBocmFzZXMKICAgICAgICAvLyB1bnRvdWNoZWQuCiAgICAgICAgLy8KICAgICAgICAvLyBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHBhc3MgbmVzdGVkIHBocmFzZSBvYmplY3RzLCB3aGljaCBnZXQgZmxhdHRlbmVkCiAgICAgICAgLy8gaW50byBhbiBvYmplY3Qgd2l0aCB0aGUgbmVzdGVkIGtleXMgY29uY2F0ZW5hdGVkIHVzaW5nIGRvdCBub3RhdGlvbi4KICAgICAgICAvLwogICAgICAgIC8vICAgICBwb2x5Z2xvdC5leHRlbmQoewogICAgICAgIC8vICAgICAgICJuYXYiOiB7CiAgICAgICAgLy8gICAgICAgICAiaGVsbG8iOiAiSGVsbG8iLAogICAgICAgIC8vICAgICAgICAgImhlbGxvX25hbWUiOiAiSGVsbG8sICV7bmFtZX0iLAogICAgICAgIC8vICAgICAgICAgInNpZGViYXIiOiB7CiAgICAgICAgLy8gICAgICAgICAgICJ3ZWxjb21lIjogIldlbGNvbWUiCiAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgLy8gICAgICAgfQogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLwogICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhwb2x5Z2xvdC5waHJhc2VzKTsKICAgICAgICAvLyAgICAgLy8gewogICAgICAgIC8vICAgICAvLyAgICduYXYuaGVsbG8nOiAnSGVsbG8nLAogICAgICAgIC8vICAgICAvLyAgICduYXYuaGVsbG9fbmFtZSc6ICdIZWxsbywgJXtuYW1lfScsCiAgICAgICAgLy8gICAgIC8vICAgJ25hdi5zaWRlYmFyLndlbGNvbWUnOiAnV2VsY29tZScKICAgICAgICAvLyAgICAgLy8gfQogICAgICAgIC8vCiAgICAgICAgLy8gYGV4dGVuZGAgYWNjZXB0cyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQsIGBwcmVmaXhgLCB3aGljaCBjYW4gYmUgdXNlZAogICAgICAgIC8vIHRvIHByZWZpeCBldmVyeSBrZXkgaW4gdGhlIHBocmFzZXMgb2JqZWN0IHdpdGggc29tZSBzdHJpbmcsIHVzaW5nIGRvdAogICAgICAgIC8vIG5vdGF0aW9uLgogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHBvbHlnbG90LmV4dGVuZCh7CiAgICAgICAgLy8gICAgICAgImhlbGxvIjogIkhlbGxvIiwKICAgICAgICAvLyAgICAgICAiaGVsbG9fbmFtZSI6ICJIZWxsbywgJXtuYW1lfSIKICAgICAgICAvLyAgICAgfSwgIm5hdiIpOwogICAgICAgIC8vCiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHBvbHlnbG90LnBocmFzZXMpOwogICAgICAgIC8vICAgICAvLyB7CiAgICAgICAgLy8gICAgIC8vICAgJ25hdi5oZWxsbyc6ICdIZWxsbycsCiAgICAgICAgLy8gICAgIC8vICAgJ25hdi5oZWxsb19uYW1lJzogJ0hlbGxvLCAle25hbWV9JwogICAgICAgIC8vICAgICAvLyB9CiAgICAgICAgLy8KICAgICAgICAvLyBUaGlzIGZlYXR1cmUgaXMgdXNlZCBpbnRlcm5hbGx5IHRvIHN1cHBvcnQgbmVzdGVkIHBocmFzZSBvYmplY3RzLgoKCiAgICAgICAgUG9seWdsb3QucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIChtb3JlUGhyYXNlcywgcHJlZml4KSB7CiAgICAgICAgICB2YXIgcGhyYXNlOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtb3JlUGhyYXNlcykgewogICAgICAgICAgICBpZiAobW9yZVBocmFzZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICAgIHBocmFzZSA9IG1vcmVQaHJhc2VzW2tleV07CiAgICAgICAgICAgICAgaWYgKHByZWZpeCkga2V5ID0gcHJlZml4ICsgJy4nICsga2V5OwoKICAgICAgICAgICAgICBpZiAoX3R5cGVvZjQocGhyYXNlKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kKHBocmFzZSwga2V5KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5waHJhc2VzW2tleV0gPSBwaHJhc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsgLy8gIyMjIHBvbHlnbG90LmNsZWFyKCkKICAgICAgICAvLwogICAgICAgIC8vIENsZWFycyBhbGwgcGhyYXNlcy4gVXNlZnVsIGZvciBzcGVjaWFsIGNhc2VzLCBzdWNoIGFzIGZyZWVpbmcKICAgICAgICAvLyB1cCBtZW1vcnkgaWYgeW91IGhhdmUgbG90cyBvZiBwaHJhc2VzIGJ1dCBubyBsb25nZXIgbmVlZCB0bwogICAgICAgIC8vIHBlcmZvcm0gYW55IHRyYW5zbGF0aW9uLiBBbHNvIHVzZWQgaW50ZXJuYWxseSBieSBgcmVwbGFjZWAuCgoKICAgICAgICBQb2x5Z2xvdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLnBocmFzZXMgPSB7fTsKICAgICAgICB9OyAvLyAjIyMgcG9seWdsb3QucmVwbGFjZShwaHJhc2VzKQogICAgICAgIC8vCiAgICAgICAgLy8gQ29tcGxldGVseSByZXBsYWNlIHRoZSBleGlzdGluZyBwaHJhc2VzIHdpdGggYSBuZXcgc2V0IG9mIHBocmFzZXMuCiAgICAgICAgLy8gTm9ybWFsbHksIGp1c3QgdXNlIGBleHRlbmRgIHRvIGFkZCBtb3JlIHBocmFzZXMsIGJ1dCB1bmRlciBjZXJ0YWluCiAgICAgICAgLy8gY2lyY3Vtc3RhbmNlcywgeW91IG1heSB3YW50IHRvIG1ha2Ugc3VyZSBubyBvbGQgcGhyYXNlcyBhcmUgbHlpbmcgYXJvdW5kLgoKCiAgICAgICAgUG9seWdsb3QucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAobmV3UGhyYXNlcykgewogICAgICAgICAgdGhpcy5jbGVhcigpOwogICAgICAgICAgdGhpcy5leHRlbmQobmV3UGhyYXNlcyk7CiAgICAgICAgfTsgLy8gIyMjIHBvbHlnbG90LnQoa2V5LCBvcHRpb25zKQogICAgICAgIC8vCiAgICAgICAgLy8gVGhlIG1vc3QtdXNlZCBtZXRob2QuIFByb3ZpZGUgYSBrZXksIGFuZCBgdGAgd2lsbCByZXR1cm4gdGhlCiAgICAgICAgLy8gcGhyYXNlLgogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHBvbHlnbG90LnQoImhlbGxvIik7CiAgICAgICAgLy8gICAgID0+ICJIZWxsbyIKICAgICAgICAvLwogICAgICAgIC8vIFRoZSBwaHJhc2UgdmFsdWUgaXMgcHJvdmlkZWQgZmlyc3QgYnkgYSBjYWxsIHRvIGBwb2x5Z2xvdC5leHRlbmQoKWAgb3IKICAgICAgICAvLyBgcG9seWdsb3QucmVwbGFjZSgpYC4KICAgICAgICAvLwogICAgICAgIC8vIFBhc3MgaW4gYW4gb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gcGVyZm9ybSBpbnRlcnBvbGF0aW9uLgogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHBvbHlnbG90LnQoImhlbGxvX25hbWUiLCB7bmFtZTogIlNwaWtlIn0pOwogICAgICAgIC8vICAgICA9PiAiSGVsbG8sIFNwaWtlIgogICAgICAgIC8vCiAgICAgICAgLy8gSWYgeW91IGxpa2UsIHlvdSBjYW4gcHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUgaW4gY2FzZSB0aGUgcGhyYXNlIGlzIG1pc3NpbmcuCiAgICAgICAgLy8gVXNlIHRoZSBzcGVjaWFsIG9wdGlvbiBrZXkgIl8iIHRvIHNwZWNpZnkgYSBkZWZhdWx0LgogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHBvbHlnbG90LnQoImlfbGlrZV90b193cml0ZV9pbl9sYW5ndWFnZSIsIHsKICAgICAgICAvLyAgICAgICBfOiAiSSBsaWtlIHRvIHdyaXRlIGluICV7bGFuZ3VhZ2V9LiIsCiAgICAgICAgLy8gICAgICAgbGFuZ3VhZ2U6ICJKYXZhU2NyaXB0IgogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLyAgICAgPT4gIkkgbGlrZSB0byB3cml0ZSBpbiBKYXZhU2NyaXB0LiIKICAgICAgICAvLwoKCiAgICAgICAgUG9seWdsb3QucHJvdG90eXBlLnQgPSBmdW5jdGlvbiAoa2V5LCBvcHRpb25zKSB7CiAgICAgICAgICB2YXIgcGhyYXNlLCByZXN1bHQ7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA9PSBudWxsID8ge30gOiBvcHRpb25zOyAvLyBhbGxvdyBudW1iZXIgYXMgYSBwbHVyYWxpemF0aW9uIHNob3J0Y3V0CgogICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykgewogICAgICAgICAgICBvcHRpb25zID0gewogICAgICAgICAgICAgIHNtYXJ0X2NvdW50OiBvcHRpb25zCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBocmFzZXNba2V5XSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcGhyYXNlID0gdGhpcy5waHJhc2VzW2tleV07CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLl8gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHBocmFzZSA9IG9wdGlvbnMuXzsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hbGxvd01pc3NpbmcpIHsKICAgICAgICAgICAgcGhyYXNlID0ga2V5OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy53YXJuKCdNaXNzaW5nIHRyYW5zbGF0aW9uIGZvciBrZXk6ICInICsga2V5ICsgJyInKTsKICAgICAgICAgICAgcmVzdWx0ID0ga2V5OwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgcGhyYXNlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICBvcHRpb25zID0gY2xvbmUob3B0aW9ucyk7CiAgICAgICAgICAgIHJlc3VsdCA9IGNob29zZVBsdXJhbEZvcm0ocGhyYXNlLCB0aGlzLmN1cnJlbnRMb2NhbGUsIG9wdGlvbnMuc21hcnRfY291bnQpOwogICAgICAgICAgICByZXN1bHQgPSBpbnRlcnBvbGF0ZShyZXN1bHQsIG9wdGlvbnMpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfTsgLy8gIyMjIHBvbHlnbG90LmhhcyhrZXkpCiAgICAgICAgLy8KICAgICAgICAvLyBDaGVjayBpZiBwb2x5Z2xvdCBoYXMgYSB0cmFuc2xhdGlvbiBmb3IgZ2l2ZW4ga2V5CgoKICAgICAgICBQb2x5Z2xvdC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLnBocmFzZXM7CiAgICAgICAgfTsgLy8gIyMjIyBQbHVyYWxpemF0aW9uIG1ldGhvZHMKICAgICAgICAvLyBUaGUgc3RyaW5nIHRoYXQgc2VwYXJhdGVzIHRoZSBkaWZmZXJlbnQgcGhyYXNlIHBvc3NpYmlsaXRpZXMuCgoKICAgICAgICB2YXIgZGVsaW1ldGVyID0gJ3x8fHwnOyAvLyBNYXBwaW5nIGZyb20gcGx1cmFsaXphdGlvbiBncm91cCBwbHVyYWwgbG9naWMuCgogICAgICAgIHZhciBwbHVyYWxUeXBlcyA9IHsKICAgICAgICAgIGNoaW5lc2U6IGZ1bmN0aW9uIGNoaW5lc2UobikgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgIH0sCiAgICAgICAgICBnZXJtYW46IGZ1bmN0aW9uIGdlcm1hbihuKSB7CiAgICAgICAgICAgIHJldHVybiBuICE9PSAxID8gMSA6IDA7CiAgICAgICAgICB9LAogICAgICAgICAgZnJlbmNoOiBmdW5jdGlvbiBmcmVuY2gobikgewogICAgICAgICAgICByZXR1cm4gbiA+IDEgPyAxIDogMDsKICAgICAgICAgIH0sCiAgICAgICAgICBydXNzaWFuOiBmdW5jdGlvbiBydXNzaWFuKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gJSAxMCA9PT0gMSAmJiBuICUgMTAwICE9PSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDI7CiAgICAgICAgICB9LAogICAgICAgICAgY3plY2g6IGZ1bmN0aW9uIGN6ZWNoKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gPT09IDEgPyAwIDogbiA+PSAyICYmIG4gPD0gNCA/IDEgOiAyOwogICAgICAgICAgfSwKICAgICAgICAgIHBvbGlzaDogZnVuY3Rpb24gcG9saXNoKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gPT09IDEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyOwogICAgICAgICAgfSwKICAgICAgICAgIGljZWxhbmRpYzogZnVuY3Rpb24gaWNlbGFuZGljKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gJSAxMCAhPT0gMSB8fCBuICUgMTAwID09PSAxMSA/IDEgOiAwOwogICAgICAgICAgfQogICAgICAgIH07IC8vIE1hcHBpbmcgZnJvbSBwbHVyYWxpemF0aW9uIGdyb3VwIHRvIGluZGl2aWR1YWwgbG9jYWxlcy4KCiAgICAgICAgdmFyIHBsdXJhbFR5cGVUb0xhbmd1YWdlcyA9IHsKICAgICAgICAgIGNoaW5lc2U6IFsnZmEnLCAnaWQnLCAnamEnLCAna28nLCAnbG8nLCAnbXMnLCAndGgnLCAndHInLCAnemgnXSwKICAgICAgICAgIGdlcm1hbjogWydkYScsICdkZScsICdlbicsICdlcycsICdmaScsICdlbCcsICdoZScsICdodScsICdpdCcsICdubCcsICdubycsICdwdCcsICdzdiddLAogICAgICAgICAgZnJlbmNoOiBbJ2ZyJywgJ3RsJywgJ3B0LWJyJ10sCiAgICAgICAgICBydXNzaWFuOiBbJ2hyJywgJ3J1J10sCiAgICAgICAgICBjemVjaDogWydjcyddLAogICAgICAgICAgcG9saXNoOiBbJ3BsJ10sCiAgICAgICAgICBpY2VsYW5kaWM6IFsnaXMnXQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxhbmdUb1R5cGVNYXAobWFwcGluZykgewogICAgICAgICAgdmFyIHR5cGUsCiAgICAgICAgICAgICAgbGFuZ3MsCiAgICAgICAgICAgICAgbCwKICAgICAgICAgICAgICByZXQgPSB7fTsKCiAgICAgICAgICBmb3IgKHR5cGUgaW4gbWFwcGluZykgewogICAgICAgICAgICBpZiAobWFwcGluZy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgewogICAgICAgICAgICAgIGxhbmdzID0gbWFwcGluZ1t0eXBlXTsKCiAgICAgICAgICAgICAgZm9yIChsIGluIGxhbmdzKSB7CiAgICAgICAgICAgICAgICByZXRbbGFuZ3NbbF1dID0gdHlwZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0gLy8gVHJpbSBhIHN0cmluZy4KCgogICAgICAgIGZ1bmN0aW9uIHRyaW0oc3RyKSB7CiAgICAgICAgICB2YXIgdHJpbVJlID0gL15ccyt8XHMrJC9nOwogICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHRyaW1SZSwgJycpOwogICAgICAgIH0gLy8gQmFzZWQgb24gYSBwaHJhc2UgdGV4dCB0aGF0IGNvbnRhaW5zIGBuYCBwbHVyYWwgZm9ybXMgc2VwYXJhdGVkCiAgICAgICAgLy8gYnkgYGRlbGltZXRlcmAsIGEgYGxvY2FsZWAsIGFuZCBhIGBjb3VudGAsIGNob29zZSB0aGUgY29ycmVjdAogICAgICAgIC8vIHBsdXJhbCBmb3JtLCBvciBub25lIGlmIGBjb3VudGAgaXMgYG51bGxgLgoKCiAgICAgICAgZnVuY3Rpb24gY2hvb3NlUGx1cmFsRm9ybSh0ZXh0LCBsb2NhbGUsIGNvdW50KSB7CiAgICAgICAgICB2YXIgcmV0LCB0ZXh0cywgY2hvc2VuVGV4dDsKCiAgICAgICAgICBpZiAoY291bnQgIT0gbnVsbCAmJiB0ZXh0KSB7CiAgICAgICAgICAgIHRleHRzID0gdGV4dC5zcGxpdChkZWxpbWV0ZXIpOwogICAgICAgICAgICBjaG9zZW5UZXh0ID0gdGV4dHNbcGx1cmFsVHlwZUluZGV4KGxvY2FsZSwgY291bnQpXSB8fCB0ZXh0c1swXTsKICAgICAgICAgICAgcmV0ID0gdHJpbShjaG9zZW5UZXh0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldCA9IHRleHQ7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBsdXJhbFR5cGVOYW1lKGxvY2FsZSkgewogICAgICAgICAgdmFyIGxhbmdUb1BsdXJhbFR5cGUgPSBsYW5nVG9UeXBlTWFwKHBsdXJhbFR5cGVUb0xhbmd1YWdlcyk7CiAgICAgICAgICByZXR1cm4gbGFuZ1RvUGx1cmFsVHlwZVtsb2NhbGVdIHx8IGxhbmdUb1BsdXJhbFR5cGUuZW47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwbHVyYWxUeXBlSW5kZXgobG9jYWxlLCBjb3VudCkgewogICAgICAgICAgcmV0dXJuIHBsdXJhbFR5cGVzW3BsdXJhbFR5cGVOYW1lKGxvY2FsZSldKGNvdW50KTsKICAgICAgICB9IC8vICMjIyBpbnRlcnBvbGF0ZQogICAgICAgIC8vCiAgICAgICAgLy8gRG9lcyB0aGUgZGlydHkgd29yay4gQ3JlYXRlcyBhIGBSZWdFeHBgIG9iamVjdCBmb3IgZWFjaAogICAgICAgIC8vIGludGVycG9sYXRpb24gcGxhY2Vob2xkZXIuCgoKICAgICAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZShwaHJhc2UsIG9wdGlvbnMpIHsKICAgICAgICAgIGZvciAodmFyIGFyZyBpbiBvcHRpb25zKSB7CiAgICAgICAgICAgIGlmIChhcmcgIT09ICdfJyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KGFyZykpIHsKICAgICAgICAgICAgICAvLyBXZSBjcmVhdGUgYSBuZXcgYFJlZ0V4cGAgZWFjaCB0aW1lIGluc3RlYWQgb2YgdXNpbmcgYSBtb3JlLWVmZmljaWVudAogICAgICAgICAgICAgIC8vIHN0cmluZyByZXBsYWNlIHNvIHRoYXQgdGhlIHNhbWUgYXJndW1lbnQgY2FuIGJlIHJlcGxhY2VkIG11bHRpcGxlIHRpbWVzCiAgICAgICAgICAgICAgLy8gaW4gdGhlIHNhbWUgcGhyYXNlLgogICAgICAgICAgICAgIHBocmFzZSA9IHBocmFzZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyVcXHsnICsgYXJnICsgJ1xcfScsICdnJyksIG9wdGlvbnNbYXJnXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcGhyYXNlOwogICAgICAgIH0gLy8gIyMjIHdhcm4KICAgICAgICAvLwogICAgICAgIC8vIFByb3ZpZGVzIGEgd2FybmluZyBpbiB0aGUgY29uc29sZSBpZiBhIHBocmFzZSBrZXkgaXMgbWlzc2luZy4KCgogICAgICAgIGZ1bmN0aW9uIHdhcm4obWVzc2FnZSkgewogICAgICAgICAgcm9vdC5jb25zb2xlICYmIHJvb3QuY29uc29sZS53YXJuICYmIHJvb3QuY29uc29sZS53YXJuKCdXQVJOSU5HOiAnICsgbWVzc2FnZSk7CiAgICAgICAgfSAvLyAjIyMgY2xvbmUKICAgICAgICAvLwogICAgICAgIC8vIENsb25lIGFuIG9iamVjdC4KCgogICAgICAgIGZ1bmN0aW9uIGNsb25lKHNvdXJjZSkgewogICAgICAgICAgdmFyIHJldCA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7CiAgICAgICAgICAgIHJldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFBvbHlnbG90OwogICAgICB9KTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTUzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxrIOWKoOi9veS4rSAuLi4iLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogIuacquaJvuWIsOebuOWFs+eahCAle2xpbmt9IOi/m+ihjOivhOiuuiIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogIuivt+iBlOezuyAle3VzZXJ9IOWIneWni+WMluWIm+W7uiIsCiAgICAgICAgImluaXQtaXNzdWUiOiAi5Yid5aeL5YyWIElzc3VlIiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogIuivtOeCueS7gOS5iCIsCiAgICAgICAgInByZXZpZXciOiAi6aKE6KeIIiwKICAgICAgICAiZWRpdCI6ICLnvJbovpEiLAogICAgICAgICJjb21tZW50IjogIuivhOiuuiIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAi5pSv5oyBIE1hcmtkb3duIOivreazlSIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogIuS9v+eUqCBHaXRIdWIg55m75b2VIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAi5p2l5YGa56ys5LiA5Liq55WZ6KiA55qE5Lq65ZCn77yBIiwKICAgICAgICAiY29tbWVudGVkIjogIuWPkeihqOS6jiIsCiAgICAgICAgImxvYWQtbW9yZSI6ICLliqDovb3mm7TlpJoiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9IOadoeivhOiuuiIsCiAgICAgICAgInNvcnQtYXNjIjogIuS7juaXp+WIsOaWsOaOkuW6jyIsCiAgICAgICAgInNvcnQtZGVzYyI6ICLku47mlrDliLDml6fmjpLluo8iLAogICAgICAgICJsb2dvdXQiOiAi5rOo6ZSAIiwKICAgICAgICAiYW5vbnltb3VzIjogIuacqueZu+W9leeUqOaItyIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGsg6LyJ5YWl5Lit4oCmIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICLmnKrmib7liLDnm7jpl5znmoQgJXtsaW5rfSIsCiAgICAgICAgInBsZWFzZS1jb250YWN0IjogIuiri+iBr+e1oSAle3VzZXJ9IOWIneWni+WMluipleirliIsCiAgICAgICAgImluaXQtaXNzdWUiOiAi5Yid5aeL5YyWIElzc3VlIiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogIuWvq+m7nuS7gOm6vCIsCiAgICAgICAgInByZXZpZXciOiAi6aCQ6Ka9IiwKICAgICAgICAiZWRpdCI6ICLnt6jovK8iLAogICAgICAgICJjb21tZW50IjogIuipleirliIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAi5pSv5o+0IE1hcmtkb3duIOiqnuazlSIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogIuS9v+eUqCBHaXRIdWIg55m75YWlIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAi5oiQ54K66aaW5YCL55WZ6KiA55qE5Lq65ZCn77yBIiwKICAgICAgICAiY29tbWVudGVkIjogIuipleirluaWvCIsCiAgICAgICAgImxvYWQtbW9yZSI6ICLovInlhaXmm7TlpJoiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9IOethuipleirliIsCiAgICAgICAgInNvcnQtYXNjIjogIuW+nuiIiuiHs+aWsOaOkuW6jyIsCiAgICAgICAgInNvcnQtZGVzYyI6ICLlvp7mlrDoh7PoiIrmjpLluo8iLAogICAgICAgICJsb2dvdXQiOiAi55m75Ye6IiwKICAgICAgICAiYW5vbnltb3VzIjogIuioquWuoiIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGtpbmcgLi4uIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICJSZWxhdGVkICV7bGlua30gbm90IGZvdW5kIiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAiUGxlYXNlIGNvbnRhY3QgJXt1c2VyfSB0byBpbml0aWFsaXplIHRoZSBjb21tZW50IiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICJJbml0IElzc3VlIiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogIkxlYXZlIGEgY29tbWVudCIsCiAgICAgICAgInByZXZpZXciOiAiUHJldmlldyIsCiAgICAgICAgImVkaXQiOiAiRWRpdCIsCiAgICAgICAgImNvbW1lbnQiOiAiQ29tbWVudCIsCiAgICAgICAgInN1cHBvcnQtbWFya2Rvd24iOiAiTWFya2Rvd24gaXMgc3VwcG9ydGVkIiwKICAgICAgICAibG9naW4td2l0aC1naXRodWIiOiAiTG9naW4gd2l0aCBHaXRIdWIiLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICJCZSB0aGUgZmlyc3QgcGVyc29uIHRvIGxlYXZlIGEgY29tbWVudCEiLAogICAgICAgICJjb21tZW50ZWQiOiAiY29tbWVudGVkIiwKICAgICAgICAibG9hZC1tb3JlIjogIkxvYWQgbW9yZSIsCiAgICAgICAgImNvdW50cyI6ICIle2NvdW50c30gY29tbWVudCB8fHx8ICV7Y291bnRzfSBjb21tZW50cyIsCiAgICAgICAgInNvcnQtYXNjIjogIlNvcnQgYnkgT2xkZXN0IiwKICAgICAgICAic29ydC1kZXNjIjogIlNvcnQgYnkgTGF0ZXN0IiwKICAgICAgICAibG9nb3V0IjogIkxvZ291dCIsCiAgICAgICAgImFub255bW91cyI6ICJBbm9ueW1vdXMiCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTU2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxraW5nIC4uLiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAiTGluayAle2xpbmt9IG5vIGVuY29udHJhZG8iLAogICAgICAgICJwbGVhc2UtY29udGFjdCI6ICJQb3IgZmF2b3IgY29udGFjdGEgY29uICV7dXNlcn0gcGFyYSBpbmljaWFsaXphciBlbCBjb21lbnRhcmlvIiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICJJbmljaWFyIElzc3VlIiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogIkRlamEgdW4gY29tZW50YXJpbyIsCiAgICAgICAgInByZXZpZXciOiAiQXZhbmNlIiwKICAgICAgICAiZWRpdCI6ICJFZGl0YXIiLAogICAgICAgICJjb21tZW50IjogIkNvbWVudGFyaW8iLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogIk1hcmtkb3duIGVzIHNvcG9ydGFkbyIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogIkVudHJhciBjb24gR2l0SHViIiwKICAgICAgICAiZmlyc3QtY29tbWVudC1wZXJzb24iOiAiU8OpIGVsIHByaW1lcm8gZW4gZGVqYXIgdW4gY29tZW50YXJpbyEiLAogICAgICAgICJjb21tZW50ZWQiOiAiY29tZW50w7MiLAogICAgICAgICJsb2FkLW1vcmUiOiAiQ2FyZ2FyIG3DoXMiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9IGNvbWVudGFyaW8gfHx8fCAle2NvdW50c30gY29tZW50YXJpb3MiLAogICAgICAgICJzb3J0LWFzYyI6ICJPcmRlbmFyIHBvciBBbnRpZ3VvcyIsCiAgICAgICAgInNvcnQtZGVzYyI6ICJPcmRlbmFyIHBvciBSZWNpZW50ZXMiLAogICAgICAgICJsb2dvdXQiOiAiU2FsaXIiLAogICAgICAgICJhbm9ueW1vdXMiOiAiQW7Ds25pbW8iCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTU3ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImluaXQiOiAiR2l0YWxraW5nIC4uLiIsCiAgICAgICAgIm5vLWZvdW5kLXJlbGF0ZWQiOiAiTGllbiAle2xpbmt9IG5vbiB0cm91dsOpIiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAiU+KAmWlsIHZvdXMgcGxhw650IGNvbnRhY3RleiAle3VzZXJ9IHBvdXIgaW5pdGlhbGlzZXIgbGVzIGNvbW1lbnRhaXJlcyIsCiAgICAgICAgImluaXQtaXNzdWUiOiAiSW5pdGlhbGlzYXRpb24gZGVzIGlzc3VlcyIsCiAgICAgICAgImxlYXZlLWEtY29tbWVudCI6ICJMYWlzc2VyIHVuIGNvbW1lbnRhaXJlIiwKICAgICAgICAicHJldmlldyI6ICJBcGVyw6d1IiwKICAgICAgICAiZWRpdCI6ICJNb2RpZmllciIsCiAgICAgICAgImNvbW1lbnQiOiAiQ29tbWVudGFpcmUiLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogIk1hcmtkb3duIGVzdCBzdXBwb3J0w6kiLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICJTZSBjb25uZWN0ZXIgYXZlYyBHaXRIdWIiLAogICAgICAgICJmaXJzdC1jb21tZW50LXBlcnNvbiI6ICLDinRyZSBsZSBwcmVtaWVyIMOgIGxhaXNzZXIgdW4gY29tbWVudGFpcmUgISIsCiAgICAgICAgImNvbW1lbnRlZCI6ICJjb21tZW50ZXIiLAogICAgICAgICJsb2FkLW1vcmUiOiAiQ2hhcmdlciBwbHVzIiwKICAgICAgICAiY291bnRzIjogIiV7Y291bnRzfSBjb21tZW50YWlyZSB8fHx8ICV7Y291bnRzfSBjb21tZW50YWlyZXMiLAogICAgICAgICJzb3J0LWFzYyI6ICJUcmllciBwYXIgcGx1cyBhbmNpZW4iLAogICAgICAgICJzb3J0LWRlc2MiOiAiVHJpZXIgcGFyIHBsdXMgcsOpY2VudCIsCiAgICAgICAgImxvZ291dCI6ICJEw6ljb25uZXhpb24iLAogICAgICAgICJhbm9ueW1vdXMiOiAiQW5vbnltZSIKICAgICAgfTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiaW5pdCI6ICJHaXRhbGtpbmcgLi4uIiwKICAgICAgICAibm8tZm91bmQtcmVsYXRlZCI6ICLQodCy0Y/Qt9Cw0L3QvdGL0LUgJXtsaW5rfSDQvdC1INC90LDQudC00LXQvdGLIiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAi0J/QvtC20LDQu9GD0LnRgdGC0LAsINGB0LLRj9C20LjRgtC10YHRjCDRgSAle3VzZXJ9INGH0YLQvtCx0Ysg0LjQvdC40YbQuNCw0LvQuNC30LjRgNC+0LLQsNGC0Ywg0LrQvtC80LzQtdC90YLQsNGA0LjQuSIsCiAgICAgICAgImluaXQtaXNzdWUiOiAi0JLRi9C/0YPRgdC6INC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4IiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogItCe0YHRgtCw0LLQuNGC0Ywg0LrQvtC80LzQtdC90YLQsNGA0LjQuSIsCiAgICAgICAgInByZXZpZXciOiAi0J/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3Ri9C5INC/0YDQvtGB0LzQvtGC0YAiLAogICAgICAgICJlZGl0IjogIlDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YwiLAogICAgICAgICJjb21tZW50IjogItCa0L7QvNC80LXQvdGC0LDRgNC40LkiLAogICAgICAgICJzdXBwb3J0LW1hcmtkb3duIjogItCf0L7QtNC00LXRgNC20LjQstCw0LXRgtGB0Y8gTWFya2Rvd24iLAogICAgICAgICJsb2dpbi13aXRoLWdpdGh1YiI6ICLQktGF0L7QtCDRh9C10YDQtdC3IEdpdEh1YiIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogItCR0YPQtNGM0YLQtSDQv9C10YDQstGL0LwsINC60YLQviDQvtGB0YLQsNCy0LjQuyDQutC+0LzQvNC10L3RgtCw0YDQuNC5IiwKICAgICAgICAiY29tbWVudGVkIjogItC/0YDQvtC60L7QvNC80LXQvdGC0LjRgNC+0LLQsNC90L3Ri9C5IiwKICAgICAgICAibG9hZC1tb3JlIjogItCX0LDQs9GA0YPQt9C40YLRjCDQtdGJ0ZEiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9INC60L7QvNC80LXQvdGC0LDRgNC40LkgfHx8fCAle2NvdW50c30g0LrQvtC80LzQtdC90YLQsNGA0YzQtdCyIiwKICAgICAgICAic29ydC1hc2MiOiAi0KHQvtGA0YLQuNGA0L7QstCw0YLRjCDQv9C+INGB0YLQsNGA0YvQvCIsCiAgICAgICAgInNvcnQtZGVzYyI6ICLQodC+0YDRgtC40YDQvtCy0LDRgtGMINC/0L4g0L/QvtGB0LvQtdC00L3QuNC8IiwKICAgICAgICAibG9nb3V0IjogItCS0YvRhdC+0LQiLAogICAgICAgICJhbm9ueW1vdXMiOiAi0JDQvdC+0L3QuNC80L3Ri9C5IgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE1OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICJpbml0IjogIkdpdGFsa2luZyAuLi4iLAogICAgICAgICJuby1mb3VuZC1yZWxhdGVkIjogIlp1Z2Vow7ZyaWdlciAle2xpbmt9IG5pY2h0IGdlZnVuZGVuIiwKICAgICAgICAicGxlYXNlLWNvbnRhY3QiOiAiQml0dGUga29udGFrdGllcmUgJXt1c2VyfSB1bSBkZW4gS29tbWVudGFyIHp1IGluaXRpYWxpc2llcmVuIiwKICAgICAgICAiaW5pdC1pc3N1ZSI6ICJJbml0aWFsaXNpZXJlIElzc3VlIiwKICAgICAgICAibGVhdmUtYS1jb21tZW50IjogIkhpbnRlcmxhc3NlIGVpbmVuIEtvbW1lbnRhciIsCiAgICAgICAgInByZXZpZXciOiAiVm9yc2NoYXUiLAogICAgICAgICJlZGl0IjogIkVkaXRpZXJlbiIsCiAgICAgICAgImNvbW1lbnQiOiAiS29tbWVudGllcmVuIiwKICAgICAgICAic3VwcG9ydC1tYXJrZG93biI6ICJNYXJrZG93biB3aXJkIHVudGVyc3TDvHR6dCIsCiAgICAgICAgImxvZ2luLXdpdGgtZ2l0aHViIjogIk1pdCBHaXRIdWItQWNjb3VudCBhbm1lbGRlbiIsCiAgICAgICAgImZpcnN0LWNvbW1lbnQtcGVyc29uIjogIlNlaSBkaWUgZXJzdGUgUGVyc29uLCB3ZWxjaGUgZWluZW4gS29tbWVudGFyIGhpbnRlcmzDpHNzdCEiLAogICAgICAgICJjb21tZW50ZWQiOiAia29tbWVudGllcnRlIiwKICAgICAgICAibG9hZC1tb3JlIjogIlplaWdlIG1laHIiLAogICAgICAgICJjb3VudHMiOiAiJXtjb3VudHN9IEtvbW1lbnRhciB8fHx8ICV7Y291bnRzfSBLb21tZW50YXJlIiwKICAgICAgICAic29ydC1hc2MiOiAiw4RsdGVzdGUgenVlcnN0IiwKICAgICAgICAic29ydC1kZXNjIjogIk5ldXN0ZSB6dWVyc3QiLAogICAgICAgICJsb2dvdXQiOiAiQWJtZWxkZW4iLAogICAgICAgICJhbm9ueW1vdXMiOiAiQW5vbnltIgogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW4KCiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTYxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MiksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTYzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Qua2V5czsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNjMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAvLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTykKICAgICAgdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgogICAgICB2YXIgJGtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTsKCiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNjUpKCdrZXlzJywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiBrZXlzKGl0KSB7CiAgICAgICAgICByZXR1cm4gJGtleXModG9PYmplY3QoaXQpKTsKICAgICAgICB9OwogICAgICB9KTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTY0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCiAgICAgIHZhciBfaXNJdGVyYWJsZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NSk7CgogICAgICB2YXIgX2lzSXRlcmFibGUzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNJdGVyYWJsZTIpOwoKICAgICAgdmFyIF9nZXRJdGVyYXRvcjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCk7CgogICAgICB2YXIgX2dldEl0ZXJhdG9yMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldEl0ZXJhdG9yMik7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgewogICAgICAgICAgdmFyIF9hcnIgPSBbXTsKICAgICAgICAgIHZhciBfbiA9IHRydWU7CiAgICAgICAgICB2YXIgX2QgPSBmYWxzZTsKICAgICAgICAgIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKHZhciBfaSA9ICgwLCBfZ2V0SXRlcmF0b3IzWyJkZWZhdWx0Il0pKGFyciksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgICAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2QgPSB0cnVlOwogICAgICAgICAgICBfZSA9IGVycjsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0pIF9pWyJyZXR1cm4iXSgpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX2FycjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICAgICAgICAgIHJldHVybiBhcnI7CiAgICAgICAgICB9IGVsc2UgaWYgKCgwLCBfaXNJdGVyYWJsZTNbImRlZmF1bHQiXSkoT2JqZWN0KGFycikpKSB7CiAgICAgICAgICAgIHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSgpOwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNjUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTY2KSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTY2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjcpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBjbGFzc29mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7CgogICAgICB2YXIgSVRFUkFUT1IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpOwoKICAgICAgdmFyIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmlzSXRlcmFibGUgPSBmdW5jdGlvbiAoaXQpIHsKICAgICAgICB2YXIgTyA9IE9iamVjdChpdCk7CiAgICAgICAgcmV0dXJuIE9bSVRFUkFUT1JdICE9PSB1bmRlZmluZWQgfHwgJ0BAaXRlcmF0b3InIGluIE8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwogICAgICAgIHx8IEl0ZXJhdG9ycy5oYXNPd25Qcm9wZXJ0eShjbGFzc29mKE8pKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTY4ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSksCiAgICAgICAgX19lc01vZHVsZTogdHJ1ZQogICAgICB9OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE2OSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMjcpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcwKTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNzAgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAgICAgdmFyIGdldCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yID0gZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgdmFyIGl0ZXJGbiA9IGdldChpdCk7CiAgICAgICAgaWYgKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJykgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgaXRlcmFibGUhJyk7CiAgICAgICAgcmV0dXJuIGFuT2JqZWN0KGl0ZXJGbi5jYWxsKGl0KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE3MSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE3MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICB2YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpOwoKICAgICAgdmFyIEF4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpOwoKICAgICAgdmFyIG1lcmdlQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7CgogICAgICB2YXIgZGVmYXVsdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvcwogICAgICAgKgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZQogICAgICAgKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3MKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykgewogICAgICAgIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpOwogICAgICAgIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpOyAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZQoKICAgICAgICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7IC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZQoKICAgICAgICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpOwogICAgICAgIHJldHVybiBpbnN0YW5jZTsKICAgICAgfSAvLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWQKCgogICAgICB2YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7IC8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZQoKICAgICAgYXhpb3MuQXhpb3MgPSBBeGlvczsgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlcwoKICAgICAgYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGF4aW9zLmRlZmF1bHRzLCBpbnN0YW5jZUNvbmZpZykpOwogICAgICB9OyAvLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW4KCgogICAgICBheGlvcy5DYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTsKICAgICAgYXhpb3MuQ2FuY2VsVG9rZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7CiAgICAgIGF4aW9zLmlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7IC8vIEV4cG9zZSBhbGwvc3ByZWFkCgogICAgICBheGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpOwogICAgICB9OwoKICAgICAgYXhpb3Muc3ByZWFkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODcpOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IGF4aW9zOyAvLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHQKCiAgICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBheGlvczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNzMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgdmFyIGJ1aWxkVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7CgogICAgICB2YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpOwoKICAgICAgdmFyIGRpc3BhdGNoUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTc1KTsKCiAgICAgIHZhciBtZXJnZUNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpOwogICAgICAvKioKICAgICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZUNvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZQogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZykgewogICAgICAgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZzsKICAgICAgICB0aGlzLmludGVyY2VwdG9ycyA9IHsKICAgICAgICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSwKICAgICAgICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCkKICAgICAgICB9OwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBEaXNwYXRjaCBhIHJlcXVlc3QKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHNwZWNpZmljIGZvciB0aGlzIHJlcXVlc3QgKG1lcmdlZCB3aXRoIHRoaXMuZGVmYXVsdHMpCiAgICAgICAqLwoKCiAgICAgIEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHsKICAgICAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi8KICAgICAgICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJCiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBjb25maWcgPSBhcmd1bWVudHNbMV0gfHwge307CiAgICAgICAgICBjb25maWcudXJsID0gYXJndW1lbnRzWzBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25maWcgPSBjb25maWcgfHwge307CiAgICAgICAgfQoKICAgICAgICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpOyAvLyBTZXQgY29uZmlnLm1ldGhvZAoKICAgICAgICBpZiAoY29uZmlnLm1ldGhvZCkgewogICAgICAgICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGVmYXVsdHMubWV0aG9kKSB7CiAgICAgICAgICBjb25maWcubWV0aG9kID0gdGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uZmlnLm1ldGhvZCA9ICdnZXQnOwogICAgICAgIH0gLy8gSG9vayB1cCBpbnRlcmNlcHRvcnMgbWlkZGxld2FyZQoKCiAgICAgICAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTsKICAgICAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpOwogICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikgewogICAgICAgICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikgewogICAgICAgICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTsKICAgICAgICB9KTsKCiAgICAgICAgd2hpbGUgKGNoYWluLmxlbmd0aCkgewogICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICB9OwoKICAgICAgQXhpb3MucHJvdG90eXBlLmdldFVyaSA9IGZ1bmN0aW9uIGdldFVyaShjb25maWcpIHsKICAgICAgICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpOwogICAgICAgIHJldHVybiBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcikucmVwbGFjZSgvXlw/LywgJycpOwogICAgICB9OyAvLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHMKCgogICAgICB1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHsKICAgICAgICAvKmVzbGludCBmdW5jLW5hbWVzOjAqLwogICAgICAgIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKHVybCwgY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwgewogICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgdXJsOiB1cmwKICAgICAgICAgIH0pKTsKICAgICAgICB9OwogICAgICB9KTsKICAgICAgdXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHsKICAgICAgICAvKmVzbGludCBmdW5jLW5hbWVzOjAqLwogICAgICAgIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKHVybCwgZGF0YSwgY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwgewogICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgIH0pKTsKICAgICAgICB9OwogICAgICB9KTsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBBeGlvczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNzQgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkgewogICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTsKICAgICAgfQogICAgICAvKioKICAgICAgICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFjawogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgCiAgICAgICAqCiAgICAgICAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXIKICAgICAgICovCgoKICAgICAgSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCkgewogICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7CiAgICAgICAgICBmdWxmaWxsZWQ6IGZ1bGZpbGxlZCwKICAgICAgICAgIHJlamVjdGVkOiByZWplY3RlZAogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2sKICAgICAgICoKICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYAogICAgICAgKi8KCgogICAgICBJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHsKICAgICAgICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHsKICAgICAgICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9ycwogICAgICAgKgogICAgICAgKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueQogICAgICAgKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3IKICAgICAgICovCgoKICAgICAgSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikgewogICAgICAgIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkgewogICAgICAgICAgaWYgKGggIT09IG51bGwpIHsKICAgICAgICAgICAgZm4oaCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxNzUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgdmFyIHRyYW5zZm9ybURhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nik7CgogICAgICB2YXIgaXNDYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKCiAgICAgIHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOwogICAgICAvKioKICAgICAgICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC4KICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHsKICAgICAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7CiAgICAgICAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpOwogICAgICAgIH0KICAgICAgfQogICAgICAvKioKICAgICAgICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3QKICAgICAgICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZAogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHsKICAgICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7IC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0CgogICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307IC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGEKCiAgICAgICAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKGNvbmZpZy5kYXRhLCBjb25maWcuaGVhZGVycywgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3QpOyAvLyBGbGF0dGVuIGhlYWRlcnMKCiAgICAgICAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LCBjb25maWcuaGVhZGVycyk7CiAgICAgICAgdXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSwgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7CiAgICAgICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTsKICAgICAgICB9KTsKICAgICAgICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7CiAgICAgICAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTsgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGEKCiAgICAgICAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShyZXNwb25zZS5kYXRhLCByZXNwb25zZS5oZWFkZXJzLCBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHsKICAgICAgICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkgewogICAgICAgICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7IC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhCgogICAgICAgICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkgewogICAgICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShyZWFzb24ucmVzcG9uc2UuZGF0YSwgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTc2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKICAgICAgLyoqCiAgICAgICAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2UKICAgICAgICoKICAgICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkCiAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlCiAgICAgICAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb259IGZucyBBIHNpbmdsZSBmdW5jdGlvbiBvciBBcnJheSBvZiBmdW5jdGlvbnMKICAgICAgICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YQogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7CiAgICAgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAgICAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikgewogICAgICAgICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNzcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7CiAgICAgICAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7CiAgICAgICAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7CiAgICAgICAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNzggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTsKICAgICAgLyoqCiAgICAgICAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLgogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuCiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuCiAgICAgICAqLwoKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHsKICAgICAgICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7CgogICAgICAgIGlmICghdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkgewogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlamVjdChjcmVhdGVFcnJvcignUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5jb25maWcsIG51bGwsIHJlc3BvbnNlLnJlcXVlc3QsIHJlc3BvbnNlKSk7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxNzkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBVcGRhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLgogICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS4KICAgICAgICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuCiAgICAgICAqLwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgICAgICBlcnJvci5jb25maWcgPSBjb25maWc7CgogICAgICAgIGlmIChjb2RlKSB7CiAgICAgICAgICBlcnJvci5jb2RlID0gY29kZTsKICAgICAgICB9CgogICAgICAgIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0OwogICAgICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7CiAgICAgICAgZXJyb3IuaXNBeGlvc0Vycm9yID0gdHJ1ZTsKCiAgICAgICAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLy8gU3RhbmRhcmQKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLAogICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICAgIC8vIE1pY3Jvc29mdAogICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgbnVtYmVyOiB0aGlzLm51bWJlciwKICAgICAgICAgICAgLy8gTW96aWxsYQogICAgICAgICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSwKICAgICAgICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLAogICAgICAgICAgICBjb2x1bW5OdW1iZXI6IHRoaXMuY29sdW1uTnVtYmVyLAogICAgICAgICAgICBzdGFjazogdGhpcy5zdGFjaywKICAgICAgICAgICAgLy8gQXhpb3MKICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZywKICAgICAgICAgICAgY29kZTogdGhpcy5jb2RlCiAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTgwICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIGlzQWJzb2x1dGVVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7CgogICAgICB2YXIgY29tYmluZVVSTHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Mik7CiAgICAgIC8qKgogICAgICAgKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIGJhc2VVUkwgd2l0aCB0aGUgcmVxdWVzdGVkVVJMLAogICAgICAgKiBvbmx5IHdoZW4gdGhlIHJlcXVlc3RlZFVSTCBpcyBub3QgYWxyZWFkeSBhbiBhYnNvbHV0ZSBVUkwuCiAgICAgICAqIElmIHRoZSByZXF1ZXN0VVJMIGlzIGFic29sdXRlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHJlcXVlc3RlZFVSTCB1bnRvdWNoZWQuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTAogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdGVkVVJMIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCB0byBjb21iaW5lCiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBmdWxsIHBhdGgKICAgICAgICovCgoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZEZ1bGxQYXRoKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCkgewogICAgICAgIGlmIChiYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCkpIHsKICAgICAgICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlcXVlc3RlZFVSTDsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTgxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwogICAgICAvKioKICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0CiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2UKICAgICAgICovCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7CiAgICAgICAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCAiPHNjaGVtZT46Ly8iIG9yICIvLyIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuCiAgICAgICAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkCiAgICAgICAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uCiAgICAgICAgcmV0dXJuIC9eKFthLXpdW2EtelxkXCtcLVwuXSo6KT9cL1wvL2kudGVzdCh1cmwpOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODIgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CiAgICAgIC8qKgogICAgICAgKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTAogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTAogICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMCiAgICAgICAqLwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkgewogICAgICAgIHJldHVybiByZWxhdGl2ZVVSTCA/IGJhc2VVUkwucmVwbGFjZSgvXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cLysvLCAnJykgOiBiYXNlVVJMOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAxODMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOyAvLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZQogICAgICAvLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzCgoKICAgICAgdmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gWydhZ2UnLCAnYXV0aG9yaXphdGlvbicsICdjb250ZW50LWxlbmd0aCcsICdjb250ZW50LXR5cGUnLCAnZXRhZycsICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJywgJ2xhc3QtbW9kaWZpZWQnLCAnbG9jYXRpb24nLCAnbWF4LWZvcndhcmRzJywgJ3Byb3h5LWF1dGhvcml6YXRpb24nLCAncmVmZXJlcicsICdyZXRyeS1hZnRlcicsICd1c2VyLWFnZW50J107CiAgICAgIC8qKgogICAgICAgKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0CiAgICAgICAqCiAgICAgICAqIGBgYAogICAgICAgKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVAogICAgICAgKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb24KICAgICAgICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQogICAgICAgKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZAogICAgICAgKiBgYGAKICAgICAgICoKICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZAogICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdAogICAgICAgKi8KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHsKICAgICAgICB2YXIgcGFyc2VkID0ge307CiAgICAgICAgdmFyIGtleTsKICAgICAgICB2YXIgdmFsOwogICAgICAgIHZhciBpOwoKICAgICAgICBpZiAoIWhlYWRlcnMpIHsKICAgICAgICAgIHJldHVybiBwYXJzZWQ7CiAgICAgICAgfQoKICAgICAgICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7CiAgICAgICAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7CiAgICAgICAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpOwoKICAgICAgICAgIGlmIChrZXkpIHsKICAgICAgICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHsKICAgICAgICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBwYXJzZWQ7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4NCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgPyAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3QKICAgICAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uCiAgICAgIGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHsKICAgICAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICAgICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIHZhciBvcmlnaW5VUkw7CiAgICAgICAgLyoqCiAgICAgICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHMKICAgICAgICAqCiAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkCiAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fQogICAgICAgICovCgogICAgICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7CiAgICAgICAgICB2YXIgaHJlZiA9IHVybDsKCiAgICAgICAgICBpZiAobXNpZSkgewogICAgICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzCiAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpOwogICAgICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjsKICAgICAgICAgIH0KCiAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTsgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlscwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsCiAgICAgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsCiAgICAgICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsCiAgICAgICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cPy8sICcnKSA6ICcnLAogICAgICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLAogICAgICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsCiAgICAgICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsCiAgICAgICAgICAgIHBhdGhuYW1lOiB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/IHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDogJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgICAvKioKICAgICAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uCiAgICAgICAgKgogICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0CiAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlCiAgICAgICAgKi8KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7CiAgICAgICAgICB2YXIgcGFyc2VkID0gdXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDsKICAgICAgICAgIHJldHVybiBwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJiBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3Q7CiAgICAgICAgfTsKICAgICAgfSgpIDogLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC4KICAgICAgZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9OwogICAgICB9KCk7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTg1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgdmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/IC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZQogICAgICBmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHsKICAgICAgICAgICAgdmFyIGNvb2tpZSA9IFtdOwogICAgICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7CgogICAgICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHsKICAgICAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkgewogICAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHsKICAgICAgICAgICAgICBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTsKICAgICAgICAgIH0sCiAgICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHsKICAgICAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7CiAgICAgICAgICAgIHJldHVybiBtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsOwogICAgICAgICAgfSwKICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHsKICAgICAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KCkgOiAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuCiAgICAgIGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sCiAgICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0sCiAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9CiAgICAgICAgfTsKICAgICAgfSgpOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE4NiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciBDYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTsKICAgICAgLyoqCiAgICAgICAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uCiAgICAgICAqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7CiAgICAgICAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlc29sdmVQcm9taXNlOwogICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7CiAgICAgICAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHRva2VuID0gdGhpczsKICAgICAgICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkgewogICAgICAgICAgaWYgKHRva2VuLnJlYXNvbikgewogICAgICAgICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7CiAgICAgICAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLgogICAgICAgKi8KCgogICAgICBDYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7CiAgICAgICAgaWYgKHRoaXMucmVhc29uKSB7CiAgICAgICAgICB0aHJvdyB0aGlzLnJlYXNvbjsKICAgICAgICB9CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsCiAgICAgICAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuCiAgICAgICAqLwoKCiAgICAgIENhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHsKICAgICAgICB2YXIgY2FuY2VsOwogICAgICAgIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7CiAgICAgICAgICBjYW5jZWwgPSBjOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICBjYW5jZWw6IGNhbmNlbAogICAgICAgIH07CiAgICAgIH07CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE4NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgLyoqCiAgICAgICAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuCiAgICAgICAqCiAgICAgICAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuCiAgICAgICAqCiAgICAgICAqICBgYGBqcwogICAgICAgKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fQogICAgICAgKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107CiAgICAgICAqICBmLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICAgKiAgYGBgCiAgICAgICAqCiAgICAgICAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLgogICAgICAgKgogICAgICAgKiAgYGBganMKICAgICAgICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTsKICAgICAgICogIGBgYAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259CiAgICAgICAqLwoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHsKICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE4OCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLAogICAgICAgICAgICBnZXRSZWYgPSBfcmVmLmdldFJlZiwKICAgICAgICAgICAgb25DbGljayA9IF9yZWYub25DbGljaywKICAgICAgICAgICAgb25Nb3VzZURvd24gPSBfcmVmLm9uTW91c2VEb3duLAogICAgICAgICAgICB0ZXh0ID0gX3JlZi50ZXh0LAogICAgICAgICAgICBpc0xvYWRpbmcgPSBfcmVmLmlzTG9hZGluZzsKICAgICAgICByZXR1cm4gX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRSZWYgJiYgZ2V0UmVmKGVsKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzc05hbWU6ICJndC1idG4gIiArIGNsYXNzTmFtZSwKICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2ssCiAgICAgICAgICBvbk1vdXNlRG93bjogb25Nb3VzZURvd24KICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImd0LWJ0bi10ZXh0IgogICAgICAgIH0sIHRleHQpLCBpc0xvYWRpbmcgJiYgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1idG4tbG9hZGluZyBndC1zcGlubmVyIgogICAgICAgIH0pKTsKICAgICAgfTsKICAgICAgLyoqKi8KCiAgICB9LAogICAgLyogMTg5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CgogICAgICB2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsCiAgICAgICAgICAgIG9uQ2xpY2sgPSBfcmVmLm9uQ2xpY2ssCiAgICAgICAgICAgIHRleHQgPSBfcmVmLnRleHQ7CiAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZ3QtYWN0aW9uICIgKyBjbGFzc05hbWUsCiAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrCiAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJndC1hY3Rpb24tdGV4dCIKICAgICAgICB9LCB0ZXh0KSk7CiAgICAgIH07CiAgICAgIC8qKiovCgogICAgfSwKICAgIC8qIDE5MCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTsKCiAgICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKICAgICAgdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCiAgICAgIHZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7CgogICAgICB2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgogICAgICB2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nik7CgogICAgICB2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOwoKICAgICAgdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCiAgICAgIHZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCiAgICAgIHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwoKICAgICAgdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7CgogICAgICB2YXIgX2F2YXRhciA9IF9fd2VicGFja19yZXF1aXJlX18oODApOwoKICAgICAgdmFyIF9hdmF0YXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXZhdGFyKTsKCiAgICAgIHZhciBfc3ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7CgogICAgICB2YXIgX3N2ZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdmcpOwoKICAgICAgdmFyIF9kaXN0YW5jZV9pbl93b3Jkc190b19ub3cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSk7CgogICAgICB2YXIgX2Rpc3RhbmNlX2luX3dvcmRzX3RvX25vdzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXN0YW5jZV9pbl93b3Jkc190b19ub3cpOwoKICAgICAgdmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEyKTsKCiAgICAgIHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpOwoKICAgICAgdmFyIF9pbmRleDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMyk7CgogICAgICB2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Myk7CgogICAgICB2YXIgX2luZGV4NSA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KTsKCiAgICAgIHZhciBfaW5kZXg2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXg1KTsKCiAgICAgIHZhciBfaW5kZXg3ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTUpOwoKICAgICAgdmFyIF9pbmRleDggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDcpOwoKICAgICAgdmFyIF9pbmRleDkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNik7CgogICAgICB2YXIgX2luZGV4MTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDkpOwoKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMTcpOwoKICAgICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgWkhDTiA9ICgwLCBfaW5kZXgyWyJkZWZhdWx0Il0pKCk7CiAgICAgIHZhciBaSFRXID0gKDAsIF9pbmRleDRbImRlZmF1bHQiXSkoKTsKICAgICAgdmFyIEVTID0gKDAsIF9pbmRleDZbImRlZmF1bHQiXSkoKTsKICAgICAgdmFyIEZSID0gKDAsIF9pbmRleDhbImRlZmF1bHQiXSkoKTsKICAgICAgdmFyIFJVID0gKDAsIF9pbmRleDEwWyJkZWZhdWx0Il0pKCk7CgogICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB3aW5kb3cuR1RfaTE4bl9kaXN0YW5jZUluV29yZHNMb2NhbGVNYXAgPSB7CiAgICAgICAgICB6aDogWkhDTiwKICAgICAgICAgICd6aC1DTic6IFpIQ04sCiAgICAgICAgICAnemgtVFcnOiBaSFRXLAogICAgICAgICAgJ2VzLUVTJzogRVMsCiAgICAgICAgICBmcjogRlIsCiAgICAgICAgICBydTogUlUKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgQ29tbWVudCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgICAgICAgKDAsIF9pbmhlcml0czNbImRlZmF1bHQiXSkoQ29tbWVudCwgX0NvbXBvbmVudCk7CgogICAgICAgIGZ1bmN0aW9uIENvbW1lbnQoKSB7CiAgICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1siZGVmYXVsdCJdKSh0aGlzLCBDb21tZW50KTsKICAgICAgICAgIHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zWyJkZWZhdWx0Il0pKHRoaXMsIChDb21tZW50Ll9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMlsiZGVmYXVsdCJdKShDb21tZW50KSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICAgICAgfQoKICAgICAgICAoMCwgX2NyZWF0ZUNsYXNzM1siZGVmYXVsdCJdKShDb21tZW50LCBbewogICAgICAgICAga2V5OiAnc2hvdWxkQ29tcG9uZW50VXBkYXRlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgICAgICAgIHZhciBjb21tZW50ID0gdGhpcy5ub2RlOwogICAgICAgICAgICB2YXIgZW1haWxSZXNwb25zZSA9IGNvbW1lbnQucXVlcnlTZWxlY3RvcignLmVtYWlsLWhpZGRlbi10b2dnbGU+YScpOwoKICAgICAgICAgICAgaWYgKGVtYWlsUmVzcG9uc2UpIHsKICAgICAgICAgICAgICBlbWFpbFJlc3BvbnNlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGNvbW1lbnQucXVlcnlTZWxlY3RvcignLmVtYWlsLWhpZGRlbi1yZXBseScpLmNsYXNzTGlzdC50b2dnbGUoJ2V4cGFuZGVkJyk7CiAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdoYW5kbGVJbWFnZUVycm9yZWQnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUltYWdlRXJyb3JlZChvYmopIHsKICAgICAgICAgICAgb2JqLnRhcmdldC5zcmMgPSAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9naXRhbGtAMS9zcmMvYXNzZXRzL2ljb24vZ2l0aHViLnN2ZyI7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncmVuZGVyJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICAgICAgICBjb21tZW50ID0gX3Byb3BzLmNvbW1lbnQsCiAgICAgICAgICAgICAgICB1c2VyID0gX3Byb3BzLnVzZXIsCiAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IF9wcm9wcy5sYW5ndWFnZSwKICAgICAgICAgICAgICAgIF9wcm9wcyRjb21tZW50ZWRUZXh0ID0gX3Byb3BzLmNvbW1lbnRlZFRleHQsCiAgICAgICAgICAgICAgICBjb21tZW50ZWRUZXh0ID0gX3Byb3BzJGNvbW1lbnRlZFRleHQgPT09IHVuZGVmaW5lZCA/ICcnIDogX3Byb3BzJGNvbW1lbnRlZFRleHQsCiAgICAgICAgICAgICAgICBfcHJvcHMkYWRtaW4gPSBfcHJvcHMuYWRtaW4sCiAgICAgICAgICAgICAgICBhZG1pbiA9IF9wcm9wcyRhZG1pbiA9PT0gdW5kZWZpbmVkID8gW10gOiBfcHJvcHMkYWRtaW4sCiAgICAgICAgICAgICAgICByZXBseUNhbGxiYWNrID0gX3Byb3BzLnJlcGx5Q2FsbGJhY2ssCiAgICAgICAgICAgICAgICBsaWtlQ2FsbGJhY2sgPSBfcHJvcHMubGlrZUNhbGxiYWNrOwogICAgICAgICAgICB2YXIgZW5hYmxlRWRpdCA9IHVzZXIgJiYgY29tbWVudC51c2VyLmxvZ2luID09PSB1c2VyLmxvZ2luOwogICAgICAgICAgICB2YXIgaXNBZG1pbiA9IH5bXS5jb25jYXQoYWRtaW4pLm1hcChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIHJldHVybiBhLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIH0pLmluZGV4T2YoY29tbWVudC51c2VyLmxvZ2luLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICB2YXIgcmVhY3Rpb25zID0gY29tbWVudC5yZWFjdGlvbnM7CiAgICAgICAgICAgIHZhciByZWFjdGlvblRvdGFsQ291bnQgPSAnJzsKCiAgICAgICAgICAgIGlmIChyZWFjdGlvbnMgJiYgcmVhY3Rpb25zLnRvdGFsQ291bnQpIHsKICAgICAgICAgICAgICByZWFjdGlvblRvdGFsQ291bnQgPSByZWFjdGlvbnMudG90YWxDb3VudDsKCiAgICAgICAgICAgICAgaWYgKHJlYWN0aW9ucy50b3RhbENvdW50ID09PSAxMDAgJiYgcmVhY3Rpb25zLnBhZ2VJbmZvICYmIHJlYWN0aW9ucy5wYWdlSW5mby5oYXNOZXh0UGFnZSkgewogICAgICAgICAgICAgICAgcmVhY3Rpb25Ub3RhbENvdW50ID0gJzEwMCsnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkgewogICAgICAgICAgICAgICAgX3RoaXMyLm5vZGUgPSBub2RlOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudCAnICsgKGlzQWRtaW4gPyAnZ3QtY29tbWVudC1hZG1pbicgOiAnJykKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX2F2YXRhcjJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtYXZhdGFyJywKICAgICAgICAgICAgICBzcmM6IGNvbW1lbnQudXNlciAmJiBjb21tZW50LnVzZXIuYXZhdGFyX3VybCwKICAgICAgICAgICAgICBhbHQ6IGNvbW1lbnQudXNlciAmJiBjb21tZW50LnVzZXIubG9naW4sCiAgICAgICAgICAgICAgb25FcnJvcjogdGhpcy5oYW5kbGVJbWFnZUVycm9yZWQuYmluZCh0aGlzKQogICAgICAgICAgICB9KSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWNvbnRlbnQnCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1oZWFkZXInCiAgICAgICAgICAgIH0sIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1ibG9jay0nICsgKHVzZXIgPyAnMicgOiAnMScpCiAgICAgICAgICAgIH0pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnYScsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LXVzZXJuYW1lJywKICAgICAgICAgICAgICBocmVmOiBjb21tZW50LnVzZXIgJiYgY29tbWVudC51c2VyLmh0bWxfdXJsCiAgICAgICAgICAgIH0sIGNvbW1lbnQudXNlciAmJiBjb21tZW50LnVzZXIubG9naW4pLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LXRleHQnCiAgICAgICAgICAgIH0sIGNvbW1lbnRlZFRleHQpLCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudCgnc3BhbicsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1jb21tZW50LWRhdGUnCiAgICAgICAgICAgIH0sICgwLCBfZGlzdGFuY2VfaW5fd29yZHNfdG9fbm93MlsiZGVmYXVsdCJdKShjb21tZW50LmNyZWF0ZWRfYXQsIHsKICAgICAgICAgICAgICBhZGRTdWZmaXg6IHRydWUsCiAgICAgICAgICAgICAgbG9jYWxlOiB7CiAgICAgICAgICAgICAgICBkaXN0YW5jZUluV29yZHM6IHdpbmRvdy5HVF9pMThuX2Rpc3RhbmNlSW5Xb3Jkc0xvY2FsZU1hcFtsYW5ndWFnZV0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKSwgcmVhY3Rpb25zICYmIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWNvbW1lbnQtbGlrZScsCiAgICAgICAgICAgICAgdGl0bGU6ICdMaWtlJywKICAgICAgICAgICAgICBvbkNsaWNrOiBsaWtlQ2FsbGJhY2sKICAgICAgICAgICAgfSwgcmVhY3Rpb25zLnZpZXdlckhhc1JlYWN0ZWQgPyBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLWhlYXJ0JywKICAgICAgICAgICAgICBuYW1lOiAnaGVhcnRfb24nLAogICAgICAgICAgICAgIHRleHQ6IHJlYWN0aW9uVG90YWxDb3VudAogICAgICAgICAgICB9KSA6IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KF9zdmcyWyJkZWZhdWx0Il0sIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdndC1pY28taGVhcnQnLAogICAgICAgICAgICAgIG5hbWU6ICdoZWFydCcsCiAgICAgICAgICAgICAgdGV4dDogcmVhY3Rpb25Ub3RhbENvdW50CiAgICAgICAgICAgIH0pKSwgZW5hYmxlRWRpdCA/IF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdhJywgewogICAgICAgICAgICAgIGhyZWY6IGNvbW1lbnQuaHRtbF91cmwsCiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1lZGl0JywKICAgICAgICAgICAgICB0aXRsZTogJ0VkaXQnLAogICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaycKICAgICAgICAgICAgfSwgX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoX3N2ZzJbImRlZmF1bHQiXSwgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2d0LWljby1lZGl0JywKICAgICAgICAgICAgICBuYW1lOiAnZWRpdCcKICAgICAgICAgICAgfSkpIDogX3JlYWN0MlsiZGVmYXVsdCJdLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1yZXBseScsCiAgICAgICAgICAgICAgdGl0bGU6ICdSZXBseScsCiAgICAgICAgICAgICAgb25DbGljazogcmVwbHlDYWxsYmFjawogICAgICAgICAgICB9LCBfcmVhY3QyWyJkZWZhdWx0Il0uY3JlYXRlRWxlbWVudChfc3ZnMlsiZGVmYXVsdCJdLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtaWNvLXJlcGx5JywKICAgICAgICAgICAgICBuYW1lOiAncmVwbHknCiAgICAgICAgICAgIH0pKSksIF9yZWFjdDJbImRlZmF1bHQiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ3QtY29tbWVudC1ib2R5IG1hcmtkb3duLWJvZHknLAogICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7CiAgICAgICAgICAgICAgICBfX2h0bWw6IGNvbW1lbnQuYm9keV9odG1sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSkpOwogICAgICAgICAgfQogICAgICAgIH1dKTsKICAgICAgICByZXR1cm4gQ29tbWVudDsKICAgICAgfShfcmVhY3QuQ29tcG9uZW50KTsKCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IENvbW1lbnQ7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTkxICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIG1hcCA9IHsKICAgICAgICAiLi9hcnJvd19kb3duLnN2ZyI6IDE5MiwKICAgICAgICAiLi9lZGl0LnN2ZyI6IDE5MywKICAgICAgICAiLi9naXRodWIuc3ZnIjogMTk0LAogICAgICAgICIuL2hlYXJ0LnN2ZyI6IDE5NSwKICAgICAgICAiLi9oZWFydF9vbi5zdmciOiAxOTYsCiAgICAgICAgIi4vcmVwbHkuc3ZnIjogMTk3LAogICAgICAgICIuL3RpcC5zdmciOiAxOTgKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkgewogICAgICAgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpKTsKICAgICAgfQoKICAgICAgOwoKICAgICAgZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkgewogICAgICAgIHZhciBpZCA9IG1hcFtyZXFdOwogICAgICAgIGlmICghKGlkICsgMSkpIC8vIGNoZWNrIGZvciBudW1iZXIgb3Igc3RyaW5nCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIHJlcSArICInLiIpOwogICAgICAgIHJldHVybiBpZDsKICAgICAgfQoKICAgICAgOwoKICAgICAgd2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKTsKICAgICAgfTsKCiAgICAgIHdlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7CiAgICAgIHdlYnBhY2tDb250ZXh0LmlkID0gMTkxOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5MiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcC1pZD1cIjE2MTlcIj48cGF0aCBkPVwiTTUxMS44NzIgNjc2LjhjLTAuMDAzIDAtMC4wMDYgMC0wLjAwOCAwLTkuMTM3IDAtMTcuMzc5LTMuODI5LTIzLjIxLTkuOTdsLTI1MS4yNzctMjY1LjYxNGMtNS40MTUtNS43Mi04Ljc0My0xMy40NjQtOC43NDQtMjEuOTg0IDAtMTcuNjc4IDE0LjMzLTMyLjAwOCAzMi4wMDgtMzIuMDA4IDkuMTU3IDAgMTcuNDE2IDMuODQ1IDIzLjI1IDEwLjAwOWwyMjguMDQ1IDI0MS4xMDMgMjI4LjIyNC0yNDEuMDg4YzUuODU1LTYuMTY1IDE0LjExMy0xMC4wMDEgMjMuMjY2LTEwLjAwMSA4LjUxNiAwIDE2LjI1NiAzLjMyIDIxLjk5OCA4LjczNiAxMi43ODQgMTIuMTQ1IDEzLjM2IDMyLjQzNCAxLjI2NCA0NS4yMzNsLTI1MS41MiAyNjUuNmMtNS44NDQgNi4xNTUtMTQuMDg2IDkuOTg0LTIzLjIyMyA5Ljk4NC0wLjAyNSAwLTAuMDUxIDAtMC4wNzYgMHpcIiBwLWlkPVwiMTYyMFwiPjwvcGF0aD48L3N2Zz4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5MyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gIDxwYXRoIGQ9XCJNNzg1LjMzMzMzMyA4NS4zMzMzMzNDNzc0LjY2NjY2NyA4NS4zMzMzMzMgNzYzLjIgOTAuMTMzMzMzIDc1NC42NjY2NjcgOTguNjY2NjY3TDY4Mi42NjY2NjcgMTcwLjY2NjY2NyA4NTMuMzMzMzMzIDM0MS4zMzMzMzMgOTI1LjMzMzMzMyAyNjkuMzMzMzMzQzk0Mi40IDI1Mi4yNjY2NjcgOTQyLjQgMjIyLjEzMzMzMyA5MjUuMzMzMzMzIDIwOS4zMzMzMzNMODE0LjY2NjY2NyA5OC42NjY2NjdDODA2LjEzMzMzMyA5MC4xMzMzMzMgNzk2IDg1LjMzMzMzMyA3ODUuMzMzMzMzIDg1LjMzMzMzM3pNNjQwIDIxNy4zMzMzMzMgODUuMzMzMzMzIDc2OCA4NS4zMzMzMzMgOTM4LjY2NjY2NyAyNTYgOTM4LjY2NjY2NyA4MDYuNjY2NjY3IDM4NCA2NDAgMjE3LjMzMzMzM3pcIj48L3BhdGg+XG48L3N2Zz5cbiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTk0ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gIDxwYXRoIGQ9XCJNNjQgNTI0QzY0IDcxOS42MDIgMTg5LjM1NiA4ODUuOTI2IDM2NC4xMTMgOTQ3LjAxNyAzODcuNjU3OTkgOTUzIDM4NCA5MzYuMTE1IDM4NCA5MjQuNzY3TDM4NCA4NDcuMTA3QzI0OC4xMTggODYzLjAwNyAyNDIuNjc0IDc3My4wNTIgMjMzLjUgNzU4LjAwMSAyMTUgNzI2LjUwMSAxNzEuNSA3MTguNTAxIDE4NC41IDcwMy41MDEgMjE1LjUgNjg3LjUwMSAyNDcgNzA3LjUwMSAyODMuNSA3NjEuNTAxIDMwOS45NTYgODAwLjY0MiAzNjEuMzY2IDc5NC4wNzUgMzg3LjY1OCA3ODcuNDk3IDM5My40MDMgNzYzLjk5NyA0MDUuNjM3IDc0My4wNDIgNDIyLjM1MyA3MjYuNjM4IDI4MS43NzQgNzAxLjYwOSAyMjMgNjE1LjY3IDIyMyA1MTMuNSAyMjMgNDY0LjA1MyAyMzkuMzIyIDQxOC40MDYgMjcxLjQ2NSAzODEuNjI3IDI1MS4xNDIgMzIwLjkyOCAyNzMuNDIxIDI2OS4xOSAyNzYuMzM3IDI2MS40MTUgMzM0LjQ1OCAyNTYuMTMxIDM5NC44ODggMzAyLjk5MyAzOTkuNTQ5IDMwNi42ODUgNDMyLjY2MyAyOTcuODM1IDQ3MC4zNDEgMjkzIDUxMi41IDI5MyA1NTQuOTI0IDI5MyA1OTIuODEgMjk3Ljg5NiA2MjYuMDc1IDMwNi44NTMgNjM3LjQyNiAyOTguMjE5IDY5My40NiAyNTguMDU0IDc0Ny41IDI2Mi45NjYgNzUwLjM4MiAyNzAuNjUyIDc3Mi4xODUgMzIxLjI5MiA3NTMuMDU4IDM4MS4wODMgNzg1LjUxNiA0MTcuOTU2IDgwMiA0NjMuODA5IDgwMiA1MTMuNSA4MDIgNjE1Ljg3NCA3NDIuOTkgNzAxLjk1MyA2MDEuODAzIDcyNi43ODYgNjI1LjM4MSA3NTAuMDAzIDY0MCA3ODIuMjk1IDY0MCA4MTguMDA4TDY0MCA5MzAuNjUzQzY0MC43NTIgOTM5LjYyNiA2NDAgOTQ4LjY2NDk3OCA2NTUuMDg2IDk0OC42NjUgODMyLjM0NCA4ODguOTYyIDk2MCA3MjEuMzg5IDk2MCA1MjQgOTYwIDI3Ni41NzYgNzU5LjQyNCA3NiA1MTIgNzYgMjY0LjU3NyA3NiA2NCAyNzYuNTc2IDY0IDUyNFpcIj48L3BhdGg+XG48L3N2Zz5cbiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTk1ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XG4gIDxwYXRoIGQ9XCJNNTI3LjA2MTMzMyAxNjYuNTI4QTI3Ny4zMzMzMzMgMjc3LjMzMzMzMyAwIDAgMSAxMDAwLjYxODY2NyAzNjIuNjY2NjY3YTI3Ny4zMzMzMzMgMjc3LjMzMzMzMyAwIDAgMS04MS4yOCAxOTYuMTM4NjY2bC0zNzcuMTczMzM0IDM3Ny4xNzMzMzRhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMS02MC4zMzA2NjYgMGwtMzc3LjE3MzMzNC0zNzcuMTczMzM0YTI3Ny4zNzYgMjc3LjM3NiAwIDAgMSAzOTIuMjc3MzM0LTM5Mi4yNzczMzNsMTUuMDYxMzMzIDE1LjA2MTMzMyAxNS4wNjEzMzMtMTUuMDYxMzMzeiBtMjg2LjcyIDM3Ny4xNzMzMzNsNDUuMjI2NjY3LTQ1LjIyNjY2NmExOTIgMTkyIDAgMCAwLTEzNS44MDgtMzI3Ljg5MzMzNCAxOTIgMTkyIDAgMCAwLTEzNS44MDggNTYuMzJsLTQ1LjIyNjY2NyA0NS4yMjY2NjdhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMS02MC4zMzA2NjYgMGwtNDUuMjI2NjY3LTQ1LjIyNjY2N2ExOTIuMDQyNjY3IDE5Mi4wNDI2NjcgMCAwIDAtMjcxLjYxNiAyNzEuNTczMzM0TDUxMiA4NDUuNDgyNjY3bDMwMS43ODEzMzMtMzAxLjc4MTMzNHpcIj48L3BhdGg+XG48L3N2Zz5cbiI7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMTk2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSAiPHN2ZyB0PVwiMTUxMjQ2MzM2MzcyNFwiIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cbiAgPHBhdGggZD1cIk01MjcuMDYxMzMzIDE2Ni41MjhBMjc3LjMzMzMzMyAyNzcuMzMzMzMzIDAgMCAxIDEwMDAuNjE4NjY3IDM2Mi42NjY2NjdhMjc3LjMzMzMzMyAyNzcuMzMzMzMzIDAgMCAxLTgxLjI4IDE5Ni4xMzg2NjZsLTM3Ny4xNzMzMzQgMzc3LjE3MzMzNGE0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAxLTYwLjMzMDY2NiAwbC0zNzcuMTczMzM0LTM3Ny4xNzMzMzRhMjc3LjM3NiAyNzcuMzc2IDAgMCAxIDM5Mi4yNzczMzQtMzkyLjI3NzMzM2wxNS4wNjEzMzMgMTUuMDYxMzMzIDE1LjA2MTMzMy0xNS4wNjEzMzN6XCI+PC9wYXRoPlxuPC9zdmc+XG4iOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDE5NyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gIjxzdmcgdmlld0JveD1cIjAgMCAxMzMyIDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICA8cGF0aCBkPVwiTTUyOS4wNjY2NjUgMjczLjA2NjY2NiA1MjkuMDY2NjY1IDAgNTEuMiA0NzcuODY2NjY2IDUyOS4wNjY2NjUgOTU1LjczMzMzNSA1MjkuMDY2NjY1IDY3NS44NEM4NzAuNCA2NzUuODQgMTEwOS4zMzMzMzUgNzg1LjA2NjY2NSAxMjgwIDEwMjQgMTIxMS43MzMzMzUgNjgyLjY2NjY2NSAxMDA2LjkzMzMzNSAzNDEuMzMzMzM0IDUyOS4wNjY2NjUgMjczLjA2NjY2NlwiPjwvcGF0aD5cbjwvc3ZnPlxuIjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTggKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9ICI8c3ZnIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgPHBhdGggZD1cIk01MTIgMzY2Ljk0OTUzNWMtMTYuMDY1NTU0IDAtMjkuOTgyMjEyIDEzLjQwNTAxNi0yOS45ODIyMTIgMjkuODc5ODg0bDAgMzU5LjA3MDI1MWMwIDE2LjE2Nzg4MiAxMy40MDUwMTYgMjkuODc5ODg0IDI5Ljk4MjIxMiAyOS44Nzk4ODQgMTUuOTYzMjI2IDAgMjkuODc5ODg0LTEzLjQwNTAxNiAyOS44Nzk4ODQtMjkuODc5ODg0TDU0MS44Nzk4ODQgMzk2LjgyOTQxOUM1NDEuODc5ODg0IDM4MC43NjM4NjUgNTI4LjQ3NDg2OCAzNjYuOTQ5NTM1IDUxMiAzNjYuOTQ5NTM1TDUxMiAzNjYuOTQ5NTM1elwiXG4gICAgcC1pZD1cIjMwODNcIj48L3BhdGg+XG4gIDxwYXRoIGQ9XCJNNDgyLjAxNzc4OCAyODcuNjQ1MDQ4YzAtNy43NzY5NTYgMy4yNzQ1MDgtMTUuNTUzOTEyIDguODAwMjQtMjEuMTgxOTczIDUuNTI1NzMyLTUuNTI1NzMyIDEzLjMwMjY4OC04LjgwMDI0IDIxLjE4MTk3My04LjgwMDI0IDcuNzc2OTU2IDAgMTUuNTUzOTEyIDMuMjc0NTA4IDIxLjA3OTY0NCA4LjgwMDI0IDUuNTI1NzMyIDUuNjI4MDYgOC44MDAyNCAxMy40MDUwMTYgOC44MDAyNCAyMS4xODE5NzMgMCA3Ljc3Njk1Ni0zLjI3NDUwOCAxNS42NTYyNDEtOC44MDAyNCAyMS4xODE5NzMtNS41MjU3MzIgNS41MjU3MzItMTMuNDA1MDE2IDguNjk3OTExLTIxLjA3OTY0NCA4LjY5NzkxMS03Ljg3OTI4NSAwLTE1LjY1NjI0MS0zLjI3NDUwOC0yMS4xODE5NzMtOC42OTc5MTFDNDg1LjI5MjI5NSAzMDMuMzAxMjg5IDQ4Mi4wMTc3ODggMjk1LjUyNDMzMyA0ODIuMDE3Nzg4IDI4Ny42NDUwNDhMNDgyLjAxNzc4OCAyODcuNjQ1MDQ4elwiXG4gICAgcC1pZD1cIjMwODRcIj48L3BhdGg+XG4gIDxwYXRoIGQ9XCJNNTEyIDk0Ni44NDQ0MDljLTIzOS44NTc3IDAtNDM0Ljg5NTU3My0xOTUuMDM3ODczLTQzNC44OTU1NzMtNDM0Ljg5NTU3MyAwLTIzOS44NTc3IDE5NS4wMzc4NzMtNDM0Ljg5NTU3MyA0MzQuODk1NTczLTQzNC44OTU1NzMgMjM5Ljc1NTM3MSAwIDQzNC44OTU1NzMgMTk1LjAzNzg3MyA0MzQuODk1NTczIDQzNC44OTU1NzNDOTQ2Ljg5NTU3MyA3NTEuODA2NTM1IDc1MS43NTUzNzEgOTQ2Ljg0NDQwOSA1MTIgOTQ2Ljg0NDQwOXpNNTEyIDEyNi4xNzA4OGMtMjEyLjc0MDY4MiAwLTM4NS44ODAyODQgMTczLjAzNzI3NC0zODUuODgwMjg0IDM4NS43Nzc5NTUgMCAyMTIuNzQwNjgyIDE3My4wMzcyNzQgMzg1Ljc3Nzk1NSAzODUuODgwMjg0IDM4NS43Nzc5NTUgMjEyLjc0MDY4MiAwIDM4NS43Nzc5NTUtMTczLjAzNzI3NCAzODUuNzc3OTU1LTM4NS43Nzc5NTVDODk3Ljc3Nzk1NSAyOTkuMjA4MTU0IDcyNC43NDA2ODIgMTI2LjE3MDg4IDUxMiAxMjYuMTcwODh6XCJcbiAgICBwLWlkPVwiMzA4NVwiPjwvcGF0aD5cbjwvc3ZnPlxuIjsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAxOTkgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgZGlzdGFuY2VJbldvcmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IFJldHVybiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZSBhbmQgbm93IGluIHdvcmRzLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogUmV0dXJuIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlIGFuZCBub3cgaW4gd29yZHMuCiAgICAgICAqCiAgICAgICAqIHwgRGlzdGFuY2UgdG8gbm93ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSZXN1bHQgICAgICAgICAgICAgIHwKICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tfAogICAgICAgKiB8IDAgLi4uIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbGVzcyB0aGFuIGEgbWludXRlICB8CiAgICAgICAqIHwgMzAgc2VjcyAuLi4gMSBtaW4gMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAxIG1pbnV0ZSAgICAgICAgICAgIHwKICAgICAgICogfCAxIG1pbiAzMCBzZWNzIC4uLiA0NCBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFsyLi40NF0gbWludXRlcyAgICAgfAogICAgICAgKiB8IDQ0IG1pbnMgLi4uIDMwIHNlY3MgLi4uIDg5IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgMSBob3VyICAgICAgICB8CiAgICAgICAqIHwgODkgbWlucyAzMCBzZWNzIC4uLiAyMyBocnMgNTkgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCBbMi4uMjRdIGhvdXJzIHwKICAgICAgICogfCAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiA0MSBocnMgNTkgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICB8IDEgZGF5ICAgICAgICAgICAgICAgfAogICAgICAgKiB8IDQxIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDI5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAgICAgICAgIHwgWzIuLjMwXSBkYXlzICAgICAgICB8CiAgICAgICAqIHwgMjkgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiA0NCBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgfCBhYm91dCAxIG1vbnRoICAgICAgIHwKICAgICAgICogfCA0NCBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDU5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyB8IGFib3V0IDIgbW9udGhzICAgICAgfAogICAgICAgKiB8IDU5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gMSB5ciAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWzIuLjEyXSBtb250aHMgICAgICB8CiAgICAgICAqIHwgMSB5ciAuLi4gMSB5ciAzIG1vbnRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCAxIHllYXIgICAgICAgIHwKICAgICAgICogfCAxIHlyIDMgbW9udGhzIC4uLiAxIHlyIDkgbW9udGggcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG92ZXIgMSB5ZWFyICAgICAgICAgfAogICAgICAgKiB8IDEgeXIgOSBtb250aHMgLi4uIDIgeXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWxtb3N0IDIgeWVhcnMgICAgICB8CiAgICAgICAqIHwgTiB5cnMgLi4uIE4geXJzIDMgbW9udGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYm91dCBOIHllYXJzICAgICAgIHwKICAgICAgICogfCBOIHlycyAzIG1vbnRocyAuLi4gTiB5cnMgOSBtb250aHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG92ZXIgTiB5ZWFycyAgICAgICAgfAogICAgICAgKiB8IE4geXJzIDkgbW9udGhzIC4uLiBOKzEgeXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWxtb3N0IE4rMSB5ZWFycyAgICB8CiAgICAgICAqCiAgICAgICAqIFdpdGggYG9wdGlvbnMuaW5jbHVkZVNlY29uZHMgPT0gdHJ1ZWA6CiAgICAgICAqIHwgRGlzdGFuY2UgdG8gbm93ICAgICB8IFJlc3VsdCAgICAgICAgICAgICAgIHwKICAgICAgICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tfAogICAgICAgKiB8IDAgc2VjcyAuLi4gNSBzZWNzICAgfCBsZXNzIHRoYW4gNSBzZWNvbmRzICB8CiAgICAgICAqIHwgNSBzZWNzIC4uLiAxMCBzZWNzICB8IGxlc3MgdGhhbiAxMCBzZWNvbmRzIHwKICAgICAgICogfCAxMCBzZWNzIC4uLiAyMCBzZWNzIHwgbGVzcyB0aGFuIDIwIHNlY29uZHMgfAogICAgICAgKiB8IDIwIHNlY3MgLi4uIDQwIHNlY3MgfCBoYWxmIGEgbWludXRlICAgICAgICB8CiAgICAgICAqIHwgNDAgc2VjcyAuLi4gNjAgc2VjcyB8IGxlc3MgdGhhbiBhIG1pbnV0ZSAgIHwKICAgICAgICogfCA2MCBzZWNzIC4uLiA5MCBzZWNzIHwgMSBtaW51dGUgICAgICAgICAgICAgfAogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZSAtIHRoZSBnaXZlbiBkYXRlCiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9ucwogICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmluY2x1ZGVTZWNvbmRzPWZhbHNlXSAtIGRpc3RhbmNlcyBsZXNzIHRoYW4gYSBtaW51dGUgYXJlIG1vcmUgZGV0YWlsZWQKICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hZGRTdWZmaXg9ZmFsc2VdIC0gcmVzdWx0IHNwZWNpZmllcyBpZiB0aGUgc2Vjb25kIGRhdGUgaXMgZWFybGllciBvciBsYXRlciB0aGFuIHRoZSBmaXJzdAogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMubG9jYWxlPWVuTG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0CiAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBkaXN0YW5jZSBpbiB3b3JkcwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBJZiB0b2RheSBpcyAxIEphbnVhcnkgMjAxNSwgd2hhdCBpcyB0aGUgZGlzdGFuY2UgdG8gMiBKdWx5IDIwMTQ/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNUb05vdygKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyKQogICAgICAgKiApCiAgICAgICAqIC8vPT4gJzYgbW9udGhzJwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBJZiBub3cgaXMgMSBKYW51YXJ5IDIwMTUgMDA6MDA6MDAsCiAgICAgICAqIC8vIHdoYXQgaXMgdGhlIGRpc3RhbmNlIHRvIDEgSmFudWFyeSAyMDE1IDAwOjAwOjE1LCBpbmNsdWRpbmcgc2Vjb25kcz8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc1RvTm93KAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTUsIDAsIDEsIDAsIDAsIDE1KSwKICAgICAgICogICB7aW5jbHVkZVNlY29uZHM6IHRydWV9CiAgICAgICAqICkKICAgICAgICogLy89PiAnbGVzcyB0aGFuIDIwIHNlY29uZHMnCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIElmIHRvZGF5IGlzIDEgSmFudWFyeSAyMDE1LAogICAgICAgKiAvLyB3aGF0IGlzIHRoZSBkaXN0YW5jZSB0byAxIEphbnVhcnkgMjAxNiwgd2l0aCBhIHN1ZmZpeD8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc1RvTm93KAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTYsIDAsIDEpLAogICAgICAgKiAgIHthZGRTdWZmaXg6IHRydWV9CiAgICAgICAqICkKICAgICAgICogLy89PiAnaW4gYWJvdXQgMSB5ZWFyJwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBJZiB0b2RheSBpcyAxIEphbnVhcnkgMjAxNSwKICAgICAgICogLy8gd2hhdCBpcyB0aGUgZGlzdGFuY2UgdG8gMSBBdWd1c3QgMjAxNiBpbiBFc3BlcmFudG8/CiAgICAgICAqIHZhciBlb0xvY2FsZSA9IHJlcXVpcmUoJ2RhdGUtZm5zL2xvY2FsZS9lbycpCiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNUb05vdygKICAgICAgICogICBuZXcgRGF0ZSgyMDE2LCA3LCAxKSwKICAgICAgICogICB7bG9jYWxlOiBlb0xvY2FsZX0KICAgICAgICogKQogICAgICAgKiAvLz0+ICdwbGkgb2wgMSBqYXJvJwogICAgICAgKi8KCgogICAgICBmdW5jdGlvbiBkaXN0YW5jZUluV29yZHNUb05vdyhkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykgewogICAgICAgIHJldHVybiBkaXN0YW5jZUluV29yZHMoRGF0ZS5ub3coKSwgZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRpc3RhbmNlSW5Xb3Jkc1RvTm93OwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBjb21wYXJlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAxKTsKCiAgICAgIHZhciBwYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwoKICAgICAgdmFyIGRpZmZlcmVuY2VJblNlY29uZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMyk7CgogICAgICB2YXIgZGlmZmVyZW5jZUluTW9udGhzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDUpOwoKICAgICAgdmFyIGVuTG9jYWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDgpOwoKICAgICAgdmFyIE1JTlVURVNfSU5fREFZID0gMTQ0MDsKICAgICAgdmFyIE1JTlVURVNfSU5fQUxNT1NUX1RXT19EQVlTID0gMjUyMDsKICAgICAgdmFyIE1JTlVURVNfSU5fTU9OVEggPSA0MzIwMDsKICAgICAgdmFyIE1JTlVURVNfSU5fVFdPX01PTlRIUyA9IDg2NDAwOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IFJldHVybiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMgaW4gd29yZHMuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBSZXR1cm4gdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzIGluIHdvcmRzLgogICAgICAgKgogICAgICAgKiB8IERpc3RhbmNlIGJldHdlZW4gZGF0ZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUmVzdWx0ICAgICAgICAgICAgICB8CiAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwKICAgICAgICogfCAwIC4uLiAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGxlc3MgdGhhbiBhIG1pbnV0ZSAgfAogICAgICAgKiB8IDMwIHNlY3MgLi4uIDEgbWluIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMSBtaW51dGUgICAgICAgICAgICB8CiAgICAgICAqIHwgMSBtaW4gMzAgc2VjcyAuLi4gNDQgbWlucyAzMCBzZWNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBbMi4uNDRdIG1pbnV0ZXMgICAgIHwKICAgICAgICogfCA0NCBtaW5zIC4uLiAzMCBzZWNzIC4uLiA4OSBtaW5zIDMwIHNlY3MgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFib3V0IDEgaG91ciAgICAgICAgfAogICAgICAgKiB8IDg5IG1pbnMgMzAgc2VjcyAuLi4gMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgWzIuLjI0XSBob3VycyB8CiAgICAgICAqIHwgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gNDEgaHJzIDU5IG1pbnMgMzAgc2VjcyAgICAgICAgICAgICAgICAgfCAxIGRheSAgICAgICAgICAgICAgIHwKICAgICAgICogfCA0MSBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiAyOSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgICAgICAgICB8IFsyLi4zMF0gZGF5cyAgICAgICAgfAogICAgICAgKiB8IDI5IGRheXMgMjMgaHJzIDU5IG1pbnMgMzAgc2VjcyAuLi4gNDQgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIHwgYWJvdXQgMSBtb250aCAgICAgICB8CiAgICAgICAqIHwgNDQgZGF5cyAyMyBocnMgNTkgbWlucyAzMCBzZWNzIC4uLiA1OSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgfCBhYm91dCAyIG1vbnRocyAgICAgIHwKICAgICAgICogfCA1OSBkYXlzIDIzIGhycyA1OSBtaW5zIDMwIHNlY3MgLi4uIDEgeXIgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFsyLi4xMl0gbW9udGhzICAgICAgfAogICAgICAgKiB8IDEgeXIgLi4uIDEgeXIgMyBtb250aHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgMSB5ZWFyICAgICAgICB8CiAgICAgICAqIHwgMSB5ciAzIG1vbnRocyAuLi4gMSB5ciA5IG1vbnRoIHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBvdmVyIDEgeWVhciAgICAgICAgIHwKICAgICAgICogfCAxIHlyIDkgbW9udGhzIC4uLiAyIHlycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFsbW9zdCAyIHllYXJzICAgICAgfAogICAgICAgKiB8IE4geXJzIC4uLiBOIHlycyAzIG1vbnRocyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWJvdXQgTiB5ZWFycyAgICAgICB8CiAgICAgICAqIHwgTiB5cnMgMyBtb250aHMgLi4uIE4geXJzIDkgbW9udGhzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBvdmVyIE4geWVhcnMgICAgICAgIHwKICAgICAgICogfCBOIHlycyA5IG1vbnRocyAuLi4gTisxIHlycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFsbW9zdCBOKzEgeWVhcnMgICAgfAogICAgICAgKgogICAgICAgKiBXaXRoIGBvcHRpb25zLmluY2x1ZGVTZWNvbmRzID09IHRydWVgOgogICAgICAgKiB8IERpc3RhbmNlIGJldHdlZW4gZGF0ZXMgfCBSZXN1bHQgICAgICAgICAgICAgICB8CiAgICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwKICAgICAgICogfCAwIHNlY3MgLi4uIDUgc2VjcyAgICAgIHwgbGVzcyB0aGFuIDUgc2Vjb25kcyAgfAogICAgICAgKiB8IDUgc2VjcyAuLi4gMTAgc2VjcyAgICAgfCBsZXNzIHRoYW4gMTAgc2Vjb25kcyB8CiAgICAgICAqIHwgMTAgc2VjcyAuLi4gMjAgc2VjcyAgICB8IGxlc3MgdGhhbiAyMCBzZWNvbmRzIHwKICAgICAgICogfCAyMCBzZWNzIC4uLiA0MCBzZWNzICAgIHwgaGFsZiBhIG1pbnV0ZSAgICAgICAgfAogICAgICAgKiB8IDQwIHNlY3MgLi4uIDYwIHNlY3MgICAgfCBsZXNzIHRoYW4gYSBtaW51dGUgICB8CiAgICAgICAqIHwgNjAgc2VjcyAuLi4gOTAgc2VjcyAgICB8IDEgbWludXRlICAgICAgICAgICAgIHwKICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVUb0NvbXBhcmUgLSB0aGUgZGF0ZSB0byBjb21wYXJlIHdpdGgKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGUgLSB0aGUgb3RoZXIgZGF0ZQogICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMKICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pbmNsdWRlU2Vjb25kcz1mYWxzZV0gLSBkaXN0YW5jZXMgbGVzcyB0aGFuIGEgbWludXRlIGFyZSBtb3JlIGRldGFpbGVkCiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYWRkU3VmZml4PWZhbHNlXSAtIHJlc3VsdCBpbmRpY2F0ZXMgaWYgdGhlIHNlY29uZCBkYXRlIGlzIGVhcmxpZXIgb3IgbGF0ZXIgdGhhbiB0aGUgZmlyc3QKICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmxvY2FsZT1lbkxvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdAogICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgZGlzdGFuY2UgaW4gd29yZHMKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gV2hhdCBpcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIEp1bHkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTU/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNSwgMCwgMSkKICAgICAgICogKQogICAgICAgKiAvLz0+ICc2IG1vbnRocycKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gV2hhdCBpcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAxIEphbnVhcnkgMjAxNSAwMDowMDoxNQogICAgICAgKiAvLyBhbmQgMSBKYW51YXJ5IDIwMTUgMDA6MDA6MDAsIGluY2x1ZGluZyBzZWNvbmRzPwogICAgICAgKiB2YXIgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTUsIDAsIDEsIDAsIDAsIDE1KSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE1LCAwLCAxLCAwLCAwLCAwKSwKICAgICAgICogICB7aW5jbHVkZVNlY29uZHM6IHRydWV9CiAgICAgICAqICkKICAgICAgICogLy89PiAnbGVzcyB0aGFuIDIwIHNlY29uZHMnCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIFdoYXQgaXMgdGhlIGRpc3RhbmNlIGZyb20gMSBKYW51YXJ5IDIwMTYKICAgICAgICogLy8gdG8gMSBKYW51YXJ5IDIwMTUsIHdpdGggYSBzdWZmaXg/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaXN0YW5jZUluV29yZHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNiwgMCwgMSksCiAgICAgICAqICAgbmV3IERhdGUoMjAxNSwgMCwgMSksCiAgICAgICAqICAge2FkZFN1ZmZpeDogdHJ1ZX0KICAgICAgICogKQogICAgICAgKiAvLz0+ICdhYm91dCAxIHllYXIgYWdvJwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBXaGF0IGlzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDEgQXVndXN0IDIwMTYgYW5kIDEgSmFudWFyeSAyMDE1IGluIEVzcGVyYW50bz8KICAgICAgICogdmFyIGVvTG9jYWxlID0gcmVxdWlyZSgnZGF0ZS1mbnMvbG9jYWxlL2VvJykKICAgICAgICogdmFyIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3JkcygKICAgICAgICogICBuZXcgRGF0ZSgyMDE2LCA3LCAxKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE1LCAwLCAxKSwKICAgICAgICogICB7bG9jYWxlOiBlb0xvY2FsZX0KICAgICAgICogKQogICAgICAgKiAvLz0+ICdwbGkgb2wgMSBqYXJvJwogICAgICAgKi8KCiAgICAgIGZ1bmN0aW9uIGRpc3RhbmNlSW5Xb3JkcyhkaXJ0eURhdGVUb0NvbXBhcmUsIGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7CiAgICAgICAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307CiAgICAgICAgdmFyIGNvbXBhcmlzb24gPSBjb21wYXJlRGVzYyhkaXJ0eURhdGVUb0NvbXBhcmUsIGRpcnR5RGF0ZSk7CiAgICAgICAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlOwogICAgICAgIHZhciBsb2NhbGl6ZSA9IGVuTG9jYWxlLmRpc3RhbmNlSW5Xb3Jkcy5sb2NhbGl6ZTsKCiAgICAgICAgaWYgKGxvY2FsZSAmJiBsb2NhbGUuZGlzdGFuY2VJbldvcmRzICYmIGxvY2FsZS5kaXN0YW5jZUluV29yZHMubG9jYWxpemUpIHsKICAgICAgICAgIGxvY2FsaXplID0gbG9jYWxlLmRpc3RhbmNlSW5Xb3Jkcy5sb2NhbGl6ZTsKICAgICAgICB9CgogICAgICAgIHZhciBsb2NhbGl6ZU9wdGlvbnMgPSB7CiAgICAgICAgICBhZGRTdWZmaXg6IEJvb2xlYW4ob3B0aW9ucy5hZGRTdWZmaXgpLAogICAgICAgICAgY29tcGFyaXNvbjogY29tcGFyaXNvbgogICAgICAgIH07CiAgICAgICAgdmFyIGRhdGVMZWZ0LCBkYXRlUmlnaHQ7CgogICAgICAgIGlmIChjb21wYXJpc29uID4gMCkgewogICAgICAgICAgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGVUb0NvbXBhcmUpOwogICAgICAgICAgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGUpOwogICAgICAgICAgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlVG9Db21wYXJlKTsKICAgICAgICB9CgogICAgICAgIHZhciBzZWNvbmRzID0gZGlmZmVyZW5jZUluU2Vjb25kcyhkYXRlUmlnaHQsIGRhdGVMZWZ0KTsKICAgICAgICB2YXIgb2Zmc2V0ID0gZGF0ZVJpZ2h0LmdldFRpbWV6b25lT2Zmc2V0KCkgLSBkYXRlTGVmdC5nZXRUaW1lem9uZU9mZnNldCgpOwogICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5yb3VuZChzZWNvbmRzIC8gNjApIC0gb2Zmc2V0OwogICAgICAgIHZhciBtb250aHM7IC8vIDAgdXAgdG8gMiBtaW5zCgogICAgICAgIGlmIChtaW51dGVzIDwgMikgewogICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZVNlY29uZHMpIHsKICAgICAgICAgICAgaWYgKHNlY29uZHMgPCA1KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdsZXNzVGhhblhTZWNvbmRzJywgNSwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZWNvbmRzIDwgMTApIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2xlc3NUaGFuWFNlY29uZHMnLCAxMCwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZWNvbmRzIDwgMjApIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2xlc3NUaGFuWFNlY29uZHMnLCAyMCwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZWNvbmRzIDwgNDApIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2hhbGZBTWludXRlJywgbnVsbCwgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZWNvbmRzIDwgNjApIHsKICAgICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2xlc3NUaGFuWE1pbnV0ZXMnLCAxLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgneE1pbnV0ZXMnLCAxLCBsb2NhbGl6ZU9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAobWludXRlcyA9PT0gMCkgewogICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnbGVzc1RoYW5YTWludXRlcycsIDEsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCd4TWludXRlcycsIG1pbnV0ZXMsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gMiBtaW5zIHVwIHRvIDAuNzUgaHJzCgogICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IDQ1KSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ3hNaW51dGVzJywgbWludXRlcywgbG9jYWxpemVPcHRpb25zKTsgLy8gMC43NSBocnMgdXAgdG8gMS41IGhycwogICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IDkwKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2Fib3V0WEhvdXJzJywgMSwgbG9jYWxpemVPcHRpb25zKTsgLy8gMS41IGhycyB1cCB0byAyNCBocnMKICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCBNSU5VVEVTX0lOX0RBWSkgewogICAgICAgICAgdmFyIGhvdXJzID0gTWF0aC5yb3VuZChtaW51dGVzIC8gNjApOwogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdhYm91dFhIb3VycycsIGhvdXJzLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyAxIGRheSB1cCB0byAxLjc1IGRheXMKICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCBNSU5VVEVTX0lOX0FMTU9TVF9UV09fREFZUykgewogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCd4RGF5cycsIDEsIGxvY2FsaXplT3B0aW9ucyk7IC8vIDEuNzUgZGF5cyB1cCB0byAzMCBkYXlzCiAgICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgTUlOVVRFU19JTl9NT05USCkgewogICAgICAgICAgdmFyIGRheXMgPSBNYXRoLnJvdW5kKG1pbnV0ZXMgLyBNSU5VVEVTX0lOX0RBWSk7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ3hEYXlzJywgZGF5cywgbG9jYWxpemVPcHRpb25zKTsgLy8gMSBtb250aCB1cCB0byAyIG1vbnRocwogICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IE1JTlVURVNfSU5fVFdPX01PTlRIUykgewogICAgICAgICAgbW9udGhzID0gTWF0aC5yb3VuZChtaW51dGVzIC8gTUlOVVRFU19JTl9NT05USCk7CiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ2Fib3V0WE1vbnRocycsIG1vbnRocywgbG9jYWxpemVPcHRpb25zKTsKICAgICAgICB9CgogICAgICAgIG1vbnRocyA9IGRpZmZlcmVuY2VJbk1vbnRocyhkYXRlUmlnaHQsIGRhdGVMZWZ0KTsgLy8gMiBtb250aHMgdXAgdG8gMTIgbW9udGhzCgogICAgICAgIGlmIChtb250aHMgPCAxMikgewogICAgICAgICAgdmFyIG5lYXJlc3RNb250aCA9IE1hdGgucm91bmQobWludXRlcyAvIE1JTlVURVNfSU5fTU9OVEgpOwogICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCd4TW9udGhzJywgbmVhcmVzdE1vbnRoLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyAxIHllYXIgdXAgdG8gbWF4IERhdGUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG1vbnRoc1NpbmNlU3RhcnRPZlllYXIgPSBtb250aHMgJSAxMjsKICAgICAgICAgIHZhciB5ZWFycyA9IE1hdGguZmxvb3IobW9udGhzIC8gMTIpOyAvLyBOIHllYXJzIHVwIHRvIDEgeWVhcnMgMyBtb250aHMKCiAgICAgICAgICBpZiAobW9udGhzU2luY2VTdGFydE9mWWVhciA8IDMpIHsKICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdhYm91dFhZZWFycycsIHllYXJzLCBsb2NhbGl6ZU9wdGlvbnMpOyAvLyBOIHllYXJzIDMgbW9udGhzIHVwIHRvIE4geWVhcnMgOSBtb250aHMKICAgICAgICAgIH0gZWxzZSBpZiAobW9udGhzU2luY2VTdGFydE9mWWVhciA8IDkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdvdmVyWFllYXJzJywgeWVhcnMsIGxvY2FsaXplT3B0aW9ucyk7IC8vIE4geWVhcnMgOSBtb250aHMgdXAgdG8gTiB5ZWFyIDEyIG1vbnRocwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdhbG1vc3RYWWVhcnMnLCB5ZWFycyArIDEsIGxvY2FsaXplT3B0aW9ucyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRpc3RhbmNlSW5Xb3JkczsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMDEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICB2YXIgcGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBDb21wYXJlIHRoZSB0d28gZGF0ZXMgcmV2ZXJzZSBjaHJvbm9sb2dpY2FsbHkgYW5kIHJldHVybiAtMSwgMCBvciAxLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogQ29tcGFyZSB0aGUgdHdvIGRhdGVzIGFuZCByZXR1cm4gLTEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYWZ0ZXIgdGhlIHNlY29uZCwKICAgICAgICogMSBpZiB0aGUgZmlyc3QgZGF0ZSBpcyBiZWZvcmUgdGhlIHNlY29uZCBvciAwIGlmIGRhdGVzIGFyZSBlcXVhbC4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY29tcGFyZQogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNvbXBhcmUKICAgICAgICogQHJldHVybnMge051bWJlcn0gdGhlIHJlc3VsdCBvZiB0aGUgY29tcGFyaXNvbgogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBDb21wYXJlIDExIEZlYnJ1YXJ5IDE5ODcgYW5kIDEwIEp1bHkgMTk4OSByZXZlcnNlIGNocm9ub2xvZ2ljYWxseToKICAgICAgICogdmFyIHJlc3VsdCA9IGNvbXBhcmVEZXNjKAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODcsIDEsIDExKSwKICAgICAgICogICBuZXcgRGF0ZSgxOTg5LCA2LCAxMCkKICAgICAgICogKQogICAgICAgKiAvLz0+IDEKICAgICAgICoKICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gU29ydCB0aGUgYXJyYXkgb2YgZGF0ZXMgaW4gcmV2ZXJzZSBjaHJvbm9sb2dpY2FsIG9yZGVyOgogICAgICAgKiB2YXIgcmVzdWx0ID0gWwogICAgICAgKiAgIG5ldyBEYXRlKDE5OTUsIDYsIDIpLAogICAgICAgKiAgIG5ldyBEYXRlKDE5ODcsIDEsIDExKSwKICAgICAgICogICBuZXcgRGF0ZSgxOTg5LCA2LCAxMCkKICAgICAgICogXS5zb3J0KGNvbXBhcmVEZXNjKQogICAgICAgKiAvLz0+IFsKICAgICAgICogLy8gICBTdW4gSnVsIDAyIDE5OTUgMDA6MDA6MDAsCiAgICAgICAqIC8vICAgTW9uIEp1bCAxMCAxOTg5IDAwOjAwOjAwLAogICAgICAgKiAvLyAgIFdlZCBGZWIgMTEgMTk4NyAwMDowMDowMAogICAgICAgKiAvLyBdCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGNvbXBhcmVEZXNjKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7CiAgICAgICAgdmFyIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlTGVmdCk7CiAgICAgICAgdmFyIHRpbWVMZWZ0ID0gZGF0ZUxlZnQuZ2V0VGltZSgpOwogICAgICAgIHZhciBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGVSaWdodCk7CiAgICAgICAgdmFyIHRpbWVSaWdodCA9IGRhdGVSaWdodC5nZXRUaW1lKCk7CgogICAgICAgIGlmICh0aW1lTGVmdCA+IHRpbWVSaWdodCkgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0gZWxzZSBpZiAodGltZUxlZnQgPCB0aW1lUmlnaHQpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gY29tcGFyZURlc2M7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjAyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gYXJndW1lbnQgYW4gaW5zdGFuY2Ugb2YgRGF0ZT8KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIElzIHRoZSBnaXZlbiBhcmd1bWVudCBhbiBpbnN0YW5jZSBvZiBEYXRlPwogICAgICAgKgogICAgICAgKiBAcGFyYW0geyp9IGFyZ3VtZW50IC0gdGhlIGFyZ3VtZW50IHRvIGNoZWNrCiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZ2l2ZW4gYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZQogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBJcyAnbWF5b25uYWlzZScgYSBEYXRlPwogICAgICAgKiB2YXIgcmVzdWx0ID0gaXNEYXRlKCdtYXlvbm5haXNlJykKICAgICAgICogLy89PiBmYWxzZQogICAgICAgKi8KICAgICAgZnVuY3Rpb24gaXNEYXRlKGFyZ3VtZW50KSB7CiAgICAgICAgcmV0dXJuIGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBpc0RhdGU7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjAzICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIGRpZmZlcmVuY2VJbk1pbGxpc2Vjb25kcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBTZWNvbmQgSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBHZXQgdGhlIG51bWJlciBvZiBzZWNvbmRzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogR2V0IHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGxhdGVyIGRhdGUKICAgICAgICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBlYXJsaWVyIGRhdGUKICAgICAgICogQHJldHVybnMge051bWJlcn0gdGhlIG51bWJlciBvZiBzZWNvbmRzCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIEhvdyBtYW55IHNlY29uZHMgYXJlIGJldHdlZW4KICAgICAgICogLy8gMiBKdWx5IDIwMTQgMTI6MzA6MDcuOTk5IGFuZCAyIEp1bHkgMjAxNCAxMjozMDoyMC4wMDA/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaWZmZXJlbmNlSW5TZWNvbmRzKAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDYsIDIsIDEyLCAzMCwgMjAsIDApLAogICAgICAgKiAgIG5ldyBEYXRlKDIwMTQsIDYsIDIsIDEyLCAzMCwgNywgOTk5KQogICAgICAgKiApCiAgICAgICAqIC8vPT4gMTIKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZGlmZmVyZW5jZUluU2Vjb25kcyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgewogICAgICAgIHZhciBkaWZmID0gZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSAvIDEwMDA7CiAgICAgICAgcmV0dXJuIGRpZmYgPiAwID8gTWF0aC5mbG9vcihkaWZmKSA6IE1hdGguY2VpbChkaWZmKTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkaWZmZXJlbmNlSW5TZWNvbmRzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBwYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IE1pbGxpc2Vjb25kIEhlbHBlcnMKICAgICAgICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAZGVzY3JpcHRpb24KICAgICAgICogR2V0IHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgbGF0ZXIgZGF0ZQogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIGVhcmxpZXIgZGF0ZQogICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcwogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBIb3cgbWFueSBtaWxsaXNlY29uZHMgYXJlIGJldHdlZW4KICAgICAgICogLy8gMiBKdWx5IDIwMTQgMTI6MzA6MjAuNjAwIGFuZCAyIEp1bHkgMjAxNCAxMjozMDoyMS43MDA/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaWZmZXJlbmNlSW5NaWxsaXNlY29uZHMoCiAgICAgICAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiwgMTIsIDMwLCAyMSwgNzAwKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxMiwgMzAsIDIwLCA2MDApCiAgICAgICAqICkKICAgICAgICogLy89PiAxMTAwCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGRpZmZlcmVuY2VJbk1pbGxpc2Vjb25kcyhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCkgewogICAgICAgIHZhciBkYXRlTGVmdCA9IHBhcnNlKGRpcnR5RGF0ZUxlZnQpOwogICAgICAgIHZhciBkYXRlUmlnaHQgPSBwYXJzZShkaXJ0eURhdGVSaWdodCk7CiAgICAgICAgcmV0dXJuIGRhdGVMZWZ0LmdldFRpbWUoKSAtIGRhdGVSaWdodC5nZXRUaW1lKCk7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZGlmZmVyZW5jZUluTWlsbGlzZWNvbmRzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwNSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBwYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwoKICAgICAgdmFyIGRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDYpOwoKICAgICAgdmFyIGNvbXBhcmVBc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNyk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgTW9udGggSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBHZXQgdGhlIG51bWJlciBvZiBmdWxsIG1vbnRocyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4KICAgICAgICoKICAgICAgICogQGRlc2NyaXB0aW9uCiAgICAgICAqIEdldCB0aGUgbnVtYmVyIG9mIGZ1bGwgbW9udGhzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgbGF0ZXIgZGF0ZQogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIGVhcmxpZXIgZGF0ZQogICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgbnVtYmVyIG9mIGZ1bGwgbW9udGhzCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIEhvdyBtYW55IGZ1bGwgbW9udGhzIGFyZSBiZXR3ZWVuIDMxIEphbnVhcnkgMjAxNCBhbmQgMSBTZXB0ZW1iZXIgMjAxND8KICAgICAgICogdmFyIHJlc3VsdCA9IGRpZmZlcmVuY2VJbk1vbnRocygKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA4LCAxKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCAwLCAzMSkKICAgICAgICogKQogICAgICAgKiAvLz0+IDcKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZGlmZmVyZW5jZUluTW9udGhzKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7CiAgICAgICAgdmFyIGRhdGVMZWZ0ID0gcGFyc2UoZGlydHlEYXRlTGVmdCk7CiAgICAgICAgdmFyIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZVJpZ2h0KTsKICAgICAgICB2YXIgc2lnbiA9IGNvbXBhcmVBc2MoZGF0ZUxlZnQsIGRhdGVSaWdodCk7CiAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSBNYXRoLmFicyhkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocyhkYXRlTGVmdCwgZGF0ZVJpZ2h0KSk7CiAgICAgICAgZGF0ZUxlZnQuc2V0TW9udGgoZGF0ZUxlZnQuZ2V0TW9udGgoKSAtIHNpZ24gKiBkaWZmZXJlbmNlKTsgLy8gTWF0aC5hYnMoZGlmZiBpbiBmdWxsIG1vbnRocyAtIGRpZmYgaW4gY2FsZW5kYXIgbW9udGhzKSA9PT0gMSBpZiBsYXN0IGNhbGVuZGFyIG1vbnRoIGlzIG5vdCBmdWxsCiAgICAgICAgLy8gSWYgc28sIHJlc3VsdCBtdXN0IGJlIGRlY3JlYXNlZCBieSAxIGluIGFic29sdXRlIHZhbHVlCgogICAgICAgIHZhciBpc0xhc3RNb250aE5vdEZ1bGwgPSBjb21wYXJlQXNjKGRhdGVMZWZ0LCBkYXRlUmlnaHQpID09PSAtc2lnbjsKICAgICAgICByZXR1cm4gc2lnbiAqIChkaWZmZXJlbmNlIC0gaXNMYXN0TW9udGhOb3RGdWxsKTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkaWZmZXJlbmNlSW5Nb250aHM7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjA2ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgdmFyIHBhcnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CiAgICAgIC8qKgogICAgICAgKiBAY2F0ZWdvcnkgTW9udGggSGVscGVycwogICAgICAgKiBAc3VtbWFyeSBHZXQgdGhlIG51bWJlciBvZiBjYWxlbmRhciBtb250aHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBjYWxlbmRhciBtb250aHMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBsYXRlciBkYXRlCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgZWFybGllciBkYXRlCiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgbW9udGhzCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIEhvdyBtYW55IGNhbGVuZGFyIG1vbnRocyBhcmUgYmV0d2VlbiAzMSBKYW51YXJ5IDIwMTQgYW5kIDEgU2VwdGVtYmVyIDIwMTQ/CiAgICAgICAqIHZhciByZXN1bHQgPSBkaWZmZXJlbmNlSW5DYWxlbmRhck1vbnRocygKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCA4LCAxKSwKICAgICAgICogICBuZXcgRGF0ZSgyMDE0LCAwLCAzMSkKICAgICAgICogKQogICAgICAgKiAvLz0+IDgKICAgICAgICovCgoKICAgICAgZnVuY3Rpb24gZGlmZmVyZW5jZUluQ2FsZW5kYXJNb250aHMoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHsKICAgICAgICB2YXIgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGVMZWZ0KTsKICAgICAgICB2YXIgZGF0ZVJpZ2h0ID0gcGFyc2UoZGlydHlEYXRlUmlnaHQpOwogICAgICAgIHZhciB5ZWFyRGlmZiA9IGRhdGVMZWZ0LmdldEZ1bGxZZWFyKCkgLSBkYXRlUmlnaHQuZ2V0RnVsbFllYXIoKTsKICAgICAgICB2YXIgbW9udGhEaWZmID0gZGF0ZUxlZnQuZ2V0TW9udGgoKSAtIGRhdGVSaWdodC5nZXRNb250aCgpOwogICAgICAgIHJldHVybiB5ZWFyRGlmZiAqIDEyICsgbW9udGhEaWZmOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyTW9udGhzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwNyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBwYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwogICAgICAvKioKICAgICAgICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAgICAgICAqIEBzdW1tYXJ5IENvbXBhcmUgdGhlIHR3byBkYXRlcyBhbmQgcmV0dXJuIC0xLCAwIG9yIDEuCiAgICAgICAqCiAgICAgICAqIEBkZXNjcmlwdGlvbgogICAgICAgKiBDb21wYXJlIHRoZSB0d28gZGF0ZXMgYW5kIHJldHVybiAxIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGFmdGVyIHRoZSBzZWNvbmQsCiAgICAgICAqIC0xIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGJlZm9yZSB0aGUgc2Vjb25kIG9yIDAgaWYgZGF0ZXMgYXJlIGVxdWFsLgogICAgICAgKgogICAgICAgKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjb21wYXJlCiAgICAgICAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY29tcGFyZQogICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSB0aGUgcmVzdWx0IG9mIHRoZSBjb21wYXJpc29uCiAgICAgICAqCiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIC8vIENvbXBhcmUgMTEgRmVicnVhcnkgMTk4NyBhbmQgMTAgSnVseSAxOTg5OgogICAgICAgKiB2YXIgcmVzdWx0ID0gY29tcGFyZUFzYygKICAgICAgICogICBuZXcgRGF0ZSgxOTg3LCAxLCAxMSksCiAgICAgICAqICAgbmV3IERhdGUoMTk4OSwgNiwgMTApCiAgICAgICAqICkKICAgICAgICogLy89PiAtMQogICAgICAgKgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiAvLyBTb3J0IHRoZSBhcnJheSBvZiBkYXRlczoKICAgICAgICogdmFyIHJlc3VsdCA9IFsKICAgICAgICogICBuZXcgRGF0ZSgxOTk1LCA2LCAyKSwKICAgICAgICogICBuZXcgRGF0ZSgxOTg3LCAxLCAxMSksCiAgICAgICAqICAgbmV3IERhdGUoMTk4OSwgNiwgMTApCiAgICAgICAqIF0uc29ydChjb21wYXJlQXNjKQogICAgICAgKiAvLz0+IFsKICAgICAgICogLy8gICBXZWQgRmViIDExIDE5ODcgMDA6MDA6MDAsCiAgICAgICAqIC8vICAgTW9uIEp1bCAxMCAxOTg5IDAwOjAwOjAwLAogICAgICAgKiAvLyAgIFN1biBKdWwgMDIgMTk5NSAwMDowMDowMAogICAgICAgKiAvLyBdCiAgICAgICAqLwoKCiAgICAgIGZ1bmN0aW9uIGNvbXBhcmVBc2MoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHsKICAgICAgICB2YXIgZGF0ZUxlZnQgPSBwYXJzZShkaXJ0eURhdGVMZWZ0KTsKICAgICAgICB2YXIgdGltZUxlZnQgPSBkYXRlTGVmdC5nZXRUaW1lKCk7CiAgICAgICAgdmFyIGRhdGVSaWdodCA9IHBhcnNlKGRpcnR5RGF0ZVJpZ2h0KTsKICAgICAgICB2YXIgdGltZVJpZ2h0ID0gZGF0ZVJpZ2h0LmdldFRpbWUoKTsKCiAgICAgICAgaWYgKHRpbWVMZWZ0IDwgdGltZVJpZ2h0KSB7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfSBlbHNlIGlmICh0aW1lTGVmdCA+IHRpbWVSaWdodCkgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBjb21wYXJlQXNjOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIwOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjA5KTsKCiAgICAgIHZhciBidWlsZEZvcm1hdExvY2FsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEwKTsKICAgICAgLyoqCiAgICAgICAqIEBjYXRlZ29yeSBMb2NhbGVzCiAgICAgICAqIEBzdW1tYXJ5IEVuZ2xpc2ggbG9jYWxlLgogICAgICAgKi8KCgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICBkaXN0YW5jZUluV29yZHM6IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCksCiAgICAgICAgZm9ybWF0OiBidWlsZEZvcm1hdExvY2FsZSgpCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjA5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgZnVuY3Rpb24gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSB7CiAgICAgICAgdmFyIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IHsKICAgICAgICAgIGxlc3NUaGFuWFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnbGVzcyB0aGFuIGEgc2Vjb25kJywKICAgICAgICAgICAgb3RoZXI6ICdsZXNzIHRoYW4ge3tjb3VudH19IHNlY29uZHMnCiAgICAgICAgICB9LAogICAgICAgICAgeFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnMSBzZWNvbmQnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBzZWNvbmRzJwogICAgICAgICAgfSwKICAgICAgICAgIGhhbGZBTWludXRlOiAnaGFsZiBhIG1pbnV0ZScsCiAgICAgICAgICBsZXNzVGhhblhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsCiAgICAgICAgICAgIG90aGVyOiAnbGVzcyB0aGFuIHt7Y291bnR9fSBtaW51dGVzJwogICAgICAgICAgfSwKICAgICAgICAgIHhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJzEgbWludXRlJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gbWludXRlcycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhIb3VyczogewogICAgICAgICAgICBvbmU6ICdhYm91dCAxIGhvdXInLAogICAgICAgICAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSBob3VycycKICAgICAgICAgIH0sCiAgICAgICAgICB4SG91cnM6IHsKICAgICAgICAgICAgb25lOiAnMSBob3VyJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gaG91cnMnCiAgICAgICAgICB9LAogICAgICAgICAgeERheXM6IHsKICAgICAgICAgICAgb25lOiAnMSBkYXknLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBkYXlzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WE1vbnRoczogewogICAgICAgICAgICBvbmU6ICdhYm91dCAxIG1vbnRoJywKICAgICAgICAgICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0gbW9udGhzJwogICAgICAgICAgfSwKICAgICAgICAgIHhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnMSBtb250aCcsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IG1vbnRocycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhZZWFyczogewogICAgICAgICAgICBvbmU6ICdhYm91dCAxIHllYXInLAogICAgICAgICAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSB5ZWFycycKICAgICAgICAgIH0sCiAgICAgICAgICB4WWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnMSB5ZWFyJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0geWVhcnMnCiAgICAgICAgICB9LAogICAgICAgICAgb3ZlclhZZWFyczogewogICAgICAgICAgICBvbmU6ICdvdmVyIDEgeWVhcicsCiAgICAgICAgICAgIG90aGVyOiAnb3ZlciB7e2NvdW50fX0geWVhcnMnCiAgICAgICAgICB9LAogICAgICAgICAgYWxtb3N0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2FsbW9zdCAxIHllYXInLAogICAgICAgICAgICBvdGhlcjogJ2FsbW9zdCB7e2NvdW50fX0geWVhcnMnCiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbG9jYWxpemUodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dOwogICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm9uZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgIHJldHVybiAnaW4gJyArIHJlc3VsdDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJyBhZ28nOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2NhbGl6ZTogbG9jYWxpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgIHZhciBidWlsZEZvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMSk7CgogICAgICBmdW5jdGlvbiBidWlsZEZvcm1hdExvY2FsZSgpIHsKICAgICAgICAvLyBOb3RlOiBpbiBFbmdsaXNoLCB0aGUgbmFtZXMgb2YgZGF5cyBvZiB0aGUgd2VlayBhbmQgbW9udGhzIGFyZSBjYXBpdGFsaXplZC4KICAgICAgICAvLyBJZiB5b3UgYXJlIG1ha2luZyBhIG5ldyBsb2NhbGUgYmFzZWQgb24gdGhpcyBvbmUsIGNoZWNrIGlmIHRoZSBzYW1lIGlzIHRydWUgZm9yIHRoZSBsYW5ndWFnZSB5b3UncmUgd29ya2luZyBvbi4KICAgICAgICAvLyBHZW5lcmFsbHksIGZvcm1hdHRlZCBkYXRlcyBzaG91bGQgbG9vayBsaWtlIHRoZXkgYXJlIGluIHRoZSBtaWRkbGUgb2YgYSBzZW50ZW5jZSwKICAgICAgICAvLyBlLmcuIGluIFNwYW5pc2ggbGFuZ3VhZ2UgdGhlIHdlZWtkYXlzIGFuZCBtb250aHMgc2hvdWxkIGJlIGluIHRoZSBsb3dlcmNhc2UuCiAgICAgICAgdmFyIG1vbnRoczNjaGFyID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddOwogICAgICAgIHZhciBtb250aHNGdWxsID0gWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107CiAgICAgICAgdmFyIHdlZWtkYXlzMmNoYXIgPSBbJ1N1JywgJ01vJywgJ1R1JywgJ1dlJywgJ1RoJywgJ0ZyJywgJ1NhJ107CiAgICAgICAgdmFyIHdlZWtkYXlzM2NoYXIgPSBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddOwogICAgICAgIHZhciB3ZWVrZGF5c0Z1bGwgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107CiAgICAgICAgdmFyIG1lcmlkaWVtVXBwZXJjYXNlID0gWydBTScsICdQTSddOwogICAgICAgIHZhciBtZXJpZGllbUxvd2VyY2FzZSA9IFsnYW0nLCAncG0nXTsKICAgICAgICB2YXIgbWVyaWRpZW1GdWxsID0gWydhLm0uJywgJ3AubS4nXTsKICAgICAgICB2YXIgZm9ybWF0dGVycyA9IHsKICAgICAgICAgIC8vIE1vbnRoOiBKYW4sIEZlYiwgLi4uLCBEZWMKICAgICAgICAgICdNTU0nOiBmdW5jdGlvbiBNTU0oZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gbW9udGhzM2NoYXJbZGF0ZS5nZXRNb250aCgpXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBNb250aDogSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXIKICAgICAgICAgICdNTU1NJzogZnVuY3Rpb24gTU1NTShkYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBtb250aHNGdWxsW2RhdGUuZ2V0TW9udGgoKV07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gRGF5IG9mIHdlZWs6IFN1LCBNbywgLi4uLCBTYQogICAgICAgICAgJ2RkJzogZnVuY3Rpb24gZGQoZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gd2Vla2RheXMyY2hhcltkYXRlLmdldERheSgpXTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyBEYXkgb2Ygd2VlazogU3VuLCBNb24sIC4uLiwgU2F0CiAgICAgICAgICAnZGRkJzogZnVuY3Rpb24gZGRkKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXlzM2NoYXJbZGF0ZS5nZXREYXkoKV07CiAgICAgICAgICB9LAogICAgICAgICAgLy8gRGF5IG9mIHdlZWs6IFN1bmRheSwgTW9uZGF5LCAuLi4sIFNhdHVyZGF5CiAgICAgICAgICAnZGRkZCc6IGZ1bmN0aW9uIGRkZGQoZGF0ZSkgewogICAgICAgICAgICByZXR1cm4gd2Vla2RheXNGdWxsW2RhdGUuZ2V0RGF5KCldOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIEFNLCBQTQogICAgICAgICAgJ0EnOiBmdW5jdGlvbiBBKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSAvIDEyID49IDEgPyBtZXJpZGllbVVwcGVyY2FzZVsxXSA6IG1lcmlkaWVtVXBwZXJjYXNlWzBdOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIGFtLCBwbQogICAgICAgICAgJ2EnOiBmdW5jdGlvbiBhKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSAvIDEyID49IDEgPyBtZXJpZGllbUxvd2VyY2FzZVsxXSA6IG1lcmlkaWVtTG93ZXJjYXNlWzBdOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIGEubS4sIHAubS4KICAgICAgICAgICdhYSc6IGZ1bmN0aW9uIGFhKGRhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSAvIDEyID49IDEgPyBtZXJpZGllbUZ1bGxbMV0gOiBtZXJpZGllbUZ1bGxbMF07CiAgICAgICAgICB9CiAgICAgICAgfTsgLy8gR2VuZXJhdGUgb3JkaW5hbCB2ZXJzaW9uIG9mIGZvcm1hdHRlcnM6IE0gLT4gTW8sIEQgLT4gRG8sIGV0Yy4KCiAgICAgICAgdmFyIG9yZGluYWxGb3JtYXR0ZXJzID0gWydNJywgJ0QnLCAnREREJywgJ2QnLCAnUScsICdXJ107CiAgICAgICAgb3JkaW5hbEZvcm1hdHRlcnMuZm9yRWFjaChmdW5jdGlvbiAoZm9ybWF0dGVyVG9rZW4pIHsKICAgICAgICAgIGZvcm1hdHRlcnNbZm9ybWF0dGVyVG9rZW4gKyAnbyddID0gZnVuY3Rpb24gKGRhdGUsIGZvcm1hdHRlcnMpIHsKICAgICAgICAgICAgcmV0dXJuIG9yZGluYWwoZm9ybWF0dGVyc1tmb3JtYXR0ZXJUb2tlbl0oZGF0ZSkpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZm9ybWF0dGVyczogZm9ybWF0dGVycywKICAgICAgICAgIGZvcm1hdHRpbmdUb2tlbnNSZWdFeHA6IGJ1aWxkRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cChmb3JtYXR0ZXJzKQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7CiAgICAgICAgdmFyIHJlbTEwMCA9IG51bWJlciAlIDEwMDsKCiAgICAgICAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7CiAgICAgICAgICBzd2l0Y2ggKHJlbTEwMCAlIDEwKSB7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3N0JzsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgJ25kJzsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3JkJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBudW1iZXIgKyAndGgnOwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRm9ybWF0TG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxMSAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIHZhciBjb21tb25Gb3JtYXR0ZXJLZXlzID0gWydNJywgJ01NJywgJ1EnLCAnRCcsICdERCcsICdEREQnLCAnRERERCcsICdkJywgJ0UnLCAnVycsICdXVycsICdZWScsICdZWVlZJywgJ0dHJywgJ0dHR0cnLCAnSCcsICdISCcsICdoJywgJ2hoJywgJ20nLCAnbW0nLCAncycsICdzcycsICdTJywgJ1NTJywgJ1NTUycsICdaJywgJ1paJywgJ1gnLCAneCddOwoKICAgICAgZnVuY3Rpb24gYnVpbGRGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKGZvcm1hdHRlcnMpIHsKICAgICAgICB2YXIgZm9ybWF0dGVyS2V5cyA9IFtdOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gZm9ybWF0dGVycykgewogICAgICAgICAgaWYgKGZvcm1hdHRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICBmb3JtYXR0ZXJLZXlzLnB1c2goa2V5KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBmb3JtYXR0aW5nVG9rZW5zID0gY29tbW9uRm9ybWF0dGVyS2V5cy5jb25jYXQoZm9ybWF0dGVyS2V5cykuc29ydCgpLnJldmVyc2UoKTsKICAgICAgICB2YXIgZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IG5ldyBSZWdFeHAoJyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/JyArICcoJyArIGZvcm1hdHRpbmdUb2tlbnMuam9pbignfCcpICsgJ3wuKScsICdnJyk7CiAgICAgICAgcmV0dXJuIGZvcm1hdHRpbmdUb2tlbnNSZWdFeHA7CiAgICAgIH0KCiAgICAgIG1vZHVsZS5leHBvcnRzID0gYnVpbGRGb3JtYXR0aW5nVG9rZW5zUmVnRXhwOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxMiAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCkgewogICAgICAgIHZhciBkaXN0YW5jZUluV29yZHNMb2NhbGUgPSB7CiAgICAgICAgICBsZXNzVGhhblhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJ+S4jeWIsCAxIOenkicsCiAgICAgICAgICAgIG90aGVyOiAn5LiN5YiwIHt7Y291bnR9fSDnp5InCiAgICAgICAgICB9LAogICAgICAgICAgeFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnMSDnp5InLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDnp5InCiAgICAgICAgICB9LAogICAgICAgICAgaGFsZkFNaW51dGU6ICfljYrliIbpkp8nLAogICAgICAgICAgbGVzc1RoYW5YTWludXRlczogewogICAgICAgICAgICBvbmU6ICfkuI3liLAgMSDliIbpkp8nLAogICAgICAgICAgICBvdGhlcjogJ+S4jeWIsCB7e2NvdW50fX0g5YiG6ZKfJwogICAgICAgICAgfSwKICAgICAgICAgIHhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5YiG6ZKfJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5YiG6ZKfJwogICAgICAgICAgfSwKICAgICAgICAgIHhIb3VyczogewogICAgICAgICAgICBvbmU6ICcxIOWwj+aXticsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWwj+aXticKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhIb3VyczogewogICAgICAgICAgICBvbmU6ICflpKfnuqYgMSDlsI/ml7YnLAogICAgICAgICAgICBvdGhlcjogJ+Wkp+e6piB7e2NvdW50fX0g5bCP5pe2JwogICAgICAgICAgfSwKICAgICAgICAgIHhEYXlzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5aSpJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5aSpJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WE1vbnRoczogewogICAgICAgICAgICBvbmU6ICflpKfnuqYgMSDkuKrmnIgnLAogICAgICAgICAgICBvdGhlcjogJ+Wkp+e6piB7e2NvdW50fX0g5Liq5pyIJwogICAgICAgICAgfSwKICAgICAgICAgIHhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnMSDkuKrmnIgnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDkuKrmnIgnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAn5aSn57qmIDEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICflpKfnuqYge3tjb3VudH19IOW5tCcKICAgICAgICAgIH0sCiAgICAgICAgICB4WWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlubQnCiAgICAgICAgICB9LAogICAgICAgICAgb3ZlclhZZWFyczogewogICAgICAgICAgICBvbmU6ICfotoXov4cgMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ+i2hei/hyB7e2NvdW50fX0g5bm0JwogICAgICAgICAgfSwKICAgICAgICAgIGFsbW9zdFhZZWFyczogewogICAgICAgICAgICBvbmU6ICflsIbov5EgMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ+Wwhui/kSB7e2NvdW50fX0g5bm0JwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxvY2FsaXplKHRva2VuLCBjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXTsKICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vbmU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm90aGVyLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ+WGhSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCArICfliY0nOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2NhbGl6ZTogbG9jYWxpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxMyAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCkgewogICAgICAgIHZhciBkaXN0YW5jZUluV29yZHNMb2NhbGUgPSB7CiAgICAgICAgICBsZXNzVGhhblhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJ+WwkeaWvCAxIOenkicsCiAgICAgICAgICAgIG90aGVyOiAn5bCR5pa8IHt7Y291bnR9fSDnp5InCiAgICAgICAgICB9LAogICAgICAgICAgeFNlY29uZHM6IHsKICAgICAgICAgICAgb25lOiAnMSDnp5InLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDnp5InCiAgICAgICAgICB9LAogICAgICAgICAgaGFsZkFNaW51dGU6ICfljYrliIbpkJgnLAogICAgICAgICAgbGVzc1RoYW5YTWludXRlczogewogICAgICAgICAgICBvbmU6ICflsJHmlrwgMSDliIbpkJgnLAogICAgICAgICAgICBvdGhlcjogJ+WwkeaWvCB7e2NvdW50fX0g5YiG6ZCYJwogICAgICAgICAgfSwKICAgICAgICAgIHhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5YiG6ZCYJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5YiG6ZCYJwogICAgICAgICAgfSwKICAgICAgICAgIHhIb3VyczogewogICAgICAgICAgICBvbmU6ICcxIOWwj+aZgicsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IOWwj+aZgicKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhIb3VyczogewogICAgICAgICAgICBvbmU6ICflpKfntIQgMSDlsI/mmYInLAogICAgICAgICAgICBvdGhlcjogJ+Wkp+e0hCB7e2NvdW50fX0g5bCP5pmCJwogICAgICAgICAgfSwKICAgICAgICAgIHhEYXlzOiB7CiAgICAgICAgICAgIG9uZTogJzEg5aSpJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0g5aSpJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WE1vbnRoczogewogICAgICAgICAgICBvbmU6ICflpKfntIQgMSDlgIvmnIgnLAogICAgICAgICAgICBvdGhlcjogJ+Wkp+e0hCB7e2NvdW50fX0g5YCL5pyIJwogICAgICAgICAgfSwKICAgICAgICAgIHhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnMSDlgIvmnIgnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlgIvmnIgnCiAgICAgICAgICB9LAogICAgICAgICAgYWJvdXRYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAn5aSn57SEIDEg5bm0JywKICAgICAgICAgICAgb3RoZXI6ICflpKfntIQge3tjb3VudH19IOW5tCcKICAgICAgICAgIH0sCiAgICAgICAgICB4WWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSDlubQnCiAgICAgICAgICB9LAogICAgICAgICAgb3ZlclhZZWFyczogewogICAgICAgICAgICBvbmU6ICfotoXpgY4gMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ+i2hemBjiB7e2NvdW50fX0g5bm0JwogICAgICAgICAgfSwKICAgICAgICAgIGFsbW9zdFhZZWFyczogewogICAgICAgICAgICBvbmU6ICflsIfov5EgMSDlubQnLAogICAgICAgICAgICBvdGhlcjogJ+Wwh+i/kSB7e2NvdW50fX0g5bm0JwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxvY2FsaXplKHRva2VuLCBjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICB2YXIgcmVzdWx0OwoKICAgICAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXTsKICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vbmU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm90aGVyLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ+WFpyc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCArICfliY0nOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2NhbGl6ZTogbG9jYWxpemUKICAgICAgICB9OwogICAgICB9CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VJbldvcmRzTG9jYWxlKCkgewogICAgICAgIHZhciBkaXN0YW5jZUluV29yZHNMb2NhbGUgPSB7CiAgICAgICAgICBsZXNzVGhhblhTZWNvbmRzOiB7CiAgICAgICAgICAgIG9uZTogJ21lbm9zIGRlIHVuIHNlZ3VuZG8nLAogICAgICAgICAgICBvdGhlcjogJ21lbm9zIGRlIHt7Y291bnR9fSBzZWd1bmRvcycKICAgICAgICAgIH0sCiAgICAgICAgICB4U2Vjb25kczogewogICAgICAgICAgICBvbmU6ICcxIHNlZ3VuZG8nLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBzZWd1bmRvcycKICAgICAgICAgIH0sCiAgICAgICAgICBoYWxmQU1pbnV0ZTogJ21lZGlvIG1pbnV0bycsCiAgICAgICAgICBsZXNzVGhhblhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJ21lbm9zIGRlIHVuIG1pbnV0bycsCiAgICAgICAgICAgIG90aGVyOiAnbWVub3MgZGUge3tjb3VudH19IG1pbnV0b3MnCiAgICAgICAgICB9LAogICAgICAgICAgeE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnMSBtaW51dG8nLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBtaW51dG9zJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2FscmVkZWRvciBkZSAxIGhvcmEnLAogICAgICAgICAgICBvdGhlcjogJ2FscmVkZWRvciBkZSB7e2NvdW50fX0gaG9yYXMnCiAgICAgICAgICB9LAogICAgICAgICAgeEhvdXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEgaG9yYScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGhvcmFzJwogICAgICAgICAgfSwKICAgICAgICAgIHhEYXlzOiB7CiAgICAgICAgICAgIG9uZTogJzEgZMOtYScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGTDrWFzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WE1vbnRoczogewogICAgICAgICAgICBvbmU6ICdhbHJlZGVkb3IgZGUgMSBtZXMnLAogICAgICAgICAgICBvdGhlcjogJ2FscmVkZWRvciBkZSB7e2NvdW50fX0gbWVzZXMnCiAgICAgICAgICB9LAogICAgICAgICAgeE1vbnRoczogewogICAgICAgICAgICBvbmU6ICcxIG1lcycsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IG1lc2VzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2FscmVkZWRvciBkZSAxIGHDsW8nLAogICAgICAgICAgICBvdGhlcjogJ2FscmVkZWRvciBkZSB7e2NvdW50fX0gYcOxb3MnCiAgICAgICAgICB9LAogICAgICAgICAgeFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJzEgYcOxbycsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGHDsW9zJwogICAgICAgICAgfSwKICAgICAgICAgIG92ZXJYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAnbcOhcyBkZSAxIGHDsW8nLAogICAgICAgICAgICBvdGhlcjogJ23DoXMgZGUge3tjb3VudH19IGHDsW9zJwogICAgICAgICAgfSwKICAgICAgICAgIGFsbW9zdFhZZWFyczogewogICAgICAgICAgICBvbmU6ICdjYXNpIDEgYcOxbycsCiAgICAgICAgICAgIG90aGVyOiAnY2FzaSB7e2NvdW50fX0gYcOxb3MnCiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gbG9jYWxpemUodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgIHZhciByZXN1bHQ7CgogICAgICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dOwogICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkgewogICAgICAgICAgICByZXN1bHQgPSBkaXN0YW5jZUluV29yZHNMb2NhbGVbdG9rZW5dLm9uZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHRpb25zLmFkZFN1ZmZpeCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgIHJldHVybiAnZW4gJyArIHJlc3VsdDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gJ2hhY2UgJyArIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9jYWxpemU6IGxvY2FsaXplCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTUgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBmdW5jdGlvbiBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZSgpIHsKICAgICAgICB2YXIgZGlzdGFuY2VJbldvcmRzTG9jYWxlID0gewogICAgICAgICAgbGVzc1RoYW5YU2Vjb25kczogewogICAgICAgICAgICBvbmU6ICdtb2lucyBk4oCZdW5lIHNlY29uZGUnLAogICAgICAgICAgICBvdGhlcjogJ21vaW5zIGRlIHt7Y291bnR9fSBzZWNvbmRlcycKICAgICAgICAgIH0sCiAgICAgICAgICB4U2Vjb25kczogewogICAgICAgICAgICBvbmU6ICcxIHNlY29uZGUnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBzZWNvbmRlcycKICAgICAgICAgIH0sCiAgICAgICAgICBoYWxmQU1pbnV0ZTogJzMwIHNlY29uZGVzJywKICAgICAgICAgIGxlc3NUaGFuWE1pbnV0ZXM6IHsKICAgICAgICAgICAgb25lOiAnbW9pbnMgZOKAmXVuZSBtaW51dGUnLAogICAgICAgICAgICBvdGhlcjogJ21vaW5zIGRlIHt7Y291bnR9fSBtaW51dGVzJwogICAgICAgICAgfSwKICAgICAgICAgIHhNaW51dGVzOiB7CiAgICAgICAgICAgIG9uZTogJzEgbWludXRlJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gbWludXRlcycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhIb3VyczogewogICAgICAgICAgICBvbmU6ICdlbnZpcm9uIDEgaGV1cmUnLAogICAgICAgICAgICBvdGhlcjogJ2Vudmlyb24ge3tjb3VudH19IGhldXJlcycKICAgICAgICAgIH0sCiAgICAgICAgICB4SG91cnM6IHsKICAgICAgICAgICAgb25lOiAnMSBoZXVyZScsCiAgICAgICAgICAgIG90aGVyOiAne3tjb3VudH19IGhldXJlcycKICAgICAgICAgIH0sCiAgICAgICAgICB4RGF5czogewogICAgICAgICAgICBvbmU6ICcxIGpvdXInLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBqb3VycycKICAgICAgICAgIH0sCiAgICAgICAgICBhYm91dFhNb250aHM6IHsKICAgICAgICAgICAgb25lOiAnZW52aXJvbiAxIG1vaXMnLAogICAgICAgICAgICBvdGhlcjogJ2Vudmlyb24ge3tjb3VudH19IG1vaXMnCiAgICAgICAgICB9LAogICAgICAgICAgeE1vbnRoczogewogICAgICAgICAgICBvbmU6ICcxIG1vaXMnLAogICAgICAgICAgICBvdGhlcjogJ3t7Y291bnR9fSBtb2lzJwogICAgICAgICAgfSwKICAgICAgICAgIGFib3V0WFllYXJzOiB7CiAgICAgICAgICAgIG9uZTogJ2Vudmlyb24gMSBhbicsCiAgICAgICAgICAgIG90aGVyOiAnZW52aXJvbiB7e2NvdW50fX0gYW5zJwogICAgICAgICAgfSwKICAgICAgICAgIHhZZWFyczogewogICAgICAgICAgICBvbmU6ICcxIGFuJywKICAgICAgICAgICAgb3RoZXI6ICd7e2NvdW50fX0gYW5zJwogICAgICAgICAgfSwKICAgICAgICAgIG92ZXJYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAncGx1cyBk4oCZdW4gYW4nLAogICAgICAgICAgICBvdGhlcjogJ3BsdXMgZGUge3tjb3VudH19IGFucycKICAgICAgICAgIH0sCiAgICAgICAgICBhbG1vc3RYWWVhcnM6IHsKICAgICAgICAgICAgb25lOiAncHJlc3F14oCZdW4gYW4nLAogICAgICAgICAgICBvdGhlcjogJ3ByZXNxdWUge3tjb3VudH19IGFucycKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBsb2NhbGl6ZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgICBpZiAodHlwZW9mIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl07CiAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZVt0b2tlbl0ub25lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0ID0gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXS5vdGhlci5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdkYW5zICcgKyByZXN1bHQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuICdpbCB5IGEgJyArIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9jYWxpemU6IGxvY2FsaXplCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTYgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICAgICBmdW5jdGlvbiBkZWNsZW5zaW9uKHNjaGVtZSwgY291bnQpIHsKICAgICAgICAvLyBzY2hlbWUgZm9yIGNvdW50PTEgZXhpc3RzCiAgICAgICAgaWYgKHNjaGVtZS5vbmUgIT09IHVuZGVmaW5lZCAmJiBjb3VudCA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIHNjaGVtZS5vbmU7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVtMTAgPSBjb3VudCAlIDEwOwogICAgICAgIHZhciByZW0xMDAgPSBjb3VudCAlIDEwMDsgLy8gMSwgMjEsIDMxLCAuLi4KCiAgICAgICAgaWYgKHJlbTEwID09PSAxICYmIHJlbTEwMCAhPT0gMTEpIHsKICAgICAgICAgIHJldHVybiBzY2hlbWUuc2luZ3VsYXJOb21pbmF0aXZlLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsgLy8gMiwgMywgNCwgMjIsIDIzLCAyNCwgMzIgLi4uCiAgICAgICAgfSBlbHNlIGlmIChyZW0xMCA+PSAyICYmIHJlbTEwIDw9IDQgJiYgKHJlbTEwMCA8IDEwIHx8IHJlbTEwMCA+IDIwKSkgewogICAgICAgICAgcmV0dXJuIHNjaGVtZS5zaW5ndWxhckdlbml0aXZlLnJlcGxhY2UoJ3t7Y291bnR9fScsIGNvdW50KTsgLy8gNSwgNiwgNywgOCwgOSwgMTAsIDExLCAuLi4KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHNjaGVtZS5wbHVyYWxHZW5pdGl2ZS5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBidWlsZExvY2FsaXplVG9rZW5GbihzY2hlbWUpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNvdW50LCBvcHRpb25zKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5hZGRTdWZmaXgpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICBpZiAoc2NoZW1lLmZ1dHVyZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlY2xlbnNpb24oc2NoZW1lLmZ1dHVyZSwgY291bnQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ9GH0LXRgNC10LcgJyArIGRlY2xlbnNpb24oc2NoZW1lLnJlZ3VsYXIsIGNvdW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHNjaGVtZS5wYXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVjbGVuc2lvbihzY2hlbWUucGFzdCwgY291bnQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVjbGVuc2lvbihzY2hlbWUucmVndWxhciwgY291bnQpICsgJyDQvdCw0LfQsNC0JzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBkZWNsZW5zaW9uKHNjaGVtZS5yZWd1bGFyLCBjb3VudCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYnVpbGREaXN0YW5jZUluV29yZHNMb2NhbGUoKSB7CiAgICAgICAgdmFyIGRpc3RhbmNlSW5Xb3Jkc0xvY2FsZSA9IHsKICAgICAgICAgIGxlc3NUaGFuWFNlY29uZHM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIG9uZTogJ9C80LXQvdGM0YjQtSDRgdC10LrRg9C90LTRiycsCiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0LzQtdC90YzRiNC1IHt7Y291bnR9fSDRgdC10LrRg9C90LTRiycsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSB7e2NvdW50fX0g0YHQtdC60YPQvdC0JywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSB7e2NvdW50fX0g0YHQtdC60YPQvdC0JwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBvbmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3INGB0LXQutGD0L3QtNGDJywKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDRgdC10LrRg9C90LTRgycsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INGB0LXQutGD0L3QtNGLJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INGB0LXQutGD0L3QtCcKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICB4U2Vjb25kczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INGB0LXQutGD0L3QtNCwJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INGB0LXQutGD0L3QtNGLJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDRgdC10LrRg9C90LQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhc3Q6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0YHQtdC60YPQvdC00YMg0L3QsNC30LDQtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDRgdC10LrRg9C90LTRiyDQvdCw0LfQsNC0JywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ3t7Y291bnR9fSDRgdC10LrRg9C90LQg0L3QsNC30LDQtCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0YfQtdGA0LXQtyB7e2NvdW50fX0g0YHQtdC60YPQvdC00YMnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfRh9C10YDQtdC3IHt7Y291bnR9fSDRgdC10LrRg9C90LTRiycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfRh9C10YDQtdC3IHt7Y291bnR9fSDRgdC10LrRg9C90LQnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgaGFsZkFNaW51dGU6IGZ1bmN0aW9uIGhhbGZBTWludXRlKF8sIG9wdGlvbnMpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiAn0YfQtdGA0LXQtyDQv9C+0LvQvNC40L3Rg9GC0YsnOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ9C/0L7Qu9C80LjQvdGD0YLRiyDQvdCw0LfQsNC0JzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAn0L/QvtC70LzQuNC90YPRgtGLJzsKICAgICAgICAgIH0sCiAgICAgICAgICBsZXNzVGhhblhNaW51dGVzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBvbmU6ICfQvNC10L3RjNGI0LUg0LzQuNC90YPRgtGLJywKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvNC10L3RjNGI0LUge3tjb3VudH19INC80LjQvdGD0YLRiycsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C80LXQvdGM0YjQtSB7e2NvdW50fX0g0LzQuNC90YPRgicsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUge3tjb3VudH19INC80LjQvdGD0YInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIG9uZTogJ9C80LXQvdGM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcg0LzQuNC90YPRgtGDJywKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC40L3Rg9GC0YMnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvNC10L3RjNGI0LUsINGH0LXQvCDRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC40L3Rg9GC0YsnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0LzQtdC90YzRiNC1LCDRh9C10Lwg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQuNC90YPRgicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICB4TWludXRlczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INC80LjQvdGD0YLQsCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDQvNC40L3Rg9GC0YsnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INC80LjQvdGD0YInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhc3Q6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0LzQuNC90YPRgtGDINC90LDQt9Cw0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0LzQuNC90YPRgtGLINC90LDQt9Cw0LQnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INC80LjQvdGD0YIg0L3QsNC30LDQtCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQuNC90YPRgtGDJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0YfQtdGA0LXQtyB7e2NvdW50fX0g0LzQuNC90YPRgtGLJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9GH0LXRgNC10Lcge3tjb3VudH19INC80LjQvdGD0YInCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgYWJvdXRYSG91cnM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INGH0LDRgdCwJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L7QutC+0LvQviB7e2NvdW50fX0g0YfQsNGB0L7QsicsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDRh9Cw0YHQvtCyJwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdXR1cmU6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INGH0LDRgScsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0YfQsNGB0LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDRh9Cw0YHQvtCyJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIHhIb3VyczogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INGH0LDRgScsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDRh9Cw0YHQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0YfQsNGB0L7QsicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICB4RGF5czogYnVpbGRMb2NhbGl6ZVRva2VuRm4oewogICAgICAgICAgICByZWd1bGFyOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAne3tjb3VudH19INC00LXQvdGMJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAne3tjb3VudH19INC00L3RjycsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICd7e2NvdW50fX0g0LTQvdC10LknCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgYWJvdXRYTW9udGhzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDQvNC10YHRj9GG0LAnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDQvNC10YHRj9GG0LXQsicsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDQvNC10YHRj9GG0LXQsicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC10YHRj9GGJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC10YHRj9GG0LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDQvNC10YHRj9GG0LXQsicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICB4TW9udGhzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICd7e2NvdW50fX0g0LzQtdGB0Y/RhicsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ3t7Y291bnR9fSDQvNC10YHRj9GG0LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INC80LXRgdGP0YbQtdCyJwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIGFib3V0WFllYXJzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C+0LrQvtC70L4ge3tjb3VudH19INC70LXRgicsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQvtC60L7Qu9C+IHt7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C/0YDQuNCx0LvQuNC30LjRgtC10LvRjNC90L4g0YfQtdGA0LXQtyB7e2NvdW50fX0g0LPQvtC0JywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0L/RgNC40LHQu9C40LfQuNGC0LXQu9GM0L3QviDRh9C10YDQtdC3IHt7Y291bnR9fSDQs9C+0LTQsCcsCiAgICAgICAgICAgICAgcGx1cmFsR2VuaXRpdmU6ICfQv9GA0LjQsdC70LjQt9C40YLQtdC70YzQvdC+INGH0LXRgNC10Lcge3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICB4WWVhcnM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ3t7Y291bnR9fSDQs9C+0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICd7e2NvdW50fX0g0LPQvtC00LAnLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAne3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBvdmVyWFllYXJzOiBidWlsZExvY2FsaXplVG9rZW5Gbih7CiAgICAgICAgICAgIHJlZ3VsYXI6IHsKICAgICAgICAgICAgICBzaW5ndWxhck5vbWluYXRpdmU6ICfQsdC+0LvRjNGI0LUge3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBzaW5ndWxhckdlbml0aXZlOiAn0LHQvtC70YzRiNC1IHt7Y291bnR9fSDQu9C10YInLAogICAgICAgICAgICAgIHBsdXJhbEdlbml0aXZlOiAn0LHQvtC70YzRiNC1IHt7Y291bnR9fSDQu9C10YInCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1dHVyZTogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9Cx0L7Qu9GM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INCz0L7QtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9Cx0L7Qu9GM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9Cx0L7Qu9GM0YjQtSwg0YfQtdC8INGH0LXRgNC10Lcge3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBhbG1vc3RYWWVhcnM6IGJ1aWxkTG9jYWxpemVUb2tlbkZuKHsKICAgICAgICAgICAgcmVndWxhcjogewogICAgICAgICAgICAgIHNpbmd1bGFyTm9taW5hdGl2ZTogJ9C/0L7Rh9GC0Lgge3tjb3VudH19INCz0L7QtCcsCiAgICAgICAgICAgICAgc2luZ3VsYXJHZW5pdGl2ZTogJ9C/0L7Rh9GC0Lgge3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C/0L7Rh9GC0Lgge3tjb3VudH19INC70LXRgicKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgc2luZ3VsYXJOb21pbmF0aXZlOiAn0L/QvtGH0YLQuCDRh9C10YDQtdC3IHt7Y291bnR9fSDQs9C+0LQnLAogICAgICAgICAgICAgIHNpbmd1bGFyR2VuaXRpdmU6ICfQv9C+0YfRgtC4INGH0LXRgNC10Lcge3tjb3VudH19INCz0L7QtNCwJywKICAgICAgICAgICAgICBwbHVyYWxHZW5pdGl2ZTogJ9C/0L7Rh9GC0Lgg0YfQtdGA0LXQtyB7e2NvdW50fX0g0LvQtdGCJwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGxvY2FsaXplKHRva2VuLCBjb3VudCwgb3B0aW9ucykgewogICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgICByZXR1cm4gZGlzdGFuY2VJbldvcmRzTG9jYWxlW3Rva2VuXShjb3VudCwgb3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbG9jYWxpemU6IGxvY2FsaXplCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWlsZERpc3RhbmNlSW5Xb3Jkc0xvY2FsZTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMTcgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgey8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luCgogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIxOCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKICAgICAgdmFyIEdUX0FDQ0VTU19UT0tFTiA9IGV4cG9ydHMuR1RfQUNDRVNTX1RPS0VOID0gJ0dUX0FDQ0VTU19UT0tFTic7CiAgICAgIHZhciBHVF9WRVJTSU9OID0gZXhwb3J0cy5HVF9WRVJTSU9OID0gIjEuNi4yIjsgLy8gZXNsaW50LWRpc2FibGUtbGluZQoKICAgICAgdmFyIEdUX0NPTU1FTlQgPSBleHBvcnRzLkdUX0NPTU1FTlQgPSAnR1RfQ09NTUVOVCc7CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjE5ICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwoKICAgICAgdmFyIF90b0NvbnN1bWFibGVBcnJheTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMCk7CgogICAgICB2YXIgX3RvQ29uc3VtYWJsZUFycmF5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RvQ29uc3VtYWJsZUFycmF5Mik7CgogICAgICB2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCiAgICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGdldFFMID0gZnVuY3Rpb24gZ2V0UUwodmFycywgcGFnZXJEaXJlY3Rpb24pIHsKICAgICAgICB2YXIgY3Vyc29yRGlyZWN0aW9uID0gcGFnZXJEaXJlY3Rpb24gPT09ICdsYXN0JyA/ICdiZWZvcmUnIDogJ2FmdGVyJzsKICAgICAgICB2YXIgcWwgPSAnXG4gIHF1ZXJ5IGdldElzc3VlQW5kQ29tbWVudHMoXG4gICAgJG93bmVyOiBTdHJpbmchLFxuICAgICRyZXBvOiBTdHJpbmchLFxuICAgICRpZDogSW50ISxcbiAgICAkY3Vyc29yOiBTdHJpbmcsXG4gICAgJHBhZ2VTaXplOiBJbnQhXG4gICkge1xuICAgIHJlcG9zaXRvcnkob3duZXI6ICRvd25lciwgbmFtZTogJHJlcG8pIHtcbiAgICAgIGlzc3VlKG51bWJlcjogJGlkKSB7XG4gICAgICAgIHRpdGxlXG4gICAgICAgIHVybFxuICAgICAgICBib2R5SFRNTFxuICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgY29tbWVudHMoJyArIHBhZ2VyRGlyZWN0aW9uICsgJzogJHBhZ2VTaXplLCAnICsgY3Vyc29yRGlyZWN0aW9uICsgJzogJGN1cnNvcikge1xuICAgICAgICAgIHRvdGFsQ291bnRcbiAgICAgICAgICBwYWdlSW5mbyB7XG4gICAgICAgICAgICAnICsgKHBhZ2VyRGlyZWN0aW9uID09PSAnbGFzdCcgPyAnaGFzUHJldmlvdXNQYWdlJyA6ICdoYXNOZXh0UGFnZScpICsgJ1xuICAgICAgICAgICAgJyArIChjdXJzb3JEaXJlY3Rpb24gPT09ICdiZWZvcmUnID8gJ3N0YXJ0Q3Vyc29yJyA6ICdlbmRDdXJzb3InKSArICdcbiAgICAgICAgICB9XG4gICAgICAgICAgbm9kZXMge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIGRhdGFiYXNlSWRcbiAgICAgICAgICAgIGF1dGhvciB7XG4gICAgICAgICAgICAgIGF2YXRhclVybFxuICAgICAgICAgICAgICBsb2dpblxuICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvZHlIVE1MXG4gICAgICAgICAgICBib2R5XG4gICAgICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgICAgIHJlYWN0aW9ucyhmaXJzdDogMTAwLCBjb250ZW50OiBIRUFSVCkge1xuICAgICAgICAgICAgICB0b3RhbENvdW50XG4gICAgICAgICAgICAgIHZpZXdlckhhc1JlYWN0ZWRcbiAgICAgICAgICAgICAgcGFnZUluZm97XG4gICAgICAgICAgICAgICAgaGFzTmV4dFBhZ2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBub2RlcyB7XG4gICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICBkYXRhYmFzZUlkXG4gICAgICAgICAgICAgICAgdXNlciB7XG4gICAgICAgICAgICAgICAgICBsb2dpblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAnOwogICAgICAgIGlmICh2YXJzLmN1cnNvciA9PT0gbnVsbCkgZGVsZXRlIHZhcnMuY3Vyc29yOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBvcGVyYXRpb25OYW1lOiAnZ2V0SXNzdWVBbmRDb21tZW50cycsCiAgICAgICAgICBxdWVyeTogcWwsCiAgICAgICAgICB2YXJpYWJsZXM6IHZhcnMKICAgICAgICB9OwogICAgICB9OwoKICAgICAgZnVuY3Rpb24gZ2V0Q29tbWVudHMoaXNzdWUpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgIG93bmVyID0gX29wdGlvbnMub3duZXIsCiAgICAgICAgICAgIHJlcG8gPSBfb3B0aW9ucy5yZXBvLAogICAgICAgICAgICBwZXJQYWdlID0gX29wdGlvbnMucGVyUGFnZSwKICAgICAgICAgICAgcGFnZXJEaXJlY3Rpb24gPSBfb3B0aW9ucy5wYWdlckRpcmVjdGlvbiwKICAgICAgICAgICAgZGVmYXVsdEF1dGhvciA9IF9vcHRpb25zLmRlZmF1bHRBdXRob3I7CiAgICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgIGN1cnNvciA9IF9zdGF0ZS5jdXJzb3IsCiAgICAgICAgICAgIGNvbW1lbnRzID0gX3N0YXRlLmNvbW1lbnRzOwogICAgICAgIHJldHVybiBfdXRpbC5heGlvc0dpdGh1Yi5wb3N0KCcvZ3JhcGhxbCcsIGdldFFMKHsKICAgICAgICAgIG93bmVyOiBvd25lciwKICAgICAgICAgIHJlcG86IHJlcG8sCiAgICAgICAgICBpZDogaXNzdWUubnVtYmVyLAogICAgICAgICAgcGFnZVNpemU6IHBlclBhZ2UsCiAgICAgICAgICBjdXJzb3I6IGN1cnNvcgogICAgICAgIH0sIHBhZ2VyRGlyZWN0aW9uKSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAnYmVhcmVyICcgKyB0aGlzLmFjY2Vzc1Rva2VuCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGEucmVwb3NpdG9yeS5pc3N1ZS5jb21tZW50czsKICAgICAgICAgIHZhciBpdGVtcyA9IGRhdGEubm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICAgIHZhciBhdXRob3IgPSBub2RlLmF1dGhvciB8fCBkZWZhdWx0QXV0aG9yOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGlkOiBub2RlLmRhdGFiYXNlSWQsCiAgICAgICAgICAgICAgZ0lkOiBub2RlLmlkLAogICAgICAgICAgICAgIHVzZXI6IHsKICAgICAgICAgICAgICAgIGF2YXRhcl91cmw6IGF1dGhvci5hdmF0YXJVcmwsCiAgICAgICAgICAgICAgICBsb2dpbjogYXV0aG9yLmxvZ2luLAogICAgICAgICAgICAgICAgaHRtbF91cmw6IGF1dGhvci51cmwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5vZGUuY3JlYXRlZEF0LAogICAgICAgICAgICAgIGJvZHlfaHRtbDogbm9kZS5ib2R5SFRNTCwKICAgICAgICAgICAgICBib2R5OiBub2RlLmJvZHksCiAgICAgICAgICAgICAgaHRtbF91cmw6ICdodHRwczovL2dpdGh1Yi5jb20vJyArIG93bmVyICsgJy8nICsgcmVwbyArICcvaXNzdWVzLycgKyBpc3N1ZS5udW1iZXIgKyAnI2lzc3VlY29tbWVudC0nICsgbm9kZS5kYXRhYmFzZUlkLAogICAgICAgICAgICAgIHJlYWN0aW9uczogbm9kZS5yZWFjdGlvbnMKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIGNzID0gdm9pZCAwOwoKICAgICAgICAgIGlmIChwYWdlckRpcmVjdGlvbiA9PT0gJ2xhc3QnKSB7CiAgICAgICAgICAgIGNzID0gW10uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkzWyJkZWZhdWx0Il0pKGl0ZW1zKSwgKDAsIF90b0NvbnN1bWFibGVBcnJheTNbImRlZmF1bHQiXSkoY29tbWVudHMpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNzID0gW10uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkzWyJkZWZhdWx0Il0pKGNvbW1lbnRzKSwgKDAsIF90b0NvbnN1bWFibGVBcnJheTNbImRlZmF1bHQiXSkoaXRlbXMpKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaXNMb2FkT3ZlciA9IGRhdGEucGFnZUluZm8uaGFzUHJldmlvdXNQYWdlID09PSBmYWxzZSB8fCBkYXRhLnBhZ2VJbmZvLmhhc05leHRQYWdlID09PSBmYWxzZTsKCiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgIGNvbW1lbnRzOiBjcywKICAgICAgICAgICAgaXNMb2FkT3ZlcjogaXNMb2FkT3ZlciwKICAgICAgICAgICAgY3Vyc29yOiBkYXRhLnBhZ2VJbmZvLnN0YXJ0Q3Vyc29yIHx8IGRhdGEucGFnZUluZm8uZW5kQ3Vyc29yCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm4gY3M7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGdldENvbW1lbnRzOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIyMCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgogICAgICB2YXIgX2Zyb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMSk7CgogICAgICB2YXIgX2Zyb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZnJvbSk7CgogICAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChhcnIpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGFycjI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAoMCwgX2Zyb20yWyJkZWZhdWx0Il0pKGFycik7CiAgICAgICAgfQogICAgICB9OwogICAgICAvKioqLwoKICAgIH0sCiAgICAvKiAyMjEgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMjIyKSwKICAgICAgICBfX2VzTW9kdWxlOiB0cnVlCiAgICAgIH07CiAgICAgIC8qKiovCiAgICB9LAogICAgLyogMjIyICovCgogICAgLyoqKi8KICAgIGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7CgogICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMyk7CgogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuQXJyYXkuZnJvbTsKICAgICAgLyoqKi8KICAgIH0sCiAgICAvKiAyMjMgKi8KCiAgICAvKioqLwogICAgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICB2YXIgY3R4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgogICAgICB2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgICB2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCiAgICAgIHZhciBjYWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7CgogICAgICB2YXIgaXNBcnJheUl0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTsKCiAgICAgIHZhciB0b0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwoKICAgICAgdmFyIGNyZWF0ZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjQpOwoKICAgICAgdmFyIGdldEl0ZXJGbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpOwoKICAgICAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXyg2MykoZnVuY3Rpb24gKGl0ZXIpIHsKICAgICAgICBBcnJheS5mcm9tKGl0ZXIpOwogICAgICB9KSwgJ0FycmF5JywgewogICAgICAgIC8vIDIyLjEuMi4xIEFycmF5LmZyb20oYXJyYXlMaWtlLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKICAgICAgICBmcm9tOiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZQogICAgICAgIC8qICwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQgKi8KICAgICAgICApIHsKICAgICAgICAgIHZhciBPID0gdG9PYmplY3QoYXJyYXlMaWtlKTsKICAgICAgICAgIHZhciBDID0gdHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBBcnJheTsKICAgICAgICAgIHZhciBhTGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgICAgIHZhciBtYXBmbiA9IGFMZW4gPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgICAgICAgdmFyIG1hcHBpbmcgPSBtYXBmbiAhPT0gdW5kZWZpbmVkOwogICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgIHZhciBpdGVyRm4gPSBnZXRJdGVyRm4oTyk7CiAgICAgICAgICB2YXIgbGVuZ3RoLCByZXN1bHQsIHN0ZXAsIGl0ZXJhdG9yOwogICAgICAgICAgaWYgKG1hcHBpbmcpIG1hcGZuID0gY3R4KG1hcGZuLCBhTGVuID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCwgMik7IC8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZQoKICAgICAgICAgIGlmIChpdGVyRm4gIT0gdW5kZWZpbmVkICYmICEoQyA9PSBBcnJheSAmJiBpc0FycmF5SXRlcihpdGVyRm4pKSkgewogICAgICAgICAgICBmb3IgKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoTyksIHJlc3VsdCA9IG5ldyBDKCk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgaW5kZXgrKykgewogICAgICAgICAgICAgIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgaW5kZXgsIG1hcHBpbmcgPyBjYWxsKGl0ZXJhdG9yLCBtYXBmbiwgW3N0ZXAudmFsdWUsIGluZGV4XSwgdHJ1ZSkgOiBzdGVwLnZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpOwoKICAgICAgICAgICAgZm9yIChyZXN1bHQgPSBuZXcgQyhsZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgewogICAgICAgICAgICAgIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgaW5kZXgsIG1hcHBpbmcgPyBtYXBmbihPW2luZGV4XSwgaW5kZXgpIDogT1tpbmRleF0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmVzdWx0Lmxlbmd0aCA9IGluZGV4OwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKioqLwogICAgfSwKICAgIC8qIDIyNCAqLwoKICAgIC8qKiovCiAgICBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIHZhciAkZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKICAgICAgdmFyIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKCiAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iamVjdCwgaW5kZXgsIHZhbHVlKSB7CiAgICAgICAgaWYgKGluZGV4IGluIG9iamVjdCkgJGRlZmluZVByb3BlcnR5LmYob2JqZWN0LCBpbmRleCwgY3JlYXRlRGVzYygwLCB2YWx1ZSkpO2Vsc2Ugb2JqZWN0W2luZGV4XSA9IHZhbHVlOwogICAgICB9OwogICAgICAvKioqLwoKICAgIH0KICAgIC8qKioqKiovCiAgICBdKQogICk7Cn0pOw=="},{"version":3,"sources":["D:/项目/My_project/vuepress-starter/新建文件夹/vuepress-starter/node_modules/gitalk/dist/gitalk.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","core","version","__e","global","window","Math","self","Function","__g","store","uid","Symbol","USE_SYMBOL","$exports","bind","toString","isArray","val","isUndefined","isBuffer","constructor","isArrayBuffer","isFormData","FormData","isArrayBufferView","result","ArrayBuffer","isView","buffer","isString","isNumber","isObject","isDate","isFile","isBlob","isFunction","isStream","pipe","isURLSearchParams","URLSearchParams","trim","str","replace","isStandardBrowserEnv","navigator","product","document","forEach","obj","fn","length","key","merge","assignValue","arguments","deepMerge","extend","a","b","thisArg","ctx","hide","has","PROTOTYPE","$export","type","source","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","expProto","target","own","out","undefined","C","apply","virtual","R","U","__webpack_exports__","value","process","DOM","Children","render$1","createClass","createFactory","createElement","cloneElement$1","isValidElement","findDOMNode","unmountComponentAtNode","Component$1","PureComponent","renderSubtreeIntoContainer","__WEBPACK_IMPORTED_MODULE_0_prop_types__","__WEBPACK_IMPORTED_MODULE_0_prop_types___default","__WEBPACK_IMPORTED_MODULE_1_preact__","__WEBPACK_IMPORTED_MODULE_1_preact___default","ELEMENTS","split","REACT_ELEMENT_TYPE","COMPONENT_WRAPPER_KEY","AUTOBIND_BLACKLIST","render","shouldComponentUpdate","componentWillReceiveProps","componentWillUpdate","componentDidUpdate","componentWillMount","componentDidMount","componentWillUnmount","componentDidUnmount","CAMEL_PROPS","BYPASS_HOOK","DEV","env","NODE_ENV","EmptyComponent","VNode","$$typeof","preactCompatUpgraded","preactCompatNormalized","nodeName","set","v","attributes","oldEventHook","event","e","persist","nativeEvent","oldVnodeHook","vnode","tag","attrs","children","String","normalizeVNode","handleComponentVNode","defaultValue","handleElementVNode","defaultProps","shouldSanitize","test","toLowerCase","parent","callback","prev","_preactCompatRendered","base","parentNode","childNodes","removeChild","_component","ContextProvider","getChildContext","props","context","parentComponent","container","wrap","existing","ARR","map","toArray","count","only","Error","Array","concat","currentComponent","upgradeToVNodes","arr","offset","isStatelessComponent","wrapStatelessComponent","WrappedComponent","displayName","statelessComponentHook","Ctor","Wrapped","propTypes","args","len","applyClassName","ref","createStringRefProxy","applyEventNormalization","element","elementProps","node","cloneArgs","push","component","_refProxies","resolved","refs","ondoubleclick","ondblclick","onchange","normalized","oninput","multihook","cl","className","shallowDiffers","i$1","bindAll","newComponentHook","mixins","applyMixins","collateMixins","statics","getDefaultProps","keyed","mixin","proto","__bound","callMethod","hooks","skipDuplicates","arguments$1","this$1","ret","r","propsHook","beforeRender","afterRender","ctor","checkPropTypes","opts","state","getInitialState","isReactComponent","replaceState","setState","getDOMNode","isMounted","isPureReactComponent","index","PropTypes","cloneElement","Component","unstable_renderSubtreeIntoContainer","it","TypeError","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","array","title","browser","argv","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","createDesc","aFunction","that","exec","IObject","defined","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE","DEFAULT_ADDITIONAL_DIGITS","parseTokenDateTimeDelimeter","parseTokenPlainTime","parseTokenYY","parseTokensYYY","parseTokenYYYY","parseTokensYYYYY","parseTokenMM","parseTokenDDD","parseTokenMMDD","parseTokenWww","parseTokenWwwD","parseTokenHH","parseTokenHHMM","parseTokenHHMMSS","parseTokenTimezone","parseTokenTimezoneZ","parseTokenTimezoneHH","parseTokenTimezoneHHMM","parse","argument","dirtyOptions","Date","getTime","options","additionalDigits","Number","dateStrings","splitDateString","parseYearResult","parseYear","date","year","restDateString","parseDate","timestamp","time","parseTime","timezone","parseTimezone","getTimezoneOffset","dateString","timeString","token","parseTokenYYY","parseTokenYYYYY","yearString","parseInt","slice","centuryString","month","week","setUTCFullYear","dayOfYear","day","dayOfISOYear","dayOfWeek","hours","minutes","parseFloat","seconds","timezoneString","absoluteOffset","isoYear","fourthOfJanuaryDay","getUTCDay","diff","setUTCDate","getUTCDate","bitmap","writable","$at","iterated","_t","_i","point","done","$keys","enumBugKeys","keys","id","px","random","def","TAG","stat","Iterators","TO_STRING_TAG","DOMIterables","NAME","Collection","propertyIsEnumerable","instance","Constructor","_defineProperty","_defineProperty2","_interopRequireDefault","defineProperties","descriptor","protoProps","staticProps","is","valueOf","ReactPropTypesSecret","ceil","floor","isNaN","dPs","IE_PROTO","Empty","createDict","iframe","lt","gt","iframeDocument","style","display","appendChild","src","contentWindow","open","write","close","create","Properties","toInteger","min","shared","SHARED","mode","copyright","cof","ARG","tryGet","T","callee","classof","ITERATOR","getIteratorMethod","PromiseCapability","resolve","reject","promise","$$resolve","$$reject","getOwnPropertySymbols","LIBRARY","wksExt","$Symbol","charAt","omit","arraysEqual","isElementAnSFC","isNativeDOMElement","indexOf","sameObject","notBothArrays","differentLengths","every","memoizeString","cache","hyphenate","redefine","$iterCreate","setToStringTag","getPrototypeOf","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","next","DEFAULT","IS_SET","FORCED","getMethod","kind","values","entries","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","methods","IteratorPrototype","toIObject","arrayIndexOf","names","documentElement","toObject","ObjectProto","iterator","ArrayProto","SPECIES","D","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","ONREADYSTATECHANGE","defer","channel","port","listener","data","now","port2","port1","onmessage","postMessage","addEventListener","importScripts","clear","newPromiseCapability","x","promiseCapability","SAFE_CLOSING","riter","from","skipClosing","safe","iter","fails","KEY","exp","_typeof2","_typeof3","ReferenceError","_iterator","_iterator2","_symbol","_symbol2","_typeof","hiddenKeys","getOwnPropertyNames","pIE","gOPD","getOwnPropertyDescriptor","_setPrototypeOf","_setPrototypeOf2","_create","_create2","subClass","superClass","__proto__","hasClassInParent","formatErrorMsg","getMetaContent","axiosGithub","axiosJSON","queryStringify","queryParse","_keys","_keys2","_slicedToArray2","_slicedToArray3","_axios","_axios2","search","location","queryString","substring","query","queryStr","_queryStr$split","_queryStr$split2","decodeURIComponent","encodeURIComponent","join","headers","baseURL","content","el","querySelector","getAttribute","err","msg","response","message","errors","_len","_key","yes","classes","utils","encode","buildURL","url","params","paramsSerializer","serializedParams","parts","serialize","parseValue","toISOString","JSON","stringify","hashmarkIndex","isCancel","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","getDefaultAdapter","adapter","XMLHttpRequest","defaults","transformRequest","transformResponse","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","status","common","forEachMethodNoData","method","forEachMethodWithData","settle","buildFullPath","parseHeaders","isURLSameOrigin","createError","xhrAdapter","config","Promise","dispatchXhrRequest","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","fullPath","toUpperCase","onreadystatechange","handleLoad","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseData","responseType","responseText","statusText","onabort","handleAbort","onerror","handleError","ontimeout","handleTimeout","timeoutErrorMessage","cookies","xsrfValue","withCredentials","read","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","then","onCanceled","cancel","abort","send","enhanceError","code","error","mergeConfig","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","valueFromConfig2","prop","mergeDeepProperties","defaultToConfig2","axiosKeys","otherKeys","filter","filterAxiosKeys","otherKeysDefaultToConfig2","Cancel","_react","_react2","_ref","alt","onError","text","dangerouslySetInnerHTML","__html","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_reactDom","_gitalk","_gitalk2","Gitalk","HTMLElement","getElementById","$Object","desc","ReactIs","throwOnDirectAccess","isElement","g","h","k","q","t","w","y","u","z","typeOf","AsyncMode","ConcurrentMode","ContextConsumer","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isValidElementType","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","hasSymbol","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","lowPriorityWarningWithoutStack","printWarning","format","argIndex","console","warn","condition","_len2","_key2","lowPriorityWarningWithoutStack$1","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","assign","emptyFunctionThatReturnsNull","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","iteratorFn","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","bool","func","number","string","symbol","any","createAnyTypeChecker","arrayOf","createArrayOfTypeChecker","createElementTypeChecker","elementType","createElementTypeTypeChecker","instanceOf","createInstanceTypeChecker","createNodeChecker","objectOf","createObjectOfTypeChecker","oneOf","createEnumTypeChecker","oneOfType","createUnionTypeChecker","shape","createShapeTypeChecker","exact","createStrictShapeTypeChecker","PropTypeError","stack","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propName","componentName","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","replacer","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","isNode","shapeTypes","allKeys","step","entry","isSymbol","RegExp","resetWarningCache","propIsEnumerable","shouldUseNative","test1","test2","fromCharCode","order2","test3","letter","to","symbols","loggedTypeFailures","typeSpecs","getStack","typeSpecName","ex","emptyFunction","emptyFunctionWithReset","shim","getShim","lastSimple","child","simple","EMPTY_CHILDREN","pop","enqueueRender","__d","items","debounceRendering","rerender","list","renderComponent","isSameNodeType","hydrating","splitText","_componentConstructor","isNamedNode","__n","getNodeProps","createNode","isSvg","createElementNS","removeNode","setAccessor","old","cssText","IS_NON_DIMENSIONAL","innerHTML","useCapture","eventProxy","removeEventListener","__l","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","flushMounts","mounts","afterMount","dom","mountAll","componentRoot","diffLevel","isSvgMode","ownerSVGElement","idiff","prevSvgMode","nodeValue","createTextNode","replaceChild","recollectNodeTree","__preactattr_","buildComponentFromVNode","firstChild","fc","vchildren","nextSibling","innerDiffNode","diffAttributes","isHydrating","j","vchild","originalChildren","keyedLen","childrenLen","vlen","_child","__k","insertBefore","unmountOnly","unmountComponent","removeChildren","lastChild","previousSibling","collectComponent","components","createComponent","inst","doRender","__b","splice","setComponentProps","__x","__r","__c","__p","syncComponentUpdates","isChild","rendered","cbase","previousProps","previousState","__s","previousContext","isUpdate","nextBase","initialBase","initialChildComponent","skip","toUnmount","childComponent","childProps","__u","baseParent","componentRef","unshift","afterUpdate","__h","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","inner","forceUpdate","preact","polyfill","require","ES6Promise","objectOrFunction","_isArray","vertxNext","customSchedulerFn","asap","arg","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isWorker","Uint8ClampedArray","useNextTick","useVertxTimer","useSetTimeout","useMutationObserver","iterations","observer","observe","characterData","useMessageChannel","globalSetTimeout","attemptVertx","vertx","runOnLoop","runOnContext","onFulfillment","onRejection","_arguments","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","PENDING","FULFILLED","REJECTED","GET_THEN_ERROR","ErrorObject","selfFulfillment","cannotReturnOwn","getThen","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","detail","TRY_CATCH_ERROR","tryCatch","hasCallback","succeeded","failed","initializePromise","resolver","resolvePromise","rejectPromise","nextId","Enumerator$1","input","_instanceConstructor","_remaining","_enumerate","validationError","_eachEntry","resolve$$1","_then","_settledAt","Promise$2","_willSettleAt","enumerator","all$1","race$1","_","reject$1","needsResolver","needsNew","all","race","_setScheduler","_setAsap","_asap","_catch","polyfill$1","local","promiseToString","cast","eval","_promise","_promise2","_assign","_assign2","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_reactFlipMove","_reactFlipMove2","_autosize","_autosize2","_i18n","_i18n2","_util","_avatar","_avatar2","_button","_button2","_action","_action2","_comment","_comment2","_svg","_svg2","_const","_getComments","_getComments2","GitalkComponent","_Component","_this","user","issue","comments","localComments","comment","page","pagerDirection","cursor","previewHtml","isNoInit","isIniting","isCreating","isLoading","isLoadMore","isLoadOver","isIssueCreating","isPopupVisible","isInputFocused","isPreview","isOccurError","errorMsg","getCommentsV3","_this$options","clientID","clientSecret","perPage","getIssue","comments_url","Accept","per_page","res","_this$state","cs","getRef","publicBtnEL","reply","replyComment","replyCommentBody","body","replyCommentArray","login","update","commentEL","focus","handlePopup","preventDefault","stopPropagation","isVisible","hideHandle","e1","handleLogin","localStorage","setItem","GT_COMMENT","href","loginLink","handleIssueCreate","createIssue","getComments","handleCommentCreate","createComment","handleCommentPreview","post","accessToken","handleCommentLoad","_this$state2","handleCommentChange","handleLogout","logout","reload","handleCommentFocus","distractionFreeMode","handleCommentBlur","handleSort","direction","handleCommentKeyDown","enableHotKey","metaKey","ctrlKey","keyCode","labels","language","userLanguage","createIssueManually","proxy","flipMoveOptions","staggerDelayBy","appearAnimation","enterAnimation","leaveAnimation","defaultAuthor","avatarUrl","updateCountCallback","storedComment","getItem","removeItem","replacedUrl","origin","pathname","hash","history","client_id","client_secret","access_token","getInit","log","i18n","_this2","getUserInfo","_this3","getIssueById","_this4","_options","owner","repo","getUrl","getIssueByLabels","_this5","_options2","isAdmin","_this6","resIssue","_this7","_options3","_this8","GT_ACCESS_TOKEN","like","_this9","_options4","reactions","nodes","findIndex","totalCount","viewerHasReacted","unLike","_this10","getQL","operationName","gId","initing","noInit","_state2","_options5","admin","link","onClick","handleImageErrored","header","_this11","_state3","avatar_url","onMouseDown","onChange","onFocus","onBlur","onKeyDown","placeholder","_this12","_state4","_options6","totalComments","reverse","commentedText","replyCallback","likeCallback","meta","_state5","cnt","isDesc","counts","html_url","smart_count","GT_VERSION","_state6","_accessToke","_accessToken","githubOauthUrl","redirect_uri","scope","TO_STRING","pos","charCodeAt","getKeys","toLength","toAbsoluteIndex","IS_INCLUDES","$this","fromIndex","max","addToUnscopables","_k","Arguments","anInstance","forOf","speciesConstructor","task","microtask","newPromiseCapabilityModule","perform","userAgent","promiseResolve","PROMISE","v8","$Promise","empty","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","USE_NATIVE","FakePromise","PromiseRejectionEvent","isThenable","notify","isReject","_n","chain","_c","_v","ok","_s","reaction","handler","fail","domain","exited","_h","onHandleUnhandled","enter","exit","onUnhandled","unhandled","isUnhandled","onunhandledrejection","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","onFulfilled","onRejected","capability","iterable","remaining","$index","alreadyCalled","forbiddenField","isArrayIter","getIterFn","BREAK","RETURN","iterFn","un","macrotask","Observer","head","last","standalone","toggle","DESCRIPTORS","onFinally","callbackfn","gOPS","$assign","A","K","aLen","getSymbols","isEnum","$getPrototypeOf","META","$fails","wks","wksDefine","enumKeys","gOPNExt","$GOPD","$GOPS","$DP","gOPN","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","QObject","setter","findChild","setSymbolDesc","protoDesc","sym","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","wellKnownSymbols","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","$replacer","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","fastKey","getWeak","onFreeze","NEED","windowNames","getWindowNames","setPrototypeOf","check","buggy","_FlipMove","_FlipMove2","_slicedToArray","sliceIterator","_arr","_e","_extends","_createClass","_propConverter","_propConverter2","_domManipulation","_helpers","_classCallCheck","_possibleConstructorReturn","_inherits","transitionEnd","whichTransitionEvent","noBrowserSupport","getKey","childData","FlipMove","_temp","_ret","appearing","childrenData","parentData","domNode","boundingBox","heightPlaceholderData","remainingAnimations","childrenToAnimate","runAnimation","dynamicChildren","doesChildNeedToBeAnimated","animateChild","onStartAll","callChildrenHook","getChildData","childDomNode","childBoundingBox","parentBoundingBox","_this$props","getPosition","isAppearingWithAnimation","isEnteringWithAnimation","entering","isLeavingWithAnimation","leaving","_getPositionDelta","getPositionDelta","_getPositionDelta2","dX","dY","shouldTriggerFLIP","isAnimationDisabled","prepForAnimation","nextProps","updateBoundingBoxCaches","nextChildren","calculateNextSetOfChildren","oldChildrenKeys","nextChildrenKeys","updatedChildren","nextChild","findChildByKey","isEntering","numOfChildrenLeaving","isLeaving","find","_ref2","nextChildIndex","_props","maintainContainerHeight","leavingChildren","leavingChild","removeNodeFromDOMFlow","verticalAlignment","updateHeightPlaceholder","_getChildData","applyStylesToDOMNode","styles","transition","_getChildData2","computeInitialStyles","onStart","requestAnimationFrame","createTransitionString","transform","opacity","bindTransitionEndHandler","_getChildData3","transitionEndHandler","ev","triggerFinishHooks","removeChildData","onFinish","_ref3","item","onFinishAll","height","hook","elements","domNodes","childKey","hasChildData","parentDomNode","setChildData","getRelativeBoundingBox","position","top","left","right","bottom","_getPositionDelta3","_getPositionDelta4","disableAllAnimations","duration","delay","staggerDurationBy","createHeightPlaceholder","typeName","isContainerAList","placeholderType","visibility","childrenWithRefs","getNativeNode","_props2","delegated","predicate","kValue","testResult","_errorMessages","_enterLeavePresets","nodeEnv","propConverter","ComposedComponent","_class","FlipMovePropConverter","checkForStatelessFunctionalComponents","childArray","noStateless","statelessFunctionalComponentSupplied","convertProps","workingProps","easing","convertTimingProp","convertAnimationProp","appearPresets","enterPresets","leavePresets","disableAnimations","deprecatedDisableAnimations","primaryPropKeys","delegatedProps","rawValue","invalidTypeForTimingProp","animation","presets","defaultPreset","disablePreset","presetKeys","invalidEnterLeavePreset","acceptableValues","getBoundingClientRect","warnOnce","hasWarned","elevator","fade","accordionVertical","transformOrigin","accordionHorizontal","none","accordianVertical","accordianHorizontal","transitions","match","getPropertyValue","parentBox","_getPosition","width","defaultBox","oldRelativeBox","newAbsoluteBox","newRelativeBox","computed","getComputedStyle","marginAttrs","margins","reduce","acc","margin","propertyVal","topOffset","_ref4","originalParentHeight","collapsedParentHeight","reductionInHeight","foundNode","cssProperties","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","mod","autosize","Map","_delete","createEvent","Event","bubbles","evt","initEvent","ta","heightOffset","clientWidth","cachedHeight","init","resize","boxSizing","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","changeOverflow","offsetWidth","overflowY","getParentOverflows","scrollTop","originalHeight","overflows","docTop","endHeight","scrollHeight","styleHeight","round","actualHeight","offsetHeight","dispatchEvent","pageResize","destroy","overflowX","wordWrap","_polyglot2","phrases","i18nMap","en","locale","_polyglot","_zhCN","_zhCN2","_zhTW","_zhTW2","_en","_en2","_esES","_esES2","_fr","_fr2","_ru","_ru2","_de","_de2","Polyglot","currentLocale","allowMissing","VERSION","newLocale","morePhrases","prefix","phrase","newPhrases","clone","choosePluralForm","interpolate","delimeter","pluralTypes","chinese","german","french","russian","czech","polish","icelandic","pluralTypeToLanguages","langToTypeMap","mapping","langs","trimRe","texts","chosenText","pluralTypeIndex","pluralTypeName","langToPluralType","_isIterable2","_isIterable3","_getIterator2","_getIterator3","isIterable","getIterator","Axios","createInstance","defaultConfig","axios","instanceConfig","CancelToken","promises","spread","InterceptorManager","dispatchRequest","interceptors","unshiftRequestInterceptors","interceptor","fulfilled","rejected","pushResponseInterceptors","shift","getUri","handlers","use","eject","forEachHandler","transformData","throwIfCancellationRequested","throwIfRequested","cleanHeaderConfig","onAdapterResolution","onAdapterRejection","fns","normalizedName","processHeader","isAxiosError","toJSON","description","fileName","lineNumber","columnNumber","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","parsed","parser","line","substr","standardBrowserEnv","msie","urlParsingNode","originURL","resolveURL","protocol","host","hostname","requestURL","nonStandardBrowserEnv","expires","path","secure","cookie","toGMTString","remove","promiseExecutor","_distance_in_words_to_now","_distance_in_words_to_now2","_index","_index2","_index3","_index4","_index5","_index6","_index7","_index8","_index9","_index10","ZHCN","ZHTW","ES","FR","RU","GT_i18n_distanceInWordsLocaleMap","zh","fr","ru","Comment","emailResponse","classList","_props$commentedText","_props$admin","enableEdit","reactionTotalCount","pageInfo","hasNextPage","created_at","addSuffix","distanceInWords","body_html","webpackContext","req","webpackContextResolve","webpackContextKeys","distanceInWordsToNow","dirtyDate","compareDesc","differenceInSeconds","differenceInMonths","enLocale","MINUTES_IN_DAY","MINUTES_IN_ALMOST_TWO_DAYS","MINUTES_IN_MONTH","MINUTES_IN_TWO_MONTHS","dirtyDateToCompare","comparison","localize","localizeOptions","Boolean","dateLeft","dateRight","months","includeSeconds","days","nearestMonth","monthsSinceStartOfYear","years","dirtyDateLeft","dirtyDateRight","timeLeft","timeRight","differenceInMilliseconds","differenceInCalendarMonths","compareAsc","sign","difference","abs","setMonth","getMonth","isLastMonthNotFull","yearDiff","getFullYear","monthDiff","buildDistanceInWordsLocale","buildFormatLocale","distanceInWordsLocale","lessThanXSeconds","one","other","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","buildFormattingTokensRegExp","months3char","monthsFull","weekdays2char","weekdays3char","weekdaysFull","meridiemUppercase","meridiemLowercase","meridiemFull","formatters","getDay","getHours","ordinalFormatters","formatterToken","ordinal","formattingTokensRegExp","rem100","commonFormatterKeys","formatterKeys","formattingTokens","sort","declension","scheme","rem10","singularNominative","singularGenitive","pluralGenitive","buildLocalizeTokenFn","future","regular","past","_toConsumableArray2","_toConsumableArray3","vars","cursorDirection","ql","variables","pageSize","repository","author","databaseId","createdAt","bodyHTML","hasPreviousPage","startCursor","endCursor","_from","_from2","arr2","createProperty","arrayLike","mapfn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,CAAC,SAASA,gCAAT,CAA0CC,IAA1C,EAAgDC,OAAhD,EAAyD;AACzD,MAAG,QAAOC,OAAP,0CAAOA,OAAP,OAAmB,QAAnB,IAA+B,QAAOC,MAAP,0CAAOA,MAAP,OAAkB,QAApD,EACCA,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAAxB,CADD,KAEK,IAAG,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA1C,EACJD,MAAM,CAAC,EAAD,EAAKH,OAAL,CAAN,CADI,KAEA,IAAG,QAAOC,OAAP,0CAAOA,OAAP,OAAmB,QAAtB,EACJA,OAAO,CAAC,QAAD,CAAP,GAAoBD,OAAO,EAA3B,CADI,KAGJD,IAAI,CAAC,QAAD,CAAJ,GAAiBC,OAAO,EAAxB;AACD,CATD,EASG,IATH,EASS,YAAW;AACpB;AAAO;AAAU,cAASK,OAAT,EAAkB;AAAE;;AACrC;AAAU;;AACV;AAAU,UAAIC,gBAAgB,GAAG,EAAvB;AACV;;AACA;AAAU;;AACV;;AAAU,eAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACjD;;AACA;AAAW;;AACX;AAAW,YAAGF,gBAAgB,CAACE,QAAD,CAAnB,EAA+B;AAC1C;AAAY,iBAAOF,gBAAgB,CAACE,QAAD,CAAhB,CAA2BP,OAAlC;AACZ;AAAY;AACZ;AAAW;;AACX;;;AAAW,YAAIC,MAAM,GAAGI,gBAAgB,CAACE,QAAD,CAAhB,GAA6B;AACrD;AAAYC,UAAAA,CAAC,EAAED,QADsC;;AAErD;AAAYE,UAAAA,CAAC,EAAE,KAFsC;;AAGrD;AAAYT,UAAAA,OAAO,EAAE;AACrB;;AAJqD,SAA1C;AAKX;;AACA;AAAW;;AACX;;AAAWI,QAAAA,OAAO,CAACG,QAAD,CAAP,CAAkBG,IAAlB,CAAuBT,MAAM,CAACD,OAA9B,EAAuCC,MAAvC,EAA+CA,MAAM,CAACD,OAAtD,EAA+DM,mBAA/D;AACX;;AACA;AAAW;;AACX;;AAAWL,QAAAA,MAAM,CAACQ,CAAP,GAAW,IAAX;AACX;;AACA;AAAW;;AACX;;AAAW,eAAOR,MAAM,CAACD,OAAd;AACX;AAAW;AACX;;AACA;;AACA;AAAU;;AACV;;;AAAUM,MAAAA,mBAAmB,CAACK,CAApB,GAAwBP,OAAxB;AACV;;AACA;AAAU;;AACV;;AAAUE,MAAAA,mBAAmB,CAACM,CAApB,GAAwBP,gBAAxB;AACV;;AACA;AAAU;;AACV;;AAAUC,MAAAA,mBAAmB,CAACO,CAApB,GAAwB,UAASb,OAAT,EAAkBc,IAAlB,EAAwBC,MAAxB,EAAgC;AAClE;AAAW,YAAG,CAACT,mBAAmB,CAACU,CAApB,CAAsBhB,OAAtB,EAA+Bc,IAA/B,CAAJ,EAA0C;AACrD;AAAYG,UAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+Bc,IAA/B,EAAqC;AACjD;AAAaK,YAAAA,YAAY,EAAE,KADsB;;AAEjD;AAAaC,YAAAA,UAAU,EAAE,IAFwB;;AAGjD;AAAaC,YAAAA,GAAG,EAAEN;AAClB;;AAJiD,WAArC;AAKZ;AAAY;AACZ;;AAAW,OARD;AASV;;AACA;AAAU;;AACV;;;AAAUT,MAAAA,mBAAmB,CAACgB,CAApB,GAAwB,UAASrB,MAAT,EAAiB;AACnD;AAAW,YAAIc,MAAM,GAAGd,MAAM,IAAIA,MAAM,CAACsB,UAAjB;AACxB;AAAY,iBAASC,UAAT,GAAsB;AAAE,iBAAOvB,MAAM,CAAC,SAAD,CAAb;AAA2B,SADvC;AAExB;AAAY,iBAASwB,gBAAT,GAA4B;AAAE,iBAAOxB,MAAP;AAAgB,SAF/C;AAGX;;AAAWK,QAAAA,mBAAmB,CAACO,CAApB,CAAsBE,MAAtB,EAA8B,GAA9B,EAAmCA,MAAnC;AACX;;;AAAW,eAAOA,MAAP;AACX;AAAW,OAND;AAOV;;AACA;AAAU;;AACV;;;AAAUT,MAAAA,mBAAmB,CAACU,CAApB,GAAwB,UAASU,MAAT,EAAiBC,QAAjB,EAA2B;AAAE,eAAOV,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCgB,MAArC,EAA6CC,QAA7C,CAAP;AAAgE,OAArH;AACV;;AACA;AAAU;;AACV;;;AAAUrB,MAAAA,mBAAmB,CAACwB,CAApB,GAAwB,OAAxB;AACV;;AACA;AAAU;;AACV;;AAAU,aAAOxB,mBAAmB,CAACA,mBAAmB,CAACyB,CAApB,GAAwB,EAAzB,CAA1B;AACV;AAAU,KA/DM;AAgEhB;;AACA;AAAU;AACV;;AACA;AAAO,cAAS9B,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAIgC,IAAI,GAAG/B,MAAM,CAACD,OAAP,GAAiB;AAAEiC,QAAAA,OAAO,EAAE;AAAX,OAA5B;AACA,UAAI,OAAOC,GAAP,IAAc,QAAlB,EAA4BA,GAAG,GAAGF,IAAN,CAHK,CAGO;;AAGxC;AAAO,KARG;AASV;;AACA;AAAO,cAAS/B,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACA,UAAImC,MAAM,GAAGlC,MAAM,CAACD,OAAP,GAAiB,OAAOoC,MAAP,IAAiB,WAAjB,IAAgCA,MAAM,CAACC,IAAP,IAAeA,IAA/C,GAC1BD,MAD0B,GACjB,OAAOE,IAAP,IAAe,WAAf,IAA8BA,IAAI,CAACD,IAAL,IAAaA,IAA3C,GAAkDC,IAAlD,CACX;AADW,QAETC,QAAQ,CAAC,aAAD,CAAR,EAHJ;AAIA,UAAI,OAAOC,GAAP,IAAc,QAAlB,EAA4BA,GAAG,GAAGL,MAAN,CAPK,CAOS;;AAG1C;AAAO,KApBG;AAqBV;;AACA;AAAO,cAASlC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAImC,KAAK,GAAGnC,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,KAAxB,CAAZ;;AACA,UAAIoC,GAAG,GAAGpC,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIqC,OAAM,GAAGrC,mBAAmB,CAAC,CAAD,CAAnB,CAAuBqC,MAApC;;AACA,UAAIC,UAAU,GAAG,OAAOD,OAAP,IAAiB,UAAlC;;AAEA,UAAIE,QAAQ,GAAG5C,MAAM,CAACD,OAAP,GAAiB,UAAUc,IAAV,EAAgB;AAC9C,eAAO2B,KAAK,CAAC3B,IAAD,CAAL,KAAgB2B,KAAK,CAAC3B,IAAD,CAAL,GACrB8B,UAAU,IAAID,OAAM,CAAC7B,IAAD,CAApB,IAA8B,CAAC8B,UAAU,GAAGD,OAAH,GAAYD,GAAvB,EAA4B,YAAY5B,IAAxC,CADzB,CAAP;AAED,OAHD;;AAKA+B,MAAAA,QAAQ,CAACJ,KAAT,GAAiBA,KAAjB;AAGA;AAAO,KArCG;AAsCV;;AACA;AAAO,cAASxC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwC,IAAI,GAAGxC,mBAAmB,CAAC,EAAD,CAA9B;AAEA;AAEA;;;AAEA,UAAIyC,QAAQ,GAAG9B,MAAM,CAACW,SAAP,CAAiBmB,QAAhC;AAEA;;;;;;;AAMA,eAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACpB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,gBAA9B;AACD;AAED;;;;;;;;AAMA,eAASC,WAAT,CAAqBD,GAArB,EAA0B;AACxB,eAAO,OAAOA,GAAP,KAAe,WAAtB;AACD;AAED;;;;;;;;AAMA,eAASE,QAAT,CAAkBF,GAAlB,EAAuB;AACrB,eAAOA,GAAG,KAAK,IAAR,IAAgB,CAACC,WAAW,CAACD,GAAD,CAA5B,IAAqCA,GAAG,CAACG,WAAJ,KAAoB,IAAzD,IAAiE,CAACF,WAAW,CAACD,GAAG,CAACG,WAAL,CAA7E,IACF,OAAOH,GAAG,CAACG,WAAJ,CAAgBD,QAAvB,KAAoC,UADlC,IACgDF,GAAG,CAACG,WAAJ,CAAgBD,QAAhB,CAAyBF,GAAzB,CADvD;AAED;AAED;;;;;;;;AAMA,eAASI,aAAT,CAAuBJ,GAAvB,EAA4B;AAC1B,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,sBAA9B;AACD;AAED;;;;;;;;AAMA,eAASK,UAAT,CAAoBL,GAApB,EAAyB;AACvB,eAAQ,OAAOM,QAAP,KAAoB,WAArB,IAAsCN,GAAG,YAAYM,QAA5D;AACD;AAED;;;;;;;;AAMA,eAASC,iBAAT,CAA2BP,GAA3B,EAAgC;AAC9B,YAAIQ,MAAJ;;AACA,YAAK,OAAOC,WAAP,KAAuB,WAAxB,IAAyCA,WAAW,CAACC,MAAzD,EAAkE;AAChEF,UAAAA,MAAM,GAAGC,WAAW,CAACC,MAAZ,CAAmBV,GAAnB,CAAT;AACD,SAFD,MAEO;AACLQ,UAAAA,MAAM,GAAIR,GAAD,IAAUA,GAAG,CAACW,MAAd,IAA0BX,GAAG,CAACW,MAAJ,YAAsBF,WAAzD;AACD;;AACD,eAAOD,MAAP;AACD;AAED;;;;;;;;AAMA,eAASI,QAAT,CAAkBZ,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;AAED;;;;;;;;AAMA,eAASa,QAAT,CAAkBb,GAAlB,EAAuB;AACrB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;AAED;;;;;;;;AAMA,eAASc,QAAT,CAAkBd,GAAlB,EAAuB;AACrB,eAAOA,GAAG,KAAK,IAAR,IAAgB,SAAOA,GAAP,MAAe,QAAtC;AACD;AAED;;;;;;;;AAMA,eAASe,MAAT,CAAgBf,GAAhB,EAAqB;AACnB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,eAA9B;AACD;AAED;;;;;;;;AAMA,eAASgB,MAAT,CAAgBhB,GAAhB,EAAqB;AACnB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,eAA9B;AACD;AAED;;;;;;;;AAMA,eAASiB,MAAT,CAAgBjB,GAAhB,EAAqB;AACnB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,eAA9B;AACD;AAED;;;;;;;;AAMA,eAASkB,UAAT,CAAoBlB,GAApB,EAAyB;AACvB,eAAOF,QAAQ,CAACrC,IAAT,CAAcuC,GAAd,MAAuB,mBAA9B;AACD;AAED;;;;;;;;AAMA,eAASmB,QAAT,CAAkBnB,GAAlB,EAAuB;AACrB,eAAOc,QAAQ,CAACd,GAAD,CAAR,IAAiBkB,UAAU,CAAClB,GAAG,CAACoB,IAAL,CAAlC;AACD;AAED;;;;;;;;AAMA,eAASC,iBAAT,CAA2BrB,GAA3B,EAAgC;AAC9B,eAAO,OAAOsB,eAAP,KAA2B,WAA3B,IAA0CtB,GAAG,YAAYsB,eAAhE;AACD;AAED;;;;;;;;AAMA,eAASC,IAAT,CAAcC,GAAd,EAAmB;AACjB,eAAOA,GAAG,CAACC,OAAJ,CAAY,MAAZ,EAAoB,EAApB,EAAwBA,OAAxB,CAAgC,MAAhC,EAAwC,EAAxC,CAAP;AACD;AAED;;;;;;;;;;;;;;;;;AAeA,eAASC,oBAAT,GAAgC;AAC9B,YAAI,OAAOC,SAAP,KAAqB,WAArB,KAAqCA,SAAS,CAACC,OAAV,KAAsB,aAAtB,IACAD,SAAS,CAACC,OAAV,KAAsB,cADtB,IAEAD,SAAS,CAACC,OAAV,KAAsB,IAF3D,CAAJ,EAEsE;AACpE,iBAAO,KAAP;AACD;;AACD,eACE,OAAOzC,MAAP,KAAkB,WAAlB,IACA,OAAO0C,QAAP,KAAoB,WAFtB;AAID;AAED;;;;;;;;;;;;;;AAYA,eAASC,OAAT,CAAiBC,GAAjB,EAAsBC,EAAtB,EAA0B;AACxB;AACA,YAAID,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,WAAnC,EAAgD;AAC9C;AACD,SAJuB,CAMxB;;;AACA,YAAI,SAAOA,GAAP,MAAe,QAAnB,EAA6B;AAC3B;AACAA,UAAAA,GAAG,GAAG,CAACA,GAAD,CAAN;AACD;;AAED,YAAIhC,OAAO,CAACgC,GAAD,CAAX,EAAkB;AAChB;AACA,eAAK,IAAIxE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGuE,GAAG,CAACE,MAAxB,EAAgC1E,CAAC,GAAGC,CAApC,EAAuCD,CAAC,EAAxC,EAA4C;AAC1CyE,YAAAA,EAAE,CAACvE,IAAH,CAAQ,IAAR,EAAcsE,GAAG,CAACxE,CAAD,CAAjB,EAAsBA,CAAtB,EAAyBwE,GAAzB;AACD;AACF,SALD,MAKO;AACL;AACA,eAAK,IAAIG,GAAT,IAAgBH,GAAhB,EAAqB;AACnB,gBAAI/D,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCsE,GAArC,EAA0CG,GAA1C,CAAJ,EAAoD;AAClDF,cAAAA,EAAE,CAACvE,IAAH,CAAQ,IAAR,EAAcsE,GAAG,CAACG,GAAD,CAAjB,EAAwBA,GAAxB,EAA6BH,GAA7B;AACD;AACF;AACF;AACF;AAED;;;;;;;;;;;;;;;;;;;AAiBA,eAASI,KAAT;AAAe;AAA6B;AAC1C,YAAI3B,MAAM,GAAG,EAAb;;AACA,iBAAS4B,WAAT,CAAqBpC,GAArB,EAA0BkC,GAA1B,EAA+B;AAC7B,cAAI,SAAO1B,MAAM,CAAC0B,GAAD,CAAb,MAAuB,QAAvB,IAAmC,SAAOlC,GAAP,MAAe,QAAtD,EAAgE;AAC9DQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcC,KAAK,CAAC3B,MAAM,CAAC0B,GAAD,CAAP,EAAclC,GAAd,CAAnB;AACD,WAFD,MAEO;AACLQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAclC,GAAd;AACD;AACF;;AAED,aAAK,IAAIzC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG6E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,GAAGC,CAA1C,EAA6CD,CAAC,EAA9C,EAAkD;AAChDuE,UAAAA,OAAO,CAACO,SAAS,CAAC9E,CAAD,CAAV,EAAe6E,WAAf,CAAP;AACD;;AACD,eAAO5B,MAAP;AACD;AAED;;;;;;;;;;AAQA,eAAS8B,SAAT;AAAmB;AAA6B;AAC9C,YAAI9B,MAAM,GAAG,EAAb;;AACA,iBAAS4B,WAAT,CAAqBpC,GAArB,EAA0BkC,GAA1B,EAA+B;AAC7B,cAAI,SAAO1B,MAAM,CAAC0B,GAAD,CAAb,MAAuB,QAAvB,IAAmC,SAAOlC,GAAP,MAAe,QAAtD,EAAgE;AAC9DQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcI,SAAS,CAAC9B,MAAM,CAAC0B,GAAD,CAAP,EAAclC,GAAd,CAAvB;AACD,WAFD,MAEO,IAAI,SAAOA,GAAP,MAAe,QAAnB,EAA6B;AAClCQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcI,SAAS,CAAC,EAAD,EAAKtC,GAAL,CAAvB;AACD,WAFM,MAEA;AACLQ,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAclC,GAAd;AACD;AACF;;AAED,aAAK,IAAIzC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG6E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,GAAGC,CAA1C,EAA6CD,CAAC,EAA9C,EAAkD;AAChDuE,UAAAA,OAAO,CAACO,SAAS,CAAC9E,CAAD,CAAV,EAAe6E,WAAf,CAAP;AACD;;AACD,eAAO5B,MAAP;AACD;AAED;;;;;;;;;;AAQA,eAAS+B,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBC,OAAtB,EAA+B;AAC7BZ,QAAAA,OAAO,CAACW,CAAD,EAAI,SAASL,WAAT,CAAqBpC,GAArB,EAA0BkC,GAA1B,EAA+B;AACxC,cAAIQ,OAAO,IAAI,OAAO1C,GAAP,KAAe,UAA9B,EAA0C;AACxCwC,YAAAA,CAAC,CAACN,GAAD,CAAD,GAASrC,IAAI,CAACG,GAAD,EAAM0C,OAAN,CAAb;AACD,WAFD,MAEO;AACLF,YAAAA,CAAC,CAACN,GAAD,CAAD,GAASlC,GAAT;AACD;AACF,SANM,CAAP;AAOA,eAAOwC,CAAP;AACD;;AAEDxF,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfgD,QAAAA,OAAO,EAAEA,OADM;AAEfK,QAAAA,aAAa,EAAEA,aAFA;AAGfF,QAAAA,QAAQ,EAAEA,QAHK;AAIfG,QAAAA,UAAU,EAAEA,UAJG;AAKfE,QAAAA,iBAAiB,EAAEA,iBALJ;AAMfK,QAAAA,QAAQ,EAAEA,QANK;AAOfC,QAAAA,QAAQ,EAAEA,QAPK;AAQfC,QAAAA,QAAQ,EAAEA,QARK;AASfb,QAAAA,WAAW,EAAEA,WATE;AAUfc,QAAAA,MAAM,EAAEA,MAVO;AAWfC,QAAAA,MAAM,EAAEA,MAXO;AAYfC,QAAAA,MAAM,EAAEA,MAZO;AAafC,QAAAA,UAAU,EAAEA,UAbG;AAcfC,QAAAA,QAAQ,EAAEA,QAdK;AAefE,QAAAA,iBAAiB,EAAEA,iBAfJ;AAgBfK,QAAAA,oBAAoB,EAAEA,oBAhBP;AAiBfI,QAAAA,OAAO,EAAEA,OAjBM;AAkBfK,QAAAA,KAAK,EAAEA,KAlBQ;AAmBfG,QAAAA,SAAS,EAAEA,SAnBI;AAoBfC,QAAAA,MAAM,EAAEA,MApBO;AAqBfhB,QAAAA,IAAI,EAAEA;AArBS,OAAjB;AAyBA;AAAO,KApYG;AAqYV;;AACA;AAAO,cAASvE,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIyF,SAAS,GAAG,WAAhB;;AAEA,UAAIC,OAAO,GAAG,SAAVA,OAAU,CAAUC,IAAV,EAAgBnF,IAAhB,EAAsBoF,MAAtB,EAA8B;AAC1C,YAAIC,SAAS,GAAGF,IAAI,GAAGD,OAAO,CAACI,CAA/B;AACA,YAAIC,SAAS,GAAGJ,IAAI,GAAGD,OAAO,CAACM,CAA/B;AACA,YAAIC,SAAS,GAAGN,IAAI,GAAGD,OAAO,CAACQ,CAA/B;AACA,YAAIC,QAAQ,GAAGR,IAAI,GAAGD,OAAO,CAACU,CAA9B;AACA,YAAIC,OAAO,GAAGV,IAAI,GAAGD,OAAO,CAACY,CAA7B;AACA,YAAIC,OAAO,GAAGZ,IAAI,GAAGD,OAAO,CAACc,CAA7B;AACA,YAAI9G,OAAO,GAAGqG,SAAS,GAAGrE,IAAH,GAAUA,IAAI,CAAClB,IAAD,CAAJ,KAAekB,IAAI,CAAClB,IAAD,CAAJ,GAAa,EAA5B,CAAjC;AACA,YAAIiG,QAAQ,GAAG/G,OAAO,CAAC+F,SAAD,CAAtB;AACA,YAAIiB,MAAM,GAAGX,SAAS,GAAGlE,MAAH,GAAYoE,SAAS,GAAGpE,MAAM,CAACrB,IAAD,CAAT,GAAkB,CAACqB,MAAM,CAACrB,IAAD,CAAN,IAAgB,EAAjB,EAAqBiF,SAArB,CAA7D;AACA,YAAIZ,GAAJ,EAAS8B,GAAT,EAAcC,GAAd;AACA,YAAIb,SAAJ,EAAeH,MAAM,GAAGpF,IAAT;;AACf,aAAKqE,GAAL,IAAYe,MAAZ,EAAoB;AAClB;AACAe,UAAAA,GAAG,GAAG,CAACd,SAAD,IAAca,MAAd,IAAwBA,MAAM,CAAC7B,GAAD,CAAN,KAAgBgC,SAA9C;AACA,cAAIF,GAAG,IAAInB,GAAG,CAAC9F,OAAD,EAAUmF,GAAV,CAAd,EAA8B,SAHZ,CAIlB;;AACA+B,UAAAA,GAAG,GAAGD,GAAG,GAAGD,MAAM,CAAC7B,GAAD,CAAT,GAAiBe,MAAM,CAACf,GAAD,CAAhC,CALkB,CAMlB;;AACAnF,UAAAA,OAAO,CAACmF,GAAD,CAAP,GAAekB,SAAS,IAAI,OAAOW,MAAM,CAAC7B,GAAD,CAAb,IAAsB,UAAnC,GAAgDe,MAAM,CAACf,GAAD,CAAtD,CACf;AADe,YAEbwB,OAAO,IAAIM,GAAX,GAAiBrB,GAAG,CAACsB,GAAD,EAAM/E,MAAN,CAApB,CACF;AADE,YAEA0E,OAAO,IAAIG,MAAM,CAAC7B,GAAD,CAAN,IAAe+B,GAA1B,GAAiC,UAAUE,CAAV,EAAa;AAC9C,gBAAIhB,CAAC,GAAG,SAAJA,CAAI,CAAUX,CAAV,EAAaC,CAAb,EAAgB9E,CAAhB,EAAmB;AACzB,kBAAI,gBAAgBwG,CAApB,EAAuB;AACrB,wBAAQ9B,SAAS,CAACJ,MAAlB;AACE,uBAAK,CAAL;AAAQ,2BAAO,IAAIkC,CAAJ,EAAP;;AACR,uBAAK,CAAL;AAAQ,2BAAO,IAAIA,CAAJ,CAAM3B,CAAN,CAAP;;AACR,uBAAK,CAAL;AAAQ,2BAAO,IAAI2B,CAAJ,CAAM3B,CAAN,EAASC,CAAT,CAAP;AAHV;;AAIE,uBAAO,IAAI0B,CAAJ,CAAM3B,CAAN,EAASC,CAAT,EAAY9E,CAAZ,CAAP;AACH;;AAAC,qBAAOwG,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAc/B,SAAd,CAAP;AACH,aARD;;AASAc,YAAAA,CAAC,CAACL,SAAD,CAAD,GAAeqB,CAAC,CAACrB,SAAD,CAAhB;AACA,mBAAOK,CAAP,CAX8C,CAYhD;AACC,WAbiC,CAa/Bc,GAb+B,CAAhC,GAaQT,QAAQ,IAAI,OAAOS,GAAP,IAAc,UAA1B,GAAuCtB,GAAG,CAACrD,QAAQ,CAAC7B,IAAV,EAAgBwG,GAAhB,CAA1C,GAAiEA,GAjB3E,CAPkB,CAyBlB;;AACA,cAAIT,QAAJ,EAAc;AACZ,aAACzG,OAAO,CAACsH,OAAR,KAAoBtH,OAAO,CAACsH,OAAR,GAAkB,EAAtC,CAAD,EAA4CnC,GAA5C,IAAmD+B,GAAnD,CADY,CAEZ;;AACA,gBAAIjB,IAAI,GAAGD,OAAO,CAACuB,CAAf,IAAoBR,QAApB,IAAgC,CAACA,QAAQ,CAAC5B,GAAD,CAA7C,EAAoDU,IAAI,CAACkB,QAAD,EAAW5B,GAAX,EAAgB+B,GAAhB,CAAJ;AACrD;AACF;AACF,OA5CD,CATsD,CAsDtD;;;AACAlB,MAAAA,OAAO,CAACI,CAAR,GAAY,CAAZ,CAvDsD,CAuDrC;;AACjBJ,MAAAA,OAAO,CAACM,CAAR,GAAY,CAAZ,CAxDsD,CAwDrC;;AACjBN,MAAAA,OAAO,CAACQ,CAAR,GAAY,CAAZ,CAzDsD,CAyDrC;;AACjBR,MAAAA,OAAO,CAACU,CAAR,GAAY,CAAZ,CA1DsD,CA0DrC;;AACjBV,MAAAA,OAAO,CAACY,CAAR,GAAY,EAAZ,CA3DsD,CA2DrC;;AACjBZ,MAAAA,OAAO,CAACc,CAAR,GAAY,EAAZ,CA5DsD,CA4DrC;;AACjBd,MAAAA,OAAO,CAACwB,CAAR,GAAY,EAAZ,CA7DsD,CA6DrC;;AACjBxB,MAAAA,OAAO,CAACuB,CAAR,GAAY,GAAZ,CA9DsD,CA8DrC;;AACjBtH,MAAAA,MAAM,CAACD,OAAP,GAAiBgG,OAAjB;AAGA;AAAO,KAxcG;AAycV;;AACA;AAAO,cAAS/F,MAAT,EAAiBwH,mBAAjB,EAAsCnH,mBAAtC,EAA2D;AAElE;;AACAW,MAAAA,MAAM,CAACC,cAAP,CAAsBuG,mBAAtB,EAA2C,YAA3C,EAAyD;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAzD;AACA;;AAA4B,iBAASC,OAAT,EAAkB;AAAC;AAA+BrH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,SAA3C,EAAsD,YAAW;AAAE,iBAAOxF,OAAP;AAAiB,SAApF;AAC9E;;;AAA+B3B,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,KAA3C,EAAkD,YAAW;AAAE,iBAAOG,GAAP;AAAa,SAA5E;AAC/B;;;AAA+BtH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,UAA3C,EAAuD,YAAW;AAAE,iBAAOI,QAAP;AAAkB,SAAtF;AAC/B;;;AAA+BvH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,QAA3C,EAAqD,YAAW;AAAE,iBAAOK,QAAP;AAAkB,SAApF;AAC/B;;;AAA+BxH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,aAA3C,EAA0D,YAAW;AAAE,iBAAOM,WAAP;AAAqB,SAA5F;AAC/B;;;AAA+BzH,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,eAA3C,EAA4D,YAAW;AAAE,iBAAOO,aAAP;AAAuB,SAAhG;AAC/B;;;AAA+B1H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,eAA3C,EAA4D,YAAW;AAAE,iBAAOQ,aAAP;AAAuB,SAAhG;AAC/B;;;AAA+B3H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,cAA3C,EAA2D,YAAW;AAAE,iBAAOS,cAAP;AAAwB,SAAhG;AAC/B;;;AAA+B5H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,gBAA3C,EAA6D,YAAW;AAAE,iBAAOU,cAAP;AAAwB,SAAlG;AAC/B;;;AAA+B7H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,aAA3C,EAA0D,YAAW;AAAE,iBAAOW,WAAP;AAAqB,SAA5F;AAC/B;;;AAA+B9H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,wBAA3C,EAAqE,YAAW;AAAE,iBAAOY,sBAAP;AAAgC,SAAlH;AAC/B;;;AAA+B/H,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,WAA3C,EAAwD,YAAW;AAAE,iBAAOa,WAAP;AAAqB,SAA1F;AAC/B;;;AAA+BhI,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,eAA3C,EAA4D,YAAW;AAAE,iBAAOc,aAAP;AAAuB,SAAhG;AAC/B;;;AAA+BjI,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,qCAA3C,EAAkF,YAAW;AAAE,iBAAOe,0BAAP;AAAoC,SAAnI;AAC/B;;;AAAqB,YAAIC,wCAAwC,GAAGnI,mBAAmB,CAAC,EAAD,CAAlE;AACrB;;;AAAqB,YAAIoI,gDAAgD,GAAGpI,mBAAmB,CAACgB,CAApB,CAAsBmH,wCAAtB,CAAvD;AACrB;;;AAAqB,YAAIE,oCAAoC,GAAGrI,mBAAmB,CAAC,EAAD,CAA9D;AACrB;;;AAAqB,YAAIsI,4CAA4C,GAAGtI,mBAAmB,CAACgB,CAApB,CAAsBqH,oCAAtB,CAAnD;AACrB;;;AAAiDrI,QAAAA,mBAAmB,CAACO,CAApB,CAAsB4G,mBAAtB,EAA2C,WAA3C,EAAwD,YAAW;AAAE,iBAAOiB,gDAAgD,CAACjD,CAAxD;AAA4D,SAAjI;;AAIjD,YAAIxD,OAAO,GAAG,QAAd,CAtB8C,CAsBtB;;AAExB,YAAI4G,QAAQ,GAAG,guBAAguBC,KAAhuB,CAAsuB,GAAtuB,CAAf;AAEA,YAAIC,kBAAkB,GAAI,OAAOpG,MAAP,KAAgB,WAAhB,IAA+BA,MAAM,OAArC,IAA6CA,MAAM,OAAN,CAAW,eAAX,CAA9C,IAA8E,MAAvG;AAEA,YAAIqG,qBAAqB,GAAG,OAAOrG,MAAP,KAAgB,WAAhB,GAA8BA,MAAM,OAAN,CAAW,uBAAX,CAA9B,GAAoE,uBAAhG,CA5B8C,CA8B9C;;AACA,YAAIsG,kBAAkB,GAAG;AACxB7F,UAAAA,WAAW,EAAE,CADW;AAExB8F,UAAAA,MAAM,EAAE,CAFgB;AAGxBC,UAAAA,qBAAqB,EAAE,CAHC;AAIxBC,UAAAA,yBAAyB,EAAE,CAJH;AAKxBC,UAAAA,mBAAmB,EAAE,CALG;AAMxBC,UAAAA,kBAAkB,EAAE,CANI;AAOxBC,UAAAA,kBAAkB,EAAE,CAPI;AAQxBC,UAAAA,iBAAiB,EAAE,CARK;AASxBC,UAAAA,oBAAoB,EAAE,CATE;AAUxBC,UAAAA,mBAAmB,EAAE;AAVG,SAAzB;AAcA,YAAIC,WAAW,GAAG,0LAAlB;AAGA,YAAIC,WAAW,GAAG,EAAlB;AAEA;;AACA,YAAIC,GAAG,GAAG,OAAOlC,OAAP,KAAiB,WAAjB,IAAgC,CAACA,OAAO,CAACmC,GAAzC,IAAgDnC,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAuB,YAAjF,CAnD8C,CAqD9C;;AACA,iBAASC,cAAT,GAA0B;AAAE,iBAAO,IAAP;AAAc,SAtDI,CA0D9C;;;AACA,YAAIC,KAAK,GAAGtB,oCAAoC,CAAC,GAAD,CAApC,CAA0C,GAA1C,EAA+C,IAA/C,EAAqDvF,WAAjE;;AACA6G,QAAAA,KAAK,CAACrI,SAAN,CAAgBsI,QAAhB,GAA2BnB,kBAA3B;AACAkB,QAAAA,KAAK,CAACrI,SAAN,CAAgBuI,oBAAhB,GAAuC,KAAvC;AACAF,QAAAA,KAAK,CAACrI,SAAN,CAAgBwI,sBAAhB,GAAyC,KAAzC;AAEAnJ,QAAAA,MAAM,CAACC,cAAP,CAAsB+I,KAAK,CAACrI,SAA5B,EAAuC,MAAvC,EAA+C;AAC9CP,UAAAA,GAAG,EAAE,eAAW;AAAE,mBAAO,KAAKgJ,QAAZ;AAAuB,WADK;AAE9CC,UAAAA,GAAG,EAAE,aAASC,CAAT,EAAY;AAAE,iBAAKF,QAAL,GAAgBE,CAAhB;AAAoB,WAFO;AAG9CpJ,UAAAA,YAAY,EAAC;AAHiC,SAA/C;AAMAF,QAAAA,MAAM,CAACC,cAAP,CAAsB+I,KAAK,CAACrI,SAA5B,EAAuC,OAAvC,EAAgD;AAC/CP,UAAAA,GAAG,EAAE,eAAW;AAAE,mBAAO,KAAKmJ,UAAZ;AAAyB,WADI;AAE/CF,UAAAA,GAAG,EAAE,aAASC,CAAT,EAAY;AAAE,iBAAKC,UAAL,GAAkBD,CAAlB;AAAsB,WAFM;AAG/CpJ,UAAAA,YAAY,EAAC;AAHkC,SAAhD;AAQA,YAAIsJ,YAAY,GAAG9B,oCAAoC,CAAC,SAAD,CAApC,CAAgD+B,KAAnE;;AACA/B,QAAAA,oCAAoC,CAAC,SAAD,CAApC,CAAgD+B,KAAhD,GAAwD,UAAUC,CAAV,EAAa;AACpE,cAAIF,YAAJ,EAAkB;AAAEE,YAAAA,CAAC,GAAGF,YAAY,CAACE,CAAD,CAAhB;AAAsB;;AAC1CA,UAAAA,CAAC,CAACC,OAAF,GAAY3J,MAAZ;AACA0J,UAAAA,CAAC,CAACE,WAAF,GAAgBF,CAAhB;AACA,iBAAOA,CAAP;AACA,SALD;;AAQA,YAAIG,YAAY,GAAGnC,oCAAoC,CAAC,SAAD,CAApC,CAAgDoC,KAAnE;;AACApC,QAAAA,oCAAoC,CAAC,SAAD,CAApC,CAAgDoC,KAAhD,GAAwD,UAAUA,KAAV,EAAiB;AACxE,cAAI,CAACA,KAAK,CAACZ,oBAAX,EAAiC;AAChCY,YAAAA,KAAK,CAACZ,oBAAN,GAA6B,IAA7B;AAEA,gBAAIa,GAAG,GAAGD,KAAK,CAACV,QAAhB;AAAA,gBACCY,KAAK,GAAGF,KAAK,CAACP,UAAN,GAAmBhF,MAAM,CAAC,EAAD,EAAKuF,KAAK,CAACP,UAAX,CADlC;;AAGA,gBAAI,OAAOQ,GAAP,KAAa,UAAjB,EAA6B;AAC5B,kBAAIA,GAAG,CAAChC,qBAAD,CAAH,KAA6B,IAA7B,IAAsCgC,GAAG,CAACpJ,SAAJ,IAAiB,sBAAsBoJ,GAAG,CAACpJ,SAArF,EAAiG;AAChG,oBAAImJ,KAAK,CAACG,QAAN,IAAkBC,MAAM,CAACJ,KAAK,CAACG,QAAP,CAAN,KAAyB,EAA/C,EAAmD;AAAEH,kBAAAA,KAAK,CAACG,QAAN,GAAiB/D,SAAjB;AAA6B;;AAClF,oBAAI4D,KAAK,CAACG,QAAV,EAAoB;AAAED,kBAAAA,KAAK,CAACC,QAAN,GAAiBH,KAAK,CAACG,QAAvB;AAAkC;;AAExD,oBAAI,CAACH,KAAK,CAACX,sBAAX,EAAmC;AAClCgB,kBAAAA,cAAc,CAACL,KAAD,CAAd;AACA;;AACDM,gBAAAA,oBAAoB,CAACN,KAAD,CAApB;AACA;AACD,aAVD,MAWK;AACJ,kBAAIA,KAAK,CAACG,QAAN,IAAkBC,MAAM,CAACJ,KAAK,CAACG,QAAP,CAAN,KAAyB,EAA/C,EAAmD;AAAEH,gBAAAA,KAAK,CAACG,QAAN,GAAiB/D,SAAjB;AAA6B;;AAClF,kBAAI4D,KAAK,CAACG,QAAV,EAAoB;AAAED,gBAAAA,KAAK,CAACC,QAAN,GAAiBH,KAAK,CAACG,QAAvB;AAAkC;;AAExD,kBAAID,KAAK,CAACK,YAAV,EAAwB;AACvB,oBAAI,CAACL,KAAK,CAACvD,KAAP,IAAgBuD,KAAK,CAACvD,KAAN,KAAc,CAAlC,EAAqC;AACpCuD,kBAAAA,KAAK,CAACvD,KAAN,GAAcuD,KAAK,CAACK,YAApB;AACA;;AACD,uBAAOL,KAAK,CAACK,YAAb;AACA;;AAEDC,cAAAA,kBAAkB,CAACR,KAAD,EAAQE,KAAR,CAAlB;AACA;AACD;;AAED,cAAIH,YAAJ,EAAkB;AAAEA,YAAAA,YAAY,CAACC,KAAD,CAAZ;AAAsB;AAC1C,SAlCD;;AAoCA,iBAASM,oBAAT,CAA8BN,KAA9B,EAAqC;AACpC,cAAIC,GAAG,GAAGD,KAAK,CAACV,QAAhB;AAAA,cACC5E,CAAC,GAAGsF,KAAK,CAACP,UADX;AAGAO,UAAAA,KAAK,CAACP,UAAN,GAAmB,EAAnB;;AACA,cAAIQ,GAAG,CAACQ,YAAR,EAAsB;AAAEhG,YAAAA,MAAM,CAACuF,KAAK,CAACP,UAAP,EAAmBQ,GAAG,CAACQ,YAAvB,CAAN;AAA6C;;AACrE,cAAI/F,CAAJ,EAAO;AAAED,YAAAA,MAAM,CAACuF,KAAK,CAACP,UAAP,EAAmB/E,CAAnB,CAAN;AAA8B;AACvC;;AAED,iBAAS8F,kBAAT,CAA4BR,KAA5B,EAAmCtF,CAAnC,EAAsC;AACrC,cAAIgG,cAAJ,EAAoBR,KAApB,EAA2BzK,CAA3B;;AACA,cAAIiF,CAAJ,EAAO;AACN,iBAAKjF,CAAL,IAAUiF,CAAV,EAAa;AAAE,kBAAKgG,cAAc,GAAG9B,WAAW,CAAC+B,IAAZ,CAAiBlL,CAAjB,CAAtB,EAA4C;AAAE;AAAQ;AAAE;;AACvE,gBAAIiL,cAAJ,EAAoB;AACnBR,cAAAA,KAAK,GAAGF,KAAK,CAACP,UAAN,GAAmB,EAA3B;;AACA,mBAAKhK,CAAL,IAAUiF,CAAV,EAAa;AACZ,oBAAIA,CAAC,CAAC5D,cAAF,CAAiBrB,CAAjB,CAAJ,EAAyB;AACxByK,kBAAAA,KAAK,CAAEtB,WAAW,CAAC+B,IAAZ,CAAiBlL,CAAjB,IAAsBA,CAAC,CAACkE,OAAF,CAAU,YAAV,EAAwB,KAAxB,EAA+BiH,WAA/B,EAAtB,GAAqEnL,CAAvE,CAAL,GAAkFiF,CAAC,CAACjF,CAAD,CAAnF;AACA;AACD;AACD;AACD;AACD,SAlJ6C,CAsJ9C;;;AACA,iBAASsH,QAAT,CAAkBiD,KAAlB,EAAyBa,MAAzB,EAAiCC,QAAjC,EAA2C;AAC1C,cAAIC,IAAI,GAAGF,MAAM,IAAIA,MAAM,CAACG,qBAAjB,IAA0CH,MAAM,CAACG,qBAAP,CAA6BC,IAAlF,CAD0C,CAG1C;;AACA,cAAIF,IAAI,IAAIA,IAAI,CAACG,UAAL,KAAkBL,MAA9B,EAAsC;AAAEE,YAAAA,IAAI,GAAG,IAAP;AAAc,WAJZ,CAM1C;;;AACA,cAAI,CAACA,IAAL,EAAW;AAAEA,YAAAA,IAAI,GAAGF,MAAM,CAACV,QAAP,CAAgB,CAAhB,CAAP;AAA4B,WAPC,CAS1C;;;AACA,eAAK,IAAI1K,CAAC,GAACoL,MAAM,CAACM,UAAP,CAAkBhH,MAA7B,EAAqC1E,CAAC,EAAtC,GAA4C;AAC3C,gBAAIoL,MAAM,CAACM,UAAP,CAAkB1L,CAAlB,MAAuBsL,IAA3B,EAAiC;AAChCF,cAAAA,MAAM,CAACO,WAAP,CAAmBP,MAAM,CAACM,UAAP,CAAkB1L,CAAlB,CAAnB;AACA;AACD;;AAED,cAAI0G,GAAG,GAAGyB,oCAAoC,CAAC,QAAD,CAApC,CAA+CoC,KAA/C,EAAsDa,MAAtD,EAA8DE,IAA9D,CAAV;;AACA,cAAIF,MAAJ,EAAY;AAAEA,YAAAA,MAAM,CAACG,qBAAP,GAA+B7E,GAAG,KAAKA,GAAG,CAACkF,UAAJ,IAAkB;AAAEJ,cAAAA,IAAI,EAAE9E;AAAR,aAAvB,CAAlC;AAA0E;;AACxF,cAAI,OAAO2E,QAAP,KAAkB,UAAtB,EAAkC;AAAEA,YAAAA,QAAQ;AAAK;;AACjD,iBAAO3E,GAAG,IAAIA,GAAG,CAACkF,UAAX,IAAyBlF,GAAhC;AACA;;AAGD,YAAImF,eAAe,GAAG,SAAlBA,eAAkB,GAAY,CAAE,CAApC;;AAEAA,QAAAA,eAAe,CAACzK,SAAhB,CAA0B0K,eAA1B,GAA4C,YAAY;AACvD,iBAAO,KAAKC,KAAL,CAAWC,OAAlB;AACA,SAFD;;AAGAH,QAAAA,eAAe,CAACzK,SAAhB,CAA0BsH,MAA1B,GAAmC,UAAUqD,KAAV,EAAiB;AACnD,iBAAOA,KAAK,CAACrB,QAAN,CAAe,CAAf,CAAP;AACA,SAFD;;AAIA,iBAAS1C,0BAAT,CAAoCiE,eAApC,EAAqD1B,KAArD,EAA4D2B,SAA5D,EAAuEb,QAAvE,EAAiF;AAChF,cAAIc,IAAI,GAAGhE,oCAAoC,CAAC,GAAD,CAApC,CAA0C0D,eAA1C,EAA2D;AAAEG,YAAAA,OAAO,EAAEC,eAAe,CAACD;AAA3B,WAA3D,EAAiGzB,KAAjG,CAAX;;AACA,cAAInK,CAAC,GAAGkH,QAAQ,CAAC6E,IAAD,EAAOD,SAAP,CAAhB;;AACA,cAAIb,QAAJ,EAAc;AAAEA,YAAAA,QAAQ,CAACjL,CAAD,CAAR;AAAc;;AAC9B,iBAAOA,CAAC,CAACwL,UAAF,IAAgBxL,CAAC,CAACoL,IAAzB;AACA;;AAGD,iBAAS3D,sBAAT,CAAgCqE,SAAhC,EAA2C;AAC1C,cAAIE,QAAQ,GAAGF,SAAS,CAACX,qBAAV,IAAmCW,SAAS,CAACX,qBAAV,CAAgCC,IAAlF;;AACA,cAAIY,QAAQ,IAAIA,QAAQ,CAACX,UAAT,KAAsBS,SAAtC,EAAiD;AAChD/D,YAAAA,oCAAoC,CAAC,QAAD,CAApC,CAA+CA,oCAAoC,CAAC,GAAD,CAApC,CAA0CqB,cAA1C,CAA/C,EAA0G0C,SAA1G,EAAqHE,QAArH;;AACA,mBAAO,IAAP;AACA;;AACD,iBAAO,KAAP;AACA;;AAID,YAAIC,GAAG,GAAG,EAAV,CA1M8C,CA4M9C;;AACA,YAAIhF,QAAQ,GAAG;AACdiF,UAAAA,GAAG,EAAE,aAAS5B,QAAT,EAAmBjG,EAAnB,EAAuBW,GAAvB,EAA4B;AAChC,gBAAIsF,QAAQ,IAAI,IAAhB,EAAsB;AAAE,qBAAO,IAAP;AAAc;;AACtCA,YAAAA,QAAQ,GAAGrD,QAAQ,CAACkF,OAAT,CAAiB7B,QAAjB,CAAX;;AACA,gBAAItF,GAAG,IAAIA,GAAG,KAAGsF,QAAjB,EAA2B;AAAEjG,cAAAA,EAAE,GAAGA,EAAE,CAACnC,IAAH,CAAQ8C,GAAR,CAAL;AAAoB;;AACjD,mBAAOsF,QAAQ,CAAC4B,GAAT,CAAa7H,EAAb,CAAP;AACA,WANa;AAOdF,UAAAA,OAAO,EAAE,iBAASmG,QAAT,EAAmBjG,EAAnB,EAAuBW,GAAvB,EAA4B;AACpC,gBAAIsF,QAAQ,IAAI,IAAhB,EAAsB;AAAE,qBAAO,IAAP;AAAc;;AACtCA,YAAAA,QAAQ,GAAGrD,QAAQ,CAACkF,OAAT,CAAiB7B,QAAjB,CAAX;;AACA,gBAAItF,GAAG,IAAIA,GAAG,KAAGsF,QAAjB,EAA2B;AAAEjG,cAAAA,EAAE,GAAGA,EAAE,CAACnC,IAAH,CAAQ8C,GAAR,CAAL;AAAoB;;AACjDsF,YAAAA,QAAQ,CAACnG,OAAT,CAAiBE,EAAjB;AACA,WAZa;AAad+H,UAAAA,KAAK,EAAE,eAAS9B,QAAT,EAAmB;AACzB,mBAAOA,QAAQ,IAAIA,QAAQ,CAAChG,MAArB,IAA+B,CAAtC;AACA,WAfa;AAgBd+H,UAAAA,IAAI,EAAE,cAAS/B,QAAT,EAAmB;AACxBA,YAAAA,QAAQ,GAAGrD,QAAQ,CAACkF,OAAT,CAAiB7B,QAAjB,CAAX;;AACA,gBAAIA,QAAQ,CAAChG,MAAT,KAAkB,CAAtB,EAAyB;AAAE,oBAAM,IAAIgI,KAAJ,CAAU,yCAAV,CAAN;AAA6D;;AACxF,mBAAOhC,QAAQ,CAAC,CAAD,CAAf;AACA,WApBa;AAqBd6B,UAAAA,OAAO,EAAE,iBAAS7B,QAAT,EAAmB;AAC3B,gBAAIA,QAAQ,IAAI,IAAhB,EAAsB;AAAE,qBAAO,EAAP;AAAY;;AACpC,mBAAOiC,KAAK,CAACnK,OAAN,IAAiBmK,KAAK,CAACnK,OAAN,CAAckI,QAAd,CAAjB,GAA2CA,QAA3C,GAAsD2B,GAAG,CAACO,MAAJ,CAAWlC,QAAX,CAA7D;AACA;AAxBa,SAAf;AA4BA;;AACA,YAAImC,gBAAJ;;AAGA,iBAASrF,aAAT,CAAuB/B,IAAvB,EAA6B;AAC5B,iBAAOgC,aAAa,CAACnF,IAAd,CAAmB,IAAnB,EAAyBmD,IAAzB,CAAP;AACA;;AAGD,YAAI2B,GAAG,GAAG,EAAV;;AACA,aAAK,IAAIpH,CAAC,GAACqI,QAAQ,CAAC3D,MAApB,EAA4B1E,CAAC,EAA7B,GAAmC;AAClCoH,UAAAA,GAAG,CAACiB,QAAQ,CAACrI,CAAD,CAAT,CAAH,GAAmBwH,aAAa,CAACa,QAAQ,CAACrI,CAAD,CAAT,CAAhC;AACA;;AAED,iBAAS8M,eAAT,CAAyBC,GAAzB,EAA8BC,MAA9B,EAAsC;AACrC,eAAK,IAAIhN,CAAC,GAACgN,MAAM,IAAI,CAArB,EAAwBhN,CAAC,GAAC+M,GAAG,CAACrI,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAC1C,gBAAIwE,GAAG,GAAGuI,GAAG,CAAC/M,CAAD,CAAb;;AACA,gBAAI2M,KAAK,CAACnK,OAAN,CAAcgC,GAAd,CAAJ,EAAwB;AACvBsI,cAAAA,eAAe,CAACtI,GAAD,CAAf;AACA,aAFD,MAGK,IAAIA,GAAG,IAAI,SAAOA,GAAP,MAAa,QAApB,IAAgC,CAACmD,cAAc,CAACnD,GAAD,CAA/C,KAA0DA,GAAG,CAACuH,KAAJ,IAAavH,GAAG,CAACiB,IAAlB,IAA4BjB,GAAG,CAACwF,UAAJ,IAAkBxF,GAAG,CAACqF,QAAlD,IAA+DrF,GAAG,CAACkG,QAA5H,CAAJ,EAA2I;AAC/IqC,cAAAA,GAAG,CAAC/M,CAAD,CAAH,GAASyH,aAAa,CAACjD,GAAG,CAACiB,IAAJ,IAAYjB,GAAG,CAACqF,QAAjB,EAA2BrF,GAAG,CAACuH,KAAJ,IAAavH,GAAG,CAACwF,UAA5C,EAAwDxF,GAAG,CAACkG,QAA5D,CAAtB;AACA;AACD;AACD;;AAED,iBAASuC,oBAAT,CAA8B7M,CAA9B,EAAiC;AAChC,iBAAO,OAAOA,CAAP,KAAW,UAAX,IAAyB,EAAEA,CAAC,CAACgB,SAAF,IAAehB,CAAC,CAACgB,SAAF,CAAYsH,MAA7B,CAAhC;AACA,SArQ6C,CAwQ9C;;;AACA,iBAASwE,sBAAT,CAAgCC,gBAAhC,EAAkD;AACjD,iBAAO5F,WAAW,CAAC;AAClB6F,YAAAA,WAAW,EAAED,gBAAgB,CAACC,WAAjB,IAAgCD,gBAAgB,CAAC7M,IAD5C;AAElBoI,YAAAA,MAAM,EAAE,kBAAW;AAClB,qBAAOyE,gBAAgB,CAAC,KAAKpB,KAAN,EAAa,KAAKC,OAAlB,CAAvB;AACA;AAJiB,WAAD,CAAlB;AAMA;;AAGD,iBAASqB,sBAAT,CAAgCC,IAAhC,EAAsC;AACrC,cAAIC,OAAO,GAAGD,IAAI,CAAC9E,qBAAD,CAAlB;;AACA,cAAI+E,OAAJ,EAAa;AAAE,mBAAOA,OAAO,KAAG,IAAV,GAAiBD,IAAjB,GAAwBC,OAA/B;AAAyC;;AAExDA,UAAAA,OAAO,GAAGL,sBAAsB,CAACI,IAAD,CAAhC;AAEA7M,UAAAA,MAAM,CAACC,cAAP,CAAsB6M,OAAtB,EAA+B/E,qBAA/B,EAAsD;AAAE7H,YAAAA,YAAY,EAAC,IAAf;AAAqBuG,YAAAA,KAAK,EAAC;AAA3B,WAAtD;AACAqG,UAAAA,OAAO,CAACH,WAAR,GAAsBE,IAAI,CAACF,WAA3B;AACAG,UAAAA,OAAO,CAACC,SAAR,GAAoBF,IAAI,CAACE,SAAzB;AACAD,UAAAA,OAAO,CAACvC,YAAR,GAAuBsC,IAAI,CAACtC,YAA5B;AAEAvK,UAAAA,MAAM,CAACC,cAAP,CAAsB4M,IAAtB,EAA4B9E,qBAA5B,EAAmD;AAAE7H,YAAAA,YAAY,EAAC,IAAf;AAAqBuG,YAAAA,KAAK,EAACqG;AAA3B,WAAnD;AAEA,iBAAOA,OAAP;AACA;;AAGD,iBAAS9F,aAAT,GAAyB;AACxB,cAAIgG,IAAI,GAAG,EAAX;AAAA,cAAeC,GAAG,GAAG5I,SAAS,CAACJ,MAA/B;;AACA,iBAAQgJ,GAAG,EAAX;AAAgBD,YAAAA,IAAI,CAAEC,GAAF,CAAJ,GAAc5I,SAAS,CAAE4I,GAAF,CAAvB;AAAhB;;AAEAZ,UAAAA,eAAe,CAACW,IAAD,EAAO,CAAP,CAAf;AACA,iBAAO7C,cAAc,CAACzC,oCAAoC,CAAC,GAAD,CAApC,CAA0CtB,KAA1C,CAAgD,KAAK,CAArD,EAAwD4G,IAAxD,CAAD,CAArB;AACA;;AAGD,iBAAS7C,cAAT,CAAwBL,KAAxB,EAA+B;AAC9BA,UAAAA,KAAK,CAACX,sBAAN,GAA+B,IAA/B;AAEA+D,UAAAA,cAAc,CAACpD,KAAD,CAAd;;AAEA,cAAI0C,oBAAoB,CAAC1C,KAAK,CAACV,QAAP,CAAxB,EAA0C;AACzCU,YAAAA,KAAK,CAACV,QAAN,GAAiBwD,sBAAsB,CAAC9C,KAAK,CAACV,QAAP,CAAvC;AACA;;AAED,cAAI+D,GAAG,GAAGrD,KAAK,CAACP,UAAN,CAAiB4D,GAA3B;AAAA,cACCnI,IAAI,GAAGmI,GAAG,aAAWA,GAAX,CADX;;AAEA,cAAIf,gBAAgB,KAAKpH,IAAI,KAAG,QAAP,IAAmBA,IAAI,KAAG,QAA/B,CAApB,EAA8D;AAC7D8E,YAAAA,KAAK,CAACP,UAAN,CAAiB4D,GAAjB,GAAuBC,oBAAoB,CAACD,GAAD,EAAMf,gBAAN,CAA3C;AACA;;AAEDiB,UAAAA,uBAAuB,CAACvD,KAAD,CAAvB;AAEA,iBAAOA,KAAP;AACA;;AAGD,iBAAS7C,cAAT,CAAwBqG,OAAxB,EAAiChC,KAAjC,EAAwC;AACvC,cAAIrB,QAAQ,GAAG,EAAf;AAAA,cAAmBgD,GAAG,GAAG5I,SAAS,CAACJ,MAAV,GAAmB,CAA5C;;AACA,iBAAQgJ,GAAG,KAAK,CAAhB;AAAoBhD,YAAAA,QAAQ,CAAEgD,GAAF,CAAR,GAAkB5I,SAAS,CAAE4I,GAAG,GAAG,CAAR,CAA3B;AAApB;;AAEA,cAAI,CAAC/F,cAAc,CAACoG,OAAD,CAAnB,EAA8B;AAAE,mBAAOA,OAAP;AAAiB;;AACjD,cAAIC,YAAY,GAAGD,OAAO,CAAC/D,UAAR,IAAsB+D,OAAO,CAAChC,KAAjD;;AACA,cAAIkC,IAAI,GAAG9F,oCAAoC,CAAC,GAAD,CAApC,CACV4F,OAAO,CAAClE,QAAR,IAAoBkE,OAAO,CAACtI,IADlB,EAEVuI,YAFU,EAGVD,OAAO,CAACrD,QAAR,IAAoBsD,YAAY,IAAIA,YAAY,CAACtD,QAHvC,CAAX,CANuC,CAWvC;AACA;;;AACA,cAAIwD,SAAS,GAAG,CAACD,IAAD,EAAOlC,KAAP,CAAhB;;AACA,cAAIrB,QAAQ,IAAIA,QAAQ,CAAChG,MAAzB,EAAiC;AAChCwJ,YAAAA,SAAS,CAACC,IAAV,CAAezD,QAAf;AACA,WAFD,MAGK,IAAIqB,KAAK,IAAIA,KAAK,CAACrB,QAAnB,EAA6B;AACjCwD,YAAAA,SAAS,CAACC,IAAV,CAAepC,KAAK,CAACrB,QAArB;AACA;;AACD,iBAAOE,cAAc,CAACzC,oCAAoC,CAAC,cAAD,CAApC,CAAqDtB,KAArD,CAA2D,KAAK,CAAhE,EAAmEqH,SAAnE,CAAD,CAArB;AACA;;AAGD,iBAASvG,cAAT,CAAwBoG,OAAxB,EAAiC;AAChC,iBAAOA,OAAO,KAAMA,OAAO,YAAYtE,KAApB,IAA8BsE,OAAO,CAACrE,QAAR,KAAmBnB,kBAAtD,CAAd;AACA;;AAGD,iBAASsF,oBAAT,CAA8BvN,IAA9B,EAAoC8N,SAApC,EAA+C;AAC9C,iBAAOA,SAAS,CAACC,WAAV,CAAsB/N,IAAtB,MAAgC8N,SAAS,CAACC,WAAV,CAAsB/N,IAAtB,IAA8B,UAAUgO,QAAV,EAAoB;AACxF,gBAAIF,SAAS,IAAIA,SAAS,CAACG,IAA3B,EAAiC;AAChCH,cAAAA,SAAS,CAACG,IAAV,CAAejO,IAAf,IAAuBgO,QAAvB;;AACA,kBAAIA,QAAQ,KAAG,IAAf,EAAqB;AACpB,uBAAOF,SAAS,CAACC,WAAV,CAAsB/N,IAAtB,CAAP;AACA8N,gBAAAA,SAAS,GAAG,IAAZ;AACA;AACD;AACD,WARM,CAAP;AASA;;AAGD,iBAASN,uBAAT,CAAiCF,GAAjC,EAAsC;AACrC,cAAI/D,QAAQ,GAAG+D,GAAG,CAAC/D,QAAnB;AACA,cAAIG,UAAU,GAAG4D,GAAG,CAAC5D,UAArB;;AAEA,cAAI,CAACA,UAAD,IAAe,OAAOH,QAAP,KAAkB,QAArC,EAA+C;AAAE;AAAS;;AAC1D,cAAIkC,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAI/L,CAAT,IAAcgK,UAAd,EAA0B;AACzB+B,YAAAA,KAAK,CAAC/L,CAAC,CAACmL,WAAF,EAAD,CAAL,GAAyBnL,CAAzB;AACA;;AACD,cAAI+L,KAAK,CAACyC,aAAV,EAAyB;AACxBxE,YAAAA,UAAU,CAACyE,UAAX,GAAwBzE,UAAU,CAAC+B,KAAK,CAACyC,aAAP,CAAlC;AACA,mBAAOxE,UAAU,CAAC+B,KAAK,CAACyC,aAAP,CAAjB;AACA,WAZoC,CAarC;;;AACA,cAAIzC,KAAK,CAAC2C,QAAN,KAAmB7E,QAAQ,KAAG,UAAX,IAA0BA,QAAQ,CAACsB,WAAT,OAAyB,OAAzB,IAAoC,CAAC,gBAAgBD,IAAhB,CAAqBlB,UAAU,CAACvE,IAAhC,CAAlF,CAAJ,EAA+H;AAC9H,gBAAIkJ,UAAU,GAAG5C,KAAK,CAAC6C,OAAN,IAAiB,SAAlC;;AACA,gBAAI,CAAC5E,UAAU,CAAC2E,UAAD,CAAf,EAA6B;AAC5B3E,cAAAA,UAAU,CAAC2E,UAAD,CAAV,GAAyBE,SAAS,CAAC,CAAC7E,UAAU,CAAC2E,UAAD,CAAX,EAAyB3E,UAAU,CAAC+B,KAAK,CAAC2C,QAAP,CAAnC,CAAD,CAAlC;AACA,qBAAO1E,UAAU,CAAC+B,KAAK,CAAC2C,QAAP,CAAjB;AACA;AACD;AACD;;AAGD,iBAASf,cAAT,CAAwBC,GAAxB,EAA6B;AAC5B,cAAI5D,UAAU,GAAG4D,GAAG,CAAC5D,UAArB;;AAEA,cAAI,CAACA,UAAL,EAAiB;AAAE;AAAS;;AAC5B,cAAI8E,EAAE,GAAG9E,UAAU,CAAC+E,SAAX,IAAwB/E,UAAU,SAA3C;;AACA,cAAI8E,EAAJ,EAAQ;AAAE9E,YAAAA,UAAU,CAAC+E,SAAX,GAAuBD,EAAvB;AAA4B;AACtC;;AAGD,iBAAS9J,MAAT,CAAgBwG,IAAhB,EAAsBO,KAAtB,EAA6B;AAC5B,eAAK,IAAIpH,GAAT,IAAgBoH,KAAhB,EAAuB;AACtB,gBAAIA,KAAK,CAAC1K,cAAN,CAAqBsD,GAArB,CAAJ,EAA+B;AAC9B6G,cAAAA,IAAI,CAAC7G,GAAD,CAAJ,GAAYoH,KAAK,CAACpH,GAAD,CAAjB;AACA;AACD;;AACD,iBAAO6G,IAAP;AACA;;AAGD,iBAASwD,cAAT,CAAwB/J,CAAxB,EAA2BC,CAA3B,EAA8B;AAC7B,eAAK,IAAIlF,CAAT,IAAciF,CAAd,EAAiB;AAAE,gBAAI,EAAEjF,CAAC,IAAIkF,CAAP,CAAJ,EAAe;AAAE,qBAAO,IAAP;AAAc;AAAE;;AACpD,eAAK,IAAI+J,GAAT,IAAgB/J,CAAhB,EAAmB;AAAE,gBAAID,CAAC,CAACgK,GAAD,CAAD,KAAS/J,CAAC,CAAC+J,GAAD,CAAd,EAAqB;AAAE,qBAAO,IAAP;AAAc;AAAE;;AAC5D,iBAAO,KAAP;AACA;;AAGD,iBAASrH,WAAT,CAAqBwG,SAArB,EAAgC;AAC/B,iBAAOA,SAAS,IAAIA,SAAS,CAAC5C,IAAvB,IAA+B4C,SAAtC;AACA;;AAGD,iBAASxI,CAAT,GAAY,CAAE;;AAEd,iBAAS2B,WAAT,CAAqB/C,GAArB,EAA0B;AACzB,mBAASsK,EAAT,CAAY/C,KAAZ,EAAmBC,OAAnB,EAA4B;AAC3BkD,YAAAA,OAAO,CAAC,IAAD,CAAP;AACApH,YAAAA,WAAW,CAAC5H,IAAZ,CAAiB,IAAjB,EAAuB6L,KAAvB,EAA8BC,OAA9B,EAAuC5C,WAAvC;AACA+F,YAAAA,gBAAgB,CAACjP,IAAjB,CAAsB,IAAtB,EAA4B6L,KAA5B,EAAmCC,OAAnC;AACA;;AAEDxH,UAAAA,GAAG,GAAGQ,MAAM,CAAC;AAAEpC,YAAAA,WAAW,EAAEkM;AAAf,WAAD,EAAsBtK,GAAtB,CAAZ,CAPyB,CASzB;;AACA,cAAIA,GAAG,CAAC4K,MAAR,EAAgB;AACfC,YAAAA,WAAW,CAAC7K,GAAD,EAAM8K,aAAa,CAAC9K,GAAG,CAAC4K,MAAL,CAAnB,CAAX;AACA;;AACD,cAAI5K,GAAG,CAAC+K,OAAR,EAAiB;AAChBvK,YAAAA,MAAM,CAAC8J,EAAD,EAAKtK,GAAG,CAAC+K,OAAT,CAAN;AACA;;AACD,cAAI/K,GAAG,CAACgJ,SAAR,EAAmB;AAClBsB,YAAAA,EAAE,CAACtB,SAAH,GAAehJ,GAAG,CAACgJ,SAAnB;AACA;;AACD,cAAIhJ,GAAG,CAACwG,YAAR,EAAsB;AACrB8D,YAAAA,EAAE,CAAC9D,YAAH,GAAkBxG,GAAG,CAACwG,YAAtB;AACA;;AACD,cAAIxG,GAAG,CAACgL,eAAR,EAAyB;AACxBV,YAAAA,EAAE,CAAC9D,YAAH,GAAkBxG,GAAG,CAACgL,eAAJ,EAAlB;AACA;;AAED5J,UAAAA,CAAC,CAACxE,SAAF,GAAc0G,WAAW,CAAC1G,SAA1B;AACA0N,UAAAA,EAAE,CAAC1N,SAAH,GAAe4D,MAAM,CAAC,IAAIY,CAAJ,EAAD,EAAUpB,GAAV,CAArB;AAEAsK,UAAAA,EAAE,CAAC1B,WAAH,GAAiB5I,GAAG,CAAC4I,WAAJ,IAAmB,WAApC;AAEA,iBAAO0B,EAAP;AACA,SArc6C,CAwc9C;;;AACA,iBAASQ,aAAT,CAAuBF,MAAvB,EAA+B;AAC9B,cAAIK,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIzP,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACoP,MAAM,CAAC1K,MAAvB,EAA+B1E,CAAC,EAAhC,EAAoC;AACnC,gBAAI0P,KAAK,GAAGN,MAAM,CAACpP,CAAD,CAAlB;;AACA,iBAAK,IAAI2E,GAAT,IAAgB+K,KAAhB,EAAuB;AACtB,kBAAIA,KAAK,CAACrO,cAAN,CAAqBsD,GAArB,KAA6B,OAAO+K,KAAK,CAAC/K,GAAD,CAAZ,KAAoB,UAArD,EAAiE;AAChE,iBAAC8K,KAAK,CAAC9K,GAAD,CAAL,KAAe8K,KAAK,CAAC9K,GAAD,CAAL,GAAW,EAA1B,CAAD,EAAgCwJ,IAAhC,CAAqCuB,KAAK,CAAC/K,GAAD,CAA1C;AACA;AACD;AACD;;AACD,iBAAO8K,KAAP;AACA,SApd6C,CAud9C;;;AACA,iBAASJ,WAAT,CAAqBM,KAArB,EAA4BP,MAA5B,EAAoC;AACnC,eAAK,IAAIzK,GAAT,IAAgByK,MAAhB,EAAwB;AAAE,gBAAIA,MAAM,CAAC/N,cAAP,CAAsBsD,GAAtB,CAAJ,EAAgC;AACzDgL,cAAAA,KAAK,CAAChL,GAAD,CAAL,GAAakK,SAAS,CACrBO,MAAM,CAACzK,GAAD,CAAN,CAAYiI,MAAZ,CAAmB+C,KAAK,CAAChL,GAAD,CAAL,IAAc0H,GAAjC,CADqB,EAErB1H,GAAG,KAAG,iBAAN,IAA2BA,GAAG,KAAG,iBAAjC,IAAsDA,GAAG,KAAG,iBAFvC,CAAtB;AAIA;AAAE;AACH;;AAGD,iBAASuK,OAAT,CAAiB9J,GAAjB,EAAsB;AACrB,eAAK,IAAIpF,CAAT,IAAcoF,GAAd,EAAmB;AAClB,gBAAI2E,CAAC,GAAG3E,GAAG,CAACpF,CAAD,CAAX;;AACA,gBAAI,OAAO+J,CAAP,KAAW,UAAX,IAAyB,CAACA,CAAC,CAAC6F,OAA5B,IAAuC,CAACnH,kBAAkB,CAACpH,cAAnB,CAAkCrB,CAAlC,CAA5C,EAAkF;AACjF,eAACoF,GAAG,CAACpF,CAAD,CAAH,GAAS+J,CAAC,CAACzH,IAAF,CAAO8C,GAAP,CAAV,EAAuBwK,OAAvB,GAAiC,IAAjC;AACA;AACD;AACD;;AAGD,iBAASC,UAAT,CAAoBzK,GAApB,EAAyBjF,CAAzB,EAA4BsN,IAA5B,EAAkC;AACjC,cAAI,OAAOtN,CAAP,KAAW,QAAf,EAAyB;AACxBA,YAAAA,CAAC,GAAGiF,GAAG,CAACxC,WAAJ,CAAgBxB,SAAhB,CAA0BjB,CAA1B,CAAJ;AACA;;AACD,cAAI,OAAOA,CAAP,KAAW,UAAf,EAA2B;AAC1B,mBAAOA,CAAC,CAAC0G,KAAF,CAAQzB,GAAR,EAAaqI,IAAb,CAAP;AACA;AACD;;AAED,iBAASoB,SAAT,CAAmBiB,KAAnB,EAA0BC,cAA1B,EAA0C;AACzC,iBAAO,YAAW;AACjB,gBAAIC,WAAW,GAAGlL,SAAlB;AACA,gBAAImL,MAAM,GAAG,IAAb;AAEA,gBAAIC,GAAJ;;AACA,iBAAK,IAAIlQ,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC8P,KAAK,CAACpL,MAAtB,EAA8B1E,CAAC,EAA/B,EAAmC;AAClC,kBAAImQ,CAAC,GAAGN,UAAU,CAACI,MAAD,EAASH,KAAK,CAAC9P,CAAD,CAAd,EAAmBgQ,WAAnB,CAAlB;;AAEA,kBAAID,cAAc,IAAII,CAAC,IAAE,IAAzB,EAA+B;AAC9B,oBAAI,CAACD,GAAL,EAAU;AAAEA,kBAAAA,GAAG,GAAG,EAAN;AAAW;;AACvB,qBAAK,IAAIvL,GAAT,IAAgBwL,CAAhB,EAAmB;AAAE,sBAAIA,CAAC,CAAC9O,cAAF,CAAiBsD,GAAjB,CAAJ,EAA2B;AAC/CuL,oBAAAA,GAAG,CAACvL,GAAD,CAAH,GAAWwL,CAAC,CAACxL,GAAD,CAAZ;AACA;AAAE;AACH,eALD,MAMK,IAAI,OAAOwL,CAAP,KAAW,WAAf,EAA4B;AAAED,gBAAAA,GAAG,GAAGC,CAAN;AAAU;AAC7C;;AACD,mBAAOD,GAAP;AACA,WAjBD;AAkBA;;AAGD,iBAASf,gBAAT,CAA0BpD,KAA1B,EAAiCC,OAAjC,EAA0C;AACzCoE,UAAAA,SAAS,CAAClQ,IAAV,CAAe,IAAf,EAAqB6L,KAArB,EAA4BC,OAA5B;AACA,eAAKpD,yBAAL,GAAiCiG,SAAS,CAAC,CAACuB,SAAD,EAAY,KAAKxH,yBAAL,IAAkC,2BAA9C,CAAD,CAA1C;AACA,eAAKF,MAAL,GAAcmG,SAAS,CAAC,CAACuB,SAAD,EAAYC,YAAZ,EAA0B,KAAK3H,MAAL,IAAe,QAAzC,EAAmD4H,WAAnD,CAAD,CAAvB;AACA;;AAGD,iBAASF,SAAT,CAAmBrE,KAAnB,EAA0BC,OAA1B,EAAmC;AAClC,cAAI,CAACD,KAAL,EAAY;AAAE;AAAS,WADW,CAGlC;;;AACA,cAAI3L,CAAC,GAAG2L,KAAK,CAACrB,QAAd;;AACA,cAAItK,CAAC,IAAIuM,KAAK,CAACnK,OAAN,CAAcpC,CAAd,CAAL,IAAyBA,CAAC,CAACsE,MAAF,KAAW,CAAxC,EAA2C;AAC1CqH,YAAAA,KAAK,CAACrB,QAAN,GAAiBtK,CAAC,CAAC,CAAD,CAAlB,CAD0C,CAG1C;;AACA,gBAAI2L,KAAK,CAACrB,QAAN,IAAkB,SAAOqB,KAAK,CAACrB,QAAb,MAAwB,QAA9C,EAAwD;AACvDqB,cAAAA,KAAK,CAACrB,QAAN,CAAehG,MAAf,GAAwB,CAAxB;AACAqH,cAAAA,KAAK,CAACrB,QAAN,CAAe,CAAf,IAAoBqB,KAAK,CAACrB,QAA1B;AACA;AACD,WAbiC,CAelC;;;AACA,cAAIrB,GAAJ,EAAS;AACR,gBAAIkH,IAAI,GAAG,OAAO,IAAP,KAAc,UAAd,GAA2B,IAA3B,GAAkC,KAAK3N,WAAlD;AAAA,gBACC4K,SAAS,GAAG,KAAKA,SAAL,IAAkB+C,IAAI,CAAC/C,SADpC;AAEA,gBAAIJ,WAAW,GAAG,KAAKA,WAAL,IAAoBmD,IAAI,CAACjQ,IAA3C;;AAEA,gBAAIkN,SAAJ,EAAe;AACdtF,cAAAA,gDAAgD,CAACjD,CAAjD,CAAmDuL,cAAnD,CAAkEhD,SAAlE,EAA6EzB,KAA7E,EAAoF,MAApF,EAA4FqB,WAA5F;AACA;AACD;AACD;;AAGD,iBAASiD,YAAT,CAAsBtE,KAAtB,EAA6B;AAC5Bc,UAAAA,gBAAgB,GAAG,IAAnB;AACA;;AAED,iBAASyD,WAAT,GAAuB;AACtB,cAAIzD,gBAAgB,KAAG,IAAvB,EAA6B;AAC5BA,YAAAA,gBAAgB,GAAG,IAAnB;AACA;AACD;;AAID,iBAAS/E,WAAT,CAAqBiE,KAArB,EAA4BC,OAA5B,EAAqCyE,IAArC,EAA2C;AAC1CtI,UAAAA,oCAAoC,CAAC,WAAD,CAApC,CAAkDjI,IAAlD,CAAuD,IAAvD,EAA6D6L,KAA7D,EAAoEC,OAApE;;AACA,eAAK0E,KAAL,GAAa,KAAKC,eAAL,GAAuB,KAAKA,eAAL,EAAvB,GAAgD,EAA7D;AACA,eAAKpC,IAAL,GAAY,EAAZ;AACA,eAAKF,WAAL,GAAmB,EAAnB;;AACA,cAAIoC,IAAI,KAAGrH,WAAX,EAAwB;AACvB+F,YAAAA,gBAAgB,CAACjP,IAAjB,CAAsB,IAAtB,EAA4B6L,KAA5B,EAAmCC,OAAnC;AACA;AACD;;AACDhH,QAAAA,MAAM,CAAC8C,WAAW,CAAC1G,SAAZ,GAAwB,IAAI+G,oCAAoC,CAAC,WAAD,CAAxC,EAAzB,EAAkF;AACvFvF,UAAAA,WAAW,EAAEkF,WAD0E;AAGvF8I,UAAAA,gBAAgB,EAAE,EAHqE;AAKvFC,UAAAA,YAAY,EAAE,sBAASH,KAAT,EAAgBrF,QAAhB,EAA0B;AACvC,gBAAI4E,MAAM,GAAG,IAAb;AAEA,iBAAKa,QAAL,CAAcJ,KAAd,EAAqBrF,QAArB;;AACA,iBAAK,IAAIrL,CAAT,IAAciQ,MAAM,CAACS,KAArB,EAA4B;AAC3B,kBAAI,EAAE1Q,CAAC,IAAI0Q,KAAP,CAAJ,EAAmB;AAClB,uBAAOT,MAAM,CAACS,KAAP,CAAa1Q,CAAb,CAAP;AACA;AACD;AACD,WAdsF;AAgBvF+Q,UAAAA,UAAU,EAAE,sBAAW;AACtB,mBAAO,KAAKvF,IAAZ;AACA,WAlBsF;AAoBvFwF,UAAAA,SAAS,EAAE,qBAAW;AACrB,mBAAO,CAAC,CAAC,KAAKxF,IAAd;AACA;AAtBsF,SAAlF,CAAN;;AA2BA,iBAASzD,aAAT,CAAuBgE,KAAvB,EAA8BC,OAA9B,EAAuC;AACtClE,UAAAA,WAAW,CAAC5H,IAAZ,CAAiB,IAAjB,EAAuB6L,KAAvB,EAA8BC,OAA9B;AACA;;AACDpG,QAAAA,CAAC,CAACxE,SAAF,GAAc0G,WAAW,CAAC1G,SAA1B;AACA2G,QAAAA,aAAa,CAAC3G,SAAd,GAA0B,IAAIwE,CAAJ,EAA1B;AACAmC,QAAAA,aAAa,CAAC3G,SAAd,CAAwB6P,oBAAxB,GAA+C,IAA/C;;AACAlJ,QAAAA,aAAa,CAAC3G,SAAd,CAAwBuH,qBAAxB,GAAgD,UAASoD,KAAT,EAAgB2E,KAAhB,EAAuB;AACtE,iBAAO1B,cAAc,CAAC,KAAKjD,KAAN,EAAaA,KAAb,CAAd,IAAqCiD,cAAc,CAAC,KAAK0B,KAAN,EAAaA,KAAb,CAA1D;AACA,SAFD;;AAMA,YAAIQ,KAAK,GAAG;AACXzP,UAAAA,OAAO,EAAEA,OADE;AAEX2F,UAAAA,GAAG,EAAEA,GAFM;AAGX+J,UAAAA,SAAS,EAAEjJ,gDAAgD,CAACjD,CAHjD;AAIXoC,UAAAA,QAAQ,EAAEA,QAJC;AAKXqB,UAAAA,MAAM,EAAEpB,QALG;AAMXC,UAAAA,WAAW,EAAEA,WANF;AAOXC,UAAAA,aAAa,EAAEA,aAPJ;AAQXC,UAAAA,aAAa,EAAEA,aARJ;AASX2J,UAAAA,YAAY,EAAE1J,cATH;AAUXC,UAAAA,cAAc,EAAEA,cAVL;AAWXC,UAAAA,WAAW,EAAEA,WAXF;AAYXC,UAAAA,sBAAsB,EAAEA,sBAZb;AAaXwJ,UAAAA,SAAS,EAAEvJ,WAbA;AAcXC,UAAAA,aAAa,EAAEA,aAdJ;AAeXuJ,UAAAA,mCAAmC,EAAEtJ;AAf1B,SAAZ;AAkBA;;AAA6Bf,QAAAA,mBAAmB,CAAC,SAAD,CAAnB,GAAkCiK,KAAlC;AAG7B;AAA4B,OA/nBA,EA+nBChR,IA/nBD,CA+nBM+G,mBA/nBN,EA+nB2BnH,mBAAmB,CAAC,CAAD,CA/nB9C,CAAD;AAioB3B;AAAO,KA/kCG;AAglCV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAI,CAAChO,QAAQ,CAACgO,EAAD,CAAb,EAAmB,MAAMC,SAAS,CAACD,EAAE,GAAG,oBAAN,CAAf;AACnB,eAAOA,EAAP;AACD,OAHD;AAMA;;AAAO,KA1lCG;AA2lCV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAI4R,cAAc,GAAG5R,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAI6R,WAAW,GAAG7R,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI8R,EAAE,GAAGnR,MAAM,CAACC,cAAhB;AAEAlB,MAAAA,OAAO,CAACqS,CAAR,GAAY/R,mBAAmB,CAAC,CAAD,CAAnB,GAAyBW,MAAM,CAACC,cAAhC,GAAiD,SAASA,cAAT,CAAwBoR,CAAxB,EAA2B5L,CAA3B,EAA8B6L,UAA9B,EAA0C;AACrGN,QAAAA,QAAQ,CAACK,CAAD,CAAR;AACA5L,QAAAA,CAAC,GAAGyL,WAAW,CAACzL,CAAD,EAAI,IAAJ,CAAf;AACAuL,QAAAA,QAAQ,CAACM,UAAD,CAAR;AACA,YAAIL,cAAJ,EAAoB,IAAI;AACtB,iBAAOE,EAAE,CAACE,CAAD,EAAI5L,CAAJ,EAAO6L,UAAP,CAAT;AACD,SAFmB,CAElB,OAAO5H,CAAP,EAAU;AAAE;AAAa;AAC3B,YAAI,SAAS4H,UAAT,IAAuB,SAASA,UAApC,EAAgD,MAAMP,SAAS,CAAC,0BAAD,CAAf;AAChD,YAAI,WAAWO,UAAf,EAA2BD,CAAC,CAAC5L,CAAD,CAAD,GAAO6L,UAAU,CAAC7K,KAAlB;AAC3B,eAAO4K,CAAP;AACD,OAVD;AAaA;AAAO,KAhnCG;AAinCV;;AACA;AAAO,cAASrS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,CAACM,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AACpD,eAAOW,MAAM,CAACC,cAAP,CAAsB,EAAtB,EAA0B,GAA1B,EAA+B;AAAEG,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO,CAAP;AAAW;AAAhC,SAA/B,EAAmEoE,CAAnE,IAAwE,CAA/E;AACD,OAFiB,CAAlB;AAKA;AAAO,KA1nCG;AA2nCV;;AACA;AAAO,cAASxF,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACA,UAAI2H,OAAO,GAAG1H,MAAM,CAACD,OAAP,GAAiB,EAA/B,CAHiC,CAKjC;AACA;AACA;AACA;;AAEA,UAAIwS,gBAAJ;AACA,UAAIC,kBAAJ;;AAEA,eAASC,gBAAT,GAA4B;AACxB,cAAM,IAAIxF,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,eAASyF,mBAAT,GAAgC;AAC5B,cAAM,IAAIzF,KAAJ,CAAU,mCAAV,CAAN;AACH;;AACA,mBAAY;AACT,YAAI;AACA,cAAI,OAAO0F,UAAP,KAAsB,UAA1B,EAAsC;AAClCJ,YAAAA,gBAAgB,GAAGI,UAAnB;AACH,WAFD,MAEO;AACHJ,YAAAA,gBAAgB,GAAGE,gBAAnB;AACH;AACJ,SAND,CAME,OAAO/H,CAAP,EAAU;AACR6H,UAAAA,gBAAgB,GAAGE,gBAAnB;AACH;;AACD,YAAI;AACA,cAAI,OAAOG,YAAP,KAAwB,UAA5B,EAAwC;AACpCJ,YAAAA,kBAAkB,GAAGI,YAArB;AACH,WAFD,MAEO;AACHJ,YAAAA,kBAAkB,GAAGE,mBAArB;AACH;AACJ,SAND,CAME,OAAOhI,CAAP,EAAU;AACR8H,UAAAA,kBAAkB,GAAGE,mBAArB;AACH;AACJ,OAnBA,GAAD;;AAoBA,eAASG,UAAT,CAAoBC,GAApB,EAAyB;AACrB,YAAIP,gBAAgB,KAAKI,UAAzB,EAAqC;AACjC;AACA,iBAAOA,UAAU,CAACG,GAAD,EAAM,CAAN,CAAjB;AACH,SAJoB,CAKrB;;;AACA,YAAI,CAACP,gBAAgB,KAAKE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEI,UAApE,EAAgF;AAC5EJ,UAAAA,gBAAgB,GAAGI,UAAnB;AACA,iBAAOA,UAAU,CAACG,GAAD,EAAM,CAAN,CAAjB;AACH;;AACD,YAAI;AACA;AACA,iBAAOP,gBAAgB,CAACO,GAAD,EAAM,CAAN,CAAvB;AACH,SAHD,CAGE,OAAMpI,CAAN,EAAQ;AACN,cAAI;AACA;AACA,mBAAO6H,gBAAgB,CAAC9R,IAAjB,CAAsB,IAAtB,EAA4BqS,GAA5B,EAAiC,CAAjC,CAAP;AACH,WAHD,CAGE,OAAMpI,CAAN,EAAQ;AACN;AACA,mBAAO6H,gBAAgB,CAAC9R,IAAjB,CAAsB,IAAtB,EAA4BqS,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;;AACD,eAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,YAAIR,kBAAkB,KAAKI,YAA3B,EAAyC;AACrC;AACA,iBAAOA,YAAY,CAACI,MAAD,CAAnB;AACH,SAJ4B,CAK7B;;;AACA,YAAI,CAACR,kBAAkB,KAAKE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuEI,YAA3E,EAAyF;AACrFJ,UAAAA,kBAAkB,GAAGI,YAArB;AACA,iBAAOA,YAAY,CAACI,MAAD,CAAnB;AACH;;AACD,YAAI;AACA;AACA,iBAAOR,kBAAkB,CAACQ,MAAD,CAAzB;AACH,SAHD,CAGE,OAAOtI,CAAP,EAAS;AACP,cAAI;AACA;AACA,mBAAO8H,kBAAkB,CAAC/R,IAAnB,CAAwB,IAAxB,EAA8BuS,MAA9B,CAAP;AACH,WAHD,CAGE,OAAOtI,CAAP,EAAS;AACP;AACA;AACA,mBAAO8H,kBAAkB,CAAC/R,IAAnB,CAAwB,IAAxB,EAA8BuS,MAA9B,CAAP;AACH;AACJ;AAIJ;;AACD,UAAIC,KAAK,GAAG,EAAZ;AACA,UAAIC,QAAQ,GAAG,KAAf;AACA,UAAIC,YAAJ;AACA,UAAIC,UAAU,GAAG,CAAC,CAAlB;;AAEA,eAASC,eAAT,GAA2B;AACvB,YAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;;AACDD,QAAAA,QAAQ,GAAG,KAAX;;AACA,YAAIC,YAAY,CAAClO,MAAjB,EAAyB;AACrBgO,UAAAA,KAAK,GAAGE,YAAY,CAAChG,MAAb,CAAoB8F,KAApB,CAAR;AACH,SAFD,MAEO;AACHG,UAAAA,UAAU,GAAG,CAAC,CAAd;AACH;;AACD,YAAIH,KAAK,CAAChO,MAAV,EAAkB;AACdqO,UAAAA,UAAU;AACb;AACJ;;AAED,eAASA,UAAT,GAAsB;AAClB,YAAIJ,QAAJ,EAAc;AACV;AACH;;AACD,YAAIK,OAAO,GAAGV,UAAU,CAACQ,eAAD,CAAxB;AACAH,QAAAA,QAAQ,GAAG,IAAX;AAEA,YAAIjF,GAAG,GAAGgF,KAAK,CAAChO,MAAhB;;AACA,eAAMgJ,GAAN,EAAW;AACPkF,UAAAA,YAAY,GAAGF,KAAf;AACAA,UAAAA,KAAK,GAAG,EAAR;;AACA,iBAAO,EAAEG,UAAF,GAAenF,GAAtB,EAA2B;AACvB,gBAAIkF,YAAJ,EAAkB;AACdA,cAAAA,YAAY,CAACC,UAAD,CAAZ,CAAyBI,GAAzB;AACH;AACJ;;AACDJ,UAAAA,UAAU,GAAG,CAAC,CAAd;AACAnF,UAAAA,GAAG,GAAGgF,KAAK,CAAChO,MAAZ;AACH;;AACDkO,QAAAA,YAAY,GAAG,IAAf;AACAD,QAAAA,QAAQ,GAAG,KAAX;AACAH,QAAAA,eAAe,CAACQ,OAAD,CAAf;AACH;;AAED7L,MAAAA,OAAO,CAAC+L,QAAR,GAAmB,UAAUX,GAAV,EAAe;AAC9B,YAAI9E,IAAI,GAAG,IAAId,KAAJ,CAAU7H,SAAS,CAACJ,MAAV,GAAmB,CAA7B,CAAX;;AACA,YAAII,SAAS,CAACJ,MAAV,GAAmB,CAAvB,EAA0B;AACtB,eAAK,IAAI1E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AACvCyN,YAAAA,IAAI,CAACzN,CAAC,GAAG,CAAL,CAAJ,GAAc8E,SAAS,CAAC9E,CAAD,CAAvB;AACH;AACJ;;AACD0S,QAAAA,KAAK,CAACvE,IAAN,CAAW,IAAIgF,IAAJ,CAASZ,GAAT,EAAc9E,IAAd,CAAX;;AACA,YAAIiF,KAAK,CAAChO,MAAN,KAAiB,CAAjB,IAAsB,CAACiO,QAA3B,EAAqC;AACjCL,UAAAA,UAAU,CAACS,UAAD,CAAV;AACH;AACJ,OAXD,CAvIiC,CAoJjC;;;AACA,eAASI,IAAT,CAAcZ,GAAd,EAAmBa,KAAnB,EAA0B;AACtB,aAAKb,GAAL,GAAWA,GAAX;AACA,aAAKa,KAAL,GAAaA,KAAb;AACH;;AACDD,MAAAA,IAAI,CAAC/R,SAAL,CAAe6R,GAAf,GAAqB,YAAY;AAC7B,aAAKV,GAAL,CAAS1L,KAAT,CAAe,IAAf,EAAqB,KAAKuM,KAA1B;AACH,OAFD;;AAGAjM,MAAAA,OAAO,CAACkM,KAAR,GAAgB,SAAhB;AACAlM,MAAAA,OAAO,CAACmM,OAAR,GAAkB,IAAlB;AACAnM,MAAAA,OAAO,CAACmC,GAAR,GAAc,EAAd;AACAnC,MAAAA,OAAO,CAACoM,IAAR,GAAe,EAAf;AACApM,MAAAA,OAAO,CAAC1F,OAAR,GAAkB,EAAlB,CAhKiC,CAgKX;;AACtB0F,MAAAA,OAAO,CAACqM,QAAR,GAAmB,EAAnB;;AAEA,eAASC,IAAT,GAAgB,CAAE;;AAElBtM,MAAAA,OAAO,CAACuM,EAAR,GAAaD,IAAb;AACAtM,MAAAA,OAAO,CAACwM,WAAR,GAAsBF,IAAtB;AACAtM,MAAAA,OAAO,CAACyM,IAAR,GAAeH,IAAf;AACAtM,MAAAA,OAAO,CAAC0M,GAAR,GAAcJ,IAAd;AACAtM,MAAAA,OAAO,CAAC2M,cAAR,GAAyBL,IAAzB;AACAtM,MAAAA,OAAO,CAAC4M,kBAAR,GAA6BN,IAA7B;AACAtM,MAAAA,OAAO,CAAC6M,IAAR,GAAeP,IAAf;AACAtM,MAAAA,OAAO,CAAC8M,eAAR,GAA0BR,IAA1B;AACAtM,MAAAA,OAAO,CAAC+M,mBAAR,GAA8BT,IAA9B;;AAEAtM,MAAAA,OAAO,CAACgN,SAAR,GAAoB,UAAU7T,IAAV,EAAgB;AAAE,eAAO,EAAP;AAAW,OAAjD;;AAEA6G,MAAAA,OAAO,CAACiN,OAAR,GAAkB,UAAU9T,IAAV,EAAgB;AAC9B,cAAM,IAAIoM,KAAJ,CAAU,kCAAV,CAAN;AACH,OAFD;;AAIAvF,MAAAA,OAAO,CAACkN,GAAR,GAAc,YAAY;AAAE,eAAO,GAAP;AAAY,OAAxC;;AACAlN,MAAAA,OAAO,CAACmN,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,cAAM,IAAI7H,KAAJ,CAAU,gCAAV,CAAN;AACH,OAFD;;AAGAvF,MAAAA,OAAO,CAACqN,KAAR,GAAgB,YAAW;AAAE,eAAO,CAAP;AAAW,OAAxC;AAGA;;AAAO,KAxzCG;AAyzCV;;AACA;AAAO,cAAS/U,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAO,SAAOA,EAAP,MAAc,QAAd,GAAyBA,EAAE,KAAK,IAAhC,GAAuC,OAAOA,EAAP,KAAc,UAA5D;AACD,OAFD;AAKA;;AAAO,KAj0CG;AAk0CV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI8R,EAAE,GAAG9R,mBAAmB,CAAC,CAAD,CAA5B;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,GAAyB,UAAUoB,MAAV,EAAkByD,GAAlB,EAAuBuC,KAAvB,EAA8B;AACtE,eAAO0K,EAAE,CAACC,CAAH,CAAK3Q,MAAL,EAAayD,GAAb,EAAkB8P,UAAU,CAAC,CAAD,EAAIvN,KAAJ,CAA5B,CAAP;AACD,OAFgB,GAEb,UAAUhG,MAAV,EAAkByD,GAAlB,EAAuBuC,KAAvB,EAA8B;AAChChG,QAAAA,MAAM,CAACyD,GAAD,CAAN,GAAcuC,KAAd;AACA,eAAOhG,MAAP;AACD,OALD;AAQA;AAAO,KA/0CG;AAg1CV;;AACA;AAAO,cAASzB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAI6B,cAAc,GAAG,GAAGA,cAAxB;;AACA5B,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc5M,GAAd,EAAmB;AAClC,eAAOtD,cAAc,CAACnB,IAAf,CAAoBqR,EAApB,EAAwB5M,GAAxB,CAAP;AACD,OAFD;AAKA;;AAAO,KAz1CG;AA01CV;;AACA;AAAO,cAASlF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUiF,EAAV,EAAckQ,IAAd,EAAoBjQ,MAApB,EAA4B;AAC3CgQ,QAAAA,SAAS,CAACjQ,EAAD,CAAT;AACA,YAAIkQ,IAAI,KAAKhO,SAAb,EAAwB,OAAOlC,EAAP;;AACxB,gBAAQC,MAAR;AACE,eAAK,CAAL;AAAQ,mBAAO,UAAUO,CAAV,EAAa;AAC1B,qBAAOR,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAc1P,CAAd,CAAP;AACD,aAFO;;AAGR,eAAK,CAAL;AAAQ,mBAAO,UAAUA,CAAV,EAAaC,CAAb,EAAgB;AAC7B,qBAAOT,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAc1P,CAAd,EAAiBC,CAAjB,CAAP;AACD,aAFO;;AAGR,eAAK,CAAL;AAAQ,mBAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB9E,CAAhB,EAAmB;AAChC,qBAAOqE,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAc1P,CAAd,EAAiBC,CAAjB,EAAoB9E,CAApB,CAAP;AACD,aAFO;AAPV;;AAWA,eAAO;AAAU;AAAe;AAC9B,iBAAOqE,EAAE,CAACoC,KAAH,CAAS8N,IAAT,EAAe7P,SAAf,CAAP;AACD,SAFD;AAGD,OAjBD;AAoBA;;AAAO,KAn3CG;AAo3CV;;AACA;AAAO,cAASrF,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoV,IAAV,EAAgB;AAC/B,YAAI;AACF,iBAAO,CAAC,CAACA,IAAI,EAAb;AACD,SAFD,CAEE,OAAOzK,CAAP,EAAU;AACV,iBAAO,IAAP;AACD;AACF,OAND;AASA;;AAAO,KAh4CG;AAi4CV;;AACA;AAAO,cAAS1K,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,EAAjB;AAGA;AAAO,KAv4CG;AAw4CV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI+U,OAAO,GAAG/U,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIgV,OAAO,GAAGhV,mBAAmB,CAAC,EAAD,CAAjC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOsD,OAAO,CAACC,OAAO,CAACvD,EAAD,CAAR,CAAd;AACD,OAFD;AAKA;;AAAO,KAn5CG;AAo5CV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIgV,OAAO,GAAGhV,mBAAmB,CAAC,EAAD,CAAjC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAO9Q,MAAM,CAACqU,OAAO,CAACvD,EAAD,CAAR,CAAb;AACD,OAFD;AAKA;;AAAO,KA95CG;AA+5CV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0D,MAAM,GAAG1D,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAIiV,oBAAoB,GAAG,OAA3B;AACA,UAAIC,sBAAsB,GAAG,KAA7B;AACA,UAAIC,yBAAyB,GAAG,CAAhC;AAEA,UAAIC,2BAA2B,GAAG,MAAlC;AACA,UAAIC,mBAAmB,GAAG,GAA1B,CATsD,CAWtD;;AACA,UAAIC,YAAY,GAAG,WAAnB;AACA,UAAIC,cAAc,GAAG,CACnB,eADmB,EACF;AACjB,qBAFmB,EAEF;AACjB,qBAHmB,CAGH;AAHG,OAArB;AAMA,UAAIC,cAAc,GAAG,UAArB;AACA,UAAIC,gBAAgB,GAAG,CACrB,cADqB,EACL;AAChB,oBAFqB,EAEL;AAChB,oBAHqB,CAGN;AAHM,OAAvB,CApBsD,CA0BtD;;AACA,UAAIC,YAAY,GAAG,YAAnB;AACA,UAAIC,aAAa,GAAG,aAApB;AACA,UAAIC,cAAc,GAAG,sBAArB;AACA,UAAIC,aAAa,GAAG,cAApB;AACA,UAAIC,cAAc,GAAG,uBAArB,CA/BsD,CAiCtD;;AACA,UAAIC,YAAY,GAAG,qBAAnB;AACA,UAAIC,cAAc,GAAG,8BAArB;AACA,UAAIC,gBAAgB,GAAG,uCAAvB,CApCsD,CAsCtD;;AACA,UAAIC,kBAAkB,GAAG,YAAzB;AACA,UAAIC,mBAAmB,GAAG,OAA1B;AACA,UAAIC,oBAAoB,GAAG,iBAA3B;AACA,UAAIC,sBAAsB,GAAG,0BAA7B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAASC,KAAT,CAAgBC,QAAhB,EAA0BC,YAA1B,EAAwC;AACtC,YAAI9S,MAAM,CAAC6S,QAAD,CAAV,EAAsB;AACpB;AACA,iBAAO,IAAIE,IAAJ,CAASF,QAAQ,CAACG,OAAT,EAAT,CAAP;AACD,SAHD,MAGO,IAAI,OAAOH,QAAP,KAAoB,QAAxB,EAAkC;AACvC,iBAAO,IAAIE,IAAJ,CAASF,QAAT,CAAP;AACD;;AAED,YAAII,OAAO,GAAGH,YAAY,IAAI,EAA9B;AACA,YAAII,gBAAgB,GAAGD,OAAO,CAACC,gBAA/B;;AACA,YAAIA,gBAAgB,IAAI,IAAxB,EAA8B;AAC5BA,UAAAA,gBAAgB,GAAGzB,yBAAnB;AACD,SAFD,MAEO;AACLyB,UAAAA,gBAAgB,GAAGC,MAAM,CAACD,gBAAD,CAAzB;AACD;;AAED,YAAIE,WAAW,GAAGC,eAAe,CAACR,QAAD,CAAjC;AAEA,YAAIS,eAAe,GAAGC,SAAS,CAACH,WAAW,CAACI,IAAb,EAAmBN,gBAAnB,CAA/B;AACA,YAAIO,IAAI,GAAGH,eAAe,CAACG,IAA3B;AACA,YAAIC,cAAc,GAAGJ,eAAe,CAACI,cAArC;AAEA,YAAIF,IAAI,GAAGG,SAAS,CAACD,cAAD,EAAiBD,IAAjB,CAApB;;AAEA,YAAID,IAAJ,EAAU;AACR,cAAII,SAAS,GAAGJ,IAAI,CAACR,OAAL,EAAhB;AACA,cAAIa,IAAI,GAAG,CAAX;AACA,cAAIrK,MAAJ;;AAEA,cAAI4J,WAAW,CAACS,IAAhB,EAAsB;AACpBA,YAAAA,IAAI,GAAGC,SAAS,CAACV,WAAW,CAACS,IAAb,CAAhB;AACD;;AAED,cAAIT,WAAW,CAACW,QAAhB,EAA0B;AACxBvK,YAAAA,MAAM,GAAGwK,aAAa,CAACZ,WAAW,CAACW,QAAb,CAAtB;AACD,WAFD,MAEO;AACL;AACAvK,YAAAA,MAAM,GAAG,IAAIuJ,IAAJ,CAASa,SAAS,GAAGC,IAArB,EAA2BI,iBAA3B,EAAT;AACAzK,YAAAA,MAAM,GAAG,IAAIuJ,IAAJ,CAASa,SAAS,GAAGC,IAAZ,GAAmBrK,MAAM,GAAGgI,sBAArC,EAA6DyC,iBAA7D,EAAT;AACD;;AAED,iBAAO,IAAIlB,IAAJ,CAASa,SAAS,GAAGC,IAAZ,GAAmBrK,MAAM,GAAGgI,sBAArC,CAAP;AACD,SAlBD,MAkBO;AACL,iBAAO,IAAIuB,IAAJ,CAASF,QAAT,CAAP;AACD;AACF;;AAED,eAASQ,eAAT,CAA0Ba,UAA1B,EAAsC;AACpC,YAAId,WAAW,GAAG,EAAlB;AACA,YAAIxD,KAAK,GAAGsE,UAAU,CAACpP,KAAX,CAAiB4M,2BAAjB,CAAZ;AACA,YAAIyC,UAAJ;;AAEA,YAAIxC,mBAAmB,CAACjK,IAApB,CAAyBkI,KAAK,CAAC,CAAD,CAA9B,CAAJ,EAAwC;AACtCwD,UAAAA,WAAW,CAACI,IAAZ,GAAmB,IAAnB;AACAW,UAAAA,UAAU,GAAGvE,KAAK,CAAC,CAAD,CAAlB;AACD,SAHD,MAGO;AACLwD,UAAAA,WAAW,CAACI,IAAZ,GAAmB5D,KAAK,CAAC,CAAD,CAAxB;AACAuE,UAAAA,UAAU,GAAGvE,KAAK,CAAC,CAAD,CAAlB;AACD;;AAED,YAAIuE,UAAJ,EAAgB;AACd,cAAIC,KAAK,GAAG5B,kBAAkB,CAACpB,IAAnB,CAAwB+C,UAAxB,CAAZ;;AACA,cAAIC,KAAJ,EAAW;AACThB,YAAAA,WAAW,CAACS,IAAZ,GAAmBM,UAAU,CAACzT,OAAX,CAAmB0T,KAAK,CAAC,CAAD,CAAxB,EAA6B,EAA7B,CAAnB;AACAhB,YAAAA,WAAW,CAACW,QAAZ,GAAuBK,KAAK,CAAC,CAAD,CAA5B;AACD,WAHD,MAGO;AACLhB,YAAAA,WAAW,CAACS,IAAZ,GAAmBM,UAAnB;AACD;AACF;;AAED,eAAOf,WAAP;AACD;;AAED,eAASG,SAAT,CAAoBW,UAApB,EAAgChB,gBAAhC,EAAkD;AAChD,YAAImB,aAAa,GAAGxC,cAAc,CAACqB,gBAAD,CAAlC;AACA,YAAIoB,eAAe,GAAGvC,gBAAgB,CAACmB,gBAAD,CAAtC;AAEA,YAAIkB,KAAJ,CAJgD,CAMhD;;AACAA,QAAAA,KAAK,GAAGtC,cAAc,CAACV,IAAf,CAAoB8C,UAApB,KAAmCI,eAAe,CAAClD,IAAhB,CAAqB8C,UAArB,CAA3C;;AACA,YAAIE,KAAJ,EAAW;AACT,cAAIG,UAAU,GAAGH,KAAK,CAAC,CAAD,CAAtB;AACA,iBAAO;AACLX,YAAAA,IAAI,EAAEe,QAAQ,CAACD,UAAD,EAAa,EAAb,CADT;AAELb,YAAAA,cAAc,EAAEQ,UAAU,CAACO,KAAX,CAAiBF,UAAU,CAACrT,MAA5B;AAFX,WAAP;AAID,SAd+C,CAgBhD;;;AACAkT,QAAAA,KAAK,GAAGxC,YAAY,CAACR,IAAb,CAAkB8C,UAAlB,KAAiCG,aAAa,CAACjD,IAAd,CAAmB8C,UAAnB,CAAzC;;AACA,YAAIE,KAAJ,EAAW;AACT,cAAIM,aAAa,GAAGN,KAAK,CAAC,CAAD,CAAzB;AACA,iBAAO;AACLX,YAAAA,IAAI,EAAEe,QAAQ,CAACE,aAAD,EAAgB,EAAhB,CAAR,GAA8B,GAD/B;AAELhB,YAAAA,cAAc,EAAEQ,UAAU,CAACO,KAAX,CAAiBC,aAAa,CAACxT,MAA/B;AAFX,WAAP;AAID,SAxB+C,CA0BhD;;;AACA,eAAO;AACLuS,UAAAA,IAAI,EAAE;AADD,SAAP;AAGD;;AAED,eAASE,SAAT,CAAoBO,UAApB,EAAgCT,IAAhC,EAAsC;AACpC;AACA,YAAIA,IAAI,KAAK,IAAb,EAAmB;AACjB,iBAAO,IAAP;AACD;;AAED,YAAIW,KAAJ;AACA,YAAIZ,IAAJ;AACA,YAAImB,KAAJ;AACA,YAAIC,IAAJ,CAToC,CAWpC;;AACA,YAAIV,UAAU,CAAChT,MAAX,KAAsB,CAA1B,EAA6B;AAC3BsS,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACAS,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB;AACA,iBAAOD,IAAP;AACD,SAhBmC,CAkBpC;;;AACAY,QAAAA,KAAK,GAAGpC,YAAY,CAACZ,IAAb,CAAkB8C,UAAlB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTZ,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACA4B,UAAAA,KAAK,GAAGH,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAjC;AACAZ,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB,EAA0BkB,KAA1B;AACA,iBAAOnB,IAAP;AACD,SAzBmC,CA2BpC;;;AACAY,QAAAA,KAAK,GAAGnC,aAAa,CAACb,IAAd,CAAmB8C,UAAnB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTZ,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACA,cAAI+B,SAAS,GAAGN,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAxB;AACAZ,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB,EAA0B,CAA1B,EAA6BqB,SAA7B;AACA,iBAAOtB,IAAP;AACD,SAlCmC,CAoCpC;;;AACAY,QAAAA,KAAK,GAAGlC,cAAc,CAACd,IAAf,CAAoB8C,UAApB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTZ,UAAAA,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAP;AACA4B,UAAAA,KAAK,GAAGH,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAjC;AACA,cAAIW,GAAG,GAAGP,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAlB;AACAZ,UAAAA,IAAI,CAACqB,cAAL,CAAoBpB,IAApB,EAA0BkB,KAA1B,EAAiCI,GAAjC;AACA,iBAAOvB,IAAP;AACD,SA5CmC,CA8CpC;;;AACAY,QAAAA,KAAK,GAAGjC,aAAa,CAACf,IAAd,CAAmB8C,UAAnB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTQ,UAAAA,IAAI,GAAGJ,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAhC;AACA,iBAAOY,YAAY,CAACvB,IAAD,EAAOmB,IAAP,CAAnB;AACD,SAnDmC,CAqDpC;;;AACAR,QAAAA,KAAK,GAAGhC,cAAc,CAAChB,IAAf,CAAoB8C,UAApB,CAAR;;AACA,YAAIE,KAAJ,EAAW;AACTQ,UAAAA,IAAI,GAAGJ,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAhC;AACA,cAAIa,SAAS,GAAGT,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,CAAzC;AACA,iBAAOY,YAAY,CAACvB,IAAD,EAAOmB,IAAP,EAAaK,SAAb,CAAnB;AACD,SA3DmC,CA6DpC;;;AACA,eAAO,IAAP;AACD;;AAED,eAASnB,SAAT,CAAoBK,UAApB,EAAgC;AAC9B,YAAIC,KAAJ;AACA,YAAIc,KAAJ;AACA,YAAIC,OAAJ,CAH8B,CAK9B;;AACAf,QAAAA,KAAK,GAAG/B,YAAY,CAACjB,IAAb,CAAkB+C,UAAlB,CAAR;;AACA,YAAIC,KAAJ,EAAW;AACTc,UAAAA,KAAK,GAAGE,UAAU,CAAChB,KAAK,CAAC,CAAD,CAAL,CAAS1T,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,CAAD,CAAlB;AACA,iBAAQwU,KAAK,GAAG,EAAT,GAAe3D,oBAAtB;AACD,SAV6B,CAY9B;;;AACA6C,QAAAA,KAAK,GAAG9B,cAAc,CAAClB,IAAf,CAAoB+C,UAApB,CAAR;;AACA,YAAIC,KAAJ,EAAW;AACTc,UAAAA,KAAK,GAAGV,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAhB;AACAe,UAAAA,OAAO,GAAGC,UAAU,CAAChB,KAAK,CAAC,CAAD,CAAL,CAAS1T,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,CAAD,CAApB;AACA,iBAAQwU,KAAK,GAAG,EAAT,GAAe3D,oBAAf,GACL4D,OAAO,GAAG3D,sBADZ;AAED,SAnB6B,CAqB9B;;;AACA4C,QAAAA,KAAK,GAAG7B,gBAAgB,CAACnB,IAAjB,CAAsB+C,UAAtB,CAAR;;AACA,YAAIC,KAAJ,EAAW;AACTc,UAAAA,KAAK,GAAGV,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAhB;AACAe,UAAAA,OAAO,GAAGX,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAlB;AACA,cAAIiB,OAAO,GAAGD,UAAU,CAAChB,KAAK,CAAC,CAAD,CAAL,CAAS1T,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,CAAD,CAAxB;AACA,iBAAQwU,KAAK,GAAG,EAAT,GAAe3D,oBAAf,GACL4D,OAAO,GAAG3D,sBADL,GAEL6D,OAAO,GAAG,IAFZ;AAGD,SA9B6B,CAgC9B;;;AACA,eAAO,IAAP;AACD;;AAED,eAASrB,aAAT,CAAwBsB,cAAxB,EAAwC;AACtC,YAAIlB,KAAJ;AACA,YAAImB,cAAJ,CAFsC,CAItC;;AACAnB,QAAAA,KAAK,GAAG3B,mBAAmB,CAACrB,IAApB,CAAyBkE,cAAzB,CAAR;;AACA,YAAIlB,KAAJ,EAAW;AACT,iBAAO,CAAP;AACD,SARqC,CAUtC;;;AACAA,QAAAA,KAAK,GAAG1B,oBAAoB,CAACtB,IAArB,CAA0BkE,cAA1B,CAAR;;AACA,YAAIlB,KAAJ,EAAW;AACTmB,UAAAA,cAAc,GAAGf,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,EAA1C;AACA,iBAAQA,KAAK,CAAC,CAAD,CAAL,KAAa,GAAd,GAAqB,CAACmB,cAAtB,GAAuCA,cAA9C;AACD,SAfqC,CAiBtC;;;AACAnB,QAAAA,KAAK,GAAGzB,sBAAsB,CAACvB,IAAvB,CAA4BkE,cAA5B,CAAR;;AACA,YAAIlB,KAAJ,EAAW;AACTmB,UAAAA,cAAc,GAAGf,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,EAAzB,GAA8BI,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAvD;AACA,iBAAQA,KAAK,CAAC,CAAD,CAAL,KAAa,GAAd,GAAqB,CAACmB,cAAtB,GAAuCA,cAA9C;AACD;;AAED,eAAO,CAAP;AACD;;AAED,eAASP,YAAT,CAAuBQ,OAAvB,EAAgCZ,IAAhC,EAAsCG,GAAtC,EAA2C;AACzCH,QAAAA,IAAI,GAAGA,IAAI,IAAI,CAAf;AACAG,QAAAA,GAAG,GAAGA,GAAG,IAAI,CAAb;AACA,YAAIvB,IAAI,GAAG,IAAIT,IAAJ,CAAS,CAAT,CAAX;AACAS,QAAAA,IAAI,CAACqB,cAAL,CAAoBW,OAApB,EAA6B,CAA7B,EAAgC,CAAhC;AACA,YAAIC,kBAAkB,GAAGjC,IAAI,CAACkC,SAAL,MAAoB,CAA7C;AACA,YAAIC,IAAI,GAAGf,IAAI,GAAG,CAAP,GAAWG,GAAX,GAAiB,CAAjB,GAAqBU,kBAAhC;AACAjC,QAAAA,IAAI,CAACoC,UAAL,CAAgBpC,IAAI,CAACqC,UAAL,KAAoBF,IAApC;AACA,eAAOnC,IAAP;AACD;;AAEDvX,MAAAA,MAAM,CAACD,OAAP,GAAiB4W,KAAjB;AAGA;AAAO,KApuDG;AAquDV;;AACA;AAAO,cAAS3W,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU8Z,MAAV,EAAkBpS,KAAlB,EAAyB;AACxC,eAAO;AACLtG,UAAAA,UAAU,EAAE,EAAE0Y,MAAM,GAAG,CAAX,CADP;AAEL3Y,UAAAA,YAAY,EAAE,EAAE2Y,MAAM,GAAG,CAAX,CAFT;AAGLC,UAAAA,QAAQ,EAAE,EAAED,MAAM,GAAG,CAAX,CAHL;AAILpS,UAAAA,KAAK,EAAEA;AAJF,SAAP;AAMD,OAPD;AAUA;;AAAO,KAlvDG;AAmvDV;;AACA;AAAO,cAASzH,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAI0Z,GAAG,GAAG1Z,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,IAAzB,CAAV,CAJsD,CAMtD;;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB6K,MAAxB,EAAgC,QAAhC,EAA0C,UAAU8O,QAAV,EAAoB;AAC5D,aAAKC,EAAL,GAAU/O,MAAM,CAAC8O,QAAD,CAAhB,CAD4D,CAChC;;AAC5B,aAAKE,EAAL,GAAU,CAAV,CAF4D,CAEhC;AAC9B;AACC,OAJD,EAIG,YAAY;AACb,YAAI7H,CAAC,GAAG,KAAK4H,EAAb;AACA,YAAIxI,KAAK,GAAG,KAAKyI,EAAjB;AACA,YAAIC,KAAJ;AACA,YAAI1I,KAAK,IAAIY,CAAC,CAACpN,MAAf,EAAuB,OAAO;AAAEwC,UAAAA,KAAK,EAAEP,SAAT;AAAoBkT,UAAAA,IAAI,EAAE;AAA1B,SAAP;AACvBD,QAAAA,KAAK,GAAGJ,GAAG,CAAC1H,CAAD,EAAIZ,KAAJ,CAAX;AACA,aAAKyI,EAAL,IAAWC,KAAK,CAAClV,MAAjB;AACA,eAAO;AAAEwC,UAAAA,KAAK,EAAE0S,KAAT;AAAgBC,UAAAA,IAAI,EAAE;AAAtB,SAAP;AACD,OAZD;AAeA;;AAAO,KA1wDG;AA2wDV;;AACA;AAAO,cAASpa,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,IAAjB;AAGA;AAAO,KAjxDG;AAkxDV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIia,WAAW,GAAGja,mBAAmB,CAAC,EAAD,CAArC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAACuZ,IAAP,IAAe,SAASA,IAAT,CAAclI,CAAd,EAAiB;AAC/C,eAAOgI,KAAK,CAAChI,CAAD,EAAIiI,WAAJ,CAAZ;AACD,OAFD;AAKA;;AAAO,KA9xDG;AA+xDV;;AACA;AAAO,cAASta,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAI+C,QAAQ,GAAG,GAAGA,QAAlB;;AAEA9C,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOhP,QAAQ,CAACrC,IAAT,CAAcqR,EAAd,EAAkB0G,KAAlB,CAAwB,CAAxB,EAA2B,CAAC,CAA5B,CAAP;AACD,OAFD;AAKA;;AAAO,KAzyDG;AA0yDV;;AACA;AAAO,cAASxY,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAI,OAAOA,EAAP,IAAa,UAAjB,EAA6B,MAAMC,SAAS,CAACD,EAAE,GAAG,qBAAN,CAAf;AAC7B,eAAOA,EAAP;AACD,OAHD;AAMA;;AAAO,KAnzDG;AAozDV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAIya,EAAE,GAAG,CAAT;AACA,UAAIC,EAAE,GAAGrY,IAAI,CAACsY,MAAL,EAAT;;AACA1a,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUmF,GAAV,EAAe;AAC9B,eAAO,UAAUiI,MAAV,CAAiBjI,GAAG,KAAKgC,SAAR,GAAoB,EAApB,GAAyBhC,GAA1C,EAA+C,IAA/C,EAAqD,CAAC,EAAEsV,EAAF,GAAOC,EAAR,EAAY3X,QAAZ,CAAqB,EAArB,CAArD,CAAP;AACD,OAFD;AAKA;;AAAO,KA9zDG;AA+zDV;;AACA;AAAO,cAAS9C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsa,GAAG,GAAGta,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R,CAAjC;;AACA,UAAIvM,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIua,GAAG,GAAGva,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,aAAvB,CAAV;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc/G,GAAd,EAAmB8P,IAAnB,EAAyB;AACxC,YAAI/I,EAAE,IAAI,CAACjM,GAAG,CAACiM,EAAE,GAAG+I,IAAI,GAAG/I,EAAH,GAAQA,EAAE,CAACnQ,SAArB,EAAgCiZ,GAAhC,CAAd,EAAoDD,GAAG,CAAC7I,EAAD,EAAK8I,GAAL,EAAU;AAAE1Z,UAAAA,YAAY,EAAE,IAAhB;AAAsBuG,UAAAA,KAAK,EAAEsD;AAA7B,SAAV,CAAH;AACrD,OAFD;AAKA;;AAAO,KA30DG;AA40DV;;AACA;AAAO,cAAS/K,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI0a,aAAa,GAAG1a,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,aAAvB,CAApB;;AAEA,UAAI2a,YAAY,GAAG,CAAC,2FAClB,gHADkB,GAElB,gHAFkB,GAGlB,8GAHkB,GAIlB,yBAJiB,EAIUnS,KAJV,CAIgB,GAJhB,CAAnB;;AAMA,WAAK,IAAItI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGya,YAAY,CAAC/V,MAAjC,EAAyC1E,CAAC,EAA1C,EAA8C;AAC5C,YAAI0a,IAAI,GAAGD,YAAY,CAACza,CAAD,CAAvB;AACA,YAAI2a,UAAU,GAAGhZ,MAAM,CAAC+Y,IAAD,CAAvB;AACA,YAAI/K,KAAK,GAAGgL,UAAU,IAAIA,UAAU,CAACvZ,SAArC;AACA,YAAIuO,KAAK,IAAI,CAACA,KAAK,CAAC6K,aAAD,CAAnB,EAAoCnV,IAAI,CAACsK,KAAD,EAAQ6K,aAAR,EAAuBE,IAAvB,CAAJ;AACpCH,QAAAA,SAAS,CAACG,IAAD,CAAT,GAAkBH,SAAS,CAAC5N,KAA5B;AACD;AAGD;;AAAO,KAp2DG;AAq2DV;;AACA;AAAO,cAASlN,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCA,MAAAA,OAAO,CAACqS,CAAR,GAAY,GAAG+I,oBAAf;AAGA;AAAO,KA32DG;AA42DV;;AACA;AAAO,cAASnb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEAvB,MAAAA,OAAO,WAAP,GAAkB,UAAUqb,QAAV,EAAoBC,WAApB,EAAiC;AACjD,YAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACtC,gBAAM,IAAItJ,SAAJ,CAAc,mCAAd,CAAN;AACD;AACF,OAJD;AAMA;;AAAO,KA13DG;AA23DV;;AACA;AAAO,cAAS/R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIga,eAAe,GAAGjb,mBAAmB,CAAC,EAAD,CAAzC;;AAEA,UAAIkb,gBAAgB,GAAGC,sBAAsB,CAACF,eAAD,CAA7C;;AAEA,eAASE,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,YAAY;AAC5B,iBAAS0b,gBAAT,CAA0B1U,MAA1B,EAAkCuF,KAAlC,EAAyC;AACvC,eAAK,IAAI/L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+L,KAAK,CAACrH,MAA1B,EAAkC1E,CAAC,EAAnC,EAAuC;AACrC,gBAAImb,UAAU,GAAGpP,KAAK,CAAC/L,CAAD,CAAtB;AACAmb,YAAAA,UAAU,CAACva,UAAX,GAAwBua,UAAU,CAACva,UAAX,IAAyB,KAAjD;AACAua,YAAAA,UAAU,CAACxa,YAAX,GAA0B,IAA1B;AACA,gBAAI,WAAWwa,UAAf,EAA2BA,UAAU,CAAC5B,QAAX,GAAsB,IAAtB;AAC3B,aAAC,GAAGyB,gBAAgB,WAApB,EAA8BxU,MAA9B,EAAsC2U,UAAU,CAACxW,GAAjD,EAAsDwW,UAAtD;AACD;AACF;;AAED,eAAO,UAAUL,WAAV,EAAuBM,UAAvB,EAAmCC,WAAnC,EAAgD;AACrD,cAAID,UAAJ,EAAgBF,gBAAgB,CAACJ,WAAW,CAAC1Z,SAAb,EAAwBga,UAAxB,CAAhB;AAChB,cAAIC,WAAJ,EAAiBH,gBAAgB,CAACJ,WAAD,EAAcO,WAAd,CAAhB;AACjB,iBAAOP,WAAP;AACD,SAJD;AAKD,OAhBiB,EAAlB;AAkBA;;AAAO,KA35DG;AA45DV;;AACA;AAAO,cAASrb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIwE,QAAQ,GAAGxE,mBAAmB,CAAC,CAAD,CAAnB,CAAuBwE,QAAtC,CAHsD,CAItD;;;AACA,UAAIgX,EAAE,GAAG/X,QAAQ,CAACe,QAAD,CAAR,IAAsBf,QAAQ,CAACe,QAAQ,CAACmD,aAAV,CAAvC;;AACAhI,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAO+J,EAAE,GAAGhX,QAAQ,CAACmD,aAAT,CAAuB8J,EAAvB,CAAH,GAAgC,EAAzC;AACD,OAFD;AAKA;;AAAO,KAx6DG;AAy6DV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC,CAHsD,CAItD;AACA;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAcvL,CAAd,EAAiB;AAChC,YAAI,CAACzC,QAAQ,CAACgO,EAAD,CAAb,EAAmB,OAAOA,EAAP;AACnB,YAAI9M,EAAJ,EAAQhC,GAAR;AACA,YAAIuD,CAAC,IAAI,QAAQvB,EAAE,GAAG8M,EAAE,CAAChP,QAAhB,KAA6B,UAAlC,IAAgD,CAACgB,QAAQ,CAACd,GAAG,GAAGgC,EAAE,CAACvE,IAAH,CAAQqR,EAAR,CAAP,CAA7D,EAAkF,OAAO9O,GAAP;AAClF,YAAI,QAAQgC,EAAE,GAAG8M,EAAE,CAACgK,OAAhB,KAA4B,UAA5B,IAA0C,CAAChY,QAAQ,CAACd,GAAG,GAAGgC,EAAE,CAACvE,IAAH,CAAQqR,EAAR,CAAP,CAAvD,EAA4E,OAAO9O,GAAP;AAC5E,YAAI,CAACuD,CAAD,IAAM,QAAQvB,EAAE,GAAG8M,EAAE,CAAChP,QAAhB,KAA6B,UAAnC,IAAiD,CAACgB,QAAQ,CAACd,GAAG,GAAGgC,EAAE,CAACvE,IAAH,CAAQqR,EAAR,CAAP,CAA9D,EAAmF,OAAO9O,GAAP;AACnF,cAAM+O,SAAS,CAAC,yCAAD,CAAf;AACD,OAPD;AAUA;;AAAO,KA17DG;AA27DV;;AACA;AAAO,cAAS/R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;;AASA,UAAI0b,oBAAoB,GAAG,8CAA3B;AAEA/b,MAAAA,MAAM,CAACD,OAAP,GAAiBgc,oBAAjB;AAGA;AAAO,KA78DG;AA88DV;;AACA;AAAO,cAAS/b,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACA,UAAIic,IAAI,GAAG5Z,IAAI,CAAC4Z,IAAhB;AACA,UAAIC,KAAK,GAAG7Z,IAAI,CAAC6Z,KAAjB;;AACAjc,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOoK,KAAK,CAACpK,EAAE,GAAG,CAACA,EAAP,CAAL,GAAkB,CAAlB,GAAsB,CAACA,EAAE,GAAG,CAAL,GAASmK,KAAT,GAAiBD,IAAlB,EAAwBlK,EAAxB,CAA7B;AACD,OAFD;AAKA;;AAAO,KAz9DG;AA09DV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACAC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAIA,EAAE,IAAI5K,SAAV,EAAqB,MAAM6K,SAAS,CAAC,2BAA2BD,EAA5B,CAAf;AACrB,eAAOA,EAAP;AACD,OAHD;AAMA;;AAAO,KAp+DG;AAq+DV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAI8b,GAAG,GAAG9b,mBAAmB,CAAC,GAAD,CAA7B;;AACA,UAAIia,WAAW,GAAGja,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI+b,QAAQ,GAAG/b,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAxB,CAAf;;AACA,UAAIgc,KAAK,GAAG,SAARA,KAAQ,GAAY;AAAE;AAAa,OAAvC;;AACA,UAAIvW,SAAS,GAAG,WAAhB,CARsD,CAUtD;;AACA,UAAIwW,WAAU,GAAG,sBAAY;AAC3B;AACA,YAAIC,MAAM,GAAGlc,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,QAAxB,CAAb;;AACA,YAAIE,CAAC,GAAG+Z,WAAW,CAACrV,MAApB;AACA,YAAIuX,EAAE,GAAG,GAAT;AACA,YAAIC,EAAE,GAAG,GAAT;AACA,YAAIC,cAAJ;AACAH,QAAAA,MAAM,CAACI,KAAP,CAAaC,OAAb,GAAuB,MAAvB;;AACAvc,QAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwBwc,WAAxB,CAAoCN,MAApC;;AACAA,QAAAA,MAAM,CAACO,GAAP,GAAa,aAAb,CAT2B,CASC;AAC5B;AACA;;AACAJ,QAAAA,cAAc,GAAGH,MAAM,CAACQ,aAAP,CAAqBlY,QAAtC;AACA6X,QAAAA,cAAc,CAACM,IAAf;AACAN,QAAAA,cAAc,CAACO,KAAf,CAAqBT,EAAE,GAAG,QAAL,GAAgBC,EAAhB,GAAqB,mBAArB,GAA2CD,EAA3C,GAAgD,SAAhD,GAA4DC,EAAjF;AACAC,QAAAA,cAAc,CAACQ,KAAf;AACAZ,QAAAA,WAAU,GAAGI,cAAc,CAACvW,CAA5B;;AACA,eAAO5F,CAAC,EAAR;AAAY,iBAAO+b,WAAU,CAACxW,SAAD,CAAV,CAAsBwU,WAAW,CAAC/Z,CAAD,CAAjC,CAAP;AAAZ;;AACA,eAAO+b,WAAU,EAAjB;AACD,OAnBD;;AAqBAtc,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAACmc,MAAP,IAAiB,SAASA,MAAT,CAAgB9K,CAAhB,EAAmB+K,UAAnB,EAA+B;AAC/D,YAAI5Z,MAAJ;;AACA,YAAI6O,CAAC,KAAK,IAAV,EAAgB;AACdgK,UAAAA,KAAK,CAACvW,SAAD,CAAL,GAAmBkM,QAAQ,CAACK,CAAD,CAA3B;AACA7O,UAAAA,MAAM,GAAG,IAAI6Y,KAAJ,EAAT;AACAA,UAAAA,KAAK,CAACvW,SAAD,CAAL,GAAmB,IAAnB,CAHc,CAId;;AACAtC,UAAAA,MAAM,CAAC4Y,QAAD,CAAN,GAAmB/J,CAAnB;AACD,SAND,MAMO7O,MAAM,GAAG8Y,WAAU,EAAnB;;AACP,eAAOc,UAAU,KAAKlW,SAAf,GAA2B1D,MAA3B,GAAoC2Y,GAAG,CAAC3Y,MAAD,EAAS4Z,UAAT,CAA9C;AACD,OAVD;AAaA;;AAAO,KAnhEG;AAohEV;;AACA;AAAO,cAASpd,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIgd,SAAS,GAAGhd,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIid,GAAG,GAAGlb,IAAI,CAACkb,GAAf;;AACAtd,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOA,EAAE,GAAG,CAAL,GAASwL,GAAG,CAACD,SAAS,CAACvL,EAAD,CAAV,EAAgB,gBAAhB,CAAZ,GAAgD,CAAvD,CAD6B,CAC6B;AAC3D,OAFD;AAKA;;AAAO,KA/hEG;AAgiEV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIkd,MAAM,GAAGld,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,MAAxB,CAAb;;AACA,UAAIoC,GAAG,GAAGpC,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUmF,GAAV,EAAe;AAC9B,eAAOqY,MAAM,CAACrY,GAAD,CAAN,KAAgBqY,MAAM,CAACrY,GAAD,CAAN,GAAczC,GAAG,CAACyC,GAAD,CAAjC,CAAP;AACD,OAFD;AAKA;;AAAO,KA1iEG;AA2iEV;;AACA;AAAO,cAASlF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAImd,MAAM,GAAG,oBAAb;AACA,UAAIhb,KAAK,GAAGN,MAAM,CAACsb,MAAD,CAAN,KAAmBtb,MAAM,CAACsb,MAAD,CAAN,GAAiB,EAApC,CAAZ;AAEA,OAACxd,MAAM,CAACD,OAAP,GAAiB,UAAUmF,GAAV,EAAeuC,KAAf,EAAsB;AACtC,eAAOjF,KAAK,CAAC0C,GAAD,CAAL,KAAe1C,KAAK,CAAC0C,GAAD,CAAL,GAAauC,KAAK,KAAKP,SAAV,GAAsBO,KAAtB,GAA8B,EAA1D,CAAP;AACD,OAFD,EAEG,UAFH,EAEe,EAFf,EAEmBiH,IAFnB,CAEwB;AACtB1M,QAAAA,OAAO,EAAED,IAAI,CAACC,OADQ;AAEtByb,QAAAA,IAAI,EAAEpd,mBAAmB,CAAC,EAAD,CAAnB,GAA0B,MAA1B,GAAmC,QAFnB;AAGtBqd,QAAAA,SAAS,EAAE;AAHW,OAFxB;AASA;AAAO,KA5jEG;AA6jEV;;AACA;AAAO,cAAS1d,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACAC,MAAAA,MAAM,CAACD,OAAP,GACE,+FADe,CAEf8I,KAFe,CAET,GAFS,CAAjB;AAKA;AAAO,KAtkEG;AAukEV;;AACA;AAAO,cAAS7I,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIsd,GAAG,GAAGtd,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIua,GAAG,GAAGva,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,aAAvB,CAAV,CAJsD,CAKtD;;;AACA,UAAIud,GAAG,GAAGD,GAAG,CAAC,YAAY;AAAE,eAAOtY,SAAP;AAAmB,OAAjC,EAAD,CAAH,IAA4C,WAAtD,CANsD,CAQtD;;AACA,UAAIwY,MAAM,GAAG,SAATA,MAAS,CAAU/L,EAAV,EAAc5M,GAAd,EAAmB;AAC9B,YAAI;AACF,iBAAO4M,EAAE,CAAC5M,GAAD,CAAT;AACD,SAFD,CAEE,OAAOwF,CAAP,EAAU;AAAE;AAAa;AAC5B,OAJD;;AAMA1K,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAIO,CAAJ,EAAOyL,CAAP,EAAUnX,CAAV;AACA,eAAOmL,EAAE,KAAK5K,SAAP,GAAmB,WAAnB,GAAiC4K,EAAE,KAAK,IAAP,GAAc,MAAd,CACtC;AADsC,UAEpC,QAAQgM,CAAC,GAAGD,MAAM,CAACxL,CAAC,GAAGrR,MAAM,CAAC8Q,EAAD,CAAX,EAAiB8I,GAAjB,CAAlB,KAA4C,QAA5C,GAAuDkD,CAAvD,CACF;AADE,UAEAF,GAAG,GAAGD,GAAG,CAACtL,CAAD,CAAN,CACL;AADK,UAEH,CAAC1L,CAAC,GAAGgX,GAAG,CAACtL,CAAD,CAAR,KAAgB,QAAhB,IAA4B,OAAOA,CAAC,CAAC0L,MAAT,IAAmB,UAA/C,GAA4D,WAA5D,GAA0EpX,CAN9E;AAOD,OATD;AAYA;;AAAO,KAnmEG;AAomEV;;AACA;AAAO,cAAS3G,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2d,OAAO,GAAG3d,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB6d,iBAAvB,GAA2C,UAAUpM,EAAV,EAAc;AACxE,YAAIA,EAAE,IAAI5K,SAAV,EAAqB,OAAO4K,EAAE,CAACmM,QAAD,CAAF,IACvBnM,EAAE,CAAC,YAAD,CADqB,IAEvBgJ,SAAS,CAACkD,OAAO,CAAClM,EAAD,CAAR,CAFO;AAGtB,OAJD;AAOA;;AAAO,KAjnEG;AAknEV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AAEA,eAAS8d,iBAAT,CAA2BhX,CAA3B,EAA8B;AAC5B,YAAIiX,OAAJ,EAAaC,MAAb;AACA,aAAKC,OAAL,GAAe,IAAInX,CAAJ,CAAM,UAAUoX,SAAV,EAAqBC,QAArB,EAA+B;AAClD,cAAIJ,OAAO,KAAKlX,SAAZ,IAAyBmX,MAAM,KAAKnX,SAAxC,EAAmD,MAAM6K,SAAS,CAAC,yBAAD,CAAf;AACnDqM,UAAAA,OAAO,GAAGG,SAAV;AACAF,UAAAA,MAAM,GAAGG,QAAT;AACD,SAJc,CAAf;AAKA,aAAKJ,OAAL,GAAenJ,SAAS,CAACmJ,OAAD,CAAxB;AACA,aAAKC,MAAL,GAAcpJ,SAAS,CAACoJ,MAAD,CAAvB;AACD;;AAEDre,MAAAA,MAAM,CAACD,OAAP,CAAeqS,CAAf,GAAmB,UAAUjL,CAAV,EAAa;AAC9B,eAAO,IAAIgX,iBAAJ,CAAsBhX,CAAtB,CAAP;AACD,OAFD;AAKA;;AAAO,KA1oEG;AA2oEV;;AACA;AAAO,cAASnH,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCA,MAAAA,OAAO,CAACqS,CAAR,GAAYpR,MAAM,CAACyd,qBAAnB;AAGA;AAAO,KAjpEG;AAkpEV;;AACA;AAAO,cAASze,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDN,MAAAA,OAAO,CAACqS,CAAR,GAAY/R,mBAAmB,CAAC,CAAD,CAA/B;AAGA;AAAO,KAxpEG;AAypEV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAIqe,OAAO,GAAGre,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIse,MAAM,GAAGte,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIY,cAAc,GAAGZ,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R,CAA5C;;AACApS,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUc,IAAV,EAAgB;AAC/B,YAAI+d,OAAO,GAAG7c,IAAI,CAACW,MAAL,KAAgBX,IAAI,CAACW,MAAL,GAAcgc,OAAO,GAAG,EAAH,GAAQxc,MAAM,CAACQ,MAAP,IAAiB,EAA9D,CAAd;AACA,YAAI7B,IAAI,CAACge,MAAL,CAAY,CAAZ,KAAkB,GAAlB,IAAyB,EAAEhe,IAAI,IAAI+d,OAAV,CAA7B,EAAiD3d,cAAc,CAAC2d,OAAD,EAAU/d,IAAV,EAAgB;AAAE4G,UAAAA,KAAK,EAAEkX,MAAM,CAACvM,CAAP,CAASvR,IAAT;AAAT,SAAhB,CAAd;AAClD,OAHD;AAMA;;AAAO,KAvqEG;AAwqEV;;AACA;AAAO,cAASb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA1H,MAAAA,OAAO,CAAC+e,IAAR,GAAeA,IAAf;AACA/e,MAAAA,OAAO,CAACgf,WAAR,GAAsBA,WAAtB;;AACA,UAAIC,cAAc,GAAGjf,OAAO,CAACif,cAAR,GAAyB,SAASA,cAAT,CAAwB1Q,OAAxB,EAAiC;AAC7E,YAAI2Q,kBAAkB,GAAG,OAAO3Q,OAAO,CAACtI,IAAf,KAAwB,QAAjD;;AAEA,YAAIiZ,kBAAJ,EAAwB;AACtB,iBAAO,KAAP;AACD;;AAED,eAAO,CAAC3Q,OAAO,CAACtI,IAAR,CAAarE,SAAb,CAAuBwP,gBAA/B;AACD,OARD;;AASA,eAAS2N,IAAT,CAAc/Z,GAAd,EAAmB;AACjB,YAAIiG,KAAK,GAAG3F,SAAS,CAACJ,MAAV,GAAmB,CAAnB,IAAwBI,SAAS,CAAC,CAAD,CAAT,KAAiB6B,SAAzC,GAAqD7B,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAEA,YAAI7B,MAAM,GAAG,EAAb;AACAxC,QAAAA,MAAM,CAACuZ,IAAP,CAAYxV,GAAZ,EAAiBD,OAAjB,CAAyB,UAAUI,GAAV,EAAe;AACtC,cAAI8F,KAAK,CAACkU,OAAN,CAAcha,GAAd,MAAuB,CAAC,CAA5B,EAA+B;AAC7B1B,YAAAA,MAAM,CAAC0B,GAAD,CAAN,GAAcH,GAAG,CAACG,GAAD,CAAjB;AACD;AACF,SAJD;AAKA,eAAO1B,MAAP;AACD;;AAED,eAASub,WAAT,CAAqBvZ,CAArB,EAAwBC,CAAxB,EAA2B;AACzB,YAAI0Z,UAAU,GAAG3Z,CAAC,KAAKC,CAAvB;;AACA,YAAI0Z,UAAJ,EAAgB;AACd,iBAAO,IAAP;AACD;;AAED,YAAIC,aAAa,GAAG,CAAClS,KAAK,CAACnK,OAAN,CAAcyC,CAAd,CAAD,IAAqB,CAAC0H,KAAK,CAACnK,OAAN,CAAc0C,CAAd,CAA1C;AACA,YAAI4Z,gBAAgB,GAAG7Z,CAAC,CAACP,MAAF,KAAaQ,CAAC,CAACR,MAAtC;;AAEA,YAAIma,aAAa,IAAIC,gBAArB,EAAuC;AACrC,iBAAO,KAAP;AACD;;AAED,eAAO7Z,CAAC,CAAC8Z,KAAF,CAAQ,UAAUhR,OAAV,EAAmBmD,KAAnB,EAA0B;AACvC,iBAAOnD,OAAO,KAAK7I,CAAC,CAACgM,KAAD,CAApB;AACD,SAFM,CAAP;AAGD;;AAED,eAAS8N,aAAT,CAAuBva,EAAvB,EAA2B;AACzB,YAAIwa,KAAK,GAAG,EAAZ;AAEA,eAAO,UAAUhb,GAAV,EAAe;AACpB,cAAI,CAACgb,KAAK,CAAChb,GAAD,CAAV,EAAiB;AACfgb,YAAAA,KAAK,CAAChb,GAAD,CAAL,GAAaQ,EAAE,CAACR,GAAD,CAAf;AACD;;AACD,iBAAOgb,KAAK,CAAChb,GAAD,CAAZ;AACD,SALD;AAMD;;AAED,UAAIib,SAAS,GAAG1f,OAAO,CAAC0f,SAAR,GAAoBF,aAAa,CAAC,UAAU/a,GAAV,EAAe;AAC/D,eAAOA,GAAG,CAACC,OAAJ,CAAY,UAAZ,EAAwB,KAAxB,EAA+BiH,WAA/B,EAAP;AACD,OAFgD,CAAjD;AAIA;AAAO,KAzuEG;AA0uEV;;AACA;AAAO,cAAS1L,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB,CAACM,mBAAmB,CAAC,CAAD,CAApB,IAA2B,CAACA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AAC/E,eAAOW,MAAM,CAACC,cAAP,CAAsBZ,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,KAAxB,CAAtB,EAAsD,GAAtD,EAA2D;AAAEe,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO,CAAP;AAAW;AAAhC,SAA3D,EAA+FoE,CAA/F,IAAoG,CAA3G;AACD,OAF4C,CAA7C;AAKA;AAAO,KAlvEG;AAmvEV;;AACA;AAAO,cAASxF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAE9C,YAAIA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC9J,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAApC;AACD,SAFD,MAEO;AACLL,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAApC;AACD;AAED;;AAA4B,OARA,EAQCI,IARD,CAQMV,OARN,EAQeM,mBAAmB,CAAC,CAAD,CARlC,CAAD;AAU3B;AAAO,KAjwEG;AAkwEV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0B;AAIjC;AAAO,KAvwEG;AAwwEV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIqe,OAAO,GAAGre,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIqf,QAAQ,GAAGrf,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIsf,WAAW,GAAGtf,mBAAmB,CAAC,GAAD,CAArC;;AACA,UAAIuf,cAAc,GAAGvf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIwf,cAAc,GAAGxf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIyf,KAAK,GAAG,EAAE,GAAGvF,IAAH,IAAW,UAAU,GAAGA,IAAH,EAAvB,CAAZ,CAbsD,CAaP;;AAC/C,UAAIwF,WAAW,GAAG,YAAlB;AACA,UAAIC,IAAI,GAAG,MAAX;AACA,UAAIC,MAAM,GAAG,QAAb;;AAEA,UAAIC,UAAU,GAAG,SAAbA,UAAa,GAAY;AAAE,eAAO,IAAP;AAAc,OAA7C;;AAEAlgB,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUogB,IAAV,EAAgBlF,IAAhB,EAAsBI,WAAtB,EAAmC+E,IAAnC,EAAyCC,OAAzC,EAAkDC,MAAlD,EAA0DC,MAA1D,EAAkE;AACjFZ,QAAAA,WAAW,CAACtE,WAAD,EAAcJ,IAAd,EAAoBmF,IAApB,CAAX;;AACA,YAAII,SAAS,GAAG,SAAZA,SAAY,CAAUC,IAAV,EAAgB;AAC9B,cAAI,CAACX,KAAD,IAAUW,IAAI,IAAIvQ,KAAtB,EAA6B,OAAOA,KAAK,CAACuQ,IAAD,CAAZ;;AAC7B,kBAAQA,IAAR;AACE,iBAAKT,IAAL;AAAW,qBAAO,SAASzF,IAAT,GAAgB;AAAE,uBAAO,IAAIc,WAAJ,CAAgB,IAAhB,EAAsBoF,IAAtB,CAAP;AAAqC,eAA9D;;AACX,iBAAKR,MAAL;AAAa,qBAAO,SAASS,MAAT,GAAkB;AAAE,uBAAO,IAAIrF,WAAJ,CAAgB,IAAhB,EAAsBoF,IAAtB,CAAP;AAAqC,eAAhE;AAFf;;AAGE,iBAAO,SAASE,OAAT,GAAmB;AAAE,mBAAO,IAAItF,WAAJ,CAAgB,IAAhB,EAAsBoF,IAAtB,CAAP;AAAqC,WAAjE;AACH,SAND;;AAOA,YAAI7F,GAAG,GAAGK,IAAI,GAAG,WAAjB;AACA,YAAI2F,UAAU,GAAGP,OAAO,IAAIJ,MAA5B;AACA,YAAIY,UAAU,GAAG,KAAjB;AACA,YAAI3Q,KAAK,GAAGiQ,IAAI,CAACxe,SAAjB;AACA,YAAImf,OAAO,GAAG5Q,KAAK,CAAC+N,QAAD,CAAL,IAAmB/N,KAAK,CAAC6P,WAAD,CAAxB,IAAyCM,OAAO,IAAInQ,KAAK,CAACmQ,OAAD,CAAvE;AACA,YAAIU,QAAQ,GAAGD,OAAO,IAAIN,SAAS,CAACH,OAAD,CAAnC;AACA,YAAIW,QAAQ,GAAGX,OAAO,GAAG,CAACO,UAAD,GAAcG,QAAd,GAAyBP,SAAS,CAAC,SAAD,CAArC,GAAmDtZ,SAAzE;AACA,YAAI+Z,UAAU,GAAGhG,IAAI,IAAI,OAAR,GAAkB/K,KAAK,CAACyQ,OAAN,IAAiBG,OAAnC,GAA6CA,OAA9D;AACA,YAAII,OAAJ,EAAahc,GAAb,EAAkBic,iBAAlB,CAjBiF,CAkBjF;;AACA,YAAIF,UAAJ,EAAgB;AACdE,UAAAA,iBAAiB,GAAGtB,cAAc,CAACoB,UAAU,CAACxgB,IAAX,CAAgB,IAAI0f,IAAJ,EAAhB,CAAD,CAAlC;;AACA,cAAIgB,iBAAiB,KAAKngB,MAAM,CAACW,SAA7B,IAA0Cwf,iBAAiB,CAACf,IAAhE,EAAsE;AACpE;AACAR,YAAAA,cAAc,CAACuB,iBAAD,EAAoBvG,GAApB,EAAyB,IAAzB,CAAd,CAFoE,CAGpE;;AACA,gBAAI,CAAC8D,OAAD,IAAY,OAAOyC,iBAAiB,CAAClD,QAAD,CAAxB,IAAsC,UAAtD,EAAkErY,IAAI,CAACub,iBAAD,EAAoBlD,QAApB,EAA8BiC,UAA9B,CAAJ;AACnE;AACF,SA3BgF,CA4BjF;;;AACA,YAAIU,UAAU,IAAIE,OAAd,IAAyBA,OAAO,CAACjgB,IAAR,KAAiBof,MAA9C,EAAsD;AACpDY,UAAAA,UAAU,GAAG,IAAb;;AACAE,UAAAA,QAAQ,GAAG,SAASL,MAAT,GAAkB;AAAE,mBAAOI,OAAO,CAACrgB,IAAR,CAAa,IAAb,CAAP;AAA4B,WAA3D;AACD,SAhCgF,CAiCjF;;;AACA,YAAI,CAAC,CAACie,OAAD,IAAY6B,MAAb,MAAyBT,KAAK,IAAIe,UAAT,IAAuB,CAAC3Q,KAAK,CAAC+N,QAAD,CAAtD,CAAJ,EAAuE;AACrErY,UAAAA,IAAI,CAACsK,KAAD,EAAQ+N,QAAR,EAAkB8C,QAAlB,CAAJ;AACD,SApCgF,CAqCjF;;;AACAjG,QAAAA,SAAS,CAACG,IAAD,CAAT,GAAkB8F,QAAlB;AACAjG,QAAAA,SAAS,CAACF,GAAD,CAAT,GAAiBsF,UAAjB;;AACA,YAAIG,OAAJ,EAAa;AACXa,UAAAA,OAAO,GAAG;AACRR,YAAAA,MAAM,EAAEE,UAAU,GAAGG,QAAH,GAAcP,SAAS,CAACP,MAAD,CADjC;AAER1F,YAAAA,IAAI,EAAE+F,MAAM,GAAGS,QAAH,GAAcP,SAAS,CAACR,IAAD,CAF3B;AAGRW,YAAAA,OAAO,EAAEK;AAHD,WAAV;AAKA,cAAIT,MAAJ,EAAY,KAAKrb,GAAL,IAAYgc,OAAZ,EAAqB;AAC/B,gBAAI,EAAEhc,GAAG,IAAIgL,KAAT,CAAJ,EAAqBwP,QAAQ,CAACxP,KAAD,EAAQhL,GAAR,EAAagc,OAAO,CAAChc,GAAD,CAApB,CAAR;AACtB,WAFD,MAEOa,OAAO,CAACA,OAAO,CAACU,CAAR,GAAYV,OAAO,CAACI,CAAR,IAAa2Z,KAAK,IAAIe,UAAtB,CAAb,EAAgD5F,IAAhD,EAAsDiG,OAAtD,CAAP;AACR;;AACD,eAAOA,OAAP;AACD,OAnDD;AAsDA;;AAAO,KAn1EG;AAo1EV;;AACA;AAAO,cAASlhB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAApC;AAGA;AAAO,KA11EG;AA21EV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIghB,YAAY,GAAGhhB,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,KAAzB,CAAnB;;AACA,UAAI+b,QAAQ,GAAG/b,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAxB,CAAf;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU0B,MAAV,EAAkB6f,KAAlB,EAAyB;AACxC,YAAIjP,CAAC,GAAG+O,SAAS,CAAC3f,MAAD,CAAjB;AACA,YAAIlB,CAAC,GAAG,CAAR;AACA,YAAIiD,MAAM,GAAG,EAAb;AACA,YAAI0B,GAAJ;;AACA,aAAKA,GAAL,IAAYmN,CAAZ;AAAe,cAAInN,GAAG,IAAIkX,QAAX,EAAqBvW,GAAG,CAACwM,CAAD,EAAInN,GAAJ,CAAH,IAAe1B,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ,CAAf;AAApC,SALwC,CAMxC;;;AACA,eAAOoc,KAAK,CAACrc,MAAN,GAAe1E,CAAtB;AAAyB,cAAIsF,GAAG,CAACwM,CAAD,EAAInN,GAAG,GAAGoc,KAAK,CAAC/gB,CAAC,EAAF,CAAf,CAAP,EAA8B;AACrD,aAAC8gB,YAAY,CAAC7d,MAAD,EAAS0B,GAAT,CAAb,IAA8B1B,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ,CAA9B;AACD;AAFD;;AAGA,eAAO1B,MAAP;AACD,OAXD;AAcA;;AAAO,KAj3EG;AAk3EV;;AACA;AAAO,cAASxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIsd,GAAG,GAAGtd,mBAAmB,CAAC,EAAD,CAA7B,CAHsD,CAItD;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAAC,GAAD,CAAN,CAAYma,oBAAZ,CAAiC,CAAjC,IAAsCna,MAAtC,GAA+C,UAAU8Q,EAAV,EAAc;AAC5E,eAAO6L,GAAG,CAAC7L,EAAD,CAAH,IAAW,QAAX,GAAsBA,EAAE,CAACjJ,KAAH,CAAS,EAAT,CAAtB,GAAqC7H,MAAM,CAAC8Q,EAAD,CAAlD;AACD,OAFD;AAKA;AAAO,KA73EG;AA83EV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIwE,QAAQ,GAAGxE,mBAAmB,CAAC,CAAD,CAAnB,CAAuBwE,QAAtC;;AACA7E,MAAAA,MAAM,CAACD,OAAP,GAAiB8E,QAAQ,IAAIA,QAAQ,CAAC0c,eAAtC;AAGA;AAAO,KAr4EG;AAs4EV;;AACA;AAAO,cAASvhB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI+b,QAAQ,GAAG/b,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAxB,CAAf;;AACA,UAAIohB,WAAW,GAAGzgB,MAAM,CAACW,SAAzB;;AAEA3B,MAAAA,MAAM,CAACD,OAAP,GAAiBiB,MAAM,CAAC6e,cAAP,IAAyB,UAAUxN,CAAV,EAAa;AACrDA,QAAAA,CAAC,GAAGmP,QAAQ,CAACnP,CAAD,CAAZ;AACA,YAAIxM,GAAG,CAACwM,CAAD,EAAI+J,QAAJ,CAAP,EAAsB,OAAO/J,CAAC,CAAC+J,QAAD,CAAR;;AACtB,YAAI,OAAO/J,CAAC,CAAClP,WAAT,IAAwB,UAAxB,IAAsCkP,CAAC,YAAYA,CAAC,CAAClP,WAAzD,EAAsE;AACpE,iBAAOkP,CAAC,CAAClP,WAAF,CAAcxB,SAArB;AACD;;AAAC,eAAO0Q,CAAC,YAAYrR,MAAb,GAAsBygB,WAAtB,GAAoC,IAA3C;AACH,OAND;AASA;;AAAO,KAx5EG;AAy5EV;;AACA;AAAO,cAASzhB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU2hB,QAAV,EAAoB1c,EAApB,EAAwByC,KAAxB,EAA+BkZ,OAA/B,EAAwC;AACvD,YAAI;AACF,iBAAOA,OAAO,GAAG3b,EAAE,CAACgN,QAAQ,CAACvK,KAAD,CAAR,CAAgB,CAAhB,CAAD,EAAqBA,KAAK,CAAC,CAAD,CAA1B,CAAL,GAAsCzC,EAAE,CAACyC,KAAD,CAAtD,CADE,CAEJ;AACC,SAHD,CAGE,OAAOiD,CAAP,EAAU;AACV,cAAI+F,GAAG,GAAGiR,QAAQ,CAAC,QAAD,CAAlB;AACA,cAAIjR,GAAG,KAAKvJ,SAAZ,EAAuB8K,QAAQ,CAACvB,GAAG,CAAChQ,IAAJ,CAASihB,QAAT,CAAD,CAAR;AACvB,gBAAMhX,CAAN;AACD;AACF,OATD;AAYA;;AAAO,KA16EG;AA26EV;;AACA;AAAO,cAAS1K,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIshB,UAAU,GAAGzU,KAAK,CAACvL,SAAvB;;AAEA3B,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,eAAOA,EAAE,KAAK5K,SAAP,KAAqB4T,SAAS,CAAC5N,KAAV,KAAoB4E,EAApB,IAA0B6P,UAAU,CAAC1D,QAAD,CAAV,KAAyBnM,EAAxE,CAAP;AACD,OAFD;AAKA;;AAAO,KAx7EG;AAy7EV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIuhB,OAAO,GAAGvhB,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,SAAvB,CAAd;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUsS,CAAV,EAAawP,CAAb,EAAgB;AAC/B,YAAI1a,CAAC,GAAG6K,QAAQ,CAACK,CAAD,CAAR,CAAYlP,WAApB;AACA,YAAIoD,CAAJ;AACA,eAAOY,CAAC,KAAKD,SAAN,IAAmB,CAACX,CAAC,GAAGyL,QAAQ,CAAC7K,CAAD,CAAR,CAAYya,OAAZ,CAAL,KAA8B1a,SAAjD,GAA6D2a,CAA7D,GAAiE5M,SAAS,CAAC1O,CAAD,CAAjF;AACD,OAJD;AAOA;;AAAO,KAv8EG;AAw8EV;;AACA;AAAO,cAASvG,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIyhB,MAAM,GAAGzhB,mBAAmB,CAAC,GAAD,CAAhC;;AACA,UAAI0hB,IAAI,GAAG1hB,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAI2hB,GAAG,GAAG3hB,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIqH,OAAO,GAAGxF,MAAM,CAACwF,OAArB;AACA,UAAIua,OAAO,GAAG/f,MAAM,CAACggB,YAArB;AACA,UAAIC,SAAS,GAAGjgB,MAAM,CAACkgB,cAAvB;AACA,UAAIC,cAAc,GAAGngB,MAAM,CAACmgB,cAA5B;AACA,UAAIC,QAAQ,GAAGpgB,MAAM,CAACogB,QAAtB;AACA,UAAIC,OAAO,GAAG,CAAd;AACA,UAAItP,KAAK,GAAG,EAAZ;AACA,UAAIuP,kBAAkB,GAAG,oBAAzB;AACA,UAAIC,KAAJ,EAAWC,OAAX,EAAoBC,IAApB;;AACA,UAAInP,GAAG,GAAG,SAANA,GAAM,GAAY;AACpB,YAAIgH,EAAE,GAAG,CAAC,IAAV,CADoB,CAEpB;;AACA,YAAIvH,KAAK,CAACrR,cAAN,CAAqB4Y,EAArB,CAAJ,EAA8B;AAC5B,cAAIxV,EAAE,GAAGiO,KAAK,CAACuH,EAAD,CAAd;AACA,iBAAOvH,KAAK,CAACuH,EAAD,CAAZ;AACAxV,UAAAA,EAAE;AACH;AACF,OARD;;AASA,UAAI4d,QAAQ,GAAG,SAAXA,QAAW,CAAUnY,KAAV,EAAiB;AAC9B+I,QAAAA,GAAG,CAAC/S,IAAJ,CAASgK,KAAK,CAACoY,IAAf;AACD,OAFD,CAzBsD,CA4BtD;;;AACA,UAAI,CAACZ,OAAD,IAAY,CAACE,SAAjB,EAA4B;AAC1BF,QAAAA,OAAO,GAAG,SAASC,YAAT,CAAsBld,EAAtB,EAA0B;AAClC,cAAIgJ,IAAI,GAAG,EAAX;AACA,cAAIzN,CAAC,GAAG,CAAR;;AACA,iBAAO8E,SAAS,CAACJ,MAAV,GAAmB1E,CAA1B;AAA6ByN,YAAAA,IAAI,CAACU,IAAL,CAAUrJ,SAAS,CAAC9E,CAAC,EAAF,CAAnB;AAA7B;;AACA0S,UAAAA,KAAK,CAAC,EAAEsP,OAAH,CAAL,GAAmB,YAAY;AAC7B;AACAT,YAAAA,MAAM,CAAC,OAAO9c,EAAP,IAAa,UAAb,GAA0BA,EAA1B,GAA+B1C,QAAQ,CAAC0C,EAAD,CAAxC,EAA8CgJ,IAA9C,CAAN;AACD,WAHD;;AAIAyU,UAAAA,KAAK,CAACF,OAAD,CAAL;AACA,iBAAOA,OAAP;AACD,SAVD;;AAWAJ,QAAAA,SAAS,GAAG,SAASC,cAAT,CAAwB5H,EAAxB,EAA4B;AACtC,iBAAOvH,KAAK,CAACuH,EAAD,CAAZ;AACD,SAFD,CAZ0B,CAe1B;;;AACA,YAAIna,mBAAmB,CAAC,EAAD,CAAnB,CAAwBqH,OAAxB,KAAoC,SAAxC,EAAmD;AACjD+a,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpB9S,YAAAA,OAAO,CAAC+L,QAAR,CAAiB9N,GAAG,CAAC6N,GAAD,EAAMgH,EAAN,EAAU,CAAV,CAApB;AACD,WAFD,CADiD,CAInD;;AACC,SALD,MAKO,IAAI8H,QAAQ,IAAIA,QAAQ,CAACQ,GAAzB,EAA8B;AACnCL,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpB8H,YAAAA,QAAQ,CAACQ,GAAT,CAAand,GAAG,CAAC6N,GAAD,EAAMgH,EAAN,EAAU,CAAV,CAAhB;AACD,WAFD,CADmC,CAIrC;;AACC,SALM,MAKA,IAAI6H,cAAJ,EAAoB;AACzBK,UAAAA,OAAO,GAAG,IAAIL,cAAJ,EAAV;AACAM,UAAAA,IAAI,GAAGD,OAAO,CAACK,KAAf;AACAL,UAAAA,OAAO,CAACM,KAAR,CAAcC,SAAd,GAA0BL,QAA1B;AACAH,UAAAA,KAAK,GAAG9c,GAAG,CAACgd,IAAI,CAACO,WAAN,EAAmBP,IAAnB,EAAyB,CAAzB,CAAX,CAJyB,CAK3B;AACA;AACC,SAPM,MAOA,IAAIzgB,MAAM,CAACihB,gBAAP,IAA2B,OAAOD,WAAP,IAAsB,UAAjD,IAA+D,CAAChhB,MAAM,CAACkhB,aAA3E,EAA0F;AAC/FX,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpBtY,YAAAA,MAAM,CAACghB,WAAP,CAAmB1I,EAAE,GAAG,EAAxB,EAA4B,GAA5B;AACD,WAFD;;AAGAtY,UAAAA,MAAM,CAACihB,gBAAP,CAAwB,SAAxB,EAAmCP,QAAnC,EAA6C,KAA7C,EAJ+F,CAKjG;AACC,SANM,MAMA,IAAIJ,kBAAkB,IAAIR,GAAG,CAAC,QAAD,CAA7B,EAAyC;AAC9CS,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpBuH,YAAAA,IAAI,CAAClF,WAAL,CAAiBmF,GAAG,CAAC,QAAD,CAApB,EAAgCQ,kBAAhC,IAAsD,YAAY;AAChET,cAAAA,IAAI,CAAC7V,WAAL,CAAiB,IAAjB;AACAsH,cAAAA,GAAG,CAAC/S,IAAJ,CAAS+Z,EAAT;AACD,aAHD;AAID,WALD,CAD8C,CAOhD;;AACC,SARM,MAQA;AACLiI,UAAAA,KAAK,GAAG,eAAUjI,EAAV,EAAc;AACpB7H,YAAAA,UAAU,CAAChN,GAAG,CAAC6N,GAAD,EAAMgH,EAAN,EAAU,CAAV,CAAJ,EAAkB,CAAlB,CAAV;AACD,WAFD;AAGD;AACF;;AACDxa,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfsK,QAAAA,GAAG,EAAE4X,OADU;AAEfoB,QAAAA,KAAK,EAAElB;AAFQ,OAAjB;AAMA;AAAO,KAjiFG;AAkiFV;;AACA;AAAO,cAASniB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoV,IAAV,EAAgB;AAC/B,YAAI;AACF,iBAAO;AAAEzK,YAAAA,CAAC,EAAE,KAAL;AAAYJ,YAAAA,CAAC,EAAE6K,IAAI;AAAnB,WAAP;AACD,SAFD,CAEE,OAAOzK,CAAP,EAAU;AACV,iBAAO;AAAEA,YAAAA,CAAC,EAAE,IAAL;AAAWJ,YAAAA,CAAC,EAAEI;AAAd,WAAP;AACD;AACF,OAND;AASA;;AAAO,KA9iFG;AA+iFV;;AACA;AAAO,cAAS1K,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIijB,oBAAoB,GAAGjjB,mBAAmB,CAAC,EAAD,CAA9C;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoH,CAAV,EAAaoc,CAAb,EAAgB;AAC/BvR,QAAAA,QAAQ,CAAC7K,CAAD,CAAR;AACA,YAAIrD,QAAQ,CAACyf,CAAD,CAAR,IAAeA,CAAC,CAACpgB,WAAF,KAAkBgE,CAArC,EAAwC,OAAOoc,CAAP;AACxC,YAAIC,iBAAiB,GAAGF,oBAAoB,CAAClR,CAArB,CAAuBjL,CAAvB,CAAxB;AACA,YAAIiX,OAAO,GAAGoF,iBAAiB,CAACpF,OAAhC;AACAA,QAAAA,OAAO,CAACmF,CAAD,CAAP;AACA,eAAOC,iBAAiB,CAAClF,OAAzB;AACD,OAPD;AAUA;;AAAO,KAhkFG;AAikFV;;AACA;AAAO,cAASte,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIojB,YAAY,GAAG,KAAnB;;AAEA,UAAI;AACF,YAAIC,KAAK,GAAG,CAAC,CAAD,EAAIzF,QAAJ,GAAZ;;AACAyF,QAAAA,KAAK,CAAC,QAAD,CAAL,GAAkB,YAAY;AAAED,UAAAA,YAAY,GAAG,IAAf;AAAsB,SAAtD,CAFE,CAGF;;;AACAvW,QAAAA,KAAK,CAACyW,IAAN,CAAWD,KAAX,EAAkB,YAAY;AAAE,gBAAM,CAAN;AAAU,SAA1C;AACD,OALD,CAKE,OAAOhZ,CAAP,EAAU;AAAE;AAAa;;AAE3B1K,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUoV,IAAV,EAAgByO,WAAhB,EAA6B;AAC5C,YAAI,CAACA,WAAD,IAAgB,CAACH,YAArB,EAAmC,OAAO,KAAP;AACnC,YAAII,IAAI,GAAG,KAAX;;AACA,YAAI;AACF,cAAIvW,GAAG,GAAG,CAAC,CAAD,CAAV;AACA,cAAIwW,IAAI,GAAGxW,GAAG,CAAC2Q,QAAD,CAAH,EAAX;;AACA6F,UAAAA,IAAI,CAAC1D,IAAL,GAAY,YAAY;AAAE,mBAAO;AAAEhG,cAAAA,IAAI,EAAEyJ,IAAI,GAAG;AAAf,aAAP;AAA+B,WAAzD;;AACAvW,UAAAA,GAAG,CAAC2Q,QAAD,CAAH,GAAgB,YAAY;AAAE,mBAAO6F,IAAP;AAAc,WAA5C;;AACA3O,UAAAA,IAAI,CAAC7H,GAAD,CAAJ;AACD,SAND,CAME,OAAO5C,CAAP,EAAU;AAAE;AAAa;;AAC3B,eAAOmZ,IAAP;AACD,OAXD;AAcA;;AAAO,KA5lFG;AA6lFV;;AACA;AAAO,cAAS7jB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAlmFG;AAmmFV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI0jB,KAAK,GAAG1jB,mBAAmB,CAAC,EAAD,CAA/B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUikB,GAAV,EAAe7O,IAAf,EAAqB;AACpC,YAAInQ,EAAE,GAAG,CAACjD,IAAI,CAACf,MAAL,IAAe,EAAhB,EAAoBgjB,GAApB,KAA4BhjB,MAAM,CAACgjB,GAAD,CAA3C;AACA,YAAIC,GAAG,GAAG,EAAV;AACAA,QAAAA,GAAG,CAACD,GAAD,CAAH,GAAW7O,IAAI,CAACnQ,EAAD,CAAf;AACAe,QAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY4d,KAAK,CAAC,YAAY;AAAE/e,UAAAA,EAAE,CAAC,CAAD,CAAF;AAAQ,SAAvB,CAA9B,EAAwD,QAAxD,EAAkEif,GAAlE,CAAP;AACD,OALD;AAQA;;AAAO,KAlnFG;AAmnFV;;AACA;AAAO,cAASjkB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAI4iB,QAAQ,GAAG7jB,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,UAAI8jB,QAAQ,GAAG3I,sBAAsB,CAAC0I,QAAD,CAArC;;AAEA,eAAS1I,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUsC,IAAV,EAAgB5B,IAAhB,EAAsB;AACtC,YAAI,CAAC4B,IAAL,EAAW;AACT,gBAAM,IAAI+hB,cAAJ,CAAmB,2DAAnB,CAAN;AACD;;AAED,eAAO3jB,IAAI,KAAK,CAAC,OAAOA,IAAP,KAAgB,WAAhB,GAA8B,WAA9B,GAA4C,CAAC,GAAG0jB,QAAQ,WAAZ,EAAsB1jB,IAAtB,CAA7C,MAA8E,QAA9E,IAA0F,OAAOA,IAAP,KAAgB,UAA/G,CAAJ,GAAiIA,IAAjI,GAAwI4B,IAA/I;AACD,OAND;AAQA;;AAAO,KAzoFG;AA0oFV;;AACA;AAAO,cAASrC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAI+iB,SAAS,GAAGhkB,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIikB,UAAU,GAAG9I,sBAAsB,CAAC6I,SAAD,CAAvC;;AAEA,UAAIE,OAAO,GAAGlkB,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAImkB,QAAQ,GAAGhJ,sBAAsB,CAAC+I,OAAD,CAArC;;AAEA,UAAIE,OAAO,GAAG,OAAOD,QAAQ,WAAf,KAA4B,UAA5B,IAA0C,SAAOF,UAAU,WAAjB,MAA8B,QAAxE,GAAmF,UAAUvf,GAAV,EAAe;AAAE,wBAAcA,GAAd;AAAoB,OAAxH,GAA2H,UAAUA,GAAV,EAAe;AAAE,eAAOA,GAAG,IAAI,OAAOyf,QAAQ,WAAf,KAA4B,UAAnC,IAAiDzf,GAAG,CAAC5B,WAAJ,KAAoBqhB,QAAQ,WAA7E,IAAyFzf,GAAG,KAAKyf,QAAQ,WAAR,CAAiB7iB,SAAlH,GAA8H,QAA9H,YAAgJoD,GAAhJ,CAAP;AAA6J,OAAvT;;AAEA,eAASyW,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,OAAOykB,QAAQ,WAAf,KAA4B,UAA5B,IAA0CC,OAAO,CAACH,UAAU,WAAX,CAAP,KAAgC,QAA1E,GAAqF,UAAUvf,GAAV,EAAe;AACpH,eAAO,OAAOA,GAAP,KAAe,WAAf,GAA6B,WAA7B,GAA2C0f,OAAO,CAAC1f,GAAD,CAAzD;AACD,OAFiB,GAEd,UAAUA,GAAV,EAAe;AACjB,eAAOA,GAAG,IAAI,OAAOyf,QAAQ,WAAf,KAA4B,UAAnC,IAAiDzf,GAAG,CAAC5B,WAAJ,KAAoBqhB,QAAQ,WAA7E,IAAyFzf,GAAG,KAAKyf,QAAQ,WAAR,CAAiB7iB,SAAlH,GAA8H,QAA9H,GAAyI,OAAOoD,GAAP,KAAe,WAAf,GAA6B,WAA7B,GAA2C0f,OAAO,CAAC1f,GAAD,CAAlM;AACD,OAJD;AAMA;AAAO,KApqFG;AAqqFV;;AACA;AAAO,cAAS/E,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIqkB,UAAU,GAAGrkB,mBAAmB,CAAC,EAAD,CAAnB,CAAwB8M,MAAxB,CAA+B,QAA/B,EAAyC,WAAzC,CAAjB;;AAEApN,MAAAA,OAAO,CAACqS,CAAR,GAAYpR,MAAM,CAAC2jB,mBAAP,IAA8B,SAASA,mBAAT,CAA6BtS,CAA7B,EAAgC;AACxE,eAAOgI,KAAK,CAAChI,CAAD,EAAIqS,UAAJ,CAAZ;AACD,OAFD;AAKA;;AAAO,KAjrFG;AAkrFV;;AACA;AAAO,cAAS1kB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIukB,GAAG,GAAGvkB,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI6R,WAAW,GAAG7R,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI4R,cAAc,GAAG5R,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIwkB,IAAI,GAAG7jB,MAAM,CAAC8jB,wBAAlB;AAEA/kB,MAAAA,OAAO,CAACqS,CAAR,GAAY/R,mBAAmB,CAAC,CAAD,CAAnB,GAAyBwkB,IAAzB,GAAgC,SAASC,wBAAT,CAAkCzS,CAAlC,EAAqC5L,CAArC,EAAwC;AAClF4L,QAAAA,CAAC,GAAG+O,SAAS,CAAC/O,CAAD,CAAb;AACA5L,QAAAA,CAAC,GAAGyL,WAAW,CAACzL,CAAD,EAAI,IAAJ,CAAf;AACA,YAAIwL,cAAJ,EAAoB,IAAI;AACtB,iBAAO4S,IAAI,CAACxS,CAAD,EAAI5L,CAAJ,CAAX;AACD,SAFmB,CAElB,OAAOiE,CAAP,EAAU;AAAE;AAAa;AAC3B,YAAI7E,GAAG,CAACwM,CAAD,EAAI5L,CAAJ,CAAP,EAAe,OAAOuO,UAAU,CAAC,CAAC4P,GAAG,CAACxS,CAAJ,CAAM3R,IAAN,CAAW4R,CAAX,EAAc5L,CAAd,CAAF,EAAoB4L,CAAC,CAAC5L,CAAD,CAArB,CAAjB;AAChB,OAPD;AAUA;AAAO,KAvsFG;AAwsFV;;AACA;AAAO,cAASzG,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIyjB,eAAe,GAAG1kB,mBAAmB,CAAC,GAAD,CAAzC;;AAEA,UAAI2kB,gBAAgB,GAAGxJ,sBAAsB,CAACuJ,eAAD,CAA7C;;AAEA,UAAIE,OAAO,GAAG5kB,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAI6kB,QAAQ,GAAG1J,sBAAsB,CAACyJ,OAAD,CAArC;;AAEA,UAAIf,QAAQ,GAAG7jB,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,UAAI8jB,QAAQ,GAAG3I,sBAAsB,CAAC0I,QAAD,CAArC;;AAEA,eAAS1I,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUolB,QAAV,EAAoBC,UAApB,EAAgC;AAChD,YAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAC3D,gBAAM,IAAIrT,SAAJ,CAAc,8DAA8D,OAAOqT,UAAP,KAAsB,WAAtB,GAAoC,WAApC,GAAkD,CAAC,GAAGjB,QAAQ,WAAZ,EAAsBiB,UAAtB,CAAhH,CAAd,CAAN;AACD;;AAEDD,QAAAA,QAAQ,CAACxjB,SAAT,GAAqB,CAAC,GAAGujB,QAAQ,WAAZ,EAAsBE,UAAU,IAAIA,UAAU,CAACzjB,SAA/C,EAA0D;AAC7EwB,UAAAA,WAAW,EAAE;AACXsE,YAAAA,KAAK,EAAE0d,QADI;AAEXhkB,YAAAA,UAAU,EAAE,KAFD;AAGX2Y,YAAAA,QAAQ,EAAE,IAHC;AAIX5Y,YAAAA,YAAY,EAAE;AAJH;AADgE,SAA1D,CAArB;AAQA,YAAIkkB,UAAJ,EAAgBJ,gBAAgB,WAAhB,GAA2B,CAAC,GAAGA,gBAAgB,WAApB,EAA8BG,QAA9B,EAAwCC,UAAxC,CAA3B,GAAiFD,QAAQ,CAACE,SAAT,GAAqBD,UAAtG;AACjB,OAdD;AAgBA;;AAAO,KA9uFG;AA+uFV;;AACA;AAAO,cAASplB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA1H,MAAAA,OAAO,CAACulB,gBAAR,GAA2BvlB,OAAO,CAACwlB,cAAR,GAAyBxlB,OAAO,CAACylB,cAAR,GAAyBzlB,OAAO,CAAC0lB,WAAR,GAAsB1lB,OAAO,CAAC2lB,SAAR,GAAoB3lB,OAAO,CAAC4lB,cAAR,GAAyB5lB,OAAO,CAAC6lB,UAAR,GAAqB1e,SAArK;;AAEA,UAAI2e,KAAK,GAAGxlB,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAIylB,MAAM,GAAGtK,sBAAsB,CAACqK,KAAD,CAAnC;;AAEA,UAAIE,eAAe,GAAG1lB,mBAAmB,CAAC,GAAD,CAAzC;;AAEA,UAAI2lB,eAAe,GAAGxK,sBAAsB,CAACuK,eAAD,CAA5C;;AAEA,UAAIE,MAAM,GAAG5lB,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAI6lB,OAAO,GAAG1K,sBAAsB,CAACyK,MAAD,CAApC;;AAEA,eAASzK,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI6gB,UAAU,GAAG7lB,OAAO,CAAC6lB,UAAR,GAAqB,SAASA,UAAT,GAAsB;AAC1D,YAAIO,MAAM,GAAG9gB,SAAS,CAACJ,MAAV,GAAmB,CAAnB,IAAwBI,SAAS,CAAC,CAAD,CAAT,KAAiB6B,SAAzC,GAAqD7B,SAAS,CAAC,CAAD,CAA9D,GAAoElD,MAAM,CAACikB,QAAP,CAAgBD,MAAjG;AAEA,YAAI,CAACA,MAAL,EAAa,OAAO,EAAP;AACb,YAAIE,WAAW,GAAGF,MAAM,CAAC,CAAD,CAAN,KAAc,GAAd,GAAoBA,MAAM,CAACG,SAAP,CAAiB,CAAjB,CAApB,GAA0CH,MAA5D;AACA,YAAII,KAAK,GAAG,EAAZ;AACAF,QAAAA,WAAW,CAACxd,KAAZ,CAAkB,GAAlB,EAAuB/D,OAAvB,CAA+B,UAAU0hB,QAAV,EAAoB;AACjD,cAAIC,eAAe,GAAGD,QAAQ,CAAC3d,KAAT,CAAe,GAAf,CAAtB;AAAA,cACI6d,gBAAgB,GAAG,CAAC,GAAGV,eAAe,WAAnB,EAA6BS,eAA7B,EAA8C,CAA9C,CADvB;AAAA,cAEIvhB,GAAG,GAAGwhB,gBAAgB,CAAC,CAAD,CAF1B;AAAA,cAGIjf,KAAK,GAAGif,gBAAgB,CAAC,CAAD,CAH5B;AAIA;;;AAGA,cAAIxhB,GAAJ,EAASqhB,KAAK,CAACI,kBAAkB,CAACzhB,GAAD,CAAnB,CAAL,GAAiCyhB,kBAAkB,CAAClf,KAAD,CAAnD;AACV,SATD;AAWA,eAAO8e,KAAP;AACD,OAlBD;;AAoBA,UAAIZ,cAAc,GAAG5lB,OAAO,CAAC4lB,cAAR,GAAyB,SAASA,cAAT,CAAwBY,KAAxB,EAA+B;AAC3E,YAAIF,WAAW,GAAG,CAAC,GAAGP,MAAM,WAAV,EAAoBS,KAApB,EAA2B1Z,GAA3B,CAA+B,UAAU3H,GAAV,EAAe;AAC9D,iBAAOA,GAAG,GAAG,GAAN,GAAY0hB,kBAAkB,CAACL,KAAK,CAACrhB,GAAD,CAAL,IAAc,EAAf,CAArC;AACD,SAFiB,EAEf2hB,IAFe,CAEV,GAFU,CAAlB;AAGA,eAAOR,WAAP;AACD,OALD;;AAOA,UAAIX,SAAS,GAAG3lB,OAAO,CAAC2lB,SAAR,GAAoBQ,OAAO,WAAP,CAAgB/I,MAAhB,CAAuB;AACzD2J,QAAAA,OAAO,EAAE;AACP,oBAAU;AADH;AADgD,OAAvB,CAApC;;AAMA,UAAIrB,WAAW,GAAG1lB,OAAO,CAAC0lB,WAAR,GAAsBS,OAAO,WAAP,CAAgB/I,MAAhB,CAAuB;AAC7D4J,QAAAA,OAAO,EAAE,wBADoD;AAE7DD,QAAAA,OAAO,EAAE;AACP,oBAAU;AADH;AAFoD,OAAvB,CAAxC;;AAOA,UAAItB,cAAc,GAAGzlB,OAAO,CAACylB,cAAR,GAAyB,SAASA,cAAT,CAAwB3kB,IAAxB,EAA8BmmB,OAA9B,EAAuC;AACnF;AACAA,QAAAA,OAAO,KAAKA,OAAO,GAAG,SAAf,CAAP;AACA;;AACA,YAAIC,EAAE,GAAG9kB,MAAM,CAAC0C,QAAP,CAAgBqiB,aAAhB,CAA8B,iBAAiBrmB,IAAjB,GAAwB,KAAtD,CAAT;AACA;;AACA,eAAOomB,EAAE,IAAIA,EAAE,CAACE,YAAH,CAAgBH,OAAhB,CAAb;AACD,OAPD;;AASA,UAAIzB,cAAc,GAAGxlB,OAAO,CAACwlB,cAAR,GAAyB,SAASA,cAAT,CAAwB6B,GAAxB,EAA6B;AACzE,YAAIC,GAAG,GAAG,SAAV;;AACA,YAAID,GAAG,CAACE,QAAJ,IAAgBF,GAAG,CAACE,QAAJ,CAAazE,IAA7B,IAAqCuE,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB0E,OAA3D,EAAoE;AAClEF,UAAAA,GAAG,IAAID,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB0E,OAAlB,GAA4B,IAAnC;AACAH,UAAAA,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB2E,MAAlB,KAA6BH,GAAG,IAAID,GAAG,CAACE,QAAJ,CAAazE,IAAb,CAAkB2E,MAAlB,CAAyB3a,GAAzB,CAA6B,UAAUnC,CAAV,EAAa;AAC5E,mBAAOA,CAAC,CAAC6c,OAAT;AACD,WAFmC,EAEjCV,IAFiC,CAE5B,IAF4B,CAApC;AAGD,SALD,MAKO;AACLQ,UAAAA,GAAG,IAAID,GAAG,CAACG,OAAX;AACD;;AACD,eAAOF,GAAP;AACD,OAXD;;AAaA,UAAI/B,gBAAgB,GAAGvlB,OAAO,CAACulB,gBAAR,GAA2B,SAASA,gBAAT,CAA0BhX,OAA1B,EAAmC;AACnF,aAAK,IAAImZ,IAAI,GAAGpiB,SAAS,CAACJ,MAArB,EAA6BqK,SAAS,GAAGpC,KAAK,CAACua,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAvB,CAA9C,EAAyEC,IAAI,GAAG,CAArF,EAAwFA,IAAI,GAAGD,IAA/F,EAAqGC,IAAI,EAAzG,EAA6G;AAC3GpY,UAAAA,SAAS,CAACoY,IAAI,GAAG,CAAR,CAAT,GAAsBriB,SAAS,CAACqiB,IAAD,CAA/B;AACD;AAED;;;AACA,YAAIC,GAAG,GAAG,KAAV;AACA;;AACA,YAAI,OAAOrZ,OAAO,CAACgB,SAAf,KAA6B,WAAjC,EAA8C,OAAO,KAAP;AAC9C;;AACA,YAAIsY,OAAO,GAAGtZ,OAAO,CAACgB,SAAR,CAAkBzG,KAAlB,CAAwB,GAAxB,CAAd;AACA;;AACAyG,QAAAA,SAAS,CAACxK,OAAV,CAAkB,UAAUnE,CAAV,EAAaJ,CAAb,EAAgB;AAChC;AACAonB,UAAAA,GAAG,GAAGA,GAAG,IAAIC,OAAO,CAAC1I,OAAR,CAAgBve,CAAhB,KAAsB,CAAnC;AACD,SAHD;AAIA;;AACA,YAAIgnB,GAAJ,EAAS,OAAOA,GAAP;AACT;;AACA,eAAOrZ,OAAO,CAACtC,UAAR,IAAsBsZ,gBAAgB,CAAChX,OAAO,CAACtC,UAAT,EAAqBsD,SAArB,CAA7C;AACD,OApBD;AAsBA;;AAAO,KA51FG;AA61FV;;AACA;AAAO,cAAStP,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS8C,IAAT,CAAcmC,EAAd,EAAkBU,OAAlB,EAA2B;AAC1C,eAAO,SAASgH,IAAT,GAAgB;AACrB,cAAIsB,IAAI,GAAG,IAAId,KAAJ,CAAU7H,SAAS,CAACJ,MAApB,CAAX;;AACA,eAAK,IAAI1E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyN,IAAI,CAAC/I,MAAzB,EAAiC1E,CAAC,EAAlC,EAAsC;AACpCyN,YAAAA,IAAI,CAACzN,CAAD,CAAJ,GAAU8E,SAAS,CAAC9E,CAAD,CAAnB;AACD;;AACD,iBAAOyE,EAAE,CAACoC,KAAH,CAAS1B,OAAT,EAAkBsI,IAAlB,CAAP;AACD,SAND;AAOD,OARD;AAWA;;AAAO,KA92FG;AA+2FV;;AACA;AAAO,cAAShO,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEA,eAASynB,MAAT,CAAgB9kB,GAAhB,EAAqB;AACnB,eAAO4jB,kBAAkB,CAAC5jB,GAAD,CAAlB,CACLyB,OADK,CACG,OADH,EACY,GADZ,EAELA,OAFK,CAEG,OAFH,EAEY,GAFZ,EAGLA,OAHK,CAGG,MAHH,EAGW,GAHX,EAILA,OAJK,CAIG,OAJH,EAIY,GAJZ,EAKLA,OALK,CAKG,MALH,EAKW,GALX,EAMLA,OANK,CAMG,OANH,EAMY,GANZ,EAOLA,OAPK,CAOG,OAPH,EAOY,GAPZ,CAAP;AAQD;AAED;;;;;;;;;AAOAzE,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASgoB,QAAT,CAAkBC,GAAlB,EAAuBC,MAAvB,EAA+BC,gBAA/B,EAAiD;AAChE;AACA,YAAI,CAACD,MAAL,EAAa;AACX,iBAAOD,GAAP;AACD;;AAED,YAAIG,gBAAJ;;AACA,YAAID,gBAAJ,EAAsB;AACpBC,UAAAA,gBAAgB,GAAGD,gBAAgB,CAACD,MAAD,CAAnC;AACD,SAFD,MAEO,IAAIJ,KAAK,CAACxjB,iBAAN,CAAwB4jB,MAAxB,CAAJ,EAAqC;AAC1CE,UAAAA,gBAAgB,GAAGF,MAAM,CAACnlB,QAAP,EAAnB;AACD,SAFM,MAEA;AACL,cAAIslB,KAAK,GAAG,EAAZ;AAEAP,UAAAA,KAAK,CAAC/iB,OAAN,CAAcmjB,MAAd,EAAsB,SAASI,SAAT,CAAmBrlB,GAAnB,EAAwBkC,GAAxB,EAA6B;AACjD,gBAAIlC,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,WAAnC,EAAgD;AAC9C;AACD;;AAED,gBAAI6kB,KAAK,CAAC9kB,OAAN,CAAcC,GAAd,CAAJ,EAAwB;AACtBkC,cAAAA,GAAG,GAAGA,GAAG,GAAG,IAAZ;AACD,aAFD,MAEO;AACLlC,cAAAA,GAAG,GAAG,CAACA,GAAD,CAAN;AACD;;AAED6kB,YAAAA,KAAK,CAAC/iB,OAAN,CAAc9B,GAAd,EAAmB,SAASslB,UAAT,CAAoBhe,CAApB,EAAuB;AACxC,kBAAIud,KAAK,CAAC9jB,MAAN,CAAauG,CAAb,CAAJ,EAAqB;AACnBA,gBAAAA,CAAC,GAAGA,CAAC,CAACie,WAAF,EAAJ;AACD,eAFD,MAEO,IAAIV,KAAK,CAAC/jB,QAAN,CAAewG,CAAf,CAAJ,EAAuB;AAC5BA,gBAAAA,CAAC,GAAGke,IAAI,CAACC,SAAL,CAAene,CAAf,CAAJ;AACD;;AACD8d,cAAAA,KAAK,CAAC1Z,IAAN,CAAWoZ,MAAM,CAAC5iB,GAAD,CAAN,GAAc,GAAd,GAAoB4iB,MAAM,CAACxd,CAAD,CAArC;AACD,aAPD;AAQD,WAnBD;AAqBA6d,UAAAA,gBAAgB,GAAGC,KAAK,CAACvB,IAAN,CAAW,GAAX,CAAnB;AACD;;AAED,YAAIsB,gBAAJ,EAAsB;AACpB,cAAIO,aAAa,GAAGV,GAAG,CAAC9I,OAAJ,CAAY,GAAZ,CAApB;;AACA,cAAIwJ,aAAa,KAAK,CAAC,CAAvB,EAA0B;AACxBV,YAAAA,GAAG,GAAGA,GAAG,CAACxP,KAAJ,CAAU,CAAV,EAAakQ,aAAb,CAAN;AACD;;AAEDV,UAAAA,GAAG,IAAI,CAACA,GAAG,CAAC9I,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAAtB,GAA0B,GAA1B,GAAgC,GAAjC,IAAwCiJ,gBAA/C;AACD;;AAED,eAAOH,GAAP;AACD,OAhDD;AAmDA;;AAAO,KA57FG;AA67FV;;AACA;AAAO,cAAShoB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS4oB,QAAT,CAAkBlhB,KAAlB,EAAyB;AACxC,eAAO,CAAC,EAAEA,KAAK,IAAIA,KAAK,CAACmhB,UAAjB,CAAR;AACD,OAFD;AAKA;;AAAO,KAx8FG;AAy8FV;;AACA;AAAO,cAAS5oB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAE9C,YAAImgB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,YAAIwoB,mBAAmB,GAAGxoB,mBAAmB,CAAC,GAAD,CAA7C;;AAEA,YAAIyoB,oBAAoB,GAAG;AACzB,0BAAgB;AADS,SAA3B;;AAIA,iBAASC,qBAAT,CAA+BjC,OAA/B,EAAwCrf,KAAxC,EAA+C;AAC7C,cAAI,CAACogB,KAAK,CAAC5kB,WAAN,CAAkB6jB,OAAlB,CAAD,IAA+Be,KAAK,CAAC5kB,WAAN,CAAkB6jB,OAAO,CAAC,cAAD,CAAzB,CAAnC,EAA+E;AAC7EA,YAAAA,OAAO,CAAC,cAAD,CAAP,GAA0Brf,KAA1B;AACD;AACF;;AAED,iBAASuhB,iBAAT,GAA6B;AAC3B,cAAIC,OAAJ;;AACA,cAAI,OAAOC,cAAP,KAA0B,WAA9B,EAA2C;AACzC;AACAD,YAAAA,OAAO,GAAG5oB,mBAAmB,CAAC,EAAD,CAA7B;AACD,WAHD,MAGO,IAAI,OAAOqH,OAAP,KAAmB,WAAnB,IAAkC1G,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+BiH,OAA/B,MAA4C,kBAAlF,EAAsG;AAC3G;AACAuhB,YAAAA,OAAO,GAAG5oB,mBAAmB,CAAC,EAAD,CAA7B;AACD;;AACD,iBAAO4oB,OAAP;AACD;;AAED,YAAIE,QAAQ,GAAG;AACbF,UAAAA,OAAO,EAAED,iBAAiB,EADb;AAGbI,UAAAA,gBAAgB,EAAE,CAAC,SAASA,gBAAT,CAA0BvG,IAA1B,EAAgCiE,OAAhC,EAAyC;AAC1D+B,YAAAA,mBAAmB,CAAC/B,OAAD,EAAU,QAAV,CAAnB;AACA+B,YAAAA,mBAAmB,CAAC/B,OAAD,EAAU,cAAV,CAAnB;;AACA,gBAAIe,KAAK,CAACxkB,UAAN,CAAiBwf,IAAjB,KACFgF,KAAK,CAACzkB,aAAN,CAAoByf,IAApB,CADE,IAEFgF,KAAK,CAAC3kB,QAAN,CAAe2f,IAAf,CAFE,IAGFgF,KAAK,CAAC1jB,QAAN,CAAe0e,IAAf,CAHE,IAIFgF,KAAK,CAAC7jB,MAAN,CAAa6e,IAAb,CAJE,IAKFgF,KAAK,CAAC5jB,MAAN,CAAa4e,IAAb,CALF,EAME;AACA,qBAAOA,IAAP;AACD;;AACD,gBAAIgF,KAAK,CAACtkB,iBAAN,CAAwBsf,IAAxB,CAAJ,EAAmC;AACjC,qBAAOA,IAAI,CAAClf,MAAZ;AACD;;AACD,gBAAIkkB,KAAK,CAACxjB,iBAAN,CAAwBwe,IAAxB,CAAJ,EAAmC;AACjCkG,cAAAA,qBAAqB,CAACjC,OAAD,EAAU,iDAAV,CAArB;AACA,qBAAOjE,IAAI,CAAC/f,QAAL,EAAP;AACD;;AACD,gBAAI+kB,KAAK,CAAC/jB,QAAN,CAAe+e,IAAf,CAAJ,EAA0B;AACxBkG,cAAAA,qBAAqB,CAACjC,OAAD,EAAU,gCAAV,CAArB;AACA,qBAAO0B,IAAI,CAACC,SAAL,CAAe5F,IAAf,CAAP;AACD;;AACD,mBAAOA,IAAP;AACD,WAxBiB,CAHL;AA6BbwG,UAAAA,iBAAiB,EAAE,CAAC,SAASA,iBAAT,CAA2BxG,IAA3B,EAAiC;AACnD;AACA,gBAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,kBAAI;AACFA,gBAAAA,IAAI,GAAG2F,IAAI,CAAC7R,KAAL,CAAWkM,IAAX,CAAP;AACD,eAFD,CAEE,OAAOnY,CAAP,EAAU;AAAE;AAAc;AAC7B;;AACD,mBAAOmY,IAAP;AACD,WARkB,CA7BN;;AAuCb;;;;AAIAtP,UAAAA,OAAO,EAAE,CA3CI;AA6Cb+V,UAAAA,cAAc,EAAE,YA7CH;AA8CbC,UAAAA,cAAc,EAAE,cA9CH;AAgDbC,UAAAA,gBAAgB,EAAE,CAAC,CAhDN;AAkDbC,UAAAA,cAAc,EAAE,SAASA,cAAT,CAAwBC,MAAxB,EAAgC;AAC9C,mBAAOA,MAAM,IAAI,GAAV,IAAiBA,MAAM,GAAG,GAAjC;AACD;AApDY,SAAf;AAuDAP,QAAAA,QAAQ,CAACrC,OAAT,GAAmB;AACjB6C,UAAAA,MAAM,EAAE;AACN,sBAAU;AADJ;AADS,SAAnB;AAMA9B,QAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,CAAd,EAAyC,SAAS8kB,mBAAT,CAA6BC,MAA7B,EAAqC;AAC5EV,UAAAA,QAAQ,CAACrC,OAAT,CAAiB+C,MAAjB,IAA2B,EAA3B;AACD,SAFD;AAIAhC,QAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,CAAd,EAAwC,SAASglB,qBAAT,CAA+BD,MAA/B,EAAuC;AAC7EV,UAAAA,QAAQ,CAACrC,OAAT,CAAiB+C,MAAjB,IAA2BhC,KAAK,CAAC1iB,KAAN,CAAY2jB,oBAAZ,CAA3B;AACD,SAFD;AAIA9oB,QAAAA,MAAM,CAACD,OAAP,GAAiBopB,QAAjB;AAEA;AAA4B,OAlGA,EAkGC1oB,IAlGD,CAkGMV,OAlGN,EAkGeM,mBAAmB,CAAC,CAAD,CAlGlC,CAAD;AAoG3B;AAAO,KAjjGG;AAkjGV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAI0pB,MAAM,GAAG1pB,mBAAmB,CAAC,GAAD,CAAhC;;AACA,UAAI0nB,QAAQ,GAAG1nB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI2pB,aAAa,GAAG3pB,mBAAmB,CAAC,GAAD,CAAvC;;AACA,UAAI4pB,YAAY,GAAG5pB,mBAAmB,CAAC,GAAD,CAAtC;;AACA,UAAI6pB,eAAe,GAAG7pB,mBAAmB,CAAC,GAAD,CAAzC;;AACA,UAAI8pB,WAAW,GAAG9pB,mBAAmB,CAAC,EAAD,CAArC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASqqB,UAAT,CAAoBC,MAApB,EAA4B;AAC3C,eAAO,IAAIC,OAAJ,CAAY,SAASC,kBAAT,CAA4BnM,OAA5B,EAAqCC,MAArC,EAA6C;AAC9D,cAAImM,WAAW,GAAGH,MAAM,CAACxH,IAAzB;AACA,cAAI4H,cAAc,GAAGJ,MAAM,CAACvD,OAA5B;;AAEA,cAAIe,KAAK,CAACxkB,UAAN,CAAiBmnB,WAAjB,CAAJ,EAAmC;AACjC,mBAAOC,cAAc,CAAC,cAAD,CAArB,CADiC,CACM;AACxC;;AAED,cAAIC,OAAO,GAAG,IAAIxB,cAAJ,EAAd,CAR8D,CAU9D;;AACA,cAAImB,MAAM,CAACM,IAAX,EAAiB;AACf,gBAAIC,QAAQ,GAAGP,MAAM,CAACM,IAAP,CAAYC,QAAZ,IAAwB,EAAvC;AACA,gBAAIC,QAAQ,GAAGR,MAAM,CAACM,IAAP,CAAYE,QAAZ,IAAwB,EAAvC;AACAJ,YAAAA,cAAc,CAACK,aAAf,GAA+B,WAAWC,IAAI,CAACH,QAAQ,GAAG,GAAX,GAAiBC,QAAlB,CAA9C;AACD;;AAED,cAAIG,QAAQ,GAAGhB,aAAa,CAACK,MAAM,CAACtD,OAAR,EAAiBsD,MAAM,CAACrC,GAAxB,CAA5B;AACA0C,UAAAA,OAAO,CAAC1N,IAAR,CAAaqN,MAAM,CAACR,MAAP,CAAcoB,WAAd,EAAb,EAA0ClD,QAAQ,CAACiD,QAAD,EAAWX,MAAM,CAACpC,MAAlB,EAA0BoC,MAAM,CAACnC,gBAAjC,CAAlD,EAAsG,IAAtG,EAlB8D,CAoB9D;;AACAwC,UAAAA,OAAO,CAACnX,OAAR,GAAkB8W,MAAM,CAAC9W,OAAzB,CArB8D,CAuB9D;;AACAmX,UAAAA,OAAO,CAACQ,kBAAR,GAA6B,SAASC,UAAT,GAAsB;AACjD,gBAAI,CAACT,OAAD,IAAYA,OAAO,CAACU,UAAR,KAAuB,CAAvC,EAA0C;AACxC;AACD,aAHgD,CAKjD;AACA;AACA;AACA;;;AACA,gBAAIV,OAAO,CAAChB,MAAR,KAAmB,CAAnB,IAAwB,EAAEgB,OAAO,CAACW,WAAR,IAAuBX,OAAO,CAACW,WAAR,CAAoBnM,OAApB,CAA4B,OAA5B,MAAyC,CAAlE,CAA5B,EAAkG;AAChG;AACD,aAXgD,CAajD;;;AACA,gBAAIoM,eAAe,GAAG,2BAA2BZ,OAA3B,GAAqCT,YAAY,CAACS,OAAO,CAACa,qBAAR,EAAD,CAAjD,GAAqF,IAA3G;AACA,gBAAIC,YAAY,GAAG,CAACnB,MAAM,CAACoB,YAAR,IAAwBpB,MAAM,CAACoB,YAAP,KAAwB,MAAhD,GAAyDf,OAAO,CAACgB,YAAjE,GAAgFhB,OAAO,CAACpD,QAA3G;AACA,gBAAIA,QAAQ,GAAG;AACbzE,cAAAA,IAAI,EAAE2I,YADO;AAEb9B,cAAAA,MAAM,EAAEgB,OAAO,CAAChB,MAFH;AAGbiC,cAAAA,UAAU,EAAEjB,OAAO,CAACiB,UAHP;AAIb7E,cAAAA,OAAO,EAAEwE,eAJI;AAKbjB,cAAAA,MAAM,EAAEA,MALK;AAMbK,cAAAA,OAAO,EAAEA;AANI,aAAf;AASAX,YAAAA,MAAM,CAAC3L,OAAD,EAAUC,MAAV,EAAkBiJ,QAAlB,CAAN,CAzBiD,CA2BjD;;AACAoD,YAAAA,OAAO,GAAG,IAAV;AACD,WA7BD,CAxB8D,CAuD9D;;;AACAA,UAAAA,OAAO,CAACkB,OAAR,GAAkB,SAASC,WAAT,GAAuB;AACvC,gBAAI,CAACnB,OAAL,EAAc;AACZ;AACD;;AAEDrM,YAAAA,MAAM,CAAC8L,WAAW,CAAC,iBAAD,EAAoBE,MAApB,EAA4B,cAA5B,EAA4CK,OAA5C,CAAZ,CAAN,CALuC,CAOvC;;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD,WATD,CAxD8D,CAmE9D;;;AACAA,UAAAA,OAAO,CAACoB,OAAR,GAAkB,SAASC,WAAT,GAAuB;AACvC;AACA;AACA1N,YAAAA,MAAM,CAAC8L,WAAW,CAAC,eAAD,EAAkBE,MAAlB,EAA0B,IAA1B,EAAgCK,OAAhC,CAAZ,CAAN,CAHuC,CAKvC;;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD,WAPD,CApE8D,CA6E9D;;;AACAA,UAAAA,OAAO,CAACsB,SAAR,GAAoB,SAASC,aAAT,GAAyB;AAC3C,gBAAIC,mBAAmB,GAAG,gBAAgB7B,MAAM,CAAC9W,OAAvB,GAAiC,aAA3D;;AACA,gBAAI8W,MAAM,CAAC6B,mBAAX,EAAgC;AAC9BA,cAAAA,mBAAmB,GAAG7B,MAAM,CAAC6B,mBAA7B;AACD;;AACD7N,YAAAA,MAAM,CAAC8L,WAAW,CAAC+B,mBAAD,EAAsB7B,MAAtB,EAA8B,cAA9B,EAChBK,OADgB,CAAZ,CAAN,CAL2C,CAQ3C;;AACAA,YAAAA,OAAO,GAAG,IAAV;AACD,WAVD,CA9E8D,CA0F9D;AACA;AACA;;;AACA,cAAI7C,KAAK,CAACnjB,oBAAN,EAAJ,EAAkC;AAChC,gBAAIynB,OAAO,GAAG9rB,mBAAmB,CAAC,GAAD,CAAjC,CADgC,CAGhC;;;AACA,gBAAI+rB,SAAS,GAAG,CAAC/B,MAAM,CAACgC,eAAP,IAA0BnC,eAAe,CAACc,QAAD,CAA1C,KAAyDX,MAAM,CAACf,cAAhE,GACd6C,OAAO,CAACG,IAAR,CAAajC,MAAM,CAACf,cAApB,CADc,GAEdpiB,SAFF;;AAIA,gBAAIklB,SAAJ,EAAe;AACb3B,cAAAA,cAAc,CAACJ,MAAM,CAACd,cAAR,CAAd,GAAwC6C,SAAxC;AACD;AACF,WAxG6D,CA0G9D;;;AACA,cAAI,sBAAsB1B,OAA1B,EAAmC;AACjC7C,YAAAA,KAAK,CAAC/iB,OAAN,CAAc2lB,cAAd,EAA8B,SAAS8B,gBAAT,CAA0BvpB,GAA1B,EAA+BkC,GAA/B,EAAoC;AAChE,kBAAI,OAAOslB,WAAP,KAAuB,WAAvB,IAAsCtlB,GAAG,CAACwG,WAAJ,OAAsB,cAAhE,EAAgF;AAC9E;AACA,uBAAO+e,cAAc,CAACvlB,GAAD,CAArB;AACD,eAHD,MAGO;AACL;AACAwlB,gBAAAA,OAAO,CAAC6B,gBAAR,CAAyBrnB,GAAzB,EAA8BlC,GAA9B;AACD;AACF,aARD;AASD,WArH6D,CAuH9D;;;AACA,cAAI,CAAC6kB,KAAK,CAAC5kB,WAAN,CAAkBonB,MAAM,CAACgC,eAAzB,CAAL,EAAgD;AAC9C3B,YAAAA,OAAO,CAAC2B,eAAR,GAA0B,CAAC,CAAChC,MAAM,CAACgC,eAAnC;AACD,WA1H6D,CA4H9D;;;AACA,cAAIhC,MAAM,CAACoB,YAAX,EAAyB;AACvB,gBAAI;AACFf,cAAAA,OAAO,CAACe,YAAR,GAAuBpB,MAAM,CAACoB,YAA9B;AACD,aAFD,CAEE,OAAO/gB,CAAP,EAAU;AACV;AACA;AACA,kBAAI2f,MAAM,CAACoB,YAAP,KAAwB,MAA5B,EAAoC;AAClC,sBAAM/gB,CAAN;AACD;AACF;AACF,WAvI6D,CAyI9D;;;AACA,cAAI,OAAO2f,MAAM,CAACmC,kBAAd,KAAqC,UAAzC,EAAqD;AACnD9B,YAAAA,OAAO,CAACvH,gBAAR,CAAyB,UAAzB,EAAqCkH,MAAM,CAACmC,kBAA5C;AACD,WA5I6D,CA8I9D;;;AACA,cAAI,OAAOnC,MAAM,CAACoC,gBAAd,KAAmC,UAAnC,IAAiD/B,OAAO,CAACgC,MAA7D,EAAqE;AACnEhC,YAAAA,OAAO,CAACgC,MAAR,CAAevJ,gBAAf,CAAgC,UAAhC,EAA4CkH,MAAM,CAACoC,gBAAnD;AACD;;AAED,cAAIpC,MAAM,CAACsC,WAAX,EAAwB;AACtB;AACAtC,YAAAA,MAAM,CAACsC,WAAP,CAAmBrO,OAAnB,CAA2BsO,IAA3B,CAAgC,SAASC,UAAT,CAAoBC,MAApB,EAA4B;AAC1D,kBAAI,CAACpC,OAAL,EAAc;AACZ;AACD;;AAEDA,cAAAA,OAAO,CAACqC,KAAR;AACA1O,cAAAA,MAAM,CAACyO,MAAD,CAAN,CAN0D,CAO1D;;AACApC,cAAAA,OAAO,GAAG,IAAV;AACD,aATD;AAUD;;AAED,cAAIF,WAAW,KAAKtjB,SAApB,EAA+B;AAC7BsjB,YAAAA,WAAW,GAAG,IAAd;AACD,WAnK6D,CAqK9D;;;AACAE,UAAAA,OAAO,CAACsC,IAAR,CAAaxC,WAAb;AACD,SAvKM,CAAP;AAwKD,OAzKD;AA4KA;;AAAO,KA5uGG;AA6uGV;;AACA;AAAO,cAASxqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI4sB,YAAY,GAAG5sB,mBAAmB,CAAC,GAAD,CAAtC;AAEA;;;;;;;;;;;;AAUAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASoqB,WAAT,CAAqB5C,OAArB,EAA8B8C,MAA9B,EAAsC6C,IAAtC,EAA4CxC,OAA5C,EAAqDpD,QAArD,EAA+D;AAC9E,YAAI6F,KAAK,GAAG,IAAIlgB,KAAJ,CAAUsa,OAAV,CAAZ;AACA,eAAO0F,YAAY,CAACE,KAAD,EAAQ9C,MAAR,EAAgB6C,IAAhB,EAAsBxC,OAAtB,EAA+BpD,QAA/B,CAAnB;AACD,OAHD;AAMA;;AAAO,KArwGG;AAswGV;;AACA;AAAO,cAAStnB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;AAEA;;;;;;;;;;AAQAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASqtB,WAAT,CAAqBC,OAArB,EAA8BC,OAA9B,EAAuC;AACtD;AACAA,QAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,YAAIjD,MAAM,GAAG,EAAb;AAEA,YAAIkD,oBAAoB,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,MAA5B,CAA3B;AACA,YAAIC,uBAAuB,GAAG,CAAC,SAAD,EAAY,MAAZ,EAAoB,OAApB,CAA9B;AACA,YAAIC,oBAAoB,GAAG,CACzB,SADyB,EACd,KADc,EACP,kBADO,EACa,mBADb,EACkC,kBADlC,EAEzB,SAFyB,EAEd,iBAFc,EAEK,SAFL,EAEgB,cAFhB,EAEgC,gBAFhC,EAGzB,gBAHyB,EAGP,kBAHO,EAGa,oBAHb,EAIzB,kBAJyB,EAIL,gBAJK,EAIa,cAJb,EAI6B,WAJ7B,EAKzB,YALyB,EAKX,aALW,EAKI,YALJ,CAA3B;AAQA5F,QAAAA,KAAK,CAAC/iB,OAAN,CAAcyoB,oBAAd,EAAoC,SAASG,gBAAT,CAA0BC,IAA1B,EAAgC;AAClE,cAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD;AACF,SAJD;AAMA9F,QAAAA,KAAK,CAAC/iB,OAAN,CAAc0oB,uBAAd,EAAuC,SAASI,mBAAT,CAA6BD,IAA7B,EAAmC;AACxE,cAAI9F,KAAK,CAAC/jB,QAAN,CAAewpB,OAAO,CAACK,IAAD,CAAtB,CAAJ,EAAmC;AACjCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAe9F,KAAK,CAACviB,SAAN,CAAgB+nB,OAAO,CAACM,IAAD,CAAvB,EAA+BL,OAAO,CAACK,IAAD,CAAtC,CAAf;AACD,WAFD,MAEO,IAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD,WAFM,MAEA,IAAI9F,KAAK,CAAC/jB,QAAN,CAAeupB,OAAO,CAACM,IAAD,CAAtB,CAAJ,EAAmC;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAe9F,KAAK,CAACviB,SAAN,CAAgB+nB,OAAO,CAACM,IAAD,CAAvB,CAAf;AACD,WAFM,MAEA,IAAI,OAAON,OAAO,CAACM,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeN,OAAO,CAACM,IAAD,CAAtB;AACD;AACF,SAVD;AAYA9F,QAAAA,KAAK,CAAC/iB,OAAN,CAAc2oB,oBAAd,EAAoC,SAASI,gBAAT,CAA0BF,IAA1B,EAAgC;AAClE,cAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD,WAFD,MAEO,IAAI,OAAON,OAAO,CAACM,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeN,OAAO,CAACM,IAAD,CAAtB;AACD;AACF,SAND;AAQA,YAAIG,SAAS,GAAGP,oBAAoB,CACjCpgB,MADa,CACNqgB,uBADM,EAEbrgB,MAFa,CAENsgB,oBAFM,CAAhB;AAIA,YAAIM,SAAS,GAAG/sB,MAAM,CACnBuZ,IADa,CACR+S,OADQ,EAEbU,MAFa,CAEN,SAASC,eAAT,CAAyB/oB,GAAzB,EAA8B;AACpC,iBAAO4oB,SAAS,CAAC5O,OAAV,CAAkBha,GAAlB,MAA2B,CAAC,CAAnC;AACD,SAJa,CAAhB;AAMA2iB,QAAAA,KAAK,CAAC/iB,OAAN,CAAcipB,SAAd,EAAyB,SAASG,yBAAT,CAAmCP,IAAnC,EAAyC;AAChE,cAAI,OAAOL,OAAO,CAACK,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AACxCtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeL,OAAO,CAACK,IAAD,CAAtB;AACD,WAFD,MAEO,IAAI,OAAON,OAAO,CAACM,IAAD,CAAd,KAAyB,WAA7B,EAA0C;AAC/CtD,YAAAA,MAAM,CAACsD,IAAD,CAAN,GAAeN,OAAO,CAACM,IAAD,CAAtB;AACD;AACF,SAND;AAQA,eAAOtD,MAAP;AACD,OA5DD;AA+DA;;AAAO,KAr1GG;AAs1GV;;AACA;AAAO,cAASrqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;AAMA,eAAS8tB,MAAT,CAAgB5G,OAAhB,EAAyB;AACvB,aAAKA,OAAL,GAAeA,OAAf;AACD;;AAED4G,MAAAA,MAAM,CAACxsB,SAAP,CAAiBmB,QAAjB,GAA4B,SAASA,QAAT,GAAoB;AAC9C,eAAO,YAAY,KAAKykB,OAAL,GAAe,OAAO,KAAKA,OAA3B,GAAqC,EAAjD,CAAP;AACD,OAFD;;AAIA4G,MAAAA,MAAM,CAACxsB,SAAP,CAAiBinB,UAAjB,GAA8B,IAA9B;AAEA5oB,MAAAA,MAAM,CAACD,OAAP,GAAiBouB,MAAjB;AAGA;AAAO,KA/2GG;AAg3GV;;AACA;AAAO,cAASnuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIxR,GAAG,GAAGwR,IAAI,CAACxR,GAAf;AAAA,YACIxN,SAAS,GAAGgf,IAAI,CAAChf,SADrB;AAAA,YAEIif,GAAG,GAAGD,IAAI,CAACC,GAFf;AAAA,YAGIC,OAAO,GAAGF,IAAI,CAACE,OAHnB;AAIA,eAAOH,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,UAAAA,SAAS,EAAE,eAAeA;AAA5B,SAFK,EAGL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AAAE8U,UAAAA,GAAG,EAAEA,GAAP;AAAYyR,UAAAA,GAAG,EAAE,MAAMA,GAAvB;AAA4BC,UAAAA,OAAO,EAAEA;AAArC,SAArC,CAHK,CAAP;AAKD,OAVD;AAYA;;AAAO,KA54GG;AA64GV;;AACA;AAAO,cAASxuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIhf,SAAS,GAAGgf,IAAI,CAAChf,SAArB;AAAA,YACImf,IAAI,GAAGH,IAAI,CAACG,IADhB;AAAA,YAEI5tB,IAAI,GAAGytB,IAAI,CAACztB,IAFhB;AAGA,eAAOwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,MADK,EAEL;AAAEsH,UAAAA,SAAS,EAAE,YAAYA;AAAzB,SAFK,EAGL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,MAA9B,EAAsC;AAAEsH,UAAAA,SAAS,EAAE,QAAb;AAAuBof,UAAAA,uBAAuB,EAAE;AAClFC,YAAAA,MAAM,EAAEtuB,mBAAmB,CAAC,GAAD,CAAnB,CAAyB,OAAOQ,IAAP,GAAc,MAAvC;AAD0E;AAAhD,SAAtC,CAHK,EAML4tB,IAAI,IAAIJ,OAAO,WAAP,CAAgBrmB,aAAhB,CACN,MADM,EAEN;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAFM,EAGNmf,IAHM,CANH,CAAP;AAYD,OAhBD;AAkBA;;AAAO,KA/6GG;AAg7GV;;AACA;AAAO,cAASzuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIuuB,gBAAgB,GAAGvuB,mBAAmB,CAAC,EAAD,CAA1C;;AAEA,UAAIwuB,gBAAgB,GAAGrT,sBAAsB,CAACoT,gBAAD,CAA7C;;AAEA,UAAIE,aAAa,GAAGzuB,mBAAmB,CAAC,EAAD,CAAvC;;AAEA,UAAI0uB,aAAa,GAAGvT,sBAAsB,CAACsT,aAAD,CAA1C;;AAEA,UAAIV,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,UAAIY,SAAS,GAAG3uB,mBAAmB,CAAC,CAAD,CAAnC;;AAEAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AAEA,UAAI4uB,OAAO,GAAG5uB,mBAAmB,CAAC,EAAD,CAAjC;;AAEA,UAAI6uB,QAAQ,GAAG1T,sBAAsB,CAACyT,OAAD,CAArC;;AAEA,eAASzT,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAIoqB,MAAM,GAAG,YAAY;AACvB,iBAASA,MAAT,GAAkB;AAChB,cAAInY,OAAO,GAAG3R,SAAS,CAACJ,MAAV,GAAmB,CAAnB,IAAwBI,SAAS,CAAC,CAAD,CAAT,KAAiB6B,SAAzC,GAAqD7B,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAlF;AACA,WAAC,GAAGwpB,gBAAgB,WAApB,EAA8B,IAA9B,EAAoCM,MAApC;AAEA,eAAKnY,OAAL,GAAeA,OAAf;AACD;;AAED,SAAC,GAAG+X,aAAa,WAAjB,EAA2BI,MAA3B,EAAmC,CAAC;AAClCjqB,UAAAA,GAAG,EAAE,QAD6B;AAElCuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,CAAgBwD,SAAhB,EAA2Bb,QAA3B,EAAqC;AAC1C,gBAAI4C,IAAI,GAAG,IAAX;AACA/B,YAAAA,SAAS,GAAGA,SAAS,IAAI,KAAKuK,OAAL,CAAavK,SAAtC;AAEA,gBAAI,CAACA,SAAL,EAAgB,MAAM,IAAIQ,KAAJ,CAAU,4BAA4BR,SAAtC,CAAN;;AAEhB,gBAAI,EAAEA,SAAS,YAAY2iB,WAAvB,CAAJ,EAAyC;AACvC5gB,cAAAA,IAAI,GAAGrM,MAAM,CAAC0C,QAAP,CAAgBwqB,cAAhB,CAA+B5iB,SAA/B,CAAP;AACA,kBAAI,CAAC+B,IAAL,EAAW,MAAM,IAAIvB,KAAJ,CAAU,0DAA0DR,SAApE,CAAN;AACZ,aAHD,MAGO;AACL+B,cAAAA,IAAI,GAAG/B,SAAP;AACD;;AAED,gBAAI,CAACb,QAAL,EAAe;AACbA,cAAAA,QAAQ,GAAG,SAASA,QAAT,GAAoB,CAAE,CAAjC;AACD;;AAED,mBAAO,CAAC,GAAGojB,SAAS,CAAC/lB,MAAd,EAAsBolB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BknB,QAAQ,WAAtC,EAAgD;AAAElY,cAAAA,OAAO,EAAE,KAAKA;AAAhB,aAAhD,CAAtB,EAAkGxI,IAAlG,EAAwG5C,QAAxG,CAAP;AACD;AApBiC,SAAD,CAAnC;AAsBA,eAAOujB,MAAP;AACD,OA/BY,EAAb;;AAiCAnvB,MAAAA,MAAM,CAACD,OAAP,GAAiBovB,MAAjB;AAEA;AAAO,KA/+GG;AAg/GV;;AACA;AAAO,cAASnvB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,EAAD,CAAhC;AAAsCiB,QAAAA,UAAU,EAAE;AAAlD,OAAjB;AAEA;AAAO,KAr/GG;AAs/GV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACA,UAAIivB,OAAO,GAAGjvB,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAArC;;AACAhB,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASkB,cAAT,CAAwB6Q,EAAxB,EAA4B5M,GAA5B,EAAiCqqB,IAAjC,EAAuC;AACtD,eAAOD,OAAO,CAACruB,cAAR,CAAuB6Q,EAAvB,EAA2B5M,GAA3B,EAAgCqqB,IAAhC,CAAP;AACD,OAFD;AAKA;;AAAO,KAhgHG;AAigHV;;AACA;AAAO,cAASvvB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC,CAFsD,CAGtD;;;AACA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC9F,mBAAmB,CAAC,CAAD,CAA7C,EAAkD,QAAlD,EAA4D;AAAEY,QAAAA,cAAc,EAAEZ,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R;AAAzC,OAA5D,CAAP;AAGA;AAAO,KAzgHG;AA0gHV;;AACA;AAAO,cAASpS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;AAO/C,YAAIA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,cAAI0lB,OAAO,GAAGnvB,mBAAmB,CAAC,EAAD,CAAjC,CADyC,CAGzC;AACA;;;AACA,cAAIovB,mBAAmB,GAAG,IAA1B;AACAzvB,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwBmvB,OAAO,CAACE,SAAhC,EAA2CD,mBAA3C,CAAjB;AACD,SAPD,MAOO;AACL;AACA;AACAzvB,UAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,EAAjB;AACD;AAED;;AAA4B,OApBA,EAoBCI,IApBD,CAoBMV,OApBN,EAoBeM,mBAAmB,CAAC,CAAD,CApBlC,CAAD;AAsB3B;AAAO,KAniHG;AAoiHV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;;;;AASAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA8B,YAA9B,EAA2C;AAAC0H,QAAAA,KAAK,EAAC,CAAC;AAAR,OAA3C;AACA,UAAIhC,CAAC,GAAC,eAAa,OAAO/C,MAApB,IAA4BA,MAAM,OAAxC;AAAA,UAA6C/B,CAAC,GAAC8E,CAAC,GAAC/C,MAAM,OAAN,CAAW,eAAX,CAAD,GAA6B,KAA7E;AAAA,UAAmF9B,CAAC,GAAC6E,CAAC,GAAC/C,MAAM,OAAN,CAAW,cAAX,CAAD,GAA4B,KAAlH;AAAA,UAAwHgI,CAAC,GAACjF,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAAzJ;AAAA,UAA+J0P,CAAC,GAAC3M,CAAC,GAAC/C,MAAM,OAAN,CAAW,mBAAX,CAAD,GAAiC,KAAnM;AAAA,UAAyMitB,CAAC,GAAClqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAA1O;AAAA,UAAgPktB,CAAC,GAACnqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAAjR;AAAA,UAAuRmtB,CAAC,GAACpqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,eAAX,CAAD,GAA6B,KAAvT;AAAA,UAA6TlC,CAAC,GAACiF,CAAC,GAAC/C,MAAM,OAAN,CAAW,kBAAX,CAAD,GAAgC,KAAhW;AAAA,UAAsWhC,CAAC,GAAC+E,CAAC,GAAC/C,MAAM,OAAN,CAAW,uBAAX,CAAD,GAAqC,KAA9Y;AAAA,UAAoZrB,CAAC,GAACoE,CAAC,GAAC/C,MAAM,OAAN,CAAW,mBAAX,CAAD,GAAiC,KAAxb;AAAA,UAA8bb,CAAC,GAAC4D,CAAC,GAAC/C,MAAM,OAAN,CAAW,gBAAX,CAAD,GAA8B,KAA/d;AAAA,UAAqeotB,CAAC,GAACrqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,qBAAX,CAAD,GACxe,KADA;AAAA,UACMgO,CAAC,GAACjL,CAAC,GAAC/C,MAAM,OAAN,CAAW,YAAX,CAAD,GAA0B,KADnC;AAAA,UACyCqtB,CAAC,GAACtqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,YAAX,CAAD,GAA0B,KADtE;AAAA,UAC4E4H,CAAC,GAAC7E,CAAC,GAAC/C,MAAM,OAAN,CAAW,mBAAX,CAAD,GAAiC,KADhH;AAAA,UACsHstB,CAAC,GAACvqB,CAAC,GAAC/C,MAAM,OAAN,CAAW,iBAAX,CAAD,GAA+B,KADxJ;AAAA,UAC8J6gB,CAAC,GAAC9d,CAAC,GAAC/C,MAAM,OAAN,CAAW,aAAX,CAAD,GAA2B,KAD5L;;AACkM,eAASutB,CAAT,CAAWzqB,CAAX,EAAa;AAAC,YAAG,sBAAkBA,CAAlB,KAAqB,SAAOA,CAA/B,EAAiC;AAAC,cAAI0qB,CAAC,GAAC1qB,CAAC,CAACyE,QAAR;;AAAiB,kBAAOimB,CAAP;AAAU,iBAAKvvB,CAAL;AAAO,sBAAO6E,CAAC,GAACA,CAAC,CAACQ,IAAJ,EAASR,CAAhB;AAAmB,qBAAKhF,CAAL;AAAO,qBAAKE,CAAL;AAAO,qBAAKgK,CAAL;AAAO,qBAAKilB,CAAL;AAAO,qBAAKvd,CAAL;AAAO,qBAAKvQ,CAAL;AAAO,yBAAO2D,CAAP;;AAAS;AAAQ,0BAAOA,CAAC,GAACA,CAAC,IAAEA,CAAC,CAACyE,QAAP,EAAgBzE,CAAvB;AAA0B,yBAAKqqB,CAAL;AAAO,yBAAKxuB,CAAL;AAAO,yBAAK0uB,CAAL;AAAO,yBAAKrf,CAAL;AAAO,yBAAKkf,CAAL;AAAO,6BAAOpqB,CAAP;;AAAS;AAAQ,6BAAO0qB,CAAP;AAA9E;;AAA9E;;AAAsK,iBAAKtvB,CAAL;AAAO,qBAAOsvB,CAAP;AAA9L;AAAwM;AAAC;;AAAA,eAASC,CAAT,CAAW3qB,CAAX,EAAa;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO9E,CAAd;AAAgB;;AAC1eX,MAAAA,OAAO,CAACqwB,MAAR,GAAeH,CAAf;AAAiBlwB,MAAAA,OAAO,CAACswB,SAAR,GAAkB7vB,CAAlB;AAAoBT,MAAAA,OAAO,CAACuwB,cAAR,GAAuB5vB,CAAvB;AAAyBX,MAAAA,OAAO,CAACwwB,eAAR,GAAwBV,CAAxB;AAA0B9vB,MAAAA,OAAO,CAACqM,eAAR,GAAwBwjB,CAAxB;AAA0B7vB,MAAAA,OAAO,CAACywB,OAAR,GAAgB7vB,CAAhB;AAAkBZ,MAAAA,OAAO,CAAC0wB,UAAR,GAAmBpvB,CAAnB;AAAqBtB,MAAAA,OAAO,CAAC2wB,QAAR,GAAiBhmB,CAAjB;AAAmB3K,MAAAA,OAAO,CAAC4wB,IAAR,GAAaZ,CAAb;AAAehwB,MAAAA,OAAO,CAAC6wB,IAAR,GAAalgB,CAAb;AAAe3Q,MAAAA,OAAO,CAAC8wB,MAAR,GAAejwB,CAAf;AAAiBb,MAAAA,OAAO,CAAC+wB,QAAR,GAAiBnB,CAAjB;AAAmB5vB,MAAAA,OAAO,CAACgxB,UAAR,GAAmB3e,CAAnB;AAAqBrS,MAAAA,OAAO,CAACixB,QAAR,GAAiBnvB,CAAjB;;AACnQ9B,MAAAA,OAAO,CAACkxB,kBAAR,GAA2B,UAASzrB,CAAT,EAAW;AAAC,eAAM,aAAW,OAAOA,CAAlB,IAAqB,eAAa,OAAOA,CAAzC,IAA4CA,CAAC,KAAGkF,CAAhD,IAAmDlF,CAAC,KAAG9E,CAAvD,IAA0D8E,CAAC,KAAGmqB,CAA9D,IAAiEnqB,CAAC,KAAG4M,CAArE,IAAwE5M,CAAC,KAAG3D,CAA5E,IAA+E2D,CAAC,KAAGsqB,CAAnF,IAAsF,sBAAkBtqB,CAAlB,KAAqB,SAAOA,CAA5B,KAAgCA,CAAC,CAACyE,QAAF,KAAa8lB,CAAb,IAAgBvqB,CAAC,CAACyE,QAAF,KAAayG,CAA7B,IAAgClL,CAAC,CAACyE,QAAF,KAAa2lB,CAA7C,IAAgDpqB,CAAC,CAACyE,QAAF,KAAa4lB,CAA7D,IAAgErqB,CAAC,CAACyE,QAAF,KAAa5I,CAA7E,IAAgFmE,CAAC,CAACyE,QAAF,KAAaK,CAA7F,IAAgG9E,CAAC,CAACyE,QAAF,KAAa+lB,CAA7G,IAAgHxqB,CAAC,CAACyE,QAAF,KAAasZ,CAA7J,CAA5F;AAA4P,OAAnS;;AAAoSxjB,MAAAA,OAAO,CAACmxB,WAAR,GAAoB,UAAS1rB,CAAT,EAAW;AAAC,eAAO2qB,CAAC,CAAC3qB,CAAD,CAAD,IAAMyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOhF,CAApB;AAAsB,OAAtD;;AAAuDT,MAAAA,OAAO,CAACoxB,gBAAR,GAAyBhB,CAAzB;;AAA2BpwB,MAAAA,OAAO,CAACqxB,iBAAR,GAA0B,UAAS5rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOqqB,CAAd;AAAgB,OAAtD;;AAAuD9vB,MAAAA,OAAO,CAACsxB,iBAAR,GAA0B,UAAS7rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOoqB,CAAd;AAAgB,OAAtD;;AAC7a7vB,MAAAA,OAAO,CAAC2vB,SAAR,GAAkB,UAASlqB,CAAT,EAAW;AAAC,eAAM,sBAAkBA,CAAlB,KAAqB,SAAOA,CAA5B,IAA+BA,CAAC,CAACyE,QAAF,KAAatJ,CAAlD;AAAoD,OAAlF;;AAAmFZ,MAAAA,OAAO,CAACuxB,YAAR,GAAqB,UAAS9rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOnE,CAAd;AAAgB,OAAjD;;AAAkDtB,MAAAA,OAAO,CAACwxB,UAAR,GAAmB,UAAS/rB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOkF,CAAd;AAAgB,OAA/C;;AAAgD3K,MAAAA,OAAO,CAACyxB,MAAR,GAAe,UAAShsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOuqB,CAAd;AAAgB,OAA3C;;AAA4ChwB,MAAAA,OAAO,CAAC0xB,MAAR,GAAe,UAASjsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOkL,CAAd;AAAgB,OAA3C;;AAA4C3Q,MAAAA,OAAO,CAAC2xB,QAAR,GAAiB,UAASlsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO5E,CAAd;AAAgB,OAA7C;;AAA8Cb,MAAAA,OAAO,CAAC4xB,UAAR,GAAmB,UAASnsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAOmqB,CAAd;AAAgB,OAA/C;;AAAgD5vB,MAAAA,OAAO,CAAC6xB,YAAR,GAAqB,UAASpsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO4M,CAAd;AAAgB,OAAjD;;AAAkDrS,MAAAA,OAAO,CAAC8xB,UAAR,GAAmB,UAASrsB,CAAT,EAAW;AAAC,eAAOyqB,CAAC,CAACzqB,CAAD,CAAD,KAAO3D,CAAd;AAAgB,OAA/C;AAG7Z;;AAAO,KAzjHG;AA0jHV;;AACA;AAAO,cAAS7B,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;;;AAa/C,YAAIA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,WAAC,YAAW;AACd;;AAEA9I,YAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAAE0H,cAAAA,KAAK,EAAE;AAAT,aAA7C,EAHc,CAKd;AACA;;AACA,gBAAIqqB,SAAS,GAAG,OAAOpvB,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,OAAtD;AACA,gBAAIoG,kBAAkB,GAAGgpB,SAAS,GAAGpvB,MAAM,OAAN,CAAW,eAAX,CAAH,GAAiC,MAAnE;AACA,gBAAIqvB,iBAAiB,GAAGD,SAAS,GAAGpvB,MAAM,OAAN,CAAW,cAAX,CAAH,GAAgC,MAAjE;AACA,gBAAIsvB,mBAAmB,GAAGF,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAIuvB,sBAAsB,GAAGH,SAAS,GAAGpvB,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAA3E;AACA,gBAAIwvB,mBAAmB,GAAGJ,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAIyvB,mBAAmB,GAAGL,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAI0vB,kBAAkB,GAAGN,SAAS,GAAGpvB,MAAM,OAAN,CAAW,eAAX,CAAH,GAAiC,MAAnE,CAdc,CAc6D;AAC3E;;AAEA,gBAAI2vB,qBAAqB,GAAGP,SAAS,GAAGpvB,MAAM,OAAN,CAAW,kBAAX,CAAH,GAAoC,MAAzE;AACA,gBAAI4vB,0BAA0B,GAAGR,SAAS,GAAGpvB,MAAM,OAAN,CAAW,uBAAX,CAAH,GAAyC,MAAnF;AACA,gBAAI6vB,sBAAsB,GAAGT,SAAS,GAAGpvB,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAA3E;AACA,gBAAI8vB,mBAAmB,GAAGV,SAAS,GAAGpvB,MAAM,OAAN,CAAW,gBAAX,CAAH,GAAkC,MAArE;AACA,gBAAI+vB,wBAAwB,GAAGX,SAAS,GAAGpvB,MAAM,OAAN,CAAW,qBAAX,CAAH,GAAuC,MAA/E;AACA,gBAAIgwB,eAAe,GAAGZ,SAAS,GAAGpvB,MAAM,OAAN,CAAW,YAAX,CAAH,GAA8B,MAA7D;AACA,gBAAIiwB,eAAe,GAAGb,SAAS,GAAGpvB,MAAM,OAAN,CAAW,YAAX,CAAH,GAA8B,MAA7D;AACA,gBAAIkwB,sBAAsB,GAAGd,SAAS,GAAGpvB,MAAM,OAAN,CAAW,mBAAX,CAAH,GAAqC,MAA3E;AACA,gBAAImwB,oBAAoB,GAAGf,SAAS,GAAGpvB,MAAM,OAAN,CAAW,iBAAX,CAAH,GAAmC,MAAvE;AACA,gBAAIowB,gBAAgB,GAAGhB,SAAS,GAAGpvB,MAAM,OAAN,CAAW,aAAX,CAAH,GAA+B,MAA/D;;AAEA,qBAASuuB,kBAAT,CAA4BjrB,IAA5B,EAAkC;AAChC,qBAAO,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAA5C,IAA0D;AACjEA,cAAAA,IAAI,KAAKgsB,mBADF,IACyBhsB,IAAI,KAAKssB,0BADlC,IACgEtsB,IAAI,KAAKksB,mBADzE,IACgGlsB,IAAI,KAAKisB,sBADzG,IACmIjsB,IAAI,KAAKwsB,mBAD5I,IACmKxsB,IAAI,KAAKysB,wBAD5K,IACwM,SAAOzsB,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAArC,KAA8CA,IAAI,CAACiE,QAAL,KAAkB0oB,eAAlB,IAAqC3sB,IAAI,CAACiE,QAAL,KAAkByoB,eAAvD,IAA0E1sB,IAAI,CAACiE,QAAL,KAAkBkoB,mBAA5F,IAAmHnsB,IAAI,CAACiE,QAAL,KAAkBmoB,kBAArI,IAA2JpsB,IAAI,CAACiE,QAAL,KAAkBsoB,sBAA7K,IAAuMvsB,IAAI,CAACiE,QAAL,KAAkB2oB,sBAAzN,IAAmP5sB,IAAI,CAACiE,QAAL,KAAkB4oB,oBAArQ,IAA6R7sB,IAAI,CAACiE,QAAL,KAAkB6oB,gBAA7V,CAD/M;AAED;AAED;;;;;;;;;;;;;;;AAaA,gBAAIC,8BAA8B,GAAG,0CAAY,CAAE,CAAnD;;AAEA;AACE,kBAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,MAAV,EAAkB;AACnC,qBAAK,IAAIxL,IAAI,GAAGpiB,SAAS,CAACJ,MAArB,EAA6B+I,IAAI,GAAG,IAAId,KAAJ,CAAUua,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAhC,CAApC,EAAwEC,IAAI,GAAG,CAApF,EAAuFA,IAAI,GAAGD,IAA9F,EAAoGC,IAAI,EAAxG,EAA4G;AAC1G1Z,kBAAAA,IAAI,CAAC0Z,IAAI,GAAG,CAAR,CAAJ,GAAiBriB,SAAS,CAACqiB,IAAD,CAA1B;AACD;;AAED,oBAAIwL,QAAQ,GAAG,CAAf;AACA,oBAAI3L,OAAO,GAAG,cAAc0L,MAAM,CAACxuB,OAAP,CAAe,KAAf,EAAsB,YAAY;AAC5D,yBAAOuJ,IAAI,CAACklB,QAAQ,EAAT,CAAX;AACD,iBAF2B,CAA5B;;AAIA,oBAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,kBAAAA,OAAO,CAACC,IAAR,CAAa7L,OAAb;AACD;;AAED,oBAAI;AACF;AACA;AACA;AACA,wBAAM,IAAIta,KAAJ,CAAUsa,OAAV,CAAN;AACD,iBALD,CAKE,OAAOhE,CAAP,EAAU,CAAE;AACf,eApBD;;AAsBAwP,cAAAA,8BAA8B,GAAG,wCAAUM,SAAV,EAAqBJ,MAArB,EAA6B;AAC5D,oBAAIA,MAAM,KAAK/rB,SAAf,EAA0B;AACxB,wBAAM,IAAI+F,KAAJ,CAAU,qFAAqF,kBAA/F,CAAN;AACD;;AAED,oBAAI,CAAComB,SAAL,EAAgB;AACd,uBAAK,IAAIC,KAAK,GAAGjuB,SAAS,CAACJ,MAAtB,EAA8B+I,IAAI,GAAG,IAAId,KAAJ,CAAUomB,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAlC,CAArC,EAA2EC,KAAK,GAAG,CAAxF,EAA2FA,KAAK,GAAGD,KAAnG,EAA0GC,KAAK,EAA/G,EAAmH;AACjHvlB,oBAAAA,IAAI,CAACulB,KAAK,GAAG,CAAT,CAAJ,GAAkBluB,SAAS,CAACkuB,KAAD,CAA3B;AACD;;AAEDP,kBAAAA,YAAY,CAAC5rB,KAAb,CAAmB,KAAK,CAAxB,EAA2B,CAAC6rB,MAAD,EAAS9lB,MAAT,CAAgBa,IAAhB,CAA3B;AACD;AACF,eAZD;AAaD;AAED,gBAAIwlB,gCAAgC,GAAGT,8BAAvC;;AAEA,qBAAS3C,MAAT,CAAgB3uB,MAAhB,EAAwB;AACtB,kBAAI,SAAOA,MAAP,MAAkB,QAAlB,IAA8BA,MAAM,KAAK,IAA7C,EAAmD;AACjD,oBAAIwI,QAAQ,GAAGxI,MAAM,CAACwI,QAAtB;;AAEA,wBAAQA,QAAR;AACE,uBAAKnB,kBAAL;AACE,wBAAI9C,IAAI,GAAGvE,MAAM,CAACuE,IAAlB;;AAEA,4BAAQA,IAAR;AACE,2BAAKqsB,qBAAL;AACA,2BAAKC,0BAAL;AACA,2BAAKN,mBAAL;AACA,2BAAKE,mBAAL;AACA,2BAAKD,sBAAL;AACA,2BAAKO,mBAAL;AACE,+BAAOxsB,IAAP;;AAEF;AACE,4BAAIytB,YAAY,GAAGztB,IAAI,IAAIA,IAAI,CAACiE,QAAhC;;AAEA,gCAAQwpB,YAAR;AACE,+BAAKrB,kBAAL;AACA,+BAAKG,sBAAL;AACA,+BAAKI,eAAL;AACA,+BAAKD,eAAL;AACA,+BAAKP,mBAAL;AACE,mCAAOsB,YAAP;;AAEF;AACE,mCAAOxpB,QAAP;AATJ;;AAZJ;;AA0BF,uBAAK8nB,iBAAL;AACE,2BAAO9nB,QAAP;AA/BJ;AAiCD;;AAED,qBAAO/C,SAAP;AACD,aAhIa,CAgIZ;;;AAEF,gBAAImpB,SAAS,GAAGgC,qBAAhB;AACA,gBAAI/B,cAAc,GAAGgC,0BAArB;AACA,gBAAI/B,eAAe,GAAG6B,kBAAtB;AACA,gBAAIhmB,eAAe,GAAG+lB,mBAAtB;AACA,gBAAI3B,OAAO,GAAG1nB,kBAAd;AACA,gBAAI2nB,UAAU,GAAG8B,sBAAjB;AACA,gBAAI7B,QAAQ,GAAGsB,mBAAf;AACA,gBAAIrB,IAAI,GAAGgC,eAAX;AACA,gBAAI/B,IAAI,GAAG8B,eAAX;AACA,gBAAI7B,MAAM,GAAGkB,iBAAb;AACA,gBAAIjB,QAAQ,GAAGoB,mBAAf;AACA,gBAAInB,UAAU,GAAGkB,sBAAjB;AACA,gBAAIjB,QAAQ,GAAGwB,mBAAf;AACA,gBAAIkB,mCAAmC,GAAG,KAA1C,CA/Ic,CA+ImC;;AAEjD,qBAASxC,WAAT,CAAqBzvB,MAArB,EAA6B;AAC3B;AACE,oBAAI,CAACiyB,mCAAL,EAA0C;AACxCA,kBAAAA,mCAAmC,GAAG,IAAtC;AACAF,kBAAAA,gCAAgC,CAAC,KAAD,EAAQ,0DAA0D,4DAA1D,GAAyH,gEAAjI,CAAhC;AACD;AACF;AAED,qBAAOrC,gBAAgB,CAAC1vB,MAAD,CAAhB,IAA4B2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB4wB,qBAAtD;AACD;;AACD,qBAASlB,gBAAT,CAA0B1vB,MAA1B,EAAkC;AAChC,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB6wB,0BAA1B;AACD;;AACD,qBAASlB,iBAAT,CAA2B3vB,MAA3B,EAAmC;AACjC,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB2wB,kBAA1B;AACD;;AACD,qBAASf,iBAAT,CAA2B5vB,MAA3B,EAAmC;AACjC,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB0wB,mBAA1B;AACD;;AACD,qBAASzC,SAAT,CAAmBjuB,MAAnB,EAA2B;AACzB,qBAAO,SAAOA,MAAP,MAAkB,QAAlB,IAA8BA,MAAM,KAAK,IAAzC,IAAiDA,MAAM,CAACwI,QAAP,KAAoBnB,kBAA5E;AACD;;AACD,qBAASwoB,YAAT,CAAsB7vB,MAAtB,EAA8B;AAC5B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB8wB,sBAA1B;AACD;;AACD,qBAAShB,UAAT,CAAoB9vB,MAApB,EAA4B;AAC1B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBuwB,mBAA1B;AACD;;AACD,qBAASR,MAAT,CAAgB/vB,MAAhB,EAAwB;AACtB,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBkxB,eAA1B;AACD;;AACD,qBAASlB,MAAT,CAAgBhwB,MAAhB,EAAwB;AACtB,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBixB,eAA1B;AACD;;AACD,qBAAShB,QAAT,CAAkBjwB,MAAlB,EAA0B;AACxB,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBswB,iBAA1B;AACD;;AACD,qBAASJ,UAAT,CAAoBlwB,MAApB,EAA4B;AAC1B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBywB,mBAA1B;AACD;;AACD,qBAASN,YAAT,CAAsBnwB,MAAtB,EAA8B;AAC5B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmBwwB,sBAA1B;AACD;;AACD,qBAASJ,UAAT,CAAoBpwB,MAApB,EAA4B;AAC1B,qBAAO2uB,MAAM,CAAC3uB,MAAD,CAAN,KAAmB+wB,mBAA1B;AACD;;AAEDzyB,YAAAA,OAAO,CAACqwB,MAAR,GAAiBA,MAAjB;AACArwB,YAAAA,OAAO,CAACswB,SAAR,GAAoBA,SAApB;AACAtwB,YAAAA,OAAO,CAACuwB,cAAR,GAAyBA,cAAzB;AACAvwB,YAAAA,OAAO,CAACwwB,eAAR,GAA0BA,eAA1B;AACAxwB,YAAAA,OAAO,CAACqM,eAAR,GAA0BA,eAA1B;AACArM,YAAAA,OAAO,CAACywB,OAAR,GAAkBA,OAAlB;AACAzwB,YAAAA,OAAO,CAAC0wB,UAAR,GAAqBA,UAArB;AACA1wB,YAAAA,OAAO,CAAC2wB,QAAR,GAAmBA,QAAnB;AACA3wB,YAAAA,OAAO,CAAC4wB,IAAR,GAAeA,IAAf;AACA5wB,YAAAA,OAAO,CAAC6wB,IAAR,GAAeA,IAAf;AACA7wB,YAAAA,OAAO,CAAC8wB,MAAR,GAAiBA,MAAjB;AACA9wB,YAAAA,OAAO,CAAC+wB,QAAR,GAAmBA,QAAnB;AACA/wB,YAAAA,OAAO,CAACgxB,UAAR,GAAqBA,UAArB;AACAhxB,YAAAA,OAAO,CAACixB,QAAR,GAAmBA,QAAnB;AACAjxB,YAAAA,OAAO,CAACkxB,kBAAR,GAA6BA,kBAA7B;AACAlxB,YAAAA,OAAO,CAACmxB,WAAR,GAAsBA,WAAtB;AACAnxB,YAAAA,OAAO,CAACoxB,gBAAR,GAA2BA,gBAA3B;AACApxB,YAAAA,OAAO,CAACqxB,iBAAR,GAA4BA,iBAA5B;AACArxB,YAAAA,OAAO,CAACsxB,iBAAR,GAA4BA,iBAA5B;AACAtxB,YAAAA,OAAO,CAAC2vB,SAAR,GAAoBA,SAApB;AACA3vB,YAAAA,OAAO,CAACuxB,YAAR,GAAuBA,YAAvB;AACAvxB,YAAAA,OAAO,CAACwxB,UAAR,GAAqBA,UAArB;AACAxxB,YAAAA,OAAO,CAACyxB,MAAR,GAAiBA,MAAjB;AACAzxB,YAAAA,OAAO,CAAC0xB,MAAR,GAAiBA,MAAjB;AACA1xB,YAAAA,OAAO,CAAC2xB,QAAR,GAAmBA,QAAnB;AACA3xB,YAAAA,OAAO,CAAC4xB,UAAR,GAAqBA,UAArB;AACA5xB,YAAAA,OAAO,CAAC6xB,YAAR,GAAuBA,YAAvB;AACA7xB,YAAAA,OAAO,CAAC8xB,UAAR,GAAqBA,UAArB;AACG,WA5ND;AA6ND;AAED;;AAA4B,OA7OA,EA6OCpxB,IA7OD,CA6OMV,OA7ON,EA6OeM,mBAAmB,CAAC,CAAD,CA7OlC,CAAD;AA+O3B;AAAO,KA7yHG;AA8yHV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;AAS/C,YAAI8nB,OAAO,GAAGnvB,mBAAmB,CAAC,EAAD,CAAjC;;AACA,YAAIszB,MAAM,GAAGtzB,mBAAmB,CAAC,EAAD,CAAhC;;AAEA,YAAI0b,oBAAoB,GAAG1b,mBAAmB,CAAC,EAAD,CAA9C;;AACA,YAAI0Q,cAAc,GAAG1Q,mBAAmB,CAAC,EAAD,CAAxC;;AAEA,YAAIwF,GAAG,GAAGvD,QAAQ,CAAC7B,IAAT,CAAcoC,IAAd,CAAmB7B,MAAM,CAACW,SAAP,CAAiBC,cAApC,CAAV;;AACA,YAAIoxB,YAAY,GAAG,wBAAW,CAAE,CAAhC;;AAEA,YAAItrB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCkpB,UAAAA,YAAY,GAAG,sBAASvE,IAAT,EAAe;AAC5B,gBAAIlH,OAAO,GAAG,cAAckH,IAA5B;;AACA,gBAAI,OAAO0E,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,cAAAA,OAAO,CAAChG,KAAR,CAAc5F,OAAd;AACD;;AACD,gBAAI;AACF;AACA;AACA;AACA,oBAAM,IAAIta,KAAJ,CAAUsa,OAAV,CAAN;AACD,aALD,CAKE,OAAOhE,CAAP,EAAU,CAAE;AACf,WAXD;AAYD;;AAED,iBAASqQ,4BAAT,GAAwC;AACtC,iBAAO,IAAP;AACD;;AAED5zB,QAAAA,MAAM,CAACD,OAAP,GAAiB,UAASmI,cAAT,EAAyBunB,mBAAzB,EAA8C;AAC7D;AACA,cAAIoE,eAAe,GAAG,OAAOnxB,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACgf,QAA7D;AACA,cAAIoS,oBAAoB,GAAG,YAA3B,CAH6D,CAGpB;;AAEzC;;;;;;;;;;;;;;;AAcA,mBAASC,aAAT,CAAuBC,aAAvB,EAAsC;AACpC,gBAAIC,UAAU,GAAGD,aAAa,KAAKH,eAAe,IAAIG,aAAa,CAACH,eAAD,CAAhC,IAAqDG,aAAa,CAACF,oBAAD,CAAvE,CAA9B;;AACA,gBAAI,OAAOG,UAAP,KAAsB,UAA1B,EAAsC;AACpC,qBAAOA,UAAP;AACD;AACF;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,cAAIC,SAAS,GAAG,eAAhB,CAzE6D,CA2E7D;AACA;;AACA,cAAIC,cAAc,GAAG;AACnBxgB,YAAAA,KAAK,EAAEygB,0BAA0B,CAAC,OAAD,CADd;AAEnBC,YAAAA,IAAI,EAAED,0BAA0B,CAAC,SAAD,CAFb;AAGnBE,YAAAA,IAAI,EAAEF,0BAA0B,CAAC,UAAD,CAHb;AAInBG,YAAAA,MAAM,EAAEH,0BAA0B,CAAC,QAAD,CAJf;AAKnB3yB,YAAAA,MAAM,EAAE2yB,0BAA0B,CAAC,QAAD,CALf;AAMnBI,YAAAA,MAAM,EAAEJ,0BAA0B,CAAC,QAAD,CANf;AAOnBK,YAAAA,MAAM,EAAEL,0BAA0B,CAAC,QAAD,CAPf;AASnBM,YAAAA,GAAG,EAAEC,oBAAoB,EATN;AAUnBC,YAAAA,OAAO,EAAEC,wBAVU;AAWnBvmB,YAAAA,OAAO,EAAEwmB,wBAAwB,EAXd;AAYnBC,YAAAA,WAAW,EAAEC,4BAA4B,EAZtB;AAanBC,YAAAA,UAAU,EAAEC,yBAbO;AAcnB1mB,YAAAA,IAAI,EAAE2mB,iBAAiB,EAdJ;AAenBC,YAAAA,QAAQ,EAAEC,yBAfS;AAgBnBC,YAAAA,KAAK,EAAEC,qBAhBY;AAiBnBC,YAAAA,SAAS,EAAEC,sBAjBQ;AAkBnBC,YAAAA,KAAK,EAAEC,sBAlBY;AAmBnBC,YAAAA,KAAK,EAAEC;AAnBY,WAArB;AAsBA;;;;;AAIA;;AACA,mBAASha,EAAT,CAAY0H,CAAZ,EAAe0M,CAAf,EAAkB;AAChB;AACA,gBAAI1M,CAAC,KAAK0M,CAAV,EAAa;AACX;AACA;AACA,qBAAO1M,CAAC,KAAK,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAI0M,CAAhC;AACD,aAJD,MAIO;AACL;AACA,qBAAO1M,CAAC,KAAKA,CAAN,IAAW0M,CAAC,KAAKA,CAAxB;AACD;AACF;AACD;;AAEA;;;;;;;;;AAOA,mBAAS6F,aAAT,CAAuBvO,OAAvB,EAAgC;AAC9B,iBAAKA,OAAL,GAAeA,OAAf;AACA,iBAAKwO,KAAL,GAAa,EAAb;AACD,WA/H4D,CAgI7D;;;AACAD,UAAAA,aAAa,CAACn0B,SAAd,GAA0BsL,KAAK,CAACtL,SAAhC;;AAEA,mBAASq0B,0BAAT,CAAoCC,QAApC,EAA8C;AAC5C,gBAAIvuB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,kBAAIosB,uBAAuB,GAAG,EAA9B;AACA,kBAAIC,0BAA0B,GAAG,CAAjC;AACD;;AACD,qBAASC,SAAT,CAAmBC,UAAnB,EAA+B/pB,KAA/B,EAAsCgqB,QAAtC,EAAgDC,aAAhD,EAA+DnQ,QAA/D,EAAyEoQ,YAAzE,EAAuFC,MAAvF,EAA+F;AAC7FF,cAAAA,aAAa,GAAGA,aAAa,IAAIrC,SAAjC;AACAsC,cAAAA,YAAY,GAAGA,YAAY,IAAIF,QAA/B;;AAEA,kBAAIG,MAAM,KAAK1a,oBAAf,EAAqC;AACnC,oBAAI0T,mBAAJ,EAAyB;AACvB;AACA,sBAAIrI,GAAG,GAAG,IAAIna,KAAJ,CACR,yFACA,iDADA,GAEA,gDAHQ,CAAV;AAKAma,kBAAAA,GAAG,CAACvmB,IAAJ,GAAW,qBAAX;AACA,wBAAMumB,GAAN;AACD,iBATD,MASO,IAAI1f,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,OAAOqpB,OAAP,KAAmB,WAAhE,EAA6E;AAClF;AACA,sBAAIuD,QAAQ,GAAGH,aAAa,GAAG,GAAhB,GAAsBD,QAArC;;AACA,sBACE,CAACJ,uBAAuB,CAACQ,QAAD,CAAxB,IACA;AACAP,kBAAAA,0BAA0B,GAAG,CAH/B,EAIE;AACAnD,oBAAAA,YAAY,CACV,2DACA,oBADA,GACuBwD,YADvB,GACsC,aADtC,GACsDD,aADtD,GACuE,wBADvE,GAEA,yDAFA,GAGA,gEAHA,GAIA,+DAJA,GAIkE,cALxD,CAAZ;AAOAL,oBAAAA,uBAAuB,CAACQ,QAAD,CAAvB,GAAoC,IAApC;AACAP,oBAAAA,0BAA0B;AAC3B;AACF;AACF;;AACD,kBAAI7pB,KAAK,CAACgqB,QAAD,CAAL,IAAmB,IAAvB,EAA6B;AAC3B,oBAAID,UAAJ,EAAgB;AACd,sBAAI/pB,KAAK,CAACgqB,QAAD,CAAL,KAAoB,IAAxB,EAA8B;AAC5B,2BAAO,IAAIR,aAAJ,CAAkB,SAAS1P,QAAT,GAAoB,IAApB,GAA2BoQ,YAA3B,GAA0C,0BAA1C,IAAwE,SAASD,aAAT,GAAyB,6BAAjG,CAAlB,CAAP;AACD;;AACD,yBAAO,IAAIT,aAAJ,CAAkB,SAAS1P,QAAT,GAAoB,IAApB,GAA2BoQ,YAA3B,GAA0C,6BAA1C,IAA2E,MAAMD,aAAN,GAAsB,kCAAjG,CAAlB,CAAP;AACD;;AACD,uBAAO,IAAP;AACD,eARD,MAQO;AACL,uBAAON,QAAQ,CAAC3pB,KAAD,EAAQgqB,QAAR,EAAkBC,aAAlB,EAAiCnQ,QAAjC,EAA2CoQ,YAA3C,CAAf;AACD;AACF;;AAED,gBAAIG,gBAAgB,GAAGP,SAAS,CAACvzB,IAAV,CAAe,IAAf,EAAqB,KAArB,CAAvB;AACA8zB,YAAAA,gBAAgB,CAACN,UAAjB,GAA8BD,SAAS,CAACvzB,IAAV,CAAe,IAAf,EAAqB,IAArB,CAA9B;AAEA,mBAAO8zB,gBAAP;AACD;;AAED,mBAASvC,0BAAT,CAAoCwC,YAApC,EAAkD;AAChD,qBAASX,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0EC,MAA1E,EAAkF;AAChF,kBAAII,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAKF,YAAjB,EAA+B;AAC7B;AACA;AACA;AACA,oBAAII,WAAW,GAAGC,cAAc,CAACJ,SAAD,CAAhC;AAEA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMQ,WAAN,GAAoB,iBAApB,GAAwCT,aAAxC,GAAwD,cAAtH,KAAyI,MAAMK,YAAN,GAAqB,IAA9J,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOZ,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAAStB,oBAAT,GAAgC;AAC9B,mBAAOqB,0BAA0B,CAACpC,4BAAD,CAAjC;AACD;;AAED,mBAASiB,wBAAT,CAAkCqC,WAAlC,EAA+C;AAC7C,qBAASjB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,OAAOU,WAAP,KAAuB,UAA3B,EAAuC;AACrC,uBAAO,IAAIpB,aAAJ,CAAkB,eAAeU,YAAf,GAA8B,kBAA9B,GAAmDD,aAAnD,GAAmE,iDAArF,CAAP;AACD;;AACD,kBAAIM,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,kBAAI,CAACppB,KAAK,CAACnK,OAAN,CAAc8zB,SAAd,CAAL,EAA+B;AAC7B,oBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;AACA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,uBAAnH,CAAlB,CAAP;AACD;;AACD,mBAAK,IAAIh2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs2B,SAAS,CAAC5xB,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AACzC,oBAAI4sB,KAAK,GAAG+J,WAAW,CAACL,SAAD,EAAYt2B,CAAZ,EAAeg2B,aAAf,EAA8BnQ,QAA9B,EAAwCoQ,YAAY,GAAG,GAAf,GAAqBj2B,CAArB,GAAyB,GAAjE,EAAsEwb,oBAAtE,CAAvB;;AACA,oBAAIoR,KAAK,YAAYlgB,KAArB,EAA4B;AAC1B,yBAAOkgB,KAAP;AACD;AACF;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASnB,wBAAT,GAAoC;AAClC,qBAASmB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,kBAAI,CAACpuB,cAAc,CAAC2uB,SAAD,CAAnB,EAAgC;AAC9B,oBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;AACA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,oCAAnH,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASjB,4BAAT,GAAwC;AACtC,qBAASiB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,kBAAI,CAAC9G,OAAO,CAACyB,kBAAR,CAA2B4F,SAA3B,CAAL,EAA4C;AAC1C,oBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;AACA,uBAAO,IAAIf,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,yCAAnH,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASf,yBAAT,CAAmCiC,aAAnC,EAAkD;AAChD,qBAASlB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,EAAElqB,KAAK,CAACgqB,QAAD,CAAL,YAA2Ba,aAA7B,CAAJ,EAAiD;AAC/C,oBAAIC,iBAAiB,GAAGD,aAAa,CAACt2B,IAAd,IAAsBqzB,SAA9C;AACA,oBAAImD,eAAe,GAAGC,YAAY,CAAChrB,KAAK,CAACgqB,QAAD,CAAN,CAAlC;AACA,uBAAO,IAAIR,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMa,eAAN,GAAwB,iBAAxB,GAA4Cd,aAA5C,GAA4D,cAA1H,KAA6I,kBAAkBa,iBAAlB,GAAsC,IAAnL,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOpB,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASV,qBAAT,CAA+BgC,cAA/B,EAA+C;AAC7C,gBAAI,CAACrqB,KAAK,CAACnK,OAAN,CAAcw0B,cAAd,CAAL,EAAoC;AAClC,kBAAI7vB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,oBAAIzE,SAAS,CAACJ,MAAV,GAAmB,CAAvB,EAA0B;AACxB+tB,kBAAAA,YAAY,CACV,iEAAiE3tB,SAAS,CAACJ,MAA3E,GAAoF,cAApF,GACA,0EAFU,CAAZ;AAID,iBALD,MAKO;AACL+tB,kBAAAA,YAAY,CAAC,wDAAD,CAAZ;AACD;AACF;;AACD,qBAAOY,4BAAP;AACD;;AAED,qBAASqC,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;;AACA,mBAAK,IAAI/1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGg3B,cAAc,CAACtyB,MAAnC,EAA2C1E,CAAC,EAA5C,EAAgD;AAC9C,oBAAIsb,EAAE,CAACgb,SAAD,EAAYU,cAAc,CAACh3B,CAAD,CAA1B,CAAN,EAAsC;AACpC,yBAAO,IAAP;AACD;AACF;;AAED,kBAAIi3B,YAAY,GAAGhP,IAAI,CAACC,SAAL,CAAe8O,cAAf,EAA+B,SAASE,QAAT,CAAkBvyB,GAAlB,EAAuBuC,KAAvB,EAA8B;AAC9E,oBAAIzB,IAAI,GAAGixB,cAAc,CAACxvB,KAAD,CAAzB;;AACA,oBAAIzB,IAAI,KAAK,QAAb,EAAuB;AACrB,yBAAOkF,MAAM,CAACzD,KAAD,CAAb;AACD;;AACD,uBAAOA,KAAP;AACD,eANkB,CAAnB;AAOA,qBAAO,IAAIquB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,cAA9C,GAA+DtrB,MAAM,CAAC2rB,SAAD,CAArE,GAAmF,IAAnF,IAA2F,kBAAkBN,aAAlB,GAAkC,qBAAlC,GAA0DiB,YAA1D,GAAyE,GAApK,CAAlB,CAAP;AACD;;AACD,mBAAOxB,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASZ,yBAAT,CAAmC6B,WAAnC,EAAgD;AAC9C,qBAASjB,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,OAAOU,WAAP,KAAuB,UAA3B,EAAuC;AACrC,uBAAO,IAAIpB,aAAJ,CAAkB,eAAeU,YAAf,GAA8B,kBAA9B,GAAmDD,aAAnD,GAAmE,kDAArF,CAAP;AACD;;AACD,kBAAIM,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,uBAAO,IAAIhB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,YAA9C,IAA8D,MAAMM,QAAN,GAAiB,iBAAjB,GAAqCP,aAArC,GAAqD,wBAAnH,CAAlB,CAAP;AACD;;AACD,mBAAK,IAAIrxB,GAAT,IAAgB2xB,SAAhB,EAA2B;AACzB,oBAAIhxB,GAAG,CAACgxB,SAAD,EAAY3xB,GAAZ,CAAP,EAAyB;AACvB,sBAAIioB,KAAK,GAAG+J,WAAW,CAACL,SAAD,EAAY3xB,GAAZ,EAAiBqxB,aAAjB,EAAgCnQ,QAAhC,EAA0CoQ,YAAY,GAAG,GAAf,GAAqBtxB,GAA/D,EAAoE6W,oBAApE,CAAvB;;AACA,sBAAIoR,KAAK,YAAYlgB,KAArB,EAA4B;AAC1B,2BAAOkgB,KAAP;AACD;AACF;AACF;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASR,sBAAT,CAAgCiC,mBAAhC,EAAqD;AACnD,gBAAI,CAACxqB,KAAK,CAACnK,OAAN,CAAc20B,mBAAd,CAAL,EAAyC;AACvChwB,cAAAA,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCkpB,YAAY,CAAC,wEAAD,CAApD,GAAiI,KAAK,CAAtI;AACA,qBAAOY,4BAAP;AACD;;AAED,iBAAK,IAAIrzB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm3B,mBAAmB,CAACzyB,MAAxC,EAAgD1E,CAAC,EAAjD,EAAqD;AACnD,kBAAIo3B,OAAO,GAAGD,mBAAmB,CAACn3B,CAAD,CAAjC;;AACA,kBAAI,OAAOo3B,OAAP,KAAmB,UAAvB,EAAmC;AACjC3E,gBAAAA,YAAY,CACV,uFACA,WADA,GACc4E,wBAAwB,CAACD,OAAD,CADtC,GACkD,YADlD,GACiEp3B,CADjE,GACqE,GAF3D,CAAZ;AAIA,uBAAOqzB,4BAAP;AACD;AACF;;AAED,qBAASqC,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,mBAAK,IAAIj2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm3B,mBAAmB,CAACzyB,MAAxC,EAAgD1E,CAAC,EAAjD,EAAqD;AACnD,oBAAIo3B,OAAO,GAAGD,mBAAmB,CAACn3B,CAAD,CAAjC;;AACA,oBAAIo3B,OAAO,CAACrrB,KAAD,EAAQgqB,QAAR,EAAkBC,aAAlB,EAAiCnQ,QAAjC,EAA2CoQ,YAA3C,EAAyDza,oBAAzD,CAAP,IAAyF,IAA7F,EAAmG;AACjG,yBAAO,IAAP;AACD;AACF;;AAED,qBAAO,IAAI+Z,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,gBAA9C,IAAkE,MAAMD,aAAN,GAAsB,IAAxF,CAAlB,CAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASd,iBAAT,GAA6B;AAC3B,qBAASc,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAI,CAACqB,MAAM,CAACvrB,KAAK,CAACgqB,QAAD,CAAN,CAAX,EAA8B;AAC5B,uBAAO,IAAIR,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,gBAA9C,IAAkE,MAAMD,aAAN,GAAsB,0BAAxF,CAAlB,CAAP;AACD;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAOP,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASN,sBAAT,CAAgCmC,UAAhC,EAA4C;AAC1C,qBAAS7B,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,uBAAO,IAAIhB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,aAA9C,GAA8DM,QAA9D,GAAyE,IAAzE,IAAiF,kBAAkBP,aAAlB,GAAkC,uBAAnH,CAAlB,CAAP;AACD;;AACD,mBAAK,IAAIrxB,GAAT,IAAgB4yB,UAAhB,EAA4B;AAC1B,oBAAIH,OAAO,GAAGG,UAAU,CAAC5yB,GAAD,CAAxB;;AACA,oBAAI,CAACyyB,OAAL,EAAc;AACZ;AACD;;AACD,oBAAIxK,KAAK,GAAGwK,OAAO,CAACd,SAAD,EAAY3xB,GAAZ,EAAiBqxB,aAAjB,EAAgCnQ,QAAhC,EAA0CoQ,YAAY,GAAG,GAAf,GAAqBtxB,GAA/D,EAAoE6W,oBAApE,CAAnB;;AACA,oBAAIoR,KAAJ,EAAW;AACT,yBAAOA,KAAP;AACD;AACF;;AACD,qBAAO,IAAP;AACD;;AACD,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAASJ,4BAAT,CAAsCiC,UAAtC,EAAkD;AAChD,qBAAS7B,QAAT,CAAkB3pB,KAAlB,EAAyBgqB,QAAzB,EAAmCC,aAAnC,EAAkDnQ,QAAlD,EAA4DoQ,YAA5D,EAA0E;AACxE,kBAAIK,SAAS,GAAGvqB,KAAK,CAACgqB,QAAD,CAArB;AACA,kBAAIQ,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,kBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,uBAAO,IAAIhB,aAAJ,CAAkB,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,aAA9C,GAA8DM,QAA9D,GAAyE,IAAzE,IAAiF,kBAAkBP,aAAlB,GAAkC,uBAAnH,CAAlB,CAAP;AACD,eALuE,CAMxE;AACA;;;AACA,kBAAIwB,OAAO,GAAGpE,MAAM,CAAC,EAAD,EAAKrnB,KAAK,CAACgqB,QAAD,CAAV,EAAsBwB,UAAtB,CAApB;;AACA,mBAAK,IAAI5yB,GAAT,IAAgB6yB,OAAhB,EAAyB;AACvB,oBAAIJ,OAAO,GAAGG,UAAU,CAAC5yB,GAAD,CAAxB;;AACA,oBAAI,CAACyyB,OAAL,EAAc;AACZ,yBAAO,IAAI7B,aAAJ,CACL,aAAa1P,QAAb,GAAwB,IAAxB,GAA+BoQ,YAA/B,GAA8C,SAA9C,GAA0DtxB,GAA1D,GAAgE,iBAAhE,GAAoFqxB,aAApF,GAAoG,IAApG,GACA,gBADA,GACmB/N,IAAI,CAACC,SAAL,CAAenc,KAAK,CAACgqB,QAAD,CAApB,EAAgC,IAAhC,EAAsC,IAAtC,CADnB,GAEA,gBAFA,GAEoB9N,IAAI,CAACC,SAAL,CAAeznB,MAAM,CAACuZ,IAAP,CAAYud,UAAZ,CAAf,EAAwC,IAAxC,EAA8C,IAA9C,CAHf,CAAP;AAKD;;AACD,oBAAI3K,KAAK,GAAGwK,OAAO,CAACd,SAAD,EAAY3xB,GAAZ,EAAiBqxB,aAAjB,EAAgCnQ,QAAhC,EAA0CoQ,YAAY,GAAG,GAAf,GAAqBtxB,GAA/D,EAAoE6W,oBAApE,CAAnB;;AACA,oBAAIoR,KAAJ,EAAW;AACT,yBAAOA,KAAP;AACD;AACF;;AACD,qBAAO,IAAP;AACD;;AAED,mBAAO6I,0BAA0B,CAACC,QAAD,CAAjC;AACD;;AAED,mBAAS4B,MAAT,CAAgBhB,SAAhB,EAA2B;AACzB,6BAAeA,SAAf;AACE,mBAAK,QAAL;AACA,mBAAK,QAAL;AACA,mBAAK,WAAL;AACE,uBAAO,IAAP;;AACF,mBAAK,SAAL;AACE,uBAAO,CAACA,SAAR;;AACF,mBAAK,QAAL;AACE,oBAAI3pB,KAAK,CAACnK,OAAN,CAAc8zB,SAAd,CAAJ,EAA8B;AAC5B,yBAAOA,SAAS,CAACvX,KAAV,CAAgBuY,MAAhB,CAAP;AACD;;AACD,oBAAIhB,SAAS,KAAK,IAAd,IAAsB3uB,cAAc,CAAC2uB,SAAD,CAAxC,EAAqD;AACnD,yBAAO,IAAP;AACD;;AAED,oBAAI5C,UAAU,GAAGF,aAAa,CAAC8C,SAAD,CAA9B;;AACA,oBAAI5C,UAAJ,EAAgB;AACd,sBAAIvS,QAAQ,GAAGuS,UAAU,CAACxzB,IAAX,CAAgBo2B,SAAhB,CAAf;AACA,sBAAImB,IAAJ;;AACA,sBAAI/D,UAAU,KAAK4C,SAAS,CAAClW,OAA7B,EAAsC;AACpC,2BAAO,CAAC,CAACqX,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAAjC,EAAuC;AACrC,0BAAI,CAACyd,MAAM,CAACG,IAAI,CAACvwB,KAAN,CAAX,EAAyB;AACvB,+BAAO,KAAP;AACD;AACF;AACF,mBAND,MAMO;AACL;AACA,2BAAO,CAAC,CAACuwB,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAAjC,EAAuC;AACrC,0BAAI6d,KAAK,GAAGD,IAAI,CAACvwB,KAAjB;;AACA,0BAAIwwB,KAAJ,EAAW;AACT,4BAAI,CAACJ,MAAM,CAACI,KAAK,CAAC,CAAD,CAAN,CAAX,EAAuB;AACrB,iCAAO,KAAP;AACD;AACF;AACF;AACF;AACF,iBApBD,MAoBO;AACL,yBAAO,KAAP;AACD;;AAED,uBAAO,IAAP;;AACF;AACE,uBAAO,KAAP;AA1CJ;AA4CD;;AAED,mBAASC,QAAT,CAAkBpB,QAAlB,EAA4BD,SAA5B,EAAuC;AACrC;AACA,gBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,qBAAO,IAAP;AACD,aAJoC,CAMrC;;;AACA,gBAAI,CAACD,SAAL,EAAgB;AACd,qBAAO,KAAP;AACD,aAToC,CAWrC;;;AACA,gBAAIA,SAAS,CAAC,eAAD,CAAT,KAA+B,QAAnC,EAA6C;AAC3C,qBAAO,IAAP;AACD,aAdoC,CAgBrC;;;AACA,gBAAI,OAAOn0B,MAAP,KAAkB,UAAlB,IAAgCm0B,SAAS,YAAYn0B,MAAzD,EAAiE;AAC/D,qBAAO,IAAP;AACD;;AAED,mBAAO,KAAP;AACD,WAte4D,CAwe7D;;;AACA,mBAASq0B,WAAT,CAAqBF,SAArB,EAAgC;AAC9B,gBAAIC,QAAQ,YAAUD,SAAV,CAAZ;;AACA,gBAAI3pB,KAAK,CAACnK,OAAN,CAAc8zB,SAAd,CAAJ,EAA8B;AAC5B,qBAAO,OAAP;AACD;;AACD,gBAAIA,SAAS,YAAYsB,MAAzB,EAAiC;AAC/B;AACA;AACA;AACA,qBAAO,QAAP;AACD;;AACD,gBAAID,QAAQ,CAACpB,QAAD,EAAWD,SAAX,CAAZ,EAAmC;AACjC,qBAAO,QAAP;AACD;;AACD,mBAAOC,QAAP;AACD,WAxf4D,CA0f7D;AACA;;;AACA,mBAASG,cAAT,CAAwBJ,SAAxB,EAAmC;AACjC,gBAAI,OAAOA,SAAP,KAAqB,WAArB,IAAoCA,SAAS,KAAK,IAAtD,EAA4D;AAC1D,qBAAO,KAAKA,SAAZ;AACD;;AACD,gBAAIC,QAAQ,GAAGC,WAAW,CAACF,SAAD,CAA1B;;AACA,gBAAIC,QAAQ,KAAK,QAAjB,EAA2B;AACzB,kBAAID,SAAS,YAAY/f,IAAzB,EAA+B;AAC7B,uBAAO,MAAP;AACD,eAFD,MAEO,IAAI+f,SAAS,YAAYsB,MAAzB,EAAiC;AACtC,uBAAO,QAAP;AACD;AACF;;AACD,mBAAOrB,QAAP;AACD,WAzgB4D,CA2gB7D;AACA;;;AACA,mBAASc,wBAAT,CAAkCnwB,KAAlC,EAAyC;AACvC,gBAAIzB,IAAI,GAAGixB,cAAc,CAACxvB,KAAD,CAAzB;;AACA,oBAAQzB,IAAR;AACE,mBAAK,OAAL;AACA,mBAAK,QAAL;AACE,uBAAO,QAAQA,IAAf;;AACF,mBAAK,SAAL;AACA,mBAAK,MAAL;AACA,mBAAK,QAAL;AACE,uBAAO,OAAOA,IAAd;;AACF;AACE,uBAAOA,IAAP;AATJ;AAWD,WA1hB4D,CA4hB7D;;;AACA,mBAASsxB,YAAT,CAAsBT,SAAtB,EAAiC;AAC/B,gBAAI,CAACA,SAAS,CAAC1zB,WAAX,IAA0B,CAAC0zB,SAAS,CAAC1zB,WAAV,CAAsBtC,IAArD,EAA2D;AACzD,qBAAOqzB,SAAP;AACD;;AACD,mBAAO2C,SAAS,CAAC1zB,WAAV,CAAsBtC,IAA7B;AACD;;AAEDszB,UAAAA,cAAc,CAACpjB,cAAf,GAAgCA,cAAhC;AACAojB,UAAAA,cAAc,CAACiE,iBAAf,GAAmCrnB,cAAc,CAACqnB,iBAAlD;AACAjE,UAAAA,cAAc,CAACziB,SAAf,GAA2ByiB,cAA3B;AAEA,iBAAOA,cAAP;AACD,SAziBD;AA2iBA;;AAA4B,OAhlBA,EAglBC1zB,IAhlBD,CAglBMV,OAhlBN,EAglBeM,mBAAmB,CAAC,CAAD,CAhlBlC,CAAD;AAklB3B;AAAO,KAp4IG;AAq4IV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;AAOA;;AACA,UAAIoe,qBAAqB,GAAGzd,MAAM,CAACyd,qBAAnC;AACA,UAAI7c,cAAc,GAAGZ,MAAM,CAACW,SAAP,CAAiBC,cAAtC;AACA,UAAIy2B,gBAAgB,GAAGr3B,MAAM,CAACW,SAAP,CAAiBwZ,oBAAxC;;AAEA,eAASqG,QAAT,CAAkBxe,GAAlB,EAAuB;AACtB,YAAIA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAKkE,SAA5B,EAAuC;AACtC,gBAAM,IAAI6K,SAAJ,CAAc,uDAAd,CAAN;AACA;;AAED,eAAO/Q,MAAM,CAACgC,GAAD,CAAb;AACA;;AAED,eAASs1B,eAAT,GAA2B;AAC1B,YAAI;AACH,cAAI,CAACt3B,MAAM,CAAC2yB,MAAZ,EAAoB;AACnB,mBAAO,KAAP;AACA,WAHE,CAKH;AAEA;;;AACA,cAAI4E,KAAK,GAAG,IAAIrtB,MAAJ,CAAW,KAAX,CAAZ,CARG,CAQ6B;;AAChCqtB,UAAAA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAX;;AACA,cAAIv3B,MAAM,CAAC2jB,mBAAP,CAA2B4T,KAA3B,EAAkC,CAAlC,MAAyC,GAA7C,EAAkD;AACjD,mBAAO,KAAP;AACA,WAZE,CAcH;;;AACA,cAAIC,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIj4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC5Bi4B,YAAAA,KAAK,CAAC,MAAMttB,MAAM,CAACutB,YAAP,CAAoBl4B,CAApB,CAAP,CAAL,GAAsCA,CAAtC;AACA;;AACD,cAAIm4B,MAAM,GAAG13B,MAAM,CAAC2jB,mBAAP,CAA2B6T,KAA3B,EAAkC3rB,GAAlC,CAAsC,UAAUxL,CAAV,EAAa;AAC/D,mBAAOm3B,KAAK,CAACn3B,CAAD,CAAZ;AACA,WAFY,CAAb;;AAGA,cAAIq3B,MAAM,CAAC7R,IAAP,CAAY,EAAZ,MAAoB,YAAxB,EAAsC;AACrC,mBAAO,KAAP;AACA,WAxBE,CA0BH;;;AACA,cAAI8R,KAAK,GAAG,EAAZ;AACA,iCAAuB9vB,KAAvB,CAA6B,EAA7B,EAAiC/D,OAAjC,CAAyC,UAAU8zB,MAAV,EAAkB;AAC1DD,YAAAA,KAAK,CAACC,MAAD,CAAL,GAAgBA,MAAhB;AACA,WAFD;;AAGA,cAAI53B,MAAM,CAACuZ,IAAP,CAAYvZ,MAAM,CAAC2yB,MAAP,CAAc,EAAd,EAAkBgF,KAAlB,CAAZ,EAAsC9R,IAAtC,CAA2C,EAA3C,MACF,sBADF,EAC0B;AACzB,mBAAO,KAAP;AACA;;AAED,iBAAO,IAAP;AACA,SArCD,CAqCE,OAAOO,GAAP,EAAY;AACb;AACA,iBAAO,KAAP;AACA;AACD;;AAEDpnB,MAAAA,MAAM,CAACD,OAAP,GAAiBu4B,eAAe,KAAKt3B,MAAM,CAAC2yB,MAAZ,GAAqB,UAAU5sB,MAAV,EAAkBd,MAAlB,EAA0B;AAC9E,YAAI0d,IAAJ;AACA,YAAIkV,EAAE,GAAGrX,QAAQ,CAACza,MAAD,CAAjB;AACA,YAAI+xB,OAAJ;;AAEA,aAAK,IAAIh3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuD,SAAS,CAACJ,MAA9B,EAAsCnD,CAAC,EAAvC,EAA2C;AAC1C6hB,UAAAA,IAAI,GAAG3iB,MAAM,CAACqE,SAAS,CAACvD,CAAD,CAAV,CAAb;;AAEA,eAAK,IAAIoD,GAAT,IAAgBye,IAAhB,EAAsB;AACrB,gBAAI/hB,cAAc,CAACnB,IAAf,CAAoBkjB,IAApB,EAA0Bze,GAA1B,CAAJ,EAAoC;AACnC2zB,cAAAA,EAAE,CAAC3zB,GAAD,CAAF,GAAUye,IAAI,CAACze,GAAD,CAAd;AACA;AACD;;AAED,cAAIuZ,qBAAJ,EAA2B;AAC1Bqa,YAAAA,OAAO,GAAGra,qBAAqB,CAACkF,IAAD,CAA/B;;AACA,iBAAK,IAAIpjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGu4B,OAAO,CAAC7zB,MAA5B,EAAoC1E,CAAC,EAArC,EAAyC;AACxC,kBAAI83B,gBAAgB,CAAC53B,IAAjB,CAAsBkjB,IAAtB,EAA4BmV,OAAO,CAACv4B,CAAD,CAAnC,CAAJ,EAA6C;AAC5Cs4B,gBAAAA,EAAE,CAACC,OAAO,CAACv4B,CAAD,CAAR,CAAF,GAAiBojB,IAAI,CAACmV,OAAO,CAACv4B,CAAD,CAAR,CAArB;AACA;AACD;AACD;AACD;;AAED,eAAOs4B,EAAP;AACA,OAzBD;AA4BA;AAAO,KAr+IG;AAs+IV;;AACA;AAAO,cAAS74B,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAAC;;;;;;AAS/C,YAAIsrB,YAAY,GAAG,wBAAW,CAAE,CAAhC;;AAEA,YAAItrB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,cAAIiS,oBAAoB,GAAG1b,mBAAmB,CAAC,EAAD,CAA9C;;AACA,cAAI04B,kBAAkB,GAAG,EAAzB;AACA,cAAIlzB,GAAG,GAAGvD,QAAQ,CAAC7B,IAAT,CAAcoC,IAAd,CAAmB7B,MAAM,CAACW,SAAP,CAAiBC,cAApC,CAAV;;AAEAoxB,UAAAA,YAAY,GAAG,sBAASvE,IAAT,EAAe;AAC5B,gBAAIlH,OAAO,GAAG,cAAckH,IAA5B;;AACA,gBAAI,OAAO0E,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,cAAAA,OAAO,CAAChG,KAAR,CAAc5F,OAAd;AACD;;AACD,gBAAI;AACF;AACA;AACA;AACA,oBAAM,IAAIta,KAAJ,CAAUsa,OAAV,CAAN;AACD,aALD,CAKE,OAAOhE,CAAP,EAAU,CAAE;AACf,WAXD;AAYD;AAED;;;;;;;;;;;;;AAWA,iBAASxS,cAAT,CAAwBioB,SAAxB,EAAmCtY,MAAnC,EAA2C0F,QAA3C,EAAqDmQ,aAArD,EAAoE0C,QAApE,EAA8E;AAC5E,cAAIvxB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,iBAAK,IAAIovB,YAAT,IAAyBF,SAAzB,EAAoC;AAClC,kBAAInzB,GAAG,CAACmzB,SAAD,EAAYE,YAAZ,CAAP,EAAkC;AAChC,oBAAI/L,KAAJ,CADgC,CAEhC;AACA;AACA;;AACA,oBAAI;AACF;AACA;AACA,sBAAI,OAAO6L,SAAS,CAACE,YAAD,CAAhB,KAAmC,UAAvC,EAAmD;AACjD,wBAAI9R,GAAG,GAAGna,KAAK,CACb,CAACspB,aAAa,IAAI,aAAlB,IAAmC,IAAnC,GAA0CnQ,QAA1C,GAAqD,SAArD,GAAiE8S,YAAjE,GAAgF,gBAAhF,GACA,8EADA,YACwFF,SAAS,CAACE,YAAD,CADjG,IACkH,IAFrG,CAAf;AAIA9R,oBAAAA,GAAG,CAACvmB,IAAJ,GAAW,qBAAX;AACA,0BAAMumB,GAAN;AACD;;AACD+F,kBAAAA,KAAK,GAAG6L,SAAS,CAACE,YAAD,CAAT,CAAwBxY,MAAxB,EAAgCwY,YAAhC,EAA8C3C,aAA9C,EAA6DnQ,QAA7D,EAAuE,IAAvE,EAA6ErK,oBAA7E,CAAR;AACD,iBAZD,CAYE,OAAOod,EAAP,EAAW;AACXhM,kBAAAA,KAAK,GAAGgM,EAAR;AACD;;AACD,oBAAIhM,KAAK,IAAI,EAAEA,KAAK,YAAYlgB,KAAnB,CAAb,EAAwC;AACtC+lB,kBAAAA,YAAY,CACV,CAACuD,aAAa,IAAI,aAAlB,IAAmC,0BAAnC,GACAnQ,QADA,GACW,IADX,GACkB8S,YADlB,GACiC,iCADjC,GAEA,2DAFA,YAEqE/L,KAFrE,IAE6E,IAF7E,GAGA,iEAHA,GAIA,gEAJA,GAKA,iCANU,CAAZ;AAQD;;AACD,oBAAIA,KAAK,YAAYlgB,KAAjB,IAA0B,EAAEkgB,KAAK,CAAC5F,OAAN,IAAiBwR,kBAAnB,CAA9B,EAAsE;AACpE;AACA;AACAA,kBAAAA,kBAAkB,CAAC5L,KAAK,CAAC5F,OAAP,CAAlB,GAAoC,IAApC;AAEA,sBAAIwO,KAAK,GAAGkD,QAAQ,GAAGA,QAAQ,EAAX,GAAgB,EAApC;AAEAjG,kBAAAA,YAAY,CACV,YAAY5M,QAAZ,GAAuB,SAAvB,GAAmC+G,KAAK,CAAC5F,OAAzC,IAAoDwO,KAAK,IAAI,IAAT,GAAgBA,KAAhB,GAAwB,EAA5E,CADU,CAAZ;AAGD;AACF;AACF;AACF;AACF;AAED;;;;;;;AAKAhlB,QAAAA,cAAc,CAACqnB,iBAAf,GAAmC,YAAW;AAC5C,cAAI1wB,OAAO,CAACmC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCivB,YAAAA,kBAAkB,GAAG,EAArB;AACD;AACF,SAJD;;AAMA/4B,QAAAA,MAAM,CAACD,OAAP,GAAiBgR,cAAjB;AAEA;AAA4B,OAvGA,EAuGCtQ,IAvGD,CAuGMV,OAvGN,EAuGeM,mBAAmB,CAAC,CAAD,CAvGlC,CAAD;AAyG3B;AAAO,KAnlJG;AAolJV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;;;;;;AASA,UAAI0b,oBAAoB,GAAG1b,mBAAmB,CAAC,EAAD,CAA9C;;AAEA,eAAS+4B,aAAT,GAAyB,CAAE;;AAC3B,eAASC,sBAAT,GAAkC,CAAE;;AACpCA,MAAAA,sBAAsB,CAACjB,iBAAvB,GAA2CgB,aAA3C;;AAEAp5B,MAAAA,MAAM,CAACD,OAAP,GAAiB,YAAW;AAC1B,iBAASu5B,IAAT,CAAchtB,KAAd,EAAqBgqB,QAArB,EAA+BC,aAA/B,EAA8CnQ,QAA9C,EAAwDoQ,YAAxD,EAAsEC,MAAtE,EAA8E;AAC5E,cAAIA,MAAM,KAAK1a,oBAAf,EAAqC;AACnC;AACA;AACD;;AACD,cAAIqL,GAAG,GAAG,IAAIna,KAAJ,CACR,yFACA,+CADA,GAEA,gDAHQ,CAAV;AAKAma,UAAAA,GAAG,CAACvmB,IAAJ,GAAW,qBAAX;AACA,gBAAMumB,GAAN;AACD;;AAAA;AACDkS,QAAAA,IAAI,CAACjD,UAAL,GAAkBiD,IAAlB;;AACA,iBAASC,OAAT,GAAmB;AACjB,iBAAOD,IAAP;AACD;;AAAA,SAjByB,CAkB1B;AACA;;AACA,YAAInF,cAAc,GAAG;AACnBxgB,UAAAA,KAAK,EAAE2lB,IADY;AAEnBjF,UAAAA,IAAI,EAAEiF,IAFa;AAGnBhF,UAAAA,IAAI,EAAEgF,IAHa;AAInB/E,UAAAA,MAAM,EAAE+E,IAJW;AAKnB73B,UAAAA,MAAM,EAAE63B,IALW;AAMnB9E,UAAAA,MAAM,EAAE8E,IANW;AAOnB7E,UAAAA,MAAM,EAAE6E,IAPW;AASnB5E,UAAAA,GAAG,EAAE4E,IATc;AAUnB1E,UAAAA,OAAO,EAAE2E,OAVU;AAWnBjrB,UAAAA,OAAO,EAAEgrB,IAXU;AAYnBvE,UAAAA,WAAW,EAAEuE,IAZM;AAanBrE,UAAAA,UAAU,EAAEsE,OAbO;AAcnB/qB,UAAAA,IAAI,EAAE8qB,IAda;AAenBlE,UAAAA,QAAQ,EAAEmE,OAfS;AAgBnBjE,UAAAA,KAAK,EAAEiE,OAhBY;AAiBnB/D,UAAAA,SAAS,EAAE+D,OAjBQ;AAkBnB7D,UAAAA,KAAK,EAAE6D,OAlBY;AAmBnB3D,UAAAA,KAAK,EAAE2D,OAnBY;AAqBnBxoB,UAAAA,cAAc,EAAEsoB,sBArBG;AAsBnBjB,UAAAA,iBAAiB,EAAEgB;AAtBA,SAArB;AAyBAjF,QAAAA,cAAc,CAACziB,SAAf,GAA2ByiB,cAA3B;AAEA,eAAOA,cAAP;AACD,OAhDD;AAmDA;;AAAO,KA1pJG;AA2pJV;;AACA;AAAO,cAASn0B,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,OAAC,YAAW;AACR;;AACA,iBAAS2J,KAAT,GAAiB,CAAE;;AACnB,iBAAS4lB,CAAT,CAAWxlB,QAAX,EAAqBG,UAArB,EAAiC;AAC7B,cAAIivB,UAAJ;AAAA,cAAgBC,KAAhB;AAAA,cAAuBC,MAAvB;AAAA,cAA+Bn5B,CAA/B;AAAA,cAAkC0K,QAAQ,GAAG0uB,cAA7C;;AACA,eAAKp5B,CAAC,GAAG8E,SAAS,CAACJ,MAAnB,EAA2B1E,CAAC,KAAK,CAAjC;AAAsCw1B,YAAAA,KAAK,CAACrnB,IAAN,CAAWrJ,SAAS,CAAC9E,CAAD,CAApB;AAAtC;;AACA,cAAIgK,UAAU,IAAI,QAAQA,UAAU,CAACU,QAArC,EAA+C;AAC3C,gBAAI,CAAC8qB,KAAK,CAAC9wB,MAAX,EAAmB8wB,KAAK,CAACrnB,IAAN,CAAWnE,UAAU,CAACU,QAAtB;AACnB,mBAAOV,UAAU,CAACU,QAAlB;AACH;;AACD,iBAAO8qB,KAAK,CAAC9wB,MAAb;AAAqB,gBAAI,CAACw0B,KAAK,GAAG1D,KAAK,CAAC6D,GAAN,EAAT,KAAyB,KAAK,CAAL,KAAWH,KAAK,CAACG,GAA9C,EAAmD,KAAKr5B,CAAC,GAAGk5B,KAAK,CAACx0B,MAAf,EAAuB1E,CAAC,EAAxB;AAA8Bw1B,cAAAA,KAAK,CAACrnB,IAAN,CAAW+qB,KAAK,CAACl5B,CAAD,CAAhB;AAA9B,aAAnD,MAA4G;AAC7H,kBAAIk5B,KAAK,KAAK,CAAC,CAAX,IAAgBA,KAAK,KAAK,CAAC,CAA/B,EAAkCA,KAAK,GAAG,IAAR;AAClC,kBAAIC,MAAM,GAAG,cAAc,OAAOtvB,QAAlC,EAA4C,IAAI,QAAQqvB,KAAZ,EAAmBA,KAAK,GAAG,EAAR,CAAnB,KAAoC,IAAI,YAAY,OAAOA,KAAvB,EAA8BA,KAAK,GAAGvuB,MAAM,CAACuuB,KAAD,CAAd,CAA9B,KAA0D,IAAI,YAAY,OAAOA,KAAvB,EAA8BC,MAAM,GAAG,CAAC,CAAV;AACxK,kBAAIA,MAAM,IAAIF,UAAd,EAA0BvuB,QAAQ,CAACA,QAAQ,CAAChG,MAAT,GAAkB,CAAnB,CAAR,IAAiCw0B,KAAjC,CAA1B,KAAuE,IAAIxuB,QAAQ,KAAK0uB,cAAjB,EAAiC1uB,QAAQ,GAAG,CAAEwuB,KAAF,CAAX,CAAjC,KAA4DxuB,QAAQ,CAACyD,IAAT,CAAc+qB,KAAd;AACnID,cAAAA,UAAU,GAAGE,MAAb;AACH;AALD;;AAMA,cAAI73B,CAAC,GAAG,IAAImI,KAAJ,EAAR;AACAnI,UAAAA,CAAC,CAACuI,QAAF,GAAaA,QAAb;AACAvI,UAAAA,CAAC,CAACoJ,QAAF,GAAaA,QAAb;AACApJ,UAAAA,CAAC,CAAC0I,UAAF,GAAe,QAAQA,UAAR,GAAqB,KAAK,CAA1B,GAA8BA,UAA7C;AACA1I,UAAAA,CAAC,CAACqD,GAAF,GAAQ,QAAQqF,UAAR,GAAqB,KAAK,CAA1B,GAA8BA,UAAU,CAACrF,GAAjD;AACA,cAAI,KAAK,CAAL,KAAW8R,OAAO,CAAClM,KAAvB,EAA8BkM,OAAO,CAAClM,KAAR,CAAcjJ,CAAd;AAC9B,iBAAOA,CAAP;AACH;;AACD,iBAAS0D,MAAT,CAAgBR,GAAhB,EAAqBuH,KAArB,EAA4B;AACxB,eAAK,IAAI/L,CAAT,IAAc+L,KAAd;AAAqBvH,YAAAA,GAAG,CAACxE,CAAD,CAAH,GAAS+L,KAAK,CAAC/L,CAAD,CAAd;AAArB;;AACA,iBAAOwE,GAAP;AACH;;AACD,iBAAS4M,YAAT,CAAsB7G,KAAtB,EAA6BwB,KAA7B,EAAoC;AAChC,iBAAOsjB,CAAC,CAAC9kB,KAAK,CAACV,QAAP,EAAiB7E,MAAM,CAACA,MAAM,CAAC,EAAD,EAAKuF,KAAK,CAACP,UAAX,CAAP,EAA+B+B,KAA/B,CAAvB,EAA8DjH,SAAS,CAACJ,MAAV,GAAmB,CAAnB,GAAuB,GAAGuT,KAAH,CAAS/X,IAAT,CAAc4E,SAAd,EAAyB,CAAzB,CAAvB,GAAqDyF,KAAK,CAACG,QAAzH,CAAR;AACH;;AACD,iBAAS4uB,aAAT,CAAuBlrB,SAAvB,EAAkC;AAC9B,cAAI,CAACA,SAAS,CAACmrB,GAAX,KAAmBnrB,SAAS,CAACmrB,GAAV,GAAgB,CAAC,CAApC,KAA0C,KAAKC,KAAK,CAACrrB,IAAN,CAAWC,SAAX,CAAnD,EAA0E,CAACqI,OAAO,CAACgjB,iBAAR,IAA6BrnB,UAA9B,EAA0CsnB,QAA1C;AAC7E;;AACD,iBAASA,QAAT,GAAoB;AAChB,cAAIp4B,CAAJ;AAAA,cAAOq4B,IAAI,GAAGH,KAAd;AACAA,UAAAA,KAAK,GAAG,EAAR;;AACA,iBAAOl4B,CAAC,GAAGq4B,IAAI,CAACN,GAAL,EAAX;AAAuB,gBAAI/3B,CAAC,CAACi4B,GAAN,EAAWK,eAAe,CAACt4B,CAAD,CAAf;AAAlC;AACH;;AACD,iBAASu4B,cAAT,CAAwB5rB,IAAxB,EAA8B1D,KAA9B,EAAqCuvB,SAArC,EAAgD;AAC5C,cAAI,YAAY,OAAOvvB,KAAnB,IAA4B,YAAY,OAAOA,KAAnD,EAA0D,OAAO,KAAK,CAAL,KAAW0D,IAAI,CAAC8rB,SAAvB;AAC1D,cAAI,YAAY,OAAOxvB,KAAK,CAACV,QAA7B,EAAuC,OAAO,CAACoE,IAAI,CAAC+rB,qBAAN,IAA+BC,WAAW,CAAChsB,IAAD,EAAO1D,KAAK,CAACV,QAAb,CAAjD,CAAvC,KAAqH,OAAOiwB,SAAS,IAAI7rB,IAAI,CAAC+rB,qBAAL,KAA+BzvB,KAAK,CAACV,QAAzD;AACxH;;AACD,iBAASowB,WAAT,CAAqBhsB,IAArB,EAA2BpE,QAA3B,EAAqC;AACjC,iBAAOoE,IAAI,CAACisB,GAAL,KAAarwB,QAAb,IAAyBoE,IAAI,CAACpE,QAAL,CAAcsB,WAAd,OAAgCtB,QAAQ,CAACsB,WAAT,EAAhE;AACH;;AACD,iBAASgvB,YAAT,CAAsB5vB,KAAtB,EAA6B;AACzB,cAAIwB,KAAK,GAAG/G,MAAM,CAAC,EAAD,EAAKuF,KAAK,CAACP,UAAX,CAAlB;AACA+B,UAAAA,KAAK,CAACrB,QAAN,GAAiBH,KAAK,CAACG,QAAvB;AACA,cAAIM,YAAY,GAAGT,KAAK,CAACV,QAAN,CAAemB,YAAlC;AACA,cAAI,KAAK,CAAL,KAAWA,YAAf,EAA6B,KAAK,IAAIhL,CAAT,IAAcgL,YAAd;AAA4B,gBAAI,KAAK,CAAL,KAAWe,KAAK,CAAC/L,CAAD,CAApB,EAAyB+L,KAAK,CAAC/L,CAAD,CAAL,GAAWgL,YAAY,CAAChL,CAAD,CAAvB;AAArD;AAC7B,iBAAO+L,KAAP;AACH;;AACD,iBAASquB,UAAT,CAAoBvwB,QAApB,EAA8BwwB,KAA9B,EAAqC;AACjC,cAAIpsB,IAAI,GAAGosB,KAAK,GAAG/1B,QAAQ,CAACg2B,eAAT,CAAyB,4BAAzB,EAAuDzwB,QAAvD,CAAH,GAAsEvF,QAAQ,CAACmD,aAAT,CAAuBoC,QAAvB,CAAtF;AACAoE,UAAAA,IAAI,CAACisB,GAAL,GAAWrwB,QAAX;AACA,iBAAOoE,IAAP;AACH;;AACD,iBAASssB,UAAT,CAAoBtsB,IAApB,EAA0B;AACtB,cAAIA,IAAI,CAACxC,UAAT,EAAqBwC,IAAI,CAACxC,UAAL,CAAgBE,WAAhB,CAA4BsC,IAA5B;AACxB;;AACD,iBAASusB,WAAT,CAAqBvsB,IAArB,EAA2B3N,IAA3B,EAAiCm6B,GAAjC,EAAsCvzB,KAAtC,EAA6CmzB,KAA7C,EAAoD;AAChD,cAAI,gBAAgB/5B,IAApB,EAA0BA,IAAI,GAAG,OAAP;AAC1B,cAAI,UAAUA,IAAd,EAAoB,CAApB,KAA2B,IAAI,UAAUA,IAAd,EAAoB;AAC3C,gBAAIm6B,GAAJ,EAASA,GAAG,CAAC,IAAD,CAAH;AACT,gBAAIvzB,KAAJ,EAAWA,KAAK,CAAC+G,IAAD,CAAL;AACd,WAH0B,MAGpB,IAAI,YAAY3N,IAAZ,IAAoB,CAAC+5B,KAAzB,EAAgCpsB,IAAI,CAACc,SAAL,GAAiB7H,KAAK,IAAI,EAA1B,CAAhC,KAAmE,IAAI,YAAY5G,IAAhB,EAAsB;AAC5F,gBAAI,CAAC4G,KAAD,IAAU,YAAY,OAAOA,KAA7B,IAAsC,YAAY,OAAOuzB,GAA7D,EAAkExsB,IAAI,CAACmO,KAAL,CAAWse,OAAX,GAAqBxzB,KAAK,IAAI,EAA9B;;AAClE,gBAAIA,KAAK,IAAI,qBAAmBA,KAAnB,CAAb,EAAuC;AACnC,kBAAI,YAAY,OAAOuzB,GAAvB,EAA4B,KAAK,IAAIz6B,CAAT,IAAcy6B,GAAd;AAAmB,oBAAI,EAAEz6B,CAAC,IAAIkH,KAAP,CAAJ,EAAmB+G,IAAI,CAACmO,KAAL,CAAWpc,CAAX,IAAgB,EAAhB;AAAtC;;AAC5B,mBAAK,IAAIA,CAAT,IAAckH,KAAd;AAAqB+G,gBAAAA,IAAI,CAACmO,KAAL,CAAWpc,CAAX,IAAgB,YAAY,OAAOkH,KAAK,CAAClH,CAAD,CAAxB,IAA+B26B,kBAAkB,CAACzvB,IAAnB,CAAwBlL,CAAxB,MAA+B,CAAC,CAA/D,GAAmEkH,KAAK,CAAClH,CAAD,CAAL,GAAW,IAA9E,GAAqFkH,KAAK,CAAClH,CAAD,CAA1G;AAArB;AACH;AACJ,WANyE,MAMnE,IAAI,8BAA8BM,IAAlC,EAAwC;AAC3C,gBAAI4G,KAAJ,EAAW+G,IAAI,CAAC2sB,SAAL,GAAiB1zB,KAAK,CAACknB,MAAN,IAAgB,EAAjC;AACd,WAFM,MAEA,IAAI,OAAO9tB,IAAI,CAAC,CAAD,CAAX,IAAkB,OAAOA,IAAI,CAAC,CAAD,CAAjC,EAAsC;AACzC,gBAAIu6B,UAAU,GAAGv6B,IAAI,MAAMA,IAAI,GAAGA,IAAI,CAAC4D,OAAL,CAAa,UAAb,EAAyB,EAAzB,CAAb,CAArB;AACA5D,YAAAA,IAAI,GAAGA,IAAI,CAAC6K,WAAL,GAAmB4a,SAAnB,CAA6B,CAA7B,CAAP;;AACA,gBAAI7e,KAAJ,EAAW;AACP,kBAAI,CAACuzB,GAAL,EAAUxsB,IAAI,CAAC2U,gBAAL,CAAsBtiB,IAAtB,EAA4Bw6B,UAA5B,EAAwCD,UAAxC;AACb,aAFD,MAEO5sB,IAAI,CAAC8sB,mBAAL,CAAyBz6B,IAAzB,EAA+Bw6B,UAA/B,EAA2CD,UAA3C;;AACP,aAAC5sB,IAAI,CAAC+sB,GAAL,KAAa/sB,IAAI,CAAC+sB,GAAL,GAAW,EAAxB,CAAD,EAA8B16B,IAA9B,IAAsC4G,KAAtC;AACH,WAPM,MAOA,IAAI,WAAW5G,IAAX,IAAmB,WAAWA,IAA9B,IAAsC,CAAC+5B,KAAvC,IAAgD/5B,IAAI,IAAI2N,IAA5D,EAAkE;AACrEgtB,YAAAA,WAAW,CAAChtB,IAAD,EAAO3N,IAAP,EAAa,QAAQ4G,KAAR,GAAgB,EAAhB,GAAqBA,KAAlC,CAAX;AACA,gBAAI,QAAQA,KAAR,IAAiBA,KAAK,KAAK,CAAC,CAAhC,EAAmC+G,IAAI,CAACitB,eAAL,CAAqB56B,IAArB;AACtC,WAHM,MAGA;AACH,gBAAI66B,EAAE,GAAGd,KAAK,IAAI/5B,IAAI,MAAMA,IAAI,GAAGA,IAAI,CAAC4D,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAAb,CAAtB;AACA,gBAAI,QAAQgD,KAAR,IAAiBA,KAAK,KAAK,CAAC,CAAhC;AAAmC,kBAAIi0B,EAAJ,EAAQltB,IAAI,CAACmtB,iBAAL,CAAuB,8BAAvB,EAAuD96B,IAAI,CAAC6K,WAAL,EAAvD,EAAR,KAAyF8C,IAAI,CAACitB,eAAL,CAAqB56B,IAArB;AAA5H,mBAA6J,IAAI,cAAc,OAAO4G,KAAzB,EAAgC,IAAIi0B,EAAJ,EAAQltB,IAAI,CAACotB,cAAL,CAAoB,8BAApB,EAAoD/6B,IAAI,CAAC6K,WAAL,EAApD,EAAwEjE,KAAxE,EAAR,KAA6F+G,IAAI,CAACqtB,YAAL,CAAkBh7B,IAAlB,EAAwB4G,KAAxB;AAC7R;AACJ;;AACD,iBAAS+zB,WAAT,CAAqBhtB,IAArB,EAA2B3N,IAA3B,EAAiC4G,KAAjC,EAAwC;AACpC,cAAI;AACA+G,YAAAA,IAAI,CAAC3N,IAAD,CAAJ,GAAa4G,KAAb;AACH,WAFD,CAEE,OAAOiD,CAAP,EAAU,CAAE;AACjB;;AACD,iBAAS2wB,UAAT,CAAoB3wB,CAApB,EAAuB;AACnB,iBAAO,KAAK6wB,GAAL,CAAS7wB,CAAC,CAAC1E,IAAX,EAAiBgR,OAAO,CAACvM,KAAR,IAAiBuM,OAAO,CAACvM,KAAR,CAAcC,CAAd,CAAjB,IAAqCA,CAAtD,CAAP;AACH;;AACD,iBAASoxB,WAAT,GAAuB;AACnB,cAAIn7B,CAAJ;;AACA,iBAAOA,CAAC,GAAGo7B,MAAM,CAACnC,GAAP,EAAX,EAAyB;AACrB,gBAAI5iB,OAAO,CAACglB,UAAZ,EAAwBhlB,OAAO,CAACglB,UAAR,CAAmBr7B,CAAnB;AACxB,gBAAIA,CAAC,CAAC4I,iBAAN,EAAyB5I,CAAC,CAAC4I,iBAAF;AAC5B;AACJ;;AACD,iBAASmQ,IAAT,CAAcuiB,GAAd,EAAmBnxB,KAAnB,EAA0ByB,OAA1B,EAAmC2vB,QAAnC,EAA6CvwB,MAA7C,EAAqDwwB,aAArD,EAAoE;AAChE,cAAI,CAACC,SAAS,EAAd,EAAkB;AACdC,YAAAA,SAAS,GAAG,QAAQ1wB,MAAR,IAAkB,KAAK,CAAL,KAAWA,MAAM,CAAC2wB,eAAhD;AACAjC,YAAAA,SAAS,GAAG,QAAQ4B,GAAR,IAAe,EAAE,mBAAmBA,GAArB,CAA3B;AACH;;AACD,cAAIxrB,GAAG,GAAG8rB,KAAK,CAACN,GAAD,EAAMnxB,KAAN,EAAayB,OAAb,EAAsB2vB,QAAtB,EAAgCC,aAAhC,CAAf;AACA,cAAIxwB,MAAM,IAAI8E,GAAG,CAACzE,UAAJ,KAAmBL,MAAjC,EAAyCA,MAAM,CAACkR,WAAP,CAAmBpM,GAAnB;;AACzC,cAAI,CAAC,GAAE2rB,SAAP,EAAkB;AACd/B,YAAAA,SAAS,GAAG,CAAC,CAAb;AACA,gBAAI,CAAC8B,aAAL,EAAoBL,WAAW;AAClC;;AACD,iBAAOrrB,GAAP;AACH;;AACD,iBAAS8rB,KAAT,CAAeN,GAAf,EAAoBnxB,KAApB,EAA2ByB,OAA3B,EAAoC2vB,QAApC,EAA8CC,aAA9C,EAA6D;AACzD,cAAIl1B,GAAG,GAAGg1B,GAAV;AAAA,cAAeO,WAAW,GAAGH,SAA7B;AACA,cAAI,QAAQvxB,KAAZ,EAAmBA,KAAK,GAAG,EAAR;;AACnB,cAAI,YAAY,OAAOA,KAAvB,EAA8B;AAC1B,gBAAImxB,GAAG,IAAI,KAAK,CAAL,KAAWA,GAAG,CAAC3B,SAAtB,IAAmC2B,GAAG,CAACjwB,UAAvC,KAAsD,CAACiwB,GAAG,CAAC9vB,UAAL,IAAmBgwB,aAAzE,CAAJ,EAA6F;AACzF,kBAAIF,GAAG,CAACQ,SAAJ,IAAiB3xB,KAArB,EAA4BmxB,GAAG,CAACQ,SAAJ,GAAgB3xB,KAAhB;AAC/B,aAFD,MAEO;AACH7D,cAAAA,GAAG,GAAGpC,QAAQ,CAAC63B,cAAT,CAAwB5xB,KAAxB,CAAN;;AACA,kBAAImxB,GAAJ,EAAS;AACL,oBAAIA,GAAG,CAACjwB,UAAR,EAAoBiwB,GAAG,CAACjwB,UAAJ,CAAe2wB,YAAf,CAA4B11B,GAA5B,EAAiCg1B,GAAjC;AACpBW,gBAAAA,iBAAiB,CAACX,GAAD,EAAM,CAAC,CAAP,CAAjB;AACH;AACJ;;AACDh1B,YAAAA,GAAG,CAAC41B,aAAJ,GAAoB,CAAC,CAArB;AACA,mBAAO51B,GAAP;AACH;;AACD,cAAI,cAAc,OAAO6D,KAAK,CAACV,QAA/B,EAAyC,OAAO0yB,uBAAuB,CAACb,GAAD,EAAMnxB,KAAN,EAAayB,OAAb,EAAsB2vB,QAAtB,CAA9B;AACzCG,UAAAA,SAAS,GAAG,UAAUvxB,KAAK,CAACV,QAAhB,GAA2B,CAAC,CAA5B,GAAgC,oBAAoBU,KAAK,CAACV,QAA1B,GAAqC,CAAC,CAAtC,GAA0CiyB,SAAtF;;AACA,cAAI,CAACJ,GAAD,IAAQ,CAACzB,WAAW,CAACyB,GAAD,EAAM/wB,MAAM,CAACJ,KAAK,CAACV,QAAP,CAAZ,CAAxB,EAAuD;AACnDnD,YAAAA,GAAG,GAAG0zB,UAAU,CAACzvB,MAAM,CAACJ,KAAK,CAACV,QAAP,CAAP,EAAyBiyB,SAAzB,CAAhB;;AACA,gBAAIJ,GAAJ,EAAS;AACL,qBAAOA,GAAG,CAACc,UAAX;AAAuB91B,gBAAAA,GAAG,CAAC4V,WAAJ,CAAgBof,GAAG,CAACc,UAApB;AAAvB;;AACA,kBAAId,GAAG,CAACjwB,UAAR,EAAoBiwB,GAAG,CAACjwB,UAAJ,CAAe2wB,YAAf,CAA4B11B,GAA5B,EAAiCg1B,GAAjC;AACpBW,cAAAA,iBAAiB,CAACX,GAAD,EAAM,CAAC,CAAP,CAAjB;AACH;AACJ;;AACD,cAAIe,EAAE,GAAG/1B,GAAG,CAAC81B,UAAb;AAAA,cAAyBzwB,KAAK,GAAGrF,GAAG,CAAC41B,aAAJ,KAAsB51B,GAAG,CAAC41B,aAAJ,GAAoB,EAA1C,CAAjC;AAAA,cAAgFI,SAAS,GAAGnyB,KAAK,CAACG,QAAlG;;AACA,cAAI,CAACovB,SAAD,IAAc4C,SAAd,IAA2B,MAAMA,SAAS,CAACh4B,MAA3C,IAAqD,YAAY,OAAOg4B,SAAS,CAAC,CAAD,CAAjF,IAAwF,QAAQD,EAAhG,IAAsG,KAAK,CAAL,KAAWA,EAAE,CAAC1C,SAApH,IAAiI,QAAQ0C,EAAE,CAACE,WAAhJ,EAA6J;AACzJ,gBAAIF,EAAE,CAACP,SAAH,IAAgBQ,SAAS,CAAC,CAAD,CAA7B,EAAkCD,EAAE,CAACP,SAAH,GAAeQ,SAAS,CAAC,CAAD,CAAxB;AACrC,WAFD,MAEO,IAAIA,SAAS,IAAIA,SAAS,CAACh4B,MAAvB,IAAiC,QAAQ+3B,EAA7C,EAAiDG,aAAa,CAACl2B,GAAD,EAAMg2B,SAAN,EAAiB1wB,OAAjB,EAA0B2vB,QAA1B,EAAoC7B,SAAS,IAAI,QAAQ/tB,KAAK,CAACoiB,uBAA/D,CAAb;;AACxD0O,UAAAA,cAAc,CAACn2B,GAAD,EAAM6D,KAAK,CAACP,UAAZ,EAAwB+B,KAAxB,CAAd;AACA+vB,UAAAA,SAAS,GAAGG,WAAZ;AACA,iBAAOv1B,GAAP;AACH;;AACD,iBAASk2B,aAAT,CAAuBlB,GAAvB,EAA4BgB,SAA5B,EAAuC1wB,OAAvC,EAAgD2vB,QAAhD,EAA0DmB,WAA1D,EAAuE;AACnE,cAAIC,CAAJ;AAAA,cAAO38B,CAAP;AAAA,cAAU48B,MAAV;AAAA,cAAkB9D,KAAlB;AAAA,cAAyB+D,gBAAgB,GAAGvB,GAAG,CAAChwB,UAAhD;AAAA,cAA4DhB,QAAQ,GAAG,EAAvE;AAAA,cAA2E+E,KAAK,GAAG,EAAnF;AAAA,cAAuFytB,QAAQ,GAAG,CAAlG;AAAA,cAAqGngB,GAAG,GAAG,CAA3G;AAAA,cAA8GrP,GAAG,GAAGuvB,gBAAgB,CAACv4B,MAArI;AAAA,cAA6Iy4B,WAAW,GAAG,CAA3J;AAAA,cAA8JC,IAAI,GAAGV,SAAS,GAAGA,SAAS,CAACh4B,MAAb,GAAsB,CAApM;AACA,cAAI,MAAMgJ,GAAV,EAAe,KAAK,IAAI1N,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0N,GAApB,EAAyB1N,CAAC,EAA1B,EAA8B;AACzC,gBAAIq9B,MAAM,GAAGJ,gBAAgB,CAACj9B,CAAD,CAA7B;AAAA,gBAAkC+L,KAAK,GAAGsxB,MAAM,CAACf,aAAjD;AAAA,gBAAgE33B,GAAG,GAAGy4B,IAAI,IAAIrxB,KAAR,GAAgBsxB,MAAM,CAACzxB,UAAP,GAAoByxB,MAAM,CAACzxB,UAAP,CAAkB0xB,GAAtC,GAA4CvxB,KAAK,CAACpH,GAAlE,GAAwE,IAA9I;;AACA,gBAAI,QAAQA,GAAZ,EAAiB;AACbu4B,cAAAA,QAAQ;AACRztB,cAAAA,KAAK,CAAC9K,GAAD,CAAL,GAAa04B,MAAb;AACH,aAHD,MAGO,IAAItxB,KAAK,KAAK,KAAK,CAAL,KAAWsxB,MAAM,CAACtD,SAAlB,GAA8B+C,WAAW,GAAGO,MAAM,CAACnB,SAAP,CAAiBl4B,IAAjB,EAAH,GAA6B,CAAC,CAAvE,GAA2E84B,WAAhF,CAAT,EAAuGpyB,QAAQ,CAACyyB,WAAW,EAAZ,CAAR,GAA0BE,MAA1B;AACjH;AACD,cAAI,MAAMD,IAAV,EAAgB,KAAK,IAAIp9B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGo9B,IAApB,EAA0Bp9B,CAAC,EAA3B,EAA+B;AAC3Cg9B,YAAAA,MAAM,GAAGN,SAAS,CAAC18B,CAAD,CAAlB;AACAk5B,YAAAA,KAAK,GAAG,IAAR;AACA,gBAAIv0B,GAAG,GAAGq4B,MAAM,CAACr4B,GAAjB;;AACA,gBAAI,QAAQA,GAAZ,EAAiB;AACb,kBAAIu4B,QAAQ,IAAI,KAAK,CAAL,KAAWztB,KAAK,CAAC9K,GAAD,CAAhC,EAAuC;AACnCu0B,gBAAAA,KAAK,GAAGzpB,KAAK,CAAC9K,GAAD,CAAb;AACA8K,gBAAAA,KAAK,CAAC9K,GAAD,CAAL,GAAa,KAAK,CAAlB;AACAu4B,gBAAAA,QAAQ;AACX;AACJ,aAND,MAMO,IAAI,CAAChE,KAAD,IAAUnc,GAAG,GAAGogB,WAApB,EAAiC,KAAKJ,CAAC,GAAGhgB,GAAT,EAAcggB,CAAC,GAAGI,WAAlB,EAA+BJ,CAAC,EAAhC;AAAoC,kBAAI,KAAK,CAAL,KAAWryB,QAAQ,CAACqyB,CAAD,CAAnB,IAA0BlD,cAAc,CAACz5B,CAAC,GAAGsK,QAAQ,CAACqyB,CAAD,CAAb,EAAkBC,MAAlB,EAA0BF,WAA1B,CAA5C,EAAoF;AAC5J5D,gBAAAA,KAAK,GAAG94B,CAAR;AACAsK,gBAAAA,QAAQ,CAACqyB,CAAD,CAAR,GAAc,KAAK,CAAnB;AACA,oBAAIA,CAAC,KAAKI,WAAW,GAAG,CAAxB,EAA2BA,WAAW;AACtC,oBAAIJ,CAAC,KAAKhgB,GAAV,EAAeA,GAAG;AAClB;AACH;AANuC;;AAOxCmc,YAAAA,KAAK,GAAG8C,KAAK,CAAC9C,KAAD,EAAQ8D,MAAR,EAAgBhxB,OAAhB,EAAyB2vB,QAAzB,CAAb;AACA,gBAAIzC,KAAK,IAAIA,KAAK,KAAKwC,GAAvB,EAA4B,IAAI17B,CAAC,IAAI0N,GAAT,EAAcguB,GAAG,CAACpf,WAAJ,CAAgB4c,KAAhB,EAAd,KAA2C,IAAIA,KAAK,KAAK+D,gBAAgB,CAACj9B,CAAD,CAA9B,EAAmC,IAAIk5B,KAAK,KAAK+D,gBAAgB,CAACj9B,CAAC,GAAG,CAAL,CAA9B,EAAuCu6B,UAAU,CAAC0C,gBAAgB,CAACj9B,CAAD,CAAjB,CAAV,CAAvC,KAA6E07B,GAAG,CAAC6B,YAAJ,CAAiBrE,KAAjB,EAAwB+D,gBAAgB,CAACj9B,CAAD,CAAhB,IAAuB,IAA/C;AAC1L;AACD,cAAIk9B,QAAJ,EAAc,KAAK,IAAIl9B,CAAT,IAAcyP,KAAd;AAAqB,gBAAI,KAAK,CAAL,KAAWA,KAAK,CAACzP,CAAD,CAApB,EAAyBq8B,iBAAiB,CAAC5sB,KAAK,CAACzP,CAAD,CAAN,EAAW,CAAC,CAAZ,CAAjB;AAA9C;;AACd,iBAAO+c,GAAG,IAAIogB,WAAd;AAA2B,gBAAI,KAAK,CAAL,MAAYjE,KAAK,GAAGxuB,QAAQ,CAACyyB,WAAW,EAAZ,CAA5B,CAAJ,EAAkDd,iBAAiB,CAACnD,KAAD,EAAQ,CAAC,CAAT,CAAjB;AAA7E;AACH;;AACD,iBAASmD,iBAAT,CAA2BpuB,IAA3B,EAAiCuvB,WAAjC,EAA8C;AAC1C,cAAIpvB,SAAS,GAAGH,IAAI,CAACrC,UAArB;AACA,cAAIwC,SAAJ,EAAeqvB,gBAAgB,CAACrvB,SAAD,CAAhB,CAAf,KAAiD;AAC7C,gBAAI,QAAQH,IAAI,CAACquB,aAAb,IAA8BruB,IAAI,CAACquB,aAAL,CAAmB1uB,GAArD,EAA0DK,IAAI,CAACquB,aAAL,CAAmB1uB,GAAnB,CAAuB,IAAvB;AAC1D,gBAAI4vB,WAAW,KAAK,CAAC,CAAjB,IAAsB,QAAQvvB,IAAI,CAACquB,aAAvC,EAAsD/B,UAAU,CAACtsB,IAAD,CAAV;AACtDyvB,YAAAA,cAAc,CAACzvB,IAAD,CAAd;AACH;AACJ;;AACD,iBAASyvB,cAAT,CAAwBzvB,IAAxB,EAA8B;AAC1BA,UAAAA,IAAI,GAAGA,IAAI,CAAC0vB,SAAZ;;AACA,iBAAO1vB,IAAP,EAAa;AACT,gBAAI4R,IAAI,GAAG5R,IAAI,CAAC2vB,eAAhB;AACAvB,YAAAA,iBAAiB,CAACpuB,IAAD,EAAO,CAAC,CAAR,CAAjB;AACAA,YAAAA,IAAI,GAAG4R,IAAP;AACH;AACJ;;AACD,iBAASgd,cAAT,CAAwBnB,GAAxB,EAA6BjxB,KAA7B,EAAoCgwB,GAApC,EAAyC;AACrC,cAAIn6B,IAAJ;;AACA,eAAKA,IAAL,IAAam6B,GAAb;AAAkB,gBAAI,CAAC,CAAChwB,KAAD,IAAU,QAAQA,KAAK,CAACnK,IAAD,CAAxB,KAAmC,QAAQm6B,GAAG,CAACn6B,IAAD,CAAlD,EAA0Dk6B,WAAW,CAACkB,GAAD,EAAMp7B,IAAN,EAAYm6B,GAAG,CAACn6B,IAAD,CAAf,EAAuBm6B,GAAG,CAACn6B,IAAD,CAAH,GAAY,KAAK,CAAxC,EAA2Cw7B,SAA3C,CAAX;AAA5E;;AACA,eAAKx7B,IAAL,IAAamK,KAAb;AAAoB,gBAAI,EAAE,eAAenK,IAAf,IAAuB,gBAAgBA,IAAvC,IAA+CA,IAAI,IAAIm6B,GAAR,IAAehwB,KAAK,CAACnK,IAAD,CAAL,MAAiB,YAAYA,IAAZ,IAAoB,cAAcA,IAAlC,GAAyCo7B,GAAG,CAACp7B,IAAD,CAA5C,GAAqDm6B,GAAG,CAACn6B,IAAD,CAAzE,CAAhE,CAAJ,EAAuJk6B,WAAW,CAACkB,GAAD,EAAMp7B,IAAN,EAAYm6B,GAAG,CAACn6B,IAAD,CAAf,EAAuBm6B,GAAG,CAACn6B,IAAD,CAAH,GAAYmK,KAAK,CAACnK,IAAD,CAAxC,EAAgDw7B,SAAhD,CAAX;AAA3K;AACH;;AACD,iBAAS+B,gBAAT,CAA0BzvB,SAA1B,EAAqC;AACjC,cAAI9N,IAAI,GAAG8N,SAAS,CAACxL,WAAV,CAAsBtC,IAAjC;AACA,WAACw9B,UAAU,CAACx9B,IAAD,CAAV,KAAqBw9B,UAAU,CAACx9B,IAAD,CAAV,GAAmB,EAAxC,CAAD,EAA8C6N,IAA9C,CAAmDC,SAAnD;AACH;;AACD,iBAAS2vB,eAAT,CAAyBzwB,IAAzB,EAA+BvB,KAA/B,EAAsCC,OAAtC,EAA+C;AAC3C,cAAIgyB,IAAJ;AAAA,cAAUrE,IAAI,GAAGmE,UAAU,CAACxwB,IAAI,CAAChN,IAAN,CAA3B;;AACA,cAAIgN,IAAI,CAAClM,SAAL,IAAkBkM,IAAI,CAAClM,SAAL,CAAesH,MAArC,EAA6C;AACzCs1B,YAAAA,IAAI,GAAG,IAAI1wB,IAAJ,CAASvB,KAAT,EAAgBC,OAAhB,CAAP;AACAqF,YAAAA,SAAS,CAACnR,IAAV,CAAe89B,IAAf,EAAqBjyB,KAArB,EAA4BC,OAA5B;AACH,WAHD,MAGO;AACHgyB,YAAAA,IAAI,GAAG,IAAI3sB,SAAJ,CAActF,KAAd,EAAqBC,OAArB,CAAP;AACAgyB,YAAAA,IAAI,CAACp7B,WAAL,GAAmB0K,IAAnB;AACA0wB,YAAAA,IAAI,CAACt1B,MAAL,GAAcu1B,QAAd;AACH;;AACD,cAAItE,IAAJ,EAAU,KAAK,IAAI35B,CAAC,GAAG25B,IAAI,CAACj1B,MAAlB,EAA0B1E,CAAC,EAA3B;AAAiC,gBAAI25B,IAAI,CAAC35B,CAAD,CAAJ,CAAQ4C,WAAR,KAAwB0K,IAA5B,EAAkC;AACzE0wB,cAAAA,IAAI,CAACE,GAAL,GAAWvE,IAAI,CAAC35B,CAAD,CAAJ,CAAQk+B,GAAnB;AACAvE,cAAAA,IAAI,CAACwE,MAAL,CAAYn+B,CAAZ,EAAe,CAAf;AACA;AACH;AAJS;AAKV,iBAAOg+B,IAAP;AACH;;AACD,iBAASC,QAAT,CAAkBlyB,KAAlB,EAAyB2E,KAAzB,EAAgC1E,OAAhC,EAAyC;AACrC,iBAAO,KAAKpJ,WAAL,CAAiBmJ,KAAjB,EAAwBC,OAAxB,CAAP;AACH;;AACD,iBAASoyB,iBAAT,CAA2BhwB,SAA3B,EAAsCrC,KAAtC,EAA6C0E,IAA7C,EAAmDzE,OAAnD,EAA4D2vB,QAA5D,EAAsE;AAClE,cAAI,CAACvtB,SAAS,CAACiwB,GAAf,EAAoB;AAChBjwB,YAAAA,SAAS,CAACiwB,GAAV,GAAgB,CAAC,CAAjB;AACA,gBAAIjwB,SAAS,CAACkwB,GAAV,GAAgBvyB,KAAK,CAAC6B,GAA1B,EAA+B,OAAO7B,KAAK,CAAC6B,GAAb;AAC/B,gBAAIQ,SAAS,CAACkvB,GAAV,GAAgBvxB,KAAK,CAACpH,GAA1B,EAA+B,OAAOoH,KAAK,CAACpH,GAAb;;AAC/B,gBAAI,CAACyJ,SAAS,CAAC5C,IAAX,IAAmBmwB,QAAvB,EAAiC;AAC7B,kBAAIvtB,SAAS,CAACrF,kBAAd,EAAkCqF,SAAS,CAACrF,kBAAV;AACrC,aAFD,MAEO,IAAIqF,SAAS,CAACxF,yBAAd,EAAyCwF,SAAS,CAACxF,yBAAV,CAAoCmD,KAApC,EAA2CC,OAA3C;;AAChD,gBAAIA,OAAO,IAAIA,OAAO,KAAKoC,SAAS,CAACpC,OAArC,EAA8C;AAC1C,kBAAI,CAACoC,SAAS,CAACmwB,GAAf,EAAoBnwB,SAAS,CAACmwB,GAAV,GAAgBnwB,SAAS,CAACpC,OAA1B;AACpBoC,cAAAA,SAAS,CAACpC,OAAV,GAAoBA,OAApB;AACH;;AACD,gBAAI,CAACoC,SAAS,CAACowB,GAAf,EAAoBpwB,SAAS,CAACowB,GAAV,GAAgBpwB,SAAS,CAACrC,KAA1B;AACpBqC,YAAAA,SAAS,CAACrC,KAAV,GAAkBA,KAAlB;AACAqC,YAAAA,SAAS,CAACiwB,GAAV,GAAgB,CAAC,CAAjB;AACA,gBAAI,MAAM5tB,IAAV,EAAgB,IAAI,MAAMA,IAAN,IAAcgG,OAAO,CAACgoB,oBAAR,KAAiC,CAAC,CAAhD,IAAqD,CAACrwB,SAAS,CAAC5C,IAApE,EAA0EouB,eAAe,CAACxrB,SAAD,EAAY,CAAZ,EAAeutB,QAAf,CAAf,CAA1E,KAAwHrC,aAAa,CAAClrB,SAAD,CAAb;AACxI,gBAAIA,SAAS,CAACkwB,GAAd,EAAmBlwB,SAAS,CAACkwB,GAAV,CAAclwB,SAAd;AACtB;AACJ;;AACD,iBAASwrB,eAAT,CAAyBxrB,SAAzB,EAAoCqC,IAApC,EAA0CkrB,QAA1C,EAAoD+C,OAApD,EAA6D;AACzD,cAAI,CAACtwB,SAAS,CAACiwB,GAAf,EAAoB;AAChB,gBAAIM,QAAJ;AAAA,gBAAcX,IAAd;AAAA,gBAAoBY,KAApB;AAAA,gBAA2B7yB,KAAK,GAAGqC,SAAS,CAACrC,KAA7C;AAAA,gBAAoD2E,KAAK,GAAGtC,SAAS,CAACsC,KAAtE;AAAA,gBAA6E1E,OAAO,GAAGoC,SAAS,CAACpC,OAAjG;AAAA,gBAA0G6yB,aAAa,GAAGzwB,SAAS,CAACowB,GAAV,IAAiBzyB,KAA3I;AAAA,gBAAkJ+yB,aAAa,GAAG1wB,SAAS,CAAC2wB,GAAV,IAAiBruB,KAAnL;AAAA,gBAA0LsuB,eAAe,GAAG5wB,SAAS,CAACmwB,GAAV,IAAiBvyB,OAA7N;AAAA,gBAAsOizB,QAAQ,GAAG7wB,SAAS,CAAC5C,IAA3P;AAAA,gBAAiQ0zB,QAAQ,GAAG9wB,SAAS,CAAC8vB,GAAtR;AAAA,gBAA2RiB,WAAW,GAAGF,QAAQ,IAAIC,QAArT;AAAA,gBAA+TE,qBAAqB,GAAGhxB,SAAS,CAACxC,UAAjW;AAAA,gBAA6WyzB,IAAI,GAAG,CAAC,CAArX;;AACA,gBAAIJ,QAAJ,EAAc;AACV7wB,cAAAA,SAAS,CAACrC,KAAV,GAAkB8yB,aAAlB;AACAzwB,cAAAA,SAAS,CAACsC,KAAV,GAAkBouB,aAAlB;AACA1wB,cAAAA,SAAS,CAACpC,OAAV,GAAoBgzB,eAApB;AACA,kBAAI,MAAMvuB,IAAN,IAAcrC,SAAS,CAACzF,qBAAxB,IAAiDyF,SAAS,CAACzF,qBAAV,CAAgCoD,KAAhC,EAAuC2E,KAAvC,EAA8C1E,OAA9C,MAA2D,CAAC,CAAjH,EAAoHqzB,IAAI,GAAG,CAAC,CAAR,CAApH,KAAoI,IAAIjxB,SAAS,CAACvF,mBAAd,EAAmCuF,SAAS,CAACvF,mBAAV,CAA8BkD,KAA9B,EAAqC2E,KAArC,EAA4C1E,OAA5C;AACvKoC,cAAAA,SAAS,CAACrC,KAAV,GAAkBA,KAAlB;AACAqC,cAAAA,SAAS,CAACsC,KAAV,GAAkBA,KAAlB;AACAtC,cAAAA,SAAS,CAACpC,OAAV,GAAoBA,OAApB;AACH;;AACDoC,YAAAA,SAAS,CAACowB,GAAV,GAAgBpwB,SAAS,CAAC2wB,GAAV,GAAgB3wB,SAAS,CAACmwB,GAAV,GAAgBnwB,SAAS,CAAC8vB,GAAV,GAAgB,IAAhE;AACA9vB,YAAAA,SAAS,CAACmrB,GAAV,GAAgB,CAAC,CAAjB;;AACA,gBAAI,CAAC8F,IAAL,EAAW;AACPV,cAAAA,QAAQ,GAAGvwB,SAAS,CAAC1F,MAAV,CAAiBqD,KAAjB,EAAwB2E,KAAxB,EAA+B1E,OAA/B,CAAX;AACA,kBAAIoC,SAAS,CAACtC,eAAd,EAA+BE,OAAO,GAAGhH,MAAM,CAACA,MAAM,CAAC,EAAD,EAAKgH,OAAL,CAAP,EAAsBoC,SAAS,CAACtC,eAAV,EAAtB,CAAhB;AAC/B,kBAAIwzB,SAAJ;AAAA,kBAAe9zB,IAAf;AAAA,kBAAqB+zB,cAAc,GAAGZ,QAAQ,IAAIA,QAAQ,CAAC90B,QAA3D;;AACA,kBAAI,cAAc,OAAO01B,cAAzB,EAAyC;AACrC,oBAAIC,UAAU,GAAGrF,YAAY,CAACwE,QAAD,CAA7B;AACAX,gBAAAA,IAAI,GAAGoB,qBAAP;AACA,oBAAIpB,IAAI,IAAIA,IAAI,CAACp7B,WAAL,KAAqB28B,cAA7B,IAA+CC,UAAU,CAAC76B,GAAX,IAAkBq5B,IAAI,CAACV,GAA1E,EAA+Ec,iBAAiB,CAACJ,IAAD,EAAOwB,UAAP,EAAmB,CAAnB,EAAsBxzB,OAAtB,EAA+B,CAAC,CAAhC,CAAjB,CAA/E,KAAyI;AACrIszB,kBAAAA,SAAS,GAAGtB,IAAZ;AACA5vB,kBAAAA,SAAS,CAACxC,UAAV,GAAuBoyB,IAAI,GAAGD,eAAe,CAACwB,cAAD,EAAiBC,UAAjB,EAA6BxzB,OAA7B,CAA7C;AACAgyB,kBAAAA,IAAI,CAACE,GAAL,GAAWF,IAAI,CAACE,GAAL,IAAYgB,QAAvB;AACAlB,kBAAAA,IAAI,CAACyB,GAAL,GAAWrxB,SAAX;AACAgwB,kBAAAA,iBAAiB,CAACJ,IAAD,EAAOwB,UAAP,EAAmB,CAAnB,EAAsBxzB,OAAtB,EAA+B,CAAC,CAAhC,CAAjB;AACA4tB,kBAAAA,eAAe,CAACoE,IAAD,EAAO,CAAP,EAAUrC,QAAV,EAAoB,CAAC,CAArB,CAAf;AACH;AACDnwB,gBAAAA,IAAI,GAAGwyB,IAAI,CAACxyB,IAAZ;AACH,eAZD,MAYO;AACHozB,gBAAAA,KAAK,GAAGO,WAAR;AACAG,gBAAAA,SAAS,GAAGF,qBAAZ;AACA,oBAAIE,SAAJ,EAAeV,KAAK,GAAGxwB,SAAS,CAACxC,UAAV,GAAuB,IAA/B;;AACf,oBAAIuzB,WAAW,IAAI,MAAM1uB,IAAzB,EAA+B;AAC3B,sBAAImuB,KAAJ,EAAWA,KAAK,CAAChzB,UAAN,GAAmB,IAAnB;AACXJ,kBAAAA,IAAI,GAAG2N,IAAI,CAACylB,KAAD,EAAQD,QAAR,EAAkB3yB,OAAlB,EAA2B2vB,QAAQ,IAAI,CAACsD,QAAxC,EAAkDE,WAAW,IAAIA,WAAW,CAAC1zB,UAA7E,EAAyF,CAAC,CAA1F,CAAX;AACH;AACJ;;AACD,kBAAI0zB,WAAW,IAAI3zB,IAAI,KAAK2zB,WAAxB,IAAuCnB,IAAI,KAAKoB,qBAApD,EAA2E;AACvE,oBAAIM,UAAU,GAAGP,WAAW,CAAC1zB,UAA7B;;AACA,oBAAIi0B,UAAU,IAAIl0B,IAAI,KAAKk0B,UAA3B,EAAuC;AACnCA,kBAAAA,UAAU,CAACtD,YAAX,CAAwB5wB,IAAxB,EAA8B2zB,WAA9B;;AACA,sBAAI,CAACG,SAAL,EAAgB;AACZH,oBAAAA,WAAW,CAACvzB,UAAZ,GAAyB,IAAzB;AACAywB,oBAAAA,iBAAiB,CAAC8C,WAAD,EAAc,CAAC,CAAf,CAAjB;AACH;AACJ;AACJ;;AACD,kBAAIG,SAAJ,EAAe7B,gBAAgB,CAAC6B,SAAD,CAAhB;AACflxB,cAAAA,SAAS,CAAC5C,IAAV,GAAiBA,IAAjB;;AACA,kBAAIA,IAAI,IAAI,CAACkzB,OAAb,EAAsB;AAClB,oBAAIiB,YAAY,GAAGvxB,SAAnB;AAAA,oBAA8BohB,CAAC,GAAGphB,SAAlC;;AACA,uBAAOohB,CAAC,GAAGA,CAAC,CAACiQ,GAAb;AAAkB,mBAACE,YAAY,GAAGnQ,CAAhB,EAAmBhkB,IAAnB,GAA0BA,IAA1B;AAAlB;;AACAA,gBAAAA,IAAI,CAACI,UAAL,GAAkB+zB,YAAlB;AACAn0B,gBAAAA,IAAI,CAACwuB,qBAAL,GAA6B2F,YAAY,CAAC/8B,WAA1C;AACH;AACJ;;AACD,gBAAI,CAACq8B,QAAD,IAAatD,QAAjB,EAA2BH,MAAM,CAACoE,OAAP,CAAexxB,SAAf,EAA3B,KAA2D,IAAI,CAACixB,IAAL,EAAW;AAClE9D,cAAAA,WAAW;AACX,kBAAIntB,SAAS,CAACtF,kBAAd,EAAkCsF,SAAS,CAACtF,kBAAV,CAA6B+1B,aAA7B,EAA4CC,aAA5C,EAA2DE,eAA3D;AAClC,kBAAIvoB,OAAO,CAACopB,WAAZ,EAAyBppB,OAAO,CAACopB,WAAR,CAAoBzxB,SAApB;AAC5B;AACD,gBAAI,QAAQA,SAAS,CAAC0xB,GAAtB,EAA2B,OAAO1xB,SAAS,CAAC0xB,GAAV,CAAcp7B,MAArB;AAA6B0J,cAAAA,SAAS,CAAC0xB,GAAV,CAAczG,GAAd,GAAoBn5B,IAApB,CAAyBkO,SAAzB;AAA7B;AAC3B,gBAAI,CAACytB,SAAD,IAAc,CAAC6C,OAAnB,EAA4BnD,WAAW;AAC1C;AACJ;;AACD,iBAASgB,uBAAT,CAAiCb,GAAjC,EAAsCnxB,KAAtC,EAA6CyB,OAA7C,EAAsD2vB,QAAtD,EAAgE;AAC5D,cAAIv7B,CAAC,GAAGs7B,GAAG,IAAIA,GAAG,CAAC9vB,UAAnB;AAAA,cAA+Bm0B,iBAAiB,GAAG3/B,CAAnD;AAAA,cAAsD4/B,MAAM,GAAGtE,GAA/D;AAAA,cAAoEuE,aAAa,GAAG7/B,CAAC,IAAIs7B,GAAG,CAAC1B,qBAAJ,KAA8BzvB,KAAK,CAACV,QAA7H;AAAA,cAAuIq2B,OAAO,GAAGD,aAAjJ;AAAA,cAAgKl0B,KAAK,GAAGouB,YAAY,CAAC5vB,KAAD,CAApL;;AACA,iBAAOnK,CAAC,IAAI,CAAC8/B,OAAN,KAAkB9/B,CAAC,GAAGA,CAAC,CAACq/B,GAAxB,CAAP;AAAqCS,YAAAA,OAAO,GAAG9/B,CAAC,CAACwC,WAAF,KAAkB2H,KAAK,CAACV,QAAlC;AAArC;;AACA,cAAIzJ,CAAC,IAAI8/B,OAAL,KAAiB,CAACvE,QAAD,IAAav7B,CAAC,CAACwL,UAAhC,CAAJ,EAAiD;AAC7CwyB,YAAAA,iBAAiB,CAACh+B,CAAD,EAAI2L,KAAJ,EAAW,CAAX,EAAcC,OAAd,EAAuB2vB,QAAvB,CAAjB;AACAD,YAAAA,GAAG,GAAGt7B,CAAC,CAACoL,IAAR;AACH,WAHD,MAGO;AACH,gBAAIu0B,iBAAiB,IAAI,CAACE,aAA1B,EAAyC;AACrCxC,cAAAA,gBAAgB,CAACsC,iBAAD,CAAhB;AACArE,cAAAA,GAAG,GAAGsE,MAAM,GAAG,IAAf;AACH;;AACD5/B,YAAAA,CAAC,GAAG29B,eAAe,CAACxzB,KAAK,CAACV,QAAP,EAAiBkC,KAAjB,EAAwBC,OAAxB,CAAnB;;AACA,gBAAI0vB,GAAG,IAAI,CAACt7B,CAAC,CAAC89B,GAAd,EAAmB;AACf99B,cAAAA,CAAC,CAAC89B,GAAF,GAAQxC,GAAR;AACAsE,cAAAA,MAAM,GAAG,IAAT;AACH;;AACD5B,YAAAA,iBAAiB,CAACh+B,CAAD,EAAI2L,KAAJ,EAAW,CAAX,EAAcC,OAAd,EAAuB2vB,QAAvB,CAAjB;AACAD,YAAAA,GAAG,GAAGt7B,CAAC,CAACoL,IAAR;;AACA,gBAAIw0B,MAAM,IAAItE,GAAG,KAAKsE,MAAtB,EAA8B;AAC1BA,cAAAA,MAAM,CAACp0B,UAAP,GAAoB,IAApB;AACAywB,cAAAA,iBAAiB,CAAC2D,MAAD,EAAS,CAAC,CAAV,CAAjB;AACH;AACJ;;AACD,iBAAOtE,GAAP;AACH;;AACD,iBAAS+B,gBAAT,CAA0BrvB,SAA1B,EAAqC;AACjC,cAAIqI,OAAO,CAAC0pB,aAAZ,EAA2B1pB,OAAO,CAAC0pB,aAAR,CAAsB/xB,SAAtB;AAC3B,cAAI5C,IAAI,GAAG4C,SAAS,CAAC5C,IAArB;AACA4C,UAAAA,SAAS,CAACiwB,GAAV,GAAgB,CAAC,CAAjB;AACA,cAAIjwB,SAAS,CAACnF,oBAAd,EAAoCmF,SAAS,CAACnF,oBAAV;AACpCmF,UAAAA,SAAS,CAAC5C,IAAV,GAAiB,IAAjB;AACA,cAAI40B,KAAK,GAAGhyB,SAAS,CAACxC,UAAtB;AACA,cAAIw0B,KAAJ,EAAW3C,gBAAgB,CAAC2C,KAAD,CAAhB,CAAX,KAAyC,IAAI50B,IAAJ,EAAU;AAC/C,gBAAIA,IAAI,CAAC8wB,aAAL,IAAsB9wB,IAAI,CAAC8wB,aAAL,CAAmB1uB,GAA7C,EAAkDpC,IAAI,CAAC8wB,aAAL,CAAmB1uB,GAAnB,CAAuB,IAAvB;AAClDQ,YAAAA,SAAS,CAAC8vB,GAAV,GAAgB1yB,IAAhB;AACA+uB,YAAAA,UAAU,CAAC/uB,IAAD,CAAV;AACAqyB,YAAAA,gBAAgB,CAACzvB,SAAD,CAAhB;AACAsvB,YAAAA,cAAc,CAAClyB,IAAD,CAAd;AACH;AACD,cAAI4C,SAAS,CAACkwB,GAAd,EAAmBlwB,SAAS,CAACkwB,GAAV,CAAc,IAAd;AACtB;;AACD,iBAASjtB,SAAT,CAAmBtF,KAAnB,EAA0BC,OAA1B,EAAmC;AAC/B,eAAKutB,GAAL,GAAW,CAAC,CAAZ;AACA,eAAKvtB,OAAL,GAAeA,OAAf;AACA,eAAKD,KAAL,GAAaA,KAAb;AACA,eAAK2E,KAAL,GAAa,KAAKA,KAAL,IAAc,EAA3B;AACH;;AACD,iBAAShI,MAAT,CAAgB6B,KAAhB,EAAuBa,MAAvB,EAA+BxG,KAA/B,EAAsC;AAClC,iBAAOuU,IAAI,CAACvU,KAAD,EAAQ2F,KAAR,EAAe,EAAf,EAAmB,CAAC,CAApB,EAAuBa,MAAvB,EAA+B,CAAC,CAAhC,CAAX;AACH;;AACD,YAAIqL,OAAO,GAAG,EAAd;AACA,YAAI+e,KAAK,GAAG,EAAZ;AACA,YAAI4D,cAAc,GAAG,EAArB;AACA,YAAIuB,kBAAkB,GAAG,wDAAzB;AACA,YAAInB,KAAK,GAAG,EAAZ;AACA,YAAIgC,MAAM,GAAG,EAAb;AACA,YAAIK,SAAS,GAAG,CAAhB;AACA,YAAIC,SAAS,GAAG,CAAC,CAAjB;AACA,YAAIhC,SAAS,GAAG,CAAC,CAAjB;AACA,YAAIgE,UAAU,GAAG,EAAjB;AACA94B,QAAAA,MAAM,CAACqM,SAAS,CAACjQ,SAAX,EAAsB;AACxB0P,UAAAA,QAAQ,EAAE,kBAASJ,KAAT,EAAgBrF,QAAhB,EAA0B;AAChC,gBAAI9J,CAAC,GAAG,KAAKmP,KAAb;AACA,gBAAI,CAAC,KAAKquB,GAAV,EAAe,KAAKA,GAAL,GAAW/5B,MAAM,CAAC,EAAD,EAAKzD,CAAL,CAAjB;AACfyD,YAAAA,MAAM,CAACzD,CAAD,EAAI,cAAc,OAAOmP,KAArB,GAA6BA,KAAK,CAACnP,CAAD,EAAI,KAAKwK,KAAT,CAAlC,GAAoD2E,KAAxD,CAAN;AACA,gBAAIrF,QAAJ,EAAc,CAAC,KAAKy0B,GAAL,GAAW,KAAKA,GAAL,IAAY,EAAxB,EAA4B3xB,IAA5B,CAAiC9C,QAAjC;AACdiuB,YAAAA,aAAa,CAAC,IAAD,CAAb;AACH,WAPuB;AAQxB+G,UAAAA,WAAW,EAAE,qBAASh1B,QAAT,EAAmB;AAC5B,gBAAIA,QAAJ,EAAc,CAAC,KAAKy0B,GAAL,GAAW,KAAKA,GAAL,IAAY,EAAxB,EAA4B3xB,IAA5B,CAAiC9C,QAAjC;AACduuB,YAAAA,eAAe,CAAC,IAAD,EAAO,CAAP,CAAf;AACH,WAXuB;AAYxBlxB,UAAAA,MAAM,EAAE,kBAAW,CAAE;AAZG,SAAtB,CAAN;AAcA,YAAI43B,MAAM,GAAG;AACTjR,UAAAA,CAAC,EAAEA,CADM;AAET5nB,UAAAA,aAAa,EAAE4nB,CAFN;AAGTje,UAAAA,YAAY,EAAEA,YAHL;AAITC,UAAAA,SAAS,EAAEA,SAJF;AAKT3I,UAAAA,MAAM,EAAEA,MALC;AAMTgxB,UAAAA,QAAQ,EAAEA,QAND;AAOTjjB,UAAAA,OAAO,EAAEA;AAPA,SAAb;AASA,YAAI,IAAJ,EAAUhX,MAAM,CAACD,OAAP,GAAiB8gC,MAAjB,CAAV,KAAwCx+B,IAAI,CAACw+B,MAAL,GAAcA,MAAd;AAC3C,OA9YA,EAAD;AAiZA;AAAO,KA/iKG;AAgjKV;;AACA;AAAO,cAAS7gC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAGtD;AACA;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwBygC,QAAxB,EAAjB;AAGA;AAAO,KA1jKG;AA2jKV;;AACA;AAAO,cAAS9gC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAA4B,iBAASqH,OAAT,EAAkBxF,MAAlB,EAA0B;AAAC,YAAI6+B,OAAJ;AAAY;;;;;;;;;AAQlE,mBAAU7+B,MAAV,EAAkBpC,OAAlB,EAA2B;AAC1B,iBAAOE,MAAM,CAACD,OAAP,GAAiBD,OAAO,EAA/B,GACD,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAvC,GAA6CD,MAAM,CAACH,OAAD,CAAnD,GACCoC,MAAM,CAAC8+B,UAAP,GAAoBlhC,OAAO,EAF3B;AAGD,SAJA,EAIC,IAJD,EAIQ,YAAY;AAAE;;AAEvB,mBAASmhC,gBAAT,CAA0B1d,CAA1B,EAA6B;AAC3B,gBAAIvd,IAAI,YAAUud,CAAV,CAAR;;AACA,mBAAOA,CAAC,KAAK,IAAN,KAAevd,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,UAA7C,CAAP;AACD;;AAED,mBAAS9B,UAAT,CAAoBqf,CAApB,EAAuB;AACrB,mBAAO,OAAOA,CAAP,KAAa,UAApB;AACD;;AAED,cAAI2d,QAAQ,GAAGh6B,SAAf;;AACA,cAAIgG,KAAK,CAACnK,OAAV,EAAmB;AACjBm+B,YAAAA,QAAQ,GAAGh0B,KAAK,CAACnK,OAAjB;AACD,WAFD,MAEO;AACLm+B,YAAAA,QAAQ,GAAG,kBAAU3d,CAAV,EAAa;AACtB,qBAAOviB,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+B8iB,CAA/B,MAAsC,gBAA7C;AACD,aAFD;AAGD;;AAED,cAAIxgB,OAAO,GAAGm+B,QAAd;AAEA,cAAIjzB,GAAG,GAAG,CAAV;AACA,cAAIkzB,SAAS,GAAGj6B,SAAhB;AACA,cAAIk6B,iBAAiB,GAAGl6B,SAAxB;;AAEA,cAAIm6B,IAAI,GAAG,SAASA,IAAT,CAAcz1B,QAAd,EAAwB01B,GAAxB,EAA6B;AACtCruB,YAAAA,KAAK,CAAChF,GAAD,CAAL,GAAarC,QAAb;AACAqH,YAAAA,KAAK,CAAChF,GAAG,GAAG,CAAP,CAAL,GAAiBqzB,GAAjB;AACArzB,YAAAA,GAAG,IAAI,CAAP;;AACA,gBAAIA,GAAG,KAAK,CAAZ,EAAe;AACb;AACA;AACA;AACA,kBAAImzB,iBAAJ,EAAuB;AACrBA,gBAAAA,iBAAiB,CAACG,KAAD,CAAjB;AACD,eAFD,MAEO;AACLC,gBAAAA,aAAa;AACd;AACF;AACF,WAdD;;AAgBA,mBAASC,YAAT,CAAsBC,UAAtB,EAAkC;AAChCN,YAAAA,iBAAiB,GAAGM,UAApB;AACD;;AAED,mBAASC,OAAT,CAAiBC,MAAjB,EAAyB;AACvBP,YAAAA,IAAI,GAAGO,MAAP;AACD;;AAED,cAAIC,aAAa,GAAG,OAAO1/B,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC+E,SAA7D;AACA,cAAI46B,aAAa,GAAGD,aAAa,IAAI,EAArC;AACA,cAAIE,uBAAuB,GAAGD,aAAa,CAACE,gBAAd,IAAkCF,aAAa,CAACG,sBAA9E;AACA,cAAIpK,MAAM,GAAG,OAAOx1B,IAAP,KAAgB,WAAhB,IAA+B,OAAOqF,OAAP,KAAmB,WAAlD,IAAkE,EAAD,CAAK5E,QAAL,CAAcrC,IAAd,CAAmBiH,OAAnB,MAAgC,kBAA9G,CArDqB,CAuDrB;;AACA,cAAIw6B,QAAQ,GAAG,OAAOC,iBAAP,KAA6B,WAA7B,IAA4C,OAAO/e,aAAP,KAAyB,WAArE,IAAoF,OAAOf,cAAP,KAA0B,WAA7H,CAxDqB,CA0DrB;;AACA,mBAAS+f,WAAT,GAAuB;AACrB;AACA;AACA,mBAAO,YAAY;AACjB,qBAAO16B,OAAO,CAAC+L,QAAR,CAAiB8tB,KAAjB,CAAP;AACD,aAFD;AAGD,WAjEoB,CAmErB;;;AACA,mBAASc,aAAT,GAAyB;AACvB,gBAAI,OAAOlB,SAAP,KAAqB,WAAzB,EAAsC;AACpC,qBAAO,YAAY;AACjBA,gBAAAA,SAAS,CAACI,KAAD,CAAT;AACD,eAFD;AAGD;;AAED,mBAAOe,aAAa,EAApB;AACD;;AAED,mBAASC,mBAAT,GAA+B;AAC7B,gBAAIC,UAAU,GAAG,CAAjB;AACA,gBAAIC,QAAQ,GAAG,IAAIV,uBAAJ,CAA4BR,KAA5B,CAAf;AACA,gBAAI/yB,IAAI,GAAG3J,QAAQ,CAAC63B,cAAT,CAAwB,EAAxB,CAAX;AACA+F,YAAAA,QAAQ,CAACC,OAAT,CAAiBl0B,IAAjB,EAAuB;AAAEm0B,cAAAA,aAAa,EAAE;AAAjB,aAAvB;AAEA,mBAAO,YAAY;AACjBn0B,cAAAA,IAAI,CAACqU,IAAL,GAAY2f,UAAU,GAAG,EAAEA,UAAF,GAAe,CAAxC;AACD,aAFD;AAGD,WAvFoB,CAyFrB;;;AACA,mBAASI,iBAAT,GAA6B;AAC3B,gBAAIlgB,OAAO,GAAG,IAAIL,cAAJ,EAAd;AACAK,YAAAA,OAAO,CAACM,KAAR,CAAcC,SAAd,GAA0Bse,KAA1B;AACA,mBAAO,YAAY;AACjB,qBAAO7e,OAAO,CAACK,KAAR,CAAcG,WAAd,CAA0B,CAA1B,CAAP;AACD,aAFD;AAGD;;AAED,mBAASof,aAAT,GAAyB;AACvB;AACA;AACA,gBAAIO,gBAAgB,GAAGlwB,UAAvB;AACA,mBAAO,YAAY;AACjB,qBAAOkwB,gBAAgB,CAACtB,KAAD,EAAQ,CAAR,CAAvB;AACD,aAFD;AAGD;;AAED,cAAItuB,KAAK,GAAG,IAAI/F,KAAJ,CAAU,IAAV,CAAZ;;AACA,mBAASq0B,KAAT,GAAiB;AACf,iBAAK,IAAIhhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0N,GAApB,EAAyB1N,CAAC,IAAI,CAA9B,EAAiC;AAC/B,kBAAIqL,QAAQ,GAAGqH,KAAK,CAAC1S,CAAD,CAApB;AACA,kBAAI+gC,GAAG,GAAGruB,KAAK,CAAC1S,CAAC,GAAG,CAAL,CAAf;AAEAqL,cAAAA,QAAQ,CAAC01B,GAAD,CAAR;AAEAruB,cAAAA,KAAK,CAAC1S,CAAD,CAAL,GAAW2G,SAAX;AACA+L,cAAAA,KAAK,CAAC1S,CAAC,GAAG,CAAL,CAAL,GAAe2G,SAAf;AACD;;AAED+G,YAAAA,GAAG,GAAG,CAAN;AACD;;AAED,mBAAS60B,YAAT,GAAwB;AACtB,gBAAI;AACF,kBAAIpyB,CAAC,GAAGqwB,OAAR;;AACA,kBAAIgC,KAAK,GAAG1iC,mBAAmB,CAAC,EAAD,CAA/B;;AACA8gC,cAAAA,SAAS,GAAG4B,KAAK,CAACC,SAAN,IAAmBD,KAAK,CAACE,YAArC;AACA,qBAAOZ,aAAa,EAApB;AACD,aALD,CAKE,OAAO33B,CAAP,EAAU;AACV,qBAAO43B,aAAa,EAApB;AACD;AACF;;AAED,cAAId,aAAa,GAAGt6B,SAApB,CArIqB,CAsIrB;;AACA,cAAI2wB,MAAJ,EAAY;AACV2J,YAAAA,aAAa,GAAGY,WAAW,EAA3B;AACD,WAFD,MAEO,IAAIL,uBAAJ,EAA6B;AAClCP,YAAAA,aAAa,GAAGe,mBAAmB,EAAnC;AACD,WAFM,MAEA,IAAIL,QAAJ,EAAc;AACnBV,YAAAA,aAAa,GAAGoB,iBAAiB,EAAjC;AACD,WAFM,MAEA,IAAIf,aAAa,KAAK36B,SAAlB,IAA+B,eAAe,UAAlD,EAA8D;AACnEs6B,YAAAA,aAAa,GAAGsB,YAAY,EAA5B;AACD,WAFM,MAEA;AACLtB,YAAAA,aAAa,GAAGc,aAAa,EAA7B;AACD;;AAED,mBAAS1V,IAAT,CAAcsW,aAAd,EAA6BC,WAA7B,EAA0C;AACxC,gBAAIC,UAAU,GAAG/9B,SAAjB;AAEA,gBAAIsG,MAAM,GAAG,IAAb;AAEA,gBAAI8tB,KAAK,GAAG,IAAI,KAAKt2B,WAAT,CAAqB6Q,IAArB,CAAZ;;AAEA,gBAAIylB,KAAK,CAAC4J,UAAD,CAAL,KAAsBn8B,SAA1B,EAAqC;AACnCo8B,cAAAA,WAAW,CAAC7J,KAAD,CAAX;AACD;;AAED,gBAAI8J,MAAM,GAAG53B,MAAM,CAAC43B,MAApB;;AAEA,gBAAIA,MAAJ,EAAY;AACV,eAAC,YAAY;AACX,oBAAI33B,QAAQ,GAAGw3B,UAAU,CAACG,MAAM,GAAG,CAAV,CAAzB;AACAlC,gBAAAA,IAAI,CAAC,YAAY;AACf,yBAAOmC,cAAc,CAACD,MAAD,EAAS9J,KAAT,EAAgB7tB,QAAhB,EAA0BD,MAAM,CAAC83B,OAAjC,CAArB;AACD,iBAFG,CAAJ;AAGD,eALD;AAMD,aAPD,MAOO;AACLC,cAAAA,SAAS,CAAC/3B,MAAD,EAAS8tB,KAAT,EAAgByJ,aAAhB,EAA+BC,WAA/B,CAAT;AACD;;AAED,mBAAO1J,KAAP;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,mBAASkK,SAAT,CAAmBliC,MAAnB,EAA2B;AACzB;AACA,gBAAI4Z,WAAW,GAAG,IAAlB;;AAEA,gBAAI5Z,MAAM,IAAI,SAAOA,MAAP,MAAkB,QAA5B,IAAwCA,MAAM,CAAC0B,WAAP,KAAuBkY,WAAnE,EAAgF;AAC9E,qBAAO5Z,MAAP;AACD;;AAED,gBAAI6c,OAAO,GAAG,IAAIjD,WAAJ,CAAgBrH,IAAhB,CAAd;AACAoK,YAAAA,OAAO,CAACE,OAAD,EAAU7c,MAAV,CAAP;AACA,mBAAO6c,OAAP;AACD;;AAED,cAAI+kB,UAAU,GAAGjhC,IAAI,CAACsY,MAAL,GAAc5X,QAAd,CAAuB,EAAvB,EAA2BwjB,SAA3B,CAAqC,EAArC,CAAjB;;AAEA,mBAAStS,IAAT,GAAgB,CAAE;;AAElB,cAAI4vB,OAAO,GAAG,KAAK,CAAnB;AACA,cAAIC,SAAS,GAAG,CAAhB;AACA,cAAIC,QAAQ,GAAG,CAAf;AAEA,cAAIC,cAAc,GAAG,IAAIC,WAAJ,EAArB;;AAEA,mBAASC,eAAT,GAA2B;AACzB,mBAAO,IAAIlyB,SAAJ,CAAc,0CAAd,CAAP;AACD;;AAED,mBAASmyB,eAAT,GAA2B;AACzB,mBAAO,IAAInyB,SAAJ,CAAc,sDAAd,CAAP;AACD;;AAED,mBAASoyB,OAAT,CAAiB7lB,OAAjB,EAA0B;AACxB,gBAAI;AACF,qBAAOA,OAAO,CAACsO,IAAf;AACD,aAFD,CAEE,OAAOO,KAAP,EAAc;AACd4W,cAAAA,cAAc,CAAC5W,KAAf,GAAuBA,KAAvB;AACA,qBAAO4W,cAAP;AACD;AACF;;AAED,mBAASK,OAAT,CAAiBC,OAAjB,EAA0B58B,KAA1B,EAAiC68B,kBAAjC,EAAqDC,gBAArD,EAAuE;AACrE,gBAAI;AACFF,cAAAA,OAAO,CAAC5jC,IAAR,CAAagH,KAAb,EAAoB68B,kBAApB,EAAwCC,gBAAxC;AACD,aAFD,CAEE,OAAO75B,CAAP,EAAU;AACV,qBAAOA,CAAP;AACD;AACF;;AAED,mBAAS85B,qBAAT,CAA+BlmB,OAA/B,EAAwCmmB,QAAxC,EAAkDJ,OAAlD,EAA2D;AACzDhD,YAAAA,IAAI,CAAC,UAAU/iB,OAAV,EAAmB;AACtB,kBAAIomB,MAAM,GAAG,KAAb;AACA,kBAAIvX,KAAK,GAAGiX,OAAO,CAACC,OAAD,EAAUI,QAAV,EAAoB,UAAUh9B,KAAV,EAAiB;AACtD,oBAAIi9B,MAAJ,EAAY;AACV;AACD;;AACDA,gBAAAA,MAAM,GAAG,IAAT;;AACA,oBAAID,QAAQ,KAAKh9B,KAAjB,EAAwB;AACtB2W,kBAAAA,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAP;AACD,iBAFD,MAEO;AACLk9B,kBAAAA,OAAO,CAACrmB,OAAD,EAAU7W,KAAV,CAAP;AACD;AACF,eAVkB,EAUhB,UAAUm9B,MAAV,EAAkB;AACnB,oBAAIF,MAAJ,EAAY;AACV;AACD;;AACDA,gBAAAA,MAAM,GAAG,IAAT;AAEArmB,gBAAAA,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAN;AACD,eAjBkB,EAiBhB,cAActmB,OAAO,CAACumB,MAAR,IAAkB,kBAAhC,CAjBgB,CAAnB;;AAmBA,kBAAI,CAACH,MAAD,IAAWvX,KAAf,EAAsB;AACpBuX,gBAAAA,MAAM,GAAG,IAAT;AACArmB,gBAAAA,MAAM,CAACC,OAAD,EAAU6O,KAAV,CAAN;AACD;AACF,aAzBG,EAyBD7O,OAzBC,CAAJ;AA0BD;;AAED,mBAASwmB,iBAAT,CAA2BxmB,OAA3B,EAAoCmmB,QAApC,EAA8C;AAC5C,gBAAIA,QAAQ,CAAClB,MAAT,KAAoBM,SAAxB,EAAmC;AACjCc,cAAAA,OAAO,CAACrmB,OAAD,EAAUmmB,QAAQ,CAAChB,OAAnB,CAAP;AACD,aAFD,MAEO,IAAIgB,QAAQ,CAAClB,MAAT,KAAoBO,QAAxB,EAAkC;AACvCzlB,cAAAA,MAAM,CAACC,OAAD,EAAUmmB,QAAQ,CAAChB,OAAnB,CAAN;AACD,aAFM,MAEA;AACLC,cAAAA,SAAS,CAACe,QAAD,EAAWv9B,SAAX,EAAsB,UAAUO,KAAV,EAAiB;AAC9C,uBAAO2W,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAd;AACD,eAFQ,EAEN,UAAUm9B,MAAV,EAAkB;AACnB,uBAAOvmB,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAb;AACD,eAJQ,CAAT;AAKD;AACF;;AAED,mBAASG,mBAAT,CAA6BzmB,OAA7B,EAAsC0mB,aAAtC,EAAqDX,OAArD,EAA8D;AAC5D,gBAAIW,aAAa,CAAC7hC,WAAd,KAA8Bmb,OAAO,CAACnb,WAAtC,IAAqDkhC,OAAO,KAAKzX,IAAjE,IAAyEoY,aAAa,CAAC7hC,WAAd,CAA0Bib,OAA1B,KAAsCulB,SAAnH,EAA8H;AAC5HmB,cAAAA,iBAAiB,CAACxmB,OAAD,EAAU0mB,aAAV,CAAjB;AACD,aAFD,MAEO;AACL,kBAAIX,OAAO,KAAKN,cAAhB,EAAgC;AAC9B1lB,gBAAAA,MAAM,CAACC,OAAD,EAAUylB,cAAc,CAAC5W,KAAzB,CAAN;AACA4W,gBAAAA,cAAc,CAAC5W,KAAf,GAAuB,IAAvB;AACD,eAHD,MAGO,IAAIkX,OAAO,KAAKn9B,SAAhB,EAA2B;AAChCy9B,gBAAAA,OAAO,CAACrmB,OAAD,EAAU0mB,aAAV,CAAP;AACD,eAFM,MAEA,IAAI9gC,UAAU,CAACmgC,OAAD,CAAd,EAAyB;AAC9BG,gBAAAA,qBAAqB,CAAClmB,OAAD,EAAU0mB,aAAV,EAAyBX,OAAzB,CAArB;AACD,eAFM,MAEA;AACLM,gBAAAA,OAAO,CAACrmB,OAAD,EAAU0mB,aAAV,CAAP;AACD;AACF;AACF;;AAED,mBAAS5mB,OAAT,CAAiBE,OAAjB,EAA0B7W,KAA1B,EAAiC;AAC/B,gBAAI6W,OAAO,KAAK7W,KAAhB,EAAuB;AACrB4W,cAAAA,MAAM,CAACC,OAAD,EAAU2lB,eAAe,EAAzB,CAAN;AACD,aAFD,MAEO,IAAIhD,gBAAgB,CAACx5B,KAAD,CAApB,EAA6B;AAClCs9B,cAAAA,mBAAmB,CAACzmB,OAAD,EAAU7W,KAAV,EAAiB08B,OAAO,CAAC18B,KAAD,CAAxB,CAAnB;AACD,aAFM,MAEA;AACLk9B,cAAAA,OAAO,CAACrmB,OAAD,EAAU7W,KAAV,CAAP;AACD;AACF;;AAED,mBAASw9B,gBAAT,CAA0B3mB,OAA1B,EAAmC;AACjC,gBAAIA,OAAO,CAAC4mB,QAAZ,EAAsB;AACpB5mB,cAAAA,OAAO,CAAC4mB,QAAR,CAAiB5mB,OAAO,CAACmlB,OAAzB;AACD;;AAED0B,YAAAA,OAAO,CAAC7mB,OAAD,CAAP;AACD;;AAED,mBAASqmB,OAAT,CAAiBrmB,OAAjB,EAA0B7W,KAA1B,EAAiC;AAC/B,gBAAI6W,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC;AAC9B;AACD;;AAEDtlB,YAAAA,OAAO,CAACmlB,OAAR,GAAkBh8B,KAAlB;AACA6W,YAAAA,OAAO,CAACilB,MAAR,GAAiBM,SAAjB;;AAEA,gBAAIvlB,OAAO,CAAC8mB,YAAR,CAAqBngC,MAArB,KAAgC,CAApC,EAAuC;AACrCo8B,cAAAA,IAAI,CAAC8D,OAAD,EAAU7mB,OAAV,CAAJ;AACD;AACF;;AAED,mBAASD,MAAT,CAAgBC,OAAhB,EAAyBsmB,MAAzB,EAAiC;AAC/B,gBAAItmB,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC;AAC9B;AACD;;AACDtlB,YAAAA,OAAO,CAACilB,MAAR,GAAiBO,QAAjB;AACAxlB,YAAAA,OAAO,CAACmlB,OAAR,GAAkBmB,MAAlB;AAEAvD,YAAAA,IAAI,CAAC4D,gBAAD,EAAmB3mB,OAAnB,CAAJ;AACD;;AAED,mBAASolB,SAAT,CAAmB/3B,MAAnB,EAA2B8tB,KAA3B,EAAkCyJ,aAAlC,EAAiDC,WAAjD,EAA8D;AAC5D,gBAAIiC,YAAY,GAAGz5B,MAAM,CAACy5B,YAA1B;AACA,gBAAIngC,MAAM,GAAGmgC,YAAY,CAACngC,MAA1B;AAEA0G,YAAAA,MAAM,CAACu5B,QAAP,GAAkB,IAAlB;AAEAE,YAAAA,YAAY,CAACngC,MAAD,CAAZ,GAAuBw0B,KAAvB;AACA2L,YAAAA,YAAY,CAACngC,MAAM,GAAG4+B,SAAV,CAAZ,GAAmCX,aAAnC;AACAkC,YAAAA,YAAY,CAACngC,MAAM,GAAG6+B,QAAV,CAAZ,GAAkCX,WAAlC;;AAEA,gBAAIl+B,MAAM,KAAK,CAAX,IAAgB0G,MAAM,CAAC43B,MAA3B,EAAmC;AACjClC,cAAAA,IAAI,CAAC8D,OAAD,EAAUx5B,MAAV,CAAJ;AACD;AACF;;AAED,mBAASw5B,OAAT,CAAiB7mB,OAAjB,EAA0B;AACxB,gBAAI+mB,WAAW,GAAG/mB,OAAO,CAAC8mB,YAA1B;AACA,gBAAIE,OAAO,GAAGhnB,OAAO,CAACilB,MAAtB;;AAEA,gBAAI8B,WAAW,CAACpgC,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B;AACD;;AAED,gBAAIw0B,KAAK,GAAGvyB,SAAZ;AAAA,gBACI0E,QAAQ,GAAG1E,SADf;AAAA,gBAEIq+B,MAAM,GAAGjnB,OAAO,CAACmlB,OAFrB;;AAIA,iBAAK,IAAIljC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8kC,WAAW,CAACpgC,MAAhC,EAAwC1E,CAAC,IAAI,CAA7C,EAAgD;AAC9Ck5B,cAAAA,KAAK,GAAG4L,WAAW,CAAC9kC,CAAD,CAAnB;AACAqL,cAAAA,QAAQ,GAAGy5B,WAAW,CAAC9kC,CAAC,GAAG+kC,OAAL,CAAtB;;AAEA,kBAAI7L,KAAJ,EAAW;AACT+J,gBAAAA,cAAc,CAAC8B,OAAD,EAAU7L,KAAV,EAAiB7tB,QAAjB,EAA2B25B,MAA3B,CAAd;AACD,eAFD,MAEO;AACL35B,gBAAAA,QAAQ,CAAC25B,MAAD,CAAR;AACD;AACF;;AAEDjnB,YAAAA,OAAO,CAAC8mB,YAAR,CAAqBngC,MAArB,GAA8B,CAA9B;AACD;;AAED,mBAAS++B,WAAT,GAAuB;AACrB,iBAAK7W,KAAL,GAAa,IAAb;AACD;;AAED,cAAIqY,eAAe,GAAG,IAAIxB,WAAJ,EAAtB;;AAEA,mBAASyB,QAAT,CAAkB75B,QAAlB,EAA4B25B,MAA5B,EAAoC;AAClC,gBAAI;AACF,qBAAO35B,QAAQ,CAAC25B,MAAD,CAAf;AACD,aAFD,CAEE,OAAO76B,CAAP,EAAU;AACV86B,cAAAA,eAAe,CAACrY,KAAhB,GAAwBziB,CAAxB;AACA,qBAAO86B,eAAP;AACD;AACF;;AAED,mBAAShC,cAAT,CAAwB8B,OAAxB,EAAiChnB,OAAjC,EAA0C1S,QAA1C,EAAoD25B,MAApD,EAA4D;AAC1D,gBAAIG,WAAW,GAAGxhC,UAAU,CAAC0H,QAAD,CAA5B;AAAA,gBACInE,KAAK,GAAGP,SADZ;AAAA,gBAEIimB,KAAK,GAAGjmB,SAFZ;AAAA,gBAGIy+B,SAAS,GAAGz+B,SAHhB;AAAA,gBAII0+B,MAAM,GAAG1+B,SAJb;;AAMA,gBAAIw+B,WAAJ,EAAiB;AACfj+B,cAAAA,KAAK,GAAGg+B,QAAQ,CAAC75B,QAAD,EAAW25B,MAAX,CAAhB;;AAEA,kBAAI99B,KAAK,KAAK+9B,eAAd,EAA+B;AAC7BI,gBAAAA,MAAM,GAAG,IAAT;AACAzY,gBAAAA,KAAK,GAAG1lB,KAAK,CAAC0lB,KAAd;AACA1lB,gBAAAA,KAAK,CAAC0lB,KAAN,GAAc,IAAd;AACD,eAJD,MAIO;AACLwY,gBAAAA,SAAS,GAAG,IAAZ;AACD;;AAED,kBAAIrnB,OAAO,KAAK7W,KAAhB,EAAuB;AACrB4W,gBAAAA,MAAM,CAACC,OAAD,EAAU4lB,eAAe,EAAzB,CAAN;AACA;AACD;AACF,aAfD,MAeO;AACLz8B,cAAAA,KAAK,GAAG89B,MAAR;AACAI,cAAAA,SAAS,GAAG,IAAZ;AACD;;AAED,gBAAIrnB,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC,CAC9B;AACD,aAFD,MAEO,IAAI8B,WAAW,IAAIC,SAAnB,EAA8B;AACjCvnB,cAAAA,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAP;AACD,aAFI,MAEE,IAAIm+B,MAAJ,EAAY;AACjBvnB,cAAAA,MAAM,CAACC,OAAD,EAAU6O,KAAV,CAAN;AACD,aAFM,MAEA,IAAImY,OAAO,KAAKzB,SAAhB,EAA2B;AAChCc,cAAAA,OAAO,CAACrmB,OAAD,EAAU7W,KAAV,CAAP;AACD,aAFM,MAEA,IAAI69B,OAAO,KAAKxB,QAAhB,EAA0B;AAC/BzlB,cAAAA,MAAM,CAACC,OAAD,EAAU7W,KAAV,CAAN;AACD;AACJ;;AAED,mBAASo+B,iBAAT,CAA2BvnB,OAA3B,EAAoCwnB,QAApC,EAA8C;AAC5C,gBAAI;AACFA,cAAAA,QAAQ,CAAC,SAASC,cAAT,CAAwBt+B,KAAxB,EAA+B;AACtC2W,gBAAAA,OAAO,CAACE,OAAD,EAAU7W,KAAV,CAAP;AACD,eAFO,EAEL,SAASu+B,aAAT,CAAuBpB,MAAvB,EAA+B;AAChCvmB,gBAAAA,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAN;AACD,eAJO,CAAR;AAKD,aAND,CAME,OAAOl6B,CAAP,EAAU;AACV2T,cAAAA,MAAM,CAACC,OAAD,EAAU5T,CAAV,CAAN;AACD;AACF;;AAED,cAAI8P,EAAE,GAAG,CAAT;;AACA,mBAASyrB,MAAT,GAAkB;AAChB,mBAAOzrB,EAAE,EAAT;AACD;;AAED,mBAAS8oB,WAAT,CAAqBhlB,OAArB,EAA8B;AAC5BA,YAAAA,OAAO,CAAC+kB,UAAD,CAAP,GAAsB7oB,EAAE,EAAxB;AACA8D,YAAAA,OAAO,CAACilB,MAAR,GAAiBr8B,SAAjB;AACAoX,YAAAA,OAAO,CAACmlB,OAAR,GAAkBv8B,SAAlB;AACAoX,YAAAA,OAAO,CAAC8mB,YAAR,GAAuB,EAAvB;AACD;;AAED,mBAASc,YAAT,CAAsB7qB,WAAtB,EAAmC8qB,KAAnC,EAA0C;AACxC,iBAAKC,oBAAL,GAA4B/qB,WAA5B;AACA,iBAAKiD,OAAL,GAAe,IAAIjD,WAAJ,CAAgBrH,IAAhB,CAAf;;AAEA,gBAAI,CAAC,KAAKsK,OAAL,CAAa+kB,UAAb,CAAL,EAA+B;AAC7BC,cAAAA,WAAW,CAAC,KAAKhlB,OAAN,CAAX;AACD;;AAED,gBAAIvb,OAAO,CAACojC,KAAD,CAAX,EAAoB;AAClB,mBAAKlhC,MAAL,GAAckhC,KAAK,CAAClhC,MAApB;AACA,mBAAKohC,UAAL,GAAkBF,KAAK,CAAClhC,MAAxB;AAEA,mBAAKw+B,OAAL,GAAe,IAAIv2B,KAAJ,CAAU,KAAKjI,MAAf,CAAf;;AAEA,kBAAI,KAAKA,MAAL,KAAgB,CAApB,EAAuB;AACrB0/B,gBAAAA,OAAO,CAAC,KAAKrmB,OAAN,EAAe,KAAKmlB,OAApB,CAAP;AACD,eAFD,MAEO;AACL,qBAAKx+B,MAAL,GAAc,KAAKA,MAAL,IAAe,CAA7B;;AACA,qBAAKqhC,UAAL,CAAgBH,KAAhB;;AACA,oBAAI,KAAKE,UAAL,KAAoB,CAAxB,EAA2B;AACzB1B,kBAAAA,OAAO,CAAC,KAAKrmB,OAAN,EAAe,KAAKmlB,OAApB,CAAP;AACD;AACF;AACF,aAfD,MAeO;AACLplB,cAAAA,MAAM,CAAC,KAAKC,OAAN,EAAeioB,eAAe,EAA9B,CAAN;AACD;AACF;;AAED,mBAASA,eAAT,GAA2B;AACzB,mBAAO,IAAIt5B,KAAJ,CAAU,yCAAV,CAAP;AACD;;AAEDi5B,UAAAA,YAAY,CAACvkC,SAAb,CAAuB2kC,UAAvB,GAAoC,UAAUH,KAAV,EAAiB;AACnD,iBAAK,IAAI5lC,CAAC,GAAG,CAAb,EAAgB,KAAKgjC,MAAL,KAAgBK,OAAhB,IAA2BrjC,CAAC,GAAG4lC,KAAK,CAAClhC,MAArD,EAA6D1E,CAAC,EAA9D,EAAkE;AAChE,mBAAKimC,UAAL,CAAgBL,KAAK,CAAC5lC,CAAD,CAArB,EAA0BA,CAA1B;AACD;AACF,WAJD;;AAMA2lC,UAAAA,YAAY,CAACvkC,SAAb,CAAuB6kC,UAAvB,GAAoC,UAAUvO,KAAV,EAAiB13B,CAAjB,EAAoB;AACtD,gBAAII,CAAC,GAAG,KAAKylC,oBAAb;AACA,gBAAIK,UAAU,GAAG9lC,CAAC,CAACyd,OAAnB;;AAEA,gBAAIqoB,UAAU,KAAK9C,SAAnB,EAA8B;AAC5B,kBAAI+C,KAAK,GAAGvC,OAAO,CAAClM,KAAD,CAAnB;;AAEA,kBAAIyO,KAAK,KAAK9Z,IAAV,IAAkBqL,KAAK,CAACsL,MAAN,KAAiBK,OAAvC,EAAgD;AAC9C,qBAAK+C,UAAL,CAAgB1O,KAAK,CAACsL,MAAtB,EAA8BhjC,CAA9B,EAAiC03B,KAAK,CAACwL,OAAvC;AACD,eAFD,MAEO,IAAI,OAAOiD,KAAP,KAAiB,UAArB,EAAiC;AACtC,qBAAKL,UAAL;AACA,qBAAK5C,OAAL,CAAaljC,CAAb,IAAkB03B,KAAlB;AACD,eAHM,MAGA,IAAIt3B,CAAC,KAAKimC,SAAV,EAAqB;AAC1B,oBAAItoB,OAAO,GAAG,IAAI3d,CAAJ,CAAMqT,IAAN,CAAd;AACA+wB,gBAAAA,mBAAmB,CAACzmB,OAAD,EAAU2Z,KAAV,EAAiByO,KAAjB,CAAnB;;AACA,qBAAKG,aAAL,CAAmBvoB,OAAnB,EAA4B/d,CAA5B;AACD,eAJM,MAIA;AACL,qBAAKsmC,aAAL,CAAmB,IAAIlmC,CAAJ,CAAM,UAAU8lC,UAAV,EAAsB;AAC7C,yBAAOA,UAAU,CAACxO,KAAD,CAAjB;AACD,iBAFkB,CAAnB,EAEI13B,CAFJ;AAGD;AACF,aAjBD,MAiBO;AACL,mBAAKsmC,aAAL,CAAmBJ,UAAU,CAACxO,KAAD,CAA7B,EAAsC13B,CAAtC;AACD;AACF,WAxBD;;AA0BA2lC,UAAAA,YAAY,CAACvkC,SAAb,CAAuBglC,UAAvB,GAAoC,UAAU11B,KAAV,EAAiB1Q,CAAjB,EAAoBkH,KAApB,EAA2B;AAC7D,gBAAI6W,OAAO,GAAG,KAAKA,OAAnB;;AAEA,gBAAIA,OAAO,CAACilB,MAAR,KAAmBK,OAAvB,EAAgC;AAC9B,mBAAKyC,UAAL;;AAEA,kBAAIp1B,KAAK,KAAK6yB,QAAd,EAAwB;AACtBzlB,gBAAAA,MAAM,CAACC,OAAD,EAAU7W,KAAV,CAAN;AACD,eAFD,MAEO;AACL,qBAAKg8B,OAAL,CAAaljC,CAAb,IAAkBkH,KAAlB;AACD;AACF;;AAED,gBAAI,KAAK4+B,UAAL,KAAoB,CAAxB,EAA2B;AACzB1B,cAAAA,OAAO,CAACrmB,OAAD,EAAU,KAAKmlB,OAAf,CAAP;AACD;AACF,WAhBD;;AAkBAyC,UAAAA,YAAY,CAACvkC,SAAb,CAAuBklC,aAAvB,GAAuC,UAAUvoB,OAAV,EAAmB/d,CAAnB,EAAsB;AAC3D,gBAAIumC,UAAU,GAAG,IAAjB;AAEApD,YAAAA,SAAS,CAACplB,OAAD,EAAUpX,SAAV,EAAqB,UAAUO,KAAV,EAAiB;AAC7C,qBAAOq/B,UAAU,CAACH,UAAX,CAAsB9C,SAAtB,EAAiCtjC,CAAjC,EAAoCkH,KAApC,CAAP;AACD,aAFQ,EAEN,UAAUm9B,MAAV,EAAkB;AACnB,qBAAOkC,UAAU,CAACH,UAAX,CAAsB7C,QAAtB,EAAgCvjC,CAAhC,EAAmCqkC,MAAnC,CAAP;AACD,aAJQ,CAAT;AAKD,WARD;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,mBAASmC,KAAT,CAAepmB,OAAf,EAAwB;AACtB,mBAAO,IAAIulB,YAAJ,CAAiB,IAAjB,EAAuBvlB,OAAvB,EAAgCrC,OAAvC;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,mBAAS0oB,MAAT,CAAgBrmB,OAAhB,EAAyB;AACvB;AACA,gBAAItF,WAAW,GAAG,IAAlB;;AAEA,gBAAI,CAACtY,OAAO,CAAC4d,OAAD,CAAZ,EAAuB;AACrB,qBAAO,IAAItF,WAAJ,CAAgB,UAAU4rB,CAAV,EAAa5oB,MAAb,EAAqB;AAC1C,uBAAOA,MAAM,CAAC,IAAItM,SAAJ,CAAc,iCAAd,CAAD,CAAb;AACD,eAFM,CAAP;AAGD,aAJD,MAIO;AACL,qBAAO,IAAIsJ,WAAJ,CAAgB,UAAU+C,OAAV,EAAmBC,MAAnB,EAA2B;AAChD,oBAAIpZ,MAAM,GAAG0b,OAAO,CAAC1b,MAArB;;AACA,qBAAK,IAAI1E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0E,MAApB,EAA4B1E,CAAC,EAA7B,EAAiC;AAC/B8a,kBAAAA,WAAW,CAAC+C,OAAZ,CAAoBuC,OAAO,CAACpgB,CAAD,CAA3B,EAAgCqsB,IAAhC,CAAqCxO,OAArC,EAA8CC,MAA9C;AACD;AACF,eALM,CAAP;AAMD;AACF;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,mBAAS6oB,QAAT,CAAkBtC,MAAlB,EAA0B;AACxB;AACA,gBAAIvpB,WAAW,GAAG,IAAlB;AACA,gBAAIiD,OAAO,GAAG,IAAIjD,WAAJ,CAAgBrH,IAAhB,CAAd;AACAqK,YAAAA,MAAM,CAACC,OAAD,EAAUsmB,MAAV,CAAN;AACA,mBAAOtmB,OAAP;AACD;;AAED,mBAAS6oB,aAAT,GAAyB;AACvB,kBAAM,IAAIp1B,SAAJ,CAAc,oFAAd,CAAN;AACD;;AAED,mBAASq1B,QAAT,GAAoB;AAClB,kBAAM,IAAIr1B,SAAJ,CAAc,uHAAd,CAAN;AACD;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA,mBAAS60B,SAAT,CAAmBd,QAAnB,EAA6B;AAC3B,iBAAKzC,UAAL,IAAmB4C,MAAM,EAAzB;AACA,iBAAKxC,OAAL,GAAe,KAAKF,MAAL,GAAcr8B,SAA7B;AACA,iBAAKk+B,YAAL,GAAoB,EAApB;;AAEA,gBAAIpxB,IAAI,KAAK8xB,QAAb,EAAuB;AACrB,qBAAOA,QAAP,KAAoB,UAApB,IAAkCqB,aAAa,EAA/C;AACA,8BAAgBP,SAAhB,GAA4Bf,iBAAiB,CAAC,IAAD,EAAOC,QAAP,CAA7C,GAAgEsB,QAAQ,EAAxE;AACD;AACF;;AAEDR,UAAAA,SAAS,CAACS,GAAV,GAAgBN,KAAhB;AACAH,UAAAA,SAAS,CAACU,IAAV,GAAiBN,MAAjB;AACAJ,UAAAA,SAAS,CAACxoB,OAAV,GAAoBulB,SAApB;AACAiD,UAAAA,SAAS,CAACvoB,MAAV,GAAmB6oB,QAAnB;AACAN,UAAAA,SAAS,CAACW,aAAV,GAA0B9F,YAA1B;AACAmF,UAAAA,SAAS,CAACY,QAAV,GAAqB7F,OAArB;AACAiF,UAAAA,SAAS,CAACa,KAAV,GAAkBpG,IAAlB;AAEAuF,UAAAA,SAAS,CAACjlC,SAAV,GAAsB;AACpBwB,YAAAA,WAAW,EAAEyjC,SADO;;AAGpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMAha,YAAAA,IAAI,EAAEA,IApMc;;AAsMpB;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,qBAAS,SAAS8a,MAAT,CAAgBvE,WAAhB,EAA6B;AACpC,qBAAO,KAAKvW,IAAL,CAAU,IAAV,EAAgBuW,WAAhB,CAAP;AACD;AAnOmB,WAAtB;AAsOA;;AACA,mBAASwE,UAAT,GAAsB;AAClB,gBAAIC,KAAK,GAAG1gC,SAAZ;;AAEA,gBAAI,OAAOhF,MAAP,KAAkB,WAAtB,EAAmC;AAC/B0lC,cAAAA,KAAK,GAAG1lC,MAAR;AACH,aAFD,MAEO,IAAI,OAAOG,IAAP,KAAgB,WAApB,EAAiC;AACpCulC,cAAAA,KAAK,GAAGvlC,IAAR;AACH,aAFM,MAEA;AACH,kBAAI;AACAulC,gBAAAA,KAAK,GAAGtlC,QAAQ,CAAC,aAAD,CAAR,EAAR;AACH,eAFD,CAEE,OAAOoI,CAAP,EAAU;AACR,sBAAM,IAAIuC,KAAJ,CAAU,0EAAV,CAAN;AACH;AACJ;;AAED,gBAAIxG,CAAC,GAAGmhC,KAAK,CAACtd,OAAd;;AAEA,gBAAI7jB,CAAJ,EAAO;AACH,kBAAIohC,eAAe,GAAG,IAAtB;;AACA,kBAAI;AACAA,gBAAAA,eAAe,GAAG7mC,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+BgG,CAAC,CAAC2X,OAAF,EAA/B,CAAlB;AACH,eAFD,CAEE,OAAO1T,CAAP,EAAU,CACR;AACH;;AAED,kBAAIm9B,eAAe,KAAK,kBAApB,IAA0C,CAACphC,CAAC,CAACqhC,IAAjD,EAAuD;AACnD;AACH;AACJ;;AAEDF,YAAAA,KAAK,CAACtd,OAAN,GAAgBsc,SAAhB;AACH,WA9mCoB,CAgnCrB;;;AACAA,UAAAA,SAAS,CAAC9F,QAAV,GAAqB6G,UAArB;AACAf,UAAAA,SAAS,CAACtc,OAAV,GAAoBsc,SAApB;AAEA,iBAAOA,SAAP;AAEC,SA1nCA,CAAD;AA8nCA;;AAA4B,OAtoCA,EAsoCCnmC,IAtoCD,CAsoCMV,OAtoCN,EAsoCeM,mBAAmB,CAAC,CAAD,CAtoClC,EAsoCuCA,mBAAmB,CAAC,EAAD,CAtoC1D,CAAD;AAwoC3B;AAAO,KAtsMG;AAusMV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAI4vB,CAAJ,CAFiC,CAIjC;;AACAA,MAAAA,CAAC,GAAI,YAAW;AACf,eAAO,IAAP;AACA,OAFG,EAAJ;;AAIA,UAAI;AACH;AACAA,QAAAA,CAAC,GAAGA,CAAC,IAAIrtB,QAAQ,CAAC,aAAD,CAAR,EAAL,IAAkC,CAAC,GAAEylC,IAAH,EAAS,MAAT,CAAtC;AACA,OAHD,CAGE,OAAMr9B,CAAN,EAAS;AACV;AACA,YAAG,QAAOvI,MAAP,0CAAOA,MAAP,OAAkB,QAArB,EACCwtB,CAAC,GAAGxtB,MAAJ;AACD,OAhBgC,CAkBjC;AACA;AACA;;;AAEAnC,MAAAA,MAAM,CAACD,OAAP,GAAiB4vB,CAAjB;AAGA;AAAO,KAjuMG;AAkuMV;;AACA;AAAO,cAAS3vB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;;AAEA;AAAO,KAvuMG;AAwuMV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI2nC,QAAQ,GAAG3nC,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,UAAI4nC,SAAS,GAAGzsB,sBAAsB,CAACwsB,QAAD,CAAtC;;AAEA,UAAIE,OAAO,GAAG7nC,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAI8nC,QAAQ,GAAG3sB,sBAAsB,CAAC0sB,OAAD,CAArC;;AAEA,UAAIE,eAAe,GAAG/nC,mBAAmB,CAAC,EAAD,CAAzC;;AAEA,UAAIgoC,gBAAgB,GAAG7sB,sBAAsB,CAAC4sB,eAAD,CAA7C;;AAEA,UAAIxZ,gBAAgB,GAAGvuB,mBAAmB,CAAC,EAAD,CAA1C;;AAEA,UAAIwuB,gBAAgB,GAAGrT,sBAAsB,CAACoT,gBAAD,CAA7C;;AAEA,UAAIE,aAAa,GAAGzuB,mBAAmB,CAAC,EAAD,CAAvC;;AAEA,UAAI0uB,aAAa,GAAGvT,sBAAsB,CAACsT,aAAD,CAA1C;;AAEA,UAAIwZ,2BAA2B,GAAGjoC,mBAAmB,CAAC,EAAD,CAArD;;AAEA,UAAIkoC,2BAA2B,GAAG/sB,sBAAsB,CAAC8sB,2BAAD,CAAxD;;AAEA,UAAIE,UAAU,GAAGnoC,mBAAmB,CAAC,EAAD,CAApC;;AAEA,UAAIooC,UAAU,GAAGjtB,sBAAsB,CAACgtB,UAAD,CAAvC;;AAEA,UAAIpa,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,UAAIsa,cAAc,GAAGroC,mBAAmB,CAAC,GAAD,CAAxC;;AAEA,UAAIsoC,eAAe,GAAGntB,sBAAsB,CAACktB,cAAD,CAA5C;;AAEA,UAAIE,SAAS,GAAGvoC,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIwoC,UAAU,GAAGrtB,sBAAsB,CAACotB,SAAD,CAAvC;;AAEA,UAAIE,KAAK,GAAGzoC,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI0oC,MAAM,GAAGvtB,sBAAsB,CAACstB,KAAD,CAAnC;;AAEAzoC,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AAEA,UAAI2oC,KAAK,GAAG3oC,mBAAmB,CAAC,EAAD,CAA/B;;AAEA,UAAI4oC,OAAO,GAAG5oC,mBAAmB,CAAC,EAAD,CAAjC;;AAEA,UAAI6oC,QAAQ,GAAG1tB,sBAAsB,CAACytB,OAAD,CAArC;;AAEA,UAAIE,OAAO,GAAG9oC,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAI+oC,QAAQ,GAAG5tB,sBAAsB,CAAC2tB,OAAD,CAArC;;AAEA,UAAIE,OAAO,GAAGhpC,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIipC,QAAQ,GAAG9tB,sBAAsB,CAAC6tB,OAAD,CAArC;;AAEA,UAAIE,QAAQ,GAAGlpC,mBAAmB,CAAC,GAAD,CAAlC;;AAEA,UAAImpC,SAAS,GAAGhuB,sBAAsB,CAAC+tB,QAAD,CAAtC;;AAEA,UAAIE,IAAI,GAAGppC,mBAAmB,CAAC,EAAD,CAA9B;;AAEA,UAAIqpC,KAAK,GAAGluB,sBAAsB,CAACiuB,IAAD,CAAlC;;AAEA,UAAIE,MAAM,GAAGtpC,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAIupC,YAAY,GAAGvpC,mBAAmB,CAAC,GAAD,CAAtC;;AAEA,UAAIwpC,aAAa,GAAGruB,sBAAsB,CAACouB,YAAD,CAA1C;;AAEA,eAASpuB,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI+kC,eAAe,GAAG,UAAUC,UAAV,EAAsB;AAC1C,SAAC,GAAGtB,UAAU,WAAd,EAAwBqB,eAAxB,EAAyCC,UAAzC;;AAEA,iBAASD,eAAT,CAAyBx9B,KAAzB,EAAgC;AAC9B,WAAC,GAAGuiB,gBAAgB,WAApB,EAA8B,IAA9B,EAAoCib,eAApC;;AAEA,cAAIE,KAAK,GAAG,CAAC,GAAGzB,2BAA2B,WAA/B,EAAyC,IAAzC,EAA+C,CAACuB,eAAe,CAACzkB,SAAhB,IAA6B,CAAC,GAAGgjB,gBAAgB,WAApB,EAA8ByB,eAA9B,CAA9B,EAA8ErpC,IAA9E,CAAmF,IAAnF,EAAyF6L,KAAzF,CAA/C,CAAZ;;AAEA09B,UAAAA,KAAK,CAAC/4B,KAAN,GAAc;AACZg5B,YAAAA,IAAI,EAAE,IADM;AAEZC,YAAAA,KAAK,EAAE,IAFK;AAGZC,YAAAA,QAAQ,EAAE,EAHE;AAIZC,YAAAA,aAAa,EAAE,EAJH;AAKZC,YAAAA,OAAO,EAAE,EALG;AAMZC,YAAAA,IAAI,EAAE,CANM;AAOZC,YAAAA,cAAc,EAAE,MAPJ;AAQZC,YAAAA,MAAM,EAAE,IARI;AASZC,YAAAA,WAAW,EAAE,EATD;AAWZC,YAAAA,QAAQ,EAAE,KAXE;AAYZC,YAAAA,SAAS,EAAE,IAZC;AAaZC,YAAAA,UAAU,EAAE,KAbA;AAcZC,YAAAA,SAAS,EAAE,KAdC;AAeZC,YAAAA,UAAU,EAAE,KAfA;AAgBZC,YAAAA,UAAU,EAAE,KAhBA;AAiBZC,YAAAA,eAAe,EAAE,KAjBL;AAkBZC,YAAAA,cAAc,EAAE,KAlBJ;AAmBZC,YAAAA,cAAc,EAAE,KAnBJ;AAoBZC,YAAAA,SAAS,EAAE,KApBC;AAsBZC,YAAAA,YAAY,EAAE,KAtBF;AAuBZC,YAAAA,QAAQ,EAAE;AAvBE,WAAd;;AA0BArB,UAAAA,KAAK,CAACsB,aAAN,GAAsB,UAAUpB,KAAV,EAAiB;AACrC,gBAAIqB,aAAa,GAAGvB,KAAK,CAAChzB,OAA1B;AAAA,gBACIw0B,QAAQ,GAAGD,aAAa,CAACC,QAD7B;AAAA,gBAEIC,YAAY,GAAGF,aAAa,CAACE,YAFjC;AAAA,gBAGIC,OAAO,GAAGH,aAAa,CAACG,OAH5B;AAIA,gBAAIpB,IAAI,GAAGN,KAAK,CAAC/4B,KAAN,CAAYq5B,IAAvB;AAGA,mBAAON,KAAK,CAAC2B,QAAN,GAAiB/e,IAAjB,CAAsB,UAAUsd,KAAV,EAAiB;AAC5C,kBAAI,CAACA,KAAL,EAAY;AAEZ,qBAAOlB,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsB8oC,KAAK,CAAC0B,YAA5B,EAA0C;AAC/C9kB,gBAAAA,OAAO,EAAE;AACP+kB,kBAAAA,MAAM,EAAE;AADD,iBADsC;AAI/ClhB,gBAAAA,IAAI,EAAE;AACJC,kBAAAA,QAAQ,EAAE4gB,QADN;AAEJ3gB,kBAAAA,QAAQ,EAAE4gB;AAFN,iBAJyC;AAQ/CxjB,gBAAAA,MAAM,EAAE;AACN6jB,kBAAAA,QAAQ,EAAEJ,OADJ;AAENpB,kBAAAA,IAAI,EAAEA;AAFA;AARuC,eAA1C,EAYJ1d,IAZI,CAYC,UAAUmf,GAAV,EAAe;AACrB,oBAAIC,WAAW,GAAGhC,KAAK,CAAC/4B,KAAxB;AAAA,oBACIk5B,QAAQ,GAAG6B,WAAW,CAAC7B,QAD3B;AAAA,oBAEID,KAAK,GAAG8B,WAAW,CAAC9B,KAFxB;AAIA,oBAAIa,UAAU,GAAG,KAAjB;AACA,oBAAIkB,EAAE,GAAG9B,QAAQ,CAACh9B,MAAT,CAAgB4+B,GAAG,CAAClpB,IAApB,CAAT;;AACA,oBAAIopB,EAAE,CAAChnC,MAAH,IAAailC,KAAK,CAACC,QAAnB,IAA+B4B,GAAG,CAAClpB,IAAJ,CAAS5d,MAAT,GAAkBymC,OAArD,EAA8D;AAC5DX,kBAAAA,UAAU,GAAG,IAAb;AACD;;AACDf,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb84B,kBAAAA,QAAQ,EAAE8B,EADG;AAEblB,kBAAAA,UAAU,EAAEA,UAFC;AAGbT,kBAAAA,IAAI,EAAEA,IAAI,GAAG;AAHA,iBAAf;;AAKA,uBAAO2B,EAAP;AACD,eA5BM,CAAP;AA6BD,aAhCM,CAAP;AAiCD,WAzCD;;AA2CAjC,UAAAA,KAAK,CAACkC,MAAN,GAAe,UAAUxhC,CAAV,EAAa;AAC1Bs/B,YAAAA,KAAK,CAACmC,WAAN,GAAoBzhC,CAApB;AACD,WAFD;;AAIAs/B,UAAAA,KAAK,CAACoC,KAAN,GAAc,UAAUC,YAAV,EAAwB;AACpC,mBAAO,YAAY;AACjB,kBAAIhC,OAAO,GAAGL,KAAK,CAAC/4B,KAAN,CAAYo5B,OAA1B;AAEA,kBAAIiC,gBAAgB,GAAGD,YAAY,CAACE,IAApC;AACA,kBAAIC,iBAAiB,GAAGF,gBAAgB,CAACzjC,KAAjB,CAAuB,IAAvB,CAAxB;AACA2jC,cAAAA,iBAAiB,CAACrM,OAAlB,CAA0B,MAAMkM,YAAY,CAACpC,IAAb,CAAkBwC,KAAlD;AACAD,cAAAA,iBAAiB,GAAGA,iBAAiB,CAAC3/B,GAAlB,CAAsB,UAAUkjB,CAAV,EAAa;AACrD,uBAAO,OAAOA,CAAd;AACD,eAFmB,CAApB;AAGAyc,cAAAA,iBAAiB,CAAC99B,IAAlB,CAAuB,EAAvB;AACA89B,cAAAA,iBAAiB,CAAC99B,IAAlB,CAAuB,EAAvB;AACA,kBAAI27B,OAAJ,EAAamC,iBAAiB,CAACrM,OAAlB,CAA0B,EAA1B;;AACb6J,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAEg5B,gBAAAA,OAAO,EAAEA,OAAO,GAAGmC,iBAAiB,CAAC3lB,IAAlB,CAAuB,IAAvB;AAArB,eAAf,EAAoE,YAAY;AAC9EgiB,gBAAAA,UAAU,WAAV,CAAmB6D,MAAnB,CAA0B1C,KAAK,CAAC2C,SAAhC;;AACA3C,gBAAAA,KAAK,CAAC2C,SAAN,CAAgBC,KAAhB;AACD,eAHD;AAID,aAhBD;AAiBD,WAlBD;;AAoBA5C,UAAAA,KAAK,CAAC6C,WAAN,GAAoB,UAAUniC,CAAV,EAAa;AAC/BA,YAAAA,CAAC,CAACoiC,cAAF;AACApiC,YAAAA,CAAC,CAACqiC,eAAF;AACA,gBAAIC,SAAS,GAAG,CAAChD,KAAK,CAAC/4B,KAAN,CAAYg6B,cAA7B;;AACA,gBAAIgC,UAAU,GAAG,SAASA,UAAT,CAAoBC,EAApB,EAAwB;AACvC,kBAAI,CAAC,GAAGlE,KAAK,CAAC1jB,gBAAV,EAA4B4nB,EAAE,CAACnmC,MAA/B,EAAuC,SAAvC,EAAkD,UAAlD,CAAJ,EAAmE;AACjE;AACD;;AACD5E,cAAAA,MAAM,CAAC0C,QAAP,CAAgBy2B,mBAAhB,CAAoC,OAApC,EAA6C2R,UAA7C;;AACAjD,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE45B,gBAAAA,cAAc,EAAE;AAAlB,eAAf;AACD,aAND;;AAOAjB,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE45B,cAAAA,cAAc,EAAE+B;AAAlB,aAAf;;AACA,gBAAIA,SAAJ,EAAe;AACb7qC,cAAAA,MAAM,CAAC0C,QAAP,CAAgBse,gBAAhB,CAAiC,OAAjC,EAA0C8pB,UAA1C;AACD,aAFD,MAEO;AACL9qC,cAAAA,MAAM,CAAC0C,QAAP,CAAgBy2B,mBAAhB,CAAoC,OAApC,EAA6C2R,UAA7C;AACD;AACF,WAjBD;;AAmBAjD,UAAAA,KAAK,CAACmD,WAAN,GAAoB,YAAY;AAC9B,gBAAI9C,OAAO,GAAGL,KAAK,CAAC/4B,KAAN,CAAYo5B,OAA1B;AAEAloC,YAAAA,MAAM,CAACirC,YAAP,CAAoBC,OAApB,CAA4B1D,MAAM,CAAC2D,UAAnC,EAA+C1mB,kBAAkB,CAACyjB,OAAD,CAAjE;AACAloC,YAAAA,MAAM,CAACikB,QAAP,CAAgBmnB,IAAhB,GAAuBvD,KAAK,CAACwD,SAA7B;AACD,WALD;;AAOAxD,UAAAA,KAAK,CAACyD,iBAAN,GAA0B,YAAY;AACpCzD,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE25B,cAAAA,eAAe,EAAE;AAAnB,aAAf;;AACAhB,YAAAA,KAAK,CAAC0D,WAAN,GAAoB9gB,IAApB,CAAyB,UAAUsd,KAAV,EAAiB;AACxCF,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb25B,gBAAAA,eAAe,EAAE,KADJ;AAEbI,gBAAAA,YAAY,EAAE;AAFD,eAAf;;AAIA,qBAAOpB,KAAK,CAAC2D,WAAN,CAAkBzD,KAAlB,CAAP;AACD,aAND,WAMS,UAAU9iB,GAAV,EAAe;AACtB4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb25B,gBAAAA,eAAe,EAAE,KADJ;AAEbI,gBAAAA,YAAY,EAAE,IAFD;AAGbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,eAAf;AAKD,aAZD,EAYGwF,IAZH,CAYQ,UAAUmf,GAAV,EAAe;AACrB,kBAAIA,GAAJ,EAAS;AACP/B,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbq5B,kBAAAA,QAAQ,EAAE;AADG,iBAAf;AAGD;AACF,aAlBD;AAmBD,WArBD;;AAuBAV,UAAAA,KAAK,CAAC4D,mBAAN,GAA4B,UAAUljC,CAAV,EAAa;AACvC,gBAAI,CAACs/B,KAAK,CAAC/4B,KAAN,CAAYo5B,OAAZ,CAAoBplC,MAAzB,EAAiC;AAC/ByF,cAAAA,CAAC,IAAIA,CAAC,CAACoiC,cAAF,EAAL;;AACA9C,cAAAA,KAAK,CAAC2C,SAAN,CAAgBC,KAAhB;;AACA;AACD;;AACD5C,YAAAA,KAAK,CAAC34B,QAAN,CAAe,UAAUJ,KAAV,EAAiB;AAC9B,kBAAIA,KAAK,CAAC25B,UAAV,EAAsB;;AAEtBZ,cAAAA,KAAK,CAAC6D,aAAN,GAAsBjhB,IAAtB,CAA2B,YAAY;AACrC,uBAAOod,KAAK,CAAC34B,QAAN,CAAe;AACpBu5B,kBAAAA,UAAU,EAAE,KADQ;AAEpBQ,kBAAAA,YAAY,EAAE;AAFM,iBAAf,CAAP;AAID,eALD,WAKS,UAAUhkB,GAAV,EAAe;AACtB4iB,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbu5B,kBAAAA,UAAU,EAAE,KADC;AAEbQ,kBAAAA,YAAY,EAAE,IAFD;AAGbC,kBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,iBAAf;AAKD,eAXD;;AAYA,qBAAO;AAAEwjB,gBAAAA,UAAU,EAAE;AAAd,eAAP;AACD,aAhBD;AAiBD,WAvBD;;AAyBAZ,UAAAA,KAAK,CAAC8D,oBAAN,GAA6B,UAAUpjC,CAAV,EAAa;AACxCs/B,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb85B,cAAAA,SAAS,EAAE,CAACnB,KAAK,CAAC/4B,KAAN,CAAYk6B;AADX,aAAf;;AAIAnC,YAAAA,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,WAAvB,EAAoC;AAClCtf,cAAAA,IAAI,EAAEub,KAAK,CAAC/4B,KAAN,CAAYo5B;AADgB,aAApC,EAEG;AACDvjB,cAAAA,OAAO,EAAEkjB,KAAK,CAACgE,WAAN,IAAqB;AAAEljB,gBAAAA,aAAa,EAAE,WAAWkf,KAAK,CAACgE;AAAlC;AAD7B,aAFH,EAIGphB,IAJH,CAIQ,UAAUmf,GAAV,EAAe;AACrB/B,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbo5B,gBAAAA,WAAW,EAAEsB,GAAG,CAAClpB;AADJ,eAAf;AAGD,aARD,WAQS,UAAUuE,GAAV,EAAe;AACtB4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb+5B,gBAAAA,YAAY,EAAE,IADD;AAEbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAFG,eAAf;AAID,aAbD;AAcD,WAnBD;;AAqBA4iB,UAAAA,KAAK,CAACiE,iBAAN,GAA0B,YAAY;AACpC,gBAAIC,YAAY,GAAGlE,KAAK,CAAC/4B,KAAzB;AAAA,gBACIi5B,KAAK,GAAGgE,YAAY,CAAChE,KADzB;AAAA,gBAEIY,UAAU,GAAGoD,YAAY,CAACpD,UAF9B;AAIA,gBAAIA,UAAJ,EAAgB;;AAChBd,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAEy5B,cAAAA,UAAU,EAAE;AAAd,aAAf;;AACAd,YAAAA,KAAK,CAAC2D,WAAN,CAAkBzD,KAAlB,EAAyBtd,IAAzB,CAA8B,YAAY;AACxC,qBAAOod,KAAK,CAAC34B,QAAN,CAAe;AAAEy5B,gBAAAA,UAAU,EAAE;AAAd,eAAf,CAAP;AACD,aAFD;AAGD,WAVD;;AAYAd,UAAAA,KAAK,CAACmE,mBAAN,GAA4B,UAAUzjC,CAAV,EAAa;AACvC,mBAAOs/B,KAAK,CAAC34B,QAAN,CAAe;AAAEg5B,cAAAA,OAAO,EAAE3/B,CAAC,CAAC3D,MAAF,CAASU;AAApB,aAAf,CAAP;AACD,WAFD;;AAIAuiC,UAAAA,KAAK,CAACoE,YAAN,GAAqB,YAAY;AAC/BpE,YAAAA,KAAK,CAACqE,MAAN;;AACAlsC,YAAAA,MAAM,CAACikB,QAAP,CAAgBkoB,MAAhB;AACD,WAHD;;AAKAtE,UAAAA,KAAK,CAACuE,kBAAN,GAA2B,UAAU7jC,CAAV,EAAa;AACtC,gBAAI8jC,mBAAmB,GAAGxE,KAAK,CAAChzB,OAAN,CAAcw3B,mBAAxC;AAEA,gBAAI,CAACA,mBAAL,EAA0B,OAAO9jC,CAAC,CAACoiC,cAAF,EAAP;;AAC1B9C,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE65B,cAAAA,cAAc,EAAE;AAAlB,aAAf;AACD,WALD;;AAOAlB,UAAAA,KAAK,CAACyE,iBAAN,GAA0B,UAAU/jC,CAAV,EAAa;AACrC,gBAAI8jC,mBAAmB,GAAGxE,KAAK,CAAChzB,OAAN,CAAcw3B,mBAAxC;AAEA,gBAAI,CAACA,mBAAL,EAA0B,OAAO9jC,CAAC,CAACoiC,cAAF,EAAP;;AAC1B9C,YAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAE65B,cAAAA,cAAc,EAAE;AAAlB,aAAf;AACD,WALD;;AAOAlB,UAAAA,KAAK,CAAC0E,UAAN,GAAmB,UAAUC,SAAV,EAAqB;AACtC,mBAAO,UAAUjkC,CAAV,EAAa;AAClBs/B,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AAAEk5B,gBAAAA,cAAc,EAAEoE;AAAlB,eAAf;AACD,aAFD;AAGD,WAJD;;AAMA3E,UAAAA,KAAK,CAAC4E,oBAAN,GAA6B,UAAUlkC,CAAV,EAAa;AACxC,gBAAImkC,YAAY,GAAG7E,KAAK,CAAChzB,OAAN,CAAc63B,YAAjC;;AAEA,gBAAIA,YAAY,KAAKnkC,CAAC,CAACokC,OAAF,IAAapkC,CAAC,CAACqkC,OAApB,CAAZ,IAA4CrkC,CAAC,CAACskC,OAAF,KAAc,EAA9D,EAAkE;AAChEhF,cAAAA,KAAK,CAACmC,WAAN,IAAqBnC,KAAK,CAACmC,WAAN,CAAkBS,KAAlB,EAArB;;AACA5C,cAAAA,KAAK,CAAC4D,mBAAN;AACD;AACF,WAPD;;AASA5D,UAAAA,KAAK,CAAChzB,OAAN,GAAgB,CAAC,GAAGmxB,QAAQ,WAAZ,EAAsB,EAAtB,EAA0B;AACxC3tB,YAAAA,EAAE,EAAErY,MAAM,CAACikB,QAAP,CAAgBmnB,IADoB;AAExChZ,YAAAA,MAAM,EAAE,CAAC,CAF+B;AAGxC0a,YAAAA,MAAM,EAAE,CAAC,QAAD,CAHgC;AAIxCr7B,YAAAA,KAAK,EAAEzR,MAAM,CAAC0C,QAAP,CAAgB+O,KAJiB;AAKxC24B,YAAAA,IAAI,EAAE,EALkC;AAK9B;AACV2C,YAAAA,QAAQ,EAAE/sC,MAAM,CAACwC,SAAP,CAAiBuqC,QAAjB,IAA6B/sC,MAAM,CAACwC,SAAP,CAAiBwqC,YANhB;AAOxCzD,YAAAA,OAAO,EAAE,EAP+B;AAQxCnB,YAAAA,cAAc,EAAE,MARwB;AAQhB;AACxB6E,YAAAA,mBAAmB,EAAE,KATmB;AAUxCZ,YAAAA,mBAAmB,EAAE,KAVmB;AAWxCa,YAAAA,KAAK,EAAE,iFAXiC;AAYxCC,YAAAA,eAAe,EAAE;AACfC,cAAAA,cAAc,EAAE,GADD;AAEfC,cAAAA,eAAe,EAAE,mBAFF;AAGfC,cAAAA,cAAc,EAAE,mBAHD;AAIfC,cAAAA,cAAc,EAAE;AAJD,aAZuB;AAkBxCb,YAAAA,YAAY,EAAE,IAlB0B;AAoBxC7mB,YAAAA,GAAG,EAAE7lB,MAAM,CAACikB,QAAP,CAAgBmnB,IApBmB;AAsBxCoC,YAAAA,aAAa,EAAE;AACbC,cAAAA,SAAS,EAAE,kDADE;AAEbnD,cAAAA,KAAK,EAAE,MAFM;AAGbzkB,cAAAA,GAAG,EAAE;AAHQ,aAtByB;AA4BxC6nB,YAAAA,mBAAmB,EAAE;AA5BmB,WAA1B,EA6BbvjC,KAAK,CAAC0K,OA7BO,CAAhB;AA+BAgzB,UAAAA,KAAK,CAAC/4B,KAAN,CAAYs5B,cAAZ,GAA6BP,KAAK,CAAChzB,OAAN,CAAcuzB,cAA3C;AACA,cAAIuF,aAAa,GAAG3tC,MAAM,CAACirC,YAAP,CAAoB2C,OAApB,CAA4BpG,MAAM,CAAC2D,UAAnC,CAApB;;AACA,cAAIwC,aAAJ,EAAmB;AACjB9F,YAAAA,KAAK,CAAC/4B,KAAN,CAAYo5B,OAAZ,GAAsB1jB,kBAAkB,CAACmpB,aAAD,CAAxC;AACA3tC,YAAAA,MAAM,CAACirC,YAAP,CAAoB4C,UAApB,CAA+BrG,MAAM,CAAC2D,UAAtC;AACD;;AAED,cAAI/mB,KAAK,GAAG,CAAC,GAAGyiB,KAAK,CAACpjB,UAAV,GAAZ;;AACA,cAAIW,KAAK,CAAC2G,IAAV,EAAgB;AACd,gBAAIA,IAAI,GAAG3G,KAAK,CAAC2G,IAAjB;AACA,mBAAO3G,KAAK,CAAC2G,IAAb;AACA,gBAAI+iB,WAAW,GAAG,KAAK9tC,MAAM,CAACikB,QAAP,CAAgB8pB,MAArB,GAA8B/tC,MAAM,CAACikB,QAAP,CAAgB+pB,QAA9C,GAAyD,CAAC,GAAGnH,KAAK,CAACrjB,cAAV,EAA0BY,KAA1B,CAAzD,GAA4FpkB,MAAM,CAACikB,QAAP,CAAgBgqB,IAA9H;AACAC,YAAAA,OAAO,CAACj/B,YAAR,CAAqB,IAArB,EAA2B,IAA3B,EAAiC6+B,WAAjC;AACAjG,YAAAA,KAAK,CAAChzB,OAAN,GAAgB,CAAC,GAAGmxB,QAAQ,WAAZ,EAAsB,EAAtB,EAA0B6B,KAAK,CAAChzB,OAAhC,EAAyC;AACvDgR,cAAAA,GAAG,EAAEioB,WADkD;AAEvDz1B,cAAAA,EAAE,EAAEy1B;AAFmD,aAAzC,EAGb3jC,KAAK,CAAC0K,OAHO,CAAhB;;AAKAgyB,YAAAA,KAAK,CAACtjB,SAAN,CAAgBqoB,IAAhB,CAAqB/D,KAAK,CAAChzB,OAAN,CAAcq4B,KAAnC,EAA0C;AACxCniB,cAAAA,IAAI,EAAEA,IADkC;AAExCojB,cAAAA,SAAS,EAAEtG,KAAK,CAAChzB,OAAN,CAAcw0B,QAFe;AAGxC+E,cAAAA,aAAa,EAAEvG,KAAK,CAAChzB,OAAN,CAAcy0B;AAHW,aAA1C,EAIG7e,IAJH,CAIQ,UAAUmf,GAAV,EAAe;AACrB,kBAAIA,GAAG,CAAClpB,IAAJ,IAAYkpB,GAAG,CAAClpB,IAAJ,CAAS2tB,YAAzB,EAAuC;AACrCxG,gBAAAA,KAAK,CAACgE,WAAN,GAAoBjC,GAAG,CAAClpB,IAAJ,CAAS2tB,YAA7B;;AAEAxG,gBAAAA,KAAK,CAACyG,OAAN,GAAgB7jB,IAAhB,CAAqB,YAAY;AAC/B,yBAAOod,KAAK,CAAC34B,QAAN,CAAe;AAAEs5B,oBAAAA,SAAS,EAAE;AAAb,mBAAf,CAAP;AACD,iBAFD,WAES,UAAUvjB,GAAV,EAAe;AACtB+L,kBAAAA,OAAO,CAACud,GAAR,CAAY,MAAZ,EAAoBtpB,GAApB;;AACA4iB,kBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbs5B,oBAAAA,SAAS,EAAE,KADE;AAEbS,oBAAAA,YAAY,EAAE,IAFD;AAGbC,oBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,mBAAf;AAKD,iBATD;AAUD,eAbD,MAaO;AACL;AACA+L,gBAAAA,OAAO,CAACud,GAAR,CAAY,eAAZ,EAA6B3E,GAAG,CAAClpB,IAAjC;;AACAmnB,gBAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb+5B,kBAAAA,YAAY,EAAE,IADD;AAEbC,kBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B,IAAItY,KAAJ,CAAU,iBAAV,CAA1B;AAFG,iBAAf;AAID;AACF,aA1BD,WA0BS,UAAUma,GAAV,EAAe;AACtB+L,cAAAA,OAAO,CAACud,GAAR,CAAY,OAAZ,EAAqBtpB,GAArB;;AACA4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb+5B,gBAAAA,YAAY,EAAE,IADD;AAEbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAFG,eAAf;AAID,aAhCD;AAiCD,WA3CD,MA2CO;AACL4iB,YAAAA,KAAK,CAACyG,OAAN,GAAgB7jB,IAAhB,CAAqB,YAAY;AAC/B,qBAAOod,KAAK,CAAC34B,QAAN,CAAe;AAAEs5B,gBAAAA,SAAS,EAAE;AAAb,eAAf,CAAP;AACD,aAFD,WAES,UAAUvjB,GAAV,EAAe;AACtB+L,cAAAA,OAAO,CAACud,GAAR,CAAY,MAAZ,EAAoBtpB,GAApB;;AACA4iB,cAAAA,KAAK,CAAC34B,QAAN,CAAe;AACbs5B,gBAAAA,SAAS,EAAE,KADE;AAEbS,gBAAAA,YAAY,EAAE,IAFD;AAGbC,gBAAAA,QAAQ,EAAE,CAAC,GAAGrC,KAAK,CAACzjB,cAAV,EAA0B6B,GAA1B;AAHG,eAAf;AAKD,aATD;AAUD;;AAED4iB,UAAAA,KAAK,CAAC2G,IAAN,GAAa,CAAC,GAAG5H,MAAM,WAAV,EAAoBiB,KAAK,CAAChzB,OAAN,CAAck4B,QAAlC,CAAb;AACA,iBAAOlF,KAAP;AACD;;AAED,SAAC,GAAGjb,aAAa,WAAjB,EAA2B+a,eAA3B,EAA4C,CAAC;AAC3C5kC,UAAAA,GAAG,EAAE,oBADsC;AAE3CuC,UAAAA,KAAK,EAAE,SAAS4B,kBAAT,GAA8B;AACnC,iBAAKsjC,SAAL,IAAkB,CAAC,GAAG9D,UAAU,WAAd,EAAwB,KAAK8D,SAA7B,CAAlB;AACD;AAJ0C,SAAD,EAKzC;AACDznC,UAAAA,GAAG,EAAE,SADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASgpC,OAAT,GAAmB;AACxB,gBAAIG,MAAM,GAAG,IAAb;;AAEA,mBAAO,KAAKC,WAAL,GAAmBjkB,IAAnB,CAAwB,YAAY;AACzC,qBAAOgkB,MAAM,CAACjF,QAAP,EAAP;AACD,aAFM,EAEJ/e,IAFI,CAEC,UAAUsd,KAAV,EAAiB;AACvB,qBAAO0G,MAAM,CAACjD,WAAP,CAAmBzD,KAAnB,CAAP;AACD,aAJM,CAAP;AAKD;AAVA,SALyC,EAgBzC;AACDhlC,UAAAA,GAAG,EAAE,aADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASopC,WAAT,GAAuB;AAC5B,gBAAIC,MAAM,GAAG,IAAb;;AAEA,mBAAO9H,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsB,OAAtB,EAA+B;AACpC0lB,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,WAAW,KAAKkjB;AADxB;AAD2B,aAA/B,EAIJphB,IAJI,CAIC,UAAUmf,GAAV,EAAe;AACrB+E,cAAAA,MAAM,CAACz/B,QAAP,CAAgB;AAAE44B,gBAAAA,IAAI,EAAE8B,GAAG,CAAClpB;AAAZ,eAAhB;AACD,aANM,WAME,UAAUuE,GAAV,EAAe;AACtB0pB,cAAAA,MAAM,CAACzC,MAAP;AACD,aARM,CAAP;AASD;AAdA,SAhByC,EA+BzC;AACDnpC,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASspC,YAAT,GAAwB;AAC7B,gBAAIC,MAAM,GAAG,IAAb;;AAEA,gBAAIC,QAAQ,GAAG,KAAKj6B,OAApB;AAAA,gBACIk6B,KAAK,GAAGD,QAAQ,CAACC,KADrB;AAAA,gBAEIC,IAAI,GAAGF,QAAQ,CAACE,IAFpB;AAAA,gBAGI5c,MAAM,GAAG0c,QAAQ,CAAC1c,MAHtB;AAAA,gBAIIiX,QAAQ,GAAGyF,QAAQ,CAACzF,QAJxB;AAAA,gBAKIC,YAAY,GAAGwF,QAAQ,CAACxF,YAL5B;AAOA,gBAAI2F,MAAM,GAAG,YAAYF,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,UAAjC,GAA8C5c,MAA3D;AAEA,mBAAO,IAAI0T,SAAS,WAAb,CAAsB,UAAU7pB,OAAV,EAAmBC,MAAnB,EAA2B;AACtD2qB,cAAAA,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsBgwC,MAAtB,EAA8B;AAC5BzmB,gBAAAA,IAAI,EAAE;AACJC,kBAAAA,QAAQ,EAAE4gB,QADN;AAEJ3gB,kBAAAA,QAAQ,EAAE4gB;AAFN,iBADsB;AAK5BxjB,gBAAAA,MAAM,EAAE;AACN8H,kBAAAA,CAAC,EAAEjZ,IAAI,CAACgM,GAAL;AADG;AALoB,eAA9B,EAQG8J,IARH,CAQQ,UAAUmf,GAAV,EAAe;AACrB,oBAAI7B,KAAK,GAAG,IAAZ;;AAEA,oBAAI6B,GAAG,IAAIA,GAAG,CAAClpB,IAAX,IAAmBkpB,GAAG,CAAClpB,IAAJ,CAAS0R,MAAT,KAAoBA,MAA3C,EAAmD;AACjD2V,kBAAAA,KAAK,GAAG6B,GAAG,CAAClpB,IAAZ;;AAEAmuB,kBAAAA,MAAM,CAAC3/B,QAAP,CAAgB;AAAE64B,oBAAAA,KAAK,EAAEA,KAAT;AAAgBQ,oBAAAA,QAAQ,EAAE;AAA1B,mBAAhB;AACD;;AACDtsB,gBAAAA,OAAO,CAAC8rB,KAAD,CAAP;AACD,eAjBD,WAiBS,UAAU9iB,GAAV,EAAe;AACtB;AACA,oBAAIA,GAAG,CAACE,QAAJ,CAAaoC,MAAb,KAAwB,GAA5B,EAAiCtL,OAAO,CAAC,IAAD,CAAP;AACjCC,gBAAAA,MAAM,CAAC+I,GAAD,CAAN;AACD,eArBD;AAsBD,aAvBM,CAAP;AAwBD;AAtCA,SA/ByC,EAsEzC;AACDliB,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS4pC,gBAAT,GAA4B;AACjC,gBAAIC,MAAM,GAAG,IAAb;;AAEA,gBAAIC,SAAS,GAAG,KAAKv6B,OAArB;AAAA,gBACIk6B,KAAK,GAAGK,SAAS,CAACL,KADtB;AAAA,gBAEIC,IAAI,GAAGI,SAAS,CAACJ,IAFrB;AAAA,gBAGI32B,EAAE,GAAG+2B,SAAS,CAAC/2B,EAHnB;AAAA,gBAIIy0B,MAAM,GAAGsC,SAAS,CAACtC,MAJvB;AAAA,gBAKIzD,QAAQ,GAAG+F,SAAS,CAAC/F,QALzB;AAAA,gBAMIC,YAAY,GAAG8F,SAAS,CAAC9F,YAN7B;AASA,mBAAOzC,KAAK,CAACvjB,WAAN,CAAkBrkB,GAAlB,CAAsB,YAAY8vC,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,SAAvD,EAAkE;AACvExmB,cAAAA,IAAI,EAAE;AACJC,gBAAAA,QAAQ,EAAE4gB,QADN;AAEJ3gB,gBAAAA,QAAQ,EAAE4gB;AAFN,eADiE;AAKvExjB,cAAAA,MAAM,EAAE;AACNgnB,gBAAAA,MAAM,EAAEA,MAAM,CAAC9hC,MAAP,CAAcqN,EAAd,EAAkBqM,IAAlB,CAAuB,GAAvB,CADF;AAENkJ,gBAAAA,CAAC,EAAEjZ,IAAI,CAACgM,GAAL;AAFG;AAL+D,aAAlE,EASJ8J,IATI,CASC,UAAUmf,GAAV,EAAe;AACrB,kBAAIqD,mBAAmB,GAAGkC,MAAM,CAACt6B,OAAP,CAAeo4B,mBAAzC;AAEA,kBAAI1E,QAAQ,GAAG,KAAf;AACA,kBAAIR,KAAK,GAAG,IAAZ;;AACA,kBAAI,EAAE6B,GAAG,IAAIA,GAAG,CAAClpB,IAAX,IAAmBkpB,GAAG,CAAClpB,IAAJ,CAAS5d,MAA9B,CAAJ,EAA2C;AACzC,oBAAI,CAACmqC,mBAAD,IAAwBkC,MAAM,CAACE,OAAnC,EAA4C;AAC1C,yBAAOF,MAAM,CAAC5D,WAAP,EAAP;AACD;;AAEDhD,gBAAAA,QAAQ,GAAG,IAAX;AACD,eAND,MAMO;AACLR,gBAAAA,KAAK,GAAG6B,GAAG,CAAClpB,IAAJ,CAAS,CAAT,CAAR;AACD;;AACDyuB,cAAAA,MAAM,CAACjgC,QAAP,CAAgB;AAAE64B,gBAAAA,KAAK,EAAEA,KAAT;AAAgBQ,gBAAAA,QAAQ,EAAEA;AAA1B,eAAhB;;AACA,qBAAOR,KAAP;AACD,aAzBM,CAAP;AA0BD;AAxCA,SAtEyC,EA+GzC;AACDhlC,UAAAA,GAAG,EAAE,UADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASkkC,QAAT,GAAoB;AACzB,gBAAI8F,MAAM,GAAG,IAAb;;AAEA,gBAAIld,MAAM,GAAG,KAAKvd,OAAL,CAAaud,MAA1B;AACA,gBAAI2V,KAAK,GAAG,KAAKj5B,KAAL,CAAWi5B,KAAvB;;AAEA,gBAAIA,KAAJ,EAAW;AACT,mBAAK74B,QAAL,CAAc;AAAEq5B,gBAAAA,QAAQ,EAAE;AAAZ,eAAd;AACA,qBAAOzC,SAAS,WAAT,CAAkB7pB,OAAlB,CAA0B8rB,KAA1B,CAAP;AACD;;AAED,gBAAI,OAAO3V,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,GAAG,CAA3C,EAA8C;AAC5C,qBAAO,KAAKwc,YAAL,GAAoBnkB,IAApB,CAAyB,UAAU8kB,QAAV,EAAoB;AAClD,oBAAI,CAACA,QAAL,EAAe,OAAOD,MAAM,CAACJ,gBAAP,EAAP;AACf,uBAAOK,QAAP;AACD,eAHM,CAAP;AAID;;AACD,mBAAO,KAAKL,gBAAL,EAAP;AACD;AApBA,SA/GyC,EAoIzC;AACDnsC,UAAAA,GAAG,EAAE,aADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASimC,WAAT,GAAuB;AAC5B,gBAAIiE,MAAM,GAAG,IAAb;;AAEA,gBAAIC,SAAS,GAAG,KAAK56B,OAArB;AAAA,gBACIk6B,KAAK,GAAGU,SAAS,CAACV,KADtB;AAAA,gBAEIC,IAAI,GAAGS,SAAS,CAACT,IAFrB;AAAA,gBAGIv9B,KAAK,GAAGg+B,SAAS,CAACh+B,KAHtB;AAAA,gBAII24B,IAAI,GAAGqF,SAAS,CAACrF,IAJrB;AAAA,gBAKI/xB,EAAE,GAAGo3B,SAAS,CAACp3B,EALnB;AAAA,gBAMIy0B,MAAM,GAAG2C,SAAS,CAAC3C,MANvB;AAAA,gBAOIjnB,GAAG,GAAG4pB,SAAS,CAAC5pB,GAPpB;AASA,mBAAOghB,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,YAAYmD,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,SAAxD,EAAmE;AACxEv9B,cAAAA,KAAK,EAAEA,KADiE;AAExEq7B,cAAAA,MAAM,EAAEA,MAAM,CAAC9hC,MAAP,CAAcqN,EAAd,CAFgE;AAGxE+xB,cAAAA,IAAI,EAAEA,IAAI,IAAIvkB,GAAG,GAAG,QAAN,IAAkB,CAAC,GAAGghB,KAAK,CAACxjB,cAAV,EAA0B,aAA1B,KAA4C,CAAC,GAAGwjB,KAAK,CAACxjB,cAAV,EAA0B,aAA1B,EAAyC,gBAAzC,CAA5C,IAA0G,EAA5H;AAH0D,aAAnE,EAIJ;AACDsB,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,WAAW,KAAKkjB;AADxB;AADR,aAJI,EAQJphB,IARI,CAQC,UAAUmf,GAAV,EAAe;AACrB4F,cAAAA,MAAM,CAACtgC,QAAP,CAAgB;AAAE64B,gBAAAA,KAAK,EAAE6B,GAAG,CAAClpB;AAAb,eAAhB;;AACA,qBAAOkpB,GAAG,CAAClpB,IAAX;AACD,aAXM,CAAP;AAYD,WA1BA,CA2BD;;AA3BC,SApIyC,EAiKzC;AACD3d,UAAAA,GAAG,EAAE,aADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASkmC,WAAT,CAAqBzD,KAArB,EAA4B;AACjC,gBAAI,CAACA,KAAL,EAAY,OADqB,CAEjC;;AACA,gBAAI,KAAK8D,WAAT,EAAsB,OAAOnE,aAAa,WAAb,CAAsBppC,IAAtB,CAA2B,IAA3B,EAAiCypC,KAAjC,CAAP;AACtB,mBAAO,KAAKoB,aAAL,CAAmBpB,KAAnB,CAAP;AACD;AAPA,SAjKyC,EAyKzC;AACDhlC,UAAAA,GAAG,EAAE,eADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASomC,aAAT,GAAyB;AAC9B,gBAAIgE,MAAM,GAAG,IAAb;;AAEA,gBAAItO,MAAM,GAAG,KAAKtyB,KAAlB;AAAA,gBACIo5B,OAAO,GAAG9G,MAAM,CAAC8G,OADrB;AAAA,gBAEID,aAAa,GAAG7G,MAAM,CAAC6G,aAF3B;AAAA,gBAGID,QAAQ,GAAG5G,MAAM,CAAC4G,QAHtB;AAMA,mBAAO,KAAKwB,QAAL,GAAgB/e,IAAhB,CAAqB,UAAUsd,KAAV,EAAiB;AAC3C,qBAAOlB,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB7D,KAAK,CAAC0B,YAA7B,EAA2C;AAChDW,gBAAAA,IAAI,EAAElC;AAD0C,eAA3C,EAEJ;AACDvjB,gBAAAA,OAAO,EAAE;AACP+kB,kBAAAA,MAAM,EAAE,qCADD;AAEP/gB,kBAAAA,aAAa,EAAE,WAAW+mB,MAAM,CAAC7D;AAF1B;AADR,eAFI,CAAP;AAQD,aATM,EASJphB,IATI,CASC,UAAUmf,GAAV,EAAe;AACrB8F,cAAAA,MAAM,CAACxgC,QAAP,CAAgB;AACdg5B,gBAAAA,OAAO,EAAE,EADK;AAEdF,gBAAAA,QAAQ,EAAEA,QAAQ,CAACh9B,MAAT,CAAgB4+B,GAAG,CAAClpB,IAApB,CAFI;AAGdunB,gBAAAA,aAAa,EAAEA,aAAa,CAACj9B,MAAd,CAAqB4+B,GAAG,CAAClpB,IAAzB;AAHD,eAAhB;AAKD,aAfM,CAAP;AAgBD;AA3BA,SAzKyC,EAqMzC;AACD3d,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS4mC,MAAT,GAAkB;AACvB,iBAAKh9B,QAAL,CAAc;AAAE44B,cAAAA,IAAI,EAAE;AAAR,aAAd;AACA9nC,YAAAA,MAAM,CAACirC,YAAP,CAAoB4C,UAApB,CAA+BrG,MAAM,CAACmI,eAAtC;AACD;AALA,SArMyC,EA2MzC;AACD5sC,UAAAA,GAAG,EAAE,MADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASsqC,IAAT,CAAc1H,OAAd,EAAuB;AAC5B,gBAAI2H,MAAM,GAAG,IAAb;;AAEA,gBAAIC,SAAS,GAAG,KAAKj7B,OAArB;AAAA,gBACIk6B,KAAK,GAAGe,SAAS,CAACf,KADtB;AAAA,gBAEIC,IAAI,GAAGc,SAAS,CAACd,IAFrB;AAGA,gBAAIlH,IAAI,GAAG,KAAKh5B,KAAL,CAAWg5B,IAAtB;AACA,gBAAIE,QAAQ,GAAG,KAAKl5B,KAAL,CAAWk5B,QAA1B;;AAGAnB,YAAAA,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,YAAYmD,KAAZ,GAAoB,GAApB,GAA0BC,IAA1B,GAAiC,mBAAjC,GAAuD9G,OAAO,CAAC7vB,EAA/D,GAAoE,YAA3F,EAAyG;AACvGwM,cAAAA,OAAO,EAAE;AAD8F,aAAzG,EAEG;AACDF,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,WAAW,KAAKkjB,WADxB;AAEPnC,gBAAAA,MAAM,EAAE;AAFD;AADR,aAFH,EAOGjf,IAPH,CAOQ,UAAUmf,GAAV,EAAe;AACrB5B,cAAAA,QAAQ,GAAGA,QAAQ,CAACt9B,GAAT,CAAa,UAAUlM,CAAV,EAAa;AACnC,oBAAIA,CAAC,CAAC6Z,EAAF,KAAS6vB,OAAO,CAAC7vB,EAArB,EAAyB;AACvB,sBAAI7Z,CAAC,CAACuxC,SAAN,EAAiB;AACf,wBAAI,CAAC,CAACvxC,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBC,SAAlB,CAA4B,UAAU/wC,CAAV,EAAa;AAC7C,6BAAOA,CAAC,CAAC4oC,IAAF,CAAOwC,KAAP,KAAiBxC,IAAI,CAACwC,KAA7B;AACD,qBAFK,CAAN,EAEI;AACF9rC,sBAAAA,CAAC,CAACuxC,SAAF,CAAYG,UAAZ,IAA0B,CAA1B;AACD;AACF,mBAND,MAMO;AACL1xC,oBAAAA,CAAC,CAACuxC,SAAF,GAAc;AAAEC,sBAAAA,KAAK,EAAE;AAAT,qBAAd;AACAxxC,oBAAAA,CAAC,CAACuxC,SAAF,CAAYG,UAAZ,GAAyB,CAAzB;AACD;;AAED1xC,kBAAAA,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBzjC,IAAlB,CAAuBq9B,GAAG,CAAClpB,IAA3B;AACAliB,kBAAAA,CAAC,CAACuxC,SAAF,CAAYI,gBAAZ,GAA+B,IAA/B;AACD;;AACD,uBAAO3xC,CAAP;AACD,eAjBU,CAAX;;AAmBAqxC,cAAAA,MAAM,CAAC3gC,QAAP,CAAgB;AACd84B,gBAAAA,QAAQ,EAAEA;AADI,eAAhB;AAGD,aA9BD;AA+BD;AA3CA,SA3MyC,EAuPzC;AACDjlC,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS8qC,MAAT,CAAgBlI,OAAhB,EAAyB;AAC9B,gBAAImI,OAAO,GAAG,IAAd;;AAEA,gBAAIvI,IAAI,GAAG,KAAKh5B,KAAL,CAAWg5B,IAAtB;AACA,gBAAIE,QAAQ,GAAG,KAAKl5B,KAAL,CAAWk5B,QAA1B,CAJ8B,CAM9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAIsI,KAAK,GAAG,SAASA,KAAT,CAAej4B,EAAf,EAAmB;AAC7B,qBAAO;AACLk4B,gBAAAA,aAAa,EAAE,gBADV;AAELnsB,gBAAAA,KAAK,EAAE,0GAA0G/L,EAA1G,GAA+G;AAFjH,eAAP;AAID,aALD;;AAOAwuB,YAAAA,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,UAAvB,EAAmC0E,KAAK,CAACpI,OAAO,CAACsI,GAAT,CAAxC,EAAuD;AACrD7rB,cAAAA,OAAO,EAAE;AACPgE,gBAAAA,aAAa,EAAE,YAAY,KAAKkjB;AADzB;AAD4C,aAAvD,EAIGphB,IAJH,CAIQ,UAAUmf,GAAV,EAAe;AACrB,kBAAIA,GAAG,CAAClpB,IAAR,EAAc;AACZsnB,gBAAAA,QAAQ,GAAGA,QAAQ,CAACt9B,GAAT,CAAa,UAAUlM,CAAV,EAAa;AACnC,sBAAIA,CAAC,CAAC6Z,EAAF,KAAS6vB,OAAO,CAAC7vB,EAArB,EAAyB;AACvB,wBAAI/I,KAAK,GAAG9Q,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBC,SAAlB,CAA4B,UAAU/wC,CAAV,EAAa;AACnD,6BAAOA,CAAC,CAAC4oC,IAAF,CAAOwC,KAAP,KAAiBxC,IAAI,CAACwC,KAA7B;AACD,qBAFW,CAAZ;;AAGA,wBAAI,CAACh7B,KAAL,EAAY;AACV9Q,sBAAAA,CAAC,CAACuxC,SAAF,CAAYG,UAAZ,IAA0B,CAA1B;AACA1xC,sBAAAA,CAAC,CAACuxC,SAAF,CAAYC,KAAZ,CAAkBzT,MAAlB,CAAyBjtB,KAAzB,EAAgC,CAAhC;AACD;;AACD9Q,oBAAAA,CAAC,CAACuxC,SAAF,CAAYI,gBAAZ,GAA+B,KAA/B;AACD;;AACD,yBAAO3xC,CAAP;AACD,iBAZU,CAAX;;AAcA6xC,gBAAAA,OAAO,CAACnhC,QAAR,CAAiB;AACf84B,kBAAAA,QAAQ,EAAEA;AADK,iBAAjB;AAGD;AACF,aAxBD;AAyBD;AAtDA,SAvPyC,EA8SzC;AACDjlC,UAAAA,GAAG,EAAE,SADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASmrC,OAAT,GAAmB;AACxB,mBAAOvkB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFK,EAGL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,GAA9B,EAAmC;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAAnC,CAHK,EAIL+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE,KAAKqhC,IAAL,CAAU5gB,CAAV,CAAY,MAAZ,CAHF,CAJK,CAAP;AAUD;AAbA,SA9SyC,EA4TzC;AACD7qB,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASorC,MAAT,GAAkB;AACvB,gBAAIC,OAAO,GAAG,KAAK7hC,KAAnB;AAAA,gBACIg5B,IAAI,GAAG6I,OAAO,CAAC7I,IADnB;AAAA,gBAEIe,eAAe,GAAG8H,OAAO,CAAC9H,eAF9B;AAGA,gBAAI+H,SAAS,GAAG,KAAK/7B,OAArB;AAAA,gBACIk6B,KAAK,GAAG6B,SAAS,CAAC7B,KADtB;AAAA,gBAEIC,IAAI,GAAG4B,SAAS,CAAC5B,IAFrB;AAAA,gBAGI6B,KAAK,GAAGD,SAAS,CAACC,KAHtB;AAKA,mBAAO3kB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,YAAb;AAA2BpK,cAAAA,GAAG,EAAE;AAAhC,aAFK,EAGLmpB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,GAA9B,EAAmC;AAAE0mB,cAAAA,uBAAuB,EAAE;AAC1DC,gBAAAA,MAAM,EAAE,KAAKgiB,IAAL,CAAU5gB,CAAV,CAAY,kBAAZ,EAAgC;AACtCkjB,kBAAAA,IAAI,EAAE,iCAAiC/B,KAAjC,GAAyC,GAAzC,GAA+CC,IAA/C,GAAsD;AADtB,iBAAhC;AADkD;AAA3B,aAAnC,CAHK,EAQL9iB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE,IAFF,EAGE,KAAK2oC,IAAL,CAAU5gB,CAAV,CAAY,gBAAZ,EAA8B;AAAEka,cAAAA,IAAI,EAAE,GAAG98B,MAAH,CAAU6lC,KAAV,EAAiBnmC,GAAjB,CAAqB,UAAUqjB,CAAV,EAAa;AACpE,uBAAO,MAAMA,CAAb;AACD,eAFmC,EAEjCrJ,IAFiC,CAE5B,GAF4B;AAAR,aAA9B,CAHF,CARK,EAeL,KAAK2qB,OAAL,GAAenjB,OAAO,WAAP,CAAgBrmB,aAAhB,CACb,GADa,EAEb,IAFa,EAGbqmB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE8J,cAAAA,OAAO,EAAE,KAAKzF,iBAAhB;AAAmC5C,cAAAA,SAAS,EAAEG,eAA9C;AAA+Dvc,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,YAAZ;AAArE,aAAhD,CAHa,CAAf,GAII,IAnBC,EAoBL,CAACka,IAAD,IAAS5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE95B,cAAAA,SAAS,EAAE,cAAb;AAA6B4jC,cAAAA,OAAO,EAAE,KAAK/F,WAA3C;AAAwD1e,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,mBAAZ;AAA9D,aAAhD,CApBJ,CAAP;AAsBD;AAjCA,SA5TyC,EA8VzC;AACD7qB,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0rC,kBAAT,CAA4BpuC,GAA5B,EAAiC;AACtCA,YAAAA,GAAG,CAACgC,MAAJ,CAAW+V,GAAX,GAAiB,kEAAjB;AACD;AAJA,SA9VyC,EAmWzC;AACD5X,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS2rC,MAAT,GAAkB;AACvB,gBAAIC,OAAO,GAAG,IAAd;;AAEA,gBAAIC,OAAO,GAAG,KAAKriC,KAAnB;AAAA,gBACIg5B,IAAI,GAAGqJ,OAAO,CAACrJ,IADnB;AAAA,gBAEII,OAAO,GAAGiJ,OAAO,CAACjJ,OAFtB;AAAA,gBAGIO,UAAU,GAAG0I,OAAO,CAAC1I,UAHzB;AAAA,gBAIIH,WAAW,GAAG6I,OAAO,CAAC7I,WAJ1B;AAAA,gBAKIU,SAAS,GAAGmI,OAAO,CAACnI,SALxB;AAOA,mBAAO9c,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,WAAb;AAA0BpK,cAAAA,GAAG,EAAE;AAA/B,aAFK,EAGL+kC,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BkhC,QAAQ,WAAtC,EAAgD;AAAE55B,cAAAA,SAAS,EAAE,kBAAb;AAAiCwN,cAAAA,GAAG,EAAEmtB,IAAI,CAACsJ,UAA3C;AAAuDhlB,cAAAA,GAAG,EAAE0b,IAAI,CAACwC,KAAjE;AAAwEje,cAAAA,OAAO,EAAE,KAAK2kB,kBAAL,CAAwBtwC,IAAxB,CAA6B,IAA7B;AAAjF,aAAhD,CAAH,GAA4KwrB,OAAO,WAAP,CAAgBrmB,aAAhB,CAC9K,GAD8K,EAE9K;AAAEsH,cAAAA,SAAS,EAAE,kBAAb;AAAiCkkC,cAAAA,WAAW,EAAE,KAAKrG;AAAnD,aAF8K,EAG9K9e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,eAAb;AAA8BzO,cAAAA,IAAI,EAAE;AAApC,aAA7C,CAH8K,CAH3K,EAQLwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,UAA9B,EAA0C;AACxCmG,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAa4hB,CAAb,EAAgB;AACnBsjB,gBAAAA,OAAO,CAAC1G,SAAR,GAAoB5c,CAApB;AACD,eAHuC;AAIxCzgB,cAAAA,SAAS,EAAE,yBAAyB67B,SAAS,GAAG,MAAH,GAAY,EAA9C,CAJ6B;AAKxC1jC,cAAAA,KAAK,EAAE4iC,OALiC;AAMxCoJ,cAAAA,QAAQ,EAAE,KAAKtF,mBANyB;AAOxCuF,cAAAA,OAAO,EAAE,KAAKnF,kBAP0B;AAQxCoF,cAAAA,MAAM,EAAE,KAAKlF,iBAR2B;AASxCmF,cAAAA,SAAS,EAAE,KAAKhF,oBATwB;AAUxCiF,cAAAA,WAAW,EAAE,KAAKlD,IAAL,CAAU5gB,CAAV,CAAY,iBAAZ;AAV2B,aAA1C,CAHF,EAeE1B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AACnCsH,cAAAA,SAAS,EAAE,sCAAsC67B,SAAS,GAAG,EAAH,GAAQ,MAAvD,CADwB;AAEnCzc,cAAAA,uBAAuB,EAAE;AAAEC,gBAAAA,MAAM,EAAE8b;AAAV;AAFU,aAArC,CAfF,EAmBEpc,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE,wBAAb;AAAuCi+B,cAAAA,IAAI,EAAE,wDAA7C;AAAuGxmC,cAAAA,MAAM,EAAE;AAA/G,aAFF,EAGEsnB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,YAAb;AAA2BzO,cAAAA,IAAI,EAAE,KAAjC;AAAwC4tB,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,kBAAZ;AAA9C,aAA7C,CAHF,CAHF,EAQEka,IAAI,IAAI5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AACtD8C,cAAAA,MAAM,EAAE,KAAKA,MADyC;AAEtD58B,cAAAA,SAAS,EAAE,eAF2C;AAGtDkkC,cAAAA,WAAW,EAAE,KAAK5F,mBAHoC;AAItDnf,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,SAAZ,CAJgD;AAKtD8a,cAAAA,SAAS,EAAED;AAL2C,aAAhD,CARV,EAeEvc,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAC9C95B,cAAAA,SAAS,EAAE,gBADmC;AAE9CkkC,cAAAA,WAAW,EAAE,KAAK1F,oBAF4B;AAG9Crf,cAAAA,IAAI,EAAE0c,SAAS,GAAG,KAAKwF,IAAL,CAAU5gB,CAAV,CAAY,MAAZ,CAAH,GAAyB,KAAK4gB,IAAL,CAAU5gB,CAAV,CAAY,SAAZ,CAHM,CAI9C;;AAJ8C,aAAhD,CAfF,EAqBE,CAACka,IAAD,IAAS5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE95B,cAAAA,SAAS,EAAE,cAAb;AAA6BkkC,cAAAA,WAAW,EAAE,KAAKrG,WAA/C;AAA4D1e,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,mBAAZ;AAAlE,aAAhD,CArBX,CAnBF,CARK,CAAP;AAoDD;AAhEA,SAnWyC,EAoazC;AACD7qB,UAAAA,GAAG,EAAE,UADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0iC,QAAT,GAAoB;AACzB,gBAAI2J,OAAO,GAAG,IAAd;;AAEA,gBAAIC,OAAO,GAAG,KAAK9iC,KAAnB;AAAA,gBACIg5B,IAAI,GAAG8J,OAAO,CAAC9J,IADnB;AAAA,gBAEIE,QAAQ,GAAG4J,OAAO,CAAC5J,QAFvB;AAAA,gBAGIY,UAAU,GAAGgJ,OAAO,CAAChJ,UAHzB;AAAA,gBAIID,UAAU,GAAGiJ,OAAO,CAACjJ,UAJzB;AAAA,gBAKIP,cAAc,GAAGwJ,OAAO,CAACxJ,cAL7B;AAMA,gBAAIyJ,SAAS,GAAG,KAAKh9B,OAArB;AAAA,gBACIk4B,QAAQ,GAAG8E,SAAS,CAAC9E,QADzB;AAAA,gBAEII,eAAe,GAAG0E,SAAS,CAAC1E,eAFhC;AAAA,gBAGI0D,KAAK,GAAGgB,SAAS,CAAChB,KAHtB;AAKA,gBAAIiB,aAAa,GAAG9J,QAAQ,CAACh9B,MAAT,CAAgB,EAAhB,CAApB;;AACA,gBAAIo9B,cAAc,KAAK,MAAnB,IAA6B,KAAKyD,WAAtC,EAAmD;AACjDiG,cAAAA,aAAa,CAACC,OAAd;AACD;;AACD,mBAAO7lB,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,aAAb;AAA4BpK,cAAAA,GAAG,EAAE;AAAjC,aAFK,EAGLmpB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE2gC,eAAe,WADjB,EAEE2G,eAFF,EAGE2E,aAAa,CAACpnC,GAAd,CAAkB,UAAUlM,CAAV,EAAa;AAC7B,qBAAO0tB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BwhC,SAAS,WAAvC,EAAiD;AACtDa,gBAAAA,OAAO,EAAE1pC,CAD6C;AAEtDuE,gBAAAA,GAAG,EAAEvE,CAAC,CAAC6Z,EAF+C;AAGtDyvB,gBAAAA,IAAI,EAAEA,IAHgD;AAItDiF,gBAAAA,QAAQ,EAAEA,QAJ4C;AAKtDiF,gBAAAA,aAAa,EAAEL,OAAO,CAACnD,IAAR,CAAa5gB,CAAb,CAAe,WAAf,CALuC;AAMtDijB,gBAAAA,KAAK,EAAEA,KAN+C;AAOtDoB,gBAAAA,aAAa,EAAEN,OAAO,CAAC1H,KAAR,CAAczrC,CAAd,CAPuC;AAQtD0zC,gBAAAA,YAAY,EAAE1zC,CAAC,CAACuxC,SAAF,IAAevxC,CAAC,CAACuxC,SAAF,CAAYI,gBAA3B,GAA8CwB,OAAO,CAACvB,MAAR,CAAe1vC,IAAf,CAAoBixC,OAApB,EAA6BnzC,CAA7B,CAA9C,GAAgFmzC,OAAO,CAAC/B,IAAR,CAAalvC,IAAb,CAAkBixC,OAAlB,EAA2BnzC,CAA3B;AARxC,eAAjD,CAAP;AAUD,aAXD,CAHF,CAHK,EAmBL,CAACszC,aAAa,CAAChvC,MAAf,IAAyBopB,OAAO,WAAP,CAAgBrmB,aAAhB,CACvB,GADuB,EAEvB;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFuB,EAGvB,KAAKqhC,IAAL,CAAU5gB,CAAV,CAAY,sBAAZ,CAHuB,CAnBpB,EAwBL,CAACgb,UAAD,IAAekJ,aAAa,CAAChvC,MAA7B,GAAsCopB,OAAO,WAAP,CAAgBrmB,aAAhB,CACpC,KADoC,EAEpC;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFoC,EAGpC+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BohC,QAAQ,WAAtC,EAAgD;AAAE95B,cAAAA,SAAS,EAAE,iBAAb;AAAgC4jC,cAAAA,OAAO,EAAE,KAAKjF,iBAA9C;AAAiEpD,cAAAA,SAAS,EAAEC,UAA5E;AAAwFrc,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,WAAZ;AAA9F,aAAhD,CAHoC,CAAtC,GAII,IA5BC,CAAP;AA8BD;AAlDA,SApayC,EAudzC;AACD7qB,UAAAA,GAAG,EAAE,MADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS6sC,IAAT,GAAgB;AACrB,gBAAIC,OAAO,GAAG,KAAKtjC,KAAnB;AAAA,gBACIg5B,IAAI,GAAGsK,OAAO,CAACtK,IADnB;AAAA,gBAEIC,KAAK,GAAGqK,OAAO,CAACrK,KAFpB;AAAA,gBAGIe,cAAc,GAAGsJ,OAAO,CAACtJ,cAH7B;AAAA,gBAIIV,cAAc,GAAGgK,OAAO,CAAChK,cAJ7B;AAAA,gBAKIH,aAAa,GAAGmK,OAAO,CAACnK,aAL5B;AAOA,gBAAIoK,GAAG,GAAG,CAACtK,KAAK,IAAIA,KAAK,CAACC,QAAhB,IAA4BC,aAAa,CAACnlC,MAApD;AACA,gBAAIwvC,MAAM,GAAGlK,cAAc,KAAK,MAAhC;AACA,gBAAIsF,mBAAmB,GAAG,KAAK74B,OAAL,CAAa64B,mBAAvC,CAVqB,CAYrB;;AAEA,gBAAIA,mBAAmB,IAAI,GAAG/sC,QAAH,CAAYrC,IAAZ,CAAiBovC,mBAAjB,MAA0C,mBAArE,EAA0F;AACxF,kBAAI;AACFA,gBAAAA,mBAAmB,CAAC2E,GAAD,CAAnB;AACD,eAFD,CAEE,OAAOptB,GAAP,EAAY;AACZ+L,gBAAAA,OAAO,CAACud,GAAR,CAAY,sDAAZ,EAAoEtpB,GAApE;AACD;AACF;;AAED,mBAAOiH,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,SAAb;AAAwBpK,cAAAA,GAAG,EAAE;AAA7B,aAFK,EAGLmpB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,MAA9B,EAAsC;AAAEsH,cAAAA,SAAS,EAAE,WAAb;AAA0Bof,cAAAA,uBAAuB,EAAE;AACrFC,gBAAAA,MAAM,EAAE,KAAKgiB,IAAL,CAAU5gB,CAAV,CAAY,QAAZ,EAAsB;AAC5B2kB,kBAAAA,MAAM,EAAE,8CAA8CxK,KAAK,IAAIA,KAAK,CAACyK,QAA7D,IAAyE,oBAAzE,GAAgGH,GAAhG,GAAsG,MADlF;AAE5BI,kBAAAA,WAAW,EAAEJ;AAFe,iBAAtB;AAD6E;AAAnD,aAAtC,CAHK,EASLvJ,cAAc,IAAI5c,OAAO,WAAP,CAAgBrmB,aAAhB,CAChB,KADgB,EAEhB;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFgB,EAGhB26B,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BshC,QAAQ,WAAtC,EAAgD;AAAEh6B,cAAAA,SAAS,EAAE,uBAAuB,CAACmlC,MAAD,GAAU,aAAV,GAA0B,EAAjD,CAAb;AAAmEvB,cAAAA,OAAO,EAAE,KAAKxE,UAAL,CAAgB,OAAhB,CAA5E;AAAsGjgB,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,UAAZ;AAA5G,aAAhD,CAAH,GAA4L,IAHhL,EAIhBka,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BshC,QAAQ,WAAtC,EAAgD;AAAEh6B,cAAAA,SAAS,EAAE,wBAAwBmlC,MAAM,GAAG,aAAH,GAAmB,EAAjD,CAAb;AAAmEvB,cAAAA,OAAO,EAAE,KAAKxE,UAAL,CAAgB,MAAhB,CAA5E;AAAqGjgB,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,WAAZ;AAA3G,aAAhD,CAAH,GAA4L,IAJhL,EAKhBka,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BshC,QAAQ,WAAtC,EAAgD;AAAEh6B,cAAAA,SAAS,EAAE,kBAAb;AAAiC4jC,cAAAA,OAAO,EAAE,KAAK9E,YAA/C;AAA6D3f,cAAAA,IAAI,EAAE,KAAKkiB,IAAL,CAAU5gB,CAAV,CAAY,QAAZ;AAAnE,aAAhD,CAAH,GAAiJ1B,OAAO,WAAP,CAAgBrmB,aAAhB,CACnJ,GADmJ,EAEnJ;AAAEsH,cAAAA,SAAS,EAAE,2BAAb;AAA0CkkC,cAAAA,WAAW,EAAE,KAAKrG;AAA5D,aAFmJ,EAGnJ,KAAKwD,IAAL,CAAU5gB,CAAV,CAAY,mBAAZ,CAHmJ,CALrI,EAUhB1B,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE,yBAAb;AAAwCi+B,cAAAA,IAAI,EAAE,kCAA9C;AAAkFxmC,cAAAA,MAAM,EAAE;AAA1F,aAFF,EAGE,QAHF,CAHF,EAQEsnB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGEq6B,MAAM,CAACkL,UAHT,CARF,CAVgB,CATb,EAkCLxmB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE26B,IAAI,GAAG5b,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE27B,cAAc,GAAG,0BAAH,GAAgC,eAA3D;AAA4EiI,cAAAA,OAAO,EAAE,KAAKrG;AAA1F,aAFK,EAGLxe,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE26B,IAAI,CAACwC,KAHP,CAHK,EAQLpe,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,gBAAb;AAA+BzO,cAAAA,IAAI,EAAE;AAArC,aAA7C,CARK,CAAH,GASAwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACF,KADE,EAEF;AAAEsH,cAAAA,SAAS,EAAE27B,cAAc,GAAG,0BAAH,GAAgC,eAA3D;AAA4EiI,cAAAA,OAAO,EAAE,KAAKrG;AAA1F,aAFE,EAGFxe,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE,KAAKqhC,IAAL,CAAU5gB,CAAV,CAAY,WAAZ,CAHF,CAHE,EAQF1B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,gBAAb;AAA+BzO,cAAAA,IAAI,EAAE;AAArC,aAA7C,CARE,CAZN,CAlCK,CAAP;AA0DD;AAlFA,SAvdyC,EA0iBzC;AACDqE,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,gBAAI6rC,OAAO,GAAG,KAAK7jC,KAAnB;AAAA,gBACI05B,SAAS,GAAGmK,OAAO,CAACnK,SADxB;AAAA,gBAEID,QAAQ,GAAGoK,OAAO,CAACpK,QAFvB;AAAA,gBAGIU,YAAY,GAAG0J,OAAO,CAAC1J,YAH3B;AAAA,gBAIIC,QAAQ,GAAGyJ,OAAO,CAACzJ,QAJvB;AAAA,gBAKIH,cAAc,GAAG4J,OAAO,CAAC5J,cAL7B;AAOA,mBAAO7c,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEsH,cAAAA,SAAS,EAAE,kBAAkB47B,cAAc,GAAG,mBAAH,GAAyB,EAAzD;AAAb,aAFK,EAGLP,SAAS,IAAI,KAAKiI,OAAL,EAHR,EAIL,CAACjI,SAAD,KAAeD,QAAQ,GAAG,EAAH,GAAQ,CAAC,KAAK4J,IAAL,EAAD,CAA/B,CAJK,EAKLlJ,YAAY,IAAI/c,OAAO,WAAP,CAAgBrmB,aAAhB,CACd,KADc,EAEd;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFc,EAGd+7B,QAHc,CALX,EAUL,CAACV,SAAD,KAAeD,QAAQ,GAAG,CAAC,KAAKmI,MAAL,EAAD,CAAH,GAAqB,CAAC,KAAKO,MAAL,EAAD,EAAgB,KAAKjJ,QAAL,EAAhB,CAA5C,CAVK,CAAP;AAYD;AAtBA,SA1iByC,EAikBzC;AACDjlC,UAAAA,GAAG,EAAE,aADJ;AAED9D,UAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,mBAAO,KAAK2zC,WAAL,IAAoB5yC,MAAM,CAACirC,YAAP,CAAoB2C,OAApB,CAA4BpG,MAAM,CAACmI,eAAnC,CAA3B;AACD,WAJA;AAKDznC,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAa8N,KAAb,EAAoB;AACvBhW,YAAAA,MAAM,CAACirC,YAAP,CAAoBC,OAApB,CAA4B1D,MAAM,CAACmI,eAAnC,EAAoD35B,KAApD;AACA,iBAAK68B,YAAL,GAAoB78B,KAApB;AACD;AARA,SAjkByC,EA0kBzC;AACDjT,UAAAA,GAAG,EAAE,WADJ;AAED9D,UAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,gBAAI6zC,cAAc,GAAG,0CAArB;AACA,gBAAIzJ,QAAQ,GAAG,KAAKx0B,OAAL,CAAaw0B,QAA5B;AAEA,gBAAIjlB,KAAK,GAAG;AACV+pB,cAAAA,SAAS,EAAE9E,QADD;AAEV0J,cAAAA,YAAY,EAAE/yC,MAAM,CAACikB,QAAP,CAAgBmnB,IAFpB;AAGV4H,cAAAA,KAAK,EAAE;AAHG,aAAZ;AAKA,mBAAOF,cAAc,GAAG,GAAjB,GAAuB,CAAC,GAAGjM,KAAK,CAACrjB,cAAV,EAA0BY,KAA1B,CAA9B;AACD;AAZA,SA1kByC,EAulBzC;AACDrhB,UAAAA,GAAG,EAAE,SADJ;AAED9D,UAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,gBAAI4xC,KAAK,GAAG,KAAKh8B,OAAL,CAAag8B,KAAzB;AACA,gBAAI/I,IAAI,GAAG,KAAKh5B,KAAL,CAAWg5B,IAAtB;AAGA,mBAAOA,IAAI,IAAI,CAAC,GAAG98B,MAAH,CAAU6lC,KAAV,EAAiBnmC,GAAjB,CAAqB,UAAUrH,CAAV,EAAa;AAChD,qBAAOA,CAAC,CAACkG,WAAF,EAAP;AACD,aAFe,EAEbwT,OAFa,CAEL+qB,IAAI,CAACwC,KAAL,CAAW/gC,WAAX,EAFK,CAAhB;AAGD;AAVA,SAvlByC,CAA5C;AAmmBA,eAAOo+B,eAAP;AACD,OA77BqB,CA67BpB1b,MAAM,CAACxc,SA77Ba,CAAtB;;AA+7BA5R,MAAAA,MAAM,CAACD,OAAP,GAAiB+pC,eAAjB;AAEA;AAAO,KA3vOG;AA4vOV;;AACA;AAAO,cAAS9pC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAjwOG;AAkwOV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBiqB,OAAxC;AAGA;AAAO,KA9wOG;AA+wOV;;AACA;AAAO,cAAStqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIgd,SAAS,GAAGhd,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIgV,OAAO,GAAGhV,mBAAmB,CAAC,EAAD,CAAjC,CAHsD,CAItD;AACA;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUq1C,SAAV,EAAqB;AACpC,eAAO,UAAUlgC,IAAV,EAAgBmgC,GAAhB,EAAqB;AAC1B,cAAIvzC,CAAC,GAAGoJ,MAAM,CAACmK,OAAO,CAACH,IAAD,CAAR,CAAd;AACA,cAAI3U,CAAC,GAAG8c,SAAS,CAACg4B,GAAD,CAAjB;AACA,cAAI70C,CAAC,GAAGsB,CAAC,CAACmD,MAAV;AACA,cAAIO,CAAJ,EAAOC,CAAP;AACA,cAAIlF,CAAC,GAAG,CAAJ,IAASA,CAAC,IAAIC,CAAlB,EAAqB,OAAO40C,SAAS,GAAG,EAAH,GAAQluC,SAAxB;AACrB1B,UAAAA,CAAC,GAAG1D,CAAC,CAACwzC,UAAF,CAAa/0C,CAAb,CAAJ;AACA,iBAAOiF,CAAC,GAAG,MAAJ,IAAcA,CAAC,GAAG,MAAlB,IAA4BjF,CAAC,GAAG,CAAJ,KAAUC,CAAtC,IAA2C,CAACiF,CAAC,GAAG3D,CAAC,CAACwzC,UAAF,CAAa/0C,CAAC,GAAG,CAAjB,CAAL,IAA4B,MAAvE,IAAiFkF,CAAC,GAAG,MAArF,GACH2vC,SAAS,GAAGtzC,CAAC,CAAC+c,MAAF,CAASte,CAAT,CAAH,GAAiBiF,CADvB,GAEH4vC,SAAS,GAAGtzC,CAAC,CAAC0W,KAAF,CAAQjY,CAAR,EAAWA,CAAC,GAAG,CAAf,CAAH,GAAuB,CAACiF,CAAC,GAAG,MAAJ,IAAc,EAAf,KAAsBC,CAAC,GAAG,MAA1B,IAAoC,OAFxE;AAGD,SAVD;AAWD,OAZD;AAeA;;AAAO,KAryOG;AAsyOV;;AACA;AAAO,cAASzF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAI8c,MAAM,GAAG9c,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIqb,UAAU,GAAGrb,mBAAmB,CAAC,EAAD,CAApC;;AACA,UAAIuf,cAAc,GAAGvf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAI8gB,iBAAiB,GAAG,EAAxB,CAPsD,CAStD;;AACA9gB,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB8gB,iBAAxB,EAA2C9gB,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAA3C,EAA+E,YAAY;AAAE,eAAO,IAAP;AAAc,OAA3G;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUsb,WAAV,EAAuBJ,IAAvB,EAA6BmF,IAA7B,EAAmC;AAClD/E,QAAAA,WAAW,CAAC1Z,SAAZ,GAAwBwb,MAAM,CAACgE,iBAAD,EAAoB;AAAEf,UAAAA,IAAI,EAAE1E,UAAU,CAAC,CAAD,EAAI0E,IAAJ;AAAlB,SAApB,CAA9B;AACAR,QAAAA,cAAc,CAACvE,WAAD,EAAcJ,IAAI,GAAG,WAArB,CAAd;AACD,OAHD;AAMA;;AAAO,KAzzOG;AA0zOV;;AACA;AAAO,cAASjb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI8R,EAAE,GAAG9R,mBAAmB,CAAC,CAAD,CAA5B;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIk1C,OAAO,GAAGl1C,mBAAmB,CAAC,EAAD,CAAjC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,GAAyBW,MAAM,CAACya,gBAAhC,GAAmD,SAASA,gBAAT,CAA0BpJ,CAA1B,EAA6B+K,UAA7B,EAAyC;AAC3GpL,QAAAA,QAAQ,CAACK,CAAD,CAAR;AACA,YAAIkI,IAAI,GAAGg7B,OAAO,CAACn4B,UAAD,CAAlB;AACA,YAAInY,MAAM,GAAGsV,IAAI,CAACtV,MAAlB;AACA,YAAI1E,CAAC,GAAG,CAAR;AACA,YAAIkG,CAAJ;;AACA,eAAOxB,MAAM,GAAG1E,CAAhB;AAAmB4R,UAAAA,EAAE,CAACC,CAAH,CAAKC,CAAL,EAAQ5L,CAAC,GAAG8T,IAAI,CAACha,CAAC,EAAF,CAAhB,EAAuB6c,UAAU,CAAC3W,CAAD,CAAjC;AAAnB;;AACA,eAAO4L,CAAP;AACD,OARD;AAWA;AAAO,KA50OG;AA60OV;;AACA;AAAO,cAASrS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIm1C,QAAQ,GAAGn1C,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIo1C,eAAe,GAAGp1C,mBAAmB,CAAC,GAAD,CAAzC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU21C,WAAV,EAAuB;AACtC,eAAO,UAAUC,KAAV,EAAiB1uB,EAAjB,EAAqB2uB,SAArB,EAAgC;AACrC,cAAIvjC,CAAC,GAAG+O,SAAS,CAACu0B,KAAD,CAAjB;AACA,cAAI1wC,MAAM,GAAGuwC,QAAQ,CAACnjC,CAAC,CAACpN,MAAH,CAArB;AACA,cAAIwM,KAAK,GAAGgkC,eAAe,CAACG,SAAD,EAAY3wC,MAAZ,CAA3B;AACA,cAAIwC,KAAJ,CAJqC,CAKrC;AACA;;AACA,cAAIiuC,WAAW,IAAIzuB,EAAE,IAAIA,EAAzB,EAA6B,OAAOhiB,MAAM,GAAGwM,KAAhB,EAAuB;AAClDhK,YAAAA,KAAK,GAAG4K,CAAC,CAACZ,KAAK,EAAN,CAAT,CADkD,CAElD;;AACA,gBAAIhK,KAAK,IAAIA,KAAb,EAAoB,OAAO,IAAP,CAH8B,CAIpD;AACC,WALD,MAKO,OAAMxC,MAAM,GAAGwM,KAAf,EAAsBA,KAAK,EAA3B;AAA+B,gBAAIikC,WAAW,IAAIjkC,KAAK,IAAIY,CAA5B,EAA+B;AACnE,kBAAIA,CAAC,CAACZ,KAAD,CAAD,KAAawV,EAAjB,EAAqB,OAAOyuB,WAAW,IAAIjkC,KAAf,IAAwB,CAA/B;AACtB;AAFM;AAEL,iBAAO,CAACikC,WAAD,IAAgB,CAAC,CAAxB;AACH,SAfD;AAgBD,OAjBD;AAoBA;;AAAO,KAz2OG;AA02OV;;AACA;AAAO,cAAS11C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIgd,SAAS,GAAGhd,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIw1C,GAAG,GAAGzzC,IAAI,CAACyzC,GAAf;AACA,UAAIv4B,GAAG,GAAGlb,IAAI,CAACkb,GAAf;;AACAtd,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU0R,KAAV,EAAiBxM,MAAjB,EAAyB;AACxCwM,QAAAA,KAAK,GAAG4L,SAAS,CAAC5L,KAAD,CAAjB;AACA,eAAOA,KAAK,GAAG,CAAR,GAAYokC,GAAG,CAACpkC,KAAK,GAAGxM,MAAT,EAAiB,CAAjB,CAAf,GAAqCqY,GAAG,CAAC7L,KAAD,EAAQxM,MAAR,CAA/C;AACD,OAHD;AAMA;;AAAO,KAt3OG;AAu3OV;;AACA;AAAO,cAASjF,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIy1C,gBAAgB,GAAGz1C,mBAAmB,CAAC,GAAD,CAA1C;;AACA,UAAI23B,IAAI,GAAG33B,mBAAmB,CAAC,GAAD,CAA9B;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC,CAPsD,CAStD;AACA;AACA;AACA;;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwB6M,KAAxB,EAA+B,OAA/B,EAAwC,UAAU8M,QAAV,EAAoByG,IAApB,EAA0B;AACjF,aAAKxG,EAAL,GAAUmH,SAAS,CAACpH,QAAD,CAAnB,CADiF,CAClD;;AAC/B,aAAKE,EAAL,GAAU,CAAV,CAFiF,CAElD;;AAC/B,aAAK67B,EAAL,GAAUt1B,IAAV,CAHiF,CAGlD;AACjC;AACC,OALgB,EAKd,YAAY;AACb,YAAIpO,CAAC,GAAG,KAAK4H,EAAb;AACA,YAAIwG,IAAI,GAAG,KAAKs1B,EAAhB;AACA,YAAItkC,KAAK,GAAG,KAAKyI,EAAL,EAAZ;;AACA,YAAI,CAAC7H,CAAD,IAAMZ,KAAK,IAAIY,CAAC,CAACpN,MAArB,EAA6B;AAC3B,eAAKgV,EAAL,GAAU/S,SAAV;AACA,iBAAO8wB,IAAI,CAAC,CAAD,CAAX;AACD;;AACD,YAAIvX,IAAI,IAAI,MAAZ,EAAoB,OAAOuX,IAAI,CAAC,CAAD,EAAIvmB,KAAJ,CAAX;AACpB,YAAIgP,IAAI,IAAI,QAAZ,EAAsB,OAAOuX,IAAI,CAAC,CAAD,EAAI3lB,CAAC,CAACZ,KAAD,CAAL,CAAX;AACtB,eAAOumB,IAAI,CAAC,CAAD,EAAI,CAACvmB,KAAD,EAAQY,CAAC,CAACZ,KAAD,CAAT,CAAJ,CAAX;AACD,OAhBgB,EAgBd,QAhBc,CAAjB,CAbsD,CA+BtD;;AACAqJ,MAAAA,SAAS,CAACk7B,SAAV,GAAsBl7B,SAAS,CAAC5N,KAAhC;AAEA4oC,MAAAA,gBAAgB,CAAC,MAAD,CAAhB;AACAA,MAAAA,gBAAgB,CAAC,QAAD,CAAhB;AACAA,MAAAA,gBAAgB,CAAC,SAAD,CAAhB;AAGA;AAAO,KA/5OG;AAg6OV;;AACA;AAAO,cAAS91C,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,YAAY;AAAE;AAAa,OAA5C;AAGA;;AAAO,KAt6OG;AAu6OV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUqa,IAAV,EAAgB3S,KAAhB,EAAuB;AACtC,eAAO;AAAEA,UAAAA,KAAK,EAAEA,KAAT;AAAgB2S,UAAAA,IAAI,EAAE,CAAC,CAACA;AAAxB,SAAP;AACD,OAFD;AAKA;;AAAO,KA/6OG;AAg7OV;;AACA;AAAO,cAASpa,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIqe,OAAO,GAAGre,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI2d,OAAO,GAAG3d,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI4U,SAAS,GAAG5U,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI41C,UAAU,GAAG51C,mBAAmB,CAAC,GAAD,CAApC;;AACA,UAAI61C,KAAK,GAAG71C,mBAAmB,CAAC,GAAD,CAA/B;;AACA,UAAI81C,kBAAkB,GAAG91C,mBAAmB,CAAC,EAAD,CAA5C;;AACA,UAAI+1C,IAAI,GAAG/1C,mBAAmB,CAAC,EAAD,CAAnB,CAAwBgK,GAAnC;;AACA,UAAIgsC,SAAS,GAAGh2C,mBAAmB,CAAC,GAAD,CAAnB,EAAhB;;AACA,UAAIi2C,0BAA0B,GAAGj2C,mBAAmB,CAAC,EAAD,CAApD;;AACA,UAAIk2C,OAAO,GAAGl2C,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIm2C,SAAS,GAAGn2C,mBAAmB,CAAC,GAAD,CAAnC;;AACA,UAAIo2C,cAAc,GAAGp2C,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIq2C,OAAO,GAAG,SAAd;AACA,UAAI3kC,SAAS,GAAG7P,MAAM,CAAC6P,SAAvB;AACA,UAAIrK,OAAO,GAAGxF,MAAM,CAACwF,OAArB;AACA,UAAIqM,QAAQ,GAAGrM,OAAO,IAAIA,OAAO,CAACqM,QAAlC;AACA,UAAI4iC,EAAE,GAAG5iC,QAAQ,IAAIA,QAAQ,CAAC4iC,EAArB,IAA2B,EAApC;AACA,UAAIC,QAAQ,GAAG10C,MAAM,CAACw0C,OAAD,CAArB;AACA,UAAI7e,MAAM,GAAG7Z,OAAO,CAACtW,OAAD,CAAP,IAAoB,SAAjC;;AACA,UAAImvC,KAAK,GAAG,SAARA,KAAQ,GAAY;AAAE;AAAa,OAAvC;;AACA,UAAIC,QAAJ,EAAcC,2BAAd,EAA2CC,oBAA3C,EAAiEC,OAAjE;AACA,UAAI3zB,oBAAoB,GAAGyzB,2BAA2B,GAAGT,0BAA0B,CAAClkC,CAApF;AAEA,UAAI8kC,UAAU,GAAG,CAAC,CAAC,YAAY;AAC7B,YAAI;AACF;AACA,cAAI54B,OAAO,GAAGs4B,QAAQ,CAACx4B,OAAT,CAAiB,CAAjB,CAAd;;AACA,cAAI+4B,WAAW,GAAG,CAAC74B,OAAO,CAACnb,WAAR,GAAsB,EAAvB,EAA2B9C,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,SAAvB,CAA3B,IAAgE,UAAU8U,IAAV,EAAgB;AAChGA,YAAAA,IAAI,CAAC0hC,KAAD,EAAQA,KAAR,CAAJ;AACD,WAFD,CAHE,CAMF;;;AACA,iBAAO,CAAChf,MAAM,IAAI,OAAOuf,qBAAP,IAAgC,UAA3C,KACF94B,OAAO,CAACsO,IAAR,CAAaiqB,KAAb,aAA+BM,WAD7B,CAEL;AACA;AACA;AAJK,aAKFR,EAAE,CAACz3B,OAAH,CAAW,KAAX,MAAsB,CALpB,IAMFs3B,SAAS,CAACt3B,OAAV,CAAkB,WAAlB,MAAmC,CAAC,CANzC;AAOD,SAdD,CAcE,OAAOxU,CAAP,EAAU;AAAE;AAAa;AAC5B,OAhBkB,EAAnB,CA/BsD,CAiDtD;;AACA,UAAI2sC,UAAU,GAAG,SAAbA,UAAa,CAAUvlC,EAAV,EAAc;AAC7B,YAAI8a,IAAJ;AACA,eAAO9oB,QAAQ,CAACgO,EAAD,CAAR,IAAgB,QAAQ8a,IAAI,GAAG9a,EAAE,CAAC8a,IAAlB,KAA2B,UAA3C,GAAwDA,IAAxD,GAA+D,KAAtE;AACD,OAHD;;AAIA,UAAI0qB,MAAM,GAAG,SAATA,MAAS,CAAUh5B,OAAV,EAAmBi5B,QAAnB,EAA6B;AACxC,YAAIj5B,OAAO,CAACk5B,EAAZ,EAAgB;AAChBl5B,QAAAA,OAAO,CAACk5B,EAAR,GAAa,IAAb;AACA,YAAIC,KAAK,GAAGn5B,OAAO,CAACo5B,EAApB;AACArB,QAAAA,SAAS,CAAC,YAAY;AACpB,cAAI5uC,KAAK,GAAG6W,OAAO,CAACq5B,EAApB;AACA,cAAIC,EAAE,GAAGt5B,OAAO,CAACu5B,EAAR,IAAc,CAAvB;AACA,cAAIt3C,CAAC,GAAG,CAAR;;AACA,cAAIiT,GAAG,GAAG,SAANA,GAAM,CAAUskC,QAAV,EAAoB;AAC5B,gBAAIC,OAAO,GAAGH,EAAE,GAAGE,QAAQ,CAACF,EAAZ,GAAiBE,QAAQ,CAACE,IAA1C;AACA,gBAAI55B,OAAO,GAAG05B,QAAQ,CAAC15B,OAAvB;AACA,gBAAIC,MAAM,GAAGy5B,QAAQ,CAACz5B,MAAtB;AACA,gBAAI45B,MAAM,GAAGH,QAAQ,CAACG,MAAtB;AACA,gBAAIz0C,MAAJ,EAAYopB,IAAZ,EAAkBsrB,MAAlB;;AACA,gBAAI;AACF,kBAAIH,OAAJ,EAAa;AACX,oBAAI,CAACH,EAAL,EAAS;AACP,sBAAIt5B,OAAO,CAAC65B,EAAR,IAAc,CAAlB,EAAqBC,iBAAiB,CAAC95B,OAAD,CAAjB;AACrBA,kBAAAA,OAAO,CAAC65B,EAAR,GAAa,CAAb;AACD;;AACD,oBAAIJ,OAAO,KAAK,IAAhB,EAAsBv0C,MAAM,GAAGiE,KAAT,CAAtB,KACK;AACH,sBAAIwwC,MAAJ,EAAYA,MAAM,CAACI,KAAP;AACZ70C,kBAAAA,MAAM,GAAGu0C,OAAO,CAACtwC,KAAD,CAAhB,CAFG,CAEsB;;AACzB,sBAAIwwC,MAAJ,EAAY;AACVA,oBAAAA,MAAM,CAACK,IAAP;AACAJ,oBAAAA,MAAM,GAAG,IAAT;AACD;AACF;;AACD,oBAAI10C,MAAM,KAAKs0C,QAAQ,CAACx5B,OAAxB,EAAiC;AAC/BD,kBAAAA,MAAM,CAACtM,SAAS,CAAC,qBAAD,CAAV,CAAN;AACD,iBAFD,MAEO,IAAI6a,IAAI,GAAGyqB,UAAU,CAAC7zC,MAAD,CAArB,EAA+B;AACpCopB,kBAAAA,IAAI,CAACnsB,IAAL,CAAU+C,MAAV,EAAkB4a,OAAlB,EAA2BC,MAA3B;AACD,iBAFM,MAEAD,OAAO,CAAC5a,MAAD,CAAP;AACR,eAnBD,MAmBO6a,MAAM,CAAC5W,KAAD,CAAN;AACR,aArBD,CAqBE,OAAOiD,CAAP,EAAU;AACV,kBAAIutC,MAAM,IAAI,CAACC,MAAf,EAAuBD,MAAM,CAACK,IAAP;AACvBj6B,cAAAA,MAAM,CAAC3T,CAAD,CAAN;AACD;AACF,WA/BD;;AAgCA,iBAAO+sC,KAAK,CAACxyC,MAAN,GAAe1E,CAAtB;AAAyBiT,YAAAA,GAAG,CAACikC,KAAK,CAACl3C,CAAC,EAAF,CAAN,CAAH;AAAzB,WApCoB,CAoCsB;;;AAC1C+d,UAAAA,OAAO,CAACo5B,EAAR,GAAa,EAAb;AACAp5B,UAAAA,OAAO,CAACk5B,EAAR,GAAa,KAAb;AACA,cAAID,QAAQ,IAAI,CAACj5B,OAAO,CAAC65B,EAAzB,EAA6BI,WAAW,CAACj6B,OAAD,CAAX;AAC9B,SAxCQ,CAAT;AAyCD,OA7CD;;AA8CA,UAAIi6B,WAAW,GAAG,SAAdA,WAAc,CAAUj6B,OAAV,EAAmB;AACnC83B,QAAAA,IAAI,CAAC31C,IAAL,CAAUyB,MAAV,EAAkB,YAAY;AAC5B,cAAIuF,KAAK,GAAG6W,OAAO,CAACq5B,EAApB;AACA,cAAIa,SAAS,GAAGC,WAAW,CAACn6B,OAAD,CAA3B;AACA,cAAI9a,MAAJ,EAAYu0C,OAAZ,EAAqB5kB,OAArB;;AACA,cAAIqlB,SAAJ,EAAe;AACbh1C,YAAAA,MAAM,GAAG+yC,OAAO,CAAC,YAAY;AAC3B,kBAAI1e,MAAJ,EAAY;AACVnwB,gBAAAA,OAAO,CAAC6M,IAAR,CAAa,oBAAb,EAAmC9M,KAAnC,EAA0C6W,OAA1C;AACD,eAFD,MAEO,IAAIy5B,OAAO,GAAG71C,MAAM,CAACw2C,oBAArB,EAA2C;AAChDX,gBAAAA,OAAO,CAAC;AAAEz5B,kBAAAA,OAAO,EAAEA,OAAX;AAAoBsmB,kBAAAA,MAAM,EAAEn9B;AAA5B,iBAAD,CAAP;AACD,eAFM,MAEA,IAAI,CAAC0rB,OAAO,GAAGjxB,MAAM,CAACixB,OAAlB,KAA8BA,OAAO,CAAChG,KAA1C,EAAiD;AACtDgG,gBAAAA,OAAO,CAAChG,KAAR,CAAc,6BAAd,EAA6C1lB,KAA7C;AACD;AACF,aARe,CAAhB,CADa,CAUb;;AACA6W,YAAAA,OAAO,CAAC65B,EAAR,GAAatgB,MAAM,IAAI4gB,WAAW,CAACn6B,OAAD,CAArB,GAAiC,CAAjC,GAAqC,CAAlD;AACD;;AAACA,UAAAA,OAAO,CAACq6B,EAAR,GAAazxC,SAAb;AACF,cAAIsxC,SAAS,IAAIh1C,MAAM,CAACkH,CAAxB,EAA2B,MAAMlH,MAAM,CAAC8G,CAAb;AAC5B,SAlBD;AAmBD,OApBD;;AAqBA,UAAImuC,WAAW,GAAG,SAAdA,WAAc,CAAUn6B,OAAV,EAAmB;AACnC,eAAOA,OAAO,CAAC65B,EAAR,KAAe,CAAf,IAAoB,CAAC75B,OAAO,CAACq6B,EAAR,IAAcr6B,OAAO,CAACo5B,EAAvB,EAA2BzyC,MAA3B,KAAsC,CAAjE;AACD,OAFD;;AAGA,UAAImzC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAU95B,OAAV,EAAmB;AACzC83B,QAAAA,IAAI,CAAC31C,IAAL,CAAUyB,MAAV,EAAkB,YAAY;AAC5B,cAAI61C,OAAJ;;AACA,cAAIlgB,MAAJ,EAAY;AACVnwB,YAAAA,OAAO,CAAC6M,IAAR,CAAa,kBAAb,EAAiC+J,OAAjC;AACD,WAFD,MAEO,IAAIy5B,OAAO,GAAG71C,MAAM,CAAC02C,kBAArB,EAAyC;AAC9Cb,YAAAA,OAAO,CAAC;AAAEz5B,cAAAA,OAAO,EAAEA,OAAX;AAAoBsmB,cAAAA,MAAM,EAAEtmB,OAAO,CAACq5B;AAApC,aAAD,CAAP;AACD;AACF,SAPD;AAQD,OATD;;AAUA,UAAIkB,OAAO,GAAG,SAAVA,OAAU,CAAUpxC,KAAV,EAAiB;AAC7B,YAAI6W,OAAO,GAAG,IAAd;AACA,YAAIA,OAAO,CAACw6B,EAAZ,EAAgB;AAChBx6B,QAAAA,OAAO,CAACw6B,EAAR,GAAa,IAAb;AACAx6B,QAAAA,OAAO,GAAGA,OAAO,CAACy6B,EAAR,IAAcz6B,OAAxB,CAJ6B,CAII;;AACjCA,QAAAA,OAAO,CAACq5B,EAAR,GAAalwC,KAAb;AACA6W,QAAAA,OAAO,CAACu5B,EAAR,GAAa,CAAb;AACA,YAAI,CAACv5B,OAAO,CAACq6B,EAAb,EAAiBr6B,OAAO,CAACq6B,EAAR,GAAar6B,OAAO,CAACo5B,EAAR,CAAWl/B,KAAX,EAAb;AACjB8+B,QAAAA,MAAM,CAACh5B,OAAD,EAAU,IAAV,CAAN;AACD,OATD;;AAUA,UAAI06B,QAAQ,GAAG,SAAXA,QAAW,CAAUvxC,KAAV,EAAiB;AAC9B,YAAI6W,OAAO,GAAG,IAAd;AACA,YAAIsO,IAAJ;AACA,YAAItO,OAAO,CAACw6B,EAAZ,EAAgB;AAChBx6B,QAAAA,OAAO,CAACw6B,EAAR,GAAa,IAAb;AACAx6B,QAAAA,OAAO,GAAGA,OAAO,CAACy6B,EAAR,IAAcz6B,OAAxB,CAL8B,CAKG;;AACjC,YAAI;AACF,cAAIA,OAAO,KAAK7W,KAAhB,EAAuB,MAAMsK,SAAS,CAAC,kCAAD,CAAf;;AACvB,cAAI6a,IAAI,GAAGyqB,UAAU,CAAC5vC,KAAD,CAArB,EAA8B;AAC5B4uC,YAAAA,SAAS,CAAC,YAAY;AACpB,kBAAI4C,OAAO,GAAG;AAAEF,gBAAAA,EAAE,EAAEz6B,OAAN;AAAew6B,gBAAAA,EAAE,EAAE;AAAnB,eAAd,CADoB,CACsB;;AAC1C,kBAAI;AACFlsB,gBAAAA,IAAI,CAACnsB,IAAL,CAAUgH,KAAV,EAAiB9B,GAAG,CAACqzC,QAAD,EAAWC,OAAX,EAAoB,CAApB,CAApB,EAA4CtzC,GAAG,CAACkzC,OAAD,EAAUI,OAAV,EAAmB,CAAnB,CAA/C;AACD,eAFD,CAEE,OAAOvuC,CAAP,EAAU;AACVmuC,gBAAAA,OAAO,CAACp4C,IAAR,CAAaw4C,OAAb,EAAsBvuC,CAAtB;AACD;AACF,aAPQ,CAAT;AAQD,WATD,MASO;AACL4T,YAAAA,OAAO,CAACq5B,EAAR,GAAalwC,KAAb;AACA6W,YAAAA,OAAO,CAACu5B,EAAR,GAAa,CAAb;AACAP,YAAAA,MAAM,CAACh5B,OAAD,EAAU,KAAV,CAAN;AACD;AACF,SAhBD,CAgBE,OAAO5T,CAAP,EAAU;AACVmuC,UAAAA,OAAO,CAACp4C,IAAR,CAAa;AAAEs4C,YAAAA,EAAE,EAAEz6B,OAAN;AAAew6B,YAAAA,EAAE,EAAE;AAAnB,WAAb,EAAyCpuC,CAAzC,EADU,CACmC;AAC9C;AACF,OAzBD,CAhJsD,CA2KtD;;;AACA,UAAI,CAACwsC,UAAL,EAAiB;AACf;AACAN,QAAAA,QAAQ,GAAG,SAAStsB,OAAT,CAAiB4uB,QAAjB,EAA2B;AACpCjD,UAAAA,UAAU,CAAC,IAAD,EAAOW,QAAP,EAAiBF,OAAjB,EAA0B,IAA1B,CAAV;AACAzhC,UAAAA,SAAS,CAACikC,QAAD,CAAT;AACApC,UAAAA,QAAQ,CAACr2C,IAAT,CAAc,IAAd;;AACA,cAAI;AACFy4C,YAAAA,QAAQ,CAACvzC,GAAG,CAACqzC,QAAD,EAAW,IAAX,EAAiB,CAAjB,CAAJ,EAAyBrzC,GAAG,CAACkzC,OAAD,EAAU,IAAV,EAAgB,CAAhB,CAA5B,CAAR;AACD,WAFD,CAEE,OAAOzxB,GAAP,EAAY;AACZyxB,YAAAA,OAAO,CAACp4C,IAAR,CAAa,IAAb,EAAmB2mB,GAAnB;AACD;AACF,SATD,CAFe,CAYf;;;AACA0vB,QAAAA,QAAQ,GAAG,SAASxsB,OAAT,CAAiB4uB,QAAjB,EAA2B;AACpC,eAAKxB,EAAL,GAAU,EAAV,CADoC,CACV;;AAC1B,eAAKiB,EAAL,GAAUzxC,SAAV,CAFoC,CAEV;;AAC1B,eAAK2wC,EAAL,GAAU,CAAV,CAHoC,CAGV;;AAC1B,eAAKiB,EAAL,GAAU,KAAV,CAJoC,CAIV;;AAC1B,eAAKnB,EAAL,GAAUzwC,SAAV,CALoC,CAKV;;AAC1B,eAAKixC,EAAL,GAAU,CAAV,CANoC,CAMV;;AAC1B,eAAKX,EAAL,GAAU,KAAV,CAPoC,CAOV;AAC3B,SARD;;AASAV,QAAAA,QAAQ,CAACn1C,SAAT,GAAqBtB,mBAAmB,CAAC,GAAD,CAAnB,CAAyBu2C,QAAQ,CAACj1C,SAAlC,EAA6C;AAChE;AACAirB,UAAAA,IAAI,EAAE,SAASA,IAAT,CAAcusB,WAAd,EAA2BC,UAA3B,EAAuC;AAC3C,gBAAItB,QAAQ,GAAGx0B,oBAAoB,CAAC6yB,kBAAkB,CAAC,IAAD,EAAOS,QAAP,CAAnB,CAAnC;AACAkB,YAAAA,QAAQ,CAACF,EAAT,GAAc,OAAOuB,WAAP,IAAsB,UAAtB,GAAmCA,WAAnC,GAAiD,IAA/D;AACArB,YAAAA,QAAQ,CAACE,IAAT,GAAgB,OAAOoB,UAAP,IAAqB,UAArB,IAAmCA,UAAnD;AACAtB,YAAAA,QAAQ,CAACG,MAAT,GAAkBpgB,MAAM,GAAGnwB,OAAO,CAACuwC,MAAX,GAAoB/wC,SAA5C;;AACA,iBAAKwwC,EAAL,CAAQhpC,IAAR,CAAaopC,QAAb;;AACA,gBAAI,KAAKa,EAAT,EAAa,KAAKA,EAAL,CAAQjqC,IAAR,CAAaopC,QAAb;AACb,gBAAI,KAAKD,EAAT,EAAaP,MAAM,CAAC,IAAD,EAAO,KAAP,CAAN;AACb,mBAAOQ,QAAQ,CAACx5B,OAAhB;AACD,WAX+D;AAYhE;AACA,mBAAS,gBAAU86B,UAAV,EAAsB;AAC7B,mBAAO,KAAKxsB,IAAL,CAAU1lB,SAAV,EAAqBkyC,UAArB,CAAP;AACD;AAf+D,SAA7C,CAArB;;AAiBApC,QAAAA,oBAAoB,GAAG,gCAAY;AACjC,cAAI14B,OAAO,GAAG,IAAIw4B,QAAJ,EAAd;AACA,eAAKx4B,OAAL,GAAeA,OAAf;AACA,eAAKF,OAAL,GAAezY,GAAG,CAACqzC,QAAD,EAAW16B,OAAX,EAAoB,CAApB,CAAlB;AACA,eAAKD,MAAL,GAAc1Y,GAAG,CAACkzC,OAAD,EAAUv6B,OAAV,EAAmB,CAAnB,CAAjB;AACD,SALD;;AAMAg4B,QAAAA,0BAA0B,CAAClkC,CAA3B,GAA+BkR,oBAAoB,GAAG,8BAAUnc,CAAV,EAAa;AACjE,iBAAOA,CAAC,KAAKyvC,QAAN,IAAkBzvC,CAAC,KAAK8vC,OAAxB,GACH,IAAID,oBAAJ,CAAyB7vC,CAAzB,CADG,GAEH4vC,2BAA2B,CAAC5vC,CAAD,CAF/B;AAGD,SAJD;AAKD;;AAEDpB,MAAAA,OAAO,CAACA,OAAO,CAACM,CAAR,GAAYN,OAAO,CAACc,CAApB,GAAwBd,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAAtC,EAAkD;AAAE5sB,QAAAA,OAAO,EAAEssB;AAAX,OAAlD,CAAP;;AACAv2C,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwBu2C,QAAxB,EAAkCF,OAAlC;;AACAr2C,MAAAA,mBAAmB,CAAC,GAAD,CAAnB,CAAyBq2C,OAAzB;;AACAO,MAAAA,OAAO,GAAG52C,mBAAmB,CAAC,CAAD,CAAnB,CAAuBq2C,OAAvB,CAAV,CAnOsD,CAqOtD;;AACA3wC,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAA1B,EAAsCR,OAAtC,EAA+C;AACpD;AACAr4B,QAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB3N,CAAhB,EAAmB;AACzB,cAAI2oC,UAAU,GAAG/1B,oBAAoB,CAAC,IAAD,CAArC;AACA,cAAI9E,QAAQ,GAAG66B,UAAU,CAACh7B,MAA1B;AACAG,UAAAA,QAAQ,CAAC9N,CAAD,CAAR;AACA,iBAAO2oC,UAAU,CAAC/6B,OAAlB;AACD;AAPmD,OAA/C,CAAP;AASAvY,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,IAAauY,OAAO,IAAI,CAACw4B,UAAzB,CAAb,EAAmDR,OAAnD,EAA4D;AACjE;AACAt4B,QAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBmF,CAAjB,EAAoB;AAC3B,iBAAOkzB,cAAc,CAAC/3B,OAAO,IAAI,SAASu4B,OAApB,GAA8BL,QAA9B,GAAyC,IAA1C,EAAgDrzB,CAAhD,CAArB;AACD;AAJgE,OAA5D,CAAP;AAMAxd,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,EAAE+wC,UAAU,IAAI72C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAUyjB,IAAV,EAAgB;AACtF8yB,QAAAA,QAAQ,CAACvP,GAAT,CAAavjB,IAAb,EAAmB,OAAnB,EAA4B+yB,KAA5B;AACD,OAF+C,CAAhB,CAAzB,EAEFH,OAFE,EAEO;AACZ;AACArP,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAaiS,QAAb,EAAuB;AAC1B,cAAInyC,CAAC,GAAG,IAAR;AACA,cAAIkyC,UAAU,GAAG/1B,oBAAoB,CAACnc,CAAD,CAArC;AACA,cAAIiX,OAAO,GAAGi7B,UAAU,CAACj7B,OAAzB;AACA,cAAIC,MAAM,GAAGg7B,UAAU,CAACh7B,MAAxB;AACA,cAAI7a,MAAM,GAAG+yC,OAAO,CAAC,YAAY;AAC/B,gBAAI71B,MAAM,GAAG,EAAb;AACA,gBAAIjP,KAAK,GAAG,CAAZ;AACA,gBAAI8nC,SAAS,GAAG,CAAhB;AACArD,YAAAA,KAAK,CAACoD,QAAD,EAAW,KAAX,EAAkB,UAAUh7B,OAAV,EAAmB;AACxC,kBAAIk7B,MAAM,GAAG/nC,KAAK,EAAlB;AACA,kBAAIgoC,aAAa,GAAG,KAApB;AACA/4B,cAAAA,MAAM,CAAChS,IAAP,CAAYxH,SAAZ;AACAqyC,cAAAA,SAAS;AACTpyC,cAAAA,CAAC,CAACiX,OAAF,CAAUE,OAAV,EAAmBsO,IAAnB,CAAwB,UAAUnlB,KAAV,EAAiB;AACvC,oBAAIgyC,aAAJ,EAAmB;AACnBA,gBAAAA,aAAa,GAAG,IAAhB;AACA/4B,gBAAAA,MAAM,CAAC84B,MAAD,CAAN,GAAiB/xC,KAAjB;AACA,kBAAE8xC,SAAF,IAAen7B,OAAO,CAACsC,MAAD,CAAtB;AACD,eALD,EAKGrC,MALH;AAMD,aAXI,CAAL;AAYA,cAAEk7B,SAAF,IAAen7B,OAAO,CAACsC,MAAD,CAAtB;AACD,WAjBmB,CAApB;AAkBA,cAAIld,MAAM,CAACkH,CAAX,EAAc2T,MAAM,CAAC7a,MAAM,CAAC8G,CAAR,CAAN;AACd,iBAAO+uC,UAAU,CAAC/6B,OAAlB;AACD,SA3BW;AA4BZ;AACAgpB,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAcgS,QAAd,EAAwB;AAC5B,cAAInyC,CAAC,GAAG,IAAR;AACA,cAAIkyC,UAAU,GAAG/1B,oBAAoB,CAACnc,CAAD,CAArC;AACA,cAAIkX,MAAM,GAAGg7B,UAAU,CAACh7B,MAAxB;AACA,cAAI7a,MAAM,GAAG+yC,OAAO,CAAC,YAAY;AAC/BL,YAAAA,KAAK,CAACoD,QAAD,EAAW,KAAX,EAAkB,UAAUh7B,OAAV,EAAmB;AACxCnX,cAAAA,CAAC,CAACiX,OAAF,CAAUE,OAAV,EAAmBsO,IAAnB,CAAwBysB,UAAU,CAACj7B,OAAnC,EAA4CC,MAA5C;AACD,aAFI,CAAL;AAGD,WAJmB,CAApB;AAKA,cAAI7a,MAAM,CAACkH,CAAX,EAAc2T,MAAM,CAAC7a,MAAM,CAAC8G,CAAR,CAAN;AACd,iBAAO+uC,UAAU,CAAC/6B,OAAlB;AACD;AAxCW,OAFP,CAAP;AA8CA;AAAO,KAptPG;AAqtPV;;AACA;AAAO,cAASte,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAcuJ,WAAd,EAA2Bxa,IAA3B,EAAiC64C,cAAjC,EAAiD;AAChE,YAAI,EAAE5nC,EAAE,YAAYuJ,WAAhB,KAAiCq+B,cAAc,KAAKxyC,SAAnB,IAAgCwyC,cAAc,IAAI5nC,EAAvF,EAA4F;AAC1F,gBAAMC,SAAS,CAAClR,IAAI,GAAG,yBAAR,CAAf;AACD;;AAAC,eAAOiR,EAAP;AACH,OAJD;AAOA;;AAAO,KA/tPG;AAguPV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAII,IAAI,GAAGJ,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIs5C,WAAW,GAAGt5C,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIm1C,QAAQ,GAAGn1C,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIu5C,SAAS,GAAGv5C,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIw5C,KAAK,GAAG,EAAZ;AACA,UAAIC,MAAM,GAAG,EAAb;;AACA,UAAI/5C,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,UAAUu5C,QAAV,EAAoB34B,OAApB,EAA6B3b,EAA7B,EAAiCkQ,IAAjC,EAAuC+I,QAAvC,EAAiD;AAC9E,YAAI87B,MAAM,GAAG97B,QAAQ,GAAG,YAAY;AAAE,iBAAOq7B,QAAP;AAAkB,SAAnC,GAAsCM,SAAS,CAACN,QAAD,CAApE;AACA,YAAIlnC,CAAC,GAAGzM,GAAG,CAACX,EAAD,EAAKkQ,IAAL,EAAWyL,OAAO,GAAG,CAAH,GAAO,CAAzB,CAAX;AACA,YAAIlP,KAAK,GAAG,CAAZ;AACA,YAAIxM,MAAJ,EAAY+yB,IAAZ,EAAkBtW,QAAlB,EAA4Ble,MAA5B;AACA,YAAI,OAAOu2C,MAAP,IAAiB,UAArB,EAAiC,MAAMhoC,SAAS,CAACunC,QAAQ,GAAG,mBAAZ,CAAf,CAL6C,CAM9E;;AACA,YAAIK,WAAW,CAACI,MAAD,CAAf,EAAyB,KAAK90C,MAAM,GAAGuwC,QAAQ,CAAC8D,QAAQ,CAACr0C,MAAV,CAAtB,EAAyCA,MAAM,GAAGwM,KAAlD,EAAyDA,KAAK,EAA9D,EAAkE;AACzFjO,UAAAA,MAAM,GAAGmd,OAAO,GAAGvO,CAAC,CAACJ,QAAQ,CAACgmB,IAAI,GAAGshB,QAAQ,CAAC7nC,KAAD,CAAhB,CAAR,CAAiC,CAAjC,CAAD,EAAsCumB,IAAI,CAAC,CAAD,CAA1C,CAAJ,GAAqD5lB,CAAC,CAACknC,QAAQ,CAAC7nC,KAAD,CAAT,CAAtE;AACA,cAAIjO,MAAM,KAAKq2C,KAAX,IAAoBr2C,MAAM,KAAKs2C,MAAnC,EAA2C,OAAOt2C,MAAP;AAC5C,SAHD,MAGO,KAAKke,QAAQ,GAAGq4B,MAAM,CAACt5C,IAAP,CAAY64C,QAAZ,CAAhB,EAAuC,CAAC,CAACthB,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAAjE,GAAwE;AAC7E5W,UAAAA,MAAM,GAAG/C,IAAI,CAACihB,QAAD,EAAWtP,CAAX,EAAc4lB,IAAI,CAACvwB,KAAnB,EAA0BkZ,OAA1B,CAAb;AACA,cAAInd,MAAM,KAAKq2C,KAAX,IAAoBr2C,MAAM,KAAKs2C,MAAnC,EAA2C,OAAOt2C,MAAP;AAC5C;AACF,OAdD;;AAeAzD,MAAAA,OAAO,CAAC85C,KAAR,GAAgBA,KAAhB;AACA95C,MAAAA,OAAO,CAAC+5C,MAAR,GAAiBA,MAAjB;AAGA;AAAO,KA9vPG;AA+vPV;;AACA;AAAO,cAAS95C,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;AACAC,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUiF,EAAV,EAAcgJ,IAAd,EAAoBkH,IAApB,EAA0B;AACzC,YAAI8kC,EAAE,GAAG9kC,IAAI,KAAKhO,SAAlB;;AACA,gBAAQ8G,IAAI,CAAC/I,MAAb;AACE,eAAK,CAAL;AAAQ,mBAAO+0C,EAAE,GAAGh1C,EAAE,EAAL,GACGA,EAAE,CAACvE,IAAH,CAAQyU,IAAR,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAO8kC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAOgsC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,EAAuBA,IAAI,CAAC,CAAD,CAA3B,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAOgsC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,EAAuBA,IAAI,CAAC,CAAD,CAA3B,EAAgCA,IAAI,CAAC,CAAD,CAApC,CADZ;;AAER,eAAK,CAAL;AAAQ,mBAAOgsC,EAAE,GAAGh1C,EAAE,CAACgJ,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,EAA4BA,IAAI,CAAC,CAAD,CAAhC,CAAL,GACGhJ,EAAE,CAACvE,IAAH,CAAQyU,IAAR,EAAclH,IAAI,CAAC,CAAD,CAAlB,EAAuBA,IAAI,CAAC,CAAD,CAA3B,EAAgCA,IAAI,CAAC,CAAD,CAApC,EAAyCA,IAAI,CAAC,CAAD,CAA7C,CADZ;AATV;;AAWE,eAAOhJ,EAAE,CAACoC,KAAH,CAAS8N,IAAT,EAAelH,IAAf,CAAP;AACH,OAdD;AAiBA;;AAAO,KApxPG;AAqxPV;;AACA;AAAO,cAAShO,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI45C,SAAS,GAAG55C,mBAAmB,CAAC,EAAD,CAAnB,CAAwBgK,GAAxC;;AACA,UAAI6vC,QAAQ,GAAGh4C,MAAM,CAAC8/B,gBAAP,IAA2B9/B,MAAM,CAAC+/B,sBAAjD;AACA,UAAIv6B,OAAO,GAAGxF,MAAM,CAACwF,OAArB;AACA,UAAI4iB,OAAO,GAAGpoB,MAAM,CAACooB,OAArB;AACA,UAAIuN,MAAM,GAAGx3B,mBAAmB,CAAC,EAAD,CAAnB,CAAwBqH,OAAxB,KAAoC,SAAjD;;AAEA1H,MAAAA,MAAM,CAACD,OAAP,GAAiB,YAAY;AAC3B,YAAIo6C,IAAJ,EAAUC,IAAV,EAAgB9C,MAAhB;;AAEA,YAAI/V,KAAK,GAAG,SAARA,KAAQ,GAAY;AACtB,cAAI51B,MAAJ,EAAY3G,EAAZ;AACA,cAAI6yB,MAAM,KAAKlsB,MAAM,GAAGjE,OAAO,CAACuwC,MAAtB,CAAV,EAAyCtsC,MAAM,CAAC2sC,IAAP;;AACzC,iBAAO6B,IAAP,EAAa;AACXn1C,YAAAA,EAAE,GAAGm1C,IAAI,CAACn1C,EAAV;AACAm1C,YAAAA,IAAI,GAAGA,IAAI,CAAC/5B,IAAZ;;AACA,gBAAI;AACFpb,cAAAA,EAAE;AACH,aAFD,CAEE,OAAO0F,CAAP,EAAU;AACV,kBAAIyvC,IAAJ,EAAU7C,MAAM,GAAhB,KACK8C,IAAI,GAAGlzC,SAAP;AACL,oBAAMwD,CAAN;AACD;AACF;;AAAC0vC,UAAAA,IAAI,GAAGlzC,SAAP;AACF,cAAIyE,MAAJ,EAAYA,MAAM,CAAC0sC,KAAP;AACb,SAfD,CAH2B,CAoB3B;;;AACA,YAAIxgB,MAAJ,EAAY;AACVyf,UAAAA,MAAM,GAAG,kBAAY;AACnB5vC,YAAAA,OAAO,CAAC+L,QAAR,CAAiB8tB,KAAjB;AACD,WAFD,CADU,CAIZ;;AACC,SALD,MAKO,IAAI2Y,QAAQ,IAAI,EAAEh4C,MAAM,CAACyC,SAAP,IAAoBzC,MAAM,CAACyC,SAAP,CAAiB01C,UAAvC,CAAhB,EAAoE;AACzE,cAAIC,MAAM,GAAG,IAAb;AACA,cAAI9rC,IAAI,GAAG3J,QAAQ,CAAC63B,cAAT,CAAwB,EAAxB,CAAX;AACA,cAAIwd,QAAJ,CAAa3Y,KAAb,EAAoBmB,OAApB,CAA4Bl0B,IAA5B,EAAkC;AAAEm0B,YAAAA,aAAa,EAAE;AAAjB,WAAlC,EAHyE,CAGb;;AAC5D2U,UAAAA,MAAM,GAAG,kBAAY;AACnB9oC,YAAAA,IAAI,CAACqU,IAAL,GAAYy3B,MAAM,GAAG,CAACA,MAAtB;AACD,WAFD,CAJyE,CAO3E;;AACC,SARM,MAQA,IAAIhwB,OAAO,IAAIA,OAAO,CAAClM,OAAvB,EAAgC;AACrC;AACA,cAAIE,OAAO,GAAGgM,OAAO,CAAClM,OAAR,CAAgBlX,SAAhB,CAAd;;AACAowC,UAAAA,MAAM,GAAG,kBAAY;AACnBh5B,YAAAA,OAAO,CAACsO,IAAR,CAAa2U,KAAb;AACD,WAFD,CAHqC,CAMvC;AACA;AACA;AACA;AACA;AACA;;AACC,SAZM,MAYA;AACL+V,UAAAA,MAAM,GAAG,kBAAY;AACnB;AACA2C,YAAAA,SAAS,CAACx5C,IAAV,CAAeyB,MAAf,EAAuBq/B,KAAvB;AACD,WAHD;AAID;;AAED,eAAO,UAAUv8B,EAAV,EAAc;AACnB,cAAIoxC,IAAI,GAAG;AAAEpxC,YAAAA,EAAE,EAAEA,EAAN;AAAUob,YAAAA,IAAI,EAAElZ;AAAhB,WAAX;AACA,cAAIkzC,IAAJ,EAAUA,IAAI,CAACh6B,IAAL,GAAYg2B,IAAZ;;AACV,cAAI,CAAC+D,IAAL,EAAW;AACTA,YAAAA,IAAI,GAAG/D,IAAP;AACAkB,YAAAA,MAAM;AACP;;AAAC8C,UAAAA,IAAI,GAAGhE,IAAP;AACH,SAPD;AAQD,OA7DD;AAgEA;;AAAO,KA/1PG;AAg2PV;;AACA;AAAO,cAASp2C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIsE,SAAS,GAAGzC,MAAM,CAACyC,SAAvB;AAEA3E,MAAAA,MAAM,CAACD,OAAP,GAAiB4E,SAAS,IAAIA,SAAS,CAAC6xC,SAAvB,IAAoC,EAArD;AAGA;AAAO,KAz2PG;AA02PV;;AACA;AAAO,cAASx2C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIuF,IAAI,GAAGvF,mBAAmB,CAAC,EAAD,CAA9B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUgH,MAAV,EAAkB+V,GAAlB,EAAuB+G,IAAvB,EAA6B;AAC5C,aAAK,IAAI3e,GAAT,IAAgB4X,GAAhB,EAAqB;AACnB,cAAI+G,IAAI,IAAI9c,MAAM,CAAC7B,GAAD,CAAlB,EAAyB6B,MAAM,CAAC7B,GAAD,CAAN,GAAc4X,GAAG,CAAC5X,GAAD,CAAjB,CAAzB,KACKU,IAAI,CAACmB,MAAD,EAAS7B,GAAT,EAAc4X,GAAG,CAAC5X,GAAD,CAAjB,CAAJ;AACN;;AAAC,eAAO6B,MAAP;AACH,OALD;AAQA;;AAAO,KAt3PG;AAu3PV;;AACA;AAAO,cAAS/G,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI8R,EAAE,GAAG9R,mBAAmB,CAAC,CAAD,CAA5B;;AACA,UAAIk6C,WAAW,GAAGl6C,mBAAmB,CAAC,CAAD,CAArC;;AACA,UAAIuhB,OAAO,GAAGvhB,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,SAAvB,CAAd;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAUikB,GAAV,EAAe;AAC9B,YAAI7c,CAAC,GAAG,OAAOpF,IAAI,CAACiiB,GAAD,CAAX,IAAoB,UAApB,GAAiCjiB,IAAI,CAACiiB,GAAD,CAArC,GAA6C9hB,MAAM,CAAC8hB,GAAD,CAA3D;AACA,YAAIu2B,WAAW,IAAIpzC,CAAf,IAAoB,CAACA,CAAC,CAACya,OAAD,CAA1B,EAAqCzP,EAAE,CAACC,CAAH,CAAKjL,CAAL,EAAQya,OAAR,EAAiB;AACpD1gB,UAAAA,YAAY,EAAE,IADsC;AAEpDE,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO,IAAP;AAAc;AAFmB,SAAjB;AAItC,OAND;AASA;;AAAO,KA34PG;AA44PV;;AACA;AAAO,cAASpB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAGtD;;AAEA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAI0B,IAAI,GAAG1B,mBAAmB,CAAC,CAAD,CAA9B;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAI81C,kBAAkB,GAAG91C,mBAAmB,CAAC,EAAD,CAA5C;;AACA,UAAIo2C,cAAc,GAAGp2C,mBAAmB,CAAC,EAAD,CAAxC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACU,CAAR,GAAYV,OAAO,CAACuB,CAArB,EAAwB,SAAxB,EAAmC;AAAE,mBAAW,kBAAUkzC,SAAV,EAAqB;AAC1E,cAAIrzC,CAAC,GAAGgvC,kBAAkB,CAAC,IAAD,EAAOp0C,IAAI,CAACuoB,OAAL,IAAgBpoB,MAAM,CAACooB,OAA9B,CAA1B;AACA,cAAIpmB,UAAU,GAAG,OAAOs2C,SAAP,IAAoB,UAArC;AACA,iBAAO,KAAK5tB,IAAL,CACL1oB,UAAU,GAAG,UAAUqf,CAAV,EAAa;AACxB,mBAAOkzB,cAAc,CAACtvC,CAAD,EAAIqzC,SAAS,EAAb,CAAd,CAA+B5tB,IAA/B,CAAoC,YAAY;AAAE,qBAAOrJ,CAAP;AAAW,aAA7D,CAAP;AACD,WAFS,GAENi3B,SAHC,EAILt2C,UAAU,GAAG,UAAUwG,CAAV,EAAa;AACxB,mBAAO+rC,cAAc,CAACtvC,CAAD,EAAIqzC,SAAS,EAAb,CAAd,CAA+B5tB,IAA/B,CAAoC,YAAY;AAAE,oBAAMliB,CAAN;AAAU,aAA5D,CAAP;AACD,WAFS,GAEN8vC,SANC,CAAP;AAQD;AAXyC,OAAnC,CAAP;AAcA;AAAO,KAt6PG;AAu6PV;;AACA;AAAO,cAASx6C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIijB,oBAAoB,GAAGjjB,mBAAmB,CAAC,EAAD,CAA9C;;AACA,UAAIk2C,OAAO,GAAGl2C,mBAAmB,CAAC,EAAD,CAAjC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAT,EAAY,SAAZ,EAAuB;AAAE,eAAO,cAAUk0C,UAAV,EAAsB;AAC3D,cAAIj3B,iBAAiB,GAAGF,oBAAoB,CAAClR,CAArB,CAAuB,IAAvB,CAAxB;AACA,cAAI5O,MAAM,GAAG+yC,OAAO,CAACkE,UAAD,CAApB;AACA,WAACj3C,MAAM,CAACkH,CAAP,GAAW8Y,iBAAiB,CAACnF,MAA7B,GAAsCmF,iBAAiB,CAACpF,OAAzD,EAAkE5a,MAAM,CAAC8G,CAAzE;AACA,iBAAOkZ,iBAAiB,CAAClF,OAAzB;AACD;AAL6B,OAAvB,CAAP;AAQA;AAAO,KAz7PG;AA07PV;;AACA;AAAO,cAASte,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA/7PG;AAg8PV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8B2yB,MAA/C;AAGA;AAAO,KAv8PG;AAw8PV;;AACA;AAAO,cAAS3zB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAArB,EAAwB,QAAxB,EAAkC;AAAEwtB,QAAAA,MAAM,EAAEtzB,mBAAmB,CAAC,GAAD;AAA7B,OAAlC,CAAP;AAGA;AAAO,KAj9PG;AAk9PV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAIk6C,WAAW,GAAGl6C,mBAAmB,CAAC,CAAD,CAArC;;AACA,UAAIk1C,OAAO,GAAGl1C,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIq6C,IAAI,GAAGr6C,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIukB,GAAG,GAAGvkB,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI+U,OAAO,GAAG/U,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIs6C,OAAO,GAAG35C,MAAM,CAAC2yB,MAArB,CAXsD,CAatD;;AACA3zB,MAAAA,MAAM,CAACD,OAAP,GAAiB,CAAC46C,OAAD,IAAYt6C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AAC/D,YAAIu6C,CAAC,GAAG,EAAR;AACA,YAAIj0C,CAAC,GAAG,EAAR,CAF+D,CAG/D;;AACA,YAAIJ,CAAC,GAAG7D,MAAM,EAAd;AACA,YAAIm4C,CAAC,GAAG,sBAAR;AACAD,QAAAA,CAAC,CAACr0C,CAAD,CAAD,GAAO,CAAP;AACAs0C,QAAAA,CAAC,CAAChyC,KAAF,CAAQ,EAAR,EAAY/D,OAAZ,CAAoB,UAAU+qB,CAAV,EAAa;AAAElpB,UAAAA,CAAC,CAACkpB,CAAD,CAAD,GAAOA,CAAP;AAAW,SAA9C;AACA,eAAO8qB,OAAO,CAAC,EAAD,EAAKC,CAAL,CAAP,CAAer0C,CAAf,KAAqB,CAArB,IAA0BvF,MAAM,CAACuZ,IAAP,CAAYogC,OAAO,CAAC,EAAD,EAAKh0C,CAAL,CAAnB,EAA4BkgB,IAA5B,CAAiC,EAAjC,KAAwCg0B,CAAzE;AACD,OAT4B,CAAZ,GASZ,SAASlnB,MAAT,CAAgB5sB,MAAhB,EAAwBd,MAAxB,EAAgC;AAAE;AACrC,YAAI6X,CAAC,GAAG0D,QAAQ,CAACza,MAAD,CAAhB;AACA,YAAI+zC,IAAI,GAAGz1C,SAAS,CAACJ,MAArB;AACA,YAAIwM,KAAK,GAAG,CAAZ;AACA,YAAIspC,UAAU,GAAGL,IAAI,CAACtoC,CAAtB;AACA,YAAI4oC,MAAM,GAAGp2B,GAAG,CAACxS,CAAjB;;AACA,eAAO0oC,IAAI,GAAGrpC,KAAd,EAAqB;AACnB,cAAIlL,CAAC,GAAG6O,OAAO,CAAC/P,SAAS,CAACoM,KAAK,EAAN,CAAV,CAAf;AACA,cAAI8I,IAAI,GAAGwgC,UAAU,GAAGxF,OAAO,CAAChvC,CAAD,CAAP,CAAW4G,MAAX,CAAkB4tC,UAAU,CAACx0C,CAAD,CAA5B,CAAH,GAAsCgvC,OAAO,CAAChvC,CAAD,CAAlE;AACA,cAAItB,MAAM,GAAGsV,IAAI,CAACtV,MAAlB;AACA,cAAIq4B,CAAC,GAAG,CAAR;AACA,cAAIp4B,GAAJ;;AACA,iBAAOD,MAAM,GAAGq4B,CAAhB,EAAmB;AACjBp4B,YAAAA,GAAG,GAAGqV,IAAI,CAAC+iB,CAAC,EAAF,CAAV;AACA,gBAAI,CAACid,WAAD,IAAgBS,MAAM,CAACv6C,IAAP,CAAY8F,CAAZ,EAAerB,GAAf,CAApB,EAAyC4Y,CAAC,CAAC5Y,GAAD,CAAD,GAASqB,CAAC,CAACrB,GAAD,CAAV;AAC1C;AACF;;AAAC,eAAO4Y,CAAP;AACH,OA1BgB,GA0Bb68B,OA1BJ;AA6BA;AAAO,KA9/PG;AA+/PV;;AACA;AAAO,cAAS36C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8B6e,cAA/C;AAGA;AAAO,KAtgQG;AAugQV;;AACA;AAAO,cAAS7f,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI46C,eAAe,GAAG56C,mBAAmB,CAAC,EAAD,CAAzC;;AAEAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,gBAAxB,EAA0C,YAAY;AACpD,eAAO,SAASwf,cAAT,CAAwB/N,EAAxB,EAA4B;AACjC,iBAAOmpC,eAAe,CAACz5B,QAAQ,CAAC1P,EAAD,CAAT,CAAtB;AACD,SAFD;AAGD,OAJD;AAOA;;AAAO,KArhQG;AAshQV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA3hQG;AA4hQV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,CAA0B,UAA1B,CAAjB;AAGA;AAAO,KApiQG;AAqiQV;;AACA;AAAO,cAASpS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA1iQG;AA2iQV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBqC,MAAxC;AAGA;AAAO,KArjQG;AAsjQV;;AACA;AAAO,cAAS1C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAItD;;AACA,UAAI6B,MAAM,GAAG7B,mBAAmB,CAAC,CAAD,CAAhC;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIk6C,WAAW,GAAGl6C,mBAAmB,CAAC,CAAD,CAArC;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAIqf,QAAQ,GAAGrf,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI66C,IAAI,GAAG76C,mBAAmB,CAAC,GAAD,CAAnB,CAAyB2jB,GAApC;;AACA,UAAIm3B,MAAM,GAAG96C,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIkd,MAAM,GAAGld,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIuf,cAAc,GAAGvf,mBAAmB,CAAC,EAAD,CAAxC;;AACA,UAAIoC,GAAG,GAAGpC,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI+6C,GAAG,GAAG/6C,mBAAmB,CAAC,CAAD,CAA7B;;AACA,UAAIse,MAAM,GAAGte,mBAAmB,CAAC,EAAD,CAAhC;;AACA,UAAIg7C,SAAS,GAAGh7C,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIi7C,QAAQ,GAAGj7C,mBAAmB,CAAC,GAAD,CAAlC;;AACA,UAAI0C,OAAO,GAAG1C,mBAAmB,CAAC,GAAD,CAAjC;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAI6R,WAAW,GAAG7R,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AACA,UAAI4kB,OAAO,GAAG5kB,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIk7C,OAAO,GAAGl7C,mBAAmB,CAAC,GAAD,CAAjC;;AACA,UAAIm7C,KAAK,GAAGn7C,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIo7C,KAAK,GAAGp7C,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIq7C,GAAG,GAAGr7C,mBAAmB,CAAC,CAAD,CAA7B;;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIwkB,IAAI,GAAG22B,KAAK,CAACppC,CAAjB;AACA,UAAID,EAAE,GAAGupC,GAAG,CAACtpC,CAAb;AACA,UAAIupC,IAAI,GAAGJ,OAAO,CAACnpC,CAAnB;AACA,UAAIwM,OAAO,GAAG1c,MAAM,CAACQ,MAArB;AACA,UAAIk5C,KAAK,GAAG15C,MAAM,CAACsmB,IAAnB;;AACA,UAAIqzB,UAAU,GAAGD,KAAK,IAAIA,KAAK,CAACnzB,SAAhC;;AACA,UAAI3iB,SAAS,GAAG,WAAhB;AACA,UAAIg2C,MAAM,GAAGV,GAAG,CAAC,SAAD,CAAhB;AACA,UAAIW,YAAY,GAAGX,GAAG,CAAC,aAAD,CAAtB;AACA,UAAIJ,MAAM,GAAG,GAAG7/B,oBAAhB;AACA,UAAI6gC,cAAc,GAAGz+B,MAAM,CAAC,iBAAD,CAA3B;AACA,UAAI0+B,UAAU,GAAG1+B,MAAM,CAAC,SAAD,CAAvB;AACA,UAAI2+B,SAAS,GAAG3+B,MAAM,CAAC,YAAD,CAAtB;AACA,UAAIkE,WAAW,GAAGzgB,MAAM,CAAC8E,SAAD,CAAxB;AACA,UAAIoxC,UAAU,GAAG,OAAOt4B,OAAP,IAAkB,UAAlB,IAAgC,CAAC,CAAC68B,KAAK,CAACrpC,CAAzD;AACA,UAAI+pC,OAAO,GAAGj6C,MAAM,CAACi6C,OAArB,CA/CsD,CAgDtD;;AACA,UAAIC,MAAM,GAAG,CAACD,OAAD,IAAY,CAACA,OAAO,CAACr2C,SAAD,CAApB,IAAmC,CAACq2C,OAAO,CAACr2C,SAAD,CAAP,CAAmBu2C,SAApE,CAjDsD,CAmDtD;;AACA,UAAIC,aAAa,GAAG/B,WAAW,IAAIY,MAAM,CAAC,YAAY;AACpD,eAAOl2B,OAAO,CAAC9S,EAAE,CAAC,EAAD,EAAK,GAAL,EAAU;AACzB/Q,UAAAA,GAAG,EAAE,eAAY;AAAE,mBAAO+Q,EAAE,CAAC,IAAD,EAAO,GAAP,EAAY;AAAE1K,cAAAA,KAAK,EAAE;AAAT,aAAZ,CAAF,CAA4BjC,CAAnC;AAAuC;AADjC,SAAV,CAAH,CAAP,CAEHA,CAFG,IAEE,CAFT;AAGD,OAJwC,CAArB,GAIf,UAAUsM,EAAV,EAAc5M,GAAd,EAAmB2c,CAAnB,EAAsB;AACzB,YAAI06B,SAAS,GAAG13B,IAAI,CAACpD,WAAD,EAAcvc,GAAd,CAApB;AACA,YAAIq3C,SAAJ,EAAe,OAAO96B,WAAW,CAACvc,GAAD,CAAlB;AACfiN,QAAAA,EAAE,CAACL,EAAD,EAAK5M,GAAL,EAAU2c,CAAV,CAAF;AACA,YAAI06B,SAAS,IAAIzqC,EAAE,KAAK2P,WAAxB,EAAqCtP,EAAE,CAACsP,WAAD,EAAcvc,GAAd,EAAmBq3C,SAAnB,CAAF;AACtC,OATmB,GAShBpqC,EATJ;;AAWA,UAAIzF,IAAI,GAAG,SAAPA,IAAO,CAAU3B,GAAV,EAAe;AACxB,YAAIyxC,GAAG,GAAGP,UAAU,CAAClxC,GAAD,CAAV,GAAkBka,OAAO,CAACrG,OAAO,CAAC9Y,SAAD,CAAR,CAAnC;;AACA02C,QAAAA,GAAG,CAACzG,EAAJ,GAAShrC,GAAT;AACA,eAAOyxC,GAAP;AACD,OAJD;;AAMA,UAAItkB,QAAQ,GAAGgf,UAAU,IAAI,SAAOt4B,OAAO,CAAC8C,QAAf,KAA2B,QAAzC,GAAoD,UAAU5P,EAAV,EAAc;AAC/E,eAAO,SAAOA,EAAP,KAAa,QAApB;AACD,OAFc,GAEX,UAAUA,EAAV,EAAc;AAChB,eAAOA,EAAE,YAAY8M,OAArB;AACD,OAJD;;AAMA,UAAI69B,eAAe,GAAG,SAASx7C,cAAT,CAAwB6Q,EAAxB,EAA4B5M,GAA5B,EAAiC2c,CAAjC,EAAoC;AACxD,YAAI/P,EAAE,KAAK2P,WAAX,EAAwBg7B,eAAe,CAACP,SAAD,EAAYh3C,GAAZ,EAAiB2c,CAAjB,CAAf;AACxB7P,QAAAA,QAAQ,CAACF,EAAD,CAAR;AACA5M,QAAAA,GAAG,GAAGgN,WAAW,CAAChN,GAAD,EAAM,IAAN,CAAjB;AACA8M,QAAAA,QAAQ,CAAC6P,CAAD,CAAR;;AACA,YAAIhc,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAAP,EAA0B;AACxB,cAAI,CAAC2c,CAAC,CAAC1gB,UAAP,EAAmB;AACjB,gBAAI,CAAC0E,GAAG,CAACiM,EAAD,EAAKgqC,MAAL,CAAR,EAAsB3pC,EAAE,CAACL,EAAD,EAAKgqC,MAAL,EAAa9mC,UAAU,CAAC,CAAD,EAAI,EAAJ,CAAvB,CAAF;AACtBlD,YAAAA,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,IAAkB,IAAlB;AACD,WAHD,MAGO;AACL,gBAAIW,GAAG,CAACiM,EAAD,EAAKgqC,MAAL,CAAH,IAAmBhqC,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,CAAvB,EAAwC4M,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,IAAkB,KAAlB;AACxC2c,YAAAA,CAAC,GAAGoD,OAAO,CAACpD,CAAD,EAAI;AAAE1gB,cAAAA,UAAU,EAAE6T,UAAU,CAAC,CAAD,EAAI,KAAJ;AAAxB,aAAJ,CAAX;AACD;;AAAC,iBAAOsnC,aAAa,CAACxqC,EAAD,EAAK5M,GAAL,EAAU2c,CAAV,CAApB;AACH;;AAAC,eAAO1P,EAAE,CAACL,EAAD,EAAK5M,GAAL,EAAU2c,CAAV,CAAT;AACH,OAdD;;AAeA,UAAI66B,iBAAiB,GAAG,SAASjhC,gBAAT,CAA0B3J,EAA1B,EAA8BrL,CAA9B,EAAiC;AACvDuL,QAAAA,QAAQ,CAACF,EAAD,CAAR;AACA,YAAIyI,IAAI,GAAG+gC,QAAQ,CAAC70C,CAAC,GAAG2a,SAAS,CAAC3a,CAAD,CAAd,CAAnB;AACA,YAAIlG,CAAC,GAAG,CAAR;AACA,YAAIC,CAAC,GAAG+Z,IAAI,CAACtV,MAAb;AACA,YAAIC,GAAJ;;AACA,eAAO1E,CAAC,GAAGD,CAAX;AAAck8C,UAAAA,eAAe,CAAC3qC,EAAD,EAAK5M,GAAG,GAAGqV,IAAI,CAACha,CAAC,EAAF,CAAf,EAAsBkG,CAAC,CAACvB,GAAD,CAAvB,CAAf;AAAd;;AACA,eAAO4M,EAAP;AACD,OARD;;AASA,UAAI6qC,OAAO,GAAG,SAASx/B,MAAT,CAAgBrL,EAAhB,EAAoBrL,CAApB,EAAuB;AACnC,eAAOA,CAAC,KAAKS,SAAN,GAAkB+d,OAAO,CAACnT,EAAD,CAAzB,GAAgC4qC,iBAAiB,CAACz3B,OAAO,CAACnT,EAAD,CAAR,EAAcrL,CAAd,CAAxD;AACD,OAFD;;AAGA,UAAIm2C,qBAAqB,GAAG,SAASzhC,oBAAT,CAA8BjW,GAA9B,EAAmC;AAC7D,YAAI23C,CAAC,GAAG7B,MAAM,CAACv6C,IAAP,CAAY,IAAZ,EAAkByE,GAAG,GAAGgN,WAAW,CAAChN,GAAD,EAAM,IAAN,CAAnC,CAAR;AACA,YAAI,SAASuc,WAAT,IAAwB5b,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAA3B,IAAgD,CAACW,GAAG,CAACq2C,SAAD,EAAYh3C,GAAZ,CAAxD,EAA0E,OAAO,KAAP;AAC1E,eAAO23C,CAAC,IAAI,CAACh3C,GAAG,CAAC,IAAD,EAAOX,GAAP,CAAT,IAAwB,CAACW,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAA5B,IAAiDW,GAAG,CAAC,IAAD,EAAOi2C,MAAP,CAAH,IAAqB,KAAKA,MAAL,EAAa52C,GAAb,CAAtE,GAA0F23C,CAA1F,GAA8F,IAArG;AACD,OAJD;;AAKA,UAAIC,yBAAyB,GAAG,SAASh4B,wBAAT,CAAkChT,EAAlC,EAAsC5M,GAAtC,EAA2C;AACzE4M,QAAAA,EAAE,GAAGsP,SAAS,CAACtP,EAAD,CAAd;AACA5M,QAAAA,GAAG,GAAGgN,WAAW,CAAChN,GAAD,EAAM,IAAN,CAAjB;AACA,YAAI4M,EAAE,KAAK2P,WAAP,IAAsB5b,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAAzB,IAA8C,CAACW,GAAG,CAACq2C,SAAD,EAAYh3C,GAAZ,CAAtD,EAAwE;AACxE,YAAI2c,CAAC,GAAGgD,IAAI,CAAC/S,EAAD,EAAK5M,GAAL,CAAZ;AACA,YAAI2c,CAAC,IAAIhc,GAAG,CAACo2C,UAAD,EAAa/2C,GAAb,CAAR,IAA6B,EAAEW,GAAG,CAACiM,EAAD,EAAKgqC,MAAL,CAAH,IAAmBhqC,EAAE,CAACgqC,MAAD,CAAF,CAAW52C,GAAX,CAArB,CAAjC,EAAwE2c,CAAC,CAAC1gB,UAAF,GAAe,IAAf;AACxE,eAAO0gB,CAAP;AACD,OAPD;;AAQA,UAAIk7B,oBAAoB,GAAG,SAASp4B,mBAAT,CAA6B7S,EAA7B,EAAiC;AAC1D,YAAIwP,KAAK,GAAGq6B,IAAI,CAACv6B,SAAS,CAACtP,EAAD,CAAV,CAAhB;AACA,YAAItO,MAAM,GAAG,EAAb;AACA,YAAIjD,CAAC,GAAG,CAAR;AACA,YAAI2E,GAAJ;;AACA,eAAOoc,KAAK,CAACrc,MAAN,GAAe1E,CAAtB,EAAyB;AACvB,cAAI,CAACsF,GAAG,CAACo2C,UAAD,EAAa/2C,GAAG,GAAGoc,KAAK,CAAC/gB,CAAC,EAAF,CAAxB,CAAJ,IAAsC2E,GAAG,IAAI42C,MAA7C,IAAuD52C,GAAG,IAAIg2C,IAAlE,EAAwE13C,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ;AACzE;;AAAC,eAAO1B,MAAP;AACH,OARD;;AASA,UAAIw5C,sBAAsB,GAAG,SAASv+B,qBAAT,CAA+B3M,EAA/B,EAAmC;AAC9D,YAAImrC,KAAK,GAAGnrC,EAAE,KAAK2P,WAAnB;AACA,YAAIH,KAAK,GAAGq6B,IAAI,CAACsB,KAAK,GAAGf,SAAH,GAAe96B,SAAS,CAACtP,EAAD,CAA9B,CAAhB;AACA,YAAItO,MAAM,GAAG,EAAb;AACA,YAAIjD,CAAC,GAAG,CAAR;AACA,YAAI2E,GAAJ;;AACA,eAAOoc,KAAK,CAACrc,MAAN,GAAe1E,CAAtB,EAAyB;AACvB,cAAIsF,GAAG,CAACo2C,UAAD,EAAa/2C,GAAG,GAAGoc,KAAK,CAAC/gB,CAAC,EAAF,CAAxB,CAAH,KAAsC08C,KAAK,GAAGp3C,GAAG,CAAC4b,WAAD,EAAcvc,GAAd,CAAN,GAA2B,IAAtE,CAAJ,EAAiF1B,MAAM,CAACkL,IAAP,CAAYutC,UAAU,CAAC/2C,GAAD,CAAtB;AAClF;;AAAC,eAAO1B,MAAP;AACH,OATD,CA5HsD,CAuItD;;;AACA,UAAI,CAAC0zC,UAAL,EAAiB;AACft4B,QAAAA,OAAO,GAAG,SAASlc,QAAT,GAAkB;AAC1B,cAAI,gBAAgBkc,OAApB,EAA6B,MAAM7M,SAAS,CAAC,8BAAD,CAAf;AAC7B,cAAIhH,GAAG,GAAGtI,GAAG,CAAC4C,SAAS,CAACJ,MAAV,GAAmB,CAAnB,GAAuBI,SAAS,CAAC,CAAD,CAAhC,GAAsC6B,SAAvC,CAAb;;AACA,cAAIg2C,IAAI,GAAG,SAAPA,IAAO,CAAUz1C,KAAV,EAAiB;AAC1B,gBAAI,SAASga,WAAb,EAA0By7B,IAAI,CAACz8C,IAAL,CAAUy7C,SAAV,EAAqBz0C,KAArB;AAC1B,gBAAI5B,GAAG,CAAC,IAAD,EAAOi2C,MAAP,CAAH,IAAqBj2C,GAAG,CAAC,KAAKi2C,MAAL,CAAD,EAAe/wC,GAAf,CAA5B,EAAiD,KAAK+wC,MAAL,EAAa/wC,GAAb,IAAoB,KAApB;AACjDuxC,YAAAA,aAAa,CAAC,IAAD,EAAOvxC,GAAP,EAAYiK,UAAU,CAAC,CAAD,EAAIvN,KAAJ,CAAtB,CAAb;AACD,WAJD;;AAKA,cAAI8yC,WAAW,IAAI6B,MAAnB,EAA2BE,aAAa,CAAC76B,WAAD,EAAc1W,GAAd,EAAmB;AAAE7J,YAAAA,YAAY,EAAE,IAAhB;AAAsBmJ,YAAAA,GAAG,EAAE6yC;AAA3B,WAAnB,CAAb;AAC3B,iBAAOxwC,IAAI,CAAC3B,GAAD,CAAX;AACD,SAVD;;AAWA2U,QAAAA,QAAQ,CAACd,OAAO,CAAC9Y,SAAD,CAAR,EAAqB,UAArB,EAAiC,SAAShD,QAAT,GAAoB;AAC3D,iBAAO,KAAKizC,EAAZ;AACD,SAFO,CAAR;AAIAyF,QAAAA,KAAK,CAACppC,CAAN,GAAU0qC,yBAAV;AACApB,QAAAA,GAAG,CAACtpC,CAAJ,GAAQqqC,eAAR;AACAp8C,QAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,GAA4BmpC,OAAO,CAACnpC,CAAR,GAAY2qC,oBAAxC;AACA18C,QAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,GAA4BwqC,qBAA5B;AACAnB,QAAAA,KAAK,CAACrpC,CAAN,GAAU4qC,sBAAV;;AAEA,YAAIzC,WAAW,IAAI,CAACl6C,mBAAmB,CAAC,EAAD,CAAvC,EAA6C;AAC3Cqf,UAAAA,QAAQ,CAAC+B,WAAD,EAAc,sBAAd,EAAsCm7B,qBAAtC,EAA6D,IAA7D,CAAR;AACD;;AAEDj+B,QAAAA,MAAM,CAACvM,CAAP,GAAW,UAAUvR,IAAV,EAAgB;AACzB,iBAAO6L,IAAI,CAAC0uC,GAAG,CAACv6C,IAAD,CAAJ,CAAX;AACD,SAFD;AAGD;;AAEDkF,MAAAA,OAAO,CAACA,OAAO,CAACM,CAAR,GAAYN,OAAO,CAACc,CAApB,GAAwBd,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAAtC,EAAkD;AAAEx0C,QAAAA,MAAM,EAAEkc;AAAV,OAAlD,CAAP;;AAEA,WAAK,IAAIu+B,UAAU,GACjB;AACA,sHAFoB,CAGpBt0C,KAHoB,CAGd,GAHc,CAAjB,EAGSy0B,CAAC,GAAG,CAHlB,EAGqB6f,UAAU,CAACl4C,MAAX,GAAoBq4B,CAHzC;AAG4C8d,QAAAA,GAAG,CAAC+B,UAAU,CAAC7f,CAAC,EAAF,CAAX,CAAH;AAH5C;;AAKA,WAAK,IAAI8f,gBAAgB,GAAG/iC,KAAK,CAAC+gC,GAAG,CAAC54C,KAAL,CAA5B,EAAyCqtB,CAAC,GAAG,CAAlD,EAAqDutB,gBAAgB,CAACn4C,MAAjB,GAA0B4qB,CAA/E;AAAmFwrB,QAAAA,SAAS,CAAC+B,gBAAgB,CAACvtB,CAAC,EAAF,CAAjB,CAAT;AAAnF;;AAEA9pB,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAA1B,EAAsC,QAAtC,EAAgD;AACrD;AACA,eAAO,cAAUhyC,GAAV,EAAe;AACpB,iBAAOW,GAAG,CAACm2C,cAAD,EAAiB92C,GAAG,IAAI,EAAxB,CAAH,GACH82C,cAAc,CAAC92C,GAAD,CADX,GAEH82C,cAAc,CAAC92C,GAAD,CAAd,GAAsB0Z,OAAO,CAAC1Z,GAAD,CAFjC;AAGD,SANoD;AAOrD;AACAm4C,QAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBb,GAAhB,EAAqB;AAC3B,cAAI,CAACtkB,QAAQ,CAACskB,GAAD,CAAb,EAAoB,MAAMzqC,SAAS,CAACyqC,GAAG,GAAG,mBAAP,CAAf;;AACpB,eAAK,IAAIt3C,GAAT,IAAgB82C,cAAhB;AAAgC,gBAAIA,cAAc,CAAC92C,GAAD,CAAd,KAAwBs3C,GAA5B,EAAiC,OAAOt3C,GAAP;AAAjE;AACD,SAXoD;AAYrDo4C,QAAAA,SAAS,EAAE,qBAAY;AAAElB,UAAAA,MAAM,GAAG,IAAT;AAAgB,SAZY;AAarDmB,QAAAA,SAAS,EAAE,qBAAY;AAAEnB,UAAAA,MAAM,GAAG,KAAT;AAAiB;AAbW,OAAhD,CAAP;AAgBAr2C,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC+wC,UAA1B,EAAsC,QAAtC,EAAgD;AACrD;AACA/5B,QAAAA,MAAM,EAAEw/B,OAF6C;AAGrD;AACA17C,QAAAA,cAAc,EAAEw7C,eAJqC;AAKrD;AACAhhC,QAAAA,gBAAgB,EAAEihC,iBANmC;AAOrD;AACA53B,QAAAA,wBAAwB,EAAEg4B,yBAR2B;AASrD;AACAn4B,QAAAA,mBAAmB,EAAEo4B,oBAVgC;AAWrD;AACAt+B,QAAAA,qBAAqB,EAAEu+B;AAZ8B,OAAhD,CAAP,CAhMsD,CA+MtD;AACA;;AACA,UAAIQ,mBAAmB,GAAGrC,MAAM,CAAC,YAAY;AAAEM,QAAAA,KAAK,CAACrpC,CAAN,CAAQ,CAAR;AAAa,OAA5B,CAAhC;AAEArM,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAYq3C,mBAAzB,EAA8C,QAA9C,EAAwD;AAC7D/+B,QAAAA,qBAAqB,EAAE,SAASA,qBAAT,CAA+B3M,EAA/B,EAAmC;AACxD,iBAAO2pC,KAAK,CAACrpC,CAAN,CAAQoP,QAAQ,CAAC1P,EAAD,CAAhB,CAAP;AACD;AAH4D,OAAxD,CAAP,CAnNsD,CAyNtD;;AACA8pC,MAAAA,KAAK,IAAI71C,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,IAAa,CAAC+wC,UAAD,IAAeiE,MAAM,CAAC,YAAY;AAC1E,YAAI50C,CAAC,GAAGqY,OAAO,EAAf,CAD0E,CAE1E;AACA;AACA;;AACA,eAAOi9B,UAAU,CAAC,CAACt1C,CAAD,CAAD,CAAV,IAAmB,QAAnB,IAA+Bs1C,UAAU,CAAC;AAAEr2C,UAAAA,CAAC,EAAEe;AAAL,SAAD,CAAV,IAAwB,IAAvD,IAA+Ds1C,UAAU,CAAC76C,MAAM,CAACuF,CAAD,CAAP,CAAV,IAAyB,IAA/F;AACD,OAN8D,CAAlC,CAAb,EAMX,MANW,EAMH;AACXkiB,QAAAA,SAAS,EAAE,SAASA,SAAT,CAAmB3W,EAAnB,EAAuB;AAChC,cAAI9D,IAAI,GAAG,CAAC8D,EAAD,CAAX;AACA,cAAIvR,CAAC,GAAG,CAAR;AACA,cAAIk3B,QAAJ,EAAcgmB,SAAd;;AACA,iBAAOp4C,SAAS,CAACJ,MAAV,GAAmB1E,CAA1B;AAA6ByN,YAAAA,IAAI,CAACU,IAAL,CAAUrJ,SAAS,CAAC9E,CAAC,EAAF,CAAnB;AAA7B;;AACAk9C,UAAAA,SAAS,GAAGhmB,QAAQ,GAAGzpB,IAAI,CAAC,CAAD,CAA3B;AACA,cAAI,CAAClK,QAAQ,CAAC2zB,QAAD,CAAT,IAAuB3lB,EAAE,KAAK5K,SAA9B,IAA2CgxB,QAAQ,CAACpmB,EAAD,CAAvD,EAA6D,OAN7B,CAMqC;;AACrE,cAAI,CAAC/O,OAAO,CAAC00B,QAAD,CAAZ,EAAwBA,QAAQ,GAAG,kBAAUvyB,GAAV,EAAeuC,KAAf,EAAsB;AACvD,gBAAI,OAAOg2C,SAAP,IAAoB,UAAxB,EAAoCh2C,KAAK,GAAGg2C,SAAS,CAACh9C,IAAV,CAAe,IAAf,EAAqByE,GAArB,EAA0BuC,KAA1B,CAAR;AACpC,gBAAI,CAACywB,QAAQ,CAACzwB,KAAD,CAAb,EAAsB,OAAOA,KAAP;AACvB,WAHuB;AAIxBuG,UAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUypB,QAAV;AACA,iBAAOokB,UAAU,CAACz0C,KAAX,CAAiBw0C,KAAjB,EAAwB5tC,IAAxB,CAAP;AACD;AAdU,OANG,CAAhB,CA1NsD,CAiPtD;;AACA4Q,MAAAA,OAAO,CAAC9Y,SAAD,CAAP,CAAmBi2C,YAAnB,KAAoC17C,mBAAmB,CAAC,EAAD,CAAnB,CAAwBue,OAAO,CAAC9Y,SAAD,CAA/B,EAA4Ci2C,YAA5C,EAA0Dn9B,OAAO,CAAC9Y,SAAD,CAAP,CAAmBgW,OAA7E,CAApC,CAlPsD,CAmPtD;;AACA8D,MAAAA,cAAc,CAAChB,OAAD,EAAU,QAAV,CAAd,CApPsD,CAqPtD;;AACAgB,MAAAA,cAAc,CAACxd,IAAD,EAAO,MAAP,EAAe,IAAf,CAAd,CAtPsD,CAuPtD;;AACAwd,MAAAA,cAAc,CAAC1d,MAAM,CAACsmB,IAAR,EAAc,MAAd,EAAsB,IAAtB,CAAd;AAGA;AAAO,KAlzQG;AAmzQV;;AACA;AAAO,cAASxoB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI66C,IAAI,GAAG76C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,MAAxB,CAAX;;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIwF,GAAG,GAAGxF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAIq9C,OAAO,GAAGr9C,mBAAmB,CAAC,CAAD,CAAnB,CAAuB+R,CAArC;;AACA,UAAIoI,EAAE,GAAG,CAAT;;AACA,UAAImjC,YAAY,GAAG38C,MAAM,CAAC28C,YAAP,IAAuB,YAAY;AACpD,eAAO,IAAP;AACD,OAFD;;AAGA,UAAIC,MAAM,GAAG,CAACv9C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAY;AAChD,eAAOs9C,YAAY,CAAC38C,MAAM,CAAC68C,iBAAP,CAAyB,EAAzB,CAAD,CAAnB;AACD,OAFa,CAAd;;AAGA,UAAIC,OAAO,GAAG,SAAVA,OAAU,CAAUhsC,EAAV,EAAc;AAC1B4rC,QAAAA,OAAO,CAAC5rC,EAAD,EAAKopC,IAAL,EAAW;AAAEzzC,UAAAA,KAAK,EAAE;AACzBlH,YAAAA,CAAC,EAAE,MAAM,EAAEia,EADc;AACV;AACfwV,YAAAA,CAAC,EAAE,EAFsB,CAEV;;AAFU;AAAT,SAAX,CAAP;AAID,OALD;;AAMA,UAAI+tB,OAAO,GAAG,SAAVA,OAAU,CAAUjsC,EAAV,EAAcqL,MAAd,EAAsB;AAClC;AACA,YAAI,CAACrZ,QAAQ,CAACgO,EAAD,CAAb,EAAmB,OAAO,SAAOA,EAAP,KAAa,QAAb,GAAwBA,EAAxB,GAA6B,CAAC,OAAOA,EAAP,IAAa,QAAb,GAAwB,GAAxB,GAA8B,GAA/B,IAAsCA,EAA1E;;AACnB,YAAI,CAACjM,GAAG,CAACiM,EAAD,EAAKopC,IAAL,CAAR,EAAoB;AAClB;AACA,cAAI,CAACyC,YAAY,CAAC7rC,EAAD,CAAjB,EAAuB,OAAO,GAAP,CAFL,CAGlB;;AACA,cAAI,CAACqL,MAAL,EAAa,OAAO,GAAP,CAJK,CAKlB;;AACA2gC,UAAAA,OAAO,CAAChsC,EAAD,CAAP,CANkB,CAOpB;AACC;;AAAC,eAAOA,EAAE,CAACopC,IAAD,CAAF,CAAS36C,CAAhB;AACH,OAZD;;AAaA,UAAIy9C,OAAO,GAAG,SAAVA,OAAU,CAAUlsC,EAAV,EAAcqL,MAAd,EAAsB;AAClC,YAAI,CAACtX,GAAG,CAACiM,EAAD,EAAKopC,IAAL,CAAR,EAAoB;AAClB;AACA,cAAI,CAACyC,YAAY,CAAC7rC,EAAD,CAAjB,EAAuB,OAAO,IAAP,CAFL,CAGlB;;AACA,cAAI,CAACqL,MAAL,EAAa,OAAO,KAAP,CAJK,CAKlB;;AACA2gC,UAAAA,OAAO,CAAChsC,EAAD,CAAP,CANkB,CAOpB;AACC;;AAAC,eAAOA,EAAE,CAACopC,IAAD,CAAF,CAASlrB,CAAhB;AACH,OAVD,CAhCsD,CA2CtD;;;AACA,UAAIiuB,QAAQ,GAAG,SAAXA,QAAW,CAAUnsC,EAAV,EAAc;AAC3B,YAAI8rC,MAAM,IAAItJ,IAAI,CAAC4J,IAAf,IAAuBP,YAAY,CAAC7rC,EAAD,CAAnC,IAA2C,CAACjM,GAAG,CAACiM,EAAD,EAAKopC,IAAL,CAAnD,EAA+D4C,OAAO,CAAChsC,EAAD,CAAP;AAC/D,eAAOA,EAAP;AACD,OAHD;;AAIA,UAAIwiC,IAAI,GAAGt0C,MAAM,CAACD,OAAP,GAAiB;AAC1BikB,QAAAA,GAAG,EAAEk3B,IADqB;AAE1BgD,QAAAA,IAAI,EAAE,KAFoB;AAG1BH,QAAAA,OAAO,EAAEA,OAHiB;AAI1BC,QAAAA,OAAO,EAAEA,OAJiB;AAK1BC,QAAAA,QAAQ,EAAEA;AALgB,OAA5B;AASA;AAAO,KA72QG;AA82QV;;AACA;AAAO,cAASj+C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIk1C,OAAO,GAAGl1C,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAIq6C,IAAI,GAAGr6C,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIukB,GAAG,GAAGvkB,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU+R,EAAV,EAAc;AAC7B,YAAItO,MAAM,GAAG+xC,OAAO,CAACzjC,EAAD,CAApB;AACA,YAAIipC,UAAU,GAAGL,IAAI,CAACtoC,CAAtB;;AACA,YAAI2oC,UAAJ,EAAgB;AACd,cAAIjiB,OAAO,GAAGiiB,UAAU,CAACjpC,EAAD,CAAxB;AACA,cAAIkpC,MAAM,GAAGp2B,GAAG,CAACxS,CAAjB;AACA,cAAI7R,CAAC,GAAG,CAAR;AACA,cAAI2E,GAAJ;;AACA,iBAAO4zB,OAAO,CAAC7zB,MAAR,GAAiB1E,CAAxB;AAA2B,gBAAIy6C,MAAM,CAACv6C,IAAP,CAAYqR,EAAZ,EAAgB5M,GAAG,GAAG4zB,OAAO,CAACv4B,CAAC,EAAF,CAA7B,CAAJ,EAAyCiD,MAAM,CAACkL,IAAP,CAAYxJ,GAAZ;AAApE;AACD;;AAAC,eAAO1B,MAAP;AACH,OAVD;AAaA;;AAAO,KAl4QG;AAm4QV;;AACA;AAAO,cAASxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAIsd,GAAG,GAAGtd,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBmN,KAAK,CAACnK,OAAN,IAAiB,SAASA,OAAT,CAAiBu+B,GAAjB,EAAsB;AACtD,eAAO3jB,GAAG,CAAC2jB,GAAD,CAAH,IAAY,OAAnB;AACD,OAFD;AAKA;;AAAO,KA74QG;AA84QV;;AACA;AAAO,cAASthC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI+gB,SAAS,GAAG/gB,mBAAmB,CAAC,EAAD,CAAnC;;AACA,UAAIs7C,IAAI,GAAGt7C,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAnC;;AACA,UAAItP,QAAQ,GAAG,GAAGA,QAAlB;AAEA,UAAIq7C,WAAW,GAAG,QAAOh8C,MAAP,0CAAOA,MAAP,MAAiB,QAAjB,IAA6BA,MAA7B,IAAuCnB,MAAM,CAAC2jB,mBAA9C,GACd3jB,MAAM,CAAC2jB,mBAAP,CAA2BxiB,MAA3B,CADc,GACuB,EADzC;;AAGA,UAAIi8C,cAAc,GAAG,SAAjBA,cAAiB,CAAUtsC,EAAV,EAAc;AACjC,YAAI;AACF,iBAAO6pC,IAAI,CAAC7pC,EAAD,CAAX;AACD,SAFD,CAEE,OAAOpH,CAAP,EAAU;AACV,iBAAOyzC,WAAW,CAAC3lC,KAAZ,EAAP;AACD;AACF,OAND;;AAQAxY,MAAAA,MAAM,CAACD,OAAP,CAAeqS,CAAf,GAAmB,SAASuS,mBAAT,CAA6B7S,EAA7B,EAAiC;AAClD,eAAOqsC,WAAW,IAAIr7C,QAAQ,CAACrC,IAAT,CAAcqR,EAAd,KAAqB,iBAApC,GAAwDssC,cAAc,CAACtsC,EAAD,CAAtE,GAA6E6pC,IAAI,CAACv6B,SAAS,CAACtP,EAAD,CAAV,CAAxF;AACD,OAFD;AAKA;;AAAO,KAt6QG;AAu6QV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,eAAxB;AAGA;;AAAO,KA76QG;AA86QV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,YAAxB;AAGA;;AAAO,KAp7QG;AAq7QV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA17QG;AA27QV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8Bq9C,cAA/C;AAGA;AAAO,KAl8QG;AAm8QV;;AACA;AAAO,cAASr+C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAT,EAAY,QAAZ,EAAsB;AAAE83C,QAAAA,cAAc,EAAEh+C,mBAAmB,CAAC,GAAD,CAAnB,CAAyBgK;AAA3C,OAAtB,CAAP;AAGA;AAAO,KA38QG;AA48QV;;AACA;AAAO,cAASrK,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AACA;AACA,UAAIyD,QAAQ,GAAGzD,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIi+C,KAAK,GAAG,SAARA,KAAQ,CAAUjsC,CAAV,EAAanC,KAAb,EAAoB;AAC9B8B,QAAAA,QAAQ,CAACK,CAAD,CAAR;AACA,YAAI,CAACvO,QAAQ,CAACoM,KAAD,CAAT,IAAoBA,KAAK,KAAK,IAAlC,EAAwC,MAAM6B,SAAS,CAAC7B,KAAK,GAAG,2BAAT,CAAf;AACzC,OAHD;;AAIAlQ,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfsK,QAAAA,GAAG,EAAErJ,MAAM,CAACq9C,cAAP,KAA0B,eAAe,EAAf,GAAoB;AACjD,kBAAU5yC,IAAV,EAAgB8yC,KAAhB,EAAuBl0C,GAAvB,EAA4B;AAC1B,cAAI;AACFA,YAAAA,GAAG,GAAGhK,mBAAmB,CAAC,EAAD,CAAnB,CAAwBiC,QAAQ,CAAC7B,IAAjC,EAAuCJ,mBAAmB,CAAC,EAAD,CAAnB,CAAwB+R,CAAxB,CAA0BpR,MAAM,CAACW,SAAjC,EAA4C,WAA5C,EAAyD0I,GAAhG,EAAqG,CAArG,CAAN;AACAA,YAAAA,GAAG,CAACoB,IAAD,EAAO,EAAP,CAAH;AACA8yC,YAAAA,KAAK,GAAG,EAAE9yC,IAAI,YAAYyB,KAAlB,CAAR;AACD,WAJD,CAIE,OAAOxC,CAAP,EAAU;AAAE6zC,YAAAA,KAAK,GAAG,IAAR;AAAe;;AAC7B,iBAAO,SAASF,cAAT,CAAwBhsC,CAAxB,EAA2BnC,KAA3B,EAAkC;AACvCouC,YAAAA,KAAK,CAACjsC,CAAD,EAAInC,KAAJ,CAAL;AACA,gBAAIquC,KAAJ,EAAWlsC,CAAC,CAACgT,SAAF,GAAcnV,KAAd,CAAX,KACK7F,GAAG,CAACgI,CAAD,EAAInC,KAAJ,CAAH;AACL,mBAAOmC,CAAP;AACD,WALD;AAMD,SAZD,CAYE,EAZF,EAYM,KAZN,CAD6B,GAadnL,SAbZ,CADU;AAefo3C,QAAAA,KAAK,EAAEA;AAfQ,OAAjB;AAmBA;AAAO,KA1+QG;AA2+QV;;AACA;AAAO,cAASt+C,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAh/QG;AAi/QV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACA,UAAIivB,OAAO,GAAGjvB,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAArC;;AACAhB,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASod,MAAT,CAAgB1W,CAAhB,EAAmBob,CAAnB,EAAsB;AACrC,eAAOyN,OAAO,CAACnS,MAAR,CAAe1W,CAAf,EAAkBob,CAAlB,CAAP;AACD,OAFD;AAKA;;AAAO,KA3/QG;AA4/QV;;AACA;AAAO,cAAS7hB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC,CAFsD,CAGtD;;;AACA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAT,EAAY,QAAZ,EAAsB;AAAE4W,QAAAA,MAAM,EAAE9c,mBAAmB,CAAC,EAAD;AAA7B,OAAtB,CAAP;AAGA;AAAO,KApgRG;AAqgRV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI+2C,SAAS,GAAGn+C,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIo+C,UAAU,GAAGjjC,sBAAsB,CAACgjC,SAAD,CAAvC;;AAEA,eAAShjC,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB0+C,UAAU,WAA5B;AACA;;;;;AAKAz+C,MAAAA,MAAM,CAACD,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB;AAEA;AAAO,KA7hRG;AA8hRV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAIi3C,cAAc,GAAG,YAAY;AAAE,iBAASC,aAAT,CAAuBrxC,GAAvB,EAA4B/M,CAA5B,EAA+B;AAAE,cAAIq+C,IAAI,GAAG,EAAX;AAAe,cAAIpH,EAAE,GAAG,IAAT;AAAe,cAAIsB,EAAE,GAAG,KAAT;AAAgB,cAAI+F,EAAE,GAAG33C,SAAT;;AAAoB,cAAI;AAAE,iBAAK,IAAIgT,EAAE,GAAG5M,GAAG,CAAC5K,MAAM,CAACgf,QAAR,CAAH,EAAT,EAAiCm2B,EAAtC,EAA0C,EAAEL,EAAE,GAAG,CAACK,EAAE,GAAG39B,EAAE,CAACkG,IAAH,EAAN,EAAiBhG,IAAxB,CAA1C,EAAyEo9B,EAAE,GAAG,IAA9E,EAAoF;AAAEoH,cAAAA,IAAI,CAAClwC,IAAL,CAAUmpC,EAAE,CAACpwC,KAAb;;AAAqB,kBAAIlH,CAAC,IAAIq+C,IAAI,CAAC35C,MAAL,KAAgB1E,CAAzB,EAA4B;AAAQ;AAAE,WAAvJ,CAAwJ,OAAO6mB,GAAP,EAAY;AAAE0xB,YAAAA,EAAE,GAAG,IAAL;AAAW+F,YAAAA,EAAE,GAAGz3B,GAAL;AAAW,WAA5L,SAAqM;AAAE,gBAAI;AAAE,kBAAI,CAACowB,EAAD,IAAOt9B,EAAE,CAAC,QAAD,CAAb,EAAyBA,EAAE,CAAC,QAAD,CAAF;AAAiB,aAAhD,SAAyD;AAAE,kBAAI4+B,EAAJ,EAAQ,MAAM+F,EAAN;AAAW;AAAE;;AAAC,iBAAOD,IAAP;AAAc;;AAAC,eAAO,UAAUtxC,GAAV,EAAe/M,CAAf,EAAkB;AAAE,cAAI2M,KAAK,CAACnK,OAAN,CAAcuK,GAAd,CAAJ,EAAwB;AAAE,mBAAOA,GAAP;AAAa,WAAvC,MAA6C,IAAI5K,MAAM,CAACgf,QAAP,IAAmB1gB,MAAM,CAACsM,GAAD,CAA7B,EAAoC;AAAE,mBAAOqxC,aAAa,CAACrxC,GAAD,EAAM/M,CAAN,CAApB;AAA+B,WAArE,MAA2E;AAAE,kBAAM,IAAIwR,SAAJ,CAAc,sDAAd,CAAN;AAA8E;AAAE,SAArO;AAAwO,OAAhoB,EAArB;;AAEA,UAAI+sC,QAAQ,GAAG99C,MAAM,CAAC2yB,MAAP,IAAiB,UAAU5sB,MAAV,EAAkB;AAAE,aAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAAE,cAAI0F,MAAM,GAAGZ,SAAS,CAAC9E,CAAD,CAAtB;;AAA2B,eAAK,IAAI2E,GAAT,IAAgBe,MAAhB,EAAwB;AAAE,gBAAIjF,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCwF,MAArC,EAA6Cf,GAA7C,CAAJ,EAAuD;AAAE6B,cAAAA,MAAM,CAAC7B,GAAD,CAAN,GAAce,MAAM,CAACf,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,eAAO6B,MAAP;AAAgB,OAAhQ;;AAEA,UAAIg4C,YAAY,GAAG,YAAY;AAAE,iBAAStjC,gBAAT,CAA0B1U,MAA1B,EAAkCuF,KAAlC,EAAyC;AAAE,eAAK,IAAI/L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+L,KAAK,CAACrH,MAA1B,EAAkC1E,CAAC,EAAnC,EAAuC;AAAE,gBAAImb,UAAU,GAAGpP,KAAK,CAAC/L,CAAD,CAAtB;AAA2Bmb,YAAAA,UAAU,CAACva,UAAX,GAAwBua,UAAU,CAACva,UAAX,IAAyB,KAAjD;AAAwDua,YAAAA,UAAU,CAACxa,YAAX,GAA0B,IAA1B;AAAgC,gBAAI,WAAWwa,UAAf,EAA2BA,UAAU,CAAC5B,QAAX,GAAsB,IAAtB;AAA4B9Y,YAAAA,MAAM,CAACC,cAAP,CAAsB8F,MAAtB,EAA8B2U,UAAU,CAACxW,GAAzC,EAA8CwW,UAA9C;AAA4D;AAAE;;AAAC,eAAO,UAAUL,WAAV,EAAuBM,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,cAAID,UAAJ,EAAgBF,gBAAgB,CAACJ,WAAW,CAAC1Z,SAAb,EAAwBga,UAAxB,CAAhB;AAAqD,cAAIC,WAAJ,EAAiBH,gBAAgB,CAACJ,WAAD,EAAcO,WAAd,CAAhB;AAA4C,iBAAOP,WAAP;AAAqB,SAAhN;AAAmN,OAA9hB,EAAnB;;AAEA,UAAI+S,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA/tB,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AAEA,UAAI2+C,cAAc,GAAG3+C,mBAAmB,CAAC,GAAD,CAAxC;;AAEA,UAAI4+C,eAAe,GAAGzjC,sBAAsB,CAACwjC,cAAD,CAA5C;;AAEA,UAAIE,gBAAgB,GAAG7+C,mBAAmB,CAAC,GAAD,CAA1C;;AAEA,UAAI8+C,QAAQ,GAAG9+C,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,eAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,eAASq6C,eAAT,CAAyBhkC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,YAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,gBAAM,IAAItJ,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,eAASstC,0BAAT,CAAoCh9C,IAApC,EAA0C5B,IAA1C,EAAgD;AAAE,YAAI,CAAC4B,IAAL,EAAW;AAAE,gBAAM,IAAI+hB,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,eAAO3jB,IAAI,KAAK,SAAOA,IAAP,MAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0E4B,IAAjF;AAAwF;;AAEhP,eAASi9C,SAAT,CAAmBn6B,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,YAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,gBAAM,IAAIrT,SAAJ,CAAc,sEAAoEqT,UAApE,CAAd,CAAN;AAAsG;;AAACD,QAAAA,QAAQ,CAACxjB,SAAT,GAAqBX,MAAM,CAACmc,MAAP,CAAciI,UAAU,IAAIA,UAAU,CAACzjB,SAAvC,EAAkD;AAAEwB,UAAAA,WAAW,EAAE;AAAEsE,YAAAA,KAAK,EAAE0d,QAAT;AAAmBhkB,YAAAA,UAAU,EAAE,KAA/B;AAAsC2Y,YAAAA,QAAQ,EAAE,IAAhD;AAAsD5Y,YAAAA,YAAY,EAAE;AAApE;AAAf,SAAlD,CAArB;AAAqK,YAAIkkB,UAAJ,EAAgBpkB,MAAM,CAACq9C,cAAP,GAAwBr9C,MAAM,CAACq9C,cAAP,CAAsBl5B,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACE,SAAT,GAAqBD,UAA3F;AAAwG;AAC9e;;;;;;;AAOA;;;AAEA,UAAIm6B,aAAa,GAAG,CAAC,GAAGL,gBAAgB,CAACM,oBAArB,GAApB;AACA,UAAIC,gBAAgB,GAAG,CAACF,aAAxB;;AAEA,eAASG,MAAT,CAAgBC,SAAhB,EAA2B;AACzB,eAAOA,SAAS,CAACz6C,GAAV,IAAiB,EAAxB;AACD;;AAED,UAAI06C,QAAQ,GAAG,UAAU7V,UAAV,EAAsB;AACnCuV,QAAAA,SAAS,CAACM,QAAD,EAAW7V,UAAX,CAAT;;AAEA,iBAAS6V,QAAT,GAAoB;AAClB,cAAItxB,IAAJ;;AAEA,cAAIuxB,KAAJ,EAAW7V,KAAX,EAAkB8V,IAAlB;;AAEAV,UAAAA,eAAe,CAAC,IAAD,EAAOQ,QAAP,CAAf;;AAEA,eAAK,IAAIn4B,IAAI,GAAGpiB,SAAS,CAACJ,MAArB,EAA6B+I,IAAI,GAAGd,KAAK,CAACua,IAAD,CAAzC,EAAiDC,IAAI,GAAG,CAA7D,EAAgEA,IAAI,GAAGD,IAAvE,EAA6EC,IAAI,EAAjF,EAAqF;AACnF1Z,YAAAA,IAAI,CAAC0Z,IAAD,CAAJ,GAAariB,SAAS,CAACqiB,IAAD,CAAtB;AACD;;AAED,iBAAOo4B,IAAI,IAAID,KAAK,IAAI7V,KAAK,GAAGqV,0BAA0B,CAAC,IAAD,EAAO,CAAC/wB,IAAI,GAAGsxB,QAAQ,CAACv6B,SAAT,IAAsBrkB,MAAM,CAAC6e,cAAP,CAAsB+/B,QAAtB,CAA9B,EAA+Dn/C,IAA/D,CAAoE2G,KAApE,CAA0EknB,IAA1E,EAAgF,CAAC,IAAD,EAAOnhB,MAAP,CAAca,IAAd,CAAhF,CAAP,CAAlC,EAAgJg8B,KAApJ,CAAL,EAAiKA,KAAK,CAAC/4B,KAAN,GAAc;AAC5LhG,YAAAA,QAAQ,EAAEmjB,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwBk9B,KAAK,CAAC19B,KAAN,CAAYrB,QAApC,EAA8C4B,GAA9C,CAAkD,UAAUyB,OAAV,EAAmB;AAC7E,qBAAOwwC,QAAQ,CAAC,EAAD,EAAKxwC,OAAL,EAAc;AAC3BA,gBAAAA,OAAO,EAAEA,OADkB;AAE3ByxC,gBAAAA,SAAS,EAAE;AAFgB,eAAd,CAAf;AAID,aALS;AADkL,WAA/K,EAOZ/V,KAAK,CAACgW,YAAN,GAAqB,EAPT,EAOahW,KAAK,CAACiW,UAAN,GAAmB;AAC7CC,YAAAA,OAAO,EAAE,IADoC;AAE7CC,YAAAA,WAAW,EAAE;AAFgC,WAPhC,EAUZnW,KAAK,CAACoW,qBAAN,GAA8B;AAC/BF,YAAAA,OAAO,EAAE;AADsB,WAVlB,EAYZlW,KAAK,CAACqW,mBAAN,GAA4B,CAZhB,EAYmBrW,KAAK,CAACsW,iBAAN,GAA0B,EAZ7C,EAYiDtW,KAAK,CAACuW,YAAN,GAAqB,YAAY;AAC/F,gBAAIC,eAAe,GAAGxW,KAAK,CAAC/4B,KAAN,CAAYhG,QAAZ,CAAqB+iB,MAArB,CAA4Bgc,KAAK,CAACyW,yBAAlC,CAAtB;;AAEAD,YAAAA,eAAe,CAAC17C,OAAhB,CAAwB,UAAU20B,KAAV,EAAiBp4B,CAAjB,EAAoB;AAC1C2oC,cAAAA,KAAK,CAACqW,mBAAN,IAA6B,CAA7B;;AACArW,cAAAA,KAAK,CAACsW,iBAAN,CAAwB5xC,IAAxB,CAA6BgxC,MAAM,CAACjmB,KAAD,CAAnC;;AACAuQ,cAAAA,KAAK,CAAC0W,YAAN,CAAmBjnB,KAAnB,EAA0Bp4B,CAA1B;AACD,aAJD;;AAMA,gBAAI,OAAO2oC,KAAK,CAAC19B,KAAN,CAAYq0C,UAAnB,KAAkC,UAAtC,EAAkD;AAChD3W,cAAAA,KAAK,CAAC4W,gBAAN,CAAuB5W,KAAK,CAAC19B,KAAN,CAAYq0C,UAAnC;AACD;AACF,WAxBc,EAwBZ3W,KAAK,CAACyW,yBAAN,GAAkC,UAAUhnB,KAAV,EAAiB;AACpD;AACA;AACA,gBAAI,CAACimB,MAAM,CAACjmB,KAAD,CAAX,EAAoB;AAClB,qBAAO,KAAP;AACD;;AAED,gBAAIkmB,SAAS,GAAG3V,KAAK,CAAC6W,YAAN,CAAmBnB,MAAM,CAACjmB,KAAD,CAAzB,CAAhB;;AACA,gBAAIqnB,YAAY,GAAGnB,SAAS,CAACO,OAA7B;AACA,gBAAIa,gBAAgB,GAAGpB,SAAS,CAACQ,WAAjC;AACA,gBAAIa,iBAAiB,GAAGhX,KAAK,CAACiW,UAAN,CAAiBE,WAAzC;;AAEA,gBAAI,CAACW,YAAL,EAAmB;AACjB,qBAAO,KAAP;AACD;;AAED,gBAAIG,WAAW,GAAGjX,KAAK,CAAC19B,KAAxB;AAAA,gBACIkjC,eAAe,GAAGyR,WAAW,CAACzR,eADlC;AAAA,gBAEIC,cAAc,GAAGwR,WAAW,CAACxR,cAFjC;AAAA,gBAGIC,cAAc,GAAGuR,WAAW,CAACvR,cAHjC;AAAA,gBAIIwR,WAAW,GAAGD,WAAW,CAACC,WAJ9B;AAOA,gBAAIC,wBAAwB,GAAG1nB,KAAK,CAACsmB,SAAN,IAAmBvQ,eAAlD;AACA,gBAAI4R,uBAAuB,GAAG3nB,KAAK,CAAC4nB,QAAN,IAAkB5R,cAAhD;AACA,gBAAI6R,sBAAsB,GAAG7nB,KAAK,CAAC8nB,OAAN,IAAiB7R,cAA9C;;AAEA,gBAAIyR,wBAAwB,IAAIC,uBAA5B,IAAuDE,sBAA3D,EAAmF;AACjF,qBAAO,IAAP;AACD,aA7BmD,CA+BpD;AACA;;;AAEA,gBAAIE,iBAAiB,GAAG,CAAC,GAAGtC,gBAAgB,CAACuC,gBAArB,EAAuC;AAC7DX,cAAAA,YAAY,EAAEA,YAD+C;AAE7DC,cAAAA,gBAAgB,EAAEA,gBAF2C;AAG7DC,cAAAA,iBAAiB,EAAEA,iBAH0C;AAI7DE,cAAAA,WAAW,EAAEA;AAJgD,aAAvC,CAAxB;AAAA,gBAMIQ,kBAAkB,GAAGhD,cAAc,CAAC8C,iBAAD,EAAoB,CAApB,CANvC;AAAA,gBAOIG,EAAE,GAAGD,kBAAkB,CAAC,CAAD,CAP3B;AAAA,gBAQIE,EAAE,GAAGF,kBAAkB,CAAC,CAAD,CAR3B;;AAUA,mBAAOC,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAA1B;AACD,WArEc,EAqEZ/B,KArEQ,CAAJ,EAqEIR,0BAA0B,CAACrV,KAAD,EAAQ8V,IAAR,CArErC;AAsED,SApFkC,CAqFnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;;;AAGAf,QAAAA,YAAY,CAACa,QAAD,EAAW,CAAC;AACtB16C,UAAAA,GAAG,EAAE,mBADiB;AAEtBuC,UAAAA,KAAK,EAAE,SAAS8B,iBAAT,GAA6B;AAClC;AACA;AACA,gBAAIs4C,iBAAiB,GAAG,KAAKv1C,KAAL,CAAWkjC,eAAX,IAA8B,CAAC,KAAKsS,mBAAL,CAAyB,KAAKx1C,KAA9B,CAAvD;;AAEA,gBAAIu1C,iBAAJ,EAAuB;AACrB,mBAAKE,gBAAL;AACA,mBAAKxB,YAAL;AACD;AACF;AAXqB,SAAD,EAYpB;AACDr7C,UAAAA,GAAG,EAAE,2BADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0B,yBAAT,CAAmC64C,SAAnC,EAA8C;AACnD;AACA;AACA;AACA;AACA,iBAAKC,uBAAL,GALmD,CAOnD;;AACA,gBAAIC,YAAY,GAAG9zB,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwBk1C,SAAS,CAAC/2C,QAAlC,CAAnB,CARmD,CAUnD;AACA;AACA;AACA;AACA;AACA;;;AACA,iBAAKoG,QAAL,CAAc;AACZpG,cAAAA,QAAQ,EAAE,KAAK62C,mBAAL,CAAyBE,SAAzB,IAAsCE,YAAY,CAACr1C,GAAb,CAAiB,UAAUyB,OAAV,EAAmB;AAClF,uBAAOwwC,QAAQ,CAAC,EAAD,EAAKxwC,OAAL,EAAc;AAAEA,kBAAAA,OAAO,EAAEA;AAAX,iBAAd,CAAf;AACD,eAF+C,CAAtC,GAEL,KAAK6zC,0BAAL,CAAgCD,YAAhC;AAHO,aAAd;AAKD;AAvBA,SAZoB,EAoCpB;AACDh9C,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS4B,kBAAT,CAA4B+1B,aAA5B,EAA2C;AAChD;AACA;AACA;AACA;AACA;AACA,gBAAIgjB,eAAe,GAAGh0B,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwB,KAAKR,KAAL,CAAWrB,QAAnC,EAA6C4B,GAA7C,CAAiD,UAAUjM,CAAV,EAAa;AAClF,qBAAOA,CAAC,CAACsE,GAAT;AACD,aAFqB,CAAtB;;AAGA,gBAAIm9C,gBAAgB,GAAGj0B,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwBsyB,aAAa,CAACn0B,QAAtC,EAAgD4B,GAAhD,CAAoD,UAAUjM,CAAV,EAAa;AACtF,qBAAOA,CAAC,CAACsE,GAAT;AACD,aAFsB,CAAvB;;AAIA,gBAAI28C,iBAAiB,GAAG,CAAC,CAAC,GAAG1C,QAAQ,CAACpgC,WAAb,EAA0BqjC,eAA1B,EAA2CC,gBAA3C,CAAD,IAAiE,CAAC,KAAKP,mBAAL,CAAyB,KAAKx1C,KAA9B,CAA1F;;AAEA,gBAAIu1C,iBAAJ,EAAuB;AACrB,mBAAKE,gBAAL;AACA,mBAAKxB,YAAL;AACD;AACF;AArBA,SApCoB,EA0DpB;AACDr7C,UAAAA,GAAG,EAAE,4BADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS06C,0BAAT,CAAoCD,YAApC,EAAkD;AACvD,gBAAItR,MAAM,GAAG,IAAb,CADuD,CAGvD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,gBAAI0R,eAAe,GAAGJ,YAAY,CAACr1C,GAAb,CAAiB,UAAU01C,SAAV,EAAqB;AAC1D,kBAAI9oB,KAAK,GAAGmX,MAAM,CAAC4R,cAAP,CAAsBD,SAAS,CAACr9C,GAAV,IAAiB,EAAvC,CAAZ,CAD0D,CAG1D;AACA;;;AACA,kBAAIu9C,UAAU,GAAG,CAAChpB,KAAD,IAAUA,KAAK,CAAC8nB,OAAjC;AAEA,qBAAOzC,QAAQ,CAAC,EAAD,EAAKyD,SAAL,EAAgB;AAAEj0C,gBAAAA,OAAO,EAAEi0C,SAAX;AAAsBlB,gBAAAA,QAAQ,EAAEoB;AAAhC,eAAhB,CAAf;AACD,aARqB,CAAtB,CAXuD,CAqBvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAIC,oBAAoB,GAAG,CAA3B;AACA,iBAAKzxC,KAAL,CAAWhG,QAAX,CAAoBnG,OAApB,CAA4B,UAAU20B,KAAV,EAAiBhoB,KAAjB,EAAwB;AAClD,kBAAIkxC,SAAS,GAAG,CAACT,YAAY,CAACU,IAAb,CAAkB,UAAUC,KAAV,EAAiB;AAClD,oBAAI39C,GAAG,GAAG29C,KAAK,CAAC39C,GAAhB;AACA,uBAAOA,GAAG,KAAKw6C,MAAM,CAACjmB,KAAD,CAArB;AACD,eAHgB,CAAjB,CADkD,CAMlD;AACA;;AACA,kBAAI,CAACkpB,SAAD,IAAc,CAAC/R,MAAM,CAACtkC,KAAP,CAAaojC,cAAhC,EAAgD;;AAEhD,kBAAI6S,SAAS,GAAGzD,QAAQ,CAAC,EAAD,EAAKrlB,KAAL,EAAY;AAAE8nB,gBAAAA,OAAO,EAAE;AAAX,eAAZ,CAAxB;;AACA,kBAAIuB,cAAc,GAAGrxC,KAAK,GAAGixC,oBAA7B;AAEAJ,cAAAA,eAAe,CAAC5jB,MAAhB,CAAuBokB,cAAvB,EAAuC,CAAvC,EAA0CP,SAA1C;AACAG,cAAAA,oBAAoB,IAAI,CAAxB;AACD,aAfD;AAiBA,mBAAOJ,eAAP;AACD;AAxDA,SA1DoB,EAmHpB;AACDp9C,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASs6C,gBAAT,GAA4B;AACjC,gBAAIjR,MAAM,GAAG,IAAb,CADiC,CAGjC;AACA;AACA;AACA;AACA;;;AAEA,gBAAIiS,MAAM,GAAG,KAAKz2C,KAAlB;AAAA,gBACIojC,cAAc,GAAGqT,MAAM,CAACrT,cAD5B;AAAA,gBAEIsT,uBAAuB,GAAGD,MAAM,CAACC,uBAFrC;AAAA,gBAGI9B,WAAW,GAAG6B,MAAM,CAAC7B,WAHzB,CATiC,CAcjC;AACA;;AAEA,gBAAIxR,cAAJ,EAAoB;AAClB,kBAAIuT,eAAe,GAAG,KAAKhyC,KAAL,CAAWhG,QAAX,CAAoB+iB,MAApB,CAA2B,UAAUyL,KAAV,EAAiB;AAChE,uBAAOA,KAAK,CAAC8nB,OAAb;AACD,eAFqB,CAAtB;AAIA0B,cAAAA,eAAe,CAACn+C,OAAhB,CAAwB,UAAUo+C,YAAV,EAAwB;AAC9C,oBAAIvD,SAAS,GAAG7O,MAAM,CAAC+P,YAAP,CAAoBnB,MAAM,CAACwD,YAAD,CAA1B,CAAhB,CAD8C,CAG9C;AACA;;;AACA,oBAAIvD,SAAS,CAACQ,WAAd,EAA2B;AACzB,mBAAC,GAAGjB,gBAAgB,CAACiE,qBAArB,EAA4CxD,SAA5C,EAAuD7O,MAAM,CAACxkC,KAAP,CAAa82C,iBAApE;AACD;AACF,eARD;;AAUA,kBAAIJ,uBAAuB,IAAI,KAAK5C,qBAAL,CAA2BF,OAA1D,EAAmE;AACjE,iBAAC,GAAGhB,gBAAgB,CAACmE,uBAArB,EAA8C;AAC5CnD,kBAAAA,OAAO,EAAE,KAAKE,qBAAL,CAA2BF,OADQ;AAE5CD,kBAAAA,UAAU,EAAE,KAAKA,UAF2B;AAG5CiB,kBAAAA,WAAW,EAAEA;AAH+B,iBAA9C;AAKD;AACF,aAvCgC,CAyCjC;AACA;AACA;;;AACA,iBAAKjwC,KAAL,CAAWhG,QAAX,CAAoBnG,OAApB,CAA4B,UAAU20B,KAAV,EAAiB;AAC3C,kBAAI6pB,aAAa,GAAGxS,MAAM,CAAC+P,YAAP,CAAoBnB,MAAM,CAACjmB,KAAD,CAA1B,CAApB;AAAA,kBACIymB,OAAO,GAAGoD,aAAa,CAACpD,OAD5B,CAD2C,CAI3C;;;AAGA,kBAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,kBAAI,CAACzmB,KAAK,CAAC4nB,QAAP,IAAmB,CAAC5nB,KAAK,CAAC8nB,OAA9B,EAAuC;AACrC,iBAAC,GAAGrC,gBAAgB,CAACqE,oBAArB,EAA2C;AACzCrD,kBAAAA,OAAO,EAAEA,OADgC;AAEzCsD,kBAAAA,MAAM,EAAE;AACNC,oBAAAA,UAAU,EAAE;AADN;AAFiC,iBAA3C;AAMD;AACF,aAnBD;AAoBD;AAlEA,SAnHoB,EAsLpB;AACDv+C,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASi5C,YAAT,CAAsBjnB,KAAtB,EAA6BhoB,KAA7B,EAAoC;AACzC,gBAAIu/B,MAAM,GAAG,IAAb;;AAEA,gBAAI0S,cAAc,GAAG,KAAK7C,YAAL,CAAkBnB,MAAM,CAACjmB,KAAD,CAAxB,CAArB;AAAA,gBACIymB,OAAO,GAAGwD,cAAc,CAACxD,OAD7B;;AAGA,gBAAI,CAACA,OAAL,EAAc;AACZ;AACD,aARwC,CAUzC;AACA;AACA;AACA;AACA;AACA;;;AACA,aAAC,GAAGhB,gBAAgB,CAACqE,oBAArB,EAA2C;AACzCrD,cAAAA,OAAO,EAAEA,OADgC;AAEzCsD,cAAAA,MAAM,EAAE,KAAKG,oBAAL,CAA0BlqB,KAA1B;AAFiC,aAA3C,EAhByC,CAqBzC;;AACA,gBAAI,KAAKntB,KAAL,CAAWs3C,OAAf,EAAwB,KAAKt3C,KAAL,CAAWs3C,OAAX,CAAmBnqB,KAAnB,EAA0BymB,OAA1B,EAtBiB,CAwBzC;AACA;;AACA2D,YAAAA,qBAAqB,CAAC,YAAY;AAChCA,cAAAA,qBAAqB,CAAC,YAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA,oBAAIL,MAAM,GAAG;AACXC,kBAAAA,UAAU,EAAE,CAAC,GAAGvE,gBAAgB,CAAC4E,sBAArB,EAA6CryC,KAA7C,EAAoDu/B,MAAM,CAAC1kC,KAA3D,CADD;AAEXy3C,kBAAAA,SAAS,EAAE,EAFA;AAGXC,kBAAAA,OAAO,EAAE;AAHE,iBAAb;;AAMA,oBAAIvqB,KAAK,CAACsmB,SAAN,IAAmB/O,MAAM,CAAC1kC,KAAP,CAAakjC,eAApC,EAAqD;AACnDgU,kBAAAA,MAAM,GAAG1E,QAAQ,CAAC,EAAD,EAAK0E,MAAL,EAAaxS,MAAM,CAAC1kC,KAAP,CAAakjC,eAAb,CAA6B3W,EAA1C,CAAjB;AACD,iBAFD,MAEO,IAAIY,KAAK,CAAC4nB,QAAN,IAAkBrQ,MAAM,CAAC1kC,KAAP,CAAamjC,cAAnC,EAAmD;AACxD+T,kBAAAA,MAAM,GAAG1E,QAAQ,CAAC,EAAD,EAAK0E,MAAL,EAAaxS,MAAM,CAAC1kC,KAAP,CAAamjC,cAAb,CAA4B5W,EAAzC,CAAjB;AACD,iBAFM,MAEA,IAAIY,KAAK,CAAC8nB,OAAN,IAAiBvQ,MAAM,CAAC1kC,KAAP,CAAaojC,cAAlC,EAAkD;AACvD8T,kBAAAA,MAAM,GAAG1E,QAAQ,CAAC,EAAD,EAAK0E,MAAL,EAAaxS,MAAM,CAAC1kC,KAAP,CAAaojC,cAAb,CAA4B7W,EAAzC,CAAjB;AACD,iBA1B+B,CA4BhC;;;AACA,iBAAC,GAAGqmB,gBAAgB,CAACqE,oBAArB,EAA2C;AAAErD,kBAAAA,OAAO,EAAEA,OAAX;AAAoBsD,kBAAAA,MAAM,EAAEA;AAA5B,iBAA3C;AACD,eA9BoB,CAArB;AA+BD,aAhCoB,CAArB;AAkCA,iBAAKS,wBAAL,CAA8BxqB,KAA9B;AACD;AA/DA,SAtLoB,EAsPpB;AACDv0B,UAAAA,GAAG,EAAE,0BADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASw8C,wBAAT,CAAkCxqB,KAAlC,EAAyC;AAC9C,gBAAI6X,MAAM,GAAG,IAAb;;AAEA,gBAAI4S,cAAc,GAAG,KAAKrD,YAAL,CAAkBnB,MAAM,CAACjmB,KAAD,CAAxB,CAArB;AAAA,gBACIymB,OAAO,GAAGgE,cAAc,CAAChE,OAD7B;;AAGA,gBAAI,CAACA,OAAL,EAAc;AACZ;AACD,aAR6C,CAU9C;AACA;AACA;AACA;;;AACA,gBAAIiE,oBAAoB,GAAG,SAASA,oBAAT,CAA8BC,EAA9B,EAAkC;AAC3D;AACA;AACA,kBAAIA,EAAE,CAACr9C,MAAH,KAAcm5C,OAAlB,EAA2B,OAHgC,CAK3D;;AACAA,cAAAA,OAAO,CAACvjC,KAAR,CAAc8mC,UAAd,GAA2B,EAA3B,CAN2D,CAQ3D;;AACAnS,cAAAA,MAAM,CAAC+S,kBAAP,CAA0B5qB,KAA1B,EAAiCymB,OAAjC;;AAEAA,cAAAA,OAAO,CAAC5kB,mBAAR,CAA4BikB,aAA5B,EAA2C4E,oBAA3C;;AAEA,kBAAI1qB,KAAK,CAAC8nB,OAAV,EAAmB;AACjBjQ,gBAAAA,MAAM,CAACgT,eAAP,CAAuB5E,MAAM,CAACjmB,KAAD,CAA7B;AACD;AACF,aAhBD;;AAkBAymB,YAAAA,OAAO,CAAC/8B,gBAAR,CAAyBo8B,aAAzB,EAAwC4E,oBAAxC;AACD;AAnCA,SAtPoB,EA0RpB;AACDj/C,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS48C,kBAAT,CAA4B5qB,KAA5B,EAAmCymB,OAAnC,EAA4C;AACjD,gBAAIzO,MAAM,GAAG,IAAb;;AAEA,gBAAI,KAAKnlC,KAAL,CAAWi4C,QAAf,EAAyB,KAAKj4C,KAAL,CAAWi4C,QAAX,CAAoB9qB,KAApB,EAA2BymB,OAA3B,EAHwB,CAKjD;AACA;;AACA,iBAAKG,mBAAL,IAA4B,CAA5B;;AAEA,gBAAI,KAAKA,mBAAL,KAA6B,CAAjC,EAAoC;AAClC;AACA,kBAAI6B,YAAY,GAAG,KAAKjxC,KAAL,CAAWhG,QAAX,CAAoB+iB,MAApB,CAA2B,UAAUw2B,KAAV,EAAiB;AAC7D,oBAAIjD,OAAO,GAAGiD,KAAK,CAACjD,OAApB;AACA,uBAAO,CAACA,OAAR;AACD,eAHkB,EAGhB10C,GAHgB,CAGZ,UAAU43C,IAAV,EAAgB;AACrB,uBAAO3F,QAAQ,CAAC,EAAD,EAAK2F,IAAL,EAAW;AACxB1E,kBAAAA,SAAS,EAAE,KADa;AAExBsB,kBAAAA,QAAQ,EAAE;AAFc,iBAAX,CAAf;AAID,eARkB,CAAnB;AAUA,mBAAKhwC,QAAL,CAAc;AAAEpG,gBAAAA,QAAQ,EAAEi3C;AAAZ,eAAd,EAA0C,YAAY;AACpD,oBAAI,OAAOzQ,MAAM,CAACnlC,KAAP,CAAao4C,WAApB,KAAoC,UAAxC,EAAoD;AAClDjT,kBAAAA,MAAM,CAACmP,gBAAP,CAAwBnP,MAAM,CAACnlC,KAAP,CAAao4C,WAArC;AACD,iBAHmD,CAKpD;;;AACAjT,gBAAAA,MAAM,CAAC6O,iBAAP,GAA2B,EAA3B;AACD,eAPD,EAZkC,CAqBlC;AACA;;AACA,kBAAI,KAAKF,qBAAL,CAA2BF,OAA/B,EAAwC;AACtC,qBAAKE,qBAAL,CAA2BF,OAA3B,CAAmCvjC,KAAnC,CAAyCgoC,MAAzC,GAAkD,GAAlD;AACD;AACF;AACF;AAtCA,SA1RoB,EAiUpB;AACDz/C,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASm5C,gBAAT,CAA0BgE,IAA1B,EAAgC;AACrC,gBAAIjT,MAAM,GAAG,IAAb;;AAEA,gBAAIkT,QAAQ,GAAG,EAAf;AACA,gBAAIC,QAAQ,GAAG,EAAf;AAEA,iBAAKxE,iBAAL,CAAuBx7C,OAAvB,CAA+B,UAAUigD,QAAV,EAAoB;AACjD;AACA;AACA,kBAAItrB,KAAK,GAAGkY,MAAM,CAAC6Q,cAAP,CAAsBuC,QAAtB,CAAZ;;AAEA,kBAAI,CAACtrB,KAAL,EAAY;AACV;AACD;;AAEDorB,cAAAA,QAAQ,CAACn2C,IAAT,CAAc+qB,KAAd;;AAEA,kBAAIkY,MAAM,CAACqT,YAAP,CAAoBD,QAApB,CAAJ,EAAmC;AACjCD,gBAAAA,QAAQ,CAACp2C,IAAT,CAAcijC,MAAM,CAACkP,YAAP,CAAoBkE,QAApB,EAA8B7E,OAA5C;AACD;AACF,aAdD;AAgBA0E,YAAAA,IAAI,CAACC,QAAD,EAAWC,QAAX,CAAJ;AACD;AAzBA,SAjUoB,EA2VpB;AACD5/C,UAAAA,GAAG,EAAE,yBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASw6C,uBAAT,GAAmC;AACxC,gBAAIpQ,MAAM,GAAG,IAAb,CADwC,CAGxC;AACA;AACA;AACA;;;AACA,gBAAIoT,aAAa,GAAG,KAAKhF,UAAL,CAAgBC,OAApC;;AAEA,gBAAI,CAAC+E,aAAL,EAAoB;AAClB;AACD;;AAED,iBAAKhF,UAAL,CAAgBE,WAAhB,GAA8B,KAAK7zC,KAAL,CAAW40C,WAAX,CAAuB+D,aAAvB,CAA9B;AAEA,iBAAKh0C,KAAL,CAAWhG,QAAX,CAAoBnG,OAApB,CAA4B,UAAU20B,KAAV,EAAiB;AAC3C,kBAAIsrB,QAAQ,GAAGrF,MAAM,CAACjmB,KAAD,CAArB,CAD2C,CAG3C;AACA;;AACA,kBAAI,CAACsrB,QAAL,EAAe;AACb;AACD,eAP0C,CAS3C;AACA;AACA;;;AACA,kBAAI,CAAClT,MAAM,CAACmT,YAAP,CAAoBD,QAApB,CAAL,EAAoC;AAClC;AACD;;AAED,kBAAIpF,SAAS,GAAG9N,MAAM,CAACgP,YAAP,CAAoBkE,QAApB,CAAhB,CAhB2C,CAkB3C;AACA;;;AACA,kBAAI,CAACpF,SAAS,CAACO,OAAX,IAAsB,CAACzmB,KAA3B,EAAkC;AAChC;AACD;;AAEDoY,cAAAA,MAAM,CAACqT,YAAP,CAAoBH,QAApB,EAA8B;AAC5B5E,gBAAAA,WAAW,EAAE,CAAC,GAAGjB,gBAAgB,CAACiG,sBAArB,EAA6C;AACxDrE,kBAAAA,YAAY,EAAEnB,SAAS,CAACO,OADgC;AAExD+E,kBAAAA,aAAa,EAAEA,aAFyC;AAGxD/D,kBAAAA,WAAW,EAAErP,MAAM,CAACvlC,KAAP,CAAa40C;AAH8B,iBAA7C;AADe,eAA9B;AAOD,aA/BD;AAgCD;AAjDA,SA3VoB,EA6YpB;AACDh8C,UAAAA,GAAG,EAAE,sBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASk8C,oBAAT,CAA8BlqB,KAA9B,EAAqC;AAC1C,gBAAIA,KAAK,CAACsmB,SAAV,EAAqB;AACnB,qBAAO,KAAKzzC,KAAL,CAAWkjC,eAAX,GAA6B,KAAKljC,KAAL,CAAWkjC,eAAX,CAA2B7rB,IAAxD,GAA+D,EAAtE;AACD,aAFD,MAEO,IAAI8V,KAAK,CAAC4nB,QAAV,EAAoB;AACzB,kBAAI,CAAC,KAAK/0C,KAAL,CAAWmjC,cAAhB,EAAgC;AAC9B,uBAAO,EAAP;AACD,eAHwB,CAIzB;AACA;;;AACA,qBAAOqP,QAAQ,CAAC;AACdsG,gBAAAA,QAAQ,EAAE,EADI;AAEdC,gBAAAA,GAAG,EAAE,EAFS;AAGdC,gBAAAA,IAAI,EAAE,EAHQ;AAIdC,gBAAAA,KAAK,EAAE,EAJO;AAKdC,gBAAAA,MAAM,EAAE;AALM,eAAD,EAMZ,KAAKl5C,KAAL,CAAWmjC,cAAX,CAA0B9rB,IANd,CAAf;AAOD,aAbM,MAaA,IAAI8V,KAAK,CAAC8nB,OAAV,EAAmB;AACxB,qBAAO,KAAKj1C,KAAL,CAAWojC,cAAX,GAA4B,KAAKpjC,KAAL,CAAWojC,cAAX,CAA0B/rB,IAAtD,GAA6D,EAApE;AACD;;AAED,gBAAIg8B,SAAS,GAAG,KAAKkB,YAAL,CAAkBnB,MAAM,CAACjmB,KAAD,CAAxB,CAAhB;AACA,gBAAIqnB,YAAY,GAAGnB,SAAS,CAACO,OAA7B;AACA,gBAAIa,gBAAgB,GAAGpB,SAAS,CAACQ,WAAjC;AACA,gBAAIa,iBAAiB,GAAG,KAAKf,UAAL,CAAgBE,WAAxC;;AAEA,gBAAI,CAACW,YAAL,EAAmB;AACjB,qBAAO,EAAP;AACD;;AAED,gBAAI2E,kBAAkB,GAAG,CAAC,GAAGvG,gBAAgB,CAACuC,gBAArB,EAAuC;AAC9DX,cAAAA,YAAY,EAAEA,YADgD;AAE9DC,cAAAA,gBAAgB,EAAEA,gBAF4C;AAG9DC,cAAAA,iBAAiB,EAAEA,iBAH2C;AAI9DE,cAAAA,WAAW,EAAE,KAAK50C,KAAL,CAAW40C;AAJsC,aAAvC,CAAzB;AAAA,gBAMIwE,kBAAkB,GAAGhH,cAAc,CAAC+G,kBAAD,EAAqB,CAArB,CANvC;AAAA,gBAOI9D,EAAE,GAAG+D,kBAAkB,CAAC,CAAD,CAP3B;AAAA,gBAQI9D,EAAE,GAAG8D,kBAAkB,CAAC,CAAD,CAR3B;;AAUA,mBAAO;AACL3B,cAAAA,SAAS,EAAE,eAAepC,EAAf,GAAoB,MAApB,GAA6BC,EAA7B,GAAkC;AADxC,aAAP;AAGD,WA5CA,CA8CD;;AA9CC,SA7YoB,EA6bpB;AACD18C,UAAAA,GAAG,EAAE,qBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASq6C,mBAAT,CAA6Bx1C,KAA7B,EAAoC;AACzC;AACA;AACA;AACA;AACA;AACA,mBAAOmzC,gBAAgB,IAAInzC,KAAK,CAACq5C,oBAA1B,IAAkDr5C,KAAK,CAACs5C,QAAN,KAAmB,CAAnB,IAAwBt5C,KAAK,CAACu5C,KAAN,KAAgB,CAAxC,IAA6Cv5C,KAAK,CAACw5C,iBAAN,KAA4B,CAAzE,IAA8Ex5C,KAAK,CAACijC,cAAN,KAAyB,CAAhK;AACD;AATA,SA7boB,EAucpB;AACDrqC,UAAAA,GAAG,EAAE,gBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS+6C,cAAT,CAAwBt9C,GAAxB,EAA6B;AAClC,mBAAO,KAAK+L,KAAL,CAAWhG,QAAX,CAAoB23C,IAApB,CAAyB,UAAUnpB,KAAV,EAAiB;AAC/C,qBAAOimB,MAAM,CAACjmB,KAAD,CAAN,KAAkBv0B,GAAzB;AACD,aAFM,CAAP;AAGD;AANA,SAvcoB,EA8cpB;AACDA,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASu9C,YAAT,CAAsB9/C,GAAtB,EAA2B;AAChC;AACA;AACA,mBAAOlE,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqC,KAAKu/C,YAA1C,EAAwD96C,GAAxD,CAAP;AACD;AANA,SA9coB,EAqdpB;AACDA,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASo5C,YAAT,CAAsB37C,GAAtB,EAA2B;AAChC,mBAAO,KAAK8/C,YAAL,CAAkB9/C,GAAlB,IAAyB,KAAK86C,YAAL,CAAkB96C,GAAlB,CAAzB,GAAkD,EAAzD;AACD;AAJA,SArdoB,EA0dpB;AACDA,UAAAA,GAAG,EAAE,cADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASy9C,YAAT,CAAsBhgD,GAAtB,EAA2B2d,IAA3B,EAAiC;AACtC,iBAAKm9B,YAAL,CAAkB96C,GAAlB,IAAyB45C,QAAQ,CAAC,EAAD,EAAK,KAAK+B,YAAL,CAAkB37C,GAAlB,CAAL,EAA6B2d,IAA7B,CAAjC;AACD;AAJA,SA1doB,EA+dpB;AACD3d,UAAAA,GAAG,EAAE,iBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS68C,eAAT,CAAyBp/C,GAAzB,EAA8B;AACnC,mBAAO,KAAK86C,YAAL,CAAkB96C,GAAlB,CAAP;AACD;AAJA,SA/doB,EAoepB;AACDA,UAAAA,GAAG,EAAE,yBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASs+C,uBAAT,GAAmC;AACxC,gBAAI/T,MAAM,GAAG,IAAb;;AAEA,gBAAIgU,QAAQ,GAAG,KAAK15C,KAAL,CAAW05C,QAA1B,CAHwC,CAKxC;AACA;AACA;;AAEA,gBAAIC,gBAAgB,GAAGD,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,IAAzD;AACA,gBAAIE,eAAe,GAAGD,gBAAgB,GAAG,IAAH,GAAU,KAAhD;AAEA,mBAAO53B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8Bk+C,eAA9B,EAA+C;AACpDhhD,cAAAA,GAAG,EAAE,oBAD+C;AAEpDiJ,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAa+xC,OAAb,EAAsB;AACzBlO,gBAAAA,MAAM,CAACoO,qBAAP,CAA6BF,OAA7B,GAAuCA,OAAvC;AACD,eAJmD;AAKpDvjC,cAAAA,KAAK,EAAE;AAAEwpC,gBAAAA,UAAU,EAAE,QAAd;AAAwBxB,gBAAAA,MAAM,EAAE;AAAhC;AAL6C,aAA/C,CAAP;AAOD;AArBA,SApeoB,EA0fpB;AACDz/C,UAAAA,GAAG,EAAE,kBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS2+C,gBAAT,GAA4B;AACjC,gBAAI5T,OAAO,GAAG,IAAd,CADiC,CAGjC;AACA;AACA;;;AACA,mBAAO,KAAKvhC,KAAL,CAAWhG,QAAX,CAAoB4B,GAApB,CAAwB,UAAU4sB,KAAV,EAAiB;AAC9C,qBAAOpL,OAAO,WAAP,CAAgB1c,YAAhB,CAA6B8nB,KAAK,CAACnrB,OAAnC,EAA4C;AACjDH,gBAAAA,GAAG,EAAE,SAASA,GAAT,CAAaG,OAAb,EAAsB;AACzB;AACA;AACA,sBAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,sBAAI4xC,OAAO,GAAG,CAAC,GAAGhB,gBAAgB,CAACmH,aAArB,EAAoC/3C,OAApC,CAAd;;AACAkkC,kBAAAA,OAAO,CAAC0S,YAAR,CAAqBxF,MAAM,CAACjmB,KAAD,CAA3B,EAAoC;AAAEymB,oBAAAA,OAAO,EAAEA;AAAX,mBAApC;AACD;AAVgD,eAA5C,CAAP;AAYD,aAbM,CAAP;AAcD;AAtBA,SA1foB,EAihBpB;AACDh7C,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,gBAAIoqC,OAAO,GAAG,IAAd;;AAEA,gBAAIiT,OAAO,GAAG,KAAKh6C,KAAnB;AAAA,gBACI05C,QAAQ,GAAGM,OAAO,CAACN,QADvB;AAAA,gBAEIO,SAAS,GAAGD,OAAO,CAACC,SAFxB;AAAA,gBAGI7W,cAAc,GAAG4W,OAAO,CAAC5W,cAH7B;AAAA,gBAIIsT,uBAAuB,GAAGsD,OAAO,CAACtD,uBAJtC;;AAOA,gBAAI12C,KAAK,GAAGwyC,QAAQ,CAAC,EAAD,EAAKyH,SAAL,EAAgB;AAClCp4C,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAaK,IAAb,EAAmB;AACtB6kC,gBAAAA,OAAO,CAAC4M,UAAR,CAAmBC,OAAnB,GAA6B1xC,IAA7B;AACD;AAHiC,aAAhB,CAApB;;AAMA,gBAAIvD,QAAQ,GAAG,KAAKm7C,gBAAL,EAAf;;AACA,gBAAI1W,cAAc,IAAIsT,uBAAtB,EAA+C;AAC7C/3C,cAAAA,QAAQ,CAACyD,IAAT,CAAc,KAAKq3C,uBAAL,EAAd;AACD;;AAED,mBAAO13B,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8Bg+C,QAA9B,EAAwC15C,KAAxC,EAA+CrB,QAA/C,CAAP;AACD;AAxBA,SAjhBoB,CAAX,CAAZ;;AA4iBA,eAAO20C,QAAP;AACD,OApqBc,CAoqBbxxB,MAAM,CAACxc,SApqBM,CAAf;;AAsqBA7R,MAAAA,OAAO,WAAP,GAAkB,CAAC,GAAGk/C,eAAe,WAAnB,EAA6BW,QAA7B,CAAlB;AACA5/C,MAAAA,MAAM,CAACD,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB;AAEA;AAAO,KA5vSG;AA6vSV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,mBAFsD,CAKtD;;AACA;;;;;AAKA;;AAEA,UAAI,CAAC6M,KAAK,CAACvL,SAAN,CAAgBihD,IAArB,EAA2B;AACzB11C,QAAAA,KAAK,CAACvL,SAAN,CAAgBihD,IAAhB,GAAuB,UAAU4D,SAAV,EAAqB;AAC1C,cAAI,SAAS,IAAb,EAAmB;AACjB,kBAAM,IAAIz0C,SAAJ,CAAc,kDAAd,CAAN;AACD;;AACD,cAAI,OAAOy0C,SAAP,KAAqB,UAAzB,EAAqC;AACnC,kBAAM,IAAIz0C,SAAJ,CAAc,8BAAd,CAAN;AACD;;AACD,cAAImoB,IAAI,GAAGl5B,MAAM,CAAC,IAAD,CAAjB;AACA,cAAIiE,MAAM,GAAGi1B,IAAI,CAACj1B,MAAL,KAAgB,CAA7B;AACA,cAAIS,OAAO,GAAGL,SAAS,CAAC,CAAD,CAAvB;AACA,cAAIoC,KAAK,GAAG,KAAK,CAAjB;;AAEA,eAAK,IAAIlH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0E,MAApB,EAA4B1E,CAAC,EAA7B,EAAiC;AAC/BkH,YAAAA,KAAK,GAAGyyB,IAAI,CAAC35B,CAAD,CAAZ;;AACA,gBAAIimD,SAAS,CAAC/lD,IAAV,CAAeiF,OAAf,EAAwB+B,KAAxB,EAA+BlH,CAA/B,EAAkC25B,IAAlC,CAAJ,EAA6C;AAC3C,qBAAOzyB,KAAP;AACD;AACF;;AACD,iBAAOP,SAAP;AACD,SAnBD;AAoBD;;AAED,UAAI,CAACgG,KAAK,CAACvL,SAAN,CAAgB2d,KAArB,EAA4B;AAC1BpS,QAAAA,KAAK,CAACvL,SAAN,CAAgB2d,KAAhB,GAAwB,UAAUm7B,UAAV,EAAsB/0C,OAAtB,EAA+B;AACrD;;AAEA,cAAIoY,CAAJ,EAAO+R,CAAP;;AAEA,cAAI,QAAQ,IAAZ,EAAkB;AAChB,kBAAM,IAAI9d,SAAJ,CAAc,6BAAd,CAAN;AACD;;AAED,cAAIM,CAAC,GAAGrR,MAAM,CAAC,IAAD,CAAd;AACA,cAAIiN,GAAG,GAAGoE,CAAC,CAACpN,MAAF,KAAa,CAAvB;;AAEA,cAAI,OAAOw1C,UAAP,KAAsB,UAA1B,EAAsC;AACpC,kBAAM,IAAI1oC,SAAJ,EAAN;AACD;;AAED,cAAI1M,SAAS,CAACJ,MAAV,GAAmB,CAAvB,EAA0B;AACxB6Y,YAAAA,CAAC,GAAGpY,OAAJ;AACD;;AAEDmqB,UAAAA,CAAC,GAAG,CAAJ;;AAEA,iBAAOA,CAAC,GAAG5hB,GAAX,EAAgB;AAEd,gBAAIw4C,MAAJ;;AAEA,gBAAI52B,CAAC,IAAIxd,CAAT,EAAY;AACVo0C,cAAAA,MAAM,GAAGp0C,CAAC,CAACwd,CAAD,CAAV;AAEA,kBAAI62B,UAAU,GAAGjM,UAAU,CAACh6C,IAAX,CAAgBqd,CAAhB,EAAmB2oC,MAAnB,EAA2B52B,CAA3B,EAA8Bxd,CAA9B,CAAjB;;AAEA,kBAAI,CAACq0C,UAAL,EAAiB;AACf,uBAAO,KAAP;AACD;AACF;;AACD72B,YAAAA,CAAC;AACF;;AACD,iBAAO,IAAP;AACD,SAtCD;AAuCD;;AAED,UAAI,CAAC3iB,KAAK,CAACnK,OAAX,EAAoB;AAClBmK,QAAAA,KAAK,CAACnK,OAAN,GAAgB,UAAUu+B,GAAV,EAAe;AAC7B,iBAAOtgC,MAAM,CAACW,SAAP,CAAiBmB,QAAjB,CAA0BrC,IAA1B,CAA+B6gC,GAA/B,MAAwC,gBAA/C;AACD,SAFD;AAGD;AAED;;AAAO,KAl1SG;AAm1SV;;AACA;AAAO,cAASthC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA;;AAA4B,iBAASqH,OAAT,EAAkB;AAE9C1G,QAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,UAAAA,KAAK,EAAE;AADoC,SAA7C;;AAIA,YAAIgd,OAAO,GAAG,OAAO/hB,MAAP,KAAkB,UAAlB,IAAgC,SAAOA,MAAM,CAACgf,QAAd,MAA2B,QAA3D,GAAsE,UAAU3c,GAAV,EAAe;AAAE,0BAAcA,GAAd;AAAoB,SAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,iBAAOA,GAAG,IAAI,OAAOrC,MAAP,KAAkB,UAAzB,IAAuCqC,GAAG,CAAC5B,WAAJ,KAAoBT,MAA3D,IAAqEqC,GAAG,KAAKrC,MAAM,CAACf,SAApF,GAAgG,QAAhG,YAAkHoD,GAAlH,CAAP;AAA+H,SAA5Q;;AAEA,YAAI+5C,QAAQ,GAAG99C,MAAM,CAAC2yB,MAAP,IAAiB,UAAU5sB,MAAV,EAAkB;AAAE,eAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAAE,gBAAI0F,MAAM,GAAGZ,SAAS,CAAC9E,CAAD,CAAtB;;AAA2B,iBAAK,IAAI2E,GAAT,IAAgBe,MAAhB,EAAwB;AAAE,kBAAIjF,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCwF,MAArC,EAA6Cf,GAA7C,CAAJ,EAAuD;AAAE6B,gBAAAA,MAAM,CAAC7B,GAAD,CAAN,GAAce,MAAM,CAACf,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,iBAAO6B,MAAP;AAAgB,SAAhQ;;AAEA,YAAIg4C,YAAY,GAAG,YAAY;AAAE,mBAAStjC,gBAAT,CAA0B1U,MAA1B,EAAkCuF,KAAlC,EAAyC;AAAE,iBAAK,IAAI/L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+L,KAAK,CAACrH,MAA1B,EAAkC1E,CAAC,EAAnC,EAAuC;AAAE,kBAAImb,UAAU,GAAGpP,KAAK,CAAC/L,CAAD,CAAtB;AAA2Bmb,cAAAA,UAAU,CAACva,UAAX,GAAwBua,UAAU,CAACva,UAAX,IAAyB,KAAjD;AAAwDua,cAAAA,UAAU,CAACxa,YAAX,GAA0B,IAA1B;AAAgC,kBAAI,WAAWwa,UAAf,EAA2BA,UAAU,CAAC5B,QAAX,GAAsB,IAAtB;AAA4B9Y,cAAAA,MAAM,CAACC,cAAP,CAAsB8F,MAAtB,EAA8B2U,UAAU,CAACxW,GAAzC,EAA8CwW,UAA9C;AAA4D;AAAE;;AAAC,iBAAO,UAAUL,WAAV,EAAuBM,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,gBAAID,UAAJ,EAAgBF,gBAAgB,CAACJ,WAAW,CAAC1Z,SAAb,EAAwBga,UAAxB,CAAhB;AAAqD,gBAAIC,WAAJ,EAAiBH,gBAAgB,CAACJ,WAAD,EAAcO,WAAd,CAAhB;AAA4C,mBAAOP,WAAP;AAAqB,WAAhN;AAAmN,SAA9hB,EAAnB;;AAEA,YAAI+S,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,YAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,YAAIu4B,cAAc,GAAGtmD,mBAAmB,CAAC,GAAD,CAAxC;;AAEA,YAAIumD,kBAAkB,GAAGvmD,mBAAmB,CAAC,GAAD,CAA5C;;AAEA,YAAI8+C,QAAQ,GAAG9+C,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,iBAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,iBAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,uBAASA;AAAX,WAArC;AAAwD;;AAE/F,iBAASq6C,eAAT,CAAyBhkC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,cAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,kBAAM,IAAItJ,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,iBAASstC,0BAAT,CAAoCh9C,IAApC,EAA0C5B,IAA1C,EAAgD;AAAE,cAAI,CAAC4B,IAAL,EAAW;AAAE,kBAAM,IAAI+hB,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,iBAAO3jB,IAAI,KAAK,SAAOA,IAAP,MAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0E4B,IAAjF;AAAwF;;AAEhP,iBAASi9C,SAAT,CAAmBn6B,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,cAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,kBAAM,IAAIrT,SAAJ,CAAc,sEAAoEqT,UAApE,CAAd,CAAN;AAAsG;;AAACD,UAAAA,QAAQ,CAACxjB,SAAT,GAAqBX,MAAM,CAACmc,MAAP,CAAciI,UAAU,IAAIA,UAAU,CAACzjB,SAAvC,EAAkD;AAAEwB,YAAAA,WAAW,EAAE;AAAEsE,cAAAA,KAAK,EAAE0d,QAAT;AAAmBhkB,cAAAA,UAAU,EAAE,KAA/B;AAAsC2Y,cAAAA,QAAQ,EAAE,IAAhD;AAAsD5Y,cAAAA,YAAY,EAAE;AAApE;AAAf,WAAlD,CAArB;AAAqK,cAAIkkB,UAAJ,EAAgBpkB,MAAM,CAACq9C,cAAP,GAAwBr9C,MAAM,CAACq9C,cAAP,CAAsBl5B,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACE,SAAT,GAAqBD,UAA3F;AAAwG;AAC9e;;;;;;;;;;;;;AAYA;;;AAEA,YAAIyhC,OAAO,GAAG,KAAK,CAAnB;;AACA,YAAI;AACFA,UAAAA,OAAO,GAAGn/C,OAAO,CAACmC,GAAR,CAAYC,QAAtB;AACD,SAFD,CAEE,OAAOY,CAAP,EAAU;AACVm8C,UAAAA,OAAO,GAAG,aAAV;AACD;;AAED,iBAASC,aAAT,CAAuBC,iBAAvB,EAA0C;AACxC,cAAIC,MAAJ,EAAYnH,KAAZ;;AAEA,iBAAOA,KAAK,GAAGmH,MAAM,GAAG,UAAUjd,UAAV,EAAsB;AAC5CuV,YAAAA,SAAS,CAAC2H,qBAAD,EAAwBld,UAAxB,CAAT;;AAEA,qBAASkd,qBAAT,GAAiC;AAC/B7H,cAAAA,eAAe,CAAC,IAAD,EAAO6H,qBAAP,CAAf;;AAEA,qBAAO5H,0BAA0B,CAAC,IAAD,EAAO,CAAC4H,qBAAqB,CAAC5hC,SAAtB,IAAmCrkB,MAAM,CAAC6e,cAAP,CAAsBonC,qBAAtB,CAApC,EAAkF7/C,KAAlF,CAAwF,IAAxF,EAA8F/B,SAA9F,CAAP,CAAjC;AACD;;AAED05C,YAAAA,YAAY,CAACkI,qBAAD,EAAwB,CAAC;AACnC/hD,cAAAA,GAAG,EAAE,uCAD8B;AAInC;AACAuC,cAAAA,KAAK,EAAE,SAASy/C,qCAAT,CAA+Cj8C,QAA/C,EAAyD;AAC9D;AACA;AACA,oBAAI47C,OAAO,KAAK,YAAhB,EAA8B;AAC5B;AACD,iBAL6D,CAO9D;AACA;AACA;AACA;;;AACA,oBAAIM,UAAU,GAAG/4B,MAAM,CAACxmB,QAAP,CAAgBkF,OAAhB,CAAwB7B,QAAxB,CAAjB;;AACA,oBAAIm8C,WAAW,GAAGD,UAAU,CAAC7nC,KAAX,CAAiB,UAAUma,KAAV,EAAiB;AAClD,yBAAO,CAAC,CAAC,GAAG0lB,QAAQ,CAACngC,cAAb,EAA6Bya,KAA7B,CAAD,IAAwC,OAAOA,KAAK,CAACv0B,GAAb,KAAqB,WAApE;AACD,iBAFiB,CAAlB;;AAIA,oBAAI,CAACkiD,WAAL,EAAkB;AAChB,mBAAC,GAAGT,cAAc,CAACU,oCAAnB;AACD;AACF;AAxBkC,aAAD,EAyBjC;AACDniD,cAAAA,GAAG,EAAE,cADJ;AAEDuC,cAAAA,KAAK,EAAE,SAAS6/C,YAAT,CAAsBh7C,KAAtB,EAA6B;AAClC,oBAAIi7C,YAAY,GAAG;AACjB;AACAt8C,kBAAAA,QAAQ,EAAEqB,KAAK,CAACrB,QAFC;AAGjBu8C,kBAAAA,MAAM,EAAEl7C,KAAK,CAACk7C,MAHG;AAIjB5D,kBAAAA,OAAO,EAAEt3C,KAAK,CAACs3C,OAJE;AAKjBW,kBAAAA,QAAQ,EAAEj4C,KAAK,CAACi4C,QALC;AAMjB5D,kBAAAA,UAAU,EAAEr0C,KAAK,CAACq0C,UAND;AAOjB+D,kBAAAA,WAAW,EAAEp4C,KAAK,CAACo4C,WAPF;AAQjBsB,kBAAAA,QAAQ,EAAE15C,KAAK,CAAC05C,QARC;AASjBL,kBAAAA,oBAAoB,EAAEr5C,KAAK,CAACq5C,oBATX;AAUjBzE,kBAAAA,WAAW,EAAE50C,KAAK,CAAC40C,WAVF;AAWjB8B,kBAAAA,uBAAuB,EAAE12C,KAAK,CAAC02C,uBAXd;AAYjBI,kBAAAA,iBAAiB,EAAE92C,KAAK,CAAC82C,iBAZR;AAcjB;AACAwC,kBAAAA,QAAQ,EAAE,KAAK6B,iBAAL,CAAuB,UAAvB,CAfO;AAgBjB5B,kBAAAA,KAAK,EAAE,KAAK4B,iBAAL,CAAuB,OAAvB,CAhBU;AAiBjB3B,kBAAAA,iBAAiB,EAAE,KAAK2B,iBAAL,CAAuB,mBAAvB,CAjBF;AAkBjBlY,kBAAAA,cAAc,EAAE,KAAKkY,iBAAL,CAAuB,gBAAvB,CAlBC;AAoBjB;AACA;AACA;AACAjY,kBAAAA,eAAe,EAAE,KAAKkY,oBAAL,CAA0Bp7C,KAAK,CAACkjC,eAAhC,EAAiDoX,kBAAkB,CAACe,aAApE,CAvBA;AAwBjBlY,kBAAAA,cAAc,EAAE,KAAKiY,oBAAL,CAA0Bp7C,KAAK,CAACmjC,cAAhC,EAAgDmX,kBAAkB,CAACgB,YAAnE,CAxBC;AAyBjBlY,kBAAAA,cAAc,EAAE,KAAKgY,oBAAL,CAA0Bp7C,KAAK,CAACojC,cAAhC,EAAgDkX,kBAAkB,CAACiB,YAAnE,CAzBC;AA2BjBtB,kBAAAA,SAAS,EAAE;AA3BM,iBAAnB;AA8BA,qBAAKW,qCAAL,CAA2CK,YAAY,CAACt8C,QAAxD,EA/BkC,CAiClC;;AACA,oBAAI,OAAOqB,KAAK,CAACw7C,iBAAb,KAAmC,WAAvC,EAAoD;AAClD,sBAAIjB,OAAO,KAAK,YAAhB,EAA8B;AAC5B,qBAAC,GAAGF,cAAc,CAACoB,2BAAnB;AACD;;AAEDR,kBAAAA,YAAY,CAAC5B,oBAAb,GAAoCr5C,KAAK,CAACw7C,iBAA1C;AACD,iBAxCiC,CA0ClC;AACA;;;AACA,oBAAIE,eAAe,GAAGhnD,MAAM,CAACuZ,IAAP,CAAYgtC,YAAZ,CAAtB;AACA,oBAAIU,cAAc,GAAG,CAAC,GAAG9I,QAAQ,CAACrgC,IAAb,EAAmB,KAAKxS,KAAxB,EAA+B07C,eAA/B,CAArB,CA7CkC,CA+ClC;AACA;AACA;;AACAC,gBAAAA,cAAc,CAACtrC,KAAf,GAAuBmiC,QAAQ,CAAC;AAC9BsG,kBAAAA,QAAQ,EAAE;AADoB,iBAAD,EAE5B6C,cAAc,CAACtrC,KAFa,CAA/B;AAIA4qC,gBAAAA,YAAY,CAAChB,SAAb,GAAyB0B,cAAzB;AAEA,uBAAOV,YAAP;AACD;AA3DA,aAzBiC,EAqFjC;AACDriD,cAAAA,GAAG,EAAE,mBADJ;AAEDuC,cAAAA,KAAK,EAAE,SAASggD,iBAAT,CAA2B95B,IAA3B,EAAiC;AACtC,oBAAIu6B,QAAQ,GAAG,KAAK57C,KAAL,CAAWqhB,IAAX,CAAf;AAEA,oBAAIlmB,KAAK,GAAG,OAAOygD,QAAP,KAAoB,QAApB,GAA+BA,QAA/B,GAA0C3vC,QAAQ,CAAC2vC,QAAD,EAAW,EAAX,CAA9D;;AAEA,oBAAIhsC,KAAK,CAACzU,KAAD,CAAT,EAAkB;AAChB,sBAAI4D,YAAY,GAAG47C,qBAAqB,CAAC17C,YAAtB,CAAmCoiB,IAAnC,CAAnB;;AAEA,sBAAIk5B,OAAO,KAAK,YAAhB,EAA8B;AAC5B,qBAAC,GAAGF,cAAc,CAACwB,wBAAnB,EAA6C;AAC3Cx6B,sBAAAA,IAAI,EAAEA,IADqC;AAE3ClmB,sBAAAA,KAAK,EAAEygD,QAFoC;AAG3C78C,sBAAAA,YAAY,EAAEA;AAH6B,qBAA7C;AAKD;;AAED,yBAAOA,YAAP;AACD;;AAED,uBAAO5D,KAAP;AACD,eAtBA,CAwBD;;AAxBC,aArFiC,EA+GjC;AACDvC,cAAAA,GAAG,EAAE,sBADJ;AAEDuC,cAAAA,KAAK,EAAE,SAASigD,oBAAT,CAA8BU,SAA9B,EAAyCC,OAAzC,EAAkD;AACvD,wBAAQ,OAAOD,SAAP,KAAqB,WAArB,GAAmC,WAAnC,GAAiD3jC,OAAO,CAAC2jC,SAAD,CAAhE;AACE,uBAAK,SAAL;AACE;AACE;AACA;AACA,6BAAOC,OAAO,CAACD,SAAS,GAAGxB,kBAAkB,CAAC0B,aAAtB,GAAsC1B,kBAAkB,CAAC2B,aAAnE,CAAd;AACD;;AAEH,uBAAK,QAAL;AACE;AACE,0BAAIC,UAAU,GAAGxnD,MAAM,CAACuZ,IAAP,CAAY8tC,OAAZ,CAAjB;;AAEA,0BAAIG,UAAU,CAACtpC,OAAX,CAAmBkpC,SAAnB,MAAkC,CAAC,CAAvC,EAA0C;AACxC,4BAAIvB,OAAO,KAAK,YAAhB,EAA8B;AAC5B,2BAAC,GAAGF,cAAc,CAAC8B,uBAAnB,EAA4C;AAC1ChhD,4BAAAA,KAAK,EAAE2gD,SADmC;AAE1CM,4BAAAA,gBAAgB,EAAEF,UAAU,CAAC3hC,IAAX,CAAgB,IAAhB,CAFwB;AAG1Cxb,4BAAAA,YAAY,EAAEu7C,kBAAkB,CAAC0B;AAHS,2BAA5C;AAKD;;AAED,+BAAOD,OAAO,CAACzB,kBAAkB,CAAC0B,aAApB,CAAd;AACD;;AAED,6BAAOD,OAAO,CAACD,SAAD,CAAd;AACD;;AAEH;AACE;AACE,6BAAOA,SAAP;AACD;AA9BL;AAgCD;AAnCA,aA/GiC,EAmJjC;AACDljD,cAAAA,GAAG,EAAE,QADJ;AAEDuC,cAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,uBAAOolB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B++C,iBAA9B,EAAiD,KAAKO,YAAL,CAAkB,KAAKh7C,KAAvB,CAAjD,CAAP;AACD;AAJA,aAnJiC,CAAxB,CAAZ;;AA0JA,mBAAO26C,qBAAP;AACD,WApKuB,CAoKtB74B,MAAM,CAACxc,SApKe,CAAjB,EAoKco1C,MAAM,CAACz7C,YAAP,GAAsB;AACzCi8C,YAAAA,MAAM,EAAE,aADiC;AAEzC5B,YAAAA,QAAQ,EAAE,GAF+B;AAGzCC,YAAAA,KAAK,EAAE,CAHkC;AAIzCC,YAAAA,iBAAiB,EAAE,CAJsB;AAKzCvW,YAAAA,cAAc,EAAE,CALyB;AAMzCyW,YAAAA,QAAQ,EAAE,KAN+B;AAOzCvW,YAAAA,cAAc,EAAEmX,kBAAkB,CAAC0B,aAPM;AAQzC5Y,YAAAA,cAAc,EAAEkX,kBAAkB,CAAC0B,aARM;AASzC3C,YAAAA,oBAAoB,EAAE,KATmB;AAUzCzE,YAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB1yC,IAArB,EAA2B;AACtC,qBAAOA,IAAI,CAACm6C,qBAAL,EAAP;AACD,aAZwC;AAazC3F,YAAAA,uBAAuB,EAAE,KAbgB;AAczCI,YAAAA,iBAAiB,EAAE;AAdsB,WApKpC,EAmLJvD,KAnLH;AAoLD;;AAED9/C,QAAAA,OAAO,WAAP,GAAkB+mD,aAAlB;AACA9mD,QAAAA,MAAM,CAACD,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB;AACA;AAA4B,OA7OA,EA6OCU,IA7OD,CA6OMV,OA7ON,EA6OeM,mBAAmB,CAAC,CAAD,CA7OlC,CAAD;AA+O3B;AAAO,KAtkTG;AAukTV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAKA,eAASmhD,QAAT,CAAkBvhC,GAAlB,EAAuB;AACrB,YAAIwhC,SAAS,GAAG,KAAhB;AACA,eAAO,YAAY;AACjB,cAAI,CAACA,SAAL,EAAgB;AACd11B,YAAAA,OAAO,CAACC,IAAR,CAAa/L,GAAb;AACAwhC,YAAAA,SAAS,GAAG,IAAZ;AACD;AACF,SALD;AAMD;;AACD,UAAIxB,oCAAoC,GAAGtnD,OAAO,CAACsnD,oCAAR,GAA+CuB,QAAQ,CAAC,sXAAD,CAAlG;;AAEA,UAAIT,wBAAwB,GAAGpoD,OAAO,CAACooD,wBAAR,GAAmC,SAASA,wBAAT,CAAkCn6C,IAAlC,EAAwC;AACxG,eAAOmlB,OAAO,CAAChG,KAAR,CAAc,uEAAuEnf,IAAI,CAAC2f,IAA5E,GAAmF,8HAAnF,GAAoN3f,IAAI,CAACvG,KAAzN,GAAiO,qFAAjO,GAAyTuG,IAAI,CAAC3C,YAA9T,GAA6U,OAA3V,CAAP;AACD,OAFD;;AAIA,UAAI08C,2BAA2B,GAAGhoD,OAAO,CAACgoD,2BAAR,GAAsCa,QAAQ,CAAC,+NAAD,CAAhF;;AAEA,UAAIH,uBAAuB,GAAG1oD,OAAO,CAAC0oD,uBAAR,GAAkC,SAASA,uBAAT,CAAiCz6C,IAAjC,EAAuC;AACrG,eAAOmlB,OAAO,CAAChG,KAAR,CAAc,wHAAwHnf,IAAI,CAACvG,KAA7H,GAAqI,sCAArI,GAA8KuG,IAAI,CAAC06C,gBAAnL,GAAsM,2BAAtM,GAAoO16C,IAAI,CAAC3C,YAAzO,GAAwP,oBAAtQ,CAAP;AACD,OAFD;AAIA;;AAAO,KAvmTG;AAwmTV;;AACA;AAAO,cAASrL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA,UAAImgD,YAAY,GAAG7nD,OAAO,CAAC6nD,YAAR,GAAuB;AACxCkB,QAAAA,QAAQ,EAAE;AACRnlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,UAAb;AAAyBC,YAAAA,OAAO,EAAE;AAAlC,WADE;AAERnrB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,EAAb;AAAiBC,YAAAA,OAAO,EAAE;AAA1B;AAFI,SAD8B;AAKxC+E,QAAAA,IAAI,EAAE;AACJplC,UAAAA,IAAI,EAAE;AAAEqgC,YAAAA,OAAO,EAAE;AAAX,WADF;AAEJnrB,UAAAA,EAAE,EAAE;AAAEmrB,YAAAA,OAAO,EAAE;AAAX;AAFA,SALkC;AASxCgF,QAAAA,iBAAiB,EAAE;AACjBrlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADW;AAEjBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,EAAb;AAAiBkF,YAAAA,eAAe,EAAE;AAAlC;AAFa,SATqB;AAaxCC,QAAAA,mBAAmB,EAAE;AACnBvlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADa;AAEnBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,EAAb;AAAiBkF,YAAAA,eAAe,EAAE;AAAlC;AAFe,SAbmB;AAiBxCE,QAAAA,IAAI,EAAE;AAjBkC,OAA1C;AAmBA;;;;;;;;AAOA,UAAItB,YAAY,GAAG9nD,OAAO,CAAC8nD,YAAR,GAAuB;AACxCiB,QAAAA,QAAQ,EAAE;AACRnlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,UAAb;AAAyBC,YAAAA,OAAO,EAAE;AAAlC,WADE;AAERnrB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,UAAb;AAAyBC,YAAAA,OAAO,EAAE;AAAlC;AAFI,SAD8B;AAKxC+E,QAAAA,IAAI,EAAE;AACJplC,UAAAA,IAAI,EAAE;AAAEqgC,YAAAA,OAAO,EAAE;AAAX,WADF;AAEJnrB,UAAAA,EAAE,EAAE;AAAEmrB,YAAAA,OAAO,EAAE;AAAX;AAFA,SALkC;AASxCgF,QAAAA,iBAAiB,EAAE;AACjBrlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADW;AAEjBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C;AAFa,SATqB;AAaxCC,QAAAA,mBAAmB,EAAE;AACnBvlC,UAAAA,IAAI,EAAE;AAAEogC,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C,WADa;AAEnBpwB,UAAAA,EAAE,EAAE;AAAEkrB,YAAAA,SAAS,EAAE,WAAb;AAA0BkF,YAAAA,eAAe,EAAE;AAA3C;AAFe,SAbmB;AAiBxCE,QAAAA,IAAI,EAAE;AAjBkC,OAA1C,CAlCsD,CAsDtD;AACA;;AACA,UAAIxB,aAAa,GAAG5nD,OAAO,CAAC4nD,aAAR,GAAwBC,YAA5C,CAxDsD,CA0DtD;AACA;AACA;AACA;AACA;;AACAA,MAAAA,YAAY,CAACwB,iBAAb,GAAiCxB,YAAY,CAACoB,iBAA9C,CA/DsD,CAgEtD;;AACApB,MAAAA,YAAY,CAACyB,mBAAb,GAAmCzB,YAAY,CAACsB,mBAAhD,CAjEsD,CAkEtD;;AACArB,MAAAA,YAAY,CAACuB,iBAAb,GAAiCvB,YAAY,CAACmB,iBAA9C,CAnEsD,CAoEtD;;AACAnB,MAAAA,YAAY,CAACwB,mBAAb,GAAmCxB,YAAY,CAACqB,mBAAhD;AAEA,UAAIZ,aAAa,GAAGvoD,OAAO,CAACuoD,aAAR,GAAwB,UAA5C;AACA,UAAIC,aAAa,GAAGxoD,OAAO,CAACwoD,aAAR,GAAwB,MAA5C;AAEA;AAAO,KAnrTG;AAorTV;;AACA;AAAO,cAASvoD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA1H,MAAAA,OAAO,CAAC+jD,sBAAR,GAAiC/jD,OAAO,CAACsmD,aAAR,GAAwBtmD,OAAO,CAACsjD,uBAAR,GAAkCtjD,OAAO,CAACojD,qBAAR,GAAgCpjD,OAAO,CAAC0hD,gBAAR,GAA2B1hD,OAAO,CAAColD,sBAAR,GAAiCj+C,SAAvL;;AAEA,UAAI43C,QAAQ,GAAG99C,MAAM,CAAC2yB,MAAP,IAAiB,UAAU5sB,MAAV,EAAkB;AAAE,aAAK,IAAIxG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8E,SAAS,CAACJ,MAA9B,EAAsC1E,CAAC,EAAvC,EAA2C;AAAE,cAAI0F,MAAM,GAAGZ,SAAS,CAAC9E,CAAD,CAAtB;;AAA2B,eAAK,IAAI2E,GAAT,IAAgBe,MAAhB,EAAwB;AAAE,gBAAIjF,MAAM,CAACW,SAAP,CAAiBC,cAAjB,CAAgCnB,IAAhC,CAAqCwF,MAArC,EAA6Cf,GAA7C,CAAJ,EAAuD;AAAE6B,cAAAA,MAAM,CAAC7B,GAAD,CAAN,GAAce,MAAM,CAACf,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,eAAO6B,MAAP;AAAgB,OAAhQ;AACA;;;;;;;;;;AAUAhH,MAAAA,OAAO,CAACwjD,oBAAR,GAA+BA,oBAA/B;AACAxjD,MAAAA,OAAO,CAACy/C,oBAAR,GAA+BA,oBAA/B;;AAEA,UAAIxwB,SAAS,GAAG3uB,mBAAmB,CAAC,CAAD,CAAnC;;AAEA,UAAI8+C,QAAQ,GAAG9+C,mBAAmB,CAAC,EAAD,CAAlC;;AAEA,eAASib,eAAT,CAAyBvW,GAAzB,EAA8BG,GAA9B,EAAmCuC,KAAnC,EAA0C;AAAE,YAAIvC,GAAG,IAAIH,GAAX,EAAgB;AAAE/D,UAAAA,MAAM,CAACC,cAAP,CAAsB8D,GAAtB,EAA2BG,GAA3B,EAAgC;AAAEuC,YAAAA,KAAK,EAAEA,KAAT;AAAgBtG,YAAAA,UAAU,EAAE,IAA5B;AAAkCD,YAAAA,YAAY,EAAE,IAAhD;AAAsD4Y,YAAAA,QAAQ,EAAE;AAAhE,WAAhC;AAA0G,SAA5H,MAAkI;AAAE/U,UAAAA,GAAG,CAACG,GAAD,CAAH,GAAWuC,KAAX;AAAmB;;AAAC,eAAO1C,GAAP;AAAa;;AAEjN,eAASw+C,oBAAT,CAA8Bj1B,IAA9B,EAAoC;AAClC,YAAI4xB,OAAO,GAAG5xB,IAAI,CAAC4xB,OAAnB;AAAA,YACIsD,MAAM,GAAGl1B,IAAI,CAACk1B,MADlB,CADkC,CAIlC;AACA;;AACAxiD,QAAAA,MAAM,CAACuZ,IAAP,CAAYipC,MAAZ,EAAoB1+C,OAApB,CAA4B,UAAUI,GAAV,EAAe;AACzCg7C,UAAAA,OAAO,CAACvjC,KAAR,CAAc6e,WAAd,CAA0B,CAAC,GAAG2jB,QAAQ,CAAC1/B,SAAb,EAAwBva,GAAxB,CAA1B,EAAwDs+C,MAAM,CAACt+C,GAAD,CAA9D;AACD,SAFD;AAGD,OAvCqD,CAyCtD;;;AACA,eAASs6C,oBAAT,GAAgC;AAC9B,YAAI8J,WAAW,GAAG;AAChB7F,UAAAA,UAAU,EAAE,eADI;AAEhB,2BAAiB,gBAFD;AAGhB,6BAAmB,eAHH;AAIhB,gCAAsB;AAJN,SAAlB,CAD8B,CAQ9B;AACA;;AACA,YAAI,OAAO5+C,QAAP,KAAoB,WAAxB,EAAqC,OAAO,EAAP;AAErC,YAAIoiB,EAAE,GAAGpiB,QAAQ,CAACmD,aAAT,CAAuB,aAAvB,CAAT;AAEA,YAAIuhD,KAAK,GAAGvoD,MAAM,CAACuZ,IAAP,CAAY+uC,WAAZ,EAAyB1G,IAAzB,CAA8B,UAAU7yB,CAAV,EAAa;AACrD,iBAAO9I,EAAE,CAACtK,KAAH,CAAS6sC,gBAAT,CAA0Bz5B,CAA1B,MAAiC7oB,SAAxC;AACD,SAFW,CAAZ,CAd8B,CAkB9B;AACA;;AACA,eAAOqiD,KAAK,GAAGD,WAAW,CAACC,KAAD,CAAd,GAAwB,EAApC;AACD;;AAED,UAAIpE,sBAAsB,GAAGplD,OAAO,CAAColD,sBAAR,GAAiC,SAASA,sBAAT,CAAgCtC,KAAhC,EAAuC;AACnG,YAAI/B,YAAY,GAAG+B,KAAK,CAAC/B,YAAzB;AAAA,YACImE,aAAa,GAAGpC,KAAK,CAACoC,aAD1B;AAAA,YAEI/D,WAAW,GAAG2B,KAAK,CAAC3B,WAFxB;AAIA,YAAIuI,SAAS,GAAGvI,WAAW,CAAC+D,aAAD,CAA3B;;AAEA,YAAIyE,YAAY,GAAGxI,WAAW,CAACJ,YAAD,CAA9B;AAAA,YACIuE,GAAG,GAAGqE,YAAY,CAACrE,GADvB;AAAA,YAEIC,IAAI,GAAGoE,YAAY,CAACpE,IAFxB;AAAA,YAGIC,KAAK,GAAGmE,YAAY,CAACnE,KAHzB;AAAA,YAIIC,MAAM,GAAGkE,YAAY,CAAClE,MAJ1B;AAAA,YAKImE,KAAK,GAAGD,YAAY,CAACC,KALzB;AAAA,YAMIhF,MAAM,GAAG+E,YAAY,CAAC/E,MAN1B;;AAQA,eAAO;AACLU,UAAAA,GAAG,EAAEA,GAAG,GAAGoE,SAAS,CAACpE,GADhB;AAELC,UAAAA,IAAI,EAAEA,IAAI,GAAGmE,SAAS,CAACnE,IAFlB;AAGLC,UAAAA,KAAK,EAAEkE,SAAS,CAAClE,KAAV,GAAkBA,KAHpB;AAILC,UAAAA,MAAM,EAAEiE,SAAS,CAACjE,MAAV,GAAmBA,MAJtB;AAKLmE,UAAAA,KAAK,EAAEA,KALF;AAMLhF,UAAAA,MAAM,EAAEA;AANH,SAAP;AAQD,OAvBD;AAyBA;;;;;;;AAKA,UAAIlD,gBAAgB,GAAG1hD,OAAO,CAAC0hD,gBAAR,GAA2B,SAASA,gBAAT,CAA0B+C,KAA1B,EAAiC;AACjF,YAAI1D,YAAY,GAAG0D,KAAK,CAAC1D,YAAzB;AAAA,YACIC,gBAAgB,GAAGyD,KAAK,CAACzD,gBAD7B;AAAA,YAEIC,iBAAiB,GAAGwD,KAAK,CAACxD,iBAF9B;AAAA,YAGIE,WAAW,GAAGsD,KAAK,CAACtD,WAHxB,CADiF,CAMjF;;AACA,YAAI0I,UAAU,GAAG;AAAEvE,UAAAA,GAAG,EAAE,CAAP;AAAUC,UAAAA,IAAI,EAAE,CAAhB;AAAmBC,UAAAA,KAAK,EAAE,CAA1B;AAA6BC,UAAAA,MAAM,EAAE,CAArC;AAAwCb,UAAAA,MAAM,EAAE,CAAhD;AAAmDgF,UAAAA,KAAK,EAAE;AAA1D,SAAjB,CAPiF,CASjF;AACA;;AACA,YAAIE,cAAc,GAAG9I,gBAAgB,IAAI6I,UAAzC;AACA,YAAIH,SAAS,GAAGzI,iBAAiB,IAAI4I,UAArC,CAZiF,CAcjF;AACA;AACA;AACA;;AACA,YAAIE,cAAc,GAAG5I,WAAW,CAACJ,YAAD,CAAhC;AACA,YAAIiJ,cAAc,GAAG;AACnB1E,UAAAA,GAAG,EAAEyE,cAAc,CAACzE,GAAf,GAAqBoE,SAAS,CAACpE,GADjB;AAEnBC,UAAAA,IAAI,EAAEwE,cAAc,CAACxE,IAAf,GAAsBmE,SAAS,CAACnE;AAFnB,SAArB;AAKA,eAAO,CAACuE,cAAc,CAACvE,IAAf,GAAsByE,cAAc,CAACzE,IAAtC,EAA4CuE,cAAc,CAACxE,GAAf,GAAqB0E,cAAc,CAAC1E,GAAhF,CAAP;AACD,OAzBD;AA2BA;;;;;;;;;;;;AAUA,UAAIlC,qBAAqB,GAAGpjD,OAAO,CAACojD,qBAAR,GAAgC,SAASA,qBAAT,CAA+BxD,SAA/B,EAA0CyD,iBAA1C,EAA6D;AACvH,YAAIlD,OAAO,GAAGP,SAAS,CAACO,OAAxB;AAAA,YACIC,WAAW,GAAGR,SAAS,CAACQ,WAD5B;;AAIA,YAAI,CAACD,OAAD,IAAY,CAACC,WAAjB,EAA8B;AAC5B;AACD,SAPsH,CASvH;;;AACA,YAAI6J,QAAQ,GAAG7nD,MAAM,CAAC8nD,gBAAP,CAAwB/J,OAAxB,CAAf,CAVuH,CAYvH;AACA;;AACA,YAAIgK,WAAW,GAAG,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,CAAlB;AACA,YAAIC,OAAO,GAAGD,WAAW,CAACE,MAAZ,CAAmB,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACtD,cAAIC,WAAW,GAAGP,QAAQ,CAACR,gBAAT,CAA0Bc,MAA1B,CAAlB;AAEA,iBAAOxL,QAAQ,CAAC,EAAD,EAAKuL,GAAL,EAAU/uC,eAAe,CAAC,EAAD,EAAKgvC,MAAL,EAAapzC,MAAM,CAACqzC,WAAW,CAAC9lD,OAAZ,CAAoB,IAApB,EAA0B,EAA1B,CAAD,CAAnB,CAAzB,CAAf;AACD,SAJa,EAIX,EAJW,CAAd,CAfuH,CAqBvH;AACA;AACA;AACA;;AACA,YAAI+lD,SAAS,GAAGpH,iBAAiB,KAAK,QAAtB,GAAiCjD,WAAW,CAACkF,GAAZ,GAAkBlF,WAAW,CAACwE,MAA/D,GAAwExE,WAAW,CAACkF,GAApG;AAEA,YAAI7B,MAAM,GAAG;AACX4B,UAAAA,QAAQ,EAAE,UADC;AAEXC,UAAAA,GAAG,EAAEmF,SAAS,GAAGL,OAAO,CAAC,YAAD,CAAnB,GAAoC,IAF9B;AAGX7E,UAAAA,IAAI,EAAEnF,WAAW,CAACmF,IAAZ,GAAmB6E,OAAO,CAAC,aAAD,CAA1B,GAA4C,IAHvC;AAIX5E,UAAAA,KAAK,EAAEpF,WAAW,CAACoF,KAAZ,GAAoB4E,OAAO,CAAC,cAAD,CAA3B,GAA8C;AAJ1C,SAAb;AAOA5G,QAAAA,oBAAoB,CAAC;AAAErD,UAAAA,OAAO,EAAEA,OAAX;AAAoBsD,UAAAA,MAAM,EAAEA;AAA5B,SAAD,CAApB;AACD,OAnCD;AAqCA;;;;;;;;AAMA,UAAIH,uBAAuB,GAAGtjD,OAAO,CAACsjD,uBAAR,GAAkC,SAASA,uBAAT,CAAiCoH,KAAjC,EAAwC;AACtG,YAAIvK,OAAO,GAAGuK,KAAK,CAACvK,OAApB;AAAA,YACID,UAAU,GAAGwK,KAAK,CAACxK,UADvB;AAAA,YAEIiB,WAAW,GAAGuJ,KAAK,CAACvJ,WAFxB;AAIA,YAAI+D,aAAa,GAAGhF,UAAU,CAACC,OAA/B;AACA,YAAIc,iBAAiB,GAAGf,UAAU,CAACE,WAAnC;;AAEA,YAAI,CAAC8E,aAAD,IAAkB,CAACjE,iBAAvB,EAA0C;AACxC;AACD,SAVqG,CAYtG;AACA;AACA;AACA;AACA;;;AACAuC,QAAAA,oBAAoB,CAAC;AAAErD,UAAAA,OAAO,EAAEA,OAAX;AAAoBsD,UAAAA,MAAM,EAAE;AAAEmB,YAAAA,MAAM,EAAE;AAAV;AAA5B,SAAD,CAApB,CAjBsG,CAmBtG;AACA;AACA;;AACA,YAAI+F,oBAAoB,GAAG1J,iBAAiB,CAAC2D,MAA7C;AACA,YAAIgG,qBAAqB,GAAGzJ,WAAW,CAAC+D,aAAD,CAAX,CAA2BN,MAAvD;AACA,YAAIiG,iBAAiB,GAAGF,oBAAoB,GAAGC,qBAA/C,CAxBsG,CA0BtG;AACA;AACA;;AACA,YAAInH,MAAM,GAAG;AACXmB,UAAAA,MAAM,EAAEiG,iBAAiB,GAAG,CAApB,GAAwBA,iBAAiB,GAAG,IAA5C,GAAmD;AADhD,SAAb;AAIArH,QAAAA,oBAAoB,CAAC;AAAErD,UAAAA,OAAO,EAAEA,OAAX;AAAoBsD,UAAAA,MAAM,EAAEA;AAA5B,SAAD,CAApB;AACD,OAlCD;;AAoCA,UAAI6C,aAAa,GAAGtmD,OAAO,CAACsmD,aAAR,GAAwB,SAASA,aAAT,CAAuB/3C,OAAvB,EAAgC;AAC1E;AACA,YAAI,OAAO8gB,WAAP,KAAuB,WAA3B,EAAwC;AACtC,iBAAO,IAAP;AACD,SAJyE,CAM1E;;;AACA,YAAI9gB,OAAO,YAAY8gB,WAAvB,EAAoC;AAClC,iBAAO9gB,OAAP;AACD,SATyE,CAW1E;AACA;AACA;;;AACA,YAAIu8C,SAAS,GAAG,CAAC,GAAG77B,SAAS,CAAC7mB,WAAd,EAA2BmG,OAA3B,CAAhB;;AAEA,YAAI,EAAEu8C,SAAS,YAAYz7B,WAAvB,CAAJ,EAAyC;AACvC;AACA,iBAAO,IAAP;AACD;;AAED,eAAOy7B,SAAP;AACD,OAtBD;;AAwBA,UAAI/G,sBAAsB,GAAG/jD,OAAO,CAAC+jD,sBAAR,GAAiC,SAASA,sBAAT,CAAgCryC,KAAhC,EAAuCnF,KAAvC,EAA8C;AAC1G,YAAIu5C,KAAK,GAAGv5C,KAAK,CAACu5C,KAAlB;AAAA,YACID,QAAQ,GAAGt5C,KAAK,CAACs5C,QADrB;AAEA,YAAIE,iBAAiB,GAAGx5C,KAAK,CAACw5C,iBAA9B;AAAA,YACIvW,cAAc,GAAGjjC,KAAK,CAACijC,cAD3B;AAAA,YAEIiY,MAAM,GAAGl7C,KAAK,CAACk7C,MAFnB;AAKA3B,QAAAA,KAAK,IAAIp0C,KAAK,GAAG89B,cAAjB;AACAqW,QAAAA,QAAQ,IAAIn0C,KAAK,GAAGq0C,iBAApB;AAEA,YAAIgF,aAAa,GAAG,CAAC,WAAD,EAAc,SAAd,CAApB;AAEA,eAAOA,aAAa,CAACj+C,GAAd,CAAkB,UAAU8gB,IAAV,EAAgB;AACvC,iBAAOA,IAAI,GAAG,GAAP,GAAai4B,QAAb,GAAwB,KAAxB,GAAgC4B,MAAhC,GAAyC,GAAzC,GAA+C3B,KAA/C,GAAuD,IAA9D;AACD,SAFM,EAEJh/B,IAFI,CAEC,IAFD,CAAP;AAGD,OAhBD;AAkBA;;AAAO,KAl7TG;AAm7TV;;AACA;AAAO,cAAS7mB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI0qD,8BAAJ,EAAoCC,4BAApC,EAAkEC,6BAAlE;AAAgG;;;;;;;AAKhG,OAAC,UAAU/oD,MAAV,EAAkBpC,OAAlB,EAA2B;AAC3B,YAAI,IAAJ,EAAU;AACT,YAAEkrD,4BAA4B,GAAG,CAACjrD,OAAD,EAAUC,MAAV,CAA/B,EAAkD+qD,8BAA8B,GAAIjrD,OAApF,EACAmrD,6BAA6B,GAAI,OAAOF,8BAAP,KAA0C,UAA1C,GAChCA,8BAA8B,CAAC3jD,KAA/B,CAAqCrH,OAArC,EAA8CirD,4BAA9C,CADgC,GAC+CD,8BAFhF,EAGAE,6BAA6B,KAAK/jD,SAAlC,KAAgDlH,MAAM,CAACD,OAAP,GAAiBkrD,6BAAjE,CAHF;AAIA,SALD,MAKO,IAAI,OAAOlrD,OAAP,KAAmB,WAAnB,IAAkC,OAAOC,MAAP,KAAkB,WAAxD,EAAqE;AAC3EF,UAAAA,OAAO,CAACC,OAAD,EAAUC,MAAV,CAAP;AACA,SAFM,MAEA;AACN,cAAIkrD,GAAG,GAAG;AACTnrD,YAAAA,OAAO,EAAE;AADA,WAAV;AAGAD,UAAAA,OAAO,CAACorD,GAAG,CAACnrD,OAAL,EAAcmrD,GAAd,CAAP;AACAhpD,UAAAA,MAAM,CAACipD,QAAP,GAAkBD,GAAG,CAACnrD,OAAtB;AACA;AACD,OAfD,EAeG,IAfH,EAeS,UAAUA,OAAV,EAAmBC,MAAnB,EAA2B;AACnC;;AAEA,YAAI6M,GAAG,GAAG,OAAOu+C,GAAP,KAAe,UAAf,GAA4B,IAAIA,GAAJ,EAA5B,GAAyC,YAAY;AAC9D,cAAI7wC,IAAI,GAAG,EAAX;AACA,cAAImG,MAAM,GAAG,EAAb;AAEA,iBAAO;AACN7a,YAAAA,GAAG,EAAE,SAASA,GAAT,CAAaX,GAAb,EAAkB;AACtB,qBAAOqV,IAAI,CAAC2E,OAAL,CAAaha,GAAb,IAAoB,CAAC,CAA5B;AACA,aAHK;AAIN9D,YAAAA,GAAG,EAAE,SAASA,GAAT,CAAa8D,GAAb,EAAkB;AACtB,qBAAOwb,MAAM,CAACnG,IAAI,CAAC2E,OAAL,CAAaha,GAAb,CAAD,CAAb;AACA,aANK;AAONmF,YAAAA,GAAG,EAAE,SAASA,GAAT,CAAanF,GAAb,EAAkBuC,KAAlB,EAAyB;AAC7B,kBAAI8S,IAAI,CAAC2E,OAAL,CAAaha,GAAb,MAAsB,CAAC,CAA3B,EAA8B;AAC7BqV,gBAAAA,IAAI,CAAC7L,IAAL,CAAUxJ,GAAV;AACAwb,gBAAAA,MAAM,CAAChS,IAAP,CAAYjH,KAAZ;AACA;AACD,aAZK;AAaN,sBAAU,SAAS4jD,OAAT,CAAiBnmD,GAAjB,EAAsB;AAC/B,kBAAIuM,KAAK,GAAG8I,IAAI,CAAC2E,OAAL,CAAaha,GAAb,CAAZ;;AACA,kBAAIuM,KAAK,GAAG,CAAC,CAAb,EAAgB;AACf8I,gBAAAA,IAAI,CAACmkB,MAAL,CAAYjtB,KAAZ,EAAmB,CAAnB;AACAiP,gBAAAA,MAAM,CAACge,MAAP,CAAcjtB,KAAd,EAAqB,CAArB;AACA;AACD;AAnBK,WAAP;AAqBA,SAzBiD,EAAlD;;AA2BA,YAAI65C,WAAW,GAAG,SAASA,WAAT,CAAqBzqD,IAArB,EAA2B;AAC5C,iBAAO,IAAI0qD,KAAJ,CAAU1qD,IAAV,EAAgB;AAAE2qD,YAAAA,OAAO,EAAE;AAAX,WAAhB,CAAP;AACA,SAFD;;AAGA,YAAI;AACH,cAAID,KAAJ,CAAU,MAAV;AACA,SAFD,CAEE,OAAO7gD,CAAP,EAAU;AACX;AACA4gD,UAAAA,WAAW,GAAG,qBAAUzqD,IAAV,EAAgB;AAC7B,gBAAI4qD,GAAG,GAAG5mD,QAAQ,CAACymD,WAAT,CAAqB,OAArB,CAAV;AACAG,YAAAA,GAAG,CAACC,SAAJ,CAAc7qD,IAAd,EAAoB,IAApB,EAA0B,KAA1B;AACA,mBAAO4qD,GAAP;AACA,WAJD;AAKA;;AAED,iBAAS93B,MAAT,CAAgBg4B,EAAhB,EAAoB;AACnB,cAAI,CAACA,EAAD,IAAO,CAACA,EAAE,CAACvhD,QAAX,IAAuBuhD,EAAE,CAACvhD,QAAH,KAAgB,UAAvC,IAAqDyC,GAAG,CAAChH,GAAJ,CAAQ8lD,EAAR,CAAzD,EAAsE;AAEtE,cAAIC,YAAY,GAAG,IAAnB;AACA,cAAIC,WAAW,GAAGF,EAAE,CAACE,WAArB;AACA,cAAIC,YAAY,GAAG,IAAnB;;AAEA,mBAASC,IAAT,GAAgB;AACf,gBAAIpvC,KAAK,GAAGxa,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,CAAZ;;AAEA,gBAAIhvC,KAAK,CAACqvC,MAAN,KAAiB,UAArB,EAAiC;AAChCL,cAAAA,EAAE,CAAChvC,KAAH,CAASqvC,MAAT,GAAkB,MAAlB;AACA,aAFD,MAEO,IAAIrvC,KAAK,CAACqvC,MAAN,KAAiB,MAArB,EAA6B;AACnCL,cAAAA,EAAE,CAAChvC,KAAH,CAASqvC,MAAT,GAAkB,YAAlB;AACA;;AAED,gBAAIrvC,KAAK,CAACsvC,SAAN,KAAoB,aAAxB,EAAuC;AACtCL,cAAAA,YAAY,GAAG,EAAEzyC,UAAU,CAACwD,KAAK,CAACuvC,UAAP,CAAV,GAA+B/yC,UAAU,CAACwD,KAAK,CAACwvC,aAAP,CAA3C,CAAf;AACA,aAFD,MAEO;AACNP,cAAAA,YAAY,GAAGzyC,UAAU,CAACwD,KAAK,CAACyvC,cAAP,CAAV,GAAmCjzC,UAAU,CAACwD,KAAK,CAAC0vC,iBAAP,CAA5D;AACA,aAbc,CAcf;;;AACA,gBAAInwC,KAAK,CAAC0vC,YAAD,CAAT,EAAyB;AACxBA,cAAAA,YAAY,GAAG,CAAf;AACA;;AAEDlf,YAAAA,MAAM;AACN;;AAED,mBAAS4f,cAAT,CAAwB7kD,KAAxB,EAA+B;AAC9B;AACC;AACA;AACA;AACA,kBAAIkiD,KAAK,GAAGgC,EAAE,CAAChvC,KAAH,CAASgtC,KAArB;AACAgC,cAAAA,EAAE,CAAChvC,KAAH,CAASgtC,KAAT,GAAiB,KAAjB,CALD,CAMC;;AACA;;AACAgC,cAAAA,EAAE,CAACY,WAAH;AACA;;AACAZ,cAAAA,EAAE,CAAChvC,KAAH,CAASgtC,KAAT,GAAiBA,KAAjB;AACA;AAEDgC,YAAAA,EAAE,CAAChvC,KAAH,CAAS6vC,SAAT,GAAqB/kD,KAArB;AACA;;AAED,mBAASglD,kBAAT,CAA4BxlC,EAA5B,EAAgC;AAC/B,gBAAI3Z,GAAG,GAAG,EAAV;;AAEA,mBAAO2Z,EAAE,IAAIA,EAAE,CAACjb,UAAT,IAAuBib,EAAE,CAACjb,UAAH,YAAyBwkB,OAAvD,EAAgE;AAC/D,kBAAIvJ,EAAE,CAACjb,UAAH,CAAc0gD,SAAlB,EAA6B;AAC5Bp/C,gBAAAA,GAAG,CAACoB,IAAJ,CAAS;AACRF,kBAAAA,IAAI,EAAEyY,EAAE,CAACjb,UADD;AAER0gD,kBAAAA,SAAS,EAAEzlC,EAAE,CAACjb,UAAH,CAAc0gD;AAFjB,iBAAT;AAIA;;AACDzlC,cAAAA,EAAE,GAAGA,EAAE,CAACjb,UAAR;AACA;;AAED,mBAAOsB,GAAP;AACA;;AAED,mBAAS0+C,MAAT,GAAkB;AACjB,gBAAIW,cAAc,GAAGhB,EAAE,CAAChvC,KAAH,CAASgoC,MAA9B;AACA,gBAAIiI,SAAS,GAAGH,kBAAkB,CAACd,EAAD,CAAlC;AACA,gBAAIkB,MAAM,GAAGhoD,QAAQ,CAAC0c,eAAT,IAA4B1c,QAAQ,CAAC0c,eAAT,CAAyBmrC,SAAlE,CAHiB,CAG4D;;AAE7Ef,YAAAA,EAAE,CAAChvC,KAAH,CAASgoC,MAAT,GAAkB,MAAlB;AAEA,gBAAImI,SAAS,GAAGnB,EAAE,CAACoB,YAAH,GAAkBnB,YAAlC;;AAEA,gBAAID,EAAE,CAACoB,YAAH,KAAoB,CAAxB,EAA2B;AAC1B;AACApB,cAAAA,EAAE,CAAChvC,KAAH,CAASgoC,MAAT,GAAkBgI,cAAlB;AACA;AACA;;AAEDhB,YAAAA,EAAE,CAAChvC,KAAH,CAASgoC,MAAT,GAAkBmI,SAAS,GAAG,IAA9B,CAfiB,CAiBjB;;AACAjB,YAAAA,WAAW,GAAGF,EAAE,CAACE,WAAjB,CAlBiB,CAoBjB;;AACAe,YAAAA,SAAS,CAAC9nD,OAAV,CAAkB,UAAUmiB,EAAV,EAAc;AAC/BA,cAAAA,EAAE,CAACzY,IAAH,CAAQk+C,SAAR,GAAoBzlC,EAAE,CAACylC,SAAvB;AACA,aAFD;;AAIA,gBAAIG,MAAJ,EAAY;AACXhoD,cAAAA,QAAQ,CAAC0c,eAAT,CAAyBmrC,SAAzB,GAAqCG,MAArC;AACA;AACD;;AAED,mBAASngB,MAAT,GAAkB;AACjBsf,YAAAA,MAAM;AAEN,gBAAIgB,WAAW,GAAG5qD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAACwyC,EAAE,CAAChvC,KAAH,CAASgoC,MAAV,CAArB,CAAlB;AACA,gBAAIqF,QAAQ,GAAG7nD,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,CAAf,CAJiB,CAMjB;;AACA,gBAAIuB,YAAY,GAAGlD,QAAQ,CAACiC,SAAT,KAAuB,aAAvB,GAAuC7pD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAAC6wC,QAAQ,CAACrF,MAAV,CAArB,CAAvC,GAAiFgH,EAAE,CAACwB,YAAvG,CAPiB,CASjB;AACA;;AACA,gBAAID,YAAY,KAAKF,WAArB,EAAkC;AACjC,kBAAIhD,QAAQ,CAACwC,SAAT,KAAuB,QAA3B,EAAqC;AACpCF,gBAAAA,cAAc,CAAC,QAAD,CAAd;AACAN,gBAAAA,MAAM;AACNkB,gBAAAA,YAAY,GAAGlD,QAAQ,CAACiC,SAAT,KAAuB,aAAvB,GAAuC7pD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAAChX,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,EAAkChH,MAAnC,CAArB,CAAvC,GAA0GgH,EAAE,CAACwB,YAA5H;AACA;AACD,aAND,MAMO;AACN;AACA,kBAAInD,QAAQ,CAACwC,SAAT,KAAuB,QAA3B,EAAqC;AACpCF,gBAAAA,cAAc,CAAC,QAAD,CAAd;AACAN,gBAAAA,MAAM;AACNkB,gBAAAA,YAAY,GAAGlD,QAAQ,CAACiC,SAAT,KAAuB,aAAvB,GAAuC7pD,IAAI,CAAC6qD,KAAL,CAAW9zC,UAAU,CAAChX,MAAM,CAAC8nD,gBAAP,CAAwB0B,EAAxB,EAA4B,IAA5B,EAAkChH,MAAnC,CAArB,CAAvC,GAA0GgH,EAAE,CAACwB,YAA5H;AACA;AACD;;AAED,gBAAIrB,YAAY,KAAKoB,YAArB,EAAmC;AAClCpB,cAAAA,YAAY,GAAGoB,YAAf;AACA,kBAAIzB,GAAG,GAAGH,WAAW,CAAC,kBAAD,CAArB;;AACA,kBAAI;AACHK,gBAAAA,EAAE,CAACyB,aAAH,CAAiB3B,GAAjB;AACA,eAFD,CAEE,OAAOrkC,GAAP,EAAY,CACb;AACA;AACA;AACD;AACD;;AAED,cAAIimC,UAAU,GAAG,SAASA,UAAT,GAAsB;AACtC,gBAAI1B,EAAE,CAACE,WAAH,KAAmBA,WAAvB,EAAoC;AACnCnf,cAAAA,MAAM;AACN;AACD,WAJD;;AAMA,cAAI4gB,OAAO,GAAI,UAAU3wC,KAAV,EAAiB;AAC/Bxa,YAAAA,MAAM,CAACm5B,mBAAP,CAA2B,QAA3B,EAAqC+xB,UAArC,EAAiD,KAAjD;AACA1B,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,OAAvB,EAAgCoR,MAAhC,EAAwC,KAAxC;AACAif,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,OAAvB,EAAgCoR,MAAhC,EAAwC,KAAxC;AACAif,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,kBAAvB,EAA2CgyB,OAA3C,EAAoD,KAApD;AACA3B,YAAAA,EAAE,CAACrwB,mBAAH,CAAuB,iBAAvB,EAA0CoR,MAA1C,EAAkD,KAAlD;AAEA1rC,YAAAA,MAAM,CAACuZ,IAAP,CAAYoC,KAAZ,EAAmB7X,OAAnB,CAA2B,UAAUI,GAAV,EAAe;AACzCymD,cAAAA,EAAE,CAAChvC,KAAH,CAASzX,GAAT,IAAgByX,KAAK,CAACzX,GAAD,CAArB;AACA,aAFD;AAIA2H,YAAAA,GAAG,CAAC,QAAD,CAAH,CAAc8+C,EAAd;AACA,WAZa,CAYX9oD,IAZW,CAYN8oD,EAZM,EAYF;AACXhH,YAAAA,MAAM,EAAEgH,EAAE,CAAChvC,KAAH,CAASgoC,MADN;AAEXqH,YAAAA,MAAM,EAAEL,EAAE,CAAChvC,KAAH,CAASqvC,MAFN;AAGXQ,YAAAA,SAAS,EAAEb,EAAE,CAAChvC,KAAH,CAAS6vC,SAHT;AAIXe,YAAAA,SAAS,EAAE5B,EAAE,CAAChvC,KAAH,CAAS4wC,SAJT;AAKXC,YAAAA,QAAQ,EAAE7B,EAAE,CAAChvC,KAAH,CAAS6wC;AALR,WAZE,CAAd;;AAoBA7B,UAAAA,EAAE,CAACxoC,gBAAH,CAAoB,kBAApB,EAAwCmqC,OAAxC,EAAiD,KAAjD,EA5JmB,CA8JnB;AACA;AACA;;AACA,cAAI,sBAAsB3B,EAAtB,IAA4B,aAAaA,EAA7C,EAAiD;AAChDA,YAAAA,EAAE,CAACxoC,gBAAH,CAAoB,OAApB,EAA6BupB,MAA7B,EAAqC,KAArC;AACA;;AAEDvqC,UAAAA,MAAM,CAACghB,gBAAP,CAAwB,QAAxB,EAAkCkqC,UAAlC,EAA8C,KAA9C;AACA1B,UAAAA,EAAE,CAACxoC,gBAAH,CAAoB,OAApB,EAA6BupB,MAA7B,EAAqC,KAArC;AACAif,UAAAA,EAAE,CAACxoC,gBAAH,CAAoB,iBAApB,EAAuCupB,MAAvC,EAA+C,KAA/C;AACAif,UAAAA,EAAE,CAAChvC,KAAH,CAAS4wC,SAAT,GAAqB,QAArB;AACA5B,UAAAA,EAAE,CAAChvC,KAAH,CAAS6wC,QAAT,GAAoB,YAApB;AAEA3gD,UAAAA,GAAG,CAACxC,GAAJ,CAAQshD,EAAR,EAAY;AACX2B,YAAAA,OAAO,EAAEA,OADE;AAEX5gB,YAAAA,MAAM,EAAEA;AAFG,WAAZ;AAKAqf,UAAAA,IAAI;AACJ;;AAED,iBAASuB,OAAT,CAAiB3B,EAAjB,EAAqB;AACpB,cAAIzqC,OAAO,GAAGrU,GAAG,CAACzL,GAAJ,CAAQuqD,EAAR,CAAd;;AACA,cAAIzqC,OAAJ,EAAa;AACZA,YAAAA,OAAO,CAACosC,OAAR;AACA;AACD;;AAED,iBAAS5gB,MAAT,CAAgBif,EAAhB,EAAoB;AACnB,cAAIzqC,OAAO,GAAGrU,GAAG,CAACzL,GAAJ,CAAQuqD,EAAR,CAAd;;AACA,cAAIzqC,OAAJ,EAAa;AACZA,YAAAA,OAAO,CAACwrB,MAAR;AACA;AACD;;AAED,YAAIye,QAAQ,GAAG,IAAf,CA7OmC,CA+OnC;;AACA,YAAI,OAAOhpD,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAAC8nD,gBAAd,KAAmC,UAAxE,EAAoF;AACnFkB,UAAAA,QAAQ,GAAG,kBAAUlkC,EAAV,EAAc;AACxB,mBAAOA,EAAP;AACA,WAFD;;AAGAkkC,UAAAA,QAAQ,CAACmC,OAAT,GAAmB,UAAUrmC,EAAV,EAAc;AAChC,mBAAOA,EAAP;AACA,WAFD;;AAGAkkC,UAAAA,QAAQ,CAACze,MAAT,GAAkB,UAAUzlB,EAAV,EAAc;AAC/B,mBAAOA,EAAP;AACA,WAFD;AAGA,SAVD,MAUO;AACNkkC,UAAAA,QAAQ,GAAG,kBAAUlkC,EAAV,EAAcjQ,OAAd,EAAuB;AACjC,gBAAIiQ,EAAJ,EAAQ;AACP/Z,cAAAA,KAAK,CAACvL,SAAN,CAAgBmD,OAAhB,CAAwBrE,IAAxB,CAA6BwmB,EAAE,CAAChiB,MAAH,GAAYgiB,EAAZ,GAAiB,CAACA,EAAD,CAA9C,EAAoD,UAAU1D,CAAV,EAAa;AAChE,uBAAOoQ,MAAM,CAACpQ,CAAD,EAAIvM,OAAJ,CAAb;AACA,eAFD;AAGA;;AACD,mBAAOiQ,EAAP;AACA,WAPD;;AAQAkkC,UAAAA,QAAQ,CAACmC,OAAT,GAAmB,UAAUrmC,EAAV,EAAc;AAChC,gBAAIA,EAAJ,EAAQ;AACP/Z,cAAAA,KAAK,CAACvL,SAAN,CAAgBmD,OAAhB,CAAwBrE,IAAxB,CAA6BwmB,EAAE,CAAChiB,MAAH,GAAYgiB,EAAZ,GAAiB,CAACA,EAAD,CAA9C,EAAoDqmC,OAApD;AACA;;AACD,mBAAOrmC,EAAP;AACA,WALD;;AAMAkkC,UAAAA,QAAQ,CAACze,MAAT,GAAkB,UAAUzlB,EAAV,EAAc;AAC/B,gBAAIA,EAAJ,EAAQ;AACP/Z,cAAAA,KAAK,CAACvL,SAAN,CAAgBmD,OAAhB,CAAwBrE,IAAxB,CAA6BwmB,EAAE,CAAChiB,MAAH,GAAYgiB,EAAZ,GAAiB,CAACA,EAAD,CAA9C,EAAoDylB,MAApD;AACA;;AACD,mBAAOzlB,EAAP;AACA,WALD;AAMA;;AAEDjnB,QAAAA,MAAM,CAACD,OAAP,GAAiBorD,QAAjB;AACA,OAjSD;AAmSA;;AAAO,KA9tUG;AA+tUV;;AACA;AAAO,cAASnrD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA1H,MAAAA,OAAO,WAAP,GAAkB,UAAUmvC,QAAV,EAAoB;AACpC,eAAO,IAAIue,UAAU,WAAd,CAAuB;AAC5BC,UAAAA,OAAO,EAAEC,OAAO,CAACze,QAAD,CAAP,IAAqBye,OAAO,CAACC,EADV;AAE5BC,UAAAA,MAAM,EAAE3e;AAFoB,SAAvB,CAAP;AAID,OALD;;AAOA,UAAI4e,SAAS,GAAGztD,mBAAmB,CAAC,GAAD,CAAnC;;AAEA,UAAIotD,UAAU,GAAGjyC,sBAAsB,CAACsyC,SAAD,CAAvC;;AAEA,UAAIC,KAAK,GAAG1tD,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI2tD,MAAM,GAAGxyC,sBAAsB,CAACuyC,KAAD,CAAnC;;AAEA,UAAIE,KAAK,GAAG5tD,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI6tD,MAAM,GAAG1yC,sBAAsB,CAACyyC,KAAD,CAAnC;;AAEA,UAAIE,GAAG,GAAG9tD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAI+tD,IAAI,GAAG5yC,sBAAsB,CAAC2yC,GAAD,CAAjC;;AAEA,UAAIE,KAAK,GAAGhuD,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAIiuD,MAAM,GAAG9yC,sBAAsB,CAAC6yC,KAAD,CAAnC;;AAEA,UAAIE,GAAG,GAAGluD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAImuD,IAAI,GAAGhzC,sBAAsB,CAAC+yC,GAAD,CAAjC;;AAEA,UAAIE,GAAG,GAAGpuD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAIquD,IAAI,GAAGlzC,sBAAsB,CAACizC,GAAD,CAAjC;;AAEA,UAAIE,GAAG,GAAGtuD,mBAAmB,CAAC,GAAD,CAA7B;;AAEA,UAAIuuD,IAAI,GAAGpzC,sBAAsB,CAACmzC,GAAD,CAAjC;;AAEA,eAASnzC,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI4oD,OAAO,GAAG;AACZ,cAAMK,MAAM,WADA;AAEZ,iBAASA,MAAM,WAFH;AAGZ,iBAASE,MAAM,WAHH;AAIZ,cAAME,IAAI,WAJE;AAKZ,iBAASE,MAAM,WALH;AAMZ,cAAME,IAAI,WANE;AAOZ,cAAME,IAAI,WAPE;AAQZ,cAAME,IAAI;AARE,OAAd;AAWA;AAAO,KA7xUG;AA8xUV;;AACA;AAAO,cAAS5uD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2qD,4BAAJ,EAAkCC,6BAAlC,CAFsD,CAEU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGC,iBAASprD,IAAT,EAAeC,OAAf,EAAwB;AACvB,YAAI,IAAJ,EAAU;AACR,YAAEkrD,4BAA4B,GAAG,EAA/B,EAAmCC,6BAA6B,GAAG,YAAW;AAC9E,mBAAOnrD,OAAO,CAACD,IAAD,CAAd;AACD,WAFoE,CAEnEuH,KAFmE,CAE7DrH,OAF6D,EAEpDirD,4BAFoD,CAAnE,EAGFC,6BAA6B,KAAK/jD,SAAlC,KAAgDlH,MAAM,CAACD,OAAP,GAAiBkrD,6BAAjE,CAHA;AAID,SALD,MAKO,IAAI,SAAOlrD,OAAP,MAAmB,QAAvB,EAAiC;AACtCC,UAAAA,MAAM,CAACD,OAAP,GAAiBD,OAAO,CAACD,IAAD,CAAxB;AACD,SAFM,MAEA;AACLA,UAAAA,IAAI,CAACgvD,QAAL,GAAgB/uD,OAAO,CAACD,IAAD,CAAvB;AACD;AACF,OAXA,EAWC,IAXD,EAWO,UAASA,IAAT,EAAe;AACrB,qBADqB,CAGrB;;AACA,iBAASgvD,QAAT,CAAkB73C,OAAlB,EAA2B;AACzBA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,eAAK02C,OAAL,GAAe,EAAf;AACA,eAAKnoD,MAAL,CAAYyR,OAAO,CAAC02C,OAAR,IAAmB,EAA/B;AACA,eAAKoB,aAAL,GAAqB93C,OAAO,CAAC62C,MAAR,IAAkB,IAAvC;AACA,eAAKkB,YAAL,GAAoB,CAAC,CAAC/3C,OAAO,CAAC+3C,YAA9B;AACA,eAAK37B,IAAL,GAAYpc,OAAO,CAACoc,IAAR,IAAgBA,IAA5B;AACD,SAXoB,CAarB;;;AACAy7B,QAAAA,QAAQ,CAACG,OAAT,GAAmB,OAAnB,CAdqB,CAgBrB;AACA;AACA;;AACAH,QAAAA,QAAQ,CAACltD,SAAT,CAAmBksD,MAAnB,GAA4B,UAASoB,SAAT,EAAoB;AAC9C,cAAIA,SAAJ,EAAe,KAAKH,aAAL,GAAqBG,SAArB;AACf,iBAAO,KAAKH,aAAZ;AACD,SAHD,CAnBqB,CAwBrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAD,QAAAA,QAAQ,CAACltD,SAAT,CAAmB4D,MAAnB,GAA4B,UAAS2pD,WAAT,EAAsBC,MAAtB,EAA8B;AACxD,cAAIC,MAAJ;;AAEA,eAAK,IAAIlqD,GAAT,IAAgBgqD,WAAhB,EAA6B;AAC3B,gBAAIA,WAAW,CAACttD,cAAZ,CAA2BsD,GAA3B,CAAJ,EAAqC;AACnCkqD,cAAAA,MAAM,GAAGF,WAAW,CAAChqD,GAAD,CAApB;AACA,kBAAIiqD,MAAJ,EAAYjqD,GAAG,GAAGiqD,MAAM,GAAG,GAAT,GAAejqD,GAArB;;AACZ,kBAAI,SAAOkqD,MAAP,MAAkB,QAAtB,EAAgC;AAC9B,qBAAK7pD,MAAL,CAAY6pD,MAAZ,EAAoBlqD,GAApB;AACD,eAFD,MAEO;AACL,qBAAKwoD,OAAL,CAAaxoD,GAAb,IAAoBkqD,MAApB;AACD;AACF;AACF;AACF,SAdD,CAzEqB,CAyFrB;AACA;AACA;AACA;AACA;;;AACAP,QAAAA,QAAQ,CAACltD,SAAT,CAAmB0hB,KAAnB,GAA2B,YAAW;AACpC,eAAKqqC,OAAL,GAAe,EAAf;AACD,SAFD,CA9FqB,CAkGrB;AACA;AACA;AACA;AACA;;;AACAmB,QAAAA,QAAQ,CAACltD,SAAT,CAAmB8C,OAAnB,GAA6B,UAAS4qD,UAAT,EAAqB;AAChD,eAAKhsC,KAAL;AACA,eAAK9d,MAAL,CAAY8pD,UAAZ;AACD,SAHD,CAvGqB,CA6GrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAR,QAAAA,QAAQ,CAACltD,SAAT,CAAmBouB,CAAnB,GAAuB,UAAS7qB,GAAT,EAAc8R,OAAd,EAAuB;AAC5C,cAAIo4C,MAAJ,EAAY5rD,MAAZ;AACAwT,UAAAA,OAAO,GAAGA,OAAO,IAAI,IAAX,GAAkB,EAAlB,GAAuBA,OAAjC,CAF4C,CAG5C;;AACA,cAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BA,YAAAA,OAAO,GAAG;AAAC49B,cAAAA,WAAW,EAAE59B;AAAd,aAAV;AACD;;AACD,cAAI,OAAO,KAAK02C,OAAL,CAAaxoD,GAAb,CAAP,KAA6B,QAAjC,EAA2C;AACzCkqD,YAAAA,MAAM,GAAG,KAAK1B,OAAL,CAAaxoD,GAAb,CAAT;AACD,WAFD,MAEO,IAAI,OAAO8R,OAAO,CAACiwB,CAAf,KAAqB,QAAzB,EAAmC;AACxCmoB,YAAAA,MAAM,GAAGp4C,OAAO,CAACiwB,CAAjB;AACD,WAFM,MAEA,IAAI,KAAK8nB,YAAT,EAAuB;AAC5BK,YAAAA,MAAM,GAAGlqD,GAAT;AACD,WAFM,MAEA;AACL,iBAAKkuB,IAAL,CAAU,mCAAiCluB,GAAjC,GAAqC,GAA/C;AACA1B,YAAAA,MAAM,GAAG0B,GAAT;AACD;;AACD,cAAI,OAAOkqD,MAAP,KAAkB,QAAtB,EAAgC;AAC9Bp4C,YAAAA,OAAO,GAAGs4C,KAAK,CAACt4C,OAAD,CAAf;AACAxT,YAAAA,MAAM,GAAG+rD,gBAAgB,CAACH,MAAD,EAAS,KAAKN,aAAd,EAA6B93C,OAAO,CAAC49B,WAArC,CAAzB;AACApxC,YAAAA,MAAM,GAAGgsD,WAAW,CAAChsD,MAAD,EAASwT,OAAT,CAApB;AACD;;AACD,iBAAOxT,MAAP;AACD,SAvBD,CAtIqB,CAgKrB;AACA;AACA;;;AACAqrD,QAAAA,QAAQ,CAACltD,SAAT,CAAmBkE,GAAnB,GAAyB,UAASX,GAAT,EAAc;AACrC,iBAAOA,GAAG,IAAI,KAAKwoD,OAAnB;AACD,SAFD,CAnKqB,CAwKrB;AACA;;;AACA,YAAI+B,SAAS,GAAG,MAAhB,CA1KqB,CA4KrB;;AACA,YAAIC,WAAW,GAAG;AAChBC,UAAAA,OAAO,EAAI,iBAAStuD,CAAT,EAAY;AAAE,mBAAO,CAAP;AAAW,WADpB;AAEhBuuD,UAAAA,MAAM,EAAK,gBAASvuD,CAAT,EAAY;AAAE,mBAAOA,CAAC,KAAK,CAAN,GAAU,CAAV,GAAc,CAArB;AAAyB,WAFlC;AAGhBwuD,UAAAA,MAAM,EAAK,gBAASxuD,CAAT,EAAY;AAAE,mBAAOA,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAnB;AAAuB,WAHhC;AAIhByuD,UAAAA,OAAO,EAAI,iBAASzuD,CAAT,EAAY;AAAE,mBAAOA,CAAC,GAAG,EAAJ,KAAW,CAAX,IAAgBA,CAAC,GAAG,GAAJ,KAAY,EAA5B,GAAiC,CAAjC,GAAqCA,CAAC,GAAG,EAAJ,IAAU,CAAV,IAAeA,CAAC,GAAG,EAAJ,IAAU,CAAzB,KAA+BA,CAAC,GAAG,GAAJ,GAAU,EAAV,IAAgBA,CAAC,GAAG,GAAJ,IAAW,EAA1D,IAAgE,CAAhE,GAAoE,CAAhH;AAAoH,WAJ7H;AAKhB0uD,UAAAA,KAAK,EAAM,eAAS1uD,CAAT,EAAY;AAAE,mBAAQA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAiBA,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAI,CAAhB,GAAqB,CAArB,GAAyB,CAAhD;AAAoD,WAL7D;AAMhB2uD,UAAAA,MAAM,EAAK,gBAAS3uD,CAAT,EAAY;AAAE,mBAAQA,CAAC,KAAK,CAAN,GAAU,CAAV,GAAcA,CAAC,GAAG,EAAJ,IAAU,CAAV,IAAeA,CAAC,GAAG,EAAJ,IAAU,CAAzB,KAA+BA,CAAC,GAAG,GAAJ,GAAU,EAAV,IAAgBA,CAAC,GAAG,GAAJ,IAAW,EAA1D,IAAgE,CAAhE,GAAoE,CAA1F;AAA+F,WANxG;AAOhB4uD,UAAAA,SAAS,EAAE,mBAAS5uD,CAAT,EAAY;AAAE,mBAAQA,CAAC,GAAG,EAAJ,KAAW,CAAX,IAAgBA,CAAC,GAAG,GAAJ,KAAY,EAA7B,GAAmC,CAAnC,GAAuC,CAA9C;AAAkD;AAP3D,SAAlB,CA7KqB,CAuLrB;;AACA,YAAI6uD,qBAAqB,GAAG;AAC1BP,UAAAA,OAAO,EAAI,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,EAAiD,IAAjD,CADe;AAE1BC,UAAAA,MAAM,EAAK,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,EAAiD,IAAjD,EAAuD,IAAvD,EAA6D,IAA7D,EAAmE,IAAnE,EAAyE,IAAzE,CAFe;AAG1BC,UAAAA,MAAM,EAAK,CAAC,IAAD,EAAO,IAAP,EAAa,OAAb,CAHe;AAI1BC,UAAAA,OAAO,EAAI,CAAC,IAAD,EAAO,IAAP,CAJe;AAK1BC,UAAAA,KAAK,EAAM,CAAC,IAAD,CALe;AAM1BC,UAAAA,MAAM,EAAK,CAAC,IAAD,CANe;AAO1BC,UAAAA,SAAS,EAAE,CAAC,IAAD;AAPe,SAA5B;;AAUA,iBAASE,aAAT,CAAuBC,OAAvB,EAAgC;AAC9B,cAAIpqD,IAAJ;AAAA,cAAUqqD,KAAV;AAAA,cAAiB7vD,CAAjB;AAAA,cAAoBiQ,GAAG,GAAG,EAA1B;;AACA,eAAKzK,IAAL,IAAaoqD,OAAb,EAAsB;AACpB,gBAAIA,OAAO,CAACxuD,cAAR,CAAuBoE,IAAvB,CAAJ,EAAkC;AAChCqqD,cAAAA,KAAK,GAAGD,OAAO,CAACpqD,IAAD,CAAf;;AACA,mBAAKxF,CAAL,IAAU6vD,KAAV,EAAiB;AACf5/C,gBAAAA,GAAG,CAAC4/C,KAAK,CAAC7vD,CAAD,CAAN,CAAH,GAAgBwF,IAAhB;AACD;AACF;AACF;;AACD,iBAAOyK,GAAP;AACD,SA7MoB,CA+MrB;;;AACA,iBAASlM,IAAT,CAAcC,GAAd,EAAkB;AAChB,cAAI8rD,MAAM,GAAG,YAAb;AACA,iBAAO9rD,GAAG,CAACC,OAAJ,CAAY6rD,MAAZ,EAAoB,EAApB,CAAP;AACD,SAnNoB,CAqNrB;AACA;AACA;;;AACA,iBAASf,gBAAT,CAA0B9gC,IAA1B,EAAgCo/B,MAAhC,EAAwC9gD,KAAxC,EAA8C;AAC5C,cAAI0D,GAAJ,EAAS8/C,KAAT,EAAgBC,UAAhB;;AACA,cAAIzjD,KAAK,IAAI,IAAT,IAAiB0hB,IAArB,EAA2B;AACzB8hC,YAAAA,KAAK,GAAG9hC,IAAI,CAAC5lB,KAAL,CAAW4mD,SAAX,CAAR;AACAe,YAAAA,UAAU,GAAGD,KAAK,CAACE,eAAe,CAAC5C,MAAD,EAAS9gD,KAAT,CAAhB,CAAL,IAAyCwjD,KAAK,CAAC,CAAD,CAA3D;AACA9/C,YAAAA,GAAG,GAAGlM,IAAI,CAACisD,UAAD,CAAV;AACD,WAJD,MAIO;AACL//C,YAAAA,GAAG,GAAGge,IAAN;AACD;;AACD,iBAAOhe,GAAP;AACD;;AAED,iBAASigD,cAAT,CAAwB7C,MAAxB,EAAgC;AAC9B,cAAI8C,gBAAgB,GAAGR,aAAa,CAACD,qBAAD,CAApC;AACA,iBAAOS,gBAAgB,CAAC9C,MAAD,CAAhB,IAA4B8C,gBAAgB,CAAC/C,EAApD;AACD;;AAED,iBAAS6C,eAAT,CAAyB5C,MAAzB,EAAiC9gD,KAAjC,EAAwC;AACtC,iBAAO2iD,WAAW,CAACgB,cAAc,CAAC7C,MAAD,CAAf,CAAX,CAAoC9gD,KAApC,CAAP;AACD,SA3OoB,CA6OrB;AACA;AACA;AACA;;;AACA,iBAASyiD,WAAT,CAAqBJ,MAArB,EAA6Bp4C,OAA7B,EAAsC;AACpC,eAAK,IAAIsqB,GAAT,IAAgBtqB,OAAhB,EAAyB;AACvB,gBAAIsqB,GAAG,KAAK,GAAR,IAAetqB,OAAO,CAACpV,cAAR,CAAuB0/B,GAAvB,CAAnB,EAAgD;AAC9C;AACA;AACA;AACA8tB,cAAAA,MAAM,GAAGA,MAAM,CAAC3qD,OAAP,CAAe,IAAI0zB,MAAJ,CAAW,SAAOmJ,GAAP,GAAW,KAAtB,EAA6B,GAA7B,CAAf,EAAkDtqB,OAAO,CAACsqB,GAAD,CAAzD,CAAT;AACD;AACF;;AACD,iBAAO8tB,MAAP;AACD,SA3PoB,CA6PrB;AACA;AACA;;;AACA,iBAASh8B,IAAT,CAAc7L,OAAd,EAAuB;AACrB1nB,UAAAA,IAAI,CAACszB,OAAL,IAAgBtzB,IAAI,CAACszB,OAAL,CAAaC,IAA7B,IAAqCvzB,IAAI,CAACszB,OAAL,CAAaC,IAAb,CAAkB,cAAc7L,OAAhC,CAArC;AACD,SAlQoB,CAoQrB;AACA;AACA;;;AACA,iBAAS+nC,KAAT,CAAerpD,MAAf,EAAuB;AACrB,cAAIwK,GAAG,GAAG,EAAV;;AACA,eAAK,IAAIkd,IAAT,IAAiB1nB,MAAjB,EAAyB;AACvBwK,YAAAA,GAAG,CAACkd,IAAD,CAAH,GAAY1nB,MAAM,CAAC0nB,IAAD,CAAlB;AACD;;AACD,iBAAOld,GAAP;AACD;;AAED,eAAOo+C,QAAP;AACD,OA3RA,CAAD;AA8RA;;AAAO,KAjlVG;AAklVV;;AACA;AAAO,cAAS7uD,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,gBAAR;AAAyB,4BAAmB,qBAA5C;AAAkE,0BAAiB,mBAAnF;AAAuG,sBAAa,WAApH;AAAgI,2BAAkB,MAAlJ;AAAyJ,mBAAU,IAAnK;AAAwK,gBAAO,IAA/K;AAAoL,mBAAU,IAA9L;AAAmM,4BAAmB,gBAAtN;AAAuO,6BAAoB,cAA3P;AAA0Q,gCAAuB,aAAjS;AAA+S,qBAAY,KAA3T;AAAiU,qBAAY,MAA7U;AAAoV,kBAAS,eAA7V;AAA6W,oBAAW,QAAxX;AAAiY,qBAAY,QAA7Y;AAAsZ,kBAAS,IAA/Z;AAAoa,qBAAY;AAAhb,OAAjB;AAEA;AAAO,KAvlVG;AAwlVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,aAAR;AAAsB,4BAAmB,gBAAzC;AAA0D,0BAAiB,mBAA3E;AAA+F,sBAAa,WAA5G;AAAwH,2BAAkB,MAA1I;AAAiJ,mBAAU,IAA3J;AAAgK,gBAAO,IAAvK;AAA4K,mBAAU,IAAtL;AAA2L,4BAAmB,gBAA9M;AAA+N,6BAAoB,cAAnP;AAAkQ,gCAAuB,YAAzR;AAAsS,qBAAY,KAAlT;AAAwT,qBAAY,MAApU;AAA2U,kBAAS,eAApV;AAAoW,oBAAW,QAA/W;AAAwX,qBAAY,QAApY;AAA6Y,kBAAS,IAAtZ;AAA2Z,qBAAY;AAAva,OAAjB;AAEA;AAAO,KA7lVG;AA8lVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,2BAA3C;AAAuE,0BAAiB,kDAAxF;AAA2I,sBAAa,YAAxJ;AAAqK,2BAAkB,iBAAvL;AAAyM,mBAAU,SAAnN;AAA6N,gBAAO,MAApO;AAA2O,mBAAU,SAArP;AAA+P,4BAAmB,uBAAlR;AAA0S,6BAAoB,mBAA9T;AAAkV,gCAAuB,yCAAzW;AAAmZ,qBAAY,WAA/Z;AAA2a,qBAAY,WAAvb;AAAmc,kBAAS,2CAA5c;AAAwf,oBAAW,gBAAngB;AAAohB,qBAAY,gBAAhiB;AAAijB,kBAAS,QAA1jB;AAAmkB,qBAAY;AAA/kB,OAAjB;AAEA;AAAO,KAnmVG;AAomVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,4BAA3C;AAAwE,0BAAiB,+DAAzF;AAAyJ,sBAAa,eAAtK;AAAsL,2BAAkB,oBAAxM;AAA6N,mBAAU,QAAvO;AAAgP,gBAAO,QAAvP;AAAgQ,mBAAU,YAA1Q;AAAuR,4BAAmB,uBAA1S;AAAkU,6BAAoB,mBAAtV;AAA0W,gCAAuB,uCAAjY;AAAya,qBAAY,SAArb;AAA+b,qBAAY,YAA3c;AAAwd,kBAAS,iDAAje;AAAmhB,oBAAW,sBAA9hB;AAAqjB,qBAAY,uBAAjkB;AAAylB,kBAAS,OAAlmB;AAA0mB,qBAAY;AAAtnB,OAAjB;AAEA;AAAO,KAzmVG;AA0mVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,yBAA3C;AAAqE,0BAAiB,qEAAtF;AAA4J,sBAAa,2BAAzK;AAAqM,2BAAkB,wBAAvN;AAAgP,mBAAU,QAA1P;AAAmQ,gBAAO,UAA1Q;AAAqR,mBAAU,aAA/R;AAA6S,4BAAmB,uBAAhU;AAAwV,6BAAoB,0BAA5W;AAAuY,gCAAuB,4CAA9Z;AAA2c,qBAAY,WAAvd;AAAme,qBAAY,cAA/e;AAA8f,kBAAS,mDAAvgB;AAA2jB,oBAAW,uBAAtkB;AAA8lB,qBAAY,uBAA1mB;AAAkoB,kBAAS,aAA3oB;AAAypB,qBAAY;AAArqB,OAAjB;AAEA;AAAO,KA/mVG;AAgnVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,8BAA3C;AAA0E,0BAAiB,oEAA3F;AAAgK,sBAAa,sBAA7K;AAAoM,2BAAkB,sBAAtN;AAA6O,mBAAU,0BAAvP;AAAkR,gBAAO,eAAzR;AAAyS,mBAAU,aAAnT;AAAiU,4BAAmB,yBAApV;AAA8W,6BAAoB,mBAAlY;AAAsZ,gCAAuB,wCAA7a;AAAsd,qBAAY,qBAAle;AAAwf,qBAAY,eAApgB;AAAohB,kBAAS,mDAA7hB;AAAilB,oBAAW,uBAA5lB;AAAonB,qBAAY,0BAAhoB;AAA2pB,kBAAS,OAApqB;AAA4qB,qBAAY;AAAxrB,OAAjB;AAEA;AAAO,KArnVG;AAsnVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAC,gBAAO,eAAR;AAAwB,4BAAmB,oCAA3C;AAAgF,0BAAiB,8DAAjG;AAAgK,sBAAa,qBAA7K;AAAmM,2BAAkB,6BAArN;AAAmP,mBAAU,UAA7P;AAAwQ,gBAAO,WAA/Q;AAA2R,mBAAU,cAArS;AAAoT,4BAAmB,2BAAvU;AAAmW,6BAAoB,6BAAvX;AAAqZ,gCAAuB,2DAA5a;AAAwe,qBAAY,cAApf;AAAmgB,qBAAY,YAA/gB;AAA4hB,kBAAS,+CAAriB;AAAqlB,oBAAW,gBAAhmB;AAAinB,qBAAY,eAA7nB;AAA6oB,kBAAS,UAAtpB;AAAiqB,qBAAY;AAA7qB,OAAjB;AAEA;AAAO,KA3nVG;AA4nVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B,CAEjC;;AAEA;AAAO,KAjoVG;AAkoVV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KAvoVG;AAwoVV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuBW,MAAvB,CAA8BuZ,IAA/C;AAGA;AAAO,KA/oVG;AAgpVV;;AACA;AAAO,cAASva,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIga,KAAK,GAAGha,mBAAmB,CAAC,EAAD,CAA/B;;AAEAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,MAAxB,EAAgC,YAAY;AAC1C,eAAO,SAASka,IAAT,CAAczI,EAAd,EAAkB;AACvB,iBAAOuI,KAAK,CAACmH,QAAQ,CAAC1P,EAAD,CAAT,CAAZ;AACD,SAFD;AAGD,OAJD;AAOA;;AAAO,KA9pVG;AA+pVV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIsvD,YAAY,GAAGvwD,mBAAmB,CAAC,GAAD,CAAtC;;AAEA,UAAIwwD,YAAY,GAAGr1C,sBAAsB,CAACo1C,YAAD,CAAzC;;AAEA,UAAIE,aAAa,GAAGzwD,mBAAmB,CAAC,GAAD,CAAvC;;AAEA,UAAI0wD,aAAa,GAAGv1C,sBAAsB,CAACs1C,aAAD,CAA1C;;AAEA,eAASt1C,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,YAAY;AAC5B,iBAAS4+C,aAAT,CAAuBrxC,GAAvB,EAA4B/M,CAA5B,EAA+B;AAC7B,cAAIq+C,IAAI,GAAG,EAAX;AACA,cAAIpH,EAAE,GAAG,IAAT;AACA,cAAIsB,EAAE,GAAG,KAAT;AACA,cAAI+F,EAAE,GAAG33C,SAAT;;AAEA,cAAI;AACF,iBAAK,IAAIgT,EAAE,GAAG,CAAC,GAAG62C,aAAa,WAAjB,EAA2BzjD,GAA3B,CAAT,EAA0CuqC,EAA/C,EAAmD,EAAEL,EAAE,GAAG,CAACK,EAAE,GAAG39B,EAAE,CAACkG,IAAH,EAAN,EAAiBhG,IAAxB,CAAnD,EAAkFo9B,EAAE,GAAG,IAAvF,EAA6F;AAC3FoH,cAAAA,IAAI,CAAClwC,IAAL,CAAUmpC,EAAE,CAACpwC,KAAb;;AAEA,kBAAIlH,CAAC,IAAIq+C,IAAI,CAAC35C,MAAL,KAAgB1E,CAAzB,EAA4B;AAC7B;AACF,WAND,CAME,OAAO6mB,GAAP,EAAY;AACZ0xB,YAAAA,EAAE,GAAG,IAAL;AACA+F,YAAAA,EAAE,GAAGz3B,GAAL;AACD,WATD,SASU;AACR,gBAAI;AACF,kBAAI,CAACowB,EAAD,IAAOt9B,EAAE,CAAC,QAAD,CAAb,EAAyBA,EAAE,CAAC,QAAD,CAAF;AAC1B,aAFD,SAEU;AACR,kBAAI4+B,EAAJ,EAAQ,MAAM+F,EAAN;AACT;AACF;;AAED,iBAAOD,IAAP;AACD;;AAED,eAAO,UAAUtxC,GAAV,EAAe/M,CAAf,EAAkB;AACvB,cAAI2M,KAAK,CAACnK,OAAN,CAAcuK,GAAd,CAAJ,EAAwB;AACtB,mBAAOA,GAAP;AACD,WAFD,MAEO,IAAI,CAAC,GAAGujD,YAAY,WAAhB,EAA0B7vD,MAAM,CAACsM,GAAD,CAAhC,CAAJ,EAA4C;AACjD,mBAAOqxC,aAAa,CAACrxC,GAAD,EAAM/M,CAAN,CAApB;AACD,WAFM,MAEA;AACL,kBAAM,IAAIwR,SAAJ,CAAc,sDAAd,CAAN;AACD;AACF,SARD;AASD,OApCiB,EAAlB;AAsCA;;AAAO,KAvtVG;AAwtVV;;AACA;AAAO,cAAS/R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA7tVG;AA8tVV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,GAAD,CAApC;AAGA;AAAO,KAtuVG;AAuuVV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2d,OAAO,GAAG3d,mBAAmB,CAAC,EAAD,CAAjC;;AACA,UAAI4d,QAAQ,GAAG5d,mBAAmB,CAAC,CAAD,CAAnB,CAAuB,UAAvB,CAAf;;AACA,UAAIya,SAAS,GAAGza,mBAAmB,CAAC,EAAD,CAAnC;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB2wD,UAAvB,GAAoC,UAAUl/C,EAAV,EAAc;AACjE,YAAIO,CAAC,GAAGrR,MAAM,CAAC8Q,EAAD,CAAd;AACA,eAAOO,CAAC,CAAC4L,QAAD,CAAD,KAAgB/W,SAAhB,IACF,gBAAgBmL,CADd,CAEL;AAFK,WAGFyI,SAAS,CAAClZ,cAAV,CAAyBoc,OAAO,CAAC3L,CAAD,CAAhC,CAHL;AAID,OAND;AASA;;AAAO,KAtvVG;AAuvVV;;AACA;AAAO,cAASrS,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA5vVG;AA6vVV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,GAAD,CAApC;AAGA;AAAO,KArwVG;AAswVV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI2R,QAAQ,GAAG3R,mBAAmB,CAAC,CAAD,CAAlC;;AACA,UAAIe,GAAG,GAAGf,mBAAmB,CAAC,EAAD,CAA7B;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB4wD,WAAvB,GAAqC,UAAUn/C,EAAV,EAAc;AAClE,YAAIioC,MAAM,GAAG34C,GAAG,CAAC0Q,EAAD,CAAhB;AACA,YAAI,OAAOioC,MAAP,IAAiB,UAArB,EAAiC,MAAMhoC,SAAS,CAACD,EAAE,GAAG,mBAAN,CAAf;AACjC,eAAOE,QAAQ,CAAC+nC,MAAM,CAACt5C,IAAP,CAAYqR,EAAZ,CAAD,CAAf;AACD,OAJD;AAOA;;AAAO,KAlxVG;AAmxVV;;AACA;AAAO,cAAS9R,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,GAAD,CAApC;AAEA;AAAO,KAxxVG;AAyxVV;;AACA;AAAO,cAASL,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAIwC,IAAI,GAAGxC,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAI6wD,KAAK,GAAG7wD,mBAAmB,CAAC,GAAD,CAA/B;;AACA,UAAI+sB,WAAW,GAAG/sB,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAI8oB,QAAQ,GAAG9oB,mBAAmB,CAAC,EAAD,CAAlC;AAEA;;;;;;;;AAMA,eAAS8wD,cAAT,CAAwBC,aAAxB,EAAuC;AACrC,YAAI7kD,OAAO,GAAG,IAAI2kD,KAAJ,CAAUE,aAAV,CAAd;AACA,YAAIh2C,QAAQ,GAAGvY,IAAI,CAACquD,KAAK,CAACvvD,SAAN,CAAgB+oB,OAAjB,EAA0Bne,OAA1B,CAAnB,CAFqC,CAIrC;;AACAsb,QAAAA,KAAK,CAACtiB,MAAN,CAAa6V,QAAb,EAAuB81C,KAAK,CAACvvD,SAA7B,EAAwC4K,OAAxC,EALqC,CAOrC;;AACAsb,QAAAA,KAAK,CAACtiB,MAAN,CAAa6V,QAAb,EAAuB7O,OAAvB;AAEA,eAAO6O,QAAP;AACD,OA5BqD,CA8BtD;;;AACA,UAAIi2C,KAAK,GAAGF,cAAc,CAAChoC,QAAD,CAA1B,CA/BsD,CAiCtD;;AACAkoC,MAAAA,KAAK,CAACH,KAAN,GAAcA,KAAd,CAlCsD,CAoCtD;;AACAG,MAAAA,KAAK,CAACl0C,MAAN,GAAe,SAASA,MAAT,CAAgBm0C,cAAhB,EAAgC;AAC7C,eAAOH,cAAc,CAAC/jC,WAAW,CAACikC,KAAK,CAACloC,QAAP,EAAiBmoC,cAAjB,CAAZ,CAArB;AACD,OAFD,CArCsD,CAyCtD;;;AACAD,MAAAA,KAAK,CAACljC,MAAN,GAAe9tB,mBAAmB,CAAC,EAAD,CAAlC;AACAgxD,MAAAA,KAAK,CAACE,WAAN,GAAoBlxD,mBAAmB,CAAC,GAAD,CAAvC;AACAgxD,MAAAA,KAAK,CAAC1oC,QAAN,GAAiBtoB,mBAAmB,CAAC,EAAD,CAApC,CA5CsD,CA8CtD;;AACAgxD,MAAAA,KAAK,CAAChqB,GAAN,GAAY,SAASA,GAAT,CAAamqB,QAAb,EAAuB;AACjC,eAAOlnC,OAAO,CAAC+c,GAAR,CAAYmqB,QAAZ,CAAP;AACD,OAFD;;AAGAH,MAAAA,KAAK,CAACI,MAAN,GAAepxD,mBAAmB,CAAC,GAAD,CAAlC;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiBsxD,KAAjB,CApDsD,CAsDtD;;AACArxD,MAAAA,MAAM,CAACD,OAAP,cAAyBsxD,KAAzB;AAGA;AAAO,KAp1VG;AAq1VV;;AACA;AAAO,cAASrxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAI0nB,QAAQ,GAAG1nB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAIqxD,kBAAkB,GAAGrxD,mBAAmB,CAAC,GAAD,CAA5C;;AACA,UAAIsxD,eAAe,GAAGtxD,mBAAmB,CAAC,GAAD,CAAzC;;AACA,UAAI+sB,WAAW,GAAG/sB,mBAAmB,CAAC,EAAD,CAArC;AAEA;;;;;;;AAKA,eAAS6wD,KAAT,CAAeI,cAAf,EAA+B;AAC7B,aAAKnoC,QAAL,GAAgBmoC,cAAhB;AACA,aAAKM,YAAL,GAAoB;AAClBlnC,UAAAA,OAAO,EAAE,IAAIgnC,kBAAJ,EADS;AAElBpqC,UAAAA,QAAQ,EAAE,IAAIoqC,kBAAJ;AAFQ,SAApB;AAID;AAED;;;;;;;AAKAR,MAAAA,KAAK,CAACvvD,SAAN,CAAgB+oB,OAAhB,GAA0B,SAASA,OAAT,CAAiBL,MAAjB,EAAyB;AACjD;AACA;AACA,YAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9BA,UAAAA,MAAM,GAAGhlB,SAAS,CAAC,CAAD,CAAT,IAAgB,EAAzB;AACAglB,UAAAA,MAAM,CAACrC,GAAP,GAAa3iB,SAAS,CAAC,CAAD,CAAtB;AACD,SAHD,MAGO;AACLglB,UAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACD;;AAEDA,QAAAA,MAAM,GAAG+C,WAAW,CAAC,KAAKjE,QAAN,EAAgBkB,MAAhB,CAApB,CAViD,CAYjD;;AACA,YAAIA,MAAM,CAACR,MAAX,EAAmB;AACjBQ,UAAAA,MAAM,CAACR,MAAP,GAAgBQ,MAAM,CAACR,MAAP,CAAcne,WAAd,EAAhB;AACD,SAFD,MAEO,IAAI,KAAKyd,QAAL,CAAcU,MAAlB,EAA0B;AAC/BQ,UAAAA,MAAM,CAACR,MAAP,GAAgB,KAAKV,QAAL,CAAcU,MAAd,CAAqBne,WAArB,EAAhB;AACD,SAFM,MAEA;AACL2e,UAAAA,MAAM,CAACR,MAAP,GAAgB,KAAhB;AACD,SAnBgD,CAqBjD;;;AACA,YAAI4tB,KAAK,GAAG,CAACka,eAAD,EAAkBzqD,SAAlB,CAAZ;AACA,YAAIoX,OAAO,GAAGgM,OAAO,CAAClM,OAAR,CAAgBiM,MAAhB,CAAd;AAEA,aAAKunC,YAAL,CAAkBlnC,OAAlB,CAA0B5lB,OAA1B,CAAkC,SAAS+sD,0BAAT,CAAoCC,WAApC,EAAiD;AACjFra,UAAAA,KAAK,CAACtX,OAAN,CAAc2xB,WAAW,CAACC,SAA1B,EAAqCD,WAAW,CAACE,QAAjD;AACD,SAFD;AAIA,aAAKJ,YAAL,CAAkBtqC,QAAlB,CAA2BxiB,OAA3B,CAAmC,SAASmtD,wBAAT,CAAkCH,WAAlC,EAA+C;AAChFra,UAAAA,KAAK,CAAC/oC,IAAN,CAAWojD,WAAW,CAACC,SAAvB,EAAkCD,WAAW,CAACE,QAA9C;AACD,SAFD;;AAIA,eAAOva,KAAK,CAACxyC,MAAb,EAAqB;AACnBqZ,UAAAA,OAAO,GAAGA,OAAO,CAACsO,IAAR,CAAa6qB,KAAK,CAACya,KAAN,EAAb,EAA4Bza,KAAK,CAACya,KAAN,EAA5B,CAAV;AACD;;AAED,eAAO5zC,OAAP;AACD,OAtCD;;AAwCA4yC,MAAAA,KAAK,CAACvvD,SAAN,CAAgBwwD,MAAhB,GAAyB,SAASA,MAAT,CAAgB9nC,MAAhB,EAAwB;AAC/CA,QAAAA,MAAM,GAAG+C,WAAW,CAAC,KAAKjE,QAAN,EAAgBkB,MAAhB,CAApB;AACA,eAAOtC,QAAQ,CAACsC,MAAM,CAACrC,GAAR,EAAaqC,MAAM,CAACpC,MAApB,EAA4BoC,MAAM,CAACnC,gBAAnC,CAAR,CAA6DzjB,OAA7D,CAAqE,KAArE,EAA4E,EAA5E,CAAP;AACD,OAHD,CArEsD,CA0EtD;;;AACAojB,MAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,SAA1B,CAAd,EAAoD,SAAS8kB,mBAAT,CAA6BC,MAA7B,EAAqC;AACvF;AACAqnC,QAAAA,KAAK,CAACvvD,SAAN,CAAgBkoB,MAAhB,IAA0B,UAAS7B,GAAT,EAAcqC,MAAd,EAAsB;AAC9C,iBAAO,KAAKK,OAAL,CAAa7C,KAAK,CAAC1iB,KAAN,CAAYklB,MAAM,IAAI,EAAtB,EAA0B;AAC5CR,YAAAA,MAAM,EAAEA,MADoC;AAE5C7B,YAAAA,GAAG,EAAEA;AAFuC,WAA1B,CAAb,CAAP;AAID,SALD;AAMD,OARD;AAUAH,MAAAA,KAAK,CAAC/iB,OAAN,CAAc,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,CAAd,EAAwC,SAASglB,qBAAT,CAA+BD,MAA/B,EAAuC;AAC7E;AACAqnC,QAAAA,KAAK,CAACvvD,SAAN,CAAgBkoB,MAAhB,IAA0B,UAAS7B,GAAT,EAAcnF,IAAd,EAAoBwH,MAApB,EAA4B;AACpD,iBAAO,KAAKK,OAAL,CAAa7C,KAAK,CAAC1iB,KAAN,CAAYklB,MAAM,IAAI,EAAtB,EAA0B;AAC5CR,YAAAA,MAAM,EAAEA,MADoC;AAE5C7B,YAAAA,GAAG,EAAEA,GAFuC;AAG5CnF,YAAAA,IAAI,EAAEA;AAHsC,WAA1B,CAAb,CAAP;AAKD,SAND;AAOD,OATD;AAWA7iB,MAAAA,MAAM,CAACD,OAAP,GAAiBmxD,KAAjB;AAGA;AAAO,KAz7VG;AA07VV;;AACA;AAAO,cAASlxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEA,eAASqxD,kBAAT,GAA8B;AAC5B,aAAKU,QAAL,GAAgB,EAAhB;AACD;AAED;;;;;;;;;;AAQAV,MAAAA,kBAAkB,CAAC/vD,SAAnB,CAA6B0wD,GAA7B,GAAmC,SAASA,GAAT,CAAaN,SAAb,EAAwBC,QAAxB,EAAkC;AACnE,aAAKI,QAAL,CAAc1jD,IAAd,CAAmB;AACjBqjD,UAAAA,SAAS,EAAEA,SADM;AAEjBC,UAAAA,QAAQ,EAAEA;AAFO,SAAnB;AAIA,eAAO,KAAKI,QAAL,CAAcntD,MAAd,GAAuB,CAA9B;AACD,OAND;AAQA;;;;;;;AAKAysD,MAAAA,kBAAkB,CAAC/vD,SAAnB,CAA6B2wD,KAA7B,GAAqC,SAASA,KAAT,CAAe93C,EAAf,EAAmB;AACtD,YAAI,KAAK43C,QAAL,CAAc53C,EAAd,CAAJ,EAAuB;AACrB,eAAK43C,QAAL,CAAc53C,EAAd,IAAoB,IAApB;AACD;AACF,OAJD;AAMA;;;;;;;;;;AAQAk3C,MAAAA,kBAAkB,CAAC/vD,SAAnB,CAA6BmD,OAA7B,GAAuC,SAASA,OAAT,CAAiBE,EAAjB,EAAqB;AAC1D6iB,QAAAA,KAAK,CAAC/iB,OAAN,CAAc,KAAKstD,QAAnB,EAA6B,SAASG,cAAT,CAAwB3iC,CAAxB,EAA2B;AACtD,cAAIA,CAAC,KAAK,IAAV,EAAgB;AACd5qB,YAAAA,EAAE,CAAC4qB,CAAD,CAAF;AACD;AACF,SAJD;AAKD,OAND;;AAQA5vB,MAAAA,MAAM,CAACD,OAAP,GAAiB2xD,kBAAjB;AAGA;AAAO,KAp/VG;AAq/VV;;AACA;AAAO,cAAS1xD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AACA,UAAImyD,aAAa,GAAGnyD,mBAAmB,CAAC,GAAD,CAAvC;;AACA,UAAIsoB,QAAQ,GAAGtoB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI8oB,QAAQ,GAAG9oB,mBAAmB,CAAC,EAAD,CAAlC;AAEA;;;;;AAGA,eAASoyD,4BAAT,CAAsCpoC,MAAtC,EAA8C;AAC5C,YAAIA,MAAM,CAACsC,WAAX,EAAwB;AACtBtC,UAAAA,MAAM,CAACsC,WAAP,CAAmB+lC,gBAAnB;AACD;AACF;AAED;;;;;;;;AAMA1yD,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS4xD,eAAT,CAAyBtnC,MAAzB,EAAiC;AAChDooC,QAAAA,4BAA4B,CAACpoC,MAAD,CAA5B,CADgD,CAGhD;;AACAA,QAAAA,MAAM,CAACvD,OAAP,GAAiBuD,MAAM,CAACvD,OAAP,IAAkB,EAAnC,CAJgD,CAMhD;;AACAuD,QAAAA,MAAM,CAACxH,IAAP,GAAc2vC,aAAa,CACzBnoC,MAAM,CAACxH,IADkB,EAEzBwH,MAAM,CAACvD,OAFkB,EAGzBuD,MAAM,CAACjB,gBAHkB,CAA3B,CAPgD,CAahD;;AACAiB,QAAAA,MAAM,CAACvD,OAAP,GAAiBe,KAAK,CAAC1iB,KAAN,CACfklB,MAAM,CAACvD,OAAP,CAAe6C,MAAf,IAAyB,EADV,EAEfU,MAAM,CAACvD,OAAP,CAAeuD,MAAM,CAACR,MAAtB,KAAiC,EAFlB,EAGfQ,MAAM,CAACvD,OAHQ,CAAjB;AAMAe,QAAAA,KAAK,CAAC/iB,OAAN,CACE,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,KAAlC,EAAyC,OAAzC,EAAkD,QAAlD,CADF,EAEE,SAAS6tD,iBAAT,CAA2B9oC,MAA3B,EAAmC;AACjC,iBAAOQ,MAAM,CAACvD,OAAP,CAAe+C,MAAf,CAAP;AACD,SAJH;AAOA,YAAIZ,OAAO,GAAGoB,MAAM,CAACpB,OAAP,IAAkBE,QAAQ,CAACF,OAAzC;AAEA,eAAOA,OAAO,CAACoB,MAAD,CAAP,CAAgBuC,IAAhB,CAAqB,SAASgmC,mBAAT,CAA6BtrC,QAA7B,EAAuC;AACjEmrC,UAAAA,4BAA4B,CAACpoC,MAAD,CAA5B,CADiE,CAGjE;;AACA/C,UAAAA,QAAQ,CAACzE,IAAT,GAAgB2vC,aAAa,CAC3BlrC,QAAQ,CAACzE,IADkB,EAE3ByE,QAAQ,CAACR,OAFkB,EAG3BuD,MAAM,CAAChB,iBAHoB,CAA7B;AAMA,iBAAO/B,QAAP;AACD,SAXM,EAWJ,SAASurC,kBAAT,CAA4BjuB,MAA5B,EAAoC;AACrC,cAAI,CAACjc,QAAQ,CAACic,MAAD,CAAb,EAAuB;AACrB6tB,YAAAA,4BAA4B,CAACpoC,MAAD,CAA5B,CADqB,CAGrB;;AACA,gBAAIua,MAAM,IAAIA,MAAM,CAACtd,QAArB,EAA+B;AAC7Bsd,cAAAA,MAAM,CAACtd,QAAP,CAAgBzE,IAAhB,GAAuB2vC,aAAa,CAClC5tB,MAAM,CAACtd,QAAP,CAAgBzE,IADkB,EAElC+hB,MAAM,CAACtd,QAAP,CAAgBR,OAFkB,EAGlCuD,MAAM,CAAChB,iBAH2B,CAApC;AAKD;AACF;;AAED,iBAAOiB,OAAO,CAACjM,MAAR,CAAeumB,MAAf,CAAP;AACD,SA1BM,CAAP;AA2BD,OAxDD;AA2DA;;AAAO,KA1kWG;AA2kWV;;AACA;AAAO,cAAS5kC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;AAEA;;;;;;;;;;AAQAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASyyD,aAAT,CAAuB3vC,IAAvB,EAA6BiE,OAA7B,EAAsCgsC,GAAtC,EAA2C;AAC1D;AACAjrC,QAAAA,KAAK,CAAC/iB,OAAN,CAAcguD,GAAd,EAAmB,SAAS/O,SAAT,CAAmB/+C,EAAnB,EAAuB;AACxC6d,UAAAA,IAAI,GAAG7d,EAAE,CAAC6d,IAAD,EAAOiE,OAAP,CAAT;AACD,SAFD;AAIA,eAAOjE,IAAP;AACD,OAPD;AAUA;;AAAO,KArmWG;AAsmWV;;AACA;AAAO,cAAS7iB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS8oB,mBAAT,CAA6B/B,OAA7B,EAAsCisC,cAAtC,EAAsD;AACrElrC,QAAAA,KAAK,CAAC/iB,OAAN,CAAcgiB,OAAd,EAAuB,SAASksC,aAAT,CAAuBvrD,KAAvB,EAA8B5G,IAA9B,EAAoC;AACzD,cAAIA,IAAI,KAAKkyD,cAAT,IAA2BlyD,IAAI,CAACoqB,WAAL,OAAuB8nC,cAAc,CAAC9nC,WAAf,EAAtD,EAAoF;AAClFnE,YAAAA,OAAO,CAACisC,cAAD,CAAP,GAA0BtrD,KAA1B;AACA,mBAAOqf,OAAO,CAACjmB,IAAD,CAAd;AACD;AACF,SALD;AAMD,OAPD;AAUA;;AAAO,KAxnWG;AAynWV;;AACA;AAAO,cAASb,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI8pB,WAAW,GAAG9pB,mBAAmB,CAAC,EAAD,CAArC;AAEA;;;;;;;;;AAOAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASgqB,MAAT,CAAgB3L,OAAhB,EAAyBC,MAAzB,EAAiCiJ,QAAjC,EAA2C;AAC1D,YAAImC,cAAc,GAAGnC,QAAQ,CAAC+C,MAAT,CAAgBZ,cAArC;;AACA,YAAI,CAACA,cAAD,IAAmBA,cAAc,CAACnC,QAAQ,CAACoC,MAAV,CAArC,EAAwD;AACtDtL,UAAAA,OAAO,CAACkJ,QAAD,CAAP;AACD,SAFD,MAEO;AACLjJ,UAAAA,MAAM,CAAC8L,WAAW,CAChB,qCAAqC7C,QAAQ,CAACoC,MAD9B,EAEhBpC,QAAQ,CAAC+C,MAFO,EAGhB,IAHgB,EAIhB/C,QAAQ,CAACoD,OAJO,EAKhBpD,QALgB,CAAZ,CAAN;AAOD;AACF,OAbD;AAgBA;;AAAO,KAxpWG;AAypWV;;AACA;AAAO,cAAStnB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;;;;;AAUAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASktB,YAAT,CAAsBE,KAAtB,EAA6B9C,MAA7B,EAAqC6C,IAArC,EAA2CxC,OAA3C,EAAoDpD,QAApD,EAA8D;AAC7E6F,QAAAA,KAAK,CAAC9C,MAAN,GAAeA,MAAf;;AACA,YAAI6C,IAAJ,EAAU;AACRC,UAAAA,KAAK,CAACD,IAAN,GAAaA,IAAb;AACD;;AAEDC,QAAAA,KAAK,CAACzC,OAAN,GAAgBA,OAAhB;AACAyC,QAAAA,KAAK,CAAC7F,QAAN,GAAiBA,QAAjB;AACA6F,QAAAA,KAAK,CAAC8lC,YAAN,GAAqB,IAArB;;AAEA9lC,QAAAA,KAAK,CAAC+lC,MAAN,GAAe,YAAW;AACxB,iBAAO;AACL;AACA3rC,YAAAA,OAAO,EAAE,KAAKA,OAFT;AAGL1mB,YAAAA,IAAI,EAAE,KAAKA,IAHN;AAIL;AACAsyD,YAAAA,WAAW,EAAE,KAAKA,WALb;AAML5+B,YAAAA,MAAM,EAAE,KAAKA,MANR;AAOL;AACA6+B,YAAAA,QAAQ,EAAE,KAAKA,QARV;AASLC,YAAAA,UAAU,EAAE,KAAKA,UATZ;AAULC,YAAAA,YAAY,EAAE,KAAKA,YAVd;AAWLv9B,YAAAA,KAAK,EAAE,KAAKA,KAXP;AAYL;AACA1L,YAAAA,MAAM,EAAE,KAAKA,MAbR;AAcL6C,YAAAA,IAAI,EAAE,KAAKA;AAdN,WAAP;AAgBD,SAjBD;;AAkBA,eAAOC,KAAP;AACD,OA7BD;AAgCA;;AAAO,KAzsWG;AA0sWV;;AACA;AAAO,cAASntB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIkzD,aAAa,GAAGlzD,mBAAmB,CAAC,GAAD,CAAvC;;AACA,UAAImzD,WAAW,GAAGnzD,mBAAmB,CAAC,GAAD,CAArC;AAEA;;;;;;;;;;;AASAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASiqB,aAAT,CAAuBjD,OAAvB,EAAgC0sC,YAAhC,EAA8C;AAC7D,YAAI1sC,OAAO,IAAI,CAACwsC,aAAa,CAACE,YAAD,CAA7B,EAA6C;AAC3C,iBAAOD,WAAW,CAACzsC,OAAD,EAAU0sC,YAAV,CAAlB;AACD;;AACD,eAAOA,YAAP;AACD,OALD;AAQA;;AAAO,KApuWG;AAquWV;;AACA;AAAO,cAASzzD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;AAMAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASwzD,aAAT,CAAuBvrC,GAAvB,EAA4B;AAC3C;AACA;AACA;AACA,eAAO,gCAAgCvc,IAAhC,CAAqCuc,GAArC,CAAP;AACD,OALD;AAQA;;AAAO,KAzvWG;AA0vWV;;AACA;AAAO,cAAShoB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;;AAOAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASyzD,WAAT,CAAqBzsC,OAArB,EAA8B2sC,WAA9B,EAA2C;AAC1D,eAAOA,WAAW,GACd3sC,OAAO,CAACtiB,OAAR,CAAgB,MAAhB,EAAwB,EAAxB,IAA8B,GAA9B,GAAoCivD,WAAW,CAACjvD,OAAZ,CAAoB,MAApB,EAA4B,EAA5B,CADtB,GAEdsiB,OAFJ;AAGD,OAJD;AAOA;;AAAO,KA9wWG;AA+wWV;;AACA;AAAO,cAAS/mB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B,CALsD,CAOtD;AACA;;;AACA,UAAIszD,iBAAiB,GAAG,CACtB,KADsB,EACf,eADe,EACE,gBADF,EACoB,cADpB,EACoC,MADpC,EAEtB,SAFsB,EAEX,MAFW,EAEH,MAFG,EAEK,mBAFL,EAE0B,qBAF1B,EAGtB,eAHsB,EAGL,UAHK,EAGO,cAHP,EAGuB,qBAHvB,EAItB,SAJsB,EAIX,aAJW,EAII,YAJJ,CAAxB;AAOA;;;;;;;;;;;;;;AAaA3zD,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAASkqB,YAAT,CAAsBnD,OAAtB,EAA+B;AAC9C,YAAI8sC,MAAM,GAAG,EAAb;AACA,YAAI1uD,GAAJ;AACA,YAAIlC,GAAJ;AACA,YAAIzC,CAAJ;;AAEA,YAAI,CAACumB,OAAL,EAAc;AAAE,iBAAO8sC,MAAP;AAAgB;;AAEhC/rC,QAAAA,KAAK,CAAC/iB,OAAN,CAAcgiB,OAAO,CAACje,KAAR,CAAc,IAAd,CAAd,EAAmC,SAASgrD,MAAT,CAAgBC,IAAhB,EAAsB;AACvDvzD,UAAAA,CAAC,GAAGuzD,IAAI,CAAC50C,OAAL,CAAa,GAAb,CAAJ;AACAha,UAAAA,GAAG,GAAG2iB,KAAK,CAACtjB,IAAN,CAAWuvD,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAexzD,CAAf,CAAX,EAA8BmL,WAA9B,EAAN;AACA1I,UAAAA,GAAG,GAAG6kB,KAAK,CAACtjB,IAAN,CAAWuvD,IAAI,CAACC,MAAL,CAAYxzD,CAAC,GAAG,CAAhB,CAAX,CAAN;;AAEA,cAAI2E,GAAJ,EAAS;AACP,gBAAI0uD,MAAM,CAAC1uD,GAAD,CAAN,IAAeyuD,iBAAiB,CAACz0C,OAAlB,CAA0Bha,GAA1B,KAAkC,CAArD,EAAwD;AACtD;AACD;;AACD,gBAAIA,GAAG,KAAK,YAAZ,EAA0B;AACxB0uD,cAAAA,MAAM,CAAC1uD,GAAD,CAAN,GAAc,CAAC0uD,MAAM,CAAC1uD,GAAD,CAAN,GAAc0uD,MAAM,CAAC1uD,GAAD,CAApB,GAA4B,EAA7B,EAAiCiI,MAAjC,CAAwC,CAACnK,GAAD,CAAxC,CAAd;AACD,aAFD,MAEO;AACL4wD,cAAAA,MAAM,CAAC1uD,GAAD,CAAN,GAAc0uD,MAAM,CAAC1uD,GAAD,CAAN,GAAc0uD,MAAM,CAAC1uD,GAAD,CAAN,GAAc,IAAd,GAAqBlC,GAAnC,GAAyCA,GAAvD;AACD;AACF;AACF,SAfD;AAiBA,eAAO4wD,MAAP;AACD,OA1BD;AA6BA;;AAAO,KA10WG;AA20WV;;AACA;AAAO,cAAS5zD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GACE8nB,KAAK,CAACnjB,oBAAN,KAEA;AACA;AACG,eAASsvD,kBAAT,GAA8B;AAC7B,YAAIC,IAAI,GAAG,kBAAkBxoD,IAAlB,CAAuB9G,SAAS,CAAC6xC,SAAjC,CAAX;AACA,YAAI0d,cAAc,GAAGrvD,QAAQ,CAACmD,aAAT,CAAuB,GAAvB,CAArB;AACA,YAAImsD,SAAJ;AAEA;;;;;;;AAMA,iBAASC,UAAT,CAAoBpsC,GAApB,EAAyB;AACvB,cAAIulB,IAAI,GAAGvlB,GAAX;;AAEA,cAAIisC,IAAJ,EAAU;AACV;AACEC,YAAAA,cAAc,CAACr4B,YAAf,CAA4B,MAA5B,EAAoC0R,IAApC;AACAA,YAAAA,IAAI,GAAG2mB,cAAc,CAAC3mB,IAAtB;AACD;;AAED2mB,UAAAA,cAAc,CAACr4B,YAAf,CAA4B,MAA5B,EAAoC0R,IAApC,EATuB,CAWvB;;AACA,iBAAO;AACLA,YAAAA,IAAI,EAAE2mB,cAAc,CAAC3mB,IADhB;AAEL8mB,YAAAA,QAAQ,EAAEH,cAAc,CAACG,QAAf,GAA0BH,cAAc,CAACG,QAAf,CAAwB5vD,OAAxB,CAAgC,IAAhC,EAAsC,EAAtC,CAA1B,GAAsE,EAF3E;AAGL6vD,YAAAA,IAAI,EAAEJ,cAAc,CAACI,IAHhB;AAILnuC,YAAAA,MAAM,EAAE+tC,cAAc,CAAC/tC,MAAf,GAAwB+tC,cAAc,CAAC/tC,MAAf,CAAsB1hB,OAAtB,CAA8B,KAA9B,EAAqC,EAArC,CAAxB,GAAmE,EAJtE;AAKL2rC,YAAAA,IAAI,EAAE8jB,cAAc,CAAC9jB,IAAf,GAAsB8jB,cAAc,CAAC9jB,IAAf,CAAoB3rC,OAApB,CAA4B,IAA5B,EAAkC,EAAlC,CAAtB,GAA8D,EAL/D;AAML8vD,YAAAA,QAAQ,EAAEL,cAAc,CAACK,QANpB;AAOL5xC,YAAAA,IAAI,EAAEuxC,cAAc,CAACvxC,IAPhB;AAQLwtB,YAAAA,QAAQ,EAAG+jB,cAAc,CAAC/jB,QAAf,CAAwBtxB,MAAxB,CAA+B,CAA/B,MAAsC,GAAvC,GACRq1C,cAAc,CAAC/jB,QADP,GAER,MAAM+jB,cAAc,CAAC/jB;AAVlB,WAAP;AAYD;;AAEDgkB,QAAAA,SAAS,GAAGC,UAAU,CAACjyD,MAAM,CAACikB,QAAP,CAAgBmnB,IAAjB,CAAtB;AAEA;;;;;;;AAMA,eAAO,SAASrjB,eAAT,CAAyBsqC,UAAzB,EAAqC;AAC1C,cAAIZ,MAAM,GAAI/rC,KAAK,CAACjkB,QAAN,CAAe4wD,UAAf,CAAD,GAA+BJ,UAAU,CAACI,UAAD,CAAzC,GAAwDA,UAArE;AACA,iBAAQZ,MAAM,CAACS,QAAP,KAAoBF,SAAS,CAACE,QAA9B,IACJT,MAAM,CAACU,IAAP,KAAgBH,SAAS,CAACG,IAD9B;AAED,SAJD;AAKD,OAlDD,EAJF,GAwDA;AACG,eAASG,qBAAT,GAAiC;AAChC,eAAO,SAASvqC,eAAT,GAA2B;AAChC,iBAAO,IAAP;AACD,SAFD;AAGD,OAJD,EA1DJ;AAkEA;AAAO,KAr5WG;AAs5WV;;AACA;AAAO,cAASlqB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAIwnB,KAAK,GAAGxnB,mBAAmB,CAAC,CAAD,CAA/B;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GACE8nB,KAAK,CAACnjB,oBAAN,KAEA;AACG,eAASsvD,kBAAT,GAA8B;AAC7B,eAAO;AACL/2C,UAAAA,KAAK,EAAE,SAASA,KAAT,CAAepc,IAAf,EAAqB4G,KAArB,EAA4BitD,OAA5B,EAAqCC,IAArC,EAA2C1c,MAA3C,EAAmD2c,MAAnD,EAA2D;AAChE,gBAAIC,MAAM,GAAG,EAAb;AACAA,YAAAA,MAAM,CAACnmD,IAAP,CAAY7N,IAAI,GAAG,GAAP,GAAa+lB,kBAAkB,CAACnf,KAAD,CAA3C;;AAEA,gBAAIogB,KAAK,CAAChkB,QAAN,CAAe6wD,OAAf,CAAJ,EAA6B;AAC3BG,cAAAA,MAAM,CAACnmD,IAAP,CAAY,aAAa,IAAIoI,IAAJ,CAAS49C,OAAT,EAAkBI,WAAlB,EAAzB;AACD;;AAED,gBAAIjtC,KAAK,CAACjkB,QAAN,CAAe+wD,IAAf,CAAJ,EAA0B;AACxBE,cAAAA,MAAM,CAACnmD,IAAP,CAAY,UAAUimD,IAAtB;AACD;;AAED,gBAAI9sC,KAAK,CAACjkB,QAAN,CAAeq0C,MAAf,CAAJ,EAA4B;AAC1B4c,cAAAA,MAAM,CAACnmD,IAAP,CAAY,YAAYupC,MAAxB;AACD;;AAED,gBAAI2c,MAAM,KAAK,IAAf,EAAqB;AACnBC,cAAAA,MAAM,CAACnmD,IAAP,CAAY,QAAZ;AACD;;AAED7J,YAAAA,QAAQ,CAACgwD,MAAT,GAAkBA,MAAM,CAAChuC,IAAP,CAAY,IAAZ,CAAlB;AACD,WAtBI;AAwBLyF,UAAAA,IAAI,EAAE,SAASA,IAAT,CAAczrB,IAAd,EAAoB;AACxB,gBAAI0oD,KAAK,GAAG1kD,QAAQ,CAACgwD,MAAT,CAAgBtL,KAAhB,CAAsB,IAAIpxB,MAAJ,CAAW,eAAet3B,IAAf,GAAsB,WAAjC,CAAtB,CAAZ;AACA,mBAAQ0oD,KAAK,GAAG5iC,kBAAkB,CAAC4iC,KAAK,CAAC,CAAD,CAAN,CAArB,GAAkC,IAA/C;AACD,WA3BI;AA6BLwL,UAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBl0D,IAAhB,EAAsB;AAC5B,iBAAKoc,KAAL,CAAWpc,IAAX,EAAiB,EAAjB,EAAqBiW,IAAI,CAACgM,GAAL,KAAa,QAAlC;AACD;AA/BI,SAAP;AAiCD,OAlCD,EAHF,GAuCA;AACG,eAAS2xC,qBAAT,GAAiC;AAChC,eAAO;AACLx3C,UAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB,CAAE,CADrB;AAELqP,UAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAAE,mBAAO,IAAP;AAAc,WAFjC;AAGLyoC,UAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB,CAAE;AAHvB,SAAP;AAKD,OAND,EAzCJ;AAmDA;AAAO,KAj9WG;AAk9WV;;AACA;AAAO,cAAS/0D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGA,UAAI8tB,MAAM,GAAG9tB,mBAAmB,CAAC,EAAD,CAAhC;AAEA;;;;;;;;AAMA,eAASkxD,WAAT,CAAqBrY,QAArB,EAA+B;AAC7B,YAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,gBAAM,IAAInnC,SAAJ,CAAc,8BAAd,CAAN;AACD;;AAED,YAAIg0B,cAAJ;AACA,aAAKznB,OAAL,GAAe,IAAIgM,OAAJ,CAAY,SAAS0qC,eAAT,CAAyB52C,OAAzB,EAAkC;AAC3D2nB,UAAAA,cAAc,GAAG3nB,OAAjB;AACD,SAFc,CAAf;AAIA,YAAIjG,KAAK,GAAG,IAAZ;AACA+gC,QAAAA,QAAQ,CAAC,SAASpsB,MAAT,CAAgBvF,OAAhB,EAAyB;AAChC,cAAIpP,KAAK,CAACysB,MAAV,EAAkB;AAChB;AACA;AACD;;AAEDzsB,UAAAA,KAAK,CAACysB,MAAN,GAAe,IAAIzW,MAAJ,CAAW5G,OAAX,CAAf;AACAwe,UAAAA,cAAc,CAAC5tB,KAAK,CAACysB,MAAP,CAAd;AACD,SARO,CAAR;AASD;AAED;;;;;AAGA2sB,MAAAA,WAAW,CAAC5vD,SAAZ,CAAsB+wD,gBAAtB,GAAyC,SAASA,gBAAT,GAA4B;AACnE,YAAI,KAAK9tB,MAAT,EAAiB;AACf,gBAAM,KAAKA,MAAX;AACD;AACF,OAJD;AAMA;;;;;;AAIA2sB,MAAAA,WAAW,CAACtrD,MAAZ,GAAqB,SAASA,MAAT,GAAkB;AACrC,YAAI6mB,MAAJ;AACA,YAAI3U,KAAK,GAAG,IAAIo5C,WAAJ,CAAgB,SAASrY,QAAT,CAAkBv4C,CAAlB,EAAqB;AAC/CmsB,UAAAA,MAAM,GAAGnsB,CAAT;AACD,SAFW,CAAZ;AAGA,eAAO;AACLwX,UAAAA,KAAK,EAAEA,KADF;AAEL2U,UAAAA,MAAM,EAAEA;AAFH,SAAP;AAID,OATD;;AAWA9sB,MAAAA,MAAM,CAACD,OAAP,GAAiBwxD,WAAjB;AAGA;AAAO,KAjhXG;AAkhXV;;AACA;AAAO,cAASvxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;AAGA;;;;;;;;;;;;;;;;;;;;;AAoBAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,SAAS0xD,MAAT,CAAgB7lD,QAAhB,EAA0B;AACzC,eAAO,SAASc,IAAT,CAAcY,GAAd,EAAmB;AACxB,iBAAO1B,QAAQ,CAACxE,KAAT,CAAe,IAAf,EAAqBkG,GAArB,CAAP;AACD,SAFD;AAGD,OAJD;AAOA;;AAAO,KAnjXG;AAojXV;;AACA;AAAO,cAAStN,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIhf,SAAS,GAAGgf,IAAI,CAAChf,SAArB;AAAA,YACI48B,MAAM,GAAG5d,IAAI,CAAC4d,MADlB;AAAA,YAEIgH,OAAO,GAAG5kB,IAAI,CAAC4kB,OAFnB;AAAA,YAGIM,WAAW,GAAGllB,IAAI,CAACklB,WAHvB;AAAA,YAII/kB,IAAI,GAAGH,IAAI,CAACG,IAJhB;AAAA,YAKIoc,SAAS,GAAGvc,IAAI,CAACuc,SALrB;AAMA,eAAOxc,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,QADK,EAEL;AACEmG,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAa8Y,EAAb,EAAiB;AACpB,mBAAOilB,MAAM,IAAIA,MAAM,CAACjlB,EAAD,CAAvB;AACD,WAHH;AAIE3X,UAAAA,SAAS,EAAE,YAAYA,SAJzB;AAKE4jC,UAAAA,OAAO,EAAEA,OALX;AAMEM,UAAAA,WAAW,EAAEA;AANf,SAFK,EASLnlB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAFF,EAGEmf,IAHF,CATK,EAcLoc,SAAS,IAAIxc,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,MAA9B,EAAsC;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAAtC,CAdR,CAAP;AAgBD,OAvBD;AAyBA;;AAAO,KA7lXG;AA8lXV;;AACA;AAAO,cAAStP,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2mB,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,eAAS5S,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuuB,IAAV,EAAgB;AAChC,YAAIhf,SAAS,GAAGgf,IAAI,CAAChf,SAArB;AAAA,YACI4jC,OAAO,GAAG5kB,IAAI,CAAC4kB,OADnB;AAAA,YAEIzkB,IAAI,GAAGH,IAAI,CAACG,IAFhB;AAGA,eAAOJ,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,GADK,EAEL;AAAEsH,UAAAA,SAAS,EAAE,eAAeA,SAA5B;AAAuC4jC,UAAAA,OAAO,EAAEA;AAAhD,SAFK,EAGL7kB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,UAAAA,SAAS,EAAE;AAAb,SAFF,EAGEmf,IAHF,CAHK,CAAP;AASD,OAbD;AAeA;;AAAO,KA7nXG;AA8nXV;;AACA;AAAO,cAASzuB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAI2gC,eAAe,GAAG/nC,mBAAmB,CAAC,EAAD,CAAzC;;AAEA,UAAIgoC,gBAAgB,GAAG7sB,sBAAsB,CAAC4sB,eAAD,CAA7C;;AAEA,UAAIxZ,gBAAgB,GAAGvuB,mBAAmB,CAAC,EAAD,CAA1C;;AAEA,UAAIwuB,gBAAgB,GAAGrT,sBAAsB,CAACoT,gBAAD,CAA7C;;AAEA,UAAIE,aAAa,GAAGzuB,mBAAmB,CAAC,EAAD,CAAvC;;AAEA,UAAI0uB,aAAa,GAAGvT,sBAAsB,CAACsT,aAAD,CAA1C;;AAEA,UAAIwZ,2BAA2B,GAAGjoC,mBAAmB,CAAC,EAAD,CAArD;;AAEA,UAAIkoC,2BAA2B,GAAG/sB,sBAAsB,CAAC8sB,2BAAD,CAAxD;;AAEA,UAAIE,UAAU,GAAGnoC,mBAAmB,CAAC,EAAD,CAApC;;AAEA,UAAIooC,UAAU,GAAGjtB,sBAAsB,CAACgtB,UAAD,CAAvC;;AAEA,UAAIpa,MAAM,GAAG/tB,mBAAmB,CAAC,CAAD,CAAhC;;AAEA,UAAIguB,OAAO,GAAG7S,sBAAsB,CAAC4S,MAAD,CAApC;;AAEA,UAAI6a,OAAO,GAAG5oC,mBAAmB,CAAC,EAAD,CAAjC;;AAEA,UAAI6oC,QAAQ,GAAG1tB,sBAAsB,CAACytB,OAAD,CAArC;;AAEA,UAAIQ,IAAI,GAAGppC,mBAAmB,CAAC,EAAD,CAA9B;;AAEA,UAAIqpC,KAAK,GAAGluB,sBAAsB,CAACiuB,IAAD,CAAlC;;AAEA,UAAIwrB,yBAAyB,GAAG50D,mBAAmB,CAAC,GAAD,CAAnD;;AAEA,UAAI60D,0BAA0B,GAAG15C,sBAAsB,CAACy5C,yBAAD,CAAvD;;AAEA,UAAIE,MAAM,GAAG90D,mBAAmB,CAAC,GAAD,CAAhC;;AAEA,UAAI+0D,OAAO,GAAG55C,sBAAsB,CAAC25C,MAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGh1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIi1D,OAAO,GAAG95C,sBAAsB,CAAC65C,OAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGl1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIm1D,OAAO,GAAGh6C,sBAAsB,CAAC+5C,OAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGp1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIq1D,OAAO,GAAGl6C,sBAAsB,CAACi6C,OAAD,CAApC;;AAEA,UAAIE,OAAO,GAAGt1D,mBAAmB,CAAC,GAAD,CAAjC;;AAEA,UAAIu1D,QAAQ,GAAGp6C,sBAAsB,CAACm6C,OAAD,CAArC;;AAEAt1D,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AAEA,eAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI8wD,IAAI,GAAG,CAAC,GAAGT,OAAO,WAAX,GAAX;AACA,UAAIU,IAAI,GAAG,CAAC,GAAGR,OAAO,WAAX,GAAX;AACA,UAAIS,EAAE,GAAG,CAAC,GAAGP,OAAO,WAAX,GAAT;AACA,UAAIQ,EAAE,GAAG,CAAC,GAAGN,OAAO,WAAX,GAAT;AACA,UAAIO,EAAE,GAAG,CAAC,GAAGL,QAAQ,WAAZ,GAAT;;AAEA,UAAI,OAAOzzD,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,QAAAA,MAAM,CAAC+zD,gCAAP,GAA0C;AACxCC,UAAAA,EAAE,EAAEN,IADoC;AAExC,mBAASA,IAF+B;AAGxC,mBAASC,IAH+B;AAIxC,mBAASC,EAJ+B;AAKxCK,UAAAA,EAAE,EAAEJ,EALoC;AAMxCK,UAAAA,EAAE,EAAEJ;AANoC,SAA1C;AAQD;;AAED,UAAIK,OAAO,GAAG,UAAUvsB,UAAV,EAAsB;AAClC,SAAC,GAAGtB,UAAU,WAAd,EAAwB6tB,OAAxB,EAAiCvsB,UAAjC;;AAEA,iBAASusB,OAAT,GAAmB;AACjB,WAAC,GAAGznC,gBAAgB,WAApB,EAA8B,IAA9B,EAAoCynC,OAApC;AACA,iBAAO,CAAC,GAAG/tB,2BAA2B,WAA/B,EAAyC,IAAzC,EAA+C,CAAC+tB,OAAO,CAACjxC,SAAR,IAAqB,CAAC,GAAGgjB,gBAAgB,WAApB,EAA8BiuB,OAA9B,CAAtB,EAA8DlvD,KAA9D,CAAoE,IAApE,EAA0E/B,SAA1E,CAA/C,CAAP;AACD;;AAED,SAAC,GAAG0pB,aAAa,WAAjB,EAA2BunC,OAA3B,EAAoC,CAAC;AACnCpxD,UAAAA,GAAG,EAAE,uBAD8B;AAEnCuC,UAAAA,KAAK,EAAE,SAASyB,qBAAT,GAAiC;AACtC,mBAAO,KAAP;AACD;AAJkC,SAAD,EAKjC;AACDhE,UAAAA,GAAG,EAAE,mBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS8B,iBAAT,GAA6B;AAClC,gBAAI8gC,OAAO,GAAG,KAAK77B,IAAnB;AACA,gBAAI+nD,aAAa,GAAGlsB,OAAO,CAACnjB,aAAR,CAAsB,wBAAtB,CAApB;;AACA,gBAAIqvC,aAAJ,EAAmB;AACjBA,cAAAA,aAAa,CAACpzC,gBAAd,CAA+B,OAA/B,EAAwC,UAAUzY,CAAV,EAAa;AACnDA,gBAAAA,CAAC,CAACoiC,cAAF;AACAzC,gBAAAA,OAAO,CAACnjB,aAAR,CAAsB,qBAAtB,EAA6CsvC,SAA7C,CAAuDlc,MAAvD,CAA8D,UAA9D;AACD,eAHD,EAGG,IAHH;AAID;AACF;AAXA,SALiC,EAiBjC;AACDp1C,UAAAA,GAAG,EAAE,oBADJ;AAEDuC,UAAAA,KAAK,EAAE,SAAS0rC,kBAAT,CAA4BpuC,GAA5B,EAAiC;AACtCA,YAAAA,GAAG,CAACgC,MAAJ,CAAW+V,GAAX,GAAiB,kEAAjB;AACD;AAJA,SAjBiC,EAsBjC;AACD5X,UAAAA,GAAG,EAAE,QADJ;AAEDuC,UAAAA,KAAK,EAAE,SAASwB,MAAT,GAAkB;AACvB,gBAAI2nC,MAAM,GAAG,IAAb;;AAEA,gBAAImS,MAAM,GAAG,KAAKz2C,KAAlB;AAAA,gBACI+9B,OAAO,GAAG0Y,MAAM,CAAC1Y,OADrB;AAAA,gBAEIJ,IAAI,GAAG8Y,MAAM,CAAC9Y,IAFlB;AAAA,gBAGIiF,QAAQ,GAAG6T,MAAM,CAAC7T,QAHtB;AAAA,gBAIIunB,oBAAoB,GAAG1T,MAAM,CAAC5O,aAJlC;AAAA,gBAKIA,aAAa,GAAGsiB,oBAAoB,KAAKvvD,SAAzB,GAAqC,EAArC,GAA0CuvD,oBAL9D;AAAA,gBAMIC,YAAY,GAAG3T,MAAM,CAAC/P,KAN1B;AAAA,gBAOIA,KAAK,GAAG0jB,YAAY,KAAKxvD,SAAjB,GAA6B,EAA7B,GAAkCwvD,YAP9C;AAAA,gBAQItiB,aAAa,GAAG2O,MAAM,CAAC3O,aAR3B;AAAA,gBASIC,YAAY,GAAG0O,MAAM,CAAC1O,YAT1B;AAWA,gBAAIsiB,UAAU,GAAG1sB,IAAI,IAAII,OAAO,CAACJ,IAAR,CAAawC,KAAb,KAAuBxC,IAAI,CAACwC,KAArD;AACA,gBAAI+E,OAAO,GAAG,CAAC,GAAGrkC,MAAH,CAAU6lC,KAAV,EAAiBnmC,GAAjB,CAAqB,UAAUrH,CAAV,EAAa;AAC/C,qBAAOA,CAAC,CAACkG,WAAF,EAAP;AACD,aAFc,EAEZwT,OAFY,CAEJmrB,OAAO,CAACJ,IAAR,CAAawC,KAAb,CAAmB/gC,WAAnB,EAFI,CAAf;AAGA,gBAAIwmC,SAAS,GAAG7H,OAAO,CAAC6H,SAAxB;AAEA,gBAAI0kB,kBAAkB,GAAG,EAAzB;;AACA,gBAAI1kB,SAAS,IAAIA,SAAS,CAACG,UAA3B,EAAuC;AACrCukB,cAAAA,kBAAkB,GAAG1kB,SAAS,CAACG,UAA/B;;AACA,kBAAIH,SAAS,CAACG,UAAV,KAAyB,GAAzB,IAAgCH,SAAS,CAAC2kB,QAA1C,IAAsD3kB,SAAS,CAAC2kB,QAAV,CAAmBC,WAA7E,EAA0F;AACxFF,gBAAAA,kBAAkB,GAAG,MAArB;AACD;AACF;;AAED,mBAAOvoC,OAAO,WAAP,CAAgBrmB,aAAhB,CACL,KADK,EAEL;AAAEmG,cAAAA,GAAG,EAAE,SAASA,GAAT,CAAaK,IAAb,EAAmB;AACtBoiC,gBAAAA,MAAM,CAACpiC,IAAP,GAAcA,IAAd;AACD,eAFH;AAEKc,cAAAA,SAAS,EAAE,iBAAiBkiC,OAAO,GAAG,kBAAH,GAAwB,EAAhD;AAFhB,aAFK,EAKLnjB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8BkhC,QAAQ,WAAtC,EAAgD;AAC9C55B,cAAAA,SAAS,EAAE,mBADmC;AAE9CwN,cAAAA,GAAG,EAAEutB,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAasJ,UAFY;AAG9ChlB,cAAAA,GAAG,EAAE8b,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAawC,KAHY;AAI9Cje,cAAAA,OAAO,EAAE,KAAK2kB,kBAAL,CAAwBtwC,IAAxB,CAA6B,IAA7B;AAJqC,aAAhD,CALK,EAWLwrB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,KADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE+e,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AAAEsH,cAAAA,SAAS,EAAE,uBAAuB26B,IAAI,GAAG,GAAH,GAAS,GAApC;AAAb,aAArC,CAHF,EAIE5b,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,GADF,EAEE;AACEsH,cAAAA,SAAS,EAAE,qBADb;AAEEi+B,cAAAA,IAAI,EAAElD,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAa0K;AAFrC,aAFF,EAMEtK,OAAO,CAACJ,IAAR,IAAgBI,OAAO,CAACJ,IAAR,CAAawC,KAN/B,CAJF,EAYEpe,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE6kC,aAHF,CAZF,EAiBE9lB,OAAO,WAAP,CAAgBrmB,aAAhB,CACE,MADF,EAEE;AAAEsH,cAAAA,SAAS,EAAE;AAAb,aAFF,EAGE,CAAC,GAAG4lD,0BAA0B,WAA9B,EAAwC7qB,OAAO,CAAC0sB,UAAhD,EAA4D;AAC1DC,cAAAA,SAAS,EAAE,IAD+C;AAE1DnJ,cAAAA,MAAM,EAAE;AACNoJ,gBAAAA,eAAe,EAAE90D,MAAM,CAAC+zD,gCAAP,CAAwChnB,QAAxC;AADX;AAFkD,aAA5D,CAHF,CAjBF,EA2BEgD,SAAS,IAAI7jB,OAAO,WAAP,CAAgBrmB,aAAhB,CACX,GADW,EAEX;AAAEsH,cAAAA,SAAS,EAAE,iBAAb;AAAgCsE,cAAAA,KAAK,EAAE,MAAvC;AAA+Cs/B,cAAAA,OAAO,EAAEmB;AAAxD,aAFW,EAGXnC,SAAS,CAACI,gBAAV,GAA6BjkB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AACxEp6B,cAAAA,SAAS,EAAE,cAD6D;AAExEzO,cAAAA,IAAI,EAAE,UAFkE;AAGxE4tB,cAAAA,IAAI,EAAEmoC;AAHkE,aAA7C,CAA7B,GAIKvoC,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAChDp6B,cAAAA,SAAS,EAAE,cADqC;AAEhDzO,cAAAA,IAAI,EAAE,OAF0C;AAGhD4tB,cAAAA,IAAI,EAAEmoC;AAH0C,aAA7C,CAPM,CA3Bf,EAwCED,UAAU,GAAGtoC,OAAO,WAAP,CAAgBrmB,aAAhB,CACX,GADW,EAEX;AACEulC,cAAAA,IAAI,EAAElD,OAAO,CAACsK,QADhB;AAEErlC,cAAAA,SAAS,EAAE,iBAFb;AAGEsE,cAAAA,KAAK,EAAE,MAHT;AAIE7M,cAAAA,MAAM,EAAE;AAJV,aAFW,EAQXsnB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,aAAb;AAA4BzO,cAAAA,IAAI,EAAE;AAAlC,aAA7C,CARW,CAAH,GASNwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CACF,GADE,EAEF;AAAEsH,cAAAA,SAAS,EAAE,kBAAb;AAAiCsE,cAAAA,KAAK,EAAE,OAAxC;AAAiDs/B,cAAAA,OAAO,EAAEkB;AAA1D,aAFE,EAGF/lB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B0hC,KAAK,WAAnC,EAA6C;AAAEp6B,cAAAA,SAAS,EAAE,cAAb;AAA6BzO,cAAAA,IAAI,EAAE;AAAnC,aAA7C,CAHE,CAjDN,CAHF,EA0DEwtB,OAAO,WAAP,CAAgBrmB,aAAhB,CAA8B,KAA9B,EAAqC;AACnCsH,cAAAA,SAAS,EAAE,+BADwB;AAEnCof,cAAAA,uBAAuB,EAAE;AACvBC,gBAAAA,MAAM,EAAE0b,OAAO,CAAC6sB;AADO;AAFU,aAArC,CA1DF,CAXK,CAAP;AA6ED;AA3GA,SAtBiC,CAApC;AAmIA,eAAOZ,OAAP;AACD,OA5Ia,CA4IZloC,MAAM,CAACxc,SA5IK,CAAd;;AA8IA7R,MAAAA,OAAO,WAAP,GAAkBu2D,OAAlB;AAEA;AAAO,KAr2XG;AAs2XV;;AACA;AAAO,cAASt2D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIwM,GAAG,GAAG;AACT,4BAAoB,GADX;AAET,sBAAc,GAFL;AAGT,wBAAgB,GAHP;AAIT,uBAAe,GAJN;AAKT,0BAAkB,GALT;AAMT,uBAAe,GANN;AAOT,qBAAa;AAPJ,OAAV;;AASA,eAASsqD,cAAT,CAAwBC,GAAxB,EAA6B;AAC5B,eAAO/2D,mBAAmB,CAACg3D,qBAAqB,CAACD,GAAD,CAAtB,CAA1B;AACA;;AAAA;;AACD,eAASC,qBAAT,CAA+BD,GAA/B,EAAoC;AACnC,YAAI58C,EAAE,GAAG3N,GAAG,CAACuqD,GAAD,CAAZ;AACA,YAAG,EAAE58C,EAAE,GAAG,CAAP,CAAH,EAAc;AACb,gBAAM,IAAIvN,KAAJ,CAAU,yBAAyBmqD,GAAzB,GAA+B,IAAzC,CAAN;AACD,eAAO58C,EAAP;AACA;;AAAA;;AACD28C,MAAAA,cAAc,CAAC58C,IAAf,GAAsB,SAAS+8C,kBAAT,GAA8B;AACnD,eAAOt2D,MAAM,CAACuZ,IAAP,CAAY1N,GAAZ,CAAP;AACA,OAFD;;AAGAsqD,MAAAA,cAAc,CAAC/4C,OAAf,GAAyBi5C,qBAAzB;AACAr3D,MAAAA,MAAM,CAACD,OAAP,GAAiBo3D,cAAjB;AACAA,MAAAA,cAAc,CAAC38C,EAAf,GAAoB,GAApB;AAEA;AAAO,KAl4XG;AAm4XV;;AACA;AAAO,cAASxa,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,+hBAAjB;AAEA;AAAO,KAx4XG;AAy4XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,+dAAjB;AAEA;AAAO,KA94XG;AA+4XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,4iCAAjB;AAEA;AAAO,KAp5XG;AAq5XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,0sBAAjB;AAEA;AAAO,KA15XG;AA25XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,qdAAjB;AAEA;AAAO,KAh6XG;AAi6XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,qUAAjB;AAEA;AAAO,KAt6XG;AAu6XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,MAAAA,MAAM,CAACD,OAAP,GAAiB,q7CAAjB;AAEA;AAAO,KA56XG;AA66XV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI42D,eAAe,GAAG52D,mBAAmB,CAAC,GAAD,CAAzC;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,eAASk3D,oBAAT,CAA+BC,SAA/B,EAA0C3gD,YAA1C,EAAwD;AACtD,eAAOogD,eAAe,CAACngD,IAAI,CAACgM,GAAL,EAAD,EAAa00C,SAAb,EAAwB3gD,YAAxB,CAAtB;AACD;;AAED7W,MAAAA,MAAM,CAACD,OAAP,GAAiBw3D,oBAAjB;AAGA;AAAO,KAvgYG;AAwgYV;;AACA;AAAO,cAASv3D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIo3D,WAAW,GAAGp3D,mBAAmB,CAAC,GAAD,CAArC;;AACA,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAIq3D,mBAAmB,GAAGr3D,mBAAmB,CAAC,GAAD,CAA7C;;AACA,UAAIs3D,kBAAkB,GAAGt3D,mBAAmB,CAAC,GAAD,CAA5C;;AACA,UAAIu3D,QAAQ,GAAGv3D,mBAAmB,CAAC,GAAD,CAAlC;;AAEA,UAAIw3D,cAAc,GAAG,IAArB;AACA,UAAIC,0BAA0B,GAAG,IAAjC;AACA,UAAIC,gBAAgB,GAAG,KAAvB;AACA,UAAIC,qBAAqB,GAAG,KAA5B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA,eAASf,eAAT,CAA0BgB,kBAA1B,EAA8CT,SAA9C,EAAyD3gD,YAAzD,EAAuE;AACrE,YAAIG,OAAO,GAAGH,YAAY,IAAI,EAA9B;AAEA,YAAIqhD,UAAU,GAAGT,WAAW,CAACQ,kBAAD,EAAqBT,SAArB,CAA5B;AAEA,YAAI3J,MAAM,GAAG72C,OAAO,CAAC62C,MAArB;AACA,YAAIsK,QAAQ,GAAGP,QAAQ,CAACX,eAAT,CAAyBkB,QAAxC;;AACA,YAAItK,MAAM,IAAIA,MAAM,CAACoJ,eAAjB,IAAoCpJ,MAAM,CAACoJ,eAAP,CAAuBkB,QAA/D,EAAyE;AACvEA,UAAAA,QAAQ,GAAGtK,MAAM,CAACoJ,eAAP,CAAuBkB,QAAlC;AACD;;AAED,YAAIC,eAAe,GAAG;AACpBpB,UAAAA,SAAS,EAAEqB,OAAO,CAACrhD,OAAO,CAACggD,SAAT,CADE;AAEpBkB,UAAAA,UAAU,EAAEA;AAFQ,SAAtB;AAKA,YAAII,QAAJ,EAAcC,SAAd;;AACA,YAAIL,UAAU,GAAG,CAAjB,EAAoB;AAClBI,UAAAA,QAAQ,GAAG3hD,KAAK,CAACshD,kBAAD,CAAhB;AACAM,UAAAA,SAAS,GAAG5hD,KAAK,CAAC6gD,SAAD,CAAjB;AACD,SAHD,MAGO;AACLc,UAAAA,QAAQ,GAAG3hD,KAAK,CAAC6gD,SAAD,CAAhB;AACAe,UAAAA,SAAS,GAAG5hD,KAAK,CAACshD,kBAAD,CAAjB;AACD;;AAED,YAAI7+C,OAAO,GAAGs+C,mBAAmB,CAACa,SAAD,EAAYD,QAAZ,CAAjC;AACA,YAAI/qD,MAAM,GAAGgrD,SAAS,CAACvgD,iBAAV,KAAgCsgD,QAAQ,CAACtgD,iBAAT,EAA7C;AACA,YAAIkB,OAAO,GAAG9W,IAAI,CAAC6qD,KAAL,CAAW7zC,OAAO,GAAG,EAArB,IAA2B7L,MAAzC;AACA,YAAIirD,MAAJ,CA5BqE,CA8BrE;;AACA,YAAIt/C,OAAO,GAAG,CAAd,EAAiB;AACf,cAAIlC,OAAO,CAACyhD,cAAZ,EAA4B;AAC1B,gBAAIr/C,OAAO,GAAG,CAAd,EAAiB;AACf,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,CAArB,EAAwBC,eAAxB,CAAf;AACD,aAFD,MAEO,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,EAArB,EAAyBC,eAAzB,CAAf;AACD,aAFM,MAEA,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,EAArB,EAAyBC,eAAzB,CAAf;AACD,aAFM,MAEA,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,aAAD,EAAgB,IAAhB,EAAsBC,eAAtB,CAAf;AACD,aAFM,MAEA,IAAIh/C,OAAO,GAAG,EAAd,EAAkB;AACvB,qBAAO++C,QAAQ,CAAC,kBAAD,EAAqB,CAArB,EAAwBC,eAAxB,CAAf;AACD,aAFM,MAEA;AACL,qBAAOD,QAAQ,CAAC,UAAD,EAAa,CAAb,EAAgBC,eAAhB,CAAf;AACD;AACF,WAdD,MAcO;AACL,gBAAIl/C,OAAO,KAAK,CAAhB,EAAmB;AACjB,qBAAOi/C,QAAQ,CAAC,kBAAD,EAAqB,CAArB,EAAwBC,eAAxB,CAAf;AACD,aAFD,MAEO;AACL,qBAAOD,QAAQ,CAAC,UAAD,EAAaj/C,OAAb,EAAsBk/C,eAAtB,CAAf;AACD;AACF,WArBc,CAuBjB;;AACC,SAxBD,MAwBO,IAAIl/C,OAAO,GAAG,EAAd,EAAkB;AACvB,iBAAOi/C,QAAQ,CAAC,UAAD,EAAaj/C,OAAb,EAAsBk/C,eAAtB,CAAf,CADuB,CAGzB;AACC,SAJM,MAIA,IAAIl/C,OAAO,GAAG,EAAd,EAAkB;AACvB,iBAAOi/C,QAAQ,CAAC,aAAD,EAAgB,CAAhB,EAAmBC,eAAnB,CAAf,CADuB,CAGzB;AACC,SAJM,MAIA,IAAIl/C,OAAO,GAAG2+C,cAAd,EAA8B;AACnC,cAAI5+C,KAAK,GAAG7W,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG,EAArB,CAAZ;AACA,iBAAOi/C,QAAQ,CAAC,aAAD,EAAgBl/C,KAAhB,EAAuBm/C,eAAvB,CAAf,CAFmC,CAIrC;AACC,SALM,MAKA,IAAIl/C,OAAO,GAAG4+C,0BAAd,EAA0C;AAC/C,iBAAOK,QAAQ,CAAC,OAAD,EAAU,CAAV,EAAaC,eAAb,CAAf,CAD+C,CAGjD;AACC,SAJM,MAIA,IAAIl/C,OAAO,GAAG6+C,gBAAd,EAAgC;AACrC,cAAIW,IAAI,GAAGt2D,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG2+C,cAArB,CAAX;AACA,iBAAOM,QAAQ,CAAC,OAAD,EAAUO,IAAV,EAAgBN,eAAhB,CAAf,CAFqC,CAIvC;AACC,SALM,MAKA,IAAIl/C,OAAO,GAAG8+C,qBAAd,EAAqC;AAC1CQ,UAAAA,MAAM,GAAGp2D,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG6+C,gBAArB,CAAT;AACA,iBAAOI,QAAQ,CAAC,cAAD,EAAiBK,MAAjB,EAAyBJ,eAAzB,CAAf;AACD;;AAEDI,QAAAA,MAAM,GAAGb,kBAAkB,CAACY,SAAD,EAAYD,QAAZ,CAA3B,CAlFqE,CAoFrE;;AACA,YAAIE,MAAM,GAAG,EAAb,EAAiB;AACf,cAAIG,YAAY,GAAGv2D,IAAI,CAAC6qD,KAAL,CAAW/zC,OAAO,GAAG6+C,gBAArB,CAAnB;AACA,iBAAOI,QAAQ,CAAC,SAAD,EAAYQ,YAAZ,EAA0BP,eAA1B,CAAf,CAFe,CAIjB;AACC,SALD,MAKO;AACL,cAAIQ,sBAAsB,GAAGJ,MAAM,GAAG,EAAtC;AACA,cAAIK,KAAK,GAAGz2D,IAAI,CAAC6Z,KAAL,CAAWu8C,MAAM,GAAG,EAApB,CAAZ,CAFK,CAIL;;AACA,cAAII,sBAAsB,GAAG,CAA7B,EAAgC;AAC9B,mBAAOT,QAAQ,CAAC,aAAD,EAAgBU,KAAhB,EAAuBT,eAAvB,CAAf,CAD8B,CAGhC;AACC,WAJD,MAIO,IAAIQ,sBAAsB,GAAG,CAA7B,EAAgC;AACrC,mBAAOT,QAAQ,CAAC,YAAD,EAAeU,KAAf,EAAsBT,eAAtB,CAAf,CADqC,CAGvC;AACC,WAJM,MAIA;AACL,mBAAOD,QAAQ,CAAC,cAAD,EAAiBU,KAAK,GAAG,CAAzB,EAA4BT,eAA5B,CAAf;AACD;AACF;AACF;;AAEDp4D,MAAAA,MAAM,CAACD,OAAP,GAAiBk3D,eAAjB;AAGA;AAAO,KAxtYG;AAytYV;;AACA;AAAO,cAASj3D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAASo3D,WAAT,CAAsBqB,aAAtB,EAAqCC,cAArC,EAAqD;AACnD,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIE,QAAQ,GAAGV,QAAQ,CAACvhD,OAAT,EAAf;AACA,YAAIwhD,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AACA,YAAIE,SAAS,GAAGV,SAAS,CAACxhD,OAAV,EAAhB;;AAEA,YAAIiiD,QAAQ,GAAGC,SAAf,EAA0B;AACxB,iBAAO,CAAC,CAAR;AACD,SAFD,MAEO,IAAID,QAAQ,GAAGC,SAAf,EAA0B;AAC/B,iBAAO,CAAP;AACD,SAFM,MAEA;AACL,iBAAO,CAAP;AACD;AACF;;AAEDj5D,MAAAA,MAAM,CAACD,OAAP,GAAiB03D,WAAjB;AAGA;AAAO,KAjxYG;AAkxYV;;AACA;AAAO,cAASz3D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC;;;;;;;;;;;;;;;AAeA,eAASgE,MAAT,CAAiB6S,QAAjB,EAA2B;AACzB,eAAOA,QAAQ,YAAYE,IAA3B;AACD;;AAED9W,MAAAA,MAAM,CAACD,OAAP,GAAiBgE,MAAjB;AAGA;AAAO,KA3yYG;AA4yYV;;AACA;AAAO,cAAS/D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI64D,wBAAwB,GAAG74D,mBAAmB,CAAC,GAAD,CAAlD;AAEA;;;;;;;;;;;;;;;;;;;;;;AAoBA,eAASq3D,mBAAT,CAA8BoB,aAA9B,EAA6CC,cAA7C,EAA6D;AAC3D,YAAIr/C,IAAI,GAAGw/C,wBAAwB,CAACJ,aAAD,EAAgBC,cAAhB,CAAxB,GAA0D,IAArE;AACA,eAAOr/C,IAAI,GAAG,CAAP,GAAWtX,IAAI,CAAC6Z,KAAL,CAAWvC,IAAX,CAAX,GAA8BtX,IAAI,CAAC4Z,IAAL,CAAUtC,IAAV,CAArC;AACD;;AAED1Z,MAAAA,MAAM,CAACD,OAAP,GAAiB23D,mBAAjB;AAGA;AAAO,KA70YG;AA80YV;;AACA;AAAO,cAAS13D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;;AAoBA,eAAS64D,wBAAT,CAAmCJ,aAAnC,EAAkDC,cAAlD,EAAkE;AAChE,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIP,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AACA,eAAOT,QAAQ,CAACvhD,OAAT,KAAqBwhD,SAAS,CAACxhD,OAAV,EAA5B;AACD;;AAED/W,MAAAA,MAAM,CAACD,OAAP,GAAiBm5D,wBAAjB;AAGA;AAAO,KAh3YG;AAi3YV;;AACA;AAAO,cAASl5D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;;AACA,UAAI84D,0BAA0B,GAAG94D,mBAAmB,CAAC,GAAD,CAApD;;AACA,UAAI+4D,UAAU,GAAG/4D,mBAAmB,CAAC,GAAD,CAApC;AAEA;;;;;;;;;;;;;;;;;;;;;AAmBA,eAASs3D,kBAAT,CAA6BmB,aAA7B,EAA4CC,cAA5C,EAA4D;AAC1D,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIP,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AAEA,YAAIM,IAAI,GAAGD,UAAU,CAACd,QAAD,EAAWC,SAAX,CAArB;AACA,YAAIe,UAAU,GAAGl3D,IAAI,CAACm3D,GAAL,CAASJ,0BAA0B,CAACb,QAAD,EAAWC,SAAX,CAAnC,CAAjB;AACAD,QAAAA,QAAQ,CAACkB,QAAT,CAAkBlB,QAAQ,CAACmB,QAAT,KAAsBJ,IAAI,GAAGC,UAA/C,EAN0D,CAQ1D;AACA;;AACA,YAAII,kBAAkB,GAAGN,UAAU,CAACd,QAAD,EAAWC,SAAX,CAAV,KAAoC,CAACc,IAA9D;AACA,eAAOA,IAAI,IAAIC,UAAU,GAAGI,kBAAjB,CAAX;AACD;;AAED15D,MAAAA,MAAM,CAACD,OAAP,GAAiB43D,kBAAjB;AAGA;AAAO,KA55YG;AA65YV;;AACA;AAAO,cAAS33D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;AAmBA,eAAS84D,0BAAT,CAAqCL,aAArC,EAAoDC,cAApD,EAAoE;AAClE,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIP,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AAEA,YAAIY,QAAQ,GAAGrB,QAAQ,CAACsB,WAAT,KAAyBrB,SAAS,CAACqB,WAAV,EAAxC;AACA,YAAIC,SAAS,GAAGvB,QAAQ,CAACmB,QAAT,KAAsBlB,SAAS,CAACkB,QAAV,EAAtC;AAEA,eAAOE,QAAQ,GAAG,EAAX,GAAgBE,SAAvB;AACD;;AAED75D,MAAAA,MAAM,CAACD,OAAP,GAAiBo5D,0BAAjB;AAGA;AAAO,KAl8YG;AAm8YV;;AACA;AAAO,cAASn5D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIsW,KAAK,GAAGtW,mBAAmB,CAAC,EAAD,CAA/B;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,eAAS+4D,UAAT,CAAqBN,aAArB,EAAoCC,cAApC,EAAoD;AAClD,YAAIT,QAAQ,GAAG3hD,KAAK,CAACmiD,aAAD,CAApB;AACA,YAAIE,QAAQ,GAAGV,QAAQ,CAACvhD,OAAT,EAAf;AACA,YAAIwhD,SAAS,GAAG5hD,KAAK,CAACoiD,cAAD,CAArB;AACA,YAAIE,SAAS,GAAGV,SAAS,CAACxhD,OAAV,EAAhB;;AAEA,YAAIiiD,QAAQ,GAAGC,SAAf,EAA0B;AACxB,iBAAO,CAAC,CAAR;AACD,SAFD,MAEO,IAAID,QAAQ,GAAGC,SAAf,EAA0B;AAC/B,iBAAO,CAAP;AACD,SAFM,MAEA;AACL,iBAAO,CAAP;AACD;AACF;;AAEDj5D,MAAAA,MAAM,CAACD,OAAP,GAAiBq5D,UAAjB;AAGA;AAAO,KA3/YG;AA4/YV;;AACA;AAAO,cAASp5D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAIy5D,0BAA0B,GAAGz5D,mBAAmB,CAAC,GAAD,CAApD;;AACA,UAAI05D,iBAAiB,GAAG15D,mBAAmB,CAAC,GAAD,CAA3C;AAEA;;;;;;AAIAL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AACfk3D,QAAAA,eAAe,EAAE6C,0BAA0B,EAD5B;AAEf7mC,QAAAA,MAAM,EAAE8mC,iBAAiB;AAFV,OAAjB;AAMA;AAAO,KA5gZG;AA6gZV;;AACA;AAAO,cAAS/5D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,eAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,cADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAvBa;AA4B1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,QADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WA5BkB;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,OADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,eADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,SADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,cADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,QADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,aADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,eADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO,QAAQ10D,MAAf;AACD,aAFD,MAEO;AACL,qBAAOA,MAAM,GAAG,MAAhB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KArnZG;AAsnZV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD,UAAI46D,2BAA2B,GAAG56D,mBAAmB,CAAC,GAAD,CAArD;;AAEA,eAAS05D,iBAAT,GAA8B;AAC5B;AACA;AACA;AACA;AACA,YAAImB,WAAW,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E,CAAlB;AACA,YAAIC,UAAU,GAAG,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EAAyD,MAAzD,EAAiE,QAAjE,EAA2E,WAA3E,EAAwF,SAAxF,EAAmG,UAAnG,EAA+G,UAA/G,CAAjB;AACA,YAAIC,aAAa,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CAApB;AACA,YAAIC,aAAa,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,CAApB;AACA,YAAIC,YAAY,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,WAAhC,EAA6C,UAA7C,EAAyD,QAAzD,EAAmE,UAAnE,CAAnB;AACA,YAAIC,iBAAiB,GAAG,CAAC,IAAD,EAAO,IAAP,CAAxB;AACA,YAAIC,iBAAiB,GAAG,CAAC,IAAD,EAAO,IAAP,CAAxB;AACA,YAAIC,YAAY,GAAG,CAAC,MAAD,EAAS,MAAT,CAAnB;AAEA,YAAIC,UAAU,GAAG;AACf;AACA,iBAAO,aAAUnkD,IAAV,EAAgB;AACrB,mBAAO2jD,WAAW,CAAC3jD,IAAI,CAACkiD,QAAL,EAAD,CAAlB;AACD,WAJc;AAMf;AACA,kBAAQ,cAAUliD,IAAV,EAAgB;AACtB,mBAAO4jD,UAAU,CAAC5jD,IAAI,CAACkiD,QAAL,EAAD,CAAjB;AACD,WATc;AAWf;AACA,gBAAM,YAAUliD,IAAV,EAAgB;AACpB,mBAAO6jD,aAAa,CAAC7jD,IAAI,CAACokD,MAAL,EAAD,CAApB;AACD,WAdc;AAgBf;AACA,iBAAO,aAAUpkD,IAAV,EAAgB;AACrB,mBAAO8jD,aAAa,CAAC9jD,IAAI,CAACokD,MAAL,EAAD,CAApB;AACD,WAnBc;AAqBf;AACA,kBAAQ,cAAUpkD,IAAV,EAAgB;AACtB,mBAAO+jD,YAAY,CAAC/jD,IAAI,CAACokD,MAAL,EAAD,CAAnB;AACD,WAxBc;AA0Bf;AACA,eAAK,WAAUpkD,IAAV,EAAgB;AACnB,mBAAQA,IAAI,CAACqkD,QAAL,KAAkB,EAAnB,IAA0B,CAA1B,GAA8BL,iBAAiB,CAAC,CAAD,CAA/C,GAAqDA,iBAAiB,CAAC,CAAD,CAA7E;AACD,WA7Bc;AA+Bf;AACA,eAAK,WAAUhkD,IAAV,EAAgB;AACnB,mBAAQA,IAAI,CAACqkD,QAAL,KAAkB,EAAnB,IAA0B,CAA1B,GAA8BJ,iBAAiB,CAAC,CAAD,CAA/C,GAAqDA,iBAAiB,CAAC,CAAD,CAA7E;AACD,WAlCc;AAoCf;AACA,gBAAM,YAAUjkD,IAAV,EAAgB;AACpB,mBAAQA,IAAI,CAACqkD,QAAL,KAAkB,EAAnB,IAA0B,CAA1B,GAA8BH,YAAY,CAAC,CAAD,CAA1C,GAAgDA,YAAY,CAAC,CAAD,CAAnE;AACD;AAvCc,SAAjB,CAd4B,CAwD5B;;AACA,YAAII,iBAAiB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,KAAX,EAAkB,GAAlB,EAAuB,GAAvB,EAA4B,GAA5B,CAAxB;AACAA,QAAAA,iBAAiB,CAAC/2D,OAAlB,CAA0B,UAAUg3D,cAAV,EAA0B;AAClDJ,UAAAA,UAAU,CAACI,cAAc,GAAG,GAAlB,CAAV,GAAmC,UAAUvkD,IAAV,EAAgBmkD,UAAhB,EAA4B;AAC7D,mBAAOK,OAAO,CAACL,UAAU,CAACI,cAAD,CAAV,CAA2BvkD,IAA3B,CAAD,CAAd;AACD,WAFD;AAGD,SAJD;AAMA,eAAO;AACLmkD,UAAAA,UAAU,EAAEA,UADP;AAELM,UAAAA,sBAAsB,EAAEf,2BAA2B,CAACS,UAAD;AAF9C,SAAP;AAID;;AAED,eAASK,OAAT,CAAkBxnC,MAAlB,EAA0B;AACxB,YAAI0nC,MAAM,GAAG1nC,MAAM,GAAG,GAAtB;;AACA,YAAI0nC,MAAM,GAAG,EAAT,IAAeA,MAAM,GAAG,EAA5B,EAAgC;AAC9B,kBAAQA,MAAM,GAAG,EAAjB;AACE,iBAAK,CAAL;AACE,qBAAO1nC,MAAM,GAAG,IAAhB;;AACF,iBAAK,CAAL;AACE,qBAAOA,MAAM,GAAG,IAAhB;;AACF,iBAAK,CAAL;AACE,qBAAOA,MAAM,GAAG,IAAhB;AANJ;AAQD;;AACD,eAAOA,MAAM,GAAG,IAAhB;AACD;;AAEDv0B,MAAAA,MAAM,CAACD,OAAP,GAAiBg6D,iBAAjB;AAGA;AAAO,KAntZG;AAotZV;;AACA;AAAO,cAAS/5D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,UAAIm8D,mBAAmB,GAAG,CACxB,GADwB,EACnB,IADmB,EACb,GADa,EACR,GADQ,EACH,IADG,EACG,KADH,EACU,MADV,EACkB,GADlB,EAExB,GAFwB,EAEnB,GAFmB,EAEd,IAFc,EAER,IAFQ,EAEF,MAFE,EAEM,IAFN,EAEY,MAFZ,EAGxB,GAHwB,EAGnB,IAHmB,EAGb,GAHa,EAGR,IAHQ,EAGF,GAHE,EAGG,IAHH,EAIxB,GAJwB,EAInB,IAJmB,EAIb,GAJa,EAIR,IAJQ,EAIF,KAJE,EAKxB,GALwB,EAKnB,IALmB,EAKb,GALa,EAKR,GALQ,CAA1B;;AAQA,eAASjB,2BAAT,CAAsCS,UAAtC,EAAkD;AAChD,YAAIS,aAAa,GAAG,EAApB;;AACA,aAAK,IAAIj3D,GAAT,IAAgBw2D,UAAhB,EAA4B;AAC1B,cAAIA,UAAU,CAAC95D,cAAX,CAA0BsD,GAA1B,CAAJ,EAAoC;AAClCi3D,YAAAA,aAAa,CAACztD,IAAd,CAAmBxJ,GAAnB;AACD;AACF;;AAED,YAAIk3D,gBAAgB,GAAGF,mBAAmB,CACvC/uD,MADoB,CACbgvD,aADa,EAEpBE,IAFoB,GAGpBnoB,OAHoB,EAAvB;AAIA,YAAI8nB,sBAAsB,GAAG,IAAI7jC,MAAJ,CAC3B,4BAA4B,GAA5B,GAAkCikC,gBAAgB,CAACv1C,IAAjB,CAAsB,GAAtB,CAAlC,GAA+D,KADpC,EAC2C,GAD3C,CAA7B;AAIA,eAAOm1C,sBAAP;AACD;;AAEDh8D,MAAAA,MAAM,CAACD,OAAP,GAAiBk7D,2BAAjB;AAGA;AAAO,KArvZG;AAsvZV;;AACA;AAAO,cAASj7D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,QADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,KADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,KAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,SADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,MADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,MADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WAvBkB;AA4B1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,SADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WA5Ba;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,KADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,SADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,MADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,QADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,KADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,QADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,QADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO10D,MAAM,GAAG,GAAhB;AACD,aAFD,MAEO;AACL,qBAAOA,MAAM,GAAG,GAAhB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KA91ZG;AA+1ZV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,QADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,KADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,KAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,SADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,MADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,MADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WAvBkB;AA4B1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,SADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WA5Ba;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,KADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,SADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,MADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,QADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,KADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,QADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,QADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO10D,MAAM,GAAG,GAAhB;AACD,aAFD,MAEO;AACL,qBAAOA,MAAM,GAAG,GAAhB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAv8ZG;AAw8ZV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,qBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,WADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,cAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,qBADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAvBa;AA4B1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,QADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WA5BkB;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,OADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,oBADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,OADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,oBADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,OADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,cADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,YADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO,QAAQ10D,MAAf;AACD,aAFD,MAEO;AACL,qBAAO,UAAUA,MAAjB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAhjaG;AAijaV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAAS+5D,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE;AAChBC,YAAAA,GAAG,EAAE,qBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WADQ;AAM1BC,UAAAA,QAAQ,EAAE;AACRF,YAAAA,GAAG,EAAE,WADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WANgB;AAW1BE,UAAAA,WAAW,EAAE,aAXa;AAa1BC,UAAAA,gBAAgB,EAAE;AAChBJ,YAAAA,GAAG,EAAE,oBADW;AAEhBC,YAAAA,KAAK,EAAE;AAFS,WAbQ;AAkB1BI,UAAAA,QAAQ,EAAE;AACRL,YAAAA,GAAG,EAAE,UADG;AAERC,YAAAA,KAAK,EAAE;AAFC,WAlBgB;AAuB1BK,UAAAA,WAAW,EAAE;AACXN,YAAAA,GAAG,EAAE,iBADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAvBa;AA4B1BM,UAAAA,MAAM,EAAE;AACNP,YAAAA,GAAG,EAAE,SADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WA5BkB;AAiC1BO,UAAAA,KAAK,EAAE;AACLR,YAAAA,GAAG,EAAE,QADA;AAELC,YAAAA,KAAK,EAAE;AAFF,WAjCmB;AAsC1BQ,UAAAA,YAAY,EAAE;AACZT,YAAAA,GAAG,EAAE,gBADO;AAEZC,YAAAA,KAAK,EAAE;AAFK,WAtCY;AA2C1BS,UAAAA,OAAO,EAAE;AACPV,YAAAA,GAAG,EAAE,QADE;AAEPC,YAAAA,KAAK,EAAE;AAFA,WA3CiB;AAgD1BU,UAAAA,WAAW,EAAE;AACXX,YAAAA,GAAG,EAAE,cADM;AAEXC,YAAAA,KAAK,EAAE;AAFI,WAhDa;AAqD1BW,UAAAA,MAAM,EAAE;AACNZ,YAAAA,GAAG,EAAE,MADC;AAENC,YAAAA,KAAK,EAAE;AAFD,WArDkB;AA0D1BY,UAAAA,UAAU,EAAE;AACVb,YAAAA,GAAG,EAAE,cADK;AAEVC,YAAAA,KAAK,EAAE;AAFG,WA1Dc;AA+D1Ba,UAAAA,YAAY,EAAE;AACZd,YAAAA,GAAG,EAAE,cADO;AAEZC,YAAAA,KAAK,EAAE;AAFK;AA/DY,SAA5B;;AAqEA,iBAAShC,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,cAAIxT,MAAJ;;AACA,cAAI,OAAOw2D,qBAAqB,CAAC7hD,KAAD,CAA5B,KAAwC,QAA5C,EAAsD;AACpD3U,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAA9B;AACD,WAFD,MAEO,IAAIpL,KAAK,KAAK,CAAd,EAAiB;AACtBvJ,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6B+hD,GAAtC;AACD,WAFM,MAEA;AACL12D,YAAAA,MAAM,GAAGw2D,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BgiD,KAA7B,CAAmC11D,OAAnC,CAA2C,WAA3C,EAAwDsI,KAAxD,CAAT;AACD;;AAED,cAAIiK,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,qBAAO,UAAU10D,MAAjB;AACD,aAFD,MAEO;AACL,qBAAO,YAAYA,MAAnB;AACD;AACF;;AAED,iBAAOA,MAAP;AACD;;AAED,eAAO;AACL20D,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAzpaG;AA0paV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B;AAEjC,eAASu8D,UAAT,CAAqBC,MAArB,EAA6BxvD,KAA7B,EAAoC;AAClC;AACA,YAAIwvD,MAAM,CAACrC,GAAP,KAAehzD,SAAf,IAA4B6F,KAAK,KAAK,CAA1C,EAA6C;AAC3C,iBAAOwvD,MAAM,CAACrC,GAAd;AACD;;AAED,YAAIsC,KAAK,GAAGzvD,KAAK,GAAG,EAApB;AACA,YAAIkvD,MAAM,GAAGlvD,KAAK,GAAG,GAArB,CAPkC,CASlC;;AACA,YAAIyvD,KAAK,KAAK,CAAV,IAAeP,MAAM,KAAK,EAA9B,EAAkC;AAChC,iBAAOM,MAAM,CAACE,kBAAP,CAA0Bh4D,OAA1B,CAAkC,WAAlC,EAA+CsI,KAA/C,CAAP,CADgC,CAGlC;AACC,SAJD,MAIO,IAAKyvD,KAAK,IAAI,CAAT,IAAcA,KAAK,IAAI,CAAxB,KAA+BP,MAAM,GAAG,EAAT,IAAeA,MAAM,GAAG,EAAvD,CAAJ,EAAgE;AACrE,iBAAOM,MAAM,CAACG,gBAAP,CAAwBj4D,OAAxB,CAAgC,WAAhC,EAA6CsI,KAA7C,CAAP,CADqE,CAGvE;AACC,SAJM,MAIA;AACL,iBAAOwvD,MAAM,CAACI,cAAP,CAAsBl4D,OAAtB,CAA8B,WAA9B,EAA2CsI,KAA3C,CAAP;AACD;AACF;;AAED,eAAS6vD,oBAAT,CAA+BL,MAA/B,EAAuC;AACrC,eAAO,UAAUxvD,KAAV,EAAiBiK,OAAjB,EAA0B;AAC/B,cAAIA,OAAO,CAACggD,SAAZ,EAAuB;AACrB,gBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,kBAAIqE,MAAM,CAACM,MAAX,EAAmB;AACjB,uBAAOP,UAAU,CAACC,MAAM,CAACM,MAAR,EAAgB9vD,KAAhB,CAAjB;AACD,eAFD,MAEO;AACL,uBAAO,WAAWuvD,UAAU,CAACC,MAAM,CAACO,OAAR,EAAiB/vD,KAAjB,CAA5B;AACD;AACF,aAND,MAMO;AACL,kBAAIwvD,MAAM,CAACQ,IAAX,EAAiB;AACf,uBAAOT,UAAU,CAACC,MAAM,CAACQ,IAAR,EAAchwD,KAAd,CAAjB;AACD,eAFD,MAEO;AACL,uBAAOuvD,UAAU,CAACC,MAAM,CAACO,OAAR,EAAiB/vD,KAAjB,CAAV,GAAoC,QAA3C;AACD;AACF;AACF,WAdD,MAcO;AACL,mBAAOuvD,UAAU,CAACC,MAAM,CAACO,OAAR,EAAiB/vD,KAAjB,CAAjB;AACD;AACF,SAlBD;AAmBD;;AAED,eAAS+sD,0BAAT,GAAuC;AACrC,YAAIE,qBAAqB,GAAG;AAC1BC,UAAAA,gBAAgB,EAAE2C,oBAAoB,CAAC;AACrCE,YAAAA,OAAO,EAAE;AACP5C,cAAAA,GAAG,EAAE,gBADE;AAEPuC,cAAAA,kBAAkB,EAAE,0BAFb;AAGPC,cAAAA,gBAAgB,EAAE,yBAHX;AAIPC,cAAAA,cAAc,EAAE;AAJT,aAD4B;AAOrCE,YAAAA,MAAM,EAAE;AACN3C,cAAAA,GAAG,EAAE,2BADC;AAENuC,cAAAA,kBAAkB,EAAE,qCAFd;AAGNC,cAAAA,gBAAgB,EAAE,qCAHZ;AAINC,cAAAA,cAAc,EAAE;AAJV;AAP6B,WAAD,CADZ;AAgB1BvC,UAAAA,QAAQ,EAAEwC,oBAAoB,CAAC;AAC7BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,mBADb;AAEPC,cAAAA,gBAAgB,EAAE,mBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADoB;AAM7BI,YAAAA,IAAI,EAAE;AACJN,cAAAA,kBAAkB,EAAE,yBADhB;AAEJC,cAAAA,gBAAgB,EAAE,yBAFd;AAGJC,cAAAA,cAAc,EAAE;AAHZ,aANuB;AAW7BE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,yBADd;AAENC,cAAAA,gBAAgB,EAAE,yBAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AAXqB,WAAD,CAhBJ;AAkC1BtC,UAAAA,WAAW,EAAE,qBAAUpzB,CAAV,EAAajwB,OAAb,EAAsB;AACjC,gBAAIA,OAAO,CAACggD,SAAZ,EAAuB;AACrB,kBAAIhgD,OAAO,CAACkhD,UAAR,GAAqB,CAAzB,EAA4B;AAC1B,uBAAO,iBAAP;AACD,eAFD,MAEO;AACL,uBAAO,iBAAP;AACD;AACF;;AAED,mBAAO,WAAP;AACD,WA5CyB;AA8C1BoC,UAAAA,gBAAgB,EAAEsC,oBAAoB,CAAC;AACrCE,YAAAA,OAAO,EAAE;AACP5C,cAAAA,GAAG,EAAE,eADE;AAEPuC,cAAAA,kBAAkB,EAAE,yBAFb;AAGPC,cAAAA,gBAAgB,EAAE,wBAHX;AAIPC,cAAAA,cAAc,EAAE;AAJT,aAD4B;AAOrCE,YAAAA,MAAM,EAAE;AACN3C,cAAAA,GAAG,EAAE,0BADC;AAENuC,cAAAA,kBAAkB,EAAE,oCAFd;AAGNC,cAAAA,gBAAgB,EAAE,oCAHZ;AAINC,cAAAA,cAAc,EAAE;AAJV;AAP6B,WAAD,CA9CZ;AA6D1BpC,UAAAA,QAAQ,EAAEqC,oBAAoB,CAAC;AAC7BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,kBADb;AAEPC,cAAAA,gBAAgB,EAAE,kBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADoB;AAM7BI,YAAAA,IAAI,EAAE;AACJN,cAAAA,kBAAkB,EAAE,wBADhB;AAEJC,cAAAA,gBAAgB,EAAE,wBAFd;AAGJC,cAAAA,cAAc,EAAE;AAHZ,aANuB;AAW7BE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,wBADd;AAENC,cAAAA,gBAAgB,EAAE,wBAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AAXqB,WAAD,CA7DJ;AA+E1BnC,UAAAA,WAAW,EAAEoC,oBAAoB,CAAC;AAChCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,sBADb;AAEPC,cAAAA,gBAAgB,EAAE,uBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADuB;AAMhCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,oCADd;AAENC,cAAAA,gBAAgB,EAAE,qCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANwB,WAAD,CA/EP;AA4F1BlC,UAAAA,MAAM,EAAEmC,oBAAoB,CAAC;AAC3BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,eADb;AAEPC,cAAAA,gBAAgB,EAAE,gBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADkB,WAAD,CA5FF;AAoG1BjC,UAAAA,KAAK,EAAEkC,oBAAoB,CAAC;AAC1BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,gBADb;AAEPC,cAAAA,gBAAgB,EAAE,eAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADiB,WAAD,CApGD;AA4G1BhC,UAAAA,YAAY,EAAEiC,oBAAoB,CAAC;AACjCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,wBADb;AAEPC,cAAAA,gBAAgB,EAAE,yBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADwB;AAMjCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,sCADd;AAENC,cAAAA,gBAAgB,EAAE,uCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANyB,WAAD,CA5GR;AAyH1B/B,UAAAA,OAAO,EAAEgC,oBAAoB,CAAC;AAC5BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,iBADb;AAEPC,cAAAA,gBAAgB,EAAE,kBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADmB,WAAD,CAzHH;AAiI1B9B,UAAAA,WAAW,EAAE+B,oBAAoB,CAAC;AAChCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,sBADb;AAEPC,cAAAA,gBAAgB,EAAE,qBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADuB;AAMhCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,oCADd;AAENC,cAAAA,gBAAgB,EAAE,qCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANwB,WAAD,CAjIP;AA8I1B7B,UAAAA,MAAM,EAAE8B,oBAAoB,CAAC;AAC3BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,eADb;AAEPC,cAAAA,gBAAgB,EAAE,gBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT;AADkB,WAAD,CA9IF;AAsJ1B5B,UAAAA,UAAU,EAAE6B,oBAAoB,CAAC;AAC/BE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,uBADb;AAEPC,cAAAA,gBAAgB,EAAE,sBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADsB;AAM/BE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,iCADd;AAENC,cAAAA,gBAAgB,EAAE,kCAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANuB,WAAD,CAtJN;AAmK1B3B,UAAAA,YAAY,EAAE4B,oBAAoB,CAAC;AACjCE,YAAAA,OAAO,EAAE;AACPL,cAAAA,kBAAkB,EAAE,qBADb;AAEPC,cAAAA,gBAAgB,EAAE,sBAFX;AAGPC,cAAAA,cAAc,EAAE;AAHT,aADwB;AAMjCE,YAAAA,MAAM,EAAE;AACNJ,cAAAA,kBAAkB,EAAE,2BADd;AAENC,cAAAA,gBAAgB,EAAE,4BAFZ;AAGNC,cAAAA,cAAc,EAAE;AAHV;AANyB,WAAD;AAnKR,SAA5B;;AAiLA,iBAASxE,QAAT,CAAmBhgD,KAAnB,EAA0BpL,KAA1B,EAAiCiK,OAAjC,EAA0C;AACxCA,UAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,iBAAOgjD,qBAAqB,CAAC7hD,KAAD,CAArB,CAA6BpL,KAA7B,EAAoCiK,OAApC,CAAP;AACD;;AAED,eAAO;AACLmhD,UAAAA,QAAQ,EAAEA;AADL,SAAP;AAGD;;AAEDn4D,MAAAA,MAAM,CAACD,OAAP,GAAiB+5D,0BAAjB;AAGA;AAAO,KAz4aG;AA04aV;;AACA;AAAO,cAAS95D,MAAT,EAAiBD,OAAjB,EAA0B,CAEjC;;AAEA;AAAO,KA/4aG;AAg5aV;;AACA;AAAO,cAASC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;AAGA,UAAIqqC,eAAe,GAAG/xC,OAAO,CAAC+xC,eAAR,GAA0B,iBAAhD;AACA,UAAI+C,UAAU,GAAG90C,OAAO,CAAC80C,UAAR,GAAqB,OAAtC,CATsD,CASP;;AAC/C,UAAIvH,UAAU,GAAGvtC,OAAO,CAACutC,UAAR,GAAqB,YAAtC;AAEA;AAAO,KA75aG;AA85aV;;AACA;AAAO,cAASttC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAW,MAAAA,MAAM,CAACC,cAAP,CAAsBlB,OAAtB,EAA+B,YAA/B,EAA6C;AAC3C0H,QAAAA,KAAK,EAAE;AADoC,OAA7C;;AAIA,UAAIu1D,mBAAmB,GAAG38D,mBAAmB,CAAC,GAAD,CAA7C;;AAEA,UAAI48D,mBAAmB,GAAGzhD,sBAAsB,CAACwhD,mBAAD,CAAhD;;AAEA,UAAIh0B,KAAK,GAAG3oC,mBAAmB,CAAC,EAAD,CAA/B;;AAEA,eAASmb,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/F,UAAI0tC,KAAK,GAAG,SAASA,KAAT,CAAeyqB,IAAf,EAAqB3yB,cAArB,EAAqC;AAC/C,YAAI4yB,eAAe,GAAG5yB,cAAc,KAAK,MAAnB,GAA4B,QAA5B,GAAuC,OAA7D;AACA,YAAI6yB,EAAE,GAAG,8SAA8S7yB,cAA9S,GAA+T,eAA/T,GAAiV4yB,eAAjV,GAAmW,wEAAnW,IAA+a5yB,cAAc,KAAK,MAAnB,GAA4B,iBAA5B,GAAgD,aAA/d,IAAgf,gBAAhf,IAAogB4yB,eAAe,KAAK,QAApB,GAA+B,aAA/B,GAA+C,WAAnjB,IAAkkB,ioBAA3kB;AAEA,YAAID,IAAI,CAAC1yB,MAAL,KAAgB,IAApB,EAA0B,OAAO0yB,IAAI,CAAC1yB,MAAZ;AAE1B,eAAO;AACLkI,UAAAA,aAAa,EAAE,qBADV;AAELnsB,UAAAA,KAAK,EAAE62C,EAFF;AAGLC,UAAAA,SAAS,EAAEH;AAHN,SAAP;AAKD,OAXD;;AAaA,eAASvvB,WAAT,CAAqBzD,KAArB,EAA4B;AAC1B,YAAIF,KAAK,GAAG,IAAZ;;AAEA,YAAIiH,QAAQ,GAAG,KAAKj6B,OAApB;AAAA,YACIk6B,KAAK,GAAGD,QAAQ,CAACC,KADrB;AAAA,YAEIC,IAAI,GAAGF,QAAQ,CAACE,IAFpB;AAAA,YAGIzF,OAAO,GAAGuF,QAAQ,CAACvF,OAHvB;AAAA,YAIInB,cAAc,GAAG0G,QAAQ,CAAC1G,cAJ9B;AAAA,YAKIoF,aAAa,GAAGsB,QAAQ,CAACtB,aAL7B;AAMA,YAAIpM,MAAM,GAAG,KAAKtyB,KAAlB;AAAA,YACIu5B,MAAM,GAAGjH,MAAM,CAACiH,MADpB;AAAA,YAEIL,QAAQ,GAAG5G,MAAM,CAAC4G,QAFtB;AAIA,eAAOnB,KAAK,CAACvjB,WAAN,CAAkBsoB,IAAlB,CAAuB,UAAvB,EAAmC0E,KAAK,CAAC;AAC9CvB,UAAAA,KAAK,EAAEA,KADuC;AAE9CC,UAAAA,IAAI,EAAEA,IAFwC;AAG9C32B,UAAAA,EAAE,EAAE0vB,KAAK,CAAC3V,MAHoC;AAI9C+oC,UAAAA,QAAQ,EAAE5xB,OAJoC;AAK9ClB,UAAAA,MAAM,EAAEA;AALsC,SAAD,EAM5CD,cAN4C,CAAxC,EAMa;AAClBzjB,UAAAA,OAAO,EAAE;AACPgE,YAAAA,aAAa,EAAE,YAAY,KAAKkjB;AADzB;AADS,SANb,EAUJphB,IAVI,CAUC,UAAUmf,GAAV,EAAe;AACrB,cAAIlpB,IAAI,GAAGkpB,GAAG,CAAClpB,IAAJ,CAASA,IAAT,CAAc06C,UAAd,CAAyBrzB,KAAzB,CAA+BC,QAA1C;AACA,cAAIpQ,KAAK,GAAGlX,IAAI,CAACsvB,KAAL,CAAWtlC,GAAX,CAAe,UAAU2B,IAAV,EAAgB;AACzC,gBAAIgvD,MAAM,GAAGhvD,IAAI,CAACgvD,MAAL,IAAe7tB,aAA5B;AAEA,mBAAO;AACLn1B,cAAAA,EAAE,EAAEhM,IAAI,CAACivD,UADJ;AAEL9qB,cAAAA,GAAG,EAAEnkC,IAAI,CAACgM,EAFL;AAGLyvB,cAAAA,IAAI,EAAE;AACJsJ,gBAAAA,UAAU,EAAEiqB,MAAM,CAAC5tB,SADf;AAEJnD,gBAAAA,KAAK,EAAE+wB,MAAM,CAAC/wB,KAFV;AAGJkI,gBAAAA,QAAQ,EAAE6oB,MAAM,CAACx1C;AAHb,eAHD;AAQL+uC,cAAAA,UAAU,EAAEvoD,IAAI,CAACkvD,SARZ;AASLxG,cAAAA,SAAS,EAAE1oD,IAAI,CAACmvD,QATX;AAULpxB,cAAAA,IAAI,EAAE/9B,IAAI,CAAC+9B,IAVN;AAWLoI,cAAAA,QAAQ,EAAE,wBAAwBzD,KAAxB,GAAgC,GAAhC,GAAsCC,IAAtC,GAA6C,UAA7C,GAA0DjH,KAAK,CAAC3V,MAAhE,GAAyE,gBAAzE,GAA4F/lB,IAAI,CAACivD,UAXtG;AAYLvrB,cAAAA,SAAS,EAAE1jC,IAAI,CAAC0jC;AAZX,aAAP;AAcD,WAjBW,CAAZ;AAmBA,cAAIjG,EAAE,GAAG,KAAK,CAAd;;AAEA,cAAI1B,cAAc,KAAK,MAAvB,EAA+B;AAC7B0B,YAAAA,EAAE,GAAG,GAAG9+B,MAAH,CAAU,CAAC,GAAG8vD,mBAAmB,WAAvB,EAAiCljC,KAAjC,CAAV,EAAmD,CAAC,GAAGkjC,mBAAmB,WAAvB,EAAiC9yB,QAAjC,CAAnD,CAAL;AACD,WAFD,MAEO;AACL8B,YAAAA,EAAE,GAAG,GAAG9+B,MAAH,CAAU,CAAC,GAAG8vD,mBAAmB,WAAvB,EAAiC9yB,QAAjC,CAAV,EAAsD,CAAC,GAAG8yB,mBAAmB,WAAvB,EAAiCljC,KAAjC,CAAtD,CAAL;AACD;;AAED,cAAIgR,UAAU,GAAGloB,IAAI,CAACg0C,QAAL,CAAc+G,eAAd,KAAkC,KAAlC,IAA2C/6C,IAAI,CAACg0C,QAAL,CAAcC,WAAd,KAA8B,KAA1F;;AACA9sB,UAAAA,KAAK,CAAC34B,QAAN,CAAe;AACb84B,YAAAA,QAAQ,EAAE8B,EADG;AAEblB,YAAAA,UAAU,EAAEA,UAFC;AAGbP,YAAAA,MAAM,EAAE3nB,IAAI,CAACg0C,QAAL,CAAcgH,WAAd,IAA6Bh7C,IAAI,CAACg0C,QAAL,CAAciH;AAHtC,WAAf;;AAKA,iBAAO7xB,EAAP;AACD,SA9CM,CAAP;AA+CD;;AAEDlsC,MAAAA,OAAO,WAAP,GAAkB4tC,WAAlB;AAEA;AAAO,KA7/aG;AA8/aV;;AACA;AAAO,cAAS3tC,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAGAN,MAAAA,OAAO,CAACuB,UAAR,GAAqB,IAArB;;AAEA,UAAIy8D,KAAK,GAAG19D,mBAAmB,CAAC,GAAD,CAA/B;;AAEA,UAAI29D,MAAM,GAAGxiD,sBAAsB,CAACuiD,KAAD,CAAnC;;AAEA,eAASviD,sBAAT,CAAgCzW,GAAhC,EAAqC;AAAE,eAAOA,GAAG,IAAIA,GAAG,CAACzD,UAAX,GAAwByD,GAAxB,GAA8B;AAAE,qBAASA;AAAX,SAArC;AAAwD;;AAE/FhF,MAAAA,OAAO,WAAP,GAAkB,UAAUuN,GAAV,EAAe;AAC/B,YAAIJ,KAAK,CAACnK,OAAN,CAAcuK,GAAd,CAAJ,EAAwB;AACtB,eAAK,IAAI/M,CAAC,GAAG,CAAR,EAAW09D,IAAI,GAAG/wD,KAAK,CAACI,GAAG,CAACrI,MAAL,CAA5B,EAA0C1E,CAAC,GAAG+M,GAAG,CAACrI,MAAlD,EAA0D1E,CAAC,EAA3D,EAA+D;AAC7D09D,YAAAA,IAAI,CAAC19D,CAAD,CAAJ,GAAU+M,GAAG,CAAC/M,CAAD,CAAb;AACD;;AAED,iBAAO09D,IAAP;AACD,SAND,MAMO;AACL,iBAAO,CAAC,GAAGD,MAAM,WAAV,EAAoB1wD,GAApB,CAAP;AACD;AACF,OAVD;AAYA;;AAAO,KAxhbG;AAyhbV;;AACA;AAAO,cAAStN,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDL,MAAAA,MAAM,CAACD,OAAP,GAAiB;AAAE,mBAAWM,mBAAmB,CAAC,GAAD,CAAhC;AAAuCiB,QAAAA,UAAU,EAAE;AAAnD,OAAjB;AAEA;AAAO,KA9hbG;AA+hbV;;AACA;AAAO,cAAStB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtDA,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;;AACAA,MAAAA,mBAAmB,CAAC,GAAD,CAAnB;;AACAL,MAAAA,MAAM,CAACD,OAAP,GAAiBM,mBAAmB,CAAC,CAAD,CAAnB,CAAuB6M,KAAvB,CAA6ByW,IAA9C;AAGA;AAAO,KAvibG;AAwibV;;AACA;AAAO,cAAS3jB,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIsF,GAAG,GAAGtF,mBAAmB,CAAC,EAAD,CAA7B;;AACA,UAAI0F,OAAO,GAAG1F,mBAAmB,CAAC,CAAD,CAAjC;;AACA,UAAImhB,QAAQ,GAAGnhB,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAII,IAAI,GAAGJ,mBAAmB,CAAC,EAAD,CAA9B;;AACA,UAAIs5C,WAAW,GAAGt5C,mBAAmB,CAAC,EAAD,CAArC;;AACA,UAAIm1C,QAAQ,GAAGn1C,mBAAmB,CAAC,EAAD,CAAlC;;AACA,UAAI69D,cAAc,GAAG79D,mBAAmB,CAAC,GAAD,CAAxC;;AACA,UAAIu5C,SAAS,GAAGv5C,mBAAmB,CAAC,EAAD,CAAnC;;AAEA0F,MAAAA,OAAO,CAACA,OAAO,CAACQ,CAAR,GAAYR,OAAO,CAACI,CAAR,GAAY,CAAC9F,mBAAmB,CAAC,EAAD,CAAnB,CAAwB,UAAUyjB,IAAV,EAAgB;AAAE5W,QAAAA,KAAK,CAACyW,IAAN,CAAWG,IAAX;AAAmB,OAA7D,CAA1B,EAA0F,OAA1F,EAAmG;AACxG;AACAH,QAAAA,IAAI,EAAE,SAASA,IAAT,CAAcw6C;AAAU;AAAxB,UAAwE;AAC5E,cAAI9rD,CAAC,GAAGmP,QAAQ,CAAC28C,SAAD,CAAhB;AACA,cAAIh3D,CAAC,GAAG,OAAO,IAAP,IAAe,UAAf,GAA4B,IAA5B,GAAmC+F,KAA3C;AACA,cAAI4tC,IAAI,GAAGz1C,SAAS,CAACJ,MAArB;AACA,cAAIm5D,KAAK,GAAGtjB,IAAI,GAAG,CAAP,GAAWz1C,SAAS,CAAC,CAAD,CAApB,GAA0B6B,SAAtC;AACA,cAAIkpD,OAAO,GAAGgO,KAAK,KAAKl3D,SAAxB;AACA,cAAIuK,KAAK,GAAG,CAAZ;AACA,cAAIsoC,MAAM,GAAGH,SAAS,CAACvnC,CAAD,CAAtB;AACA,cAAIpN,MAAJ,EAAYzB,MAAZ,EAAoBw0B,IAApB,EAA0BtW,QAA1B;AACA,cAAI0uC,OAAJ,EAAagO,KAAK,GAAGz4D,GAAG,CAACy4D,KAAD,EAAQtjB,IAAI,GAAG,CAAP,GAAWz1C,SAAS,CAAC,CAAD,CAApB,GAA0B6B,SAAlC,EAA6C,CAA7C,CAAX,CAT+D,CAU5E;;AACA,cAAI6yC,MAAM,IAAI7yC,SAAV,IAAuB,EAAEC,CAAC,IAAI+F,KAAL,IAAcysC,WAAW,CAACI,MAAD,CAA3B,CAA3B,EAAiE;AAC/D,iBAAKr4B,QAAQ,GAAGq4B,MAAM,CAACt5C,IAAP,CAAY4R,CAAZ,CAAX,EAA2B7O,MAAM,GAAG,IAAI2D,CAAJ,EAAzC,EAAkD,CAAC,CAAC6wB,IAAI,GAAGtW,QAAQ,CAACtB,IAAT,EAAR,EAAyBhG,IAA5E,EAAkF3I,KAAK,EAAvF,EAA2F;AACzFysD,cAAAA,cAAc,CAAC16D,MAAD,EAASiO,KAAT,EAAgB2+C,OAAO,GAAG3vD,IAAI,CAACihB,QAAD,EAAW08C,KAAX,EAAkB,CAACpmC,IAAI,CAACvwB,KAAN,EAAagK,KAAb,CAAlB,EAAuC,IAAvC,CAAP,GAAsDumB,IAAI,CAACvwB,KAAlF,CAAd;AACD;AACF,WAJD,MAIO;AACLxC,YAAAA,MAAM,GAAGuwC,QAAQ,CAACnjC,CAAC,CAACpN,MAAH,CAAjB;;AACA,iBAAKzB,MAAM,GAAG,IAAI2D,CAAJ,CAAMlC,MAAN,CAAd,EAA6BA,MAAM,GAAGwM,KAAtC,EAA6CA,KAAK,EAAlD,EAAsD;AACpDysD,cAAAA,cAAc,CAAC16D,MAAD,EAASiO,KAAT,EAAgB2+C,OAAO,GAAGgO,KAAK,CAAC/rD,CAAC,CAACZ,KAAD,CAAF,EAAWA,KAAX,CAAR,GAA4BY,CAAC,CAACZ,KAAD,CAApD,CAAd;AACD;AACF;;AACDjO,UAAAA,MAAM,CAACyB,MAAP,GAAgBwM,KAAhB;AACA,iBAAOjO,MAAP;AACD;AAzBuG,OAAnG,CAAP;AA6BA;AAAO,KAnlbG;AAolbV;;AACA;AAAO,cAASxD,MAAT,EAAiBD,OAAjB,EAA0BM,mBAA1B,EAA+C;AAEtD;;AAEA,UAAIo8C,eAAe,GAAGp8C,mBAAmB,CAAC,CAAD,CAAzC;;AACA,UAAI2U,UAAU,GAAG3U,mBAAmB,CAAC,EAAD,CAApC;;AAEAL,MAAAA,MAAM,CAACD,OAAP,GAAiB,UAAU0B,MAAV,EAAkBgQ,KAAlB,EAAyBhK,KAAzB,EAAgC;AAC/C,YAAIgK,KAAK,IAAIhQ,MAAb,EAAqBg7C,eAAe,CAACrqC,CAAhB,CAAkB3Q,MAAlB,EAA0BgQ,KAA1B,EAAiCuD,UAAU,CAAC,CAAD,EAAIvN,KAAJ,CAA3C,EAArB,KACKhG,MAAM,CAACgQ,KAAD,CAAN,GAAgBhK,KAAhB;AACN,OAHD;AAMA;;AAAO;AACP;AAnmbU,KAjEM;AAAhB;AAqqbC,CA/qbD","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gitalk\"] = factory();\n\telse\n\t\troot[\"Gitalk\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 82);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(39)('wks');\nvar uid = __webpack_require__(25);\nvar Symbol = __webpack_require__(1).Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar bind = __webpack_require__(72);\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar ctx = __webpack_require__(13);\nvar hide = __webpack_require__(11);\nvar has = __webpack_require__(12);\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"version\", function() { return version; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOM\", function() { return DOM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Children\", function() { return Children; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return render$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createClass\", function() { return createClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createFactory\", function() { return createFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createElement\", function() { return createElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cloneElement\", function() { return cloneElement$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isValidElement\", function() { return isValidElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findDOMNode\", function() { return findDOMNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unmountComponentAtNode\", function() { return unmountComponentAtNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PureComponent\", function() { return PureComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unstable_renderSubtreeIntoContainer\", function() { return renderSubtreeIntoContainer; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_prop_types__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_preact__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"PropTypes\", function() { return __WEBPACK_IMPORTED_MODULE_0_prop_types___default.a; });\n\n\n\nvar version = '15.1.0'; // trick libraries to think we are react\n\nvar ELEMENTS = 'a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan'.split(' ');\n\nvar REACT_ELEMENT_TYPE = (typeof Symbol!=='undefined' && Symbol.for && Symbol.for('react.element')) || 0xeac7;\n\nvar COMPONENT_WRAPPER_KEY = typeof Symbol!=='undefined' ? Symbol.for('__preactCompatWrapper') : '__preactCompatWrapper';\n\n// don't autobind these methods since they already have guaranteed context.\nvar AUTOBIND_BLACKLIST = {\n\tconstructor: 1,\n\trender: 1,\n\tshouldComponentUpdate: 1,\n\tcomponentWillReceiveProps: 1,\n\tcomponentWillUpdate: 1,\n\tcomponentDidUpdate: 1,\n\tcomponentWillMount: 1,\n\tcomponentDidMount: 1,\n\tcomponentWillUnmount: 1,\n\tcomponentDidUnmount: 1\n};\n\n\nvar CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vert|word|writing|x)[A-Z]/;\n\n\nvar BYPASS_HOOK = {};\n\n/*global process*/\nvar DEV = typeof process==='undefined' || !process.env || process.env.NODE_ENV!=='production';\n\n// a component that renders nothing. Used to replace components for unmountComponentAtNode.\nfunction EmptyComponent() { return null; }\n\n\n\n// make react think we're react.\nvar VNode = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"]('a', null).constructor;\nVNode.prototype.$$typeof = REACT_ELEMENT_TYPE;\nVNode.prototype.preactCompatUpgraded = false;\nVNode.prototype.preactCompatNormalized = false;\n\nObject.defineProperty(VNode.prototype, 'type', {\n\tget: function() { return this.nodeName; },\n\tset: function(v) { this.nodeName = v; },\n\tconfigurable:true\n});\n\nObject.defineProperty(VNode.prototype, 'props', {\n\tget: function() { return this.attributes; },\n\tset: function(v) { this.attributes = v; },\n\tconfigurable:true\n});\n\n\n\nvar oldEventHook = __WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].event;\n__WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].event = function (e) {\n\tif (oldEventHook) { e = oldEventHook(e); }\n\te.persist = Object;\n\te.nativeEvent = e;\n\treturn e;\n};\n\n\nvar oldVnodeHook = __WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].vnode;\n__WEBPACK_IMPORTED_MODULE_1_preact__[\"options\"].vnode = function (vnode) {\n\tif (!vnode.preactCompatUpgraded) {\n\t\tvnode.preactCompatUpgraded = true;\n\n\t\tvar tag = vnode.nodeName,\n\t\t\tattrs = vnode.attributes = extend({}, vnode.attributes);\n\n\t\tif (typeof tag==='function') {\n\t\t\tif (tag[COMPONENT_WRAPPER_KEY]===true || (tag.prototype && 'isReactComponent' in tag.prototype)) {\n\t\t\t\tif (vnode.children && String(vnode.children)==='') { vnode.children = undefined; }\n\t\t\t\tif (vnode.children) { attrs.children = vnode.children; }\n\n\t\t\t\tif (!vnode.preactCompatNormalized) {\n\t\t\t\t\tnormalizeVNode(vnode);\n\t\t\t\t}\n\t\t\t\thandleComponentVNode(vnode);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (vnode.children && String(vnode.children)==='') { vnode.children = undefined; }\n\t\t\tif (vnode.children) { attrs.children = vnode.children; }\n\n\t\t\tif (attrs.defaultValue) {\n\t\t\t\tif (!attrs.value && attrs.value!==0) {\n\t\t\t\t\tattrs.value = attrs.defaultValue;\n\t\t\t\t}\n\t\t\t\tdelete attrs.defaultValue;\n\t\t\t}\n\n\t\t\thandleElementVNode(vnode, attrs);\n\t\t}\n\t}\n\n\tif (oldVnodeHook) { oldVnodeHook(vnode); }\n};\n\nfunction handleComponentVNode(vnode) {\n\tvar tag = vnode.nodeName,\n\t\ta = vnode.attributes;\n\n\tvnode.attributes = {};\n\tif (tag.defaultProps) { extend(vnode.attributes, tag.defaultProps); }\n\tif (a) { extend(vnode.attributes, a); }\n}\n\nfunction handleElementVNode(vnode, a) {\n\tvar shouldSanitize, attrs, i;\n\tif (a) {\n\t\tfor (i in a) { if ((shouldSanitize = CAMEL_PROPS.test(i))) { break; } }\n\t\tif (shouldSanitize) {\n\t\t\tattrs = vnode.attributes = {};\n\t\t\tfor (i in a) {\n\t\t\t\tif (a.hasOwnProperty(i)) {\n\t\t\t\t\tattrs[ CAMEL_PROPS.test(i) ? i.replace(/([A-Z0-9])/, '-$1').toLowerCase() : i ] = a[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// proxy render() since React returns a Component reference.\nfunction render$1(vnode, parent, callback) {\n\tvar prev = parent && parent._preactCompatRendered && parent._preactCompatRendered.base;\n\n\t// ignore impossible previous renders\n\tif (prev && prev.parentNode!==parent) { prev = null; }\n\n\t// default to first Element child\n\tif (!prev) { prev = parent.children[0]; }\n\n\t// remove unaffected siblings\n\tfor (var i=parent.childNodes.length; i--; ) {\n\t\tif (parent.childNodes[i]!==prev) {\n\t\t\tparent.removeChild(parent.childNodes[i]);\n\t\t}\n\t}\n\n\tvar out = __WEBPACK_IMPORTED_MODULE_1_preact__[\"render\"](vnode, parent, prev);\n\tif (parent) { parent._preactCompatRendered = out && (out._component || { base: out }); }\n\tif (typeof callback==='function') { callback(); }\n\treturn out && out._component || out;\n}\n\n\nvar ContextProvider = function () {};\n\nContextProvider.prototype.getChildContext = function () {\n\treturn this.props.context;\n};\nContextProvider.prototype.render = function (props) {\n\treturn props.children[0];\n};\n\nfunction renderSubtreeIntoContainer(parentComponent, vnode, container, callback) {\n\tvar wrap = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](ContextProvider, { context: parentComponent.context }, vnode);\n\tvar c = render$1(wrap, container);\n\tif (callback) { callback(c); }\n\treturn c._component || c.base;\n}\n\n\nfunction unmountComponentAtNode(container) {\n\tvar existing = container._preactCompatRendered && container._preactCompatRendered.base;\n\tif (existing && existing.parentNode===container) {\n\t\t__WEBPACK_IMPORTED_MODULE_1_preact__[\"render\"](__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](EmptyComponent), container, existing);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n\nvar ARR = [];\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nvar Children = {\n\tmap: function(children, fn, ctx) {\n\t\tif (children == null) { return null; }\n\t\tchildren = Children.toArray(children);\n\t\tif (ctx && ctx!==children) { fn = fn.bind(ctx); }\n\t\treturn children.map(fn);\n\t},\n\tforEach: function(children, fn, ctx) {\n\t\tif (children == null) { return null; }\n\t\tchildren = Children.toArray(children);\n\t\tif (ctx && ctx!==children) { fn = fn.bind(ctx); }\n\t\tchildren.forEach(fn);\n\t},\n\tcount: function(children) {\n\t\treturn children && children.length || 0;\n\t},\n\tonly: function(children) {\n\t\tchildren = Children.toArray(children);\n\t\tif (children.length!==1) { throw new Error('Children.only() expects only one child.'); }\n\t\treturn children[0];\n\t},\n\ttoArray: function(children) {\n\t\tif (children == null) { return []; }\n\t\treturn Array.isArray && Array.isArray(children) ? children : ARR.concat(children);\n\t}\n};\n\n\n/** Track current render() component for ref assignment */\nvar currentComponent;\n\n\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n\nvar DOM = {};\nfor (var i=ELEMENTS.length; i--; ) {\n\tDOM[ELEMENTS[i]] = createFactory(ELEMENTS[i]);\n}\n\nfunction upgradeToVNodes(arr, offset) {\n\tfor (var i=offset || 0; i<arr.length; i++) {\n\t\tvar obj = arr[i];\n\t\tif (Array.isArray(obj)) {\n\t\t\tupgradeToVNodes(obj);\n\t\t}\n\t\telse if (obj && typeof obj==='object' && !isValidElement(obj) && ((obj.props && obj.type) || (obj.attributes && obj.nodeName) || obj.children)) {\n\t\t\tarr[i] = createElement(obj.type || obj.nodeName, obj.props || obj.attributes, obj.children);\n\t\t}\n\t}\n}\n\nfunction isStatelessComponent(c) {\n\treturn typeof c==='function' && !(c.prototype && c.prototype.render);\n}\n\n\n// wraps stateless functional components in a PropTypes validator\nfunction wrapStatelessComponent(WrappedComponent) {\n\treturn createClass({\n\t\tdisplayName: WrappedComponent.displayName || WrappedComponent.name,\n\t\trender: function() {\n\t\t\treturn WrappedComponent(this.props, this.context);\n\t\t}\n\t});\n}\n\n\nfunction statelessComponentHook(Ctor) {\n\tvar Wrapped = Ctor[COMPONENT_WRAPPER_KEY];\n\tif (Wrapped) { return Wrapped===true ? Ctor : Wrapped; }\n\n\tWrapped = wrapStatelessComponent(Ctor);\n\n\tObject.defineProperty(Wrapped, COMPONENT_WRAPPER_KEY, { configurable:true, value:true });\n\tWrapped.displayName = Ctor.displayName;\n\tWrapped.propTypes = Ctor.propTypes;\n\tWrapped.defaultProps = Ctor.defaultProps;\n\n\tObject.defineProperty(Ctor, COMPONENT_WRAPPER_KEY, { configurable:true, value:Wrapped });\n\n\treturn Wrapped;\n}\n\n\nfunction createElement() {\n\tvar args = [], len = arguments.length;\n\twhile ( len-- ) args[ len ] = arguments[ len ];\n\n\tupgradeToVNodes(args, 2);\n\treturn normalizeVNode(__WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"].apply(void 0, args));\n}\n\n\nfunction normalizeVNode(vnode) {\n\tvnode.preactCompatNormalized = true;\n\n\tapplyClassName(vnode);\n\n\tif (isStatelessComponent(vnode.nodeName)) {\n\t\tvnode.nodeName = statelessComponentHook(vnode.nodeName);\n\t}\n\n\tvar ref = vnode.attributes.ref,\n\t\ttype = ref && typeof ref;\n\tif (currentComponent && (type==='string' || type==='number')) {\n\t\tvnode.attributes.ref = createStringRefProxy(ref, currentComponent);\n\t}\n\n\tapplyEventNormalization(vnode);\n\n\treturn vnode;\n}\n\n\nfunction cloneElement$1(element, props) {\n\tvar children = [], len = arguments.length - 2;\n\twhile ( len-- > 0 ) children[ len ] = arguments[ len + 2 ];\n\n\tif (!isValidElement(element)) { return element; }\n\tvar elementProps = element.attributes || element.props;\n\tvar node = __WEBPACK_IMPORTED_MODULE_1_preact__[\"h\"](\n\t\telement.nodeName || element.type,\n\t\telementProps,\n\t\telement.children || elementProps && elementProps.children\n\t);\n\t// Only provide the 3rd argument if needed.\n\t// Arguments 3+ overwrite element.children in preactCloneElement\n\tvar cloneArgs = [node, props];\n\tif (children && children.length) {\n\t\tcloneArgs.push(children);\n\t}\n\telse if (props && props.children) {\n\t\tcloneArgs.push(props.children);\n\t}\n\treturn normalizeVNode(__WEBPACK_IMPORTED_MODULE_1_preact__[\"cloneElement\"].apply(void 0, cloneArgs));\n}\n\n\nfunction isValidElement(element) {\n\treturn element && ((element instanceof VNode) || element.$$typeof===REACT_ELEMENT_TYPE);\n}\n\n\nfunction createStringRefProxy(name, component) {\n\treturn component._refProxies[name] || (component._refProxies[name] = function (resolved) {\n\t\tif (component && component.refs) {\n\t\t\tcomponent.refs[name] = resolved;\n\t\t\tif (resolved===null) {\n\t\t\t\tdelete component._refProxies[name];\n\t\t\t\tcomponent = null;\n\t\t\t}\n\t\t}\n\t});\n}\n\n\nfunction applyEventNormalization(ref) {\n\tvar nodeName = ref.nodeName;\n\tvar attributes = ref.attributes;\n\n\tif (!attributes || typeof nodeName!=='string') { return; }\n\tvar props = {};\n\tfor (var i in attributes) {\n\t\tprops[i.toLowerCase()] = i;\n\t}\n\tif (props.ondoubleclick) {\n\t\tattributes.ondblclick = attributes[props.ondoubleclick];\n\t\tdelete attributes[props.ondoubleclick];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (props.onchange && (nodeName==='textarea' || (nodeName.toLowerCase()==='input' && !/^fil|che|rad/i.test(attributes.type)))) {\n\t\tvar normalized = props.oninput || 'oninput';\n\t\tif (!attributes[normalized]) {\n\t\t\tattributes[normalized] = multihook([attributes[normalized], attributes[props.onchange]]);\n\t\t\tdelete attributes[props.onchange];\n\t\t}\n\t}\n}\n\n\nfunction applyClassName(ref) {\n\tvar attributes = ref.attributes;\n\n\tif (!attributes) { return; }\n\tvar cl = attributes.className || attributes.class;\n\tif (cl) { attributes.className = cl; }\n}\n\n\nfunction extend(base, props) {\n\tfor (var key in props) {\n\t\tif (props.hasOwnProperty(key)) {\n\t\t\tbase[key] = props[key];\n\t\t}\n\t}\n\treturn base;\n}\n\n\nfunction shallowDiffers(a, b) {\n\tfor (var i in a) { if (!(i in b)) { return true; } }\n\tfor (var i$1 in b) { if (a[i$1]!==b[i$1]) { return true; } }\n\treturn false;\n}\n\n\nfunction findDOMNode(component) {\n\treturn component && component.base || component;\n}\n\n\nfunction F(){}\n\nfunction createClass(obj) {\n\tfunction cl(props, context) {\n\t\tbindAll(this);\n\t\tComponent$1.call(this, props, context, BYPASS_HOOK);\n\t\tnewComponentHook.call(this, props, context);\n\t}\n\n\tobj = extend({ constructor: cl }, obj);\n\n\t// We need to apply mixins here so that getDefaultProps is correctly mixed\n\tif (obj.mixins) {\n\t\tapplyMixins(obj, collateMixins(obj.mixins));\n\t}\n\tif (obj.statics) {\n\t\textend(cl, obj.statics);\n\t}\n\tif (obj.propTypes) {\n\t\tcl.propTypes = obj.propTypes;\n\t}\n\tif (obj.defaultProps) {\n\t\tcl.defaultProps = obj.defaultProps;\n\t}\n\tif (obj.getDefaultProps) {\n\t\tcl.defaultProps = obj.getDefaultProps();\n\t}\n\n\tF.prototype = Component$1.prototype;\n\tcl.prototype = extend(new F(), obj);\n\n\tcl.displayName = obj.displayName || 'Component';\n\n\treturn cl;\n}\n\n\n// Flatten an Array of mixins to a map of method name to mixin implementations\nfunction collateMixins(mixins) {\n\tvar keyed = {};\n\tfor (var i=0; i<mixins.length; i++) {\n\t\tvar mixin = mixins[i];\n\t\tfor (var key in mixin) {\n\t\t\tif (mixin.hasOwnProperty(key) && typeof mixin[key]==='function') {\n\t\t\t\t(keyed[key] || (keyed[key]=[])).push(mixin[key]);\n\t\t\t}\n\t\t}\n\t}\n\treturn keyed;\n}\n\n\n// apply a mapping of Arrays of mixin methods to a component prototype\nfunction applyMixins(proto, mixins) {\n\tfor (var key in mixins) { if (mixins.hasOwnProperty(key)) {\n\t\tproto[key] = multihook(\n\t\t\tmixins[key].concat(proto[key] || ARR),\n\t\t\tkey==='getDefaultProps' || key==='getInitialState' || key==='getChildContext'\n\t\t);\n\t} }\n}\n\n\nfunction bindAll(ctx) {\n\tfor (var i in ctx) {\n\t\tvar v = ctx[i];\n\t\tif (typeof v==='function' && !v.__bound && !AUTOBIND_BLACKLIST.hasOwnProperty(i)) {\n\t\t\t(ctx[i] = v.bind(ctx)).__bound = true;\n\t\t}\n\t}\n}\n\n\nfunction callMethod(ctx, m, args) {\n\tif (typeof m==='string') {\n\t\tm = ctx.constructor.prototype[m];\n\t}\n\tif (typeof m==='function') {\n\t\treturn m.apply(ctx, args);\n\t}\n}\n\nfunction multihook(hooks, skipDuplicates) {\n\treturn function() {\n\t\tvar arguments$1 = arguments;\n\t\tvar this$1 = this;\n\n\t\tvar ret;\n\t\tfor (var i=0; i<hooks.length; i++) {\n\t\t\tvar r = callMethod(this$1, hooks[i], arguments$1);\n\n\t\t\tif (skipDuplicates && r!=null) {\n\t\t\t\tif (!ret) { ret = {}; }\n\t\t\t\tfor (var key in r) { if (r.hasOwnProperty(key)) {\n\t\t\t\t\tret[key] = r[key];\n\t\t\t\t} }\n\t\t\t}\n\t\t\telse if (typeof r!=='undefined') { ret = r; }\n\t\t}\n\t\treturn ret;\n\t};\n}\n\n\nfunction newComponentHook(props, context) {\n\tpropsHook.call(this, props, context);\n\tthis.componentWillReceiveProps = multihook([propsHook, this.componentWillReceiveProps || 'componentWillReceiveProps']);\n\tthis.render = multihook([propsHook, beforeRender, this.render || 'render', afterRender]);\n}\n\n\nfunction propsHook(props, context) {\n\tif (!props) { return; }\n\n\t// React annoyingly special-cases single children, and some react components are ridiculously strict about this.\n\tvar c = props.children;\n\tif (c && Array.isArray(c) && c.length===1) {\n\t\tprops.children = c[0];\n\n\t\t// but its totally still going to be an Array.\n\t\tif (props.children && typeof props.children==='object') {\n\t\t\tprops.children.length = 1;\n\t\t\tprops.children[0] = props.children;\n\t\t}\n\t}\n\n\t// add proptype checking\n\tif (DEV) {\n\t\tvar ctor = typeof this==='function' ? this : this.constructor,\n\t\t\tpropTypes = this.propTypes || ctor.propTypes;\n\t\tvar displayName = this.displayName || ctor.name;\n\n\t\tif (propTypes) {\n\t\t\t__WEBPACK_IMPORTED_MODULE_0_prop_types___default.a.checkPropTypes(propTypes, props, 'prop', displayName);\n\t\t}\n\t}\n}\n\n\nfunction beforeRender(props) {\n\tcurrentComponent = this;\n}\n\nfunction afterRender() {\n\tif (currentComponent===this) {\n\t\tcurrentComponent = null;\n\t}\n}\n\n\n\nfunction Component$1(props, context, opts) {\n\t__WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"].call(this, props, context);\n\tthis.state = this.getInitialState ? this.getInitialState() : {};\n\tthis.refs = {};\n\tthis._refProxies = {};\n\tif (opts!==BYPASS_HOOK) {\n\t\tnewComponentHook.call(this, props, context);\n\t}\n}\nextend(Component$1.prototype = new __WEBPACK_IMPORTED_MODULE_1_preact__[\"Component\"](), {\n\tconstructor: Component$1,\n\n\tisReactComponent: {},\n\n\treplaceState: function(state, callback) {\n\t\tvar this$1 = this;\n\n\t\tthis.setState(state, callback);\n\t\tfor (var i in this$1.state) {\n\t\t\tif (!(i in state)) {\n\t\t\t\tdelete this$1.state[i];\n\t\t\t}\n\t\t}\n\t},\n\n\tgetDOMNode: function() {\n\t\treturn this.base;\n\t},\n\n\tisMounted: function() {\n\t\treturn !!this.base;\n\t}\n});\n\n\n\nfunction PureComponent(props, context) {\n\tComponent$1.call(this, props, context);\n}\nF.prototype = Component$1.prototype;\nPureComponent.prototype = new F();\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function(props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n\n\n\nvar index = {\n\tversion: version,\n\tDOM: DOM,\n\tPropTypes: __WEBPACK_IMPORTED_MODULE_0_prop_types___default.a,\n\tChildren: Children,\n\trender: render$1,\n\tcreateClass: createClass,\n\tcreateFactory: createFactory,\n\tcreateElement: createElement,\n\tcloneElement: cloneElement$1,\n\tisValidElement: isValidElement,\n\tfindDOMNode: findDOMNode,\n\tunmountComponentAtNode: unmountComponentAtNode,\n\tComponent: Component$1,\n\tPureComponent: PureComponent,\n\tunstable_renderSubtreeIntoContainer: renderSubtreeIntoContainer\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (index);\n//# sourceMappingURL=preact-compat.es.js.map\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(9)))\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(10);\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar IE8_DOM_DEFINE = __webpack_require__(48);\nvar toPrimitive = __webpack_require__(32);\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(8) ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(14)(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(7);\nvar createDesc = __webpack_require__(19);\nmodule.exports = __webpack_require__(8) ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// optional / simple context binding\nvar aFunction = __webpack_require__(24);\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = {};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(54);\nvar defined = __webpack_require__(35);\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(35);\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isDate = __webpack_require__(202)\n\nvar MILLISECONDS_IN_HOUR = 3600000\nvar MILLISECONDS_IN_MINUTE = 60000\nvar DEFAULT_ADDITIONAL_DIGITS = 2\n\nvar parseTokenDateTimeDelimeter = /[T ]/\nvar parseTokenPlainTime = /:/\n\n// year tokens\nvar parseTokenYY = /^(\\d{2})$/\nvar parseTokensYYY = [\n  /^([+-]\\d{2})$/, // 0 additional digits\n  /^([+-]\\d{3})$/, // 1 additional digit\n  /^([+-]\\d{4})$/ // 2 additional digits\n]\n\nvar parseTokenYYYY = /^(\\d{4})/\nvar parseTokensYYYYY = [\n  /^([+-]\\d{4})/, // 0 additional digits\n  /^([+-]\\d{5})/, // 1 additional digit\n  /^([+-]\\d{6})/ // 2 additional digits\n]\n\n// date tokens\nvar parseTokenMM = /^-(\\d{2})$/\nvar parseTokenDDD = /^-?(\\d{3})$/\nvar parseTokenMMDD = /^-?(\\d{2})-?(\\d{2})$/\nvar parseTokenWww = /^-?W(\\d{2})$/\nvar parseTokenWwwD = /^-?W(\\d{2})-?(\\d{1})$/\n\n// time tokens\nvar parseTokenHH = /^(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMM = /^(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMMSS = /^(\\d{2}):?(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\n\n// timezone tokens\nvar parseTokenTimezone = /([Z+-].*)$/\nvar parseTokenTimezoneZ = /^(Z)$/\nvar parseTokenTimezoneHH = /^([+-])(\\d{2})$/\nvar parseTokenTimezoneHHMM = /^([+-])(\\d{2}):?(\\d{2})$/\n\n/**\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If an argument is a string, the function tries to parse it.\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If all above fails, the function passes the given argument to Date constructor.\n *\n * @param {Date|String|Number} argument - the value to convert\n * @param {Object} [options] - the object with options\n * @param {0 | 1 | 2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = parse('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Parse string '+02014101',\n * // if the additional number of digits in the extended year format is 1:\n * var result = parse('+02014101', {additionalDigits: 1})\n * //=> Fri Apr 11 2014 00:00:00\n */\nfunction parse (argument, dirtyOptions) {\n  if (isDate(argument)) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime())\n  } else if (typeof argument !== 'string') {\n    return new Date(argument)\n  }\n\n  var options = dirtyOptions || {}\n  var additionalDigits = options.additionalDigits\n  if (additionalDigits == null) {\n    additionalDigits = DEFAULT_ADDITIONAL_DIGITS\n  } else {\n    additionalDigits = Number(additionalDigits)\n  }\n\n  var dateStrings = splitDateString(argument)\n\n  var parseYearResult = parseYear(dateStrings.date, additionalDigits)\n  var year = parseYearResult.year\n  var restDateString = parseYearResult.restDateString\n\n  var date = parseDate(restDateString, year)\n\n  if (date) {\n    var timestamp = date.getTime()\n    var time = 0\n    var offset\n\n    if (dateStrings.time) {\n      time = parseTime(dateStrings.time)\n    }\n\n    if (dateStrings.timezone) {\n      offset = parseTimezone(dateStrings.timezone)\n    } else {\n      // get offset accurate to hour in timezones that change offset\n      offset = new Date(timestamp + time).getTimezoneOffset()\n      offset = new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE).getTimezoneOffset()\n    }\n\n    return new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE)\n  } else {\n    return new Date(argument)\n  }\n}\n\nfunction splitDateString (dateString) {\n  var dateStrings = {}\n  var array = dateString.split(parseTokenDateTimeDelimeter)\n  var timeString\n\n  if (parseTokenPlainTime.test(array[0])) {\n    dateStrings.date = null\n    timeString = array[0]\n  } else {\n    dateStrings.date = array[0]\n    timeString = array[1]\n  }\n\n  if (timeString) {\n    var token = parseTokenTimezone.exec(timeString)\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '')\n      dateStrings.timezone = token[1]\n    } else {\n      dateStrings.time = timeString\n    }\n  }\n\n  return dateStrings\n}\n\nfunction parseYear (dateString, additionalDigits) {\n  var parseTokenYYY = parseTokensYYY[additionalDigits]\n  var parseTokenYYYYY = parseTokensYYYYY[additionalDigits]\n\n  var token\n\n  // YYYY or ±YYYYY\n  token = parseTokenYYYY.exec(dateString) || parseTokenYYYYY.exec(dateString)\n  if (token) {\n    var yearString = token[1]\n    return {\n      year: parseInt(yearString, 10),\n      restDateString: dateString.slice(yearString.length)\n    }\n  }\n\n  // YY or ±YYY\n  token = parseTokenYY.exec(dateString) || parseTokenYYY.exec(dateString)\n  if (token) {\n    var centuryString = token[1]\n    return {\n      year: parseInt(centuryString, 10) * 100,\n      restDateString: dateString.slice(centuryString.length)\n    }\n  }\n\n  // Invalid ISO-formatted year\n  return {\n    year: null\n  }\n}\n\nfunction parseDate (dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) {\n    return null\n  }\n\n  var token\n  var date\n  var month\n  var week\n\n  // YYYY\n  if (dateString.length === 0) {\n    date = new Date(0)\n    date.setUTCFullYear(year)\n    return date\n  }\n\n  // YYYY-MM\n  token = parseTokenMM.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    date.setUTCFullYear(year, month)\n    return date\n  }\n\n  // YYYY-DDD or YYYYDDD\n  token = parseTokenDDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    var dayOfYear = parseInt(token[1], 10)\n    date.setUTCFullYear(year, 0, dayOfYear)\n    return date\n  }\n\n  // YYYY-MM-DD or YYYYMMDD\n  token = parseTokenMMDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    var day = parseInt(token[2], 10)\n    date.setUTCFullYear(year, month, day)\n    return date\n  }\n\n  // YYYY-Www or YYYYWww\n  token = parseTokenWww.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    return dayOfISOYear(year, week)\n  }\n\n  // YYYY-Www-D or YYYYWwwD\n  token = parseTokenWwwD.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    var dayOfWeek = parseInt(token[2], 10) - 1\n    return dayOfISOYear(year, week, dayOfWeek)\n  }\n\n  // Invalid ISO-formatted date\n  return null\n}\n\nfunction parseTime (timeString) {\n  var token\n  var hours\n  var minutes\n\n  // hh\n  token = parseTokenHH.exec(timeString)\n  if (token) {\n    hours = parseFloat(token[1].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR\n  }\n\n  // hh:mm or hhmm\n  token = parseTokenHHMM.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseFloat(token[2].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE\n  }\n\n  // hh:mm:ss or hhmmss\n  token = parseTokenHHMMSS.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseInt(token[2], 10)\n    var seconds = parseFloat(token[3].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE +\n      seconds * 1000\n  }\n\n  // Invalid ISO-formatted time\n  return null\n}\n\nfunction parseTimezone (timezoneString) {\n  var token\n  var absoluteOffset\n\n  // Z\n  token = parseTokenTimezoneZ.exec(timezoneString)\n  if (token) {\n    return 0\n  }\n\n  // ±hh\n  token = parseTokenTimezoneHH.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  // ±hh:mm or ±hhmm\n  token = parseTokenTimezoneHHMM.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60 + parseInt(token[3], 10)\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  return 0\n}\n\nfunction dayOfISOYear (isoYear, week, day) {\n  week = week || 0\n  day = day || 0\n  var date = new Date(0)\n  date.setUTCFullYear(isoYear, 0, 4)\n  var fourthOfJanuaryDay = date.getUTCDay() || 7\n  var diff = week * 7 + day + 1 - fourthOfJanuaryDay\n  date.setUTCDate(date.getUTCDate() + diff)\n  return date\n}\n\nmodule.exports = parse\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $at = __webpack_require__(101)(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n__webpack_require__(51)(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports = true;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(53);\nvar enumBugKeys = __webpack_require__(40);\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nvar toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nvar id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar def = __webpack_require__(7).f;\nvar has = __webpack_require__(12);\nvar TAG = __webpack_require__(2)('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(106);\nvar global = __webpack_require__(1);\nvar hide = __webpack_require__(11);\nvar Iterators = __webpack_require__(15);\nvar TO_STRING_TAG = __webpack_require__(2)('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nexports.f = {}.propertyIsEnumerable;\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _defineProperty = __webpack_require__(83);\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(10);\nvar document = __webpack_require__(1).document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(10);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(6);\nvar dPs = __webpack_require__(103);\nvar enumBugKeys = __webpack_require__(40);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(31)('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(55).appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.1.15 ToLength\nvar toInteger = __webpack_require__(34);\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar shared = __webpack_require__(39)('keys');\nvar uid = __webpack_require__(25);\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(0);\nvar global = __webpack_require__(1);\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: __webpack_require__(21) ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(23);\nvar TAG = __webpack_require__(2)('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(41);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar Iterators = __webpack_require__(15);\nmodule.exports = __webpack_require__(0).getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = __webpack_require__(24);\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports.f = __webpack_require__(2);\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar LIBRARY = __webpack_require__(21);\nvar wksExt = __webpack_require__(45);\nvar defineProperty = __webpack_require__(7).f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.omit = omit;\nexports.arraysEqual = arraysEqual;\nvar isElementAnSFC = exports.isElementAnSFC = function isElementAnSFC(element) {\n  var isNativeDOMElement = typeof element.type === 'string';\n\n  if (isNativeDOMElement) {\n    return false;\n  }\n\n  return !element.type.prototype.isReactComponent;\n};\nfunction omit(obj) {\n  var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  var result = {};\n  Object.keys(obj).forEach(function (key) {\n    if (attrs.indexOf(key) === -1) {\n      result[key] = obj[key];\n    }\n  });\n  return result;\n}\n\nfunction arraysEqual(a, b) {\n  var sameObject = a === b;\n  if (sameObject) {\n    return true;\n  }\n\n  var notBothArrays = !Array.isArray(a) || !Array.isArray(b);\n  var differentLengths = a.length !== b.length;\n\n  if (notBothArrays || differentLengths) {\n    return false;\n  }\n\n  return a.every(function (element, index) {\n    return element === b[index];\n  });\n}\n\nfunction memoizeString(fn) {\n  var cache = {};\n\n  return function (str) {\n    if (!cache[str]) {\n      cache[str] = fn(str);\n    }\n    return cache[str];\n  };\n}\n\nvar hyphenate = exports.hyphenate = memoizeString(function (str) {\n  return str.replace(/([A-Z])/g, '-$1').toLowerCase();\n});\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = !__webpack_require__(8) && !__webpack_require__(14)(function () {\n  return Object.defineProperty(__webpack_require__(31)('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = __webpack_require__(87);\n} else {\n  module.exports = __webpack_require__(88);\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(21);\nvar $export = __webpack_require__(4);\nvar redefine = __webpack_require__(52);\nvar hide = __webpack_require__(11);\nvar Iterators = __webpack_require__(15);\nvar $iterCreate = __webpack_require__(102);\nvar setToStringTag = __webpack_require__(26);\nvar getPrototypeOf = __webpack_require__(56);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(11);\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar has = __webpack_require__(12);\nvar toIObject = __webpack_require__(16);\nvar arrayIndexOf = __webpack_require__(104)(false);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(23);\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar document = __webpack_require__(1).document;\nmodule.exports = document && document.documentElement;\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(12);\nvar toObject = __webpack_require__(17);\nvar IE_PROTO = __webpack_require__(38)('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(6);\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// check on default Array iterator\nvar Iterators = __webpack_require__(15);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = __webpack_require__(6);\nvar aFunction = __webpack_require__(24);\nvar SPECIES = __webpack_require__(2)('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(13);\nvar invoke = __webpack_require__(112);\nvar html = __webpack_require__(55);\nvar cel = __webpack_require__(31);\nvar global = __webpack_require__(1);\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (__webpack_require__(23)(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar isObject = __webpack_require__(10);\nvar newPromiseCapability = __webpack_require__(43);\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(123), __esModule: true };\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// most Object methods by ES6 should accept primitives\nvar $export = __webpack_require__(4);\nvar core = __webpack_require__(0);\nvar fails = __webpack_require__(14);\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _typeof2 = __webpack_require__(67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _iterator = __webpack_require__(125);\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = __webpack_require__(127);\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(53);\nvar hiddenKeys = __webpack_require__(40).concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pIE = __webpack_require__(28);\nvar createDesc = __webpack_require__(19);\nvar toIObject = __webpack_require__(16);\nvar toPrimitive = __webpack_require__(32);\nvar has = __webpack_require__(12);\nvar IE8_DOM_DEFINE = __webpack_require__(48);\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(8) ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = __webpack_require__(136);\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = __webpack_require__(140);\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = __webpack_require__(67);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasClassInParent = exports.formatErrorMsg = exports.getMetaContent = exports.axiosGithub = exports.axiosJSON = exports.queryStringify = exports.queryParse = undefined;\n\nvar _keys = __webpack_require__(161);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _slicedToArray2 = __webpack_require__(164);\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _axios = __webpack_require__(171);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar queryParse = exports.queryParse = function queryParse() {\n  var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n  if (!search) return {};\n  var queryString = search[0] === '?' ? search.substring(1) : search;\n  var query = {};\n  queryString.split('&').forEach(function (queryStr) {\n    var _queryStr$split = queryStr.split('='),\n        _queryStr$split2 = (0, _slicedToArray3.default)(_queryStr$split, 2),\n        key = _queryStr$split2[0],\n        value = _queryStr$split2[1];\n    /* istanbul ignore else */\n\n\n    if (key) query[decodeURIComponent(key)] = decodeURIComponent(value);\n  });\n\n  return query;\n};\n\nvar queryStringify = exports.queryStringify = function queryStringify(query) {\n  var queryString = (0, _keys2.default)(query).map(function (key) {\n    return key + '=' + encodeURIComponent(query[key] || '');\n  }).join('&');\n  return queryString;\n};\n\nvar axiosJSON = exports.axiosJSON = _axios2.default.create({\n  headers: {\n    'Accept': 'application/json'\n  }\n});\n\nvar axiosGithub = exports.axiosGithub = _axios2.default.create({\n  baseURL: 'https://api.github.com',\n  headers: {\n    'Accept': 'application/json'\n  }\n});\n\nvar getMetaContent = exports.getMetaContent = function getMetaContent(name, content) {\n  /* istanbul ignore next */\n  content || (content = 'content');\n  /* istanbul ignore next */\n  var el = window.document.querySelector('meta[name=\\'' + name + '\\']');\n  /* istanbul ignore next */\n  return el && el.getAttribute(content);\n};\n\nvar formatErrorMsg = exports.formatErrorMsg = function formatErrorMsg(err) {\n  var msg = 'Error: ';\n  if (err.response && err.response.data && err.response.data.message) {\n    msg += err.response.data.message + '. ';\n    err.response.data.errors && (msg += err.response.data.errors.map(function (e) {\n      return e.message;\n    }).join(', '));\n  } else {\n    msg += err.message;\n  }\n  return msg;\n};\n\nvar hasClassInParent = exports.hasClassInParent = function hasClassInParent(element) {\n  for (var _len = arguments.length, className = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    className[_key - 1] = arguments[_key];\n  }\n\n  /* istanbul ignore next */\n  var yes = false;\n  /* istanbul ignore next */\n  if (typeof element.className === 'undefined') return false;\n  /* istanbul ignore next */\n  var classes = element.className.split(' ');\n  /* istanbul ignore next */\n  className.forEach(function (c, i) {\n    /* istanbul ignore next */\n    yes = yes || classes.indexOf(c) >= 0;\n  });\n  /* istanbul ignore next */\n  if (yes) return yes;\n  /* istanbul ignore next */\n  return element.parentNode && hasClassInParent(element.parentNode, className);\n};\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nvar utils = __webpack_require__(3);\nvar normalizeHeaderName = __webpack_require__(177);\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = __webpack_require__(76);\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = __webpack_require__(76);\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar settle = __webpack_require__(178);\nvar buildURL = __webpack_require__(73);\nvar buildFullPath = __webpack_require__(180);\nvar parseHeaders = __webpack_require__(183);\nvar isURLSameOrigin = __webpack_require__(184);\nvar createError = __webpack_require__(77);\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = __webpack_require__(185);\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar enhanceError = __webpack_require__(179);\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var src = _ref.src,\n      className = _ref.className,\n      alt = _ref.alt,\n      onError = _ref.onError;\n  return _react2.default.createElement(\n    'div',\n    { className: 'gt-avatar ' + className },\n    _react2.default.createElement('img', { src: src, alt: '@' + alt, onError: onError })\n  );\n};\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      name = _ref.name;\n  return _react2.default.createElement(\n    \"span\",\n    { className: \"gt-ico \" + className },\n    _react2.default.createElement(\"span\", { className: \"gt-svg\", dangerouslySetInnerHTML: {\n        __html: __webpack_require__(191)(\"./\" + name + \".svg\")\n      } }),\n    text && _react2.default.createElement(\n      \"span\",\n      { className: \"gt-ico-text\" },\n      text\n    )\n  );\n};\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(5);\n\n__webpack_require__(94);\n\nvar _gitalk = __webpack_require__(98);\n\nvar _gitalk2 = _interopRequireDefault(_gitalk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Gitalk = function () {\n  function Gitalk() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck3.default)(this, Gitalk);\n\n    this.options = options;\n  }\n\n  (0, _createClass3.default)(Gitalk, [{\n    key: 'render',\n    value: function render(container, callback) {\n      var node = null;\n      container = container || this.options.container;\n\n      if (!container) throw new Error('Container is required: ' + container);\n\n      if (!(container instanceof HTMLElement)) {\n        node = window.document.getElementById(container);\n        if (!node) throw new Error('Container not found, window.document.getElementById: ' + container);\n      } else {\n        node = container;\n      }\n\n      if (!callback) {\n        callback = function callback() {};\n      }\n\n      return (0, _reactDom.render)(_react2.default.createElement(_gitalk2.default, { options: this.options }), node, callback);\n    }\n  }]);\n  return Gitalk;\n}();\n\nmodule.exports = Gitalk;\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(84), __esModule: true };\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(85);\nvar $Object = __webpack_require__(0).Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(4);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !__webpack_require__(8), 'Object', { defineProperty: __webpack_require__(7).f });\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = __webpack_require__(49);\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = __webpack_require__(89)(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = __webpack_require__(92)();\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/** @license React v16.12.0\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nObject.defineProperty(exports,\"__esModule\",{value:!0});\nvar b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?Symbol.for(\"react.suspense_list\"):\n60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.fundamental\"):60117,w=b?Symbol.for(\"react.responder\"):60118,x=b?Symbol.for(\"react.scope\"):60119;function y(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function z(a){return y(a)===m}\nexports.typeOf=y;exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===v||a.$$typeof===w||a.$$typeof===x)};exports.isAsyncMode=function(a){return z(a)||y(a)===l};exports.isConcurrentMode=z;exports.isContextConsumer=function(a){return y(a)===k};exports.isContextProvider=function(a){return y(a)===h};\nexports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return y(a)===n};exports.isFragment=function(a){return y(a)===e};exports.isLazy=function(a){return y(a)===t};exports.isMemo=function(a){return y(a)===r};exports.isPortal=function(a){return y(a)===d};exports.isProfiler=function(a){return y(a)===g};exports.isStrictMode=function(a){return y(a)===f};exports.isSuspense=function(a){return y(a)===p};\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/** @license React v16.12.0\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE);\n}\n\n/**\n * Forked from fbjs/warning:\n * https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/__forks__/warning.js\n *\n * Only change is we use console.warn instead of console.error,\n * and do nothing when 'console' is not supported.\n * This really simplifies the code.\n * ---\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\nvar lowPriorityWarningWithoutStack = function () {};\n\n{\n  var printWarning = function (format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n\n    if (typeof console !== 'undefined') {\n      console.warn(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  lowPriorityWarningWithoutStack = function (condition, format) {\n    if (format === undefined) {\n      throw new Error('`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(void 0, [format].concat(args));\n    }\n  };\n}\n\nvar lowPriorityWarningWithoutStack$1 = lowPriorityWarningWithoutStack;\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true;\n      lowPriorityWarningWithoutStack$1(false, 'The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.typeOf = typeOf;\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isValidElementType = isValidElementType;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\n  })();\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactIs = __webpack_require__(49);\nvar assign = __webpack_require__(90);\n\nvar ReactPropTypesSecret = __webpack_require__(33);\nvar checkPropTypes = __webpack_require__(91);\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = __webpack_require__(33);\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nvar ReactPropTypesSecret = __webpack_require__(33);\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function() {\n    'use strict';\n    function VNode() {}\n    function h(nodeName, attributes) {\n        var lastSimple, child, simple, i, children = EMPTY_CHILDREN;\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && null != attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) && void 0 !== child.pop) for (i = child.length; i--; ) stack.push(child[i]); else {\n            if (child === !0 || child === !1) child = null;\n            if (simple = 'function' != typeof nodeName) if (null == child) child = ''; else if ('number' == typeof child) child = String(child); else if ('string' != typeof child) simple = !1;\n            if (simple && lastSimple) children[children.length - 1] += child; else if (children === EMPTY_CHILDREN) children = [ child ]; else children.push(child);\n            lastSimple = simple;\n        }\n        var p = new VNode();\n        p.nodeName = nodeName;\n        p.children = children;\n        p.attributes = null == attributes ? void 0 : attributes;\n        p.key = null == attributes ? void 0 : attributes.key;\n        if (void 0 !== options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function enqueueRender(component) {\n        if (!component.__d && (component.__d = !0) && 1 == items.push(component)) (options.debounceRendering || setTimeout)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p.__d) renderComponent(p);\n    }\n    function isSameNodeType(node, vnode, hydrating) {\n        if ('string' == typeof vnode || 'number' == typeof vnode) return void 0 !== node.splitText;\n        if ('string' == typeof vnode.nodeName) return !node._componentConstructor && isNamedNode(node, vnode.nodeName); else return hydrating || node._componentConstructor === vnode.nodeName;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.__n === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n    }\n    function getNodeProps(vnode) {\n        var props = extend({}, vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (void 0 !== defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function createNode(nodeName, isSvg) {\n        var node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n        node.__n = nodeName;\n        return node;\n    }\n    function removeNode(node) {\n        if (node.parentNode) node.parentNode.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('key' === name) ; else if ('ref' === name) {\n            if (old) old(null);\n            if (value) value(node);\n        } else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || 'string' == typeof value || 'string' == typeof old) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if ('string' != typeof old) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && IS_NON_DIMENSIONAL.test(i) === !1 ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) {\n            if (value) node.innerHTML = value.__html || '';\n        } else if ('o' == name[0] && 'n' == name[1]) {\n            var useCapture = name !== (name = name.replace(/Capture$/, ''));\n            name = name.toLowerCase().substring(2);\n            if (value) {\n                if (!old) node.addEventListener(name, eventProxy, useCapture);\n            } else node.removeEventListener(name, eventProxy, useCapture);\n            (node.__l || (node.__l = {}))[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name !== (name = name.replace(/^xlink\\:?/, ''));\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase()); else node.removeAttribute(name); else if ('function' != typeof value) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this.__l[e.type](options.event && options.event(e) || e);\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = null != parent && void 0 !== parent.ownerSVGElement;\n            hydrating = null != dom && !('__preactattr_' in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll, componentRoot);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll, componentRoot) {\n        var out = dom, prevSvgMode = isSvgMode;\n        if (null == vnode) vnode = '';\n        if ('string' == typeof vnode) {\n            if (dom && void 0 !== dom.splitText && dom.parentNode && (!dom._component || componentRoot)) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                out = document.createTextNode(vnode);\n                if (dom) {\n                    if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n                    recollectNodeTree(dom, !0);\n                }\n            }\n            out.__preactattr_ = !0;\n            return out;\n        }\n        if ('function' == typeof vnode.nodeName) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        isSvgMode = 'svg' === vnode.nodeName ? !0 : 'foreignObject' === vnode.nodeName ? !1 : isSvgMode;\n        if (!dom || !isNamedNode(dom, String(vnode.nodeName))) {\n            out = createNode(String(vnode.nodeName), isSvgMode);\n            if (dom) {\n                while (dom.firstChild) out.appendChild(dom.firstChild);\n                if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n                recollectNodeTree(dom, !0);\n            }\n        }\n        var fc = out.firstChild, props = out.__preactattr_ || (out.__preactattr_ = {}), vchildren = vnode.children;\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && null != fc && void 0 !== fc.splitText && null == fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || null != fc) innerDiffNode(out, vchildren, context, mountAll, hydrating || null != props.dangerouslySetInnerHTML);\n        diffAttributes(out, vnode.attributes, props);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren ? vchildren.length : 0;\n        if (0 !== len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child.__preactattr_, key = vlen && props ? _child._component ? _child._component.__k : props.key : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (props || (void 0 !== _child.splitText ? isHydrating ? _child.nodeValue.trim() : !0 : isHydrating)) children[childrenLen++] = _child;\n        }\n        if (0 !== vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && void 0 !== keyed[key]) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) if (void 0 !== children[j] && isSameNodeType(c = children[j], vchild, isHydrating)) {\n                child = c;\n                children[j] = void 0;\n                if (j === childrenLen - 1) childrenLen--;\n                if (j === min) min++;\n                break;\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) if (child === originalChildren[i + 1]) removeNode(originalChildren[i]); else dom.insertBefore(child, originalChildren[i] || null);\n        }\n        if (keyedLen) for (var i in keyed) if (void 0 !== keyed[i]) recollectNodeTree(keyed[i], !1);\n        while (min <= childrenLen) if (void 0 !== (child = children[childrenLen--])) recollectNodeTree(child, !1);\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component); else {\n            if (null != node.__preactattr_ && node.__preactattr_.ref) node.__preactattr_.ref(null);\n            if (unmountOnly === !1 || null == node.__preactattr_) removeNode(node);\n            removeChildren(node);\n        }\n    }\n    function removeChildren(node) {\n        node = node.lastChild;\n        while (node) {\n            var next = node.previousSibling;\n            recollectNodeTree(node, !0);\n            node = next;\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        var name;\n        for (name in old) if ((!attrs || null == attrs[name]) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);\n        for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name;\n        (components[name] || (components[name] = [])).push(component);\n    }\n    function createComponent(Ctor, props, context) {\n        var inst, list = components[Ctor.name];\n        if (Ctor.prototype && Ctor.prototype.render) {\n            inst = new Ctor(props, context);\n            Component.call(inst, props, context);\n        } else {\n            inst = new Component(props, context);\n            inst.constructor = Ctor;\n            inst.render = doRender;\n        }\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.__b = list[i].__b;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function doRender(props, state, context) {\n        return this.constructor(props, context);\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component.__x) {\n            component.__x = !0;\n            if (component.__r = props.ref) delete props.ref;\n            if (component.__k = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.__c) component.__c = component.context;\n                component.context = context;\n            }\n            if (!component.__p) component.__p = component.props;\n            component.props = props;\n            component.__x = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__r) component.__r(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component.__x) {\n            var rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.__p || props, previousState = component.__s || state, previousContext = component.__c || context, isUpdate = component.base, nextBase = component.__b, initialBase = isUpdate || nextBase, initialChildComponent = component._component, skip = !1;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.__p = component.__s = component.__c = component.__b = null;\n            component.__d = !1;\n            if (!skip) {\n                rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(extend({}, context), component.getChildContext());\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if ('function' == typeof childComponent) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__k) setComponentProps(inst, childProps, 1, context, !1); else {\n                        toUnmount = inst;\n                        component._component = inst = createComponent(childComponent, childProps, context);\n                        inst.__b = inst.__b || nextBase;\n                        inst.__u = component;\n                        setComponentProps(inst, childProps, 0, context, !1);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase, !1);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t.__u) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                flushMounts();\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            if (null != component.__h) while (component.__h.length) component.__h.pop().call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c.__u)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (originalComponent && !isDirectOwner) {\n                unmountComponent(originalComponent);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.__b) {\n                c.__b = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom, !1);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component.__x = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner); else if (base) {\n            if (base.__preactattr_ && base.__preactattr_.ref) base.__preactattr_.ref(null);\n            component.__b = base;\n            removeNode(base);\n            collectComponent(component);\n            removeChildren(base);\n        }\n        if (component.__r) component.__r(null);\n    }\n    function Component(props, context) {\n        this.__d = !0;\n        this.context = context;\n        this.props = props;\n        this.state = this.state || {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent, !1);\n    }\n    var options = {};\n    var stack = [];\n    var EMPTY_CHILDREN = [];\n    var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n    var items = [];\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.__s) this.__s = extend({}, s);\n            extend(s, 'function' == typeof state ? state(s, this.props) : state);\n            if (callback) (this.__h = this.__h || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function(callback) {\n            if (callback) (this.__h = this.__h || []).push(callback);\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    var preact = {\n        h: h,\n        createElement: h,\n        cloneElement: cloneElement,\n        Component: Component,\n        render: render,\n        rerender: rerender,\n        options: options\n    };\n    if (true) module.exports = preact; else self.preact = preact;\n}();\n//# sourceMappingURL=preact.js.map\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n\nmodule.exports = __webpack_require__(95).polyfill();\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process, global) {var require;/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.1\n */\n\n(function (global, factory) {\n\t true ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = __webpack_require__(97);\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && \"function\" === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === GET_THEN_ERROR) {\n      reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      resolve(promise, value);\n    } else if (failed) {\n      reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator$1(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate(input);\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nEnumerator$1.prototype._enumerate = function (input) {\n  for (var i = 0; this._state === PENDING && i < input.length; i++) {\n    this._eachEntry(input[i], i);\n  }\n};\n\nEnumerator$1.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$1 = c.resolve;\n\n  if (resolve$$1 === resolve$1) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise$2) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$1) {\n        return resolve$$1(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$1(entry), i);\n  }\n};\n\nEnumerator$1.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator$1.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all$1(entries) {\n  return new Enumerator$1(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race$1(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise$2(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise$2.all = all$1;\nPromise$2.race = race$1;\nPromise$2.resolve = resolve$1;\nPromise$2.reject = reject$1;\nPromise$2._setScheduler = setScheduler;\nPromise$2._setAsap = setAsap;\nPromise$2._asap = asap;\n\nPromise$2.prototype = {\n  constructor: Promise$2,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\n/*global self*/\nfunction polyfill$1() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise$2;\n}\n\n// Strange compat..\nPromise$2.polyfill = polyfill$1;\nPromise$2.Promise = Promise$2;\n\nreturn Promise$2;\n\n})));\n\n//# sourceMappingURL=es6-promise.map\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9), __webpack_require__(96)))\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _promise = __webpack_require__(99);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(119);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(64);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(66);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(70);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactFlipMove = __webpack_require__(143);\n\nvar _reactFlipMove2 = _interopRequireDefault(_reactFlipMove);\n\nvar _autosize = __webpack_require__(150);\n\nvar _autosize2 = _interopRequireDefault(_autosize);\n\nvar _i18n = __webpack_require__(151);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\n__webpack_require__(160);\n\nvar _util = __webpack_require__(71);\n\nvar _avatar = __webpack_require__(80);\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nvar _button = __webpack_require__(188);\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _action = __webpack_require__(189);\n\nvar _action2 = _interopRequireDefault(_action);\n\nvar _comment = __webpack_require__(190);\n\nvar _comment2 = _interopRequireDefault(_comment);\n\nvar _svg = __webpack_require__(81);\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _const = __webpack_require__(218);\n\nvar _getComments = __webpack_require__(219);\n\nvar _getComments2 = _interopRequireDefault(_getComments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GitalkComponent = function (_Component) {\n  (0, _inherits3.default)(GitalkComponent, _Component);\n\n  function GitalkComponent(props) {\n    (0, _classCallCheck3.default)(this, GitalkComponent);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (GitalkComponent.__proto__ || (0, _getPrototypeOf2.default)(GitalkComponent)).call(this, props));\n\n    _this.state = {\n      user: null,\n      issue: null,\n      comments: [],\n      localComments: [],\n      comment: '',\n      page: 1,\n      pagerDirection: 'last',\n      cursor: null,\n      previewHtml: '',\n\n      isNoInit: false,\n      isIniting: true,\n      isCreating: false,\n      isLoading: false,\n      isLoadMore: false,\n      isLoadOver: false,\n      isIssueCreating: false,\n      isPopupVisible: false,\n      isInputFocused: false,\n      isPreview: false,\n\n      isOccurError: false,\n      errorMsg: ''\n    };\n\n    _this.getCommentsV3 = function (issue) {\n      var _this$options = _this.options,\n          clientID = _this$options.clientID,\n          clientSecret = _this$options.clientSecret,\n          perPage = _this$options.perPage;\n      var page = _this.state.page;\n\n\n      return _this.getIssue().then(function (issue) {\n        if (!issue) return;\n\n        return _util.axiosGithub.get(issue.comments_url, {\n          headers: {\n            Accept: 'application/vnd.github.v3.full+json'\n          },\n          auth: {\n            username: clientID,\n            password: clientSecret\n          },\n          params: {\n            per_page: perPage,\n            page: page\n          }\n        }).then(function (res) {\n          var _this$state = _this.state,\n              comments = _this$state.comments,\n              issue = _this$state.issue;\n\n          var isLoadOver = false;\n          var cs = comments.concat(res.data);\n          if (cs.length >= issue.comments || res.data.length < perPage) {\n            isLoadOver = true;\n          }\n          _this.setState({\n            comments: cs,\n            isLoadOver: isLoadOver,\n            page: page + 1\n          });\n          return cs;\n        });\n      });\n    };\n\n    _this.getRef = function (e) {\n      _this.publicBtnEL = e;\n    };\n\n    _this.reply = function (replyComment) {\n      return function () {\n        var comment = _this.state.comment;\n\n        var replyCommentBody = replyComment.body;\n        var replyCommentArray = replyCommentBody.split('\\n');\n        replyCommentArray.unshift('@' + replyComment.user.login);\n        replyCommentArray = replyCommentArray.map(function (t) {\n          return '> ' + t;\n        });\n        replyCommentArray.push('');\n        replyCommentArray.push('');\n        if (comment) replyCommentArray.unshift('');\n        _this.setState({ comment: comment + replyCommentArray.join('\\n') }, function () {\n          _autosize2.default.update(_this.commentEL);\n          _this.commentEL.focus();\n        });\n      };\n    };\n\n    _this.handlePopup = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var isVisible = !_this.state.isPopupVisible;\n      var hideHandle = function hideHandle(e1) {\n        if ((0, _util.hasClassInParent)(e1.target, 'gt-user', 'gt-popup')) {\n          return;\n        }\n        window.document.removeEventListener('click', hideHandle);\n        _this.setState({ isPopupVisible: false });\n      };\n      _this.setState({ isPopupVisible: isVisible });\n      if (isVisible) {\n        window.document.addEventListener('click', hideHandle);\n      } else {\n        window.document.removeEventListener('click', hideHandle);\n      }\n    };\n\n    _this.handleLogin = function () {\n      var comment = _this.state.comment;\n\n      window.localStorage.setItem(_const.GT_COMMENT, encodeURIComponent(comment));\n      window.location.href = _this.loginLink;\n    };\n\n    _this.handleIssueCreate = function () {\n      _this.setState({ isIssueCreating: true });\n      _this.createIssue().then(function (issue) {\n        _this.setState({\n          isIssueCreating: false,\n          isOccurError: false\n        });\n        return _this.getComments(issue);\n      }).catch(function (err) {\n        _this.setState({\n          isIssueCreating: false,\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      }).then(function (res) {\n        if (res) {\n          _this.setState({\n            isNoInit: false\n          });\n        }\n      });\n    };\n\n    _this.handleCommentCreate = function (e) {\n      if (!_this.state.comment.length) {\n        e && e.preventDefault();\n        _this.commentEL.focus();\n        return;\n      }\n      _this.setState(function (state) {\n        if (state.isCreating) return;\n\n        _this.createComment().then(function () {\n          return _this.setState({\n            isCreating: false,\n            isOccurError: false\n          });\n        }).catch(function (err) {\n          _this.setState({\n            isCreating: false,\n            isOccurError: true,\n            errorMsg: (0, _util.formatErrorMsg)(err)\n          });\n        });\n        return { isCreating: true };\n      });\n    };\n\n    _this.handleCommentPreview = function (e) {\n      _this.setState({\n        isPreview: !_this.state.isPreview\n      });\n\n      _util.axiosGithub.post('/markdown', {\n        text: _this.state.comment\n      }, {\n        headers: _this.accessToken && { Authorization: 'token ' + _this.accessToken }\n      }).then(function (res) {\n        _this.setState({\n          previewHtml: res.data\n        });\n      }).catch(function (err) {\n        _this.setState({\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    };\n\n    _this.handleCommentLoad = function () {\n      var _this$state2 = _this.state,\n          issue = _this$state2.issue,\n          isLoadMore = _this$state2.isLoadMore;\n\n      if (isLoadMore) return;\n      _this.setState({ isLoadMore: true });\n      _this.getComments(issue).then(function () {\n        return _this.setState({ isLoadMore: false });\n      });\n    };\n\n    _this.handleCommentChange = function (e) {\n      return _this.setState({ comment: e.target.value });\n    };\n\n    _this.handleLogout = function () {\n      _this.logout();\n      window.location.reload();\n    };\n\n    _this.handleCommentFocus = function (e) {\n      var distractionFreeMode = _this.options.distractionFreeMode;\n\n      if (!distractionFreeMode) return e.preventDefault();\n      _this.setState({ isInputFocused: true });\n    };\n\n    _this.handleCommentBlur = function (e) {\n      var distractionFreeMode = _this.options.distractionFreeMode;\n\n      if (!distractionFreeMode) return e.preventDefault();\n      _this.setState({ isInputFocused: false });\n    };\n\n    _this.handleSort = function (direction) {\n      return function (e) {\n        _this.setState({ pagerDirection: direction });\n      };\n    };\n\n    _this.handleCommentKeyDown = function (e) {\n      var enableHotKey = _this.options.enableHotKey;\n\n      if (enableHotKey && (e.metaKey || e.ctrlKey) && e.keyCode === 13) {\n        _this.publicBtnEL && _this.publicBtnEL.focus();\n        _this.handleCommentCreate();\n      }\n    };\n\n    _this.options = (0, _assign2.default)({}, {\n      id: window.location.href,\n      number: -1,\n      labels: ['Gitalk'],\n      title: window.document.title,\n      body: '', // window.location.href + header.meta[description]\n      language: window.navigator.language || window.navigator.userLanguage,\n      perPage: 10,\n      pagerDirection: 'last', // last or first\n      createIssueManually: false,\n      distractionFreeMode: false,\n      proxy: 'https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token',\n      flipMoveOptions: {\n        staggerDelayBy: 150,\n        appearAnimation: 'accordionVertical',\n        enterAnimation: 'accordionVertical',\n        leaveAnimation: 'accordionVertical'\n      },\n      enableHotKey: true,\n\n      url: window.location.href,\n\n      defaultAuthor: {\n        avatarUrl: '//avatars1.githubusercontent.com/u/29697133?s=50',\n        login: 'null',\n        url: ''\n      },\n\n      updateCountCallback: null\n    }, props.options);\n\n    _this.state.pagerDirection = _this.options.pagerDirection;\n    var storedComment = window.localStorage.getItem(_const.GT_COMMENT);\n    if (storedComment) {\n      _this.state.comment = decodeURIComponent(storedComment);\n      window.localStorage.removeItem(_const.GT_COMMENT);\n    }\n\n    var query = (0, _util.queryParse)();\n    if (query.code) {\n      var code = query.code;\n      delete query.code;\n      var replacedUrl = '' + window.location.origin + window.location.pathname + (0, _util.queryStringify)(query) + window.location.hash;\n      history.replaceState(null, null, replacedUrl);\n      _this.options = (0, _assign2.default)({}, _this.options, {\n        url: replacedUrl,\n        id: replacedUrl\n      }, props.options);\n\n      _util.axiosJSON.post(_this.options.proxy, {\n        code: code,\n        client_id: _this.options.clientID,\n        client_secret: _this.options.clientSecret\n      }).then(function (res) {\n        if (res.data && res.data.access_token) {\n          _this.accessToken = res.data.access_token;\n\n          _this.getInit().then(function () {\n            return _this.setState({ isIniting: false });\n          }).catch(function (err) {\n            console.log('err:', err);\n            _this.setState({\n              isIniting: false,\n              isOccurError: true,\n              errorMsg: (0, _util.formatErrorMsg)(err)\n            });\n          });\n        } else {\n          // no access_token\n          console.log('res.data err:', res.data);\n          _this.setState({\n            isOccurError: true,\n            errorMsg: (0, _util.formatErrorMsg)(new Error('no access token'))\n          });\n        }\n      }).catch(function (err) {\n        console.log('err: ', err);\n        _this.setState({\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    } else {\n      _this.getInit().then(function () {\n        return _this.setState({ isIniting: false });\n      }).catch(function (err) {\n        console.log('err:', err);\n        _this.setState({\n          isIniting: false,\n          isOccurError: true,\n          errorMsg: (0, _util.formatErrorMsg)(err)\n        });\n      });\n    }\n\n    _this.i18n = (0, _i18n2.default)(_this.options.language);\n    return _this;\n  }\n\n  (0, _createClass3.default)(GitalkComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.commentEL && (0, _autosize2.default)(this.commentEL);\n    }\n  }, {\n    key: 'getInit',\n    value: function getInit() {\n      var _this2 = this;\n\n      return this.getUserInfo().then(function () {\n        return _this2.getIssue();\n      }).then(function (issue) {\n        return _this2.getComments(issue);\n      });\n    }\n  }, {\n    key: 'getUserInfo',\n    value: function getUserInfo() {\n      var _this3 = this;\n\n      return _util.axiosGithub.get('/user', {\n        headers: {\n          Authorization: 'token ' + this.accessToken\n        }\n      }).then(function (res) {\n        _this3.setState({ user: res.data });\n      }).catch(function (err) {\n        _this3.logout();\n      });\n    }\n  }, {\n    key: 'getIssueById',\n    value: function getIssueById() {\n      var _this4 = this;\n\n      var _options = this.options,\n          owner = _options.owner,\n          repo = _options.repo,\n          number = _options.number,\n          clientID = _options.clientID,\n          clientSecret = _options.clientSecret;\n\n      var getUrl = '/repos/' + owner + '/' + repo + '/issues/' + number;\n\n      return new _promise2.default(function (resolve, reject) {\n        _util.axiosGithub.get(getUrl, {\n          auth: {\n            username: clientID,\n            password: clientSecret\n          },\n          params: {\n            t: Date.now()\n          }\n        }).then(function (res) {\n          var issue = null;\n\n          if (res && res.data && res.data.number === number) {\n            issue = res.data;\n\n            _this4.setState({ issue: issue, isNoInit: false });\n          }\n          resolve(issue);\n        }).catch(function (err) {\n          // When the status code is 404, promise will be resolved with null\n          if (err.response.status === 404) resolve(null);\n          reject(err);\n        });\n      });\n    }\n  }, {\n    key: 'getIssueByLabels',\n    value: function getIssueByLabels() {\n      var _this5 = this;\n\n      var _options2 = this.options,\n          owner = _options2.owner,\n          repo = _options2.repo,\n          id = _options2.id,\n          labels = _options2.labels,\n          clientID = _options2.clientID,\n          clientSecret = _options2.clientSecret;\n\n\n      return _util.axiosGithub.get('/repos/' + owner + '/' + repo + '/issues', {\n        auth: {\n          username: clientID,\n          password: clientSecret\n        },\n        params: {\n          labels: labels.concat(id).join(','),\n          t: Date.now()\n        }\n      }).then(function (res) {\n        var createIssueManually = _this5.options.createIssueManually;\n\n        var isNoInit = false;\n        var issue = null;\n        if (!(res && res.data && res.data.length)) {\n          if (!createIssueManually && _this5.isAdmin) {\n            return _this5.createIssue();\n          }\n\n          isNoInit = true;\n        } else {\n          issue = res.data[0];\n        }\n        _this5.setState({ issue: issue, isNoInit: isNoInit });\n        return issue;\n      });\n    }\n  }, {\n    key: 'getIssue',\n    value: function getIssue() {\n      var _this6 = this;\n\n      var number = this.options.number;\n      var issue = this.state.issue;\n\n      if (issue) {\n        this.setState({ isNoInit: false });\n        return _promise2.default.resolve(issue);\n      }\n\n      if (typeof number === 'number' && number > 0) {\n        return this.getIssueById().then(function (resIssue) {\n          if (!resIssue) return _this6.getIssueByLabels();\n          return resIssue;\n        });\n      }\n      return this.getIssueByLabels();\n    }\n  }, {\n    key: 'createIssue',\n    value: function createIssue() {\n      var _this7 = this;\n\n      var _options3 = this.options,\n          owner = _options3.owner,\n          repo = _options3.repo,\n          title = _options3.title,\n          body = _options3.body,\n          id = _options3.id,\n          labels = _options3.labels,\n          url = _options3.url;\n\n      return _util.axiosGithub.post('/repos/' + owner + '/' + repo + '/issues', {\n        title: title,\n        labels: labels.concat(id),\n        body: body || url + ' \\n\\n ' + ((0, _util.getMetaContent)('description') || (0, _util.getMetaContent)('description', 'og:description') || '')\n      }, {\n        headers: {\n          Authorization: 'token ' + this.accessToken\n        }\n      }).then(function (res) {\n        _this7.setState({ issue: res.data });\n        return res.data;\n      });\n    }\n    // Get comments via v3 api, don't require login, but sorting feature is disable\n\n  }, {\n    key: 'getComments',\n    value: function getComments(issue) {\n      if (!issue) return;\n      // Get comments via v4 graphql api, login required and sorting feature is available\n      if (this.accessToken) return _getComments2.default.call(this, issue);\n      return this.getCommentsV3(issue);\n    }\n  }, {\n    key: 'createComment',\n    value: function createComment() {\n      var _this8 = this;\n\n      var _state = this.state,\n          comment = _state.comment,\n          localComments = _state.localComments,\n          comments = _state.comments;\n\n\n      return this.getIssue().then(function (issue) {\n        return _util.axiosGithub.post(issue.comments_url, {\n          body: comment\n        }, {\n          headers: {\n            Accept: 'application/vnd.github.v3.full+json',\n            Authorization: 'token ' + _this8.accessToken\n          }\n        });\n      }).then(function (res) {\n        _this8.setState({\n          comment: '',\n          comments: comments.concat(res.data),\n          localComments: localComments.concat(res.data)\n        });\n      });\n    }\n  }, {\n    key: 'logout',\n    value: function logout() {\n      this.setState({ user: null });\n      window.localStorage.removeItem(_const.GT_ACCESS_TOKEN);\n    }\n  }, {\n    key: 'like',\n    value: function like(comment) {\n      var _this9 = this;\n\n      var _options4 = this.options,\n          owner = _options4.owner,\n          repo = _options4.repo;\n      var user = this.state.user;\n      var comments = this.state.comments;\n\n\n      _util.axiosGithub.post('/repos/' + owner + '/' + repo + '/issues/comments/' + comment.id + '/reactions', {\n        content: 'heart'\n      }, {\n        headers: {\n          Authorization: 'token ' + this.accessToken,\n          Accept: 'application/vnd.github.squirrel-girl-preview'\n        }\n      }).then(function (res) {\n        comments = comments.map(function (c) {\n          if (c.id === comment.id) {\n            if (c.reactions) {\n              if (!~c.reactions.nodes.findIndex(function (n) {\n                return n.user.login === user.login;\n              })) {\n                c.reactions.totalCount += 1;\n              }\n            } else {\n              c.reactions = { nodes: [] };\n              c.reactions.totalCount = 1;\n            }\n\n            c.reactions.nodes.push(res.data);\n            c.reactions.viewerHasReacted = true;\n          }\n          return c;\n        });\n\n        _this9.setState({\n          comments: comments\n        });\n      });\n    }\n  }, {\n    key: 'unLike',\n    value: function unLike(comment) {\n      var _this10 = this;\n\n      var user = this.state.user;\n      var comments = this.state.comments;\n\n      // const {  user } = this.state\n      // let id\n      // comment.reactions.nodes.forEach(r => {\n      //   if (r.user.login = user.login) id = r.databaseId\n      // })\n      // return axiosGithub.delete(`/reactions/${id}`, {\n      //   headers: {\n      //     Authorization: `token ${this.accessToken}`,\n      //     Accept: 'application/vnd.github.squirrel-girl-preview'\n      //   }\n      // }).then(res => {\n      //   console.log('res:', res)\n      // })\n\n      var getQL = function getQL(id) {\n        return {\n          operationName: 'RemoveReaction',\n          query: '\\n          mutation RemoveReaction{\\n            removeReaction (input:{\\n              subjectId: \"' + id + '\",\\n              content: HEART\\n            }) {\\n              reaction {\\n                content\\n              }\\n            }\\n          }\\n        '\n        };\n      };\n\n      _util.axiosGithub.post('/graphql', getQL(comment.gId), {\n        headers: {\n          Authorization: 'bearer ' + this.accessToken\n        }\n      }).then(function (res) {\n        if (res.data) {\n          comments = comments.map(function (c) {\n            if (c.id === comment.id) {\n              var index = c.reactions.nodes.findIndex(function (n) {\n                return n.user.login === user.login;\n              });\n              if (~index) {\n                c.reactions.totalCount -= 1;\n                c.reactions.nodes.splice(index, 1);\n              }\n              c.reactions.viewerHasReacted = false;\n            }\n            return c;\n          });\n\n          _this10.setState({\n            comments: comments\n          });\n        }\n      });\n    }\n  }, {\n    key: 'initing',\n    value: function initing() {\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-initing' },\n        _react2.default.createElement('i', { className: 'gt-loader' }),\n        _react2.default.createElement(\n          'p',\n          { className: 'gt-initing-text' },\n          this.i18n.t('init')\n        )\n      );\n    }\n  }, {\n    key: 'noInit',\n    value: function noInit() {\n      var _state2 = this.state,\n          user = _state2.user,\n          isIssueCreating = _state2.isIssueCreating;\n      var _options5 = this.options,\n          owner = _options5.owner,\n          repo = _options5.repo,\n          admin = _options5.admin;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-no-init', key: 'no-init' },\n        _react2.default.createElement('p', { dangerouslySetInnerHTML: {\n            __html: this.i18n.t('no-found-related', {\n              link: '<a href=\"https://github.com/' + owner + '/' + repo + '/issues\">Issues</a>'\n            })\n          } }),\n        _react2.default.createElement(\n          'p',\n          null,\n          this.i18n.t('please-contact', { user: [].concat(admin).map(function (u) {\n              return '@' + u;\n            }).join(' ') })\n        ),\n        this.isAdmin ? _react2.default.createElement(\n          'p',\n          null,\n          _react2.default.createElement(_button2.default, { onClick: this.handleIssueCreate, isLoading: isIssueCreating, text: this.i18n.t('init-issue') })\n        ) : null,\n        !user && _react2.default.createElement(_button2.default, { className: 'gt-btn-login', onClick: this.handleLogin, text: this.i18n.t('login-with-github') })\n      );\n    }\n  }, {\n    key: 'handleImageErrored',\n    value: function handleImageErrored(obj) {\n      obj.target.src = \"https://cdn.jsdelivr.net/npm/gitalk@1/src/assets/icon/github.svg\";\n    }\n  }, {\n    key: 'header',\n    value: function header() {\n      var _this11 = this;\n\n      var _state3 = this.state,\n          user = _state3.user,\n          comment = _state3.comment,\n          isCreating = _state3.isCreating,\n          previewHtml = _state3.previewHtml,\n          isPreview = _state3.isPreview;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-header', key: 'header' },\n        user ? _react2.default.createElement(_avatar2.default, { className: 'gt-header-avatar', src: user.avatar_url, alt: user.login, onError: this.handleImageErrored.bind(this) }) : _react2.default.createElement(\n          'a',\n          { className: 'gt-avatar-github', onMouseDown: this.handleLogin },\n          _react2.default.createElement(_svg2.default, { className: 'gt-ico-github', name: 'github' })\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-header-comment' },\n          _react2.default.createElement('textarea', {\n            ref: function ref(t) {\n              _this11.commentEL = t;\n            },\n            className: 'gt-header-textarea ' + (isPreview ? 'hide' : ''),\n            value: comment,\n            onChange: this.handleCommentChange,\n            onFocus: this.handleCommentFocus,\n            onBlur: this.handleCommentBlur,\n            onKeyDown: this.handleCommentKeyDown,\n            placeholder: this.i18n.t('leave-a-comment')\n          }),\n          _react2.default.createElement('div', {\n            className: 'gt-header-preview markdown-body ' + (isPreview ? '' : 'hide'),\n            dangerouslySetInnerHTML: { __html: previewHtml }\n          }),\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-header-controls' },\n            _react2.default.createElement(\n              'a',\n              { className: 'gt-header-controls-tip', href: 'https://guides.github.com/features/mastering-markdown/', target: '_blank' },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-tip', name: 'tip', text: this.i18n.t('support-markdown') })\n            ),\n            user && _react2.default.createElement(_button2.default, {\n              getRef: this.getRef,\n              className: 'gt-btn-public',\n              onMouseDown: this.handleCommentCreate,\n              text: this.i18n.t('comment'),\n              isLoading: isCreating\n            }),\n            _react2.default.createElement(_button2.default, {\n              className: 'gt-btn-preview',\n              onMouseDown: this.handleCommentPreview,\n              text: isPreview ? this.i18n.t('edit') : this.i18n.t('preview')\n              // isLoading={isPreviewing}\n            }),\n            !user && _react2.default.createElement(_button2.default, { className: 'gt-btn-login', onMouseDown: this.handleLogin, text: this.i18n.t('login-with-github') })\n          )\n        )\n      );\n    }\n  }, {\n    key: 'comments',\n    value: function comments() {\n      var _this12 = this;\n\n      var _state4 = this.state,\n          user = _state4.user,\n          comments = _state4.comments,\n          isLoadOver = _state4.isLoadOver,\n          isLoadMore = _state4.isLoadMore,\n          pagerDirection = _state4.pagerDirection;\n      var _options6 = this.options,\n          language = _options6.language,\n          flipMoveOptions = _options6.flipMoveOptions,\n          admin = _options6.admin;\n\n      var totalComments = comments.concat([]);\n      if (pagerDirection === 'last' && this.accessToken) {\n        totalComments.reverse();\n      }\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-comments', key: 'comments' },\n        _react2.default.createElement(\n          _reactFlipMove2.default,\n          flipMoveOptions,\n          totalComments.map(function (c) {\n            return _react2.default.createElement(_comment2.default, {\n              comment: c,\n              key: c.id,\n              user: user,\n              language: language,\n              commentedText: _this12.i18n.t('commented'),\n              admin: admin,\n              replyCallback: _this12.reply(c),\n              likeCallback: c.reactions && c.reactions.viewerHasReacted ? _this12.unLike.bind(_this12, c) : _this12.like.bind(_this12, c)\n            });\n          })\n        ),\n        !totalComments.length && _react2.default.createElement(\n          'p',\n          { className: 'gt-comments-null' },\n          this.i18n.t('first-comment-person')\n        ),\n        !isLoadOver && totalComments.length ? _react2.default.createElement(\n          'div',\n          { className: 'gt-comments-controls' },\n          _react2.default.createElement(_button2.default, { className: 'gt-btn-loadmore', onClick: this.handleCommentLoad, isLoading: isLoadMore, text: this.i18n.t('load-more') })\n        ) : null\n      );\n    }\n  }, {\n    key: 'meta',\n    value: function meta() {\n      var _state5 = this.state,\n          user = _state5.user,\n          issue = _state5.issue,\n          isPopupVisible = _state5.isPopupVisible,\n          pagerDirection = _state5.pagerDirection,\n          localComments = _state5.localComments;\n\n      var cnt = (issue && issue.comments) + localComments.length;\n      var isDesc = pagerDirection === 'last';\n      var updateCountCallback = this.options.updateCountCallback;\n\n      // window.GITALK_COMMENTS_COUNT = cnt\n\n      if (updateCountCallback && {}.toString.call(updateCountCallback) === '[object Function]') {\n        try {\n          updateCountCallback(cnt);\n        } catch (err) {\n          console.log('An error occurred executing the updateCountCallback:', err);\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-meta', key: 'meta' },\n        _react2.default.createElement('span', { className: 'gt-counts', dangerouslySetInnerHTML: {\n            __html: this.i18n.t('counts', {\n              counts: '<a class=\"gt-link gt-link-counts\" href=\"' + (issue && issue.html_url) + '\" target=\"_blank\">' + cnt + '</a>',\n              smart_count: cnt\n            })\n          } }),\n        isPopupVisible && _react2.default.createElement(\n          'div',\n          { className: 'gt-popup' },\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-sortasc' + (!isDesc ? ' is--active' : ''), onClick: this.handleSort('first'), text: this.i18n.t('sort-asc') }) : null,\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-sortdesc' + (isDesc ? ' is--active' : ''), onClick: this.handleSort('last'), text: this.i18n.t('sort-desc') }) : null,\n          user ? _react2.default.createElement(_action2.default, { className: 'gt-action-logout', onClick: this.handleLogout, text: this.i18n.t('logout') }) : _react2.default.createElement(\n            'a',\n            { className: 'gt-action gt-action-login', onMouseDown: this.handleLogin },\n            this.i18n.t('login-with-github')\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-copyright' },\n            _react2.default.createElement(\n              'a',\n              { className: 'gt-link gt-link-project', href: 'https://github.com/gitalk/gitalk', target: '_blank' },\n              'Gitalk'\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-version' },\n              _const.GT_VERSION\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-user' },\n          user ? _react2.default.createElement(\n            'div',\n            { className: isPopupVisible ? 'gt-user-inner is--poping' : 'gt-user-inner', onClick: this.handlePopup },\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-user-name' },\n              user.login\n            ),\n            _react2.default.createElement(_svg2.default, { className: 'gt-ico-arrdown', name: 'arrow_down' })\n          ) : _react2.default.createElement(\n            'div',\n            { className: isPopupVisible ? 'gt-user-inner is--poping' : 'gt-user-inner', onClick: this.handlePopup },\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-user-name' },\n              this.i18n.t('anonymous')\n            ),\n            _react2.default.createElement(_svg2.default, { className: 'gt-ico-arrdown', name: 'arrow_down' })\n          )\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state6 = this.state,\n          isIniting = _state6.isIniting,\n          isNoInit = _state6.isNoInit,\n          isOccurError = _state6.isOccurError,\n          errorMsg = _state6.errorMsg,\n          isInputFocused = _state6.isInputFocused;\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'gt-container' + (isInputFocused ? ' gt-input-focused' : '') },\n        isIniting && this.initing(),\n        !isIniting && (isNoInit ? [] : [this.meta()]),\n        isOccurError && _react2.default.createElement(\n          'div',\n          { className: 'gt-error' },\n          errorMsg\n        ),\n        !isIniting && (isNoInit ? [this.noInit()] : [this.header(), this.comments()])\n      );\n    }\n  }, {\n    key: 'accessToken',\n    get: function get() {\n      return this._accessToke || window.localStorage.getItem(_const.GT_ACCESS_TOKEN);\n    },\n    set: function set(token) {\n      window.localStorage.setItem(_const.GT_ACCESS_TOKEN, token);\n      this._accessToken = token;\n    }\n  }, {\n    key: 'loginLink',\n    get: function get() {\n      var githubOauthUrl = 'https://github.com/login/oauth/authorize';\n      var clientID = this.options.clientID;\n\n      var query = {\n        client_id: clientID,\n        redirect_uri: window.location.href,\n        scope: 'public_repo'\n      };\n      return githubOauthUrl + '?' + (0, _util.queryStringify)(query);\n    }\n  }, {\n    key: 'isAdmin',\n    get: function get() {\n      var admin = this.options.admin;\n      var user = this.state.user;\n\n\n      return user && ~[].concat(admin).map(function (a) {\n        return a.toLowerCase();\n      }).indexOf(user.login.toLowerCase());\n    }\n  }]);\n  return GitalkComponent;\n}(_react.Component);\n\nmodule.exports = GitalkComponent;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(100), __esModule: true };\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(50);\n__webpack_require__(20);\n__webpack_require__(27);\n__webpack_require__(109);\n__webpack_require__(117);\n__webpack_require__(118);\nmodule.exports = __webpack_require__(0).Promise;\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(34);\nvar defined = __webpack_require__(35);\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar create = __webpack_require__(36);\nvar descriptor = __webpack_require__(19);\nvar setToStringTag = __webpack_require__(26);\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(11)(IteratorPrototype, __webpack_require__(2)('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dP = __webpack_require__(7);\nvar anObject = __webpack_require__(6);\nvar getKeys = __webpack_require__(22);\n\nmodule.exports = __webpack_require__(8) ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(16);\nvar toLength = __webpack_require__(37);\nvar toAbsoluteIndex = __webpack_require__(105);\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar toInteger = __webpack_require__(34);\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar addToUnscopables = __webpack_require__(107);\nvar step = __webpack_require__(108);\nvar Iterators = __webpack_require__(15);\nvar toIObject = __webpack_require__(16);\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(51)(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = function () { /* empty */ };\n\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar LIBRARY = __webpack_require__(21);\nvar global = __webpack_require__(1);\nvar ctx = __webpack_require__(13);\nvar classof = __webpack_require__(41);\nvar $export = __webpack_require__(4);\nvar isObject = __webpack_require__(10);\nvar aFunction = __webpack_require__(24);\nvar anInstance = __webpack_require__(110);\nvar forOf = __webpack_require__(111);\nvar speciesConstructor = __webpack_require__(59);\nvar task = __webpack_require__(60).set;\nvar microtask = __webpack_require__(113)();\nvar newPromiseCapabilityModule = __webpack_require__(43);\nvar perform = __webpack_require__(61);\nvar userAgent = __webpack_require__(114);\nvar promiseResolve = __webpack_require__(62);\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[__webpack_require__(2)('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = __webpack_require__(115)($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\n__webpack_require__(26)($Promise, PROMISE);\n__webpack_require__(116)(PROMISE);\nWrapper = __webpack_require__(0)[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(63)(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ctx = __webpack_require__(13);\nvar call = __webpack_require__(57);\nvar isArrayIter = __webpack_require__(58);\nvar anObject = __webpack_require__(6);\nvar toLength = __webpack_require__(37);\nvar getIterFn = __webpack_require__(42);\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports) {\n\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar macrotask = __webpack_require__(60).set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = __webpack_require__(23)(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar global = __webpack_require__(1);\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hide = __webpack_require__(11);\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar global = __webpack_require__(1);\nvar core = __webpack_require__(0);\nvar dP = __webpack_require__(7);\nvar DESCRIPTORS = __webpack_require__(8);\nvar SPECIES = __webpack_require__(2)('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// https://github.com/tc39/proposal-promise-finally\n\nvar $export = __webpack_require__(4);\nvar core = __webpack_require__(0);\nvar global = __webpack_require__(1);\nvar speciesConstructor = __webpack_require__(59);\nvar promiseResolve = __webpack_require__(62);\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// https://github.com/tc39/proposal-promise-try\nvar $export = __webpack_require__(4);\nvar newPromiseCapability = __webpack_require__(43);\nvar perform = __webpack_require__(61);\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(120), __esModule: true };\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(121);\nmodule.exports = __webpack_require__(0).Object.assign;\n\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(4);\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(122) });\n\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = __webpack_require__(8);\nvar getKeys = __webpack_require__(22);\nvar gOPS = __webpack_require__(44);\nvar pIE = __webpack_require__(28);\nvar toObject = __webpack_require__(17);\nvar IObject = __webpack_require__(54);\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(14)(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(124);\nmodule.exports = __webpack_require__(0).Object.getPrototypeOf;\n\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = __webpack_require__(17);\nvar $getPrototypeOf = __webpack_require__(56);\n\n__webpack_require__(65)('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(126), __esModule: true };\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(20);\n__webpack_require__(27);\nmodule.exports = __webpack_require__(45).f('iterator');\n\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(128), __esModule: true };\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(129);\n__webpack_require__(50);\n__webpack_require__(134);\n__webpack_require__(135);\nmodule.exports = __webpack_require__(0).Symbol;\n\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// ECMAScript 6 symbols shim\nvar global = __webpack_require__(1);\nvar has = __webpack_require__(12);\nvar DESCRIPTORS = __webpack_require__(8);\nvar $export = __webpack_require__(4);\nvar redefine = __webpack_require__(52);\nvar META = __webpack_require__(130).KEY;\nvar $fails = __webpack_require__(14);\nvar shared = __webpack_require__(39);\nvar setToStringTag = __webpack_require__(26);\nvar uid = __webpack_require__(25);\nvar wks = __webpack_require__(2);\nvar wksExt = __webpack_require__(45);\nvar wksDefine = __webpack_require__(46);\nvar enumKeys = __webpack_require__(131);\nvar isArray = __webpack_require__(132);\nvar anObject = __webpack_require__(6);\nvar isObject = __webpack_require__(10);\nvar toObject = __webpack_require__(17);\nvar toIObject = __webpack_require__(16);\nvar toPrimitive = __webpack_require__(32);\nvar createDesc = __webpack_require__(19);\nvar _create = __webpack_require__(36);\nvar gOPNExt = __webpack_require__(133);\nvar $GOPD = __webpack_require__(69);\nvar $GOPS = __webpack_require__(44);\nvar $DP = __webpack_require__(7);\nvar $keys = __webpack_require__(22);\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(68).f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(28).f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(21)) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(11)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar META = __webpack_require__(25)('meta');\nvar isObject = __webpack_require__(10);\nvar has = __webpack_require__(12);\nvar setDesc = __webpack_require__(7).f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(14)(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(22);\nvar gOPS = __webpack_require__(44);\nvar pIE = __webpack_require__(28);\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(23);\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(16);\nvar gOPN = __webpack_require__(68).f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(46)('asyncIterator');\n\n\n/***/ }),\n/* 135 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(46)('observable');\n\n\n/***/ }),\n/* 136 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(137), __esModule: true };\n\n/***/ }),\n/* 137 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(138);\nmodule.exports = __webpack_require__(0).Object.setPrototypeOf;\n\n\n/***/ }),\n/* 138 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = __webpack_require__(4);\n$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(139).set });\n\n\n/***/ }),\n/* 139 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(10);\nvar anObject = __webpack_require__(6);\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = __webpack_require__(13)(Function.call, __webpack_require__(69).f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/***/ }),\n/* 140 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(141), __esModule: true };\n\n/***/ }),\n/* 141 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(142);\nvar $Object = __webpack_require__(0).Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n/***/ }),\n/* 142 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar $export = __webpack_require__(4);\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: __webpack_require__(36) });\n\n\n/***/ }),\n/* 143 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _FlipMove = __webpack_require__(144);\n\nvar _FlipMove2 = _interopRequireDefault(_FlipMove);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _FlipMove2.default;\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n */\n\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 144 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\n__webpack_require__(145);\n\nvar _propConverter = __webpack_require__(146);\n\nvar _propConverter2 = _interopRequireDefault(_propConverter);\n\nvar _domManipulation = __webpack_require__(149);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n *\n * For information on how this code is laid out, check out CODE_TOUR.md\n */\n\n/* eslint-disable react/prop-types */\n\nvar transitionEnd = (0, _domManipulation.whichTransitionEvent)();\nvar noBrowserSupport = !transitionEnd;\n\nfunction getKey(childData) {\n  return childData.key || '';\n}\n\nvar FlipMove = function (_Component) {\n  _inherits(FlipMove, _Component);\n\n  function FlipMove() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, FlipMove);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = FlipMove.__proto__ || Object.getPrototypeOf(FlipMove)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      children: _react.Children.toArray(_this.props.children).map(function (element) {\n        return _extends({}, element, {\n          element: element,\n          appearing: true\n        });\n      })\n    }, _this.childrenData = {}, _this.parentData = {\n      domNode: null,\n      boundingBox: null\n    }, _this.heightPlaceholderData = {\n      domNode: null\n    }, _this.remainingAnimations = 0, _this.childrenToAnimate = [], _this.runAnimation = function () {\n      var dynamicChildren = _this.state.children.filter(_this.doesChildNeedToBeAnimated);\n\n      dynamicChildren.forEach(function (child, n) {\n        _this.remainingAnimations += 1;\n        _this.childrenToAnimate.push(getKey(child));\n        _this.animateChild(child, n);\n      });\n\n      if (typeof _this.props.onStartAll === 'function') {\n        _this.callChildrenHook(_this.props.onStartAll);\n      }\n    }, _this.doesChildNeedToBeAnimated = function (child) {\n      // If the child doesn't have a key, it's an immovable child (one that we\n      // do not want to do FLIP stuff to.)\n      if (!getKey(child)) {\n        return false;\n      }\n\n      var childData = _this.getChildData(getKey(child));\n      var childDomNode = childData.domNode;\n      var childBoundingBox = childData.boundingBox;\n      var parentBoundingBox = _this.parentData.boundingBox;\n\n      if (!childDomNode) {\n        return false;\n      }\n\n      var _this$props = _this.props,\n          appearAnimation = _this$props.appearAnimation,\n          enterAnimation = _this$props.enterAnimation,\n          leaveAnimation = _this$props.leaveAnimation,\n          getPosition = _this$props.getPosition;\n\n\n      var isAppearingWithAnimation = child.appearing && appearAnimation;\n      var isEnteringWithAnimation = child.entering && enterAnimation;\n      var isLeavingWithAnimation = child.leaving && leaveAnimation;\n\n      if (isAppearingWithAnimation || isEnteringWithAnimation || isLeavingWithAnimation) {\n        return true;\n      }\n\n      // If it isn't entering/leaving, we want to animate it if it's\n      // on-screen position has changed.\n\n      var _getPositionDelta = (0, _domManipulation.getPositionDelta)({\n        childDomNode: childDomNode,\n        childBoundingBox: childBoundingBox,\n        parentBoundingBox: parentBoundingBox,\n        getPosition: getPosition\n      }),\n          _getPositionDelta2 = _slicedToArray(_getPositionDelta, 2),\n          dX = _getPositionDelta2[0],\n          dY = _getPositionDelta2[1];\n\n      return dX !== 0 || dY !== 0;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  // Copy props.children into state.\n  // To understand why this is important (and not an anti-pattern), consider\n  // how \"leave\" animations work. An item has \"left\" when the component\n  // receives a new set of props that do NOT contain the item.\n  // If we just render the props as-is, the item would instantly disappear.\n  // We want to keep the item rendered for a little while, until its animation\n  // can complete. Because we cannot mutate props, we make `state` the source\n  // of truth.\n\n\n  // FlipMove needs to know quite a bit about its children in order to do\n  // its job. We store these as a property on the instance. We're not using\n  // state, because we don't want changes to trigger re-renders, we just\n  // need a place to keep the data for reference, when changes happen.\n  // This field should not be accessed directly. Instead, use getChildData,\n  // putChildData, etc...\n\n\n  // Similarly, track the dom node and box of our parent element.\n\n\n  // If `maintainContainerHeight` prop is set to true, we'll create a\n  // placeholder element which occupies space so that the parent height\n  // doesn't change when items are removed from the document flow (which\n  // happens during leave animations)\n\n\n  // Keep track of remaining animations so we know when to fire the\n  // all-finished callback, and clean up after ourselves.\n  // NOTE: we can't simply use childrenToAnimate.length to track remaining\n  // animations, because we need to maintain the list of animating children,\n  // to pass to the `onFinishAll` handler.\n\n\n  _createClass(FlipMove, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Run our `appearAnimation` if it was requested, right after the\n      // component mounts.\n      var shouldTriggerFLIP = this.props.appearAnimation && !this.isAnimationDisabled(this.props);\n\n      if (shouldTriggerFLIP) {\n        this.prepForAnimation();\n        this.runAnimation();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      // When the component is handed new props, we need to figure out the\n      // \"resting\" position of all currently-rendered DOM nodes.\n      // We store that data in this.parent and this.children,\n      // so it can be used later to work out the animation.\n      this.updateBoundingBoxCaches();\n\n      // Convert opaque children object to array.\n      var nextChildren = _react.Children.toArray(nextProps.children);\n\n      // Next, we need to update our state, so that it contains our new set of\n      // children. If animation is disabled or unsupported, this is easy;\n      // we just copy our props into state.\n      // Assuming that we can animate, though, we have to do some work.\n      // Essentially, we want to keep just-deleted nodes in the DOM for a bit\n      // longer, so that we can animate them away.\n      this.setState({\n        children: this.isAnimationDisabled(nextProps) ? nextChildren.map(function (element) {\n          return _extends({}, element, { element: element });\n        }) : this.calculateNextSetOfChildren(nextChildren)\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(previousProps) {\n      // If the children have been re-arranged, moved, or added/removed,\n      // trigger the main FLIP animation.\n      //\n      // IMPORTANT: We need to make sure that the children have actually changed.\n      // At the end of the transition, we clean up nodes that need to be removed.\n      var oldChildrenKeys = _react.Children.toArray(this.props.children).map(function (d) {\n        return d.key;\n      });\n      var nextChildrenKeys = _react.Children.toArray(previousProps.children).map(function (d) {\n        return d.key;\n      });\n\n      var shouldTriggerFLIP = !(0, _helpers.arraysEqual)(oldChildrenKeys, nextChildrenKeys) && !this.isAnimationDisabled(this.props);\n\n      if (shouldTriggerFLIP) {\n        this.prepForAnimation();\n        this.runAnimation();\n      }\n    }\n  }, {\n    key: 'calculateNextSetOfChildren',\n    value: function calculateNextSetOfChildren(nextChildren) {\n      var _this2 = this;\n\n      // We want to:\n      //   - Mark all new children as `entering`\n      //   - Pull in previous children that aren't in nextChildren, and mark them\n      //     as `leaving`\n      //   - Preserve the nextChildren list order, with leaving children in their\n      //     appropriate places.\n      //\n\n      var updatedChildren = nextChildren.map(function (nextChild) {\n        var child = _this2.findChildByKey(nextChild.key || '');\n\n        // If the current child did exist, but it was in the midst of leaving,\n        // we want to treat it as though it's entering\n        var isEntering = !child || child.leaving;\n\n        return _extends({}, nextChild, { element: nextChild, entering: isEntering });\n      });\n\n      // This is tricky. We want to keep the nextChildren's ordering, but with\n      // any just-removed items maintaining their original position.\n      // eg.\n      //   this.state.children  = [ 1, 2, 3, 4 ]\n      //   nextChildren         = [ 3, 1 ]\n      //\n      // In this example, we've removed the '2' & '4'\n      // We want to end up with:  [ 2, 3, 1, 4 ]\n      //\n      // To accomplish that, we'll iterate through this.state.children. whenever\n      // we find a match, we'll append our `leaving` flag to it, and insert it\n      // into the nextChildren in its ORIGINAL position. Note that, as we keep\n      // inserting old items into the new list, the \"original\" position will\n      // keep incrementing.\n      var numOfChildrenLeaving = 0;\n      this.state.children.forEach(function (child, index) {\n        var isLeaving = !nextChildren.find(function (_ref2) {\n          var key = _ref2.key;\n          return key === getKey(child);\n        });\n\n        // If the child isn't leaving (or, if there is no leave animation),\n        // we don't need to add it into the state children.\n        if (!isLeaving || !_this2.props.leaveAnimation) return;\n\n        var nextChild = _extends({}, child, { leaving: true });\n        var nextChildIndex = index + numOfChildrenLeaving;\n\n        updatedChildren.splice(nextChildIndex, 0, nextChild);\n        numOfChildrenLeaving += 1;\n      });\n\n      return updatedChildren;\n    }\n  }, {\n    key: 'prepForAnimation',\n    value: function prepForAnimation() {\n      var _this3 = this;\n\n      // Our animation prep consists of:\n      // - remove children that are leaving from the DOM flow, so that the new\n      //   layout can be accurately calculated,\n      // - update the placeholder container height, if needed, to ensure that\n      //   the parent's height doesn't collapse.\n\n      var _props = this.props,\n          leaveAnimation = _props.leaveAnimation,\n          maintainContainerHeight = _props.maintainContainerHeight,\n          getPosition = _props.getPosition;\n\n      // we need to make all leaving nodes \"invisible\" to the layout calculations\n      // that will take place in the next step (this.runAnimation).\n\n      if (leaveAnimation) {\n        var leavingChildren = this.state.children.filter(function (child) {\n          return child.leaving;\n        });\n\n        leavingChildren.forEach(function (leavingChild) {\n          var childData = _this3.getChildData(getKey(leavingChild));\n\n          // We need to take the items out of the \"flow\" of the document, so that\n          // its siblings can move to take its place.\n          if (childData.boundingBox) {\n            (0, _domManipulation.removeNodeFromDOMFlow)(childData, _this3.props.verticalAlignment);\n          }\n        });\n\n        if (maintainContainerHeight && this.heightPlaceholderData.domNode) {\n          (0, _domManipulation.updateHeightPlaceholder)({\n            domNode: this.heightPlaceholderData.domNode,\n            parentData: this.parentData,\n            getPosition: getPosition\n          });\n        }\n      }\n\n      // For all children not in the middle of entering or leaving,\n      // we need to reset the transition, so that the NEW shuffle starts from\n      // the right place.\n      this.state.children.forEach(function (child) {\n        var _getChildData = _this3.getChildData(getKey(child)),\n            domNode = _getChildData.domNode;\n\n        // Ignore children that don't render DOM nodes (eg. by returning null)\n\n\n        if (!domNode) {\n          return;\n        }\n\n        if (!child.entering && !child.leaving) {\n          (0, _domManipulation.applyStylesToDOMNode)({\n            domNode: domNode,\n            styles: {\n              transition: ''\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: 'animateChild',\n    value: function animateChild(child, index) {\n      var _this4 = this;\n\n      var _getChildData2 = this.getChildData(getKey(child)),\n          domNode = _getChildData2.domNode;\n\n      if (!domNode) {\n        return;\n      }\n\n      // Apply the relevant style for this DOM node\n      // This is the offset from its actual DOM position.\n      // eg. if an item has been re-rendered 20px lower, we want to apply a\n      // style of 'transform: translate(-20px)', so that it appears to be where\n      // it started.\n      // In FLIP terminology, this is the 'Invert' stage.\n      (0, _domManipulation.applyStylesToDOMNode)({\n        domNode: domNode,\n        styles: this.computeInitialStyles(child)\n      });\n\n      // Start by invoking the onStart callback for this child.\n      if (this.props.onStart) this.props.onStart(child, domNode);\n\n      // Next, animate the item from it's artificially-offset position to its\n      // new, natural position.\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          // NOTE, RE: the double-requestAnimationFrame:\n          // Sadly, this is the most browser-compatible way to do this I've found.\n          // Essentially we need to set the initial styles outside of any request\n          // callbacks to avoid batching them. Then, a frame needs to pass with\n          // the styles above rendered. Then, on the second frame, we can apply\n          // our final styles to perform the animation.\n\n          // Our first order of business is to \"undo\" the styles applied in the\n          // previous frames, while also adding a `transition` property.\n          // This way, the item will smoothly transition from its old position\n          // to its new position.\n\n          // eslint-disable-next-line flowtype/require-variable-type\n          var styles = {\n            transition: (0, _domManipulation.createTransitionString)(index, _this4.props),\n            transform: '',\n            opacity: ''\n          };\n\n          if (child.appearing && _this4.props.appearAnimation) {\n            styles = _extends({}, styles, _this4.props.appearAnimation.to);\n          } else if (child.entering && _this4.props.enterAnimation) {\n            styles = _extends({}, styles, _this4.props.enterAnimation.to);\n          } else if (child.leaving && _this4.props.leaveAnimation) {\n            styles = _extends({}, styles, _this4.props.leaveAnimation.to);\n          }\n\n          // In FLIP terminology, this is the 'Play' stage.\n          (0, _domManipulation.applyStylesToDOMNode)({ domNode: domNode, styles: styles });\n        });\n      });\n\n      this.bindTransitionEndHandler(child);\n    }\n  }, {\n    key: 'bindTransitionEndHandler',\n    value: function bindTransitionEndHandler(child) {\n      var _this5 = this;\n\n      var _getChildData3 = this.getChildData(getKey(child)),\n          domNode = _getChildData3.domNode;\n\n      if (!domNode) {\n        return;\n      }\n\n      // The onFinish callback needs to be bound to the transitionEnd event.\n      // We also need to unbind it when the transition completes, so this ugly\n      // inline function is required (we need it here so it closes over\n      // dependent variables `child` and `domNode`)\n      var transitionEndHandler = function transitionEndHandler(ev) {\n        // It's possible that this handler is fired not on our primary transition,\n        // but on a nested transition (eg. a hover effect). Ignore these cases.\n        if (ev.target !== domNode) return;\n\n        // Remove the 'transition' inline style we added. This is cleanup.\n        domNode.style.transition = '';\n\n        // Trigger any applicable onFinish/onFinishAll hooks\n        _this5.triggerFinishHooks(child, domNode);\n\n        domNode.removeEventListener(transitionEnd, transitionEndHandler);\n\n        if (child.leaving) {\n          _this5.removeChildData(getKey(child));\n        }\n      };\n\n      domNode.addEventListener(transitionEnd, transitionEndHandler);\n    }\n  }, {\n    key: 'triggerFinishHooks',\n    value: function triggerFinishHooks(child, domNode) {\n      var _this6 = this;\n\n      if (this.props.onFinish) this.props.onFinish(child, domNode);\n\n      // Reduce the number of children we need to animate by 1,\n      // so that we can tell when all children have finished.\n      this.remainingAnimations -= 1;\n\n      if (this.remainingAnimations === 0) {\n        // Remove any items from the DOM that have left, and reset `entering`.\n        var nextChildren = this.state.children.filter(function (_ref3) {\n          var leaving = _ref3.leaving;\n          return !leaving;\n        }).map(function (item) {\n          return _extends({}, item, {\n            appearing: false,\n            entering: false\n          });\n        });\n\n        this.setState({ children: nextChildren }, function () {\n          if (typeof _this6.props.onFinishAll === 'function') {\n            _this6.callChildrenHook(_this6.props.onFinishAll);\n          }\n\n          // Reset our variables for the next iteration\n          _this6.childrenToAnimate = [];\n        });\n\n        // If the placeholder was holding the container open while elements were\n        // leaving, we we can now set its height to zero.\n        if (this.heightPlaceholderData.domNode) {\n          this.heightPlaceholderData.domNode.style.height = '0';\n        }\n      }\n    }\n  }, {\n    key: 'callChildrenHook',\n    value: function callChildrenHook(hook) {\n      var _this7 = this;\n\n      var elements = [];\n      var domNodes = [];\n\n      this.childrenToAnimate.forEach(function (childKey) {\n        // If this was an exit animation, the child may no longer exist.\n        // If so, skip it.\n        var child = _this7.findChildByKey(childKey);\n\n        if (!child) {\n          return;\n        }\n\n        elements.push(child);\n\n        if (_this7.hasChildData(childKey)) {\n          domNodes.push(_this7.getChildData(childKey).domNode);\n        }\n      });\n\n      hook(elements, domNodes);\n    }\n  }, {\n    key: 'updateBoundingBoxCaches',\n    value: function updateBoundingBoxCaches() {\n      var _this8 = this;\n\n      // This is the ONLY place that parentData and childrenData's\n      // bounding boxes are updated. They will be calculated at other times\n      // to be compared to this value, but it's important that the cache is\n      // updated once per update.\n      var parentDomNode = this.parentData.domNode;\n\n      if (!parentDomNode) {\n        return;\n      }\n\n      this.parentData.boundingBox = this.props.getPosition(parentDomNode);\n\n      this.state.children.forEach(function (child) {\n        var childKey = getKey(child);\n\n        // It is possible that a child does not have a `key` property;\n        // Ignore these children, they don't need to be moved.\n        if (!childKey) {\n          return;\n        }\n\n        // In very rare circumstances, for reasons unknown, the ref is never\n        // populated for certain children. In this case, avoid doing this update.\n        // see: https://github.com/joshwcomeau/react-flip-move/pull/91\n        if (!_this8.hasChildData(childKey)) {\n          return;\n        }\n\n        var childData = _this8.getChildData(childKey);\n\n        // If the child element returns null, we need to avoid trying to\n        // account for it\n        if (!childData.domNode || !child) {\n          return;\n        }\n\n        _this8.setChildData(childKey, {\n          boundingBox: (0, _domManipulation.getRelativeBoundingBox)({\n            childDomNode: childData.domNode,\n            parentDomNode: parentDomNode,\n            getPosition: _this8.props.getPosition\n          })\n        });\n      });\n    }\n  }, {\n    key: 'computeInitialStyles',\n    value: function computeInitialStyles(child) {\n      if (child.appearing) {\n        return this.props.appearAnimation ? this.props.appearAnimation.from : {};\n      } else if (child.entering) {\n        if (!this.props.enterAnimation) {\n          return {};\n        }\n        // If this child was in the middle of leaving, it still has its\n        // absolute positioning styles applied. We need to undo those.\n        return _extends({\n          position: '',\n          top: '',\n          left: '',\n          right: '',\n          bottom: ''\n        }, this.props.enterAnimation.from);\n      } else if (child.leaving) {\n        return this.props.leaveAnimation ? this.props.leaveAnimation.from : {};\n      }\n\n      var childData = this.getChildData(getKey(child));\n      var childDomNode = childData.domNode;\n      var childBoundingBox = childData.boundingBox;\n      var parentBoundingBox = this.parentData.boundingBox;\n\n      if (!childDomNode) {\n        return {};\n      }\n\n      var _getPositionDelta3 = (0, _domManipulation.getPositionDelta)({\n        childDomNode: childDomNode,\n        childBoundingBox: childBoundingBox,\n        parentBoundingBox: parentBoundingBox,\n        getPosition: this.props.getPosition\n      }),\n          _getPositionDelta4 = _slicedToArray(_getPositionDelta3, 2),\n          dX = _getPositionDelta4[0],\n          dY = _getPositionDelta4[1];\n\n      return {\n        transform: 'translate(' + dX + 'px, ' + dY + 'px)'\n      };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'isAnimationDisabled',\n    value: function isAnimationDisabled(props) {\n      // If the component is explicitly passed a `disableAllAnimations` flag,\n      // we can skip this whole process. Similarly, if all of the numbers have\n      // been set to 0, there is no point in trying to animate; doing so would\n      // only cause a flicker (and the intent is probably to disable animations)\n      // We can also skip this rigamarole if there's no browser support for it.\n      return noBrowserSupport || props.disableAllAnimations || props.duration === 0 && props.delay === 0 && props.staggerDurationBy === 0 && props.staggerDelayBy === 0;\n    }\n  }, {\n    key: 'findChildByKey',\n    value: function findChildByKey(key) {\n      return this.state.children.find(function (child) {\n        return getKey(child) === key;\n      });\n    }\n  }, {\n    key: 'hasChildData',\n    value: function hasChildData(key) {\n      // Object has some built-in properties on its prototype, such as toString.  hasOwnProperty makes\n      // sure that key is present on childrenData itself, not on its prototype.\n      return Object.prototype.hasOwnProperty.call(this.childrenData, key);\n    }\n  }, {\n    key: 'getChildData',\n    value: function getChildData(key) {\n      return this.hasChildData(key) ? this.childrenData[key] : {};\n    }\n  }, {\n    key: 'setChildData',\n    value: function setChildData(key, data) {\n      this.childrenData[key] = _extends({}, this.getChildData(key), data);\n    }\n  }, {\n    key: 'removeChildData',\n    value: function removeChildData(key) {\n      delete this.childrenData[key];\n    }\n  }, {\n    key: 'createHeightPlaceholder',\n    value: function createHeightPlaceholder() {\n      var _this9 = this;\n\n      var typeName = this.props.typeName;\n\n      // If requested, create an invisible element at the end of the list.\n      // Its height will be modified to prevent the container from collapsing\n      // prematurely.\n\n      var isContainerAList = typeName === 'ul' || typeName === 'ol';\n      var placeholderType = isContainerAList ? 'li' : 'div';\n\n      return _react2.default.createElement(placeholderType, {\n        key: 'height-placeholder',\n        ref: function ref(domNode) {\n          _this9.heightPlaceholderData.domNode = domNode;\n        },\n        style: { visibility: 'hidden', height: 0 }\n      });\n    }\n  }, {\n    key: 'childrenWithRefs',\n    value: function childrenWithRefs() {\n      var _this10 = this;\n\n      // We need to clone the provided children, capturing a reference to the\n      // underlying DOM node. Flip Move needs to use the React escape hatches to\n      // be able to do its calculations.\n      return this.state.children.map(function (child) {\n        return _react2.default.cloneElement(child.element, {\n          ref: function ref(element) {\n            // Stateless Functional Components are not supported by FlipMove,\n            // because they don't have instances.\n            if (!element) {\n              return;\n            }\n\n            var domNode = (0, _domManipulation.getNativeNode)(element);\n            _this10.setChildData(getKey(child), { domNode: domNode });\n          }\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this11 = this;\n\n      var _props2 = this.props,\n          typeName = _props2.typeName,\n          delegated = _props2.delegated,\n          leaveAnimation = _props2.leaveAnimation,\n          maintainContainerHeight = _props2.maintainContainerHeight;\n\n\n      var props = _extends({}, delegated, {\n        ref: function ref(node) {\n          _this11.parentData.domNode = node;\n        }\n      });\n\n      var children = this.childrenWithRefs();\n      if (leaveAnimation && maintainContainerHeight) {\n        children.push(this.createHeightPlaceholder());\n      }\n\n      return _react2.default.createElement(typeName, props, children);\n    }\n  }]);\n\n  return FlipMove;\n}(_react.Component);\n\nexports.default = (0, _propConverter2.default)(FlipMove);\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 145 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// @noflow\n/**\n * React Flip Move - Polyfills\n * (c) 2016-present Joshua Comeau\n */\n\n/* eslint-disable */\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value = void 0;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n    return undefined;\n  };\n}\n\nif (!Array.prototype.every) {\n  Array.prototype.every = function (callbackfn, thisArg) {\n    'use strict';\n\n    var T, k;\n\n    if (this == null) {\n      throw new TypeError('this is null or not defined');\n    }\n\n    var O = Object(this);\n    var len = O.length >>> 0;\n\n    if (typeof callbackfn !== 'function') {\n      throw new TypeError();\n    }\n\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    k = 0;\n\n    while (k < len) {\n\n      var kValue;\n\n      if (k in O) {\n        kValue = O[k];\n\n        var testResult = callbackfn.call(T, kValue, k, O);\n\n        if (!testResult) {\n          return false;\n        }\n      }\n      k++;\n    }\n    return true;\n  };\n}\n\nif (!Array.isArray) {\n  Array.isArray = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\n/***/ }),\n/* 146 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _errorMessages = __webpack_require__(147);\n\nvar _enterLeavePresets = __webpack_require__(148);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n/**\n * React Flip Move | propConverter\n * (c) 2016-present Joshua Comeau\n *\n * Abstracted away a bunch of the messy business with props.\n *   - props flow types and defaultProps\n *   - Type conversion (We accept 'string' and 'number' values for duration,\n *     delay, and other fields, but we actually need them to be ints.)\n *   - Children conversion (we need the children to be an array. May not always\n *     be, if a single child is passed in.)\n *   - Resolving animation presets into their base CSS styles\n */\n/* eslint-disable block-scoped-var */\n\nvar nodeEnv = void 0;\ntry {\n  nodeEnv = process.env.NODE_ENV;\n} catch (e) {\n  nodeEnv = 'development';\n}\n\nfunction propConverter(ComposedComponent) {\n  var _class, _temp;\n\n  return _temp = _class = function (_Component) {\n    _inherits(FlipMovePropConverter, _Component);\n\n    function FlipMovePropConverter() {\n      _classCallCheck(this, FlipMovePropConverter);\n\n      return _possibleConstructorReturn(this, (FlipMovePropConverter.__proto__ || Object.getPrototypeOf(FlipMovePropConverter)).apply(this, arguments));\n    }\n\n    _createClass(FlipMovePropConverter, [{\n      key: 'checkForStatelessFunctionalComponents',\n\n\n      // eslint-disable-next-line class-methods-use-this\n      value: function checkForStatelessFunctionalComponents(children) {\n        // Skip all console warnings in production.\n        // Bail early, to avoid unnecessary work.\n        if (nodeEnv === 'production') {\n          return;\n        }\n\n        // FlipMove does not support stateless functional components.\n        // Check to see if any supplied components won't work.\n        // If the child doesn't have a key, it means we aren't animating it.\n        // It's allowed to be an SFC, since we ignore it.\n        var childArray = _react.Children.toArray(children);\n        var noStateless = childArray.every(function (child) {\n          return !(0, _helpers.isElementAnSFC)(child) || typeof child.key === 'undefined';\n        });\n\n        if (!noStateless) {\n          (0, _errorMessages.statelessFunctionalComponentSupplied)();\n        }\n      }\n    }, {\n      key: 'convertProps',\n      value: function convertProps(props) {\n        var workingProps = {\n          // explicitly bypass the props that don't need conversion\n          children: props.children,\n          easing: props.easing,\n          onStart: props.onStart,\n          onFinish: props.onFinish,\n          onStartAll: props.onStartAll,\n          onFinishAll: props.onFinishAll,\n          typeName: props.typeName,\n          disableAllAnimations: props.disableAllAnimations,\n          getPosition: props.getPosition,\n          maintainContainerHeight: props.maintainContainerHeight,\n          verticalAlignment: props.verticalAlignment,\n\n          // Do string-to-int conversion for all timing-related props\n          duration: this.convertTimingProp('duration'),\n          delay: this.convertTimingProp('delay'),\n          staggerDurationBy: this.convertTimingProp('staggerDurationBy'),\n          staggerDelayBy: this.convertTimingProp('staggerDelayBy'),\n\n          // Our enter/leave animations can be specified as boolean (default or\n          // disabled), string (preset name), or object (actual animation values).\n          // Let's standardize this so that they're always objects\n          appearAnimation: this.convertAnimationProp(props.appearAnimation, _enterLeavePresets.appearPresets),\n          enterAnimation: this.convertAnimationProp(props.enterAnimation, _enterLeavePresets.enterPresets),\n          leaveAnimation: this.convertAnimationProp(props.leaveAnimation, _enterLeavePresets.leavePresets),\n\n          delegated: {}\n        };\n\n        this.checkForStatelessFunctionalComponents(workingProps.children);\n\n        // Accept `disableAnimations`, but add a deprecation warning\n        if (typeof props.disableAnimations !== 'undefined') {\n          if (nodeEnv !== 'production') {\n            (0, _errorMessages.deprecatedDisableAnimations)();\n          }\n\n          workingProps.disableAllAnimations = props.disableAnimations;\n        }\n\n        // Gather any additional props;\n        // they will be delegated to the ReactElement created.\n        var primaryPropKeys = Object.keys(workingProps);\n        var delegatedProps = (0, _helpers.omit)(this.props, primaryPropKeys);\n\n        // The FlipMove container element needs to have a non-static position.\n        // We use `relative` by default, but it can be overridden by the user.\n        // Now that we're delegating props, we need to merge this in.\n        delegatedProps.style = _extends({\n          position: 'relative'\n        }, delegatedProps.style);\n\n        workingProps.delegated = delegatedProps;\n\n        return workingProps;\n      }\n    }, {\n      key: 'convertTimingProp',\n      value: function convertTimingProp(prop) {\n        var rawValue = this.props[prop];\n\n        var value = typeof rawValue === 'number' ? rawValue : parseInt(rawValue, 10);\n\n        if (isNaN(value)) {\n          var defaultValue = FlipMovePropConverter.defaultProps[prop];\n\n          if (nodeEnv !== 'production') {\n            (0, _errorMessages.invalidTypeForTimingProp)({\n              prop: prop,\n              value: rawValue,\n              defaultValue: defaultValue\n            });\n          }\n\n          return defaultValue;\n        }\n\n        return value;\n      }\n\n      // eslint-disable-next-line class-methods-use-this\n\n    }, {\n      key: 'convertAnimationProp',\n      value: function convertAnimationProp(animation, presets) {\n        switch (typeof animation === 'undefined' ? 'undefined' : _typeof(animation)) {\n          case 'boolean':\n            {\n              // If it's true, we want to use the default preset.\n              // If it's false, we want to use the 'none' preset.\n              return presets[animation ? _enterLeavePresets.defaultPreset : _enterLeavePresets.disablePreset];\n            }\n\n          case 'string':\n            {\n              var presetKeys = Object.keys(presets);\n\n              if (presetKeys.indexOf(animation) === -1) {\n                if (nodeEnv !== 'production') {\n                  (0, _errorMessages.invalidEnterLeavePreset)({\n                    value: animation,\n                    acceptableValues: presetKeys.join(', '),\n                    defaultValue: _enterLeavePresets.defaultPreset\n                  });\n                }\n\n                return presets[_enterLeavePresets.defaultPreset];\n              }\n\n              return presets[animation];\n            }\n\n          default:\n            {\n              return animation;\n            }\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(ComposedComponent, this.convertProps(this.props));\n      }\n    }]);\n\n    return FlipMovePropConverter;\n  }(_react.Component), _class.defaultProps = {\n    easing: 'ease-in-out',\n    duration: 350,\n    delay: 0,\n    staggerDurationBy: 0,\n    staggerDelayBy: 0,\n    typeName: 'div',\n    enterAnimation: _enterLeavePresets.defaultPreset,\n    leaveAnimation: _enterLeavePresets.defaultPreset,\n    disableAllAnimations: false,\n    getPosition: function getPosition(node) {\n      return node.getBoundingClientRect();\n    },\n    maintainContainerHeight: false,\n    verticalAlignment: 'top'\n  }, _temp;\n}\n\nexports.default = propConverter;\nmodule.exports = exports['default'];\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ }),\n/* 147 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\nfunction warnOnce(msg) {\n  var hasWarned = false;\n  return function () {\n    if (!hasWarned) {\n      console.warn(msg);\n      hasWarned = true;\n    }\n  };\n}\nvar statelessFunctionalComponentSupplied = exports.statelessFunctionalComponentSupplied = warnOnce('\\n>> Error, via react-flip-move <<\\n\\nYou provided a stateless functional component as a child to <FlipMove>. Unfortunately, SFCs aren\\'t supported, because Flip Move needs access to the backing instances via refs, and SFCs don\\'t have a public instance that holds that info.\\n\\nPlease wrap your components in a native element (eg. <div>), or a non-functional component.\\n');\n\nvar invalidTypeForTimingProp = exports.invalidTypeForTimingProp = function invalidTypeForTimingProp(args) {\n  return console.error('\\n>> Error, via react-flip-move <<\\n\\nThe prop you provided for \\'' + args.prop + '\\' is invalid. It needs to be a positive integer, or a string that can be resolved to a number. The value you provided is \\'' + args.value + '\\'.\\n\\nAs a result,  the default value for this parameter will be used, which is \\'' + args.defaultValue + '\\'.\\n');\n};\n\nvar deprecatedDisableAnimations = exports.deprecatedDisableAnimations = warnOnce('\\n>> Warning, via react-flip-move <<\\n\\nThe \\'disableAnimations\\' prop you provided is deprecated. Please switch to use \\'disableAllAnimations\\'.\\n\\nThis will become a silent error in future versions of react-flip-move.\\n');\n\nvar invalidEnterLeavePreset = exports.invalidEnterLeavePreset = function invalidEnterLeavePreset(args) {\n  return console.error('\\n>> Error, via react-flip-move <<\\n\\nThe enter/leave preset you provided is invalid. We don\\'t currently have a \\'' + args.value + ' preset.\\'\\n\\nAcceptable values are ' + args.acceptableValues + '. The default value of \\'' + args.defaultValue + '\\' will be used.\\n');\n};\n\n/***/ }),\n/* 148 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar enterPresets = exports.enterPresets = {\n  elevator: {\n    from: { transform: 'scale(0)', opacity: '0' },\n    to: { transform: '', opacity: '' }\n  },\n  fade: {\n    from: { opacity: '0' },\n    to: { opacity: '' }\n  },\n  accordionVertical: {\n    from: { transform: 'scaleY(0)', transformOrigin: 'center top' },\n    to: { transform: '', transformOrigin: 'center top' }\n  },\n  accordionHorizontal: {\n    from: { transform: 'scaleX(0)', transformOrigin: 'left center' },\n    to: { transform: '', transformOrigin: 'left center' }\n  },\n  none: null\n};\n/**\n * React Flip Move | enterLeavePresets\n * (c) 2016-present Joshua Comeau\n *\n * This contains the master list of presets available for enter/leave animations,\n * along with the mapping between preset and styles.\n */\nvar leavePresets = exports.leavePresets = {\n  elevator: {\n    from: { transform: 'scale(1)', opacity: '1' },\n    to: { transform: 'scale(0)', opacity: '0' }\n  },\n  fade: {\n    from: { opacity: '1' },\n    to: { opacity: '0' }\n  },\n  accordionVertical: {\n    from: { transform: 'scaleY(1)', transformOrigin: 'center top' },\n    to: { transform: 'scaleY(0)', transformOrigin: 'center top' }\n  },\n  accordionHorizontal: {\n    from: { transform: 'scaleX(1)', transformOrigin: 'left center' },\n    to: { transform: 'scaleX(0)', transformOrigin: 'left center' }\n  },\n  none: null\n};\n\n// For now, appearPresets will be identical to enterPresets.\n// Assigning a custom export in case we ever want to add appear-specific ones.\nvar appearPresets = exports.appearPresets = enterPresets;\n\n// Embarrassingly enough, v2.0 launched with typo'ed preset names.\n// To avoid penning a new major version over something so inconsequential,\n// we're supporting both spellings. In a future version, these alternatives\n// may be deprecated.\n// $FlowFixMe\nenterPresets.accordianVertical = enterPresets.accordionVertical;\n// $FlowFixMe\nenterPresets.accordianHorizontal = enterPresets.accordionHorizontal;\n// $FlowFixMe\nleavePresets.accordianVertical = leavePresets.accordionVertical;\n// $FlowFixMe\nleavePresets.accordianHorizontal = leavePresets.accordionHorizontal;\n\nvar defaultPreset = exports.defaultPreset = 'elevator';\nvar disablePreset = exports.disablePreset = 'none';\n\n/***/ }),\n/* 149 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTransitionString = exports.getNativeNode = exports.updateHeightPlaceholder = exports.removeNodeFromDOMFlow = exports.getPositionDelta = exports.getRelativeBoundingBox = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n/**\n * React Flip Move\n * (c) 2016-present Joshua Comeau\n *\n * These methods read from and write to the DOM.\n * They almost always have side effects, and will hopefully become the\n * only spot in the codebase with impure functions.\n */\n\n\nexports.applyStylesToDOMNode = applyStylesToDOMNode;\nexports.whichTransitionEvent = whichTransitionEvent;\n\nvar _reactDom = __webpack_require__(5);\n\nvar _helpers = __webpack_require__(47);\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction applyStylesToDOMNode(_ref) {\n  var domNode = _ref.domNode,\n      styles = _ref.styles;\n\n  // Can't just do an object merge because domNode.styles is no regular object.\n  // Need to do it this way for the engine to fire its `set` listeners.\n  Object.keys(styles).forEach(function (key) {\n    domNode.style.setProperty((0, _helpers.hyphenate)(key), styles[key]);\n  });\n}\n\n// Modified from Modernizr\nfunction whichTransitionEvent() {\n  var transitions = {\n    transition: 'transitionend',\n    '-o-transition': 'oTransitionEnd',\n    '-moz-transition': 'transitionend',\n    '-webkit-transition': 'webkitTransitionEnd'\n  };\n\n  // If we're running in a browserless environment (eg. SSR), it doesn't apply.\n  // Return a placeholder string, for consistent type return.\n  if (typeof document === 'undefined') return '';\n\n  var el = document.createElement('fakeelement');\n\n  var match = Object.keys(transitions).find(function (t) {\n    return el.style.getPropertyValue(t) !== undefined;\n  });\n\n  // If no `transition` is found, we must be running in a browser so ancient,\n  // React itself won't run. Return an empty string, for consistent type return\n  return match ? transitions[match] : '';\n}\n\nvar getRelativeBoundingBox = exports.getRelativeBoundingBox = function getRelativeBoundingBox(_ref2) {\n  var childDomNode = _ref2.childDomNode,\n      parentDomNode = _ref2.parentDomNode,\n      getPosition = _ref2.getPosition;\n\n  var parentBox = getPosition(parentDomNode);\n\n  var _getPosition = getPosition(childDomNode),\n      top = _getPosition.top,\n      left = _getPosition.left,\n      right = _getPosition.right,\n      bottom = _getPosition.bottom,\n      width = _getPosition.width,\n      height = _getPosition.height;\n\n  return {\n    top: top - parentBox.top,\n    left: left - parentBox.left,\n    right: parentBox.right - right,\n    bottom: parentBox.bottom - bottom,\n    width: width,\n    height: height\n  };\n};\n\n/** getPositionDelta\n * This method returns the delta between two bounding boxes, to figure out\n * how many pixels on each axis the element has moved.\n *\n */\nvar getPositionDelta = exports.getPositionDelta = function getPositionDelta(_ref3) {\n  var childDomNode = _ref3.childDomNode,\n      childBoundingBox = _ref3.childBoundingBox,\n      parentBoundingBox = _ref3.parentBoundingBox,\n      getPosition = _ref3.getPosition;\n\n  // TEMP: A mystery bug is sometimes causing unnecessary boundingBoxes to\n  var defaultBox = { top: 0, left: 0, right: 0, bottom: 0, height: 0, width: 0 };\n\n  // Our old box is its last calculated position, derived on mount or at the\n  // start of the previous animation.\n  var oldRelativeBox = childBoundingBox || defaultBox;\n  var parentBox = parentBoundingBox || defaultBox;\n\n  // Our new box is the new final resting place: Where we expect it to wind up\n  // after the animation. First we get the box in absolute terms (AKA relative\n  // to the viewport), and then we calculate its relative box (relative to the\n  // parent container)\n  var newAbsoluteBox = getPosition(childDomNode);\n  var newRelativeBox = {\n    top: newAbsoluteBox.top - parentBox.top,\n    left: newAbsoluteBox.left - parentBox.left\n  };\n\n  return [oldRelativeBox.left - newRelativeBox.left, oldRelativeBox.top - newRelativeBox.top];\n};\n\n/** removeNodeFromDOMFlow\n * This method does something very sneaky: it removes a DOM node from the\n * document flow, but without actually changing its on-screen position.\n *\n * It works by calculating where the node is, and then applying styles\n * so that it winds up being positioned absolutely, but in exactly the\n * same place.\n *\n * This is a vital part of the FLIP technique.\n */\nvar removeNodeFromDOMFlow = exports.removeNodeFromDOMFlow = function removeNodeFromDOMFlow(childData, verticalAlignment) {\n  var domNode = childData.domNode,\n      boundingBox = childData.boundingBox;\n\n\n  if (!domNode || !boundingBox) {\n    return;\n  }\n\n  // For this to work, we have to offset any given `margin`.\n  var computed = window.getComputedStyle(domNode);\n\n  // We need to clean up margins, by converting and removing suffix:\n  // eg. '21px' -> 21\n  var marginAttrs = ['margin-top', 'margin-left', 'margin-right'];\n  var margins = marginAttrs.reduce(function (acc, margin) {\n    var propertyVal = computed.getPropertyValue(margin);\n\n    return _extends({}, acc, _defineProperty({}, margin, Number(propertyVal.replace('px', ''))));\n  }, {});\n\n  // If we're bottom-aligned, we need to add the height of the child to its\n  // top offset. This is because, when the container is bottom-aligned, its\n  // height shrinks from the top, not the bottom. We're removing this node\n  // from the flow, so the top is going to drop by its height.\n  var topOffset = verticalAlignment === 'bottom' ? boundingBox.top - boundingBox.height : boundingBox.top;\n\n  var styles = {\n    position: 'absolute',\n    top: topOffset - margins['margin-top'] + 'px',\n    left: boundingBox.left - margins['margin-left'] + 'px',\n    right: boundingBox.right - margins['margin-right'] + 'px'\n  };\n\n  applyStylesToDOMNode({ domNode: domNode, styles: styles });\n};\n\n/** updateHeightPlaceholder\n * An optional property to FlipMove is a `maintainContainerHeight` boolean.\n * This property creates a node that fills space, so that the parent\n * container doesn't collapse when its children are removed from the\n * document flow.\n */\nvar updateHeightPlaceholder = exports.updateHeightPlaceholder = function updateHeightPlaceholder(_ref4) {\n  var domNode = _ref4.domNode,\n      parentData = _ref4.parentData,\n      getPosition = _ref4.getPosition;\n\n  var parentDomNode = parentData.domNode;\n  var parentBoundingBox = parentData.boundingBox;\n\n  if (!parentDomNode || !parentBoundingBox) {\n    return;\n  }\n\n  // We need to find the height of the container *without* the placeholder.\n  // Since it's possible that the placeholder might already be present,\n  // we first set its height to 0.\n  // This allows the container to collapse down to the size of just its\n  // content (plus container padding or borders if any).\n  applyStylesToDOMNode({ domNode: domNode, styles: { height: '0' } });\n\n  // Find the distance by which the container would be collapsed by elements\n  // leaving. We compare the freshly-available parent height with the original,\n  // cached container height.\n  var originalParentHeight = parentBoundingBox.height;\n  var collapsedParentHeight = getPosition(parentDomNode).height;\n  var reductionInHeight = originalParentHeight - collapsedParentHeight;\n\n  // If the container has become shorter, update the padding element's\n  // height to take up the difference. Otherwise set its height to zero,\n  // so that it has no effect.\n  var styles = {\n    height: reductionInHeight > 0 ? reductionInHeight + 'px' : '0'\n  };\n\n  applyStylesToDOMNode({ domNode: domNode, styles: styles });\n};\n\nvar getNativeNode = exports.getNativeNode = function getNativeNode(element) {\n  // When running in a windowless environment, abort!\n  if (typeof HTMLElement === 'undefined') {\n    return null;\n  }\n\n  // `element` may already be a native node.\n  if (element instanceof HTMLElement) {\n    return element;\n  }\n\n  // While ReactDOM's `findDOMNode` is discouraged, it's the only\n  // publicly-exposed way to find the underlying DOM node for\n  // composite components.\n  var foundNode = (0, _reactDom.findDOMNode)(element);\n\n  if (!(foundNode instanceof HTMLElement)) {\n    // Text nodes are not supported\n    return null;\n  }\n\n  return foundNode;\n};\n\nvar createTransitionString = exports.createTransitionString = function createTransitionString(index, props) {\n  var delay = props.delay,\n      duration = props.duration;\n  var staggerDurationBy = props.staggerDurationBy,\n      staggerDelayBy = props.staggerDelayBy,\n      easing = props.easing;\n\n\n  delay += index * staggerDelayBy;\n  duration += index * staggerDurationBy;\n\n  var cssProperties = ['transform', 'opacity'];\n\n  return cssProperties.map(function (prop) {\n    return prop + ' ' + duration + 'ms ' + easing + ' ' + delay + 'ms';\n  }).join(', ');\n};\n\n/***/ }),\n/* 150 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\tAutosize 3.0.21\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tfactory(exports, module);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports, mod);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (exports, module) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : (function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'delete': function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function (name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = ta.clientWidth;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tvar originalHeight = ta.style.height;\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = 'auto';\n\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\n\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\tta.style.height = originalHeight;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tta.style.height = endHeight + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that\n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight !== styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = (function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap['delete'](ta);\n\t\t}).bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function (el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\tmodule.exports = autosize;\n});\n\n/***/ }),\n/* 151 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (language) {\n  return new _polyglot2.default({\n    phrases: i18nMap[language] || i18nMap.en,\n    locale: language\n  });\n};\n\nvar _polyglot = __webpack_require__(152);\n\nvar _polyglot2 = _interopRequireDefault(_polyglot);\n\nvar _zhCN = __webpack_require__(153);\n\nvar _zhCN2 = _interopRequireDefault(_zhCN);\n\nvar _zhTW = __webpack_require__(154);\n\nvar _zhTW2 = _interopRequireDefault(_zhTW);\n\nvar _en = __webpack_require__(155);\n\nvar _en2 = _interopRequireDefault(_en);\n\nvar _esES = __webpack_require__(156);\n\nvar _esES2 = _interopRequireDefault(_esES);\n\nvar _fr = __webpack_require__(157);\n\nvar _fr2 = _interopRequireDefault(_fr);\n\nvar _ru = __webpack_require__(158);\n\nvar _ru2 = _interopRequireDefault(_ru);\n\nvar _de = __webpack_require__(159);\n\nvar _de2 = _interopRequireDefault(_de);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar i18nMap = {\n  'zh': _zhCN2.default,\n  'zh-CN': _zhCN2.default,\n  'zh-TW': _zhTW2.default,\n  'en': _en2.default,\n  'es-ES': _esES2.default,\n  'fr': _fr2.default,\n  'ru': _ru2.default,\n  'de': _de2.default\n};\n\n/***/ }),\n/* 152 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     (c) 2012 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n\n(function(root, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n      return factory(root);\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.Polyglot = factory(root);\n  }\n}(this, function(root) {\n  'use strict';\n\n  // ### Polyglot class constructor\n  function Polyglot(options) {\n    options = options || {};\n    this.phrases = {};\n    this.extend(options.phrases || {});\n    this.currentLocale = options.locale || 'en';\n    this.allowMissing = !!options.allowMissing;\n    this.warn = options.warn || warn;\n  }\n\n  // ### Version\n  Polyglot.VERSION = '0.4.3';\n\n  // ### polyglot.locale([locale])\n  //\n  // Get or set locale. Internally, Polyglot only uses locale for pluralization.\n  Polyglot.prototype.locale = function(newLocale) {\n    if (newLocale) this.currentLocale = newLocale;\n    return this.currentLocale;\n  };\n\n  // ### polyglot.extend(phrases)\n  //\n  // Use `extend` to tell Polyglot how to translate a given key.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The key can be any string.  Feel free to call `extend` multiple times;\n  // it will override any phrases with the same key, but leave existing phrases\n  // untouched.\n  //\n  // It is also possible to pass nested phrase objects, which get flattened\n  // into an object with the nested keys concatenated using dot notation.\n  //\n  //     polyglot.extend({\n  //       \"nav\": {\n  //         \"hello\": \"Hello\",\n  //         \"hello_name\": \"Hello, %{name}\",\n  //         \"sidebar\": {\n  //           \"welcome\": \"Welcome\"\n  //         }\n  //       }\n  //     });\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}',\n  //     //   'nav.sidebar.welcome': 'Welcome'\n  //     // }\n  //\n  // `extend` accepts an optional second argument, `prefix`, which can be used\n  // to prefix every key in the phrases object with some string, using dot\n  // notation.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     }, \"nav\");\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}'\n  //     // }\n  //\n  // This feature is used internally to support nested phrase objects.\n  Polyglot.prototype.extend = function(morePhrases, prefix) {\n    var phrase;\n\n    for (var key in morePhrases) {\n      if (morePhrases.hasOwnProperty(key)) {\n        phrase = morePhrases[key];\n        if (prefix) key = prefix + '.' + key;\n        if (typeof phrase === 'object') {\n          this.extend(phrase, key);\n        } else {\n          this.phrases[key] = phrase;\n        }\n      }\n    }\n  };\n\n  // ### polyglot.clear()\n  //\n  // Clears all phrases. Useful for special cases, such as freeing\n  // up memory if you have lots of phrases but no longer need to\n  // perform any translation. Also used internally by `replace`.\n  Polyglot.prototype.clear = function() {\n    this.phrases = {};\n  };\n\n  // ### polyglot.replace(phrases)\n  //\n  // Completely replace the existing phrases with a new set of phrases.\n  // Normally, just use `extend` to add more phrases, but under certain\n  // circumstances, you may want to make sure no old phrases are lying around.\n  Polyglot.prototype.replace = function(newPhrases) {\n    this.clear();\n    this.extend(newPhrases);\n  };\n\n\n  // ### polyglot.t(key, options)\n  //\n  // The most-used method. Provide a key, and `t` will return the\n  // phrase.\n  //\n  //     polyglot.t(\"hello\");\n  //     => \"Hello\"\n  //\n  // The phrase value is provided first by a call to `polyglot.extend()` or\n  // `polyglot.replace()`.\n  //\n  // Pass in an object as the second argument to perform interpolation.\n  //\n  //     polyglot.t(\"hello_name\", {name: \"Spike\"});\n  //     => \"Hello, Spike\"\n  //\n  // If you like, you can provide a default value in case the phrase is missing.\n  // Use the special option key \"_\" to specify a default.\n  //\n  //     polyglot.t(\"i_like_to_write_in_language\", {\n  //       _: \"I like to write in %{language}.\",\n  //       language: \"JavaScript\"\n  //     });\n  //     => \"I like to write in JavaScript.\"\n  //\n  Polyglot.prototype.t = function(key, options) {\n    var phrase, result;\n    options = options == null ? {} : options;\n    // allow number as a pluralization shortcut\n    if (typeof options === 'number') {\n      options = {smart_count: options};\n    }\n    if (typeof this.phrases[key] === 'string') {\n      phrase = this.phrases[key];\n    } else if (typeof options._ === 'string') {\n      phrase = options._;\n    } else if (this.allowMissing) {\n      phrase = key;\n    } else {\n      this.warn('Missing translation for key: \"'+key+'\"');\n      result = key;\n    }\n    if (typeof phrase === 'string') {\n      options = clone(options);\n      result = choosePluralForm(phrase, this.currentLocale, options.smart_count);\n      result = interpolate(result, options);\n    }\n    return result;\n  };\n\n\n  // ### polyglot.has(key)\n  //\n  // Check if polyglot has a translation for given key\n  Polyglot.prototype.has = function(key) {\n    return key in this.phrases;\n  };\n\n\n  // #### Pluralization methods\n  // The string that separates the different phrase possibilities.\n  var delimeter = '||||';\n\n  // Mapping from pluralization group plural logic.\n  var pluralTypes = {\n    chinese:   function(n) { return 0; },\n    german:    function(n) { return n !== 1 ? 1 : 0; },\n    french:    function(n) { return n > 1 ? 1 : 0; },\n    russian:   function(n) { return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2; },\n    czech:     function(n) { return (n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2; },\n    polish:    function(n) { return (n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2); },\n    icelandic: function(n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; }\n  };\n\n  // Mapping from pluralization group to individual locales.\n  var pluralTypeToLanguages = {\n    chinese:   ['fa', 'id', 'ja', 'ko', 'lo', 'ms', 'th', 'tr', 'zh'],\n    german:    ['da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hu', 'it', 'nl', 'no', 'pt', 'sv'],\n    french:    ['fr', 'tl', 'pt-br'],\n    russian:   ['hr', 'ru'],\n    czech:     ['cs'],\n    polish:    ['pl'],\n    icelandic: ['is']\n  };\n\n  function langToTypeMap(mapping) {\n    var type, langs, l, ret = {};\n    for (type in mapping) {\n      if (mapping.hasOwnProperty(type)) {\n        langs = mapping[type];\n        for (l in langs) {\n          ret[langs[l]] = type;\n        }\n      }\n    }\n    return ret;\n  }\n\n  // Trim a string.\n  function trim(str){\n    var trimRe = /^\\s+|\\s+$/g;\n    return str.replace(trimRe, '');\n  }\n\n  // Based on a phrase text that contains `n` plural forms separated\n  // by `delimeter`, a `locale`, and a `count`, choose the correct\n  // plural form, or none if `count` is `null`.\n  function choosePluralForm(text, locale, count){\n    var ret, texts, chosenText;\n    if (count != null && text) {\n      texts = text.split(delimeter);\n      chosenText = texts[pluralTypeIndex(locale, count)] || texts[0];\n      ret = trim(chosenText);\n    } else {\n      ret = text;\n    }\n    return ret;\n  }\n\n  function pluralTypeName(locale) {\n    var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n    return langToPluralType[locale] || langToPluralType.en;\n  }\n\n  function pluralTypeIndex(locale, count) {\n    return pluralTypes[pluralTypeName(locale)](count);\n  }\n\n  // ### interpolate\n  //\n  // Does the dirty work. Creates a `RegExp` object for each\n  // interpolation placeholder.\n  function interpolate(phrase, options) {\n    for (var arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = phrase.replace(new RegExp('%\\\\{'+arg+'\\\\}', 'g'), options[arg]);\n      }\n    }\n    return phrase;\n  }\n\n  // ### warn\n  //\n  // Provides a warning in the console if a phrase key is missing.\n  function warn(message) {\n    root.console && root.console.warn && root.console.warn('WARNING: ' + message);\n  }\n\n  // ### clone\n  //\n  // Clone an object.\n  function clone(source) {\n    var ret = {};\n    for (var prop in source) {\n      ret[prop] = source[prop];\n    }\n    return ret;\n  }\n\n  return Polyglot;\n}));\n\n\n/***/ }),\n/* 153 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalk 加载中 ...\",\"no-found-related\":\"未找到相关的 %{link} 进行评论\",\"please-contact\":\"请联系 %{user} 初始化创建\",\"init-issue\":\"初始化 Issue\",\"leave-a-comment\":\"说点什么\",\"preview\":\"预览\",\"edit\":\"编辑\",\"comment\":\"评论\",\"support-markdown\":\"支持 Markdown 语法\",\"login-with-github\":\"使用 GitHub 登录\",\"first-comment-person\":\"来做第一个留言的人吧！\",\"commented\":\"发表于\",\"load-more\":\"加载更多\",\"counts\":\"%{counts} 条评论\",\"sort-asc\":\"从旧到新排序\",\"sort-desc\":\"从新到旧排序\",\"logout\":\"注销\",\"anonymous\":\"未登录用户\"}\n\n/***/ }),\n/* 154 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalk 載入中…\",\"no-found-related\":\"未找到相關的 %{link}\",\"please-contact\":\"請聯絡 %{user} 初始化評論\",\"init-issue\":\"初始化 Issue\",\"leave-a-comment\":\"寫點什麼\",\"preview\":\"預覽\",\"edit\":\"編輯\",\"comment\":\"評論\",\"support-markdown\":\"支援 Markdown 語法\",\"login-with-github\":\"使用 GitHub 登入\",\"first-comment-person\":\"成為首個留言的人吧！\",\"commented\":\"評論於\",\"load-more\":\"載入更多\",\"counts\":\"%{counts} 筆評論\",\"sort-asc\":\"從舊至新排序\",\"sort-desc\":\"從新至舊排序\",\"logout\":\"登出\",\"anonymous\":\"訪客\"}\n\n/***/ }),\n/* 155 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Related %{link} not found\",\"please-contact\":\"Please contact %{user} to initialize the comment\",\"init-issue\":\"Init Issue\",\"leave-a-comment\":\"Leave a comment\",\"preview\":\"Preview\",\"edit\":\"Edit\",\"comment\":\"Comment\",\"support-markdown\":\"Markdown is supported\",\"login-with-github\":\"Login with GitHub\",\"first-comment-person\":\"Be the first person to leave a comment!\",\"commented\":\"commented\",\"load-more\":\"Load more\",\"counts\":\"%{counts} comment |||| %{counts} comments\",\"sort-asc\":\"Sort by Oldest\",\"sort-desc\":\"Sort by Latest\",\"logout\":\"Logout\",\"anonymous\":\"Anonymous\"}\n\n/***/ }),\n/* 156 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Link %{link} no encontrado\",\"please-contact\":\"Por favor contacta con %{user} para inicializar el comentario\",\"init-issue\":\"Iniciar Issue\",\"leave-a-comment\":\"Deja un comentario\",\"preview\":\"Avance\",\"edit\":\"Editar\",\"comment\":\"Comentario\",\"support-markdown\":\"Markdown es soportado\",\"login-with-github\":\"Entrar con GitHub\",\"first-comment-person\":\"Sé el primero en dejar un comentario!\",\"commented\":\"comentó\",\"load-more\":\"Cargar más\",\"counts\":\"%{counts} comentario |||| %{counts} comentarios\",\"sort-asc\":\"Ordenar por Antiguos\",\"sort-desc\":\"Ordenar por Recientes\",\"logout\":\"Salir\",\"anonymous\":\"Anónimo\"}\n\n/***/ }),\n/* 157 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Lien %{link} non trouvé\",\"please-contact\":\"S’il vous plaît contactez %{user} pour initialiser les commentaires\",\"init-issue\":\"Initialisation des issues\",\"leave-a-comment\":\"Laisser un commentaire\",\"preview\":\"Aperçu\",\"edit\":\"Modifier\",\"comment\":\"Commentaire\",\"support-markdown\":\"Markdown est supporté\",\"login-with-github\":\"Se connecter avec GitHub\",\"first-comment-person\":\"Être le premier à laisser un commentaire !\",\"commented\":\"commenter\",\"load-more\":\"Charger plus\",\"counts\":\"%{counts} commentaire |||| %{counts} commentaires\",\"sort-asc\":\"Trier par plus ancien\",\"sort-desc\":\"Trier par plus récent\",\"logout\":\"Déconnexion\",\"anonymous\":\"Anonyme\"}\n\n/***/ }),\n/* 158 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Связанные %{link} не найдены\",\"please-contact\":\"Пожалуйста, свяжитесь с %{user} чтобы инициализировать комментарий\",\"init-issue\":\"Выпуск инициализации\",\"leave-a-comment\":\"Оставить комментарий\",\"preview\":\"Предварительный просмотр\",\"edit\":\"Pедактировать\",\"comment\":\"Комментарий\",\"support-markdown\":\"Поддерживается Markdown\",\"login-with-github\":\"Вход через GitHub\",\"first-comment-person\":\"Будьте первым, кто оставил комментарий\",\"commented\":\"прокомментированный\",\"load-more\":\"Загрузить ещё\",\"counts\":\"%{counts} комментарий |||| %{counts} комментарьев\",\"sort-asc\":\"Сортировать по старым\",\"sort-desc\":\"Сортировать по последним\",\"logout\":\"Выход\",\"anonymous\":\"Анонимный\"}\n\n/***/ }),\n/* 159 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"init\":\"Gitalking ...\",\"no-found-related\":\"Zugehöriger %{link} nicht gefunden\",\"please-contact\":\"Bitte kontaktiere %{user} um den Kommentar zu initialisieren\",\"init-issue\":\"Initialisiere Issue\",\"leave-a-comment\":\"Hinterlasse einen Kommentar\",\"preview\":\"Vorschau\",\"edit\":\"Editieren\",\"comment\":\"Kommentieren\",\"support-markdown\":\"Markdown wird unterstützt\",\"login-with-github\":\"Mit GitHub-Account anmelden\",\"first-comment-person\":\"Sei die erste Person, welche einen Kommentar hinterlässt!\",\"commented\":\"kommentierte\",\"load-more\":\"Zeige mehr\",\"counts\":\"%{counts} Kommentar |||| %{counts} Kommentare\",\"sort-asc\":\"Älteste zuerst\",\"sort-desc\":\"Neuste zuerst\",\"logout\":\"Abmelden\",\"anonymous\":\"Anonym\"}\n\n/***/ }),\n/* 160 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 161 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(162), __esModule: true };\n\n/***/ }),\n/* 162 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(163);\nmodule.exports = __webpack_require__(0).Object.keys;\n\n\n/***/ }),\n/* 163 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// 19.1.2.14 Object.keys(O)\nvar toObject = __webpack_require__(17);\nvar $keys = __webpack_require__(22);\n\n__webpack_require__(65)('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n/***/ }),\n/* 164 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _isIterable2 = __webpack_require__(165);\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = __webpack_require__(168);\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n/***/ }),\n/* 165 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(166), __esModule: true };\n\n/***/ }),\n/* 166 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(27);\n__webpack_require__(20);\nmodule.exports = __webpack_require__(167);\n\n\n/***/ }),\n/* 167 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar classof = __webpack_require__(41);\nvar ITERATOR = __webpack_require__(2)('iterator');\nvar Iterators = __webpack_require__(15);\nmodule.exports = __webpack_require__(0).isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/***/ }),\n/* 168 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(169), __esModule: true };\n\n/***/ }),\n/* 169 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(27);\n__webpack_require__(20);\nmodule.exports = __webpack_require__(170);\n\n\n/***/ }),\n/* 170 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar anObject = __webpack_require__(6);\nvar get = __webpack_require__(42);\nmodule.exports = __webpack_require__(0).getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/***/ }),\n/* 171 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(172);\n\n/***/ }),\n/* 172 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar bind = __webpack_require__(72);\nvar Axios = __webpack_require__(173);\nvar mergeConfig = __webpack_require__(78);\nvar defaults = __webpack_require__(75);\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = __webpack_require__(79);\naxios.CancelToken = __webpack_require__(186);\naxios.isCancel = __webpack_require__(74);\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = __webpack_require__(187);\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n\n\n/***/ }),\n/* 173 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar buildURL = __webpack_require__(73);\nvar InterceptorManager = __webpack_require__(174);\nvar dispatchRequest = __webpack_require__(175);\nvar mergeConfig = __webpack_require__(78);\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n\n\n/***/ }),\n/* 174 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n\n/***/ }),\n/* 175 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\nvar transformData = __webpack_require__(176);\nvar isCancel = __webpack_require__(74);\nvar defaults = __webpack_require__(75);\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n\n/***/ }),\n/* 176 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n\n\n/***/ }),\n/* 177 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n\n/***/ }),\n/* 178 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar createError = __webpack_require__(77);\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n\n\n/***/ }),\n/* 179 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n\n\n/***/ }),\n/* 180 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isAbsoluteURL = __webpack_require__(181);\nvar combineURLs = __webpack_require__(182);\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n\n\n/***/ }),\n/* 181 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n\n/***/ }),\n/* 182 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n\n\n/***/ }),\n/* 183 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n\n\n/***/ }),\n/* 184 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n\n\n/***/ }),\n/* 185 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar utils = __webpack_require__(3);\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n\n\n/***/ }),\n/* 186 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Cancel = __webpack_require__(79);\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n\n/***/ }),\n/* 187 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n\n/***/ }),\n/* 188 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      getRef = _ref.getRef,\n      onClick = _ref.onClick,\n      onMouseDown = _ref.onMouseDown,\n      text = _ref.text,\n      isLoading = _ref.isLoading;\n  return _react2.default.createElement(\n    \"button\",\n    {\n      ref: function ref(el) {\n        return getRef && getRef(el);\n      },\n      className: \"gt-btn \" + className,\n      onClick: onClick,\n      onMouseDown: onMouseDown },\n    _react2.default.createElement(\n      \"span\",\n      { className: \"gt-btn-text\" },\n      text\n    ),\n    isLoading && _react2.default.createElement(\"span\", { className: \"gt-btn-loading gt-spinner\" })\n  );\n};\n\n/***/ }),\n/* 189 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (_ref) {\n  var className = _ref.className,\n      onClick = _ref.onClick,\n      text = _ref.text;\n  return _react2.default.createElement(\n    \"a\",\n    { className: \"gt-action \" + className, onClick: onClick },\n    _react2.default.createElement(\n      \"span\",\n      { className: \"gt-action-text\" },\n      text\n    )\n  );\n};\n\n/***/ }),\n/* 190 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(64);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(29);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(30);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(66);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(70);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _avatar = __webpack_require__(80);\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nvar _svg = __webpack_require__(81);\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _distance_in_words_to_now = __webpack_require__(199);\n\nvar _distance_in_words_to_now2 = _interopRequireDefault(_distance_in_words_to_now);\n\nvar _index = __webpack_require__(212);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(213);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _index5 = __webpack_require__(214);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _index7 = __webpack_require__(215);\n\nvar _index8 = _interopRequireDefault(_index7);\n\nvar _index9 = __webpack_require__(216);\n\nvar _index10 = _interopRequireDefault(_index9);\n\n__webpack_require__(217);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ZHCN = (0, _index2.default)();\nvar ZHTW = (0, _index4.default)();\nvar ES = (0, _index6.default)();\nvar FR = (0, _index8.default)();\nvar RU = (0, _index10.default)();\n\nif (typeof window !== 'undefined') {\n  window.GT_i18n_distanceInWordsLocaleMap = {\n    zh: ZHCN,\n    'zh-CN': ZHCN,\n    'zh-TW': ZHTW,\n    'es-ES': ES,\n    fr: FR,\n    ru: RU\n  };\n}\n\nvar Comment = function (_Component) {\n  (0, _inherits3.default)(Comment, _Component);\n\n  function Comment() {\n    (0, _classCallCheck3.default)(this, Comment);\n    return (0, _possibleConstructorReturn3.default)(this, (Comment.__proto__ || (0, _getPrototypeOf2.default)(Comment)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Comment, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var comment = this.node;\n      var emailResponse = comment.querySelector('.email-hidden-toggle>a');\n      if (emailResponse) {\n        emailResponse.addEventListener('click', function (e) {\n          e.preventDefault();\n          comment.querySelector('.email-hidden-reply').classList.toggle('expanded');\n        }, true);\n      }\n    }\n  }, {\n    key: 'handleImageErrored',\n    value: function handleImageErrored(obj) {\n      obj.target.src = \"https://cdn.jsdelivr.net/npm/gitalk@1/src/assets/icon/github.svg\";\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          comment = _props.comment,\n          user = _props.user,\n          language = _props.language,\n          _props$commentedText = _props.commentedText,\n          commentedText = _props$commentedText === undefined ? '' : _props$commentedText,\n          _props$admin = _props.admin,\n          admin = _props$admin === undefined ? [] : _props$admin,\n          replyCallback = _props.replyCallback,\n          likeCallback = _props.likeCallback;\n\n      var enableEdit = user && comment.user.login === user.login;\n      var isAdmin = ~[].concat(admin).map(function (a) {\n        return a.toLowerCase();\n      }).indexOf(comment.user.login.toLowerCase());\n      var reactions = comment.reactions;\n\n      var reactionTotalCount = '';\n      if (reactions && reactions.totalCount) {\n        reactionTotalCount = reactions.totalCount;\n        if (reactions.totalCount === 100 && reactions.pageInfo && reactions.pageInfo.hasNextPage) {\n          reactionTotalCount = '100+';\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { ref: function ref(node) {\n            _this2.node = node;\n          }, className: 'gt-comment ' + (isAdmin ? 'gt-comment-admin' : '') },\n        _react2.default.createElement(_avatar2.default, {\n          className: 'gt-comment-avatar',\n          src: comment.user && comment.user.avatar_url,\n          alt: comment.user && comment.user.login,\n          onError: this.handleImageErrored.bind(this)\n        }),\n        _react2.default.createElement(\n          'div',\n          { className: 'gt-comment-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'gt-comment-header' },\n            _react2.default.createElement('div', { className: 'gt-comment-block-' + (user ? '2' : '1') }),\n            _react2.default.createElement(\n              'a',\n              {\n                className: 'gt-comment-username',\n                href: comment.user && comment.user.html_url\n              },\n              comment.user && comment.user.login\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-comment-text' },\n              commentedText\n            ),\n            _react2.default.createElement(\n              'span',\n              { className: 'gt-comment-date' },\n              (0, _distance_in_words_to_now2.default)(comment.created_at, {\n                addSuffix: true,\n                locale: {\n                  distanceInWords: window.GT_i18n_distanceInWordsLocaleMap[language]\n                }\n              })\n            ),\n            reactions && _react2.default.createElement(\n              'a',\n              { className: 'gt-comment-like', title: 'Like', onClick: likeCallback },\n              reactions.viewerHasReacted ? _react2.default.createElement(_svg2.default, {\n                className: 'gt-ico-heart',\n                name: 'heart_on',\n                text: reactionTotalCount\n              }) : _react2.default.createElement(_svg2.default, {\n                className: 'gt-ico-heart',\n                name: 'heart',\n                text: reactionTotalCount\n              })\n            ),\n            enableEdit ? _react2.default.createElement(\n              'a',\n              {\n                href: comment.html_url,\n                className: 'gt-comment-edit',\n                title: 'Edit',\n                target: '_blank'\n              },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-edit', name: 'edit' })\n            ) : _react2.default.createElement(\n              'a',\n              { className: 'gt-comment-reply', title: 'Reply', onClick: replyCallback },\n              _react2.default.createElement(_svg2.default, { className: 'gt-ico-reply', name: 'reply' })\n            )\n          ),\n          _react2.default.createElement('div', {\n            className: 'gt-comment-body markdown-body',\n            dangerouslySetInnerHTML: {\n              __html: comment.body_html\n            }\n          })\n        )\n      );\n    }\n  }]);\n  return Comment;\n}(_react.Component);\n\nexports.default = Comment;\n\n/***/ }),\n/* 191 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./arrow_down.svg\": 192,\n\t\"./edit.svg\": 193,\n\t\"./github.svg\": 194,\n\t\"./heart.svg\": 195,\n\t\"./heart_on.svg\": 196,\n\t\"./reply.svg\": 197,\n\t\"./tip.svg\": 198\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 191;\n\n/***/ }),\n/* 192 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"1619\\\"><path d=\\\"M511.872 676.8c-0.003 0-0.006 0-0.008 0-9.137 0-17.379-3.829-23.21-9.97l-251.277-265.614c-5.415-5.72-8.743-13.464-8.744-21.984 0-17.678 14.33-32.008 32.008-32.008 9.157 0 17.416 3.845 23.25 10.009l228.045 241.103 228.224-241.088c5.855-6.165 14.113-10.001 23.266-10.001 8.516 0 16.256 3.32 21.998 8.736 12.784 12.145 13.36 32.434 1.264 45.233l-251.52 265.6c-5.844 6.155-14.086 9.984-23.223 9.984-0.025 0-0.051 0-0.076 0z\\\" p-id=\\\"1620\\\"></path></svg>\"\n\n/***/ }),\n/* 193 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M785.333333 85.333333C774.666667 85.333333 763.2 90.133333 754.666667 98.666667L682.666667 170.666667 853.333333 341.333333 925.333333 269.333333C942.4 252.266667 942.4 222.133333 925.333333 209.333333L814.666667 98.666667C806.133333 90.133333 796 85.333333 785.333333 85.333333zM640 217.333333 85.333333 768 85.333333 938.666667 256 938.666667 806.666667 384 640 217.333333z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 194 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M64 524C64 719.602 189.356 885.926 364.113 947.017 387.65799 953 384 936.115 384 924.767L384 847.107C248.118 863.007 242.674 773.052 233.5 758.001 215 726.501 171.5 718.501 184.5 703.501 215.5 687.501 247 707.501 283.5 761.501 309.956 800.642 361.366 794.075 387.658 787.497 393.403 763.997 405.637 743.042 422.353 726.638 281.774 701.609 223 615.67 223 513.5 223 464.053 239.322 418.406 271.465 381.627 251.142 320.928 273.421 269.19 276.337 261.415 334.458 256.131 394.888 302.993 399.549 306.685 432.663 297.835 470.341 293 512.5 293 554.924 293 592.81 297.896 626.075 306.853 637.426 298.219 693.46 258.054 747.5 262.966 750.382 270.652 772.185 321.292 753.058 381.083 785.516 417.956 802 463.809 802 513.5 802 615.874 742.99 701.953 601.803 726.786 625.381 750.003 640 782.295 640 818.008L640 930.653C640.752 939.626 640 948.664978 655.086 948.665 832.344 888.962 960 721.389 960 524 960 276.576 759.424 76 512 76 264.577 76 64 276.576 64 524Z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 195 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n  <path d=\\\"M527.061333 166.528A277.333333 277.333333 0 0 1 1000.618667 362.666667a277.333333 277.333333 0 0 1-81.28 196.138666l-377.173334 377.173334a42.666667 42.666667 0 0 1-60.330666 0l-377.173334-377.173334a277.376 277.376 0 0 1 392.277334-392.277333l15.061333 15.061333 15.061333-15.061333z m286.72 377.173333l45.226667-45.226666a192 192 0 0 0-135.808-327.893334 192 192 0 0 0-135.808 56.32l-45.226667 45.226667a42.666667 42.666667 0 0 1-60.330666 0l-45.226667-45.226667a192.042667 192.042667 0 0 0-271.616 271.573334L512 845.482667l301.781333-301.781334z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 196 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg t=\\\"1512463363724\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n  <path d=\\\"M527.061333 166.528A277.333333 277.333333 0 0 1 1000.618667 362.666667a277.333333 277.333333 0 0 1-81.28 196.138666l-377.173334 377.173334a42.666667 42.666667 0 0 1-60.330666 0l-377.173334-377.173334a277.376 277.376 0 0 1 392.277334-392.277333l15.061333 15.061333 15.061333-15.061333z\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 197 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1332 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M529.066665 273.066666 529.066665 0 51.2 477.866666 529.066665 955.733335 529.066665 675.84C870.4 675.84 1109.333335 785.066665 1280 1024 1211.733335 682.666665 1006.933335 341.333334 529.066665 273.066666\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 198 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path d=\\\"M512 366.949535c-16.065554 0-29.982212 13.405016-29.982212 29.879884l0 359.070251c0 16.167882 13.405016 29.879884 29.982212 29.879884 15.963226 0 29.879884-13.405016 29.879884-29.879884L541.879884 396.829419C541.879884 380.763865 528.474868 366.949535 512 366.949535L512 366.949535z\\\"\\n    p-id=\\\"3083\\\"></path>\\n  <path d=\\\"M482.017788 287.645048c0-7.776956 3.274508-15.553912 8.80024-21.181973 5.525732-5.525732 13.302688-8.80024 21.181973-8.80024 7.776956 0 15.553912 3.274508 21.079644 8.80024 5.525732 5.62806 8.80024 13.405016 8.80024 21.181973 0 7.776956-3.274508 15.656241-8.80024 21.181973-5.525732 5.525732-13.405016 8.697911-21.079644 8.697911-7.879285 0-15.656241-3.274508-21.181973-8.697911C485.292295 303.301289 482.017788 295.524333 482.017788 287.645048L482.017788 287.645048z\\\"\\n    p-id=\\\"3084\\\"></path>\\n  <path d=\\\"M512 946.844409c-239.8577 0-434.895573-195.037873-434.895573-434.895573 0-239.8577 195.037873-434.895573 434.895573-434.895573 239.755371 0 434.895573 195.037873 434.895573 434.895573C946.895573 751.806535 751.755371 946.844409 512 946.844409zM512 126.17088c-212.740682 0-385.880284 173.037274-385.880284 385.777955 0 212.740682 173.037274 385.777955 385.880284 385.777955 212.740682 0 385.777955-173.037274 385.777955-385.777955C897.777955 299.208154 724.740682 126.17088 512 126.17088z\\\"\\n    p-id=\\\"3085\\\"></path>\\n</svg>\\n\"\n\n/***/ }),\n/* 199 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distanceInWords = __webpack_require__(200)\n\n/**\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * @param {Date|String|Number} date - the given date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result specifies if the second date is earlier or later than the first\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the distance in words\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * var result = distanceInWordsToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * var result = distanceInWordsToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * var result = distanceInWordsToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * var eoLocale = require('date-fns/locale/eo')\n * var result = distanceInWordsToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nfunction distanceInWordsToNow (dirtyDate, dirtyOptions) {\n  return distanceInWords(Date.now(), dirtyDate, dirtyOptions)\n}\n\nmodule.exports = distanceInWordsToNow\n\n\n/***/ }),\n/* 200 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar compareDesc = __webpack_require__(201)\nvar parse = __webpack_require__(18)\nvar differenceInSeconds = __webpack_require__(203)\nvar differenceInMonths = __webpack_require__(205)\nvar enLocale = __webpack_require__(208)\n\nvar MINUTES_IN_DAY = 1440\nvar MINUTES_IN_ALMOST_TWO_DAYS = 2520\nvar MINUTES_IN_MONTH = 43200\nvar MINUTES_IN_TWO_MONTHS = 86400\n\n/**\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @param {Date|String|Number} dateToCompare - the date to compare with\n * @param {Date|String|Number} date - the other date\n * @param {Object} [options] - the object with options\n * @param {Boolean} [options.includeSeconds=false] - distances less than a minute are more detailed\n * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the distance in words\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * var result = distanceInWords(\n *   new Date(2014, 6, 2),\n *   new Date(2015, 0, 1)\n * )\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * var result = distanceInWords(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * var result = distanceInWords(\n *   new Date(2016, 0, 1),\n *   new Date(2015, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * var eoLocale = require('date-fns/locale/eo')\n * var result = distanceInWords(\n *   new Date(2016, 7, 1),\n *   new Date(2015, 0, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nfunction distanceInWords (dirtyDateToCompare, dirtyDate, dirtyOptions) {\n  var options = dirtyOptions || {}\n\n  var comparison = compareDesc(dirtyDateToCompare, dirtyDate)\n\n  var locale = options.locale\n  var localize = enLocale.distanceInWords.localize\n  if (locale && locale.distanceInWords && locale.distanceInWords.localize) {\n    localize = locale.distanceInWords.localize\n  }\n\n  var localizeOptions = {\n    addSuffix: Boolean(options.addSuffix),\n    comparison: comparison\n  }\n\n  var dateLeft, dateRight\n  if (comparison > 0) {\n    dateLeft = parse(dirtyDateToCompare)\n    dateRight = parse(dirtyDate)\n  } else {\n    dateLeft = parse(dirtyDate)\n    dateRight = parse(dirtyDateToCompare)\n  }\n\n  var seconds = differenceInSeconds(dateRight, dateLeft)\n  var offset = dateRight.getTimezoneOffset() - dateLeft.getTimezoneOffset()\n  var minutes = Math.round(seconds / 60) - offset\n  var months\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options.includeSeconds) {\n      if (seconds < 5) {\n        return localize('lessThanXSeconds', 5, localizeOptions)\n      } else if (seconds < 10) {\n        return localize('lessThanXSeconds', 10, localizeOptions)\n      } else if (seconds < 20) {\n        return localize('lessThanXSeconds', 20, localizeOptions)\n      } else if (seconds < 40) {\n        return localize('halfAMinute', null, localizeOptions)\n      } else if (seconds < 60) {\n        return localize('lessThanXMinutes', 1, localizeOptions)\n      } else {\n        return localize('xMinutes', 1, localizeOptions)\n      }\n    } else {\n      if (minutes === 0) {\n        return localize('lessThanXMinutes', 1, localizeOptions)\n      } else {\n        return localize('xMinutes', minutes, localizeOptions)\n      }\n    }\n\n  // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return localize('xMinutes', minutes, localizeOptions)\n\n  // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return localize('aboutXHours', 1, localizeOptions)\n\n  // 1.5 hrs up to 24 hrs\n  } else if (minutes < MINUTES_IN_DAY) {\n    var hours = Math.round(minutes / 60)\n    return localize('aboutXHours', hours, localizeOptions)\n\n  // 1 day up to 1.75 days\n  } else if (minutes < MINUTES_IN_ALMOST_TWO_DAYS) {\n    return localize('xDays', 1, localizeOptions)\n\n  // 1.75 days up to 30 days\n  } else if (minutes < MINUTES_IN_MONTH) {\n    var days = Math.round(minutes / MINUTES_IN_DAY)\n    return localize('xDays', days, localizeOptions)\n\n  // 1 month up to 2 months\n  } else if (minutes < MINUTES_IN_TWO_MONTHS) {\n    months = Math.round(minutes / MINUTES_IN_MONTH)\n    return localize('aboutXMonths', months, localizeOptions)\n  }\n\n  months = differenceInMonths(dateRight, dateLeft)\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    var nearestMonth = Math.round(minutes / MINUTES_IN_MONTH)\n    return localize('xMonths', nearestMonth, localizeOptions)\n\n  // 1 year up to max Date\n  } else {\n    var monthsSinceStartOfYear = months % 12\n    var years = Math.floor(months / 12)\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return localize('aboutXYears', years, localizeOptions)\n\n    // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return localize('overXYears', years, localizeOptions)\n\n    // N years 9 months up to N year 12 months\n    } else {\n      return localize('almostXYears', years + 1, localizeOptions)\n    }\n  }\n}\n\nmodule.exports = distanceInWords\n\n\n/***/ }),\n/* 201 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Common Helpers\n * @summary Compare the two dates reverse chronologically and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return -1 if the first date is after the second,\n * 1 if the first date is before the second or 0 if dates are equal.\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989 reverse chronologically:\n * var result = compareDesc(\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * )\n * //=> 1\n *\n * @example\n * // Sort the array of dates in reverse chronological order:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareDesc)\n * //=> [\n * //   Sun Jul 02 1995 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Wed Feb 11 1987 00:00:00\n * // ]\n */\nfunction compareDesc (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var timeLeft = dateLeft.getTime()\n  var dateRight = parse(dirtyDateRight)\n  var timeRight = dateRight.getTime()\n\n  if (timeLeft > timeRight) {\n    return -1\n  } else if (timeLeft < timeRight) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nmodule.exports = compareDesc\n\n\n/***/ }),\n/* 202 */\n/***/ (function(module, exports) {\n\n/**\n * @category Common Helpers\n * @summary Is the given argument an instance of Date?\n *\n * @description\n * Is the given argument an instance of Date?\n *\n * @param {*} argument - the argument to check\n * @returns {Boolean} the given argument is an instance of Date\n *\n * @example\n * // Is 'mayonnaise' a Date?\n * var result = isDate('mayonnaise')\n * //=> false\n */\nfunction isDate (argument) {\n  return argument instanceof Date\n}\n\nmodule.exports = isDate\n\n\n/***/ }),\n/* 203 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar differenceInMilliseconds = __webpack_require__(204)\n\n/**\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * var result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nfunction differenceInSeconds (dirtyDateLeft, dirtyDateRight) {\n  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / 1000\n  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)\n}\n\nmodule.exports = differenceInSeconds\n\n\n/***/ }),\n/* 204 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * var result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nfunction differenceInMilliseconds (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n  return dateLeft.getTime() - dateRight.getTime()\n}\n\nmodule.exports = differenceInMilliseconds\n\n\n/***/ }),\n/* 205 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\nvar differenceInCalendarMonths = __webpack_require__(206)\nvar compareAsc = __webpack_require__(207)\n\n/**\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @description\n * Get the number of full months between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 7\n */\nfunction differenceInMonths (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n\n  var sign = compareAsc(dateLeft, dateRight)\n  var difference = Math.abs(differenceInCalendarMonths(dateLeft, dateRight))\n  dateLeft.setMonth(dateLeft.getMonth() - sign * difference)\n\n  // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full\n  // If so, result must be decreased by 1 in absolute value\n  var isLastMonthNotFull = compareAsc(dateLeft, dateRight) === -sign\n  return sign * (difference - isLastMonthNotFull)\n}\n\nmodule.exports = differenceInMonths\n\n\n/***/ }),\n/* 206 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Month Helpers\n * @summary Get the number of calendar months between the given dates.\n *\n * @description\n * Get the number of calendar months between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar months\n *\n * @example\n * // How many calendar months are between 31 January 2014 and 1 September 2014?\n * var result = differenceInCalendarMonths(\n *   new Date(2014, 8, 1),\n *   new Date(2014, 0, 31)\n * )\n * //=> 8\n */\nfunction differenceInCalendarMonths (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n\n  var yearDiff = dateLeft.getFullYear() - dateRight.getFullYear()\n  var monthDiff = dateLeft.getMonth() - dateRight.getMonth()\n\n  return yearDiff * 12 + monthDiff\n}\n\nmodule.exports = differenceInCalendarMonths\n\n\n/***/ }),\n/* 207 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar parse = __webpack_require__(18)\n\n/**\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * var result = compareAsc(\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * )\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * var result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nfunction compareAsc (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var timeLeft = dateLeft.getTime()\n  var dateRight = parse(dirtyDateRight)\n  var timeRight = dateRight.getTime()\n\n  if (timeLeft < timeRight) {\n    return -1\n  } else if (timeLeft > timeRight) {\n    return 1\n  } else {\n    return 0\n  }\n}\n\nmodule.exports = compareAsc\n\n\n/***/ }),\n/* 208 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar buildDistanceInWordsLocale = __webpack_require__(209)\nvar buildFormatLocale = __webpack_require__(210)\n\n/**\n * @category Locales\n * @summary English locale.\n */\nmodule.exports = {\n  distanceInWords: buildDistanceInWordsLocale(),\n  format: buildFormatLocale()\n}\n\n\n/***/ }),\n/* 209 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'less than a second',\n      other: 'less than {{count}} seconds'\n    },\n\n    xSeconds: {\n      one: '1 second',\n      other: '{{count}} seconds'\n    },\n\n    halfAMinute: 'half a minute',\n\n    lessThanXMinutes: {\n      one: 'less than a minute',\n      other: 'less than {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'about 1 hour',\n      other: 'about {{count}} hours'\n    },\n\n    xHours: {\n      one: '1 hour',\n      other: '{{count}} hours'\n    },\n\n    xDays: {\n      one: '1 day',\n      other: '{{count}} days'\n    },\n\n    aboutXMonths: {\n      one: 'about 1 month',\n      other: 'about {{count}} months'\n    },\n\n    xMonths: {\n      one: '1 month',\n      other: '{{count}} months'\n    },\n\n    aboutXYears: {\n      one: 'about 1 year',\n      other: 'about {{count}} years'\n    },\n\n    xYears: {\n      one: '1 year',\n      other: '{{count}} years'\n    },\n\n    overXYears: {\n      one: 'over 1 year',\n      other: 'over {{count}} years'\n    },\n\n    almostXYears: {\n      one: 'almost 1 year',\n      other: 'almost {{count}} years'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'in ' + result\n      } else {\n        return result + ' ago'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 210 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar buildFormattingTokensRegExp = __webpack_require__(211)\n\nfunction buildFormatLocale () {\n  // Note: in English, the names of days of the week and months are capitalized.\n  // If you are making a new locale based on this one, check if the same is true for the language you're working on.\n  // Generally, formatted dates should look like they are in the middle of a sentence,\n  // e.g. in Spanish language the weekdays and months should be in the lowercase.\n  var months3char = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  var monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n  var weekdays2char = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']\n  var weekdays3char = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  var weekdaysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n  var meridiemUppercase = ['AM', 'PM']\n  var meridiemLowercase = ['am', 'pm']\n  var meridiemFull = ['a.m.', 'p.m.']\n\n  var formatters = {\n    // Month: Jan, Feb, ..., Dec\n    'MMM': function (date) {\n      return months3char[date.getMonth()]\n    },\n\n    // Month: January, February, ..., December\n    'MMMM': function (date) {\n      return monthsFull[date.getMonth()]\n    },\n\n    // Day of week: Su, Mo, ..., Sa\n    'dd': function (date) {\n      return weekdays2char[date.getDay()]\n    },\n\n    // Day of week: Sun, Mon, ..., Sat\n    'ddd': function (date) {\n      return weekdays3char[date.getDay()]\n    },\n\n    // Day of week: Sunday, Monday, ..., Saturday\n    'dddd': function (date) {\n      return weekdaysFull[date.getDay()]\n    },\n\n    // AM, PM\n    'A': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemUppercase[1] : meridiemUppercase[0]\n    },\n\n    // am, pm\n    'a': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemLowercase[1] : meridiemLowercase[0]\n    },\n\n    // a.m., p.m.\n    'aa': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemFull[1] : meridiemFull[0]\n    }\n  }\n\n  // Generate ordinal version of formatters: M -> Mo, D -> Do, etc.\n  var ordinalFormatters = ['M', 'D', 'DDD', 'd', 'Q', 'W']\n  ordinalFormatters.forEach(function (formatterToken) {\n    formatters[formatterToken + 'o'] = function (date, formatters) {\n      return ordinal(formatters[formatterToken](date))\n    }\n  })\n\n  return {\n    formatters: formatters,\n    formattingTokensRegExp: buildFormattingTokensRegExp(formatters)\n  }\n}\n\nfunction ordinal (number) {\n  var rem100 = number % 100\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st'\n      case 2:\n        return number + 'nd'\n      case 3:\n        return number + 'rd'\n    }\n  }\n  return number + 'th'\n}\n\nmodule.exports = buildFormatLocale\n\n\n/***/ }),\n/* 211 */\n/***/ (function(module, exports) {\n\nvar commonFormatterKeys = [\n  'M', 'MM', 'Q', 'D', 'DD', 'DDD', 'DDDD', 'd',\n  'E', 'W', 'WW', 'YY', 'YYYY', 'GG', 'GGGG',\n  'H', 'HH', 'h', 'hh', 'm', 'mm',\n  's', 'ss', 'S', 'SS', 'SSS',\n  'Z', 'ZZ', 'X', 'x'\n]\n\nfunction buildFormattingTokensRegExp (formatters) {\n  var formatterKeys = []\n  for (var key in formatters) {\n    if (formatters.hasOwnProperty(key)) {\n      formatterKeys.push(key)\n    }\n  }\n\n  var formattingTokens = commonFormatterKeys\n    .concat(formatterKeys)\n    .sort()\n    .reverse()\n  var formattingTokensRegExp = new RegExp(\n    '(\\\\[[^\\\\[]*\\\\])|(\\\\\\\\)?' + '(' + formattingTokens.join('|') + '|.)', 'g'\n  )\n\n  return formattingTokensRegExp\n}\n\nmodule.exports = buildFormattingTokensRegExp\n\n\n/***/ }),\n/* 212 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: '不到 1 秒',\n      other: '不到 {{count}} 秒'\n    },\n\n    xSeconds: {\n      one: '1 秒',\n      other: '{{count}} 秒'\n    },\n\n    halfAMinute: '半分钟',\n\n    lessThanXMinutes: {\n      one: '不到 1 分钟',\n      other: '不到 {{count}} 分钟'\n    },\n\n    xMinutes: {\n      one: '1 分钟',\n      other: '{{count}} 分钟'\n    },\n\n    xHours: {\n      one: '1 小时',\n      other: '{{count}} 小时'\n    },\n\n    aboutXHours: {\n      one: '大约 1 小时',\n      other: '大约 {{count}} 小时'\n    },\n\n    xDays: {\n      one: '1 天',\n      other: '{{count}} 天'\n    },\n\n    aboutXMonths: {\n      one: '大约 1 个月',\n      other: '大约 {{count}} 个月'\n    },\n\n    xMonths: {\n      one: '1 个月',\n      other: '{{count}} 个月'\n    },\n\n    aboutXYears: {\n      one: '大约 1 年',\n      other: '大约 {{count}} 年'\n    },\n\n    xYears: {\n      one: '1 年',\n      other: '{{count}} 年'\n    },\n\n    overXYears: {\n      one: '超过 1 年',\n      other: '超过 {{count}} 年'\n    },\n\n    almostXYears: {\n      one: '将近 1 年',\n      other: '将近 {{count}} 年'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return result + '内'\n      } else {\n        return result + '前'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 213 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: '少於 1 秒',\n      other: '少於 {{count}} 秒'\n    },\n\n    xSeconds: {\n      one: '1 秒',\n      other: '{{count}} 秒'\n    },\n\n    halfAMinute: '半分鐘',\n\n    lessThanXMinutes: {\n      one: '少於 1 分鐘',\n      other: '少於 {{count}} 分鐘'\n    },\n\n    xMinutes: {\n      one: '1 分鐘',\n      other: '{{count}} 分鐘'\n    },\n\n    xHours: {\n      one: '1 小時',\n      other: '{{count}} 小時'\n    },\n\n    aboutXHours: {\n      one: '大約 1 小時',\n      other: '大約 {{count}} 小時'\n    },\n\n    xDays: {\n      one: '1 天',\n      other: '{{count}} 天'\n    },\n\n    aboutXMonths: {\n      one: '大約 1 個月',\n      other: '大約 {{count}} 個月'\n    },\n\n    xMonths: {\n      one: '1 個月',\n      other: '{{count}} 個月'\n    },\n\n    aboutXYears: {\n      one: '大約 1 年',\n      other: '大約 {{count}} 年'\n    },\n\n    xYears: {\n      one: '1 年',\n      other: '{{count}} 年'\n    },\n\n    overXYears: {\n      one: '超過 1 年',\n      other: '超過 {{count}} 年'\n    },\n\n    almostXYears: {\n      one: '將近 1 年',\n      other: '將近 {{count}} 年'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return result + '內'\n      } else {\n        return result + '前'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 214 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'menos de un segundo',\n      other: 'menos de {{count}} segundos'\n    },\n\n    xSeconds: {\n      one: '1 segundo',\n      other: '{{count}} segundos'\n    },\n\n    halfAMinute: 'medio minuto',\n\n    lessThanXMinutes: {\n      one: 'menos de un minuto',\n      other: 'menos de {{count}} minutos'\n    },\n\n    xMinutes: {\n      one: '1 minuto',\n      other: '{{count}} minutos'\n    },\n\n    aboutXHours: {\n      one: 'alrededor de 1 hora',\n      other: 'alrededor de {{count}} horas'\n    },\n\n    xHours: {\n      one: '1 hora',\n      other: '{{count}} horas'\n    },\n\n    xDays: {\n      one: '1 día',\n      other: '{{count}} días'\n    },\n\n    aboutXMonths: {\n      one: 'alrededor de 1 mes',\n      other: 'alrededor de {{count}} meses'\n    },\n\n    xMonths: {\n      one: '1 mes',\n      other: '{{count}} meses'\n    },\n\n    aboutXYears: {\n      one: 'alrededor de 1 año',\n      other: 'alrededor de {{count}} años'\n    },\n\n    xYears: {\n      one: '1 año',\n      other: '{{count}} años'\n    },\n\n    overXYears: {\n      one: 'más de 1 año',\n      other: 'más de {{count}} años'\n    },\n\n    almostXYears: {\n      one: 'casi 1 año',\n      other: 'casi {{count}} años'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'en ' + result\n      } else {\n        return 'hace ' + result\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 215 */\n/***/ (function(module, exports) {\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'moins d’une seconde',\n      other: 'moins de {{count}} secondes'\n    },\n\n    xSeconds: {\n      one: '1 seconde',\n      other: '{{count}} secondes'\n    },\n\n    halfAMinute: '30 secondes',\n\n    lessThanXMinutes: {\n      one: 'moins d’une minute',\n      other: 'moins de {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'environ 1 heure',\n      other: 'environ {{count}} heures'\n    },\n\n    xHours: {\n      one: '1 heure',\n      other: '{{count}} heures'\n    },\n\n    xDays: {\n      one: '1 jour',\n      other: '{{count}} jours'\n    },\n\n    aboutXMonths: {\n      one: 'environ 1 mois',\n      other: 'environ {{count}} mois'\n    },\n\n    xMonths: {\n      one: '1 mois',\n      other: '{{count}} mois'\n    },\n\n    aboutXYears: {\n      one: 'environ 1 an',\n      other: 'environ {{count}} ans'\n    },\n\n    xYears: {\n      one: '1 an',\n      other: '{{count}} ans'\n    },\n\n    overXYears: {\n      one: 'plus d’un an',\n      other: 'plus de {{count}} ans'\n    },\n\n    almostXYears: {\n      one: 'presqu’un an',\n      other: 'presque {{count}} ans'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'dans ' + result\n      } else {\n        return 'il y a ' + result\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 216 */\n/***/ (function(module, exports) {\n\nfunction declension (scheme, count) {\n  // scheme for count=1 exists\n  if (scheme.one !== undefined && count === 1) {\n    return scheme.one\n  }\n\n  var rem10 = count % 10\n  var rem100 = count % 100\n\n  // 1, 21, 31, ...\n  if (rem10 === 1 && rem100 !== 11) {\n    return scheme.singularNominative.replace('{{count}}', count)\n\n  // 2, 3, 4, 22, 23, 24, 32 ...\n  } else if ((rem10 >= 2 && rem10 <= 4) && (rem100 < 10 || rem100 > 20)) {\n    return scheme.singularGenitive.replace('{{count}}', count)\n\n  // 5, 6, 7, 8, 9, 10, 11, ...\n  } else {\n    return scheme.pluralGenitive.replace('{{count}}', count)\n  }\n}\n\nfunction buildLocalizeTokenFn (scheme) {\n  return function (count, options) {\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        if (scheme.future) {\n          return declension(scheme.future, count)\n        } else {\n          return 'через ' + declension(scheme.regular, count)\n        }\n      } else {\n        if (scheme.past) {\n          return declension(scheme.past, count)\n        } else {\n          return declension(scheme.regular, count) + ' назад'\n        }\n      }\n    } else {\n      return declension(scheme.regular, count)\n    }\n  }\n}\n\nfunction buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: buildLocalizeTokenFn({\n      regular: {\n        one: 'меньше секунды',\n        singularNominative: 'меньше {{count}} секунды',\n        singularGenitive: 'меньше {{count}} секунд',\n        pluralGenitive: 'меньше {{count}} секунд'\n      },\n      future: {\n        one: 'меньше, чем через секунду',\n        singularNominative: 'меньше, чем через {{count}} секунду',\n        singularGenitive: 'меньше, чем через {{count}} секунды',\n        pluralGenitive: 'меньше, чем через {{count}} секунд'\n      }\n    }),\n\n    xSeconds: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} секунда',\n        singularGenitive: '{{count}} секунды',\n        pluralGenitive: '{{count}} секунд'\n      },\n      past: {\n        singularNominative: '{{count}} секунду назад',\n        singularGenitive: '{{count}} секунды назад',\n        pluralGenitive: '{{count}} секунд назад'\n      },\n      future: {\n        singularNominative: 'через {{count}} секунду',\n        singularGenitive: 'через {{count}} секунды',\n        pluralGenitive: 'через {{count}} секунд'\n      }\n    }),\n\n    halfAMinute: function (_, options) {\n      if (options.addSuffix) {\n        if (options.comparison > 0) {\n          return 'через полминуты'\n        } else {\n          return 'полминуты назад'\n        }\n      }\n\n      return 'полминуты'\n    },\n\n    lessThanXMinutes: buildLocalizeTokenFn({\n      regular: {\n        one: 'меньше минуты',\n        singularNominative: 'меньше {{count}} минуты',\n        singularGenitive: 'меньше {{count}} минут',\n        pluralGenitive: 'меньше {{count}} минут'\n      },\n      future: {\n        one: 'меньше, чем через минуту',\n        singularNominative: 'меньше, чем через {{count}} минуту',\n        singularGenitive: 'меньше, чем через {{count}} минуты',\n        pluralGenitive: 'меньше, чем через {{count}} минут'\n      }\n    }),\n\n    xMinutes: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} минута',\n        singularGenitive: '{{count}} минуты',\n        pluralGenitive: '{{count}} минут'\n      },\n      past: {\n        singularNominative: '{{count}} минуту назад',\n        singularGenitive: '{{count}} минуты назад',\n        pluralGenitive: '{{count}} минут назад'\n      },\n      future: {\n        singularNominative: 'через {{count}} минуту',\n        singularGenitive: 'через {{count}} минуты',\n        pluralGenitive: 'через {{count}} минут'\n      }\n    }),\n\n    aboutXHours: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} часа',\n        singularGenitive: 'около {{count}} часов',\n        pluralGenitive: 'около {{count}} часов'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} час',\n        singularGenitive: 'приблизительно через {{count}} часа',\n        pluralGenitive: 'приблизительно через {{count}} часов'\n      }\n    }),\n\n    xHours: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} час',\n        singularGenitive: '{{count}} часа',\n        pluralGenitive: '{{count}} часов'\n      }\n    }),\n\n    xDays: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} день',\n        singularGenitive: '{{count}} дня',\n        pluralGenitive: '{{count}} дней'\n      }\n    }),\n\n    aboutXMonths: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} месяца',\n        singularGenitive: 'около {{count}} месяцев',\n        pluralGenitive: 'около {{count}} месяцев'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} месяц',\n        singularGenitive: 'приблизительно через {{count}} месяца',\n        pluralGenitive: 'приблизительно через {{count}} месяцев'\n      }\n    }),\n\n    xMonths: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} месяц',\n        singularGenitive: '{{count}} месяца',\n        pluralGenitive: '{{count}} месяцев'\n      }\n    }),\n\n    aboutXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'около {{count}} года',\n        singularGenitive: 'около {{count}} лет',\n        pluralGenitive: 'около {{count}} лет'\n      },\n      future: {\n        singularNominative: 'приблизительно через {{count}} год',\n        singularGenitive: 'приблизительно через {{count}} года',\n        pluralGenitive: 'приблизительно через {{count}} лет'\n      }\n    }),\n\n    xYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: '{{count}} год',\n        singularGenitive: '{{count}} года',\n        pluralGenitive: '{{count}} лет'\n      }\n    }),\n\n    overXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'больше {{count}} года',\n        singularGenitive: 'больше {{count}} лет',\n        pluralGenitive: 'больше {{count}} лет'\n      },\n      future: {\n        singularNominative: 'больше, чем через {{count}} год',\n        singularGenitive: 'больше, чем через {{count}} года',\n        pluralGenitive: 'больше, чем через {{count}} лет'\n      }\n    }),\n\n    almostXYears: buildLocalizeTokenFn({\n      regular: {\n        singularNominative: 'почти {{count}} год',\n        singularGenitive: 'почти {{count}} года',\n        pluralGenitive: 'почти {{count}} лет'\n      },\n      future: {\n        singularNominative: 'почти через {{count}} год',\n        singularGenitive: 'почти через {{count}} года',\n        pluralGenitive: 'почти через {{count}} лет'\n      }\n    })\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n    return distanceInWordsLocale[token](count, options)\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n/***/ }),\n/* 217 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 218 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar GT_ACCESS_TOKEN = exports.GT_ACCESS_TOKEN = 'GT_ACCESS_TOKEN';\nvar GT_VERSION = exports.GT_VERSION = \"1.6.2\"; // eslint-disable-line\nvar GT_COMMENT = exports.GT_COMMENT = 'GT_COMMENT';\n\n/***/ }),\n/* 219 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _toConsumableArray2 = __webpack_require__(220);\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _util = __webpack_require__(71);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getQL = function getQL(vars, pagerDirection) {\n  var cursorDirection = pagerDirection === 'last' ? 'before' : 'after';\n  var ql = '\\n  query getIssueAndComments(\\n    $owner: String!,\\n    $repo: String!,\\n    $id: Int!,\\n    $cursor: String,\\n    $pageSize: Int!\\n  ) {\\n    repository(owner: $owner, name: $repo) {\\n      issue(number: $id) {\\n        title\\n        url\\n        bodyHTML\\n        createdAt\\n        comments(' + pagerDirection + ': $pageSize, ' + cursorDirection + ': $cursor) {\\n          totalCount\\n          pageInfo {\\n            ' + (pagerDirection === 'last' ? 'hasPreviousPage' : 'hasNextPage') + '\\n            ' + (cursorDirection === 'before' ? 'startCursor' : 'endCursor') + '\\n          }\\n          nodes {\\n            id\\n            databaseId\\n            author {\\n              avatarUrl\\n              login\\n              url\\n            }\\n            bodyHTML\\n            body\\n            createdAt\\n            reactions(first: 100, content: HEART) {\\n              totalCount\\n              viewerHasReacted\\n              pageInfo{\\n                hasNextPage\\n              }\\n              nodes {\\n                id\\n                databaseId\\n                user {\\n                  login\\n                }\\n              }\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n  ';\n\n  if (vars.cursor === null) delete vars.cursor;\n\n  return {\n    operationName: 'getIssueAndComments',\n    query: ql,\n    variables: vars\n  };\n};\n\nfunction getComments(issue) {\n  var _this = this;\n\n  var _options = this.options,\n      owner = _options.owner,\n      repo = _options.repo,\n      perPage = _options.perPage,\n      pagerDirection = _options.pagerDirection,\n      defaultAuthor = _options.defaultAuthor;\n  var _state = this.state,\n      cursor = _state.cursor,\n      comments = _state.comments;\n\n  return _util.axiosGithub.post('/graphql', getQL({\n    owner: owner,\n    repo: repo,\n    id: issue.number,\n    pageSize: perPage,\n    cursor: cursor\n  }, pagerDirection), {\n    headers: {\n      Authorization: 'bearer ' + this.accessToken\n    }\n  }).then(function (res) {\n    var data = res.data.data.repository.issue.comments;\n    var items = data.nodes.map(function (node) {\n      var author = node.author || defaultAuthor;\n\n      return {\n        id: node.databaseId,\n        gId: node.id,\n        user: {\n          avatar_url: author.avatarUrl,\n          login: author.login,\n          html_url: author.url\n        },\n        created_at: node.createdAt,\n        body_html: node.bodyHTML,\n        body: node.body,\n        html_url: 'https://github.com/' + owner + '/' + repo + '/issues/' + issue.number + '#issuecomment-' + node.databaseId,\n        reactions: node.reactions\n      };\n    });\n\n    var cs = void 0;\n\n    if (pagerDirection === 'last') {\n      cs = [].concat((0, _toConsumableArray3.default)(items), (0, _toConsumableArray3.default)(comments));\n    } else {\n      cs = [].concat((0, _toConsumableArray3.default)(comments), (0, _toConsumableArray3.default)(items));\n    }\n\n    var isLoadOver = data.pageInfo.hasPreviousPage === false || data.pageInfo.hasNextPage === false;\n    _this.setState({\n      comments: cs,\n      isLoadOver: isLoadOver,\n      cursor: data.pageInfo.startCursor || data.pageInfo.endCursor\n    });\n    return cs;\n  });\n}\n\nexports.default = getComments;\n\n/***/ }),\n/* 220 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _from = __webpack_require__(221);\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n/***/ }),\n/* 221 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(222), __esModule: true };\n\n/***/ }),\n/* 222 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(20);\n__webpack_require__(223);\nmodule.exports = __webpack_require__(0).Array.from;\n\n\n/***/ }),\n/* 223 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar ctx = __webpack_require__(13);\nvar $export = __webpack_require__(4);\nvar toObject = __webpack_require__(17);\nvar call = __webpack_require__(57);\nvar isArrayIter = __webpack_require__(58);\nvar toLength = __webpack_require__(37);\nvar createProperty = __webpack_require__(224);\nvar getIterFn = __webpack_require__(42);\n\n$export($export.S + $export.F * !__webpack_require__(63)(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n/***/ }),\n/* 224 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar $defineProperty = __webpack_require__(7);\nvar createDesc = __webpack_require__(19);\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=gitalk.js.map"]}]}